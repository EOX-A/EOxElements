const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-CVS-eEjT.js","./_commonjsHelpers-BosuxZz1.js","./chunk-GKNNPQCW-BkHQSocK.js","./jsx-runtime-BH2e41Ho.js","./index-DPi3VKvb.js","./index-e1tz9qOi.js","./iframe-E8uqewoS.js","./index-CncbU-wR.js","./index-DrFu-skq.js","./lit-element-DBwSto7d.js","./directive-helpers-wF05HaIw.js","./index-CBTDJjUK.js","./webimage-BcnuJlio.js","./decoder-Ddo2r026.js"])))=>i.map(i=>d[i]);
var DNe=Object.defineProperty;var nge=i=>{throw TypeError(i)};var LNe=(i,e,t)=>e in i?DNe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ye=(i,e,t)=>LNe(i,typeof e!="symbol"?e+"":e,t),aM=(i,e,t)=>e.has(i)||nge("Cannot "+t);var ki=(i,e,t)=>(aM(i,e,"read from private field"),t?t.call(i):e.get(i)),Tn=(i,e,t)=>e.has(i)?nge("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),da=(i,e,t,n)=>(aM(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Us=(i,e,t)=>(aM(i,e,"access private method"),t);import{s as MNe}from"./chunk-GKNNPQCW-BkHQSocK.js";import{j as Uu}from"./jsx-runtime-BH2e41Ho.js";import{useMDXComponents as bwe}from"./index-DPi3VKvb.js";import{e as INe,f as ONe,h as PNe,P as FNe,i as NNe,j as $Ne,k as BNe,l as LS}from"./index-e1tz9qOi.js";import{g as Ea,c as Jr,a as eN}from"./_commonjsHelpers-BosuxZz1.js";import{T as In,s as Yn,x as tt,i as jNe,u as zNe,f as GNe,w as Wv,j as UNe,b as rge}from"./lit-element-DBwSto7d.js";import{m as tN,p as qNe,v as Im,r as Zx,h as lM,f as VNe}from"./directive-helpers-wF05HaIw.js";import{n as sge}from"./index-CBTDJjUK.js";import{_ as zg}from"./iframe-E8uqewoS.js";const oge={duration:750},age={type:"FeatureCollection",features:[]},HNe="1.0.0",WNe="",XNe=[{kind:"javascript-module",path:"elements/drawtools/src/main.js",declarations:[{kind:"class",description:"Manage drawn features on a map",name:"EOxDrawTools",members:[{kind:"field",name:"#eoxMap",privacy:"private",type:{text:"EOxMap"}},{kind:"field",name:"#olMap",privacy:"private",type:{text:"Map"}},{kind:"field",name:"#geoJSON",privacy:"private",type:{text:"string"}},{kind:"method",name:"handleStartDrawing"},{kind:"method",name:"handleDiscardDrawing"},{kind:"method",name:"handleFeatureChange",parameters:[{name:"text",description:"The string representation of the features to be parsed.",type:{text:"string"}},{name:"replaceFeatures",default:"false",description:"A boolean flag indicating whether to replace the existing features.",type:{text:"boolean"}}]},{kind:"method",name:"handleFilesChange",parameters:[{name:"evt",description:"The event object from the file input interaction.",type:{text:"DragEvent | Event"}}]},{kind:"method",name:"onModifyEnd"},{kind:"method",name:"updateGeoJSON",description:"Update #geoJSON with stringify feature."},{kind:"method",name:"emitDrawnFeatures",description:"Triggers different events when the drawing of a shape is completed."},{kind:"field",name:"allowModify",privacy:"public",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",attribute:"allow-modify"},{kind:"field",name:"for",privacy:"public",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',attribute:"for"},{kind:"field",name:"currentlyDrawing",privacy:"public",type:{text:"boolean"},description:"Whether the user is currently in the process of drawing or not",default:"false"},{kind:"field",name:"draw",privacy:"public",type:{text:"Draw"},description:"The current native OpenLayers `draw` interaction",default:"null"},{kind:"field",name:"drawLayer",privacy:"public",type:{text:"default<default>"},description:"The current native OpenLayers draw `layer`",default:"null"},{kind:"field",name:"drawnFeatures",privacy:"public",type:{text:"Array<Feature>"},description:"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.",default:"[]"},{kind:"field",name:"modify",privacy:"public",type:{text:"Modify"},description:"The current native OpenLayers `modify` interaction",default:"null"},{kind:"field",name:"multipleFeatures",privacy:"public",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",attribute:"multiple-features"},{kind:"field",name:"importFeatures",privacy:"public",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",attribute:"import-features"},{kind:"field",name:"showEditor",privacy:"public",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",attribute:"show-editor"},{kind:"field",name:"showList",privacy:"public",type:{text:"boolean"},description:"Show list of features",default:"false",attribute:"show-list"},{kind:"field",name:"type",privacy:"public",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',attribute:"type"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"noShadow"}],events:[{name:"drawupdate",type:{text:"Array<Feature>"},description:"Fires whenever features are added, modified or discarded, where the event detail\nis the `drawnFeatures` array"}],attributes:[{name:"allow-modify",type:{text:"boolean"},description:"Allow modifying the drawn feature(s)",default:"false",fieldName:"allowModify"},{name:"for",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',fieldName:"for"},{name:"multiple-features",type:{text:"boolean"},description:"Allow adding more than one feature at a time",default:"false",fieldName:"multipleFeatures"},{name:"import-features",type:{text:"boolean"},description:"Allow import features using drag-drop and upload button",default:"false",fieldName:"importFeatures"},{name:"show-editor",type:{text:"boolean"},description:"Show geo-json editor for draw tool",default:"false",fieldName:"showEditor"},{name:"show-list",type:{text:"boolean"},description:"Show list of features",default:"false",fieldName:"showList"},{name:"noShadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"type",type:{text:'"Polygon" | "Point" | "LineString" | "Circle" | "Box"'},description:"Type of the drawn feature",default:'"Polygon"',fieldName:"type"},{name:"unstyled",type:{text:"boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-drawtools",customElement:!0}],exports:[{kind:"js",name:"EOxDrawTools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}},{kind:"custom-element-definition",name:"eox-drawtools",declaration:{name:"EOxDrawTools",module:"elements/drawtools/src/main.js"}}]},{kind:"javascript-module",path:"elements/geosearch/src/main.js",declarations:[{kind:"class",description:"",name:"EOxGeoSearch",members:[{kind:"field",name:"#eoxMap",privacy:"private",type:{text:"EOxMap"}},{kind:"method",name:"onInput",parameters:[{name:"e"}]},{kind:"method",name:"onInputBlur"},{kind:"method",name:"onButtonClick"},{kind:"method",name:"getFlexDirection"},{kind:"method",name:"getResultsDirection"},{kind:"method",name:"getVerticalAlign"},{kind:"method",name:"getMarginDirection",parameters:[{name:"direction"}]},{kind:"method",name:"handleSelect",parameters:[{name:"event"}]},{kind:"field",name:"_data",privacy:"private",description:"Internal storage of OpenCage API data after a successful API request.",type:{text:"array"},default:"[]"},{kind:"field",name:"_isListVisible",privacy:"private",description:"Whether or not the list dropdown is visible.",type:{text:"boolean"},default:"false"},{kind:"field",name:"_isInputVisible",privacy:"private",description:"Whether or not the input field is visible.",type:{text:"boolean"},default:"false"},{kind:"field",name:"_query",privacy:"private",description:"The search query, which is bound to the input field.",type:{text:"string"},default:'""'},{kind:"field",name:"for",privacy:"public",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',attribute:"for"},{kind:"field",name:"listDirection",type:{text:"string"},default:'"right"'},{kind:"field",name:"resultsDirection",privacy:"public",type:{text:"string"},description:"The direction of the results box relative to the input, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",default:'"down"',attribute:"results-direction"},{kind:"field",name:"interval",privacy:"public",type:{text:"number"},description:"Set a custom interval for the debounce function.",default:"800",attribute:"interval"},{kind:"field",name:"fetchDebounced"},{kind:"field",name:"endpoint",privacy:"public",type:{text:"string"},description:"The OpenCage API endpoint to use for the search, including the key but without the query parameter.",attribute:"endpoint"},{kind:"field",name:"queryParameter",privacy:"public",type:{text:"string"},description:"The name of the query parameter to use for the search query in the endpoint URI.",attribute:"queryParameter"},{kind:"field",name:"button",privacy:"public",type:{text:"boolean"},description:`Whether or not to enable button mode, which hides and shows the input field
similar to how a modal works.`,attribute:"button"},{kind:"field",name:"small",privacy:"public",type:{text:"boolean"},description:"Enables a smaller version of the button for use in map controls.",attribute:"small"},{kind:"field",name:"label",privacy:"public",type:{text:"string"},description:"Which text to use for the button if it is enabled.",attribute:"label"},{kind:"field",name:"direction",privacy:"public",type:{text:"string"},description:"The direction of the search input relative to the button, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",attribute:"list-direction"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},attribute:"unstyled"}],events:[{name:"geosearchSelect",type:{text:"CustomEvent"},description:"The select event, including the details of the selected item"}],attributes:[{name:"endpoint",type:{text:"string"},description:"The OpenCage API endpoint to use for the search, including the key but without the query parameter.",fieldName:"endpoint"},{name:"for",type:{text:"string"},description:"The query selector for the map",default:'"eox-map"',fieldName:"for"},{name:"queryParameter",type:{text:"string"},description:"The name of the query parameter to use for the search query in the endpoint URI.",fieldName:"queryParameter"},{name:"button",type:{text:"boolean"},description:`Whether or not to enable button mode, which hides and shows the input field
similar to how a modal works.`,fieldName:"button"},{name:"interval",type:{text:"number"},description:"Set a custom interval for the debounce function.",default:"800",fieldName:"interval"},{name:"small",type:{text:"boolean"},description:"Enables a smaller version of the button for use in map controls.",fieldName:"small"},{name:"label",type:{text:"string"},description:"Which text to use for the button if it is enabled.",fieldName:"label"},{name:"list-direction",type:{text:"string"},description:"The direction of the search input relative to the button, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",fieldName:"direction"},{name:"results-direction",type:{text:"string"},description:"The direction of the results box relative to the input, with the following options:\n\n- `left`\n- `top`\n- `right`\n- `bottom`",default:'"down"',fieldName:"resultsDirection"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-geosearch",customElement:!0},{kind:"class",description:"",name:"EOxGeoSearchItem",members:[{kind:"field",name:"item",privacy:"public",type:{text:"object"},attribute:"item"},{kind:"field",name:"onClick",privacy:"public",type:{text:"function"},attribute:"onClick"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"boolean"},attribute:"unstyled"}],attributes:[{name:"item",type:{text:"object"},fieldName:"item"},{name:"onClick",type:{text:"function"},fieldName:"onClick"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-geosearch-item",customElement:!0}],exports:[{kind:"custom-element-definition",name:"eox-geosearch",declaration:{name:"EOxGeoSearch",module:"elements/geosearch/src/main.js"}},{kind:"custom-element-definition",name:"eox-geosearch-item",declaration:{name:"EOxGeoSearchItem",module:"elements/geosearch/src/main.js"}},{kind:"js",name:"EOxGeoSearch",declaration:{name:"EOxGeoSearch",module:"elements/geosearch/src/main.js"}}]},{kind:"javascript-module",path:"elements/jsonform/src/main.js",declarations:[{kind:"class",description:"",name:"EOxJSONForm",members:[{kind:"field",name:"#editor",privacy:"private",type:{text:"{[key: string]: any}"},default:"null",description:"editor instance generated through - JSONEditor"},{kind:"field",name:"editor",description:"Getter for the JSONEditor instance",readonly:!0},{kind:"field",name:"schema",privacy:"public",type:{text:"object"},description:"Setter for the JSON schema used to render the form",return:{type:{text:"JsonSchema | String"}},parameters:[{name:"newSchema",type:{text:"JsonSchema"}}]},{kind:"field",name:"value",privacy:"public",type:{text:"object"},description:"Setter for the default values to fill the form",parameters:[{name:"newVal",type:{text:"JsonSchema"}}]},{kind:"method",name:"#emitValue",privacy:"private",description:"Value object has been changed"},{kind:"method",name:"#dispatchEvent",privacy:"private",description:"Dispatch same function for multiple event type"},{kind:"field",name:"options",privacy:"public",type:{text:"object"},description:"Default values for the form editor",default:"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"}],events:[{name:"change",type:{text:"CustomEvent"}}],attributes:[{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-jsonform",customElement:!0}],exports:[{kind:"js",name:"EOxJSONForm",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}},{kind:"custom-element-definition",name:"eox-jsonform",declaration:{name:"EOxJSONForm",module:"elements/jsonform/src/main.js"}}]},{kind:"javascript-module",path:"elements/layercontrol/src/main.js",declarations:[{kind:"class",description:`Display layers and groups of a connected OpenLayers map

## Layer properties
In order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. \`layer.set(property, value)\`).

#### \`id?: string\`
The layer id. Not required but recommended. Can also be any other layer property (defined via the \`idProperty\` property or \`id-property\`attribute - see API).

#### \`title?: string\`
The title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the \`titleProperty\` property or \`title-property\`attribute - see API).

#### \`layerControlHide?: Boolean\`
Completely hide a layer from the layer control.

#### \`layerControlOptional?: Boolean\`
Initially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.

#### \`layerControlExclusive?: Boolean\`
Make layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.

#### \`layerControlExpand?: Boolean\`
Pre-expand a layer dropdown so that it is always open when the component initializes.

#### \`layerControlToolsExpand?: Boolean\`
Pre-expand the layer tools so they are visible when the component initializes.

#### \`layerConfig?: Object\`
Configuration options for the layer (displayed in the layer tools' "config" tab)`,name:"EOxLayerControl",members:[{kind:"field",name:"#eoxMap",privacy:"private",description:"Instance of `eox-map` which is a wrapper for the OL",type:{text:"EOxMap"}},{kind:"method",name:"#handleLayerControlLayerListChange",privacy:"private",parameters:[{name:"evt",type:{text:"CustomEvent & {target: Element}"}}],description:"Event handler for changes in the layer list"},{kind:"field",name:"#styleEOX",privacy:"private",default:"`* { font-family: Roboto, sans-serif; }`"},{kind:"field",name:"for",privacy:"public",type:{text:"String|HTMLElement"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',attribute:"for"},{kind:"field",name:"idProperty",privacy:"public",type:{text:"String"},description:"Layer id property",default:'"id"',attribute:"id-property"},{kind:"field",name:"map",privacy:"public",type:{text:"Map"},description:"The native OL map instance",default:"null"},{kind:"field",name:"titleProperty",privacy:"public",type:{text:"String"},description:"Layer title property",default:'"title"',attribute:"title-property"},{kind:"field",name:"showLayerZoomState",privacy:"public",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",attribute:"show-layer-zoom-state"},{kind:"field",name:"tools",privacy:"public",type:{text:"Array<String>"},description:"Layer tools",default:'["info", "opacity", "config", "remove", "sort"]'},{kind:"field",name:"addExternalLayers",privacy:"public",type:{text:"Boolean"},description:"Enable-disable external layer",default:"false"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"styleOverride",privacy:"public",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',attribute:"styleOverride"}],events:[{name:"layerchange",type:{text:"CustomEvent"},description:"A generic layer change event; could be a layer visibility, group length updates and others.\nPasses the changed layer in the `detail`."}],attributes:[{name:"for",type:{text:"String|HTMLElement"},description:"Query selector of an eox-map or another DOM element containing an OL map proeprty",default:'"eox-map"',fieldName:"for"},{name:"id-property",type:{text:"String"},description:"Layer id property",default:'"id"',fieldName:"idProperty"},{name:"title-property",type:{text:"String"},description:"Layer title property",default:'"title"',fieldName:"titleProperty"},{name:"show-layer-zoom-state",type:{text:"Boolean"},description:"Show layer state based on zoom level or not",default:"false",fieldName:"showLayerZoomState"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"},{name:"styleOverride",type:{text:"String"},description:"Overrides elements current CSS.",default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-layercontrol",customElement:!0}],exports:[{kind:"js",name:"EOxLayerControl",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}},{kind:"custom-element-definition",name:"eox-layercontrol",declaration:{name:"EOxLayerControl",module:"elements/layercontrol/src/main.js"}}]},{kind:"javascript-module",path:"elements/layout/src/main.js",declarations:[{kind:"class",description:"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\n- `eox-layout`: the container holding all the items\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)",name:"EOxLayout",members:[],attributes:[{name:"gap"}],superclass:{name:"HTMLElement"},tagName:"eox-layout",customElement:!0},{kind:"class",description:"",name:"EOxLayoutItem",members:[],attributes:[{name:"x"},{name:"y"},{name:"w"},{name:"h"}],superclass:{name:"HTMLElement"},tagName:"eox-layout-item",customElement:!0}],exports:[{kind:"js",name:"EOxLayout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"js",name:"EOxLayoutItem",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout",declaration:{name:"EOxLayout",module:"elements/layout/src/main.js"}},{kind:"custom-element-definition",name:"eox-layout-item",declaration:{name:"EOxLayoutItem",module:"elements/layout/src/main.js"}}]},{kind:"javascript-module",path:"elements/storytelling/src/main.js",declarations:[{kind:"class",description:"Manage drawn features on a map",name:"EOxStoryTelling",members:[{kind:"field",name:"#html",privacy:"private",description:"Generated HTML string using markdown",type:{text:"String"},default:"undefined"},{kind:"field",name:"#config",privacy:"private",type:{text:"Object"},default:"{}",description:"Basic config"},{kind:"field",name:"#debounceUpdateMarkdown",privacy:"private",type:{text:"Object"},default:"null",description:"Debounce update markdown"},{kind:"method",name:"#dispatchInitEvent",privacy:"private",parameters:[{name:"element",description:"Dom element",type:{text:"Element"}}]},{kind:"method",name:"handleSlotChange",description:"Handles changes to the slot's content, updating the component's internal state."},{kind:"method",name:"waitForHtmlInitialization"},{kind:"field",name:"markdown",privacy:"public",type:{text:"String"},description:"Markdown Content",default:'""',attribute:"markdown"},{kind:"field",name:"markdownURL",privacy:"public",type:{text:"String"},description:"Markdown Content URL",default:"null",attribute:"markdown-url"},{kind:"field",name:"unstyled",privacy:"public",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",attribute:"unstyled"},{kind:"field",name:"noShadow",privacy:"public",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",attribute:"no-shadow"},{kind:"field",name:"showEditor",privacy:"public",type:{text:'String | "closed" | undefined'},description:"Enable or disable editor",default:"undefined",attribute:"show-editor"},{kind:"field",name:"showNav",privacy:"public",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",attribute:"show-nav"},{kind:"field",name:"nav",privacy:"public",type:{text:"Array<Object>"},description:"List of items in navigation",default:"[]"},{kind:"field",name:"addCustomSectionIndex",privacy:"public",type:{text:"Number"},description:"custom section index",default:"-1",attribute:"addCustomSectionIndex"},{kind:"field",name:"selectedCustomElement",privacy:"public",type:{text:"Object | null"},description:"Selected custom element object",default:"null",attribute:"selectedCustomElement"}],events:[{name:"init",type:{text:"CustomEvent"}}],attributes:[{name:"markdown",type:{text:"String"},description:"Markdown Content",default:'""',fieldName:"markdown"},{name:"markdown-url",type:{text:"String"},description:"Markdown Content URL",default:"null",fieldName:"markdownURL"},{name:"show-nav",type:{text:"Boolean"},description:"Enable or disable navigation",default:"false",fieldName:"showNav"},{name:"show-editor",type:{text:'String | "closed" | undefined'},description:"Enable or disable editor",default:"undefined",fieldName:"showEditor"},{name:"no-shadow",type:{text:"Boolean"},description:"Renders the element without a shadow root",default:"false",fieldName:"noShadow"},{name:"unstyled",type:{text:"Boolean"},description:"Render the element without additional styles",default:"false",fieldName:"unstyled"},{name:"addCustomSectionIndex",type:{text:"Number"},description:"custom section index",default:"-1",fieldName:"addCustomSectionIndex"},{name:"selectedCustomElement",type:{text:"Object | null"},description:"Selected custom element object",default:"null",fieldName:"selectedCustomElement"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-storytelling",customElement:!0}],exports:[{kind:"js",name:"EOxStoryTelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}},{kind:"custom-element-definition",name:"eox-storytelling",declaration:{name:"EOxStoryTelling",module:"elements/storytelling/src/main.js"}}]},{kind:"javascript-module",path:"elements/map/main.ts",declarations:[{kind:"class",description:'The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\n\nBasic usage:\n\n```\nimport "@eox/map"\n\n<eox-map [...]></eox-map>\n```\n\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\nrequired to import the `advanced-layers-and-sources` plugin.\n\nIncluded in the base bundle:\n- Formats: `GeoJSON`, `MVT`\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\n\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\n\n```\nimport "@eox/map/dist/eox-map-advanced-layers-and-sources.js"\nimport "@eox/map/dist/eox-map.js"\n\n<eox-map [...]></eox-map>\n```\nIncluded in the advanced plugin bundle:\n- Layers:\n  - All OpenLayers layer types\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\n- Sources:\n  - All OpenLayers source types\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)',name:"EOxMap",members:[{kind:"field",name:"_center",type:{text:"Coordinate"},privacy:"private",default:"[0, 0]"},{kind:"field",name:"center",description:`Map center, always in the same projection as the view.
when setting the map center,`},{kind:"field",name:"_zoom",type:{text:"number"},privacy:"private",default:"0"},{kind:"field",name:"zoom",description:`Map center, always in the same projection as the view.
when setting the map center,`},{kind:"field",name:"_zoomExtent",type:{text:'import("ol/extent").Extent'},privacy:"private"},{kind:"field",name:"zoomExtent",description:"extent to zoom to",type:{text:"Extent"}},{kind:"field",name:"_controls",type:{text:"controlDictionary"},privacy:"private"},{kind:"field",name:"controls",description:"Map controls, in JSON format"},{kind:"field",name:"_layers",type:{text:"Array<EoxLayer>"},privacy:"private"},{kind:"field",name:"layers",description:"The map layers, in eox-map JSON format!",type:{text:"Array<EoxLayer>"}},{kind:"field",name:"_preventScroll",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"preventScroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},attribute:"prevent-scroll"},{kind:"field",name:"_config",type:{text:"ConfigObject"},privacy:"private"},{kind:"field",name:"config",description:"Config object, including `controls`, `layers` and `view`.\nAlternative way of defining the map config."},{kind:"field",name:"_animationOptions",type:{text:"EOxAnimationOptions"},privacy:"private",default:"{}"},{kind:"field",name:"animationOptions",description:"animationOptions",type:{text:"AnimationOptions"}},{kind:"field",name:"_projection",type:{text:"ProjectionLike"},privacy:"private"},{kind:"field",name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",attribute:"projection"},{kind:"field",name:"_sync",type:{text:"string | EOxMap | undefined"},privacy:"private"},{kind:"field",name:"sync",description:"Sync map with another map view by providing its query selector or an eox-map DOM element",attribute:"sync"},{kind:"field",name:"map",type:{text:"Map"},default:"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })",description:`The native OpenLayers map object.
See [https://openlayers.org/en/latest/apidoc/](https://openlayers.org/en/latest/apidoc/)`},{kind:"field",name:"interactions",type:{text:"{ [index: string]: Draw | Modify }"},default:"{}",description:"Dictionary of ol interactions associated with the map."},{kind:"field",name:"selectInteractions",type:{text:"{ [index: string]: EOxSelectInteraction }"},default:"{}",description:"Dictionary of select interactions."},{kind:"field",name:"mapControls",type:{text:"{ [index: string]: Control }"},default:"{}",description:"Dictionary of ol controls associated with the map."},{kind:"method",name:"_animateToState",privacy:"private",description:`animates to current definition.
will animate to zoom/center if animationOptions are set`},{kind:"field",name:"addOrUpdateLayer",description:`Creates or updates an existing layer
will update an layer if the ID already exists`,parameters:[{description:"EoxLayer JSON definition",name:"json"}],return:{type:{text:""}}},{kind:"field",name:"removeInteraction",description:"Removes a given ol-interaction from the map. Layer have to be removed seperately",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeSelect",description:"Removes a given EOxSelectInteraction from the map.",parameters:[{description:"id of the interaction",name:"id"}]},{kind:"field",name:"removeControl",description:"Removes a given control from the map.",parameters:[{description:"id of the control element",name:"id"}]},{kind:"field",name:"getLayerById",description:'Gets an OpenLayers-Layer by its "id"',parameters:[{description:"id of the layer",name:"id"}]},{kind:"field",name:"parseFeature",description:`Converts an array of OpenLayers Feature objects into a GeoJSON object.
This function utilizes the OpenLayers GeoJSON format writer to serialize`,parameters:[{description:"The array of features to be serialized.",name:"features"}],return:{type:{text:""}}},{kind:"field",name:"parseTextToFeature",description:"Parses a text representation of geographic features and adds them to a vector layer.",parameters:[{description:"The string representation of the features to be parsed.",name:"text"},{description:"The vector layer to which the parsed features will be added.",name:"vectorLayer"},{description:"A boolean flag indicating whether to replace the existing features in the vector layer.",name:"replaceFeatures"}]},{kind:"field",name:"registerProjectionFromCode",default:"registerProjectionFromCode"},{kind:"field",name:"registerProjection",default:"registerProjection"},{kind:"field",name:"getFlatLayersArray",default:"getFlatLayersArray",description:`Gets all map layers (including groups and nested layers)
as flat array`},{kind:"method",name:"buffer",parameters:[{name:"extent",type:{text:"Extent"}},{name:"value",type:{text:"number"}}],description:"Return extent increased by the provided value.",return:{type:{text:"Extent"}}}],events:[{name:"loadend",type:{text:"CustomEvent"},description:`OpenLayers map has finished loading, passes the map instance as detail.
For all other native events, attach an event listener to the map instance directly`},{name:"mapmounted",type:{text:"CustomEvent"}}],attributes:[{name:"prevent-scroll",description:`Prevent accidental scrolling / drag-pan of the map.
Scrolling only enabled while pressing the platform modifier key (ctrl/cmd).`,type:{text:"Boolean"},fieldName:"preventScroll"},{name:"projection",type:{text:"ProjectionLike"},description:"projection of the map view as SRS-identifier (e.g. EPSG:4326)",fieldName:"projection"},{name:"sync",description:"Sync map with another map view by providing its query selector or an eox-map DOM element",fieldName:"sync"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-map",customElement:!0}],exports:[{kind:"js",name:"EOxMap",declaration:{name:"EOxMap",module:"elements/map/main.ts"}},{kind:"custom-element-definition",name:"eox-map",declaration:{name:"EOxMap",module:"elements/map/main.ts"}}]},{kind:"javascript-module",path:"elements/chart/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxChart",members:[{kind:"field",name:"shadowRoot",type:{text:"ShadowRoot"}},{kind:"field",name:"chart",type:{text:"Chart"},description:`The native chart.js object.
See [https://www.chartjs.org/docs/latest/developers/api.html](https://www.chartjs.org/docs/latest/developers/api.html)`},{kind:"field",name:"setData",type:{text:"(body: { datasets: ChartDataset[] }) => void"},description:"Set chart data, TODO description"},{kind:"field",name:"setOptions",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsData",type:{text:"(body: object) => void"}},{kind:"field",name:"setSignalsEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}},{kind:"field",name:"setSignalsGeometry",type:{text:"(geometry: object) => void"}},{kind:"field",name:"setGeoDBEndpoint",type:{text:`(options: {
    source: string;
    endpoint: string;
    active: string[];
    features: string[][];
    geometry: object;
    timeInterval: object;
    startTime?: string;
    endTime?: string;
  }) => void`}}],superclass:{name:"HTMLElement"},tagName:"eox-chart",customElement:!0}],exports:[{kind:"js",name:"EOxChart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}},{kind:"custom-element-definition",name:"eox-chart",declaration:{name:"EOxChart",module:"elements/chart/src/main.ts"}}]},{kind:"javascript-module",path:"elements/itemfilter/src/main.ts",declarations:[{kind:"class",description:"",name:"ElementConfig",members:[{kind:"field",name:"aggregateResults",type:{text:"string | undefined"},privacy:"public",default:"undefined",description:"Aggregate results by a property key"},{kind:"field",name:"autoSpreadSingle",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Automatically spread single item summaries
removing the summary header`},{kind:"field",name:"enableHighlighting",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:"Highlighting of search result character matches"},{kind:"field",name:"externalFilter",type:{text:"(input: string, filters: object[]) => string | undefined"},privacy:"public",description:`Use an external search endpoint instead of fuse search.
Passed properties: input string, filters object`},{kind:"field",name:"filterProperties",type:{text:"Array<FilterObject> | undefined"},privacy:"public",default:"[]",description:"The filter properties.",parameters:[{name:"filterProperties"}]},{kind:"field",name:"fuseConfig",type:{text:"object | undefined"},privacy:"public",description:"Native fuse.js config override"},{kind:"field",name:"inlineMode",type:{text:"boolean | undefined"},privacy:"public",default:"false",description:`Inline mode, for rendering the itemfilter in avery condensed space.
Expexts showResults to be false`},{kind:"field",name:"matchAllWhenEmpty",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Show all result items if nothing is input by the user"},{kind:"field",name:"onFilter",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item search",return:{type:{text:""}}},{kind:"field",name:"onSelect",type:{text:"Function | undefined"},privacy:"public",description:"Callback that is triggered on item selection",return:{type:{text:""}}},{kind:"field",name:"showResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Display results list"},{kind:"field",name:"titleProperty",type:{text:"string"},privacy:"public",default:'"title"',description:"The property of the result items used for display"},{kind:"field",name:"expandMultipleFilters",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple filter accordeons in parallel"},{kind:"field",name:"expandResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Initialize result accordeons expanded"},{kind:"field",name:"expandMultipleResults",type:{text:"boolean | undefined"},privacy:"public",default:"true",description:"Allow opening multiple result accordeons in parallel"}]},{kind:"class",description:"",name:"EOxItemFilter",members:[{kind:"field",name:"_resultAggregation",type:{text:"Array<string>"},default:"[]"},{kind:"field",name:"_items",type:{text:"Record<string, unknown>[]"},default:"[]"},{kind:"field",name:"filters",type:{text:"{ [key: string]: FilterObject }"},privacy:"public",default:"{}"},{kind:"field",name:"results",type:{text:"Record<string, unknown>[]"},privacy:"public"},{kind:"field",name:"selectedResult",type:{text:"Item"},privacy:"public"},{kind:"field",name:"items"},{kind:"field",name:"config"},{kind:"field",name:"_config",privacy:"private",default:"new ElementConfig()"},{kind:"field",name:"apply",attribute:"apply"},{kind:"field",name:"styleOverride",type:{text:"string"}},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"search",privacy:"private"},{kind:"method",name:"aggregateResults",parameters:[{name:"items",type:{text:"FilterObject[]"}},{name:"property",type:{text:"string"}}]},{kind:"method",name:"createItemList",parameters:[{name:"aggregationProperty",type:{text:"string"}}]},{kind:"method",name:"sortResults",parameters:[{name:"items",type:{text:"Record<string, unknown>[]"}}]},{kind:"method",name:"resetFilters"},{kind:"method",name:"toggleAccordion",parameters:[{name:"event",type:{text:"CustomEvent"}}]}],attributes:[{name:"apply",fieldName:"apply"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"TemplateElement",module:"/utils/templateElement"},tagName:"eox-itemfilter",customElement:!0}],exports:[{kind:"js",name:"ElementConfig",declaration:{name:"ElementConfig",module:"elements/itemfilter/src/main.ts"}},{kind:"js",name:"EOxItemFilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}},{kind:"custom-element-definition",name:"eox-itemfilter",declaration:{name:"EOxItemFilter",module:"elements/itemfilter/src/main.ts"}}]},{kind:"javascript-module",path:"elements/stacinfo/src/main.ts",declarations:[{kind:"class",description:`### Introduction
Working with STAC catalogs, collections and items often times requires
to fetch a JSON file, parse its contents and display some of its fields
in some formatted way. To make these steps reusable, the \`eox-stacinfo\`
element offers a set of functionalities:
- **automatically fetch a STAC file** as soon as the element loads
- offer a **property whitelist** functionality to choose which properties to display
- display the properties in **configurable sections** (header, featured, footer)
- allow to **override** any property display for application-specific custom needs

The use case for this element is alongside a map which displays STAC files
or in a catalog browsing scenario where a quick look at the most important properties
is needed.

#### Technology
Under the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.`,name:"EOxStacInfo",members:[{kind:"field",name:"allowHtml",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",attribute:"allow-html"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"field",name:"for",type:{text:"string"},attribute:"for"},{kind:"field",name:"header",type:{text:"Array<string>"},default:"[]",attribute:"header"},{kind:"field",name:"tags",type:{text:"Array<string>"},default:"[]",attribute:"tags"},{kind:"field",name:"featured",type:{text:"Array<string>"},default:"[]",attribute:"featured"},{kind:"field",name:"footer",type:{text:"Array<string>"},default:"[]",attribute:"footer"},{kind:"field",name:"styleOverride",type:{text:"string"},default:'""',attribute:"style-override"},{kind:"field",name:"stacInfo",type:{text:"Array<typeof STAC>"},default:"[]"},{kind:"field",name:"stacProperties",type:{text:"Array<typeof STAC>"},privacy:"public"},{kind:"field",name:"fetchStac"},{kind:"field",name:"parseStac"},{kind:"method",name:"buildProperties",parameters:[{name:"stacArray",type:{text:"Array<typeof STAC>"}}]}],attributes:[{name:"allow-html",type:{text:"boolean"},description:"Allow HTML rendering in properties (such as description)",fieldName:"allowHtml"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"},{name:"for",type:{text:"string"},fieldName:"for"},{name:"header",type:{text:"Array<string>"},default:"[]",fieldName:"header"},{name:"tags",type:{text:"Array<string>"},default:"[]",fieldName:"tags"},{name:"properties",type:{text:"Array<string>"},default:"[]",fieldName:"properties"},{name:"featured",type:{text:"Array<string>"},default:"[]",fieldName:"featured"},{name:"footer",type:{text:"Array<string>"},default:"[]",fieldName:"footer"},{name:"style-override",type:{text:"string"},default:'""',fieldName:"styleOverride"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-stacinfo",customElement:!0},{kind:"class",description:`For some property renderings, we want a separate
custom element with its own shadow root, so that
the general styling does not affect it (except globals
like fonts, variables etc.)`,name:"EOxStacInfoShadow",members:[{kind:"field",name:"content",type:{text:"null"},attribute:"content"}],attributes:[{name:"content",type:{text:"null"},fieldName:"content"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-stacinfo-shadow",customElement:!0}],exports:[{kind:"js",name:"EOxStacInfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}},{kind:"custom-element-definition",name:"eox-stacinfo",declaration:{name:"EOxStacInfo",module:"elements/stacinfo/src/main.ts"}},{kind:"js",name:"EOxStacInfoShadow",declaration:{name:"EOxStacInfoShadow",module:"elements/stacinfo/src/main.ts"}},{kind:"custom-element-definition",name:"eox-stacinfo-shadow",declaration:{name:"EOxStacInfoShadow",module:"elements/stacinfo/src/main.ts"}}]},{kind:"javascript-module",path:"elements/timecontrol/src/main.ts",declarations:[{kind:"class",description:"",name:"EOxTimeControl",members:[{kind:"field",name:"controlProperty",type:{text:"string | undefined"},description:"The WMS parameter to update",attribute:"control-property"},{kind:"field",name:"controlValues",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",attribute:"control-values"},{kind:"field",name:"for",type:{text:"string"},description:"The query selector for the map",attribute:"for"},{kind:"field",name:"layer",type:{text:"string"},description:"The layerid of the animated layer",attribute:"layer"},{kind:"field",name:"slider",type:{text:"boolean"},description:"Display a slider for the values",attribute:"slider"},{kind:"field",name:"_originalParams",type:{text:"object"},privacy:"private",description:"Original params of layer source",attribute:"_originalParams"},{kind:"field",name:"disablePlay",type:{text:"boolean"},description:"Hides the play button if set",attribute:"disable-play"},{kind:"method",name:"next",description:"Go to next step"},{kind:"method",name:"previous",description:"Go to previous step"},{kind:"method",name:"playAnimation",parameters:[{name:"on",type:{text:"boolean"},description:"animation on/off"}],description:"Toggle play animation"},{kind:"method",name:"setConfig",parameters:[{name:"config",type:{text:`{
    layer: string;
    controlProperty: string;
    controlValues: Array<string>;
  }`}}],description:"Set the config at a later point"},{kind:"field",name:"currentStep",description:"The currently selected step",type:{text:"string"},attribute:"current-step"},{kind:"field",name:"_animationInterval",type:{text:"ReturnType<typeof setInterval>"},privacy:"private"},{kind:"field",name:"_controlSource",type:{text:"UrlTile"},privacy:"private"},{kind:"field",name:"_isAnimationPlaying",type:{text:"boolean"},privacy:"private"},{kind:"field",name:"_newStepIndex",type:{text:"number"},privacy:"private",default:"0"},{kind:"field",name:"unstyled",type:{text:"boolean"},attribute:"unstyled"},{kind:"method",name:"_updateStep",privacy:"private",parameters:[{name:"step",default:"1"}]},{kind:"method",name:"getFlatLayersArray",parameters:[{name:"layers",type:{text:"Array<Layer>"},description:"layers Array"}],description:`TEMP / TO-DO, this is a copy of the function defined in the eox-map:
https://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25
Consider a way to properly export that function and use it here`}],events:[{name:"stepchange",type:{text:"CustomEvent"},description:"Triggers when *currentStep* is updated.\n`event.detail.currentStep` returns the new *currentStep* value."}],attributes:[{name:"control-property",type:{text:"string | undefined"},description:"The WMS parameter to update",fieldName:"controlProperty"},{name:"control-values",type:{text:"Array<string>"},default:"[]",description:"The list of available values for the animation property",fieldName:"controlValues"},{name:"for",type:{text:"string"},description:"The query selector for the map",fieldName:"for"},{name:"layer",type:{text:"string"},description:"The layerid of the animated layer",fieldName:"layer"},{name:"slider",type:{text:"boolean"},description:"Display a slider for the values",fieldName:"slider"},{name:"_originalParams",type:{text:"object"},description:"Original params of layer source",fieldName:"_originalParams"},{name:"disable-play",type:{text:"boolean"},description:"Hides the play button if set",fieldName:"disablePlay"},{name:"current-step",description:"The currently selected step",type:{text:"string"},fieldName:"currentStep"},{name:"unstyled",type:{text:"boolean"},fieldName:"unstyled"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-timecontrol",customElement:!0},{kind:"class",description:"",name:"SliderTicks",members:[{kind:"field",name:"width",type:{text:"number"},default:"0",attribute:"width"},{kind:"field",name:"steps",type:{text:"string[]"},default:"[]",attribute:"steps"},{kind:"field",name:"height",type:{text:"number"},default:"6"},{kind:"field",name:"svgWidth",type:{text:"number"},default:"0"},{kind:"method",name:"handleResize"},{kind:"field",name:"lines",readonly:!0},{kind:"field",name:"numLines",readonly:!0},{kind:"field",name:"yearMarks",type:{text:"{ label: number; position: number }[]"},readonly:!0},{kind:"method",name:"isYearLine",return:{type:{text:"boolean"}},parameters:[{name:"line",type:{text:"number"}}]}],attributes:[{name:"width",type:{text:"number"},default:"0",fieldName:"width"},{name:"steps",type:{text:"string[]"},default:"[]",fieldName:"steps"}],superclass:{name:"LitElement",package:"lit"},tagName:"eox-sliderticks",customElement:!0}],exports:[{kind:"js",name:"EOxTimeControl",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-timecontrol",declaration:{name:"EOxTimeControl",module:"elements/timecontrol/src/main.ts"}},{kind:"js",name:"SliderTicks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}},{kind:"custom-element-definition",name:"eox-sliderticks",declaration:{name:"SliderTicks",module:"elements/timecontrol/src/main.ts"}}]}],YNe={schemaVersion:HNe,readme:WNe,modules:XNe};function lge(i){const e={h3:"h3",...bwe(),...i.components};return Uu.jsxs(Uu.Fragment,{children:[`
`,`
`,Uu.jsx(INe,{isTemplate:!0}),`
`,Uu.jsx(ONe,{}),`
`,Uu.jsx(PNe,{}),`
`,Uu.jsx(FNe,{}),`
`,Uu.jsx(NNe,{}),`
`,Uu.jsx(e.h3,{id:"api",children:"API"}),`
`,Uu.jsx($Ne,{}),`
`,Uu.jsx(BNe,{includePrimary:!1})]})}function ZNe(i={}){const{wrapper:e}={...bwe(),...i.components};return e?Uu.jsx(e,{...i,children:Uu.jsx(lge,{...i})}):lge(i)}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Y2(i){return i+.5|0}const Zp=(i,e,t)=>Math.max(Math.min(i,t),e);function Ew(i){return Zp(Y2(i*2.55),0,255)}function mg(i){return Zp(Y2(i*255),0,255)}function Xd(i){return Zp(Y2(i/2.55)/100,0,1)}function uge(i){return Zp(Y2(i*100),0,100)}const Bu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fO=[..."0123456789ABCDEF"],KNe=i=>fO[i&15],JNe=i=>fO[(i&240)>>4]+fO[i&15],MS=i=>(i&240)>>4===(i&15),QNe=i=>MS(i.r)&&MS(i.g)&&MS(i.b)&&MS(i.a);function e5e(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&Bu[i[1]]*17,g:255&Bu[i[2]]*17,b:255&Bu[i[3]]*17,a:e===5?Bu[i[4]]*17:255}:(e===7||e===9)&&(t={r:Bu[i[1]]<<4|Bu[i[2]],g:Bu[i[3]]<<4|Bu[i[4]],b:Bu[i[5]]<<4|Bu[i[6]],a:e===9?Bu[i[7]]<<4|Bu[i[8]]:255})),t}const t5e=(i,e)=>i<255?e(i):"";function i5e(i){var e=QNe(i)?KNe:JNe;return i?"#"+e(i.r)+e(i.g)+e(i.b)+t5e(i.a,e):void 0}const n5e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xwe(i,e,t){const n=e*Math.min(t,1-t),r=(s,o=(s+i/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function r5e(i,e,t){const n=(r,s=(r+i/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function s5e(i,e,t){const n=xwe(i,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)n[r]*=1-e-t,n[r]+=e;return n}function o5e(i,e,t,n,r){return i===r?(e-t)/n+(e<t?6:0):e===r?(t-i)/n+2:(i-e)/n+4}function iN(i){const t=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(t,n,r),o=Math.min(t,n,r),a=(s+o)/2;let l,u,c;return s!==o&&(c=s-o,u=a>.5?c/(2-s-o):c/(s+o),l=o5e(t,n,r,c,s),l=l*60+.5),[l|0,u||0,a]}function nN(i,e,t,n){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,n)).map(mg)}function rN(i,e,t){return nN(xwe,i,e,t)}function a5e(i,e,t){return nN(s5e,i,e,t)}function l5e(i,e,t){return nN(r5e,i,e,t)}function wwe(i){return(i%360+360)%360}function u5e(i){const e=n5e.exec(i);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Ew(+e[5]):mg(+e[5]));const r=wwe(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=a5e(r,s,o):e[1]==="hsv"?n=l5e(r,s,o):n=rN(r,s,o),{r:n[0],g:n[1],b:n[2],a:t}}function c5e(i,e){var t=iN(i);t[0]=wwe(t[0]+e),t=rN(t),i.r=t[0],i.g=t[1],i.b=t[2]}function h5e(i){if(!i)return;const e=iN(i),t=e[0],n=uge(e[1]),r=uge(e[2]);return i.a<255?`hsla(${t}, ${n}%, ${r}%, ${Xd(i.a)})`:`hsl(${t}, ${n}%, ${r}%)`}const cge={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hge={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function d5e(){const i={},e=Object.keys(hge),t=Object.keys(cge);let n,r,s,o,a;for(n=0;n<e.length;n++){for(o=a=e[n],r=0;r<t.length;r++)s=t[r],a=a.replace(s,cge[s]);s=parseInt(hge[o],16),i[a]=[s>>16&255,s>>8&255,s&255]}return i}let IS;function f5e(i){IS||(IS=d5e(),IS.transparent=[0,0,0,0]);const e=IS[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const p5e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function g5e(i){const e=p5e.exec(i);let t=255,n,r,s;if(e){if(e[7]!==n){const o=+e[7];t=e[8]?Ew(o):Zp(o*255,0,255)}return n=+e[1],r=+e[3],s=+e[5],n=255&(e[2]?Ew(n):Zp(n,0,255)),r=255&(e[4]?Ew(r):Zp(r,0,255)),s=255&(e[6]?Ew(s):Zp(s,0,255)),{r:n,g:r,b:s,a:t}}}function m5e(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Xd(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const uM=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,iv=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function y5e(i,e,t){const n=iv(Xd(i.r)),r=iv(Xd(i.g)),s=iv(Xd(i.b));return{r:mg(uM(n+t*(iv(Xd(e.r))-n))),g:mg(uM(r+t*(iv(Xd(e.g))-r))),b:mg(uM(s+t*(iv(Xd(e.b))-s))),a:i.a+t*(e.a-i.a)}}function OS(i,e,t){if(i){let n=iN(i);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=rN(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function Ewe(i,e){return i&&Object.assign(e||{},i)}function dge(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=mg(i[3]))):(e=Ewe(i,{r:0,g:0,b:0,a:1}),e.a=mg(e.a)),e}function v5e(i){return i.charAt(0)==="r"?g5e(i):u5e(i)}class CE{constructor(e){if(e instanceof CE)return e;const t=typeof e;let n;t==="object"?n=dge(e):t==="string"&&(n=e5e(e)||f5e(e)||v5e(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ewe(this._rgb);return e&&(e.a=Xd(e.a)),e}set rgb(e){this._rgb=dge(e)}rgbString(){return this._valid?m5e(this._rgb):void 0}hexString(){return this._valid?i5e(this._rgb):void 0}hslString(){return this._valid?h5e(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=n.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,n.r=255&u*n.r+s*r.r+.5,n.g=255&u*n.g+s*r.g+.5,n.b=255&u*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=y5e(this._rgb,e._rgb,t)),this}clone(){return new CE(this.rgb)}alpha(e){return this._rgb.a=mg(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Y2(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return OS(this._rgb,2,e),this}darken(e){return OS(this._rgb,2,-e),this}saturate(e){return OS(this._rgb,1,e),this}desaturate(e){return OS(this._rgb,1,-e),this}rotate(e){return c5e(this._rgb,e),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Pd(){}const _5e=(()=>{let i=0;return()=>i++})();function cr(i){return i===null||typeof i>"u"}function os(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $n(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Fs(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function au(i,e){return Fs(i)?i:e}function dn(i,e){return typeof i>"u"?e:i}const b5e=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,Cwe=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function Zr(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function jr(i,e,t,n){let r,s,o;if(os(i))if(s=i.length,n)for(r=s-1;r>=0;r--)e.call(t,i[r],r);else for(r=0;r<s;r++)e.call(t,i[r],r);else if($n(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)e.call(t,i[o[r]],o[r])}function NA(i,e){let t,n,r,s;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(r=i[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function $A(i){if(os(i))return i.map($A);if($n(i)){const e=Object.create(null),t=Object.keys(i),n=t.length;let r=0;for(;r<n;++r)e[t[r]]=$A(i[t[r]]);return e}return i}function Swe(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function x5e(i,e,t,n){if(!Swe(i))return;const r=e[i],s=t[i];$n(r)&&$n(s)?Cu(r,s,n):e[i]=$A(s)}function Cu(i,e,t){const n=os(e)?e:[e],r=n.length;if(!$n(i))return i;t=t||{};const s=t.merger||x5e;let o;for(let a=0;a<r;++a){if(o=n[a],!$n(o))continue;const l=Object.keys(o);for(let u=0,c=l.length;u<c;++u)s(l[u],i,o,t)}return i}function Ww(i,e){return Cu(i,e,{merger:w5e})}function w5e(i,e,t){if(!Swe(i))return;const n=e[i],r=t[i];$n(n)&&$n(r)?Ww(n,r):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=$A(r))}const fge={"":i=>i,x:i=>i.x,y:i=>i.y};function E5e(i){const e=i.split("."),t=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function C5e(i){const e=E5e(i);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function Cg(i,e){return(fge[e]||(fge[e]=C5e(e)))(i)}function sN(i){return i.charAt(0).toUpperCase()+i.slice(1)}const SE=i=>typeof i<"u",Sg=i=>typeof i=="function",pge=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function S5e(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const us=Math.PI,as=2*us,T5e=as+us,BA=Number.POSITIVE_INFINITY,A5e=us/180,Ys=us/2,Om=us/4,gge=us*2/3,Kp=Math.log10,$h=Math.sign;function Xw(i,e,t){return Math.abs(i-e)<t}function mge(i){const e=Math.round(i);i=Xw(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(Kp(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function R5e(i){const e=[],t=Math.sqrt(i);let n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function z_(i){return!isNaN(parseFloat(i))&&isFinite(i)}function k5e(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function Twe(i,e,t){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Dc(i){return i*(us/180)}function oN(i){return i*(180/us)}function yge(i){if(!Fs(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function Awe(i,e){const t=e.x-i.x,n=e.y-i.y,r=Math.sqrt(t*t+n*n);let s=Math.atan2(n,t);return s<-.5*us&&(s+=as),{angle:s,distance:r}}function pO(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function D5e(i,e){return(i-e+T5e)%as-us}function uu(i){return(i%as+as)%as}function TE(i,e,t,n){const r=uu(i),s=uu(e),o=uu(t),a=uu(s-r),l=uu(o-r),u=uu(r-s),c=uu(r-o);return r===s||r===o||n&&s===o||a>l&&u<c}function Zo(i,e,t){return Math.max(e,Math.min(t,i))}function L5e(i){return Zo(i,-32768,32767)}function ef(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function aN(i,e,t){t=t||(o=>i[o]<e);let n=i.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,t(s)?r=s:n=s;return{lo:r,hi:n}}const tf=(i,e,t,n)=>aN(i,t,n?r=>{const s=i[r][e];return s<t||s===t&&i[r+1][e]===t}:r=>i[r][e]<t),M5e=(i,e,t)=>aN(i,t,n=>i[n][e]>=t);function I5e(i,e,t){let n=0,r=i.length;for(;n<r&&i[n]<e;)n++;for(;r>n&&i[r-1]>t;)r--;return n>0||r<i.length?i.slice(n,r):i}const Rwe=["push","pop","shift","splice","unshift"];function O5e(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Rwe.forEach(t=>{const n="_onData"+sN(t),r=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...s)}),o}})})}function vge(i,e){const t=i._chartjs;if(!t)return;const n=t.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(Rwe.forEach(s=>{delete i[s]}),delete i._chartjs)}function kwe(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const Dwe=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function Lwe(i,e){let t=[],n=!1;return function(...r){t=r,n||(n=!0,Dwe.call(window,()=>{n=!1,i.apply(e,t)}))}}function P5e(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}const lN=i=>i==="start"?"left":i==="end"?"right":"center",$a=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,F5e=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e;function Mwe(i,e,t){const n=e.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:a}=i,l=o.axis,{min:u,max:c,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Zo(Math.min(tf(a,l,u).lo,t?n:tf(e,l,o.getPixelForValue(u)).lo),0,n-1)),d?s=Zo(Math.max(tf(a,o.axis,c,!0).hi+1,t?0:tf(e,l,o.getPixelForValue(c),!0).hi+1),r,n)-r:s=n-r}return{start:r,count:s}}function Iwe(i){const{xScale:e,yScale:t,_scaleRanges:n}=i,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),s}const PS=i=>i===0||i===1,_ge=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*as/t)),bge=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*as/t)+1,Yw={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Ys)+1,easeOutSine:i=>Math.sin(i*Ys),easeInOutSine:i=>-.5*(Math.cos(us*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>PS(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>PS(i)?i:_ge(i,.075,.3),easeOutElastic:i=>PS(i)?i:bge(i,.075,.3),easeInOutElastic(i){return PS(i)?i:i<.5?.5*_ge(i*2,.1125,.45):.5+.5*bge(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-Yw.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Yw.easeInBounce(i*2)*.5:Yw.easeOutBounce(i*2-1)*.5+.5};function uN(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function jA(i){return uN(i)?i:new CE(i)}function cM(i){return uN(i)?i:new CE(i).saturate(.5).darken(.1).hexString()}const N5e=["x","y","borderWidth","radius","tension"],$5e=["color","borderColor","backgroundColor"];function B5e(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:$5e},numbers:{type:"number",properties:N5e}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function j5e(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const xge=new Map;function z5e(i,e){e=e||{};const t=i+JSON.stringify(e);let n=xge.get(t);return n||(n=new Intl.NumberFormat(i,e),xge.set(t,n)),n}function Z2(i,e,t){return z5e(e,t).format(i)}const Owe={values(i){return os(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const n=this.chart.options.locale;let r,s=i;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=G5e(i,t)}const o=Kp(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Z2(i,n,l)},logarithmic(i,e,t){if(i===0)return"0";const n=t[e].significand||i/Math.pow(10,Math.floor(Kp(i)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?Owe.numeric.call(this,i,e,t):""}};function G5e(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var sD={formatters:Owe};function U5e(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const R0=Object.create(null),gO=Object.create(null);function Zw(i,e){if(!e)return i;const t=e.split(".");for(let n=0,r=t.length;n<r;++n){const s=t[n];i=i[s]||(i[s]=Object.create(null))}return i}function hM(i,e,t){return typeof e=="string"?Cu(Zw(i,e),t):Cu(Zw(i,""),e)}class q5e{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>cM(r.backgroundColor),this.hoverBorderColor=(n,r)=>cM(r.borderColor),this.hoverColor=(n,r)=>cM(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return hM(this,e,t)}get(e){return Zw(this,e)}describe(e,t){return hM(gO,e,t)}override(e,t){return hM(R0,e,t)}route(e,t,n,r){const s=Zw(this,e),o=Zw(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=o[r];return $n(l)?Object.assign({},u,l):dn(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var Ns=new q5e({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[B5e,j5e,U5e]);function V5e(i){return!i||cr(i.size)||cr(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function zA(i,e,t,n,r){let s=e[r];return s||(s=e[r]=i.measureText(r).width,t.push(r)),s>n&&(n=s),n}function H5e(i,e,t,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},s=n.garbageCollect=[],n.font=e),i.save(),i.font=e;let o=0;const a=t.length;let l,u,c,h,d;for(l=0;l<a;l++)if(h=t[l],h!=null&&!os(h))o=zA(i,r,s,o,h);else if(os(h))for(u=0,c=h.length;u<c;u++)d=h[u],d!=null&&!os(d)&&(o=zA(i,r,s,o,d));i.restore();const f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Pm(i,e,t){const n=i.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*n)/n+r}function wge(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function mO(i,e,t,n){Pwe(i,e,t,n,null)}function Pwe(i,e,t,n,r){let s,o,a,l,u,c,h,d;const f=e.pointStyle,p=e.rotation,m=e.radius;let y=(p||0)*A5e;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(y),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(m)||m<=0)){switch(i.beginPath(),f){default:r?i.ellipse(t,n,r/2,m,0,0,as):i.arc(t,n,m,0,as),i.closePath();break;case"triangle":c=r?r/2:m,i.moveTo(t+Math.sin(y)*c,n-Math.cos(y)*m),y+=gge,i.lineTo(t+Math.sin(y)*c,n-Math.cos(y)*m),y+=gge,i.lineTo(t+Math.sin(y)*c,n-Math.cos(y)*m),i.closePath();break;case"rectRounded":u=m*.516,l=m-u,o=Math.cos(y+Om)*l,h=Math.cos(y+Om)*(r?r/2-u:l),a=Math.sin(y+Om)*l,d=Math.sin(y+Om)*(r?r/2-u:l),i.arc(t-h,n-a,u,y-us,y-Ys),i.arc(t+d,n-o,u,y-Ys,y),i.arc(t+h,n+a,u,y,y+Ys),i.arc(t-d,n+o,u,y+Ys,y+us),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,c=r?r/2:l,i.rect(t-c,n-l,2*c,2*l);break}y+=Om;case"rectRot":h=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(r?r/2:m),i.moveTo(t-h,n-a),i.lineTo(t+d,n-o),i.lineTo(t+h,n+a),i.lineTo(t-d,n+o),i.closePath();break;case"crossRot":y+=Om;case"cross":h=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(r?r/2:m),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+d,n-o),i.lineTo(t-d,n+o);break;case"star":h=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(r?r/2:m),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+d,n-o),i.lineTo(t-d,n+o),y+=Om,h=Math.cos(y)*(r?r/2:m),o=Math.cos(y)*m,a=Math.sin(y)*m,d=Math.sin(y)*(r?r/2:m),i.moveTo(t-h,n-a),i.lineTo(t+h,n+a),i.moveTo(t+d,n-o),i.lineTo(t-d,n+o);break;case"line":o=r?r/2:Math.cos(y)*m,a=Math.sin(y)*m,i.moveTo(t-o,n-a),i.lineTo(t+o,n+a);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(y)*(r?r/2:m),n+Math.sin(y)*m);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function nf(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function oD(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function aD(i){i.restore()}function W5e(i,e,t,n,r){if(!e)return i.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;i.lineTo(s,e.y),i.lineTo(s,t.y)}else r==="after"!=!!n?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function X5e(i,e,t,n){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function Y5e(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),cr(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function Z5e(i,e,t,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,c=r.strikethrough?(l+u)/2:u;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,c),i.lineTo(a,c),i.stroke()}}function K5e(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function k0(i,e,t,n,r,s={}){const o=os(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(i.save(),i.font=r.string,Y5e(i,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&K5e(i,s.backdrop),a&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),cr(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(u,t,n,s.maxWidth)),i.fillText(u,t,n,s.maxWidth),Z5e(i,t,n,u,s),n+=Number(r.lineHeight);i.restore()}function AE(i,e){const{x:t,y:n,w:r,h:s,radius:o}=e;i.arc(t+o.topLeft,n+o.topLeft,o.topLeft,1.5*us,us,!0),i.lineTo(t,n+s-o.bottomLeft),i.arc(t+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,us,Ys,!0),i.lineTo(t+r-o.bottomRight,n+s),i.arc(t+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Ys,0,!0),i.lineTo(t+r,n+o.topRight),i.arc(t+r-o.topRight,n+o.topRight,o.topRight,0,-Ys,!0),i.lineTo(t+o.topLeft,n)}const J5e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Q5e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function e4e(i,e){const t=(""+i).match(J5e);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const t4e=i=>+i||0;function cN(i,e){const t={},n=$n(e),r=n?Object.keys(e):e,s=$n(i)?n?o=>dn(i[o],i[e[o]]):o=>i[o]:()=>i;for(const o of r)t[o]=t4e(s(o));return t}function Fwe(i){return cN(i,{top:"y",right:"x",bottom:"y",left:"x"})}function d0(i){return cN(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Va(i){const e=Fwe(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ro(i,e){i=i||{},e=e||Ns.font;let t=dn(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=dn(i.style,e.style);n&&!(""+n).match(Q5e)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:dn(i.family,e.family),lineHeight:e4e(dn(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:dn(i.weight,e.weight),string:""};return r.string=V5e(r),r}function Cw(i,e,t,n){let r=!0,s,o,a;for(s=0,o=i.length;s<o;++s)if(a=i[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&os(a)&&(a=a[t%a.length],r=!1),a!==void 0))return n&&!r&&(n.cacheable=!1),a}function i4e(i,e,t){const{min:n,max:r}=i,s=Cwe(e,(r-n)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(n,-Math.abs(s)),max:o(r,s)}}function Gg(i,e){return Object.assign(Object.create(i),e)}function hN(i,e=[""],t,n,r=()=>i[0]){const s=t||i;typeof n>"u"&&(n=jwe("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:n,_getTarget:r,override:a=>hN([a,...i],e,s,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return $we(a,l,()=>c4e(l,e,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return Cge(a).includes(l)},ownKeys(a){return Cge(a)},set(a,l,u){const c=a._storage||(a._storage=r());return a[l]=c[l]=u,delete a._keys,!0}})}function G_(i,e,t,n){const r={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:Nwe(i,n),setContext:s=>G_(i,s,t,n),override:s=>G_(i.override(s),e,t,n)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete i[o],!0},get(s,o,a){return $we(s,o,()=>r4e(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(s,o,a){return i[o]=a,delete s[o],!0}})}function Nwe(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=i;return{allKeys:r,scriptable:t,indexable:n,isScriptable:Sg(t)?t:()=>t,isIndexable:Sg(n)?n:()=>n}}const n4e=(i,e)=>i?i+sN(e):e,dN=(i,e)=>$n(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $we(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const n=t();return i[e]=n,n}function r4e(i,e,t){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let a=n[e];return Sg(a)&&o.isScriptable(e)&&(a=s4e(e,a,i,t)),os(a)&&a.length&&(a=o4e(e,a,i,o.isIndexable)),dN(e,a)&&(a=G_(a,r,s&&s[e],o)),a}function s4e(i,e,t,n){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=e(s,o||n);return a.delete(i),dN(i,l)&&(l=fN(r._scopes,r,i,l)),l}function o4e(i,e,t,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&n(i))return e[s.index%e.length];if($n(e[0])){const l=e,u=r._scopes.filter(c=>c!==l);e=[];for(const c of l){const h=fN(u,r,i,c);e.push(G_(h,s,o&&o[i],a))}}return e}function Bwe(i,e,t){return Sg(i)?i(e,t):i}const a4e=(i,e)=>i===!0?e:typeof i=="string"?Cg(e,i):void 0;function l4e(i,e,t,n,r){for(const s of e){const o=a4e(t,s);if(o){i.add(o);const a=Bwe(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==n)return a}else if(o===!1&&typeof n<"u"&&t!==n)return null}return!1}function fN(i,e,t,n){const r=e._rootScopes,s=Bwe(e._fallback,t,n),o=[...i,...r],a=new Set;a.add(n);let l=Ege(a,o,t,s||t,n);return l===null||typeof s<"u"&&s!==t&&(l=Ege(a,o,s,l,n),l===null)?!1:hN(Array.from(a),[""],r,s,()=>u4e(e,t,n))}function Ege(i,e,t,n,r){for(;t;)t=l4e(i,e,t,n,r);return t}function u4e(i,e,t){const n=i._getTarget();e in n||(n[e]={});const r=n[e];return os(r)&&$n(t)?t:r||{}}function c4e(i,e,t,n){let r;for(const s of e)if(r=jwe(n4e(s,i),t),typeof r<"u")return dN(i,r)?fN(t,n,i,r):r}function jwe(i,e){for(const t of e){if(!t)continue;const n=t[i];if(typeof n<"u")return n}}function Cge(i){let e=i._keys;return e||(e=i._keys=h4e(i._scopes)),e}function h4e(i){const e=new Set;for(const t of i)for(const n of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function zwe(i,e,t,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let a,l,u,c;for(a=0,l=n;a<l;++a)u=a+t,c=e[u],o[a]={r:r.parse(Cg(c,s),u)};return o}const d4e=Number.EPSILON||1e-14,U_=(i,e)=>e<i.length&&!i[e].skip&&i[e],Gwe=i=>i==="x"?"y":"x";function f4e(i,e,t,n){const r=i.skip?e:i,s=e,o=t.skip?e:t,a=pO(s,r),l=pO(o,s);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const h=n*u,d=n*c;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function p4e(i,e,t){const n=i.length;let r,s,o,a,l,u=U_(i,0);for(let c=0;c<n-1;++c)if(l=u,u=U_(i,c+1),!(!l||!u)){if(Xw(e[c],0,d4e)){t[c]=t[c+1]=0;continue}r=t[c]/e[c],s=t[c+1]/e[c],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[c]=r*o*e[c],t[c+1]=s*o*e[c])}}function g4e(i,e,t="x"){const n=Gwe(t),r=i.length;let s,o,a,l=U_(i,0);for(let u=0;u<r;++u){if(o=a,a=l,l=U_(i,u+1),!a)continue;const c=a[t],h=a[n];o&&(s=(c-o[t])/3,a[`cp1${t}`]=c-s,a[`cp1${n}`]=h-s*e[u]),l&&(s=(l[t]-c)/3,a[`cp2${t}`]=c+s,a[`cp2${n}`]=h+s*e[u])}}function m4e(i,e="x"){const t=Gwe(e),n=i.length,r=Array(n).fill(0),s=Array(n);let o,a,l,u=U_(i,0);for(o=0;o<n;++o)if(a=l,l=u,u=U_(i,o+1),!!l){if(u){const c=u[e]-l[e];r[o]=c!==0?(u[t]-l[t])/c:0}s[o]=a?u?$h(r[o-1])!==$h(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}p4e(i,r,s),g4e(i,s,e)}function FS(i,e,t){return Math.max(Math.min(i,t),e)}function y4e(i,e){let t,n,r,s,o,a=nf(i[0],e);for(t=0,n=i.length;t<n;++t)o=s,s=a,a=t<n-1&&nf(i[t+1],e),s&&(r=i[t],o&&(r.cp1x=FS(r.cp1x,e.left,e.right),r.cp1y=FS(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=FS(r.cp2x,e.left,e.right),r.cp2y=FS(r.cp2y,e.top,e.bottom)))}function v4e(i,e,t,n,r){let s,o,a,l;if(e.spanGaps&&(i=i.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")m4e(i,r);else{let u=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)a=i[s],l=f4e(u,a,i[Math.min(s+1,o-(n?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&y4e(i,t)}function pN(){return typeof window<"u"&&typeof document<"u"}function gN(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function GA(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}const lD=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function _4e(i,e){return lD(i).getPropertyValue(e)}const b4e=["top","right","bottom","left"];function f0(i,e,t){const n={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=b4e[r];n[s]=parseFloat(i[e+"-"+s+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const x4e=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function w4e(i,e){const t=i.touches,n=t&&t.length?t[0]:i,{offsetX:r,offsetY:s}=n;let o=!1,a,l;if(x4e(r,s,i.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=n.clientX-u.left,l=n.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Xm(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:n}=e,r=lD(t),s=r.boxSizing==="border-box",o=f0(r,"padding"),a=f0(r,"border","width"),{x:l,y:u,box:c}=w4e(i,t),h=o.left+(c&&a.left),d=o.top+(c&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*t.width/n),y:Math.round((u-d)/p*t.height/n)}}function E4e(i,e,t){let n,r;if(e===void 0||t===void 0){const s=i&&gN(i);if(!s)e=i.clientWidth,t=i.clientHeight;else{const o=s.getBoundingClientRect(),a=lD(s),l=f0(a,"border","width"),u=f0(a,"padding");e=o.width-u.width-l.width,t=o.height-u.height-l.height,n=GA(a.maxWidth,s,"clientWidth"),r=GA(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:n||BA,maxHeight:r||BA}}const NS=i=>Math.round(i*10)/10;function C4e(i,e,t,n){const r=lD(i),s=f0(r,"margin"),o=GA(r.maxWidth,i,"clientWidth")||BA,a=GA(r.maxHeight,i,"clientHeight")||BA,l=E4e(i,e,t);let{width:u,height:c}=l;if(r.boxSizing==="content-box"){const d=f0(r,"border","width"),f=f0(r,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-s.width),c=Math.max(0,n?u/n:c-s.height),u=NS(Math.min(u,o,l.maxWidth)),c=NS(Math.min(c,a,l.maxHeight)),u&&!c&&(c=NS(u/2)),(e!==void 0||t!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,u=NS(Math.floor(c*n))),{width:u,height:c}}function Sge(i,e,t){const n=e||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const o=i.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s?(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const S4e=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};pN()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Tge(i,e){const t=_4e(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ym(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function T4e(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:n==="middle"?t<.5?i.y:e.y:n==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function A4e(i,e,t,n){const r={x:i.cp2x,y:i.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ym(i,r,t),a=Ym(r,s,t),l=Ym(s,e,t),u=Ym(o,a,t),c=Ym(a,l,t);return Ym(u,c,t)}const R4e=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},k4e=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function m_(i,e,t){return i?R4e(e,t):k4e()}function Uwe(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function qwe(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function Vwe(i){return i==="angle"?{between:TE,compare:D5e,normalize:uu}:{between:ef,compare:(e,t)=>e-t,normalize:e=>e}}function Age({start:i,end:e,count:t,loop:n,style:r}){return{start:i%t,end:e%t,loop:n&&(e-i+1)%t===0,style:r}}function D4e(i,e,t){const{property:n,start:r,end:s}=t,{between:o,normalize:a}=Vwe(n),l=e.length;let{start:u,end:c,loop:h}=i,d,f;if(h){for(u+=l,c+=l,d=0,f=l;d<f&&o(a(e[u%l][n]),r,s);++d)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:i.style}}function Hwe(i,e,t){if(!t)return[i];const{property:n,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:u}=Vwe(n),{start:c,end:h,loop:d,style:f}=D4e(i,e,t),p=[];let m=!1,y=null,v,b,x;const w=()=>l(r,x,v)&&a(r,x)!==0,C=()=>a(s,v)===0||l(s,x,v),D=()=>m||w(),R=()=>!m||C();for(let A=c,L=c;A<=h;++A)b=e[A%o],!b.skip&&(v=u(b[n]),v!==x&&(m=l(v,r,s),y===null&&D()&&(y=a(v,r)===0?A:L),y!==null&&R()&&(p.push(Age({start:y,end:A,loop:d,count:o,style:f})),y=null),L=A,x=v));return y!==null&&p.push(Age({start:y,end:h,loop:d,count:o,style:f})),p}function Wwe(i,e){const t=[],n=i.segments;for(let r=0;r<n.length;r++){const s=Hwe(n[r],i.points,e);s.length&&t.push(...s)}return t}function L4e(i,e,t,n){let r=0,s=e-1;if(t&&!n)for(;r<e&&!i[r].skip;)r++;for(;r<e&&i[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&i[s%e].skip;)s--;return s%=e,{start:r,end:s}}function M4e(i,e,t,n){const r=i.length,s=[];let o=e,a=i[e],l;for(l=e+1;l<=t;++l){const u=i[l%r];u.skip||u.stop?a.skip||(n=!1,s.push({start:e%r,end:(l-1)%r,loop:n}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:n}),s}function I4e(i,e){const t=i.points,n=i.options.spanGaps,r=t.length;if(!r)return[];const s=!!i._loop,{start:o,end:a}=L4e(t,r,s,n);if(n===!0)return Rge(i,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+r:a,u=!!i._fullLoop&&o===0&&a===r-1;return Rge(i,M4e(t,o,l,u),t,e)}function Rge(i,e,t,n){return!n||!n.setContext||!t?e:O4e(i,e,t,n)}function O4e(i,e,t,n){const r=i._chart.getContext(),s=kge(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=t.length,u=[];let c=s,h=e[0].start,d=h;function f(p,m,y,v){const b=a?-1:1;if(p!==m){for(p+=l;t[p%l].skip;)p-=b;for(;t[m%l].skip;)m+=b;p%l!==m%l&&(u.push({start:p%l,end:m%l,loop:y,style:v}),c=v,h=m%l)}}for(const p of e){h=a?h:p.start;let m=t[h%l],y;for(d=h+1;d<=p.end;d++){const v=t[d%l];y=kge(n.setContext(Gg(r,{type:"segment",p0:m,p1:v,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),P4e(y,c)&&f(h,d-1,p.loop,c),m=v,c=y}h<d-1&&f(h,d-1,p.loop,c)}return u}function kge(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function P4e(i,e){if(!e)return!1;const t=[],n=function(r,s){return uN(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(i,n)!==JSON.stringify(e,n)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class F4e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(n-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Dwe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ud=new F4e;const Dge="transparent",N4e={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const n=jA(i||Dge),r=n.valid&&jA(e||Dge);return r&&r.valid?r.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class $4e{constructor(e,t,n,r){const s=t[n];r=Cw([e.to,r,s,e.from]);const o=Cw([e.from,s,r]);this._active=!0,this._fn=e.fn||N4e[e.type||typeof o],this._easing=Yw[e.easing]||Yw.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Cw([e.to,t,r,e.from]),this._from=Cw([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<n),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class Xwe{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!$n(e))return;const t=Object.keys(Ns.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!$n(s))return;const o={};for(const a of t)o[a]=s[a];(os(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!n.has(a))&&n.set(a,o)})})}_animateOptions(e,t){const n=t.options,r=j4e(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&B4e(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,t));continue}const c=t[u];let h=s[u];const d=n.get(u);if(h)if(d&&h.active()){h.update(d,c,a);continue}else h.cancel();if(!d||!d.duration){e[u]=c;continue}s[u]=h=new $4e(d,e,u,c),r.push(h)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return Ud.add(this._chart,n),!0}}function B4e(i,e){const t=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function j4e(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Lge(i,e){const t=i&&i.options||{},n=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:n?s:r,end:n?r:s}}function z4e(i,e,t){if(t===!1)return!1;const n=Lge(i,t),r=Lge(e,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function G4e(i){let e,t,n,r;return $n(i)?(e=i.top,t=i.right,n=i.bottom,r=i.left):e=t=n=r=i,{top:e,right:t,bottom:n,left:r,disabled:i===!1}}function Ywe(i,e){const t=[],n=i._getSortedDatasetMetas(e);let r,s;for(r=0,s=n.length;r<s;++r)t.push(n[r].index);return t}function Mge(i,e,t,n={}){const r=i.keys,s=n.mode==="single";let o,a,l,u;if(e!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(n.all)continue;break}u=i.values[l],Fs(u)&&(s||e===0||$h(e)===$h(u))&&(e+=u)}return e}}function U4e(i,e){const{iScale:t,vScale:n}=e,r=t.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length);let l,u,c;for(l=0,u=o.length;l<u;++l)c=o[l],a[l]={[r]:c,[s]:i[c]};return a}function Ige(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function q4e(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function V4e(i){const{min:e,max:t,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function H4e(i,e,t){const n=i[e]||(i[e]={});return n[t]||(n[t]={})}function Oge(i,e,t,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function Pge(i,e){const{chart:t,_cachedMeta:n}=i,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=n,l=s.axis,u=o.axis,c=q4e(s,o,n),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:m,[u]:y}=p,v=p._stacks||(p._stacks={});d=v[u]=H4e(r,c,m),d[a]=y,d._top=Oge(d,o,!0,n.type),d._bottom=Oge(d,o,!1,n.type);const b=d._visualValues||(d._visualValues={});b[a]=y}}function dM(i,e){const t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function W4e(i,e){return Gg(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function X4e(i,e,t){return Gg(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Kx(i,e){const t=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){e=e||i._parsed;for(const r of e){const s=r._stacks;if(!s||s[n]===void 0||s[n][t]===void 0)return;delete s[n][t],s[n]._visualValues!==void 0&&s[n]._visualValues[t]!==void 0&&delete s[n]._visualValues[t]}}}const fM=i=>i==="reset"||i==="none",Fge=(i,e)=>e?i:Object.assign({},i),Y4e=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:Ywe(t,!0),values:null};class Pc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ige(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Kx(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,s=t.xAxisID=dn(n.xAxisID,dM(e,"x")),o=t.yAxisID=dn(n.yAxisID,dM(e,"y")),a=t.rAxisID=dn(n.rAxisID,dM(e,"r")),l=t.indexAxis,u=t.iAxisID=r(l,s,o,a),c=t.vAxisID=r(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&vge(this._data,this),e._stacked&&Kx(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if($n(t)){const r=this._cachedMeta;this._data=U4e(t,r)}else if(n!==t){if(n){vge(n,this);const r=this._cachedMeta;Kx(r),r._parsed=[]}t&&Object.isExtensible(t)&&O5e(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=Ige(t.vScale,t),t.stack!==n.stack&&(r=!0,Kx(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&Pge(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:o}=n,a=s.axis;let l=e===0&&t===r.length?!0:n._sorted,u=e>0&&n._parsed[e-1],c,h,d;if(this._parsing===!1)n._parsed=r,n._sorted=!0,d=r;else{os(r[e])?d=this.parseArrayData(n,r,e,t):$n(r[e])?d=this.parseObjectData(n,r,e,t):d=this.parsePrimitiveData(n,r,e,t);const f=()=>h[a]===null||u&&h[a]<u[a];for(c=0;c<t;++c)n._parsed[c+e]=h=d[c],l&&(f()&&(l=!1),u=h);n._sorted=l}o&&Pge(this,d)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),c=s===o,h=new Array(r);let d,f,p;for(d=0,f=r;d<f;++d)p=d+n,h[d]={[a]:c||s.parse(u[p],p),[l]:o.parse(t[p],p)};return h}parseArrayData(e,t,n,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,c,h;for(l=0,u=r;l<u;++l)c=l+n,h=t[c],a[l]={x:s.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let c,h,d,f;for(c=0,h=r;c<h;++c)d=c+n,f=t[d],u[c]={x:s.parse(Cg(f,a),d),y:o.parse(Cg(f,l),d)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:Ywe(r,!0),values:t._stacks[e.axis]._visualValues};return Mge(a,o,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let o=s===null?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,o=Mge(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,o=r.length,a=this._getOtherScale(e),l=Y4e(t,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=V4e(a);let d,f;function p(){f=r[d];const m=f[a.axis];return!Fs(f[e.axis])||c>m||h<m}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(u,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(u,e,f,l);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,o;for(r=0,s=t.length;r<s;++r)o=t[r][e.axis],Fs(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=G4e(dn(this.options.clip,z4e(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,l),c=a;c<a+l;++c){const h=r[c];h.hidden||(h.active&&u?o.push(h):h.draw(e,s))}for(c=0;c<o.length;++c)o[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=X4e(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=W4e(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&SE(n);if(a)return Fge(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),c),f=Object.keys(Ns.elements[e]),p=()=>this.getContext(n,r,t),m=u.resolveNamedOptions(d,f,p,h);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(Fge(m,l))),m}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,t),d=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(d,this.getContext(e,n,t))}const u=new Xwe(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||fM(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),o=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:o}}updateElement(e,t,n,r){fM(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!fM(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=n.length,s=t.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,n=!0){const r=this._cachedMeta,s=r.data,o=e+t;let a;const l=u=>{for(u.length+=t,a=u.length-1;a>=o;a--)u[a]=u[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&Kx(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ye(Pc,"defaults",{}),Ye(Pc,"datasetElementType",null),Ye(Pc,"dataElementType",null);function Z4e(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let n=[];for(let r=0,s=t.length;r<s;r++)n=n.concat(t[r].controller.getAllParsedValues(i));i._cache.$bar=kwe(n.sort((r,s)=>r-s))}return i._cache.$bar}function K4e(i){const e=i.iScale,t=Z4e(e,i.type);let n=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(SE(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return n}function J4e(i,e,t,n){const r=t.barThickness;let s,o;return cr(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:e.pixels[i]-s/2}}function Q4e(i,e,t,n){const r=e.pixels,s=r[i];let o=i>0?r[i-1]:null,a=i<r.length-1?r[i+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:t.barPercentage,start:u}}function e$e(i,e,t,n){const r=t.parse(i[0],n),s=t.parse(i[1],n),o=Math.min(r,s),a=Math.max(r,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:r,end:s,min:o,max:a}}function Zwe(i,e,t,n){return os(i)?e$e(i,e,t,n):e[t.axis]=t.parse(i,n),e}function Nge(i,e,t,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),a=r===s,l=[];let u,c,h,d;for(u=t,c=t+n;u<c;++u)d=e[u],h={},h[r.axis]=a||r.parse(o[u],u),l.push(Zwe(d,h,s,u));return l}function pM(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function t$e(i,e,t){return i!==0?$h(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function i$e(i){let e,t,n,r,s;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:n,reverse:e,top:r,bottom:s}}function n$e(i,e,t,n){let r=e.borderSkipped;const s={};if(!r){i.borderSkipped=s;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:c}=i$e(i);r==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?r=u:(t._bottom||0)===n?r=c:(s[$ge(c,o,a,l)]=!0,r=u)),s[$ge(r,o,a,l)]=!0,i.borderSkipped=s}function $ge(i,e,t,n){return n?(i=r$e(i,e,t),i=Bge(i,t,e)):i=Bge(i,e,t),i}function r$e(i,e,t){return i===e?t:i===t?e:i}function Bge(i,e,t){return i==="start"?e:i==="end"?t:i}function s$e(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class yg extends Pc{parsePrimitiveData(e,t,n,r){return Nge(e,t,n,r)}parseArrayData(e,t,n,r){return Nge(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,c=o.axis==="x"?a:l,h=[];let d,f,p,m;for(d=n,f=n+r;d<f;++d)m=t[d],p={},p[s.axis]=s.parse(Cg(m,u),d),h.push(Zwe(Cg(m,c),p,o,d));return h}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),o=s._custom,a=pM(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,r);for(let f=t;f<t+n;f++){const p=this.getParsed(f),m=s||cr(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),y=this._calculateBarIndexPixels(f,c),v=(p._stacks||{})[a.axis],b={horizontal:u,base:m.base,enableBorderRadius:!v||pM(p._custom)||o===v._top||o===v._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};d&&(b.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const x=b.options||e[f].options;n$e(b,x,v,o),s$e(b,x,c.ratio),this.updateElement(e[f],f,b,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=n.options.stacked,o=[],a=l=>{const u=l.controller.getParsed(t),c=u&&u[l.vScale.axis];if(cr(c)||isNaN(c))return!0};for(const l of r)if(!(t!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,o;for(s=0,o=t.data.length;s<o;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||K4e(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,c=pM(u);let h=l[t.axis],d=0,f=n?this.applyStack(t,l,n):h,p,m;f!==h&&(d=f-h,f=h),c&&(h=u.barStart,f=u.barEnd-u.barStart,h!==0&&$h(h)!==$h(u.barEnd)&&(d=0),d+=h);const y=!cr(s)&&!c?s:d;let v=t.getPixelForValue(y);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(d+f):p=v,m=p-v,Math.abs(m)<o){m=t$e(m,t,a)*o,h===a&&(v-=m/2);const b=t.getPixelForDecimal(0),x=t.getPixelForDecimal(1),w=Math.min(b,x),C=Math.max(b,x);v=Math.max(Math.min(v,C),w),p=v+m,n&&!c&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(p)-t.getValueForPixel(v))}if(v===t.getPixelForValue(a)){const b=$h(m)*t.getLineWidthForValue(a)/2;v+=b,m-=b}return{size:m,base:v,head:p,center:p+m/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,o=dn(r.maxBarThickness,1/0);let a,l;if(t.grouped){const u=s?this._getStackCount(e):t.stackCount,c=r.barThickness==="flex"?Q4e(e,t,r,u):J4e(e,t,r,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=c.start+c.chunk*h+c.chunk/2,l=Math.min(o,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!n[s].hidden&&n[s].draw(this._ctx)}}Ye(yg,"id","bar"),Ye(yg,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ye(yg,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class sA extends Pc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let o=0;o<s.length;o++){const a=t[n+o];s[o]._custom=dn(a[2],this.resolveDataElementOptions(o+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let o=0;o<s.length;o++){const a=t[n+o];s[o]._custom=dn(a&&a.r&&+a.r,this.resolveDataElementOptions(o+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),u=o._custom;return{label:n[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s=r==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,r),c=o.axis,h=a.axis;for(let d=t;d<t+n;d++){const f=e[d],p=!s&&this.getParsed(d),m={},y=m[c]=s?o.getPixelForDecimal(.5):o.getPixelForValue(p[c]),v=m[h]=s?a.getBasePixel():a.getPixelForValue(p[h]);m.skip=isNaN(y)||isNaN(v),u&&(m.options=l||this.resolveDataElementOptions(d,f.active?"active":r),s&&(m.options.radius=0)),this.updateElement(f,d,m,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=dn(n&&n._custom,s),r}}Ye(sA,"id","bubble"),Ye(sA,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ye(sA,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function o$e(i,e,t){let n=1,r=1,s=0,o=0;if(e<as){const a=i,l=a+e,u=Math.cos(a),c=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(x,w,C)=>TE(x,a,l,!0)?1:Math.max(w,w*t,C,C*t),p=(x,w,C)=>TE(x,a,l,!0)?-1:Math.min(w,w*t,C,C*t),m=f(0,u,h),y=f(Ys,c,d),v=p(us,u,h),b=p(us+Ys,c,d);n=(m-v)/2,r=(y-b)/2,s=-(m+v)/2,o=-(y+b)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}class n0 extends Pc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let s=l=>+n[l];if($n(n[e])){const{key:l="value"}=this._parsing;s=u=>+Cg(n[u],l)}let o,a;for(o=e,a=e+t;o<a;++o)r._parsed[o]=s(o)}}_getRotation(){return Dc(this.options.rotation-90)}_getCircumference(){return Dc(this.options.circumference)}_getRotationExtents(){let e=as,t=-as;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),l=Math.min(b5e(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:h}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:m}=o$e(h,c,l),y=(n.width-o)/d,v=(n.height-o)/f,b=Math.max(Math.min(y,v)/2,0),x=Cwe(this.options.radius,b),w=Math.max(x*l,0),C=(x-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/as)}updateElements(e,t,n,r){const s=r==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,c=(a.left+a.right)/2,h=(a.top+a.bottom)/2,d=s&&u.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,r);let v=this._getRotation(),b;for(b=0;b<t;++b)v+=this._circumference(b,s);for(b=t;b<t+n;++b){const x=this._circumference(b,s),w=e[b],C={x:c+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+x,circumference:x,outerRadius:p,innerRadius:f};y&&(C.options=m||this.resolveDataElementOptions(b,w.active?"active":r)),v+=x,this.updateElement(w,b,C,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(n+=Math.abs(s))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?as*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Z2(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,o,a,l;if(!e){for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const s=this.resolveDataElementOptions(n);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(dn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ye(n0,"id","doughnut"),Ye(n0,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ye(n0,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ye(n0,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class cf extends Pc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=Mwe(t,r,o);this._drawStart=a,this._drawCount=l,Iwe(t)&&(a=0,l=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,t,n,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(t,r),d=o.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,y=z_(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||r==="none",b=t+n,x=e.length;let w=t>0&&this.getParsed(t-1);for(let C=0;C<x;++C){const D=e[C],R=v?D:{};if(C<t||C>=b){R.skip=!0;continue}const A=this.getParsed(C),L=cr(A[f]),O=R[d]=o.getPixelForValue(A[d],C),$=R[f]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[f],C);R.skip=isNaN(O)||isNaN($)||L,R.stop=C>0&&Math.abs(A[d]-w[d])>y,m&&(R.parsed=A,R.raw=u.data[C]),h&&(R.options=c||this.resolveDataElementOptions(C,D.active?"active":r)),v||this.updateElement(D,C,R,r),w=A}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ye(cf,"id","line"),Ye(cf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ye(cf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Bh extends Pc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Z2(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return zwe.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const s=r==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,c=u.xCenter,h=u.yCenter,d=u.getIndexAngle(0)-.5*us;let f=d,p;const m=360/this.countVisibleElements();for(p=0;p<t;++p)f+=this._computeAngle(p,r,m);for(p=t;p<t+n;p++){const y=e[p];let v=f,b=f+this._computeAngle(p,r,m),x=o.getDataVisibility(p)?u.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=b,s&&(l.animateScale&&(x=0),l.animateRotate&&(v=b=d));const w={x:c,y:h,innerRadius:0,outerRadius:x,startAngle:v,endAngle:b,options:this.resolveDataElementOptions(p,y.active?"active":r)};this.updateElement(y,p,w,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Dc(this.resolveDataElementOptions(e,t).angle||n):0}}Ye(Bh,"id","polarArea"),Ye(Bh,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ye(Bh,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class yO extends n0{}Ye(yO,"id","pie"),Ye(yO,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class oA extends Pc{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return zwe.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:o};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,o=r==="reset";for(let a=t;a<t+n;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":r),c=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:c.x,d=o?s.yCenter:c.y,f={x:h,y:d,angle:c.angle,skip:isNaN(h)||isNaN(d),options:u};this.updateElement(l,a,f,r)}}}Ye(oA,"id","radar"),Ye(oA,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ye(oA,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class p0 extends Pc{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,o=this.getParsed(e),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:n[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:o}=Mwe(t,n,r);if(this._drawStart=s,this._drawCount=o,Iwe(t)&&(s=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=n;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(c),d=this.includeOptions(r,h),f=o.axis,p=a.axis,{spanGaps:m,segment:y}=this.options,v=z_(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none";let x=t>0&&this.getParsed(t-1);for(let w=t;w<t+n;++w){const C=e[w],D=this.getParsed(w),R=b?C:{},A=cr(D[p]),L=R[f]=o.getPixelForValue(D[f],w),O=R[p]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[p],w);R.skip=isNaN(L)||isNaN(O)||A,R.stop=w>0&&Math.abs(D[f]-x[f])>v,y&&(R.parsed=D,R.raw=u.data[w]),d&&(R.options=h||this.resolveDataElementOptions(w,C.active?"active":r)),b||this.updateElement(C,w,R,r),x=D}this.updateSharedOptions(h,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,o)/2}}Ye(p0,"id","scatter"),Ye(p0,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ye(p0,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var a$e=Object.freeze({__proto__:null,BarController:yg,BubbleController:sA,DoughnutController:n0,LineController:cf,PieController:yO,PolarAreaController:Bh,RadarController:oA,ScatterController:p0});function Fm(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mN{constructor(e){Ye(this,"options");this.options=e||{}}static override(e){Object.assign(mN.prototype,e)}init(){}formats(){return Fm()}parse(){return Fm()}format(){return Fm()}add(){return Fm()}diff(){return Fm()}startOf(){return Fm()}endOf(){return Fm()}}var Kwe={_date:mN};function l$e(i,e,t,n){const{controller:r,data:s,_sorted:o}=i,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?M5e:tf;if(n){if(r._sharedOptions){const u=s[0],c=typeof u.getRange=="function"&&u.getRange(e);if(c){const h=l(s,e,t-c),d=l(s,e,t+c);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function K2(i,e,t,n,r){const s=i.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:c}=s[a],{lo:h,hi:d}=l$e(s[a],e,o,r);for(let f=h;f<=d;++f){const p=c[f];p.skip||n(p,u,f)}}}function u$e(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,r){const s=e?Math.abs(n.x-r.x):0,o=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function gM(i,e,t,n,r){const s=[];return!r&&!i.isPointInArea(e)||K2(i,t,e,function(a,l,u){!r&&!nf(a,i.chartArea,0)||a.inRange(e.x,e.y,n)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function c$e(i,e,t,n){let r=[];function s(o,a,l){const{startAngle:u,endAngle:c}=o.getProps(["startAngle","endAngle"],n),{angle:h}=Awe(o,{x:e.x,y:e.y});TE(h,u,c)&&r.push({element:o,datasetIndex:a,index:l})}return K2(i,t,e,s),r}function h$e(i,e,t,n,r,s){let o=[];const a=u$e(t);let l=Number.POSITIVE_INFINITY;function u(c,h,d){const f=c.inRange(e.x,e.y,r);if(n&&!f)return;const p=c.getCenterPoint(r);if(!(!!s||i.isPointInArea(p))&&!f)return;const y=a(e,p);y<l?(o=[{element:c,datasetIndex:h,index:d}],l=y):y===l&&o.push({element:c,datasetIndex:h,index:d})}return K2(i,t,e,u),o}function mM(i,e,t,n,r,s){return!s&&!i.isPointInArea(e)?[]:t==="r"&&!n?c$e(i,e,t,r):h$e(i,e,t,n,r,s)}function jge(i,e,t,n,r){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return K2(i,t,e,(l,u,c)=>{l[o](e[t],r)&&(s.push({element:l,datasetIndex:u,index:c}),a=a||l.inRange(e.x,e.y,r))}),n&&!a?[]:s}var d$e={evaluateInteractionItems:K2,modes:{index(i,e,t,n){const r=Xm(e,i),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?gM(i,r,s,n,o):mM(i,r,s,!1,n,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(u=>{const c=a[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(i,e,t,n){const r=Xm(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?gM(i,r,s,n,o):mM(i,r,s,!1,n,o);if(a.length>0){const l=a[0].datasetIndex,u=i.getDatasetMeta(l).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:l,index:c})}return a},point(i,e,t,n){const r=Xm(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return gM(i,r,s,n,o)},nearest(i,e,t,n){const r=Xm(e,i),s=t.axis||"xy",o=t.includeInvisible||!1;return mM(i,r,s,t.intersect,n,o)},x(i,e,t,n){const r=Xm(e,i);return jge(i,r,"x",t.intersect,n)},y(i,e,t,n){const r=Xm(e,i);return jge(i,r,"y",t.intersect,n)}}};const Jwe=["left","top","right","bottom"];function Jx(i,e){return i.filter(t=>t.pos===e)}function zge(i,e){return i.filter(t=>Jwe.indexOf(t.pos)===-1&&t.box.axis===e)}function Qx(i,e){return i.sort((t,n)=>{const r=e?n:t,s=e?t:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function f$e(i){const e=[];let t,n,r,s,o,a;for(t=0,n=(i||[]).length;t<n;++t)r=i[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function p$e(i){const e={};for(const t of i){const{stack:n,pos:r,stackWeight:s}=t;if(!n||!Jwe.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function g$e(i,e){const t=p$e(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=i.length;s<o;++s){a=i[s];const{fullSize:l}=a.box,u=t[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*n:l&&e.availableWidth,a.height=r):(a.width=n,a.height=c?c*r:l&&e.availableHeight)}return t}function m$e(i){const e=f$e(i),t=Qx(e.filter(u=>u.box.fullSize),!0),n=Qx(Jx(e,"left"),!0),r=Qx(Jx(e,"right")),s=Qx(Jx(e,"top"),!0),o=Qx(Jx(e,"bottom")),a=zge(e,"x"),l=zge(e,"y");return{fullSize:t,leftAndTop:n.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Jx(e,"chartArea"),vertical:n.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Gge(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function Qwe(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function y$e(i,e,t,n){const{pos:r,box:s}=t,o=i.maxPadding;if(!$n(r)){t.size&&(i[r]-=t.size);const h=n[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?s.height:s.width),t.size=h.size/h.count,i[r]+=t.size}s.getPadding&&Qwe(o,s.getPadding());const a=Math.max(0,e.outerWidth-Gge(o,i,"left","right")),l=Math.max(0,e.outerHeight-Gge(o,i,"top","bottom")),u=a!==i.w,c=l!==i.h;return i.w=a,i.h=l,t.horizontal?{same:u,other:c}:{same:c,other:u}}function v$e(i){const e=i.maxPadding;function t(n){const r=Math.max(e[n]-i[n],0);return i[n]+=r,r}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function _$e(i,e){const t=e.maxPadding;function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return n(i?["left","right"]:["top","bottom"])}function Sw(i,e,t,n){const r=[];let s,o,a,l,u,c;for(s=0,o=i.length,u=0;s<o;++s){a=i[s],l=a.box,l.update(a.width||e.w,a.height||e.h,_$e(a.horizontal,e));const{same:h,other:d}=y$e(e,t,a,n);u|=h&&r.length,c=c||d,l.fullSize||r.push(a)}return u&&Sw(r,e,t,n)||c}function $S(i,e,t,n,r){i.top=t,i.left=e,i.right=e+n,i.bottom=t+r,i.width=n,i.height=r}function Uge(i,e,t,n){const r=t.padding;let{x:s,y:o}=e;for(const a of i){const l=a.box,u=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*c,d=u.size||l.height;SE(u.start)&&(o=u.start),l.fullSize?$S(l,r.left,o,t.outerWidth-r.right-r.left,d):$S(l,e.left+u.placed,o,h,d),u.start=o,u.placed+=h,o=l.bottom}else{const h=e.h*c,d=u.size||l.width;SE(u.start)&&(s=u.start),l.fullSize?$S(l,s,r.top,d,t.outerHeight-r.bottom-r.top):$S(l,s,e.top+u.placed,d,h),u.start=s,u.placed+=h,s=l.right}}e.x=s,e.y=o}var Ua={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;const r=Va(i.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=m$e(i.boxes),l=a.vertical,u=a.horizontal;jr(i.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const c=l.reduce((m,y)=>y.box.options&&y.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},r);Qwe(d,Va(n));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=g$e(l.concat(u),h);Sw(a.fullSize,f,h,p),Sw(l,f,h,p),Sw(u,f,h,p)&&Sw(l,f,h,p),v$e(f),Uge(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Uge(a.rightAndBottom,f,h,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},jr(a.chartArea,m=>{const y=m.box;Object.assign(y,i.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class eEe{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class b$e extends eEe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const aA="$chartjs",x$e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qge=i=>i===null||i==="";function w$e(i,e){const t=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[aA]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",qge(r)){const s=Tge(i,"width");s!==void 0&&(i.width=s)}if(qge(n))if(i.style.height==="")i.height=i.width/(e||2);else{const s=Tge(i,"height");s!==void 0&&(i.height=s)}return i}const tEe=S4e?{passive:!0}:!1;function E$e(i,e,t){i&&i.addEventListener(e,t,tEe)}function C$e(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,tEe)}function S$e(i,e){const t=x$e[i.type]||i.type,{x:n,y:r}=Xm(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function UA(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function T$e(i,e,t){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||UA(a.addedNodes,n),o=o&&!UA(a.removedNodes,n);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function A$e(i,e,t){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||UA(a.removedNodes,n),o=o&&!UA(a.addedNodes,n);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const RE=new Map;let Vge=0;function iEe(){const i=window.devicePixelRatio;i!==Vge&&(Vge=i,RE.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function R$e(i,e){RE.size||window.addEventListener("resize",iEe),RE.set(i,e)}function k$e(i){RE.delete(i),RE.size||window.removeEventListener("resize",iEe)}function D$e(i,e,t){const n=i.canvas,r=n&&gN(n);if(!r)return;const s=Lwe((a,l)=>{const u=r.clientWidth;t(a,l),u<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||s(u,c)});return o.observe(r),R$e(i,s),o}function yM(i,e,t){t&&t.disconnect(),e==="resize"&&k$e(i)}function L$e(i,e,t){const n=i.canvas,r=Lwe(s=>{i.ctx!==null&&t(S$e(s,i))},i);return E$e(n,e,r),r}class M$e extends eEe{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(w$e(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[aA])return!1;const n=t[aA].initial;["height","width"].forEach(s=>{const o=n[s];cr(o)?t.removeAttribute(s):t.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[aA],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),o={attach:T$e,detach:A$e,resize:D$e}[t]||L$e;r[t]=o(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:yM,detach:yM,resize:yM}[t]||C$e)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return C4e(e,t,n,r)}isAttached(e){const t=e&&gN(e);return!!(t&&t.isConnected)}}function I$e(i){return!pN()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?b$e:M$e}var rA;let Df=(rA=class{constructor(){Ye(this,"x");Ye(this,"y");Ye(this,"active",!1);Ye(this,"options");Ye(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return z_(this.x)&&z_(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}},Ye(rA,"defaults",{}),Ye(rA,"defaultRoutes"),rA);function O$e(i,e){const t=i.options.ticks,n=P$e(i),r=Math.min(t.maxTicksLimit||n,n),s=t.major.enabled?N$e(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return $$e(e,u,s,o/r),u;const c=F$e(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(BS(e,u,c,cr(f)?0:a-f,a),h=0,d=o-1;h<d;h++)BS(e,u,c,s[h],s[h+1]);return BS(e,u,c,l,cr(f)?e.length:l+f),u}return BS(e,u,c),u}function P$e(i){const e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),r=i._maxLength/t;return Math.floor(Math.min(n,r))}function F$e(i,e,t){const n=B$e(i),r=e.length/t;if(!n)return Math.max(r,1);const s=R5e(n);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function N$e(i){const e=[];let t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function $$e(i,e,t,n){let r=0,s=t[0],o;for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(e.push(i[o]),r++,s=t[r*n])}function BS(i,e,t,n,r){const s=dn(n,0),o=Math.min(dn(r,i.length),i.length);let a=0,l,u,c;for(t=Math.ceil(t),r&&(l=r-n,t=l/Math.floor(l/t)),c=s;c<0;)a++,c=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===c&&(e.push(i[u]),a++,c=Math.round(s+a*t))}function B$e(i){const e=i.length;let t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}const j$e=i=>i==="left"?"right":i==="right"?"left":i,Hge=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Wge=(i,e)=>Math.min(e||i,i);function Xge(i,e){const t=[],n=i.length/e,r=i.length;let s=0;for(;s<r;s+=n)t.push(i[Math.floor(s)]);return t}function z$e(i,e,t){const n=i.ticks.length,r=Math.min(e,n-1),s=i._startPixel,o=i._endPixel,a=1e-6;let l=i.getPixelForTick(r),u;if(!(t&&(n===1?u=Math.max(l-s,o-l):e===0?u=(i.getPixelForTick(1)-l)/2:u=(l-i.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function G$e(i,e){jr(i,t=>{const n=t.gc,r=n.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[n[s]];n.splice(0,r)}})}function ew(i){return i.drawTicks?i.tickLength:0}function Yge(i,e){if(!i.display)return 0;const t=Ro(i.font,e),n=Va(i.padding);return(os(i.text)?i.text.length:1)*t.lineHeight+n.height}function U$e(i,e){return Gg(i,{scale:e,type:"scale"})}function q$e(i,e,t){return Gg(i,{tick:t,index:e,type:"tick"})}function V$e(i,e,t){let n=lN(i);return(t&&e!=="right"||!t&&e==="right")&&(n=j$e(n)),n}function H$e(i,e,t,n){const{top:r,left:s,bottom:o,right:a,chart:l}=i,{chartArea:u,scales:c}=l;let h=0,d,f,p;const m=o-r,y=a-s;if(i.isHorizontal()){if(f=$a(n,s,a),$n(t)){const v=Object.keys(t)[0],b=t[v];p=c[v].getPixelForValue(b)+m-e}else t==="center"?p=(u.bottom+u.top)/2+m-e:p=Hge(i,t,e);d=a-s}else{if($n(t)){const v=Object.keys(t)[0],b=t[v];f=c[v].getPixelForValue(b)-y+e}else t==="center"?f=(u.left+u.right)/2-y+e:f=Hge(i,t,e);p=$a(n,o,r),h=t==="left"?-Ys:Ys}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class Y0 extends Df{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=au(e,Number.POSITIVE_INFINITY),t=au(t,Number.NEGATIVE_INFINITY),n=au(n,Number.POSITIVE_INFINITY),r=au(r,Number.NEGATIVE_INFINITY),{min:au(e,n),max:au(t,r),minDefined:Fs(e),maxDefined:Fs(t)}}getMinMax(e){let{min:t,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(n=Math.max(n,o.max));return t=s&&t>n?n:t,n=r&&t>n?t:n,{min:au(t,au(n,t)),max:au(n,au(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zr(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=i4e(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Xge(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=O$e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zr(this.options.afterUpdate,[this])}beforeSetDimensions(){Zr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=Zr(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){Zr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Wge(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const c=this._getLabelSizes(),h=c.widest.width,d=c.highest.height,f=Zo(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/n:f/(n-1),h+6>a&&(a=f/(n-(e.offset?.5:1)),l=this.maxHeight-ew(e.grid)-t.padding-Yge(e.title,this.chart.options.font),u=Math.sqrt(h*h+d*d),o=oN(Math.min(Math.asin(Zo((c.highest.height+6)/a,-1,1)),Math.asin(Zo(l/u,-1,1))-Math.asin(Zo(d/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Zr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Yge(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=ew(s)+l):(e.height=this.maxHeight,e.width=ew(s)+l),n.display&&this.ticks.length){const{first:u,last:c,widest:h,highest:d}=this._getLabelSizes(),f=n.padding*2,p=Dc(this.labelRotation),m=Math.cos(p),y=Math.sin(p);if(a){const v=n.mirror?0:y*h.width+m*d.height;e.height=Math.min(this.maxHeight,e.height+v+f)}else{const v=n.mirror?0:m*h.width+y*d.height;e.width=Math.min(this.maxWidth,e.width+v+f)}this._calculatePadding(u,c,y,m)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?u?(d=r*e.width,f=n*t.height):(d=n*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=t.width/2),this.paddingLeft=Math.max((d-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let c=t.height/2,h=e.height/2;s==="start"?(c=0,h=e.height):s==="end"&&(c=t.height,h=0),this.paddingTop=c+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)cr(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Xge(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/Wge(t,n));let u=0,c=0,h,d,f,p,m,y,v,b,x,w,C;for(h=0;h<t;h+=l){if(p=e[h].label,m=this._resolveTickFontOptions(h),r.font=y=m.string,v=s[y]=s[y]||{data:{},gc:[]},b=m.lineHeight,x=w=0,!cr(p)&&!os(p))x=zA(r,v.data,v.gc,x,p),w=b;else if(os(p))for(d=0,f=p.length;d<f;++d)C=p[d],!cr(C)&&!os(C)&&(x=zA(r,v.data,v.gc,x,C),w+=b);o.push(x),a.push(w),u=Math.max(x,u),c=Math.max(w,c)}G$e(s,t);const D=o.indexOf(u),R=a.indexOf(c),A=L=>({width:o[L]||0,height:a[L]||0});return{first:A(0),last:A(t-1),widest:A(D),highest:A(R),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return L5e(this._alignToPixels?Pm(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=q$e(this.getContext(),e,n))}return this.$context||(this.$context=U$e(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Dc(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*n>a*r?a/n:l/r:l*r<a*n?l/n:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=ew(s),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,y=m/2,v=function(B){return Pm(n,B,m)};let b,x,w,C,D,R,A,L,O,$,q,M;if(o==="top")b=v(this.bottom),R=this.bottom-d,L=b-y,$=v(e.top)+y,M=e.bottom;else if(o==="bottom")b=v(this.top),$=e.top,M=v(e.bottom)-y,R=b+y,L=this.top+d;else if(o==="left")b=v(this.right),D=this.right-d,A=b-y,O=v(e.left)+y,q=e.right;else if(o==="right")b=v(this.left),O=e.left,q=v(e.right)-y,D=b+y,A=this.left+d;else if(t==="x"){if(o==="center")b=v((e.top+e.bottom)/2+.5);else if($n(o)){const B=Object.keys(o)[0],W=o[B];b=v(this.chart.scales[B].getPixelForValue(W))}$=e.top,M=e.bottom,R=b+y,L=R+d}else if(t==="y"){if(o==="center")b=v((e.left+e.right)/2);else if($n(o)){const B=Object.keys(o)[0],W=o[B];b=v(this.chart.scales[B].getPixelForValue(W))}D=b-y,A=D-d,O=e.left,q=e.right}const F=dn(r.ticks.maxTicksLimit,h),N=Math.max(1,Math.ceil(h/F));for(x=0;x<h;x+=N){const B=this.getContext(x),W=s.setContext(B),K=a.setContext(B),ee=W.lineWidth,te=W.color,le=K.dash||[],Q=K.dashOffset,z=W.tickWidth,J=W.tickColor,ye=W.tickBorderDash||[],Ne=W.tickBorderDashOffset;w=z$e(this,x,l),w!==void 0&&(C=Pm(n,w,ee),u?D=A=O=q=C:R=L=$=M=C,f.push({tx1:D,ty1:R,tx2:A,ty2:L,x1:O,y1:$,x2:q,y2:M,width:ee,color:te,borderDash:le,borderDashOffset:Q,tickWidth:z,tickColor:J,tickBorderDash:ye,tickBorderDashOffset:Ne}))}return this._ticksLength=h,this._borderValue=b,f}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=s,d=ew(n.grid),f=d+c,p=h?-c:f,m=-Dc(this.labelRotation),y=[];let v,b,x,w,C,D,R,A,L,O,$,q,M="middle";if(r==="top")D=this.bottom-p,R=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+p,R=this._getXAxisLabelAlignment();else if(r==="left"){const N=this._getYAxisLabelAlignment(d);R=N.textAlign,C=N.x}else if(r==="right"){const N=this._getYAxisLabelAlignment(d);R=N.textAlign,C=N.x}else if(t==="x"){if(r==="center")D=(e.top+e.bottom)/2+f;else if($n(r)){const N=Object.keys(r)[0],B=r[N];D=this.chart.scales[N].getPixelForValue(B)+f}R=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")C=(e.left+e.right)/2-f;else if($n(r)){const N=Object.keys(r)[0],B=r[N];C=this.chart.scales[N].getPixelForValue(B)}R=this._getYAxisLabelAlignment(d).textAlign}t==="y"&&(l==="start"?M="top":l==="end"&&(M="bottom"));const F=this._getLabelSizes();for(v=0,b=a.length;v<b;++v){x=a[v],w=x.label;const N=s.setContext(this.getContext(v));A=this.getPixelForTick(v)+s.labelOffset,L=this._resolveTickFontOptions(v),O=L.lineHeight,$=os(w)?w.length:1;const B=$/2,W=N.color,K=N.textStrokeColor,ee=N.textStrokeWidth;let te=R;o?(C=A,R==="inner"&&(v===b-1?te=this.options.reverse?"left":"right":v===0?te=this.options.reverse?"right":"left":te="center"),r==="top"?u==="near"||m!==0?q=-$*O+O/2:u==="center"?q=-F.highest.height/2-B*O+O:q=-F.highest.height+O/2:u==="near"||m!==0?q=O/2:u==="center"?q=F.highest.height/2-B*O:q=F.highest.height-$*O,h&&(q*=-1),m!==0&&!N.showLabelBackdrop&&(C+=O/2*Math.sin(m))):(D=A,q=(1-$)*O/2);let le;if(N.showLabelBackdrop){const Q=Va(N.backdropPadding),z=F.heights[v],J=F.widths[v];let ye=q-Q.top,Ne=0-Q.left;switch(M){case"middle":ye-=z/2;break;case"bottom":ye-=z;break}switch(R){case"center":Ne-=J/2;break;case"right":Ne-=J;break;case"inner":v===b-1?Ne-=J:v>0&&(Ne-=J/2);break}le={left:Ne,top:ye,width:J+Q.width,height:z+Q.height,color:N.backdropColor}}y.push({label:w,font:L,textOffset:q,options:{rotation:m,color:W,strokeColor:K,strokeWidth:ee,textAlign:te,textBaseline:M,translation:[C,D],backdrop:le}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Dc(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,c;return t==="left"?r?(c=this.right+s,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c=this.left)):t==="right"?r?(c=this.left+s,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){const l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),o=n.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,c,h,d;this.isHorizontal()?(u=Pm(e,this.left,o)-o/2,c=Pm(e,this.right,a)+a/2,h=d=l):(h=Pm(e,this.top,o)-o/2,d=Pm(e,this.bottom,a)+a/2,u=c=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,h),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&oD(n,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,c=o.textOffset;k0(n,u,0,c,l,a)}r&&aD(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=Ro(n.font),o=Va(n.padding),a=n.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||$n(t)?(l+=o.bottom,os(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=o.top;const{titleX:u,titleY:c,maxWidth:h,rotation:d}=H$e(this,l,t,a);k0(e,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:d,textAlign:V$e(a,t,r),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=dn(e.grid&&e.grid.z,-1),r=dn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Y0.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[n]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ro(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class jS{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;Y$e(t)&&(n=this.register(t));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,W$e(e,o,n),this.override&&Ns.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Ns[r]&&(delete Ns[r][n],this.override&&delete R0[n])}}function W$e(i,e,t){const n=Cu(Object.create(null),[t?Ns.get(t):{},Ns.get(e),i.defaults]);Ns.set(e,n),i.defaultRoutes&&X$e(e,i.defaultRoutes),i.descriptors&&Ns.describe(e,i.descriptors)}function X$e(i,e){Object.keys(e).forEach(t=>{const n=t.split("."),r=n.pop(),s=[i].concat(n).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");Ns.route(s,r,l,a)})}function Y$e(i){return"id"in i&&"defaults"in i}let Z$e=class{constructor(){this.controllers=new jS(Pc,"datasets",!0),this.elements=new jS(Df,"elements"),this.plugins=new jS(Object,"plugins"),this.scales=new jS(Y0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):jr(r,o=>{const a=n||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,n){const r=sN(e);Zr(n["before"+r],[],n),t[e](n),Zr(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}};var sl=new Z$e;class K$e{constructor(){this._init=[]}notify(e,t,n,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,n);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,n,r){r=r||{};for(const s of e){const o=s.plugin,a=o[n],l=[t,r,s.options];if(Zr(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){cr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=dn(n.options&&n.options.plugins,{}),s=J$e(n);return r===!1&&!t?[]:e6e(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function J$e(i){const e={},t=[],n=Object.keys(sl.plugins.items);for(let s=0;s<n.length;s++)t.push(sl.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Q$e(i,e){return!e&&i===!1?null:i===!0?{}:i}function e6e(i,{plugins:e,localIds:t},n,r){const s=[],o=i.getContext();for(const a of e){const l=a.id,u=Q$e(n[l],r);u!==null&&s.push({plugin:a,options:t6e(i.config,{plugin:a,local:t[l]},u,o)})}return s}function t6e(i,{plugin:e,local:t},n,r){const s=i.pluginScopeKeys(e),o=i.getOptionScopes(n,s);return t&&e.defaults&&o.push(e.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function vO(i,e){const t=Ns.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function i6e(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function n6e(i,e){return i===e?"_index_":"_value_"}function Zge(i){if(i==="x"||i==="y"||i==="r")return i}function r6e(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function _O(i,...e){if(Zge(i))return i;for(const t of e){const n=t.axis||r6e(t.position)||i.length>1&&Zge(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Kge(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function s6e(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(t.length)return Kge(i,"x",t[0])||Kge(i,"y",t[0])}return{}}function o6e(i,e){const t=R0[i.type]||{scales:{}},n=e.scales||{},r=vO(i.type,e),s=Object.create(null);return Object.keys(n).forEach(o=>{const a=n[o];if(!$n(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=_O(o,a,s6e(o,i),Ns.scales[a.type]),u=n6e(l,r),c=t.scales||{};s[o]=Ww(Object.create(null),[{axis:l},a,c[l],c[u]])}),i.data.datasets.forEach(o=>{const a=o.type||i.type,l=o.indexAxis||vO(a,e),c=(R0[a]||{}).scales||{};Object.keys(c).forEach(h=>{const d=i6e(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),Ww(s[f],[{axis:d},n[f],c[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ww(a,[Ns.scales[a.type],Ns.scale])}),s}function nEe(i){const e=i.options||(i.options={});e.plugins=dn(e.plugins,{}),e.scales=o6e(i,e)}function rEe(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function a6e(i){return i=i||{},i.data=rEe(i.data),nEe(i),i}const Jge=new Map,sEe=new Set;function zS(i,e){let t=Jge.get(i);return t||(t=e(),Jge.set(i,t),sEe.add(t)),t}const tw=(i,e,t)=>{const n=Cg(e,t);n!==void 0&&i.add(n)};let l6e=class{constructor(e){this._config=a6e(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rEe(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nEe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zS(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return zS(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return zS(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return zS(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,o=this._cachedScopes(e,n),a=o.get(t);if(a)return a;const l=new Set;t.forEach(c=>{e&&(l.add(e),c.forEach(h=>tw(l,e,h))),c.forEach(h=>tw(l,r,h)),c.forEach(h=>tw(l,R0[s]||{},h)),c.forEach(h=>tw(l,Ns,h)),c.forEach(h=>tw(l,gO,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),sEe.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,R0[t]||{},Ns.datasets[t]||{},{type:t},Ns,gO]}resolveNamedOptions(e,t,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Qge(this._resolverCache,e,r);let l=o;if(c6e(o,t)){s.$shared=!1,n=Sg(n)?n():n;const u=this.createResolver(e,n,a);l=G_(o,n,u)}for(const u of t)s[u]=l[u];return s}createResolver(e,t,n=[""],r){const{resolver:s}=Qge(this._resolverCache,e,n);return $n(t)?G_(s,t,void 0,r):s}};function Qge(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));const r=t.join();let s=n.get(r);return s||(s={resolver:hN(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},n.set(r,s)),s}const u6e=i=>$n(i)&&Object.getOwnPropertyNames(i).some(e=>Sg(i[e]));function c6e(i,e){const{isScriptable:t,isIndexable:n}=Nwe(i);for(const r of e){const s=t(r),o=n(r),a=(o||s)&&i[r];if(s&&(Sg(a)||u6e(a))||o&&os(a))return!0}return!1}var h6e="4.4.3";const d6e=["top","bottom","left","right","chartArea"];function eme(i,e){return i==="top"||i==="bottom"||d6e.indexOf(i)===-1&&e==="x"}function tme(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function ime(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Zr(t&&t.onComplete,[i],e)}function f6e(i){const e=i.chart,t=e.options.animation;Zr(t&&t.onProgress,[i],e)}function oEe(i){return pN()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const lA={},nme=i=>{const e=oEe(i);return Object.values(lA).filter(t=>t.canvas===e).pop()};function p6e(i,e,t){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=e){const o=i[r];delete i[r],(t>0||s>e)&&(i[s+t]=o)}}}function g6e(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}function GS(i,e,t){return i.options.clip?i[t]:e[t]}function m6e(i,e){const{xScale:t,yScale:n}=i;return t&&n?{left:GS(t,e,"left"),right:GS(t,e,"right"),top:GS(n,e,"top"),bottom:GS(n,e,"bottom")}:e}class Ml{static register(...e){sl.add(...e),rme()}static unregister(...e){sl.remove(...e),rme()}constructor(e,t){const n=this.config=new l6e(t),r=oEe(e),s=nme(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||I$e(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=_5e(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new K$e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=P5e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],lA[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ud.listen(this,"complete",ime),Ud.listen(this,"progress",f6e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return cr(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return sl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sge(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wge(this.canvas,this.ctx),this}stop(){return Ud.stop(this),this}resize(e,t){Ud.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Sge(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Zr(n.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};jr(t,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=_O(o,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),jr(s,o=>{const a=o.options,l=a.id,u=_O(l,a),c=dn(a.type,o.dtype);(a.position===void 0||eme(a.position,u)!==eme(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in n&&n[l].type===c)h=n[l];else{const d=sl.getScale(c);h=new d({id:l,type:c,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(a,e)}),jr(r,(o,a)=>{o||delete n[a]}),jr(n,o=>{Ua.configure(this,o,o.options),Ua.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((r,s)=>r.index-s.index),n>t){for(let r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(tme("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,r)=>{t.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const s=t[n];let o=this.getDatasetMeta(n);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=a,o.indexAxis=s.indexAxis||vO(a,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const l=sl.getController(a),{datasetElementType:u,dataElementType:c}=Ns.datasets[a];Object.assign(l,{dataElementType:sl.getElement(c),datasetElementType:u&&sl.getElement(u)}),o.controller=new l(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){jr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:h}=this.getDatasetMeta(u),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||jr(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tme("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){jr(this.scales,e=>{Ua.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!pge(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){const o=n==="_removeElements"?-s:s;p6e(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!pge(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ua.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],jr(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Sg(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ud.has(this)?this.attached&&!Ud.running(this)&&Ud.start(this):(this.draw(),ime({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const o=t[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,s=m6e(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&oD(t,{left:n.left===!1?0:s.left-n.left,right:n.right===!1?this.width:s.right+n.right,top:n.top===!1?0:s.top-n.top,bottom:n.bottom===!1?this.height:s.bottom+n.bottom}),e.controller.draw(),r&&aD(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return nf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=d$e.modes[t];return typeof s=="function"?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Gg(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);SE(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(s,{visible:n}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ud.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wge(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete lA[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};jr(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){jr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},jr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!NA(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),o=s(t,e),a=n?e:s(e,t);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,o=t,a=this._getActiveElements(e,r,n,o),l=S5e(e),u=g6e(e,this._lastEvent,n,l);n&&(this._lastEvent=null,Zr(s.onHover,[e,a,this],this),l&&Zr(s.onClick,[e,a,this],this));const c=!NA(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=u,c}_getActiveElements(e,t,n,r){if(e.type==="mouseout")return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}Ye(Ml,"defaults",Ns),Ye(Ml,"instances",lA),Ye(Ml,"overrides",R0),Ye(Ml,"registry",sl),Ye(Ml,"version",h6e),Ye(Ml,"getChart",nme);function rme(){return jr(Ml.instances,i=>i._plugins.invalidate())}function y6e(i,e,t){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=r/a;i.beginPath(),i.arc(s,o,a,n-u,t+u),l>r?(u=r/l,i.arc(s,o,l,t+u,n-u,!0)):i.arc(s,o,r,t+Ys,n-Ys),i.closePath(),i.clip()}function v6e(i){return cN(i,["outerStart","outerEnd","innerStart","innerEnd"])}function _6e(i,e,t,n){const r=v6e(i.options.borderRadius),s=(t-e)/2,o=Math.min(s,n*e/2),a=l=>{const u=(t-Math.min(s,l))*n/2;return Zo(l,0,Math.min(s,u))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Zo(r.innerStart,0,o),innerEnd:Zo(r.innerEnd,0,o)}}function nv(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function qA(i,e,t,n,r,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:c}=e,h=Math.max(e.outerRadius+n+t-u,0),d=c>0?c+n+t+u:0;let f=0;const p=r-l;if(n){const N=c>0?c-n:0,B=h>0?h-n:0,W=(N+B)/2,K=W!==0?p*W/(W+n):p;f=(p-K)/2}const m=Math.max(.001,p*h-t/us)/h,y=(p-m)/2,v=l+y+f,b=r-y-f,{outerStart:x,outerEnd:w,innerStart:C,innerEnd:D}=_6e(e,d,h,b-v),R=h-x,A=h-w,L=v+x/R,O=b-w/A,$=d+C,q=d+D,M=v+C/$,F=b-D/q;if(i.beginPath(),s){const N=(L+O)/2;if(i.arc(o,a,h,L,N),i.arc(o,a,h,N,O),w>0){const ee=nv(A,O,o,a);i.arc(ee.x,ee.y,w,O,b+Ys)}const B=nv(q,b,o,a);if(i.lineTo(B.x,B.y),D>0){const ee=nv(q,F,o,a);i.arc(ee.x,ee.y,D,b+Ys,F+Math.PI)}const W=(b-D/d+(v+C/d))/2;if(i.arc(o,a,d,b-D/d,W,!0),i.arc(o,a,d,W,v+C/d,!0),C>0){const ee=nv($,M,o,a);i.arc(ee.x,ee.y,C,M+Math.PI,v-Ys)}const K=nv(R,v,o,a);if(i.lineTo(K.x,K.y),x>0){const ee=nv(R,L,o,a);i.arc(ee.x,ee.y,x,v-Ys,L)}}else{i.moveTo(o,a);const N=Math.cos(L)*h+o,B=Math.sin(L)*h+a;i.lineTo(N,B);const W=Math.cos(O)*h+o,K=Math.sin(O)*h+a;i.lineTo(W,K)}i.closePath()}function b6e(i,e,t,n,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){qA(i,e,t,n,l,r);for(let u=0;u<s;++u)i.fill();isNaN(a)||(l=o+(a%as||as))}return qA(i,e,t,n,l,r),i.fill(),l}function x6e(i,e,t,n,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:c,borderDash:h,borderDashOffset:d}=l,f=l.borderAlign==="inner";if(!u)return;i.setLineDash(h||[]),i.lineDashOffset=d,f?(i.lineWidth=u*2,i.lineJoin=c||"round"):(i.lineWidth=u,i.lineJoin=c||"bevel");let p=e.endAngle;if(s){qA(i,e,t,n,p,r);for(let m=0;m<s;++m)i.stroke();isNaN(a)||(p=o+(a%as||as))}f&&y6e(i,e,p),s||(qA(i,e,t,n,p,r),i.stroke())}class Jp extends Df{constructor(t){super();Ye(this,"circumference");Ye(this,"endAngle");Ye(this,"fullCircles");Ye(this,"innerRadius");Ye(this,"outerRadius");Ye(this,"pixelMargin");Ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.getProps(["x","y"],r),{angle:o,distance:a}=Awe(s,{x:t,y:n}),{startAngle:l,endAngle:u,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,m=dn(d,u-l)>=as||TE(o,l,u),y=ef(a,c+f,h+f);return m&&y}getCenterPoint(t){const{x:n,y:r,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:c}=this.options,h=(s+o)/2,d=(a+l+c+u)/2;return{x:n+Math.cos(h)*d,y:r+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:r}=this,s=(n.offset||0)/4,o=(n.spacing||0)/2,a=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>as?Math.floor(r/as):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(us,r||0)),c=s*u;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,b6e(t,this,c,o,a),x6e(t,this,c,o,a),t.restore()}}Ye(Jp,"id","arc"),Ye(Jp,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ye(Jp,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ye(Jp,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function aEe(i,e,t=e){i.lineCap=dn(t.borderCapStyle,e.borderCapStyle),i.setLineDash(dn(t.borderDash,e.borderDash)),i.lineDashOffset=dn(t.borderDashOffset,e.borderDashOffset),i.lineJoin=dn(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=dn(t.borderWidth,e.borderWidth),i.strokeStyle=dn(t.borderColor,e.borderColor)}function w6e(i,e,t){i.lineTo(t.x,t.y)}function E6e(i){return i.stepped?W5e:i.tension||i.cubicInterpolationMode==="monotone"?X5e:w6e}function lEe(i,e,t={}){const n=i.length,{start:r=0,end:s=n-1}=t,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),c=r<o&&s<o||r>a&&s>a;return{count:n,start:l,loop:e.loop,ilen:u<l&&!c?n+u-l:u-l}}function C6e(i,e,t,n){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=lEe(r,t,n),c=E6e(s);let{move:h=!0,reverse:d}=n||{},f,p,m;for(f=0;f<=u;++f)p=r[(a+(d?u-f:f))%o],!p.skip&&(h?(i.moveTo(p.x,p.y),h=!1):c(i,m,p,d,s.stepped),m=p);return l&&(p=r[(a+(d?u:0))%o],c(i,m,p,d,s.stepped)),!!l}function S6e(i,e,t,n){const r=e.points,{count:s,start:o,ilen:a}=lEe(r,t,n),{move:l=!0,reverse:u}=n||{};let c=0,h=0,d,f,p,m,y,v;const b=w=>(o+(u?a-w:w))%s,x=()=>{m!==y&&(i.lineTo(c,y),i.lineTo(c,m),i.lineTo(c,v))};for(l&&(f=r[b(0)],i.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[b(d)],f.skip)continue;const w=f.x,C=f.y,D=w|0;D===p?(C<m?m=C:C>y&&(y=C),c=(h*c+w)/++h):(x(),i.lineTo(w,C),p=D,h=0,m=y=C),v=C}x()}function bO(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?S6e:C6e}function T6e(i){return i.stepped?T4e:i.tension||i.cubicInterpolationMode==="monotone"?A4e:Ym}function A6e(i,e,t,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,n)&&r.closePath()),aEe(i,e.options),i.stroke(r)}function R6e(i,e,t,n){const{segments:r,options:s}=e,o=bO(e);for(const a of r)aEe(i,s,a.style),i.beginPath(),o(i,e,a,{start:t,end:t+n-1})&&i.closePath(),i.stroke()}const k6e=typeof Path2D=="function";function D6e(i,e,t,n){k6e&&!e.options.segment?A6e(i,e,t,n):R6e(i,e,t,n)}class Qp extends Df{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;v4e(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=I4e(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,o=Wwe(this,{property:t,start:r,end:r});if(!o.length)return;const a=[],l=T6e(n);let u,c;for(u=0,c=o.length;u<c;++u){const{start:h,end:d}=o[u],f=s[h],p=s[d];if(f===p){a.push(f);continue}const m=Math.abs((r-f[t])/(p[t]-f[t])),y=l(f,p,m,n.stepped);y[t]=e[t],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,t,n){return bO(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=bO(this);let o=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)o&=s(e,this,a,{start:t,end:t+n-1});return!!o}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),D6e(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ye(Qp,"id","line"),Ye(Qp,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ye(Qp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ye(Qp,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function sme(i,e,t,n){const r=i.options,{[t]:s}=i.getProps([t],n);return Math.abs(e-s)<r.radius+r.hitRadius}class g0 extends Df{constructor(t){super();Ye(this,"parsed");Ye(this,"skip");Ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(n-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return sme(this,t,"x",n)}inYRange(t,n){return sme(this,t,"y",n)}getCenterPoint(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){const r=this.options;this.skip||r.radius<.1||!nf(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,mO(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}Ye(g0,"id","point"),Ye(g0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ye(g0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uEe(i,e){const{x:t,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],e);let a,l,u,c,h;return i.horizontal?(h=o/2,a=Math.min(t,r),l=Math.max(t,r),u=n-h,c=n+h):(h=s/2,a=t-h,l=t+h,u=Math.min(n,r),c=Math.max(n,r)),{left:a,top:u,right:l,bottom:c}}function eg(i,e,t,n){return i?0:Zo(e,t,n)}function L6e(i,e,t){const n=i.options.borderWidth,r=i.borderSkipped,s=Fwe(n);return{t:eg(r.top,s.top,0,t),r:eg(r.right,s.right,0,e),b:eg(r.bottom,s.bottom,0,t),l:eg(r.left,s.left,0,e)}}function M6e(i,e,t){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=d0(r),o=Math.min(e,t),a=i.borderSkipped,l=n||$n(r);return{topLeft:eg(!l||a.top||a.left,s.topLeft,0,o),topRight:eg(!l||a.top||a.right,s.topRight,0,o),bottomLeft:eg(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:eg(!l||a.bottom||a.right,s.bottomRight,0,o)}}function I6e(i){const e=uEe(i),t=e.right-e.left,n=e.bottom-e.top,r=L6e(i,t/2,n/2),s=M6e(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function vM(i,e,t,n){const r=e===null,s=t===null,a=i&&!(r&&s)&&uEe(i,n);return a&&(r||ef(e,a.left,a.right))&&(s||ef(t,a.top,a.bottom))}function O6e(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function P6e(i,e){i.rect(e.x,e.y,e.w,e.h)}function _M(i,e,t={}){const n=i.x!==t.x?-e:0,r=i.y!==t.y?-e:0,s=(i.x+i.w!==t.x+t.w?e:0)-n,o=(i.y+i.h!==t.y+t.h?e:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+s,h:i.h+o,radius:i.radius}}class m0 extends Df{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=I6e(this),a=O6e(o.radius)?AE:P6e;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,_M(o,t,s)),e.clip(),a(e,_M(s,-t,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,_M(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return vM(this,e,t,n)}inXRange(e,t){return vM(this,e,null,t)}inYRange(e,t){return vM(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ye(m0,"id","bar"),Ye(m0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ye(m0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var F6e=Object.freeze({__proto__:null,ArcElement:Jp,BarElement:m0,LineElement:Qp,PointElement:g0});const xO=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ome=xO.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function cEe(i){return xO[i%xO.length]}function hEe(i){return ome[i%ome.length]}function N6e(i,e){return i.borderColor=cEe(e),i.backgroundColor=hEe(e),++e}function $6e(i,e){return i.backgroundColor=i.data.map(()=>cEe(e++)),e}function B6e(i,e){return i.backgroundColor=i.data.map(()=>hEe(e++)),e}function j6e(i){let e=0;return(t,n)=>{const r=i.getDatasetMeta(n).controller;r instanceof n0?e=$6e(t,e):r instanceof Bh?e=B6e(t,e):r&&(e=N6e(t,e))}}function ame(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function z6e(i){return i&&(i.borderColor||i.backgroundColor)}var G6e={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:n},options:r}=i.config,{elements:s}=r;if(!t.forceOverride&&(ame(n)||z6e(r)||s&&ame(s)))return;const o=j6e(i);n.forEach(o)}};function U6e(i,e,t,n,r){const s=r.samples||n;if(s>=t)return i.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const u=e+t-1;let c=e,h,d,f,p,m;for(o[l++]=i[c],h=0;h<s-2;h++){let y=0,v=0,b;const x=Math.floor((h+1)*a)+1+e,w=Math.min(Math.floor((h+2)*a)+1,t)+e,C=w-x;for(b=x;b<w;b++)y+=i[b].x,v+=i[b].y;y/=C,v/=C;const D=Math.floor(h*a)+1+e,R=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:A,y:L}=i[c];for(f=p=-1,b=D;b<R;b++)p=.5*Math.abs((A-y)*(i[b].y-L)-(A-i[b].x)*(v-L)),p>f&&(f=p,d=i[b],m=b);o[l++]=d,c=m}return o[l++]=i[u],o}function q6e(i,e,t,n){let r=0,s=0,o,a,l,u,c,h,d,f,p,m;const y=[],v=e+t-1,b=i[e].x,w=i[v].x-b;for(o=e;o<e+t;++o){a=i[o],l=(a.x-b)/w*n,u=a.y;const C=l|0;if(C===c)u<p?(p=u,h=o):u>m&&(m=u,d=o),r=(s*r+a.x)/++s;else{const D=o-1;if(!cr(h)&&!cr(d)){const R=Math.min(h,d),A=Math.max(h,d);R!==f&&R!==D&&y.push({...i[R],x:r}),A!==f&&A!==D&&y.push({...i[A],x:r})}o>0&&D!==f&&y.push(i[D]),y.push(a),c=C,s=0,p=m=u,h=d=f=o}}return y}function dEe(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function lme(i){i.data.datasets.forEach(e=>{dEe(e)})}function V6e(i,e){const t=e.length;let n=0,r;const{iScale:s}=i,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(n=Zo(tf(e,s.axis,o).lo,0,t-1)),u?r=Zo(tf(e,s.axis,a).hi+1,n,t)-n:r=t-n,{start:n,count:r}}var H6e={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){lme(i);return}const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=i.getDatasetMeta(s),u=o||r.data;if(Cw([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const c=i.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||i.options.parsing)return;let{start:h,count:d}=V6e(l,u);const f=t.threshold||4*n;if(d<=f){dEe(r);return}cr(o)&&(r._data=u,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(t.algorithm){case"lttb":p=U6e(u,h,d,n,t);break;case"min-max":p=q6e(u,h,d,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=p})},destroy(i){lme(i)}};function W6e(i,e,t){const n=i.segments,r=i.points,s=e.points,o=[];for(const a of n){let{start:l,end:u}=a;u=yN(l,u,r);const c=wO(t,r[l],r[u],a.loop);if(!e.segments){o.push({source:a,target:c,start:r[l],end:r[u]});continue}const h=Wwe(e,c);for(const d of h){const f=wO(t,s[d.start],s[d.end],d.loop),p=Hwe(a,r,f);for(const m of p)o.push({source:m,target:d,start:{[t]:ume(c,f,"start",Math.max)},end:{[t]:ume(c,f,"end",Math.min)}})}}return o}function wO(i,e,t,n){if(n)return;let r=e[i],s=t[i];return i==="angle"&&(r=uu(r),s=uu(s)),{property:i,start:r,end:s}}function X6e(i,e){const{x:t=null,y:n=null}=i||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=yN(o,a,r);const l=r[o],u=r[a];n!==null?(s.push({x:l.x,y:n}),s.push({x:u.x,y:n})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:u.y}))}),s}function yN(i,e,t){for(;e>i;e--){const n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function ume(i,e,t,n){return i&&e?n(i[t],e[t]):i?i[t]:e?e[t]:0}function fEe(i,e){let t=[],n=!1;return os(i)?(n=!0,t=i):t=X6e(i,e),t.length?new Qp({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function cme(i){return i&&i.fill!==!1}function Y6e(i,e,t){let r=i[e].fill;const s=[e];let o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Fs(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Z6e(i,e,t){const n=e8e(i);if($n(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Fs(r)&&Math.floor(r)===r?K6e(n[0],e,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function K6e(i,e,t,n){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function J6e(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:$n(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Q6e(i,e,t){let n;return i==="start"?n=t:i==="end"?n=e.options.reverse?e.min:e.max:$n(i)?n=i.value:n=e.getBaseValue(),n}function e8e(i){const e=i.options,t=e.fill;let n=dn(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function t8e(i){const{scale:e,index:t,line:n}=i,r=[],s=n.segments,o=n.points,a=i8e(e,t);a.push(fEe({x:null,y:e.bottom},n));for(let l=0;l<s.length;l++){const u=s[l];for(let c=u.start;c<=u.end;c++)n8e(r,o[c],a)}return new Qp({points:r,options:{}})}function i8e(i,e){const t=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function n8e(i,e,t){const n=[];for(let r=0;r<t.length;r++){const s=t[r],{first:o,last:a,point:l}=r8e(s,e,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(i.push(l),!a)break}}i.push(...n)}function r8e(i,e,t){const n=i.interpolate(e,t);if(!n)return{};const r=n[t],s=i.segments,o=i.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const c=s[u],h=o[c.start][t],d=o[c.end][t];if(ef(r,h,d)){a=r===h,l=r===d;break}}return{first:a,last:l,point:n}}class pEe{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:o}=this;return t=t||{start:0,end:as},e.arc(r,s,o,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function s8e(i){const{chart:e,fill:t,line:n}=i;if(Fs(t))return o8e(e,t);if(t==="stack")return t8e(i);if(t==="shape")return!0;const r=a8e(i);return r instanceof pEe?r:fEe(r,n)}function o8e(i,e){const t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function a8e(i){return(i.scale||{}).getPointPositionForValue?u8e(i):l8e(i)}function l8e(i){const{scale:e={},fill:t}=i,n=J6e(t,e);if(Fs(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function u8e(i){const{scale:e,fill:t}=i,n=e.options,r=e.getLabels().length,s=n.reverse?e.max:e.min,o=Q6e(t,e,s),a=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,s);return new pEe({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function bM(i,e,t){const n=s8e(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:h=u}=l||{};n&&r.points.length&&(oD(i,t),c8e(i,{line:r,target:n,above:c,below:h,area:t,scale:s,axis:o}),aD(i))}function c8e(i,e){const{line:t,target:n,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;i.save(),l==="x"&&s!==r&&(hme(i,n,o.top),dme(i,{line:t,target:n,color:r,scale:a,property:l}),i.restore(),i.save(),hme(i,n,o.bottom)),dme(i,{line:t,target:n,color:s,scale:a,property:l}),i.restore()}function hme(i,e,t){const{segments:n,points:r}=e;let s=!0,o=!1;i.beginPath();for(const a of n){const{start:l,end:u}=a,c=r[l],h=r[yN(l,u,r)];s?(i.moveTo(c.x,c.y),s=!1):(i.lineTo(c.x,t),i.lineTo(c.x,c.y)),o=!!e.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(h.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function dme(i,e){const{line:t,target:n,property:r,color:s,scale:o}=e,a=W6e(t,n,r);for(const{source:l,target:u,start:c,end:h}of a){const{style:{backgroundColor:d=s}={}}=l,f=n!==!0;i.save(),i.fillStyle=d,h8e(i,o,f&&wO(r,c,h)),i.beginPath();const p=!!t.pathSegment(i,l);let m;if(f){p?i.closePath():fme(i,n,h,r);const y=!!n.pathSegment(i,u,{move:p,reverse:!0});m=p&&y,m||fme(i,n,c,r)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function h8e(i,e,t){const{top:n,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(i.beginPath(),i.rect(o,n,a-o,r-n),i.clip())}function fme(i,e,t,n){const r=e.interpolate(t,n);r&&i.lineTo(r.x,r.y)}var d8e={id:"filler",afterDatasetsUpdate(i,e,t){const n=(i.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<n;++o)s=i.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Qp&&(l={visible:i.isDatasetVisible(o),index:o,fill:Z6e(a,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<n;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=Y6e(r,o,t.propagate))},beforeDraw(i,e,t){const n=t.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),n&&a.fill&&bM(i.ctx,a,s))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;cme(s)&&bM(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,e,t){const n=e.meta.$filler;!cme(n)||t.drawTime!=="beforeDatasetDraw"||bM(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const pme=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},f8e=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class gme extends Df{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Zr(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ro(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=pme(n,s);let u,c;t.font=r.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(o,s,a,l)+10):(c=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-c;return this.legendItems.forEach((p,m)=>{const y=n+t/2+s.measureText(p.text).width;(m===0||u[u.length-1]+y+2*a>o)&&(h+=c,u[u.length-(m>0?0:1)]=0,f+=c,d++),l[m]={left:0,top:f,row:d,width:y,height:r},u[u.length-1]+=y+a}),h}_fitCols(e,t,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=o-e;let h=a,d=0,f=0,p=0,m=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:b,itemHeight:x}=p8e(n,t,s,y,r);v>0&&f+x+2*a>c&&(h+=d+a,u.push({width:d,height:f}),p+=d+a,m++,d=f=0),l[v]={left:p,top:f,col:m,width:b,height:x},d=Math.max(d,b),f+=x+a}),h+=d,u.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,o=m_(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=$a(n,this.left+r,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=$a(n,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=$a(n,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=$a(n,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;oD(e,this),this._draw(),aD(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:o}=e,a=Ns.color,l=m_(e.rtl,this.left,this.width),u=Ro(o.font),{padding:c}=o,h=u.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:m,itemHeight:y}=pme(o,h),v=function(D,R,A){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const L=dn(A.lineWidth,1);if(r.fillStyle=dn(A.fillStyle,a),r.lineCap=dn(A.lineCap,"butt"),r.lineDashOffset=dn(A.lineDashOffset,0),r.lineJoin=dn(A.lineJoin,"miter"),r.lineWidth=L,r.strokeStyle=dn(A.strokeStyle,a),r.setLineDash(dn(A.lineDash,[])),o.usePointStyle){const O={radius:m*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:L},$=l.xPlus(D,p/2),q=R+d;Pwe(r,O,$,q,o.pointStyleWidth&&p)}else{const O=R+Math.max((h-m)/2,0),$=l.leftForLtr(D,p),q=d0(A.borderRadius);r.beginPath(),Object.values(q).some(M=>M!==0)?AE(r,{x:$,y:O,w:p,h:m,radius:q}):r.rect($,O,p,m),r.fill(),L!==0&&r.stroke()}r.restore()},b=function(D,R,A){k0(r,A.text,D,R+y/2,u,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},x=this.isHorizontal(),w=this._computeTitleHeight();x?f={x:$a(s,this.left+c,this.right-n[0]),y:this.top+c+w,line:0}:f={x:this.left+c,y:$a(s,this.top+w+c,this.bottom-t[0].height),line:0},Uwe(this.ctx,e.textDirection);const C=y+c;this.legendItems.forEach((D,R)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;const A=r.measureText(D.text).width,L=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),O=p+d+A;let $=f.x,q=f.y;l.setWidth(this.width),x?R>0&&$+O+c>this.right&&(q=f.y+=C,f.line++,$=f.x=$a(s,this.left+c,this.right-n[f.line])):R>0&&q+C>this.bottom&&($=f.x=$+t[f.line].width+c,f.line++,q=f.y=$a(s,this.top+w+c,this.bottom-t[f.line].height));const M=l.x($);if(v(M,q,D),$=F5e(L,$+p+d,x?$+O:this.right,e.rtl),b(l.x($),q,D),x)f.x+=O+c;else if(typeof D.text!="string"){const F=u.lineHeight;f.y+=gEe(D,F)+c}else f.y+=C}),qwe(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=Ro(t.font),r=Va(t.padding);if(!t.display)return;const s=m_(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=n.size/2,u=r.top+l;let c,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+u,h=$a(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((m,y)=>Math.max(m,y.height),0);c=u+$a(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=$a(a,h,h+d);o.textAlign=s.textAlign(lN(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,k0(o,t.text,f,c,n)}_computeTitleHeight(){const e=this.options.title,t=Ro(e.font),n=Va(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(ef(e,this.left,this.right)&&ef(t,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],ef(e,r.left,r.left+r.width)&&ef(t,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!y8e(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=f8e(r,n);r&&!s&&Zr(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!s&&Zr(t.onHover,[e,n,this],this)}else n&&Zr(t.onClick,[e,n,this],this)}}function p8e(i,e,t,n,r){const s=g8e(n,i,e,t),o=m8e(r,n,e.lineHeight);return{itemWidth:s,itemHeight:o}}function g8e(i,e,t,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+n.measureText(r).width}function m8e(i,e,t){let n=i;return typeof e.text!="string"&&(n=gEe(e,t)),n}function gEe(i,e){const t=i.text?i.text.length:0;return e*t}function y8e(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var v8e={id:"legend",_element:gme,start(i,e,t){const n=i.legend=new gme({ctx:i.ctx,options:t,chart:i});Ua.configure(i,n,t),Ua.addBox(i,n)},stop(i){Ua.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const n=i.legend;Ua.configure(i,n,t),n.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const n=e.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),c=Va(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class vN extends Df{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=os(n.text)?n.text.length:1;this._padding=Va(n.padding);const s=r*Ro(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:o}=this,a=o.align;let l=0,u,c,h;return this.isHorizontal()?(c=$a(a,n,s),h=t+e,u=s-n):(o.position==="left"?(c=n+e,h=$a(a,r,t),l=us*-.5):(c=s-e,h=$a(a,t,r),l=us*.5),u=r-t),{titleX:c,titleY:h,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=Ro(t.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);k0(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:u,textAlign:lN(t.align),textBaseline:"middle",translation:[o,a]})}}function _8e(i,e){const t=new vN({ctx:i.ctx,options:e,chart:i});Ua.configure(i,t,e),Ua.addBox(i,t),i.titleBlock=t}var b8e={id:"title",_element:vN,start(i,e,t){_8e(i,t)},stop(i){const e=i.titleBlock;Ua.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const n=i.titleBlock;Ua.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const US=new WeakMap;var x8e={id:"subtitle",start(i,e,t){const n=new vN({ctx:i.ctx,options:t,chart:i});Ua.configure(i,n,t),Ua.addBox(i,n),US.set(i,n)},stop(i){Ua.removeBox(i,US.get(i)),US.delete(i)},beforeUpdate(i,e,t){const n=US.get(i);Ua.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tw={average(i){if(!i.length)return!1;let e,t,n=new Set,r=0,s=0;for(e=0,t=i.length;e<t;++e){const a=i[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),r+=l.y,++s}}return{x:[...n].reduce((a,l)=>a+l)/n.size,y:r/s}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=i.length;s<o;++s){const l=i[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=pO(e,u);c<r&&(r=c,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,n=l.y}return{x:t,y:n}}};function _h(i,e){return e&&(os(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function qd(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function w8e(i,e){const{element:t,datasetIndex:n,index:r}=e,s=i.getDatasetMeta(n).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function mme(i,e){const t=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:a}=e,l=Ro(e.bodyFont),u=Ro(e.titleFont),c=Ro(e.footerFont),h=s.length,d=r.length,f=n.length,p=Va(e.padding);let m=p.height,y=0,v=n.reduce((w,C)=>w+C.before.length+C.lines.length+C.after.length,0);if(v+=i.beforeBody.length+i.afterBody.length,h&&(m+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*w+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(m+=e.footerMarginTop+d*c.lineHeight+(d-1)*e.footerSpacing);let b=0;const x=function(w){y=Math.max(y,t.measureText(w).width+b)};return t.save(),t.font=u.string,jr(i.title,x),t.font=l.string,jr(i.beforeBody.concat(i.afterBody),x),b=e.displayColors?o+2+e.boxPadding:0,jr(n,w=>{jr(w.before,x),jr(w.lines,x),jr(w.after,x)}),b=0,t.font=c.string,jr(i.footer,x),t.restore(),y+=p.width,{width:y,height:m}}function E8e(i,e){const{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function C8e(i,e,t,n){const{x:r,width:s}=n,o=t.caretSize+t.caretPadding;if(i==="left"&&r+s+o>e.width||i==="right"&&r-s-o<0)return!0}function S8e(i,e,t,n){const{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=i;let u="center";return n==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),C8e(u,i,e,t)&&(u="center"),u}function yme(i,e,t){const n=t.yAlign||e.yAlign||E8e(i,t);return{xAlign:t.xAlign||e.xAlign||S8e(i,e,t,n),yAlign:n}}function T8e(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function A8e(i,e,t){let{y:n,height:r}=i;return e==="top"?n+=t:e==="bottom"?n-=r+t:n-=r/2,n}function vme(i,e,t,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:a,yAlign:l}=t,u=r+s,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:f}=d0(o);let p=T8e(e,a);const m=A8e(e,l,u);return l==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(c,d)+r:a==="right"&&(p+=Math.max(h,f)+r),{x:Zo(p,0,n.width-e.width),y:Zo(m,0,n.height-e.height)}}function qS(i,e,t){const n=Va(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function _me(i){return _h([],qd(i))}function R8e(i,e,t){return Gg(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function bme(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const mEe={beforeTitle:Pd,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:Pd,beforeBody:Pd,beforeLabel:Pd,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return cr(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pd,afterBody:Pd,beforeFooter:Pd,footer:Pd,afterFooter:Pd};function Cl(i,e,t,n){const r=i[e].call(t,n);return typeof r>"u"?mEe[e].call(t,n):r}class EO extends Df{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new Xwe(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=R8e(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,r=Cl(n,"beforeTitle",this,e),s=Cl(n,"title",this,e),o=Cl(n,"afterTitle",this,e);let a=[];return a=_h(a,qd(r)),a=_h(a,qd(s)),a=_h(a,qd(o)),a}getBeforeBody(e,t){return _me(Cl(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return jr(e,s=>{const o={before:[],lines:[],after:[]},a=bme(n,s);_h(o.before,qd(Cl(a,"beforeLabel",this,s))),_h(o.lines,Cl(a,"label",this,s)),_h(o.after,qd(Cl(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,t){return _me(Cl(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=Cl(n,"beforeFooter",this,e),s=Cl(n,"footer",this,e),o=Cl(n,"afterFooter",this,e);let a=[];return a=_h(a,qd(r)),a=_h(a,qd(s)),a=_h(a,qd(o)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=t.length;l<u;++l)a.push(w8e(this.chart,t[l]));return e.filter&&(a=a.filter((c,h,d)=>e.filter(c,h,d,n))),e.itemSort&&(a=a.sort((c,h)=>e.itemSort(c,h,n))),jr(a,c=>{const h=bme(e.callbacks,c);r.push(Cl(h,"labelColor",this,c)),s.push(Cl(h,"labelPointStyle",this,c)),o.push(Cl(h,"labelTextColor",this,c))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Tw[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const l=this._size=mme(this,n),u=Object.assign({},a,l),c=yme(this.chart,n,u),h=vme(n,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=d0(a),{x:d,y:f}=e,{width:p,height:m}=t;let y,v,b,x,w,C;return s==="center"?(w=f+m/2,r==="left"?(y=d,v=y-o,x=w+o,C=w-o):(y=d+p,v=y+o,x=w-o,C=w+o),b=y):(r==="left"?v=d+Math.max(l,c)+o:r==="right"?v=d+p-Math.max(u,h)-o:v=this.caretX,s==="top"?(x=f,w=x-o,y=v-o,b=v+o):(x=f+m,w=x+o,y=v+o,b=v-o),C=x),{x1:y,x2:v,x3:b,y1:x,y2:w,y3:C}}drawTitle(e,t,n){const r=this.title,s=r.length;let o,a,l;if(s){const u=m_(n.rtl,this.x,this.width);for(e.x=qS(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",o=Ro(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=s,c=Ro(s.bodyFont),h=qS(this,"left",s),d=r.x(h),f=l<c.lineHeight?(c.lineHeight-l)/2:0,p=t.y+f;if(s.usePointStyle){const m={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(d,u)+u/2,v=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,mO(e,m,y,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,mO(e,m,y,v)}else{e.lineWidth=$n(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(d,u),y=r.leftForLtr(r.xPlus(d,1),u-2),v=d0(o.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,AE(e,{x:m,y:p,w:u,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),AE(e,{x:y,y:p+1,w:u-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(m,p,u,l),e.strokeRect(m,p,u,l),e.fillStyle=o.backgroundColor,e.fillRect(y,p+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=n,h=Ro(n.bodyFont);let d=h.lineHeight,f=0;const p=m_(n.rtl,this.x,this.width),m=function(A){t.fillText(A,p.x(e.x+f),e.y+d/2),e.y+=d+s},y=p.textAlign(o);let v,b,x,w,C,D,R;for(t.textAlign=o,t.textBaseline="middle",t.font=h.string,e.x=qS(this,y,n),t.fillStyle=n.bodyColor,jr(this.beforeBody,m),f=a&&y!=="right"?o==="center"?u/2+c:u+2+c:0,w=0,D=r.length;w<D;++w){for(v=r[w],b=this.labelTextColors[w],t.fillStyle=b,jr(v.before,m),x=v.lines,a&&x.length&&(this._drawColorBox(t,e,w,p,n),d=Math.max(h.lineHeight,l)),C=0,R=x.length;C<R;++C)m(x[C]),d=h.lineHeight;jr(v.after,m)}f=0,d=h.lineHeight,jr(this.afterBody,m),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let o,a;if(s){const l=m_(n.rtl,this.x,this.width);for(e.x=qS(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=l.textAlign(n.footerAlign),t.textBaseline="middle",o=Ro(n.footerFont),t.fillStyle=n.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:c}=n,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=d0(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+h,l),o==="top"&&this.drawCaret(e,t,n,r),t.lineTo(a+u-d,l),t.quadraticCurveTo(a+u,l,a+u,l+d),o==="center"&&s==="right"&&this.drawCaret(e,t,n,r),t.lineTo(a+u,l+c-p),t.quadraticCurveTo(a+u,l+c,a+u-p,l+c),o==="bottom"&&this.drawCaret(e,t,n,r),t.lineTo(a+f,l+c),t.quadraticCurveTo(a,l+c,a,l+c-f),o==="center"&&s==="left"&&this.drawCaret(e,t,n,r),t.lineTo(a,l+h),t.quadraticCurveTo(a,l,a+h,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const o=Tw[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=mme(this,e),l=Object.assign({},o,this._size),u=yme(t,e,l),c=vme(e,l,u,t);(r._to!==c.x||s._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Va(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Uwe(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),qwe(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!NA(n,r),o=this._positionChanged(r,t);(s||o)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,n),a=this._positionChanged(o,e),l=t||!NA(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,n,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,o=Tw[s.position].call(this,e,t);return o!==!1&&(n!==o.x||r!==o.y)}}Ye(EO,"positioners",Tw);var yEe={id:"tooltip",_element:EO,positioners:Tw,afterInit(i,e,t){t&&(i.tooltip=new EO({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mEe},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},k8e=Object.freeze({__proto__:null,Colors:G6e,Decimation:H6e,Filler:d8e,Legend:v8e,SubTitle:x8e,Title:b8e,Tooltip:yEe});const D8e=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function L8e(i,e,t,n){const r=i.indexOf(e);if(r===-1)return D8e(i,e,t,n);const s=i.lastIndexOf(e);return r!==s?t:r}const M8e=(i,e)=>i===null?null:Zo(Math.round(i),0,e);function xme(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class q_ extends Y0{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:r,label:s}of t)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(cr(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:L8e(n,e,dn(t,e),this._addedLabels),M8e(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=t;o++)r.push({value:o});return r}getLabelForValue(e){return xme.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ye(q_,"id","category"),Ye(q_,"defaults",{ticks:{callback:xme}});function I8e(i,e){const t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:d}=i,f=s||1,p=c-1,{min:m,max:y}=e,v=!cr(o),b=!cr(a),x=!cr(u),w=(y-m)/(h+1);let C=mge((y-m)/p/f)*f,D,R,A,L;if(C<1e-14&&!v&&!b)return[{value:m},{value:y}];L=Math.ceil(y/C)-Math.floor(m/C),L>p&&(C=mge(L*C/p/f)*f),cr(l)||(D=Math.pow(10,l),C=Math.ceil(C*D)/D),r==="ticks"?(R=Math.floor(m/C)*C,A=Math.ceil(y/C)*C):(R=m,A=y),v&&b&&s&&k5e((a-o)/s,C/1e3)?(L=Math.round(Math.min((a-o)/C,c)),C=(a-o)/L,R=o,A=a):x?(R=v?o:R,A=b?a:A,L=u-1,C=(A-R)/L):(L=(A-R)/C,Xw(L,Math.round(L),C/1e3)?L=Math.round(L):L=Math.ceil(L));const O=Math.max(yge(C),yge(R));D=Math.pow(10,cr(l)?O:l),R=Math.round(R*D)/D,A=Math.round(A*D)/D;let $=0;for(v&&(d&&R!==o?(t.push({value:o}),R<o&&$++,Xw(Math.round((R+$*C)*D)/D,o,wme(o,w,i))&&$++):R<o&&$++);$<L;++$){const q=Math.round((R+$*C)*D)/D;if(b&&q>a)break;t.push({value:q})}return b&&d&&A!==a?t.length&&Xw(t[t.length-1].value,a,wme(a,w,i))?t[t.length-1].value=a:t.push({value:a}):(!b||A===a)&&t.push({value:A}),t}function wme(i,e,{horizontal:t,minRotation:n}){const r=Dc(n),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+i).length;return Math.min(e/s,o)}class VA extends Y0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return cr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=t?r:l,a=l=>s=n?s:l;if(e){const l=$h(r),u=$h(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=I8e(r,s);return e.bounds==="ticks"&&Twe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Z2(e,this.chart.options.locale,this.options.ticks.format)}}class D0 extends VA{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Fs(e)?e:0,this.max=Fs(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Dc(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ye(D0,"id","linear"),Ye(D0,"defaults",{ticks:{callback:sD.formatters.numeric}});const kE=i=>Math.floor(Kp(i)),Nm=(i,e)=>Math.pow(10,kE(i)+e);function Eme(i){return i/Math.pow(10,kE(i))===1}function Cme(i,e,t){const n=Math.pow(10,t),r=Math.floor(i/n);return Math.ceil(e/n)-r}function O8e(i,e){const t=e-i;let n=kE(t);for(;Cme(i,e,n)>10;)n++;for(;Cme(i,e,n)<10;)n--;return Math.min(n,kE(i))}function P8e(i,{min:e,max:t}){e=au(i.min,e);const n=[],r=kE(e);let s=O8e(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,u=Math.round((e-l)*o)/o,c=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((u-c)/Math.pow(10,s)),d=au(i.min,Math.round((l+c+h*Math.pow(10,s))*o)/o);for(;d<t;)n.push({value:d,major:Eme(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+c+h*Math.pow(10,s))*o)/o;const f=au(i.max,d);return n.push({value:f,major:Eme(f),significand:h}),n}class CO extends Y0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=VA.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return Fs(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Fs(e)?Math.max(0,e):null,this.max=Fs(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Fs(this._userMin)&&(this.min=e===Nm(this.min,0)?Nm(this.min,-1):Nm(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=a=>n=e?n:a,o=a=>r=t?r:a;n===r&&(n<=0?(s(1),o(10)):(s(Nm(n,-1)),o(Nm(r,1)))),n<=0&&s(Nm(r,-1)),r<=0&&o(Nm(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=P8e(t,this);return e.bounds==="ticks"&&Twe(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Z2(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Kp(e),this._valueRange=Kp(this.max)-Kp(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Kp(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Ye(CO,"id","logarithmic"),Ye(CO,"defaults",{ticks:{callback:sD.formatters.logarithmic,major:{enabled:!0}}});function SO(i){const e=i.ticks;if(e.display&&i.display){const t=Va(e.backdropPadding);return dn(e.font&&e.font.size,Ns.font.size)+t.height}return 0}function F8e(i,e,t){return t=os(t)?t:[t],{w:H5e(i,e.string,t),h:t.length*e.lineHeight}}function Sme(i,e,t,n,r){return i===n||i===r?{start:e-t/2,end:e+t/2}:i<n||i>r?{start:e-t,end:e}:{start:e,end:e+t}}function N8e(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?us/s:0;for(let l=0;l<s;l++){const u=o.setContext(i.getPointLabelContext(l));r[l]=u.padding;const c=i.getPointPosition(l,i.drawingArea+r[l],a),h=Ro(u.font),d=F8e(i.ctx,h,i._pointLabels[l]);n[l]=d;const f=uu(i.getIndexAngle(l)+a),p=Math.round(oN(f)),m=Sme(p,c.x,d.w,0,180),y=Sme(p,c.y,d.h,90,270);$8e(t,e,f,m,y)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=z8e(i,n,r)}function $8e(i,e,t,n,r){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/s,i.l=Math.min(i.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/s,i.r=Math.max(i.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,i.t=Math.min(i.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,i.b=Math.max(i.b,e.b+l))}function B8e(i,e,t){const n=i.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=i.getPointPosition(e,n+r+o,s),u=Math.round(oN(uu(l.angle+Ys))),c=q8e(l.y,a.h,u),h=G8e(u),d=U8e(l.x,a.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:d,top:c,right:d+a.w,bottom:c+a.h}}function j8e(i,e){if(!e)return!0;const{left:t,top:n,right:r,bottom:s}=i;return!(nf({x:t,y:n},e)||nf({x:t,y:s},e)||nf({x:r,y:n},e)||nf({x:r,y:s},e))}function z8e(i,e,t){const n=[],r=i._pointLabels.length,s=i.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:SO(s)/2,additionalAngle:o?us/r:0};let u;for(let c=0;c<r;c++){l.padding=t[c],l.size=e[c];const h=B8e(i,c,l);n.push(h),a==="auto"&&(h.visible=j8e(h,u),h.visible&&(u=h))}return n}function G8e(i){return i===0||i===180?"center":i<180?"left":"right"}function U8e(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function q8e(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function V8e(i,e,t){const{left:n,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!cr(a)){const l=d0(e.borderRadius),u=Va(e.backdropPadding);i.fillStyle=a;const c=n-u.left,h=r-u.top,d=s-n+u.width,f=o-r+u.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),AE(i,{x:c,y:h,w:d,h:f,radius:l}),i.fill()):i.fillRect(c,h,d,f)}}function H8e(i,e){const{ctx:t,options:{pointLabels:n}}=i;for(let r=e-1;r>=0;r--){const s=i._pointLabelItems[r];if(!s.visible)continue;const o=n.setContext(i.getPointLabelContext(r));V8e(t,o,s);const a=Ro(o.font),{x:l,y:u,textAlign:c}=s;k0(t,i._pointLabels[r],l,u+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}function vEe(i,e,t,n){const{ctx:r}=i;if(t)r.arc(i.xCenter,i.yCenter,e,0,as);else{let s=i.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function W8e(i,e,t,n,r){const s=i.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!n||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),vEe(i,t,o,n),s.closePath(),s.stroke(),s.restore())}function X8e(i,e,t){return Gg(i,{label:t,index:e,type:"pointLabel"})}class Xv extends VA{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Va(SO(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Fs(e)&&!isNaN(e)?e:0,this.max=Fs(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/SO(this.options))}generateTickLabels(e){VA.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{const r=Zr(this.options.pointLabels.callback,[t,n],this);return r||r===0?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?N8e(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){const t=as/(this._pointLabels.length||1),n=this.options.startAngle||0;return uu(e*t+Dc(n))}getDistanceFromCenterForValue(e){if(cr(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(cr(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return X8e(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-Ys+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),vEe(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,o=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&H8e(this,o),r.display&&this.ticks.forEach((c,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);const d=this.getContext(h),f=r.setContext(d),p=s.setContext(d);W8e(this,f,l,o,p)}}),n.display){for(e.save(),a=o-1;a>=0;a--){const c=n.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=c;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const u=n.setContext(this.getContext(l)),c=Ro(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const h=Va(u.backdropPadding);e.fillRect(-o/2-h.left,-s-c.size/2-h.top,o+h.width,c.size+h.height)}k0(e,a.label,0,-s,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}Ye(Xv,"id","radialLinear"),Ye(Xv,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sD.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ye(Xv,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ye(Xv,"descriptors",{angleLines:{_fallback:"grid"}});const uD={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nl=Object.keys(uD);function Tme(i,e){return i-e}function Ame(i,e){if(cr(e))return null;const t=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Fs(o)||(o=typeof n=="string"?t.parse(o,n):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(z_(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function Rme(i,e,t,n){const r=Nl.length;for(let s=Nl.indexOf(i);s<r-1;++s){const o=uD[Nl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=n)return Nl[s]}return Nl[r-1]}function Y8e(i,e,t,n,r){for(let s=Nl.length-1;s>=Nl.indexOf(t);s--){const o=Nl[s];if(uD[o].common&&i._adapter.diff(r,n,o)>=e-1)return o}return Nl[t?Nl.indexOf(t):0]}function Z8e(i){for(let e=Nl.indexOf(i)+1,t=Nl.length;e<t;++e)if(uD[Nl[e]].common)return Nl[e]}function kme(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:n,hi:r}=aN(t,e),s=t[n]>=e?t[n]:t[r];i[s]=!0}}function K8e(i,e,t,n){const r=i._adapter,s=+r.startOf(e[0].value,n),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,n))l=t[a],l>=0&&(e[l].major=!0);return e}function Dme(i,e,t){const n=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,n.push({value:a,major:!1});return s===0||!t?n:K8e(i,n,r,t)}class DE extends Y0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),r=this._adapter=new Kwe._date(e.adapters.date);r.init(t),Ww(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Ame(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Fs(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=Fs(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=I5e(r,s,o);return this._unit=t.unit||(n.autoSkip?Rme(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Y8e(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Z8e(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Dme(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?n=s:n=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Zo(t,0,o),n=Zo(n,0,o),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,o=s.unit||Rme(s.minUnit,t,n,this._getLabelCapacity(t)),a=dn(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=z_(l)||l===!0,c={};let h=t,d,f;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":o),e.diff(n,t,o)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<n;d=+e.add(d,a,o),f++)kme(c,d,p);return(d===n||r.bounds==="ticks"||f===1)&&kme(c,d,p),Object.keys(c).sort(Tme).map(m=>+m)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,o=t||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,n,r){const s=this.options,o=s.ticks.callback;if(o)return Zr(o,[e,t,n],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&a[l],h=u&&a[u],d=n[t],f=u&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Dc(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*o,h:n*o+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,Dme(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,n=r.length;t<n;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Ame(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kwe(e.sort(Tme))}}Ye(DE,"id","time"),Ye(DE,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function VS(i,e,t){let n=0,r=i.length-1,s,o,a,l;t?(e>=i[n].pos&&e<=i[r].pos&&({lo:n,hi:r}=tf(i,"pos",e)),{pos:s,time:a}=i[n],{pos:o,time:l}=i[r]):(e>=i[n].time&&e<=i[r].time&&({lo:n,hi:r}=tf(i,"time",e)),{time:s,pos:a}=i[n],{time:o,pos:l}=i[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class TO extends DE{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=VS(t,this.min),this._tableRange=VS(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let o,a,l,u,c;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=n&&r.push(u);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)c=r[o+1],l=r[o-1],u=r[o],Math.round((c+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(VS(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return VS(this._table,n*this._tableRange+this._minPos,!0)}}Ye(TO,"id","timeseries"),Ye(TO,"defaults",DE.defaults);var J8e=Object.freeze({__proto__:null,CategoryScale:q_,LinearScale:D0,LogarithmicScale:CO,RadialLinearScale:Xv,TimeScale:DE,TimeSeriesScale:TO});const Q8e=[a$e,F6e,k8e,J8e];Ml.register(...Q8e);class Z0 extends Error{}class eBe extends Z0{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class tBe extends Z0{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class iBe extends Z0{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Yv extends Z0{}class _Ee extends Z0{constructor(e){super(`Invalid unit ${e}`)}}class Il extends Z0{}class xp extends Z0{constructor(){super("Zone is an abstract class")}}const Ft="numeric",Vc="short",bu="long",HA={year:Ft,month:Ft,day:Ft},bEe={year:Ft,month:Vc,day:Ft},nBe={year:Ft,month:Vc,day:Ft,weekday:Vc},xEe={year:Ft,month:bu,day:Ft},wEe={year:Ft,month:bu,day:Ft,weekday:bu},EEe={hour:Ft,minute:Ft},CEe={hour:Ft,minute:Ft,second:Ft},SEe={hour:Ft,minute:Ft,second:Ft,timeZoneName:Vc},TEe={hour:Ft,minute:Ft,second:Ft,timeZoneName:bu},AEe={hour:Ft,minute:Ft,hourCycle:"h23"},REe={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23"},kEe={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23",timeZoneName:Vc},DEe={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23",timeZoneName:bu},LEe={year:Ft,month:Ft,day:Ft,hour:Ft,minute:Ft},MEe={year:Ft,month:Ft,day:Ft,hour:Ft,minute:Ft,second:Ft},IEe={year:Ft,month:Vc,day:Ft,hour:Ft,minute:Ft},OEe={year:Ft,month:Vc,day:Ft,hour:Ft,minute:Ft,second:Ft},rBe={year:Ft,month:Vc,day:Ft,weekday:Vc,hour:Ft,minute:Ft},PEe={year:Ft,month:bu,day:Ft,hour:Ft,minute:Ft,timeZoneName:Vc},FEe={year:Ft,month:bu,day:Ft,hour:Ft,minute:Ft,second:Ft,timeZoneName:Vc},NEe={year:Ft,month:bu,day:Ft,weekday:bu,hour:Ft,minute:Ft,timeZoneName:bu},$Ee={year:Ft,month:bu,day:Ft,weekday:bu,hour:Ft,minute:Ft,second:Ft,timeZoneName:bu};class J2{get type(){throw new xp}get name(){throw new xp}get ianaName(){return this.name}get isUniversal(){throw new xp}offsetName(e,t){throw new xp}formatOffset(e,t){throw new xp}offset(e){throw new xp}equals(e){throw new xp}get isValid(){throw new xp}}let xM=null;class cD extends J2{static get instance(){return xM===null&&(xM=new cD),xM}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return WEe(e,t,n)}formatOffset(e,t){return Kw(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let uA={};function sBe(i){return uA[i]||(uA[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),uA[i]}const oBe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function aBe(i,e){const t=i.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,r,s,o,a,l,u,c]=n;return[o,r,s,a,l,u,c]}function lBe(i,e){const t=i.formatToParts(e),n=[];for(let r=0;r<t.length;r++){const{type:s,value:o}=t[r],a=oBe[s];s==="era"?n[a]=o:rn(a)||(n[a]=parseInt(o,10))}return n}let HS={};class bf extends J2{static create(e){return HS[e]||(HS[e]=new bf(e)),HS[e]}static resetCache(){HS={},uA={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=bf.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return WEe(e,t,n,this.name)}formatOffset(e,t){return Kw(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=sBe(this.name);let[r,s,o,a,l,u,c]=n.formatToParts?lBe(n,t):aBe(n,t);a==="BC"&&(r=-Math.abs(r)+1);const d=dD({year:r,month:s,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let f=+t;const p=f%1e3;return f-=p>=0?p:1e3+p,(d-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Lme={};function uBe(i,e={}){const t=JSON.stringify([i,e]);let n=Lme[t];return n||(n=new Intl.ListFormat(i,e),Lme[t]=n),n}let AO={};function RO(i,e={}){const t=JSON.stringify([i,e]);let n=AO[t];return n||(n=new Intl.DateTimeFormat(i,e),AO[t]=n),n}let kO={};function cBe(i,e={}){const t=JSON.stringify([i,e]);let n=kO[t];return n||(n=new Intl.NumberFormat(i,e),kO[t]=n),n}let DO={};function hBe(i,e={}){const{base:t,...n}=e,r=JSON.stringify([i,n]);let s=DO[r];return s||(s=new Intl.RelativeTimeFormat(i,e),DO[r]=s),s}let Aw=null;function dBe(){return Aw||(Aw=new Intl.DateTimeFormat().resolvedOptions().locale,Aw)}let Mme={};function fBe(i){let e=Mme[i];if(!e){const t=new Intl.Locale(i);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,Mme[i]=e}return e}function pBe(i){const e=i.indexOf("-x-");e!==-1&&(i=i.substring(0,e));const t=i.indexOf("-u-");if(t===-1)return[i];{let n,r;try{n=RO(i).resolvedOptions(),r=i}catch{const l=i.substring(0,t);n=RO(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=n;return[r,s,o]}}function gBe(i,e,t){return(t||e)&&(i.includes("-u-")||(i+="-u"),t&&(i+=`-ca-${t}`),e&&(i+=`-nu-${e}`)),i}function mBe(i){const e=[];for(let t=1;t<=12;t++){const n=Jt.utc(2009,t,1);e.push(i(n))}return e}function yBe(i){const e=[];for(let t=1;t<=7;t++){const n=Jt.utc(2016,11,13+t);e.push(i(n))}return e}function WS(i,e,t,n){const r=i.listingMode();return r==="error"?null:r==="en"?t(e):n(e)}function vBe(i){return i.numberingSystem&&i.numberingSystem!=="latn"?!1:i.numberingSystem==="latn"||!i.locale||i.locale.startsWith("en")||new Intl.DateTimeFormat(i.intl).resolvedOptions().numberingSystem==="latn"}class _Be{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...o}=n;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=cBe(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):wN(e,3);return so(t,this.padTo)}}}class bBe{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&bf.create(a).valid?(r=a,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=RO(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class xBe{constructor(e,t,n){this.opts={style:"long",...n},!t&&VEe()&&(this.rtf=hBe(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):zBe(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const wBe={firstDay:1,minimalDays:4,weekend:[6,7]};class qr{static fromOpts(e){return qr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,s=!1){const o=e||Vs.defaultLocale,a=o||(s?"en-US":dBe()),l=t||Vs.defaultNumberingSystem,u=n||Vs.defaultOutputCalendar,c=LO(r)||Vs.defaultWeekSettings;return new qr(a,l,u,c,o)}static resetCache(){Aw=null,AO={},kO={},DO={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return qr.create(e,t,n,r)}constructor(e,t,n,r,s){const[o,a,l]=pBe(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=n||l||null,this.weekSettings=r,this.intl=gBe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=vBe(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:qr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,LO(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return WS(this,e,ZEe,()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=mBe(s=>this.extract(s,n,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return WS(this,e,QEe,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=yBe(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return WS(this,void 0,()=>e2e,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Jt.utc(2016,11,13,9),Jt.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return WS(this,e,t2e,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Jt.utc(-40,1,1),Jt.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const r=this.dtFormatter(e,t),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new _Be(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new bBe(e,this.intl,t)}relFormatter(e={}){return new xBe(this.intl,this.isEnglish(),e)}listFormatter(e={}){return uBe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:HEe()?fBe(this.locale):wBe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let wM=null;class cl extends J2{static get utcInstance(){return wM===null&&(wM=new cl(0)),wM}static instance(e){return e===0?cl.utcInstance:new cl(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new cl(fD(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Kw(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Kw(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Kw(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class EBe extends J2{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function qp(i,e){if(rn(i)||i===null)return e;if(i instanceof J2)return i;if(TBe(i)){const t=i.toLowerCase();return t==="default"?e:t==="local"||t==="system"?cD.instance:t==="utc"||t==="gmt"?cl.utcInstance:cl.parseSpecifier(t)||bf.create(i)}else return y0(i)?cl.instance(i):typeof i=="object"&&"offset"in i&&typeof i.offset=="function"?i:new EBe(i)}let Ime=()=>Date.now(),Ome="system",Pme=null,Fme=null,Nme=null,$me=60,Bme,jme=null;class Vs{static get now(){return Ime}static set now(e){Ime=e}static set defaultZone(e){Ome=e}static get defaultZone(){return qp(Ome,cD.instance)}static get defaultLocale(){return Pme}static set defaultLocale(e){Pme=e}static get defaultNumberingSystem(){return Fme}static set defaultNumberingSystem(e){Fme=e}static get defaultOutputCalendar(){return Nme}static set defaultOutputCalendar(e){Nme=e}static get defaultWeekSettings(){return jme}static set defaultWeekSettings(e){jme=LO(e)}static get twoDigitCutoffYear(){return $me}static set twoDigitCutoffYear(e){$me=e%100}static get throwOnInvalid(){return Bme}static set throwOnInvalid(e){Bme=e}static resetCaches(){qr.resetCache(),bf.resetCache()}}class Lc{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const BEe=[0,31,59,90,120,151,181,212,243,273,304,334],jEe=[0,31,60,91,121,152,182,213,244,274,305,335];function Zu(i,e){return new Lc("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${i}, which is invalid`)}function _N(i,e,t){const n=new Date(Date.UTC(i,e-1,t));i<100&&i>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function zEe(i,e,t){return t+(Q2(i)?jEe:BEe)[e-1]}function GEe(i,e){const t=Q2(i)?jEe:BEe,n=t.findIndex(s=>s<e),r=e-t[n];return{month:n+1,day:r}}function bN(i,e){return(i-e+7)%7+1}function WA(i,e=4,t=1){const{year:n,month:r,day:s}=i,o=zEe(n,r,s),a=bN(_N(n,r,s),t);let l=Math.floor((o-a+14-e)/7),u;return l<1?(u=n-1,l=LE(u,e,t)):l>LE(n,e,t)?(u=n+1,l=1):u=n,{weekYear:u,weekNumber:l,weekday:a,...pD(i)}}function zme(i,e=4,t=1){const{weekYear:n,weekNumber:r,weekday:s}=i,o=bN(_N(n,1,e),t),a=y_(n);let l=r*7+s-o-7+e,u;l<1?(u=n-1,l+=y_(u)):l>a?(u=n+1,l-=y_(n)):u=n;const{month:c,day:h}=GEe(u,l);return{year:u,month:c,day:h,...pD(i)}}function EM(i){const{year:e,month:t,day:n}=i,r=zEe(e,t,n);return{year:e,ordinal:r,...pD(i)}}function Gme(i){const{year:e,ordinal:t}=i,{month:n,day:r}=GEe(e,t);return{year:e,month:n,day:r,...pD(i)}}function Ume(i,e){if(!rn(i.localWeekday)||!rn(i.localWeekNumber)||!rn(i.localWeekYear)){if(!rn(i.weekday)||!rn(i.weekNumber)||!rn(i.weekYear))throw new Yv("Cannot mix locale-based week fields with ISO-based week fields");return rn(i.localWeekday)||(i.weekday=i.localWeekday),rn(i.localWeekNumber)||(i.weekNumber=i.localWeekNumber),rn(i.localWeekYear)||(i.weekYear=i.localWeekYear),delete i.localWeekday,delete i.localWeekNumber,delete i.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function CBe(i,e=4,t=1){const n=hD(i.weekYear),r=Ku(i.weekNumber,1,LE(i.weekYear,e,t)),s=Ku(i.weekday,1,7);return n?r?s?!1:Zu("weekday",i.weekday):Zu("week",i.weekNumber):Zu("weekYear",i.weekYear)}function SBe(i){const e=hD(i.year),t=Ku(i.ordinal,1,y_(i.year));return e?t?!1:Zu("ordinal",i.ordinal):Zu("year",i.year)}function UEe(i){const e=hD(i.year),t=Ku(i.month,1,12),n=Ku(i.day,1,XA(i.year,i.month));return e?t?n?!1:Zu("day",i.day):Zu("month",i.month):Zu("year",i.year)}function qEe(i){const{hour:e,minute:t,second:n,millisecond:r}=i,s=Ku(e,0,23)||e===24&&t===0&&n===0&&r===0,o=Ku(t,0,59),a=Ku(n,0,59),l=Ku(r,0,999);return s?o?a?l?!1:Zu("millisecond",r):Zu("second",n):Zu("minute",t):Zu("hour",e)}function rn(i){return typeof i>"u"}function y0(i){return typeof i=="number"}function hD(i){return typeof i=="number"&&i%1===0}function TBe(i){return typeof i=="string"}function ABe(i){return Object.prototype.toString.call(i)==="[object Date]"}function VEe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function HEe(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function RBe(i){return Array.isArray(i)?i:[i]}function qme(i,e,t){if(i.length!==0)return i.reduce((n,r)=>{const s=[e(r),r];return n&&t(n[0],s[0])===n[0]?n:s},null)[1]}function kBe(i,e){return e.reduce((t,n)=>(t[n]=i[n],t),{})}function V_(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function LO(i){if(i==null)return null;if(typeof i!="object")throw new Il("Week settings must be an object");if(!Ku(i.firstDay,1,7)||!Ku(i.minimalDays,1,7)||!Array.isArray(i.weekend)||i.weekend.some(e=>!Ku(e,1,7)))throw new Il("Invalid week settings");return{firstDay:i.firstDay,minimalDays:i.minimalDays,weekend:Array.from(i.weekend)}}function Ku(i,e,t){return hD(i)&&i>=e&&i<=t}function DBe(i,e){return i-e*Math.floor(i/e)}function so(i,e=2){const t=i<0;let n;return t?n="-"+(""+-i).padStart(e,"0"):n=(""+i).padStart(e,"0"),n}function $p(i){if(!(rn(i)||i===null||i===""))return parseInt(i,10)}function $m(i){if(!(rn(i)||i===null||i===""))return parseFloat(i)}function xN(i){if(!(rn(i)||i===null||i==="")){const e=parseFloat("0."+i)*1e3;return Math.floor(e)}}function wN(i,e,t=!1){const n=10**e;return(t?Math.trunc:Math.round)(i*n)/n}function Q2(i){return i%4===0&&(i%100!==0||i%400===0)}function y_(i){return Q2(i)?366:365}function XA(i,e){const t=DBe(e-1,12)+1,n=i+(e-t)/12;return t===2?Q2(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function dD(i){let e=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond);return i.year<100&&i.year>=0&&(e=new Date(e),e.setUTCFullYear(i.year,i.month-1,i.day)),+e}function Vme(i,e,t){return-bN(_N(i,1,e),t)+e-1}function LE(i,e=4,t=1){const n=Vme(i,e,t),r=Vme(i+1,e,t);return(y_(i)-n+r)/7}function MO(i){return i>99?i:i>Vs.twoDigitCutoffYear?1900+i:2e3+i}function WEe(i,e,t,n=null){const r=new Date(i),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function fD(i,e){let t=parseInt(i,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,r=t<0||Object.is(t,-0)?-n:n;return t*60+r}function XEe(i){const e=Number(i);if(typeof i=="boolean"||i===""||Number.isNaN(e))throw new Il(`Invalid unit value ${i}`);return e}function YA(i,e){const t={};for(const n in i)if(V_(i,n)){const r=i[n];if(r==null)continue;t[e(n)]=XEe(r)}return t}function Kw(i,e){const t=Math.trunc(Math.abs(i/60)),n=Math.trunc(Math.abs(i%60)),r=i>=0?"+":"-";switch(e){case"short":return`${r}${so(t,2)}:${so(n,2)}`;case"narrow":return`${r}${t}${n>0?`:${n}`:""}`;case"techie":return`${r}${so(t,2)}${so(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function pD(i){return kBe(i,["hour","minute","second","millisecond"])}const LBe=["January","February","March","April","May","June","July","August","September","October","November","December"],YEe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MBe=["J","F","M","A","M","J","J","A","S","O","N","D"];function ZEe(i){switch(i){case"narrow":return[...MBe];case"short":return[...YEe];case"long":return[...LBe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const KEe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],JEe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],IBe=["M","T","W","T","F","S","S"];function QEe(i){switch(i){case"narrow":return[...IBe];case"short":return[...JEe];case"long":return[...KEe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const e2e=["AM","PM"],OBe=["Before Christ","Anno Domini"],PBe=["BC","AD"],FBe=["B","A"];function t2e(i){switch(i){case"narrow":return[...FBe];case"short":return[...PBe];case"long":return[...OBe];default:return null}}function NBe(i){return e2e[i.hour<12?0:1]}function $Be(i,e){return QEe(e)[i.weekday-1]}function BBe(i,e){return ZEe(e)[i.month-1]}function jBe(i,e){return t2e(e)[i.year<0?0:1]}function zBe(i,e,t="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(i)===-1;if(t==="auto"&&s){const h=i==="days";switch(e){case 1:return h?"tomorrow":`next ${r[i][0]}`;case-1:return h?"yesterday":`last ${r[i][0]}`;case 0:return h?"today":`this ${r[i][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=r[i],c=n?l?u[1]:u[2]||u[1]:l?r[i][0]:i;return o?`${a} ${c} ago`:`in ${a} ${c}`}function Hme(i,e){let t="";for(const n of i)n.literal?t+=n.val:t+=e(n.val);return t}const GBe={D:HA,DD:bEe,DDD:xEe,DDDD:wEe,t:EEe,tt:CEe,ttt:SEe,tttt:TEe,T:AEe,TT:REe,TTT:kEe,TTTT:DEe,f:LEe,ff:IEe,fff:PEe,ffff:NEe,F:MEe,FF:OEe,FFF:FEe,FFFF:$Ee};class Ga{static create(e,t={}){return new Ga(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||a===t?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return GBe[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return so(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,p)=>this.loc.extract(e,f,p),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>n?NBe(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,p)=>n?BBe(e,f):s(p?{month:f}:{month:f,day:"numeric"},"month"),u=(f,p)=>n?$Be(e,f):s(p?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),c=f=>{const p=Ga.macroTokenToFormatOpts(f);return p?this.formatWithSystemDefault(e,p):f},h=f=>n?jBe(e,f):s({era:f},"era"),d=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(f)}};return Hme(Ga.parseFormat(t),d)}formatDurationFromString(e,t){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>u=>{const c=n(u);return c?this.num(l.get(c),u.length):u},s=Ga.parseFormat(t),o=s.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=e.shiftTo(...o.map(n).filter(l=>l));return Hme(s,r(a))}}const i2e=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Db(...i){const e=i.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function Lb(...i){return e=>i.reduce(([t,n,r],s)=>{const[o,a,l]=s(e,r);return[{...t,...o},a||n,l]},[{},null,1]).slice(0,2)}function Mb(i,...e){if(i==null)return[null,null];for(const[t,n]of e){const r=t.exec(i);if(r)return n(r)}return[null,null]}function n2e(...i){return(e,t)=>{const n={};let r;for(r=0;r<i.length;r++)n[i[r]]=$p(e[t+r]);return[n,null,t+r]}}const r2e=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,UBe=`(?:${r2e.source}?(?:\\[(${i2e.source})\\])?)?`,EN=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,s2e=RegExp(`${EN.source}${UBe}`),CN=RegExp(`(?:T${s2e.source})?`),qBe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,VBe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,HBe=/(\d{4})-?(\d{3})/,WBe=n2e("weekYear","weekNumber","weekDay"),XBe=n2e("year","ordinal"),YBe=/(\d{4})-(\d\d)-(\d\d)/,o2e=RegExp(`${EN.source} ?(?:${r2e.source}|(${i2e.source}))?`),ZBe=RegExp(`(?: ${o2e.source})?`);function v_(i,e,t){const n=i[e];return rn(n)?t:$p(n)}function KBe(i,e){return[{year:v_(i,e),month:v_(i,e+1,1),day:v_(i,e+2,1)},null,e+3]}function Ib(i,e){return[{hours:v_(i,e,0),minutes:v_(i,e+1,0),seconds:v_(i,e+2,0),milliseconds:xN(i[e+3])},null,e+4]}function eC(i,e){const t=!i[e]&&!i[e+1],n=fD(i[e+1],i[e+2]),r=t?null:cl.instance(n);return[{},r,e+3]}function tC(i,e){const t=i[e]?bf.create(i[e]):null;return[{},t,e+1]}const JBe=RegExp(`^T?${EN.source}$`),QBe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function eje(i){const[e,t,n,r,s,o,a,l,u]=i,c=e[0]==="-",h=l&&l[0]==="-",d=(f,p=!1)=>f!==void 0&&(p||f&&c)?-f:f;return[{years:d($m(t)),months:d($m(n)),weeks:d($m(r)),days:d($m(s)),hours:d($m(o)),minutes:d($m(a)),seconds:d($m(l),l==="-0"),milliseconds:d(xN(u),h)}]}const tje={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function SN(i,e,t,n,r,s,o){const a={year:e.length===2?MO($p(e)):$p(e),month:YEe.indexOf(t)+1,day:$p(n),hour:$p(r),minute:$p(s)};return o&&(a.second=$p(o)),i&&(a.weekday=i.length>3?KEe.indexOf(i)+1:JEe.indexOf(i)+1),a}const ije=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function nje(i){const[,e,t,n,r,s,o,a,l,u,c,h]=i,d=SN(e,r,n,t,s,o,a);let f;return l?f=tje[l]:u?f=0:f=fD(c,h),[d,new cl(f)]}function rje(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const sje=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,oje=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,aje=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Wme(i){const[,e,t,n,r,s,o,a]=i;return[SN(e,r,n,t,s,o,a),cl.utcInstance]}function lje(i){const[,e,t,n,r,s,o,a]=i;return[SN(e,a,t,n,r,s,o),cl.utcInstance]}const uje=Db(qBe,CN),cje=Db(VBe,CN),hje=Db(HBe,CN),dje=Db(s2e),a2e=Lb(KBe,Ib,eC,tC),fje=Lb(WBe,Ib,eC,tC),pje=Lb(XBe,Ib,eC,tC),gje=Lb(Ib,eC,tC);function mje(i){return Mb(i,[uje,a2e],[cje,fje],[hje,pje],[dje,gje])}function yje(i){return Mb(rje(i),[ije,nje])}function vje(i){return Mb(i,[sje,Wme],[oje,Wme],[aje,lje])}function _je(i){return Mb(i,[QBe,eje])}const bje=Lb(Ib);function xje(i){return Mb(i,[JBe,bje])}const wje=Db(YBe,ZBe),Eje=Db(o2e),Cje=Lb(Ib,eC,tC);function Sje(i){return Mb(i,[wje,a2e],[Eje,Cje])}const Xme="Invalid Duration",l2e={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Tje={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...l2e},ju=146097/400,rv=146097/4800,Aje={years:{quarters:4,months:12,weeks:ju/7,days:ju,hours:ju*24,minutes:ju*24*60,seconds:ju*24*60*60,milliseconds:ju*24*60*60*1e3},quarters:{months:3,weeks:ju/28,days:ju/4,hours:ju*24/4,minutes:ju*24*60/4,seconds:ju*24*60*60/4,milliseconds:ju*24*60*60*1e3/4},months:{weeks:rv/7,days:rv,hours:rv*24,minutes:rv*24*60,seconds:rv*24*60*60,milliseconds:rv*24*60*60*1e3},...l2e},r0=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Rje=r0.slice(0).reverse();function wp(i,e,t=!1){const n={values:t?e.values:{...i.values,...e.values||{}},loc:i.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||i.conversionAccuracy,matrix:e.matrix||i.matrix};return new lr(n)}function u2e(i,e){let t=e.milliseconds??0;for(const n of Rje.slice(1))e[n]&&(t+=e[n]*i[n].milliseconds);return t}function Yme(i,e){const t=u2e(i,e)<0?-1:1;r0.reduceRight((n,r)=>{if(rn(e[r]))return n;if(n){const s=e[n]*t,o=i[r][n],a=Math.floor(s/o);e[r]+=a*t,e[n]-=a*o*t}return r},null),r0.reduce((n,r)=>{if(rn(e[r]))return n;if(n){const s=e[n]%1;e[n]-=s,e[r]+=s*i[n][r]}return r},null)}function kje(i){const e={};for(const[t,n]of Object.entries(i))n!==0&&(e[t]=n);return e}class lr{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?Aje:Tje;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||qr.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return lr.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Il(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new lr({values:YA(e,lr.normalizeUnit),loc:qr.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(y0(e))return lr.fromMillis(e);if(lr.isDuration(e))return e;if(typeof e=="object")return lr.fromObject(e);throw new Il(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=_je(e);return n?lr.fromObject(n,t):lr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=xje(e);return n?lr.fromObject(n,t):lr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Il("need to specify a reason the Duration is invalid");const n=e instanceof Lc?e:new Lc(e,t);if(Vs.throwOnInvalid)throw new iBe(n);return new lr({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new _Ee(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Ga.create(this.loc,n).formatDurationFromString(this,e):Xme}toHuman(e={}){if(!this.isValid)return Xme;const t=r0.map(n=>{const r=this.values[n];return rn(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=wN(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Jt.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?u2e(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=lr.fromDurationLike(e),n={};for(const r of r0)(V_(t.values,r)||V_(this.values,r))&&(n[r]=t.get(r)+this.get(r));return wp(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=lr.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=XEe(e(this.values[n],n));return wp(this,{values:t},!0)}get(e){return this[lr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...YA(e,lr.normalizeUnit)};return wp(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n};return wp(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Yme(this.matrix,e),wp(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=kje(this.normalize().shiftToAll().toObject());return wp(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>lr.normalizeUnit(o));const t={},n={},r=this.toObject();let s;for(const o of r0)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in n)a+=this.matrix[u][o]*n[u],n[u]=0;y0(r[o])&&(a+=r[o]);const l=Math.trunc(a);t[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else y0(r[o])&&(n[o]=r[o]);for(const o in n)n[o]!==0&&(t[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return Yme(this.matrix,t),wp(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return wp(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of r0)if(!t(this.values[n],e.values[n]))return!1;return!0}}const sv="Invalid Interval";function Dje(i,e){return!i||!i.isValid?Is.invalid("missing or invalid start"):!e||!e.isValid?Is.invalid("missing or invalid end"):e<i?Is.invalid("end before start",`The end of an interval must be after its start, but you had start=${i.toISO()} and end=${e.toISO()}`):null}class Is{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Il("need to specify a reason the Interval is invalid");const n=e instanceof Lc?e:new Lc(e,t);if(Vs.throwOnInvalid)throw new tBe(n);return new Is({invalid:n})}static fromDateTimes(e,t){const n=nw(e),r=nw(t),s=Dje(n,r);return s??new Is({start:n,end:r})}static after(e,t){const n=lr.fromDurationLike(t),r=nw(e);return Is.fromDateTimes(r,r.plus(n))}static before(e,t){const n=lr.fromDurationLike(t),r=nw(e);return Is.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let s,o;try{s=Jt.fromISO(n,t),o=s.isValid}catch{o=!1}let a,l;try{a=Jt.fromISO(r,t),l=a.isValid}catch{l=!1}if(o&&l)return Is.fromDateTimes(s,a);if(o){const u=lr.fromISO(r,t);if(u.isValid)return Is.after(s,u)}else if(l){const u=lr.fromISO(n,t);if(u.isValid)return Is.before(a,u)}}return Is.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return t!=null&&t.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Is.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(nw).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:r}=this,s=0;for(;r<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;n.push(Is.fromDateTimes(r,a)),r=a,s+=1}return n}splitBy(e){const t=lr.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,r=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(t.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(Is.fromDateTimes(n,s)),n=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Is.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Is.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?t=l.time:(t&&+t!=+l.time&&r.push(Is.fromDateTimes(t,l.time)),t=null);return Is.merge(r)}difference(...e){return Is.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:sv}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=HA,t={}){return this.isValid?Ga.create(this.s.loc.clone(t),e).formatInterval(this):sv}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:sv}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:sv}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:sv}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:sv}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):lr.invalid(this.invalidReason)}mapEndpoints(e){return Is.fromDateTimes(e(this.s),e(this.e))}}class XS{static hasDST(e=Vs.defaultZone){const t=Jt.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return bf.isValidZone(e)}static normalizeZone(e){return qp(e,Vs.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||qr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||qr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||qr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||qr.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||qr.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||qr.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||qr.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return qr.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return qr.create(t,null,"gregory").eras(e)}static features(){return{relative:VEe(),localeWeek:HEe()}}}function Zme(i,e){const t=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(i);return Math.floor(lr.fromMillis(n).as("days"))}function Lje(i,e,t){const n=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=Zme(l,u);return(c-c%7)/7}],["days",Zme]],r={},s=i;let o,a;for(const[l,u]of n)t.indexOf(l)>=0&&(o=l,r[l]=u(i,e),a=s.plus(r),a>e?(r[l]--,i=s.plus(r),i>e&&(a=i,r[l]--,i=s.plus(r))):i=a);return[i,r,a,o]}function Mje(i,e,t,n){let[r,s,o,a]=Lje(i,e,t);const l=e-r,u=t.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);u.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const c=lr.fromObject(s,n);return u.length>0?lr.fromMillis(l,n).shiftTo(...u).plus(c):c}const TN={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Kme={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Ije=TN.hanidec.replace(/[\[|\]]/g,"").split("");function Oje(i){let e=parseInt(i,10);if(isNaN(e)){e="";for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);if(i[t].search(TN.hanidec)!==-1)e+=Ije.indexOf(i[t]);else for(const r in Kme){const[s,o]=Kme[r];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function bc({numberingSystem:i},e=""){return new RegExp(`${TN[i||"latn"]}${e}`)}const Pje="missing Intl.DateTimeFormat.formatToParts support";function _r(i,e=t=>t){return{regex:i,deser:([t])=>e(Oje(t))}}const Fje=" ",c2e=`[ ${Fje}]`,h2e=new RegExp(c2e,"g");function Nje(i){return i.replace(/\./g,"\\.?").replace(h2e,c2e)}function Jme(i){return i.replace(/\./g,"").replace(h2e," ").toLowerCase()}function xc(i,e){return i===null?null:{regex:RegExp(i.map(Nje).join("|")),deser:([t])=>i.findIndex(n=>Jme(t)===Jme(n))+e}}function Qme(i,e){return{regex:i,deser:([,t,n])=>fD(t,n),groups:e}}function YS(i){return{regex:i,deser:([e])=>e}}function $je(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Bje(i,e){const t=bc(e),n=bc(e,"{2}"),r=bc(e,"{3}"),s=bc(e,"{4}"),o=bc(e,"{6}"),a=bc(e,"{1,2}"),l=bc(e,"{1,3}"),u=bc(e,"{1,6}"),c=bc(e,"{1,9}"),h=bc(e,"{2,4}"),d=bc(e,"{4,6}"),f=y=>({regex:RegExp($je(y.val)),deser:([v])=>v,literal:!0}),m=(y=>{if(i.literal)return f(y);switch(y.val){case"G":return xc(e.eras("short"),0);case"GG":return xc(e.eras("long"),0);case"y":return _r(u);case"yy":return _r(h,MO);case"yyyy":return _r(s);case"yyyyy":return _r(d);case"yyyyyy":return _r(o);case"M":return _r(a);case"MM":return _r(n);case"MMM":return xc(e.months("short",!0),1);case"MMMM":return xc(e.months("long",!0),1);case"L":return _r(a);case"LL":return _r(n);case"LLL":return xc(e.months("short",!1),1);case"LLLL":return xc(e.months("long",!1),1);case"d":return _r(a);case"dd":return _r(n);case"o":return _r(l);case"ooo":return _r(r);case"HH":return _r(n);case"H":return _r(a);case"hh":return _r(n);case"h":return _r(a);case"mm":return _r(n);case"m":return _r(a);case"q":return _r(a);case"qq":return _r(n);case"s":return _r(a);case"ss":return _r(n);case"S":return _r(l);case"SSS":return _r(r);case"u":return YS(c);case"uu":return YS(a);case"uuu":return _r(t);case"a":return xc(e.meridiems(),0);case"kkkk":return _r(s);case"kk":return _r(h,MO);case"W":return _r(a);case"WW":return _r(n);case"E":case"c":return _r(t);case"EEE":return xc(e.weekdays("short",!1),1);case"EEEE":return xc(e.weekdays("long",!1),1);case"ccc":return xc(e.weekdays("short",!0),1);case"cccc":return xc(e.weekdays("long",!0),1);case"Z":case"ZZ":return Qme(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Qme(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return YS(/[a-z_+-/]{1,256}?/i);case" ":return YS(/[^\S\n\r]/);default:return f(y)}})(i)||{invalidReason:Pje};return m.token=i,m}const jje={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function zje(i,e,t){const{type:n,value:r}=i;if(n==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=jje[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Gje(i){return[`^${i.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,i]}function Uje(i,e,t){const n=i.match(e);if(n){const r={};let s=1;for(const o in t)if(V_(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,r]}else return[n,{}]}function qje(i){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return rn(i.z)||(t=bf.create(i.z)),rn(i.Z)||(t||(t=new cl(i.Z)),n=i.Z),rn(i.q)||(i.M=(i.q-1)*3+1),rn(i.h)||(i.h<12&&i.a===1?i.h+=12:i.h===12&&i.a===0&&(i.h=0)),i.G===0&&i.y&&(i.y=-i.y),rn(i.u)||(i.S=xN(i.u)),[Object.keys(i).reduce((s,o)=>{const a=e(o);return a&&(s[a]=i[o]),s},{}),t,n]}let CM=null;function Vje(){return CM||(CM=Jt.fromMillis(1555555555555)),CM}function Hje(i,e){if(i.literal)return i;const t=Ga.macroTokenToFormatOpts(i.val),n=p2e(t,e);return n==null||n.includes(void 0)?i:n}function d2e(i,e){return Array.prototype.concat(...i.map(t=>Hje(t,e)))}function f2e(i,e,t){const n=d2e(Ga.parseFormat(t),i),r=n.map(o=>Bje(o,i)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[o,a]=Gje(r),l=RegExp(o,"i"),[u,c]=Uje(e,l,a),[h,d,f]=c?qje(c):[null,null,void 0];if(V_(c,"a")&&V_(c,"H"))throw new Yv("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:u,matches:c,result:h,zone:d,specificOffset:f}}}function Wje(i,e,t){const{result:n,zone:r,specificOffset:s,invalidReason:o}=f2e(i,e,t);return[n,r,s,o]}function p2e(i,e){if(!i)return null;const n=Ga.create(e,i).dtFormatter(Vje()),r=n.formatToParts(),s=n.resolvedOptions();return r.map(o=>zje(o,i,s))}const SM="Invalid DateTime",e0e=864e13;function ZS(i){return new Lc("unsupported zone",`the zone "${i.name}" is not supported`)}function TM(i){return i.weekData===null&&(i.weekData=WA(i.c)),i.weekData}function AM(i){return i.localWeekData===null&&(i.localWeekData=WA(i.c,i.loc.getMinDaysInFirstWeek(),i.loc.getStartOfWeek())),i.localWeekData}function Bm(i,e){const t={ts:i.ts,zone:i.zone,c:i.c,o:i.o,loc:i.loc,invalid:i.invalid};return new Jt({...t,...e,old:t})}function g2e(i,e,t){let n=i-e*60*1e3;const r=t.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const s=t.offset(n);return r===s?[n,r]:[i-Math.min(r,s)*60*1e3,Math.max(r,s)]}function KS(i,e){i+=e*60*1e3;const t=new Date(i);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function cA(i,e,t){return g2e(dD(i),e,t)}function t0e(i,e){const t=i.o,n=i.c.year+Math.trunc(e.years),r=i.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...i.c,year:n,month:r,day:Math.min(i.c.day,XA(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=lr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=dD(s);let[l,u]=g2e(a,t,i.zone);return o!==0&&(l+=o,u=i.zone.offset(l)),{ts:l,o:u}}function iw(i,e,t,n,r,s){const{setZone:o,zone:a}=t;if(i&&Object.keys(i).length!==0||e){const l=e||a,u=Jt.fromObject(i,{...t,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Jt.invalid(new Lc("unparsable",`the input "${r}" can't be parsed as ${n}`))}function JS(i,e,t=!0){return i.isValid?Ga.create(qr.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(i,e):null}function RM(i,e){const t=i.c.year>9999||i.c.year<0;let n="";return t&&i.c.year>=0&&(n+="+"),n+=so(i.c.year,t?6:4),e?(n+="-",n+=so(i.c.month),n+="-",n+=so(i.c.day)):(n+=so(i.c.month),n+=so(i.c.day)),n}function i0e(i,e,t,n,r,s){let o=so(i.c.hour);return e?(o+=":",o+=so(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=":")):o+=so(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=so(i.c.second),(i.c.millisecond!==0||!n)&&(o+=".",o+=so(i.c.millisecond,3))),r&&(i.isOffsetFixed&&i.offset===0&&!s?o+="Z":i.o<0?(o+="-",o+=so(Math.trunc(-i.o/60)),o+=":",o+=so(Math.trunc(-i.o%60))):(o+="+",o+=so(Math.trunc(i.o/60)),o+=":",o+=so(Math.trunc(i.o%60)))),s&&(o+="["+i.zone.ianaName+"]"),o}const m2e={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Xje={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Yje={ordinal:1,hour:0,minute:0,second:0,millisecond:0},y2e=["year","month","day","hour","minute","second","millisecond"],Zje=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Kje=["year","ordinal","hour","minute","second","millisecond"];function Jje(i){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[i.toLowerCase()];if(!e)throw new _Ee(i);return e}function n0e(i){switch(i.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Jje(i)}}function r0e(i,e){const t=qp(e.zone,Vs.defaultZone),n=qr.fromObject(e),r=Vs.now();let s,o;if(rn(i.year))s=r;else{for(const u of y2e)rn(i[u])&&(i[u]=m2e[u]);const a=UEe(i)||qEe(i);if(a)return Jt.invalid(a);const l=t.offset(r);[s,o]=cA(i,l,t)}return new Jt({ts:s,zone:t,loc:n,o})}function s0e(i,e,t){const n=rn(t.round)?!0:t.round,r=(o,a)=>(o=wN(o,n||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(i,o)?0:e.startOf(o).diff(i.startOf(o),o).get(o):e.diff(i,o).get(o);if(t.unit)return r(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(i>e?-0:0,t.units[t.units.length-1])}function o0e(i){let e={},t;return i.length>0&&typeof i[i.length-1]=="object"?(e=i[i.length-1],t=Array.from(i).slice(0,i.length-1)):t=Array.from(i),[e,t]}class Jt{constructor(e){const t=e.zone||Vs.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Lc("invalid input"):null)||(t.isValid?null:ZS(t));this.ts=rn(e.ts)?Vs.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const a=t.offset(this.ts);r=KS(this.ts,a),n=Number.isNaN(r.year)?new Lc("invalid input"):null,r=n?null:r,s=n?null:a}this._zone=t,this.loc=e.loc||qr.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Jt({})}static local(){const[e,t]=o0e(arguments),[n,r,s,o,a,l,u]=t;return r0e({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,t]=o0e(arguments),[n,r,s,o,a,l,u]=t;return e.zone=cl.utcInstance,r0e({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,t={}){const n=ABe(e)?e.valueOf():NaN;if(Number.isNaN(n))return Jt.invalid("invalid input");const r=qp(t.zone,Vs.defaultZone);return r.isValid?new Jt({ts:n,zone:r,loc:qr.fromObject(t)}):Jt.invalid(ZS(r))}static fromMillis(e,t={}){if(y0(e))return e<-e0e||e>e0e?Jt.invalid("Timestamp out of range"):new Jt({ts:e,zone:qp(t.zone,Vs.defaultZone),loc:qr.fromObject(t)});throw new Il(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(y0(e))return new Jt({ts:e*1e3,zone:qp(t.zone,Vs.defaultZone),loc:qr.fromObject(t)});throw new Il("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=qp(t.zone,Vs.defaultZone);if(!n.isValid)return Jt.invalid(ZS(n));const r=qr.fromObject(t),s=YA(e,n0e),{minDaysInFirstWeek:o,startOfWeek:a}=Ume(s,r),l=Vs.now(),u=rn(t.specificOffset)?n.offset(l):t.specificOffset,c=!rn(s.ordinal),h=!rn(s.year),d=!rn(s.month)||!rn(s.day),f=h||d,p=s.weekYear||s.weekNumber;if((f||c)&&p)throw new Yv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new Yv("Can't mix ordinal dates with month/day");const m=p||s.weekday&&!f;let y,v,b=KS(l,u);m?(y=Zje,v=Xje,b=WA(b,o,a)):c?(y=Kje,v=Yje,b=EM(b)):(y=y2e,v=m2e);let x=!1;for(const O of y){const $=s[O];rn($)?x?s[O]=v[O]:s[O]=b[O]:x=!0}const w=m?CBe(s,o,a):c?SBe(s):UEe(s),C=w||qEe(s);if(C)return Jt.invalid(C);const D=m?zme(s,o,a):c?Gme(s):s,[R,A]=cA(D,u,n),L=new Jt({ts:R,zone:n,o:A,loc:r});return s.weekday&&f&&e.weekday!==L.weekday?Jt.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${L.toISO()}`):L}static fromISO(e,t={}){const[n,r]=mje(e);return iw(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=yje(e);return iw(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=vje(e);return iw(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(rn(e)||rn(t))throw new Il("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,o=qr.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,u,c]=Wje(o,e,t);return c?Jt.invalid(c):iw(a,l,n,`format ${t}`,e,u)}static fromString(e,t,n={}){return Jt.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=Sje(e);return iw(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Il("need to specify a reason the DateTime is invalid");const n=e instanceof Lc?e:new Lc(e,t);if(Vs.throwOnInvalid)throw new eBe(n);return new Jt({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=p2e(e,qr.fromObject(t));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,t={}){return d2e(Ga.parseFormat(e),qr.fromObject(t)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?TM(this).weekYear:NaN}get weekNumber(){return this.isValid?TM(this).weekNumber:NaN}get weekday(){return this.isValid?TM(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?AM(this).weekday:NaN}get localWeekNumber(){return this.isValid?AM(this).weekNumber:NaN}get localWeekYear(){return this.isValid?AM(this).weekYear:NaN}get ordinal(){return this.isValid?EM(this.c).ordinal:NaN}get monthShort(){return this.isValid?XS.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?XS.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?XS.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?XS.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=dD(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-r*t),a=this.zone.offset(n-s*t);if(o===a)return[this];const l=n-o*t,u=n-a*t,c=KS(l,o),h=KS(u,a);return c.hour===h.hour&&c.minute===h.minute&&c.second===h.second&&c.millisecond===h.millisecond?[Bm(this,{ts:l}),Bm(this,{ts:u})]:[this]}get isInLeapYear(){return Q2(this.year)}get daysInMonth(){return XA(this.year,this.month)}get daysInYear(){return this.isValid?y_(this.year):NaN}get weeksInWeekYear(){return this.isValid?LE(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?LE(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=Ga.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(cl.instance(e),t)}toLocal(){return this.setZone(Vs.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=qp(e,Vs.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const s=e.offset(this.ts),o=this.toObject();[r]=cA(o,s,e)}return Bm(this,{ts:r,zone:e})}else return Jt.invalid(ZS(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return Bm(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=YA(e,n0e),{minDaysInFirstWeek:n,startOfWeek:r}=Ume(t,this.loc),s=!rn(t.weekYear)||!rn(t.weekNumber)||!rn(t.weekday),o=!rn(t.ordinal),a=!rn(t.year),l=!rn(t.month)||!rn(t.day),u=a||l,c=t.weekYear||t.weekNumber;if((u||o)&&c)throw new Yv("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Yv("Can't mix ordinal dates with month/day");let h;s?h=zme({...WA(this.c,n,r),...t},n,r):rn(t.ordinal)?(h={...this.toObject(),...t},rn(t.day)&&(h.day=Math.min(XA(h.year,h.month),h.day))):h=Gme({...EM(this.c),...t});const[d,f]=cA(h,this.o,this.zone);return Bm(this,{ts:d,o:f})}plus(e){if(!this.isValid)return this;const t=lr.fromDurationLike(e);return Bm(this,t0e(this,t))}minus(e){if(!this.isValid)return this;const t=lr.fromDurationLike(e).negate();return Bm(this,t0e(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=lr.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(r==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Ga.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):SM}toLocaleString(e=HA,t={}){return this.isValid?Ga.create(this.loc.clone(t),e).formatDateTime(this):SM}toLocaleParts(e={}){return this.isValid?Ga.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=RM(this,o);return a+="T",a+=i0e(this,o,t,n,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?RM(this,e==="extended"):null}toISOWeekDate(){return JS(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+i0e(this,o==="extended",t,e,n,s):null}toRFC2822(){return JS(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return JS(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?RM(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),JS(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():SM}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return lr.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=RBe(t).map(lr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=Mje(a,l,s,r);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(Jt.now(),e,t)}until(e){return this.isValid?Is.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,n)<=r&&r<=s.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Jt.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),s0e(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?s0e(e.base||Jt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Jt.isDateTime))throw new Il("min requires all arguments be DateTimes");return qme(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Jt.isDateTime))throw new Il("max requires all arguments be DateTimes");return qme(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n,o=qr.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return f2e(o,e,t)}static fromStringExplain(e,t,n={}){return Jt.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return HA}static get DATE_MED(){return bEe}static get DATE_MED_WITH_WEEKDAY(){return nBe}static get DATE_FULL(){return xEe}static get DATE_HUGE(){return wEe}static get TIME_SIMPLE(){return EEe}static get TIME_WITH_SECONDS(){return CEe}static get TIME_WITH_SHORT_OFFSET(){return SEe}static get TIME_WITH_LONG_OFFSET(){return TEe}static get TIME_24_SIMPLE(){return AEe}static get TIME_24_WITH_SECONDS(){return REe}static get TIME_24_WITH_SHORT_OFFSET(){return kEe}static get TIME_24_WITH_LONG_OFFSET(){return DEe}static get DATETIME_SHORT(){return LEe}static get DATETIME_SHORT_WITH_SECONDS(){return MEe}static get DATETIME_MED(){return IEe}static get DATETIME_MED_WITH_SECONDS(){return OEe}static get DATETIME_MED_WITH_WEEKDAY(){return rBe}static get DATETIME_FULL(){return PEe}static get DATETIME_FULL_WITH_SECONDS(){return FEe}static get DATETIME_HUGE(){return NEe}static get DATETIME_HUGE_WITH_SECONDS(){return $Ee}}function nw(i){if(Jt.isDateTime(i))return i;if(i&&i.valueOf&&y0(i.valueOf()))return Jt.fromJSDate(i);if(i&&typeof i=="object")return Jt.fromObject(i);throw new Il(`Unknown datetime argument: ${i}, of type ${typeof i}`)}/*!
 * chartjs-adapter-luxon v1.3.1
 * https://www.chartjs.org
 * (c) 2023 chartjs-adapter-luxon Contributors
 * Released under the MIT license
 */const Qje={datetime:Jt.DATETIME_MED_WITH_SECONDS,millisecond:"h:mm:ss.SSS a",second:Jt.TIME_WITH_SECONDS,minute:Jt.TIME_SIMPLE,hour:{hour:"numeric"},day:{day:"numeric",month:"short"},week:"DD",month:{month:"short",year:"numeric"},quarter:"'Q'q - yyyy",year:{year:"numeric"}};Kwe._date.override({_id:"luxon",_create:function(i){return Jt.fromMillis(i,this.options)},init(i){this.options.locale||(this.options.locale=i.locale)},formats:function(){return Qje},parse:function(i,e){const t=this.options,n=typeof i;return i===null||n==="undefined"?null:(n==="number"?i=this._create(i):n==="string"?typeof e=="string"?i=Jt.fromFormat(i,e,t):i=Jt.fromISO(i,t):i instanceof Date?i=Jt.fromJSDate(i,t):n==="object"&&!(i instanceof Jt)&&(i=Jt.fromObject(i,t)),i.isValid?i.valueOf():null)},format:function(i,e){const t=this._create(i);return typeof e=="string"?t.toFormat(e):t.toLocaleString(e)},add:function(i,e,t){const n={};return n[t]=e,this._create(i).plus(n).valueOf()},diff:function(i,e,t){return this._create(i).diff(this._create(e)).as(t).valueOf()},startOf:function(i,e,t){if(e==="isoWeek"){t=Math.trunc(Math.min(Math.max(0,t),6));const n=this._create(i);return n.minus({days:(n.weekday-t+7)%7}).startOf("day").valueOf()}return e?this._create(i).startOf(e).valueOf():i},endOf:function(i,e){return this._create(i).endOf(e).valueOf()}});const gD={errorBarLineWidth:{v:[1,3]},errorBarColor:{v:["#2c2c2c","#1f1f1f"]},errorBarWhiskerLineWidth:{v:[1,3]},errorBarWhiskerRatio:{v:[.2,.25]},errorBarWhiskerSize:{v:[20,24]},errorBarWhiskerColor:{v:["#2c2c2c","#1f1f1f"]}},AN={_scriptable:!0,_indexable:i=>i!=="v"},a0e=Object.keys(gD);function RN(i,e){const t=Array.isArray(i)?i:[i],n=Array.isArray(e)?e:[e];if(t.length===n.length)return t.map((s,o)=>[s,n[o]]);const r=Math.max(t.length,n.length);return Array(r).map((s,o)=>[t[o%t.length],n[o%n.length]])}function Gl(i,e){if(typeof i=="string"||typeof i=="number")return i;const t=Array.isArray(i)?i:i.v;return t[e%t.length]}function kN(i,e,t){const n=Gl(e.errorBarWhiskerRatio,t);return i!=null&&n>0?i*n*.5:Gl(e.errorBarWhiskerSize,t)*.5}function eze(i,e,t,n,r){r.save(),r.translate(i.x,0);const s=RN(e??i.y,t??i.y);s.reverse().forEach(([o,a],l)=>{const u=s.length-l-1,c=kN(i.width,n,u);r.lineWidth=Gl(n.errorBarLineWidth,u),r.strokeStyle=Gl(n.errorBarColor,u),r.beginPath(),r.moveTo(0,o),r.lineTo(0,a),r.stroke(),r.lineWidth=Gl(n.errorBarWhiskerLineWidth,u),r.strokeStyle=Gl(n.errorBarWhiskerColor,u),r.beginPath(),r.moveTo(-c,o),r.lineTo(c,o),r.moveTo(-c,a),r.lineTo(c,a),r.stroke()}),r.restore()}function tze(i,e,t,n,r){r.save(),r.translate(0,i.y);const s=RN(e??i.x,t??i.x);s.reverse().forEach(([o,a],l)=>{const u=s.length-l-1,c=kN(i.height,n,u);r.lineWidth=Gl(n.errorBarLineWidth,u),r.strokeStyle=Gl(n.errorBarColor,u),r.beginPath(),r.moveTo(o,0),r.lineTo(a,0),r.stroke(),r.lineWidth=Gl(n.errorBarWhiskerLineWidth,u),r.strokeStyle=Gl(n.errorBarWhiskerColor,u),r.beginPath(),r.moveTo(o,-c),r.lineTo(o,c),r.moveTo(a,-c),r.lineTo(a,c),r.stroke()}),r.restore()}function v2e(i,e){var t,n,r,s;const o=i.getProps(["x","y","width","height","xMin","xMax","yMin","yMax"]);(o.xMin!=null||o.xMax!=null)&&tze(o,(t=o.xMin)!==null&&t!==void 0?t:null,(n=o.xMax)!==null&&n!==void 0?n:null,i.options,e),(o.yMin!=null||o.yMax!=null)&&eze(o,(r=o.yMin)!==null&&r!==void 0?r:null,(s=o.yMax)!==null&&s!==void 0?s:null,i.options,e)}function ize(i,e,t,n,r){r.save(),r.translate(i.x,i.y);const s=(i.startAngle+i.endAngle)/2,o=Math.cos(s),a=Math.sin(s),l={x:-a,y:o},u=Math.sqrt(l.x*l.x+l.y*l.y);l.x/=u,l.y/=u;const c=RN(e??i.outerRadius,t??i.outerRadius);c.reverse().forEach(([h,d],f)=>{const p=c.length-f-1,m=h*o,y=h*a,v=d*o,b=d*a,x=kN(null,n,p),w=l.x*x,C=l.y*x;r.lineWidth=Gl(n.errorBarLineWidth,p),r.strokeStyle=Gl(n.errorBarColor,p),r.beginPath(),r.moveTo(m,y),r.lineTo(v,b),r.stroke(),r.lineWidth=Gl(n.errorBarWhiskerLineWidth,p),r.strokeStyle=Gl(n.errorBarWhiskerColor,p),r.beginPath(),r.moveTo(m+w,y+C),r.lineTo(m-w,y-C),r.moveTo(v+w,b+C),r.lineTo(v-w,b-C),r.stroke()}),r.restore()}function nze(i,e){const t=i.getProps(["x","y","startAngle","endAngle","rMin","rMax","outerRadius"]);(t.rMin!=null||t.rMax!=null)&&ize(t,t.rMin,t.rMax,i.options,e)}class Ob extends m0{draw(e){super.draw(e),v2e(this,e)}}Ob.id="barWithErrorBar";Ob.defaults={...m0.defaults,...gD};Ob.defaultRoutes=m0.defaultRoutes;Ob.descriptors=AN;class Su extends g0{draw(e,t){super.draw.call(this,e,t),v2e(this,e)}}Su.id="pointWithErrorBar";Su.defaults={...g0.defaults,...gD};Su.defaultRoutes=g0.defaultRoutes;Su.descriptors=AN;class Pb extends Jp{draw(e){super.draw(e),nze(this,e)}}Pb.id="arcWithErrorBar";Pb.defaults={...Jp.defaults,...gD};Pb.defaultRoutes=Jp.defaultRoutes;Pb.descriptors=AN;const IO=["xMin","xMax","yMin","yMax"];function _2e(i){return i?IO.slice(0,2):IO.slice(2)}function ME(i,e,t,n,r){const s=[`${n.axis}Min`,`${n.axis}Max`],o=n.getBasePixel();for(const a of s){const l=e[a];Array.isArray(l)?i[a]=l.map(u=>r?o:n.getPixelForValue(u,t)):typeof l=="number"?i[a]=r?o:n.getPixelForValue(l,t):i[a]=null}}function rze(i,e,t,n,r){const s=r.animation,o=[`${t.axis}Min`,`${t.axis}Max`],a=l=>{const u=t.getDistanceFromCenterForValue(l),c=s.animateScale?0:u;return n?c:u};for(const l of o){const u=e[l];Array.isArray(u)?i[l]=u.map(a):typeof u=="number"?i[l]=a(u):i[l]=null}}const sze=["linear","logarithmic","time","timeseries"];function OO(i){return sze.includes(i.type)}function DN(i){return Array.isArray(i)?i.slice().reverse():i}function b2e(i){const e=_2e(i.element.horizontal),t=yEe.defaults.callbacks.label.call(this,i),n=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex];return n==null||e.every(r=>n[r]==null)?t:`${t} (${DN(n[e[0]])} .. ${n[e[1]]})`}function oze(i){const e=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],t=(n,r)=>{const s=_2e(r);return e==null||s.every(o=>e[o]==null)?n:`${n} [${DN(e[s[0]])} .. ${e[s[1]]}]`};return`(${t(i.label,!0)}, ${t(i.parsed.y,!1)})`}function aze(i){const e=Bh.overrides.plugins.tooltip.callbacks.label.call(this,i),t=i.chart.data.datasets[i.datasetIndex].data[i.dataIndex],n=["rMin","rMax"];return t==null||n.every(r=>t[r]==null)?e:`${e} [${DN(t[n[0]])} .. ${t[n[1]]}]`}const x2e={color(i,e,t){const n=i||"transparent",r=e||"transparent";if(n===r)return e;const s=jA(n),o=s.valid&&jA(r);return o&&o.valid?o.mix(s,t).hexString():e},number(i,e,t){return i===e?e:i+(e-i)*t}};function w2e(i,e,t,n,r){if(typeof i===n&&typeof e===n)return r(i,e,t);if(Array.isArray(i)&&Array.isArray(e))return i.map((o,a)=>r(o,e[a],t));const s=o=>o&&Array.isArray(o.v);return s(i)&&s(e)?{v:i.v.map((o,a)=>r(o,e.v[a],t))}:e}function lze(i,e,t){return w2e(i,e,t,"number",x2e.number)}function uze(i,e,t){return w2e(i,e,t,"string",x2e.color)}const mD={animations:{numberArray:{fn:lze,properties:IO.concat(a0e.filter(i=>!i.endsWith("Color")),["rMin","rMax"])},colorArray:{fn:uze,properties:a0e.filter(i=>i.endsWith("Color"))}}};function yD(i,e){const{axis:t}=i;i.axis=`${t}MinMin`;const{min:n}=e(i);i.axis=`${t}MaxMax`;const{max:r}=e(i);return i.axis=t,{min:n,max:r}}function l0e(i,e,t){return Array.isArray(e)?t(i,...e):typeof e=="number"?t(i,e):i}function L0(i,e,t,n,r){const s=typeof e=="string"?e:e.axis,o=`${s}Min`,a=`${s}Max`,l=`${s}MinMin`,u=`${s}MaxMax`;for(let c=0;c<r;c+=1){const h=c+n,d=i[c];d[o]=typeof t[h]=="object"?t[h][o]:null,d[a]=typeof t[h]=="object"?t[h][a]:null,d[l]=l0e(d[s],d[o],Math.min),d[u]=l0e(d[s],d[a],Math.max)}}function E2e(i,e,t,n){const{axis:r}=e,s=e.getLabels();for(let o=0;o<n;o+=1){const a=o+t,l=i[o];l[r]=e.parse(s[a],a)}}function vD(i,e,t,n=[],r=[]){sl.addControllers(t),Array.isArray(n)?sl.addElements(...n):sl.addElements(n),Array.isArray(r)?sl.addScales(...r):sl.addScales(r);const s=e;return s.type=i,s}class Fb extends yg{getMinMax(e,t){return yD(e,n=>super.getMinMax(n,t))}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseErrorData(e,t,n,r,s){L0(e,t.vScale,n,r,s);const o=t.iScale;OO(o)?L0(e,t.iScale,n,r,s):E2e(e,t.iScale,r,s)}updateElement(e,t,n,r){typeof t=="number"&&ME(n,this.getParsed(t),t,this._cachedMeta.vScale,r==="reset"),super.updateElement(e,t,n,r)}}Fb.id="barWithErrorBars";Fb.defaults=Cu({},[yg.defaults,mD,{dataElementType:Ob.id}]);Fb.overrides=Cu({},[yg.overrides,{plugins:{tooltip:{callbacks:{label:b2e}}}}]);Fb.defaultRoutes=yg.defaultRoutes;class cze extends Ml{constructor(e,t){super(e,vD("barWithErrorBars",t,Fb,Ob,[D0,q_]))}}cze.id=Fb.id;class K0 extends cf{getMinMax(e,t){return yD(e,n=>super.getMinMax(n,t))}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseErrorData(e,t,n,r,s){L0(e,t.vScale,n,r,s);const o=t.iScale;OO(o)?L0(e,t.iScale,n,r,s):E2e(e,t.iScale,r,s)}updateElement(e,t,n,r){e instanceof Su&&typeof t=="number"&&this.updateElementScale(t,n,r),super.updateElement(e,t,n,r)}updateElementScale(e,t,n){ME(t,this.getParsed(e),e,this._cachedMeta.vScale,n==="reset");const r=this._cachedMeta.iScale;OO(r)&&ME(t,this.getParsed(e),e,this._cachedMeta.iScale,n==="reset")}updateElements(e,t,n,r){const s=r==="reset",a=this.chart._animationsDisabled||s||r==="none";if(super.updateElements(e,t,n,r),!!a)for(let l=t;l<t+n;++l){const u=e[l];u instanceof Su&&this.updateElementScale(l,u,r)}}}K0.id="lineWithErrorBars";K0.defaults=Cu({},[cf.defaults,mD,{dataElementType:Su.id}]);K0.overrides=Cu({},[cf.overrides,{plugins:{tooltip:{callbacks:{label:b2e}}}}]);K0.defaultRoutes=cf.defaultRoutes;class C2e extends Ml{constructor(e,t){super(e,vD("lineWithErrorBars",t,K0,Su,[D0,q_]))}}C2e.id=K0.id;class J0 extends p0{getMinMax(e,t){return yD(e,n=>super.getMinMax(n,t))}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseErrorData(e,t,n,r,s){L0(e,t.xScale,n,r,s),L0(e,t.yScale,n,r,s)}updateElement(e,t,n,r){e instanceof Su&&typeof t=="number"&&this.updateElementScale(t,n,r),super.updateElement(e,t,n,r)}updateElementScale(e,t,n){ME(t,this.getParsed(e),e,this._cachedMeta.xScale,n==="reset"),ME(t,this.getParsed(e),e,this._cachedMeta.yScale,n==="reset")}updateElements(e,t,n,r){const s=r==="reset",a=this.chart._animationsDisabled||s||r==="none";if(super.updateElements(e,t,n,r),!!a)for(let l=t;l<t+n;++l){const u=e[l];u instanceof Su&&this.updateElementScale(l,u,r)}}}J0.id="scatterWithErrorBars";J0.defaults=Cu({},[p0.defaults,mD,{dataElementType:Su.id}]);J0.overrides=Cu({},[p0.overrides,{plugins:{tooltip:{callbacks:{label:oze}}}}]);J0.defaultRoutes=cf.defaultRoutes;class S2e extends Ml{constructor(e,t){super(e,vD("scatterWithErrorBars",t,J0,Su,[D0]))}}S2e.id=J0.id;class Nb extends Bh{getMinMaxImpl(e){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{const o=this.getParsed(s)[e.axis];Number.isNaN(o)||!this.chart.getDataVisibility(s)||(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}getMinMax(e){return yD(e,t=>this.getMinMaxImpl(t))}countVisibleElements(){const e=this._cachedMeta;return e.data.reduce((t,n,r)=>!Number.isNaN(e._parsed[r].r)&&this.chart.getDataVisibility(r)?t+1:t,0)}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);return this.parseErrorData(s,e,t,n,r),s}parseErrorData(e,t,n,r,s){const o=t.rScale;for(let a=0;a<s;a+=1){const l=a+r,u=n[l],c=o.parse(u[o.axis],l);e[a]={[o.axis]:c}}L0(e,o,n,r,s)}updateElement(e,t,n,r){typeof t=="number"&&rze(n,this.getParsed(t),this._cachedMeta.rScale,r==="reset",this.chart.options),super.updateElement(e,t,n,r)}updateElements(e,t,n,r){const s=this.chart.scales.r,o=s.getDistanceFromCenterForValue;s.getDistanceFromCenterForValue=function(l){return typeof l=="number"?o.call(this,l):o.call(this,l.r)},super.updateElements(e,t,n,r),s.getDistanceFromCenterForValue=o}}Nb.id="polarAreaWithErrorBars";Nb.defaults=Cu({},[Bh.defaults,mD,{dataElementType:Pb.id}]);Nb.overrides=Cu({},[Bh.overrides,{plugins:{tooltip:{callbacks:{label:aze}}}}]);Nb.defaultRoutes=Bh.defaultRoutes;class hze extends Ml{constructor(e,t){super(e,vD("polarAreaWithErrorBars",t,Nb,Pb,[Xv]))}}hze.id=Nb.id;var T2e={};function tc(i,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(i)),this._timeouts=i,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var dze=tc;tc.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};tc.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};tc.prototype.retry=function(i){if(this._timeout&&clearTimeout(this._timeout),!i)return!1;var e=new Date().getTime();if(i&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(i),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(i);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};tc.prototype.attempt=function(i,e){this._fn=i,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};tc.prototype.try=function(i){console.log("Using RetryOperation.try() is deprecated"),this.attempt(i)};tc.prototype.start=function(i){console.log("Using RetryOperation.start() is deprecated"),this.attempt(i)};tc.prototype.start=tc.prototype.try;tc.prototype.errors=function(){return this._errors};tc.prototype.attempts=function(){return this._attempts};tc.prototype.mainError=function(){if(this._errors.length===0)return null;for(var i={},e=null,t=0,n=0;n<this._errors.length;n++){var r=this._errors[n],s=r.message,o=(i[s]||0)+1;i[s]=o,o>=t&&(e=r,t=o)}return e};(function(i){var e=dze;i.operation=function(t){var n=i.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},i.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)n[r]=t[r];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return t&&t.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(a,l){return a-l}),s},i.createTimeout=function(t,n){var r=n.randomize?Math.random()+1:1,s=Math.round(r*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return s=Math.min(s,n.maxTimeout),s},i.wrap=function(t,n,r){if(n instanceof Array&&(r=n,n=null),!r){r=[];for(var s in t)typeof t[s]=="function"&&r.push(s)}for(var o=0;o<r.length;o++){var a=r[o],l=t[a];t[a]=(function(c){var h=i.operation(n),d=Array.prototype.slice.call(arguments,1),f=d.pop();d.push(function(p){h.retry(p)||(p&&(arguments[0]=h.mainError()),f.apply(this,arguments))}),h.attempt(function(){c.apply(t,d)})}).bind(t,l),t[a].options=n}}})(T2e);var fze=T2e;const pze=Ea(fze),gze=Object.prototype.toString,mze=i=>gze.call(i)==="[object Error]",yze=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function vze(i){return i&&mze(i)&&i.name==="TypeError"&&typeof i.message=="string"?i.message==="Load failed"?i.stack===void 0:yze.has(i.message):!1}let PO=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};const u0e=(i,e,t)=>{const n=t.retries-(e-1);return i.attemptNumber=e,i.retriesLeft=n,i};async function c0e(i,e){return new Promise((t,n)=>{e={onFailedAttempt(){},retries:10,shouldRetry:()=>!0,...e};const r=pze.operation(e),s=()=>{var a;r.stop(),n((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",s,{once:!0});const o=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",s),r.stop()};r.attempt(async a=>{try{const l=await i(a);o(),t(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof PO)throw l.originalError;if(l instanceof TypeError&&!vze(l))throw l;if(u0e(l,a,e),await e.shouldRetry(l)||(r.stop(),n(l)),await e.onFailedAttempt(l),!r.retry(l))throw r.mainError()}catch(u){u0e(u,a,e),o(),n(u)}}})})}class _ze{constructor(e,t,n,r,s,o,a,l){Ye(this,"type");Ye(this,"endpoint");Ye(this,"parameters");Ye(this,"retries");Ye(this,"source");Ye(this,"table");Ye(this,"geometry");Ye(this,"timeParameter");this.type=e,this.endpoint=t,this.parameters=n,this.retries=r,this.source=s,this.table=o,this.geometry=a,this.timeParameter=l}fetchData(e,t,n){switch(this.type){case"signals":return this.fetchSignals(e,t,n);case"geodb":return this.fetchGeoDBData(e,t,n);default:return null}}fetchGeoDBData(e,t,n){const r=this.parameters[e].join(","),s=`and=(${this.timeParameter}.gte.${t.toISODate()},${this.timeParameter}.lte.${n.toISODate()})`,o=`${this.endpoint}/${this.source}_${this.table}?${s}&select=${r},${this.timeParameter}`;async function a(){const l=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"GET",mode:"cors"});if(l.status===404)throw new PO(l.statusText);if(l.status!==200)throw Error(l.statusText);return l}return c0e(a,{onFailedAttempt:l=>{console.log(`Attempt ${l.attemptNumber} failed. There are ${l.retriesLeft} retries left.`)},retries:this.retries}).then(function(l){return l.json()})}fetchSignals(e,t,n){const r=this.parameters[e].map(u=>`feature=${u}`).join("&"),s=`${t?"&start_date="+t.toISODate():""}${n?"&end_date="+n.toISODate():""}`,o=`${this.endpoint}?source=${this.source}&${r}${s}`,a=this.geometry;async function l(){const u=await fetch(o,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",mode:"cors",body:JSON.stringify({geometry:a})});if(u.status===404)throw new PO(u.statusText);if(u.status!==200)throw Error(u.statusText);return u}return c0e(l,{onFailedAttempt:u=>{console.log(`Attempt ${u.attemptNumber} failed. There are ${u.retriesLeft} retries left.`)},retries:this.retries}).then(function(u){return u.json()}).catch(u=>{console.error(u),document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="flex",setTimeout(()=>{document.querySelector("eox-chart").shadowRoot.querySelector("#error").style.display="none"})})}convertData(e){switch(this.type){case"signals":return this.convertSignals(e);case"geodb":return this.convertGeoDBData(e);default:return null}}convertSignals(e){let t={};const n=e.basicStats;return e&&e.date!=="missing"&&(t={x:Jt.fromISO(e.date).setZone("UTC"),y:n.mean,yMin:n.min,yMax:n.max}),t}convertGeoDBData(e){let t={};return e&&e.date!=="missing"&&(t={x:Jt.fromISO(e.date).setZone("UTC"),y:e.basicStats.mean,yMin:null,yMax:null}),t}setGeometry(e){this.geometry=e}}Ml.register(K0,C2e,Su,S2e,J0,D0,q_);class h0e{constructor(e,t,n){Ye(this,"type");Ye(this,"chart");Ye(this,"startTime");Ye(this,"endTime");Ye(this,"timeAggregation");Ye(this,"options");Ye(this,"chartOptions");Ye(this,"dataStorage");Ye(this,"status");Ye(this,"activeFields");Ye(this,"requestHandler");Ye(this,"additionalYAxis");if(this.type=e,this.chart=t,this.options=n,this.startTime=Jt.now().minus(n.timeInterval),this.endTime=Jt.now(),n.startTime&&n.endTime&&(this.startTime=Jt.fromISO(n.startTime).setZone("UTC"),this.endTime=Jt.fromISO(n.endTime).setZone("UTC")),this.options.timeAggregation&&(this.timeAggregation=this.options.timeAggregation),this.options.retries=this.options.retries?this.options.retries:5,this.options.normalize=this.options.normalize?this.options.normalize:!1,this.options.showMinMax=this.options.showMinMax?this.options.showMinMax:!1,this.additionalYAxis=this.options.additionalYAxis?this.options.additionalYAxis:null,this.dataStorage={},this.options.features.forEach((r,s)=>this.dataStorage[s]={}),this.requestHandler=new _ze(e,this.options.endpoint,this.options.features,this.options.retries,this.options.source,this.options.table,this.options.geometry,this.options.timeParameter),this.status="ready",this.chartOptions={responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:60,left:10,bottom:10}},scales:{x:{type:"time",min:this.startTime.toISODate(),max:this.endTime.toISODate(),ticks:{minRotation:0,maxRotation:0}}},interaction:{axis:"x",mode:"nearest",intersect:!1},plugins:{htmlLegend:{containerID:"legend-container",onClick:(r,s)=>{if(s.hidden)this.setActiveFields([...this.activeFields,s.text]);else{const o=this.activeFields.indexOf(s.text),a=this.activeFields;a.splice(o,1),this.setActiveFields(a)}}},legend:{display:!1},tooltip:{callbacks:{title:r=>{var o;return((o=r[0])==null?void 0:o.raw).x.toISODate()},label:r=>{const s=r.raw,o=s.yMin!==null?`; ↓ ${s.yMin.toPrecision(3)}`:"",a=s.yMax!==null?`, ↑ ${s.yMax.toPrecision(3)}`:"";return`${r.dataset.label}: ↔ ${s.y.toPrecision(3)}${o}${a}`}}}}},this.additionalYAxis!==null)for(let r=0;r<this.additionalYAxis.length;r++){const s=this.additionalYAxis[r];this.chartOptions.scales[s.id]={type:"linear",position:"right"}}}checkLoadingStatus(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#loadingIndicator");let t=!1;Object.keys(this.dataStorage).forEach((n,r)=>{Object.keys(this.dataStorage[r]).forEach(s=>{this.dataStorage[r][s].status==="fetching"&&(t=!0)})}),e.className=t?"loader":"loader hidden"}updateChart(){this.checkLoadingStatus(),this.chart.options=this.chartOptions;const e=[];this.options.features.flat().forEach((t,n)=>{let r=-1;if(this.options.features.forEach((s,o)=>{s.includes(t)&&(r=o)}),r!==-1){const s=[];let o=Number.MAX_VALUE,a=Number.MIN_VALUE;Object.keys(this.dataStorage[r]).forEach(h=>{const d=this.dataStorage[r][h];if(d.status==="finished"){if(this.type==="signals"&&Object.keys(d.data).length!==0&&Object.keys(d.data).includes(t)&&(d.data[t].forEach(f=>{const p=f.basicStats;this.options.showMinMax?(o=p.min<o?p.min:o,a=p.max>a?p.max:a):(o=p.mean<o?p.mean:o,a=p.mean>a?p.mean:a)}),s.push(...d.data[t])),this.type==="geodb"&&Object.keys(d.data).length!==0){const f=d.data.map(p=>(p[t]!==null&&(o=p[t]<o?p[t]:o,a=p[t]>a?p[t]:a),{date:p[this.options.timeParameter],basicStats:{mean:p[t]}}));s.push(...f)}}else s.push({date:"missing"})});let l=!1,u=s.map(h=>this.requestHandler.convertData(h));if(u.sort((h,d)=>h.x-d.x),u.length>0&&(l=!0),l&&this.timeAggregation){let h=Number.MIN_VALUE,d=Number.MAX_VALUE;o=Number.MAX_VALUE,a=Number.MIN_VALUE;const f=[];let p=0,m=Jt.fromObject({year:this.startTime.year,month:this.startTime.month,day:this.startTime.day});for(;m<this.endTime;){let y=0,v=!1;for(;p<u.length&&(Object.keys(u[p]).length===0||u[p].x<m);)p++;const b=p;for(;p<u.length&&(Object.keys(u[p]).length===0||u[p].x<m.plus(this.timeAggregation));){const C=u[p];y+=C.y,h=C.y!==null&&C.y>h?C.y:h,h=C.yMax!==null&&C.yMax>h?C.yMax:h,d=C.y!==null&&C.y<d?C.y:d,d=C.yMin!==null&&C.yMin<d?C.yMin:d,p++,v=!0}const w=p-b;if(w>0&&v){const C=y/w;this.options.showMinMax?(o=d<o?d:o,a=h>a?h:a):(o=C<o?C:o,a=C>a?C:a),f.push({x:m,y:C,yMin:d,yMax:h}),h=Number.MIN_VALUE,d=Number.MAX_VALUE}m=m.plus(this.timeAggregation)}u=f}if(l&&this.options.normalize){const h=a-o;u=u.map(d=>(d.y!==null?d.y=(d.y-o)/h:d.y=null,d.yMin=(d.yMin-o)/h,d.yMax=(d.yMax-o)/h,d))}let c={type:"line",label:t,data:u,hidden:!this.activeFields.includes(t)};if(this.options.showMinMax&&(c={type:"lineWithErrorBars",label:t,data:u,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000"}),this.options.colors&&this.options.colors.length>=n){const h=this.options.colors[n];c.backgroundColor=h,c.borderColor=h,this.options.showMinMax&&(c={type:"lineWithErrorBars",label:t,data:u,hidden:!this.activeFields.includes(t),errorBarWhiskerLineWidth:2,errorBarColor:"#00000000",errorBarWhiskerColor:h,errorBarWhiskerSize:10,backgroundColor:h,borderColor:h})}if(this.additionalYAxis!==null)for(let h=0;h<this.additionalYAxis.length;h++){const d=this.additionalYAxis[h];d.containedSignals.includes(t)&&(c.yAxisID=d.id)}e.push(c)}}),this.chart.data={datasets:e},this.chart.update("none")}retrieveMissingData(){const e=[];this.activeFields.forEach(r=>{this.options.features.forEach((s,o)=>{s.includes(r)&&!e.includes(o)&&e.push(o)})});let t=Jt.fromObject({year:this.endTime.year,month:this.endTime.month}).plus({month:1}).minus({second:1});const n=Jt.fromObject({year:this.startTime.year,month:this.startTime.month}).plus({month:1}).minus({second:1});for(;t>n;){const r=t.toFormat("yyyyMM");e.forEach(s=>{if(!(r in this.dataStorage[s])){const o=this.requestHandler.fetchData(s,Jt.fromObject({year:t.year,month:t.month}),Jt.fromObject({year:t.year,month:t.month}).plus({month:1}).minus({second:1})).then(a=>{this.dataStorage[s][r].data=a,this.dataStorage[s][r].status="finished",this.updateChart()}).catch(()=>{this.dataStorage[s][r].status="failed",this.updateChart()});this.dataStorage[s][r]={request:o,status:"fetching"}}}),t=t.minus({months:1})}}triggerCSVDownload(){const e=[],t=[],n=this.activeFields;n.forEach((l,u)=>{let c=-1;if(this.options.features.forEach((h,d)=>{h.includes(l)&&(c=d)}),c!==-1){const h=[];Object.keys(this.dataStorage[c]).forEach(d=>{const f=this.dataStorage[c][d];f.status==="finished"&&Object.keys(f.data).length!==0&&Object.keys(f.data).includes(l)&&h.push(...f.data[l])}),h.length>0&&(t.push(n[u]),e.push(h))}});const r={};t.forEach((l,u)=>{e[u].forEach(c=>{r[c.date]||(r[c.date]={}),r[c.date][l]=c.basicStats})});let s="time,";const o=t.map(l=>[l,`${l}_max`,`${l}_min`]);s+=o.flat().join(","),s+=`
`,Object.keys(r).forEach(l=>{const u=[l];t.forEach(c=>{const h=r[l][c]?r[l][c]:null;h!=null?u.push(h.mean,h.max,h.min):u.push("","","")}),s+=u.join(","),s+=`
`});const a=document.createElement("a");a.href="data:text/csv;charset=utf-8,"+encodeURI(s),a.target="_blank",a.download="chart_data.csv",a.click()}setGeometry(e){this.dataStorage={},this.options.features.forEach((t,n)=>this.dataStorage[n]={}),this.options.geometry=e,this.requestHandler.setGeometry(e),this.retrieveMissingData(),this.updateChart()}setActiveFields(e){this.activeFields=e,this.retrieveMissingData(),this.updateChart()}setTimeInterval(e,t){this.startTime=e,this.endTime=t,this.chartOptions.scales.x.min=e.toISODate(),this.chartOptions.scales.x.max=t.toISODate(),this.retrieveMissingData(),this.updateChart()}setNormalize(e){this.options.normalize=e,this.updateChart()}setShowMinMax(e){this.options.showMinMax=e,this.updateChart()}setTimeAggregation(e){this.timeAggregation=e,this.updateChart()}}class d0e{constructor(e,t,n,r){Ye(this,"element");Ye(this,"sdm");Ye(this,"sdmOptions");Ye(this,"options");this.element=e,this.sdm=t,this.options=r,this.sdmOptions=n,this.generateTimeAggregationOptions(),this.addNormalizeCheckbox(),this.addShowMinMax(),this.addCSVDownload(),this.generateTimeSelectionOptions(),document.querySelector("eox-chart").shadowRoot.querySelector("#controls").style.display="flex",document.querySelector("eox-chart").shadowRoot.querySelector("#legend-container").style.display="block",document.querySelector("eox-chart").shadowRoot.querySelector("#chart-container").classList.add("controls")}removeStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput"),t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput"),n=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");e&&t&&n&&(e.style.display="none",t.style.display="none",n.style.display="none")}addStartEndInputs(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#startInput");e.value=this.sdm.startTime.toISODate(),e.style.display="inline";const t=document.querySelector("eox-chart").shadowRoot.querySelector("#endInput");t.value=this.sdm.endTime.toISODate(),t.style.display="inline";const n=document.querySelector("eox-chart").shadowRoot.querySelector("#setTime");n.style.display="inline",n.addEventListener("click",()=>{const r=Jt.fromISO(e.value),s=Jt.fromISO(t.value);r.isValid&&s.isValid?this.sdm.setTimeInterval(r,s):(e.className=r.isValid?"":"parsingError",t.className=s.isValid?"":"parsingError")})}addNormalizeCheckbox(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#normalize");e.checked=this.sdmOptions.normalize,e.addEventListener("change",()=>{this.sdm.setNormalize(e.checked)})}addShowMinMax(){const e=document.querySelector("eox-chart").shadowRoot.querySelector("#showMinMax");e.checked=this.sdmOptions.showMinMax,e.addEventListener("change",()=>{this.sdm.setShowMinMax(e.checked)})}addCSVDownload(){document.querySelector("eox-chart").shadowRoot.querySelector("#csvDownload").addEventListener("click",()=>{this.sdm.triggerCSVDownload()})}generateTimeSelectionOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#dateSelect").addEventListener("change",t=>{const n=Jt.now(),[r,s]=t.target.value.split("-");switch(this.removeStartEndInputs(),r){case"month":this.sdm.setTimeInterval(n.minus({month:Number(s)}),n);break;case"year":this.sdm.setTimeInterval(n.minus({year:Number(s)}),n);break;case"custom":this.addStartEndInputs();break}})}generateTimeAggregationOptions(){document.querySelector("eox-chart").shadowRoot.querySelector("#aggregationSelect").addEventListener("change",t=>{const[n,r]=t.target.value.split("-");switch(n){case"none":this.sdm.setTimeAggregation(null);break;case"week":this.sdm.setTimeAggregation({week:Number(r)});break;case"month":this.sdm.setTimeAggregation({month:Number(r)});break;case"year":this.sdm.setTimeAggregation({year:Number(r)});break}})}}const bze=(i,e)=>{const t=document.querySelector("eox-chart").shadowRoot.getElementById(e);if(!t)return;t.style.overflowY="auto";let n=t.querySelector("ul");return n||(n=document.createElement("ul"),n.style.display="flex",n.style.flexDirection="column",n.style.margin=0,n.style.padding="10px",t.appendChild(n)),n},xze={id:"htmlLegend",afterUpdate(i,e,t){const n=bze(i,t.containerID);if(!n)return;for(;n.firstChild;)n.firstChild.remove();i.options.plugins.legend.labels.generateLabels(i).sort((s,o)=>s.text<o.text?-1:1).forEach(s=>{const o=document.createElement("li");o.style.alignItems="center",o.style.cursor="pointer",o.style.display="flex",o.style.flexDirection="row",o.style.marginLeft="10px";const a=()=>{t.onClick(null,s)};o.onclick=a;const l=document.createElement("span");l.style.background=s.fillStyle,l.style.borderColor=s.strokeStyle,l.style.borderWidth=s.lineWidth+"px",l.style.display="inline-block",l.style.height="10px",l.style.marginRight="10px",l.style.width="10px";const u=document.createElement("p");u.style.color=s.fontColor,u.style.margin=0,u.style.padding=0,u.style.opacity=s.hidden?"0.5":"1",u.style.fontWeight=s.hidden?"300":"900";const c=document.createTextNode(s.text);u.appendChild(c),o.appendChild(l),o.appendChild(u),n.appendChild(o)})}},wze=`
<style>
:host {
  font-size: small;
}
.hidden {
  visibility: hidden;
}
.loader {
  width: 20px;
  height: 20px;
  border: 2px solid #004170;
  border-bottom-color: transparent;
  border-radius: 50%;
  display: inline-block;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% {
      transform: rotate(0deg);
  }
  100% {
      transform: rotate(360deg);
  }
}
#controls {
  position: absolute;
  width: 100%;
  max-width: 100%;
  display: none;
  gap: 5px;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  z-index: 1;
}
select {
  font-size: 11px;
  padding: 3px;
}
#csvDownload {
  border: none;
  background: none;
  cursor: pointer;
  margin-left: 7px;
  padding: 0;
  display: flex;
  align-items: center;
}
#csvDownload svg {
  width: 24px;
  height: 24px;
}
.parsingError {
  background-color: #ff6d6d;
}
#chart-container {
  width: 100%;
  height: 100%;
  position: relative;
}
#chart-container.controls {
  flex-basis: 80%;
  max-width: 80%;
  width: unset;
}
#legend-container {
  flex-basis: 20%;
  margin-top: 50px;
}
#legend-container ul {
  padding-top: 0 !important;
}
</style>
<div style="display: flex; width: 100%; height: 100%; max-width: 100%;">
  <div id="controls" class="controls" data-cy="controls">
    <div style="display: flex; align-items: center; padding: 10px;">
      <select id="dateSelect" style="margin-right: 7px;">
          <option value="month-3">3 months back</option>
          <option value="month-6">6 months back</option>
          <option value="year-1">1 year back</option>
          <option value="year-2">2 years back</option>
          <option value="year-3">3 years back</option>
          <option value="custom">custom</option>
      </select>
      <input id="startInput" size="8" style="display: none">
      <input id="endInput" size="8" style="display: none">
      <button id="setTime" style="display: none; margin-right: 7px;">ok</button>
      <select id="aggregationSelect" style="margin-right: 7px;">
          <option value="none">no aggregation</option>
          <option value="week-1">1 week</option>
          <option value="week-2">2 weeks</option>
          <option value="month-1">1 month</option>
          <option value="month-3">3 months</option>
          <option value="month-6">6 months</option>
      </select>
      <label for="normalize">normalize</label>
      <input type="checkbox" id="normalize" value="normalize" style="margin-right: 7px;">
      <label for="showMinMax">show min/max</label>
      <input type="checkbox" id="showMinMax" value="showMinMax" style="margin-right: 7px;">
      <span id="error" style="color: red; display: none;">Retrieving of signals timed out. Please try again.</span>
    </div>
    <div style="display: flex; align-items: center; padding: 10px;">
      <span id="loadingIndicator" class="loader hidden"></span>
      <button id="csvDownload" title="CSV download">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>download</title><path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" /></svg>
      </button>
    </div>
  </div>
  <div id="chart-container">
    <canvas id="chart" class="chart" data-cy="chart"></canvas>
  </div>
  <div id="legend-container" style="display: none"></div>
</div>
`,A2e=document.createElement("template");A2e.innerHTML=wze;class Eze extends HTMLElement{constructor(){super();Ye(this,"shadowRoot");Ye(this,"chart");Ye(this,"setData");Ye(this,"setOptions");Ye(this,"setSignalsData");Ye(this,"setSignalsEndpoint");Ye(this,"setSignalsGeometry");Ye(this,"setGeoDBEndpoint");this.shadowRoot=this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(A2e.content.cloneNode(!0))}connectedCallback(){this.chart=new Ml(this.shadowRoot.querySelector("canvas"),{options:{maintainAspectRatio:!1,responsive:!0},data:{labels:[],datasets:[]},plugins:[xze,{id:"selectionLineHighlight",afterDraw:n=>{if(n&&n.tooltip){const r=n.tooltip.getActiveElements();if(r!=null&&r.length){const s=r[0].element.x,o=n.scales.y,a=n.ctx;a.save(),a.beginPath(),a.moveTo(s,o.top),a.lineTo(s,o.bottom),a.lineWidth=1,a.strokeStyle="rgba(0, 0, 255, 0.4)",a.stroke(),a.restore()}}}}]}),this.setData=n=>{this.chart.data=n||{datasets:[]},this.chart.update("none")},this.setOptions=n=>{this.chart.options=n,this.chart.update("none")},this.setSignalsData=n=>{this.chart.data={datasets:Object.entries(n).map(([r,s])=>({type:"line",label:r,data:s}))},this.chart.update("none")},this.setSignalsGeometry=n=>{t&&t.setGeometry(n)};let t=null;this.setSignalsEndpoint=n=>{t=new h0e("signals",this.chart,n),new d0e(document.getElementById("controls"),t,n),t.setActiveFields(n.active)},this.setGeoDBEndpoint=n=>{t=new h0e("geodb",this.chart,n),new d0e(document.getElementById("controls"),t,n),t.setActiveFields(n.active)}}}customElements.define("eox-chart",Eze);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bp={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},_D=i=>(...e)=>({_$litDirective$:i,values:e});let bD=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cze=_D(class extends bD{constructor(){super(...arguments),this.key=In}render(i,e){return this.key=i,e}update(i,[e,t]){return e!==this.key&&(tN(i),this.key=e),t}}),Sze=i=>{i.hoverInteraction=i.eoxMap.selectInteractions.selectHover,i.clickInteraction=i.eoxMap.selectInteractions.selectClick;const e=()=>{i.requestUpdate()};i.hoverInteraction.selectStyleLayer.on("change",e),i.clickInteraction.selectStyleLayer.on("change",e)},Tze=(i,e,t)=>{if(i.clickId===e)return;const n=t?[]:[e];i.hoverInteraction.highlightById(n)},Aze=(i,e)=>{i.stopPropagation();const t=Number(i.target.getAttribute("index")),n=e.drawnFeatures[t];e.drawLayer.getSource().removeFeature(n),e.drawnFeatures.splice(t,1),e.requestUpdate()},Rze=(i,e)=>{const t=i.get("id"),{clickId:n,drawLayer:r,olMap:s,clickInteraction:o}=e,a=n===t,l=i.getGeometry();if(a){const u=r.getSource().getExtent();s.getView().fit(u,oge),o.highlightById([])}else{const u=l.getExtent();o.highlightById([t]),s.getView().fit(u,oge)}e.requestUpdate()},kze="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class R2e extends Yn{constructor(){super();Ye(this,"hoverInteraction");Ye(this,"clickInteraction");Ye(this,"hoverId");Ye(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(t){Aze(t,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(t){Rze(t,this)}_handleHoverFeature(t,n=!1){Tze(this,t,n)}firstUpdated(){Sze(this)}createRenderRoot(){return this}render(){var t,n;return this.hoverId=(t=this.hoverInteraction)==null?void 0:t.selectedFids[0],this.clickId=(n=this.clickInteraction)==null?void 0:n.selectedFids[0],tt`
      <style>
        ${!this.unstyled&&kze}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((r,s)=>{const o=s+1,a=r.get("id"),l=this.hoverId===a,u=this.clickId===a;return Cze(o,tt`
              <li
                class="${l||u?"selected":In}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(r)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}Ye(R2e,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",R2e);const Dze=i=>{const{multipleFeatures:e,drawnFeatures:t,currentlyDrawing:n}=i,r=!e&&(t==null?void 0:t.length)>0||n,s=!(t!=null&&t.length)&&!n;return{drawDisabled:r,discardDisabled:s}},k2e='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',Lze='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}';function Mze(i){navigator.clipboard.writeText(i).then(function(){},function(e){console.error("Could not copy text: ",e)})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Hi(i,e,t){return i?e(i):t==null?void 0:t(i)}var j2,z2;class D2e extends Yn{constructor(){super();Tn(this,j2,!0);Tn(this,z2,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1}updateButtonStates(){const{drawDisabled:t,discardDisabled:n}=Dze(this);da(this,j2,t),da(this,z2,n)}createRenderRoot(){return this}render(){this.updateButtonStates();const t=this.currentlyDrawing?"drawing":"draw";return tt`
      <style>
        ${!this.unstyled&&k2e}
        ${!this.unstyled&&Lze}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="polygon icon"
            ?disabled="${ki(this,j2)||In}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${t}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${ki(this,z2)||In}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${Hi(this.importFeatures,()=>tt`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${Hi(this.showEditor,()=>tt`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>Mze(this.geoJSON)}
            >
              ${this.unstyled?"copy":In}
            </button>
          </div>
        `)}
    `}}j2=new WeakMap,z2=new WeakMap,Ye(D2e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",D2e);const Ize=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,Oze=i=>{(()=>{i.emitDrawnFeatures(),i.multipleFeatures||(i.draw.setActive(!1),i.currentlyDrawing=!1)})(),i.requestUpdate()},Pze=i=>{const e=()=>{i.drawLayer.set("isDrawingEnabled",!0),i.draw.setActive(!0)},t=()=>{i.currentlyDrawing=!0,i.requestUpdate()};e(),t()},Fze=(i,e)=>{var s;const n=document.querySelector(i.for),r=n.map;return i.drawLayer=n.addOrUpdateLayer({type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:e},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:i.type,modify:i.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),i.draw=n.interactions.drawInteraction,i.modify=n.interactions.drawInteractionmodify,(s=i.modify)==null||s.on("modifyend",()=>i.onModifyEnd()),n.addEventListener("addfeatures",()=>Oze(i)),{EoxMap:n,OlMap:r}},Nze=i=>{const e=()=>{i.drawnFeatures=[],i.draw.setActive(!1),i.drawLayer.getSource().clear(),i.geoJSON=null},t=()=>{i.emitDrawnFeatures(),i.currentlyDrawing=!1,i.requestUpdate()};e(),t()},$ze=(i,e)=>{setTimeout(()=>{i.drawnFeatures=i.drawLayer.getSource().getFeatures(),i.updateGeoJSON(),i.requestUpdate(),e()},0)},xD=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}';function Bze(i,e){function t(s){s.preventDefault(),s.stopPropagation()}function n(s){s.srcElement.style.opacity="0.4"}function r(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{e.addEventListener(s,t,!1),["dragenter","dragover"].includes(s)?e.addEventListener(s,n,!1):e.addEventListener(s,r,!1)}),e.addEventListener("drop",s=>L2e(s,i),!1)}function jze(i){i.preventDefault(),i.stopPropagation()}function L2e(i,e){jze(i);const t=i.dataTransfer?i.dataTransfer.files:i.target.files;Array.from(t).forEach(n=>zze(n,e))}function zze(i,e){const t=new FileReader;t.readAsText(i),t.onloadend=function(){typeof t.result=="string"&&e.handleFeatureChange(t.result)}}var Yp,G2,U2;class Gze extends Yn{constructor(){super();Tn(this,Yp);Tn(this,G2);Tn(this,U2);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.type="Polygon",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},noShadow:{type:Boolean},type:{type:String},unstyled:{type:Boolean}}}handleStartDrawing(){Pze(this)}handleDiscardDrawing(){Nze(this)}handleFeatureChange(t,n=!1){ki(this,Yp).parseTextToFeature(t||JSON.stringify(age),this.drawLayer,n)}handleFilesChange(t){L2e(t,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){da(this,U2,JSON.stringify(ki(this,Yp).parseFeature(this.drawnFeatures)||age,void 0,2))}emitDrawnFeatures(){$ze(this,()=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:this.drawnFeatures}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:t,OlMap:n}=Fze(this,this.multipleFeatures);da(this,Yp,t),da(this,G2,n),this.importFeatures&&Bze(this,ki(this,Yp)),this.updateGeoJSON(),this.requestUpdate()}render(){var t;return tt`
      <style>
        :host { display: block; }
        ${!this.unstyled&&xD}
        ${!this.unstyled&&Ize}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.handleStartDrawing(),discard:()=>this.handleDiscardDrawing(),editor:n=>this.handleFeatureChange(n.target.value,!0),import:n=>this.handleFilesChange(n)}}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${ki(this,U2)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((t=this.drawnFeatures)!=null&&t.length)?tt`<eox-drawtools-list
            .eoxMap=${ki(this,Yp)}
            .olMap=${ki(this,G2)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:In}
    `}}Yp=new WeakMap,G2=new WeakMap,U2=new WeakMap;customElements.define("eox-drawtools",Gze);function Uze(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var M0=1,I0=2,__=3,qze=4,FO=5,f0e=6378137,Vze=6356752314e-3,p0e=.0066943799901413165,Jw=484813681109536e-20,wt=Math.PI/2,Hze=.16666666666666666,Wze=.04722222222222222,Xze=.022156084656084655,Nt=1e-10,pa=.017453292519943295,Rh=57.29577951308232,Lr=Math.PI/4,IE=Math.PI*2,Hs=3.14159265359,Yl={};Yl.greenwich=0;Yl.lisbon=-9.131906111111;Yl.paris=2.337229166667;Yl.bogota=-74.080916666667;Yl.madrid=-3.687938888889;Yl.rome=12.452333333333;Yl.bern=7.439583333333;Yl.jakarta=106.807719444444;Yl.ferro=-17.666666666667;Yl.brussels=4.367975;Yl.stockholm=18.058277777778;Yl.athens=23.7163375;Yl.oslo=10.722916666667;const Yze={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var g0e=/[\s_\-\/\(\)]/g;function Tg(i,e){if(i[e])return i[e];for(var t=Object.keys(i),n=e.toLowerCase().replace(g0e,""),r=-1,s,o;++r<t.length;)if(s=t[r],o=s.toLowerCase().replace(g0e,""),o===n)return i[s]}function NO(i){var e={},t=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),n,r,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*pa},lat_1:function(a){e.lat1=a*pa},lat_2:function(a){e.lat2=a*pa},lat_ts:function(a){e.lat_ts=a*pa},lon_0:function(a){e.long0=a*pa},lon_1:function(a){e.long1=a*pa},lon_2:function(a){e.long2=a*pa},alpha:function(a){e.alpha=parseFloat(a)*pa},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*pa},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Tg(Yze,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*pa},pm:function(a){var l=Tg(Yl,a);e.from_greenwich=(l||parseFloat(a))*pa},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(n in t)r=t[n],n in o?(s=o[n],typeof s=="function"?s(r):e[s]=r):e[n]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var OE=1,M2e=2,I2e=3,ZA=4,O2e=5,LN=-1,Zze=/\s/,Kze=/[A-Za-z]/,Jze=/[A-Za-z84_]/,wD=/[,\]]/,P2e=/[\d\.E\-\+]/;function Lf(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=OE}Lf.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==ZA)for(;Zze.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case OE:return this.neutral(i);case M2e:return this.keyword(i);case ZA:return this.quoted(i);case O2e:return this.afterquote(i);case I2e:return this.number(i);case LN:return}};Lf.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=ZA;return}if(wD.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};Lf.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=OE;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=OE,this.currentObject=this.stack.pop(),this.currentObject||(this.state=LN);return}};Lf.prototype.number=function(i){if(P2e.test(i)){this.word+=i;return}if(wD.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};Lf.prototype.quoted=function(i){if(i==='"'){this.state=O2e;return}this.word+=i};Lf.prototype.keyword=function(i){if(Jze.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=OE;return}if(wD.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};Lf.prototype.neutral=function(i){if(Kze.test(i)){this.word=i,this.state=M2e;return}if(i==='"'){this.word="",this.state=ZA;return}if(P2e.test(i)){this.word=i,this.state=I2e;return}if(wD.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};Lf.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===LN)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Qze(i){var e=new Lf(i);return e.output()}function m0e(i,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var n=e?{}:i,r=t.reduce(function(s,o){return Zv(o,s),s},n);e&&(i[e]=r)}function Zv(i,e){if(!Array.isArray(i)){e[i]=!0;return}var t=i.shift();if(t==="PARAMETER"&&(t=i.shift()),i.length===1){if(Array.isArray(i[0])){e[t]={},Zv(i[0],e[t]);return}e[t]=i[0];return}if(!i.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=i;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(i);return}Array.isArray(t)||(e[t]={});var n;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Zv(i[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Zv(i[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],m0e(e,t,i);return;default:for(n=-1;++n<i.length;)if(!Array.isArray(i[n]))return Zv(i,e[t]);return m0e(e,t,i)}}var e9e=.017453292519943295;function t9e(i,e){var t=e[0],n=e[1];!(t in i)&&n in i&&(i[t]=i[n],e.length===3&&(i[t]=e[2](i[t])))}function gh(i){return i*e9e}function i9e(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,n=i.AXIS.length;t<n;++t){var r=[i.AXIS[t][0].toLowerCase(),i.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(u){var c=i.to_meter||1;return u*c}var a=function(u){return t9e(i,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gh],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",gh],["lat0","latitude_of_origin",gh],["lat0","standard_parallel_1",gh],["lat1","standard_parallel_1",gh],["lat2","standard_parallel_2",gh],["azimuth","Azimuth"],["alpha","azimuth",gh],["srsCode","name"]];l.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=gh(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=gh(i.lat0>0?90:-90))}function F2e(i){var e=Qze(i),t=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",t]);var r={};return Zv(e,r),i9e(r),r}function rl(i){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?rl[i]=NO(arguments[1]):rl[i]=F2e(arguments[1]):rl[i]=t}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(n){Array.isArray(n)?rl.apply(e,n):rl(n)});if(typeof i=="string"){if(i in rl)return rl[i]}else"EPSG"in i?rl["EPSG:"+i.EPSG]=i:"ESRI"in i?rl["ESRI:"+i.ESRI]=i:"IAU2000"in i?rl["IAU2000:"+i.IAU2000]=i:console.log(i);return}}Uze(rl);function n9e(i){return typeof i=="string"}function r9e(i){return i in rl}var s9e=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function o9e(i){return s9e.some(function(e){return i.indexOf(e)>-1})}var a9e=["3857","900913","3785","102113"];function l9e(i){var e=Tg(i,"authority");if(e){var t=Tg(e,"epsg");return t&&a9e.indexOf(t)>-1}}function u9e(i){var e=Tg(i,"extension");if(e)return Tg(e,"proj4")}function c9e(i){return i[0]==="+"}function h9e(i){if(n9e(i)){if(r9e(i))return rl[i];if(o9e(i)){var e=F2e(i);if(l9e(e))return rl["EPSG:3857"];var t=u9e(e);return t?NO(t):e}if(c9e(i))return NO(i)}else return i}function y0e(i,e){i=i||{};var t,n;if(!e)return i;for(n in e)t=e[n],t!==void 0&&(i[n]=t);return i}function Xh(i,e,t){var n=i*e;return t/Math.sqrt(1-n*n)}function iC(i){return i<0?-1:1}function Vt(i){return Math.abs(i)<=Hs?i:i-iC(i)*IE}function Fc(i,e,t){var n=i*t,r=.5*i;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(wt-e))/n}function PE(i,e){for(var t=.5*i,n,r,s=wt-2*Math.atan(e),o=0;o<=15;o++)if(n=i*Math.sin(s),r=wt-2*Math.atan(e*Math.pow((1-n)/(1+n),t))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function d9e(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function f9e(i){var e=i.x,t=i.y;if(t*Rh>90&&t*Rh<-90&&e*Rh>180&&e*Rh<-180)return null;var n,r;if(Math.abs(Math.abs(t)-wt)<=Nt)return null;if(this.sphere)n=this.x0+this.a*this.k0*Vt(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Lr+.5*t));else{var s=Math.sin(t),o=Fc(this.e,t,s);n=this.x0+this.a*this.k0*Vt(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return i.x=n,i.y=r,i}function p9e(i){var e=i.x-this.x0,t=i.y-this.y0,n,r;if(this.sphere)r=wt-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(r=PE(this.e,s),r===-9999)return null}return n=Vt(this.long0+e/(this.a*this.k0)),i.x=n,i.y=r,i}var g9e=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const m9e={init:d9e,forward:f9e,inverse:p9e,names:g9e};function y9e(){}function v0e(i){return i}var v9e=["longlat","identity"];const _9e={init:y9e,forward:v0e,inverse:v0e,names:v9e};var b9e=[m9e,_9e],hA={},KA=[];function N2e(i,e){var t=KA.length;return i.names?(KA[t]=i,i.names.forEach(function(n){hA[n.toLowerCase()]=t}),this):(console.log(e),!0)}function x9e(i){if(!i)return!1;var e=i.toLowerCase();if(typeof hA[e]<"u"&&KA[hA[e]])return KA[hA[e]]}function w9e(){b9e.forEach(N2e)}const E9e={start:w9e,add:N2e,get:x9e};var Ji={};Ji.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ji.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ji.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ji.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ji.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ji.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ji.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ji.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ji.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ji.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ji.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ji.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ji.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ji.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ji.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ji.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ji.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ji.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ji.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ji.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ji.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ji.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ji.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ji.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ji.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ji.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ji.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ji.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ji.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ji.hough={a:6378270,rf:297,ellipseName:"Hough"};Ji.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ji.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ji.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ji.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ji.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ji.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ji.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ji.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ji.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ji.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ji.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ji.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var C9e=Ji.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ji.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function S9e(i,e,t,n){var r=i*i,s=e*e,o=(r-s)/r,a=0;n?(i*=1-o*(Hze+o*(Wze+o*Xze)),r=i*i,o=0):a=Math.sqrt(o);var l=(r-s)/s;return{es:o,e:a,ep2:l}}function T9e(i,e,t,n,r){if(!i){var s=Tg(Ji,n);s||(s=C9e),i=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*i),(t===0||Math.abs(i-e)<Nt)&&(r=!0,e=i),{a:i,b:e,rf:t,sphere:r}}var Oo={};Oo.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Oo.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Oo.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Oo.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Oo.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Oo.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Oo.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Oo.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Oo.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Oo.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Oo.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Oo.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Oo.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Oo.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Oo.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Oo.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Oo.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Oo.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function A9e(i,e,t,n,r,s,o){var a={};return i===void 0||i==="none"?a.datum_type=FO:a.datum_type=qze,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=M0),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=I0,a.datum_params[3]*=Jw,a.datum_params[4]*=Jw,a.datum_params[5]*=Jw,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=__,a.grids=o),a.a=t,a.b=n,a.es=r,a.ep2=s,a}var $2e={};function R9e(i,e){var t=new DataView(e),n=L9e(t),r=M9e(t,n),s=I9e(t,r,n),o={header:r,subgrids:s};return $2e[i]=o,o}function k9e(i){if(i===void 0)return null;var e=i.split(",");return e.map(D9e)}function D9e(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:$2e[i]||null,isNull:!1}}function Kv(i){return i/3600*Math.PI/180}function L9e(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function M9e(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:$O(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function $O(i,e,t){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,t)))}function I9e(i,e,t){for(var n=176,r=[],s=0;s<e.nSubgrids;s++){var o=P9e(i,n,t),a=F9e(i,n,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[Kv(o.lowerLongitude),Kv(o.lowerLatitude)],del:[Kv(o.longitudeInterval),Kv(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:O9e(a)}),n+=176+o.gridNodeCount*16}return r}function O9e(i){return i.map(function(e){return[Kv(e.longitudeShift),Kv(e.latitudeShift)]})}function P9e(i,e,t){return{name:$O(i,e+8,e+16).trim(),parent:$O(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,t),upperLatitude:i.getFloat64(e+88,t),lowerLongitude:i.getFloat64(e+104,t),upperLongitude:i.getFloat64(e+120,t),latitudeInterval:i.getFloat64(e+136,t),longitudeInterval:i.getFloat64(e+152,t),gridNodeCount:i.getInt32(e+168,t)}}function F9e(i,e,t,n){for(var r=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(r+a*s,n),longitudeShift:i.getFloat32(r+a*s+4,n),latitudeAccuracy:i.getFloat32(r+a*s+8,n),longitudeAccuracy:i.getFloat32(r+a*s+12,n)};o.push(l)}return o}function jh(i,e){if(!(this instanceof jh))return new jh(i);e=e||function(u){if(u)throw u};var t=h9e(i);if(typeof t!="object"){e(i);return}var n=jh.projections.get(t.projName);if(!n){e(i);return}if(t.datumCode&&t.datumCode!=="none"){var r=Tg(Oo,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=T9e(t.a,t.b,t.rf,t.ellps,t.sphere),o=S9e(s.a,s.b,s.rf,t.R_A),a=k9e(t.nadgrids),l=t.datum||A9e(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);y0e(this,t),y0e(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}jh.projections=E9e;jh.projections.start();function N9e(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===M0?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===I0?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function B2e(i,e,t){var n=i.x,r=i.y,s=i.z?i.z:0,o,a,l,u;if(r<-wt&&r>-1.001*wt)r=-wt;else if(r>wt&&r<1.001*wt)r=wt;else{if(r<-wt)return{x:-1/0,y:-1/0,z:i.z};if(r>wt)return{x:1/0,y:1/0,z:i.z}}return n>Math.PI&&(n-=2*Math.PI),a=Math.sin(r),u=Math.cos(r),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+s)*u*Math.cos(n),y:(o+s)*u*Math.sin(n),z:(o*(1-e)+s)*a}}function j2e(i,e,t,n){var r=1e-12,s=r*r,o=30,a,l,u,c,h,d,f,p,m,y,v,b,x,w=i.x,C=i.y,D=i.z?i.z:0,R,A,L;if(a=Math.sqrt(w*w+C*C),l=Math.sqrt(w*w+C*C+D*D),a/t<r){if(R=0,l/t<r)return A=wt,L=-n,{x:i.x,y:i.y,z:i.z}}else R=Math.atan2(C,w);u=D/l,c=a/l,h=1/Math.sqrt(1-e*(2-e)*c*c),p=c*(1-e)*h,m=u*h,x=0;do x++,f=t/Math.sqrt(1-e*m*m),L=a*p+D*m-f*(1-e*m*m),d=e*f/(f+L),h=1/Math.sqrt(1-d*(2-d)*c*c),y=c*(1-d)*h,v=u*h,b=v*p-y*m,p=y,m=v;while(b*b>s&&x<o);return A=Math.atan(v/Math.abs(y)),{x:R,y:A,z:L}}function $9e(i,e,t){if(e===M0)return{x:i.x+t[0],y:i.y+t[1],z:i.z+t[2]};if(e===I0){var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6];return{x:u*(i.x-l*i.y+a*i.z)+n,y:u*(l*i.x+i.y-o*i.z)+r,z:u*(-a*i.x+o*i.y+i.z)+s}}}function B9e(i,e,t){if(e===M0)return{x:i.x-t[0],y:i.y-t[1],z:i.z-t[2]};if(e===I0){var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=(i.x-n)/u,h=(i.y-r)/u,d=(i.z-s)/u;return{x:c+l*h-a*d,y:-l*c+h+o*d,z:a*c-o*h+d}}}function QS(i){return i===M0||i===I0}function j9e(i,e,t){if(N9e(i,e)||i.datum_type===FO||e.datum_type===FO)return t;var n=i.a,r=i.es;if(i.datum_type===__){var s=_0e(i,!1,t);if(s!==0)return;n=f0e,r=p0e}var o=e.a,a=e.b,l=e.es;if(e.datum_type===__&&(o=f0e,a=Vze,l=p0e),r===l&&n===o&&!QS(i.datum_type)&&!QS(e.datum_type))return t;if(t=B2e(t,r,n),QS(i.datum_type)&&(t=$9e(t,i.datum_type,i.datum_params)),QS(e.datum_type)&&(t=B9e(t,e.datum_type,e.datum_params)),t=j2e(t,l,o,a),e.datum_type===__){var u=_0e(e,!0,t);if(u!==0)return}return t}function _0e(i,e,t){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(s.push(a.name),a.isNull){r=n;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,f=h.ll[0]-d,p=h.ll[1]-d,m=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(p>n.y||f>n.x||y<n.y||m<n.x)&&(r=z9e(n,e,h),!isNaN(r.x)))break e}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Rh+" "+n.y*Rh+" tried: '"+s+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function z9e(i,e,t){var n={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return n;var r={x:i.x,y:i.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=Vt(r.x-Math.PI)+Math.PI;var s=b0e(r,t);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o=9,a=1e-12,l,u;do{if(u=b0e(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(u.x+s.x),y:r.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Vt(s.x+t.ll[0]),n.y=s.y+t.ll[1]}else isNaN(s.x)||(n.x=i.x+s.x,n.y=i.y+s.y);return n}function b0e(i,e){var t={x:i.x/e.del[0],y:i.y/e.del[1]},n={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*n.x,y:t.y-1*n.y},s={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return s;o=n.y*e.lim[0]+n.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var u={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var c={x:e.cvs[o][0],y:e.cvs[o][1]},h=r.x*r.y,d=r.x*(1-r.y),f=(1-r.x)*(1-r.y),p=(1-r.x)*r.y;return s.x=f*a.x+d*l.x+p*c.x+h*u.x,s.y=f*a.y+d*l.y+p*c.y+h*u.y,s}function x0e(i,e,t){var n=t.x,r=t.y,s=t.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=n,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(o=r,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),i.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":t[a]!==void 0&&(u.z=o);break;case"d":t[a]!==void 0&&(u.z=-o);break;default:return null}return u}function z2e(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function G9e(i){w0e(i.x),w0e(i.y)}function w0e(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function U9e(i,e){return(i.datum.datum_type===M0||i.datum.datum_type===I0||i.datum.datum_type===__)&&e.datumCode!=="WGS84"||(e.datum.datum_type===M0||e.datum.datum_type===I0||e.datum.datum_type===__)&&i.datumCode!=="WGS84"}function JA(i,e,t,n){var r;Array.isArray(t)?t=z2e(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(G9e(t),i.datum&&e.datum&&U9e(i,e)&&(r=new jh("WGS84"),t=JA(i,r,t,n),i=r),n&&i.axis!=="enu"&&(t=x0e(i,!1,t)),i.projName==="longlat")t={x:t.x*pa,y:t.y*pa,z:t.z||0};else if(i.to_meter&&(t={x:t.x*i.to_meter,y:t.y*i.to_meter,z:t.z||0}),t=i.inverse(t),!t)return;if(i.from_greenwich&&(t.x+=i.from_greenwich),t=j9e(i.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Rh,y:t.y*Rh,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),n&&e.axis!=="enu"?x0e(e,!0,t):(t&&!s&&delete t.z,t)}var E0e=jh("WGS84");function kM(i,e,t,n){var r,s,o;return Array.isArray(t)?(r=JA(i,e,t,n)||{x:NaN,y:NaN},t.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(s=JA(i,e,t,n),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function C0e(i){return i instanceof jh?i:i.oProj?i.oProj:jh(i)}function ea(i,e,t){i=C0e(i);var n=!1,r;return typeof e>"u"?(e=i,i=E0e,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=i,i=E0e,n=!0),e=C0e(e),t?kM(i,e,t):(r={forward:function(s,o){return kM(i,e,s,o)},inverse:function(s,o){return kM(e,i,s,o)}},n&&(r.oProj=e),r)}var S0e=6,G2e="AJSAJS",U2e="AFAFAF",Jv=65,Tl=73,qu=79,Rw=86,kw=90;const q9e={forward:q2e,inverse:V9e,toPoint:V2e};function q2e(i,e){return e=e||5,X9e(H9e({lat:i[1],lon:i[0]}),e)}function V9e(i){var e=MN(W2e(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function V2e(i){var e=MN(W2e(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function DM(i){return i*(Math.PI/180)}function T0e(i){return 180*(i/Math.PI)}function H9e(i){var e=i.lat,t=i.lon,n=6378137,r=.00669438,s=.9996,o,a,l,u,c,h,d,f=DM(e),p=DM(t),m,y;y=Math.floor((t+180)/6)+1,t===180&&(y=60),e>=56&&e<64&&t>=3&&t<12&&(y=32),e>=72&&e<84&&(t>=0&&t<9?y=31:t>=9&&t<21?y=33:t>=21&&t<33?y=35:t>=33&&t<42&&(y=37)),o=(y-1)*6-180+3,m=DM(o),a=r/(1-r),l=n/Math.sqrt(1-r*Math.sin(f)*Math.sin(f)),u=Math.tan(f)*Math.tan(f),c=a*Math.cos(f)*Math.cos(f),h=Math.cos(f)*(p-m),d=n*((1-r/4-3*r*r/64-5*r*r*r/256)*f-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*f)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*f)-35*r*r*r/3072*Math.sin(6*f));var v=s*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*a)*h*h*h*h*h/120)+5e5,b=s*(d+l*Math.tan(f)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*a)*h*h*h*h*h*h/720));return e<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(v),zoneNumber:y,zoneLetter:W9e(e)}}function MN(i){var e=i.northing,t=i.easting,n=i.zoneLetter,r=i.zoneNumber;if(r<0||r>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,h,d,f,p,m,y,v,b,x=t-5e5,w=e;n<"N"&&(w-=1e7),y=(r-1)*6-180+3,l=a/(1-a),m=w/s,v=m/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),b=v+(3*u/2-27*u*u*u/32)*Math.sin(2*v)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*v)+151*u*u*u/96*Math.sin(6*v),c=o/Math.sqrt(1-a*Math.sin(b)*Math.sin(b)),h=Math.tan(b)*Math.tan(b),d=l*Math.cos(b)*Math.cos(b),f=o*(1-a)/Math.pow(1-a*Math.sin(b)*Math.sin(b),1.5),p=x/(c*s);var C=b-c*Math.tan(b)/f*(p*p/2-(5+3*h+10*d-4*d*d-9*l)*p*p*p*p/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*p*p*p*p*p*p/720);C=T0e(C);var D=(p-(1+2*h+d)*p*p*p/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*p*p*p*p*p/120)/Math.cos(b);D=y+T0e(D);var R;if(i.accuracy){var A=MN({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});R={top:A.lat,right:A.lon,bottom:C,left:D}}else R={lat:C,lon:D};return R}function W9e(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function X9e(i,e){var t="00000"+i.easting,n="00000"+i.northing;return i.zoneNumber+i.zoneLetter+Y9e(i.easting,i.northing,i.zoneNumber)+t.substr(t.length-5,e)+n.substr(n.length-5,e)}function Y9e(i,e,t){var n=H2e(t),r=Math.floor(i/1e5),s=Math.floor(e/1e5)%20;return Z9e(r,s,n)}function H2e(i){var e=i%S0e;return e===0&&(e=S0e),e}function Z9e(i,e,t){var n=t-1,r=G2e.charCodeAt(n),s=U2e.charCodeAt(n),o=r+i-1,a=s+e,l=!1;o>kw&&(o=o-kw+Jv-1,l=!0),(o===Tl||r<Tl&&o>Tl||(o>Tl||r<Tl)&&l)&&o++,(o===qu||r<qu&&o>qu||(o>qu||r<qu)&&l)&&(o++,o===Tl&&o++),o>kw&&(o=o-kw+Jv-1),a>Rw?(a=a-Rw+Jv-1,l=!0):l=!1,(a===Tl||s<Tl&&a>Tl||(a>Tl||s<Tl)&&l)&&a++,(a===qu||s<qu&&a>qu||(a>qu||s<qu)&&l)&&(a++,a===Tl&&a++),a>Rw&&(a=a-Rw+Jv-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function W2e(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,t=null,n="",r,s=0;!/[A-Z]/.test(r=i.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+i;n+=r,s++}var o=parseInt(n,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;t=i.substring(s,s+=2);for(var l=H2e(o),u=K9e(t.charAt(0),l),c=J9e(t.charAt(1),l);c<Q9e(a);)c+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=h/2,f=0,p=0,m,y,v,b,x;return d>0&&(m=1e5/Math.pow(10,d),y=i.substring(s,s+d),f=parseFloat(y)*m,v=i.substring(s+d),p=parseFloat(v)*m),b=f+u,x=p+c,{easting:b,northing:x,zoneLetter:a,zoneNumber:o,accuracy:m}}function K9e(i,e){for(var t=G2e.charCodeAt(e-1),n=1e5,r=!1;t!==i.charCodeAt(0);){if(t++,t===Tl&&t++,t===qu&&t++,t>kw){if(r)throw"Bad character: "+i;t=Jv,r=!0}n+=1e5}return n}function J9e(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var t=U2e.charCodeAt(e-1),n=0,r=!1;t!==i.charCodeAt(0);){if(t++,t===Tl&&t++,t===qu&&t++,t>Rw){if(r)throw"Bad character: "+i;t=Jv,r=!0}n+=1e5}return n}function Q9e(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function H_(i,e,t){if(!(this instanceof H_))return new H_(i,e,t);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var n=i.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=i,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}H_.fromMGRS=function(i){return new H_(V2e(i))};H_.prototype.toMGRS=function(i){return q2e([this.x,this.y],i)};var eGe=1,tGe=.25,A0e=.046875,R0e=.01953125,k0e=.01068115234375,iGe=.75,nGe=.46875,rGe=.013020833333333334,sGe=.007120768229166667,oGe=.3645833333333333,aGe=.005696614583333333,lGe=.3076171875;function X2e(i){var e=[];e[0]=eGe-i*(tGe+i*(A0e+i*(R0e+i*k0e))),e[1]=i*(iGe-i*(A0e+i*(R0e+i*k0e)));var t=i*i;return e[2]=t*(nGe-i*(rGe+i*sGe)),t*=i,e[3]=t*(oGe-i*aGe),e[4]=t*i*lGe,e}function ED(i,e,t,n){return t*=e,e*=e,n[0]*i-t*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var uGe=20;function Y2e(i,e,t){for(var n=1/(1-e),r=i,s=uGe;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(ED(r,o,Math.cos(r),t)-i)*(a*Math.sqrt(a))*n,r-=a,Math.abs(a)<Nt)return r}return r}function cGe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=X2e(this.es),this.ml0=ED(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function hGe(i){var e=i.x,t=i.y,n=Vt(e-this.long0),r,s,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var c=l*n,h=Math.pow(c,2),d=this.ep2*Math.pow(l,2),f=Math.pow(d,2),p=Math.abs(l)>Nt?Math.tan(t):0,m=Math.pow(p,2),y=Math.pow(m,2);r=1-this.es*Math.pow(a,2),c=c/Math.sqrt(r);var v=ED(t,a,l,this.en);s=this.a*(this.k0*c*(1+h/6*(1-m+d+h/20*(5-18*m+y+14*d-58*m*d+h/42*(61+179*y-y*m-479*m)))))+this.x0,o=this.a*(this.k0*(v-this.ml0+a*n*c/2*(1+h/12*(5-m+9*d+4*f+h/30*(61+y-58*m+270*d-330*m*d+h/56*(1385+543*y-y*m-3111*m))))))+this.y0}else{var u=l*Math.sin(n);if(Math.abs(Math.abs(u)-1)<Nt)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(n)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Nt)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=s,i.y=o,i}function dGe(i){var e,t,n,r,s=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=Y2e(e,this.es,this.en),Math.abs(t)<wt){var h=Math.sin(t),d=Math.cos(t),f=Math.abs(d)>Nt?Math.tan(t):0,p=this.ep2*Math.pow(d,2),m=Math.pow(p,2),y=Math.pow(f,2),v=Math.pow(y,2);e=1-this.es*Math.pow(h,2);var b=s*Math.sqrt(e)/this.k0,x=Math.pow(b,2);e=e*f,n=t-e*x/(1-this.es)*.5*(1-x/12*(5+3*y-9*p*y+p-4*m-x/30*(61+90*y-252*p*y+45*v+46*p-x/56*(1385+3633*y+4095*v+1574*v*y)))),r=Vt(this.long0+b*(1-x/6*(1+2*y+p-x/20*(5+28*y+24*v+8*p*y+6*p-x/42*(61+662*y+1320*v+720*v*y))))/d)}else n=wt*iC(o),r=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),n=Math.asin(e),o<0&&(n=-n),l===0&&c===0?r=0:r=Vt(Math.atan2(l,c)+this.long0)}return i.x=r,i.y=n,i}var fGe=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const dA={init:cGe,forward:hGe,inverse:dGe,names:fGe};function Z2e(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function Xu(i,e){i=Math.abs(i),e=Math.abs(e);var t=Math.max(i,e),n=Math.min(i,e)/(t||1);return t*Math.sqrt(1+Math.pow(n,2))}function pGe(i){var e=1+i,t=e-1;return t===0?i:i*Math.log(e)/t}function gGe(i){var e=Math.abs(i);return e=pGe(e*(1+e/(Xu(1,e)+1))),i<0?-e:e}function IN(i,e){for(var t=2*Math.cos(2*e),n=i.length-1,r=i[n],s=0,o;--n>=0;)o=-s+t*r+i[n],s=r,r=o;return e+o*Math.sin(2*e)}function mGe(i,e){for(var t=2*Math.cos(e),n=i.length-1,r=i[n],s=0,o;--n>=0;)o=-s+t*r+i[n],s=r,r=o;return Math.sin(e)*o}function yGe(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function K2e(i,e,t){for(var n=Math.sin(e),r=Math.cos(e),s=Z2e(t),o=yGe(t),a=2*r*o,l=-2*n*s,u=i.length-1,c=i[u],h=0,d=0,f=0,p,m;--u>=0;)p=d,m=h,d=c,h=f,c=-p+a*d-l*h+i[u],f=-m+l*d+a*h;return a=n*o,l=r*s,[a*c-l*f,a*f+l*c]}function vGe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(dA.init.apply(this),this.forward=dA.forward,this.inverse=dA.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var n=IN(this.cbg,this.lat0);this.Zb=-this.Qn*(n+mGe(this.gtu,2*n))}function _Ge(i){var e=Vt(i.x-this.long0),t=i.y;t=IN(this.cbg,t);var n=Math.sin(t),r=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(n,o*r),e=Math.atan2(s*r,Xu(n,r*o)),e=gGe(Math.tan(e));var a=K2e(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),i.x=l,i.y=u,i}function bGe(i){var e=(i.x-this.x0)*(1/this.a),t=(i.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var n,r;if(Math.abs(e)<=2.623395162778){var s=K2e(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(Z2e(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(o*u,Xu(l,u*a)),e=Math.atan2(l,u*a),n=Vt(e+this.long0),r=IN(this.cgb,t)}else n=1/0,r=1/0;return i.x=n,i.y=r,i}var xGe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const fA={init:vGe,forward:_Ge,inverse:bGe,names:xGe};function wGe(i,e){if(i===void 0){if(i=Math.floor((Vt(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var EGe="etmerc";function CGe(){var i=wGe(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*pa,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,fA.init.apply(this),this.forward=fA.forward,this.inverse=fA.inverse}var SGe=["Universal Transverse Mercator System","utm"];const TGe={init:CGe,names:SGe,dependsOn:EGe};function ON(i,e){return Math.pow((1-i)/(1+i),e)}var AGe=20;function RGe(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Lr)/(Math.pow(Math.tan(.5*this.lat0+Lr),this.C)*ON(this.e*i,this.ratexp))}function kGe(i){var e=i.x,t=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Lr),this.C)*ON(this.e*Math.sin(t),this.ratexp))-wt,i.x=this.C*e,i}function DGe(i){for(var e=1e-14,t=i.x/this.C,n=i.y,r=Math.pow(Math.tan(.5*n+Lr)/this.K,1/this.C),s=AGe;s>0&&(n=2*Math.atan(r*ON(this.e*Math.sin(i.y),-.5*this.e))-wt,!(Math.abs(n-i.y)<e));--s)i.y=n;return s?(i.x=t,i.y=n,i):null}var LGe=["gauss"];const PN={init:RGe,forward:kGe,inverse:DGe,names:LGe};function MGe(){PN.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function IGe(i){var e,t,n,r;return i.x=Vt(i.x-this.long0),PN.forward.apply(this,[i]),e=Math.sin(i.y),t=Math.cos(i.y),n=Math.cos(i.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*n),i.x=r*t*Math.sin(i.x),i.y=r*(this.cosc0*e-this.sinc0*t*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function OGe(i){var e,t,n,r,s;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,s=Xu(i.x,i.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+i.y*e*this.cosc0/s),n=Math.atan2(i.x*e,s*this.cosc0*t-i.y*this.sinc0*e)}else r=this.phic0,n=0;return i.x=n,i.y=r,PN.inverse.apply(this,[i]),i.x=Vt(i.x+this.long0),i}var PGe=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const FGe={init:MGe,forward:IGe,inverse:OGe,names:PGe};function NGe(i,e,t){return e*=t,Math.tan(.5*(wt+i))*Math.pow((1-e)/(1+e),.5*t)}function $Ge(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nt&&(this.k0=.5*(1+iC(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Nt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nt&&Math.abs(Math.cos(this.lat_ts))>Nt&&(this.k0=.5*this.cons*Xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Xh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-wt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function BGe(i){var e=i.x,t=i.y,n=Math.sin(t),r=Math.cos(t),s,o,a,l,u,c,h=Vt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Nt&&Math.abs(t+this.lat0)<=Nt?(i.x=NaN,i.y=NaN,i):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(h)),i.x=this.a*s*r*Math.sin(h)+this.x0,i.y=this.a*s*(this.coslat0*n-this.sinlat0*r*Math.cos(h))+this.y0,i):(o=2*Math.atan(this.ssfn_(t,n,this.e))-wt,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Nt?(u=Fc(this.e,t*this.con,this.con*n),c=2*this.a*this.k0*u/this.cons,i.x=this.x0+c*Math.sin(e-this.long0),i.y=this.y0-this.con*c*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<Nt?(s=2*this.a*this.k0/(1+l*Math.cos(h)),i.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),i.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),i.x=s*l*Math.sin(h)+this.x0,i))}function jGe(i){i.x-=this.x0,i.y-=this.y0;var e,t,n,r,s,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=Nt?(i.x=e,i.y=t,i):(t=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Nt?this.lat0>0?e=Vt(this.long0+Math.atan2(i.x,-1*i.y)):e=Vt(this.long0+Math.atan2(i.x,i.y)):e=Vt(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=e,i.y=t,i)}else if(Math.abs(this.coslat0)<=Nt){if(o<=Nt)return t=this.lat0,e=this.long0,i.x=e,i.y=t,i;i.x*=this.con,i.y*=this.con,n=o*this.cons/(2*this.a*this.k0),t=this.con*PE(this.e,n),e=this.con*Vt(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=Nt?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+i.y*Math.sin(r)*this.cosX0/o),e=Vt(this.long0+Math.atan2(i.x*Math.sin(r),o*this.cosX0*Math.cos(r)-i.y*this.sinX0*Math.sin(r)))),t=-1*PE(this.e,Math.tan(.5*(wt+s)));return i.x=e,i.y=t,i}var zGe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const GGe={init:$Ge,forward:BGe,inverse:jGe,names:zGe,ssfn_:NGe};function UGe(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),t=this.a,n=this.rf,r=1/n,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*u}function qGe(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),n=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function VGe(i){for(var e=i.x-this.x0,t=i.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=u,i}var HGe=["somerc"];const WGe={init:UGe,forward:qGe,inverse:VGe,names:HGe};var Mv=1e-7;function XGe(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(t)!==-1}function YGe(){var i,e,t,n,r,s,o,a,l,u,c=0,h,d=0,f=0,p=0,m=0,y=0,v=0;this.no_off=XGe(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),b&&(v=this.alpha),x&&(c=this.rectified_grid_angle*pa),b||x)d=this.longc;else if(f=this.long1,m=this.lat1,p=this.long2,y=this.lat2,Math.abs(m-y)<=Mv||(i=Math.abs(m))<=Mv||Math.abs(i-wt)<=Mv||Math.abs(Math.abs(this.lat0)-wt)<=Mv||Math.abs(Math.abs(y)-wt)<=Mv)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>Nt?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),i=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/i,n=this.B*e/(t*Math.sqrt(i)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Fc(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),b||x?(b?(h=Math.asin(Math.sin(v)/n),x||(c=v)):(h=c,v=Math.asin(n*Math.sin(h))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(h))/this.B):(s=Math.pow(Fc(this.e,m,Math.sin(m)),this.B),o=Math.pow(Fc(this.e,y,Math.sin(y)),this.B),r=this.E/s,l=(o-s)/(o+s),u=this.E*this.E,u=(u-o*s)/(u+o*s),i=f-p,i<-Math.pi?p-=IE:i>Math.pi&&(p+=IE),this.lam0=Vt(.5*(f+p)-Math.atan(u*Math.tan(.5*this.B*(f-p))/l)/this.B),h=Math.atan(2*Math.sin(this.B*Vt(f-this.lam0))/(r-1/r)),c=v=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Lr-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Lr+r))}function ZGe(i){var e={},t,n,r,s,o,a,l,u;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-wt)>Nt){if(o=this.E/Math.pow(Fc(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,t=.5*(o-a),n=.5*(o+a),s=Math.sin(this.B*i.x),r=(t*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(r)-1)<Nt)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*i.x),Math.abs(a)<Mv?l=this.A*i.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else u=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function KGe(i){var e,t,n,r,s,o,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(t=i.y,e=i.x):(t=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*t),r=.5*(n-1/n),s=.5*(n+1/n),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<Nt)l.x=0,l.y=a<0?-wt:wt;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=PE(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var JGe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const QGe={init:YGe,forward:ZGe,inverse:KGe,names:JGe};function e7e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Nt)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),n=Xh(this.e,e,t),r=Fc(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Xh(this.e,s,o),l=Fc(this.e,this.lat2,s),u=Fc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Nt?this.ns=Math.log(n/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function t7e(i){var e=i.x,t=i.y;Math.abs(2*Math.abs(t)-Math.PI)<=Nt&&(t=iC(t)*(wt-2*Nt));var n=Math.abs(Math.abs(t)-wt),r,s;if(n>Nt)r=Fc(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(n=t*this.ns,n<=0)return null;s=0}var o=this.ns*Vt(e-this.long0);return i.x=this.k0*(s*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,i}function i7e(i){var e,t,n,r,s,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,n=Math.pow(e/(this.a*this.f0),t),r=PE(this.e,n),r===-9999)return null}else r=-wt;return s=Vt(l/this.ns+this.long0),i.x=s,i.y=r,i}var n7e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const r7e={init:e7e,forward:t7e,inverse:i7e,names:n7e};function s7e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function o7e(i){var e,t,n,r,s,o,a,l=i.x,u=i.y,c=Vt(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(n)),s=Math.asin(Math.cos(t)*Math.sin(n)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function a7e(i){var e,t,n,r,s,o,a,l,u=i.x;i.x=i.y,i.y=u,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.atan2(i.y,i.x),r=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),t=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),i.x=this.long0-t/this.alfa,a=e,l=0;var c=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,c+=1;while(l===0&&c<15);return c>=15?null:i}var l7e=["Krovak","krovak"];const u7e={init:s7e,forward:o7e,inverse:a7e,names:l7e};function hl(i,e,t,n,r){return i*r-e*Math.sin(2*r)+t*Math.sin(4*r)-n*Math.sin(6*r)}function nC(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function rC(i){return .375*i*(1+.25*i*(1+.46875*i))}function sC(i){return .05859375*i*i*(1+.75*i)}function oC(i){return i*i*i*(35/3072)}function W_(i,e,t){var n=e*t;return i/Math.sqrt(1-n*n)}function $b(i){return Math.abs(i)<wt?i:i-iC(i)*Math.PI}function QA(i,e,t,n,r){var s,o;s=i/e;for(var a=0;a<15;a++)if(o=(i-(e*s-t*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function c7e(){this.sphere||(this.e0=nC(this.es),this.e1=rC(this.es),this.e2=sC(this.es),this.e3=oC(this.es),this.ml0=this.a*hl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function h7e(i){var e,t,n=i.x,r=i.y;if(n=Vt(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=W_(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),u=n*Math.cos(r),c=u*u,h=this.es*o*o/(1-this.es),d=this.a*hl(this.e0,this.e1,this.e2,this.e3,r);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),t=d-this.ml0+a*s/o*c*(.5+(5-l+6*h)*c/24)}return i.x=e+this.x0,i.y=t+this.y0,i}function d7e(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,n,r;if(this.sphere){var s=t+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=QA(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-wt)<=Nt)return i.x=this.long0,i.y=wt,t<0&&(i.y*=-1),i;var l=W_(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=e*this.a/l,d=h*h;n=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(a)}return i.x=Vt(r+this.long0),i.y=$b(n),i}var f7e=["Cassini","Cassini_Soldner","cass"];const p7e={init:c7e,forward:h7e,inverse:d7e,names:f7e};function vg(i,e){var t;return i>1e-7?(t=i*e,(1-i*i)*(e/(1-t*t)-.5/i*Math.log((1-t)/(1+t)))):2*e}var g7e=1,m7e=2,y7e=3,v7e=4;function _7e(){var i=Math.abs(this.lat0);if(Math.abs(i-wt)<Nt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<Nt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=vg(this.e,1),this.mmf=.5/(1-this.es),this.apa=R7e(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=vg(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function b7e(i){var e,t,n,r,s,o,a,l,u,c,h=i.x,d=i.y;if(h=Vt(h-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n,t<=Nt)return null;t=Math.sqrt(2/t),e=t*c*Math.sin(h),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<Nt)return null;t=Lr-d*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(h),t*=n}}else{switch(a=0,l=0,u=0,n=Math.cos(h),r=Math.sin(h),s=Math.sin(d),o=vg(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=wt+d,o=this.qp-o;break;case this.S_POLE:u=d-wt,o=this.qp+o;break}if(Math.abs(u)<Nt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*a-this.sinb1*l*n):t=(u=Math.sqrt(2/(1+l*n)))*a*this.ymf,e=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*r,t=n*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*t+this.y0,i}function x7e(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,n,r,s,o,a,l,u;if(this.sphere){var c=0,h,d=0;if(h=Math.sqrt(e*e+t*t),r=h*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(r),c=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=Nt?0:Math.asin(t*d/h),e*=d,t=c*h;break;case this.OBLIQ:r=Math.abs(h)<=Nt?this.lat0:Math.asin(c*this.sinph0+t*d*this.cosph0/h),e*=d*this.cosph0,t=(c-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:t=-t,r=wt-r;break;case this.S_POLE:r-=wt;break}n=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Nt)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+t*o*this.cosb1/l,a=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*o):(u=t*o/l,a=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return i.x=this.long0,i.y=this.lat0,i;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(e,t),r=k7e(Math.asin(u),this.apa)}return i.x=Vt(this.long0+n),i.y=r,i}var w7e=.3333333333333333,E7e=.17222222222222222,C7e=.10257936507936508,S7e=.06388888888888888,T7e=.0664021164021164,A7e=.016415012942191543;function R7e(i){var e,t=[];return t[0]=i*w7e,e=i*i,t[0]+=e*E7e,t[1]=e*S7e,e*=i,t[0]+=e*C7e,t[1]+=e*T7e,t[2]=e*A7e,t}function k7e(i,e){var t=i+i;return i+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var D7e=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const L7e={init:_7e,forward:b7e,inverse:x7e,names:D7e,S_POLE:g7e,N_POLE:m7e,EQUIT:y7e,OBLIQ:v7e};function Ag(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function M7e(){Math.abs(this.lat1+this.lat2)<Nt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Xh(this.e3,this.sin_po,this.cos_po),this.qs1=vg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Xh(this.e3,this.sin_po,this.cos_po),this.qs2=vg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=vg(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Nt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function I7e(i){var e=i.x,t=i.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var n=vg(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*Vt(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return i.x=o,i.y=a,i}function O7e(i){var e,t,n,r,s,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),n=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*i.x,n*i.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(t=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,t)),s=Vt(r/this.ns0+this.long0),i.x=s,i.y=o,i}function P7e(i,e){var t,n,r,s,o,a=Ag(.5*e);if(i<Nt)return a;for(var l=i*i,u=1;u<=25;u++)if(t=Math.sin(a),n=Math.cos(a),r=i*t,s=1-r*r,o=.5*s*s/n*(e/(1-l)-t/s+.5/i*Math.log((1-r)/(1+r))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var F7e=["Albers_Conic_Equal_Area","Albers","aea"];const N7e={init:M7e,forward:I7e,inverse:O7e,names:F7e,phi1z:P7e};function $7e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function B7e(i){var e,t,n,r,s,o,a,l,u=i.x,c=i.y;return n=Vt(u-this.long0),e=Math.sin(c),t=Math.cos(c),r=Math.cos(n),o=this.sin_p14*e+this.cos_p14*t*r,s=1,o>0||Math.abs(o)<=Nt?(a=this.x0+this.a*s*t*Math.sin(n)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)/o):(a=this.x0+this.infinity_dist*t*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),i.x=a,i.y=l,i}function j7e(i){var e,t,n,r,s,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),n=Math.cos(r),o=Ag(n*this.sin_p14+i.y*t*this.cos_p14/e),s=Math.atan2(i.x*t,e*this.cos_p14*n-i.y*this.sin_p14*t),s=Vt(this.long0+s)):(o=this.phic0,s=0),i.x=s,i.y=o,i}var z7e=["gnom"];const G7e={init:$7e,forward:B7e,inverse:j7e,names:z7e};function U7e(i,e){var t=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*wt:wt;for(var n=Math.asin(.5*e),r,s,o,a,l=0;l<30;l++)if(s=Math.sin(n),o=Math.cos(n),a=i*s,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-i*i)-s/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function q7e(){this.sphere||(this.k0=Xh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function V7e(i){var e=i.x,t=i.y,n,r,s=Vt(e-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=vg(this.e,Math.sin(t));n=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return i.x=n,i.y=r,i}function H7e(i){i.x-=this.x0,i.y-=this.y0;var e,t;return this.sphere?(e=Vt(this.long0+i.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(t=U7e(this.e,2*i.y*this.k0/this.a),e=Vt(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=t,i}var W7e=["cea"];const X7e={init:q7e,forward:V7e,inverse:H7e,names:W7e};function Y7e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Z7e(i){var e=i.x,t=i.y,n=Vt(e-this.long0),r=$b(t-this.lat0);return i.x=this.x0+this.a*n*this.rc,i.y=this.y0+this.a*r,i}function K7e(i){var e=i.x,t=i.y;return i.x=Vt(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=$b(this.lat0+(t-this.y0)/this.a),i}var J7e=["Equirectangular","Equidistant_Cylindrical","eqc"];const Q7e={init:Y7e,forward:Z7e,inverse:K7e,names:J7e};var D0e=20;function eUe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=nC(this.es),this.e1=rC(this.es),this.e2=sC(this.es),this.e3=oC(this.es),this.ml0=this.a*hl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function tUe(i){var e=i.x,t=i.y,n,r,s,o=Vt(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=Nt?(n=this.a*o,r=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(t),r=this.a*($b(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Nt)n=this.a*o,r=-1*this.ml0;else{var a=W_(this.a,this.e,Math.sin(t))/Math.tan(t);n=a*Math.sin(s),r=this.a*hl(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return i.x=n+this.x0,i.y=r+this.y0,i}function iUe(i){var e,t,n,r,s,o,a,l,u;if(n=i.x-this.x0,r=i.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Nt)e=Vt(n/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,a=n*n/this.a/this.a+o*o,l=o;var c;for(s=D0e;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=Nt){t=l;break}e=Vt(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=Nt)t=0,e=Vt(this.long0+n/this.a);else{o=(this.ml0+r)/this.a,a=n*n/this.a/this.a+o*o,l=o;var h,d,f,p,m;for(s=D0e;s;--s)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*hl(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=d/this.a,u=(o*(h*p+1)-p-.5*h*(p*p+a))/(this.es*Math.sin(2*l)*(p*p+a-2*o*p)/(4*h)+(o-p)*(h*f-2/Math.sin(2*l))-f),l-=u,Math.abs(u)<=Nt){t=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=Vt(this.long0+Math.asin(n*h/this.a)/Math.sin(t))}return i.x=e,i.y=t,i}var nUe=["Polyconic","poly"];const rUe={init:eUe,forward:tUe,inverse:iUe,names:nUe};function sUe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function oUe(i){var e,t=i.x,n=i.y,r=n-this.lat0,s=t-this.long0,o=r/Jw*1e-5,a=s,l=1,u=0;for(e=1;e<=10;e++)l=l*o,u=u+this.A[e]*l;var c=u,h=a,d=1,f=0,p,m,y=0,v=0;for(e=1;e<=6;e++)p=d*c-f*h,m=f*c+d*h,d=p,f=m,y=y+this.B_re[e]*d-this.B_im[e]*f,v=v+this.B_im[e]*d+this.B_re[e]*f;return i.x=v*this.a+this.x0,i.y=y*this.a+this.y0,i}function aUe(i){var e,t=i.x,n=i.y,r=t-this.x0,s=n-this.y0,o=s/this.a,a=r/this.a,l=1,u=0,c,h,d=0,f=0;for(e=1;e<=6;e++)c=l*o-u*a,h=u*o+l*a,l=c,u=h,d=d+this.C_re[e]*l-this.C_im[e]*u,f=f+this.C_im[e]*l+this.C_re[e]*u;for(var p=0;p<this.iterations;p++){var m=d,y=f,v,b,x=o,w=a;for(e=2;e<=6;e++)v=m*d-y*f,b=y*d+m*f,m=v,y=b,x=x+(e-1)*(this.B_re[e]*m-this.B_im[e]*y),w=w+(e-1)*(this.B_im[e]*m+this.B_re[e]*y);m=1,y=0;var C=this.B_re[1],D=this.B_im[1];for(e=2;e<=6;e++)v=m*d-y*f,b=y*d+m*f,m=v,y=b,C=C+e*(this.B_re[e]*m-this.B_im[e]*y),D=D+e*(this.B_im[e]*m+this.B_re[e]*y);var R=C*C+D*D;d=(x*C+w*D)/R,f=(w*C-x*D)/R}var A=d,L=f,O=1,$=0;for(e=1;e<=9;e++)O=O*A,$=$+this.D[e]*O;var q=this.lat0+$*Jw*1e5,M=this.long0+L;return i.x=M,i.y=q,i}var lUe=["New_Zealand_Map_Grid","nzmg"];const uUe={init:sUe,forward:oUe,inverse:aUe,names:lUe};function cUe(){}function hUe(i){var e=i.x,t=i.y,n=Vt(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return i.x=r,i.y=s,i}function dUe(i){i.x-=this.x0,i.y-=this.y0;var e=Vt(this.long0+i.x/this.a),t=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=t,i}var fUe=["Miller_Cylindrical","mill"];const pUe={init:cUe,forward:hUe,inverse:dUe,names:fUe};var gUe=20;function mUe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=X2e(this.es)}function yUe(i){var e,t,n=i.x,r=i.y;if(n=Vt(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),o=gUe;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<Nt)break}e=this.a*this.C_x*n*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);t=this.a*ED(r,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return i.x=e,i.y=t,i}function vUe(i){var e,t,n,r;return i.x-=this.x0,n=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=Ag((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Ag(Math.sin(e)/this.n)),n=Vt(n+this.long0),e=$b(e)):(e=Y2e(i.y/this.a,this.es,this.en),r=Math.abs(e),r<wt?(r=Math.sin(e),t=this.long0+i.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),n=Vt(t)):r-Nt<wt&&(n=this.long0)),i.x=n,i.y=e,i}var _Ue=["Sinusoidal","sinu"];const bUe={init:mUe,forward:yUe,inverse:vUe,names:_Ue};function xUe(){}function wUe(i){for(var e=i.x,t=i.y,n=Vt(e-this.long0),r=t,s=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<Nt)break}r/=2,Math.PI/2-Math.abs(t)<Nt&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return i.x=a,i.y=l,i}function EUe(i){var e,t;i.x-=this.x0,i.y-=this.y0,t=i.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var n=Vt(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return i.x=n,i.y=r,i}var CUe=["Mollweide","moll"];const SUe={init:xUe,forward:wUe,inverse:EUe,names:CUe};function TUe(){Math.abs(this.lat1+this.lat2)<Nt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=nC(this.es),this.e1=rC(this.es),this.e2=sC(this.es),this.e3=oC(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Xh(this.e,this.sinphi,this.cosphi),this.ml1=hl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Nt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Xh(this.e,this.sinphi,this.cosphi),this.ml2=hl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=hl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function AUe(i){var e=i.x,t=i.y,n;if(this.sphere)n=this.a*(this.g-t);else{var r=hl(this.e0,this.e1,this.e2,this.e3,t);n=this.a*(this.g-r)}var s=this.ns*Vt(e-this.long0),o=this.x0+n*Math.sin(s),a=this.y0+this.rh-n*Math.cos(s);return i.x=o,i.y=a,i}function RUe(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,t,n,r;this.ns>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*i.x,e*i.y)),this.sphere)return r=Vt(this.long0+s/this.ns),n=$b(this.g-t/this.a),i.x=r,i.y=n,i;var o=this.g-t/this.a;return n=QA(o,this.e0,this.e1,this.e2,this.e3),r=Vt(this.long0+s/this.ns),i.x=r,i.y=n,i}var kUe=["Equidistant_Conic","eqdc"];const DUe={init:TUe,forward:AUe,inverse:RUe,names:kUe};function LUe(){this.R=this.a}function MUe(i){var e=i.x,t=i.y,n=Vt(e-this.long0),r,s;Math.abs(t)<=Nt&&(r=this.x0+this.R*n,s=this.y0);var o=Ag(2*Math.abs(t/Math.PI));(Math.abs(n)<=Nt||Math.abs(Math.abs(t)-wt)<=Nt)&&(r=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/n-n/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),d=h*h,f=h*(2/u-1),p=f*f,m=Math.PI*this.R*(a*(h-p)+Math.sqrt(l*(h-p)*(h-p)-(p+l)*(d-p)))/(p+l);n<0&&(m=-m),r=this.x0+m;var y=l+h;return m=Math.PI*this.R*(f*y-a*Math.sqrt((p+l)*(l+1)-y*y))/(p+l),t>=0?s=this.y0+m:s=this.y0-m,i.x=r,i.y=s,i}function IUe(i){var e,t,n,r,s,o,a,l,u,c,h,d,f;return i.x-=this.x0,i.y-=this.y0,h=Math.PI*this.R,n=i.x/h,r=i.y/h,s=n*n+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+n*n,l=-2*o+1+2*r*r+s*s,f=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),h=3*f/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,i.y>=0?t=(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:t=-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(n)<Nt?e=this.long0:e=Vt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),i.x=e,i.y=t,i}var OUe=["Van_der_Grinten_I","VanDerGrinten","vandg"];const PUe={init:LUe,forward:MUe,inverse:IUe,names:OUe};function FUe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function NUe(i){var e=i.x,t=i.y,n=Math.sin(i.y),r=Math.cos(i.y),s=Vt(e-this.long0),o,a,l,u,c,h,d,f,p,m,y,v,b,x,w,C,D,R,A,L,O,$,q;return this.sphere?Math.abs(this.sin_p12-1)<=Nt?(i.x=this.x0+this.a*(wt-t)*Math.sin(s),i.y=this.y0-this.a*(wt-t)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Nt?(i.x=this.x0+this.a*(wt+t)*Math.sin(s),i.y=this.y0+this.a*(wt+t)*Math.cos(s),i):(R=this.sin_p12*n+this.cos_p12*r*Math.cos(s),C=Math.acos(R),D=C?C/Math.sin(C):1,i.x=this.x0+this.a*D*r*Math.sin(s),i.y=this.y0+this.a*D*(this.cos_p12*n-this.sin_p12*r*Math.cos(s)),i):(o=nC(this.es),a=rC(this.es),l=sC(this.es),u=oC(this.es),Math.abs(this.sin_p12-1)<=Nt?(c=this.a*hl(o,a,l,u,wt),h=this.a*hl(o,a,l,u,t),i.x=this.x0+(c-h)*Math.sin(s),i.y=this.y0-(c-h)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=Nt?(c=this.a*hl(o,a,l,u,wt),h=this.a*hl(o,a,l,u,t),i.x=this.x0+(c+h)*Math.sin(s),i.y=this.y0+(c+h)*Math.cos(s),i):(d=n/r,f=W_(this.a,this.e,this.sin_p12),p=W_(this.a,this.e,n),m=Math.atan((1-this.es)*d+this.es*f*this.sin_p12/(p*r)),y=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(s)),y===0?A=Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(y)-Math.PI)<=Nt?A=-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):A=Math.asin(Math.sin(s)*Math.cos(m)/Math.sin(y)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),b=this.e*this.cos_p12*Math.cos(y)/Math.sqrt(1-this.es),x=v*b,w=b*b,L=A*A,O=L*A,$=O*A,q=$*A,C=f*A*(1-L*w*(1-w)/6+O/8*x*(1-2*w)+$/120*(w*(4-7*w)-3*v*v*(1-7*w))-q/48*x),i.x=this.x0+C*Math.sin(y),i.y=this.y0+C*Math.cos(y),i))}function $Ue(i){i.x-=this.x0,i.y-=this.y0;var e,t,n,r,s,o,a,l,u,c,h,d,f,p,m,y,v,b,x,w,C,D,R,A;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*wt*this.a?void 0:(t=e/this.a,n=Math.sin(t),r=Math.cos(t),s=this.long0,Math.abs(e)<=Nt?o=this.lat0:(o=Ag(r*this.sin_p12+i.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-wt,Math.abs(a)<=Nt?this.lat0>=0?s=Vt(this.long0+Math.atan2(i.x,-i.y)):s=Vt(this.long0-Math.atan2(-i.x,i.y)):s=Vt(this.long0+Math.atan2(i.x*n,e*this.cos_p12*r-i.y*this.sin_p12*n))),i.x=s,i.y=o,i)):(l=nC(this.es),u=rC(this.es),c=sC(this.es),h=oC(this.es),Math.abs(this.sin_p12-1)<=Nt?(d=this.a*hl(l,u,c,h,wt),e=Math.sqrt(i.x*i.x+i.y*i.y),f=d-e,o=QA(f/this.a,l,u,c,h),s=Vt(this.long0+Math.atan2(i.x,-1*i.y)),i.x=s,i.y=o,i):Math.abs(this.sin_p12+1)<=Nt?(d=this.a*hl(l,u,c,h,wt),e=Math.sqrt(i.x*i.x+i.y*i.y),f=e-d,o=QA(f/this.a,l,u,c,h),s=Vt(this.long0+Math.atan2(i.x,i.y)),i.x=s,i.y=o,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),y=Math.atan2(i.x,i.y),p=W_(this.a,this.e,this.sin_p12),v=Math.cos(y),b=this.e*this.cos_p12*v,x=-b*b/(1-this.es),w=3*this.es*(1-x)*this.sin_p12*this.cos_p12*v/(1-this.es),C=e/p,D=C-x*(1+x)*Math.pow(C,3)/6-w*(1+3*x)*Math.pow(C,4)/24,R=1-x*D*D/2-C*D*D*D/6,m=Math.asin(this.sin_p12*Math.cos(D)+this.cos_p12*Math.sin(D)*v),s=Vt(this.long0+Math.asin(Math.sin(y)*Math.sin(D)/Math.cos(m))),A=Math.sin(m),o=Math.atan2((A-this.es*R*this.sin_p12)*Math.tan(m),A*(1-this.es)),i.x=s,i.y=o,i))}var BUe=["Azimuthal_Equidistant","aeqd"];const jUe={init:FUe,forward:NUe,inverse:$Ue,names:BUe};function zUe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function GUe(i){var e,t,n,r,s,o,a,l,u=i.x,c=i.y;return n=Vt(u-this.long0),e=Math.sin(c),t=Math.cos(c),r=Math.cos(n),o=this.sin_p14*e+this.cos_p14*t*r,s=1,(o>0||Math.abs(o)<=Nt)&&(a=this.a*s*t*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)),i.x=a,i.y=l,i}function UUe(i){var e,t,n,r,s,o,a;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),t=Ag(e/this.a),n=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=Nt?(a=this.lat0,i.x=o,i.y=a,i):(a=Ag(r*this.sin_p14+i.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-wt,Math.abs(s)<=Nt?(this.lat0>=0?o=Vt(this.long0+Math.atan2(i.x,-i.y)):o=Vt(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=Vt(this.long0+Math.atan2(i.x*n,e*this.cos_p14*r-i.y*this.sin_p14*n)),i.x=o,i.y=a,i))}var qUe=["ortho"];const VUe={init:zUe,forward:GUe,inverse:UUe,names:qUe};var ws={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Mr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function HUe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=wt-Lr/2?this.face=ws.TOP:this.lat0<=-(wt-Lr/2)?this.face=ws.BOTTOM:Math.abs(this.long0)<=Lr?this.face=ws.FRONT:Math.abs(this.long0)<=wt+Lr?this.face=this.long0>0?ws.RIGHT:ws.LEFT:this.face=ws.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function WUe(i){var e={x:0,y:0},t,n,r,s,o,a,l={value:0};if(i.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):t=i.y,n=i.x,this.face===ws.TOP)s=wt-t,n>=Lr&&n<=wt+Lr?(l.value=Mr.AREA_0,r=n-wt):n>wt+Lr||n<=-(wt+Lr)?(l.value=Mr.AREA_1,r=n>0?n-Hs:n+Hs):n>-(wt+Lr)&&n<=-Lr?(l.value=Mr.AREA_2,r=n+wt):(l.value=Mr.AREA_3,r=n);else if(this.face===ws.BOTTOM)s=wt+t,n>=Lr&&n<=wt+Lr?(l.value=Mr.AREA_0,r=-n+wt):n<Lr&&n>=-Lr?(l.value=Mr.AREA_1,r=-n):n<-Lr&&n>=-(wt+Lr)?(l.value=Mr.AREA_2,r=-n-wt):(l.value=Mr.AREA_3,r=n>0?-n+Hs:-n-Hs);else{var u,c,h,d,f,p,m;this.face===ws.RIGHT?n=b_(n,+wt):this.face===ws.BACK?n=b_(n,+Hs):this.face===ws.LEFT&&(n=b_(n,-wt)),d=Math.sin(t),f=Math.cos(t),p=Math.sin(n),m=Math.cos(n),u=f*m,c=f*p,h=d,this.face===ws.FRONT?(s=Math.acos(u),r=eT(s,h,c,l)):this.face===ws.RIGHT?(s=Math.acos(c),r=eT(s,h,-u,l)):this.face===ws.BACK?(s=Math.acos(-u),r=eT(s,h,-c,l)):this.face===ws.LEFT?(s=Math.acos(-c),r=eT(s,h,u,l)):(s=r=0,l.value=Mr.AREA_0)}return a=Math.atan(12/Hs*(r+Math.acos(Math.sin(r)*Math.cos(Lr))-wt)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Mr.AREA_1?a+=wt:l.value===Mr.AREA_2?a+=Hs:l.value===Mr.AREA_3&&(a+=1.5*Hs),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function XUe(i){var e={lam:0,phi:0},t,n,r,s,o,a,l,u,c,h={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,n=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),t=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?h.value=Mr.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(h.value=Mr.AREA_1,t-=wt):i.x<0&&-i.x>=Math.abs(i.y)?(h.value=Mr.AREA_2,t=t<0?t+Hs:t-Hs):(h.value=Mr.AREA_3,t+=wt),c=Hs/12*Math.tan(t),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(t),s=Math.tan(n),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ws.TOP)u=Math.acos(l),e.phi=wt-u,h.value===Mr.AREA_0?e.lam=a+wt:h.value===Mr.AREA_1?e.lam=a<0?a+Hs:a-Hs:h.value===Mr.AREA_2?e.lam=a-wt:e.lam=a;else if(this.face===ws.BOTTOM)u=Math.acos(l),e.phi=u-wt,h.value===Mr.AREA_0?e.lam=-a+wt:h.value===Mr.AREA_1?e.lam=-a:h.value===Mr.AREA_2?e.lam=-a-wt:e.lam=a<0?-a-Hs:-a+Hs;else{var d,f,p;d=l,c=d*d,c>=1?p=0:p=Math.sqrt(1-c)*Math.sin(a),c+=p*p,c>=1?f=0:f=Math.sqrt(1-c),h.value===Mr.AREA_1?(c=f,f=-p,p=c):h.value===Mr.AREA_2?(f=-f,p=-p):h.value===Mr.AREA_3&&(c=f,f=p,p=-c),this.face===ws.RIGHT?(c=d,d=-f,f=c):this.face===ws.BACK?(d=-d,f=-f):this.face===ws.LEFT&&(c=d,d=f,f=-c),e.phi=Math.acos(-p)-wt,e.lam=Math.atan2(f,d),this.face===ws.RIGHT?e.lam=b_(e.lam,-wt):this.face===ws.BACK?e.lam=b_(e.lam,-Hs):this.face===ws.LEFT&&(e.lam=b_(e.lam,+wt))}if(this.es!==0){var m,y,v;m=e.phi<0?1:0,y=Math.tan(e.phi),v=this.b/Math.sqrt(y*y+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),m&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function eT(i,e,t,n){var r;return i<Nt?(n.value=Mr.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=Lr?n.value=Mr.AREA_0:r>Lr&&r<=wt+Lr?(n.value=Mr.AREA_1,r-=wt):r>wt+Lr||r<=-(wt+Lr)?(n.value=Mr.AREA_2,r=r>=0?r-Hs:r+Hs):(n.value=Mr.AREA_3,r+=wt)),r}function b_(i,e){var t=i+e;return t<-Hs?t+=IE:t>+Hs&&(t-=IE),t}var YUe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const ZUe={init:HUe,forward:WUe,inverse:XUe,names:YUe};var BO=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Dw=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],J2e=.8487,Q2e=1.3523,eCe=Rh/5,KUe=1/eCe,Qv=18,eR=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},JUe=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function QUe(i,e,t,n){for(var r=e;n;--n){var s=i(r);if(r-=s,Math.abs(s)<t)break}return r}function eqe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function tqe(i){var e=Vt(i.x-this.long0),t=Math.abs(i.y),n=Math.floor(t*eCe);n<0?n=0:n>=Qv&&(n=Qv-1),t=Rh*(t-KUe*n);var r={x:eR(BO[n],t)*e,y:eR(Dw[n],t)};return i.y<0&&(r.y=-r.y),r.x=r.x*this.a*J2e+this.x0,r.y=r.y*this.a*Q2e+this.y0,r}function iqe(i){var e={x:(i.x-this.x0)/(this.a*J2e),y:Math.abs(i.y-this.y0)/(this.a*Q2e)};if(e.y>=1)e.x/=BO[Qv][0],e.y=i.y<0?-wt:wt;else{var t=Math.floor(e.y*Qv);for(t<0?t=0:t>=Qv&&(t=Qv-1);;)if(Dw[t][0]>e.y)--t;else if(Dw[t+1][0]<=e.y)++t;else break;var n=Dw[t],r=5*(e.y-n[0])/(Dw[t+1][0]-n[0]);r=QUe(function(s){return(eR(n,s)-e.y)/JUe(n,s)},r,Nt,100),e.x/=eR(BO[t],r),e.y=(5*t+r)*pa,i.y<0&&(e.y=-e.y)}return e.x=Vt(e.x+this.long0),e}var nqe=["Robinson","robin"];const rqe={init:eqe,forward:tqe,inverse:iqe,names:nqe};function sqe(){this.name="geocent"}function oqe(i){var e=B2e(i,this.es,this.a);return e}function aqe(i){var e=j2e(i,this.es,this.a,this.b);return e}var lqe=["Geocentric","geocentric","geocent","Geocent"];const uqe={init:sqe,forward:oqe,inverse:aqe,names:lqe};var Ba={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},rw={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function cqe(){if(Object.keys(rw).forEach((function(t){if(typeof this[t]>"u")this[t]=rw[t].def;else{if(rw[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);rw[t].num&&(this[t]=parseFloat(this[t]))}rw[t].degrees&&(this[t]=this[t]*pa)}).bind(this)),Math.abs(Math.abs(this.lat0)-wt)<Nt?this.mode=this.lat0<0?Ba.S_POLE:Ba.N_POLE:Math.abs(this.lat0)<Nt?this.mode=Ba.EQUIT:(this.mode=Ba.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function hqe(i){i.x-=this.long0;var e=Math.sin(i.y),t=Math.cos(i.y),n=Math.cos(i.x),r,s;switch(this.mode){case Ba.OBLIQ:s=this.sinph0*e+this.cosph0*t*n;break;case Ba.EQUIT:s=t*n;break;case Ba.S_POLE:s=-e;break;case Ba.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*t*Math.sin(i.x),this.mode){case Ba.OBLIQ:s*=this.cosph0*e-this.sinph0*t*n;break;case Ba.EQUIT:s*=e;break;case Ba.N_POLE:s*=-(t*n);break;case Ba.S_POLE:s*=t*n;break}var o,a;return o=s*this.cg+r*this.sg,a=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*a,s=o*a,i.x=r*this.a,i.y=s*this.a,i}function dqe(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},t,n,r;r=1/(this.pn1-i.y*this.sw),t=this.pn1*i.x*r,n=this.pn1*i.y*this.cw*r,i.x=t*this.cg+n*this.sg,i.y=n*this.cg-t*this.sg;var s=Xu(i.x,i.y);if(Math.abs(s)<Nt)e.x=0,e.y=i.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Ba.OBLIQ:e.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/s),i.y=(o-this.sinph0*Math.sin(e.y))*s,i.x*=a*this.cosph0;break;case Ba.EQUIT:e.y=Math.asin(i.y*a/s),i.y=o*s,i.x*=a;break;case Ba.N_POLE:e.y=Math.asin(o),i.y=-i.y;break;case Ba.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var fqe=["Tilted_Perspective","tpers"];const pqe={init:cqe,forward:hqe,inverse:dqe,names:fqe};function gqe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function mqe(i){var e=i.x,t=i.y,n,r,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/Xu(this.radius_p*Math.cos(t),Math.sin(t));if(r=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-r)*r-s*s-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;n=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/Xu(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(s/n),i.y=this.radius_g_1*Math.atan(o/Xu(s,n)))}else this.shape==="sphere"&&(n=Math.cos(t),r=Math.cos(e)*n,s=Math.sin(e)*n,o=Math.sin(t),n=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/Xu(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(s/n),i.y=this.radius_g_1*Math.atan(o/Xu(s,n))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function yqe(i){var e=-1,t=0,n=0,r,s,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Xu(1,n)):(t=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Xu(1,t));var l=n/this.radius_p;if(r=t*t+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,n*=a,i.x=Math.atan2(t,e),i.y=Math.atan(n*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+n*n)):(t=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+t*t)),r=t*t+n*n+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,n*=a,i.x=Math.atan2(t,e),i.y=Math.atan(n*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var vqe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const _qe={init:gqe,forward:mqe,inverse:yqe,names:vqe};var Qw=1.340264,eE=-.081106,tE=893e-6,iE=.003796,tR=Math.sqrt(3)/2;function bqe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function xqe(i){var e=Vt(i.x-this.long0),t=i.y,n=Math.asin(tR*Math.sin(t)),r=n*n,s=r*r*r;return i.x=e*Math.cos(n)/(tR*(Qw+3*eE*r+s*(7*tE+9*iE*r))),i.y=n*(Qw+eE*r+s*(tE+iE*r)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function wqe(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var e=1e-9,t=12,n=i.y,r,s,o,a,l,u;for(u=0;u<t&&(r=n*n,s=r*r*r,o=n*(Qw+eE*r+s*(tE+iE*r))-i.y,a=Qw+3*eE*r+s*(7*tE+9*iE*r),n-=l=o/a,!(Math.abs(l)<e));++u);return r=n*n,s=r*r*r,i.x=tR*i.x*(Qw+3*eE*r+s*(7*tE+9*iE*r))/Math.cos(n),i.y=Math.asin(Math.sin(n)/tR),i.x=Vt(i.x+this.long0),i}var Eqe=["eqearth","Equal Earth","Equal_Earth"];const Cqe={init:bqe,forward:xqe,inverse:wqe,names:Eqe};function Sqe(i){i.Proj.projections.add(dA),i.Proj.projections.add(fA),i.Proj.projections.add(TGe),i.Proj.projections.add(FGe),i.Proj.projections.add(GGe),i.Proj.projections.add(WGe),i.Proj.projections.add(QGe),i.Proj.projections.add(r7e),i.Proj.projections.add(u7e),i.Proj.projections.add(p7e),i.Proj.projections.add(L7e),i.Proj.projections.add(N7e),i.Proj.projections.add(G7e),i.Proj.projections.add(X7e),i.Proj.projections.add(Q7e),i.Proj.projections.add(rUe),i.Proj.projections.add(uUe),i.Proj.projections.add(pUe),i.Proj.projections.add(bUe),i.Proj.projections.add(SUe),i.Proj.projections.add(DUe),i.Proj.projections.add(PUe),i.Proj.projections.add(jUe),i.Proj.projections.add(VUe),i.Proj.projections.add(ZUe),i.Proj.projections.add(rqe),i.Proj.projections.add(uqe),i.Proj.projections.add(pqe),i.Proj.projections.add(_qe),i.Proj.projections.add(Cqe)}ea.defaultDatum="WGS84";ea.Proj=jh;ea.WGS84=new ea.Proj("WGS84");ea.Point=H_;ea.toPoint=z2e;ea.defs=rl;ea.nadgrid=R9e;ea.transform=JA;ea.mgrs=q9e;ea.version="__VERSION__";Sqe(ea);var Tqe="Expected a function",L0e=NaN,Aqe="[object Symbol]",Rqe=/^\s+|\s+$/g,kqe=/^[-+]0x[0-9a-f]+$/i,Dqe=/^0b[01]+$/i,Lqe=/^0o[0-7]+$/i,Mqe=parseInt,Iqe=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,Oqe=typeof self=="object"&&self&&self.Object===Object&&self,Pqe=Iqe||Oqe||Function("return this")(),Fqe=Object.prototype,Nqe=Fqe.toString,$qe=Math.max,Bqe=Math.min,LM=function(){return Pqe.Date.now()};function jqe(i,e,t){var n,r,s,o,a,l,u=0,c=!1,h=!1,d=!0;if(typeof i!="function")throw new TypeError(Tqe);e=M0e(e)||0,jO(t)&&(c=!!t.leading,h="maxWait"in t,s=h?$qe(M0e(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function f(D){var R=n,A=r;return n=r=void 0,u=D,o=i.apply(A,R),o}function p(D){return u=D,a=setTimeout(v,e),c?f(D):o}function m(D){var R=D-l,A=D-u,L=e-R;return h?Bqe(L,s-A):L}function y(D){var R=D-l,A=D-u;return l===void 0||R>=e||R<0||h&&A>=s}function v(){var D=LM();if(y(D))return b(D);a=setTimeout(v,m(D))}function b(D){return a=void 0,d&&n?f(D):(n=r=void 0,o)}function x(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0}function w(){return a===void 0?o:b(LM())}function C(){var D=LM(),R=y(D);if(n=arguments,r=this,l=D,R){if(a===void 0)return p(l);if(h)return a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return C.cancel=x,C.flush=w,C}function jO(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function zqe(i){return!!i&&typeof i=="object"}function Gqe(i){return typeof i=="symbol"||zqe(i)&&Nqe.call(i)==Aqe}function M0e(i){if(typeof i=="number")return i;if(Gqe(i))return L0e;if(jO(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=jO(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(Rqe,"");var t=Dqe.test(i);return t||Lqe.test(i)?Mqe(i.slice(2),t?2:8):kqe.test(i)?L0e:+i}var Uqe=jqe;const Bb=Ea(Uqe),tCe=jNe`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow: 0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08), 0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05), 0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`;var $_;class qqe extends Yn{constructor(){super();Tn(this,$_);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this.for="eox-map",this.listDirection="right",this.resultsDirection="down",this.interval=800,this.fetchDebounced=Bb(async()=>{if(!(this._query.length<=2))try{const t=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,r=await(await fetch(encodeURI(t))).json();this._data=r.results}catch{console.log("Error setting up or requesting from geosearch endpoint")}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean}}}async onInput(t){if(this._query=t.target.value,this._query.length==0){this._isListVisible=!1;return}else this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(t){return t==="up"?"top":t==="left"?"left":t==="down"?"bottom":t==="right"?"right":"row"}handleSelect(t){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const n=ki(this,$_).map.getView().getProjection().getCode();let r=ea("EPSG:4326",n,[t.bounds.southwest.lng,t.bounds.southwest.lat]),s=ea("EPSG:4326",n,[t.bounds.northeast.lng,t.bounds.northeast.lat]);const o=[r[0],r[1],s[0],s[1]];ki(this,$_).zoomExtent=o,this.dispatchEvent(new CustomEvent("geosearchSelect",t))}firstUpdated(){da(this,$_,document.querySelector(this.for))}render(){return tt`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&xD}
        ${!this.unstyled&&k2e}
        ${!this.unstyled&&tCe}
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._query.length<=2?tt`<span class="hint"
                  >Enter at least two characters to search</span
                >`:tt``}
            ${this._query.length>=2?this._data.map(t=>tt`
                    <eox-geosearch-item
                      .item="${t}"
                      .onClick="${n=>{this.handleSelect(n)}}"
                      .unstyled=${this.unstyled}
                    />
                  `):tt``}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}$_=new WeakMap;class Vqe extends Yn{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return tt`
      <style>
        ${!this.unstyled&&xD}
        ${!this.unstyled&&tCe}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",qqe);customElements.define("eox-geosearch-item",Vqe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ta=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hqe={attribute:!0,type:String,converter:zNe,reflect:!1,hasChanged:GNe},Wqe=(i=Hqe,e,t)=>{const{kind:n,metadata:r}=t;let s=globalThis.litPropertyMetadata.get(r);if(s===void 0&&globalThis.litPropertyMetadata.set(r,s=new Map),s.set(t.name,i),n==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(n==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+n)};function $t(i){return(e,t)=>typeof t=="object"?Wqe(i,e,t):((n,r,s)=>{const o=r.hasOwnProperty(s);return r.constructor.createProperty(s,o?{...n,wrapped:!0}:n),o?Object.getOwnPropertyDescriptor(r,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ks(i){return $t({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*$l(i,e){if(i!==void 0){let t=0;for(const n of i)yield e(n,t++)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const I0e=(i,e,t)=>{const n=new Map;for(let r=e;r<=t;r++)n.set(i[r],r);return n},FN=_D(class extends bD{constructor(i){if(super(i),i.type!==Bp.CHILD)throw Error("repeat() can only be used in text expressions")}dt(i,e,t){let n;t===void 0?t=e:e!==void 0&&(n=e);const r=[],s=[];let o=0;for(const a of i)r[o]=n?n(a,o):o,s[o]=t(a,o),o++;return{values:s,keys:r}}render(i,e,t){return this.dt(i,e,t).values}update(i,[e,t,n]){const r=qNe(i),{values:s,keys:o}=this.dt(e,t,n);if(!Array.isArray(r))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let u,c,h=0,d=r.length-1,f=0,p=s.length-1;for(;h<=d&&f<=p;)if(r[h]===null)h++;else if(r[d]===null)d--;else if(a[h]===o[f])l[f]=Im(r[h],s[f]),h++,f++;else if(a[d]===o[p])l[p]=Im(r[d],s[p]),d--,p--;else if(a[h]===o[p])l[p]=Im(r[h],s[p]),Zx(i,l[p+1],r[h]),h++,p--;else if(a[d]===o[f])l[f]=Im(r[d],s[f]),Zx(i,r[h],r[d]),d--,f++;else if(u===void 0&&(u=I0e(o,f,p),c=I0e(a,h,d)),u.has(a[h]))if(u.has(a[d])){const m=c.get(o[f]),y=m!==void 0?r[m]:null;if(y===null){const v=Zx(i,r[h]);Im(v,s[f]),l[f]=v}else l[f]=Im(y,s[f]),Zx(i,r[h],y),r[m]=null;f++}else lM(r[d]),d--;else lM(r[h]),h++;for(;f<=p;){const m=Zx(i,l[p+1]);Im(m,s[f]),l[f++]=m}for(;h<=d;){const m=r[h++];m!==null&&lM(m)}return this.ut=o,tN(i,l),Wv}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let zO=class extends bD{constructor(e){if(super(e),this.it=In,e.type!==Bp.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===In||e==null)return this._t=void 0,this.it=e;if(e===Wv)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}};zO.directiveName="unsafeHTML",zO.resultType=1;const wh=_D(zO);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const iCe=Symbol.for(""),Xqe=i=>{if((i==null?void 0:i.r)===iCe)return i==null?void 0:i._$litStatic$},kh=i=>({_$litStatic$:i,r:iCe}),O0e=new Map,Yqe=i=>(e,...t)=>{const n=t.length;let r,s;const o=[],a=[];let l,u=0,c=!1;for(;u<n;){for(l=e[u];u<n&&(s=t[u],(r=Xqe(s))!==void 0);)l+=r+e[++u],c=!0;u!==n&&a.push(s),o.push(l),u++}if(u===n&&o.push(e[n]),c){const h=o.join("$$lit$$");(e=O0e.get(h))===void 0&&(o.raw=o,O0e.set(h,e=o)),t=a}return i(e,...t)},x_=Yqe(tt);(()=>{var i=Object.defineProperty,e=Math.pow,t=(ve,ke,it)=>ke in ve?i(ve,ke,{enumerable:!0,configurable:!0,writable:!0,value:it}):ve[ke]=it,n=(ve,ke,it)=>(t(ve,typeof ke!="symbol"?ke+"":ke,it),it),r=(ve,ke)=>` ${ke&&ke.length>0?ke.map(it=>`<link rel="stylesheet" href="${it}" />`).join(""):""} <style> ${ve} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",c="data",h="min",d="max",f="step",p="round",m="type",y="theme",v="rtl",b="btt",x="disabled",w="keyboard-disabled",C="mousewheel-disabled",D="slider-width",R="slider-height",A="slider-radius",L="slider-bg",O="slider-bg-hover",$="slider-bg-fill",q="pointer-width",M="pointer-height",F="pointer-radius",N="pointer-bg",B="pointer-bg-hover",W="pointer-bg-focus",K="pointer-shadow",ee="pointer-shadow-hover",te="pointer-shadow-focus",le="pointer-border",Q="pointer-border-hover",z="pointer-border-focus",J="animate-onclick",ye="css-links",Ne="vertical",Ge="horizontal",rt=(ve,ke,it,Ke,Et)=>{let Qt=ke-ve;return Qt===0?it:(Ke-it)*(Et-ve)/Qt+it},Be=ve=>!isNaN(parseFloat(ve))&&isFinite(ve),ze=(ve,ke)=>Be(ve)?Number(ve):ke,lt=(ve,ke)=>ke===0?0:Math.round(ve/ke)*ke,xt=(ve,ke=1/0)=>{if(ke===1/0)return ve;let it=e(10,ke);return Math.round(ve*it)/it},Mt=ve=>ve==null?!1:typeof ve=="boolean"?ve:ve.trim().toLowerCase()==="true",Ct=(ve,ke)=>{ve.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:ke}}))},gi=(ve,ke)=>{ve.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:ke}}))},Wt=(ve,ke)=>{ve.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:ke}}))},Qi=(ve,ke)=>{ve.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:ke}}))},He=(ve,ke)=>{if(!ke||ke.length<=0)return;let it=ke.map(Et=>Be(Et)?ze(Et,Et):Et),Ke={values:it||[]};Ke.value=it[0],Ke.value0=it[0],Ke.value1=it[0];for(let Et=1;Et<it.length;Et++)Ke[`value${Et+1}`]=it[Et];ve.dispatchEvent(new CustomEvent("change",{detail:Ke}))},ge=(ve,ke,it)=>{let Ke=0,Et,Qt,Ti,bt,Qe=!1,_i=(yt,cn,Zn,zn,Kn,Pn)=>{let jt=Ke;Zn!==void 0&&yt>Zn&&(yt=Zn),cn!==void 0&&yt<cn&&(yt=cn),Ke=yt;let Yr=Ke;return(zn===Ne&&Pn||zn===Ge&&Kn)&&(Yr=100-Yr),zn===Ne?ke.style.top=`${Yr}%`:ke.style.left=`${Yr}%`,jt!==Ke},bi=yt=>yt===ke||ke.contains(yt),Bt=(yt,cn,Zn,zn)=>{Et=yt,Qt=cn,Ti=Zn,bt=zn},zt=yt=>{Qe=yt,ke.classList.toggle("disabled",Qe),Qe?ke.setAttribute("aria-disabled","true"):ke.hasAttribute("aria-disabled")&&ke.removeAttribute("aria-disabled")},jn=(yt,cn)=>{cn==null?ke.removeAttribute(yt):ke.setAttribute(yt,cn)},Ar=yt=>ke.getAttribute(yt),ci=yt=>{if(!Qe){switch(yt.key){case"ArrowLeft":{yt.preventDefault(),typeof Et=="function"&&Et(it);break}case"ArrowRight":{yt.preventDefault(),typeof Qt=="function"&&Qt(it);break}case"ArrowUp":{yt.preventDefault(),typeof Ti=="function"&&Ti(it);break}case"ArrowDown":{yt.preventDefault(),typeof bt=="function"&&bt(it);break}}Qi(ve,yt)}},Xe=()=>{Qe||Ct(ve,ke)};return ke.className=`pointer pointer-${it}`,ke.addEventListener("keydown",ci),ke.addEventListener("click",Xe),{$pointer:ke,get percent(){return Ke},get disabled(){return Qe},set disabled(yt){zt(yt)},updatePosition:_i,isClicked:bi,setCallbacks:Bt,setAttr:jn,getAttr:Ar,destroy:()=>{ke.removeEventListener("keydown",ci),ke.removeEventListener("click",Xe),ke.remove()}}},se=ve=>{if(ve==null)return;if(Array.isArray(ve))return ve;if(ve.trim()==="")return;let ke=ve.split(","),it=[],Ke=!0;for(let Et=0;Et<ke.length;Et++){let Qt=ke[Et].trim();Qt!==""&&(it.push(Qt),Be(Qt)||(Ke=!1))}return Ke?it.map(Et=>Number(Et)):it},re=(ve,ke)=>ke?ke.findIndex(it=>it===ve||it.toString().trim()===ve.toString().trim()):-1,pe=ve=>({updatePosition:(ke,it,Ke,Et)=>{if(it.length<=0)return;let Qt=it.length===1,Ti=it[0],bt=it[it.length-1];ke===Ne?(ve.style.removeProperty("width"),ve.style.removeProperty("right"),ve.style.removeProperty("left"),Qt?ve.style.height=`${Ti}%`:ve.style.height=`${Math.abs(Ti-bt)}%`,Et?(ve.style.bottom="0%",Qt?ve.style.top="auto":ve.style.top=`${Math.min(100-bt,100-Ti)}%`):(ve.style.bottom="auto",Qt?ve.style.top="0%":ve.style.top=`${Math.min(Ti,bt)}%`)):(ve.style.removeProperty("height"),ve.style.removeProperty("top"),ve.style.removeProperty("bottom"),Qt?ve.style.width=`${Ti}%`:ve.style.width=`${Math.abs(Ti-bt)}%`,Ke?(ve.style.right="0%",Qt?ve.style.left="auto":ve.style.left=`${Math.min(100-bt,100-Ti)}%`):(ve.style.right="auto",Qt?ve.style.left="0%":ve.style.left=`${Math.min(Ti,bt)}%`))}}),I="--animate-onclick",G="--width",Z="--height",ie="--panel-bg-border-radius",me="--panel-bg",_e="--panel-bg-hover",xe="--panel-bg-fill",V="--pointer-width",oe="--pointer-height",fe="--pointer-border-radius",de="--pointer-bg",Te="--pointer-bg-hover",Ae="--pointer-bg-focus",Se="--pointer-shadow",Re="--pointer-shadow-hover",Pe="--pointer-shadow-focus",We="--pointer-border",st="--pointer-border-hover",ot="--pointer-border-focus",It=(ve,ke,it)=>{let Ke=new Map;for(let Et of ve.attributes){let Qt=Et.nodeName.trim().toLowerCase();if(!ke.test(Qt))continue;let Ti=Qt.replace(/\D/g,"").trim(),bt=Ti===""||Ti==="0"||Ti==="1"?0:ze(Ti,0)-1,Qe=it&&typeof it=="function"?it(Et.value):Et.value;Ke.set(bt,Qe)}return Ke},ct=ve=>{if(!ve)return null;let ke=ve.getAttribute(ye);if(!ke)return null;let it=ke.split(";"),Ke=[];for(let Et of it)Et.trim()!==""&&Ke.push(Et.trim());return Ke},Ht=[[G,D,"sliderWidth",null],[Z,R,"sliderHeight",null],[ie,A,"sliderRadius",null],[me,L,"sliderBg",null],[_e,O,"sliderBgHover",null],[xe,$,"sliderBgFill",null],[V,q,"pointer#Width",/^pointer([0-9]*)-width$/],[oe,M,"pointer#Height",/^pointer([0-9]*)-height$/],[fe,F,"pointer#Radius",/^pointer([0-9]*)-radius$/],[de,N,"pointer#Bg",/^pointer([0-9]*)-bg$/],[Te,B,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ae,W,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Se,K,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[Re,ee,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Pe,te,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[We,le,"pointer#Border",/^pointer([0-9]*)-border$/],[st,Q,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ot,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],Yt=(ve,ke,it)=>{let Ke=null,Et=[],Qt=new Map,Ti=(ci,Xe=ke)=>{let yt=[...Xe.classList];for(let cn of yt)cn.startsWith(ci)&&ke.classList.remove(cn)},bt=()=>{Ti("shape");let ci=ke.querySelectorAll(".pointer");for(let Xe of ci)Ti("shape",Xe)},Qe=ci=>{Ke=ci,Ti("theme-"),typeof ci=="string"&&ke.classList.add(`theme-${ci}`)},_i=()=>{if(bt(),!(Et.length<=0)){ke.classList.add("shape",`shape-${Et[0]}`);for(let ci=1;ci<Et.length;ci++){let Xe=Et[ci];if(!Xe)continue;let yt=ke.querySelector(`.pointer-${ci}`);!yt||yt.classList.add("shape",`shape-${Xe}`)}}},bi=(ci,Xe)=>{Et[ci]=Xe,_i()},Bt=()=>{bt();let ci=It(ve,/^pointer([0-9]*)-shape$/);if(!(ci.size<=0)){for(let Xe of ci){let yt=Xe[0];Et[yt]=Xe[1]}_i()}},zt=(ci,Xe)=>`${ci}-${Xe}`,jn=(ci,Xe,yt)=>{let cn=it[yt];if(!cn)return;let Zn=yt===0?ke:cn.$pointer;if(Xe==null){Qt.has(zt(ci,yt))&&Qt.delete(zt(ci,yt)),Zn.style.removeProperty(ci);return}Qt.set(zt(ci,yt),Xe),Zn.style.setProperty(ci,Xe)},Ar=(ci,Xe)=>Qt.get(zt(ci,Xe));return(()=>{for(let ci of Ht){let[Xe,yt,cn,Zn]=ci;if(Zn){let Kn=It(ve,Zn);for(let Pn of Kn){let jt=Pn[0],Yr=Pn[1];jn(Xe,Yr,jt)}}else{let Kn=ve.getAttribute(yt);jn(Xe,Kn,0)}let zn=[];if(cn.indexOf("#")===-1)zn.push([cn,0]);else{zn.push([cn.replace("#",""),0]),zn.push([cn.replace("#","0"),0]),zn.push([cn.replace("#","1"),0]);for(let Kn=1;Kn<it.length;Kn++)zn.push([cn.replace("#",(Kn+1).toString()),Kn])}for(let Kn of zn)try{let Pn=Kn[0],jt=Kn[1];Object.prototype.hasOwnProperty.call(ve,Pn)||Object.defineProperty(ve,Pn,{get(){return Ar(Xe,jt)},set:Yr=>{jn(Xe,Yr,jt)}})}catch(Pn){console.error(Pn)}}Qe(ve.getAttribute(y)),Bt()})(),{setStyle:jn,getStyle:Ar,get theme(){return Ke},set theme(ci){Qe(ci)},get pointerShapes(){return Et},setPointerShape:bi}},St="animate-on-click",ti="range-dragging",Rt=(ve,ke,it,Ke)=>{let Et=[],Qt=bi=>{for(let Bt of Et)Bt.update&&typeof Bt.update=="function"&&Bt.update(bi)},Ti=()=>{for(let bi of Et)bi.destroy&&typeof bi.destroy=="function"&&bi.destroy()},bt=(bi,Bt)=>{for(let zt of Et)zt.onAttrChange&&typeof zt.onAttrChange=="function"&&zt.onAttrChange(bi,Bt)},Qe=bi=>{if(bi.gettersAndSetters){for(let Bt of bi.gettersAndSetters)if(!(!Bt.name||!Bt.attributes))try{Object.prototype.hasOwnProperty.call(ve,Bt.name)||Object.defineProperty(ve,Bt.name,Bt.attributes)}catch(zt){console.error("defineSettersGetters error:",zt)}}},_i=bi=>{var Bt;if(!bi.css)return;let zt=(Bt=ve.shadowRoot)==null?void 0:Bt.querySelector("style");!zt||(zt.innerHTML+=bi.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let bi of window.tcRangeSliderPlugins){let Bt=bi();Et.push(Bt),Bt.init&&typeof Bt.init=="function"&&(Bt.init(ve,ke,it,Ke),Qe(Bt),_i(Bt))}},update:Qt,onAttrChange:bt,destroy:Ti}},xi=10,Mi=20,on=(ve,ke)=>{let it=new Map,Ke=/^value([0-9]*)$/;for(let bt of ve.attributes){let Qe=bt.nodeName.trim().toLowerCase();if(!Ke.test(Qe))continue;let _i=Qe.replace("value","").trim(),bi=_i===""||_i==="0"||_i==="1"?0:ze(_i,0)-1,Bt=Be(bt.value)?ze(bt.value,0):bt.value;it.set(bi,Bt)}let Et=Math.max(...Array.from(it.keys())),Qt=[];Qt.push([ge(ve,ke,0),it.get(0)]);let Ti=ke;for(let bt=1;bt<=Et;bt++){let Qe=ke.cloneNode(!0);Ti.after(Qe),Ti=Qe,Qt.push([ge(ve,Qe,bt),it.get(bt)])}return Qt},en=(ve,ke,it,Ke,Et,Qt,Ti)=>{try{Object.defineProperty(ve,Ke,{configurable:!0,get(){if(!ke)return;let bt=ke.pointers[it];if(!bt)return;let Qe=ke.getTextValue(bt.percent);return Be(Qe)?ze(Qe,Qe):Qe},set:bt=>{ke.pointers[it]?ke==null||ke.setValue(bt,it):ke==null||ke.addPointer(bt)}}),Object.defineProperty(ve,Et,{configurable:!0,get(){var bt,Qe;return(Qe=(bt=ke==null?void 0:ke.pointers[it])==null?void 0:bt.getAttr("aria-label"))!=null?Qe:void 0},set:bt=>{!ke||ke.setAriaLabel(it,bt)}}),Object.defineProperty(ve,Qt,{configurable:!0,get(){var bt,Qe;return(Qe=(bt=ke==null?void 0:ke.styles)==null?void 0:bt.pointerShapes[it])!=null?Qe:null},set:bt=>{!ke||!ke.styles||ke.styles.setPointerShape(it,bt)}}),Object.defineProperty(ve,Ti,{configurable:!0,get(){var bt;return(bt=ke==null?void 0:ke.pointers[it].disabled)!=null?bt:!1},set:bt=>{if(!ke)return;let Qe=ke==null?void 0:ke.pointers[it];!Qe||(Qe.disabled=bt)}})}catch(bt){console.error(bt)}},ri=(ve,ke)=>{let it=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ke=2;Ke<xi;Ke++)it.push([`value${Ke}`,`ariaLabel${Ke}`,`pointer${Ke}Shape`,`pointer${Ke}Disabled`,Ke-1]);for(let Ke of it)en(ve,ke,Ke[4],Ke[0],Ke[1],Ke[2],Ke[3])},Ot=(ve,ke,it)=>{var Ke;let Et=(Ke=it.shadowRoot)==null?void 0:Ke.querySelector(".container");if(Et)for(let Qt of ve)ke?Et.prepend(Qt.$pointer):Et.append(Qt.$pointer)},Si=(ve,ke)=>{if(!(!ke||ve.length<=1)){for(let it of ve)it.$pointer.style.zIndex=Mi.toString();ke.$pointer.style.zIndex=(Mi*2).toString()}},Bn=0,En=100,fn=2,hs="0.3s",pn=(ve,ke,it)=>{let Ke=it.map(Me=>Me[0]),Et=null,Qt=null,Ti=null,bt=null,Qe=Bn,_i=En,bi,Bt,zt=Ge,jn=fn,Ar=!1,ci=!1,Xe=!1,yt=0,cn=1/0,Zn=!1,zn,Kn,Pn=!1,jt=!1,Yr=!1,gs=hs,ms=[],Js=Me=>{Pn||(Me.preventDefault&&Me.preventDefault(),ra(Me),window.addEventListener("mousemove",ra),window.addEventListener("mouseup",po),gi(ve,Me))},po=Me=>{Pn||(zn=void 0,Kn=void 0,window.removeEventListener("mousemove",ra),window.removeEventListener("mouseup",po),gs&&ke.classList.add(St),Wt(ve,Me))},na=(Me,vt)=>{if(Ke.length<=0)return;if(Ke.length===1)return Ke[0].isClicked(Me)&&gs&&ke.classList.remove(St),Ke[0];let ei=go(Me);if(Zn){let Xi=vt,ks=gl(Xi);ks!==void 0&&(Xi=lt(Xi,ks)),ei?(zn=Xi,Kn=0,gs&&ke.classList.remove(St)):zn!==void 0&&(Kn=Xi-zn,zn=Xi)}if(!Fo(Me)&&!ei){for(let Xi of Ke)if(!(!Xi.isClicked(Me)||Xi.disabled))return gs&&ke.classList.remove(St),Xi;for(let Xi of Ke)if(Et===Xi)return Xi}let Fn=1/0,vr=null;for(let Xi of Ke){if(Xi.disabled)continue;let ks=Math.abs(vt-Xi.percent);ks<Fn&&(Fn=ks,vr=Xi)}return vr},Za=()=>Ke.findIndex(Me=>Et===Me&&!Me.disabled),ra=Me=>{let vt;if(zt===Ne){let{height:Fn,top:vr}=ke.getBoundingClientRect(),Xi=Me.type.indexOf("mouse")!==-1?Me.clientY:Me.touches[0].clientY;vt=Math.min(Math.max(0,Xi-vr),Fn)*100/Fn}else{let{width:Fn,left:vr}=ke.getBoundingClientRect(),Xi=Me.type.indexOf("mouse")!==-1?Me.clientX:Me.touches[0].clientX;vt=Math.min(Math.max(0,Xi-vr),Fn)*100/Fn}if((Ar||ci)&&(vt=100-vt),Et=na(Me.target,vt),Et&&Si(Ke,Et),Zn&&Ke.length>1&&Kn!==void 0){let Fn=Ke[0],vr=Ke[Ke.length-1],Xi=Fn.percent+Kn<0,ks=vr.percent+Kn>100;if(Xi||ks)return;for(let oh=0;oh<Ke.length;oh++)Sn(oh,Ke[oh].percent+Kn);return}let ei=Za();ei!==-1&&(Sn(ei,vt),Et==null||Et.$pointer.focus())},Qs=Me=>{if(Pn||document.activeElement!==ve||Et!=null&&Et.disabled)return;Me.stopPropagation(),Me.preventDefault();let vt=Me.deltaY<0,ei=Ar||ci,Fn=vt?!ei:ei,vr=Za();vr!==-1&&(Fn?mo(vr,Ke[vr].percent):yo(vr,Ke[vr].percent))},Ka=Me=>{Pn||jt||(zt===Ne?ci?Sn(Me,100):Sn(Me,0):Ar?yo(Me,Ke[Me].percent):mo(Me,Ke[Me].percent))},sa=Me=>{Pn||jt||(zt===Ne?ci?Sn(Me,0):Sn(Me,100):Ar?mo(Me,Ke[Me].percent):yo(Me,Ke[Me].percent))},Nr=Me=>{Pn||jt||(zt===Ne?ci?yo(Me,Ke[Me].percent):mo(Me,Ke[Me].percent):Ar?Sn(Me,100):Sn(Me,0))},oa=Me=>{Pn||jt||(zt===Ne?ci?mo(Me,Ke[Me].percent):yo(Me,Ke[Me].percent):Ar?Sn(Me,0):Sn(Me,100))},Fo=Me=>Me.classList.contains("panel"),go=Me=>Me.classList.contains("panel-fill"),mo=(Me,vt)=>{if(vt===void 0)return;let ei=gl(vt);ei==null&&(ei=1),vt-=ei,vt<0&&(vt=0),Sn(Me,vt)},yo=(Me,vt)=>{if(vt===void 0)return;let ei=gl(vt);ei==null&&(ei=1),vt+=ei,vt>100&&(vt=100),Sn(Me,vt)},aa=()=>{!bt||bt.update({percents:eo(),values:la(),$pointers:ys(),min:yl(),max:iu(),data:_o(),step:ml(),round:ne(),type:ae(),textMin:vo(),textMax:$o(),rightToLeft:Xt(),bottomToTop:Oi(),pointersOverlap:kn(),pointersMinDistance:Ie(),pointersMaxDistance:Je(),rangeDragging:vs(),disabled:hn(),keyboardDisabled:Rn(),mousewheelDisabled:Cn()})},Mu=()=>{aa()},No=Me=>{if(!(Xe||Ke.length<=1||_i===Qe))if(Me===0){let vt=cn*100/(_i-Qe);return Math.max(0,Ke[Me+1].percent-vt)}else{let vt=yt*100/(_i-Qe);return Math.min(Ke[Me-1].percent+vt,100)}},eu=Me=>{if(!(Xe||Ke.length<=1||_i===Qe))if(Me===Ke.length-1){let vt=cn*100/(_i-Qe);return Math.min(Ke[Me-1].percent+vt,100)}else{let vt=yt*100/(_i-Qe);return Math.max(0,Ke[Me+1].percent-vt)}},gl=Me=>{let vt;if(typeof bi=="function"){let ei=rt(0,100,Qe,_i,Me);vt=bi(ei,Me)}else vt=bi;if(Be(vt)){let ei=_i-Qe;return vt=ei===0?0:vt*100/ei,vt}},Rr=Me=>{if(Me===void 0)return;let vt=rt(0,100,Qe,_i,Me);return Bt!==void 0?Bt[Math.round(vt)]:xt(vt,jn)},vo=()=>Bt!==void 0?Bt[Qe]:Qe,$o=()=>Bt!==void 0?Bt[_i]:_i,ml=()=>bi,tu=Me=>{var vt;return Me<=0||Xe?vo():(vt=Rr(Ke[Me-1].percent))!=null?vt:""},Ja=Me=>{var vt;return Ke.length<=1||Me>=Ke.length-1||Xe?$o():(vt=Rr(Ke[Me+1].percent))!=null?vt:""},eo=()=>Ke.map(Me=>Me.percent),la=()=>Ke.map(Me=>Rr(Me.percent)),ys=()=>Ke.map(Me=>Me.$pointer),yl=()=>Qe,iu=()=>_i,_o=()=>Bt,ae=()=>zt,ne=()=>jn,Ie=()=>yt,Je=()=>cn,Zt=Me=>ms[Me],Xt=()=>Ar,Oi=()=>ci,hn=()=>Pn,Rn=()=>jt,Cn=()=>Yr,kn=()=>Xe,vs=()=>Zn,Sn=(Me,vt)=>{if(vt===void 0)return;let ei=gl(vt);ei!==void 0&&(vt=lt(vt,ei));let Fn=Ke[Me];if(!Fn)return;let vr=Fn.updatePosition(vt,No(Me),eu(Me),zt,Ar,ci);Qt==null||Qt.updatePosition(zt,Ke.map(Xi=>Xi.percent),Ar,ci),aa();for(let Xi of Ke){let ks=Rr(Xi.percent);ks!==void 0&&(Xi.setAttr("aria-valuenow",ks.toString()),Xi.setAttr("aria-valuetext",ks.toString()))}Da(),vr&&He(ve,Ke.map(Xi=>Rr(Xi.percent)))},$r=()=>{for(let Me=0;Me<Ke.length;Me++)Sn(Me,Ke[Me].percent)},bo=(Me,vt)=>{Qe=Bt!==void 0?0:ze(Me,Bn),_i=Bt!==void 0?Bt.length-1:ze(vt,En),As(Qe),Rs(_i)},Da=()=>{var Me,vt;for(let ei=0;ei<Ke.length;ei++){let Fn=Ke[ei];Fn.setAttr("aria-valuemin",((Me=tu(ei))!=null?Me:"").toString()),Fn.setAttr("aria-valuemax",((vt=Ja(ei))!=null?vt:"").toString())}},As=Me=>{Qe=ze(Me,Bn),Qe>_i&&(_i=Qe+En),$r()},Rs=Me=>{_i=ze(Me,En),_i<Qe&&(_i=Qe+En),$r()},vl=Me=>{Xe=!0;for(let vt=0;vt<Me.length;vt++)hr(Me[vt],vt);Xe=!1;for(let vt=0;vt<Me.length;vt++)hr(Me[vt],vt)},hr=(Me,vt)=>{let ei;Bt!==void 0?(ei=Me==null?0:re(Me,Bt),ei===-1&&(ei=0)):(ei=ze(Me,Qe),ei<Qe&&(ei=Qe),ei>_i&&(ei=_i));let Fn=rt(Qe,_i,0,100,ei);Sn(vt,Fn)},_l=Me=>{if(Me==null){bi=void 0;return}if(typeof Me=="function"){bi=Me,$r();return}if(Be(Me)){bi=ze(Me,1);let vt=Math.abs(_i-Qe);bi>vt&&(bi=void 0),$r();return}bi=void 0},pd=Me=>{Xe=Me,$r()},Iu=Me=>{(!Be(Me)||Me<0)&&(Me=0),yt=Me},gd=Me=>{(!Be(Me)||Me<0)&&(Me=1/0),cn=Me},Uf=Me=>{Pn=Me,ke.classList.toggle("disabled",Pn),Pn?ke.setAttribute("aria-disabled","true"):ke.hasAttribute("aria-disabled")&&ke.removeAttribute("aria-disabled")},md=Me=>{jt=Me},qf=Me=>{Yr=Me,Yr?document.removeEventListener("wheel",Qs):document.addEventListener("wheel",Qs,{passive:!1})},Vf=Me=>{if(Me==null){Bt=void 0;return}if(Bt=se(Me),Bt===void 0||Bt.length<=0){Bt=void 0;return}As(0),Rs(Bt.length-1),bi===void 0&&_l(1)},Hf=Me=>{var vt;typeof Me=="string"?zt=Me.trim().toLowerCase()===Ne?Ne:Ge:zt=Ge;let ei=(vt=ve.shadowRoot)==null?void 0:vt.querySelector(".range-slider-box");if(!ei)return;ei.className=`range-slider-box type-${zt}`,$r();let Fn=zt===Ne?"vertical":"horizontal";for(let vr of Ke)vr.setAttr("aria-orientation",Fn)},yd=Me=>{Ar=Me,Ke.length>1&&Ot(Ke,Ar,ve),$r(),aa()},vd=Me=>{ci=Me,Ke.length>1&&Ot(Ke,ci,ve),$r(),aa()},Wf=Me=>{jn=ze(Me,fn),jn<0&&(jn=fn),aa()},hc=Me=>{Me==null||Me.toString().trim().toLowerCase()==="false"?(gs=void 0,ke.style.removeProperty(I),ke.classList.remove(St)):(gs=Me.toString(),ke.style.setProperty(I,gs),ke.classList.add(St))},Qa=(Me,vt)=>{let ei=Ke[Me];!ei||(ei.setAttr("aria-label",vt),ms[Me]=vt)},Ou=Me=>{if(zn=void 0,Ke.length<=1){Zn=!1,ke.classList.remove(ti);return}Zn=Me,ke.classList.toggle(ti,Zn)},Xf=()=>{Uf(Mt(ve.getAttribute(x))),jt=Mt(ve.getAttribute(w)),Yr=Mt(ve.getAttribute(C));let Me=It(ve,/^pointer([0-9]*)-disabled$/,vt=>Mt(vt));for(let vt of Me){let ei=vt[0];!Ke[ei]||(Ke[ei].disabled=vt[1])}},tm=()=>{let Me=It(ve,/^aria-label([0-9]*)$/);for(let vt of Me){let ei=vt[0];Qa(ei,vt[1])}},el=Me=>{let vt=Ke.length,ei=Ke[vt-1].$pointer,Fn=ei.cloneNode(!0);ei.after(Fn);let vr=ge(ve,Fn,vt);return vr.setCallbacks(Ka,sa,Nr,oa),Ke.push(vr),hr(Me,vt),$r(),aa(),vt},Pu=()=>{let Me=Ke.length,vt=Ke[Me-1];return vt?(vt.destroy(),Ke.pop(),Ke.length<=1&&Ou(!1),$r(),aa(),Me-1):-1};return(()=>{var Me,vt;for(let Fn of Ke)Fn.setCallbacks(Ka,sa,Nr,oa);let ei=(Me=ve.shadowRoot)==null?void 0:Me.querySelector(".panel-fill");ei&&(Qt=pe(ei)),Hf(ve.getAttribute(m)),yd(Mt(ve.getAttribute(v))),vd(Mt(ve.getAttribute(b))),bo(ve.getAttribute(h),ve.getAttribute(d)),_l(ve.getAttribute(f)),Vf(ve.getAttribute(c)),vl(it.map(Fn=>Fn[1])),pd(Mt(ve.getAttribute(o))),Iu(ze(ve.getAttribute(a),0)),gd(ze(ve.getAttribute(l),1/0)),Ou(Mt(ve.getAttribute(u))),Wf(ze(ve.getAttribute(p),fn)),Xf(),tm(),Ti=Yt(ve,ke,Ke),hc((vt=ve.getAttribute(J))!=null?vt:hs),ke.addEventListener("mousedown",Js),ke.addEventListener("mouseup",po),ke.addEventListener("touchmove",ra),ke.addEventListener("touchstart",ra),Yr||document.addEventListener("wheel",Qs,{passive:!1}),bt=Rt(ve,Mu,{setValues:vl,setMin:As,setMax:Rs,setStep:_l,setPointersOverlap:pd,setPointersMinDistance:Iu,setPointersMaxDistance:gd,setDisabled:Uf,setType:Hf,setRightToLeft:yd,setBottomToTop:vd,setRound:Wf,setKeyboardDisabled:md,setMousewheelDisabled:qf,setRangeDragging:Ou,setData:Vf},{getPercents:eo,getValues:la,getPointerElements:ys,getMin:yl,getMax:iu,getStep:ml,getData:_o,getType:ae,getRound:ne,getTextMin:vo,getTextMax:$o,isRightToLeft:Xt,isBottomToTop:Oi,isDisabled:hn,isKeyboardDisabled:Rn,isMousewheelDisabled:Cn,isPointersOverlap:kn,isRangeDraggingEnabled:vs,getPointersMinDistance:Ie,getPointersMaxDistance:Je}),bt.init()})(),{get pointers(){return Ke},get styles(){return Ti},get pluginsManager(){return bt},get min(){return vo()},get max(){return $o()},get step(){return ml()},get pointersOverlap(){return kn()},set pointersOverlap(Me){pd(Me)},get pointersMinDistance(){return Ie()},set pointersMinDistance(Me){Iu(Me)},get pointersMaxDistance(){return Je()},set pointersMaxDistance(Me){gd(Me)},get disabled(){return hn()},set disabled(Me){Uf(Me)},get data(){return _o()},get type(){return ae()},set type(Me){Hf(Me)},get rightToLeft(){return Xt()},set rightToLeft(Me){yd(Me)},get bottomToTop(){return Oi()},set bottomToTop(Me){vd(Me)},get round(){return ne()},set round(Me){Wf(Me)},get animateOnClick(){return gs},set animateOnClick(Me){hc(Me)},get keyboardDisabled(){return Rn()},set keyboardDisabled(Me){md(Me)},get mousewheelDisabled(){return Cn()},set mousewheelDisabled(Me){qf(Me)},get rangeDragging(){return vs()},set rangeDragging(Me){Ou(Me)},setMin:As,setMax:Rs,setValue:hr,setStep:_l,setData:Vf,getTextValue:Rr,setAriaLabel:Qa,getAriaLabel:Zt,addPointer:el,removePointer:Pu,destroy:()=>{ke.removeEventListener("mousedown",Js),ke.removeEventListener("mouseup",po),ke.removeEventListener("touchmove",ra),ke.removeEventListener("touchstart",ra),document.removeEventListener("wheel",Qs);for(let Me of Ke)Me.destroy();bt==null||bt.destroy()}}},zs=(ve,ke,it)=>{let Ke=Ht.find(([bt,Qe,_i,bi])=>Qe.replace("#","")===ke.replace(/\d+/g,""));if(Ke&&ve.styles){let[bt,Qe,_i,bi]=Ke,Bt=ke.replace(/\D/g,"").trim(),zt=Bt===""||Bt==="0"||Bt==="1"?0:ze(Bt,0)-1;ve.styles.setStyle(bt,it,zt);return}switch(ve&&ve.pluginsManager&&ve.pluginsManager.onAttrChange(ke,it),ke){case h:{ve.setMin(it);break}case d:{ve.setMax(it);break}case f:{ve.setStep(it);break}case o:{ve.pointersOverlap=Mt(it);break}case a:{ve.pointersMinDistance=ze(it,0);break}case u:{ve.rangeDragging=Mt(it);break}case l:{ve.pointersMaxDistance=ze(it,1/0);break}case x:{ve.disabled=Mt(it);break}case w:{ve.keyboardDisabled=Mt(it);break}case C:{ve.mousewheelDisabled=Mt(it);break}case c:{ve.setData(it);break}case m:{ve.type=it;break}case v:{ve.rightToLeft=Mt(it);break}case b:{ve.bottomToTop=Mt(it);break}case p:{ve.round=ze(it,fn);break}case y:{ve.styles&&(ve.styles.theme=it);break}case J:{ve.animateOnClick=it;break}}let Et=null;if(/^value([0-9]*)$/.test(ke)&&(Et="value"),/^pointer([0-9]*)-disabled$/.test(ke)&&(Et="pointer-disabled"),/^aria-label([0-9]*)$/.test(ke)&&(Et="aria-label"),/^pointer([0-9]*)-shape$/.test(ke)&&(Et="pointer-shape"),!Et)return;let Qt=ke.replace(/\D/g,"").trim(),Ti=Qt===""||Qt==="0"||Qt==="1"?0:ze(Qt,0)-1;switch(Et){case"value":{ve.setValue(it,Ti);break}case"pointer-disabled":{let bt=ve==null?void 0:ve.pointers[Ti];if(!bt)return;bt.disabled=Mt(it);break}case"aria-label":{ve.setAriaLabel(Ti,it);break}case"pointer-shape":{ve.styles&&ve.styles.setPointerShape(Ti,it);break}}},Ii=class extends HTMLElement{constructor(){super(),n(this,"slider"),n(this,"_externalCSSList",[]),n(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ve){this.slider&&this.slider.setStep(ve)}get step(){var ve;return(ve=this.slider)==null?void 0:ve.step}set disabled(ve){this.slider&&(this.slider.disabled=ve)}get disabled(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.disabled)!=null?ke:!1}set data(ve){var ke;(ke=this.slider)==null||ke.setData(ve)}get data(){var ve;return(ve=this.slider)==null?void 0:ve.data}set min(ve){var ke;(ke=this.slider)==null||ke.setMin(ve)}get min(){var ve;return(ve=this.slider)==null?void 0:ve.min}set max(ve){var ke;(ke=this.slider)==null||ke.setMax(ve)}get max(){var ve;return(ve=this.slider)==null?void 0:ve.max}set round(ve){!this.slider||(this.slider.round=ve)}get round(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.round)!=null?ke:fn}set type(ve){!this.slider||(this.slider.type=ve??Ge)}get type(){var ve;return((ve=this.slider)==null?void 0:ve.type)||Ge}set pointersOverlap(ve){!this.slider||(this.slider.pointersOverlap=ve)}get pointersOverlap(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.pointersOverlap)!=null?ke:!1}set pointersMinDistance(ve){!this.slider||(this.slider.pointersMinDistance=ve)}get pointersMinDistance(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.pointersMinDistance)!=null?ke:0}set pointersMaxDistance(ve){!this.slider||(this.slider.pointersMaxDistance=ve)}get pointersMaxDistance(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.pointersMaxDistance)!=null?ke:1/0}set theme(ve){!this.slider||!this.slider.styles||(this.slider.styles.theme=ve)}get theme(){var ve,ke,it;return(it=(ke=(ve=this.slider)==null?void 0:ve.styles)==null?void 0:ke.theme)!=null?it:null}set rtl(ve){!this.slider||(this.slider.rightToLeft=ve)}get rtl(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.rightToLeft)!=null?ke:!1}set btt(ve){!this.slider||(this.slider.bottomToTop=ve)}get btt(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.bottomToTop)!=null?ke:!1}set keyboardDisabled(ve){!this.slider||(this.slider.keyboardDisabled=ve)}get keyboardDisabled(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.keyboardDisabled)!=null?ke:!1}set mousewheelDisabled(ve){!this.slider||(this.slider.mousewheelDisabled=ve)}get mousewheelDisabled(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.mousewheelDisabled)!=null?ke:!1}set animateOnClick(ve){!this.slider||(this.slider.animateOnClick=ve)}get animateOnClick(){var ve;return(ve=this.slider)==null?void 0:ve.animateOnClick}get rangeDragging(){var ve,ke;return(ke=(ve=this.slider)==null?void 0:ve.rangeDragging)!=null?ke:!1}set rangeDragging(ve){this.slider&&(this.slider.rangeDragging=Mt(ve))}get externalCSSList(){return this._externalCSSList}addPointer(ve){var ke,it;if(!this.slider)return;let Ke=(it=(ke=this.slider)==null?void 0:ke.addPointer(ve))!=null?it:0;en(this,this.slider,Ke,`value${Ke+1}`,`ariaLabel${Ke+1}`,`pointerShape${Ke+1}`,`pointer${Ke+1}Disabled`)}removePointer(){var ve;!this.slider||(ve=this.slider)==null||ve.removePointer()}addCSS(ve){if(!this.shadowRoot)return;let ke=document.createElement("style");ke.textContent=ve,this.shadowRoot.appendChild(ke)}connectedCallback(){var ve,ke;if(!this.shadowRoot)return;this._externalCSSList=ct(this),this.shadowRoot.innerHTML=r(s,this._externalCSSList);let it=(ve=this.shadowRoot)==null?void 0:ve.querySelector(".pointer");if(!it)return;let Ke=(ke=this.shadowRoot)==null?void 0:ke.getElementById("range-slider");if(!Ke)return;let Et=on(this,it);this.slider=pn(this,Ke,Et),ri(this,this.slider),this._observer=new MutationObserver(Qt=>{Qt.forEach(Ti=>{var bt;if(!this.slider||Ti.type!=="attributes")return;let Qe=Ti.attributeName;!Qe||zs(this.slider,Qe,(bt=this.getAttribute(Qe))!=null?bt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},fo=Ii;window.tcRangeSlider=fo,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",fo),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends fo{})})();var nCe={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Jr,function(){var t=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var N=["th","st","nd","rd"],B=F%100;return"["+F+(N[(B-20)%10]||N[B]||N[0])+"]"}},x=function(F,N,B){var W=String(F);return!W||W.length>=N?F:""+Array(N+1-W.length).join(B)+F},w={s:x,z:function(F){var N=-F.utcOffset(),B=Math.abs(N),W=Math.floor(B/60),K=B%60;return(N<=0?"+":"-")+x(W,2,"0")+":"+x(K,2,"0")},m:function F(N,B){if(N.date()<B.date())return-F(B,N);var W=12*(B.year()-N.year())+(B.month()-N.month()),K=N.clone().add(W,h),ee=B-K<0,te=N.clone().add(W+(ee?-1:1),h);return+(-(W+(B-K)/(ee?K-te:te-K))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:h,y:f,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:d}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},C="en",D={};D[C]=b;var R="$isDayjsObject",A=function(F){return F instanceof q||!(!F||!F[R])},L=function F(N,B,W){var K;if(!N)return C;if(typeof N=="string"){var ee=N.toLowerCase();D[ee]&&(K=ee),B&&(D[ee]=B,K=ee);var te=N.split("-");if(!K&&te.length>1)return F(te[0])}else{var le=N.name;D[le]=N,K=le}return!W&&K&&(C=K),K||!W&&C},O=function(F,N){if(A(F))return F.clone();var B=typeof N=="object"?N:{};return B.date=F,B.args=arguments,new q(B)},$=w;$.l=L,$.i=A,$.w=function(F,N){return O(F,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var q=function(){function F(B){this.$L=L(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[R]=!0}var N=F.prototype;return N.parse=function(B){this.$d=function(W){var K=W.date,ee=W.utc;if(K===null)return new Date(NaN);if($.u(K))return new Date;if(K instanceof Date)return new Date(K);if(typeof K=="string"&&!/Z$/i.test(K)){var te=K.match(y);if(te){var le=te[2]-1||0,Q=(te[7]||"0").substring(0,3);return ee?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,Q)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,Q)}}return new Date(K)}(B),this.init()},N.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},N.$utils=function(){return $},N.isValid=function(){return this.$d.toString()!==m},N.isSame=function(B,W){var K=O(B);return this.startOf(W)<=K&&K<=this.endOf(W)},N.isAfter=function(B,W){return O(B)<this.startOf(W)},N.isBefore=function(B,W){return this.endOf(W)<O(B)},N.$g=function(B,W,K){return $.u(B)?this[W]:this.set(K,B)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(B,W){var K=this,ee=!!$.u(W)||W,te=$.p(B),le=function(Be,ze){var lt=$.w(K.$u?Date.UTC(K.$y,ze,Be):new Date(K.$y,ze,Be),K);return ee?lt:lt.endOf(u)},Q=function(Be,ze){return $.w(K.toDate()[Be].apply(K.toDate("s"),(ee?[0,0,0,0]:[23,59,59,999]).slice(ze)),K)},z=this.$W,J=this.$M,ye=this.$D,Ne="set"+(this.$u?"UTC":"");switch(te){case f:return ee?le(1,0):le(31,11);case h:return ee?le(1,J):le(0,J+1);case c:var Ge=this.$locale().weekStart||0,rt=(z<Ge?z+7:z)-Ge;return le(ee?ye-rt:ye+(6-rt),J);case u:case p:return Q(Ne+"Hours",0);case l:return Q(Ne+"Minutes",1);case a:return Q(Ne+"Seconds",2);case o:return Q(Ne+"Milliseconds",3);default:return this.clone()}},N.endOf=function(B){return this.startOf(B,!1)},N.$set=function(B,W){var K,ee=$.p(B),te="set"+(this.$u?"UTC":""),le=(K={},K[u]=te+"Date",K[p]=te+"Date",K[h]=te+"Month",K[f]=te+"FullYear",K[l]=te+"Hours",K[a]=te+"Minutes",K[o]=te+"Seconds",K[s]=te+"Milliseconds",K)[ee],Q=ee===u?this.$D+(W-this.$W):W;if(ee===h||ee===f){var z=this.clone().set(p,1);z.$d[le](Q),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else le&&this.$d[le](Q);return this.init(),this},N.set=function(B,W){return this.clone().$set(B,W)},N.get=function(B){return this[$.p(B)]()},N.add=function(B,W){var K,ee=this;B=Number(B);var te=$.p(W),le=function(J){var ye=O(ee);return $.w(ye.date(ye.date()+Math.round(J*B)),ee)};if(te===h)return this.set(h,this.$M+B);if(te===f)return this.set(f,this.$y+B);if(te===u)return le(1);if(te===c)return le(7);var Q=(K={},K[a]=n,K[l]=r,K[o]=t,K)[te]||1,z=this.$d.getTime()+B*Q;return $.w(z,this)},N.subtract=function(B,W){return this.add(-1*B,W)},N.format=function(B){var W=this,K=this.$locale();if(!this.isValid())return K.invalidDate||m;var ee=B||"YYYY-MM-DDTHH:mm:ssZ",te=$.z(this),le=this.$H,Q=this.$m,z=this.$M,J=K.weekdays,ye=K.months,Ne=K.meridiem,Ge=function(ze,lt,xt,Mt){return ze&&(ze[lt]||ze(W,ee))||xt[lt].slice(0,Mt)},rt=function(ze){return $.s(le%12||12,ze,"0")},Be=Ne||function(ze,lt,xt){var Mt=ze<12?"AM":"PM";return xt?Mt.toLowerCase():Mt};return ee.replace(v,function(ze,lt){return lt||function(xt){switch(xt){case"YY":return String(W.$y).slice(-2);case"YYYY":return $.s(W.$y,4,"0");case"M":return z+1;case"MM":return $.s(z+1,2,"0");case"MMM":return Ge(K.monthsShort,z,ye,3);case"MMMM":return Ge(ye,z);case"D":return W.$D;case"DD":return $.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return Ge(K.weekdaysMin,W.$W,J,2);case"ddd":return Ge(K.weekdaysShort,W.$W,J,3);case"dddd":return J[W.$W];case"H":return String(le);case"HH":return $.s(le,2,"0");case"h":return rt(1);case"hh":return rt(2);case"a":return Be(le,Q,!0);case"A":return Be(le,Q,!1);case"m":return String(Q);case"mm":return $.s(Q,2,"0");case"s":return String(W.$s);case"ss":return $.s(W.$s,2,"0");case"SSS":return $.s(W.$ms,3,"0");case"Z":return te}return null}(ze)||te.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(B,W,K){var ee,te=this,le=$.p(W),Q=O(B),z=(Q.utcOffset()-this.utcOffset())*n,J=this-Q,ye=function(){return $.m(te,Q)};switch(le){case f:ee=ye()/12;break;case h:ee=ye();break;case d:ee=ye()/3;break;case c:ee=(J-z)/6048e5;break;case u:ee=(J-z)/864e5;break;case l:ee=J/r;break;case a:ee=J/n;break;case o:ee=J/t;break;default:ee=J}return K?ee:$.a(ee)},N.daysInMonth=function(){return this.endOf(h).$D},N.$locale=function(){return D[this.$L]},N.locale=function(B,W){if(!B)return this.$L;var K=this.clone(),ee=L(B,W,!0);return ee&&(K.$L=ee),K},N.clone=function(){return $.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},F}(),M=q.prototype;return O.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",f],["$D",p]].forEach(function(F){M[F[1]]=function(N){return this.$g(N,F[0],F[1])}}),O.extend=function(F,N){return F.$i||(F(N,q,O),F.$i=!0),O},O.locale=L,O.isDayjs=A,O.unix=function(F){return O(1e3*F)},O.en=D[C],O.Ls=D,O.p={},O})})(nCe);var Zqe=nCe.exports;const rf=Ea(Zqe);class NN extends Yn{constructor(){super(...arguments),this.templates={},this._renderedTemplates={}}setBindingSyntax(e,t){this._startExpression=e,this._endExpression=t;const n=this.escapeRegex(this._startExpression),r=this.escapeRegex(this._endExpression);this._expression=new RegExp(`${n}\\s*([$\\w\\.,'"\\s()\\[\\]]+)\\s*${r}`,"g")}hasTemplate(e){return this.templates&&!!this.templates[e]}renderTemplate(e,t,n){if(!this.hasTemplate(e))return null;n=n||e;const r=tt` <slot name=${n}></slot> `,s={[e]:{...t}};if(this._renderedTemplates.hasOwnProperty(n)){const{slot:a}=this._renderedTemplates[n];this.contains(a)&&this.removeChild(a)}const o=document.createElement("div");return o.slot=n,o.dataset.generated="template",this._renderTemplate(o,this.templates[e],s),this.appendChild(o),this._renderedTemplates[n]={context:s,slot:o},r}getTemplates(){const e={};for(let t=0;t<this.children.length;t++){const n=this.children[t];if(n.nodeName==="RENDER-TEMPLATE"){const r=n;r.dataset.type?e[r.dataset.type]=r:e.default=r,r.templateOrder=t}}return e}_renderTemplate(e,t,n){let r;if(t&&t.childNodes.length){const s=t.cloneNode(!0);r=this.renderNode(s,e,n)}r&&e.appendChild(r)}expandExpressionsAsString(e,t){return e.replace(this.expression,(n,r)=>{const s=this.evalInContext(r||this.trimExpression(n),t);return s?typeof s=="object"?JSON.stringify(s):s.toString():""})}get expression(){return this._expression||this.setBindingSyntax("{{","}}"),this._expression}escapeRegex(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}evalInContext(e,t){t={...t};const n=new Function("with(this) { return "+e+";}");let r;try{r=n.call(t)}catch{}return r}trimExpression(e){return e=e.trim(),e.startsWith(this._startExpression)&&e.endsWith(this._endExpression)&&(e=e.substr(this._startExpression.length,e.length-this._startExpression.length-this._endExpression.length),e=e.trim()),e}renderNode(e,t,n){if(e.nodeName==="#text")return e.textContent=this.expandExpressionsAsString(e.textContent,n),e;if(e.nodeName==="TEMPLATE")return e.$parentTemplateContext=n,e;for(let r=0;r<e.childNodes.length;r++){const s=e.childNodes[r];this.renderNode(s,t,n)}return e}firstUpdated(){this.templates=this.getTemplates()}}const $N=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
details {
  width: 100%;
}
`,Q0=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,CD=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,BN=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,jN=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`,zN=`
* {
  font-family: Roboto, sans-serif;
}

${Q0}
${CD}
${BN}
${jN}

ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  position: absolute;
  right: 8px;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
}
[data-type=filter] .title,
details summary {
  text-transform: capitalize;
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid #0004;
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul li {
  padding: 5px 10px;
}
li.highlighted {
  background: #00417011;
}
section {
  position: relative;
}
button#filter-reset {
  position: absolute;
  top: 4px;
  right: 0;
}
.scroll {
  max-height: calc(100% - 30px);
  overflow-x: hidden;
  overflow-y: auto;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range {
  display: flex;
  align-items: center;
  padding: .5rem 0;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before {
  margin-right: .5rem;
}
.range-after {
  margin-left: .5rem;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: 1px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 16px;
  width: 16px;
}
  `;var Kqe=Object.defineProperty,Jqe=Object.getOwnPropertyDescriptor,GN=(i,e,t,n)=>{for(var r=n>1?void 0:n?Jqe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&Kqe(e,t,r),r};let iR=class extends Yn{handleDetailsToggle(i){this.dispatchEvent(new CustomEvent("details-toggled",{detail:i,bubbles:!0,composed:!0}))}_resetFilter(){this.querySelector("[slot='filter']").reset()}render(){return tt`
      <style>
        ${$N}
        ${!this.unstyled&&zN}
      </style>
      <details
        @toggle="${this.handleDetailsToggle}"
        class="details-filter"
        part="details-filter"
        ?open=${this.filterObject.expanded||In}
      >
        <summary>
          <span
            class="title"
            style="${!this.filterObject.title&&"text-transform: capitalize"}"
          >
            ${this.filterObject.title||this.filterObject.key||"Filter"}
            <slot name="reset-button"></slot>
          </span>
        </summary>
        <div class="scroll">
          <slot name="filter"></slot>
        </div>
      </details>
    `}};GN([$t({attribute:!1})],iR.prototype,"filterObject",2);GN([$t()],iR.prototype,"unstyled",2);iR=GN([ta("eox-itemfilter-expandcontainer")],iR);const jb=i=>{if(!i.dirty)return null;switch(i.type){case"multiselect":for(const t in i.state)i.state[t]=!1;break;case"range":i.state.min=i.min,i.state.max=i.max;break;case"select":for(const t in i.state)i.state[t]=!1;break;case"spatial":i.state.geometry=void 0;break;case"text":i.keys.forEach(t=>{i.state[t]=void 0});break}return delete i.stringifiedState,delete i.dirty,i},GO=Math.min,w_=Math.max,nR=Math.round,tT=Math.floor,Rg=i=>({x:i,y:i});function rCe(i){return i.split("-")[0]}function Qqe(i){return i.split("-")[1]}function eVe(i){return i==="x"?"y":"x"}function tVe(i){return i==="y"?"height":"width"}function sCe(i){return["top","bottom"].includes(rCe(i))?"y":"x"}function iVe(i){return eVe(sCe(i))}function oCe(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function P0e(i,e,t){let{reference:n,floating:r}=i;const s=sCe(e),o=iVe(e),a=tVe(o),l=rCe(e),u=s==="y",c=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,d=n[a]/2-r[a]/2;let f;switch(l){case"top":f={x:c,y:n.y-r.height};break;case"bottom":f={x:c,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-r.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Qqe(e)){case"start":f[o]-=d*(t&&u?-1:1);break;case"end":f[o]+=d*(t&&u?-1:1);break}return f}const nVe=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:c,y:h}=P0e(u,n,l),d=n,f={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:v}=a[m],{x:b,y:x,data:w,reset:C}=await v({x:c,y:h,initialPlacement:n,placement:d,strategy:r,middlewareData:f,rects:u,platform:o,elements:{reference:i,floating:e}});c=b??c,h=x??h,f={...f,[y]:{...f[y],...w}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(d=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):C.rects),{x:c,y:h}=P0e(u,d,l)),m=-1)}return{x:c,y:h,placement:d,strategy:r,middlewareData:f}};function zb(i){return aCe(i)?(i.nodeName||"").toLowerCase():"#document"}function xu(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Mf(i){var e;return(e=(aCe(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function aCe(i){return i instanceof Node||i instanceof xu(i).Node}function Yh(i){return i instanceof Element||i instanceof xu(i).Element}function Zh(i){return i instanceof HTMLElement||i instanceof xu(i).HTMLElement}function F0e(i){return typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof xu(i).ShadowRoot}function aC(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=Hc(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(r)}function rVe(i){return["table","td","th"].includes(zb(i))}function SD(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function UN(i){const e=qN(),t=Hc(i);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function sVe(i){let e=kg(i);for(;Zh(e)&&!X_(e);){if(SD(e))return null;if(UN(e))return e;e=kg(e)}return null}function qN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function X_(i){return["html","body","#document"].includes(zb(i))}function Hc(i){return xu(i).getComputedStyle(i)}function TD(i){return Yh(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function kg(i){if(zb(i)==="html")return i;const e=i.assignedSlot||i.parentNode||F0e(i)&&i.host||Mf(i);return F0e(e)?e.host:e}function lCe(i){const e=kg(i);return X_(e)?i.ownerDocument?i.ownerDocument.body:i.body:Zh(e)&&aC(e)?e:lCe(e)}function FE(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=lCe(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),o=xu(r);return s?e.concat(o,o.visualViewport||[],aC(r)?r:[],o.frameElement&&t?FE(o.frameElement):[]):e.concat(r,FE(r,[],t))}function uCe(i){const e=Hc(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Zh(i),s=r?i.offsetWidth:t,o=r?i.offsetHeight:n,a=nR(t)!==s||nR(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function VN(i){return Yh(i)?i:i.contextElement}function E_(i){const e=VN(i);if(!Zh(e))return Rg(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=uCe(e);let o=(s?nR(t.width):t.width)/n,a=(s?nR(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oVe=Rg(0);function cCe(i){const e=xu(i);return!qN()||!e.visualViewport?oVe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aVe(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==xu(i)?!1:e}function O0(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=VN(i);let o=Rg(1);e&&(n?Yh(n)&&(o=E_(n)):o=E_(i));const a=aVe(s,t,n)?cCe(s):Rg(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,h=r.height/o.y;if(s){const d=xu(s),f=n&&Yh(n)?xu(n):n;let p=d,m=p.frameElement;for(;m&&n&&f!==p;){const y=E_(m),v=m.getBoundingClientRect(),b=Hc(m),x=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*y.x,w=v.top+(m.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,u*=y.y,c*=y.x,h*=y.y,l+=x,u+=w,p=xu(m),m=p.frameElement}}return oCe({width:c,height:h,x:l,y:u})}function lVe(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",o=Mf(n),a=e?SD(e.floating):!1;if(n===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Rg(1);const c=Rg(0),h=Zh(n);if((h||!h&&!s)&&((zb(n)!=="body"||aC(o))&&(l=TD(n)),Zh(n))){const d=O0(n);u=E_(n),c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x,y:t.y*u.y-l.scrollTop*u.y+c.y}}function uVe(i){return Array.from(i.getClientRects())}function hCe(i){return O0(Mf(i)).left+TD(i).scrollLeft}function cVe(i){const e=Mf(i),t=TD(i),n=i.ownerDocument.body,r=w_(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=w_(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+hCe(i);const a=-t.scrollTop;return Hc(n).direction==="rtl"&&(o+=w_(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}function hVe(i,e){const t=xu(i),n=Mf(i),r=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=qN();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function dVe(i,e){const t=O0(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=Zh(i)?E_(i):Rg(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=r*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function N0e(i,e,t){let n;if(e==="viewport")n=hVe(i,t);else if(e==="document")n=cVe(Mf(i));else if(Yh(e))n=dVe(e,t);else{const r=cCe(i);n={...e,x:e.x-r.x,y:e.y-r.y}}return oCe(n)}function dCe(i,e){const t=kg(i);return t===e||!Yh(t)||X_(t)?!1:Hc(t).position==="fixed"||dCe(t,e)}function fVe(i,e){const t=e.get(i);if(t)return t;let n=FE(i,[],!1).filter(a=>Yh(a)&&zb(a)!=="body"),r=null;const s=Hc(i).position==="fixed";let o=s?kg(i):i;for(;Yh(o)&&!X_(o);){const a=Hc(o),l=UN(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||aC(o)&&!l&&dCe(i,o))?n=n.filter(c=>c!==o):r=a,o=kg(o)}return e.set(i,n),n}function pVe(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const o=[...t==="clippingAncestors"?SD(e)?[]:fVe(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((u,c)=>{const h=N0e(e,c,r);return u.top=w_(h.top,u.top),u.right=GO(h.right,u.right),u.bottom=GO(h.bottom,u.bottom),u.left=w_(h.left,u.left),u},N0e(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function gVe(i){const{width:e,height:t}=uCe(i);return{width:e,height:t}}function mVe(i,e,t){const n=Zh(e),r=Mf(e),s=t==="fixed",o=O0(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Rg(0);if(n||!n&&!s)if((zb(e)!=="body"||aC(r))&&(a=TD(e)),n){const h=O0(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else r&&(l.x=hCe(r));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function MM(i){return Hc(i).position==="static"}function $0e(i,e){return!Zh(i)||Hc(i).position==="fixed"?null:e?e(i):i.offsetParent}function fCe(i,e){const t=xu(i);if(SD(i))return t;if(!Zh(i)){let r=kg(i);for(;r&&!X_(r);){if(Yh(r)&&!MM(r))return r;r=kg(r)}return t}let n=$0e(i,e);for(;n&&rVe(n)&&MM(n);)n=$0e(n,e);return n&&X_(n)&&MM(n)&&!UN(n)?t:n||sVe(i)||t}const yVe=async function(i){const e=this.getOffsetParent||fCe,t=this.getDimensions,n=await t(i.floating);return{reference:mVe(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function vVe(i){return Hc(i).direction==="rtl"}const _Ve={convertOffsetParentRelativeRectToViewportRelativeRect:lVe,getDocumentElement:Mf,getClippingRect:pVe,getOffsetParent:fCe,getElementRects:yVe,getClientRects:uVe,getDimensions:gVe,getScale:E_,isElement:Yh,isRTL:vVe};function bVe(i,e){let t=null,n;const r=Mf(i);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:h,height:d}=i.getBoundingClientRect();if(a||e(),!h||!d)return;const f=tT(c),p=tT(r.clientWidth-(u+h)),m=tT(r.clientHeight-(c+d)),y=tT(u),b={rootMargin:-f+"px "+-p+"px "+-m+"px "+-y+"px",threshold:w_(0,GO(1,l))||1};let x=!0;function w(C){const D=C[0].intersectionRatio;if(D!==l){if(!x)return o();D?o(!1,D):n=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{t=new IntersectionObserver(w,{...b,root:r.ownerDocument})}catch{t=new IntersectionObserver(w,b)}t.observe(i)}return o(!0),s}function xVe(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=VN(i),c=r||s?[...u?FE(u):[],...FE(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=u&&a?bVe(u,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=f)==null||x.observe(e)})),t()}),u&&!l&&f.observe(u),f.observe(e));let p,m=l?O0(i):null;l&&y();function y(){const v=O0(i);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&t(),m=v,p=requestAnimationFrame(y)}return t(),()=>{var v;c.forEach(b=>{r&&b.removeEventListener("scroll",t),s&&b.removeEventListener("resize",t)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const wVe=(i,e,t)=>{const n=new Map,r={platform:_Ve,...t},s={...r.platform,_c:n};return nVe(i,e,{...r,platform:s})};var EVe=Object.defineProperty,CVe=Object.getOwnPropertyDescriptor,AD=(i,e,t,n)=>{for(var r=n>1?void 0:n?CVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&EVe(e,t,r),r};let NE=class extends Yn{constructor(){super(...arguments),this.open=!1,this.parent=null,this.unstyled=!1,this._clickEventListener=()=>{this.open=!1},this._keyboardEventListener=i=>{const{code:e}=i;["Escape"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){this.clientHeight}_overlayCleanup(){}connectedCallback(){super.connectedCallback(),this.unstyled||setTimeout(()=>{const i=this.parent||this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0],e=this.renderRoot.querySelector("#dropdown"),t=()=>{e.classList.contains("open")&&wVe(i,e,{strategy:"fixed"}).then(({x:n,y:r})=>{Object.assign(e.style,{left:`${n}px`,top:`${r}px`,width:`${i.getBoundingClientRect().width}px`})})};this._overlayCleanup=xVe(i,e,t)})}disconnectedCallback(){super.disconnectedCallback(),this._overlayCleanup(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickEventListener)}render(){return tt`
      <style>
        #dropdown {
          display: none;
        }
        #dropdown.open {
          display: block;
        }
        ${this.unstyled?In:tt`
              eox-dropdown { height: 100%;} #dropdown { position: fixed; top:
              0px; left: 0; width: 100%; margin: 0; padding: 0; background:
              white; border-bottom-left-radius: 4px; border-bottom-right-radius:
              4px; box-shadow: 0 4px 4px #0007; cursor: default; max-height:
              200px; overflow-y: auto; z-index: 99;}
            `}
      </style>
      <slot name="trigger"></slot>
      <div id="dropdown">
        <slot name="content"></slot>
      </div>
    `}updated(i){if(i.has("open")){const e=this.renderRoot.querySelector("#dropdown");this.open?e.classList.add("open"):e.classList.remove("open"),this.requestUpdate()}}firstUpdated(){window.addEventListener("click",this._clickEventListener),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),this.renderRoot.querySelector("[name=trigger]").assignedNodes()[0].addEventListener("focus",()=>{this.open=!0})}};AD([$t({type:Boolean})],NE.prototype,"open",2);AD([$t()],NE.prototype,"parent",2);AD([$t({type:Boolean})],NE.prototype,"unstyled",2);NE=AD([ta("eox-dropdown")],NE);var SVe=Object.defineProperty,TVe=Object.getOwnPropertyDescriptor,RD=(i,e,t,n)=>{for(var r=n>1?void 0:n?TVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&SVe(e,t,r),r};let $E=class extends Yn{constructor(){super(...arguments),this.items=[],this.titleProperty="title",this.unstyled=!1,this._keyboardEventListener=i=>{const{code:e}=i;this.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(e)||(e==="Space"&&i.preventDefault(),["Escape","Space","Enter"].includes(e)||i.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(e)&&this._handleKeyboard(e,i.target.value??""))}}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}_handleKeyboard(i,e){const t=this.renderRoot.querySelector(".chip.highlighted");if((i==="Escape"||e)&&t&&t.classList.remove("highlighted"),i==="Backspace"&&!e){if(this.items.length){t&&this.items.splice(Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(t),1);const n=this.renderRoot.querySelectorAll(".chip")[this.renderRoot.querySelectorAll(".chip").length-1];n.classList.contains("highlighted")||n.classList.add("highlighted"),this.requestUpdate()}this._dispatchEvent()}if((i==="ArrowLeft"||i==="ArrowRight")&&!e){if(this.renderRoot.querySelectorAll(".chip").length<1)return;let n=0;const r=this.renderRoot.querySelector(".chip.highlighted");r&&(n=Array.from(this.renderRoot.querySelectorAll(".chip")).indexOf(r),r.classList.remove("highlighted")),n=n+(i==="ArrowLeft"?-1:1),i==="ArrowLeft"&&n<0&&(n=this.renderRoot.querySelectorAll(".chip").length-1),i==="ArrowRight"&&n>this.renderRoot.querySelectorAll(".chip").length-1&&(n=0),Array.from(this.renderRoot.querySelectorAll(".chip"))[n].classList.add("highlighted")}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}render(){return tt`
      <style>
        .chip.highlighted {
          background: lightgrey;
        }
        .chip-title {
          pointer-events: none;
        }
        ${this.unstyled?In:tt`
              .chip-container { display: flex; flex: 0; } .chip { display: flex;
              align-items: center; background: #00417022; border-radius: 4px;
              margin-right: 4px; padding: 5px 10px; font-size: small; cursor:
              default; white-space: nowrap; } .chip.highlighted { background:
              #004170; color: white; } .chip-close { cursor: pointer;
              margin-left: 4px; }
            `}
      </style>
      <span class="chip-container">
        ${$l(this.items,i=>tt`
            <span
              class="chip"
              @click=${e=>{this.renderRoot.querySelectorAll(".chip").forEach(t=>{t.classList.remove("highlighted")}),e.target.classList.add("highlighted"),this.requestUpdate()}}
            >
              <span class="chip-title"
                >${i[this.titleProperty]}</span
              >
              ${Hi(i._inProgress,()=>i.stringifiedState?"":tt` ... `)}
              ${Hi(i.stringifiedState,()=>tt`: ${i.stringifiedState}`)}
              <span
                class="chip-close"
                @click=${e=>{e.stopPropagation(),this.items.splice(this.items.indexOf(i),1),this._dispatchEvent(),this.requestUpdate()}}
                >✕</span
              >
            </span>
          `)}
      </span>
    `}};RD([$t({type:Array})],$E.prototype,"items",2);RD([$t()],$E.prototype,"titleProperty",2);RD([$t({type:Boolean})],$E.prototype,"unstyled",2);$E=RD([ta("eox-itemfilter-chips")],$E);var AVe=Object.defineProperty,RVe=Object.getOwnPropertyDescriptor,nd=(i,e,t,n)=>{for(var r=n>1?void 0:n?RVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&AVe(e,t,r),r};let Wc=class extends Yn{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.itemTitleProperty=this.titleProperty,this.multiple=!1,this.unstyled=!1,this.multiStep=!1,this.inputText="",this.selectedItems=[],this._keyboardEventListener=i=>{const{code:e}=i;["ArrowUp","ArrowDown","Escape","Backspace"].includes(e)&&this._handleKeyboard(e)}}_handleKeyboard(i){var e,t,n,r;if(this.clientHeight!==0){if(i==="Escape"){if(this.selectedItems.length<1||this.multiple){this.renderRoot.querySelector("input").value!==""?this.renderRoot.querySelector("input").value="":this.renderRoot.querySelector("eox-dropdown").open=!1;return}this.multiple||(this.renderRoot.querySelector("input").value!==this.selectedItems[0][this.titleProperty]?this.renderRoot.querySelector("input").value=this.selectedItems[0][this.titleProperty]:this.renderRoot.querySelector("eox-dropdown").open=!1);return}(i==="ArrowDown"||i==="ArrowUp")&&(this.renderRoot.querySelector("eox-dropdown").open=!0,(e=this.parentElement)!=null&&e.inline&&this.renderRoot.querySelector("eox-selectionlist")._handleKeyboard(i)),this.renderRoot.querySelector("input").select(),(t=this.parentElement)!=null&&t.inline&&(["ArrowUp","ArrowDown"].includes(i)||((r=(n=this.parentElement.parentElement)==null?void 0:n.parentElement)==null?void 0:r.querySelector("#inline-input")).focus())}}_handleHighlight(i){i[0]._inProgress||(this.renderRoot.querySelector("input").value=i[0][this.titleProperty]||"",this.renderRoot.querySelector("input").select())}_handleSelect(i){var e;i.length>0&&this.multiStep&&i.forEach(t=>{this.selectedItems.includes(t)||(t._inProgress=!0)}),this.selectedItems=i,i.length>0?this.multiple?(this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()):(this.renderRoot.querySelector("input").value=i[0][this.titleProperty],i[0]._inProgress||(this.renderRoot.querySelector("eox-dropdown").open=!1)):(this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus()),this._dispatchEvent(),this.requestUpdate(),(e=this.renderRoot.querySelector("eox-itemfilter-chips"))==null||e.requestUpdate()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("selectedItems")&&this._handleSelect(this.selectedItems)}render(){return tt`
      <style>
        :host,
        .container {
          display: flex;
        }
        #dropdown {
          display: none;
        }
        ${this.unstyled?In:tt`
              ${Q0} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; overflow-x: auto; } .container:hover
              { border: 1px solid #004170; } .input-container { display: flex;
              flex: 1; align-items: center; } input, input:focus { height: 100%;
              border: none; outline: none; } .button-container { display: flex;
              align-items: center; justify-content: center; position: absolute;
              right: 1px; top: 5px; height: calc(100% - 10px); width: 34px;
              background: white; } button.icon { color: #004170; height: 24px;
              font-size: large; width: unset; } .container::-webkit-scrollbar {
              height: 2px; } .container::-webkit-scrollbar-thumb { background:
              lightgrey; border-radius: 2px;} .hidden {height: 1px; padding: 0;
              border: none;} .hidden:hover {border: none} .hidden input {
              opacity: 0% }
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{i.stopPropagation(),this.renderRoot.querySelector("input[type=text]").focus()}}
      >
        ${Hi(this.multiple,()=>tt`
            <eox-itemfilter-chips
              .items=${this.selectedItems}
              .titleProperty=${this.titleProperty}
              .unstyled=${this.unstyled}
            ></eox-itemfilter-chips>
          `)}
        <div class="input-container">
          <eox-dropdown
            .parent=${this.parentNode.parentNode}
            .unstyled=${this.unstyled}
          >
            <input
              slot="trigger"
              type="text"
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{this.inputText=i.target.value.toLowerCase()}}
            />
            ${Hi(this.items.length>0,()=>tt`
                <eox-selectionlist
                  slot="content"
                  .filter=${this.inputText}
                  .idProperty=${this.idProperty}
                  .titleProperty=${this.titleProperty}
                  .items=${this.items.filter(i=>this.multiStep?!i.stringifiedState:!0).filter(i=>this.inputText?i[this.titleProperty].toLowerCase().includes(this.inputText.toLowerCase()):!0)}
                  .multiple=${this.multiStep?!0:this.multiple}
                  .disableKeyboardEvents=${this.multiStep}
                  .selectedItems=${this.multiStep?this.selectedItems.filter(i=>i.stringifiedState):this.selectedItems}
                  .unstyled=${this.unstyled}
                  @items-highlighted=${i=>{this._handleHighlight(i.detail)}}
                  @items-selected=${i=>{this._handleSelect(i.detail)}}
                >
                </eox-selectionlist>
              `)}
          </eox-dropdown>
        </div>
      </div>
      ${Hi(this.selectedItems.length>0,()=>tt`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleSelect([])}}
            >
              ✕
            </button>
          </div>
        `)}
    `}};nd([$t()],Wc.prototype,"idProperty",2);nd([$t()],Wc.prototype,"items",2);nd([$t()],Wc.prototype,"titleProperty",2);nd([$t()],Wc.prototype,"itemTitleProperty",2);nd([$t({type:Boolean})],Wc.prototype,"multiple",2);nd([$t({type:Boolean})],Wc.prototype,"unstyled",2);nd([$t({type:Boolean})],Wc.prototype,"multiStep",2);nd([Ks()],Wc.prototype,"inputText",2);nd([Ks()],Wc.prototype,"selectedItems",2);Wc=nd([ta("eox-autocomplete")],Wc);var kVe=Object.defineProperty,DVe=Object.getOwnPropertyDescriptor,rd=(i,e,t,n)=>{for(var r=n>1?void 0:n?DVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&kVe(e,t,r),r};let Xc=class extends Yn{constructor(){super(...arguments),this.filter="",this.idProperty="id",this.items=[],this.titleProperty="title",this.multiple=!1,this.selectedItems=[],this.unstyled=!1,this.noShadow=!1,this._currentHighlight=null,this._keyboardEventListener=i=>{["ArrowDown","ArrowUp","Enter","Escape"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){if(this.clientHeight===0)return;const e=this.renderRoot.querySelector("li.highlighted");if(i==="Escape"){this._currentHighlight&&(this._currentHighlight=null);return}if(i==="Enter"){if(e){const s=this.items.find(o=>o[this.idProperty]===e.dataset.identifier);this._handleSelect(s),this.requestUpdate()}return}const t=this.renderRoot.querySelectorAll("li");let n=-1;e&&(delete e.dataset.highlighted,n=Array.from(t).indexOf(e)),i==="ArrowDown"&&(n++,n>t.length-1&&(n=0)),i==="ArrowUp"&&(n--,n<0&&(n=t.length-1));const r=Array.from(t)[n];r&&(this._currentHighlight=this.items.find(s=>s[this.idProperty]===r.dataset.identifier)),this.dispatchEvent(new CustomEvent("items-highlighted",{detail:[this._currentHighlight]}))}_handleSelect(i){if(i)if(this.multiple){const e=this.selectedItems.find(t=>t[this.idProperty]===i[this.idProperty]);e?this.selectedItems.splice(this.selectedItems.indexOf(e),1):this.selectedItems.push(i)}else this.selectedItems=[i];else this.selectedItems=[],this._currentHighlight=null;this._dispatchEvent()}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.selectedItems}))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener)}firstUpdated(){this.getRootNode().addEventListener("keydown",this._keyboardEventListener)}updated(i){i.has("filter")&&(this.filter.length>0?setTimeout(()=>{const e=this.renderRoot.querySelectorAll("li")[0];e&&(this._currentHighlight=this.items.find(t=>t[this.idProperty]===e.dataset.identifier))}):this._currentHighlight=null)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return tt`
      <style>
        ${$N}
        :host {
          height: auto;
        }
        ul {
          width: 100%;
        }
        li.highlighted {
          background: lightgrey;
        }
        ${!this.unstyled&&zN}
      </style>
      <ul>
        ${FN(this.items.filter(i=>this.filter?i[this.titleProperty].toLowerCase().includes(this.filter.toLowerCase()):!0),i=>i[this.idProperty],i=>tt`
            <li
              class=${this._currentHighlight===i?"highlighted":In}
              data-identifier=${i[this.idProperty]}
              data-title=${i[this.titleProperty]}
              @mouseenter=${()=>{this._currentHighlight=i}}
              @mouseleave=${()=>{this._currentHighlight=null}}
            >
              <label>
                <input
                  type="${this.multiple?"checkbox":"radio"}"
                  .checked=${!!this.selectedItems.find(e=>e[this.idProperty]===i[this.idProperty])||In}
                  @change=${()=>this._handleSelect(i)}
                />
                <span class="title"
                  >${i[this.titleProperty]}</span
                >
              </label>
            </li>
          `)}
      </ul>
    `}};rd([$t()],Xc.prototype,"filter",2);rd([$t()],Xc.prototype,"idProperty",2);rd([$t()],Xc.prototype,"items",2);rd([$t()],Xc.prototype,"titleProperty",2);rd([$t({type:Boolean})],Xc.prototype,"multiple",2);rd([$t()],Xc.prototype,"selectedItems",2);rd([$t({type:Boolean})],Xc.prototype,"unstyled",2);rd([$t({type:Boolean})],Xc.prototype,"noShadow",2);rd([Ks()],Xc.prototype,"_currentHighlight",2);Xc=rd([ta("eox-selectionlist")],Xc);var LVe=Object.defineProperty,MVe=Object.getOwnPropertyDescriptor,kD=(i,e,t,n)=>{for(var r=n>1?void 0:n?MVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&LVe(e,t,r),r};let BE=class extends Yn{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='checkbox']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),jb(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.map(n=>n.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t]).join(", "),((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return Hi(this.filterObject,()=>tt`
        ${Hi(this.inline||Object.keys(this.filterObject.state).length>10,()=>tt`
            <eox-autocomplete
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            >
            </eox-autocomplete>
          `,()=>tt`
            <eox-selectionlist
              .noShadow=${!this.inline}
              multiple
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i.detail)}
            ></eox-selectionlist>
          `)}
      `)}};kD([$t()],BE.prototype,"filterObject",2);kD([$t({type:Boolean})],BE.prototype,"inline",2);kD([$t({type:Boolean})],BE.prototype,"unstyled",2);BE=kD([ta("eox-itemfilter-multiselect")],BE);var IVe=Object.defineProperty,OVe=Object.getOwnPropertyDescriptor,pCe=(i,e,t,n)=>{for(var r=n>1?void 0:n?OVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&IVe(e,t,r),r};let UO=class extends Yn{constructor(){super(...arguments),this.inputHandler=i=>{const[e,t]=i.detail.values;(e!==this.filterObject.state.min||t!=this.filterObject.state.max)&&([this.filterObject.state.min,this.filterObject.state.max]=[e,t],this.filterObject.dirty=!0),this.filterObject.dirty&&(this.filterObject.stringifiedState=`${rf(e)} - ${rf(t)}`),this.dispatchEvent(new CustomEvent("filter")),this.requestUpdate()},this.debouncedInputHandler=Bb(this.inputHandler,0,{leading:!0})}reset(){jb(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}render(){return Hi(this.filterObject,()=>tt`
        <div class="range-before">
          ${this.filterObject.format==="date"?rf.unix(this.filterObject.state.min):this.filterObject.state.min}
        </div>
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min}"
          value2="${this.filterObject.state.max}"
          step="1"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        <div class="range-after">
          ${this.filterObject.format==="date"?rf.unix(this.filterObject.state.max):this.filterObject.state.max}
        </div>
      `)}};pCe([$t()],UO.prototype,"filterObject",2);UO=pCe([ta("eox-itemfilter-range")],UO);var PVe=Object.defineProperty,FVe=Object.getOwnPropertyDescriptor,DD=(i,e,t,n)=>{for(var r=n>1?void 0:n?FVe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&PVe(e,t,r),r};let jE=class extends Yn{constructor(){super(...arguments),this.inline=!1,this.unstyled=!1}reset(){this.renderRoot.querySelectorAll("input[type='radio']").forEach(i=>{i instanceof HTMLInputElement&&(i.checked=!1)}),jb(this.filterObject),this.requestUpdate()}createRenderRoot(){return this}_getItems(){const i="sort"in this.filterObject?this.filterObject.sort:(e,t)=>e.localeCompare(t);return Object.keys(this.filterObject.state).sort(i).map(e=>({id:e,title:e.replace(/^./,e[0].toUpperCase())}))}_getSelectedItems(){return Object.keys(this.filterObject.state).filter(i=>this.filterObject.state[i]).map(i=>({id:i,title:i.replace(/^./,i[0].toUpperCase())}))}_handleSelected(i){var e;Object.keys(this.filterObject.state).forEach(t=>{this.filterObject.state[t]=i.detail.map(n=>n.id).includes(t)}),this.filterObject.stringifiedState=Object.keys(this.filterObject.state).filter(t=>this.filterObject.state[t])[0],((e=this.filterObject.stringifiedState)==null?void 0:e.length)>0&&(this.filterObject.dirty=!0),this.dispatchEvent(new CustomEvent("filter"))}render(){return Hi(this.filterObject,()=>tt`
        ${Hi(this.inline||Object.keys(this.filterObject.state).length>10,()=>tt`
            <eox-autocomplete
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            >
            </eox-autocomplete>
          `,()=>tt`
            <eox-selectionlist
              .noShadow=${!this.inline}
              .items=${this._getItems()}
              .selectedItems=${this._getSelectedItems()}
              .unstyled=${this.unstyled}
              @items-selected=${i=>this._handleSelected(i)}
            ></eox-selectionlist>
          `)}
      `)}};DD([$t()],jE.prototype,"filterObject",2);DD([$t({type:Boolean})],jE.prototype,"inline",2);DD([$t({type:Boolean})],jE.prototype,"unstyled",2);jE=DD([ta("eox-itemfilter-select")],jE);function NVe(i,e){var t=0,n=0,r=0,s=0,o=0,a=0,l=0,u=0,c=null,h=null,d=i[0],f=i[1],p=e.length;for(t;t<p;t++){n=0;var m=e[t].length-1,y=e[t];if(c=y[0],c[0]!==y[m][0]&&c[1]!==y[m][1])throw new Error("First and last coordinates in a ring must be the same");for(o=c[0]-d,a=c[1]-f,n;n<m;n++){if(h=y[n+1],u=h[1]-f,a<0&&u<0||a>0&&u>0){c=h,a=u,o=c[0]-d;continue}if(l=h[0]-i[0],u>0&&a<=0){if(s=o*u-l*a,s>0)r=r+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)r=r+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}c=h,a=u,o=l}}return r%2!==0}var B0e=Object.prototype.toString,gCe=function(e){var t=B0e.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&B0e.call(e.callee)==="[object Function]"),n},IM,j0e;function $Ve(){if(j0e)return IM;j0e=1;var i;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=gCe,r=Object.prototype.propertyIsEnumerable,s=!r.call({toString:null},"toString"),o=r.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(d){var f=d.constructor;return f&&f.prototype===d},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!u["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{l(window[d])}catch{return!0}}catch{return!0}return!1}(),h=function(d){if(typeof window>"u"||!c)return l(d);try{return l(d)}catch{return!1}};i=function(f){var p=f!==null&&typeof f=="object",m=t.call(f)==="[object Function]",y=n(f),v=p&&t.call(f)==="[object String]",b=[];if(!p&&!m&&!y)throw new TypeError("Object.keys called on a non-object");var x=o&&m;if(v&&f.length>0&&!e.call(f,0))for(var w=0;w<f.length;++w)b.push(String(w));if(y&&f.length>0)for(var C=0;C<f.length;++C)b.push(String(C));else for(var D in f)!(x&&D==="prototype")&&e.call(f,D)&&b.push(String(D));if(s)for(var R=h(f),A=0;A<a.length;++A)!(R&&a[A]==="constructor")&&e.call(f,a[A])&&b.push(a[A]);return b}}return IM=i,IM}var BVe=Array.prototype.slice,jVe=gCe,z0e=Object.keys,pA=z0e?function(e){return z0e(e)}:$Ve(),G0e=Object.keys;pA.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return jVe(n)?G0e(BVe.call(n)):G0e(n)})}else Object.keys=pA;return Object.keys||pA};var HN=pA,zVe=Error,GVe=EvalError,UVe=RangeError,qVe=ReferenceError,mCe=SyntaxError,Ug=TypeError,VVe=URIError,LD=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0},U0e=typeof Symbol<"u"&&Symbol,HVe=LD,WN=function(){return typeof U0e!="function"||typeof Symbol!="function"||typeof U0e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:HVe()},q0e={foo:{}},WVe=Object,XVe=function(){return{__proto__:q0e}.foo===q0e.foo&&!({__proto__:null}instanceof WVe)},YVe="Function.prototype.bind called on incompatible ",ZVe=Object.prototype.toString,KVe=Math.max,JVe="[object Function]",V0e=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},QVe=function(e,t){for(var n=[],r=t||0,s=0;r<e.length;r+=1,s+=1)n[s]=e[r];return n},eHe=function(i,e){for(var t="",n=0;n<i.length;n+=1)t+=i[n],n+1<i.length&&(t+=e);return t},tHe=function(e){var t=this;if(typeof t!="function"||ZVe.apply(t)!==JVe)throw new TypeError(YVe+t);for(var n=QVe(arguments,1),r,s=function(){if(this instanceof r){var c=t.apply(this,V0e(n,arguments));return Object(c)===c?c:this}return t.apply(e,V0e(n,arguments))},o=KVe(0,t.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(r=Function("binder","return function ("+eHe(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,r.prototype=new u,u.prototype=null}return r},iHe=tHe,XN=Function.prototype.bind||iHe,nHe=Function.prototype.call,rHe=Object.prototype.hasOwnProperty,sHe=XN,yCe=sHe.call(nHe,rHe),Nn,oHe=zVe,aHe=GVe,lHe=UVe,uHe=qVe,Y_=mCe,C_=Ug,cHe=VVe,vCe=Function,OM=function(i){try{return vCe('"use strict"; return ('+i+").constructor;")()}catch{}},v0=Object.getOwnPropertyDescriptor;if(v0)try{v0({},"")}catch{v0=null}var PM=function(){throw new C_},hHe=v0?function(){try{return arguments.callee,PM}catch{try{return v0(arguments,"callee").get}catch{return PM}}}():PM,ov=WN(),dHe=XVe(),qo=Object.getPrototypeOf||(dHe?function(i){return i.__proto__}:null),Iv={},fHe=typeof Uint8Array>"u"||!qo?Nn:qo(Uint8Array),_0={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Nn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Nn:ArrayBuffer,"%ArrayIteratorPrototype%":ov&&qo?qo([][Symbol.iterator]()):Nn,"%AsyncFromSyncIteratorPrototype%":Nn,"%AsyncFunction%":Iv,"%AsyncGenerator%":Iv,"%AsyncGeneratorFunction%":Iv,"%AsyncIteratorPrototype%":Iv,"%Atomics%":typeof Atomics>"u"?Nn:Atomics,"%BigInt%":typeof BigInt>"u"?Nn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Nn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Nn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Nn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":oHe,"%eval%":eval,"%EvalError%":aHe,"%Float32Array%":typeof Float32Array>"u"?Nn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Nn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Nn:FinalizationRegistry,"%Function%":vCe,"%GeneratorFunction%":Iv,"%Int8Array%":typeof Int8Array>"u"?Nn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Nn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Nn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ov&&qo?qo(qo([][Symbol.iterator]())):Nn,"%JSON%":typeof JSON=="object"?JSON:Nn,"%Map%":typeof Map>"u"?Nn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ov||!qo?Nn:qo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Nn:Promise,"%Proxy%":typeof Proxy>"u"?Nn:Proxy,"%RangeError%":lHe,"%ReferenceError%":uHe,"%Reflect%":typeof Reflect>"u"?Nn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Nn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ov||!qo?Nn:qo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Nn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ov&&qo?qo(""[Symbol.iterator]()):Nn,"%Symbol%":ov?Symbol:Nn,"%SyntaxError%":Y_,"%ThrowTypeError%":hHe,"%TypedArray%":fHe,"%TypeError%":C_,"%Uint8Array%":typeof Uint8Array>"u"?Nn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Nn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Nn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Nn:Uint32Array,"%URIError%":cHe,"%WeakMap%":typeof WeakMap>"u"?Nn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Nn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Nn:WeakSet};if(qo)try{null.error}catch(i){var pHe=qo(qo(i));_0["%Error.prototype%"]=pHe}var gHe=function i(e){var t;if(e==="%AsyncFunction%")t=OM("async function () {}");else if(e==="%GeneratorFunction%")t=OM("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=OM("async function* () {}");else if(e==="%AsyncGenerator%"){var n=i("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=i("%AsyncGenerator%");r&&qo&&(t=qo(r.prototype))}return _0[e]=t,t},H0e={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},lC=XN,rR=yCe,mHe=lC.call(Function.call,Array.prototype.concat),yHe=lC.call(Function.apply,Array.prototype.splice),W0e=lC.call(Function.call,String.prototype.replace),sR=lC.call(Function.call,String.prototype.slice),vHe=lC.call(Function.call,RegExp.prototype.exec),_He=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bHe=/\\(\\)?/g,xHe=function(e){var t=sR(e,0,1),n=sR(e,-1);if(t==="%"&&n!=="%")throw new Y_("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Y_("invalid intrinsic syntax, expected opening `%`");var r=[];return W0e(e,_He,function(s,o,a,l){r[r.length]=a?W0e(l,bHe,"$1"):o||s}),r},wHe=function(e,t){var n=e,r;if(rR(H0e,n)&&(r=H0e[n],n="%"+r[0]+"%"),rR(_0,n)){var s=_0[n];if(s===Iv&&(s=gHe(n)),typeof s>"u"&&!t)throw new C_("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new Y_("intrinsic "+e+" does not exist!")},sd=function(e,t){if(typeof e!="string"||e.length===0)throw new C_("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new C_('"allowMissing" argument must be a boolean');if(vHe(/^%?[^%]*%?$/,e)===null)throw new Y_("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=xHe(e),r=n.length>0?n[0]:"",s=wHe("%"+r+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(r=u[0],yHe(n,mHe([0,1],u)));for(var c=1,h=!0;c<n.length;c+=1){var d=n[c],f=sR(d,0,1),p=sR(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Y_("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),r+="."+d,o="%"+r+"%",rR(_0,o))a=_0[o];else if(a!=null){if(!(d in a)){if(!t)throw new C_("base intrinsic for "+e+" exists, but the property is not available.");return}if(v0&&c+1>=n.length){var m=v0(a,d);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else h=rR(a,d),a=a[d];h&&!l&&(_0[o]=a)}}return a},FM,X0e;function YN(){if(X0e)return FM;X0e=1;var i=sd,e=i("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return FM=e,FM}var EHe=sd,gA=EHe("%Object.getOwnPropertyDescriptor%",!0);if(gA)try{gA([],"length")}catch{gA=null}var ZN=gA,Y0e=YN(),CHe=mCe,av=Ug,Z0e=ZN,KN=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new av("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new av("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new av("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new av("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new av("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new av("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Z0e&&Z0e(e,t);if(Y0e)Y0e(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:r===null&&l?l.enumerable:!r,value:n,writable:s===null&&l?l.writable:!s});else if(a||!r&&!s&&!o)e[t]=n;else throw new CHe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},qO=YN(),_Ce=function(){return!!qO};_Ce.hasArrayLengthDefineBug=function(){if(!qO)return null;try{return qO([],"length",{value:1}).length!==1}catch{return!0}};var JN=_Ce,SHe=HN,THe=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",AHe=Object.prototype.toString,RHe=Array.prototype.concat,K0e=KN,kHe=function(i){return typeof i=="function"&&AHe.call(i)==="[object Function]"},bCe=JN(),DHe=function(i,e,t,n){if(e in i){if(n===!0){if(i[e]===t)return}else if(!kHe(n)||!n())return}bCe?K0e(i,e,t,!0):K0e(i,e,t)},xCe=function(i,e){var t=arguments.length>2?arguments[2]:{},n=SHe(e);THe&&(n=RHe.call(n,Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r+=1)DHe(i,n[r],e[n[r]],t[n[r]])};xCe.supportsDescriptors=!!bCe;var ey=xCe,wCe={exports:{}},LHe=sd,J0e=KN,MHe=JN(),Q0e=ZN,eye=Ug,IHe=LHe("%Math.floor%"),OHe=function(e,t){if(typeof e!="function")throw new eye("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||IHe(t)!==t)throw new eye("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,s=!0;if("length"in e&&Q0e){var o=Q0e(e,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(s=!1)}return(r||s||!n)&&(MHe?J0e(e,"length",t,!0,!0):J0e(e,"length",t)),e};(function(i){var e=XN,t=sd,n=OHe,r=Ug,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=YN(),u=t("%Math.max%");i.exports=function(d){if(typeof d!="function")throw new r("a function is required");var f=a(e,o,arguments);return n(f,1+u(0,d.length-(arguments.length-1)),!0)};var c=function(){return a(e,s,arguments)};l?l(i.exports,"apply",{value:c}):i.exports.apply=c})(wCe);var Gb=wCe.exports,ECe=sd,CCe=Gb,PHe=CCe(ECe("String.prototype.indexOf")),ac=function(e,t){var n=ECe(e,!!t);return typeof n=="function"&&PHe(e,".prototype.")>-1?CCe(n):n},FHe=HN,SCe=LD(),TCe=ac,tye=Object,NHe=TCe("Array.prototype.push"),iye=TCe("Object.prototype.propertyIsEnumerable"),$He=SCe?Object.getOwnPropertySymbols:null,ACe=function(e,t){if(e==null)throw new TypeError("target must be an object");var n=tye(e);if(arguments.length===1)return n;for(var r=1;r<arguments.length;++r){var s=tye(arguments[r]),o=FHe(s),a=SCe&&(Object.getOwnPropertySymbols||$He);if(a)for(var l=a(s),u=0;u<l.length;++u){var c=l[u];iye(s,c)&&NHe(o,c)}for(var h=0;h<o.length;++h){var d=o[h];if(iye(s,d)){var f=s[d];n[d]=f}}}return n},NM=ACe,BHe=function(){if(!Object.assign)return!1;for(var i="abcdefghijklmnopqrst",e=i.split(""),t={},n=0;n<e.length;++n)t[e[n]]=e[n];var r=Object.assign({},t),s="";for(var o in r)s+=o;return i!==s},jHe=function(){if(!Object.assign||!Object.preventExtensions)return!1;var i=Object.preventExtensions({1:2});try{Object.assign(i,"xy")}catch{return i[1]==="y"}return!1},RCe=function(){return!Object.assign||BHe()||jHe()?NM:Object.assign},zHe=ey,GHe=RCe,UHe=function(){var e=GHe();return zHe(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},qHe=ey,VHe=Gb,HHe=ACe,kCe=RCe,WHe=UHe,XHe=VHe.apply(kCe()),DCe=function(e,t){return XHe(Object,arguments)};qHe(DCe,{getPolyfill:kCe,implementation:HHe,shim:WHe});var YHe=DCe,zE=function(){return typeof(function(){}).name=="string"},nE=Object.getOwnPropertyDescriptor;if(nE)try{nE([],"length")}catch{nE=null}zE.functionsHaveConfigurableNames=function(){if(!zE()||!nE)return!1;var e=nE(function(){},"name");return!!e&&!!e.configurable};var ZHe=Function.prototype.bind;zE.boundFunctionsHaveNames=function(){return zE()&&typeof ZHe=="function"&&(function(){}).bind().name!==""};var KHe=zE,nye=KN,JHe=JN(),QHe=KHe.functionsHaveConfigurableNames(),eWe=Ug,tWe=function(e,t){if(typeof e!="function")throw new eWe("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||QHe)&&(JHe?nye(e,"name",t,!0,!0):nye(e,"name",t)),e},iWe=tWe,nWe=Ug,rWe=Object,LCe=iWe(function(){if(this==null||this!==rWe(this))throw new nWe("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0),sWe=LCe,oWe=ey.supportsDescriptors,aWe=Object.getOwnPropertyDescriptor,MCe=function(){if(oWe&&/a/mig.flags==="gim"){var e=aWe(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),t==="dy")return e.get}}return sWe},lWe=ey.supportsDescriptors,uWe=MCe,cWe=Object.getOwnPropertyDescriptor,hWe=Object.defineProperty,dWe=TypeError,rye=Object.getPrototypeOf,fWe=/a/,pWe=function(){if(!lWe||!rye)throw new dWe("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=uWe(),t=rye(fWe),n=cWe(t,"flags");return(!n||n.get!==e)&&hWe(t,"flags",{configurable:!0,enumerable:!1,get:e}),e},gWe=ey,mWe=Gb,yWe=LCe,ICe=MCe,vWe=pWe,OCe=mWe(ICe());gWe(OCe,{getPolyfill:ICe,implementation:yWe,shim:vWe});var _We=OCe,mA={exports:{}},bWe=LD,qg=function(){return bWe()&&!!Symbol.toStringTag},xWe=qg(),wWe=ac,VO=wWe("Object.prototype.toString"),MD=function(e){return xWe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:VO(e)==="[object Arguments]"},PCe=function(e){return MD(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&VO(e)!=="[object Array]"&&VO(e.callee)==="[object Function]"},EWe=function(){return MD(arguments)}();MD.isLegacyArguments=PCe;var QN=EWe?MD:PCe;const yA={},CWe=Object.freeze(Object.defineProperty({__proto__:null,default:yA},Symbol.toStringTag,{value:"Module"})),SWe=eN(CWe);var e5=typeof Map=="function"&&Map.prototype,$M=Object.getOwnPropertyDescriptor&&e5?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,oR=e5&&$M&&typeof $M.get=="function"?$M.get:null,sye=e5&&Map.prototype.forEach,t5=typeof Set=="function"&&Set.prototype,BM=Object.getOwnPropertyDescriptor&&t5?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,aR=t5&&BM&&typeof BM.get=="function"?BM.get:null,oye=t5&&Set.prototype.forEach,TWe=typeof WeakMap=="function"&&WeakMap.prototype,rE=TWe?WeakMap.prototype.has:null,AWe=typeof WeakSet=="function"&&WeakSet.prototype,sE=AWe?WeakSet.prototype.has:null,RWe=typeof WeakRef=="function"&&WeakRef.prototype,aye=RWe?WeakRef.prototype.deref:null,kWe=Boolean.prototype.valueOf,DWe=Object.prototype.toString,LWe=Function.prototype.toString,MWe=String.prototype.match,i5=String.prototype.slice,tg=String.prototype.replace,IWe=String.prototype.toUpperCase,lye=String.prototype.toLowerCase,FCe=RegExp.prototype.test,uye=Array.prototype.concat,Eh=Array.prototype.join,OWe=Array.prototype.slice,cye=Math.floor,HO=typeof BigInt=="function"?BigInt.prototype.valueOf:null,jM=Object.getOwnPropertySymbols,WO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Z_=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ha=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Z_||!0)?Symbol.toStringTag:null,NCe=Object.prototype.propertyIsEnumerable,hye=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(i){return i.__proto__}:null);function dye(i,e){if(i===1/0||i===-1/0||i!==i||i&&i>-1e3&&i<1e3||FCe.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof i=="number"){var n=i<0?-cye(-i):cye(i);if(n!==i){var r=String(n),s=i5.call(e,r.length+1);return tg.call(r,t,"$&_")+"."+tg.call(tg.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return tg.call(e,t,"$&_")}var XO=SWe,fye=XO.custom,pye=BCe(fye)?fye:null,PWe=function i(e,t,n,r){var s=t||{};if(jp(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(jp(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=jp(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(jp(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(jp(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return zCe(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?dye(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?dye(e,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return YO(e)?"[Array]":"[Object]";var h=QWe(s,n);if(typeof r>"u")r=[];else if(jCe(r,e)>=0)return"[Circular]";function d(M,F,N){if(F&&(r=OWe.call(r),r.push(F)),N){var B={depth:s.depth};return jp(s,"quoteStyle")&&(B.quoteStyle=s.quoteStyle),i(M,B,n+1,r)}return i(M,s,n+1,r)}if(typeof e=="function"&&!gye(e)){var f=qWe(e),p=iT(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Eh.call(p,", ")+" }":"")}if(BCe(e)){var m=Z_?tg.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):WO.call(e);return typeof e=="object"&&!Z_?sw(m):m}if(ZWe(e)){for(var y="<"+lye.call(String(e.nodeName)),v=e.attributes||[],b=0;b<v.length;b++)y+=" "+v[b].name+"="+$Ce(FWe(v[b].value),"double",s);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+lye.call(String(e.nodeName))+">",y}if(YO(e)){if(e.length===0)return"[]";var x=iT(e,d);return h&&!JWe(x)?"["+ZO(x,h)+"]":"[ "+Eh.call(x,", ")+" ]"}if($We(e)){var w=iT(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!NCe.call(e,"cause")?"{ ["+String(e)+"] "+Eh.call(uye.call("[cause]: "+d(e.cause),w),", ")+" }":w.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Eh.call(w,", ")+" }"}if(typeof e=="object"&&o){if(pye&&typeof e[pye]=="function"&&XO)return XO(e,{depth:c-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(VWe(e)){var C=[];return sye&&sye.call(e,function(M,F){C.push(d(F,e,!0)+" => "+d(M,e))}),mye("Map",oR.call(e),C,h)}if(XWe(e)){var D=[];return oye&&oye.call(e,function(M){D.push(d(M,e))}),mye("Set",aR.call(e),D,h)}if(HWe(e))return zM("WeakMap");if(YWe(e))return zM("WeakSet");if(WWe(e))return zM("WeakRef");if(jWe(e))return sw(d(Number(e)));if(GWe(e))return sw(d(HO.call(e)));if(zWe(e))return sw(kWe.call(e));if(BWe(e))return sw(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Jr)return"{ [object globalThis] }";if(!NWe(e)&&!gye(e)){var R=iT(e,d),A=hye?hye(e)===Object.prototype:e instanceof Object||e.constructor===Object,L=e instanceof Object?"":"null prototype",O=!A&&Ha&&Object(e)===e&&Ha in e?i5.call(Vg(e),8,-1):L?"Object":"",$=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",q=$+(O||L?"["+Eh.call(uye.call([],O||[],L||[]),": ")+"] ":"");return R.length===0?q+"{}":h?q+"{"+ZO(R,h)+"}":q+"{ "+Eh.call(R,", ")+" }"}return String(e)};function $Ce(i,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+i+n}function FWe(i){return tg.call(String(i),/"/g,"&quot;")}function YO(i){return Vg(i)==="[object Array]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function NWe(i){return Vg(i)==="[object Date]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function gye(i){return Vg(i)==="[object RegExp]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function $We(i){return Vg(i)==="[object Error]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function BWe(i){return Vg(i)==="[object String]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function jWe(i){return Vg(i)==="[object Number]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function zWe(i){return Vg(i)==="[object Boolean]"&&(!Ha||!(typeof i=="object"&&Ha in i))}function BCe(i){if(Z_)return i&&typeof i=="object"&&i instanceof Symbol;if(typeof i=="symbol")return!0;if(!i||typeof i!="object"||!WO)return!1;try{return WO.call(i),!0}catch{}return!1}function GWe(i){if(!i||typeof i!="object"||!HO)return!1;try{return HO.call(i),!0}catch{}return!1}var UWe=Object.prototype.hasOwnProperty||function(i){return i in this};function jp(i,e){return UWe.call(i,e)}function Vg(i){return DWe.call(i)}function qWe(i){if(i.name)return i.name;var e=MWe.call(LWe.call(i),/^function\s*([\w$]+)/);return e?e[1]:null}function jCe(i,e){if(i.indexOf)return i.indexOf(e);for(var t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1}function VWe(i){if(!oR||!i||typeof i!="object")return!1;try{oR.call(i);try{aR.call(i)}catch{return!0}return i instanceof Map}catch{}return!1}function HWe(i){if(!rE||!i||typeof i!="object")return!1;try{rE.call(i,rE);try{sE.call(i,sE)}catch{return!0}return i instanceof WeakMap}catch{}return!1}function WWe(i){if(!aye||!i||typeof i!="object")return!1;try{return aye.call(i),!0}catch{}return!1}function XWe(i){if(!aR||!i||typeof i!="object")return!1;try{aR.call(i);try{oR.call(i)}catch{return!0}return i instanceof Set}catch{}return!1}function YWe(i){if(!sE||!i||typeof i!="object")return!1;try{sE.call(i,sE);try{rE.call(i,rE)}catch{return!0}return i instanceof WeakSet}catch{}return!1}function ZWe(i){return!i||typeof i!="object"?!1:typeof HTMLElement<"u"&&i instanceof HTMLElement?!0:typeof i.nodeName=="string"&&typeof i.getAttribute=="function"}function zCe(i,e){if(i.length>e.maxStringLength){var t=i.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return zCe(i5.call(i,0,e.maxStringLength),e)+n}var r=tg.call(tg.call(i,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,KWe);return $Ce(r,"single",e)}function KWe(i){var e=i.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+IWe.call(e.toString(16))}function sw(i){return"Object("+i+")"}function zM(i){return i+" { ? }"}function mye(i,e,t,n){var r=n?ZO(t,n):Eh.call(t,", ");return i+" ("+e+") {"+r+"}"}function JWe(i){for(var e=0;e<i.length;e++)if(jCe(i[e],`
`)>=0)return!1;return!0}function QWe(i,e){var t;if(i.indent==="	")t="	";else if(typeof i.indent=="number"&&i.indent>0)t=Eh.call(Array(i.indent+1)," ");else return null;return{base:t,prev:Eh.call(Array(e+1),t)}}function ZO(i,e){if(i.length===0)return"";var t=`
`+e.prev+e.base;return t+Eh.call(i,","+t)+`
`+e.prev}function iT(i,e){var t=YO(i),n=[];if(t){n.length=i.length;for(var r=0;r<i.length;r++)n[r]=jp(i,r)?e(i[r],i):""}var s=typeof jM=="function"?jM(i):[],o;if(Z_){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in i)jp(i,l)&&(t&&String(Number(l))===l&&l<i.length||Z_&&o["$"+l]instanceof Symbol||(FCe.call(/[^\w$]/,l)?n.push(e(l,i)+": "+e(i[l],i)):n.push(l+": "+e(i[l],i))));if(typeof jM=="function")for(var u=0;u<s.length;u++)NCe.call(i,s[u])&&n.push("["+e(s[u])+"]: "+e(i[s[u]],i));return n}var GCe=sd,Ub=ac,eXe=PWe,tXe=Ug,nT=GCe("%WeakMap%",!0),rT=GCe("%Map%",!0),iXe=Ub("WeakMap.prototype.get",!0),nXe=Ub("WeakMap.prototype.set",!0),rXe=Ub("WeakMap.prototype.has",!0),sXe=Ub("Map.prototype.get",!0),oXe=Ub("Map.prototype.set",!0),aXe=Ub("Map.prototype.has",!0),n5=function(i,e){for(var t=i,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=i.next,i.next=n,n},lXe=function(i,e){var t=n5(i,e);return t&&t.value},uXe=function(i,e,t){var n=n5(i,e);n?n.value=t:i.next={key:e,next:i.next,value:t}},cXe=function(i,e){return!!n5(i,e)},UCe=function(){var e,t,n,r={assert:function(s){if(!r.has(s))throw new tXe("Side channel does not contain "+eXe(s))},get:function(s){if(nT&&s&&(typeof s=="object"||typeof s=="function")){if(e)return iXe(e,s)}else if(rT){if(t)return sXe(t,s)}else if(n)return lXe(n,s)},has:function(s){if(nT&&s&&(typeof s=="object"||typeof s=="function")){if(e)return rXe(e,s)}else if(rT){if(t)return aXe(t,s)}else if(n)return cXe(n,s);return!1},set:function(s,o){nT&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new nT),nXe(e,s,o)):rT?(t||(t=new rT),oXe(t,s,o)):(n||(n={key:{},next:null}),uXe(n,s,o))}};return r},hXe=yCe,ow=UCe(),Fd=Ug,r5={assert:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new Fd("`O` is not an object");if(typeof e!="string")throw new Fd("`slot` must be a string");if(ow.assert(i),!r5.has(i,e))throw new Fd("`"+e+"` is not present on `O`")},get:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new Fd("`O` is not an object");if(typeof e!="string")throw new Fd("`slot` must be a string");var t=ow.get(i);return t&&t["$"+e]},has:function(i,e){if(!i||typeof i!="object"&&typeof i!="function")throw new Fd("`O` is not an object");if(typeof e!="string")throw new Fd("`slot` must be a string");var t=ow.get(i);return!!t&&hXe(t,"$"+e)},set:function(i,e,t){if(!i||typeof i!="object"&&typeof i!="function")throw new Fd("`O` is not an object");if(typeof e!="string")throw new Fd("`slot` must be a string");var n=ow.get(i);n||(n={},ow.set(i,n)),n["$"+e]=t}};Object.freeze&&Object.freeze(r5);var dXe=r5,aw=dXe,fXe=SyntaxError,yye=typeof StopIteration=="object"?StopIteration:null,pXe=function(e){if(!yye)throw new fXe("this environment lacks StopIteration");aw.set(e,"[[Done]]",!1);var t={next:function(){var r=aw.get(this,"[[Iterator]]"),s=aw.get(r,"[[Done]]");try{return{done:s,value:s?void 0:r.next()}}catch(o){if(aw.set(r,"[[Done]]",!0),o!==yye)throw o;return{done:!0,value:void 0}}}};return aw.set(t,"[[Iterator]]",e),t},GM,vye;function gXe(){if(vye)return GM;vye=1;var i={}.toString;return GM=Array.isArray||function(e){return i.call(e)=="[object Array]"},GM}var mXe=String.prototype.valueOf,yXe=function(e){try{return mXe.call(e),!0}catch{return!1}},vXe=Object.prototype.toString,_Xe="[object String]",bXe=qg(),qCe=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:bXe?yXe(e):vXe.call(e)===_Xe},s5=typeof Map=="function"&&Map.prototype?Map:null,xXe=typeof Set=="function"&&Set.prototype?Set:null,lR;s5||(lR=function(e){return!1});var VCe=s5?Map.prototype.has:null,_ye=xXe?Set.prototype.has:null;!lR&&!VCe&&(lR=function(e){return!1});var HCe=lR||function(e){if(!e||typeof e!="object")return!1;try{if(VCe.call(e),_ye)try{_ye.call(e)}catch{return!0}return e instanceof s5}catch{}return!1},wXe=typeof Map=="function"&&Map.prototype?Map:null,o5=typeof Set=="function"&&Set.prototype?Set:null,uR;o5||(uR=function(e){return!1});var bye=wXe?Map.prototype.has:null,WCe=o5?Set.prototype.has:null;!uR&&!WCe&&(uR=function(e){return!1});var XCe=uR||function(e){if(!e||typeof e!="object")return!1;try{if(WCe.call(e),bye)try{bye.call(e)}catch{return!0}return e instanceof o5}catch{}return!1},xye=QN,wye=pXe;if(WN()||LD()){var UM=Symbol.iterator;mA.exports=function(e){if(e!=null&&typeof e[UM]<"u")return e[UM]();if(xye(e))return Array.prototype[UM].call(e)}}else{var EXe=gXe(),CXe=qCe,Eye=sd,SXe=Eye("%Map%",!0),TXe=Eye("%Set%",!0),wc=ac,Cye=wc("Array.prototype.push"),Sye=wc("String.prototype.charCodeAt"),AXe=wc("String.prototype.slice"),RXe=function(e,t){var n=e.length;if(t+1>=n)return t+1;var r=Sye(e,t);if(r<55296||r>56319)return t+1;var s=Sye(e,t+1);return s<56320||s>57343?t+1:t+2},qM=function(e){var t=0;return{next:function(){var r=t>=e.length,s;return r||(s=e[t],t+=1),{done:r,value:s}}}},Tye=function(e,t){if(EXe(e)||xye(e))return qM(e);if(CXe(e)){var n=0;return{next:function(){var s=RXe(e,n),o=AXe(e,n,s);return n=s,{done:s>e.length,value:o}}}}if(t&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!SXe&&!TXe)mA.exports=function(e){if(e!=null)return Tye(e,!0)};else{var kXe=HCe,DXe=XCe,Aye=wc("Map.prototype.forEach",!0),Rye=wc("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var kye=wc("Map.prototype.iterator",!0),Dye=wc("Set.prototype.iterator",!0);var Lye=wc("Map.prototype.@@iterator",!0)||wc("Map.prototype._es6-shim iterator_",!0),Mye=wc("Set.prototype.@@iterator",!0)||wc("Set.prototype._es6-shim iterator_",!0),LXe=function(e){if(kXe(e)){if(kye)return wye(kye(e));if(Lye)return Lye(e);if(Aye){var t=[];return Aye(e,function(r,s){Cye(t,[s,r])}),qM(t)}}if(DXe(e)){if(Dye)return wye(Dye(e));if(Mye)return Mye(e);if(Rye){var n=[];return Rye(e,function(r){Cye(n,r)}),qM(n)}}};mA.exports=function(e){return LXe(e)||Tye(e)}}}var MXe=mA.exports,Iye=function(i){return i!==i},YCe=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||Iye(e)&&Iye(t))},IXe=YCe,ZCe=function(){return typeof Object.is=="function"?Object.is:IXe},OXe=ZCe,PXe=ey,FXe=function(){var e=OXe();return PXe(Object,{is:e},{is:function(){return Object.is!==e}}),e},NXe=ey,$Xe=Gb,BXe=YCe,KCe=ZCe,jXe=FXe,JCe=$Xe(KCe(),Object);NXe(JCe,{getPolyfill:KCe,implementation:BXe,shim:jXe});var zXe=JCe,GXe={}.toString,UXe=Array.isArray||function(i){return GXe.call(i)=="[object Array]"},qXe=Gb,QCe=ac,VXe=sd,KO=VXe("%ArrayBuffer%",!0),vA=QCe("ArrayBuffer.prototype.byteLength",!0),HXe=QCe("Object.prototype.toString"),Oye=!!KO&&!vA&&new KO(0).slice,Pye=!!Oye&&qXe(Oye),eSe=vA||Pye?function(e){if(!e||typeof e!="object")return!1;try{return vA?vA(e):Pye(e,0),!0}catch{return!1}}:KO?function(e){return HXe(e)==="[object ArrayBuffer]"}:function(e){return!1},WXe=Date.prototype.getDay,XXe=function(e){try{return WXe.call(e),!0}catch{return!1}},YXe=Object.prototype.toString,ZXe="[object Date]",KXe=qg(),JXe=function(e){return typeof e!="object"||e===null?!1:KXe?XXe(e):YXe.call(e)===ZXe},JO=ac,tSe=qg(),iSe,nSe,QO,eP;if(tSe){iSe=JO("Object.prototype.hasOwnProperty"),nSe=JO("RegExp.prototype.exec"),QO={};var VM=function(){throw QO};eP={toString:VM,valueOf:VM},typeof Symbol.toPrimitive=="symbol"&&(eP[Symbol.toPrimitive]=VM)}var QXe=JO("Object.prototype.toString"),eYe=Object.getOwnPropertyDescriptor,tYe="[object RegExp]",iYe=tSe?function(e){if(!e||typeof e!="object")return!1;var t=eYe(e,"lastIndex"),n=t&&iSe(t,"value");if(!n)return!1;try{nSe(e,eP)}catch(r){return r===QO}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:QXe(e)===tYe},nYe=ac,Fye=nYe("SharedArrayBuffer.prototype.byteLength",!0),rYe=Fye?function(e){if(!e||typeof e!="object")return!1;try{return Fye(e),!0}catch{return!1}}:function(e){return!1},sYe=Number.prototype.toString,oYe=function(e){try{return sYe.call(e),!0}catch{return!1}},aYe=Object.prototype.toString,lYe="[object Number]",uYe=qg(),cYe=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:uYe?oYe(e):aYe.call(e)===lYe},rSe=ac,hYe=rSe("Boolean.prototype.toString"),dYe=rSe("Object.prototype.toString"),fYe=function(e){try{return hYe(e),!0}catch{return!1}},pYe="[object Boolean]",gYe=qg(),mYe=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:gYe&&Symbol.toStringTag in e?fYe(e):dYe(e)===pYe},tP={exports:{}},yYe=Object.prototype.toString,vYe=WN();if(vYe){var _Ye=Symbol.prototype.toString,bYe=/^Symbol\(.*\)$/,xYe=function(e){return typeof e.valueOf()!="symbol"?!1:bYe.test(_Ye.call(e))};tP.exports=function(e){if(typeof e=="symbol")return!0;if(yYe.call(e)!=="[object Symbol]")return!1;try{return xYe(e)}catch{return!1}}}else tP.exports=function(e){return!1};var wYe=tP.exports,iP={exports:{}},Nye=typeof BigInt<"u"&&BigInt,EYe=function(){return typeof Nye=="function"&&typeof BigInt=="function"&&typeof Nye(42)=="bigint"&&typeof BigInt(42)=="bigint"},CYe=EYe();if(CYe){var SYe=BigInt.prototype.valueOf,TYe=function(e){try{return SYe.call(e),!0}catch{}return!1};iP.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:TYe(e)}}else iP.exports=function(e){return!1};var AYe=iP.exports,RYe=qCe,kYe=cYe,DYe=mYe,LYe=wYe,MYe=AYe,IYe=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(RYe(e))return"String";if(kYe(e))return"Number";if(DYe(e))return"Boolean";if(LYe(e))return"Symbol";if(MYe(e))return"BigInt"},cR=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$ye=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,hR;cR||(hR=function(e){return!1});var nP=cR?cR.prototype.has:null,HM=$ye?$ye.prototype.has:null;!hR&&!nP&&(hR=function(e){return!1});var OYe=hR||function(e){if(!e||typeof e!="object")return!1;try{if(nP.call(e,nP),HM)try{HM.call(e,HM)}catch{return!0}return e instanceof cR}catch{}return!1},rP={exports:{}},PYe=sd,sSe=ac,FYe=PYe("%WeakSet%",!0),WM=sSe("WeakSet.prototype.has",!0);if(WM){var XM=sSe("WeakMap.prototype.has",!0);rP.exports=function(e){if(!e||typeof e!="object")return!1;try{if(WM(e,WM),XM)try{XM(e,XM)}catch{return!0}return e instanceof FYe}catch{}return!1}}else rP.exports=function(e){return!1};var NYe=rP.exports,$Ye=HCe,BYe=XCe,jYe=OYe,zYe=NYe,GYe=function(e){if(e&&typeof e=="object"){if($Ye(e))return"Map";if(BYe(e))return"Set";if(jYe(e))return"WeakMap";if(zYe(e))return"WeakSet"}return!1},oSe=Function.prototype.toString,e_=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,sP,_A;if(typeof e_=="function"&&typeof Object.defineProperty=="function")try{sP=Object.defineProperty({},"length",{get:function(){throw _A}}),_A={},e_(function(){throw 42},null,sP)}catch(i){i!==_A&&(e_=null)}else e_=null;var UYe=/^\s*class\b/,oP=function(e){try{var t=oSe.call(e);return UYe.test(t)}catch{return!1}},YM=function(e){try{return oP(e)?!1:(oSe.call(e),!0)}catch{return!1}},bA=Object.prototype.toString,qYe="[object Object]",VYe="[object Function]",HYe="[object GeneratorFunction]",WYe="[object HTMLAllCollection]",XYe="[object HTML document.all class]",YYe="[object HTMLCollection]",ZYe=typeof Symbol=="function"&&!!Symbol.toStringTag,KYe=!(0 in[,]),aP=function(){return!1};if(typeof document=="object"){var JYe=document.all;bA.call(JYe)===bA.call(document.all)&&(aP=function(e){if((KYe||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=bA.call(e);return(t===WYe||t===XYe||t===YYe||t===qYe)&&e("")==null}catch{}return!1})}var QYe=e_?function(e){if(aP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{e_(e,null,sP)}catch(t){if(t!==_A)return!1}return!oP(e)&&YM(e)}:function(e){if(aP(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(ZYe)return YM(e);if(oP(e))return!1;var t=bA.call(e);return t!==VYe&&t!==HYe&&!/^\[object HTML/.test(t)?!1:YM(e)},eZe=QYe,tZe=Object.prototype.toString,aSe=Object.prototype.hasOwnProperty,iZe=function(e,t,n){for(var r=0,s=e.length;r<s;r++)aSe.call(e,r)&&(n==null?t(e[r],r,e):t.call(n,e[r],r,e))},nZe=function(e,t,n){for(var r=0,s=e.length;r<s;r++)n==null?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},rZe=function(e,t,n){for(var r in e)aSe.call(e,r)&&(n==null?t(e[r],r,e):t.call(n,e[r],r,e))},sZe=function(e,t,n){if(!eZe(t))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=n),tZe.call(e)==="[object Array]"?iZe(e,t,r):typeof e=="string"?nZe(e,t,r):rZe(e,t,r)},oZe=sZe,ZM=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],aZe=typeof globalThis>"u"?Jr:globalThis,lZe=function(){for(var e=[],t=0;t<ZM.length;t++)typeof aZe[ZM[t]]=="function"&&(e[e.length]=ZM[t]);return e},dR=oZe,uZe=lZe,Bye=Gb,a5=ac,xA=ZN,cZe=a5("Object.prototype.toString"),lSe=qg(),jye=typeof globalThis>"u"?Jr:globalThis,lP=uZe(),l5=a5("String.prototype.slice"),KM=Object.getPrototypeOf,hZe=a5("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},fR={__proto__:null};lSe&&xA&&KM?dR(lP,function(i){var e=new jye[i];if(Symbol.toStringTag in e){var t=KM(e),n=xA(t,Symbol.toStringTag);if(!n){var r=KM(t);n=xA(r,Symbol.toStringTag)}fR["$"+i]=Bye(n.get)}}):dR(lP,function(i){var e=new jye[i],t=e.slice||e.set;t&&(fR["$"+i]=Bye(t))});var dZe=function(e){var t=!1;return dR(fR,function(n,r){if(!t)try{"$"+n(e)===r&&(t=l5(r,1))}catch{}}),t},fZe=function(e){var t=!1;return dR(fR,function(n,r){if(!t)try{n(e),t=l5(r,1)}catch{}}),t},u5=function(e){if(!e||typeof e!="object")return!1;if(!lSe){var t=l5(cZe(e),8,-1);return hZe(lP,t)>-1?t:t!=="Object"?!1:fZe(e)}return xA?dZe(e):null},pZe=ac,zye=pZe("ArrayBuffer.prototype.byteLength",!0),gZe=eSe,mZe=function(e){return gZe(e)?zye?zye(e):e.byteLength:NaN},uSe=YHe,od=ac,Gye=_We,yZe=sd,K_=MXe,vZe=UCe,Uye=zXe,qye=QN,Vye=UXe,Hye=eSe,Wye=JXe,Xye=iYe,Yye=rYe,Zye=HN,Kye=IYe,Jye=GYe,Qye=u5,eve=mZe,tve=od("SharedArrayBuffer.prototype.byteLength",!0),ive=od("Date.prototype.getTime"),JM=Object.getPrototypeOf,nve=od("Object.prototype.toString"),pR=yZe("%Set%",!0),uP=od("Map.prototype.has",!0),gR=od("Map.prototype.get",!0),rve=od("Map.prototype.size",!0),mR=od("Set.prototype.add",!0),cSe=od("Set.prototype.delete",!0),yR=od("Set.prototype.has",!0),wA=od("Set.prototype.size",!0);function sve(i,e,t,n){for(var r=K_(i),s;(s=r.next())&&!s.done;)if(Nc(e,s.value,t,n))return cSe(i,s.value),!0;return!1}function hSe(i){if(typeof i>"u")return null;if(typeof i!="object")return typeof i=="symbol"?!1:typeof i=="string"||typeof i=="number"?+i==+i:!0}function _Ze(i,e,t,n,r,s){var o=hSe(t);if(o!=null)return o;var a=gR(e,o),l=uSe({},r,{strict:!1});return typeof a>"u"&&!uP(e,o)||!Nc(n,a,l,s)?!1:!uP(i,o)&&Nc(n,a,l,s)}function bZe(i,e,t){var n=hSe(t);return n??(yR(e,n)&&!yR(i,n))}function ove(i,e,t,n,r,s){for(var o=K_(i),a,l;(a=o.next())&&!a.done;)if(l=a.value,Nc(t,l,r,s)&&Nc(n,gR(e,l),r,s))return cSe(i,l),!0;return!1}function Nc(i,e,t,n){var r=t||{};if(r.strict?Uye(i,e):i===e)return!0;var s=Kye(i),o=Kye(e);if(s!==o)return!1;if(!i||!e||typeof i!="object"&&typeof e!="object")return r.strict?Uye(i,e):i==e;var a=n.has(i),l=n.has(e),u;if(a&&l){if(n.get(i)===n.get(e))return!0}else u={};return a||n.set(i,u),l||n.set(e,u),EZe(i,e,r,n)}function ave(i){return!i||typeof i!="object"||typeof i.length!="number"||typeof i.copy!="function"||typeof i.slice!="function"||i.length>0&&typeof i[0]!="number"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function xZe(i,e,t,n){if(wA(i)!==wA(e))return!1;for(var r=K_(i),s=K_(e),o,a,l;(o=r.next())&&!o.done;)if(o.value&&typeof o.value=="object")l||(l=new pR),mR(l,o.value);else if(!yR(e,o.value)){if(t.strict||!bZe(i,e,o.value))return!1;l||(l=new pR),mR(l,o.value)}if(l){for(;(a=s.next())&&!a.done;)if(a.value&&typeof a.value=="object"){if(!sve(l,a.value,t.strict,n))return!1}else if(!t.strict&&!yR(i,a.value)&&!sve(l,a.value,t.strict,n))return!1;return wA(l)===0}return!0}function wZe(i,e,t,n){if(rve(i)!==rve(e))return!1;for(var r=K_(i),s=K_(e),o,a,l,u,c,h;(o=r.next())&&!o.done;)if(u=o.value[0],c=o.value[1],u&&typeof u=="object")l||(l=new pR),mR(l,u);else if(h=gR(e,u),typeof h>"u"&&!uP(e,u)||!Nc(c,h,t,n)){if(t.strict||!_Ze(i,e,u,c,t,n))return!1;l||(l=new pR),mR(l,u)}if(l){for(;(a=s.next())&&!a.done;)if(u=a.value[0],h=a.value[1],u&&typeof u=="object"){if(!ove(l,i,u,h,t,n))return!1}else if(!t.strict&&(!i.has(u)||!Nc(gR(i,u),h,t,n))&&!ove(l,i,u,h,uSe({},t,{strict:!1}),n))return!1;return wA(l)===0}return!0}function EZe(i,e,t,n){var r,s;if(typeof i!=typeof e||i==null||e==null||nve(i)!==nve(e)||qye(i)!==qye(e))return!1;var o=Vye(i),a=Vye(e);if(o!==a)return!1;var l=i instanceof Error,u=e instanceof Error;if(l!==u||(l||u)&&(i.name!==e.name||i.message!==e.message))return!1;var c=Xye(i),h=Xye(e);if(c!==h||(c||h)&&(i.source!==e.source||Gye(i)!==Gye(e)))return!1;var d=Wye(i),f=Wye(e);if(d!==f||(d||f)&&ive(i)!==ive(e)||t.strict&&JM&&JM(i)!==JM(e))return!1;var p=Qye(i),m=Qye(e);if(p!==m)return!1;if(p||m){if(i.length!==e.length)return!1;for(r=0;r<i.length;r++)if(i[r]!==e[r])return!1;return!0}var y=ave(i),v=ave(e);if(y!==v)return!1;if(y||v){if(i.length!==e.length)return!1;for(r=0;r<i.length;r++)if(i[r]!==e[r])return!1;return!0}var b=Hye(i),x=Hye(e);if(b!==x)return!1;if(b||x)return eve(i)!==eve(e)?!1:typeof Uint8Array=="function"&&Nc(new Uint8Array(i),new Uint8Array(e),t,n);var w=Yye(i),C=Yye(e);if(w!==C)return!1;if(w||C)return tve(i)!==tve(e)?!1:typeof Uint8Array=="function"&&Nc(new Uint8Array(i),new Uint8Array(e),t,n);if(typeof i!=typeof e)return!1;var D=Zye(i),R=Zye(e);if(D.length!==R.length)return!1;for(D.sort(),R.sort(),r=D.length-1;r>=0;r--)if(D[r]!=R[r])return!1;for(r=D.length-1;r>=0;r--)if(s=D[r],!Nc(i[s],e[s],t,n))return!1;var A=Jye(i),L=Jye(e);return A!==L?!1:A==="Set"||L==="Set"?xZe(i,e,t,n):A==="Map"?wZe(i,e,t,n):!0}var CZe=function(e,t,n){return Nc(e,t,n,vZe())};const SZe=Ea(CZe);var TZe=Object.defineProperty,Gr=(i,e)=>TZe(i,"name",{value:e,configurable:!0}),AZe=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,n,r;this.precision=10**-((t=e==null?void 0:e.precision)!=null?t:17),this.direction=(n=e==null?void 0:e.direction)!=null?n:!1,this.compareProperties=(r=e==null?void 0:e.compareProperties)!=null?r:!0}compare(e,t){if(e.type!==t.type||!Lw(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const n=cP(e),r=cP(t);return n.every(s=>r.some(o=>this.compare(s,o)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((n,r)=>Math.abs(n-t[r])<this.precision)}compareLine(e,t,n=0,r=!1){if(!Lw(e,t))return!1;const s=e;let o=t;if(r&&!this.compareCoord(s[0],o[0])){const l=this.fixStartIndex(o,s);if(l)o=l;else return!1}const a=this.compareCoord(s[n],o[n]);return this.direction||a?this.comparePath(s,o):this.compareCoord(s[n],o[o.length-(1+n)])?this.comparePath(s.slice().reverse(),o):!1}fixStartIndex(e,t){let n,r=-1;for(let s=0;s<e.length;s++)if(this.compareCoord(e[s],t[0])){r=s;break}return r>=0&&(n=[].concat(e.slice(r,e.length),e.slice(1,r+1))),n}comparePath(e,t){return e.every((n,r)=>this.compareCoord(n,t[r]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const n=e.coordinates.slice(1,e.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length);return n.every(s=>r.some(o=>this.compareLine(s,o,1,!0)))}return!1}compareGeometryCollection(e,t){return Lw(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((n,r)=>this.compare(n,t.geometries[r]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?SZe(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return Lw(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((n,r)=>this.compare(n,t.features[r]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};Gr(AZe,"GeojsonEquality");function Lw(i,e){return i.coordinates?i.coordinates.length===e.coordinates.length:i.length===e.length}Gr(Lw,"sameLength");function cP(i){return i.coordinates.map(e=>({type:i.type.replace("Multi",""),coordinates:e}))}Gr(cP,"explode");var nu=63710088e-1,dSe={centimeters:nu*100,centimetres:nu*100,degrees:360/(2*Math.PI),feet:nu*3.28084,inches:nu*39.37,kilometers:nu/1e3,kilometres:nu/1e3,meters:nu,metres:nu,miles:nu/1609.344,millimeters:nu*1e3,millimetres:nu*1e3,nauticalmiles:nu/1852,radians:1,yards:nu*1.0936},lve={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ic(i,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=i,n}Gr(ic,"feature");function RZe(i,e,t={}){switch(i){case"Point":return Ch(e).geometry;case"LineString":return Dh(e).geometry;case"Polygon":return c5(e).geometry;case"MultiPoint":return fSe(e).geometry;case"MultiLineString":return h5(e).geometry;case"MultiPolygon":return pSe(e).geometry;default:throw new Error(i+" is invalid")}}Gr(RZe,"geometry");function Ch(i,e,t={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!J_(i[0])||!J_(i[1]))throw new Error("coordinates must contain numbers");return ic({type:"Point",coordinates:i},e,t)}Gr(Ch,"point");function kZe(i,e,t={}){return P0(i.map(n=>Ch(n,e)),t)}Gr(kZe,"points");function c5(i,e,t={}){for(const r of i){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<r[r.length-1].length;s++)if(r[r.length-1][s]!==r[0][s])throw new Error("First and last Position are not equivalent.")}return ic({type:"Polygon",coordinates:i},e,t)}Gr(c5,"polygon");function DZe(i,e,t={}){return P0(i.map(n=>c5(n,e)),t)}Gr(DZe,"polygons");function Dh(i,e,t={}){if(i.length<2)throw new Error("coordinates must be an array of two or more positions");return ic({type:"LineString",coordinates:i},e,t)}Gr(Dh,"lineString");function LZe(i,e,t={}){return P0(i.map(n=>Dh(n,e)),t)}Gr(LZe,"lineStrings");function P0(i,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}Gr(P0,"featureCollection");function h5(i,e,t={}){return ic({type:"MultiLineString",coordinates:i},e,t)}Gr(h5,"multiLineString");function fSe(i,e,t={}){return ic({type:"MultiPoint",coordinates:i},e,t)}Gr(fSe,"multiPoint");function pSe(i,e,t={}){return ic({type:"MultiPolygon",coordinates:i},e,t)}Gr(pSe,"multiPolygon");function MZe(i,e,t={}){return ic({type:"GeometryCollection",geometries:i},e,t)}Gr(MZe,"geometryCollection");function IZe(i,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const t=Math.pow(10,e||0);return Math.round(i*t)/t}Gr(IZe,"round");function gSe(i,e="kilometers"){const t=dSe[e];if(!t)throw new Error(e+" units is invalid");return i*t}Gr(gSe,"radiansToLength");function d5(i,e="kilometers"){const t=dSe[e];if(!t)throw new Error(e+" units is invalid");return i/t}Gr(d5,"lengthToRadians");function OZe(i,e){return mSe(d5(i,e))}Gr(OZe,"lengthToDegrees");function PZe(i){let e=i%360;return e<0&&(e+=360),e}Gr(PZe,"bearingToAzimuth");function mSe(i){return i%(2*Math.PI)*180/Math.PI}Gr(mSe,"radiansToDegrees");function FZe(i){return i%360*Math.PI/180}Gr(FZe,"degreesToRadians");function NZe(i,e="kilometers",t="kilometers"){if(!(i>=0))throw new Error("length must be a positive number");return gSe(d5(i,e),t)}Gr(NZe,"convertLength");function $Ze(i,e="meters",t="kilometers"){if(!(i>=0))throw new Error("area must be a positive number");const n=lve[e];if(!n)throw new Error("invalid original units");const r=lve[t];if(!r)throw new Error("invalid final units");return i/n*r}Gr($Ze,"convertArea");function J_(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}Gr(J_,"isNumber");function f5(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)}Gr(f5,"isObject");function BZe(i){if(!i)throw new Error("bbox is required");if(!Array.isArray(i))throw new Error("bbox must be an Array");if(i.length!==4&&i.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");i.forEach(e=>{if(!J_(e))throw new Error("bbox must only contain numbers")})}Gr(BZe,"validateBBox");function jZe(i){if(!i)throw new Error("id is required");if(["string","number"].indexOf(typeof i)===-1)throw new Error("id must be a number or a string")}Gr(jZe,"validateId");var zZe=Object.defineProperty,Hg=(i,e)=>zZe(i,"name",{value:e,configurable:!0});function p5(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}Hg(p5,"getCoord");function ySe(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Hg(ySe,"getCoords");function vSe(i){if(i.length>1&&J_(i[0])&&J_(i[1]))return!0;if(Array.isArray(i[0])&&i[0].length)return vSe(i[0]);throw new Error("coordinates must only contain numbers")}Hg(vSe,"containsNumber");function GZe(i,e,t){if(!e||!t)throw new Error("type and name required");if(!i||i.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+i.type)}Hg(GZe,"geojsonType");function UZe(i,e,t){if(!i)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!i||i.type!=="Feature"||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+i.geometry.type)}Hg(UZe,"featureOf");function qZe(i,e,t){if(!i)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!i||i.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(const n of i.features){if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)}}Hg(qZe,"collectionOf");function F0(i){return i.type==="Feature"?i.geometry:i}Hg(F0,"getGeom");function VZe(i,e){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}Hg(VZe,"getType");var HZe=Object.defineProperty,_Se=(i,e)=>HZe(i,"name",{value:e,configurable:!0});function wu(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=p5(i),r=F0(e),s=r.type,o=e.bbox;let a=r.coordinates;if(o&&bSe(n,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const c=NVe(n,a[u]);if(c===0)return!t.ignoreBoundary;c&&(l=!0)}return l}_Se(wu,"booleanPointInPolygon");function bSe(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}_Se(bSe,"inBBox");class xSe{constructor(e=[],t=WZe){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(n(r,o)>=0)break;t[e]=o,e=s}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,s=t[e];for(;e<r;){let o=(e<<1)+1,a=t[o];const l=o+1;if(l<this.length&&n(t[l],a)<0&&(o=l,a=t[l]),n(a,s)>=0)break;t[e]=a,e=o}t[e]=s}}function WZe(i,e){return i<e?-1:i>e?1:0}function wSe(i,e){return i.p.x>e.p.x?1:i.p.x<e.p.x?-1:i.p.y!==e.p.y?i.p.y>e.p.y?1:-1:1}function XZe(i,e){return i.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:i.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:i.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?i.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}let uve=class{constructor(e,t,n,r){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=n,this.eventId=r,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function YZe(i,e){if(i.type==="FeatureCollection"){const t=i.features;for(let n=0;n<t.length;n++)cve(t[n],e)}else cve(i,e)}let sT=0,oT=0,aT=0;function cve(i,e){const t=i.type==="Feature"?i.geometry:i;let n=t.coordinates;(t.type==="Polygon"||t.type==="MultiLineString")&&(n=[n]),t.type==="LineString"&&(n=[[n]]);for(let r=0;r<n.length;r++)for(let s=0;s<n[r].length;s++){let o=n[r][s][0],a=null;oT=oT+1;for(let l=0;l<n[r][s].length-1;l++){a=n[r][s][l+1];const u=new uve(o,sT,oT,aT),c=new uve(a,sT,oT,aT+1);u.otherEvent=c,c.otherEvent=u,wSe(u,c)>0?(c.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,c.isLeftEndpoint=!1),e.push(u),e.push(c),o=a,aT=aT+1}}sT=sT+1}class ZZe{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function KZe(i,e){if(i===null||e===null||i.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.leftSweepEvent)||i.rightSweepEvent.isSamePoint(e.rightSweepEvent)||i.leftSweepEvent.isSamePoint(e.leftSweepEvent)||i.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const t=i.leftSweepEvent.p.x,n=i.leftSweepEvent.p.y,r=i.rightSweepEvent.p.x,s=i.rightSweepEvent.p.y,o=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,u=e.rightSweepEvent.p.y,c=(u-a)*(r-t)-(l-o)*(s-n),h=(l-o)*(n-a)-(u-a)*(t-o),d=(r-t)*(n-a)-(s-n)*(t-o);if(c===0)return!1;const f=h/c,p=d/c;if(f>=0&&f<=1&&p>=0&&p<=1){const m=t+f*(r-t),y=n+f*(s-n);return[m,y]}return!1}function JZe(i,e){e=e||!1;const t=[],n=new xSe([],XZe);for(;i.length;){const r=i.pop();if(r.isLeftEndpoint){const s=new ZZe(r);for(let o=0;o<n.data.length;o++){const a=n.data[o];if(e&&a.leftSweepEvent.featureId===r.featureId)continue;const l=KZe(s,a);l!==!1&&t.push(l)}n.push(s)}else r.isLeftEndpoint===!1&&n.pop()}return t}function QZe(i,e){const t=new xSe([],wSe);return YZe(i,t),JZe(t,e)}var eKe=Object.defineProperty,tKe=(i,e)=>eKe(i,"name",{value:e,configurable:!0}),iKe=QZe;function ID(i,e,t={}){const{removeDuplicates:n=!0,ignoreSelfIntersections:r=!1}=t;let s=[];i.type==="FeatureCollection"?s=s.concat(i.features):i.type==="Feature"?s.push(i):(i.type==="LineString"||i.type==="Polygon"||i.type==="MultiLineString"||i.type==="MultiPolygon")&&s.push(ic(i)),e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(ic(e));const o=iKe(P0(s),r);let a=[];if(n){const l={};o.forEach(u=>{const c=u.join(",");l[c]||(l[c]=!0,a.push(u))})}else a=o;return P0(a.map(l=>Ch(l)))}tKe(ID,"lineIntersect");var nKe=Object.defineProperty,Ca=(i,e)=>nKe(i,"name",{value:e,configurable:!0});function qb(i,e,t){if(i!==null)for(var n,r,s,o,a,l,u,c=0,h=0,d,f=i.type,p=f==="FeatureCollection",m=f==="Feature",y=p?i.features.length:1,v=0;v<y;v++){u=p?i.features[v].geometry:m?i.geometry:i,d=u?u.type==="GeometryCollection":!1,a=d?u.geometries.length:1;for(var b=0;b<a;b++){var x=0,w=0;if(o=d?u.geometries[b]:u,o!==null){l=o.coordinates;var C=o.type;switch(c=t&&(C==="Polygon"||C==="MultiPolygon")?1:0,C){case null:break;case"Point":if(e(l,h,v,x,w)===!1)return!1;h++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(e(l[n],h,v,x,w)===!1)return!1;h++,C==="MultiPoint"&&x++}C==="LineString"&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-c;r++){if(e(l[n][r],h,v,x,w)===!1)return!1;h++}C==="MultiLineString"&&x++,C==="Polygon"&&w++}C==="Polygon"&&x++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(w=0,r=0;r<l[n].length;r++){for(s=0;s<l[n][r].length-c;s++){if(e(l[n][r][s],h,v,x,w)===!1)return!1;h++}w++}x++}break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(qb(o.geometries[n],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}Ca(qb,"coordEach");function rKe(i,e,t,n){var r=t;return qb(i,function(s,o,a,l,u){o===0&&t===void 0?r=s:r=e(r,s,o,a,l,u)},n),r}Ca(rKe,"coordReduce");function ESe(i,e){var t;switch(i.type){case"FeatureCollection":for(t=0;t<i.features.length&&e(i.features[t].properties,t)!==!1;t++);break;case"Feature":e(i.properties,0);break}}Ca(ESe,"propEach");function sKe(i,e,t){var n=t;return ESe(i,function(r,s){s===0&&t===void 0?n=r:n=e(n,r,s)}),n}Ca(sKe,"propReduce");function CSe(i,e){if(i.type==="Feature")e(i,0);else if(i.type==="FeatureCollection")for(var t=0;t<i.features.length&&e(i.features[t],t)!==!1;t++);}Ca(CSe,"featureEach");function oKe(i,e,t){var n=t;return CSe(i,function(r,s){s===0&&t===void 0?n=r:n=e(n,r,s)}),n}Ca(oKe,"featureReduce");function aKe(i){var e=[];return qb(i,function(t){e.push(t)}),e}Ca(aKe,"coordAll");function g5(i,e){var t,n,r,s,o,a,l,u,c,h,d=0,f=i.type==="FeatureCollection",p=i.type==="Feature",m=f?i.features.length:1;for(t=0;t<m;t++){for(a=f?i.features[t].geometry:p?i.geometry:i,u=f?i.features[t].properties:p?i.properties:{},c=f?i.features[t].bbox:p?i.bbox:void 0,h=f?i.features[t].id:p?i.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,r=0;r<o;r++){if(s=l?a.geometries[r]:a,s===null){if(e(null,d,u,c,h)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,d,u,c,h)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<s.geometries.length;n++)if(e(s.geometries[n],d,u,c,h)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}Ca(g5,"geomEach");function lKe(i,e,t){var n=t;return g5(i,function(r,s,o,a,l){s===0&&t===void 0?n=r:n=e(n,r,s,o,a,l)}),n}Ca(lKe,"geomReduce");function Dg(i,e){g5(i,function(t,n,r,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(ic(t,r,{bbox:s,id:o}),n,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],h={type:l,coordinates:c};if(e(ic(h,r),n,u)===!1)return!1}})}Ca(Dg,"flattenEach");function uKe(i,e,t){var n=t;return Dg(i,function(r,s,o){s===0&&o===0&&t===void 0?n=r:n=e(n,r,s,o)}),n}Ca(uKe,"flattenReduce");function SSe(i,e){Dg(i,function(t,n,r){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,u=0,c=0;if(qb(t,function(h,d,f,p,m){if(a===void 0||n>l||p>u||m>c){a=h,l=n,u=p,c=m,s=0;return}var y=Dh([a,h],t.properties);if(e(y,n,r,m,s)===!1)return!1;s++,a=h})===!1)return!1}}})}Ca(SSe,"segmentEach");function cKe(i,e,t){var n=t,r=!1;return SSe(i,function(s,o,a,l,u){r===!1&&t===void 0?n=s:n=e(n,s,o,a,l,u),r=!0}),n}Ca(cKe,"segmentReduce");function TSe(i,e){if(!i)throw new Error("geojson is required");Dg(i,function(t,n,r){if(t.geometry!==null){var s=t.geometry.type,o=t.geometry.coordinates;switch(s){case"LineString":if(e(t,n,r,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(e(Dh(o[a],t.properties),n,r,a)===!1)return!1;break}}})}Ca(TSe,"lineEach");function hKe(i,e,t){var n=t;return TSe(i,function(r,s,o,a){s===0&&t===void 0?n=r:n=e(n,r,s,o,a)}),n}Ca(hKe,"lineReduce");function dKe(i,e){if(e=e||{},!f5(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,r=e.geometryIndex||0,s=e.segmentIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),Dh([l[s],l[s+1]],o,e);case"Polygon":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),Dh([l[r][s],l[r][s+1]],o,e);case"MultiLineString":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s-1),Dh([l[n][s],l[n][s+1]],o,e);case"MultiPolygon":return n<0&&(n=l.length+n),r<0&&(r=l[n].length+r),s<0&&(s=l[n][r].length-s-1),Dh([l[n][r][s],l[n][r][s+1]],o,e)}throw new Error("geojson is invalid")}Ca(dKe,"findSegment");function fKe(i,e){if(e=e||{},!f5(e))throw new Error("options is invalid");var t=e.featureIndex||0,n=e.multiFeatureIndex||0,r=e.geometryIndex||0,s=e.coordIndex||0,o=e.properties,a;switch(i.type){case"FeatureCollection":t<0&&(t=i.features.length+t),o=o||i.features[t].properties,a=i.features[t].geometry;break;case"Feature":o=o||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":return Ch(l,o,e);case"MultiPoint":return n<0&&(n=l.length+n),Ch(l[n],o,e);case"LineString":return s<0&&(s=l.length+s),Ch(l[s],o,e);case"Polygon":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),Ch(l[r][s],o,e);case"MultiLineString":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s),Ch(l[n][s],o,e);case"MultiPolygon":return n<0&&(n=l.length+n),r<0&&(r=l[n].length+r),s<0&&(s=l[n][r].length-s),Ch(l[n][r][s],o,e)}throw new Error("geojson is invalid")}Ca(fKe,"findPoint");var pKe=Object.defineProperty,OD=(i,e)=>pKe(i,"name",{value:e,configurable:!0});function vR(i,e={}){const t=F0(i);switch(!e.properties&&i.type==="Feature"&&(e.properties=i.properties),t.type){case"Polygon":return ASe(t,e);case"MultiPolygon":return RSe(t,e);default:throw new Error("invalid poly")}}OD(vR,"polygonToLine");function ASe(i,e={}){const n=F0(i).coordinates,r=e.properties?e.properties:i.type==="Feature"?i.properties:{};return m5(n,r)}OD(ASe,"singlePolygonToLine");function RSe(i,e={}){const n=F0(i).coordinates,r=e.properties?e.properties:i.type==="Feature"?i.properties:{},s=[];return n.forEach(o=>{s.push(m5(o,r))}),P0(s)}OD(RSe,"multiPolygonToLine");function m5(i,e){return i.length>1?h5(i,e):Dh(i[0],e)}OD(m5,"coordsToLine");var gKe=Object.defineProperty,Wg=(i,e)=>gKe(i,"name",{value:e,configurable:!0});function kSe(i,e){let t=!0;return Dg(i,n=>{Dg(e,r=>{if(t===!1)return!1;t=DSe(n.geometry,r.geometry)})}),t}Wg(kSe,"booleanDisjoint");function DSe(i,e){switch(i.type){case"Point":switch(e.type){case"Point":return!OSe(i.coordinates,e.coordinates);case"LineString":return!hP(e,i);case"Polygon":return!wu(i,e)}break;case"LineString":switch(e.type){case"Point":return!hP(i,e);case"LineString":return!LSe(i,e);case"Polygon":return!dP(e,i)}break;case"Polygon":switch(e.type){case"Point":return!wu(e,i);case"LineString":return!dP(i,e);case"Polygon":return!MSe(e,i)}}return!1}Wg(DSe,"disjoint");function hP(i,e){for(let t=0;t<i.coordinates.length-1;t++)if(ISe(i.coordinates[t],i.coordinates[t+1],e.coordinates))return!0;return!1}Wg(hP,"isPointOnLine");function LSe(i,e){return ID(i,e).features.length>0}Wg(LSe,"isLineOnLine");function dP(i,e){for(const n of e.coordinates)if(wu(n,i))return!0;return ID(e,vR(i)).features.length>0}Wg(dP,"isLineInPoly");function MSe(i,e){for(const n of i.coordinates[0])if(wu(n,e))return!0;for(const n of e.coordinates[0])if(wu(n,i))return!0;return ID(vR(i),vR(e)).features.length>0}Wg(MSe,"isPolyInPoly");function ISe(i,e,t){const n=t[0]-i[0],r=t[1]-i[1],s=e[0]-i[0],o=e[1]-i[1];return n*o-r*s!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?i[0]<=t[0]&&t[0]<=e[0]:e[0]<=t[0]&&t[0]<=i[0]:o>0?i[1]<=t[1]&&t[1]<=e[1]:e[1]<=t[1]&&t[1]<=i[1]}Wg(ISe,"isPointOnLineSegment");function OSe(i,e){return i[0]===e[0]&&i[1]===e[1]}Wg(OSe,"compareCoords");var mKe=Object.defineProperty,yKe=(i,e)=>mKe(i,"name",{value:e,configurable:!0});function PSe(i,e){let t=!1;return Dg(i,n=>{Dg(e,r=>{if(t===!0)return!0;t=!kSe(n.geometry,r.geometry)})}),t}yKe(PSe,"booleanIntersects");var vKe=Object.defineProperty,_Ke=(i,e)=>vKe(i,"name",{value:e,configurable:!0});function GE(i,e={}){if(i.bbox!=null&&e.recompute!==!0)return i.bbox;const t=[1/0,1/0,-1/0,-1/0];return qb(i,n=>{t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}_Ke(GE,"bbox");var bKe=Object.defineProperty,FSe=(i,e)=>bKe(i,"name",{value:e,configurable:!0});function UE(i,e,t={}){const n=p5(i),r=ySe(e);for(let s=0;s<r.length-1;s++){let o=!1;if(t.ignoreEndVertices&&(s===0&&(o="start"),s===r.length-2&&(o="end"),s===0&&s+1===r.length-1&&(o="both")),NSe(r[s],r[s+1],n,o,typeof t.epsilon>"u"?null:t.epsilon))return!0}return!1}FSe(UE,"booleanPointOnLine");function NSe(i,e,t,n,r){const s=t[0],o=t[1],a=i[0],l=i[1],u=e[0],c=e[1],h=t[0]-a,d=t[1]-l,f=u-a,p=c-l,m=h*p-d*f;if(r!==null){if(Math.abs(m)>r)return!1}else if(m!==0)return!1;if(n){if(n==="start")return Math.abs(f)>=Math.abs(p)?f>0?a<s&&s<=u:u<=s&&s<a:p>0?l<o&&o<=c:c<=o&&o<l;if(n==="end")return Math.abs(f)>=Math.abs(p)?f>0?a<=s&&s<u:u<s&&s<=a:p>0?l<=o&&o<c:c<o&&o<=l;if(n==="both")return Math.abs(f)>=Math.abs(p)?f>0?a<s&&s<u:u<s&&s<a:p>0?l<o&&o<c:c<o&&o<l}else return Math.abs(f)>=Math.abs(p)?f>0?a<=s&&s<=u:u<=s&&s<=a:p>0?l<=o&&o<=c:c<=o&&o<=l;return!1}FSe(NSe,"isPointOnLineSegment");var xKe=Object.defineProperty,th=(i,e)=>xKe(i,"name",{value:e,configurable:!0});function $Se(i,e){var t=F0(i),n=F0(e),r=t.type,s=n.type;switch(r){case"Point":switch(s){case"MultiPoint":return BSe(t,n);case"LineString":return UE(t,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return wu(t,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return jSe(t,n);case"LineString":return zSe(t,n);case"Polygon":case"MultiPolygon":return GSe(t,n);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return USe(t,n);case"Polygon":case"MultiPolygon":return qSe(t,n);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return VSe(t,n);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}th($Se,"booleanWithin");function BSe(i,e){var t,n=!1;for(t=0;t<e.coordinates.length;t++)if(v5(e.coordinates[t],i.coordinates)){n=!0;break}return n}th(BSe,"isPointInMultiPoint");function jSe(i,e){for(var t=0;t<i.coordinates.length;t++){for(var n=!1,r=0;r<e.coordinates.length;r++)v5(i.coordinates[t],e.coordinates[r])&&(n=!0);if(!n)return!1}return!0}th(jSe,"isMultiPointInMultiPoint");function zSe(i,e){for(var t=!1,n=0;n<i.coordinates.length;n++){if(!UE(i.coordinates[n],e))return!1;t||(t=UE(i.coordinates[n],e,{ignoreEndVertices:!0}))}return t}th(zSe,"isMultiPointOnLine");function GSe(i,e){for(var t=!0,n=!1,r=0;r<i.coordinates.length;r++){if(n=wu(i.coordinates[r],e),!n){t=!1;break}n=wu(i.coordinates[r],e,{ignoreBoundary:!0})}return t&&n}th(GSe,"isMultiPointInPoly");function USe(i,e){for(var t=0;t<i.coordinates.length;t++)if(!UE(i.coordinates[t],e))return!1;return!0}th(USe,"isLineOnLine");function qSe(i,e){var t=GE(e),n=GE(i);if(!y5(t,n))return!1;for(var r=!1,s=0;s<i.coordinates.length;s++){if(!wu(i.coordinates[s],e))return!1;if(r||(r=wu(i.coordinates[s],e,{ignoreBoundary:!0})),!r&&s<i.coordinates.length-1){var o=HSe(i.coordinates[s],i.coordinates[s+1]);r=wu(o,e,{ignoreBoundary:!0})}}return r}th(qSe,"isLineInPoly");function VSe(i,e){var t=GE(i),n=GE(e);if(!y5(n,t))return!1;for(var r=0;r<i.coordinates[0].length;r++)if(!wu(i.coordinates[0][r],e))return!1;return!0}th(VSe,"isPolyInPoly");function y5(i,e){return!(i[0]>e[0]||i[2]<e[2]||i[1]>e[1]||i[3]<e[3])}th(y5,"doBBoxOverlap");function v5(i,e){return i[0]===e[0]&&i[1]===e[1]}th(v5,"compareCoords");function HSe(i,e){return[(i[0]+e[0])/2,(i[1]+e[1])/2]}th(HSe,"getMidpoint");var wKe=Object.defineProperty,EKe=Object.getOwnPropertyDescriptor,uC=(i,e,t,n)=>{for(var r=n>1?void 0:n?EKe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&wKe(e,t,r),r};const CKe=(i,e)=>e?PSe(i,e):!0,SKe=(i,e)=>e?$Se(i,e):!0;let fP=class extends Yn{reset(){jb(this.filterObject),this.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),this.requestUpdate()}createRenderRoot(){return this}render(){return Hi(this.filterObject,()=>{var i;return tt`
      <form style="display: inline">
      ${$l(["intersects","within"],e=>tt`
          <label>
            <input
              type="radio"
              name="mode"
              .checked="${this.filterObject.state.mode===e||In}
              "
              value="${e}"
              @click="${()=>{this.filterObject.state.mode=e;const t=new CustomEvent("filter",{detail:{[this.filterObject.key]:{}}});this.dispatchEvent(t)}}"
            />
            <small>${e} filter geometry</small>
          </label>
        `)}
      </form>
      <eox-itemfilter-spatial-filter
        exportparts="map: spatial-filter-map"
        .geometry=${(i=this.filterObject.state)==null?void 0:i.geometry}
        @filter="${e=>{this.filterObject.state.geometry=e.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
      ></eox-itemfilter-spatial>
    `})}};uC([$t()],fP.prototype,"filterObject",2);fP=uC([ta("eox-itemfilter-spatial")],fP);let _R=class extends Yn{render(){return tt`<eox-map part="map" style="height: 400px"></eox-map>`}firstUpdated(){this.setup()}setup(){const i=[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...this.geometry&&{format:"GeoJSON"},...this.geometry&&{url:this.createFeatureUrl(this.geometry)}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://s2maps-tiles.eu/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}];this.eoxMap=this.renderRoot.querySelector("eox-map"),setTimeout(()=>{this.eoxMap.layers=i;const e=t=>{const n=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:t.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});this.dispatchEvent(n)};this.eoxMap.interactions.drawInteraction.on("drawend",t=>{e(t.feature),this.eoxMap.removeInteraction("drawInteraction")}),this.eoxMap.interactions.drawInteraction_modify.on("modifyend",t=>{e(t.features.getArray()[0])})},1e3)}createFeatureUrl(i){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:i}]}))}`}reset(){var e;const i=this.eoxMap.getLayerById("draw").getSource();((e=i.getFeatures())==null?void 0:e.length)>0&&(i.clear(),this.eoxMap.removeInteraction("drawInteraction_modify"),this.setup())}};uC([$t()],_R.prototype,"geometry",2);uC([Ks()],_R.prototype,"eoxMap",2);_R=uC([ta("eox-itemfilter-spatial-filter")],_R);var TKe=Object.defineProperty,AKe=Object.getOwnPropertyDescriptor,WSe=(i,e,t,n)=>{for(var r=n>1?void 0:n?AKe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&TKe(e,t,r),r};let pP=class extends Yn{constructor(){super(...arguments),this.inputHandler=()=>{const i=this.renderRoot.querySelector("input[type='text']");this.filterObject.keys.forEach(e=>{this.filterObject.state[e]=i.value}),this.filterObject.dirty=!0,this.filterObject.stringifiedState=i.value,this.dispatchEvent(new CustomEvent("filter"))},this.debouncedInputHandler=Bb(this.inputHandler,500,{leading:!0})}reset(){const i=this.renderRoot.querySelector("input[type='text']");i.value="",jb(this.filterObject),this.filterObject.dirty=!1,this.requestUpdate()}createRenderRoot(){return this}render(){return Hi(this.filterObject,()=>tt`
        <style>
          input {
            max-height: 100%;
          }
        </style>
        <input
          type="text"
          placeholder="Type something..."
          data-cy="search"
          part="input-search"
          value="${Object.values(this.filterObject.state)[0]}"
          @input="${this.debouncedInputHandler}"
          @click=${i=>{i.stopPropagation()}}
        />
      `)}};WSe([$t()],pP.prototype,"filterObject",2);pP=WSe([ta("eox-itemfilter-text")],pP);var RKe=Object.defineProperty,kKe=Object.getOwnPropertyDescriptor,ty=(i,e,t,n)=>{for(var r=n>1?void 0:n?kKe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&RKe(e,t,r),r};let Lg=class extends Yn{constructor(){super(...arguments),this.idProperty="id",this.items=[],this.titleProperty="title",this.unstyled=!1,this.inputText="",this.replaceInput=null,this._clickOutsideListener=()=>{this.items.forEach(i=>{delete i._inProgress}),this.requestUpdate()},this._keyboardEventListener=i=>{["Enter","Escape","Space"].includes(i.code)&&this._handleKeyboard(i.code)}}_handleKeyboard(i){var s,o,a,l,u,c;if(this.clientHeight===0)return;const e=this.items.find(h=>h._inProgress),t=(e==null?void 0:e.type)==="text"&&(e==null?void 0:e.dirty),n=this.renderRoot.querySelector("#inline-input"),r=(c=(u=(l=(a=(o=(s=this.renderRoot)==null?void 0:s.querySelector("[data-filter]"))==null?void 0:o.querySelector("eox-autocomplete"))==null?void 0:a.renderRoot)==null?void 0:l.querySelector("eox-selectionlist"))==null?void 0:u.renderRoot)==null?void 0:c.querySelector("li.highlighted");if(i=="Enter"&&r&&n.selectionStart&&(r.querySelector("input[type=checkbox]").dispatchEvent(new Event("change")),n.selectionStart=0,n.value="",n.focus()),["Escape","Space"].includes(i)||i=="Enter"&&t){e&&(delete e._inProgress,this.requestUpdate(),this.inputText="",this.renderRoot.querySelector("input").value="",this.renderRoot.querySelector("input").focus()),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden");return}}_handleReset(i){i.forEach(e=>{jb(e),delete e._inProgress,delete e.stringifiedState}),this.renderRoot.querySelector("[slot=content]").classList.remove("hidden"),this.requestUpdate(),this.dispatchEvent(new CustomEvent("filter"))}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",this._keyboardEventListener),window.addEventListener("click",this._clickOutsideListener)}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",this._keyboardEventListener),window.removeEventListener("click",this._clickOutsideListener)}render(){return tt`
      <style>
        :host,
        .container {
          display: flex;
        }
        ${this.unstyled?In:tt`
              ${Q0} :host { position: relative; } .container { width: 100%;
              position: relative; border: 1px solid #00417066; border-radius:
              4px; height: 24px; padding: 5px; flex: 1; justify-content:
              space-between; cursor: text; transition: all 0.2s ease-in-out;
              overflow-x: auto; } .container:hover { border: 1px solid #004170;
              } .input-container { display: flex; flex: 1; align-items: center;
              } input, input:focus { height: 100%; border: none; outline: none;
              } .button-container { display: flex; align-items: center;
              justify-content: center; position: absolute; right: 1px; top: 5px;
              height: calc(100% - 10px); width: 34px; background: white; }
              button.icon { color: #004170; height: 24px; font-size: large;
              width: unset; } .container::-webkit-scrollbar { height: 2px; }
              .container::-webkit-scrollbar-thumb { background: lightgrey;
              border-radius: 2px; } .hidden {height: 0; padding: 0; border:
              none;} .hidden:hover {border: none}
            `}
      </style>
      <div
        class="container"
        part="container"
        @click=${i=>{var e;i.stopPropagation(),(e=this.renderRoot.querySelector("input[type=text]"))==null||e.focus()}}
      >
        <eox-itemfilter-chips
          .items=${this.items.filter(i=>i._inProgress||i.stringifiedState)}
          .titleProperty=${this.titleProperty}
          .unstyled=${this.unstyled}
          @items-selected=${i=>{this.items.forEach(e=>{i.detail.find(t=>t.id===e.id)||this._handleReset([e])})}}
          @click=${i=>{i.stopPropagation()}}
        ></eox-itemfilter-chips>
        <div class="input-container">
          <eox-dropdown .parent=${this} .unstyled=${this.unstyled}>
            <input
              id="inline-input"
              slot="trigger"
              type="text"
              placeholder="Type something..."
              @focus=${()=>{this.inputText="",this.requestUpdate()}}
              @input=${i=>{if(this.inputText=i.target.value.toLowerCase(),this.replaceInput){const e=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("input")||this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete").renderRoot.querySelector("input");e&&(e.value=this.inputText,e.dispatchEvent(new Event("input")))}}}
            />
            <div slot="content">
              ${Hi(!this.items.find(i=>i._inProgress),()=>tt`
                  <eox-selectionlist
                    .filter=${this.inputText}
                    .idProperty=${this.idProperty}
                    .titleProperty=${this.titleProperty}
                    .items=${this.items.filter(i=>!i.stringifiedState)}
                    .multiple=${!1}
                    .selectedItems=${this.items.filter(i=>i.stringifiedState)}
                    .unstyled=${this.unstyled}
                    @click=${i=>{i.stopPropagation()}}
                    @items-highlighted=${()=>{}}
                    @items-selected=${i=>{const e=i.detail;e.length>0&&(e[e.length-1]._inProgress=!0,this.renderRoot.querySelector("input[slot=trigger]").value="",this.inputText="",this.requestUpdate());const t=this.items.find(n=>n._inProgress);(t&&t.type==="text"||t.type==="multiselect"||t.type==="select")&&(this.replaceInput=!0),this.replaceInput&&(setTimeout(()=>{if(t.type==="text")this.renderRoot.querySelector("[slot=content]").classList.add("hidden");else if(t.type==="multiselect"||t.type==="select"){const n=this.renderRoot.querySelector("[data-filter]").renderRoot.querySelector("eox-autocomplete");n.renderRoot.querySelector("eox-dropdown").open=!0,n.renderRoot.querySelector(".container").classList.add("hidden")}}),this.renderRoot.querySelector("input").select(),this.renderRoot.querySelector("input").focus())}}
                  >
                  </eox-selectionlist>
                `)}
              ${Hi(this.items.find(i=>i._inProgress),()=>x_`
            <eox-itemfilter-${kh(this.items.find(i=>i._inProgress).type)}
              data-filter=${this.items.find(i=>i._inProgress).id}
              slot="dropdown"
              .filterObject=${this.items.find(i=>i._inProgress)}
              .unstyled=${this.unstyled}
              .inline=${!0}
              @filter=${()=>{this.dispatchEvent(new CustomEvent("filter"))}}
              @click=${i=>{i.stopPropagation()}}
            ></eox-itemfilter-${kh(this.items.find(i=>i._inProgress).type)}>
  `)}
            </div>
          </eox-dropdown>
        </div>
      </div>
      ${Hi(this.items.filter(i=>i.stringifiedState||i._inProgress).length>0,()=>tt`
          <div class="button-container">
            <button
              class="icon"
              @click=${()=>{this._handleReset(this.items.filter(i=>i.stringifiedState||i._inProgress))}}
            >
              ✕
            </button>
          </div>
        `)}
    `}};ty([$t()],Lg.prototype,"idProperty",2);ty([$t()],Lg.prototype,"items",2);ty([$t()],Lg.prototype,"titleProperty",2);ty([$t()],Lg.prototype,"unstyled",2);ty([Ks()],Lg.prototype,"inputText",2);ty([Ks()],Lg.prototype,"replaceInput",2);Lg=ty([ta("eox-itemfilter-inline")],Lg);function xf(i){return Array.isArray?Array.isArray(i):ZSe(i)==="[object Array]"}const DKe=1/0;function LKe(i){if(typeof i=="string")return i;let e=i+"";return e=="0"&&1/i==-DKe?"-0":e}function MKe(i){return i==null?"":LKe(i)}function Lh(i){return typeof i=="string"}function XSe(i){return typeof i=="number"}function IKe(i){return i===!0||i===!1||OKe(i)&&ZSe(i)=="[object Boolean]"}function YSe(i){return typeof i=="object"}function OKe(i){return YSe(i)&&i!==null}function cu(i){return i!=null}function QM(i){return!i.trim().length}function ZSe(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const PKe="Incorrect 'index' type",FKe=i=>`Invalid value for key ${i}`,NKe=i=>`Pattern length exceeds max of ${i}.`,$Ke=i=>`Missing ${i} property in key`,BKe=i=>`Property 'weight' in key '${i}' must be a positive integer`,hve=Object.prototype.hasOwnProperty;class jKe{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let r=KSe(n);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function KSe(i){let e=null,t=null,n=null,r=1,s=null;if(Lh(i)||xf(i))n=i,e=dve(i),t=gP(i);else{if(!hve.call(i,"name"))throw new Error($Ke("name"));const o=i.name;if(n=o,hve.call(i,"weight")&&(r=i.weight,r<=0))throw new Error(BKe(o));e=dve(o),t=gP(o),s=i.getFn}return{path:e,id:t,weight:r,src:n,getFn:s}}function dve(i){return xf(i)?i:i.split(".")}function gP(i){return xf(i)?i.join("."):i}function zKe(i,e){let t=[],n=!1;const r=(s,o,a)=>{if(cu(s))if(!o[a])t.push(s);else{let l=o[a];const u=s[l];if(!cu(u))return;if(a===o.length-1&&(Lh(u)||XSe(u)||IKe(u)))t.push(MKe(u));else if(xf(u)){n=!0;for(let c=0,h=u.length;c<h;c+=1)r(u[c],o,a+1)}else o.length&&r(u,o,a+1)}};return r(i,Lh(e)?e.split("."):e,0),n?t:t[0]}const GKe={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},UKe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,e)=>i.score===e.score?i.idx<e.idx?-1:1:i.score<e.score?-1:1},qKe={location:0,threshold:.6,distance:100},VKe={useExtendedSearch:!1,getFn:zKe,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ki={...UKe,...GKe,...qKe,...VKe};const HKe=/[^ ]+/g;function WKe(i=1,e=3){const t=new Map,n=Math.pow(10,e);return{get(r){const s=r.match(HKe).length;if(t.has(s))return t.get(s);const o=1/Math.pow(s,.5*i),a=parseFloat(Math.round(o*n)/n);return t.set(s,a),a},clear(){t.clear()}}}class _5{constructor({getFn:e=Ki.getFn,fieldNormWeight:t=Ki.fieldNormWeight}={}){this.norm=WKe(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Lh(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Lh(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!cu(e)||QM(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((r,s)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(cu(o)){if(xf(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(cu(c))if(Lh(c)&&!QM(c)){let h={v:c,i:u,n:this.norm.get(c)};a.push(h)}else xf(c)&&c.forEach((h,d)=>{l.push({nestedArrIndex:d,value:h})})}n.$[s]=a}else if(Lh(o)&&!QM(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function JSe(i,e,{getFn:t=Ki.getFn,fieldNormWeight:n=Ki.fieldNormWeight}={}){const r=new _5({getFn:t,fieldNormWeight:n});return r.setKeys(i.map(KSe)),r.setSources(e),r.create(),r}function XKe(i,{getFn:e=Ki.getFn,fieldNormWeight:t=Ki.fieldNormWeight}={}){const{keys:n,records:r}=i,s=new _5({getFn:e,fieldNormWeight:t});return s.setKeys(n),s.setIndexRecords(r),s}function lT(i,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:r=Ki.distance,ignoreLocation:s=Ki.ignoreLocation}={}){const o=e/i.length;if(s)return o;const a=Math.abs(n-t);return r?o+a/r:a?1:o}function YKe(i=[],e=Ki.minMatchCharLength){let t=[],n=-1,r=-1,s=0;for(let o=i.length;s<o;s+=1){let a=i[s];a&&n===-1?n=s:!a&&n!==-1&&(r=s-1,r-n+1>=e&&t.push([n,r]),n=-1)}return i[s-1]&&s-n>=e&&t.push([n,s-1]),t}const t0=32;function ZKe(i,e,t,{location:n=Ki.location,distance:r=Ki.distance,threshold:s=Ki.threshold,findAllMatches:o=Ki.findAllMatches,minMatchCharLength:a=Ki.minMatchCharLength,includeMatches:l=Ki.includeMatches,ignoreLocation:u=Ki.ignoreLocation}={}){if(e.length>t0)throw new Error(NKe(t0));const c=e.length,h=i.length,d=Math.max(0,Math.min(n,h));let f=s,p=d;const m=a>1||l,y=m?Array(h):[];let v;for(;(v=i.indexOf(e,p))>-1;){let R=lT(e,{currentLocation:v,expectedLocation:d,distance:r,ignoreLocation:u});if(f=Math.min(R,f),p=v+c,m){let A=0;for(;A<c;)y[v+A]=1,A+=1}}p=-1;let b=[],x=1,w=c+h;const C=1<<c-1;for(let R=0;R<c;R+=1){let A=0,L=w;for(;A<L;)lT(e,{errors:R,currentLocation:d+L,expectedLocation:d,distance:r,ignoreLocation:u})<=f?A=L:w=L,L=Math.floor((w-A)/2+A);w=L;let O=Math.max(1,d-L+1),$=o?h:Math.min(d+L,h)+c,q=Array($+2);q[$+1]=(1<<R)-1;for(let F=$;F>=O;F-=1){let N=F-1,B=t[i.charAt(N)];if(m&&(y[N]=+!!B),q[F]=(q[F+1]<<1|1)&B,R&&(q[F]|=(b[F+1]|b[F])<<1|1|b[F+1]),q[F]&C&&(x=lT(e,{errors:R,currentLocation:N,expectedLocation:d,distance:r,ignoreLocation:u}),x<=f)){if(f=x,p=N,p<=d)break;O=Math.max(1,2*d-p)}}if(lT(e,{errors:R+1,currentLocation:d,expectedLocation:d,distance:r,ignoreLocation:u})>f)break;b=q}const D={isMatch:p>=0,score:Math.max(.001,x)};if(m){const R=YKe(y,a);R.length?l&&(D.indices=R):D.isMatch=!1}return D}function KKe(i){let e={};for(let t=0,n=i.length;t<n;t+=1){const r=i.charAt(t);e[r]=(e[r]||0)|1<<n-t-1}return e}class QSe{constructor(e,{location:t=Ki.location,threshold:n=Ki.threshold,distance:r=Ki.distance,includeMatches:s=Ki.includeMatches,findAllMatches:o=Ki.findAllMatches,minMatchCharLength:a=Ki.minMatchCharLength,isCaseSensitive:l=Ki.isCaseSensitive,ignoreLocation:u=Ki.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,f)=>{this.chunks.push({pattern:d,alphabet:KKe(d),startIndex:f})},h=this.pattern.length;if(h>t0){let d=0;const f=h%t0,p=h-f;for(;d<p;)c(this.pattern.substr(d,t0),d),d+=t0;if(f){const m=h-t0;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let p={isMatch:!0,score:0};return n&&(p.indices=[[0,e.length-1]]),p}const{location:r,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],h=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:y})=>{const{isMatch:v,score:b,indices:x}=ZKe(e,p,m,{location:r+y,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:u});v&&(d=!0),h+=b,v&&x&&(c=[...c,...x])});let f={isMatch:d,score:d?h/this.chunks.length:1};return d&&n&&(f.indices=c),f}}class Xg{constructor(e){this.pattern=e}static isMultiMatch(e){return fve(e,this.multiRegex)}static isSingleMatch(e){return fve(e,this.singleRegex)}search(){}}function fve(i,e){const t=i.match(e);return t?t[1]:null}class JKe extends Xg{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class QKe extends Xg{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class eJe extends Xg{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class tJe extends Xg{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class iJe extends Xg{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class nJe extends Xg{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class eTe extends Xg{constructor(e,{location:t=Ki.location,threshold:n=Ki.threshold,distance:r=Ki.distance,includeMatches:s=Ki.includeMatches,findAllMatches:o=Ki.findAllMatches,minMatchCharLength:a=Ki.minMatchCharLength,isCaseSensitive:l=Ki.isCaseSensitive,ignoreLocation:u=Ki.ignoreLocation}={}){super(e),this._bitapSearch=new QSe(e,{location:t,threshold:n,distance:r,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class tTe extends Xg{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n;const r=[],s=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+s,r.push([n,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const mP=[JKe,tTe,eJe,tJe,nJe,iJe,QKe,eTe],pve=mP.length,rJe=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,sJe="|";function oJe(i,e={}){return i.split(sJe).map(t=>{let n=t.trim().split(rJe).filter(s=>s&&!!s.trim()),r=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let l=!1,u=-1;for(;!l&&++u<pve;){const c=mP[u];let h=c.isMultiMatch(a);h&&(r.push(new c(h,e)),l=!0)}if(!l)for(u=-1;++u<pve;){const c=mP[u];let h=c.isSingleMatch(a);if(h){r.push(new c(h,e));break}}}return r})}const aJe=new Set([eTe.type,tTe.type]);class lJe{constructor(e,{isCaseSensitive:t=Ki.isCaseSensitive,includeMatches:n=Ki.includeMatches,minMatchCharLength:r=Ki.minMatchCharLength,ignoreLocation:s=Ki.ignoreLocation,findAllMatches:o=Ki.findAllMatches,location:a=Ki.location,threshold:l=Ki.threshold,distance:u=Ki.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=oJe(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const c=t[l];o.length=0,s=0;for(let h=0,d=c.length;h<d;h+=1){const f=c[h],{isMatch:p,indices:m,score:y}=f.search(e);if(p){if(s+=1,a+=y,n){const v=f.constructor.type;aJe.has(v)?o=[...o,...m]:o.push(m)}}else{a=0,s=0,o.length=0;break}}if(s){let h={isMatch:!0,score:a/s};return n&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const yP=[];function uJe(...i){yP.push(...i)}function vP(i,e){for(let t=0,n=yP.length;t<n;t+=1){let r=yP[t];if(r.condition(i,e))return new r(i,e)}return new QSe(i,e)}const bR={AND:"$and",OR:"$or"},_P={PATH:"$path",PATTERN:"$val"},bP=i=>!!(i[bR.AND]||i[bR.OR]),cJe=i=>!!i[_P.PATH],hJe=i=>!xf(i)&&YSe(i)&&!bP(i),gve=i=>({[bR.AND]:Object.keys(i).map(e=>({[e]:i[e]}))});function iTe(i,e,{auto:t=!0}={}){const n=r=>{let s=Object.keys(r);const o=cJe(r);if(!o&&s.length>1&&!bP(r))return n(gve(r));if(hJe(r)){const l=o?r[_P.PATH]:s[0],u=o?r[_P.PATTERN]:r[l];if(!Lh(u))throw new Error(FKe(l));const c={keyId:gP(l),pattern:u};return t&&(c.searcher=vP(u,e)),c}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=r[l];xf(u)&&u.forEach(c=>{a.children.push(n(c))})}),a};return bP(i)||(i=gve(i)),n(i)}function dJe(i,{ignoreFieldNorm:e=Ki.ignoreFieldNorm}){i.forEach(t=>{let n=1;t.matches.forEach(({key:r,norm:s,score:o})=>{const a=r?r.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),t.score=n})}function fJe(i,e){const t=i.matches;e.matches=[],cu(t)&&t.forEach(n=>{if(!cu(n.indices)||!n.indices.length)return;const{indices:r,value:s}=n;let o={indices:r,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function pJe(i,e){e.score=i.score}function gJe(i,e,{includeMatches:t=Ki.includeMatches,includeScore:n=Ki.includeScore}={}){const r=[];return t&&r.push(fJe),n&&r.push(pJe),i.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return r.length&&r.forEach(l=>{l(s,a)}),a})}class Vb{constructor(e,t={},n){this.options={...Ki,...t},this.options.useExtendedSearch,this._keyStore=new jKe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof _5))throw new Error(PKe);this._myIndex=t||JSe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){cu(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];e(s,n)&&(this.removeAt(n),n-=1,r-=1,t.push(s))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=Lh(e)?Lh(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return dJe(l,{ignoreFieldNorm:a}),s&&l.sort(o),XSe(t)&&t>-1&&(l=l.slice(0,t)),gJe(l,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const t=vP(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:s,i:o,n:a})=>{if(!cu(s))return;const{isMatch:l,score:u,indices:c}=t.searchIn(s);l&&r.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:c}]})}),r}_searchLogical(e){const t=iTe(e,this.options),n=(a,l,u)=>{if(!a.children){const{keyId:h,searcher:d}=a,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:d});return f&&f.length?[{idx:u,item:l,matches:f}]:[]}const c=[];for(let h=0,d=a.children.length;h<d;h+=1){const f=a.children[h],p=n(f,l,u);if(p.length)c.push(...p);else if(a.operator===bR.AND)return[]}return c},r=this._myIndex.records,s={},o=[];return r.forEach(({$:a,i:l})=>{if(cu(a)){let u=n(t,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:c})=>{s[l].matches.push(...c)}))}}),o}_searchObjectList(e){const t=vP(e,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach(({$:o,i:a})=>{if(!cu(o))return;let l=[];n.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:t}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:t,searcher:n}){if(!cu(t))return[];let r=[];if(xf(t))t.forEach(({v:s,i:o,n:a})=>{if(!cu(s))return;const{isMatch:l,score:u,indices:c}=n.searchIn(s);l&&r.push({score:u,key:e,value:s,idx:o,norm:a,indices:c})});else{const{v:s,n:o}=t,{isMatch:a,score:l,indices:u}=n.searchIn(s);a&&r.push({score:l,key:e,value:s,norm:o,indices:u})}return r}}Vb.version="7.0.0";Vb.createIndex=JSe;Vb.parseIndex=XKe;Vb.config=Ki;Vb.parseQuery=iTe;uJe(lJe);const mJe=(i,e="highlight",t="title")=>{const n=(s,o,a)=>{const l=o.split(".");let u;for(u=0;u<l.length-1;u++)s=s[l[u]];s[l[u]]=a},r=(s,o=[])=>{let a="",l=0;return o.forEach(u=>{const c=u[1]+1;a+=[s.substring(l,u[0]),`<mark class="${e}">`,s.substring(u[0],c),"</mark>"].join(""),l=c}),a+=s.substring(l),a};return i.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={};for(const[l,u]of Object.entries(s))a[l]=u;return o.forEach(l=>{l.key===t&&n(a,l.key,r(l.value,l.indices))}),a})};let nTe;const yJe=(i,e)=>{nTe=new Vb(i,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...e})},vJe=async(i,e,t)=>{const n=Object.entries(e).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const c="$or",h=[],d=(f,p)=>{const m={};u.type==="text"?m[f]=`${p}`:m[l]=`="${f}"`,h.push(m)};return Object.entries(u.state).filter(([,f])=>f).forEach(([f,p])=>d(f,p)),h.length>0&&a.push({[c]:h}),a},[]);let r;if(!(n.length>0)&&t.matchAllWhenEmpty!==!1)r=i;else{const a={$and:[...n]},l=nTe.search(a);r=t.enableHighlighting?mJe(l,"highlight",t.titleProperty):l.map(u=>u.item)}const s=Object.entries(e).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<r.length;l++){const u={};for(const[c,h]of Object.entries(s)){const d=f=>h.format==="date"?rf(f).unix():f;Object.prototype.hasOwnProperty.call(r[l],c)?Array.isArray(r[l][c])?u[c]=s[c].min<=d(r[l][c][1])&&d(r[l][c][0])<=s[c].max:d(r[l][c])>=s[c].min&&d(r[l][c])<=s[c].max?u[c]=!0:u[c]=!1:u[c]=!0}Object.values(u).every(c=>!!c)&&a.push(r[l])}r=[...a]}const o=Object.entries(e).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<r.length;l++){const u={};for(const c of Object.keys(o)){const h=o[c].mode||"within";Object.prototype.hasOwnProperty.call(r[l],c)&&(h==="within"?SKe(r[l][c],o[c].geometry):CKe(r[l][c],o[c].geometry))?u[c]=!0:u[c]=!1}Object.values(u).every(c=>!!c)&&a.push(r[l])}r=[...a]}return r},_Je=async(i,e,t)=>(await(await fetch(`${t.externalFilter(i,e)}`)).json()).features;var bJe=Object.defineProperty,xJe=Object.getOwnPropertyDescriptor,If=(i,e,t,n)=>{for(var r=n>1?void 0:n?xJe(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&bJe(e,t,r),r};class mve{constructor(){this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.filterProperties=[],this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.onFilter=()=>{},this.onSelect=()=>{},this.showResults=!0,this.titleProperty="title",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0}}let Kh=class extends NN{constructor(){super(...arguments),this._resultAggregation=[],this._items=[],this.filters={},this._config=new mve,this.apply=i=>{this._items=i.map((t,n)=>({id:`item-${n}`,...t})),this._config.filterProperties.length&&this._config.filterProperties.forEach(t=>{const n={},r=s=>t.format==="date"?rf(s).unix():parseInt(s);this._items.forEach(s=>{if(t.type==="range"){if(Array.isArray(s[t.key])){const o=[r(s[t.key][0]),r(s[t.key][1])];n.min=n.min!==void 0?Math.min(n.min,o[0]):o[0],n.max=n.max!==void 0?Math.max(n.max,o[1]):o[1]}else{const o=r(s[t.key]);n.min=n.min!==void 0?Math.min(n.min,o):o,n.max=n.max!==void 0?Math.max(n.max,o):o}return}Array.isArray(s[t.key])?s[t.key].forEach(o=>{n[o]=void 0}):t.type==="spatial"?(n.geometry=void 0,n.mode=t.mode||"intersects"):n[s[t.key]]=void 0}),this.filters[t.key||t.keys.join("|")]={...t,type:t.type||"multiselect",state:{...n,...t.state},...t.state&&{dirty:!1},...t.type==="range"&&{min:n.min,max:n.max,format:t.format}}}),this._config.matchAllWhenEmpty!==!1&&(this.results=this.sortResults(this._items),this.requestUpdate()),this._config.aggregateResults&&(this._resultAggregation=[...new Set(this._items.reduce((t,n)=>t.concat(n[this._config.aggregateResults]),[]))].sort((t,n)=>t.localeCompare(n)));const e=[];Object.values(this.filters).forEach(t=>{t.type==="text"?t.keys.forEach(n=>{e.includes(n)||e.push(n)}):(t.type==="select"||t.type==="multiselect")&&(e.includes(t.key)||e.push(t.key))}),yJe(this._items,{keys:e,...this._config.fuseConfig}),this.search()}}set items(i){this.apply(i)}get items(){return this._items}set config(i){const e=this._config;this._config={...new mve,...i},this.requestUpdate("config",e)}get config(){return this._config}async search(){let i;this.config.externalFilter?i=await _Je(this._items,this.filters,this._config):i=await vJe(this._items,this.filters,this._config),this.results=this.sortResults(i),this._config.onFilter(this.results,this.filters)}aggregateResults(i,e){return i.filter(t=>{const n=t[this._config.aggregateResults];let r;return this.filters[this._config.aggregateResults]&&(r=Object.keys(this.filters[this._config.aggregateResults]).filter(o=>this.filters[this._config.aggregateResults].state[o])),(r!=null&&r.length?r.includes(e):!0)&&Array.isArray(n)?n.includes(e):n===e})}createItemList(i){return tt`
      <ul>
        ${FN(this.aggregateResults(this.results,i),e=>e.id,e=>{var t,n;return tt`
            <li
              class=${((t=this.selectedResult)==null?void 0:t[this._config.titleProperty])===e[this._config.titleProperty]?"highlighted":In}
            >
              <label>
                <input
                  data-cy="result-radio"
                  type="radio"
                  class="result-radio"
                  name="result"
                  id="${e.id}"
                  ?checked=${((n=this.selectedResult)==null?void 0:n[this._config.titleProperty])===e[this._config.titleProperty]||In}
                  @click=${()=>{this.selectedResult=e,this._config.onSelect(e)}}
                />
                ${Hi(this.hasTemplate("result"),()=>this.renderTemplate("result",e,`result-${e.id}`),()=>tt`
                    <span class="title"
                      >${wh(e[this._config.titleProperty])}</span
                    >
                  `)}
              </label>
            </li>
          `})}
      </ul>
    `}sortResults(i){return[...i].sort((e,t)=>e[this._config.titleProperty].localeCompare(t[this._config.titleProperty]))}resetFilters(){this.renderRoot.querySelectorAll("[data-type='filter']").forEach(i=>{i.reset()}),this.search()}toggleAccordion(i){let e;if(i.detail?e=i.detail.target:e=i.target,e.classList.contains("details-filter")){if(!e.open||this.config.expandMultipleFilters)return;this.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(t=>{const n=t.shadowRoot.querySelector(".details-filter");n&&n!==e&&n.removeAttribute("open")})}else{if(!e.open||this.config.expandMultipleResults)return;this.shadowRoot.querySelectorAll("details").forEach(t=>{t!==e&&t.removeAttribute("open")})}}render(){return tt`
      <style>
        ${$N}
        ${!this.unstyled&&zN}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        @submit="${i=>i.preventDefault()}"
      >
        ${Hi(this._config.inlineMode,()=>tt`
            <eox-itemfilter-inline
              .items=${Object.values(this.filters)}
              .unstyled=${this.unstyled}
              @filter=${()=>this.search()}
            >
            </eox-itemfilter-inline>
          `,()=>tt`
            ${Hi(this._config.filterProperties.length,()=>tt`
                <section
                  class="${this.config.inlineMode?"inline":In}"
                >
                  ${Hi(!this.config.inlineMode,()=>tt`
                        <slot name="filterstitle"
                          ><h4 style="margin-top: 8px">Filters</h4></slot
                        >
                      `)}
                  <ul id="filters">
                    ${$l(Object.values(this.filters),i=>x_`
                    <li>
                      ${i.featured?x_`
                            <eox-itemfilter-${kh(i.type)}
                              slot="filter"
                              data-type="filter"
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @filter="${()=>this.search()}"
                            ></eox-itemfilter-${kh(i.type)}>
                          `:x_`
                            <eox-itemfilter-expandcontainer
                              .filterObject=${i}
                              .unstyled=${this.unstyled}
                              @details-toggled=${this.toggleAccordion}
                            >
                            ${Hi(i.dirty,()=>tt`
                                <button
                                  slot="reset-button"
                                  class="reset-icon icon"
                                  @click=${e=>{e.target.parentElement.querySelector("[slot=filter]").reset(),this.search(),this.requestUpdate()}}
                                >
                                  ${this.unstyled?"Reset":In}
                                </button>
                              `)}
                              <eox-itemfilter-${kh(i.type)}
                                slot="filter"
                                data-type="filter"
                                data-filter="${i.key}"
                                .filterObject=${i}
                                .unstyled=${this.unstyled}
                                @filter="${()=>this.search()}"
                              ></eox-itemfilter-${kh(i.type)}>
                            </eox-itemfilter-expandcontainer>
                        `}
                    </li>
                  `)}
                  </ul>
                  ${Hi(this._config.filterProperties&&Object.values(this.filters).map(i=>i.dirty).filter(i=>i).length>0,()=>tt`
                    <button
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
                </section>
              `)}
            ${Hi(this.config.showResults&&this.results,()=>tt`
                <section id="section-results">
                  <div>
                    <slot name="resultstitle"
                      ><h4 style="margin-top: 8px">Results</h4></slot
                    >
                  </div>
                  <div id="container-results" class="scroll">
                    ${this.results.length<1?tt`
                          <small class="no-results">No matching items</small>
                        `:In}
                    <ul id="results" part="results">
                      ${this._config.aggregateResults?$l(this._resultAggregation.filter(i=>this.aggregateResults(this.results,i).length),i=>tt` ${Hi(this.aggregateResults(this.results,i).length===1&&this.config.autoSpreadSingle,()=>tt` <div style="margin-left: -8px">
                                  ${this.createItemList(i)}
                                </div>`,()=>tt`
                                  <details
                                    class="details-results"
                                    @toggle=${this.toggleAccordion}
                                    ?open=${this._config.expandResults||In}
                                  >
                                    <summary>
                                      <span class="title">
                                        ${i}
                                        <span class="count"
                                          >${this.aggregateResults(this.results,i).length}</span
                                        >
                                      </span>
                                    </summary>
                                    <div>
                                      ${this.createItemList(i)}
                                    </div>
                                  </details>
                                `)}`):$l(this.results,i=>tt`<li part="result">
                                <label>
                                  <input
                                    type="radio"
                                    name="result"
                                    id="${i.id}"
                                    @click=${()=>{this.selectedResult=i,this._config.onSelect(i)}}
                                  />
                                  ${Hi(this.hasTemplate("result"),()=>this.renderTemplate("result",i,`result-${i.id}`),()=>tt`
                                      <span class="title"
                                        >${wh(i[this._config.titleProperty])}</span
                                      >
                                    `)}
                                </label>
                              </li>`)}
                    </ul>
                  </div>
                </section>
              `)}
          `)}
      </form>
    `}};If([Ks()],Kh.prototype,"filters",2);If([Ks()],Kh.prototype,"results",2);If([Ks()],Kh.prototype,"selectedResult",2);If([$t({attribute:!1})],Kh.prototype,"items",1);If([$t({attribute:!1})],Kh.prototype,"config",1);If([$t()],Kh.prototype,"apply",2);If([$t({attribute:!1})],Kh.prototype,"styleOverride",2);If([$t({type:Boolean})],Kh.prototype,"unstyled",2);Kh=If([ta("eox-itemfilter")],Kh);const wJe=i=>typeof i.type!="string"&&"multiple",EJe=i=>typeof i.type=="string"&&"string",CJe=i=>!i.type&&i.properties&&"object",SJe=i=>typeof i.type=="string"&&["string","number","integer","boolean","null","array","object"].includes(i.type)&&i.type,TJe=i=>i.type==="string"&&i.format==="signature"&&"signature",AJe=i=>{if(i.type==="boolean")return i.format==="checkbox"||i.options&&i.options.checkbox?"checkbox":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},RJe=i=>i.type==="any"&&"multiple",kJe=i=>i.type==="string"&&i.media&&i.media.binaryEncoding==="base64"&&"base64",DJe=i=>i.type==="string"&&i.format==="url"&&window.FileReader&&i.options&&i.options.upload===Object(i.options.upload)&&"upload",LJe=i=>i.type==="array"&&i.format==="table"&&"table",MJe=i=>{if(i.enumSource)return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},IJe=i=>{if(i.enum){if(i.type==="array"||i.type==="object")return"enum";if(i.type==="number"||i.type==="integer"||i.type==="string")return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"}},OJe=(i,e)=>{if(i.items&&(i.items=e.expandSchema(i.items)),i.type==="array"&&i.items&&!Array.isArray(i.items)&&["string","number","integer"].includes(i.items.type)){if(i.format==="choices")return"arrayChoices";if(i.uniqueItems){if(i.format==="selectize")return"arraySelectize";if(i.format==="select2")return"arraySelect2";if(i.items.enum)return"multiselect"}}},PJe=i=>(i.oneOf||i.anyOf)&&"multiple",FJe=i=>i.if&&"multiple",NJe=i=>["string","integer"].includes(i.type)&&["date","time","datetime-local"].includes(i.format)&&"datetime",$Je=i=>["string","integer"].includes(i.type)&&["starrating","rating"].includes(i.format)&&"starrating",BJe=i=>{if(i.links){for(let e=0;e<i.links.length;e++)if(i.links[e].rel&&i.links[e].rel.toLowerCase()==="describedby")return"describedBy"}},jJe=i=>{if((i.type==="integer"||i.type==="number")&&i.format==="stepper")return"stepper"},zJe=i=>i.format==="button"&&"button",GJe=i=>i.format==="info"&&"info",UJe=i=>i.type==="string"&&i.format==="uuid"&&"uuid",qJe=i=>i.type==="string"&&i.format==="autocomplete"&&"autocomplete",VJe=i=>i.type==="string"&&i.format==="jodit"&&"jodit",HJe=i=>i.type==="string"&&i.format==="markdown"&&"simplemde",WJe=i=>i.type==="string"&&["xhtml","bbcode"].includes(i.format)&&"sceditor",XJe=["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","prql","r","ruby","rust","sass","scala","scss","sh","smarty","sql","sqlserver","stylus","svg","typescript","twig","vbscript","xml","yaml","zig"],YJe=i=>i.type==="string"&&XJe.includes(i.format)&&"ace",ZJe=i=>i.type==="string"&&["ip","ipv4","ipv6","hostname"].includes(i.format)&&"ip",KJe=i=>i.type==="string"&&i.format==="color"&&"colorpicker",JJe=[KJe,ZJe,YJe,WJe,HJe,VJe,qJe,UJe,GJe,zJe,jJe,BJe,$Je,NJe,PJe,FJe,OJe,IJe,MJe,LJe,DJe,kJe,RJe,AJe,TJe,SJe,CJe,wJe,EJe];function rTe(i){return!(i===null||typeof i!="object"||i.nodeType||i===i.window||i.constructor&&!Eu(i.constructor.prototype,"isPrototypeOf"))}function sTe(i){return rTe(i)?$i({},i):Array.isArray(i)?i.map(sTe):i}function $i(i,...e){return e.forEach(t=>{t&&Object.keys(t).forEach(n=>{t[n]&&rTe(t[n])?(Eu(i,n)||(i[n]={}),$i(i[n],t[n])):Array.isArray(t[n])?i[n]=sTe(t[n]):i[n]=t[n]})}),i}function $c(i,e){const t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),i.dispatchEvent(t)}function oTe(i){return i&&(i.toString()==="[object ShadowRoot]"?i:oTe(i.parentNode))}function Eu(i,e){return i&&Object.prototype.hasOwnProperty.call(i,e)}const QJe=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function eQe(i){if(typeof i>"u"||i===null)return!1;const e=i.match(QJe),t=parseFloat(i);return e!==null&&!isNaN(t)&&isFinite(t)}const tQe=/^\s*(-|\+)?(\d+)\s*$/;function iQe(i){if(typeof i>"u"||i===null)return!1;const e=i.match(tQe),t=parseInt(i);return e!==null&&!isNaN(t)&&isFinite(t)}function qE(){let i=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(e==="x"?t:t&3|8).toString(16)})}function eI(i){return i&&typeof i=="object"&&!Array.isArray(i)}function xR(i,...e){if(!e.length)return i;const t=e.shift();if(eI(i)&&eI(t))for(const n in t)eI(t[n])?(i[n]||Object.assign(i,{[n]:{}}),xR(i[n],t[n])):Object.assign(i,{[n]:t[n]});return xR(i,...e)}function nQe(i,e){return Object.keys(e).forEach(function(t){t in i&&(i[t]=e[t])}),i}class Xa{constructor(e,t){this.defaults=t,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=$i({},this.options||{},this.schema.options||{},e.schema.options||{},e),this.enforceConst=this.options.enforce_const??this.jsoneditor.options.enforce_const,this.formname=this.jsoneditor.options.form_name_root||"root",!e.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=e.path||this.formname,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,e.container&&this.setContainer(e.container),this.registerDependencies()}onChildEditorChange(e,t){this.onChange(!0,!1,t)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(e){this.parent?this.parent.onChildEditorChange(this,e):this.jsoneditor&&this.jsoneditor.onChange(e)}onChange(e,t,n){this.notify(),t||this.watch_listener&&this.watch_listener(),e&&this.change(n)}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const e=this.getTitle()||this.formname;this.input.setAttribute("aria-label",e)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const e=this.options.dependencies;e&&Object.keys(e).forEach(t=>{let n;t.startsWith(this.jsoneditor.root.path)?n=t:(n=this.path.split("."),n[n.length-1]=t,n=n.join(".")),this.jsoneditor.watch(n,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const e=this.container||this.control;if(!e||this.jsoneditor===null)return;const t=this.options.dependencies;if(!t)return;const n=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(t).forEach(s=>{let o;s.startsWith(this.jsoneditor.root.path)?o=s:(o=this.path.split("."),o[o.length-1]=s,o=o.join("."));const l=t[s];this.checkDependency(o,l)}),this.dependenciesFulfilled!==n&&this.notify();let r=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(r="none"),e.tagName==="TD"?Object.keys(e.childNodes).forEach(s=>e.childNodes[s].style.display=r):e.style.display=r}checkDependency(e,t){if(this.path===e||this.jsoneditor===null)return;const n=this.jsoneditor.getEditor(e),r=n?n.getValue():void 0;!n||!n.dependenciesFulfilled||!r?this.dependenciesFulfilled=!1:Array.isArray(t)?this.dependenciesFulfilled=t.some(s=>{if(JSON.stringify(r)===JSON.stringify(s))return!0}):typeof t=="object"?typeof r!="object"?this.dependenciesFulfilled=t===r:Object.keys(t).some(s=>{if(!Eu(t,s))return!1;if(!Eu(r,s)||t[s]!==r[s])return this.dependenciesFulfilled=!1,!0}):typeof t=="string"||typeof t=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&r===t:typeof t=="boolean"&&(t?this.dependenciesFulfilled=this.dependenciesFulfilled&&(r||r.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!r||r.length===0))}setContainer(e){this.container=e,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(e){this.optInLabel=this.theme.getHiddenLabel(this.formname+" opt-in"),this.optInLabel.setAttribute("for",this.formname+"-opt-in"),this.optInCheckbox=document.createElement("input"),this.optInCheckbox.setAttribute("type","checkbox"),this.optInCheckbox.setAttribute("style","margin: 0 10px 0 0;"),this.optInCheckbox.setAttribute("id",this.formname+"-opt-in"),this.optInCheckbox.classList.add("json-editor-opt-in"),this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const t=this.jsoneditor.options.show_opt_in,n=typeof this.parent.options.show_opt_in<"u",r=n&&this.parent.options.show_opt_in===!0,s=n&&this.parent.options.show_opt_in===!1;(r||!s&&t||!n&&t)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.appendChild(this.optInLabel),this.header.appendChild(this.optInCheckbox),this.header.insertBefore(this.optInCheckbox,this.header.firstChild))}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConst&&this.schema.const&&this.disable()}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},Eu(this.schema,"watch")){let e,t,n,r,s;const o=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(a=>{if(e=this.schema.watch[a],Array.isArray(e)){if(e.length<2)return;t=[e[0]].concat(e[1].split("."))}else t=e.split("."),this.theme.closest(this.container,`[data-schemaid="${t[0]}"]`)||t.unshift("#");if(n=t.shift(),n==="#"&&(n=this.jsoneditor.schema.id||this.jsoneditor.root.formname),r=this.theme.closest(this.container,`[data-schemaid="${n}"]`),!r)throw new Error(`Could not find ancestor node with id ${n}`);s=`${r.getAttribute("data-schemapath")}.${t.join(".")}`,o.startsWith(s)&&(this.watchLoop=!0),this.jsoneditor.watch(s,this.watch_listener),this.watched[a]=s})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))}onMove(){}getButton(e,t,n,r=[]){const s=`json-editor-btn-${t}`;this.iconlib?t=this.iconlib.getIcon(t):t=null,e=this.translate(e,r),n=this.translate(n,r),!t&&n&&(e=n,n=null);const o=this.theme.getButton(e,t,n);return o.classList.add(s),o}setButtonText(e,t,n,r,s=[]){return this.iconlib?n=this.iconlib.getIcon(n):n=null,t=this.translate(t,s),r=this.translate(r,s),!n&&r&&(t=r,r=null),this.theme.setButtonText(e,t,n,r)}addLink(e){this.link_holder&&this.link_holder.appendChild(e)}getLink(e){let t,n;const s=(e.mediaType||"application/javascript").split("/")[0],o=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine);let l=null;if(e.download&&(l=e.download),l&&l!==!0&&(l=this.jsoneditor.compileTemplate(l,this.template_engine)),s==="image"){t=this.theme.getBlockLinkHolder(),n=document.createElement("a"),n.setAttribute("target","_blank");const u=document.createElement("img");this.theme.createImageLink(t,n,u),this.link_watchers.push(c=>{const h=o(c),d=a(c);n.setAttribute("href",h),n.setAttribute("title",d||h),u.setAttribute("src",h)})}else if(["audio","video"].includes(s)){t=this.theme.getBlockLinkHolder(),n=this.theme.getBlockLink(),n.setAttribute("target","_blank");const u=document.createElement(s);u.setAttribute("controls","controls"),this.theme.createMediaLink(t,n,u),this.link_watchers.push(c=>{const h=o(c),d=a(c);n.setAttribute("href",h),n.textContent=d||h,u.setAttribute("src",h)})}else n=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,t.style.display="none",this.link_watchers.push(u=>{const c=o(u),h=a(u);c&&(t.style.display=""),t.setAttribute("href",c),t.textContent=h||c});return l&&n&&(l===!0?n.setAttribute("download",""):this.link_watchers.push(u=>{n.setAttribute("download",l(u))})),e.class&&e.class.split(" ").forEach(c=>{n.classList.add(c)}),t}refreshWatchedFieldValues(){if(!this.watched_values)return;const e={};let t=!1;return this.watched&&Object.keys(this.watched).forEach(n=>{const r=this.jsoneditor.getEditor(this.watched[n]),s=r?r.getValue():null;this.watched_values[n]!==s&&(t=!0),e[n]=s}),e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const e=this.getHeaderText();if(this.header.children.length){for(let t=0;t<this.header.childNodes.length;t++)if(this.header.childNodes[t].nodeType===3){this.header.childNodes[t].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}}getHeaderText(e){return this.header_text?this.header_text:e?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}onWatchedFieldChange(){let e;if(this.header_template){e=$i(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(e.properties={},Object.keys(this.editors).forEach(n=>{const r=this.editors[n];if(r.schema&&r.schema.enum&&r.schema.options&&r.schema.options.enum_titles){const s=r.schema.enum.indexOf(r.value),o=r.options.enum_titles[s];e.properties[n]={enumTitle:o}}}));const t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(let t=0;t<this.link_watchers.length;t++)this.link_watchers[t](e)}}setValue(e){this.value=e}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(e=>this.jsoneditor.unwatch(e,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(this.enforceConst&&this.schema.const)return this.schema.const;if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&typeof e=="object"&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),typeof e=="string"){if(e==="number")return this.isDefaultRequired()?0:void 0;if(e==="boolean")return this.isDefaultRequired()?!1:void 0;if(e==="integer")return this.isDefaultRequired()?0:void 0;if(e==="string")return this.isDefaultRequired()?"":void 0;if(e==="null")return null;if(e==="object")return{};if(e==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(e){const t=[],n={};e.forEach(s=>{s.title&&(n[s.title]=n[s.title]||0,n[s.title]++),s.description&&(n[s.description]=n[s.description]||0,n[s.description]++),s.format&&(n[s.format]=n[s.format]||0,n[s.format]++),s.type&&(n[s.type]=n[s.type]||0,n[s.type]++)}),e.forEach(s=>{let o;typeof s=="string"?o=s:s.title&&n[s.title]<=1?o=s.title:s.format&&n[s.format]<=1?o=s.format:s.type&&n[s.type]<=1?o=s.type:s.description&&n[s.description]<=1?o=s.description:s.title?o=s.title:s.format?o=s.format:s.type?o=s.type:s.description?o=s.description:JSON.stringify(s).length<500?o=JSON.stringify(s):o="type",t.push(o)});const r={};return t.forEach((s,o)=>{r[s]=r[s]||0,r[s]++,n[s]>1&&(t[o]=`${s} ${r[s]}`)}),t}getValidId(e){return e=e===void 0?"":e.toString(),e.replace(/\s+/g,"-")}setInputAttributes(e,t){if(this.schema.options&&this.schema.options.inputAttributes){const n=this.schema.options.inputAttributes,r=["name","type"].concat(e),s=t||this.input;Object.keys(n).forEach(o=>{r.includes(o.toLowerCase())||s.setAttribute(o,n[o])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const e=this.schema.options.containerAttributes,t=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach(n=>{t.includes(n.toLowerCase())||this.container.setAttribute(n,e[n])})}}expandCallbacks(e,t){const n=this.defaults.callbacks[e];return Object.entries(t).forEach(([r,s])=>{s===Object(s)?t[r]=this.expandCallbacks(e,s):typeof s=="string"&&typeof n=="object"&&typeof n[s]=="function"&&(t[r]=n[s].bind(null,this))}),t}showValidationErrors(e){}}class Du extends Xa{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}setValue(e,t,n){if(this.template&&!n||(!this.shouldBeUnset()&&(e===null||typeof e>"u")?e="":typeof e=="object"?e=JSON.stringify(e):!this.shouldBeUnset()&&typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const r=this.sanitize(e);if(this.input.value===r)return;if(this.setValueToInputField(r),this.format==="range"){const o=this.control.querySelector("output");o&&(o.value=r)}const s=n||this.getValue()!==e;return this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),s&&this.onChange(!0,n),{changed:s,value:r}}setValueToInputField(e){this.input.value=e===void 0?"":e}getNumColumns(){const e=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);let t;return this.input_type==="textarea"?t=6:["text","email"].includes(this.input_type)?t=4:t=2,Math.min(12,Math.max(e,t))}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";let r=this.schema.minimum||0,s=this.schema.maximum||Math.max(100,r+1),o=1;this.schema.multipleOf&&(r%this.schema.multipleOf&&(r=Math.ceil(r/this.schema.multipleOf)*this.schema.multipleOf),s%this.schema.multipleOf&&(s=Math.floor(s/this.schema.multipleOf)*this.schema.multipleOf),o=this.schema.multipleOf),this.input=this.theme.getRangeInput(r,s,o,this.description,this.formname),this.input.setAttribute("id",this.formname)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].includes(this.format)&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength<"u"&&this.input.setAttribute("maxlength",this.schema.maxLength),typeof this.schema.pattern<"u"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength<"u"&&this.input.setAttribute("pattern",`.{${this.schema.minLength},}`),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",r=>{if(r.preventDefault(),r.stopPropagation(),this.schema.template){r.currentTarget.value=this.value;return}const s=r.currentTarget.value,o=this.sanitize(s);s!==o&&(r.currentTarget.value=o),this.is_dirty=!0,this.refreshValue(),this.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=r=>{if(!r)return;let s,o=r.offsetHeight;if(r.offsetHeight<r.scrollHeight)for(s=0;r.offsetHeight<r.scrollHeight+3&&!(s>100);)s++,o++,r.style.height=`${o}px`;else{for(s=0;r.offsetHeight>=r.scrollHeight+3&&!(s>100);)s++,o--,r.style.height=`${o}px`;r.style.height=`${o+1}px`}},this.input.addEventListener("keyup",r=>{this.adjust_height(r.currentTarget)}),this.input.addEventListener("change",r=>{this.adjust_height(r.currentTarget)}),this.adjust_height());const e=this.options.prompt_paste_max_length_reached??this.jsoneditor.options.prompt_paste_max_length_reached,t=typeof this.schema.maxLength<"u";e&&t&&this.input.addEventListener("paste",r=>{(r.clipboardData||window.clipboardData).getData("text").length+this.input.value.length>this.schema.maxLength&&alert(this.translate("paste_max_length_reached",[this.schema.maxLength]))}),this.format&&this.input.setAttribute("data-schemaformat",this.format);let{input:n}=this;if(this.format==="range"&&(n=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,n,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{if(this.input.parentNode&&this.afterInputReady(),this.adjust_height&&this.adjust_height(this.input),this.format==="range"){const r=this.control.querySelector("output");r.value=this.input.value}}),this.schema.template){const r=this.expandCallbacks("template",{template:this.schema.template});typeof r.template=="function"?this.template=r.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}setupCleave(e){const t=this.expandCallbacks("cleave",$i({},this.defaults.options.cleave||{},this.options.cleave||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.cleave_instance=new window.Cleave(e,t))}setupImask(e){const t=this.expandCallbacks("imask",$i({},this.defaults.options.imask||{},this.options.imask||{}));typeof t=="object"&&Object.keys(t).length>0&&(this.imask_instance=window.IMask(e,this.ajustIMaskOptions(t)))}ajustIMaskOptions(e){return Object.keys(e).forEach(t=>{if(e[t]===Object(e[t]))e[t]=this.ajustIMaskOptions(e[t]);else if(t==="mask")if(e[t].substr(0,6)==="regex:"){const n=e[t].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(n!==null)try{e[t]=new RegExp(n[1],n[2])}catch{}}else e[t]=this.getGlobalPropertyFromString(e[t])}),e}getGlobalPropertyFromString(e){if(e.includes(".")){const t=e.split("."),n=t[0],r=t[1];if(typeof window[n]<"u"&&typeof window[n][r]<"u")return window[n][r]}else if(typeof window[e]<"u")return window[e];return e}shouldBeUnset(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}getValue(){const e=!!(this.input&&this.input.value);if(!(this.shouldBeUnset()&&!e))return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:super.getValue()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}afterInputReady(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}refreshValue(){this.input&&(this.value=this.input.value,typeof this.value!="string"&&!this.shouldBeUnset()&&(this.value=""),this.serialized=this.value)}destroy(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}showValidationErrors(e){if(this.jsoneditor.options.show_errors!=="always"){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return}this.previous_error_setting=this.jsoneditor.options.show_errors;const t=(r,s)=>(s.path===this.path&&r.push(s.message),r),n=e.reduce(t,[]);n.length?this.theme.addInputError(this.input,`${n.join(". ")}.`):this.theme.removeInputError(this.input)}}class rQe extends Du{setValue(e,t,n){const r=super.setValue(e,t,n);r!==void 0&&r.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(r.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;if(window.ace){let t=this.input_type;(t==="cpp"||t==="c++"||t==="c")&&(t="c_cpp"),e=this.expandCallbacks("ace",$i({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:`ace/mode/${t}`})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,e),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",()=>{this.input.value=this.ace_editor_instance.getValue(),this.refreshValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),super.enable()}disable(e){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),super.disable(e)}destroy(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),super.destroy()}}const sQe={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};class b5 extends Xa{askConfirmation(){return!(this.jsoneditor.options.prompt_before_delete===!0&&window.confirm(this.translate("button_delete_node_warning"))===!1)}register(){super.register(),this.rows&&this.rows.forEach(e=>e.register())}unregister(){super.unregister(),this.rows&&this.rows.forEach(e=>e.unregister())}getNumColumns(){const e=this.getItemInfo(0);return this.tabs_holder&&this.schema.format!=="tabs-top"?Math.max(Math.min(12,e.width+2),4):e.width}enable(){this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach(e=>{e.enable(),this.setAvailability(e,!1)}),super.enable())}disable(e){e&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach(t=>{t.disable(e),this.setAvailability(t,!0)}),super.disable()}setAvailability(e,t){e.add_row_button&&(e.add_row_button.disabled=t),e.remove_all_rows_button&&(e.remove_all_rows_button.disabled=t),e.delete_last_row_button&&(e.delete_last_row_button.disabled=t),e.copy_button&&(e.copy_button.disabled=t),e.delete_button&&(e.delete_button.disabled=t),e.moveup_button&&(e.moveup_button.disabled=t),e.movedown_button&&(e.movedown_button.disabled=t)}preBuild(){super.preBuild(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top}build(){this.options.compact?(this.title=this.theme.getHeader("",this.getPathDepth()),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs-top"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()}postBuild(){super.postBuild(),(this.schema.readOnly||this.schema.readonly)&&this.disable()}onChildEditorChange(e,t){this.refreshValue(),this.refreshTabs(!0),super.onChildEditorChange(e,t)}getItemTitle(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){const e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=this.translateProperty(e.title)||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)}getItemSchema(e){if(Array.isArray(this.schema.items))if(e>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return $i({},this.schema.additionalItems)}else return $i({},this.schema.items[e]);else return this.schema.items?$i({},this.schema.items):{}}getItemInfo(e){let t=this.getItemSchema(e);this.item_info=this.item_info||{};const n=JSON.stringify(t);return typeof this.item_info[n]<"u"?this.item_info[n]:(t=this.jsoneditor.expandRefs(t),this.item_info[n]={title:this.translateProperty(t.title)||this.translate("default_array_item_title"),default:t.default,width:12,child_editors:t.properties||t.items},this.item_info[n])}getElementEditor(e){const t=this.getItemInfo(e);let n=this.getItemSchema(e);n=this.jsoneditor.expandRefs(n),n.title=`${t.title} ${e+1}`;const r=this.jsoneditor.getEditorClass(n);let s;this.tabs_holder?(this.schema.format==="tabs-top"?s=this.theme.getTopTabContent():s=this.theme.getTabContent(),s.id=`${this.path}.${e}`):t.child_editors?s=this.theme.getChildEditorHolder():s=this.theme.getIndentedPanel(),this.row_holder.appendChild(s);const o=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:s,path:`${this.path}.${e}`,parent:this,required:!0});return o.preBuild(),o.build(),o.postBuild(),o.title_controls||(o.array_controls=this.theme.getButtonHolder(),s.appendChild(o.array_controls)),o}checkParent(e){return e&&e.parentNode}destroy(){this.empty(!0),this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.controls)&&this.controls.parentNode.removeChild(this.controls),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,super.destroy()}empty(e){if(this.rows!==null){if(this.rows.forEach((t,n)=>{e&&(this.checkParent(t.tab)&&t.tab.parentNode.removeChild(t.tab),this.destroyRow(t,!0),this.row_cache[n]=null),this.rows[n]=null}),e)for(let t=this.rows.length;t<this.row_cache.length;t++)this.destroyRow(this.row_cache[t],!0),this.row_cache[t]=null;this.rows=[],e&&(this.row_cache=[])}}destroyRow(e,t){const n=e.container;t?(e.destroy(),n.parentNode&&n.parentNode.removeChild(n),this.checkParent(e.tab)&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),n.style.display="none",e.unregister())}getMax(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}refreshTabs(e){this.rows.forEach(t=>{t.tab&&(e?t.tab_text.textContent=t.getHeaderText():t.tab===this.active_tab?this.theme.markTabActive(t):this.theme.markTabInactive(t))})}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length).default);return this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax())),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized){t&&this.refreshValue(t);return}e.forEach((o,a)=>{if(this.rows[a])this.rows[a].setValue(o,t);else if(this.row_cache[a])this.rows[a]=this.row_cache[a],this.rows[a].setValue(o,t),this.rows[a].container.style.display="",this.rows[a].tab&&(this.rows[a].tab.style.display=""),this.rows[a].register(),this.jsoneditor.trigger("addRow",this.rows[a]);else{const l=this.addRow(o,t);this.jsoneditor.trigger("addRow",l)}});for(let o=e.length;o<this.rows.length;o++)this.destroyRow(this.rows[o]),this.rows[o]=null;this.rows=this.rows.slice(0,e.length);const r=this.rows.find(o=>o.tab===this.active_tab);let s=typeof r<"u"?r.tab:null;!s&&this.rows.length&&(s=this.rows[0].tab),this.active_tab=s,this.refreshValue(t),this.refreshTabs(!0),this.refreshTabs(),this.onChange()}setButtonState(e,t){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:e.style.display=t?"":"none";break;case 2:e.disabled=!t;break;default:e.style.display=t?"":"none"}}setupButtons(e){const t=[];if(!this.value.length)this.setButtonState(this.delete_last_row_button,!1),this.setButtonState(this.remove_all_rows_button,!1);else if(this.value.length===1){this.setButtonState(this.remove_all_rows_button,!1);const r=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,r),t.push(r)}else{const r=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,r),t.push(r);const s=!(e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,s),t.push(s)}const n=!(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button);return this.setButtonState(this.add_row_button,n),t.push(n),t.some(r=>r)}refreshValue(e){const t=this.value?this.value.length:0;if(this.value=this.rows.map(n=>n.getValue()),t!==this.value.length||e){const n=this.schema.minItems&&this.schema.minItems>=this.rows.length;this.rows.forEach((r,s)=>{if(r.movedown_button){const o=s!==this.rows.length-1;this.setButtonState(r.movedown_button,o)}r.delete_button&&this.setButtonState(r.delete_button,!n),this.value[s]=r.getValue()}),this.setupButtons(n)&&!this.collapsed?this.controls.style.display="inline-block":this.controls.style.display="none"}this.serialized=JSON.stringify(this.value)}addRow(e,t){const n=this.rows.length;this.rows[n]=this.getElementEditor(n),this.row_cache[n]=this.rows[n],this.tabs_holder&&(this.rows[n].tab_text=document.createElement("span"),this.rows[n].tab_text.textContent=this.rows[n].getHeaderText(),this.schema.format==="tabs-top"?(this.rows[n].tab=this.theme.getTopTab(this.rows[n].tab_text,this.getValidId(this.rows[n].path)),this.theme.addTopTab(this.tabs_holder,this.rows[n].tab)):(this.rows[n].tab=this.theme.getTab(this.rows[n].tab_text,this.getValidId(this.rows[n].path)),this.theme.addTab(this.tabs_holder,this.rows[n].tab)),this.rows[n].tab.addEventListener("click",s=>{this.active_tab=this.rows[n].tab,this.refreshTabs(),s.preventDefault(),s.stopPropagation()}));const r=this.rows[n].title_controls||this.rows[n].array_controls;return this.hide_delete_buttons||(this.rows[n].delete_button=this._createDeleteButton(n,r)),this.show_copy_button&&(this.rows[n].copy_button=this._createCopyButton(n,r)),n&&!this.hide_move_buttons&&(this.rows[n].moveup_button=this._createMoveUpButton(n,r)),this.hide_move_buttons||(this.rows[n].movedown_button=this._createMoveDownButton(n,r)),typeof e<"u"&&this.rows[n].setValue(e,t),this.refreshTabs(),this.rows[n]}_createDeleteButton(e,t){const n=this.getButton(this.getItemTitle(),"delete","button_delete_row_title",[this.getItemTitle()]);return n.classList.add("delete","json-editor-btntype-delete"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),!this.askConfirmation())return!1;const s=r.currentTarget.getAttribute("data-i")*1,o=this.getValue().filter((c,h)=>h!==s);let a=null;const u=this.rows[s].getValue();this.setValue(o),this.rows[s]?a=this.rows[s].tab:this.rows[s-1]&&(a=this.rows[s-1].tab),a&&(this.active_tab=a,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",u)}),t&&t.appendChild(n),n}_createCopyButton(e,t){const n=this.getButton(this.getItemTitle(),"copy","button_copy_row_title",[this.getItemTitle()]),r=this.schema;return n.classList.add("copy","json-editor-btntype-copy"),n.setAttribute("data-i",e),n.addEventListener("click",s=>{const o=this.getValue();s.preventDefault(),s.stopPropagation();const a=s.currentTarget.getAttribute("data-i")*1;o.forEach((l,u)=>{if(u===a){if(r.items.type==="string"&&r.items.format==="uuid")l=qE();else if(r.items.type==="object"&&r.items.properties)for(const c of Object.keys(l))r.items.properties&&r.items.properties[c]&&r.items.properties[c].format==="uuid"&&(l[c]=qE());o.push(l)}}),this.setValue(o),this.refreshValue(!0),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[a-1])}),t.appendChild(n),n}_createMoveUpButton(e,t){const n=this.getButton("",this.schema.format==="tabs-top"?"moveleft":"moveup","button_move_up_title");return n.classList.add("moveup","json-editor-btntype-move"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const s=r.currentTarget.getAttribute("data-i")*1;if(s<=0)return;const o=this.getValue(),a=o[s-1];o[s-1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s-1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t&&t.appendChild(n),n}_createMoveDownButton(e,t){const n=this.getButton("",this.schema.format==="tabs-top"?"moveright":"movedown","button_move_down_title");return n.classList.add("movedown","json-editor-btntype-move"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const s=r.currentTarget.getAttribute("data-i")*1,o=this.getValue();if(s>=o.length-1)return;const a=o[s+1];o[s+1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s+1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t&&t.appendChild(n),n}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.options.collapsed&&$c(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton(),this.tabs&&(this.add_row_button.classList.add("je-array-control-btn"),this.delete_last_row_button.classList.add("je-array-control-btn"),this.remove_all_rows_button.classList.add("je-array-control-btn"))}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");e.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(e,this.title.childNodes[0]);const t=this.row_holder.style.display,n=this.controls.style.display;return e.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.panel&&this.setButtonState(this.panel,this.collapsed),this.tabs_holder&&this.setButtonState(this.tabs_holder,this.collapsed),this.collapsed?(this.collapsed=!1,this.row_holder.style.display=t,this.controls.style.display=n,this.setButtonText(r.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.row_holder.style.display="none",this.controls.style.display="none",this.setButtonText(r.currentTarget,"","expand","button_expand"))}),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=this.rows.length;let r;this.row_cache[n]?(r=this.rows[n]=this.row_cache[n],this.rows[n].setValue(this.rows[n].getDefault(),!0),this.rows[n].container.style.display="",this.rows[n].tab&&(this.rows[n].tab.style.display=""),this.rows[n].register()):r=this.addRow(),this.active_tab=this.rows[n].tab,this.refreshTabs(),this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const n=this.getValue();let r=null;const s=n.pop();this.setValue(n),this.rows[this.rows.length-1]&&(r=this.rows[this.rows.length-1].tab),r&&(this.active_tab=r,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",s)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const n=this.getValue();this.empty(!0),this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",n)}),this.controls.appendChild(e),e}showValidationErrors(e){const t=[],n=[];e.forEach(r=>{r.path===this.path?t.push(r):n.push(r)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(r=>{this.error_holder.appendChild(this.theme.getErrorMessage(r.message))})):this.error_holder.style.display="none"),this.rows.forEach(r=>r.showValidationErrors(n))}}b5.rules=sQe;class PD extends Xa{onInputChange(){this.value=this.input.value,this.onChange(!0)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){let e=this.getTitle().length;return Object.keys(this.select_values).forEach(t=>e=Math.max(e,`${this.select_values[t]}`.length+4)),Math.min(12,Math.max(e/7,2))}preBuild(){super.preBuild(),this.select_options={},this.select_values={},this.option_titles=[],this.option_keys=[],this.option_enum=[];let e;const t=this.jsoneditor.expandRefs(this.schema.items||{}),n=t.enum||[],r=t.options?t.options.enum||[]:[],s=t.options?t.options.enum_titles||[]:[];for(e=0;e<n.length;e++){if(this.sanitize(n[e])!==n[e])continue;const o=r[e]||{};"title"in o||(o.title=`${s[e]||n[e]}`),this.option_keys.push(`${n[e]}`),this.option_enum.push(o),this.select_values[`${n[e]}`]=n[e]}}build(){let e;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){const t=this.formname+e.toString();this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.inputs[this.option_keys[e]].id=t,this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];const n=this.theme.getCheckboxLabel(this.option_enum[e].title);if(n.htmlFor=t,this.option_enum[e].infoText){const r=this.theme.getInfoButton(this.translateProperty(this.option_enum[e].infoText));n.appendChild(r)}this.controls["_"+this.option_keys[e]]=this.theme.getFormControl(n,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_enum.map(t=>t.title)),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=t=>{const n=[];for(e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]&&(this.select_options[this.option_keys[e]].selected||this.select_options[this.option_keys[e]].checked)&&n.push(this.select_values[this.option_keys[e]]);this.updateValue(n),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame(()=>{this.afterInputReady()})}postBuild(){super.postBuild()}afterInputReady(){this.theme.afterInputReady(this.input||this.inputs)}setValue(e,t){e=e||[],Array.isArray(e)||(e=[e]),e=e.map(n=>`${n}`),Object.keys(this.select_options).forEach(n=>{this.select_options[n][this.input_type==="select"?"selected":"checked"]=e.includes(n)}),this.updateValue(e),this.onChange(!0)}removeValue(e){e=[].concat(e),this.setValue(this.getValue().filter(t=>!e.includes(t)))}addValue(e){this.setValue(this.getValue().concat(e))}updateValue(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){if(!this.select_options[`${e[r]}`]){t=!0;continue}const s=this.sanitize(this.select_values[e[r]]);n.push(s),s!==e[r]&&(t=!0)}return this.value=n,t}sanitize(e){return this.schema.items.type==="boolean"?!!e:this.schema.items.type==="number"?1*e||0:this.schema.items.type==="integer"?Math.floor(e*1||0):`${e}`}enable(){this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach(e=>this.inputs[e].disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach(t=>this.inputs[t].disabled=!0),super.disable()}destroy(){super.destroy()}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}showValidationErrors(e){const t=new RegExp(`^${this.escapeRegExp(this.path)}(\\.\\d+)?$`),n=(s,o)=>(o.path.match(t)&&s.push(o.message),s),r=e.reduce(n,[]);r.length?this.theme.addInputError(this.input||this.inputs,`${r.join(". ")}.`):this.theme.removeInputError(this.input||this.inputs)}}class oQe extends PD{setValue(e,t){this.choices_instance?(e=[].concat(e).map(n=>`${n}`),this.updateValue(e),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",$i({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1}));this.newEnumAllowed=!1,this.choices_instance=new window.Choices(this.input,e),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{const n=this.choices_instance.getValue(!0);this.updateValue(n),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const n=[];for(let r=0;r<e.length;r++){if(!this.select_values[`${e[r]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[r]))continue}else continue;const s=this.sanitize(this.select_values[e[r]]);n.push(s),s!==e[r]&&(t=!0)}return this.value=n,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e),this.choices_instance.setChoices([{value:`${e}`,label:`${e}`}],"value","label",!1),!0}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}class aQe extends PD{setValue(e,t){this.select2_instance?(e=[].concat(e).map(n=>`${n}`),this.updateValue(e),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(e=this.expandCallbacks("select2",$i({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=e.tags=!!e.tags&&this.schema.items&&this.schema.items.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Eu(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const n=[];for(let r=0;r<e.length;r++){if(!this.select_values[`${e[r]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[r]))continue}else continue;const s=this.sanitize(this.select_values[e[r]]);n.push(s),s!==e[r]&&(t=!0)}return this.value=n,t}addNewOption(e){this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e);const t=this.input.querySelector(`option[value="${e}"]`);return t?t.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(e,e,!1,!1)).trigger("change"),!0}enable(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable()}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class lQe extends PD{setValue(e,t){this.selectize_instance?(e=[].concat(e).map(n=>`${n}`),this.updateValue(e),this.selectize_instance.setValue(this.value),this.onChange(!0)):super.setValue(e,t)}afterInputReady(){let e;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){e=this.expandCallbacks("selectize",$i({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=e.create=!!e.create&&this.schema.items&&this.schema.items.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=r=>{const s=this.selectize_instance.getValue();this.updateValue(s),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler);const t=this.theme.getHiddenLabel(this.formname);this.input.setAttribute("id",this.formname+"-hidden-input"),t.setAttribute("for",this.formname+"-hidden-input"),this.input.parentNode.insertBefore(t,this.input);const n=this.selectize_instance.$control[0];if(n){const r=this.theme.getHiddenLabel(this.formname);r.setAttribute("for",this.formname+"-selectized"),n.appendChild(r)}}super.afterInputReady()}updateValue(e){e=[].concat(e);let t=!1;const n=[];for(let r=0;r<e.length;r++){if(!this.select_values[`${e[r]}`])if(t=!0,this.newEnumAllowed){if(!this.addNewOption(e[r]))continue}else continue;const s=this.sanitize(this.select_values[e[r]]);n.push(s),s!==e[r]&&(t=!0)}return this.value=n,t}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.selectize_instance.addOption({text:e,value:e}),!0}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class uQe extends Du{postBuild(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),super.postBuild()}afterInputReady(){let e;window.Autocomplete&&!this.autocomplete_instance&&(e=this.expandCallbacks("autocomplete",$i({},{search:t=>(console.log(`No "search" callback defined for autocomplete in property "${t.key}"`),[]),onSubmit:()=>{this.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(e.baseClass),this.autocomplete_dropdown.classList.add(`${e.baseClass}-result-list`),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,e)),super.afterInputReady()}destroy(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),super.destroy()}}class cQe extends Xa{getNumColumns(){return 4}setFileReaderListener(e){e.addEventListener("load",t=>{if(this.count===this.current_item_index)this.value[this.count][this.key]=t.target.result;else{const n={};for(const r in this.parent.schema.properties)n[r]="";n[this.key]=t.target.result,this.value.splice(this.count,0,n)}this.count+=1,this.count===this.total+this.current_item_index&&this.arrayEditor.setValue(this.value)})}build(){if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",t=>{if(t.preventDefault(),t.stopPropagation(),t.currentTarget.files&&t.currentTarget.files.length)if(t.currentTarget.files.length>1&&this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"){this.arrayEditor=this.jsoneditor.getEditor(this.parent.parent.path),this.value=this.arrayEditor.getValue(),this.total=t.currentTarget.files.length,this.current_item_index=parseInt(this.parent.key),this.count=this.current_item_index;for(let n=0;n<this.total;n++){const r=new FileReader;this.setFileReaderListener(r),r.readAsDataURL(t.currentTarget.files[n])}}else{let n=new FileReader;n.onload=r=>{this.value=r.target.result,this.refreshPreview(),this.onChange(!0),n=null},n.readAsDataURL(t.currentTarget.files[0])}})}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control);const e=this.getButton("button_upload","upload","button_upload");e.addEventListener("click",()=>{this.uploader.click()}),this.control.appendChild(e),this.setInputAttributes(["multiple"],e)}refreshPreview(){if(this.last_preview===this.value||(this.last_preview=this.value,this.preview.innerHTML="",!this.value))return;let e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),!e)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML=`<strong>Type:</strong> ${e}, <strong>Size:</strong> ${Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)} bytes`,e.substr(0,5)==="image"){this.preview.innerHTML+="<br>";const t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(e)?this.value=this.schema.enum[0]:this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())}destroy(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),super.destroy()}}class aTe extends Xa{constructor(e,t){super(e,t),this.active=!1,this.isUiOnly=!0,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key)||this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])}build(){this.options.compact=!0;const e=this.expandCallbacks("button",$i({},{icon:"",validated:!1,align:"left",action:(n,r)=>{window.alert(`No button action defined for "${n.path}"`)}},this.defaults.options.button||{},this.options.button||{})),t=this.translateProperty(e.text||this.schema.title)||this.key;this.input=this.getButton(t,e.icon,t),typeof e.action!="function"?window.alert(`No button action defined for "${this.path}"`):this.input.addEventListener("click",e.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(e.align),this.control.appendChild(this.input),this.container.appendChild(this.control),this.changeHandler=()=>{this.jsoneditor.validate(this.jsoneditor.getValue()).length>0?this.disable():this.enable()},e.validated&&this.jsoneditor.on("change",this.changeHandler)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}getNumColumns(){return 2}activate(){this.active=!1,this.enable()}deactivate(){this.isRequired()||(this.active=!1,this.disable())}destroy(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,super.destroy()}}class hQe extends Xa{setValue(e,t){e=!!e;const n=this.getValue()!==e;this.value=e,this.input.checked=this.value,t||(this.is_dirty=!0),this.onChange(n)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){return Math.min(12,Math.max(this.getTitle().length/7,2))}build(){this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.value=e.currentTarget.checked,this.is_dirty=!0,this.onChange(!0)}),this.container.appendChild(this.control)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,n=t==="change"||t==="interaction";if(t==="never"||n&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);this.input.controlgroup=this.control,o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}class cC extends Xa{setValue(e,t){let n=this.typecast(e);const r=this.enum_options.length>0&&this.enum_values.includes(n),s=!!this.jsoneditor.options.use_default_values||typeof this.schema.default<"u";if(!this.hasPlaceholderOption&&(!r||t&&!this.isRequired()&&!s)&&(n=this.enum_values[0]),this.value===n)return;const o=this.enum_values.indexOf(n);r&&o!==-1?this.input.value=this.enum_options[o]:this.hasPlaceholderOption?this.input.value="_placeholder_":this.input.value=n,this.value=n,t||(this.is_dirty=!0),this.onChange(),this.change()}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){if(!this.enum_options)return 3;let e=this.getTitle().length;for(let t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))}typecast(e){return this.schema.type==="boolean"?e==="undefined"||e===void 0?void 0:!!e:this.schema.type==="number"?1*e||0:this.schema.type==="integer"?Math.floor(e*1||0):this.schema.enum&&e===void 0?void 0:`${e}`}getValue(){if(this.dependenciesFulfilled)return this.typecast(this.value)}preBuild(){var n,r,s,o;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];let e,t;if(this.hasPlaceholderOption=((r=(n=this.schema)==null?void 0:n.options)==null?void 0:r.has_placeholder_option)||!1,this.placeholderOptionText=((o=(s=this.schema)==null?void 0:s.options)==null?void 0:o.placeholder_option_text)||" ",this.enforceConst&&this.schema.const){const a=this.schema.const;this.enum_options=[`${a}`],this.enum_display=[`${this.translateProperty(a)||a}`],this.enum_values=[this.typecast(a)]}else if(this.schema.enum){const a=this.schema.options&&this.schema.options.enum_titles||[];this.schema.enum.forEach((l,u)=>{this.enum_options[u]=`${l}`,this.enum_display[u]=`${this.translateProperty(a[u])||l}`,this.enum_values[u]=this.typecast(l)})}else if(this.schema.type==="boolean")this.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];else for(e=0;e<this.schema.enumSource.length;e++)typeof this.schema.enumSource[e]=="string"?this.enumSource[e]={source:this.schema.enumSource[e]}:Array.isArray(this.schema.enumSource[e])?this.enumSource[e]=this.schema.enumSource[e]:this.enumSource[e]=$i({},this.schema.enumSource[e]);for(e=0;e<this.enumSource.length;e++)this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].value}),typeof t.template=="function"?this.enumSource[e].value=t.template:this.enumSource[e].value=this.jsoneditor.compileTemplate(this.enumSource[e].value,this.template_engine)),this.enumSource[e].title&&(t=this.expandCallbacks("template",{template:this.enumSource[e].title}),typeof t.template=="function"?this.enumSource[e].title=t.template:this.enumSource[e].title=this.jsoneditor.compileTemplate(this.enumSource[e].title,this.template_engine)),this.enumSource[e].filter&&this.enumSource[e].value&&(t=this.expandCallbacks("template",{template:this.enumSource[e].filter}),typeof t.template=="function"?this.enumSource[e].filter=t.template:this.enumSource[e].filter=this.jsoneditor.compileTemplate(this.enumSource[e].filter,this.template_engine))}else throw new Error("'select' editor requires the enum property to be set.")}build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display,this.hasPlaceholderOption,this.placeholderOptionText),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}afterInputReady(){this.theme.afterInputReady(this.input)}onInputChange(){const e=this.typecast(this.input.value);let t;this.enum_values.includes(e)?t=this.enum_values[this.enum_values.indexOf(e)]:t=this.enum_values[0],t!==this.value&&(this.is_dirty=!0,this.value=t,this.onChange(!0))}onWatchedFieldChange(){let e,t,n=[],r=[];if(this.enumSource){e=this.getWatchedFieldValues();for(let o=0;o<this.enumSource.length;o++)if(Array.isArray(this.enumSource[o]))n=n.concat(this.enumSource[o]),r=r.concat(this.enumSource[o]);else{let a=[];if(Array.isArray(this.enumSource[o].source)?a=this.enumSource[o].source:a=e[this.enumSource[o].source],a){if(this.enumSource[o].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[o].slice)),this.enumSource[o].filter){const c=[];for(t=0;t<a.length;t++)this.enumSource[o].filter({i:t,item:a[t],watched:e})&&c.push(a[t]);a=c}const l=[],u=[];for(t=0;t<a.length;t++){const c=a[t];this.enumSource[o].value?u[t]=this.typecast(this.enumSource[o].value({i:t,item:c})):u[t]=a[t],this.enumSource[o].title?l[t]=this.enumSource[o].title({i:t,item:c}):l[t]=u[t]}this.enumSource[o].sort&&((c,h,d)=>{c.map((f,p)=>({v:f,t:h[p]})).sort((f,p)=>f.v<p.v?-d:f.v===p.v?0:d).forEach((f,p)=>{c[p]=f.v,h[p]=f.t})}).bind(null,u,l,this.enumSource[o].sort==="desc"?1:-1)(),n=n.concat(u),r=r.concat(l)}}const s=this.value;this.theme.setSelectOptions(this.input,n,r),this.enum_options=n,this.enum_display=r,this.enum_values=n,n.includes(s)||this.jsoneditor.options.enum_source_value_auto_select!==!1?(this.input.value=s,this.value=s):(this.input.value=n[0],this.value=this.typecast(n[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}super.onWatchedFieldChange()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable(e)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const t=this.jsoneditor.options.show_errors,n=t==="change"||t==="interaction";if(t==="never"||n&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}const dQe={".choices > *":"box-sizing:border-box"};class lTe extends cC{setValue(e,t){if(this.choices_instance){let n=this.typecast(e||"");if(this.enum_values.includes(n)||(n=this.enum_values[0]),this.value===n)return;t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(n)],this.choices_instance.setChoiceByValue(this.input.value),this.value=n,this.onChange()}else super.setValue(e,t)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",$i({},this.defaults.options.choices||{},this.options.choices||{}));this.choices_instance=new window.Choices(this.input,e)}super.afterInputReady()}onWatchedFieldChange(){if(super.onWatchedFieldChange(),this.choices_instance){const e=this.enum_options.map((t,n)=>({value:t,label:this.enum_display[n]}));this.choices_instance.setChoices(e,"value","label",!0),this.choices_instance.setChoiceByValue(`${this.value}`)}}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}lTe.rules=dQe;class fQe extends Du{build(){if(super.build(),!!this.input&&(this.schema.max&&typeof this.schema.max=="string"&&this.input.setAttribute("max",this.schema.max),this.schema.min&&typeof this.schema.max=="string"&&this.input.setAttribute("min",this.schema.min),window.flatpickr&&typeof this.options.flatpickr=="object")){this.options.flatpickr.enableTime=this.schema.format!=="date",this.options.flatpickr.noCalendar=this.schema.format==="time",this.schema.type==="integer"&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");let{input:e}=this;if(this.options.flatpickr.wrap===!0){const t=[];if(this.options.flatpickr.showToggleButton!==!1){const o=this.getButton("",this.schema.format==="time"?"time":"calendar","flatpickr_toggle_button");o.setAttribute("data-toggle",""),t.push(o)}if(this.options.flatpickr.showClearButton!==!1){const o=this.getButton("","clear","flatpickr_clear_button");o.setAttribute("data-clear",""),t.push(o)}const{parentNode:n}=this.input,{nextSibling:r}=this.input,s=this.theme.getInputGroup(this.input,t);s!==void 0?(this.options.flatpickr.inline=!1,n.insertBefore(s,r),e=s):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(e,this.options.flatpickr),this.options.flatpickr.inline===!0&&this.options.flatpickr.inlineHideInput===!0&&this.input.setAttribute("type","hidden")}}getValue(){if(!this.dependenciesFulfilled)return;if(this.schema.type==="string")return this.value;if(this.value===""||this.value===void 0)return;const e=this.schema.format==="time"?`1970-01-01 ${this.value}`:this.value;return parseInt(new Date(e).getTime()/1e3)}setValue(e,t,n){if(this.schema.type==="string")super.setValue(e,t,n),this.flatpickr&&this.flatpickr.setDate(e);else if(e>0){const r=new Date(e*1e3),s=r.getFullYear(),o=this.zeroPad(r.getMonth()+1),a=this.zeroPad(r.getDate()),l=this.zeroPad(r.getHours()),u=this.zeroPad(r.getMinutes()),c=this.zeroPad(r.getSeconds()),h=[s,o,a].join("-"),d=[l,u,c].join(":");let f=`${h}T${d}`;this.schema.format==="date"?f=h:this.schema.format==="time"&&(f=d),this.input.value=f,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(f)}}destroy(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,super.destroy()}zeroPad(e){return`0${e}`.slice(-2)}}class pQe extends Xa{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}enable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();super.enable()}disable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();super.disable()}switchEditor(){const e=this.getWatchedFieldValues();if(!e)return;const t=document.location.origin+document.location.pathname+this.template(e);this.editors[this.refs[t]]||this.buildChildEditor(t),this.currentEditor=this.refs[t],this.register(),this.editors.forEach((n,r)=>{n&&(this.currentEditor===r?n.container.style.display="":n.container.style.display="none")}),this.refreshValue(),this.onChange(!0)}buildChildEditor(e){this.refs[e]=this.editors.length;const t=this.theme.getChildEditorHolder();this.editor_holder.appendChild(t);const n=$i({},this.schema,this.jsoneditor.refs[e]),r=this.jsoneditor.getEditorClass(n,this.jsoneditor),s=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:t,path:this.path,parent:this,required:!0});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()}preBuild(){this.refs={},this.editors=[],this.currentEditor="";let e;for(e=0;e<this.schema.links.length;e++)if(this.schema.links[e].rel.toLowerCase()==="describedby"){this.template=this.jsoneditor.compileTemplate(this.schema.links[e].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,e).concat(this.schema.links.slice(e+1)),this.schema.links.length===0&&delete this.schema.links,this.baseSchema=$i({},this.schema)}build(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()}onWatchedFieldChange(){this.switchEditor()}onChildEditorChange(e,t){this.editors[this.currentEditor]&&this.refreshValue(),super.onChildEditorChange(e,t)}refreshValue(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}setValue(e,t){this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(e,t),this.refreshValue(),this.onChange())}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),super.destroy()}showValidationErrors(e){this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}}class gQe extends Xa{getNumColumns(){return 4}build(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enforceConst&&this.schema.const?this.enum=[this.schema.const]:this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(let e=0;e<this.enum.length;e++)this.select_options[e]=this.options.enum_titles[e]||`Value ${e+1}`,this.html_values[e]=this.getHTML(this.enum[e]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",e=>{this.selected=this.select_options.indexOf(e.currentTarget.value),this.value=this.enum[this.selected],this.refreshValue(),this.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),this.enum.length===1&&(this.switcher.style.display="none")}refreshValue(){if(!this.enum)return;this.selected=-1;const e=JSON.stringify(this.value);if(this.enum.forEach((t,n)=>{if(e===JSON.stringify(t))return this.selected=n,!1}),this.selected<0){this.setValue(this.enum[0]);return}this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]}enable(){this.always_disabled||(this.switcher.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.switcher.disabled=!0,super.disable()}getHTML(e){const t=(n,r)=>{Array.isArray(n)||typeof n.length=="number"&&n.length>0&&n.length-1 in n?Array.from(n).forEach((s,o)=>r(o,s)):Object.entries(n).forEach(([s,o])=>r(s,o))};if(e===null)return"<em>null</em>";if(typeof e=="object"){let n="";return t(e,(s,o)=>{let a=this.getHTML(o);Array.isArray(e)||(a=`<div><em>${s}</em>: ${a}</div>`),n+=`<li>${a}</li>`}),Array.isArray(e)?n=`<ol>${n}</ol>`:n=`<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>${n}</ul>`,n}else{if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return e}setValue(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())}destroy(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}}class mQe extends Xa{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}setValue(e,t,n){if(this.template&&!n||(e===null||typeof e>"u"?e="":typeof e=="object"?e=JSON.stringify(e):typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const r=this.sanitize(e);if(this.input.value===r)return;this.input.value=r;const s=n||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}getNumColumns(){return 2}enable(){super.enable()}disable(){super.disable()}refreshValue(){this.value=this.input.value,typeof this.value!="string"&&(this.value=""),this.serialized=this.value}destroy(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}build(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){const e=this.expandCallbacks("template",{template:this.schema.template});typeof e.template=="function"?this.template=e.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}class yQe extends aTe{build(){this.options.compact=!1,this.header=this.label=this.theme.getLabelLike(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)}getTitle(){return this.translateProperty(this.schema.title)}getNumColumns(){return 12}disable(){return!1}enable(){return!1}}class uTe extends Du{build(){if(super.build(),typeof this.schema.minimum<"u"){let{minimum:e}=this.schema;typeof this.schema.exclusiveMinimum<"u"&&(e+=1),this.input.setAttribute("min",e)}if(typeof this.schema.maximum<"u"){let{maximum:e}=this.schema;typeof this.schema.exclusiveMaximum<"u"&&(e-=1),this.input.setAttribute("max",e)}if(typeof this.schema.step<"u"){const e=this.schema.step||1;this.input.setAttribute("step",e)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset()){this.input.value="";return}}else return eQe(this.value)?parseFloat(this.value):this.value}}class cTe extends uTe{getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset())return}else return iQe(this.value)?parseInt(this.value):this.value}}class vQe extends Du{preBuild(){if(super.preBuild(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0};break}this.options=$i(this.options,this.schema.options||{})}}class _Qe extends Du{setValue(e,t,n){const r=super.setValue(e,t,n);r!==void 0&&r.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(r.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.Jodit?(e=this.expandCallbacks("jodit",$i({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",()=>{this.value=this.jodit_instance.getEditorValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),super.enable()}disable(e){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),super.disable(e)}destroy(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),super.destroy()}}const bQe=i=>{const e=i.split(".");if(e.length!==4)throw new Error("error_ipv4");e.forEach(t=>{if(isNaN(+t)||+t<0||+t>255)throw new Error("error_ipv4")})},xQe=i=>{if(!i.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")},wQe=i=>{if(!i.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")};function EQe(i,e,t,n){try{switch(i.format){case"ipv4":bQe(e);break;case"ipv6":xQe(e);break;case"hostname":wQe(e);break}return[]}catch(r){return[{path:t,property:"format",message:n(r.message)}]}}class hTe{constructor(e,t,n,r){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=n||{},this.translate=this.jsoneditor.translate||r.translate,this.translateProperty=this.jsoneditor.translateProperty||r.translateProperty,this.defaults=r,this._validateSubSchema={dependentRequired(s,o,a){const l=[];if(typeof s.dependentRequired<"u"){let u=[];Object.keys(s.dependentRequired).forEach(h=>{typeof o[h]<"u"&&(u=s.dependentRequired[h].filter(f=>!Eu(o,f)))}),u.length>0&&l.push({message:"Must have the required properties: "+u.join(", "),path:a})}return l},dependentSchemas(s,o,a){let l=[];return Object.keys(s.dependentSchemas).forEach(u=>{if(typeof o[u]<"u"){const c=s.dependentSchemas[u],h=this._validateSchema(c,o,a);l=[...l,...h]}}),l},contains(s,o,a){const l=[];let u=0;o.forEach(h=>{this._validateSchema(s.contains,h,a).length===0&&u++});const c=u===0;return typeof s.minContains<"u"?u<s.minContains&&l.push({message:this.translate("error_minContains",[u,s.minContains],s),path:a}):c&&l.push({message:this.translate("error_contains",null,s),path:a}),typeof s.maxContains<"u"&&u>s.maxContains&&l.push({message:this.translate("error_maxContains",[u,s.maxContains],s),path:a}),l},if(s,o,a){if(typeof s.then>"u"&&typeof s.else>"u")return[];const l=this._validateSchema(s.if,o,a);let u=[],c=[];return typeof s.then<"u"&&(u=this._validateSchema(s.then,o,a)),typeof s.else<"u"&&(c=this._validateSchema(s.else,o,a)),s.if===!0?u:s.if===!1?c:l.length===0?u:l.length>0?c:[]},const(s,o,a){return JSON.stringify(s.const)===JSON.stringify(o)?[]:[{path:a,property:"const",message:this.translate("error_const",null,s)}]},enum(s,o,a){const l=JSON.stringify(o);return s.enum.some(c=>l===JSON.stringify(c))?[]:[{path:a,property:"enum",message:this.translate("error_enum",null,s)}]},extends(s,o,a){const l=(u,c)=>(u.push(...this._validateSchema(c,o,a)),u);return s.extends.reduce(l,[])},allOf(s,o,a){const l=(u,c)=>(u.push(...this._validateSchema(c,o,a)),u);return s.allOf.reduce(l,[])},anyOf(s,o,a){return s.anyOf.some(u=>!this._validateSchema(u,o,a).length)?[]:[{path:a,property:"anyOf",message:this.translate("error_anyOf",null,s)}]},oneOf(s,o,a){let l=0;const u=[];s.oneOf.forEach((h,d)=>{const f=this._validateSchema(h,o,a);f.length||l++,f.forEach(p=>{p.path=`${a}.oneOf[${d}]${p.path.substr(a.length)}`}),u.push(...f)});const c=[];return l!==1&&(c.push({path:a,property:"oneOf",message:this.translate("error_oneOf",[l],s)}),c.push(...u)),c},not(s,o,a){return this._validateSchema(s.not,o,a).length?[]:[{path:a,property:"not",message:this.translate("error_not",null,s)}]},type(s,o,a){if(Array.isArray(s.type)){if(!s.type.some(u=>this._checkType(u,o)))return[{path:a,property:"type",message:this.translate("error_type_union",null,s)}]}else if(["date","time","datetime-local"].includes(s.format)&&s.type==="integer"){if(!this._checkType("string",`${o}`))return[{path:a,property:"type",message:this.translate("error_type",[s.format],s)}]}else if(!this._checkType(s.type,o))return[{path:a,property:"type",message:this.translate("error_type",[s.type],s)}];return[]},disallow(s,o,a){if(Array.isArray(s.disallow)){if(s.disallow.some(u=>this._checkType(u,o)))return[{path:a,property:"disallow",message:this.translate("error_disallow_union",null,s)}]}else if(this._checkType(s.disallow,o))return[{path:a,property:"disallow",message:this.translate("error_disallow",[s.disallow],s)}];return[]}},this._validateNumberSubSchema={multipleOf(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},divisibleBy(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},maximum(s,o,a){let l=s.exclusiveMaximum?o<s.maximum:o<=s.maximum;return window.math?l=window.math[s.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(o),window.math.bignumber(s.maximum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMaximum?"lt":"lte"](new window.Decimal(s.maximum))),l?[]:[{path:a,property:"maximum",message:this.translate(s.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[s.maximum],s)}]},minimum(s,o,a){let l=s.exclusiveMinimum?o>s.minimum:o>=s.minimum;return window.math?l=window.math[s.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(o),window.math.bignumber(s.minimum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMinimum?"gt":"gte"](new window.Decimal(s.minimum))),l?[]:[{path:a,property:"minimum",message:this.translate(s.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[s.minimum],s)}]}},this._validateStringSubSchema={maxLength(s,o,a){const l=[];return`${o}`.length>s.maxLength&&l.push({path:a,property:"maxLength",message:this.translate("error_maxLength",[s.maxLength],s)}),l},minLength(s,o,a){return`${o}`.length<s.minLength?[{path:a,property:"minLength",message:this.translate(s.minLength===1?"error_notempty":"error_minLength",[s.minLength],s)}]:[]},pattern(s,o,a){return new RegExp(s.pattern).test(o)?[]:[{path:a,property:"pattern",message:s.options&&s.options.patternmessage?s.options.patternmessage:this.translate("error_pattern",[s.pattern],s)}]}},this._validateArraySubSchema={items(s,o,a){const l=[];if(Array.isArray(s.items))for(let u=0;u<o.length;u++)if(s.items[u])l.push(...this._validateSchema(s.items[u],o[u],`${a}.${u}`));else{if(s.additionalItems===!0)break;if(s.additionalItems)l.push(...this._validateSchema(s.additionalItems,o[u],`${a}.${u}`));else if(s.additionalItems===!1){l.push({path:a,property:"additionalItems",message:this.translate("error_additionalItems",null,s)});break}else break}else o.forEach((u,c)=>{l.push(...this._validateSchema(s.items,u,`${a}.${c}`))});return l},maxItems(s,o,a){return o.length>s.maxItems?[{path:a,property:"maxItems",message:this.translate("error_maxItems",[s.maxItems],s)}]:[]},minItems(s,o,a){return o.length<s.minItems?[{path:a,property:"minItems",message:this.translate("error_minItems",[s.minItems],s)}]:[]},uniqueItems(s,o,a){const l={};for(let u=0;u<o.length;u++){const c=JSON.stringify(o[u]);if(l[c])return[{path:a,property:"uniqueItems",message:this.translate("error_uniqueItems",null,s)}];l[c]=!0}return[]}},this._validateObjectSubSchema={maxProperties(s,o,a){return Object.keys(o).length>s.maxProperties?[{path:a,property:"maxProperties",message:this.translate("error_maxProperties",[s.maxProperties],s)}]:[]},minProperties(s,o,a){return Object.keys(o).length<s.minProperties?[{path:a,property:"minProperties",message:this.translate("error_minProperties",[s.minProperties],s)}]:[]},required(s,o,a){const l=[];return Array.isArray(s.required)&&s.required.forEach(u=>{if(typeof o[u]<"u")return;const c=this.jsoneditor.getEditor(`${a}.${u}`);c&&c.dependenciesFulfilled===!1||c&&["button","info"].includes(c.schema.format||c.schema.type)||l.push({path:a,property:"required",message:this.translate("error_required",[s&&s.properties&&s.properties[u]&&s.properties[u].title?s.properties[u].title:u],s)})}),l},properties(s,o,a,l){const u=[];return Object.entries(s.properties).forEach(([c,h])=>{l[c]=!0,u.push(...this._validateSchema(h,o[c],`${a}.${c}`))}),u},patternProperties(s,o,a,l){const u=[];return Object.entries(s.patternProperties).forEach(([c,h])=>{const d=new RegExp(c);Object.entries(o).forEach(([f,p])=>{d.test(f)&&(l[f]=!0,u.push(...this._validateSchema(h,p,`${a}.${f}`)))})}),u}},this._validateObjectSubSchema2={propertyNames(s,o,a,l){const u=[],c=Object.keys(o);let h=null;for(let d=0;d<c.length;d++){let f="",p=!1;if(h=c[d],typeof s.propertyNames=="boolean"){if(s.propertyNames===!0)continue;u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_false",[h],s)});break}if(p=Object.entries(s.propertyNames).every(([m,y])=>{let v=!1,b=null;switch(m){case"maxLength":if(typeof y!="number"){f="error_property_names_maxlength";break}if(h.length>y){f="error_property_names_exceeds_maxlength";break}return!0;case"const":if(y!==h){f="error_property_names_const_mismatch";break}return!0;case"enum":if(!Array.isArray(y)){f="error_property_names_enum";break}if(y.forEach(x=>{x===h&&(v=!0)}),!v){f="error_property_names_enum_mismatch";break}return!0;case"pattern":if(typeof y!="string"){f="error_property_names_pattern";break}if(b=new RegExp(y),!b.test(h)){f="error_property_names_pattern_mismatch";break}return!0;default:return u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_unsupported",[m],s)}),!1}return u.push({path:a,property:"propertyNames",message:this.translate(f,[h],s)}),!1}),!p)break}return u},additionalProperties(s,o,a,l){const u=[],c=Object.keys(o);for(let h=0;h<c.length;h++){const d=c[h];if(!l[d])if(s.additionalProperties){if(s.additionalProperties===!0)break;u.push(...this._validateSchema(s.additionalProperties,o[d],`${a}.${d}`))}else{u.push({path:a,property:"additionalProperties",message:this.translate("error_additional_properties",[d],s)});break}}return u},dependencies(s,o,a){const l=[];return Object.entries(s.dependencies).forEach(([u,c])=>{typeof o[u]>"u"||(Array.isArray(c)?c.forEach(h=>{typeof o[h]>"u"&&l.push({path:a,property:"dependencies",message:this.translate("error_dependency",[h],s)})}):l.push(...this._validateSchema(c,o,a)))}),l}}}fitTest(e,t,n=1e7){const r={match:0,extra:0};if(typeof e=="object"&&e!==null){const s=this._getSchema(t);if(s.anyOf){let o={...r};for(const a of s.anyOf){const l=this.fitTest(e,a,n);(l.match>o.match||l.match===o.match&&l.extra<o.extra)&&(o=l)}return o}else{const o=this._getSchema(t).properties;for(const a in o){if(!Eu(o,a)){r.extra+=n;continue}if(typeof e[a]=="object"&&typeof o[a]=="object"&&typeof o[a].properties=="object"){const l=this.fitTest(e[a],o[a],n/100);r.match+=l.match,r.extra+=l.extra}typeof e[a]<"u"&&(r.match+=n)}}}return r}_getSchema(e){return typeof e>"u"?$i({},this.jsoneditor.expandRefs(this.schema)):e}validate(e){return this._validateSchema(this.schema,e)}_validateSchema(e,t,n){const r=[];return n=n||this.jsoneditor.root.formname,e=$i({},this.jsoneditor.expandRefs(e)),typeof t>"u"?this._validateV3Required(e,t,n):(Object.keys(e).forEach(s=>{this._validateSubSchema[s]&&r.push(...this._validateSubSchema[s].call(this,e,t,n))}),r.push(...this._validateByValueType(e,t,n)),e.links&&e.links.forEach((s,o)=>{s.rel&&s.rel.toLowerCase()==="describedby"&&(e=this._expandSchemaLink(e,o),r.push(...this._validateSchema(e,t,n,this.translate)))}),["date","time","datetime-local"].includes(e.format)&&r.push(...this._validateDateTimeSubSchema(e,t,n)),["uuid"].includes(e.format)&&r.push(...this._validateUUIDSchema(e,t,n)),r.push(...this._validateCustomValidator(e,t,n)),this._removeDuplicateErrors(r))}_expandSchemaLink(e,t){const n=e.links[t].href,r=this.jsoneditor.root.getValue(),s=this.jsoneditor.compileTemplate(n,this.jsoneditor.template),o=document.location.origin+document.location.pathname+s(r);return e.links=e.links.slice(0,t).concat(e.links.slice(t+1)),$i({},e,this.jsoneditor.refs[o])}_validateV3Required(e,t,n){return(typeof e.required<"u"&&e.required===!0||typeof e.required>"u"&&this.jsoneditor.options.required_by_default===!0)&&e.type!=="info"?[{path:n,property:"required",message:this.translate("error_notset",null,e)}]:[]}_validateByValueType(e,t,n){const r=[];if(t===null)return r;if(typeof t=="number")Object.keys(e).forEach(s=>{this._validateNumberSubSchema[s]&&r.push(...this._validateNumberSubSchema[s].call(this,e,t,n))});else if(typeof t=="string")Object.keys(e).forEach(s=>{this._validateStringSubSchema[s]&&r.push(...this._validateStringSubSchema[s].call(this,e,t,n))});else if(Array.isArray(t))Object.keys(e).forEach(s=>{this._validateArraySubSchema[s]&&r.push(...this._validateArraySubSchema[s].call(this,e,t,n))});else if(typeof t=="object"){const s={};Object.keys(e).forEach(o=>{this._validateObjectSubSchema[o]&&r.push(...this._validateObjectSubSchema[o].call(this,e,t,n,s))}),typeof e.additionalProperties>"u"&&this.jsoneditor.options.no_additional_properties&&!e.oneOf&&!e.anyOf&&!e.allOf&&(e.additionalProperties=!1),Object.keys(e).forEach(o=>{typeof this._validateObjectSubSchema2[o]<"u"&&r.push(...this._validateObjectSubSchema2[o].call(this,e,t,n,s))})}return r}_validateUUIDSchema(e,t,n){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?[]:[{path:n,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],e)}]}_validateNumberSubSchemaMultipleDivisible(e,t,n){const r=e.multipleOf||e.divisibleBy;let s=t/r===Math.floor(t/r);return window.math?s=window.math.mod(window.math.bignumber(t),window.math.bignumber(r)).equals(0):window.Decimal&&(s=new window.Decimal(t).mod(new window.Decimal(r)).equals(0)),s?[]:[{path:n,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[r],e)}]}_validateDateTimeSubSchema(e,t,n){const r=(c,h,d)=>h*1<1?[{path:d,property:"format",message:this.translate("error_invalid_epoch",null,c)}]:h!==Math.abs(parseInt(h))?[{path:d,property:"format",message:this.translate(`error_${c.format.replace(/-/g,"_")}`,[u],c)}]:[],s=(c,h,d,f)=>{if(h!==""){let p;if(f.flatpickr.config.mode!=="single"){const m=f.flatpickr.config.mode==="range"?f.flatpickr.l10n.rangeSeparator:", ";p=f.flatpickr.selectedDates.map(v=>f.flatpickr.formatDate(v,f.flatpickr.config.dateFormat)).join(m)}try{if(p){if(p!==h)throw new Error(`${f.flatpickr.config.mode} mismatch`)}else if(f.flatpickr.formatDate(f.flatpickr.parseDate(h,f.flatpickr.config.dateFormat),f.flatpickr.config.dateFormat)!==h)throw new Error("mismatch")}catch{const y=f.flatpickr.config.errorDateFormat!==void 0?f.flatpickr.config.errorDateFormat:f.flatpickr.config.dateFormat;return[{path:d,property:"format",message:this.translate(`error_${f.format.replace(/-/g,"_")}`,[y],c)}]}}return[]},o={date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/},a={date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'},l=this.jsoneditor.getEditor(n),u=l&&l.flatpickr?l.flatpickr.config.dateFormat:a[e.format];if(e.type==="integer")return r(e,t,n);if(!l||!l.flatpickr){if(!o[e.format].test(t))return[{path:n,property:"format",message:this.translate(`error_${e.format.replace(/-/g,"_")}`,[u],e)}]}else if(l)return s(e,t,n,l);return[]}_validateCustomValidator(e,t,n){const r=[];r.push(...EQe.call(this,e,t,n,this.translate));const s=o=>{r.push(...o.call(this,e,t,n))};return this.defaults.custom_validators.forEach(s),this.options.custom_validators&&this.options.custom_validators.forEach(s),r}_removeDuplicateErrors(e){return e.reduce((t,n)=>{let r=!0;return t||(t=[]),t.forEach(s=>{s.message===n.message&&s.path===n.path&&s.property===n.property&&(s.errorcount++,r=!1)}),r&&(n.errorcount=1,t.push(n)),t},[])}_checkType(e,t){const n={string:r=>typeof r=="string",number:r=>typeof r=="number",integer:r=>typeof r=="number"&&r===Math.floor(r),boolean:r=>typeof r=="boolean",array:r=>Array.isArray(r),object:r=>r!==null&&!Array.isArray(r)&&typeof r=="object",null:r=>r===null};return typeof e=="string"?n[e]?n[e](t):!0:!this._validateSchema(e,t).length}}class CQe extends Xa{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4}enable(){if(!this.always_disabled){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,super.enable()}}disable(e){if(e&&(this.always_disabled=!0),this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable(e);this.switcher.disabled=!0,super.disable()}switchEditor(e){this.lastType=this.type,this.editors[e]||this.buildChildEditor(e);let t=this.getValue();this.type=e,this.register(),this.editors.forEach((n,r)=>{n&&(this.type===r?(this.keep_only_existing_values&&(t=nQe(n.getValue(),t)),(this.keep_values||this.if)&&n.setValue(t,!0),n.container.style.display=""):n.container.style.display="none")}),this.onChange(!0,!1,{event:"switch",data:{type:this.lastType,path:this.editors[e].path}}),this.refreshValue(),this.refreshHeaderText()}buildChildEditor(e){var o;const t=this.types[e],n=this.theme.getChildEditorHolder();this.editor_holder.appendChild(n);let r;typeof t=="string"?(r=$i({},this.schema),r.type=t):(r=$i({},this.schema,t),r=this.jsoneditor.expandRefs(r),t&&t.required&&Array.isArray(t.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(r.required=this.schema.required.concat(t.required))),(o=r==null?void 0:r.options)!=null&&o.dependencies&&delete r.options.dependencies;const s=this.jsoneditor.getEditorClass(r);this.editors[e]=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:r,container:n,path:this.path,parent:this,required:!0}),this.editors[e].preBuild(),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].header&&this.theme.visuallyHidden(this.editors[e].header),this.editors[e].option=this.switcher_options[e],n.addEventListener("change_header_text",()=>{this.refreshHeaderText()}),e!==this.type&&(n.style.display="none")}preBuild(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,typeof this.jsoneditor.options.keep_oneof_values<"u"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),typeof this.options.keep_oneof_values<"u"&&(this.keep_values=this.options.keep_oneof_values),this.keep_only_existing_values=!1,typeof this.jsoneditor.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.jsoneditor.options.keep_only_existing_values),typeof this.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.options.keep_only_existing_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else if(this.schema.if)this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:"then"},this.elseSchema={title:"else"},this.types=[],this.schema.then&&xR(this.thenSchema,this.schema,this.schema.then),this.schema.else&&xR(this.elseSchema,this.schema,this.schema.else),this.types.push(this.thenSchema),this.types.push(this.elseSchema),this.types.forEach(e=>{delete e.if,delete e.then,delete e.else}),delete this.schema.if;else{if(!this.schema.type||this.schema.type==="any"){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){let{disallow:e}=this.schema;(typeof e!="object"||!Array.isArray(e))&&(e=[e]);const t=[];this.types.forEach(n=>{e.includes(n)||t.push(n)}),this.types=t}}else Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)}build(){const{container:e}=this;this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired()),this.switcher=this.theme.getSwitcher(this.display_text),this.switcher.setAttribute("id",this.formname+"switcher"),this.switcherLabel=this.theme.getHiddenLabel(this.formname+" switcher"),this.switcherLabel.setAttribute("for",this.formname+"switcher"),this.if||(this.container.appendChild(this.header),e.appendChild(this.switcherLabel),e.appendChild(this.switcher)),this.switcher.addEventListener("change",n=>{n.preventDefault(),n.stopPropagation(),this.switchEditor(this.display_text.indexOf(n.currentTarget.value)),this.onChange(!0)}),this.editor_holder=document.createElement("div"),e.appendChild(this.editor_holder);const t={};this.jsoneditor.options.custom_validators&&(t.custom_validators=this.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),this.types.forEach((n,r)=>{this.editors[r]=!1;let s;typeof n=="string"?(s=$i({},this.schema),s.type=n):(s=$i({},this.schema,n),n.required&&Array.isArray(n.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(s.required=this.schema.required.concat(n.required))),this.validators[r]=new hTe(this.jsoneditor,s,t,this.defaults)}),this.jsoneditor.on("change",()=>{this.switchIf()}),this.switchEditor(0)}onChildEditorChange(e,t){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),super.onChildEditorChange(e,t)}refreshHeaderText(){const e=this.getDisplayText(this.types);Array.from(this.switcher_options).forEach((t,n)=>{t.textContent=e[n]})}refreshValue(){this.editors[this.type]&&(this.value=this.editors[this.type].getValue())}switchIf(){if(this.ifSchema&&this.value){const e=this.getIfType(this.value);this.lastType!==e&&(this.switchEditor(e),this.editors[this.type].setValue(this.value,!0)),this.switcher.value=this.display_text[this.type]}}getIfType(e){return this.jsoneditor.validator._validateSchema(this.ifSchema,e).length===0?0:1}setValue(e,t){const n=this.type;let r={match:0,extra:0,i:this.type};const s={match:0,i:null};this.validators.forEach((l,u)=>{let c=null;typeof this.anyOf<"u"&&this.anyOf&&(c=l.fitTest(e),(r.match<c.match||r.match===c.match&&r.extra>c.extra)&&(r=c,r.i=u)),!l.validate(e).length&&s.i===null?(s.i=u,c!==null&&(s.match=c.match)):r=s});let o=s.i;typeof this.anyOf<"u"&&this.anyOf&&s.match<r.match&&(o=r.i),this.if&&(o=this.getIfType(e)),o===null&&(o=this.type),this.type=o,this.switcher.value=this.display_text[o];const a=this.type!==n;a&&(this.switchEditor(this.type),this.editors[this.type].setValue(e,t)),typeof e<"u"&&this.editors[this.type].setValue(e,t),this.refreshValue(),this.onChange(a)}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}showValidationErrors(e){if(this.oneOf||this.anyOf){const t=this.oneOf?"oneOf":"anyOf";this.editors.forEach((n,r)=>{if(!n)return;const s=`${this.path}.${t}[${r}]`,o=(a,l)=>{if(l.path.startsWith(s)||l.path===s.substr(0,l.path.length)){const u=$i({},l);l.path.startsWith(s)&&(u.path=this.path+u.path.substr(s.length)),a.push(u)}return a};n.showValidationErrors(e.reduce(o,[]))})}else this.editors.forEach(t=>{t&&t.showValidationErrors(e)})}addLinks(){}}class SQe extends Xa{getValue(){if(this.dependenciesFulfilled)return null}setValue(){this.onChange()}getNumColumns(){return 2}}const TQe={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block"};class dTe extends Xa{constructor(e,t,n){super(e,t),this.currentDepth=n}getChildEditors(){return this.editors}register(){super.register(),this.editors&&Object.values(this.editors).forEach(e=>e.register())}unregister(){super.unregister(),this.editors&&Object.values(this.editors).forEach(e=>e.unregister())}getNumColumns(){return Math.max(Math.min(12,this.maxwidth),3)}enable(){this.always_disabled||(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),super.enable(),this.editors&&Object.values(this.editors).forEach(e=>{(e.isActive()||e.isUiOnly)&&e.enable(),e.optInCheckbox.disabled=!1}))}disable(e){e&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),super.disable(),this.editors&&Object.values(this.editors).forEach(t=>{(t.isActive()||t.isUiOnly)&&t.disable(e),t.optInCheckbox.disabled=!0})}layoutEditors(){let e,t;if(!this.row_container)return;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((u,c)=>{let h=this.editors[u].schema.propertyOrder,d=this.editors[c].schema.propertyOrder;return typeof h!="number"&&(h=1e3),typeof d!="number"&&(d=1e3),h-d});let n;const r=this.format==="categories",s=[];let o=null,a=null,l;if(this.format==="grid-strict"){let u=0;if(l=[],this.property_order.forEach(c=>{const h=this.editors[c];if(h.property_removed)return;const d=h.options.hidden?0:h.options.grid_columns||h.getNumColumns(),f=h.options.hidden?0:h.options.grid_offset||0,p=h.options.hidden?!1:h.options.grid_break||!1,m=h.options.hidden?0:h.container.offsetHeight,y={key:c,width:d,offset:f,height:m};l.push(y),s[u]=l,p&&(u++,l=[])}),this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),n=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),n.appendChild(l),t=0;t<s[e].length;t++)o=s[e][t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e][t].width,s[e][t].offset),l.appendChild(a.container)}else if(this.format==="grid"){for(this.property_order.forEach(u=>{const c=this.editors[u];if(c.property_removed)return;let h=!1;const d=c.options.hidden?0:c.options.grid_columns||c.getNumColumns(),f=c.options.hidden?0:c.container.offsetHeight;for(let p=0;p<s.length;p++)s[p].width+d<=12&&(!f||s[p].minh*.5<f&&s[p].maxh*2>f)&&(h=p);h===!1&&(s.push({width:0,minh:999999,maxh:0,editors:[]}),h=s.length-1),s[h].editors.push({key:u,width:d,height:f}),s[h].width+=d,s[h].minh=Math.min(s[h].minh,f),s[h].maxh=Math.max(s[h].maxh,f)}),e=0;e<s.length;e++)if(s[e].width<12){let u=!1,c=0;for(t=0;t<s[e].editors.length;t++)(u===!1||s[e].editors[t].width>s[e].editors[u].width)&&(u=t),s[e].editors[t].width*=12/s[e].width,s[e].editors[t].width=Math.floor(s[e].editors[t].width),c+=s[e].editors[t].width;c<12&&(s[e].editors[u].width+=12-c),s[e].width=12}if(this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),n=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),n.appendChild(l),t=0;t<s[e].editors.length;t++)o=s[e].editors[t].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e].editors[t].width),l.appendChild(a.container)}else{if(n=document.createElement("div"),r){const u=document.createElement("div"),c=this.theme.getTopTabHolder(this.translateProperty(this.schema.title)),h=this.theme.getTopTabContentHolder(c);for(this.property_order.forEach(p=>{const m=this.editors[p];if(m.property_removed)return;const y=this.theme.getTabContent(),v=m.schema&&(m.schema.type==="object"||m.schema.type==="array");y.isObjOrArray=v;const b=this.theme.getGridRow();m.tab||(typeof this.basicPane>"u"?this.addRow(m,c,y):this.addRow(m,c,this.basicPane)),y.id=this.getValidId(m.tab_text.textContent),v?(y.appendChild(b),h.appendChild(y),this.theme.addTopTab(c,m.tab)):(u.appendChild(b),h.childElementCount>0?h.firstChild.isObjOrArray&&(y.appendChild(u),h.insertBefore(y,h.firstChild),this.theme.insertBasicTopTab(m.tab,c),m.basicPane=y):(y.appendChild(u),h.appendChild(y),this.theme.addTopTab(c,m.tab),m.basicPane=y)),m.options.hidden?m.container.style.display="none":this.theme.setGridColumnSize(m.container,12),b.appendChild(m.container),m.rowPane=y});this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);const d=this.tabs_holder.parentNode;d.removeChild(d.firstChild),d.appendChild(c),this.tabPanesContainer=h,this.tabs_holder=c;const f=this.theme.getFirstTab(this.tabs_holder);f&&$c(f,"click");return}this.property_order.forEach(u=>{const c=this.editors[u];c.property_removed||(l=this.theme.getGridRow(),n.appendChild(l),c.options.hidden?c.container.style.display="none":this.theme.setGridColumnSize(c.container,12),l.appendChild(c.container))})}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(n)}getPropertySchema(e){let t=this.schema.properties[e]||{};t=$i({},t);let n=!!this.schema.properties[e];return this.schema.patternProperties&&Object.keys(this.schema.patternProperties).forEach(r=>{new RegExp(r).test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[r]),n=!0)}),!n&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(t=$i({},this.schema.additionalProperties)),t}preBuild(){if(super.preBuild(),this.editors={},this.cached_editors={},this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)Object.entries(this.schema.properties).forEach(([e,t])=>{const n=this.jsoneditor.getEditorClass(t);this.editors[e]=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:t,path:`${this.path}.${e}`,parent:this,compact:!0,required:!0},this.currentDepth+1),this.editors[e].preBuild();const r=this.editors[e].options.hidden?0:this.editors[e].options.grid_columns||this.editors[e].getNumColumns();this.minwidth+=r,this.maxwidth+=r}),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?this.schema.defaultProperties=Object.keys(this.schema.properties).filter(e=>this.isRequiredObject({key:e,schema:this.schema.properties[e]})):this.schema.defaultProperties=Object.keys(this.schema.properties)),this.maxwidth+=1,Array.isArray(this.schema.defaultProperties)&&this.schema.defaultProperties.forEach(e=>{this.addObjectProperty(e,!0),this.editors[e]&&(this.minwidth=Math.max(this.minwidth,this.editors[e].options.grid_columns||this.editors[e].getNumColumns()),this.maxwidth+=this.editors[e].options.grid_columns||this.editors[e].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((e,t)=>{let n=this.editors[e].schema.propertyOrder,r=this.editors[t].schema.propertyOrder;return typeof n!="number"&&(n=1e3),typeof r!="number"&&(r=1e3),n-r})}addTab(e){const t=this.rows[e].schema&&(this.rows[e].schema.type==="object"||this.rows[e].schema.type==="array");this.tabs_holder&&(this.rows[e].tab_text=document.createElement("span"),t?this.rows[e].tab_text.textContent=this.rows[e].getHeaderText():this.rows[e].tab_text.textContent=typeof this.schema.basicCategoryTitle>"u"?"Basic":this.schema.basicCategoryTitle,this.rows[e].tab=this.theme.getTopTab(this.rows[e].tab_text,this.getValidId(this.rows[e].tab_text.textContent)),this.rows[e].tab.addEventListener("click",n=>{this.active_tab=this.rows[e].tab,this.refreshTabs(),n.preventDefault(),n.stopPropagation()}))}addRow(e,t,n){const r=this.rows.length,s=e.schema.type==="object"||e.schema.type==="array";this.rows[r]=e,this.rows[r].rowPane=n,s?(this.addTab(r),this.theme.addTopTab(t,this.rows[r].tab)):typeof this.basicTab>"u"?(this.addTab(r),this.basicTab=r,this.basicPane=n,this.theme.addTopTab(t,this.rows[r].tab)):(this.rows[r].tab=this.rows[this.basicTab].tab,this.rows[r].tab_text=this.rows[this.basicTab].tab_text,this.rows[r].rowPane=this.rows[this.basicTab].rowPane)}refreshTabs(e){const t=typeof this.basicTab<"u";let n=!1;this.rows.forEach(r=>{!r.tab||!r.rowPane||!r.rowPane.parentNode||t&&r.tab===this.rows[this.basicTab].tab&&n||(e?r.tab_text.textContent=r.getHeaderText():(t&&r.tab===this.rows[this.basicTab].tab&&(n=!0),r.tab===this.active_tab?this.theme.markTabActive(r):this.theme.markTabInactive(r)))})}build(){const e=this.format==="categories";if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,Object.entries(this.editors).forEach(([t,n])=>{const r=this.theme.getTableCell();this.editor_holder.appendChild(r),n.setContainer(r),n.build(),n.postBuild(),n.setOptInCheckbox(n.header),n.setValue(n.getDefault(),!0),this.editors[t].options.hidden&&(r.style.display="none"),this.editors[t].options.input_width&&(r.style.width=this.editors[t].options.input_width)});else{if(this.options.table)throw new Error("Not supported yet");{this.header="",this.options.compact||(this.header=document.createElement("span"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.title.classList.add("je-object__title"),this.controls=this.theme.getButtonHolder(),this.controls.classList.add("je-object__controls"),this.container.appendChild(this.title),this.container.appendChild(this.controls),this.container.classList.add("je-object__container"),this.editjson_holder=this.theme.getModal(),this.editjson_textarea_label=this.theme.getHiddenLabel(this.translate("button_edit_json")),this.editjson_textarea_label.setAttribute("for",this.path+"-edit-json-textarea"),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.setAttribute("id",this.path+"-edit-json-textarea"),this.editjson_textarea.setAttribute("aria-labelledby",this.path+"-edit-json-textarea"),this.editjson_textarea.classList.add("je-edit-json--textarea"),this.editjson_save=this.getButton("button_save","save","button_save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.saveJSON()}),this.editjson_copy=this.getButton("button_copy","copy","button_copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.copyJSON()}),this.editjson_cancel=this.getButton("button_cancel","cancel","button_cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea_label),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.classList.add("property-selector"),this.addproperty_add=this.getButton("button_add","add","button_add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input_label=this.theme.getHiddenLabel(this.translate("button_properties")),this.addproperty_input_label.setAttribute("for",this.path+"-property-selector"),this.addproperty_input.classList.add("property-selector-input"),this.addproperty_input.setAttribute("id",this.path+"-property-selector"),this.addproperty_input.setAttribute("aria-labelledby",this.path+"-property-selector"),this.addproperty_add.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),this.addproperty_input.value){if(this.editors[this.addproperty_input.value]){window.alert("there is already a property with that name");return}this.addObjectProperty(this.addproperty_input.value),this.editors[this.addproperty_input.value]&&this.editors[this.addproperty_input.value].disable();const r=this.editors[this.addproperty_input.value].key,s=this.editors[this.addproperty_input.value].type,o=this.editors[this.addproperty_input.value].path;this.onChange(!0,!1,{event:"add",data:{key:r,type:s,path:o}})}}),this.addproperty_input.addEventListener("input",n=>{n.target.previousSibling.previousSibling.childNodes.forEach(r=>{let s=r.innerText,o=n.target.value;this.options.case_sensitive_property_search||this.jsoneditor.options.case_sensitive_property_search||(s=s.toLowerCase(),o=o.toLowerCase()),s.includes(o)?r.style.display="":r.style.display="none"})}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input_label),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);const t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.onOutsideModalClickListener=this.onOutsideModalClick.bind(this),document.addEventListener("click",this.onOutsideModalClickListener,!0),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),e?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),Object.values(this.editors).forEach(n=>{const r=this.theme.getTabContent(),s=this.theme.getGridColumn(),o=!!(n.schema&&(n.schema.type==="object"||n.schema.type==="array"));if(r.isObjOrArray=o,e){if(o){const a=this.theme.getGridContainer();a.appendChild(s),r.appendChild(a),this.tabPanesContainer.appendChild(r),this.row_container=a}else typeof this.row_container_basic>"u"&&(this.row_container_basic=this.theme.getGridContainer(),r.appendChild(this.row_container_basic),this.tabPanesContainer.childElementCount===0?this.tabPanesContainer.appendChild(r):this.tabPanesContainer.insertBefore(r,this.tabPanesContainer.childNodes[1])),this.row_container_basic.appendChild(s);this.addRow(n,this.tabs_holder,r),r.id=this.getValidId(n.schema.title)}else this.row_container.appendChild(s);n.setContainer(s),n.build(),n.postBuild(),n.setOptInCheckbox(n.header)}),this.rows[0]&&$c(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse","button_collapse"),this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.collapsed?(this.editor_holder.style.display="",this.collapsed=!1,this.setButtonText(this.collapse_control,"","collapse","button_collapse")):(this.editor_holder.style.display="none",this.collapsed=!0,this.setButtonText(this.collapse_control,"","expand","button_expand"))}),this.options.collapsed&&$c(this.collapse_control,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","button_edit_json"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.toggleEditJSON()}),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[0]),this.schema.options&&typeof this.schema.options.disable_edit_json<"u"?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("properties","edit_properties","button_object_properties"),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.toggleAddProperty()}),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties()}}this.options.table_row?(this.editor_holder=this.container,this.property_order.forEach(t=>{this.editor_holder.appendChild(this.editors[t].container)})):(this.layoutEditors(),this.layoutEditors()),(this.schema.readOnly||this.schema.readonly)&&this.disable()}deactivateNonRequiredProperties(){const e=this.jsoneditor.options.show_opt_in,t=typeof this.options.show_opt_in<"u",n=t&&this.options.show_opt_in===!0,r=t&&this.options.show_opt_in===!1;(n||!r&&e||!t&&e)&&Object.entries(this.editors).forEach(([s,o])=>{this.isRequiredObject(o)||this.editors[s].deactivate()})}showEditJSON(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=`${this.editjson_control.offsetLeft}px`,this.editjson_holder.style.top=`${this.editjson_control.offsetTop+this.editjson_control.offsetHeight}px`,this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)}hideEditJSON(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)}copyJSON(){this.editjson_holder&&navigator.clipboard.writeText(this.editjson_textarea.value).catch(e=>window.alert(e))}saveJSON(){if(this.editjson_holder)try{const e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON(),this.onChange(!0)}catch(e){throw window.alert("invalid JSON"),e}}toggleEditJSON(){this.editing_json?this.hideEditJSON():this.showEditJSON()}insertPropertyControlUsingPropertyOrder(e,t,n){let r;this.schema.properties[e]&&(r=this.schema.properties[e].propertyOrder),typeof r!="number"&&(r=1e3),t.propertyOrder=r;for(let s=0;s<n.childNodes.length;s++){const o=n.childNodes[s];if(t.propertyOrder<o.propertyOrder){this.addproperty_list.insertBefore(t,o),t=null;break}}t&&this.addproperty_list.appendChild(t)}addPropertyCheckbox(e){let t;const n=this.theme.getCheckbox();this.schema.properties[e]&&this.schema.properties[e].title?t=this.schema.properties[e].title:t=e;const r=this.theme.getCheckboxLabel(t),s=this.theme.getFormControl(r,n,null,null,this.path+"-"+e);return s.style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),n.checked=e in this.editors,n.addEventListener("change",()=>{n.checked?this.addObjectProperty(e):this.removeObjectProperty(e),this.onChange(!0)}),this.addproperty_checkboxes[e]=n,n}showAddProperty(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=`${this.addproperty_button.offsetLeft}px`,this.addproperty_holder.style.top=`${this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight}px`,this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())}hideAddProperty(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)}toggleAddProperty(){this.adding_property?this.hideAddProperty():this.showAddProperty()}removeObjectProperty(e){var t,n;if(this.editors[e]){if((n=(t=this.editors[e].schema)==null?void 0:t.options)!=null&&n.dependencies)return;this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors()}}getSchemaOnMaxDepth(e){return Object.keys(e).reduce((t,n)=>{switch(n){case"$ref":return t;case"properties":case"items":return{...t,[n]:{}};case"additionalProperties":case"propertyNames":return{...t,[n]:!0};default:return{...t,[n]:e[n]}}},{})}addObjectProperty(e,t){if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[e])&&(!this.schema.patternProperties||!Object.keys(this.schema.patternProperties).find(o=>new RegExp(o).test(e))))return;const n=this.getPropertySchema(e);typeof n.propertyOrder!="number"&&(n.propertyOrder=Object.keys(this.editors).length+1e3);const r=this.jsoneditor.getEditorClass(n),{max_depth:s}=this.jsoneditor.options;if(this.editors[e]=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:s&&this.currentDepth>=s?this.getSchemaOnMaxDepth(n):n,path:`${this.path}.${e}`,parent:this},this.currentDepth+1),this.editors[e].preBuild(),!t){const o=this.theme.getChildEditorHolder();this.editor_holder.appendChild(o),this.editors[e].setContainer(o),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].setOptInCheckbox(r.header),this.editors[e].activate()}this.cached_editors[e]=this.editors[e]}t||(this.refreshValue(),this.layoutEditors())}}onOutsideModalClick(e){const t=e.path||e.composedPath&&e.composedPath();this.addproperty_holder&&!this.addproperty_holder.contains(t[0])&&this.adding_property&&(e.preventDefault(),e.stopPropagation(),this.toggleAddProperty())}onChildEditorChange(e,t){this.refreshValue(),super.onChildEditorChange(e,t)}canHaveAdditionalProperties(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:typeof this.schema.additionalProperties=="object"&&this.schema.additionalProperties!==null?!0:typeof this.options.no_additional_properties=="boolean"?!this.options.no_additional_properties:typeof this.jsoneditor.options.no_additional_properties=="boolean"?!this.jsoneditor.options.no_additional_properties:!0}destroy(){Object.values(this.cached_editors).forEach(e=>e.destroy()),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClickListener,!0),super.destroy()}getValue(){if(!this.dependenciesFulfilled)return;const e=super.getValue(),t=n=>typeof n>"u"||n===""||n===Object(n)&&Object.keys(n).length===0&&n.constructor===Object;return e&&(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)&&Object.keys(e).forEach(n=>{t(e[n])&&delete e[n]}),e&&(this.jsoneditor.options.remove_false_properties||this.options.remove_false_properties)&&Object.keys(e).forEach(n=>{e[n]===!1&&delete e[n]}),e}refreshValue(){this.value={},this.editors&&(Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&(this.editors[e].refreshValue(),this.value[e]=this.editors[e].getValue())}),Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&this.activateDependentRequired(this.editors[e].key)}),this.adding_property&&this.refreshAddProperties())}activateDependentRequired(e){this.getDependentRequired(e).forEach(n=>{let r;Object.entries(this.cached_editors).forEach(([s,o])=>{o.key===n&&(r=o)}),r&&!r.isActive()&&r.activate()})}getDependentRequired(e){return this.schema.dependentRequired&&Eu(this.schema.dependentRequired,e)?this.schema.dependentRequired[e]:[]}refreshAddProperties(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_button.style.display="none";return}let e=!1,t=0,n=!1;Object.keys(this.editors).forEach(r=>t++),e=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties<"u"&&t>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},Object.keys(this.cached_editors).forEach(r=>{this.addPropertyCheckbox(r),this.isRequiredObject(this.cached_editors[r])&&r in this.editors&&(this.addproperty_checkboxes[r].disabled=!0),typeof this.schema.minProperties<"u"&&t<=this.schema.minProperties?(this.addproperty_checkboxes[r].disabled=this.addproperty_checkboxes[r].checked,this.addproperty_checkboxes[r].checked||(n=!0)):r in this.editors?n=!0:!e&&!Eu(this.schema.properties,r)?this.addproperty_checkboxes[r].disabled=!0:(this.addproperty_checkboxes[r].disabled=!1,n=!0)}),this.canHaveAdditionalProperties()&&(n=!0),Object.keys(this.schema.properties).forEach(r=>{this.cached_editors[r]||(n=!0,this.addPropertyCheckbox(r))}),n?this.canHaveAdditionalProperties()?e?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}isRequiredObject(e){if(e)return typeof e.schema.required=="boolean"?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.includes(e.key):!!this.jsoneditor.options.required_by_default}setValue(e,t){e=e||{},(typeof e!="object"||Array.isArray(e))&&(e={}),Object.entries(this.cached_editors).forEach(([n,r])=>{typeof e[n]<"u"?(this.addObjectProperty(n),r.setValue(e[n],t),r.activate(),this.disabled&&r.disable()):!t&&!this.isRequiredObject(r)?this.jsoneditor.options.show_opt_in||this.options.show_opt_in?r.deactivate():this.removeObjectProperty(n):r.setValue(r.getDefault(),t)}),Object.entries(e).forEach(([n,r])=>{this.cached_editors[n]||(this.addObjectProperty(n),this.editors[n]&&this.editors[n].setValue(r,t,!!this.editors[n].template))}),this.refreshValue(),this.layoutEditors(),this.onChange()}showValidationErrors(e){const t=[],n=[];e.forEach(r=>{r.path===this.path?t.push(r):n.push(r)}),this.error_holder&&(t.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",t.forEach(r=>{r.errorcount&&r.errorcount>1&&(r.message+=` (${r.errorcount} errors)`),this.error_holder.appendChild(this.theme.getErrorMessage(r.message))})):this.error_holder.style.display="none"),this.options.table_row&&(t.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),Object.values(this.editors).forEach(r=>{r.showValidationErrors(n)})}}dTe.rules=TQe;class AQe extends cC{preBuild(){super.preBuild()}build(){this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];const e=n=>{this.setValue(n.currentTarget.value),this.onChange(!0),this.radioGroup.forEach(r=>{r.checked=r.value===this.getValue()})};for(let n=0;n<this.enum_values.length;n++){const r={id:`${this.formname}[${n}]`,value:this.enum_values[n]};this.jsoneditor.options.use_name_attributes&&(r.name=this.formname),this.input=this.theme.getFormRadio(r),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",e,!1),this.radioGroup.push(this.input);const s=this.theme.getFormRadioLabel(this.enum_display[n]);s.htmlFor=this.input.id;const o=this.theme.getFormRadioControl(s,this.input,!!(this.options.layout==="horizontal"||this.options.compact));this.radioContainer.appendChild(o)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let n=0;n<this.radioGroup.length;n++)this.radioGroup[n].disabled=!0;this.radioContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.radioContainer),t.dataset.containerFor="radio",this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.radioContainer.classList.remove("readonly"),super.enable()}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.radioContainer.classList.add("readonly"),super.disable()}destroy(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}setValue(e){typeof e!="string"&&(e=String(e));for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===e){this.radioGroup[t].checked=!0;break}else this.radioGroup[t].checked=!1;this.value=e,this.onChange()}}class RQe extends Du{setValue(e,t,n){const r=super.setValue(e,t,n);r!==void 0&&r.changed&&this.sceditor_instance&&this.sceditor_instance.val(r.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){if(window.sceditor){const e=this.expandCallbacks("sceditor",$i({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),t=window.sceditor.instance(this.input);t===void 0&&window.sceditor.create(this.input,e),this.sceditor_instance=t||window.sceditor.instance(this.input),this.sceditor_instance.blur(()=>{this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),super.enable()}disable(e){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),super.disable(e)}destroy(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),super.destroy()}}class kQe extends cC{setValue(e,t){if(this.select2_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const n=this.updateValue(e);this.input.value=n,this.select2v4?this.select2_instance.val(n).trigger("change"):this.select2_instance.select2("val",n),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){const e=this.expandCallbacks("select2",$i({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=e.tags=!!e.tags&&this.schema.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=Eu(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const t=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(t),this.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let n=!1,r;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),r=this.input.querySelector(`option[value="${t}"]`),r?r.removeAttribute("data-select2-tag"):this.select2_instance.append(new Option(t,t,!1,!1)).trigger("change"),n=!0),n}enable(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable(e)}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class DQe extends cC{setValue(e,t){if(this.selectize_instance){t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const n=this.updateValue(e);this.input.value=n,this.selectize_instance.clear(!0),this.selectize_instance.setValue(n),this.onChange(!0)}else super.setValue(e,t)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){const e=this.expandCallbacks("selectize",$i({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=e.create=!!e.create&&this.schema.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=t=>{this.updateValue(t),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}super.afterInputReady()}updateValue(e){let t=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?t=e:this.newEnumAllowed&&(t=this.addNewOption(e)?e:t),this.value=t,t}addNewOption(e){const t=this.typecast(e);let n=!1;return!this.enum_values.includes(t)&&t!==""&&(this.enum_options.push(`${t}`),this.enum_display.push(`${t}`),this.enum_values.push(t),this.schema.enum.push(t),this.selectize_instance.addItem(t),this.selectize_instance.refreshOptions(!1),n=!0),n}onWatchedFieldChange(){super.onWatchedFieldChange(),this.selectize_instance&&(this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((e,t)=>{this.selectize_instance.addOption({value:e,text:this.enum_display[t]})}),this.selectize_instance.addItem(`${this.value}`,!0))}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class LQe extends Du{build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)));const e=this.formname.replace(/\W/g,"");if(typeof SignaturePad=="function"){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);const t=document.createElement("div");t.classList.add("signature-container");const n=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&n.setAttribute("name",e),n.classList.add("signature"),t.appendChild(n),this.signaturePad=new window.SignaturePad(n),this.signaturePad.onEnd=()=>{this.signaturePad.isEmpty()?this.input.value="":this.input.value=this.signaturePad.toDataURL(),this.is_dirty=!0,this.refreshValue(),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()};const r=document.createElement("div"),s=document.createElement("button");s.classList.add("tiny","button"),s.innerHTML="Clear signature",r.appendChild(s),t.appendChild(r),this.options.compact&&this.container.setAttribute("class",`${this.container.getAttribute("class")} compact`),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach(o=>{n.setAttribute("readOnly","readOnly"),o.disabled=!0})),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.signaturePad.clear(),this.signaturePad.strokeEnd()}),this.control=this.theme.getFormControl(this.label,t,this.description),this.container.appendChild(this.control),this.refreshValue(),n.width=t.offsetWidth,this.options&&this.options.canvas_height?n.height=this.options.canvas_height:n.height="300"}else{const t=document.createElement("p");t.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(t)}}setValue(e){if(typeof SignaturePad=="function"){const t=this.sanitize(e);return this.value===t?void 0:(this.value=t,this.input.value=this.value,this.signaturePad.clear(),e&&e!==""&&this.signaturePad.fromDataURL(e),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1)}}destroy(){this.signaturePad.off(),delete this.signaturePad}}class fTe extends Du{setValue(e,t,n){const r=super.setValue(e,t,n);r!==void 0&&r.changed&&this.simplemde_instance&&this.simplemde_instance.value(r.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.SimpleMDE?(e=this.expandCallbacks("simplemde",$i({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",()=>{this.value=this.simplemde_instance.value(),this.is_dirty=!0,this.onChange(!0)}),e.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),super.enable()}disable(e){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),super.disable(e)}destroy(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),super.destroy()}startListening(e,t){function n(){e.display.wrapper.offsetHeight?(this.stopListening(e,t),e.display.lastWrapHeight!==e.display.wrapper.clientHeight&&e.refresh()):t.timeout=window.setTimeout(n,t.delay)}t.timeout=window.setTimeout(n,t.delay),t.hurry=()=>{window.clearTimeout(t.timeout),t.timeout=window.setTimeout(n,50)},e.on(window,"mouseup",t.hurry),e.on(window,"keyup",t.hurry)}stopListening(e,t){window.clearTimeout(t.timeout),e.off(window,"mouseup",t.hurry),e.off(window,"keyup",t.hurry)}}const MQe={".starrating":"direction:rtl;display:inline-block;white-space:nowrap",".starrating > input":"display:none",".starrating > label:before":"content:'%5C2606';margin:1px;font-size:18px;font-style:normal;font-weight:400;line-height:1;font-family:'Arial';display:inline-block",".starrating > label":"color:%23888;cursor:pointer;margin:8px%200%202px%200",".starrating > label.starrating-display-enabled":"margin:1px%200%200%200",".starrating > input:checked ~ label":"color:%23ffca08",".starrating:not(.readonly) > input:hover ~ label":"color:%23ffca08",".starrating > input:checked ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating:not(.readonly) > input:hover ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating .starrating-display":"position:relative;direction:rtl;text-align:center;font-size:10px;line-height:0px"};class pTe extends Du{build(){if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.schema.enum===void 0){let n=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&n--,this.enum_values=[];for(let r=0;r<n;r++)this.enum_values.push(r+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];const e=n=>{n.preventDefault(),n.stopPropagation(),this.setValue(n.currentTarget.value),this.onChange(!0)};for(let n=this.enum_values.length-1;n>-1;n--){const r=this.formname+(n+1),s=this.theme.getFormInputField("radio");s.name=`${this.formname}[starrating]`,s.value=this.enum_values[n],s.id=r,s.addEventListener("change",e,!1),this.radioGroup.push(s);const o=document.createElement("label");o.htmlFor=r,o.title=this.enum_values[n],this.options.displayValue&&o.classList.add("starrating-display-enabled");const a=this.theme.getHiddenText("label");a.textContent=n,o.appendChild(a),this.ratingContainer.appendChild(s),this.ratingContainer.appendChild(o)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let n=0;n<this.radioGroup.length;n++)this.radioGroup[n].disabled=!0;this.ratingContainer.classList.add("readonly")}const t=this.theme.getContainer();t.appendChild(this.ratingContainer),this.input=t,this.control=this.theme.getFormControl(this.label,t,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.ratingContainer.classList.remove("readonly"),this.disabled=!1}}disable(e){e&&(this.always_disabled=!0);for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!0;this.ratingContainer.classList.add("readonly"),this.disabled=!0}destroy(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)return this.schema.type==="integer"?this.value===""?0:parseInt(this.value):this.value}setValue(e){this.value=e;for(let t=0;t<this.radioGroup.length;t++)if(this.radioGroup[t].value===`${e}`){this.radioGroup[t].checked=!0,this.value=e,this.options.displayValue&&(this.displayRating.innerHTML=this.value);break}super.setValue(this.value)}}pTe.rules=MQe;class IQe extends cTe{build(){super.build(),this.input.setAttribute("type","number"),this.input.getAttribute("step")||this.input.setAttribute("step","1");const e=this.theme.getStepperButtons(this.input);this.control.appendChild(e),this.stepperDown=this.control.querySelector(".stepper-down"),this.stepperUp=this.control.querySelector(".stepper-up")}enable(){super.enable(),this.stepperDown.removeAttribute("disabled"),this.stepperUp.removeAttribute("disabled")}disable(){super.disable(),this.stepperDown.setAttribute("disabled",!0),this.stepperUp.setAttribute("disabled",!0)}}class OQe extends b5{register(){if(super.register(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].register()}unregister(){if(super.unregister(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].unregister()}getNumColumns(){return Math.max(Math.min(12,this.width),3)}preBuild(){const e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e.default||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top,super.preBuild()}build(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.tableContainer.appendChild(this.table),this.container.appendChild(this.tableContainer),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);const e=this.getElementEditor(0,!0);if(this.item_default=e.getDefault(),this.width=e.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.tableContainer),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls),this.item_has_child_editors){const t=e.getChildEditors(),n=e.property_order||Object.keys(t);for(let r=0;r<n.length;r++){const s=this.theme.getTableHeaderCell(t[n[r]].getTitle());t[n[r]].options.hidden&&(s.style.display="none"),this.header_row.appendChild(s)}}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));e.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.header_row.appendChild(this.controls_header_cell),this.addControls()}onChildEditorChange(e,t){this.refreshValue(),super.onChildEditorChange(e,t)}getItemDefault(){return $i({},{default:this.item_default}).default}getItemTitle(){return this.item_title}getElementEditor(e,t){const n=$i({},this.schema.items),r=this.jsoneditor.getEditorClass(n,this.jsoneditor),s=this.row_holder.appendChild(this.theme.getTableRow());let o=s;this.item_has_child_editors||(o=this.theme.getTableCell(),s.appendChild(o));const a=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:o,path:`${this.path}.${e}`,parent:this,compact:!0,table_row:!0});return a.preBuild(),t||(a.build(),a.postBuild(),a.controls_cell=s.appendChild(this.theme.getTableCell()),a.row=s,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a}destroy(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,super.destroy()}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());return this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems)),e}setValue(e=[],t){if(e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized)return;let r=!1;e.forEach((s,o)=>{this.rows[o]?this.rows[o].setValue(s):(this.addRow(s),r=!0)});for(let s=e.length;s<this.rows.length;s++){const o=this.rows[s].container;this.item_has_child_editors||this.rows[s].row.parentNode.removeChild(this.rows[s].row),this.rows[s].destroy(),o.parentNode&&o.parentNode.removeChild(o),this.rows[s]=null,r=!0}this.rows=this.rows.slice(0,e.length),this.refreshValue(),(r||t)&&this.refreshRowButtons(),this.onChange()}refreshRowButtons(){const e=this.schema.minItems&&this.schema.minItems>=this.rows.length,t=this.schema.maxItems&&this.schema.maxItems<=this.rows.length,n=[];this.rows.forEach((u,c)=>{if(u.delete_button){const h=!e;this.setButtonState(u.delete_button,h),n.push(h)}if(u.copy_button){const h=!t;this.setButtonState(u.copy_button,h),n.push(h)}if(u.moveup_button){const h=c!==0;this.setButtonState(u.moveup_button,h),n.push(h)}if(u.movedown_button){const h=c!==this.rows.length-1;this.setButtonState(u.movedown_button,h),n.push(h)}});const r=n.some(u=>u);this.rows.forEach(u=>this.setButtonState(u.controls_cell,r)),this.setButtonState(this.controls_header_cell,r),this.setButtonState(this.table,this.value.length);const s=!(t||this.hide_add_button);this.setButtonState(this.add_row_button,s);const o=!(!this.value.length||e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,o);const a=!(this.value.length<=1||e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,a);const l=s||o||a;this.setButtonState(this.controls,l)}refreshValue(){this.value=[],this.rows.forEach((e,t)=>{this.value[t]=e.getValue()}),this.serialized=JSON.stringify(this.value)}addRow(e){const t=this.rows.length;this.rows[t]=this.getElementEditor(t);const n=this.rows[t].table_controls;return this.hide_delete_buttons||(this.rows[t].delete_button=this._createDeleteButton(t,n)),this.show_copy_button&&(this.rows[t].copy_button=this._createCopyButton(t,n)),this.hide_move_buttons||(this.rows[t].moveup_button=this._createMoveUpButton(t,n)),this.hide_move_buttons||(this.rows[t].movedown_button=this._createMoveDownButton(t,n)),typeof e<"u"&&this.rows[t].setValue(e),this.rows[t]}_createDeleteButton(e,t){const n=this.getButton("","delete","button_delete_row_title_short");return n.classList.add("delete","json-editor-btntype-delete"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),!this.askConfirmation())return!1;const s=r.currentTarget.getAttribute("data-i")*1,o=this.getValue(),l=this.getValue()[s];o.splice(s,1),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("deleteRow",l)}),t.appendChild(n),n}_createCopyButton(e,t){const n=this.getButton("","copy","button_copy_row_title_short"),r=this.schema;return n.classList.add("copy","json-editor-btntype-copy"),n.setAttribute("data-i",e),n.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const o=s.currentTarget.getAttribute("data-i")*1,a=this.getValue();let l=a[o];r.items.type==="string"&&r.items.format==="uuid"?l=qE():r.items.type==="object"&&r.items.properties&&a.forEach((u,c)=>{if(o===c)for(const h of Object.keys(u))r.items.properties&&r.items.properties[h]&&r.items.properties[h].format==="uuid"&&(l=Object.assign({},a[o]),l[h]=qE())}),a.splice(o+1,0,l),this.setValue(a),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[o+1])}),t.appendChild(n),n}_createMoveUpButton(e,t){const n=this.getButton("","moveup","button_move_up_title");return n.classList.add("moveup","json-editor-btntype-move"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const s=r.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s-1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),t.appendChild(n),n}_createMoveDownButton(e,t){const n=this.getButton("","movedown","button_move_down_title");return n.classList.add("movedown","json-editor-btntype-move"),n.setAttribute("data-i",e),n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const s=r.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s+1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),t.appendChild(n),n}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.setButtonState(this.panel,this.collapsed),this.collapsed?(this.collapsed=!1,this.setButtonText(e.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.setButtonText(e.currentTarget,"","expand","button_expand"))}),this.options.collapsed&&$c(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton()}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");return e.classList.add("json-editor-btntype-toggle"),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=this.addRow();this.refreshValue(),this.refreshRowButtons(),this.onChange(!0),this.jsoneditor.trigger("addRow",n)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const n=this.getValue(),r=n.pop();this.setValue(n),this.onChange(!0),this.jsoneditor.trigger("deleteRow",r)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",t=>{if(t.preventDefault(),t.stopPropagation(),!this.askConfirmation())return!1;const n=this.getValue();this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",n)}),this.controls.appendChild(e),e}}class PQe extends Xa{getNumColumns(){return 4}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",$i({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:(n,r,s,o)=>{window.alert(`No upload_handler defined for "${n.path}". You must create your own handler to enable upload to server`)}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(typeof this.options.upload_handler!="function")throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),this.options.enable_drag_drop===!0&&this.options.hide_input===!0||(this.clickHandler=n=>{this.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),this.options.enable_drag_drop===!0){if(this.options.alt_drop_zone!=="")if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),this.altDropZone)this.dropZone=this.altDropZone;else throw new Error(`Error: alt_drop_zone selector "${this.options.alt_drop_zone}" not found!`);else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=n=>{n.preventDefault(),n.stopPropagation();const r=n.target.files||n.dataTransfer.files;if(r&&r.length)if(this.options.max_upload_size!==0&&r[0].size>this.options.max_upload_size)this.theme.addInputError(this.uploader,`${this.translate("upload_max_size")} ${this.options.max_upload_size}`);else if(this.options.mime_type.length!==0&&!this.isValidMimeType(r[0].type,this.options.mime_type))this.theme.addInputError(this.uploader,`${this.translate("upload_wrong_file_format")} ${this.options.mime_type.toString()}`);else{this.fileDisplay&&(this.fileDisplay.value=r[0].name);let s=new window.FileReader;s.onload=o=>{this.preview_value=o.target.result,this.refreshPreview(r),this.onChange(!0),s=null},s.readAsDataURL(r[0])}},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=n=>{const r=n.dataTransfer.items||n.dataTransfer.files,s=r&&r.length&&(this.options.mime_type.length===0||this.isValidMimeType(r[0].type,this.options.mime_type)),o=n.currentTarget.classList&&n.currentTarget.classList.contains("upload-dropzone")&&s;switch((n.currentTarget===window?"w_":"e_")+n.type){case"w_drop":case"w_dragover":o||(n.dataTransfer.dropEffect="none");break;case"e_dragenter":{o?(this.dropZone.classList.add("valid-dropzone"),n.dataTransfer.dropEffect="copy"):this.dropZone.classList.add("invalid-dropzone");break}case"e_dragover":{o&&(n.dataTransfer.dropEffect="copy");break}case"e_dragleave":this.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":{this.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),o&&this.uploadHandler(n);break}}o||n.preventDefault()},this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(n=>{window.addEventListener(n,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(n=>{this.dropZone.addEventListener(n,this.dragHandler,!0)}))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);const e=this.uploader||this.input,t=document.createElement("div");this.dropZone&&!this.altDropZone&&this.options.drop_zone_top===!0&&t.appendChild(this.dropZone),this.fileUploadGroup&&t.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&this.options.drop_zone_top!==!0&&t.appendChild(this.dropZone),t.appendChild(this.preview),e.parentNode.insertBefore(t,e.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.afterInputReady()})}afterInputReady(){if(this.value){const e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.onload=t=>{this.preview.appendChild(e)},e.onerror=t=>{console.error("upload error",t,t.currentTarget)},e.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}refreshPreview(e){if(this.last_preview===this.preview_value||(this.last_preview=this.preview_value,this.preview.innerHTML="",!this.preview_value))return;const t=e[0],n=this.preview_value.match(/^data:([^;,]+)[;,]/);if(t.mimeType=n?n[1]:"unknown",t.size>0){const s=Math.floor(Math.log(t.size)/Math.log(1024));t.formattedSize=`${parseFloat((t.size/1024**s).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}else t.formattedSize="0 Bytes";const r=this.getButton("button_upload","upload","button_upload");r.addEventListener("click",s=>{s.preventDefault(),r.setAttribute("disabled","disabled"),this.theme.removeInputError(this.uploader),this.theme.getProgressBar&&(this.progressBar=this.theme.getProgressBar(),this.preview.appendChild(this.progressBar)),this.options.upload_handler(this.path,t,{success:o=>{this.setValue(o),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.progressBar&&this.preview.removeChild(this.progressBar),r.removeAttribute("disabled")},failure:o=>{this.theme.addInputError(this.uploader,o),this.progressBar&&this.preview.removeChild(this.progressBar),r.removeAttribute("disabled")},updateProgress:o=>{this.progressBar&&(o?this.theme.updateProgressBar(this.progressBar,o):this.theme.updateProgressBarUnknown(this.progressBar))}})}),this.preview.appendChild(this.theme.getUploadPreview(t,r,this.preview_value)),this.options.auto_upload&&(r.dispatchEvent(new window.MouseEvent("click")),r.parentNode.removeChild(r))}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())}destroy(){this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(e=>{window.removeEventListener(e,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.removeEventListener(e,this.dragHandler,!0)}),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}isValidMimeType(e,t){return t.reduce((n,r)=>n||new RegExp(r.replace(/\*/g,".*"),"gi").test(e),!1)}}class FQe extends Du{preBuild(){super.preBuild(),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}build(){super.build(),this.disable(!0),this.input.setAttribute("readonly","true")}sanitize(e){return this.testUuid(e)||(e=this.uuid),e}setValue(e,t,n){this.testUuid(e)||(e=this.uuid),this.uuid=e,super.setValue(e,t,n)}getUuid(){return qE()}testUuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class NQe extends Du{postBuild(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}setValue(e,t,n){const r=super.setValue(e,t,n);return this.picker_instance&&this.picker_instance.domElement&&r&&r.changed&&this.picker_instance.setColor(r.value,!0),r}getNumColumns(){return 2}afterInputReady(){super.afterInputReady(),this.createPicker(!0)}disable(){if(super.disable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!0}}enable(){if(super.enable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";const e=this.picker_instance.domElement.querySelectorAll("button");for(let t=0;t<e.length;t++)e[t].disabled=!1}}destroy(){this.createPicker(!1),super.destroy()}createPicker(e){if(e){if(window.Picker&&!this.picker_instance){const t=this.expandCallbacks("colorpicker",$i({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),n=r=>{const s=this.picker_instance.settings.editorFormat,o=this.picker_instance.settings.alpha;this.setValue(s==="hex"?o?r.hex:r.hex.slice(0,7):r[`${s+(o?"a":"")}String`])};!t.popup&&typeof t.onChange!="function"?t.onChange=n:t.popup&&typeof t.onDone!="function"&&(t.onDone=n),this.picker_instance=new window.Picker(t),t.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}const wR={ace:rQe,array:b5,arrayChoices:oQe,arraySelect2:aQe,arraySelectize:lQe,autocomplete:uQe,base64:cQe,button:aTe,checkbox:hQe,choices:lTe,datetime:fQe,describedBy:pQe,enum:gQe,hidden:mQe,info:yQe,integer:cTe,ip:vQe,jodit:_Qe,multiple:CQe,multiselect:PD,null:SQe,number:uTe,object:dTe,radio:AQe,sceditor:RQe,select:cC,select2:kQe,selectize:DQe,signature:LQe,simplemde:fTe,starrating:pTe,stepper:IQe,string:Du,table:OQe,upload:PQe,uuid:FQe,colorpicker:NQe},$Qe="html",BQe="default",jQe={},zQe={},GQe={},UQe={},gTe={},qQe=[],x5="en",VQe=x5;gTe.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls",paste_max_length_reached:"Pasted text exceeded maximum length of {{0}} and will be clipped."};Object.entries(wR).forEach(([i,e])=>{wR[i].options=e.options||{}});function HQe(i,e,t){console.log("Upload handler required for upload editor")}function WQe(i,e,t){let n={};t&&t.options&&t.options.error_messages&&t.options.error_messages[Zm.language]&&(n=t.options.error_messages[Zm.language]);const r=Zm.languages[Zm.language];if(!r)throw new Error(`Unknown language ${Zm.language}`);let s=n[i]||r[i]||Zm.languages[x5][i]||i;if(e)for(let o=0;o<e.length;o++)s=s.replace(new RegExp(`\\{\\{${o}}}`,"g"),e[o]);return s}function XQe(i,e){return i}const YQe={upload:HQe,use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction",prompt_paste_max_length_reached:!1,remove_false_properties:!1,enforce_const:!1},Zm={options:YQe,theme:$Qe,template:BQe,themes:zQe,callbacks:jQe,templates:GQe,iconlibs:UQe,editors:wR,languages:gTe,resolvers:JJe,custom_validators:qQe,default_language:x5,language:VQe,translate:WQe,translateProperty:XQe};class ZQe{constructor(e){this.options=e||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type(t){typeof t.type=="object"&&(t.type=this._expandSubSchema(t.type))},disallow(t){typeof t.disallow=="object"&&(t.disallow=this._expandSubSchema(t.disallow))},anyOf(t){Object.entries(t.anyOf).forEach(([n,r])=>{t.anyOf[n]=this.expandSchema(r)})},dependencies(t){Object.entries(t.dependencies).forEach(([n,r])=>{typeof r=="object"&&!Array.isArray(r)&&(t.dependencies[n]=this.expandSchema(r))})},not(t){t.not=this.expandSchema(t.not)}},this._subSchema2={allOf(t,n){let r=$i({},n);return Object.entries(t.allOf).forEach(([s,o])=>{t.allOf[s]=this.expandRefs(o,!0),r=this.extendSchemas(r,this.expandSchema(o))}),delete r.allOf,r},extends(t,n){let r;return Array.isArray(t.extends)?r=t.extends.reduce((s,o,a)=>this.extendSchemas(s,this.expandSchema(o)),n):r=this.extendSchemas(n,this.expandSchema(t.extends)),delete r.extends,r},oneOf(t,n){const r=$i({},n);return delete r.oneOf,t.oneOf.reduce((s,o,a)=>(s.oneOf[a]=this.extendSchemas(this.expandSchema(o),r),s),n),n}}}async load(e,t,n){return this.schema=e,await this._asyncloadExternalRefs(e,t,this._getFileBase(n),!0),this.expandRefs(e)}expandRefs(e,t){const n=$i({},e);if(!n.$ref)return n;const r=n.$ref.split("#");if(r.length===2&&!this.refs_with_info[n.$ref]){const l=this.expandRecursivePointer(this.schema,r[1]),u=this.extendSchemas(n,this.expandSchema(l));return delete u.$ref,u}const s=r.length>2?this.refs_with_info["#"+r[1]]:this.refs_with_info[n.$ref];delete n.$ref;const o=s.$ref.startsWith("#")?s.fetchUrl:"",a=this._getRef(o,s);if(!this.refs[a])console.warn(`reference:'${a}' not found!`);else if(t&&Eu(this.refs[a],"allOf")){const l=this.refs[a].allOf;Object.keys(l).forEach(u=>{l[u]=this.expandRefs(l[u],!0)})}return r.length>2?this.extendSchemas(n,this.expandSchema(this.expandRecursivePointer(this.refs[a],r[2]))):this.extendSchemas(n,this.expandSchema(this.refs[a]))}expandRecursivePointer(e,t){let n=e;return t.split("/").slice(1).forEach(r=>{n[r]&&(n=n[r])}),n.$refs&&n.$refs.startsWith("#")?this.expandRecursivePointer(e,n.$refs):n}expandSchema(e){Object.entries(this._subSchema1).forEach(([n,r])=>{e[n]&&r.call(this,e)});let t=$i({},e);return Object.entries(this._subSchema2).forEach(([n,r])=>{e[n]&&(t=r.call(this,e,t))}),this.expandRefs(t)}_getRef(e,t){const n=e+t;return this.refs[n]?n:e+decodeURIComponent(t.$ref)}_expandSubSchema(e){return Array.isArray(e)?e.map(t=>typeof t=="object"?this.expandSchema(t):t):this.expandSchema(e)}_manageRecursivePointer(e,t){Object.keys(e).forEach(n=>{e[n]!==null&&e[n].$ref&&e[n].$ref.indexOf("#")===0&&(e[n].$ref=t+e[n].$ref)})}_getExternalRefs(e,t,n=!1){n||this._manageRecursivePointer(e,t);const r={},s=o=>Object.keys(o).forEach(a=>{r[a]=!0});if(e.$ref&&typeof e.$ref!="object"&&!(e.$ref.indexOf("#")===0&&n)){let o=e.$ref,a="";o.indexOf("#")>0&&(o=o.substr(0,o.indexOf("#"))),o!==e.$ref&&(a=e.$ref.substr(e.$ref.indexOf("#")));const l=this.refs_prefix+this.refs_counter++,u=l+a;e.$ref.substr(0,1)!=="#"&&!this.refs[e.$ref]&&(r[o]=!0),this.refs_with_info[l]={fetchUrl:t,$ref:o},e.$ref=u}return Object.values(e).forEach(o=>{!o||typeof o!="object"||(Array.isArray(o)?Object.values(o).forEach(a=>{a&&typeof a=="object"&&s(this._getExternalRefs(a,t,n))}):(!o.$ref||!(typeof o.$ref=="string"&&o.$ref.startsWith("#")))&&s(this._getExternalRefs(o,t,n)))}),e.id&&typeof e.id=="string"&&e.id.substr(0,4)==="urn:"?this.refs[e.id]=e:e.$id&&typeof e.$id=="string"&&e.$id.substr(0,4)==="urn:"&&(this.refs[e.$id]=e),r}_getFileBase(e){if(!e)return"/";const{ajaxBase:t}=this.options;return typeof t>"u"?this._getFileBaseFromFileLocation(e):t}_getFileBaseFromFileLocation(e){const t=e.split("/");return t.pop(),`${t.join("/")}/`}_joinUrl(e,t){let n=e;return e.substr(0,7)!=="http://"&&e.substr(0,8)!=="https://"&&e.substr(0,5)!=="blob:"&&e.substr(0,5)!=="data:"&&e.substr(0,1)!=="#"&&e.substr(0,1)!=="/"&&(n=t+e),n.indexOf("#")>0&&(n=n.substr(0,n.indexOf("#"))),n}_isUniformResourceName(e){return e.substr(0,4)==="urn:"}async _asyncloadExternalRefs(e,t,n,r=!1){const s=this._getExternalRefs(e,t,r);let o=0;for(const a of Object.keys(s)){if(typeof a>"u"||this.refs[a])continue;if(this._isUniformResourceName(a)){this.refs[a]="loading",o++;const h=this.options.urn_resolver;let d=a;if(typeof h!="function")throw console.log(`No "urn_resolver" callback defined to resolve "${d}"`),new Error(`Must set urn_resolver option to a callback to resolve ${d}`);d.indexOf("#")>0&&(d=d.substr(0,d.indexOf("#")));let f;try{let p;f=await h(d);try{p=JSON.parse(f)}catch(m){throw console.log(m),new Error(`Failed to parse external ref ${d}`)}if(!(typeof p=="boolean"||typeof p=="object")||p===null||Array.isArray(p))throw new Error(`External ref does not contain a valid schema - ${d}`);this.refs[a]=p,await this._asyncloadExternalRefs(p,a,n)}catch(p){throw console.log(p),new Error(`Failed to parse external ref ${d}`)}if(typeof f=="boolean")throw new Error(`External ref does not contain a valid schema - ${d}`);continue}if(!this.options.ajax)throw new Error(`Must set ajax option to true to load external ref ${a}`);o++;let l=this._joinUrl(a,n),u;if(this.options.ajax_cache_responses){const h=this.cacheGet(l);h&&(u=h)}if(!u){const h=await new Promise(d=>{const f=new XMLHttpRequest;this.options.ajaxCredentials&&(f.withCredentials=this.options.ajaxCredentials),f.overrideMimeType("application/json"),f.open("GET",l,!0),f.onload=()=>{d(f)},f.onerror=p=>{d(void 0)},f.send()});if(typeof h>"u")throw new Error(`Failed to fetch ref via ajax - ${a}`);try{u=JSON.parse(h.responseText),this.onSchemaLoaded({schema:u,schemaUrl:l}),this.options.ajax_cache_responses&&this.cacheSet(l,u)}catch(d){throw console.log(d),new Error(`Failed to parse external ref ${l}`)}}if(!(typeof u=="boolean"||typeof u=="object")||u===null||Array.isArray(u))throw new Error(`External ref does not contain a valid schema - ${l}`);this.refs[a]=u;const c=this._getFileBaseFromFileLocation(l);if(l!==a){const h=l.split("/");l=(a.substr(0,1)==="/"?"/":"")+h.pop()}await this._asyncloadExternalRefs(u,l,c)}if(!o)return!0;this.onAllSchemasLoaded()}onSchemaLoaded(e){}onAllSchemasLoaded(){}extendSchemas(e,t){e=$i({},e),t=$i({},t);const n={},r=(a,l)=>(a==="required"||a==="defaultProperties")&&typeof l=="object"&&Array.isArray(l),s=(a,l)=>{r(a,l)?n[a]=l.concat(t[a]).reduce((u,c)=>(u.includes(c)||u.push(c),u),[]):a==="type"&&(typeof l=="string"||Array.isArray(l))?o(l):typeof l=="object"&&!Array.isArray(l)&&l!==null?n[a]=this.extendSchemas(l,t[a]):n[a]=l},o=a=>{typeof a=="string"&&(a=[a]),typeof t.type=="string"&&(t.type=[t.type]),!t.type||!t.type.length?n.type=a:n.type=a.filter(l=>t.type.includes(l)),n.type.length===1&&typeof n.type[0]=="string"?n.type=n.type[0]:n.type.length===0&&delete n.type};return Object.entries(e).forEach(([a,l])=>{typeof t[a]<"u"?s(a,l):n[a]=l}),Object.entries(t).forEach(([a,l])=>{typeof e[a]>"u"&&(n[a]=l)}),n}getCacheKey(e){return["je-cache",e].join("::")}getCacheBuster(){return this.options.ajax_cache_buster||new Date().toISOString().slice(0,10)}cacheSet(e,t){try{window.localStorage.setItem(this.getCacheKey(e),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:t}))}catch(n){console.error(n)}}cacheGet(e){try{const t=window.localStorage.getItem(this.getCacheKey(e));if(t){const n=JSON.parse(t);if(n.cacheBuster&&n.schema&&n.cacheBuster===this.getCacheBuster())return n.schema;this.cacheDelete(e)}}catch(t){console.error(t)}}cacheDelete(e){window.localStorage.removeItem(this.getCacheKey(e))}}const KQe=()=>({compile(i){const e=i.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),t=e&&e.length;if(!t)return()=>i;const n=[],r=s=>{let o=e[s].replace(/[{}]+/g,"").trim().split(".");const a=o.length;let l;if(a>1){let u;l=c=>{for(u=c,s=0;s<a&&(u=u[o[s]],!!u);s++);return u}}else o=o[0],l=u=>u[o];n.push({s:e[s],r:l})};for(let s=0;s<t;s++)r(s);return s=>{let o=`${i}`,a;for(let l=0;l<t;l++)a=n[l],o=o.replace(a.s,a.r(s));return o}}}),JQe=()=>window.EJS?{compile(i){const e=new window.EJS({text:i});return t=>e.render(t)}}:!1,QQe=()=>window.Handlebars,eet=()=>window.Hogan?{compile(i){const e=window.Hogan.compile(i);return t=>e.render(t)}}:!1,tet=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,iet=()=>!window.Mark||!window.Mark.up?!1:{compile(i){return e=>window.Mark.up(i,e)}},net=()=>window.Mustache?{compile(i){return e=>window.Mustache.render(i,e)}}:!1,ret=()=>window.swig,set=()=>window._?{compile(i){return e=>window._.template(i)(e)}}:!1,oet={default:KQe,ejs:JQe,handlebars:QQe,hogan:eet,lodash:tet,markup:iet,mustache:net,swig:ret,underscore:set},aet={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""};class Of{constructor(e="",t=aet){this.mapping=t,this.icon_prefix=e}getIconClass(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:this.icon_prefix+e}getIcon(e){const t=this.getIconClass(e);if(!t)return null;const n=document.createElement("i");return n.classList.add(...t.split(" ")),n}}const uet="glyphicon glyphicon-",cet={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class het extends Of{constructor(){super(uet,cet)}}const det="icon-",fet={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class pet extends Of{constructor(){super(det,fet)}}const get="fa fa-",met={collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"files-o",clear:"times-circle-o",time:"clock-o",calendar:"calendar",edit_properties:"list"};class yet extends Of{constructor(){super(get,met)}}const vet="fas fa-",_et={collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"};class bet extends Of{constructor(){super(vet,_et)}}const xet="ui-icon ui-icon-",wet={collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",subtract:"minusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",moveright:"arrowthick-1-e",movedown:"arrowthick-1-s",moveleft:"arrowthick-1-w",copy:"copy",clear:"circle-close",time:"time",calendar:"calendar",edit_properties:"note"};class Eet extends Of{constructor(){super(xet,wet)}}const Cet="oi oi-",Tet={collapse:"collapse-down",expand:"expand-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"file",moveup:"arrow-thick-top",moveright:"arrow-thick-right",movedown:"arrow-thick-bottom",moveleft:"arrow-thick-left",copy:"clipboard",clear:"circle-x",time:"clock",calendar:"calendar",edit_properties:"list"};class Aet extends Of{constructor(){super(Cet,Tet)}}const Ret="icon icon-",ket={collapse:"arrow-down",expand:"arrow-right",delete:"delete",edit:"edit",add:"plus",subtract:"minus",cancel:"cross",save:"check",moveup:"upward",moveright:"forward",movedown:"downward",moveleft:"back",copy:"copy",clear:"close",time:"time",calendar:"bookmark",edit_properties:"menu"};class Det extends Of{constructor(){super(Ret,ket)}}const Let="bi bi-",Met={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"dash",cancel:"x-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"clipboard",clear:"x-circle",time:"clock",calendar:"calendar",edit_properties:"list-ul"};class Iet extends Of{constructor(){super(Let,Met)}}const Oet={bootstrap:Iet,bootstrap3:het,fontawesome3:pet,fontawesome4:yet,fontawesome5:bet,jqueryui:Eet,openiconic:Aet,spectre:Det},yve=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(i=>i in document.documentElement);class Pf{constructor(e,t={disable_theme_rules:!1}){this.jsoneditor=e,Object.keys(t).forEach(n=>{typeof e.options[n]<"u"&&(t[n]=e.options[n])}),this.options=t}getContainer(){return document.createElement("div")}getFloatRightLinkHolder(){const e=document.createElement("div");return e.classList.add("je-float-right-linkholder"),e}getModal(){const e=document.createElement("div");return e.style.display="none",e.classList.add("je-modal"),e}getGridContainer(){return document.createElement("div")}getGridRow(){const e=document.createElement("div");return e.classList.add("row"),e}getGridColumn(){return document.createElement("div")}setGridColumnSize(e,t){}getLink(e){const t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t}disableHeader(e){e.style.color="#ccc"}disableLabel(e){e.style.color="#ccc"}enableHeader(e){e.style.color=""}enableLabel(e){e.style.color=""}getInfoButton(e){const t=document.createElement("span");t.innerText="ⓘ",t.classList.add("je-infobutton-icon");const n=document.createElement("span");return n.classList.add("je-infobutton-tooltip"),n.innerText=e,t.onmouseover=()=>{n.style.visibility="visible"},t.onmouseleave=()=>{n.style.visibility="hidden"},t.appendChild(n),t}getFormInputLabel(e,t){const n=document.createElement("label");return n.appendChild(document.createTextNode(e)),t&&n.classList.add("required"),n}getLabelLike(e,t){const n=document.createElement("b");return n.appendChild(document.createTextNode(e)),t&&n.classList.add("required"),n}getHeader(e,t){const n=document.createElement("span");return typeof e=="string"?n.textContent=e:n.appendChild(e),n.classList.add("je-header"),n}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("je-checkbox"),e}getCheckboxLabel(e,t){const n=document.createElement("label");return n.appendChild(document.createTextNode(` ${e}`)),t&&n.classList.add("required"),n}getMultiCheckboxHolder(e,t,n,r){const s=document.createElement("div");return s.classList.add("control-group"),t&&(t.style.display="block",s.appendChild(t),r&&t.appendChild(r)),Object.values(e).forEach(o=>{o.style.display="inline-block",o.style.marginRight="20px",s.appendChild(o)}),n&&s.appendChild(n),s}getFormCheckboxControl(e,t,n){const r=document.createElement("div");return r.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),n&&r.classList.add("je-checkbox-control--compact"),r}getFormRadio(e){const t=this.getFormInputField("radio");return Object.keys(e).forEach(n=>t.setAttribute(n,e[n])),t.classList.add("je-radio"),t}getFormRadioLabel(e,t){const n=document.createElement("label");return n.appendChild(document.createTextNode(` ${e}`)),t&&n.classList.add("required"),n}getFormRadioControl(e,t,n,r){const s=document.createElement("div");return s.appendChild(e),t.style.width="auto",e.insertBefore(t,e.firstChild),n&&s.classList.add("je-radio-control--compact"),t.tagName.toLowerCase()!=="div"&&r&&e&&t&&(t.setAttribute("id",r),t.setAttribute("aria-labelledby",r),e.setAttribute("for",r)),s}getSelectInput(e,t,n=!1){const r=document.createElement("select");return e&&this.setSelectOptions(r,e,[],n),r}getSwitcher(e){const t=this.getSelectInput(e,!1);return t.classList.add("je-switcher"),t}getSwitcherOptions(e){return e.getElementsByTagName("option")}setSwitcherOptions(e,t,n){this.setSelectOptions(e,t,n)}setSelectOptions(e,t,n=[],r=!1,s=" "){if(e.innerHTML="",r){const o=document.createElement("option");o.setAttribute("value","_placeholder_"),o.textContent=s,o.setAttribute("disabled",""),o.setAttribute("hidden",""),e.appendChild(o)}for(let o=0;o<t.length;o++){const a=document.createElement("option");a.setAttribute("value",t[o]),a.textContent=n[o]||t[o],e.appendChild(a)}}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("je-textarea"),e}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}visuallyHidden(e){e&&e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),t}getRangeInput(e,t,n,r,s){const o=this.getFormInputField("range");return o.setAttribute("min",e),o.setAttribute("max",t),o.setAttribute("step",n),r&&(r.setAttribute("id",s+"-description"),o.setAttribute("aria-describedby",s+"-description")),o}getStepperButtons(e){const t=document.createElement("div"),n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("stepper-down");const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-up"),e.getAttribute("readonly")&&(n.setAttribute("disabled",!0),r.setAttribute("disabled",!0)),n.textContent="-",r.textContent="+";const o=(u,c)=>{c?u.value=Number(c):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return n.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),$c(e,"change")}),r.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),$c(e,"change")}),t.appendChild(n),t.appendChild(r),t}getRangeOutput(e){const t=document.createElement("output"),n=r=>{t.value=r.currentTarget.value};return e.addEventListener("change",n,!1),e.addEventListener("input",n,!1),t}getRangeControl(e,t){const n=document.createElement("div");return n.classList.add("je-range-control"),t&&n.appendChild(t),n.appendChild(e),n}getFormInputField(e){const t=document.createElement("input");return t.setAttribute("type",e),t}afterInputReady(e){}getFormControl(e,t,n,r,s){const o=document.createElement("div");return o.classList.add("form-control"),e&&(o.appendChild(e),s&&e.setAttribute("for",s)),(t.type==="checkbox"||t.type==="radio")&&e?(t.style.width="auto",e.insertBefore(t,e.firstChild),r&&e.appendChild(r)):(r&&e&&e.appendChild(r),o.appendChild(t)),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&n&&(n.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),n&&o.appendChild(n),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel--top"),e}getChildEditorHolder(){return document.createElement("div")}getDescription(e){const t=document.createElement("p");return window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getCheckboxDescription(e){return this.getDescription(e)}getFormInputDescription(e){return this.getDescription(e)}getButtonHolder(){return document.createElement("span")}getHeaderButtonHolder(){return this.getButtonHolder()}getFormButtonHolder(e){return this.getButtonHolder()}getButton(e,t,n){const r=document.createElement("button");return r.type="button",this.setButtonText(r,e,t,n),r}getFormButton(e,t,n){return this.getButton(e,t,n)}setButtonText(e,t,n,r){for(;e.firstChild;)e.removeChild(e.firstChild);if(n&&(e.appendChild(n),t=` ${t}`),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!n){const s=document.createElement("span");s.appendChild(document.createTextNode(t)),e.appendChild(s)}r&&e.setAttribute("title",r)}getTableContainer(){return document.createElement("div")}getTable(){return document.createElement("table")}getTableRow(){return document.createElement("tr")}getTableHead(){return document.createElement("thead")}getTableBody(){return document.createElement("tbody")}getTableHeaderCell(e){const t=document.createElement("th");return t.textContent=e,t}getTableCell(){return document.createElement("td")}getErrorMessage(e){const t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.errmsg.setAttribute("role","alert")}removeInputError(e){}addTableRowError(e){}removeTableRowError(e){}getTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<div class='je-tabholder tabs'></div><div class='content' id='${t}'></div><div class='je-tabholder--clear'></div>`,n}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='${t}'></div>`,n}applyStyles(e,t){Object.keys(t).forEach(n=>e.style[n]=t[n])}closest(e,t){for(;e&&e!==document;)if(e[yve]){if(e[yve](t))return e;e=e.parentNode}else return!1;return!1}insertBasicTopTab(e,t){t.firstChild.insertBefore(e,t.firstChild.firstChild)}getTab(e,t){const n=document.createElement("div");return n.appendChild(e),n.id=t,n.classList.add("je-tab"),n}getTopTab(e,t){const n=document.createElement("div");return n.appendChild(e),n.id=t,n.classList.add("je-tab--top"),n}getTabContentHolder(e){return e.children[1]}getTopTabContentHolder(e){return e.children[1]}getTabContent(){return this.getIndentedPanel()}getTopTabContent(){return this.getTopIndentedPanel()}markTabActive(e){this.applyStyles(e.tab,{opacity:1,background:"white"}),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){this.applyStyles(e.tab,{opacity:.5,background:""}),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}addTab(e,t){e.children[0].appendChild(t)}addTopTab(e,t){e.children[0].appendChild(t)}getBlockLink(){const e=document.createElement("a");return e.classList.add("je-block-link"),e}getBlockLinkHolder(){return document.createElement("div")}getLinksHolder(){return document.createElement("div")}createMediaLink(e,t,n){e.appendChild(t),n.classList.add("je-media"),e.appendChild(n)}createImageLink(e,t,n){e.appendChild(t),t.appendChild(n)}getFirstTab(e){return e.firstChild.firstChild}getInputGroup(e,t){}cleanText(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}getDropZone(e){const t=document.createElement("div");return t.setAttribute("data-text",e),t.classList.add("je-dropzone"),t}getUploadPreview(e,t,n){const r=document.createElement("div");if(r.classList.add("je-upload-preview"),e.mimeType.substr(0,5)==="image"){const a=document.createElement("img");a.src=n,r.appendChild(a)}const s=document.createElement("div");s.innerHTML+=`<strong>Name:</strong> ${e.name}<br><strong>Type:</strong> ${e.type}<br><strong>Size:</strong> ${e.formattedSize}`,r.appendChild(s),r.appendChild(t);const o=document.createElement("div");return o.style.clear="left",r.appendChild(o),r}getProgressBar(){const n=document.createElement("progress");return n.setAttribute("max",100),n.setAttribute("value",0),n}updateProgressBar(e,t){e&&e.setAttribute("value",t)}updateProgressBarUnknown(e){e&&e.removeAttribute("value")}}const Pet={".je-form-input-label":"display:block;margin-bottom:3px;font-weight:bold",".je-form-input-description":"display:inline-block;margin:0;font-size:0.8em;font-style:italic",".je-indented-panel":"padding:5px;margin:10px;border-radius:3px;border:1px%20solid%20%23ddd",".je-child-editor-holder":"margin-bottom:8px",".je-header-button-holder":"display:inline-block;margin-left:10px;font-size:0.8em;vertical-align:middle",".je-table":"margin-bottom:5px;border-bottom:1px%20solid%20%23ccc",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class mTe extends Pf{getFormInputLabel(e,t){const n=super.getFormInputLabel(e,t);return n.classList.add("je-form-input-label"),n}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-form-input-label"),t}getIndentedPanel(){const e=super.getIndentedPanel();return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){return this.getIndentedPanel()}getChildEditorHolder(){const e=super.getChildEditorHolder();return e.classList.add("je-child-editor-holder"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("je-header-button-holder"),e}getTable(){const e=super.getTable();return e.classList.add("je-table"),e}addInputError(e,t){const n=this.closest(e,".form-control")||e.controlgroup;e.errmsg?e.errmsg.style.display="block":(e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",n.appendChild(e.errmsg)),e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}mTe.rules=Pet;const Fet={};class yTe extends Pf{getSelectInput(e,t){const n=super.getSelectInput(e);return n.classList.add("form-control"),n}setGridColumnSize(e,t,n){e.classList.add(`col-md-${t}`),n&&e.classList.add(`col-md-offset-${n}`)}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),e}getRangeInput(e,t,n,r,s){return super.getRangeInput(e,t,n,r,s)}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&t.classList.add("form-control"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,n,r,s){const o=document.createElement("div");return e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),r&&e.appendChild(r),e.insertBefore(t,e.firstChild),o.appendChild(e)):(o.classList.add("form-group"),e&&(e.classList.add("control-label"),o.appendChild(e),r&&e.appendChild(r)),o.appendChild(t)),n&&o.appendChild(n),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&n&&(n.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("well","well-sm"),e.style.paddingBottom=0,e}getInfoButton(e){const t=document.createElement("span");t.classList.add("glyphicon","glyphicon-info-sign","pull-right"),t.style.padding=".25rem",t.style.position="relative",t.style.display="inline-block";const n=document.createElement("span");return n.style["font-family"]="sans-serif",n.style.visibility="hidden",n.style["background-color"]="rgba(50, 50, 50, .75)",n.style.margin="0 .25rem",n.style.color="#FAFAFA",n.style.padding=".5rem 1rem",n.style["border-radius"]=".25rem",n.style.width="25rem",n.style.position="absolute",n.innerText=e,t.onmouseover=()=>{n.style.visibility="visible"},t.onmouseleave=()=>{n.style.visibility="hidden"},t.appendChild(n),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("help-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const n=document.createElement("span");return n.classList.add("h3"),typeof e=="string"?n.textContent=e:n.appendChild(e),n}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getButton(e,t,n){const r=super.getButton(e,t,n);return r.classList.add("btn","btn-default"),r}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-bordered"),e.style.width="auto",e.style.maxWidth="none",e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("help-block","errormsg"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<ul class='col-md-2 nav nav-pills nav-stacked' id='${t}' role='tablist'></ul><div class='col-md-10 tab-content active well well-small'  id='${t}'></div>`,n}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<ul class='nav nav-tabs' id='${t}' role='tablist'></ul><div class='tab-content active well well-small'  id='${t}'></div>`,n}getTab(e,t){const n=document.createElement("li");n.setAttribute("role","presentation");const r=document.createElement("a");return r.setAttribute("href",`#${t}`),r.appendChild(e),r.setAttribute("aria-controls",t),r.setAttribute("role","tab"),r.setAttribute("data-toggle","tab"),n.appendChild(r),n}getTopTab(e,t){const n=document.createElement("li");n.setAttribute("role","presentation");const r=document.createElement("a");return r.setAttribute("href",`#${t}`),r.appendChild(e),r.setAttribute("aria-controls",t),r.setAttribute("role","tab"),r.setAttribute("data-toggle","tab"),n.appendChild(r),n}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}getProgressBar(){const r=document.createElement("div");r.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",r.appendChild(s),r}updateProgressBar(e,t){if(!e)return;const n=e.firstChild,r=`${t}%`;n.setAttribute("aria-valuenow",t),n.style.width=r,n.innerHTML=r}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getInputGroup(e,t){if(!e)return;const n=document.createElement("div");n.classList.add("input-group"),n.appendChild(e);const r=document.createElement("div");r.classList.add("input-group-btn"),n.appendChild(r);for(let s=0;s<t.length;s++)r.appendChild(t[s]);return n}}yTe.rules=Fet;const Net={".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},$et={disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class vTe extends Pf{constructor(e){super(e,$et)}getSelectInput(e,t){const n=super.getSelectInput(e);return n.classList.add("form-control"),this.options.custom_forms===!1?(this.options.input_size==="small"&&n.classList.add("form-control-sm"),this.options.input_size==="large"&&n.classList.add("form-control-lg")):(n.classList.remove("form-control"),n.classList.add("custom-select"),this.options.input_size==="small"&&n.classList.add("custom-select-sm"),this.options.input_size==="large"&&n.classList.add("custom-select-lg")),n}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,n){e.classList.add(`col-md-${t}`),n&&e.classList.add(`offset-md-${n}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const n=e.parentNode.parentNode.getElementsByTagName("label")[0];n&&(n.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,n,r,s){const o=super.getRangeInput(e,t,n,r,s);return this.options.custom_forms===!0&&(o.classList.remove("form-control"),o.classList.add("custom-range")),o}getStepperButtons(e){const t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),s=document.createElement("button");s.setAttribute("type","button");const o=document.createElement("button");o.setAttribute("type","button"),t.appendChild(n),t.appendChild(e),t.appendChild(r),n.appendChild(s),r.appendChild(o),t.classList.add("input-group"),n.classList.add("input-group-prepend"),r.classList.add("input-group-append"),s.classList.add("btn"),s.classList.add("btn-secondary"),s.classList.add("stepper-down"),o.classList.add("btn"),o.classList.add("btn-secondary"),o.classList.add("stepper-up"),e.getAttribute("readonly")&&(s.setAttribute("disabled",!0),o.setAttribute("disabled",!0)),s.textContent="-",o.textContent="+";const l=(h,d)=>{d?h.value=Number(d):h.value=Number(h.value),h.setAttribute("initialized","1")},u=e.getAttribute("min"),c=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),s.addEventListener("click",()=>{e.getAttribute("initialized")?u?Number(e.value)>Number(u)&&e.stepDown():e.stepDown():l(e,u),$c(e,"change")}),o.addEventListener("click",()=>{e.getAttribute("initialized")?c?Number(e.value)<Number(c)&&e.stepUp():e.stepUp():l(e,u),$c(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&e!=="file"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),e==="file"&&t.classList.add("form-control-file"),t}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("sr-only"),t}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getFormControl(e,t,n,r,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");this.options.custom_forms===!1?(a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label")):(a.classList.add("custom-control"),t.classList.add("custom-control-input"),e.classList.add("custom-control-label"),t.type==="checkbox"?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(t),a.appendChild(e),r&&a.appendChild(r),o.appendChild(a)}else e&&(o.appendChild(e),r&&o.appendChild(r)),o.appendChild(t);return n&&o.appendChild(n),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&n&&(n.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ml-3","jsoneditor-twbs4-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const n=document.createTextNode("ⓘ");return t.appendChild(n),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,n,r){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),r&&t.appendChild(r));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),n&&s.appendChild(n),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const n in e)t.setAttribute(n,e[n]);return this.options.custom_forms===!1?t.classList.add("form-check-input"):t.classList.add("custom-control-input"),t}getFormRadioLabel(e,t){const n=document.createElement("label");return this.options.custom_forms===!1?n.classList.add("form-check-label"):n.classList.add("custom-control-label"),n.appendChild(document.createTextNode(e)),n}getFormRadioControl(e,t,n){const r=document.createElement("div");return this.options.custom_forms===!1?r.classList.add("form-check"):r.classList.add("custom-control","custom-radio"),r.appendChild(t),r.appendChild(e),n&&(this.options.custom_forms===!1?r.classList.add("form-check-inline"):r.classList.add("custom-control-inline")),r}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","mb-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const n=document.createElement("span");return n.classList.add("h3"),n.classList.add("card-title"),n.classList.add("level-"+t),typeof e=="string"?n.textContent=e:n.appendChild(e),n.style.display="inline-block",n}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-right"),t}getButton(e,t,n){const r=super.getButton(e,t,n);return r.classList.add("btn","btn-secondary","btn-sm"),r}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),n=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${n}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${n}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.classList.add("card"),n.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,n}getTab(e,t){const n=document.createElement("li");n.classList.add("nav-item");const r=document.createElement("a");return r.classList.add("nav-link"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTopTab(e,t){const n=document.createElement("li");n.classList.add("nav-item");const r=document.createElement("a");return r.classList.add("nav-link"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const r=document.createElement("div");r.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",r.appendChild(s),r}updateProgressBar(e,t){if(!e)return;const n=e.firstChild,r=`${t}%`;n.setAttribute("aria-valuenow",t),n.style.width=r,n.innerHTML=r}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const n=document.createElement("div");n.classList.add("input-group"),n.appendChild(e);const r=document.createElement("div");r.classList.add("input-group-append"),n.appendChild(r);for(let s=0;s<t.length;s++)t[s].classList.remove("mr-2","btn-secondary"),t[s].classList.add("btn-outline-secondary"),r.appendChild(t[s]);return n}}vTe.rules=Net;const Bet={".form-group":"margin-bottom:1rem",".form-text":"display:block",".jsoneditor-twbs5-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},jet={disable_theme_rules:!1,input_size:"normal",object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class _Te extends Pf{constructor(e){super(e,jet)}getSelectInput(e,t){const n=super.getSelectInput(e);return n.classList.add("form-control"),n.classList.add("form-select"),this.options.input_size==="small"&&n.classList.add("form-control-sm"),this.options.input_size==="large"&&n.classList.add("form-control-lg"),n}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}setGridColumnSize(e,t,n){e.classList.add(`col-md-${t}`),n&&e.classList.add(`offset-md-${n}`)}afterInputReady(e){if(e.controlgroup)return;const t=e.name;e.id=t;const n=e.parentNode.parentNode.getElementsByTagName("label")[0];n&&(n.classList.add("form-label"),n.htmlFor=t),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,t,n,r,s){const o=super.getRangeInput(e,t,n,r,s);return o.classList.remove("form-control"),o.classList.add("form-range"),o}getStepperButtons(e){const t=document.createElement("div"),n=document.createElement("button");n.setAttribute("type","button");const r=document.createElement("button");r.setAttribute("type","button"),t.appendChild(n),t.appendChild(e),t.appendChild(r),t.classList.add("input-group"),n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("stepper-down"),r.classList.add("btn"),r.classList.add("btn-secondary"),r.classList.add("stepper-up"),e.getAttribute("readonly")&&(n.setAttribute("disabled",!0),r.setAttribute("disabled",!0)),n.textContent="-",r.textContent="+";const o=(u,c)=>{c?u.value=Number(c):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),n.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),$c(e,"change")}),r.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),$c(e,"change")}),t}getFormInputField(e){const t=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&(t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg")),t}getFormControl(e,t,n,r,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")){const a=document.createElement("div");a.classList.add("form-check"),t.classList.add("form-check-input"),e.classList.add("form-check-label"),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&n&&(n.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),a.appendChild(t),a.appendChild(e),r&&a.appendChild(r),o.appendChild(a)}else e&&(e.classList.add("form-label"),o.appendChild(e),r&&o.appendChild(r)),o.appendChild(t);return n&&o.appendChild(n),o}getHiddenLabel(e){const t=document.createElement("label");return t.textContent=e,t.classList.add("visually-hidden"),t}visuallyHidden(e){e&&e.classList.add("visually-hidden")}getHiddenText(e){const t=document.createElement("span");return t.textContent=e,t.classList.add("sr-only"),t}getInfoButton(e){const t=document.createElement("button");t.type="button",t.classList.add("ms-3","jsoneditor-twbs5-text-button"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("data-placement","auto"),t.title=e;const n=document.createTextNode("ⓘ");return t.appendChild(n),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(t).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&t.classList.add("je-tooltip"),t}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,t,n,r){const s=document.createElement("div");s.classList.add("form-group"),t&&(s.appendChild(t),r&&t.appendChild(r));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),n&&s.appendChild(n),s}getFormRadio(e){const t=this.getFormInputField("radio");for(const n in e)t.setAttribute(n,e[n]);return t.classList.add("form-check-input"),t}getFormRadioLabel(e,t){const n=document.createElement("label");return n.classList.add("form-check-label"),n.appendChild(document.createTextNode(e)),n}getFormRadioControl(e,t,n){const r=document.createElement("div");return r.classList.add("form-check"),r.appendChild(t),r.appendChild(e),n&&r.classList.add("form-check-inline"),r}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","my-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const t=document.createElement("small");return t.classList.add("form-text"),t.classList.add("d-block"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getHeader(e,t){const n=document.createElement("span");return n.classList.add("h3"),n.classList.add("card-title"),n.classList.add("level-"+t),typeof e=="string"?n.textContent=e:n.appendChild(e),n.style.display="inline-block",n}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=this.getButtonHolder();return t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"&&t.classList.add("text-end"),t}getButton(e,t,n){const r=super.getButton(e,t,n);return r.classList.add("btn","btn-secondary","btn-sm"),r}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const t=document.createElement("div");return t.classList.add("alert","alert-danger"),t.setAttribute("role","alert"),t.appendChild(document.createTextNode(e)),t}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const t=document.createElement("div"),n=typeof e>"u"?"":e;return t.innerHTML=`<div class='col-md-2' id='${n}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${n}'></div></div>`,t.classList.add("row"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.classList.add("card"),n.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${t}'></ul></div><div class='card-body'><div class='tab-content' id='${t}'></div></div>`,n}getTab(e,t){const n=document.createElement("li");n.classList.add("nav-item");const r=document.createElement("a");return r.classList.add("nav-link"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTopTab(e,t){const n=document.createElement("li");n.classList.add("nav-item");const r=document.createElement("a");return r.classList.add("nav-link"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,t){t.children[0].children[0].insertBefore(e,t.children[0].children[0].firstChild)}addTopTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const r=document.createElement("div");r.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",r.appendChild(s),r}updateProgressBar(e,t){if(!e)return;const n=e.firstChild,r=`${t}%`;n.setAttribute("aria-valuenow",t),n.style.width=r,n.innerHTML=r}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","progress-striped","active"),t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,t){if(!e)return;const n=document.createElement("div");n.classList.add("input-group"),n.appendChild(e);for(let r=0;r<t.length;r++)t[r].classList.remove("me-2","btn-secondary"),t[r].classList.add("btn-outline-secondary"),n.appendChild(t[r]);return n}}_Te.rules=Bet;class bTe extends Pf{getTable(){const e=super.getTable();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return t.classList.add("ui-state-active"),t.style.fontWeight="bold",t}getTableCell(){const e=super.getTableCell();return e.classList.add("ui-widget-content"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e}getFormInputDescription(e){const t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t}getFormControl(e,t,n,r){const s=super.getFormControl(e,t,n,r);return t.type==="checkbox"?(s.style.lineHeight="25px",s.style.padding="3px 0"):s.style.padding="4px 0 8px 0",s}getDescription(e){const t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getButtonHolder(){const e=document.createElement("div");return e.classList.add("ui-buttonset"),e.style.fontSize=".7em",e}getFormInputLabel(e,t){const n=document.createElement("label");return n.style.fontWeight="bold",n.style.display="block",n.textContent=e,t&&n.classList.add("required"),n}getButton(e,t,n){const r=document.createElement("button");r.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),t&&!e?(r.classList.add("ui-button-icon-only"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),r.appendChild(t)):t?(r.classList.add("ui-button-text-icon-primary"),t.classList.add("ui-button-icon-primary","ui-icon-primary"),r.appendChild(t)):r.classList.add("ui-button-text-only");const s=document.createElement("span");return s.classList.add("ui-button-text"),s.textContent=e||n||".",r.appendChild(s),r.setAttribute("title",n),r}setButtonText(e,t,n,r){e.innerHTML="",e.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),n&&!t?(e.classList.add("ui-button-icon-only"),n.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(n)):n?(e.classList.add("ui-button-text-icon-primary"),n.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(n)):e.classList.add("ui-button-text-only");const s=document.createElement("span");s.classList.add("ui-button-text"),s.textContent=t||r||".",e.appendChild(s),e.setAttribute("title",r)}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("ui-widget-content","ui-corner-all"),e.style.padding="1em 1.4em",e.style.marginBottom="20px",e}afterInputReady(e){if(!e.controls&&(e.controls=this.closest(e,".form-control"),this.queuedInputErrorText)){const t=this.queuedInputErrorText;delete this.queuedInputErrorText,this.addInputError(e,t)}}addInputError(e,t){if(!e.controls){this.queuedInputErrorText=t;return}e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.classList.add("ui-state-error"),e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t}removeInputError(e){e.controls||delete this.queuedInputErrorText,e.errmsg&&(e.errmsg.style.display="none")}markTabActive(e){e.tab.classList.remove("ui-widget-header"),e.tab.classList.add("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.add("ui-widget-header"),e.tab.classList.remove("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}}bTe.rules={'div[data-schemaid="root"]:after':'position:relative;color:red;margin:10px 0;font-weight:600;display:block;width:100%;text-align:center;content:"This is an old JSON-Editor 1.x Theme and might not display elements correctly when used with the 2.x version"'};const zet={".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class xTe extends Pf{addInputError(e,t){if(e.errmsg)e.errmsg.style.display="block";else{const n=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),n.nodeName&&n.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}xTe.rules=zet;const Get={"*":"--primary-color:%235755d9;--gray-color:%23bcc3ce;--light-color:%23fff",".slider:focus":"box-shadow:none","h4 > label + .btn-group":"margin-left:1rem",".text-right > button":"margin-right:0%20!important",".text-left > button":"margin-left:0%20!important",".property-selector":"font-size:0.7rem;font-weight:normal;max-height:260px%20!important;width:395px%20!important",".property-selector .form-checkbox":"margin:0",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"border-collapse:collapse",".table td":"padding:0.4rem%200.4rem",".mr-5":"margin-right:1rem%20!important","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23eee",".je-table-border td":"border:0.05rem%20solid%20%23dadee4%20!important",".btn-info":"font-size:0.5rem;font-weight:bold;height:0.8rem;padding:0.15rem%200;line-height:0.8;margin:0.3rem%200%200.3rem%200.1rem",".je-label + select":"min-width:5rem",".je-label":"font-weight:600",".btn-action.btn-info":"width:0.8rem",".je-border":"border:0.05rem%20solid%20%23dadee4",".je-panel":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit",".je-align-bottom":"margin-top:auto",".je-desc":"font-size:smaller;margin:0.2rem%200",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem;border:3px%20solid%20white;box-shadow:0px%200px%208px%20rgba(0%2C%200%2C%200%2C%200.3);box-sizing:border-box",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".columns .container.je-noindent":"padding-left:0;padding-right:0",".selectize-control.multi .item":"background:var(--primary-color)%20!important",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"display:none",".select2-container--default .select2-selection--single":"border:none",".select2-container .select2-selection--single .select2-selection__rendered":"padding:0",".select2-container .select2-search--inline .select2-search__field":"margin-top:0",".select2-container--default.select2-container--focus   .select2-selection--multiple":"border:0.05rem%20solid%20var(--gray-color)",".select2-container--default   .select2-selection--multiple   .select2-selection__choice":"margin:0.4rem%200.2rem%200.2rem%200;padding:2px%205px;background-color:var(--primary-color);color:var(--light-color)",".select2-container--default .select2-search--inline .select2-search__field":"line-height:normal",".choices":"margin-bottom:auto",".choices__list--multiple .choices__item":"border:none;background-color:var(--primary-color);color:var(--light-color)",".choices[data-type*='select-multiple'] .choices__button":"border-left:0.05rem%20solid%20%232826a6",".choices__inner":"font-size:inherit;min-height:20px;padding:4px%207.5px%204px%203.75px",".choices[data-type*='select-one'] .choices__inner":"padding-bottom:4px",".choices__list--dropdown .choices__item":"font-size:inherit"},Uet={disable_theme_rules:!1,label_bold:!0,align_bottom:!1,object_indent:!1,object_border:!1,table_border:!1,table_zebrastyle:!1,input_size:"normal"};class wTe extends Pf{constructor(e){super(e,Uet)}setGridColumnSize(e,t,n){e.classList.add(`col-${t}`),n&&e.classList.add("col-mx-auto")}getGridContainer(){const e=document.createElement("div");return e.classList.add("container"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("columns"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("column"),this.options.align_bottom&&e.classList.add("je-align-bottom"),e}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel-top"),this.options.object_border&&e.classList.add("je-border"),e}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=super.getButtonHolder();return e.classList.add("btn-group"),e}getFormButtonHolder(e){const t=super.getFormButtonHolder();return t.classList.remove("btn-group"),t.classList.add("d-block"),e==="center"?t.classList.add("text-center"):e==="right"?t.classList.add("text-right"):t.classList.add("text-left"),t}getFormButton(e,t,n){const r=super.getFormButton(e,t,n);return r.classList.add("btn","btn-primary","mx-2","my-1"),this.options.input_size!=="small"&&r.classList.remove("btn-sm"),this.options.input_size==="large"&&r.classList.add("btn-lg"),r}getButton(e,t,n){const r=super.getButton(e,t,n);return r.classList.add("btn","btn-sm","btn-primary","mr-2","my-1"),r}getHeader(e,t){const n=document.createElement("span");return typeof e=="string"?n.textContent=e:n.appendChild(e),n.style.display="inline-block",n}getFormInputDescription(e){const t=super.getFormInputDescription(e);return t.classList.add("je-desc","hide-sm"),t}getFormInputLabel(e,t){const n=super.getFormInputLabel(e,t);return this.options.label_bold&&n.classList.add("je-label"),n}getCheckbox(){return this.getFormInputField("checkbox")}getCheckboxLabel(e,t){const n=super.getCheckboxLabel(e,t),r=document.createElement("i");return r.classList.add("form-icon"),n.classList.add("form-checkbox","pr-0"),n.insertBefore(r,n.firstChild),n}getFormCheckboxControl(e,t,n){return e.insertBefore(t,e.firstChild),n&&e.classList.add("form-inline"),e}getMultiCheckboxHolder(e,t,n,r){return super.getMultiCheckboxHolder(e,t,n,r)}getFormRadio(e){const t=this.getFormInputField("radio");for(const n in e)t.setAttribute(n,e[n]);return t}getFormRadioLabel(e,t){const n=super.getFormRadioLabel(e,t),r=document.createElement("i");return r.classList.add("form-icon"),n.classList.add("form-radio"),n.insertBefore(r,n.firstChild),n}getFormRadioControl(e,t,n){return e.insertBefore(t,e.firstChild),n&&e.classList.add("form-inline"),e}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("form-input"),t}getRangeInput(e,t,n,r,s){const o=super.getRangeInput(e,t,n,r,s);return o.classList.add("slider"),o.classList.remove("form-input"),o.setAttribute("oninput",'this.setAttribute("value", this.value)'),o}getRangeControl(e,t){const n=super.getRangeControl(e,t);return n.classList.add("text-center"),n}getSelectInput(e,t){const n=super.getSelectInput(e);return n.classList.add("form-select"),n}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-input"),e}getFormControl(e,t,n,r,s){const o=document.createElement("div");return o.classList.add("form-group"),e&&(t.type==="checkbox"||t.type==="radio")?(o.classList.add(t.type),r&&e.appendChild(r),e.insertBefore(t,e.firstChild),o.appendChild(e)):(e&&(e.classList.add("form-label"),o.appendChild(e),r&&e.appendChild(r)),o.appendChild(t)),this.options.input_size==="small"?t.classList.add("input-sm","select-sm"):this.options.input_size==="large"&&t.classList.add("input-lg","select-lg"),t.type!=="checkbox"&&o.appendChild(t),n&&o.appendChild(n),t.tagName.toLowerCase()!=="div"&&t&&e&&s&&(e.setAttribute("for",s),t.setAttribute("id",s)),t.tagName.toLowerCase()!=="div"&&t&&n&&(n.setAttribute("id",s+"-description"),t.setAttribute("aria-describedby",s+"-description")),o}getInputGroup(e,t){if(!e)return;const n=document.createElement("div");n.classList.add("input-group"),n.appendChild(e);for(let r=0;r<t.length;r++)t[r].classList.add("input-group-btn"),t[r].classList.remove("btn-sm","mr-2","my-1"),n.appendChild(t[r]);return n}getInfoButton(e){const t=document.createElement("div");t.classList.add("popover","popover-left","float-right");const n=document.createElement("button");n.classList.add("btn","btn-secondary","btn-info","btn-action","s-circle"),n.setAttribute("tabindex","-1"),t.appendChild(n);const r=document.createTextNode("I");n.appendChild(r);const s=document.createElement("div");s.classList.add("popover-container"),t.appendChild(s);const o=document.createElement("div");o.classList.add("card"),s.appendChild(o);const a=document.createElement("div");return a.classList.add("card-body"),a.innerHTML=e,o.appendChild(a),t}getTable(){const e=super.getTable();return e.classList.add("table","table-scroll"),this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getProgressBar(){const e=super.getProgressBar();return e.classList.add("progress"),e}getTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.classList.add("columns"),n.innerHTML=`<div class="column col-2"></div><div class="column col-10 content" id="${t}"></div>`,n}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<ul class="tab"></ul><div class="content" id="${t}"></div>`,n}getTab(e,t){const n=document.createElement("a");return n.classList.add("btn","btn-secondary","btn-block"),n.setAttribute("href",`#${t}`),n.appendChild(e),n}getTopTab(e,t){const n=document.createElement("li");n.id=t,n.classList.add("tab-item");const r=document.createElement("a");return r.setAttribute("href",`#${t}`),r.appendChild(e),n.appendChild(r),n}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}afterInputReady(e){if(e.localName==="select"){if(e.classList.contains("selectized")){const t=e.nextSibling;t&&(t.classList.remove("form-select"),Array.from(t.querySelectorAll(".form-select")).forEach(n=>{n.classList.remove("form-select")}))}else if(e.classList.contains("select2-hidden-accessible")){const t=e.nextSibling;t&&t.querySelector(".select2-selection--single")&&t.classList.add("form-select")}}e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("form-input-hint"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.classList.remove("d-hide"),e.errmsg.textContent=t,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.classList.add("d-hide"),e.controlgroup.classList.remove("has-error"))}}wTe.rules=Get;const qet={".slider":"-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;display:block;border:none;height:1.2rem;width:100%25",".slider:focus":"box-shadow:0%200%200%200%20rgba(87%2C%2085%2C%20217%2C%200.2);outline:none",".slider.tooltip:not([data-tooltip])::after":"content:attr(value)",".slider::-webkit-slider-thumb":"-webkit-appearance:none;background:%23f17405;border-radius:100%25;height:0.6rem;margin-top:-0.25rem;transition:transform%200.2s;width:0.6rem",".slider:active::-webkit-slider-thumb":"transform:scale(1.25);outline:none",".slider::-webkit-slider-runnable-track":"background:%23b2b4b6;border-radius:0.1rem;height:0.1rem;width:100%25","a.tooltips":"position:relative;display:inline","a.tooltips span":"position:absolute;white-space:nowrap;width:auto;padding-left:1rem;padding-right:1rem;color:%23ffffff;background:rgba(56%2C%2056%2C%2056%2C%200.85);height:1.5rem;line-height:1.5rem;text-align:center;visibility:hidden;border-radius:3px","a.tooltips span:after":"content:%22%22;position:absolute;top:50%25;left:100%25;margin-top:-5px;width:0;height:0;border-left:5px%20solid%20rgba(56%2C%2056%2C%2056%2C%200.85);border-top:5px%20solid%20transparent;border-bottom:5px%20solid%20transparent","a:hover.tooltips span":"visibility:visible;opacity:0.9;font-size:0.8rem;right:100%25;top:50%25;margin-top:-12px;margin-right:10px;z-index:999",".json-editor-btntype-properties + div":"font-size:0.8rem;font-weight:normal",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"width:100%25;border-collapse:collapse",".table td":"padding:0rem%200rem","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23e6f4fe","div[data-schemaid='root']":"position:relative;width:inherit;display:inherit;overflow-x:hidden;z-index:10","select[multiple]":"height:auto","select[multiple].from-select":"height:auto",".je-table-zebra:nth-child(even)":"background-color:%23f2f2f2",".je-table-border":"border:0.5px%20solid%20black",".je-table-hdiv":"border-bottom:1px%20solid%20black",".je-border":"border:0.05rem%20solid%20%233182ce",".je-panel":"width:inherit;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"width:100%25;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit;font-weight:bold",".je-desc":"font-size:smaller;margin:0.2rem%200",".container-xl.je-noindent":"padding-left:0;padding-right:0",".json-editor-btntype-add":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%234299e1;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deletelast":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23e53e3e;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deleteall":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23000000;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-save":"float:right;color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-back":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-delete":"color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btntype-move":"color:%23000000;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btn-collapse":"padding:0em%200.8rem;font-size:1.3rem;color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},Vet={disable_theme_rules:!1,label_bold:!1,object_panel_default:!0,object_indent:!0,object_border:!1,table_border:!1,table_hdiv:!1,table_zebrastyle:!1,input_size:"small",enable_compact:!1};class ETe extends Pf{constructor(e){super(e,Vet)}getGridContainer(){const e=document.createElement("div");return e.classList.add("flex","flex-col","w-full"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("flex","flex-wrap","w-full"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("flex","flex-col"),e}setGridColumnSize(e,t,n){t>0&&t<12?e.classList.add(`w-${t}/12`,"px-1"):e.classList.add("w-full","px-1"),n&&(e.style.marginLeft=`${100/12*n}%`)}getIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","p-1"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","m-2"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTitle(){return this.translateProperty(this.schema.title)}getSelectInput(e,t){const n=super.getSelectInput(e);return t?n.classList.add("form-multiselect","block","py-0","h-auto","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"):n.classList.add("form-select","block","py-0","h-6","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&n.classList.add("compact"),n}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=super.getTextareaInput();return e.classList.add("block","w-full","px-1","text-sm","leading-normal","bg-white","text-black","border","border-grey","rounded"),this.options.enable_compact&&e.classList.add("compact"),e.style.height=0,e}getRangeInput(e,t,n){const r=this.getFormInputField("range");return r.classList.add("slider"),this.options.enable_compact&&r.classList.add("compact"),r.setAttribute("oninput",'this.setAttribute("value", this.value)'),r.setAttribute("min",e),r.setAttribute("max",t),r.setAttribute("step",n),r}getRangeControl(e,t){const n=super.getRangeControl(e,t);return n.classList.add("text-center","text-black"),n}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("form-checkbox","text-red-600"),e}getCheckboxLabel(e,t){const n=super.getCheckboxLabel(e,t);return n.classList.add("inline-flex","items-center"),n}getFormCheckboxControl(e,t,n){return e.insertBefore(t,e.firstChild),n&&e.classList.add("inline-flex flex-row"),e}getMultiCheckboxHolder(e,t,n,r){const s=super.getMultiCheckboxHolder(e,t,n,r);return s.classList.add("inline-flex","flex-col"),s}getFormRadio(e){const t=this.getFormInputField("radio");t.classList.add("form-radio","text-red-600");for(const n in e)t.setAttribute(n,e[n]);return t}getFormRadioLabel(e,t){const n=super.getFormRadioLabel(e,t);return n.classList.add("inline-flex","items-center","mr-2"),n}getFormRadioControl(e,t,n){return e.insertBefore(t,e.firstChild),n&&e.classList.add("form-radio"),e}getRadioHolder(e,t,n,r,s){const o=super.getRadioHolder(t,n,r,s);return e.options.layout==="h"?o.classList.add("inline-flex","flex-row"):o.classList.add("inline-flex","flex-col"),o}getFormInputLabel(e,t){const n=super.getFormInputLabel(e,t);return this.options.label_bold?n.classList.add("font-bold"):n.classList.add("required"),n}getFormInputField(e){const t=super.getFormInputField(e);return["checkbox","radio"].includes(e)||t.classList.add("block","w-full","px-1","text-black","text-sm","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&t.classList.add("compact"),t}getFormInputDescription(e){const t=document.createElement("p");return t.classList.add("block","mt-1","text-xs"),window.DOMPurify?t.innerHTML=window.DOMPurify.sanitize(e):t.textContent=this.cleanText(e),t}getFormControl(e,t,n,r){const s=document.createElement("div");return s.classList.add("form-group","mb-1","w-full"),e&&(e.classList.add("text-xs"),t.type==="checkbox"&&(t.classList.add("form-checkbox","text-xs","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormCheckboxControl(e,t,!1,r)),t.type==="radio"&&(t.classList.add("form-radio","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormRadioControl(e,t,!1,r)),s.appendChild(e),!["checkbox","radio"].includes(t.type)&&r&&s.appendChild(r)),["checkbox","radio"].includes(t.type)||(this.options.input_size==="small"?t.classList.add("text-xs"):this.options.input_size==="normal"?t.classList.add("text-base"):this.options.input_size==="large"&&t.classList.add("text-xl"),s.appendChild(t)),n&&s.appendChild(n),s}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("text-sm"),e}getButtonHolder(){const e=document.createElement("div");return e.classList.add("flex","relative","inline-flex","align-middle"),e}getButton(e,t,n){const r=super.getButton(e,t,n);return r.classList.add("inline-block","align-middle","text-center","text-sm","bg-blue-700","text-white","py-1","pr-1","m-2","shadow","select-none","whitespace-no-wrap","rounded"),r}getInfoButton(e){const t=document.createElement("a");t.classList.add("tooltips","float-right"),t.innerHTML="ⓘ";const n=document.createElement("span");return n.innerHTML=e,t.appendChild(n),t}getTable(){const e=super.getTable();return this.options.table_border?e.classList.add("je-table-border"):e.classList.add("table","border","p-0"),e}getTableRow(){const e=super.getTableRow();return this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("je-table-zebra"),e}getTableHeaderCell(e){const t=super.getTableHeaderCell(e);return this.options.table_border?t.classList.add("je-table-border"):this.options.table_hdiv?t.classList.add("je-table-hdiv"):t.classList.add("text-xs","border","p-0","m-0"),t}getTableCell(){const e=super.getTableCell();return this.options.table_border?e.classList.add("je-table-border"):this.options.table_hdiv?e.classList.add("je-table-hdiv"):e.classList.add("border-0","p-0","m-0"),e}addInputError(e,t){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.controlgroup.classList.add("text-red-600"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("block","mt-1","text-xs","text-red"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("text-red-600"),e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const t=document.createElement("div"),n=typeof e>"u"?"":e;return t.innerHTML=`<div class='w-2/12' id='${n}'><ul class='list-reset pl-0 mb-0'></ul></div><div class='w-10/12' id='${n}'></div>`,t.classList.add("flex"),t}addTab(e,t){e.children[0].children[0].appendChild(t)}getTopTabHolder(e){const t=typeof e>"u"?"":e,n=document.createElement("div");return n.innerHTML=`<ul class='nav-tabs flex list-reset pl-0 mb-0 border-b border-grey-light' id='${t}'></ul><div class='p-6 block' id='${t}'></div>`,n}getTab(e,t){const n=document.createElement("li");n.classList.add("nav-item","flex-col","text-center","text-white","bg-blue-500","shadow-md","border","p-2","mb-2","mr-2","hover:bg-blue-400","rounded");const r=document.createElement("a");return r.classList.add("nav-link","text-center"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTopTab(e,t){const n=document.createElement("li");n.classList.add("nav-item","flex","border-l","border-t","border-r");const r=document.createElement("a");return r.classList.add("nav-link","-mb-px","flex-row","text-center","bg-white","p-2","hover:bg-blue-400","rounded-t"),r.setAttribute("href",`#${t}`),r.setAttribute("data-toggle","tab"),r.appendChild(e),n.appendChild(r),n}getTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("block"),e.tab.firstChild.classList.contains("border-b")===!0?(e.tab.firstChild.classList.add("border-b-0"),e.tab.firstChild.classList.remove("border-b")):e.tab.firstChild.classList.add("border-b-0"),e.container.classList.contains("hidden")===!0&&e.container.classList.remove("hidden"),e.container.classList.add("block")}markTabInactive(e){e.tab.firstChild.classList.contains("border-b-0")===!0?(e.tab.firstChild.classList.add("border-b"),e.tab.firstChild.classList.remove("border-b-0")):e.tab.firstChild.classList.add("border-b"),e.container.classList.contains("block")===!0&&(e.container.classList.remove("block"),e.container.classList.add("hidden"))}getProgressBar(){const r=document.createElement("div");r.classList.add("progress");const s=document.createElement("div");return s.classList.add("bg-blue","leading-none","py-1","text-xs","text-center","text-white"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",r.appendChild(s),r}updateProgressBar(e,t){if(!e)return;const n=e.firstChild,r=`${t}%`;n.setAttribute("aria-valuenow",t),n.style.width=r,n.innerHTML=r}updateProgressBarUnknown(e){if(!e)return;const t=e.firstChild;e.classList.add("progress","bg-blue","leading-none","py-1","text-xs","text-center","text-white","block"),t.removeAttribute("aria-valuenow"),t.classList.add("w-full"),t.innerHTML=""}getInputGroup(e,t){if(!e)return;const n=document.createElement("div");n.classList.add("relative","items-stretch","w-full"),n.appendChild(e);const r=document.createElement("div");r.classList.add("-mr-1"),n.appendChild(r);for(let s=0;s<t.length;s++)r.appendChild(t[s]);return n}}ETe.rules=qet;const Het={html:mTe,bootstrap3:yTe,bootstrap4:vTe,bootstrap5:_Te,jqueryui:bTe,barebones:xTe,spectre:wTe,tailwind:ETe},Wet={".table-responsive .autocomplete-result-list":"position:relative%20!important",".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding-left:10px;margin-left:10px;border-left:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};class Dr{constructor(e,t={}){if(!(e instanceof Element))throw new Error("element should be an instance of Element");this.element=e,this.options=$i({},Dr.defaults.options,t),this.ready=!1,this.copyClipboard=null,this.schema=this.options.schema,this.template=this.options.template,this.translate=this.options.translate||Dr.defaults.translate,this.translateProperty=this.options.translateProperty||Dr.defaults.translateProperty,this.uuid=0,this.__data={};const n=this.options.theme||Dr.defaults.theme,r=Dr.defaults.themes[n];if(!r)throw new Error(`Unknown theme ${n}`);this.element.setAttribute("data-theme",n),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new r(this);const s=$i(Wet,this.getEditorsRules()),o=(l,u,c)=>c?this.addNewStyleRulesToShadowRoot(l,u,c):this.addNewStyleRules(l,u);if(!this.theme.options.disable_theme_rules){const l=oTe(this.element);o("default",s,l),typeof r.rules<"u"&&o(n,r.rules,l)}const a=Dr.defaults.iconlibs[this.options.iconlib||Dr.defaults.iconlib];a&&(this.iconlib=new a),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.promise=this.load()}async load(){const e=document.location.origin+document.location.pathname.toString(),t=new ZQe(this.options);t.onSchemaLoaded=a=>{this.trigger("schemaLoaded",a)},t.onAllSchemasLoaded=()=>{this.trigger("allSchemasLoaded")},this.expandSchema=a=>t.expandSchema(a),this.expandRefs=(a,l)=>t.expandRefs(a,l);const n=document.location.toString(),r=await t.load(this.schema,e,n),s=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{};this.validator=new hTe(this,null,s,Dr.defaults);const o=this.getEditorClass(r);this.root=this.createEditor(o,{jsoneditor:this,schema:r,required:!0,container:this.root_container}),this.root.preBuild(),this.root.build(),this.root.postBuild(),Eu(this.options,"startval")&&this.root.setValue(this.options.startval),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame(()=>{this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.trigger("ready"),this.trigger("change"))})}getValue(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}setValue(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(e),this}validate(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return arguments.length===1?this.validator.validate(e):this.validation_results}destroy(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)}on(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this}off(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];const n=[];for(let r=0;r<this.callbacks[e].length;r++)this.callbacks[e][r]!==t&&n.push(this.callbacks[e][r]);this.callbacks[e]=n}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this}trigger(e,t){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(let n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n].apply(this,[t]);return this}setOption(e,t){if(e==="show_errors")this.options.show_errors=t,this.onChange();else throw new Error(`Option ${e} must be set during instantiation and cannot be changed later`);return this}getEditorsRules(){const e=(t,n)=>n.rules?$i(t,n.rules):t;return Object.values(Dr.defaults.editors).reduce(e,{})}getEditorClass(e){let t;if(e=this.expandSchema(e),Dr.defaults.resolvers.find(n=>(t=n(e,this),t&&Dr.defaults.editors[t])),!t)throw new Error(`Unknown editor for schema ${JSON.stringify(e)}`);if(!Dr.defaults.editors[t])throw new Error(`Unknown editor ${t}`);return Dr.defaults.editors[t]}createEditor(e,t,n=1){return t=$i({},e.options||{},t),new e(t,Dr.defaults,n)}onChange(e){if(this.ready&&(e&&this.trigger(e.event,e.data),!this.firing_change))return this.firing_change=!0,window.requestAnimationFrame(()=>{this.firing_change=!1,this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.options.show_errors!=="never"?this.root.showValidationErrors(this.validation_results):this.root.showValidationErrors([]),this.trigger("change"))}),this}compileTemplate(e,t=Dr.defaults.template){let n;if(typeof t=="string"){if(!Dr.defaults.templates[t])throw new Error(`Unknown template engine ${t}`);if(n=Dr.defaults.templates[t](),!n)throw new Error(`Template engine ${t} missing required library.`)}else n=t;if(!n)throw new Error("No template engine set");if(!n.compile)throw new Error("Invalid template engine set");return n.compile(e)}_data(e,t,n){if(arguments.length===3){let r;e.hasAttribute(`data-jsoneditor-${t}`)?r=e.getAttribute(`data-jsoneditor-${t}`):(r=this.uuid++,e.setAttribute(`data-jsoneditor-${t}`,r)),this.__data[r]=n}else return e.hasAttribute(`data-jsoneditor-${t}`)?this.__data[e.getAttribute(`data-jsoneditor-${t}`)]:null}registerEditor(e){return this.editors=this.editors||{},this.editors[e.path]=e,this}unregisterEditor(e){return this.editors=this.editors||{},this.editors[e.path]=null,this}getEditor(e){if(this.editors)return this.editors[e]}watch(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this}unwatch(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;const n=[];for(let r=0;r<this.watchlist[e].length;r++)this.watchlist[e][r]!==t&&n.push(this.watchlist[e][r]);return this.watchlist[e]=n.length?n:null,this}notifyWatchers(e){if(!this.watchlist||!this.watchlist[e])return this;for(let t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()}isEnabled(){return!this.root||this.root.isEnabled()}enable(){this.root.enable()}disable(){this.root.disable()}setCopyClipboardContents(e){this.copyClipboard=e}getCopyClipboardContents(){return this.copyClipboard}addNewStyleRules(e,t){let n=document.querySelector(`#theme-${e}`);n||(n=document.createElement("style"),n.setAttribute("id",`theme-${e}`),n.appendChild(document.createTextNode("")),document.head.appendChild(n));const r=n.sheet?n.sheet:n.styleSheet,s=this.element.nodeName.toLowerCase();for(;r.cssRules.length>0;)r.deleteRule(0);Object.keys(t).forEach(o=>{const a=e==="default"?o:`${s}[data-theme="${e}"] ${o}`;r.insertRule?r.insertRule(a+" {"+decodeURIComponent(t[o])+"}",0):r.addRule&&r.addRule(a,decodeURIComponent(t[o]),0)})}addNewStyleRulesToShadowRoot(e,t,n){const r=this.element.nodeName.toLowerCase();let s="";Object.keys(t).forEach(a=>{const l=e==="default"?a:`${r}[data-theme="${e}"] ${a}`;s+=l+" {"+decodeURIComponent(t[a])+`}
`});const o=new CSSStyleSheet;o.replaceSync(s),n.adoptedStyleSheets=[...n.adoptedStyleSheets,o]}}Dr.defaults=Zm;Dr.AbstractEditor=Xa;Dr.AbstractTheme=Pf;Dr.AbstractIconLib=Of;Object.assign(Dr.defaults.themes,Het);Object.assign(Dr.defaults.editors,wR);Object.assign(Dr.defaults.templates,oet);Object.assign(Dr.defaults.iconlibs,Oet);var CTe={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,s){function o(u,c){if(!r[u]){if(!n[u]){var h=typeof LS=="function"&&LS;if(!c&&h)return h(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(p){return o(n[u][1][p]||p)},f,f.exports,t,n,r,s)}return r[u].exports}for(var a=typeof LS=="function"&&LS,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,n,r){},{}],2:[function(t,n,r){var s=t("typo-js");function o(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!o.aff_loading){o.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(o.aff_data=u.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},u.send(null)}if(!o.dic_loading){o.dic_loading=!0;var c=new XMLHttpRequest;c.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),c.onload=function(){c.readyState===4&&c.status===200&&(o.dic_data=c.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},c.send(null)}var h='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(p){var m=p.peek(),y="";if(h.includes(m))return p.next(),null;for(;(m=p.peek())!=null&&!h.includes(m);)y+=m,p.next();return o.typo&&!o.typo.check(y)?"spell-error":null}},f=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(f,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}o.num_loaded=0,o.aff_loading=!1,o.dic_loading=!1,o.aff_data="",o.dic_data="",o.typo,n.exports=o},{"typo-js":16}],3:[function(t,n,r){(function(s){function o(a,l){clearTimeout(l.timeout),s.off(window,"mouseup",l.hurry),s.off(window,"keyup",l.hurry)}s.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(o(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,c){function h(){u.display.wrapper.offsetHeight?(o(0,c),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):c.timeout=setTimeout(h,c.delay)}c.timeout=setTimeout(h,c.delay),c.hurry=function(){clearTimeout(c.timeout),c.timeout=setTimeout(h,50)},s.on(window,"mouseup",c.hurry),s.on(window,"keyup",c.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(t,n,r){(function(s){s.defineOption("fullScreen",!1,function(o,a,l){l==s.Init&&(l=!1),!l!=!a&&(a?function(u){var c=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:c.style.width,height:c.style.height},c.style.width="",c.style.height="auto",c.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(o):function(u){var c=u.getWrapperElement();c.className=c.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var h=u.state.fullScreenRestore;c.style.width=h.width,c.style.height=h.height,window.scrollTo(h.scrollLeft,h.scrollTop),u.refresh()}(o))})})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(t,n,r){(function(s){function o(h){h.state.placeholder&&(h.state.placeholder.parentNode.removeChild(h.state.placeholder),h.state.placeholder=null)}function a(h){o(h);var d=h.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=h.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var f=h.getOption("placeholder");typeof f=="string"&&(f=document.createTextNode(f)),d.appendChild(f),h.display.lineSpace.insertBefore(d,h.display.lineSpace.firstChild)}function l(h){c(h)&&a(h)}function u(h){var d=h.getWrapperElement(),f=c(h);d.className=d.className.replace(" CodeMirror-empty","")+(f?" CodeMirror-empty":""),f?a(h):o(h)}function c(h){return h.lineCount()===1&&h.getLine(0)===""}s.defineOption("placeholder","",function(h,d,f){var p=f&&f!=s.Init;if(d&&!p)h.on("blur",l),h.on("change",u),h.on("swapDoc",u),s.on(h.getInputField(),"compositionupdate",h.state.placeholderCompose=function(){(function(y){setTimeout(function(){var v=!1;if(y.lineCount()==1){var b=y.getInputField();v=b.nodeName=="TEXTAREA"?!y.getLine(0).length:!/[^\u200b]/.test(b.querySelector(".CodeMirror-line").textContent)}v?a(y):o(y)},20)})(h)}),u(h);else if(!d&&p){h.off("blur",l),h.off("change",u),h.off("swapDoc",u),s.off(h.getInputField(),"compositionupdate",h.state.placeholderCompose),o(h);var m=h.getWrapperElement();m.className=m.className.replace(" CodeMirror-empty","")}d&&!h.hasFocus()&&l(h)})})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(t,n,r){(function(s){var o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(c,h){var d=h.line,f=0,p=0,m=o.exec(c.getLine(d)),y=m[1];do{var v=d+(f+=1),b=c.getLine(v),x=o.exec(b);if(x){var w=x[1],C=parseInt(m[3],10)+f-p,D=parseInt(x[3],10),R=D;if(y!==w||isNaN(D)){if(y.length>w.length||y.length<w.length&&f===1)return;p+=1}else C===D&&(R=D+1),C>D&&(R=C+1),c.replaceRange(b.replace(o,w+R+x[4]+x[5]),{line:v,ch:0},{line:v,ch:b.length})}}while(x)}s.commands.newlineAndIndentContinueMarkdownList=function(c){if(c.getOption("disableInput"))return s.Pass;for(var h=c.listSelections(),d=[],f=0;f<h.length;f++){var p=h[f].head,m=c.getStateAfter(p.line),y=s.innerMode(c.getMode(),m);if(y.mode.name!=="markdown"&&y.mode.helperType!=="markdown")return void c.execCommand("newlineAndIndent");var v=(m=y.state).list!==!1,b=m.quote!==0,x=c.getLine(p.line),w=o.exec(x),C=/^\s*$/.test(x.slice(0,p.ch));if(!h[f].empty()||!v&&!b||!w||C)return void c.execCommand("newlineAndIndent");if(a.test(x)){var D=b&&/>\s*$/.test(x),R=!/>\s*$/.test(x);(D||R)&&c.replaceRange("",{line:p.line,ch:0},{line:p.line,ch:p.ch+1}),d[f]=`
`}else{var A=w[1],L=w[5],O=!(l.test(w[2])||w[2].indexOf(">")>=0),$=O?parseInt(w[3],10)+1+w[4]:w[2].replace("x"," ");d[f]=`
`+A+$+L,O&&u(c,p)}}c.replaceSelections(d)}})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(t,n,r){(function(s){s.overlayMode=function(o,a,l){return{startState:function(){return{base:s.startState(o),overlay:s.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:s.copyState(o,u.base),overlay:s.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,c){return(u!=c.streamSeen||Math.min(c.basePos,c.overlayPos)<u.start)&&(c.streamSeen=u,c.basePos=c.overlayPos=u.start),u.start==c.basePos&&(c.baseCur=o.token(u,c.base),c.basePos=u.pos),u.start==c.overlayPos&&(u.pos=u.start,c.overlayCur=a.token(u,c.overlay),c.overlayPos=u.pos),u.pos=Math.min(c.basePos,c.overlayPos),c.overlayCur==null?c.baseCur:c.baseCur!=null&&c.overlay.combineTokens||l&&c.overlay.combineTokens==null?c.baseCur+" "+c.overlayCur:c.overlayCur},indent:o.indent&&function(u,c,h){return o.indent(u.base,c,h)},electricChars:o.electricChars,innerMode:function(u){return{state:u.base,mode:o}},blankLine:function(u){var c,h;return o.blankLine&&(c=o.blankLine(u.base)),a.blankLine&&(h=a.blankLine(u.overlay)),h==null?c:l&&c!=null?c+" "+h:h}}}})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(t,n,r){(function(s){var o,a,l=s.Pos;function u(w,C){for(var D=function(L){var O=L.flags;return O??(L.ignoreCase?"i":"")+(L.global?"g":"")+(L.multiline?"m":"")}(w),R=D,A=0;A<C.length;A++)R.indexOf(C.charAt(A))==-1&&(R+=C.charAt(A));return D==R?w:new RegExp(w.source,R)}function c(w){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(w.source)}function h(w,C,D){C=u(C,"g");for(var R=D.line,A=D.ch,L=w.lastLine();R<=L;R++,A=0){C.lastIndex=A;var O=w.getLine(R),$=C.exec(O);if($)return{from:l(R,$.index),to:l(R,$.index+$[0].length),match:$}}}function d(w,C,D){if(!c(C))return h(w,C,D);C=u(C,"gm");for(var R,A=1,L=D.line,O=w.lastLine();L<=O;){for(var $=0;$<A&&!(L>O);$++){var q=w.getLine(L++);R=R==null?q:R+`
`+q}A*=2,C.lastIndex=D.ch;var M=C.exec(R);if(M){var F=R.slice(0,M.index).split(`
`),N=M[0].split(`
`),B=D.line+F.length-1,W=F[F.length-1].length;return{from:l(B,W),to:l(B+N.length-1,N.length==1?W+N[0].length:N[N.length-1].length),match:M}}}}function f(w,C,D){for(var R,A=0;A<=w.length;){C.lastIndex=A;var L=C.exec(w);if(!L)break;var O=L.index+L[0].length;if(O>w.length-D)break;(!R||O>R.index+R[0].length)&&(R=L),A=L.index+1}return R}function p(w,C,D){C=u(C,"g");for(var R=D.line,A=D.ch,L=w.firstLine();R>=L;R--,A=-1){var O=w.getLine(R),$=f(O,C,A<0?0:O.length-A);if($)return{from:l(R,$.index),to:l(R,$.index+$[0].length),match:$}}}function m(w,C,D){if(!c(C))return p(w,C,D);C=u(C,"gm");for(var R,A=1,L=w.getLine(D.line).length-D.ch,O=D.line,$=w.firstLine();O>=$;){for(var q=0;q<A&&O>=$;q++){var M=w.getLine(O--);R=R==null?M:M+`
`+R}A*=2;var F=f(R,C,L);if(F){var N=R.slice(0,F.index).split(`
`),B=F[0].split(`
`),W=O+N.length,K=N[N.length-1].length;return{from:l(W,K),to:l(W+B.length-1,B.length==1?K+B[0].length:B[B.length-1].length),match:F}}}}function y(w,C,D,R){if(w.length==C.length)return D;for(var A=0,L=D+Math.max(0,w.length-C.length);;){if(A==L)return A;var O=A+L>>1,$=R(w.slice(0,O)).length;if($==D)return O;$>D?L=O:A=O+1}}function v(w,C,D,R){if(!C.length)return null;var A=R?o:a,L=A(C).split(/\r|\n\r?/);e:for(var O=D.line,$=D.ch,q=w.lastLine()+1-L.length;O<=q;O++,$=0){var M=w.getLine(O).slice($),F=A(M);if(L.length==1){var N=F.indexOf(L[0]);if(N==-1)continue e;return D=y(M,F,N,A)+$,{from:l(O,y(M,F,N,A)+$),to:l(O,y(M,F,N+L[0].length,A)+$)}}var B=F.length-L[0].length;if(F.slice(B)==L[0]){for(var W=1;W<L.length-1;W++)if(A(w.getLine(O+W))!=L[W])continue e;var K=w.getLine(O+L.length-1),ee=A(K),te=L[L.length-1];if(ee.slice(0,te.length)==te)return{from:l(O,y(M,F,B,A)+$),to:l(O+L.length-1,y(K,ee,te.length,A))}}}}function b(w,C,D,R){if(!C.length)return null;var A=R?o:a,L=A(C).split(/\r|\n\r?/);e:for(var O=D.line,$=D.ch,q=w.firstLine()-1+L.length;O>=q;O--,$=-1){var M=w.getLine(O);$>-1&&(M=M.slice(0,$));var F=A(M);if(L.length==1){var N=F.lastIndexOf(L[0]);if(N==-1)continue e;return{from:l(O,y(M,F,N,A)),to:l(O,y(M,F,N+L[0].length,A))}}var B=L[L.length-1];if(F.slice(0,B.length)==B){var W=1;for(D=O-L.length+1;W<L.length-1;W++)if(A(w.getLine(D+W))!=L[W])continue e;var K=w.getLine(O+1-L.length),ee=A(K);if(ee.slice(ee.length-L[0].length)==L[0])return{from:l(O+1-L.length,y(K,ee,K.length-L[0].length,A)),to:l(O,y(M,F,B.length,A))}}}}function x(w,C,D,R){var A;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=w,D=D?w.clipPos(D):l(0,0),this.pos={from:D,to:D},typeof R=="object"?A=R.caseFold:(A=R,R=null),typeof C=="string"?(A==null&&(A=!1),this.matches=function(L,O){return(L?b:v)(w,C,O,A)}):(C=u(C,"gm"),R&&R.multiline===!1?this.matches=function(L,O){return(L?p:h)(w,C,O)}:this.matches=function(L,O){return(L?m:d)(w,C,O)})}String.prototype.normalize?(o=function(w){return w.normalize("NFD").toLowerCase()},a=function(w){return w.normalize("NFD")}):(o=function(w){return w.toLowerCase()},a=function(w){return w}),x.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(w){var C=this.doc.clipPos(w?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(C=l(C.line,C.ch),w?(C.ch--,C.ch<0&&(C.line--,C.ch=(this.doc.getLine(C.line)||"").length)):(C.ch++,C.ch>(this.doc.getLine(C.line)||"").length&&(C.ch=0,C.line++)),s.cmpPos(C,this.doc.clipPos(C))!=0))return this.atOccurrence=!1;var D=this.matches(w,C);if(this.afterEmptyMatch=D&&s.cmpPos(D.from,D.to)==0,D)return this.pos=D,this.atOccurrence=!0,this.pos.match||!0;var R=l(w?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:R,to:R},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(w,C){if(this.atOccurrence){var D=s.splitLines(w);this.doc.replaceRange(D,this.pos.from,this.pos.to,C),this.pos.to=l(this.pos.from.line+D.length-1,D[D.length-1].length+(D.length==1?this.pos.from.ch:0))}}},s.defineExtension("getSearchCursor",function(w,C,D){return new x(this.doc,w,C,D)}),s.defineDocExtension("getSearchCursor",function(w,C,D){return new x(this,w,C,D)}),s.defineExtension("selectMatches",function(w,C){for(var D=[],R=this.getSearchCursor(w,this.getCursor("from"),C);R.findNext()&&!(s.cmpPos(R.to(),this.getCursor("to"))>0);)D.push({anchor:R.from(),head:R.to()});D.length&&this.setSelections(D,0)})})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(t,n,r){(function(s){function o(f){f.state.markedSelection&&f.operation(function(){(function(p){if(!p.somethingSelected())return h(p);if(p.listSelections().length>1)return d(p);var m=p.getCursor("start"),y=p.getCursor("end"),v=p.state.markedSelection;if(!v.length)return c(p,m,y);var b=v[0].find(),x=v[v.length-1].find();if(!b||!x||y.line-m.line<=8||u(m,x.to)>=0||u(y,b.from)<=0)return d(p);for(;u(m,b.from)>0;)v.shift().clear(),b=v[0].find();for(u(m,b.from)<0&&(b.to.line-m.line<8?(v.shift().clear(),c(p,m,b.to,0)):c(p,m,b.from,0));u(y,x.to)<0;)v.pop().clear(),x=v[v.length-1].find();u(y,x.to)>0&&(y.line-x.from.line<8?(v.pop().clear(),c(p,x.from,y)):c(p,x.to,y))})(f)})}function a(f){f.state.markedSelection&&f.state.markedSelection.length&&f.operation(function(){h(f)})}s.defineOption("styleSelectedText",!1,function(f,p,m){var y=m&&m!=s.Init;p&&!y?(f.state.markedSelection=[],f.state.markedSelectionStyle=typeof p=="string"?p:"CodeMirror-selectedtext",d(f),f.on("cursorActivity",o),f.on("change",a)):!p&&y&&(f.off("cursorActivity",o),f.off("change",a),h(f),f.state.markedSelection=f.state.markedSelectionStyle=null)});var l=s.Pos,u=s.cmpPos;function c(f,p,m,y){if(u(p,m)!=0)for(var v=f.state.markedSelection,b=f.state.markedSelectionStyle,x=p.line;;){var w=x==p.line?p:l(x,0),C=x+8,D=C>=m.line,R=D?m:l(C,0),A=f.markText(w,R,{className:b});if(y==null?v.push(A):v.splice(y++,0,A),D)break;x=C}}function h(f){for(var p=f.state.markedSelection,m=0;m<p.length;++m)p[m].clear();p.length=0}function d(f){h(f);for(var p=f.listSelections(),m=0;m<p.length;m++)c(f,p[m].from(),p[m].to())}})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(t,n,r){(function(s,o){typeof r=="object"&&n!==void 0?n.exports=o():(s=s||self).CodeMirror=o()})(this,function(){var s=navigator.userAgent,o=navigator.platform,a=/gecko\/\d/i.test(s),l=/MSIE \d/.test(s),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),c=/Edge\/(\d+)/.exec(s),h=l||u||c,d=h&&(l?document.documentMode||6:+(c||u)[1]),f=!c&&/WebKit\//.test(s),p=f&&/Qt\/\d+\.\d+/.test(s),m=!c&&/Chrome\/(\d+)/.exec(s),y=m&&+m[1],v=/Opera\//.test(s),b=/Apple Computer/.test(navigator.vendor),x=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),w=/PhantomJS/.test(s),C=b&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),D=/Android/.test(s),R=C||D||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),A=C||/Mac/.test(o),L=/\bCrOS\b/.test(s),O=/win/i.test(o),$=v&&s.match(/Version\/(\d*\.\d*)/);$&&($=Number($[1])),$&&$>=15&&(v=!1,f=!0);var q=A&&(p||v&&($==null||$<12.11)),M=a||h&&d>=9;function F(g){return new RegExp("(^|\\s)"+g+"(?:$|\\s)\\s*")}var N,B=function(g,_){var S=g.className,E=F(_).exec(S);if(E){var T=S.slice(E.index+E[0].length);g.className=S.slice(0,E.index)+(T?E[1]+T:"")}};function W(g){for(var _=g.childNodes.length;_>0;--_)g.removeChild(g.firstChild);return g}function K(g,_){return W(g).appendChild(_)}function ee(g,_,S,E){var T=document.createElement(g);if(S&&(T.className=S),E&&(T.style.cssText=E),typeof _=="string")T.appendChild(document.createTextNode(_));else if(_)for(var P=0;P<_.length;++P)T.appendChild(_[P]);return T}function te(g,_,S,E){var T=ee(g,_,S,E);return T.setAttribute("role","presentation"),T}function le(g,_){if(_.nodeType==3&&(_=_.parentNode),g.contains)return g.contains(_);do if(_.nodeType==11&&(_=_.host),_==g)return!0;while(_=_.parentNode)}function Q(g){var _;try{_=g.activeElement}catch{_=g.body||null}for(;_&&_.shadowRoot&&_.shadowRoot.activeElement;)_=_.shadowRoot.activeElement;return _}function z(g,_){var S=g.className;F(_).test(S)||(g.className+=(S?" ":"")+_)}function J(g,_){for(var S=g.split(" "),E=0;E<S.length;E++)S[E]&&!F(S[E]).test(_)&&(_+=" "+S[E]);return _}N=document.createRange?function(g,_,S,E){var T=document.createRange();return T.setEnd(E||g,S),T.setStart(g,_),T}:function(g,_,S){var E=document.body.createTextRange();try{E.moveToElementText(g.parentNode)}catch{return E}return E.collapse(!0),E.moveEnd("character",S),E.moveStart("character",_),E};var ye=function(g){g.select()};function Ne(g){return g.display.wrapper.ownerDocument}function Ge(g){return Ne(g).defaultView}function rt(g){var _=Array.prototype.slice.call(arguments,1);return function(){return g.apply(null,_)}}function Be(g,_,S){for(var E in _||(_={}),g)!g.hasOwnProperty(E)||S===!1&&_.hasOwnProperty(E)||(_[E]=g[E]);return _}function ze(g,_,S,E,T){_==null&&(_=g.search(/[^\s\u00a0]/))==-1&&(_=g.length);for(var P=E||0,j=T||0;;){var U=g.indexOf("	",P);if(U<0||U>=_)return j+(_-P);j+=U-P,j+=S-j%S,P=U+1}}C?ye=function(g){g.selectionStart=0,g.selectionEnd=g.value.length}:h&&(ye=function(g){try{g.select()}catch{}});var lt=function(){this.id=null,this.f=null,this.time=0,this.handler=rt(this.onTimeout,this)};function xt(g,_){for(var S=0;S<g.length;++S)if(g[S]==_)return S;return-1}lt.prototype.onTimeout=function(g){g.id=0,g.time<=+new Date?g.f():setTimeout(g.handler,g.time-+new Date)},lt.prototype.set=function(g,_){this.f=_;var S=+new Date+g;(!this.id||S<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,g),this.time=S)};var Mt={toString:function(){return"CodeMirror.Pass"}},Ct={scroll:!1},gi={origin:"*mouse"},Wt={origin:"+move"};function Qi(g,_,S){for(var E=0,T=0;;){var P=g.indexOf("	",E);P==-1&&(P=g.length);var j=P-E;if(P==g.length||T+j>=_)return E+Math.min(j,_-T);if(T+=P-E,E=P+1,(T+=S-T%S)>=_)return E}}var He=[""];function ge(g){for(;He.length<=g;)He.push(se(He)+" ");return He[g]}function se(g){return g[g.length-1]}function re(g,_){for(var S=[],E=0;E<g.length;E++)S[E]=_(g[E],E);return S}function pe(){}function I(g,_){var S;return Object.create?S=Object.create(g):(pe.prototype=g,S=new pe),_&&Be(_,S),S}var G=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(g){return/\w/.test(g)||g>""&&(g.toUpperCase()!=g.toLowerCase()||G.test(g))}function ie(g,_){return _?!!(_.source.indexOf("\\w")>-1&&Z(g))||_.test(g):Z(g)}function me(g){for(var _ in g)if(g.hasOwnProperty(_)&&g[_])return!1;return!0}var _e=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function xe(g){return g.charCodeAt(0)>=768&&_e.test(g)}function V(g,_,S){for(;(S<0?_>0:_<g.length)&&xe(g.charAt(_));)_+=S;return _}function oe(g,_,S){for(var E=_>S?-1:1;;){if(_==S)return _;var T=(_+S)/2,P=E<0?Math.ceil(T):Math.floor(T);if(P==_)return g(P)?_:S;g(P)?S=P:_=P+E}}var fe=null;function de(g,_,S){var E;fe=null;for(var T=0;T<g.length;++T){var P=g[T];if(P.from<_&&P.to>_)return T;P.to==_&&(P.from!=P.to&&S=="before"?E=T:fe=T),P.from==_&&(P.from!=P.to&&S!="before"?E=T:fe=T)}return E??fe}var Te=function(){var g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,_=/[stwN]/,S=/[LRr]/,E=/[Lb1n]/,T=/[1n]/;function P(j,U,X){this.level=j,this.from=U,this.to=X}return function(j,U){var X=U=="ltr"?"L":"R";if(j.length==0||U=="ltr"&&!g.test(j))return!1;for(var Y,ce=j.length,he=[],we=0;we<ce;++we)he.push((Y=j.charCodeAt(we))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Y):1424<=Y&&Y<=1524?"R":1536<=Y&&Y<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Y-1536):1774<=Y&&Y<=2220?"r":8192<=Y&&Y<=8203?"w":Y==8204?"b":"L");for(var be=0,Fe=X;be<ce;++be){var $e=he[be];$e=="m"?he[be]=Fe:Fe=$e}for(var Oe=0,Ue=X;Oe<ce;++Oe){var et=he[Oe];et=="1"&&Ue=="r"?he[Oe]="n":S.test(et)&&(Ue=et,et=="r"&&(he[Oe]="R"))}for(var Ze=1,gt=he[0];Ze<ce-1;++Ze){var ft=he[Ze];ft=="+"&&gt=="1"&&he[Ze+1]=="1"?he[Ze]="1":ft!=","||gt!=he[Ze+1]||gt!="1"&&gt!="n"||(he[Ze]=gt),gt=ft}for(var mt=0;mt<ce;++mt){var di=he[mt];if(di==",")he[mt]="N";else if(di=="%"){var Dt=void 0;for(Dt=mt+1;Dt<ce&&he[Dt]=="%";++Dt);for(var Vi=mt&&he[mt-1]=="!"||Dt<ce&&he[Dt]=="1"?"1":"N",ai=mt;ai<Dt;++ai)he[ai]=Vi;mt=Dt-1}}for(var gn=0,Un=X;gn<ce;++gn){var mn=he[gn];Un=="L"&&mn=="1"?he[gn]="L":S.test(mn)&&(Un=mn)}for(var tn=0;tn<ce;++tn)if(_.test(he[tn])){var yn=void 0;for(yn=tn+1;yn<ce&&_.test(he[yn]);++yn);for(var Pi=(tn?he[tn-1]:X)=="L",qn=Pi==((yn<ce?he[yn]:X)=="L")?Pi?"L":"R":X,Ai=tn;Ai<yn;++Ai)he[Ai]=qn;tn=yn-1}for(var an,Bi=[],Dn=0;Dn<ce;)if(E.test(he[Dn])){var wo=Dn;for(++Dn;Dn<ce&&E.test(he[Dn]);++Dn);Bi.push(new P(0,wo,Dn))}else{var Vn=Dn,io=Bi.length,no=U=="rtl"?1:0;for(++Dn;Dn<ce&&he[Dn]!="L";++Dn);for(var Br=Vn;Br<Dn;)if(T.test(he[Br])){Vn<Br&&(Bi.splice(io,0,new P(1,Vn,Br)),io+=no);var Eo=Br;for(++Br;Br<Dn&&T.test(he[Br]);++Br);Bi.splice(io,0,new P(2,Eo,Br)),io+=no,Vn=Br}else++Br;Vn<Dn&&Bi.splice(io,0,new P(1,Vn,Dn))}return U=="ltr"&&(Bi[0].level==1&&(an=j.match(/^\s+/))&&(Bi[0].from=an[0].length,Bi.unshift(new P(0,0,an[0].length))),se(Bi).level==1&&(an=j.match(/\s+$/))&&(se(Bi).to-=an[0].length,Bi.push(new P(0,ce-an[0].length,ce)))),U=="rtl"?Bi.reverse():Bi}}();function Ae(g,_){var S=g.order;return S==null&&(S=g.order=Te(g.text,_)),S}var Se=[],Re=function(g,_,S){if(g.addEventListener)g.addEventListener(_,S,!1);else if(g.attachEvent)g.attachEvent("on"+_,S);else{var E=g._handlers||(g._handlers={});E[_]=(E[_]||Se).concat(S)}};function Pe(g,_){return g._handlers&&g._handlers[_]||Se}function We(g,_,S){if(g.removeEventListener)g.removeEventListener(_,S,!1);else if(g.detachEvent)g.detachEvent("on"+_,S);else{var E=g._handlers,T=E&&E[_];if(T){var P=xt(T,S);P>-1&&(E[_]=T.slice(0,P).concat(T.slice(P+1)))}}}function st(g,_){var S=Pe(g,_);if(S.length)for(var E=Array.prototype.slice.call(arguments,2),T=0;T<S.length;++T)S[T].apply(null,E)}function ot(g,_,S){return typeof _=="string"&&(_={type:_,preventDefault:function(){this.defaultPrevented=!0}}),st(g,S||_.type,g,_),ti(_)||_.codemirrorIgnore}function It(g){var _=g._handlers&&g._handlers.cursorActivity;if(_)for(var S=g.curOp.cursorActivityHandlers||(g.curOp.cursorActivityHandlers=[]),E=0;E<_.length;++E)xt(S,_[E])==-1&&S.push(_[E])}function ct(g,_){return Pe(g,_).length>0}function Ht(g){g.prototype.on=function(_,S){Re(this,_,S)},g.prototype.off=function(_,S){We(this,_,S)}}function Yt(g){g.preventDefault?g.preventDefault():g.returnValue=!1}function St(g){g.stopPropagation?g.stopPropagation():g.cancelBubble=!0}function ti(g){return g.defaultPrevented!=null?g.defaultPrevented:g.returnValue==0}function Rt(g){Yt(g),St(g)}function xi(g){return g.target||g.srcElement}function Mi(g){var _=g.which;return _==null&&(1&g.button?_=1:2&g.button?_=3:4&g.button&&(_=2)),A&&g.ctrlKey&&_==1&&(_=3),_}var on,en,ri=function(){if(h&&d<9)return!1;var g=ee("div");return"draggable"in g||"dragDrop"in g}();function Ot(g){if(on==null){var _=ee("span","​");K(g,ee("span",[_,document.createTextNode("x")])),g.firstChild.offsetHeight!=0&&(on=_.offsetWidth<=1&&_.offsetHeight>2&&!(h&&d<8))}var S=on?ee("span","​"):ee("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return S.setAttribute("cm-text",""),S}function Si(g){if(en!=null)return en;var _=K(g,document.createTextNode("AخA")),S=N(_,0,1).getBoundingClientRect(),E=N(_,1,2).getBoundingClientRect();return W(g),!(!S||S.left==S.right)&&(en=E.right-S.right<3)}var Bn,En=`

b`.split(/\n/).length!=3?function(g){for(var _=0,S=[],E=g.length;_<=E;){var T=g.indexOf(`
`,_);T==-1&&(T=g.length);var P=g.slice(_,g.charAt(T-1)=="\r"?T-1:T),j=P.indexOf("\r");j!=-1?(S.push(P.slice(0,j)),_+=j+1):(S.push(P),_=T+1)}return S}:function(g){return g.split(/\r\n?|\n/)},fn=window.getSelection?function(g){try{return g.selectionStart!=g.selectionEnd}catch{return!1}}:function(g){var _;try{_=g.ownerDocument.selection.createRange()}catch{}return!(!_||_.parentElement()!=g)&&_.compareEndPoints("StartToEnd",_)!=0},hs="oncopy"in(Bn=ee("div"))||(Bn.setAttribute("oncopy","return;"),typeof Bn.oncopy=="function"),pn=null,zs={},Ii={};function fo(g,_){arguments.length>2&&(_.dependencies=Array.prototype.slice.call(arguments,2)),zs[g]=_}function ve(g){if(typeof g=="string"&&Ii.hasOwnProperty(g))g=Ii[g];else if(g&&typeof g.name=="string"&&Ii.hasOwnProperty(g.name)){var _=Ii[g.name];typeof _=="string"&&(_={name:_}),(g=I(_,g)).name=_.name}else{if(typeof g=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(g))return ve("application/xml");if(typeof g=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(g))return ve("application/json")}return typeof g=="string"?{name:g}:g||{name:"null"}}function ke(g,_){_=ve(_);var S=zs[_.name];if(!S)return ke(g,"text/plain");var E=S(g,_);if(it.hasOwnProperty(_.name)){var T=it[_.name];for(var P in T)T.hasOwnProperty(P)&&(E.hasOwnProperty(P)&&(E["_"+P]=E[P]),E[P]=T[P])}if(E.name=_.name,_.helperType&&(E.helperType=_.helperType),_.modeProps)for(var j in _.modeProps)E[j]=_.modeProps[j];return E}var it={};function Ke(g,_){Be(_,it.hasOwnProperty(g)?it[g]:it[g]={})}function Et(g,_){if(_===!0)return _;if(g.copyState)return g.copyState(_);var S={};for(var E in _){var T=_[E];T instanceof Array&&(T=T.concat([])),S[E]=T}return S}function Qt(g,_){for(var S;g.innerMode&&(S=g.innerMode(_))&&S.mode!=g;)_=S.state,g=S.mode;return S||{mode:g,state:_}}function Ti(g,_,S){return!g.startState||g.startState(_,S)}var bt=function(g,_,S){this.pos=this.start=0,this.string=g,this.tabSize=_||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=S};function Qe(g,_){if((_-=g.first)<0||_>=g.size)throw new Error("There is no line "+(_+g.first)+" in the document.");for(var S=g;!S.lines;)for(var E=0;;++E){var T=S.children[E],P=T.chunkSize();if(_<P){S=T;break}_-=P}return S.lines[_]}function _i(g,_,S){var E=[],T=_.line;return g.iter(_.line,S.line+1,function(P){var j=P.text;T==S.line&&(j=j.slice(0,S.ch)),T==_.line&&(j=j.slice(_.ch)),E.push(j),++T}),E}function bi(g,_,S){var E=[];return g.iter(_,S,function(T){E.push(T.text)}),E}function Bt(g,_){var S=_-g.height;if(S)for(var E=g;E;E=E.parent)E.height+=S}function zt(g){if(g.parent==null)return null;for(var _=g.parent,S=xt(_.lines,g),E=_.parent;E;_=E,E=E.parent)for(var T=0;E.children[T]!=_;++T)S+=E.children[T].chunkSize();return S+_.first}function jn(g,_){var S=g.first;e:do{for(var E=0;E<g.children.length;++E){var T=g.children[E],P=T.height;if(_<P){g=T;continue e}_-=P,S+=T.chunkSize()}return S}while(!g.lines);for(var j=0;j<g.lines.length;++j){var U=g.lines[j].height;if(_<U)break;_-=U}return S+j}function Ar(g,_){return _>=g.first&&_<g.first+g.size}function ci(g,_){return String(g.lineNumberFormatter(_+g.firstLineNumber))}function Xe(g,_,S){if(S===void 0&&(S=null),!(this instanceof Xe))return new Xe(g,_,S);this.line=g,this.ch=_,this.sticky=S}function yt(g,_){return g.line-_.line||g.ch-_.ch}function cn(g,_){return g.sticky==_.sticky&&yt(g,_)==0}function Zn(g){return Xe(g.line,g.ch)}function zn(g,_){return yt(g,_)<0?_:g}function Kn(g,_){return yt(g,_)<0?g:_}function Pn(g,_){return Math.max(g.first,Math.min(_,g.first+g.size-1))}function jt(g,_){if(_.line<g.first)return Xe(g.first,0);var S=g.first+g.size-1;return _.line>S?Xe(S,Qe(g,S).text.length):function(E,T){var P=E.ch;return P==null||P>T?Xe(E.line,T):P<0?Xe(E.line,0):E}(_,Qe(g,_.line).text.length)}function Yr(g,_){for(var S=[],E=0;E<_.length;E++)S[E]=jt(g,_[E]);return S}bt.prototype.eol=function(){return this.pos>=this.string.length},bt.prototype.sol=function(){return this.pos==this.lineStart},bt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},bt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},bt.prototype.eat=function(g){var _=this.string.charAt(this.pos);if(typeof g=="string"?_==g:_&&(g.test?g.test(_):g(_)))return++this.pos,_},bt.prototype.eatWhile=function(g){for(var _=this.pos;this.eat(g););return this.pos>_},bt.prototype.eatSpace=function(){for(var g=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>g},bt.prototype.skipToEnd=function(){this.pos=this.string.length},bt.prototype.skipTo=function(g){var _=this.string.indexOf(g,this.pos);if(_>-1)return this.pos=_,!0},bt.prototype.backUp=function(g){this.pos-=g},bt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ze(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ze(this.string,this.lineStart,this.tabSize):0)},bt.prototype.indentation=function(){return ze(this.string,null,this.tabSize)-(this.lineStart?ze(this.string,this.lineStart,this.tabSize):0)},bt.prototype.match=function(g,_,S){if(typeof g!="string"){var E=this.string.slice(this.pos).match(g);return E&&E.index>0?null:(E&&_!==!1&&(this.pos+=E[0].length),E)}var T=function(P){return S?P.toLowerCase():P};if(T(this.string.substr(this.pos,g.length))==T(g))return _!==!1&&(this.pos+=g.length),!0},bt.prototype.current=function(){return this.string.slice(this.start,this.pos)},bt.prototype.hideFirstChars=function(g,_){this.lineStart+=g;try{return _()}finally{this.lineStart-=g}},bt.prototype.lookAhead=function(g){var _=this.lineOracle;return _&&_.lookAhead(g)},bt.prototype.baseToken=function(){var g=this.lineOracle;return g&&g.baseToken(this.pos)};var gs=function(g,_){this.state=g,this.lookAhead=_},ms=function(g,_,S,E){this.state=_,this.doc=g,this.line=S,this.maxLookAhead=E||0,this.baseTokens=null,this.baseTokenPos=1};function Js(g,_,S,E){var T=[g.state.modeGen],P={};oa(g,_.text,g.doc.mode,S,function(Y,ce){return T.push(Y,ce)},P,E);for(var j=S.state,U=function(Y){S.baseTokens=T;var ce=g.state.overlays[Y],he=1,we=0;S.state=!0,oa(g,_.text,ce.mode,S,function(be,Fe){for(var $e=he;we<be;){var Oe=T[he];Oe>be&&T.splice(he,1,be,T[he+1],Oe),he+=2,we=Math.min(be,Oe)}if(Fe)if(ce.opaque)T.splice($e,he-$e,be,"overlay "+Fe),he=$e+2;else for(;$e<he;$e+=2){var Ue=T[$e+1];T[$e+1]=(Ue?Ue+" ":"")+"overlay "+Fe}},P),S.state=j,S.baseTokens=null,S.baseTokenPos=1},X=0;X<g.state.overlays.length;++X)U(X);return{styles:T,classes:P.bgClass||P.textClass?P:null}}function po(g,_,S){if(!_.styles||_.styles[0]!=g.state.modeGen){var E=na(g,zt(_)),T=_.text.length>g.options.maxHighlightLength&&Et(g.doc.mode,E.state),P=Js(g,_,E);T&&(E.state=T),_.stateAfter=E.save(!T),_.styles=P.styles,P.classes?_.styleClasses=P.classes:_.styleClasses&&(_.styleClasses=null),S===g.doc.highlightFrontier&&(g.doc.modeFrontier=Math.max(g.doc.modeFrontier,++g.doc.highlightFrontier))}return _.styles}function na(g,_,S){var E=g.doc,T=g.display;if(!E.mode.startState)return new ms(E,!0,_);var P=function(X,Y,ce){for(var he,we,be=X.doc,Fe=ce?-1:Y-(X.doc.mode.innerMode?1e3:100),$e=Y;$e>Fe;--$e){if($e<=be.first)return be.first;var Oe=Qe(be,$e-1),Ue=Oe.stateAfter;if(Ue&&(!ce||$e+(Ue instanceof gs?Ue.lookAhead:0)<=be.modeFrontier))return $e;var et=ze(Oe.text,null,X.options.tabSize);(we==null||he>et)&&(we=$e-1,he=et)}return we}(g,_,S),j=P>E.first&&Qe(E,P-1).stateAfter,U=j?ms.fromSaved(E,j,P):new ms(E,Ti(E.mode),P);return E.iter(P,_,function(X){Za(g,X.text,U);var Y=U.line;X.stateAfter=Y==_-1||Y%5==0||Y>=T.viewFrom&&Y<T.viewTo?U.save():null,U.nextLine()}),S&&(E.modeFrontier=U.line),U}function Za(g,_,S,E){var T=g.doc.mode,P=new bt(_,g.options.tabSize,S);for(P.start=P.pos=E||0,_==""&&ra(T,S.state);!P.eol();)Qs(T,P,S.state),P.start=P.pos}function ra(g,_){if(g.blankLine)return g.blankLine(_);if(g.innerMode){var S=Qt(g,_);return S.mode.blankLine?S.mode.blankLine(S.state):void 0}}function Qs(g,_,S,E){for(var T=0;T<10;T++){E&&(E[0]=Qt(g,S).mode);var P=g.token(_,S);if(_.pos>_.start)return P}throw new Error("Mode "+g.name+" failed to advance stream.")}ms.prototype.lookAhead=function(g){var _=this.doc.getLine(this.line+g);return _!=null&&g>this.maxLookAhead&&(this.maxLookAhead=g),_},ms.prototype.baseToken=function(g){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=g;)this.baseTokenPos+=2;var _=this.baseTokens[this.baseTokenPos+1];return{type:_&&_.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-g}},ms.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ms.fromSaved=function(g,_,S){return _ instanceof gs?new ms(g,Et(g.mode,_.state),S,_.lookAhead):new ms(g,Et(g.mode,_),S)},ms.prototype.save=function(g){var _=g!==!1?Et(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new gs(_,this.maxLookAhead):_};var Ka=function(g,_,S){this.start=g.start,this.end=g.pos,this.string=g.current(),this.type=_||null,this.state=S};function sa(g,_,S,E){var T,P,j=g.doc,U=j.mode,X=Qe(j,(_=jt(j,_)).line),Y=na(g,_.line,S),ce=new bt(X.text,g.options.tabSize,Y);for(E&&(P=[]);(E||ce.pos<_.ch)&&!ce.eol();)ce.start=ce.pos,T=Qs(U,ce,Y.state),E&&P.push(new Ka(ce,T,Et(j.mode,Y.state)));return E?P:new Ka(ce,T,Y.state)}function Nr(g,_){if(g)for(;;){var S=g.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!S)break;g=g.slice(0,S.index)+g.slice(S.index+S[0].length);var E=S[1]?"bgClass":"textClass";_[E]==null?_[E]=S[2]:new RegExp("(?:^|\\s)"+S[2]+"(?:$|\\s)").test(_[E])||(_[E]+=" "+S[2])}return g}function oa(g,_,S,E,T,P,j){var U=S.flattenSpans;U==null&&(U=g.options.flattenSpans);var X,Y=0,ce=null,he=new bt(_,g.options.tabSize,E),we=g.options.addModeClass&&[null];for(_==""&&Nr(ra(S,E.state),P);!he.eol();){if(he.pos>g.options.maxHighlightLength?(U=!1,j&&Za(g,_,E,he.pos),he.pos=_.length,X=null):X=Nr(Qs(S,he,E.state,we),P),we){var be=we[0].name;be&&(X="m-"+(X?be+" "+X:be))}if(!U||ce!=X){for(;Y<he.start;)T(Y=Math.min(he.start,Y+5e3),ce);ce=X}he.start=he.pos}for(;Y<he.pos;){var Fe=Math.min(he.pos,Y+5e3);T(Fe,ce),Y=Fe}}var Fo=!1,go=!1;function mo(g,_,S){this.marker=g,this.from=_,this.to=S}function yo(g,_){if(g)for(var S=0;S<g.length;++S){var E=g[S];if(E.marker==_)return E}}function aa(g,_){for(var S,E=0;E<g.length;++E)g[E]!=_&&(S||(S=[])).push(g[E]);return S}function Mu(g,_){if(_.full)return null;var S=Ar(g,_.from.line)&&Qe(g,_.from.line).markedSpans,E=Ar(g,_.to.line)&&Qe(g,_.to.line).markedSpans;if(!S&&!E)return null;var T=_.from.ch,P=_.to.ch,j=yt(_.from,_.to)==0,U=function(ft,mt,di){var Dt;if(ft)for(var Vi=0;Vi<ft.length;++Vi){var ai=ft[Vi],gn=ai.marker;if(ai.from==null||(gn.inclusiveLeft?ai.from<=mt:ai.from<mt)||ai.from==mt&&gn.type=="bookmark"&&(!di||!ai.marker.insertLeft)){var Un=ai.to==null||(gn.inclusiveRight?ai.to>=mt:ai.to>mt);(Dt||(Dt=[])).push(new mo(gn,ai.from,Un?null:ai.to))}}return Dt}(S,T,j),X=function(ft,mt,di){var Dt;if(ft)for(var Vi=0;Vi<ft.length;++Vi){var ai=ft[Vi],gn=ai.marker;if(ai.to==null||(gn.inclusiveRight?ai.to>=mt:ai.to>mt)||ai.from==mt&&gn.type=="bookmark"&&(!di||ai.marker.insertLeft)){var Un=ai.from==null||(gn.inclusiveLeft?ai.from<=mt:ai.from<mt);(Dt||(Dt=[])).push(new mo(gn,Un?null:ai.from-mt,ai.to==null?null:ai.to-mt))}}return Dt}(E,P,j),Y=_.text.length==1,ce=se(_.text).length+(Y?T:0);if(U)for(var he=0;he<U.length;++he){var we=U[he];if(we.to==null){var be=yo(X,we.marker);be?Y&&(we.to=be.to==null?null:be.to+ce):we.to=T}}if(X)for(var Fe=0;Fe<X.length;++Fe){var $e=X[Fe];$e.to!=null&&($e.to+=ce),$e.from==null?yo(U,$e.marker)||($e.from=ce,Y&&(U||(U=[])).push($e)):($e.from+=ce,Y&&(U||(U=[])).push($e))}U&&(U=No(U)),X&&X!=U&&(X=No(X));var Oe=[U];if(!Y){var Ue,et=_.text.length-2;if(et>0&&U)for(var Ze=0;Ze<U.length;++Ze)U[Ze].to==null&&(Ue||(Ue=[])).push(new mo(U[Ze].marker,null,null));for(var gt=0;gt<et;++gt)Oe.push(Ue);Oe.push(X)}return Oe}function No(g){for(var _=0;_<g.length;++_){var S=g[_];S.from!=null&&S.from==S.to&&S.marker.clearWhenEmpty!==!1&&g.splice(_--,1)}return g.length?g:null}function eu(g){var _=g.markedSpans;if(_){for(var S=0;S<_.length;++S)_[S].marker.detachLine(g);g.markedSpans=null}}function gl(g,_){if(_){for(var S=0;S<_.length;++S)_[S].marker.attachLine(g);g.markedSpans=_}}function Rr(g){return g.inclusiveLeft?-1:0}function vo(g){return g.inclusiveRight?1:0}function $o(g,_){var S=g.lines.length-_.lines.length;if(S!=0)return S;var E=g.find(),T=_.find(),P=yt(E.from,T.from)||Rr(g)-Rr(_);if(P)return-P;var j=yt(E.to,T.to)||vo(g)-vo(_);return j||_.id-g.id}function ml(g,_){var S,E=go&&g.markedSpans;if(E)for(var T=void 0,P=0;P<E.length;++P)(T=E[P]).marker.collapsed&&(_?T.from:T.to)==null&&(!S||$o(S,T.marker)<0)&&(S=T.marker);return S}function tu(g){return ml(g,!0)}function Ja(g){return ml(g,!1)}function eo(g,_){var S,E=go&&g.markedSpans;if(E)for(var T=0;T<E.length;++T){var P=E[T];P.marker.collapsed&&(P.from==null||P.from<_)&&(P.to==null||P.to>_)&&(!S||$o(S,P.marker)<0)&&(S=P.marker)}return S}function la(g,_,S,E,T){var P=Qe(g,_),j=go&&P.markedSpans;if(j)for(var U=0;U<j.length;++U){var X=j[U];if(X.marker.collapsed){var Y=X.marker.find(0),ce=yt(Y.from,S)||Rr(X.marker)-Rr(T),he=yt(Y.to,E)||vo(X.marker)-vo(T);if(!(ce>=0&&he<=0||ce<=0&&he>=0)&&(ce<=0&&(X.marker.inclusiveRight&&T.inclusiveLeft?yt(Y.to,S)>=0:yt(Y.to,S)>0)||ce>=0&&(X.marker.inclusiveRight&&T.inclusiveLeft?yt(Y.from,E)<=0:yt(Y.from,E)<0)))return!0}}}function ys(g){for(var _;_=tu(g);)g=_.find(-1,!0).line;return g}function yl(g,_){var S=Qe(g,_),E=ys(S);return S==E?_:zt(E)}function iu(g,_){if(_>g.lastLine())return _;var S,E=Qe(g,_);if(!_o(g,E))return _;for(;S=Ja(E);)E=S.find(1,!0).line;return zt(E)+1}function _o(g,_){var S=go&&_.markedSpans;if(S){for(var E=void 0,T=0;T<S.length;++T)if((E=S[T]).marker.collapsed&&(E.from==null||!E.marker.widgetNode&&E.from==0&&E.marker.inclusiveLeft&&ae(g,_,E)))return!0}}function ae(g,_,S){if(S.to==null){var E=S.marker.find(1,!0);return ae(g,E.line,yo(E.line.markedSpans,S.marker))}if(S.marker.inclusiveRight&&S.to==_.text.length)return!0;for(var T=void 0,P=0;P<_.markedSpans.length;++P)if((T=_.markedSpans[P]).marker.collapsed&&!T.marker.widgetNode&&T.from==S.to&&(T.to==null||T.to!=S.from)&&(T.marker.inclusiveLeft||S.marker.inclusiveRight)&&ae(g,_,T))return!0}function ne(g){for(var _=0,S=(g=ys(g)).parent,E=0;E<S.lines.length;++E){var T=S.lines[E];if(T==g)break;_+=T.height}for(var P=S.parent;P;P=(S=P).parent)for(var j=0;j<P.children.length;++j){var U=P.children[j];if(U==S)break;_+=U.height}return _}function Ie(g){if(g.height==0)return 0;for(var _,S=g.text.length,E=g;_=tu(E);){var T=_.find(0,!0);E=T.from.line,S+=T.from.ch-T.to.ch}for(E=g;_=Ja(E);){var P=_.find(0,!0);S-=E.text.length-P.from.ch,S+=(E=P.to.line).text.length-P.to.ch}return S}function Je(g){var _=g.display,S=g.doc;_.maxLine=Qe(S,S.first),_.maxLineLength=Ie(_.maxLine),_.maxLineChanged=!0,S.iter(function(E){var T=Ie(E);T>_.maxLineLength&&(_.maxLineLength=T,_.maxLine=E)})}var Zt=function(g,_,S){this.text=g,gl(this,_),this.height=S?S(this):1};function Xt(g){g.parent=null,eu(g)}Zt.prototype.lineNo=function(){return zt(this)},Ht(Zt);var Oi={},hn={};function Rn(g,_){if(!g||/^\s*$/.test(g))return null;var S=_.addModeClass?hn:Oi;return S[g]||(S[g]=g.replace(/\S+/g,"cm-$&"))}function Cn(g,_){var S=te("span",null,null,f?"padding-right: .1px":null),E={pre:te("pre",[S],"CodeMirror-line"),content:S,col:0,pos:0,cm:g,trailingSpace:!1,splitSpaces:g.getOption("lineWrapping")};_.measure={};for(var T=0;T<=(_.rest?_.rest.length:0);T++){var P=T?_.rest[T-1]:_.line,j=void 0;E.pos=0,E.addToken=vs,Si(g.display.measure)&&(j=Ae(P,g.doc.direction))&&(E.addToken=Sn(E.addToken,j)),E.map=[],bo(P,E,po(g,P,_!=g.display.externalMeasured&&zt(P))),P.styleClasses&&(P.styleClasses.bgClass&&(E.bgClass=J(P.styleClasses.bgClass,E.bgClass||"")),P.styleClasses.textClass&&(E.textClass=J(P.styleClasses.textClass,E.textClass||""))),E.map.length==0&&E.map.push(0,0,E.content.appendChild(Ot(g.display.measure))),T==0?(_.measure.map=E.map,_.measure.cache={}):((_.measure.maps||(_.measure.maps=[])).push(E.map),(_.measure.caches||(_.measure.caches=[])).push({}))}if(f){var U=E.content.lastChild;(/\bcm-tab\b/.test(U.className)||U.querySelector&&U.querySelector(".cm-tab"))&&(E.content.className="cm-tab-wrap-hack")}return st(g,"renderLine",g,_.line,E.pre),E.pre.className&&(E.textClass=J(E.pre.className,E.textClass||"")),E}function kn(g){var _=ee("span","•","cm-invalidchar");return _.title="\\u"+g.charCodeAt(0).toString(16),_.setAttribute("aria-label",_.title),_}function vs(g,_,S,E,T,P,j){if(_){var U,X=g.splitSpaces?function(ft,mt){if(ft.length>1&&!/  /.test(ft))return ft;for(var di=mt,Dt="",Vi=0;Vi<ft.length;Vi++){var ai=ft.charAt(Vi);ai!=" "||!di||Vi!=ft.length-1&&ft.charCodeAt(Vi+1)!=32||(ai=" "),Dt+=ai,di=ai==" "}return Dt}(_,g.trailingSpace):_,Y=g.cm.state.specialChars,ce=!1;if(Y.test(_)){U=document.createDocumentFragment();for(var he=0;;){Y.lastIndex=he;var we=Y.exec(_),be=we?we.index-he:_.length-he;if(be){var Fe=document.createTextNode(X.slice(he,he+be));h&&d<9?U.appendChild(ee("span",[Fe])):U.appendChild(Fe),g.map.push(g.pos,g.pos+be,Fe),g.col+=be,g.pos+=be}if(!we)break;he+=be+1;var $e=void 0;if(we[0]=="	"){var Oe=g.cm.options.tabSize,Ue=Oe-g.col%Oe;($e=U.appendChild(ee("span",ge(Ue),"cm-tab"))).setAttribute("role","presentation"),$e.setAttribute("cm-text","	"),g.col+=Ue}else we[0]=="\r"||we[0]==`
`?(($e=U.appendChild(ee("span",we[0]=="\r"?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",we[0]),g.col+=1):(($e=g.cm.options.specialCharPlaceholder(we[0])).setAttribute("cm-text",we[0]),h&&d<9?U.appendChild(ee("span",[$e])):U.appendChild($e),g.col+=1);g.map.push(g.pos,g.pos+1,$e),g.pos++}}else g.col+=_.length,U=document.createTextNode(X),g.map.push(g.pos,g.pos+_.length,U),h&&d<9&&(ce=!0),g.pos+=_.length;if(g.trailingSpace=X.charCodeAt(_.length-1)==32,S||E||T||ce||P||j){var et=S||"";E&&(et+=E),T&&(et+=T);var Ze=ee("span",[U],et,P);if(j)for(var gt in j)j.hasOwnProperty(gt)&&gt!="style"&&gt!="class"&&Ze.setAttribute(gt,j[gt]);return g.content.appendChild(Ze)}g.content.appendChild(U)}}function Sn(g,_){return function(S,E,T,P,j,U,X){T=T?T+" cm-force-border":"cm-force-border";for(var Y=S.pos,ce=Y+E.length;;){for(var he=void 0,we=0;we<_.length&&!((he=_[we]).to>Y&&he.from<=Y);we++);if(he.to>=ce)return g(S,E,T,P,j,U,X);g(S,E.slice(0,he.to-Y),T,P,null,U,X),P=null,E=E.slice(he.to-Y),Y=he.to}}}function $r(g,_,S,E){var T=!E&&S.widgetNode;T&&g.map.push(g.pos,g.pos+_,T),!E&&g.cm.display.input.needsContentAttribute&&(T||(T=g.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",S.id)),T&&(g.cm.display.input.setUneditable(T),g.content.appendChild(T)),g.pos+=_,g.trailingSpace=!1}function bo(g,_,S){var E=g.markedSpans,T=g.text,P=0;if(E)for(var j,U,X,Y,ce,he,we,be=T.length,Fe=0,$e=1,Oe="",Ue=0;;){if(Ue==Fe){X=Y=ce=U="",we=null,he=null,Ue=1/0;for(var et=[],Ze=void 0,gt=0;gt<E.length;++gt){var ft=E[gt],mt=ft.marker;if(mt.type=="bookmark"&&ft.from==Fe&&mt.widgetNode)et.push(mt);else if(ft.from<=Fe&&(ft.to==null||ft.to>Fe||mt.collapsed&&ft.to==Fe&&ft.from==Fe)){if(ft.to!=null&&ft.to!=Fe&&Ue>ft.to&&(Ue=ft.to,Y=""),mt.className&&(X+=" "+mt.className),mt.css&&(U=(U?U+";":"")+mt.css),mt.startStyle&&ft.from==Fe&&(ce+=" "+mt.startStyle),mt.endStyle&&ft.to==Ue&&(Ze||(Ze=[])).push(mt.endStyle,ft.to),mt.title&&((we||(we={})).title=mt.title),mt.attributes)for(var di in mt.attributes)(we||(we={}))[di]=mt.attributes[di];mt.collapsed&&(!he||$o(he.marker,mt)<0)&&(he=ft)}else ft.from>Fe&&Ue>ft.from&&(Ue=ft.from)}if(Ze)for(var Dt=0;Dt<Ze.length;Dt+=2)Ze[Dt+1]==Ue&&(Y+=" "+Ze[Dt]);if(!he||he.from==Fe)for(var Vi=0;Vi<et.length;++Vi)$r(_,0,et[Vi]);if(he&&(he.from||0)==Fe){if($r(_,(he.to==null?be+1:he.to)-Fe,he.marker,he.from==null),he.to==null)return;he.to==Fe&&(he=!1)}}if(Fe>=be)break;for(var ai=Math.min(be,Ue);;){if(Oe){var gn=Fe+Oe.length;if(!he){var Un=gn>ai?Oe.slice(0,ai-Fe):Oe;_.addToken(_,Un,j?j+X:X,ce,Fe+Un.length==Ue?Y:"",U,we)}if(gn>=ai){Oe=Oe.slice(ai-Fe),Fe=ai;break}Fe=gn,ce=""}Oe=T.slice(P,P=S[$e++]),j=Rn(S[$e++],_.cm.options)}}else for(var mn=1;mn<S.length;mn+=2)_.addToken(_,T.slice(P,P=S[mn]),Rn(S[mn+1],_.cm.options))}function Da(g,_,S){this.line=_,this.rest=function(E){for(var T,P;T=Ja(E);)E=T.find(1,!0).line,(P||(P=[])).push(E);return P}(_),this.size=this.rest?zt(se(this.rest))-S+1:1,this.node=this.text=null,this.hidden=_o(g,_)}function As(g,_,S){for(var E,T=[],P=_;P<S;P=E){var j=new Da(g.doc,Qe(g.doc,P),P);E=P+j.size,T.push(j)}return T}var Rs=null,vl=null;function hr(g,_){var S=Pe(g,_);if(S.length){var E,T=Array.prototype.slice.call(arguments,2);Rs?E=Rs.delayedCallbacks:vl?E=vl:(E=vl=[],setTimeout(_l,0));for(var P=function(U){E.push(function(){return S[U].apply(null,T)})},j=0;j<S.length;++j)P(j)}}function _l(){var g=vl;vl=null;for(var _=0;_<g.length;++_)g[_]()}function pd(g,_,S,E){for(var T=0;T<_.changes.length;T++){var P=_.changes[T];P=="text"?Uf(g,_):P=="gutter"?qf(g,_,S,E):P=="class"?md(g,_):P=="widget"&&Vf(g,_,E)}_.changes=null}function Iu(g){return g.node==g.text&&(g.node=ee("div",null,null,"position: relative"),g.text.parentNode&&g.text.parentNode.replaceChild(g.node,g.text),g.node.appendChild(g.text),h&&d<8&&(g.node.style.zIndex=2)),g.node}function gd(g,_){var S=g.display.externalMeasured;return S&&S.line==_.line?(g.display.externalMeasured=null,_.measure=S.measure,S.built):Cn(g,_)}function Uf(g,_){var S=_.text.className,E=gd(g,_);_.text==_.node&&(_.node=E.pre),_.text.parentNode.replaceChild(E.pre,_.text),_.text=E.pre,E.bgClass!=_.bgClass||E.textClass!=_.textClass?(_.bgClass=E.bgClass,_.textClass=E.textClass,md(g,_)):S&&(_.text.className=S)}function md(g,_){(function(E,T){var P=T.bgClass?T.bgClass+" "+(T.line.bgClass||""):T.line.bgClass;if(P&&(P+=" CodeMirror-linebackground"),T.background)P?T.background.className=P:(T.background.parentNode.removeChild(T.background),T.background=null);else if(P){var j=Iu(T);T.background=j.insertBefore(ee("div",null,P),j.firstChild),E.display.input.setUneditable(T.background)}})(g,_),_.line.wrapClass?Iu(_).className=_.line.wrapClass:_.node!=_.text&&(_.node.className="");var S=_.textClass?_.textClass+" "+(_.line.textClass||""):_.line.textClass;_.text.className=S||""}function qf(g,_,S,E){if(_.gutter&&(_.node.removeChild(_.gutter),_.gutter=null),_.gutterBackground&&(_.node.removeChild(_.gutterBackground),_.gutterBackground=null),_.line.gutterClass){var T=Iu(_);_.gutterBackground=ee("div",null,"CodeMirror-gutter-background "+_.line.gutterClass,"left: "+(g.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px; width: "+E.gutterTotalWidth+"px"),g.display.input.setUneditable(_.gutterBackground),T.insertBefore(_.gutterBackground,_.text)}var P=_.line.gutterMarkers;if(g.options.lineNumbers||P){var j=Iu(_),U=_.gutter=ee("div",null,"CodeMirror-gutter-wrapper","left: "+(g.options.fixedGutter?E.fixedPos:-E.gutterTotalWidth)+"px");if(U.setAttribute("aria-hidden","true"),g.display.input.setUneditable(U),j.insertBefore(U,_.text),_.line.gutterClass&&(U.className+=" "+_.line.gutterClass),!g.options.lineNumbers||P&&P["CodeMirror-linenumbers"]||(_.lineNumber=U.appendChild(ee("div",ci(g.options,S),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+E.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+g.display.lineNumInnerWidth+"px"))),P)for(var X=0;X<g.display.gutterSpecs.length;++X){var Y=g.display.gutterSpecs[X].className,ce=P.hasOwnProperty(Y)&&P[Y];ce&&U.appendChild(ee("div",[ce],"CodeMirror-gutter-elt","left: "+E.gutterLeft[Y]+"px; width: "+E.gutterWidth[Y]+"px"))}}}function Vf(g,_,S){_.alignable&&(_.alignable=null);for(var E=F("CodeMirror-linewidget"),T=_.node.firstChild,P=void 0;T;T=P)P=T.nextSibling,E.test(T.className)&&_.node.removeChild(T);yd(g,_,S)}function Hf(g,_,S,E){var T=gd(g,_);return _.text=_.node=T.pre,T.bgClass&&(_.bgClass=T.bgClass),T.textClass&&(_.textClass=T.textClass),md(g,_),qf(g,_,S,E),yd(g,_,E),_.node}function yd(g,_,S){if(vd(g,_.line,_,S,!0),_.rest)for(var E=0;E<_.rest.length;E++)vd(g,_.rest[E],_,S,!1)}function vd(g,_,S,E,T){if(_.widgets)for(var P=Iu(S),j=0,U=_.widgets;j<U.length;++j){var X=U[j],Y=ee("div",[X.node],"CodeMirror-linewidget"+(X.className?" "+X.className:""));X.handleMouseEvents||Y.setAttribute("cm-ignore-events","true"),Wf(X,Y,S,E),g.display.input.setUneditable(Y),T&&X.above?P.insertBefore(Y,S.gutter||S.text):P.appendChild(Y),hr(X,"redraw")}}function Wf(g,_,S,E){if(g.noHScroll){(S.alignable||(S.alignable=[])).push(_);var T=E.wrapperWidth;_.style.left=E.fixedPos+"px",g.coverGutter||(T-=E.gutterTotalWidth,_.style.paddingLeft=E.gutterTotalWidth+"px"),_.style.width=T+"px"}g.coverGutter&&(_.style.zIndex=5,_.style.position="relative",g.noHScroll||(_.style.marginLeft=-E.gutterTotalWidth+"px"))}function hc(g){if(g.height!=null)return g.height;var _=g.doc.cm;if(!_)return 0;if(!le(document.body,g.node)){var S="position: relative;";g.coverGutter&&(S+="margin-left: -"+_.display.gutters.offsetWidth+"px;"),g.noHScroll&&(S+="width: "+_.display.wrapper.clientWidth+"px;"),K(_.display.measure,ee("div",[g.node],null,S))}return g.height=g.node.parentNode.offsetHeight}function Qa(g,_){for(var S=xi(_);S!=g.wrapper;S=S.parentNode)if(!S||S.nodeType==1&&S.getAttribute("cm-ignore-events")=="true"||S.parentNode==g.sizer&&S!=g.mover)return!0}function Ou(g){return g.lineSpace.offsetTop}function Xf(g){return g.mover.offsetHeight-g.lineSpace.offsetHeight}function tm(g){if(g.cachedPaddingH)return g.cachedPaddingH;var _=K(g.measure,ee("pre","x","CodeMirror-line-like")),S=window.getComputedStyle?window.getComputedStyle(_):_.currentStyle,E={left:parseInt(S.paddingLeft),right:parseInt(S.paddingRight)};return isNaN(E.left)||isNaN(E.right)||(g.cachedPaddingH=E),E}function el(g){return 50-g.display.nativeBarWidth}function Pu(g){return g.display.scroller.clientWidth-el(g)-g.display.barWidth}function Me(g){return g.display.scroller.clientHeight-el(g)-g.display.barHeight}function vt(g,_,S){if(g.line==_)return{map:g.measure.map,cache:g.measure.cache};if(g.rest){for(var E=0;E<g.rest.length;E++)if(g.rest[E]==_)return{map:g.measure.maps[E],cache:g.measure.caches[E]};for(var T=0;T<g.rest.length;T++)if(zt(g.rest[T])>S)return{map:g.measure.maps[T],cache:g.measure.caches[T],before:!0}}}function ei(g,_,S,E){return Xi(g,vr(g,_),S,E)}function Fn(g,_){if(_>=g.display.viewFrom&&_<g.display.viewTo)return g.display.view[lh(g,_)];var S=g.display.externalMeasured;return S&&_>=S.lineN&&_<S.lineN+S.size?S:void 0}function vr(g,_){var S=zt(_),E=Fn(g,S);E&&!E.text?E=null:E&&E.changes&&(pd(g,E,S,Cy(g)),g.curOp.forceUpdate=!0),E||(E=function(P,j){var U=zt(j=ys(j)),X=P.display.externalMeasured=new Da(P.doc,j,U);X.lineN=U;var Y=X.built=Cn(P,X);return X.text=Y.pre,K(P.display.lineMeasure,Y.pre),X}(g,_));var T=vt(E,_,S);return{line:_,view:E,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function Xi(g,_,S,E,T){_.before&&(S=-1);var P,j=S+(E||"");return _.cache.hasOwnProperty(j)?P=_.cache[j]:(_.rect||(_.rect=_.view.text.getBoundingClientRect()),_.hasHeights||(function(U,X,Y){var ce=U.options.lineWrapping,he=ce&&Pu(U);if(!X.measure.heights||ce&&X.measure.width!=he){var we=X.measure.heights=[];if(ce){X.measure.width=he;for(var be=X.text.firstChild.getClientRects(),Fe=0;Fe<be.length-1;Fe++){var $e=be[Fe],Oe=be[Fe+1];Math.abs($e.bottom-Oe.bottom)>2&&we.push(($e.bottom+Oe.top)/2-Y.top)}}we.push(Y.bottom-Y.top)}}(g,_.view,_.rect),_.hasHeights=!0),P=function(U,X,Y,ce){var he,we=b1(X.map,Y,ce),be=we.node,Fe=we.start,$e=we.end,Oe=we.collapse;if(be.nodeType==3){for(var Ue=0;Ue<4;Ue++){for(;Fe&&xe(X.line.text.charAt(we.coverStart+Fe));)--Fe;for(;we.coverStart+$e<we.coverEnd&&xe(X.line.text.charAt(we.coverStart+$e));)++$e;if((he=h&&d<9&&Fe==0&&$e==we.coverEnd-we.coverStart?be.parentNode.getBoundingClientRect():JC(N(be,Fe,$e).getClientRects(),ce)).left||he.right||Fe==0)break;$e=Fe,Fe-=1,Oe="right"}h&&d<11&&(he=function(Un,mn){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(Pi){if(pn!=null)return pn;var qn=K(Pi,ee("span","x")),Ai=qn.getBoundingClientRect(),an=N(qn,0,1).getBoundingClientRect();return pn=Math.abs(Ai.left-an.left)>1}(Un))return mn;var tn=screen.logicalXDPI/screen.deviceXDPI,yn=screen.logicalYDPI/screen.deviceYDPI;return{left:mn.left*tn,right:mn.right*tn,top:mn.top*yn,bottom:mn.bottom*yn}}(U.display.measure,he))}else{var et;Fe>0&&(Oe=ce="right"),he=U.options.lineWrapping&&(et=be.getClientRects()).length>1?et[ce=="right"?et.length-1:0]:be.getBoundingClientRect()}if(h&&d<9&&!Fe&&(!he||!he.left&&!he.right)){var Ze=be.parentNode.getClientRects()[0];he=Ze?{left:Ze.left,right:Ze.left+bd(U.display),top:Ze.top,bottom:Ze.bottom}:oh}for(var gt=he.top-X.rect.top,ft=he.bottom-X.rect.top,mt=(gt+ft)/2,di=X.view.measure.heights,Dt=0;Dt<di.length-1&&!(mt<di[Dt]);Dt++);var Vi=Dt?di[Dt-1]:0,ai=di[Dt],gn={left:(Oe=="right"?he.right:he.left)-X.rect.left,right:(Oe=="left"?he.left:he.right)-X.rect.left,top:Vi,bottom:ai};return he.left||he.right||(gn.bogus=!0),U.options.singleCursorHeightPerLine||(gn.rtop=gt,gn.rbottom=ft),gn}(g,_,S,E),P.bogus||(_.cache[j]=P)),{left:P.left,right:P.right,top:T?P.rtop:P.top,bottom:T?P.rbottom:P.bottom}}var ks,oh={left:0,right:0,top:0,bottom:0};function b1(g,_,S){for(var E,T,P,j,U,X,Y=0;Y<g.length;Y+=3)if(U=g[Y],X=g[Y+1],_<U?(T=0,P=1,j="left"):_<X?P=(T=_-U)+1:(Y==g.length-3||_==X&&g[Y+3]>_)&&(T=(P=X-U)-1,_>=X&&(j="right")),T!=null){if(E=g[Y+2],U==X&&S==(E.insertLeft?"left":"right")&&(j=S),S=="left"&&T==0)for(;Y&&g[Y-2]==g[Y-3]&&g[Y-1].insertLeft;)E=g[2+(Y-=3)],j="left";if(S=="right"&&T==X-U)for(;Y<g.length-3&&g[Y+3]==g[Y+4]&&!g[Y+5].insertLeft;)E=g[(Y+=3)+2],j="right";break}return{node:E,start:T,end:P,collapse:j,coverStart:U,coverEnd:X}}function JC(g,_){var S=oh;if(_=="left")for(var E=0;E<g.length&&(S=g[E]).left==S.right;E++);else for(var T=g.length-1;T>=0&&(S=g[T]).left==S.right;T--);return S}function x1(g){if(g.measure&&(g.measure.cache={},g.measure.heights=null,g.rest))for(var _=0;_<g.rest.length;_++)g.measure.caches[_]={}}function w1(g){g.display.externalMeasure=null,W(g.display.lineMeasure);for(var _=0;_<g.display.view.length;_++)x1(g.display.view[_])}function Yf(g){w1(g),g.display.cachedCharWidth=g.display.cachedTextHeight=g.display.cachedPaddingH=null,g.options.lineWrapping||(g.display.maxLineChanged=!0),g.display.lineNumChars=null}function E1(g){return m&&D?-(g.body.getBoundingClientRect().left-parseInt(getComputedStyle(g.body).marginLeft)):g.defaultView.pageXOffset||(g.documentElement||g.body).scrollLeft}function C1(g){return m&&D?-(g.body.getBoundingClientRect().top-parseInt(getComputedStyle(g.body).marginTop)):g.defaultView.pageYOffset||(g.documentElement||g.body).scrollTop}function by(g){var _=ys(g).widgets,S=0;if(_)for(var E=0;E<_.length;++E)_[E].above&&(S+=hc(_[E]));return S}function im(g,_,S,E,T){if(!T){var P=by(_);S.top+=P,S.bottom+=P}if(E=="line")return S;E||(E="local");var j=ne(_);if(E=="local"?j+=Ou(g.display):j-=g.display.viewOffset,E=="page"||E=="window"){var U=g.display.lineSpace.getBoundingClientRect();j+=U.top+(E=="window"?0:C1(Ne(g)));var X=U.left+(E=="window"?0:E1(Ne(g)));S.left+=X,S.right+=X}return S.top+=j,S.bottom+=j,S}function S1(g,_,S){if(S=="div")return _;var E=_.left,T=_.top;if(S=="page")E-=E1(Ne(g)),T-=C1(Ne(g));else if(S=="local"||!S){var P=g.display.sizer.getBoundingClientRect();E+=P.left,T+=P.top}var j=g.display.lineSpace.getBoundingClientRect();return{left:E-j.left,top:T-j.top}}function nm(g,_,S,E,T){return E||(E=Qe(g.doc,_.line)),im(g,E,ei(g,E,_.ch,T),S)}function bl(g,_,S,E,T,P){function j(Fe,$e){var Oe=Xi(g,T,Fe,$e?"right":"left",P);return $e?Oe.left=Oe.right:Oe.right=Oe.left,im(g,E,Oe,S)}E=E||Qe(g.doc,_.line),T||(T=vr(g,E));var U=Ae(E,g.doc.direction),X=_.ch,Y=_.sticky;if(X>=E.text.length?(X=E.text.length,Y="before"):X<=0&&(X=0,Y="after"),!U)return j(Y=="before"?X-1:X,Y=="before");function ce(Fe,$e,Oe){return j(Oe?Fe-1:Fe,U[$e].level==1!=Oe)}var he=de(U,X,Y),we=fe,be=ce(X,he,Y=="before");return we!=null&&(be.other=ce(X,we,Y!="before")),be}function T1(g,_){var S=0;_=jt(g.doc,_),g.options.lineWrapping||(S=bd(g.display)*_.ch);var E=Qe(g.doc,_.line),T=ne(E)+Ou(g.display);return{left:S,right:S,top:T,bottom:T+E.height}}function xy(g,_,S,E,T){var P=Xe(g,_,S);return P.xRel=T,E&&(P.outside=E),P}function wy(g,_,S){var E=g.doc;if((S+=g.display.viewOffset)<0)return xy(E.first,0,null,-1,-1);var T=jn(E,S),P=E.first+E.size-1;if(T>P)return xy(E.first+E.size-1,Qe(E,P).text.length,null,1,1);_<0&&(_=0);for(var j=Qe(E,T);;){var U=QC(g,j,T,_,S),X=eo(j,U.ch+(U.xRel>0||U.outside>0?1:0));if(!X)return U;var Y=X.find(1);if(Y.line==T)return Y;j=Qe(E,T=Y.line)}}function A1(g,_,S,E){E-=by(_);var T=_.text.length,P=oe(function(j){return Xi(g,S,j-1).bottom<=E},T,0);return{begin:P,end:T=oe(function(j){return Xi(g,S,j).top>E},P,T)}}function R1(g,_,S,E){return S||(S=vr(g,_)),A1(g,_,S,im(g,_,Xi(g,S,E),"line").top)}function Ey(g,_,S,E){return!(g.bottom<=S)&&(g.top>S||(E?g.left:g.right)>_)}function QC(g,_,S,E,T){T-=ne(_);var P=vr(g,_),j=by(_),U=0,X=_.text.length,Y=!0,ce=Ae(_,g.doc.direction);if(ce){var he=(g.options.lineWrapping?tS:eS)(g,_,S,P,ce,E,T);U=(Y=he.level!=1)?he.from:he.to-1,X=Y?he.to:he.from-1}var we,be,Fe=null,$e=null,Oe=oe(function(ft){var mt=Xi(g,P,ft);return mt.top+=j,mt.bottom+=j,!!Ey(mt,E,T,!1)&&(mt.top<=T&&mt.left<=E&&(Fe=ft,$e=mt),!0)},U,X),Ue=!1;if($e){var et=E-$e.left<$e.right-E,Ze=et==Y;Oe=Fe+(Ze?0:1),be=Ze?"after":"before",we=et?$e.left:$e.right}else{Y||Oe!=X&&Oe!=U||Oe++,be=Oe==0?"after":Oe==_.text.length?"before":Xi(g,P,Oe-(Y?1:0)).bottom+j<=T==Y?"after":"before";var gt=bl(g,Xe(S,Oe,be),"line",_,P);we=gt.left,Ue=T<gt.top?-1:T>=gt.bottom?1:0}return xy(S,Oe=V(_.text,Oe,1),be,Ue,E-we)}function eS(g,_,S,E,T,P,j){var U=oe(function(he){var we=T[he],be=we.level!=1;return Ey(bl(g,Xe(S,be?we.to:we.from,be?"before":"after"),"line",_,E),P,j,!0)},0,T.length-1),X=T[U];if(U>0){var Y=X.level!=1,ce=bl(g,Xe(S,Y?X.from:X.to,Y?"after":"before"),"line",_,E);Ey(ce,P,j,!0)&&ce.top>j&&(X=T[U-1])}return X}function tS(g,_,S,E,T,P,j){var U=A1(g,_,E,j),X=U.begin,Y=U.end;/\s/.test(_.text.charAt(Y-1))&&Y--;for(var ce=null,he=null,we=0;we<T.length;we++){var be=T[we];if(!(be.from>=Y||be.to<=X)){var Fe=Xi(g,E,be.level!=1?Math.min(Y,be.to)-1:Math.max(X,be.from)).right,$e=Fe<P?P-Fe+1e9:Fe-P;(!ce||he>$e)&&(ce=be,he=$e)}}return ce||(ce=T[T.length-1]),ce.from<X&&(ce={from:X,to:ce.to,level:ce.level}),ce.to>Y&&(ce={from:ce.from,to:Y,level:ce.level}),ce}function _d(g){if(g.cachedTextHeight!=null)return g.cachedTextHeight;if(ks==null){ks=ee("pre",null,"CodeMirror-line-like");for(var _=0;_<49;++_)ks.appendChild(document.createTextNode("x")),ks.appendChild(ee("br"));ks.appendChild(document.createTextNode("x"))}K(g.measure,ks);var S=ks.offsetHeight/50;return S>3&&(g.cachedTextHeight=S),W(g.measure),S||1}function bd(g){if(g.cachedCharWidth!=null)return g.cachedCharWidth;var _=ee("span","xxxxxxxxxx"),S=ee("pre",[_],"CodeMirror-line-like");K(g.measure,S);var E=_.getBoundingClientRect(),T=(E.right-E.left)/10;return T>2&&(g.cachedCharWidth=T),T||10}function Cy(g){for(var _=g.display,S={},E={},T=_.gutters.clientLeft,P=_.gutters.firstChild,j=0;P;P=P.nextSibling,++j){var U=g.display.gutterSpecs[j].className;S[U]=P.offsetLeft+P.clientLeft+T,E[U]=P.clientWidth}return{fixedPos:Sy(_),gutterTotalWidth:_.gutters.offsetWidth,gutterLeft:S,gutterWidth:E,wrapperWidth:_.wrapper.clientWidth}}function Sy(g){return g.scroller.getBoundingClientRect().left-g.sizer.getBoundingClientRect().left}function k1(g){var _=_d(g.display),S=g.options.lineWrapping,E=S&&Math.max(5,g.display.scroller.clientWidth/bd(g.display)-3);return function(T){if(_o(g.doc,T))return 0;var P=0;if(T.widgets)for(var j=0;j<T.widgets.length;j++)T.widgets[j].height&&(P+=T.widgets[j].height);return S?P+(Math.ceil(T.text.length/E)||1)*_:P+_}}function Ty(g){var _=g.doc,S=k1(g);_.iter(function(E){var T=S(E);T!=E.height&&Bt(E,T)})}function ah(g,_,S,E){var T=g.display;if(!S&&xi(_).getAttribute("cm-not-content")=="true")return null;var P,j,U=T.lineSpace.getBoundingClientRect();try{P=_.clientX-U.left,j=_.clientY-U.top}catch{return null}var X,Y=wy(g,P,j);if(E&&Y.xRel>0&&(X=Qe(g.doc,Y.line).text).length==Y.ch){var ce=ze(X,X.length,g.options.tabSize)-X.length;Y=Xe(Y.line,Math.max(0,Math.round((P-tm(g.display).left)/bd(g.display))-ce))}return Y}function lh(g,_){if(_>=g.display.viewTo||(_-=g.display.viewFrom)<0)return null;for(var S=g.display.view,E=0;E<S.length;E++)if((_-=S[E].size)<0)return E}function Bo(g,_,S,E){_==null&&(_=g.doc.first),S==null&&(S=g.doc.first+g.doc.size),E||(E=0);var T=g.display;if(E&&S<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>_)&&(T.updateLineNumbers=_),g.curOp.viewChanged=!0,_>=T.viewTo)go&&yl(g.doc,_)<T.viewTo&&fc(g);else if(S<=T.viewFrom)go&&iu(g.doc,S+E)>T.viewFrom?fc(g):(T.viewFrom+=E,T.viewTo+=E);else if(_<=T.viewFrom&&S>=T.viewTo)fc(g);else if(_<=T.viewFrom){var P=rm(g,S,S+E,1);P?(T.view=T.view.slice(P.index),T.viewFrom=P.lineN,T.viewTo+=E):fc(g)}else if(S>=T.viewTo){var j=rm(g,_,_,-1);j?(T.view=T.view.slice(0,j.index),T.viewTo=j.lineN):fc(g)}else{var U=rm(g,_,_,-1),X=rm(g,S,S+E,1);U&&X?(T.view=T.view.slice(0,U.index).concat(As(g,U.lineN,X.lineN)).concat(T.view.slice(X.index)),T.viewTo+=E):fc(g)}var Y=T.externalMeasured;Y&&(S<Y.lineN?Y.lineN+=E:_<Y.lineN+Y.size&&(T.externalMeasured=null))}function dc(g,_,S){g.curOp.viewChanged=!0;var E=g.display,T=g.display.externalMeasured;if(T&&_>=T.lineN&&_<T.lineN+T.size&&(E.externalMeasured=null),!(_<E.viewFrom||_>=E.viewTo)){var P=E.view[lh(g,_)];if(P.node!=null){var j=P.changes||(P.changes=[]);xt(j,S)==-1&&j.push(S)}}}function fc(g){g.display.viewFrom=g.display.viewTo=g.doc.first,g.display.view=[],g.display.viewOffset=0}function rm(g,_,S,E){var T,P=lh(g,_),j=g.display.view;if(!go||S==g.doc.first+g.doc.size)return{index:P,lineN:S};for(var U=g.display.viewFrom,X=0;X<P;X++)U+=j[X].size;if(U!=_){if(E>0){if(P==j.length-1)return null;T=U+j[P].size-_,P++}else T=U-_;_+=T,S+=T}for(;yl(g.doc,S)!=S;){if(P==(E<0?0:j.length-1))return null;S+=E*j[P-(E<0?1:0)].size,P+=E}return{index:P,lineN:S}}function D1(g){for(var _=g.display.view,S=0,E=0;E<_.length;E++){var T=_[E];T.hidden||T.node&&!T.changes||++S}return S}function Zf(g){g.display.input.showSelection(g.display.input.prepareSelection())}function L1(g,_){_===void 0&&(_=!0);var S=g.doc,E={},T=E.cursors=document.createDocumentFragment(),P=E.selection=document.createDocumentFragment(),j=g.options.$customCursor;j&&(_=!0);for(var U=0;U<S.sel.ranges.length;U++)if(_||U!=S.sel.primIndex){var X=S.sel.ranges[U];if(!(X.from().line>=g.display.viewTo||X.to().line<g.display.viewFrom)){var Y=X.empty();if(j){var ce=j(g,X);ce&&Ay(g,ce,T)}else(Y||g.options.showCursorWhenSelecting)&&Ay(g,X.head,T);Y||iS(g,X,P)}}return E}function Ay(g,_,S){var E=bl(g,_,"div",null,null,!g.options.singleCursorHeightPerLine),T=S.appendChild(ee("div"," ","CodeMirror-cursor"));if(T.style.left=E.left+"px",T.style.top=E.top+"px",T.style.height=Math.max(0,E.bottom-E.top)*g.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(g.getWrapperElement().className)){var P=nm(g,_,"div",null,null),j=P.right-P.left;T.style.width=(j>0?j:g.defaultCharWidth())+"px"}if(E.other){var U=S.appendChild(ee("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));U.style.display="",U.style.left=E.other.left+"px",U.style.top=E.other.top+"px",U.style.height=.85*(E.other.bottom-E.other.top)+"px"}}function sm(g,_){return g.top-_.top||g.left-_.left}function iS(g,_,S){var E=g.display,T=g.doc,P=document.createDocumentFragment(),j=tm(g.display),U=j.left,X=Math.max(E.sizerWidth,Pu(g)-E.sizer.offsetLeft)-j.right,Y=T.direction=="ltr";function ce(Ze,gt,ft,mt){gt<0&&(gt=0),gt=Math.round(gt),mt=Math.round(mt),P.appendChild(ee("div",null,"CodeMirror-selected","position: absolute; left: "+Ze+`px;
                             top: `+gt+"px; width: "+(ft??X-Ze)+`px;
                             height: `+(mt-gt)+"px"))}function he(Ze,gt,ft){var mt,di,Dt=Qe(T,Ze),Vi=Dt.text.length;function ai(mn,tn){return nm(g,Xe(Ze,mn),"div",Dt,tn)}function gn(mn,tn,yn){var Pi=R1(g,Dt,null,mn),qn=tn=="ltr"==(yn=="after")?"left":"right";return ai(yn=="after"?Pi.begin:Pi.end-(/\s/.test(Dt.text.charAt(Pi.end-1))?2:1),qn)[qn]}var Un=Ae(Dt,T.direction);return function(mn,tn,yn,Pi){if(!mn)return Pi(tn,yn,"ltr",0);for(var qn=!1,Ai=0;Ai<mn.length;++Ai){var an=mn[Ai];(an.from<yn&&an.to>tn||tn==yn&&an.to==tn)&&(Pi(Math.max(an.from,tn),Math.min(an.to,yn),an.level==1?"rtl":"ltr",Ai),qn=!0)}qn||Pi(tn,yn,"ltr")}(Un,gt||0,ft??Vi,function(mn,tn,yn,Pi){var qn=yn=="ltr",Ai=ai(mn,qn?"left":"right"),an=ai(tn-1,qn?"right":"left"),Bi=gt==null&&mn==0,Dn=ft==null&&tn==Vi,wo=Pi==0,Vn=!Un||Pi==Un.length-1;if(an.top-Ai.top<=3){var io=(Y?Dn:Bi)&&Vn,no=(Y?Bi:Dn)&&wo?U:(qn?Ai:an).left,Br=io?X:(qn?an:Ai).right;ce(no,Ai.top,Br-no,Ai.bottom)}else{var Eo,tl,Gs,El;qn?(Eo=Y&&Bi&&wo?U:Ai.left,tl=Y?X:gn(mn,yn,"before"),Gs=Y?U:gn(tn,yn,"after"),El=Y&&Dn&&Vn?X:an.right):(Eo=Y?gn(mn,yn,"before"):U,tl=!Y&&Bi&&wo?X:Ai.right,Gs=!Y&&Dn&&Vn?U:an.left,El=Y?gn(tn,yn,"after"):X),ce(Eo,Ai.top,tl-Eo,Ai.bottom),Ai.bottom<an.top&&ce(U,Ai.bottom,null,an.top),ce(Gs,an.top,El-Gs,an.bottom)}(!mt||sm(Ai,mt)<0)&&(mt=Ai),sm(an,mt)<0&&(mt=an),(!di||sm(Ai,di)<0)&&(di=Ai),sm(an,di)<0&&(di=an)}),{start:mt,end:di}}var we=_.from(),be=_.to();if(we.line==be.line)he(we.line,we.ch,be.ch);else{var Fe=Qe(T,we.line),$e=Qe(T,be.line),Oe=ys(Fe)==ys($e),Ue=he(we.line,we.ch,Oe?Fe.text.length+1:null).end,et=he(be.line,Oe?0:null,be.ch).start;Oe&&(Ue.top<et.top-2?(ce(Ue.right,Ue.top,null,Ue.bottom),ce(U,et.top,et.left,et.bottom)):ce(Ue.right,Ue.top,et.left-Ue.right,Ue.bottom)),Ue.bottom<et.top&&ce(U,Ue.bottom,null,et.top)}S.appendChild(P)}function Ry(g){if(g.state.focused){var _=g.display;clearInterval(_.blinker);var S=!0;_.cursorDiv.style.visibility="",g.options.cursorBlinkRate>0?_.blinker=setInterval(function(){g.hasFocus()||xd(g),_.cursorDiv.style.visibility=(S=!S)?"":"hidden"},g.options.cursorBlinkRate):g.options.cursorBlinkRate<0&&(_.cursorDiv.style.visibility="hidden")}}function M1(g){g.hasFocus()||(g.display.input.focus(),g.state.focused||Dy(g))}function ky(g){g.state.delayingBlurEvent=!0,setTimeout(function(){g.state.delayingBlurEvent&&(g.state.delayingBlurEvent=!1,g.state.focused&&xd(g))},100)}function Dy(g,_){g.state.delayingBlurEvent&&!g.state.draggingText&&(g.state.delayingBlurEvent=!1),g.options.readOnly!="nocursor"&&(g.state.focused||(st(g,"focus",g,_),g.state.focused=!0,z(g.display.wrapper,"CodeMirror-focused"),g.curOp||g.display.selForContextMenu==g.doc.sel||(g.display.input.reset(),f&&setTimeout(function(){return g.display.input.reset(!0)},20)),g.display.input.receivedFocus()),Ry(g))}function xd(g,_){g.state.delayingBlurEvent||(g.state.focused&&(st(g,"blur",g,_),g.state.focused=!1,B(g.display.wrapper,"CodeMirror-focused")),clearInterval(g.display.blinker),setTimeout(function(){g.state.focused||(g.display.shift=!1)},150))}function om(g){for(var _=g.display,S=_.lineDiv.offsetTop,E=Math.max(0,_.scroller.getBoundingClientRect().top),T=_.lineDiv.getBoundingClientRect().top,P=0,j=0;j<_.view.length;j++){var U=_.view[j],X=g.options.lineWrapping,Y=void 0,ce=0;if(!U.hidden){if(T+=U.line.height,h&&d<8){var he=U.node.offsetTop+U.node.offsetHeight;Y=he-S,S=he}else{var we=U.node.getBoundingClientRect();Y=we.bottom-we.top,!X&&U.text.firstChild&&(ce=U.text.firstChild.getBoundingClientRect().right-we.left-1)}var be=U.line.height-Y;if((be>.005||be<-.005)&&(T<E&&(P-=be),Bt(U.line,Y),I1(U.line),U.rest))for(var Fe=0;Fe<U.rest.length;Fe++)I1(U.rest[Fe]);if(ce>g.display.sizerWidth){var $e=Math.ceil(ce/bd(g.display));$e>g.display.maxLineLength&&(g.display.maxLineLength=$e,g.display.maxLine=U.line,g.display.maxLineChanged=!0)}}}Math.abs(P)>2&&(_.scroller.scrollTop+=P)}function I1(g){if(g.widgets)for(var _=0;_<g.widgets.length;++_){var S=g.widgets[_],E=S.node.parentNode;E&&(S.height=E.offsetHeight)}}function am(g,_,S){var E=S&&S.top!=null?Math.max(0,S.top):g.scroller.scrollTop;E=Math.floor(E-Ou(g));var T=S&&S.bottom!=null?S.bottom:E+g.wrapper.clientHeight,P=jn(_,E),j=jn(_,T);if(S&&S.ensure){var U=S.ensure.from.line,X=S.ensure.to.line;U<P?(P=U,j=jn(_,ne(Qe(_,U))+g.wrapper.clientHeight)):Math.min(X,_.lastLine())>=j&&(P=jn(_,ne(Qe(_,X))-g.wrapper.clientHeight),j=X)}return{from:P,to:Math.max(j,P+1)}}function Ly(g,_){var S=g.display,E=_d(g.display);_.top<0&&(_.top=0);var T=g.curOp&&g.curOp.scrollTop!=null?g.curOp.scrollTop:S.scroller.scrollTop,P=Me(g),j={};_.bottom-_.top>P&&(_.bottom=_.top+P);var U=g.doc.height+Xf(S),X=_.top<E,Y=_.bottom>U-E;if(_.top<T)j.scrollTop=X?0:_.top;else if(_.bottom>T+P){var ce=Math.min(_.top,(Y?U:_.bottom)-P);ce!=T&&(j.scrollTop=ce)}var he=g.options.fixedGutter?0:S.gutters.offsetWidth,we=g.curOp&&g.curOp.scrollLeft!=null?g.curOp.scrollLeft:S.scroller.scrollLeft-he,be=Pu(g)-S.gutters.offsetWidth,Fe=_.right-_.left>be;return Fe&&(_.right=_.left+be),_.left<10?j.scrollLeft=0:_.left<we?j.scrollLeft=Math.max(0,_.left+he-(Fe?0:10)):_.right>be+we-3&&(j.scrollLeft=_.right+(Fe?0:10)-be),j}function My(g,_){_!=null&&(lm(g),g.curOp.scrollTop=(g.curOp.scrollTop==null?g.doc.scrollTop:g.curOp.scrollTop)+_)}function wd(g){lm(g);var _=g.getCursor();g.curOp.scrollToPos={from:_,to:_,margin:g.options.cursorScrollMargin}}function Kf(g,_,S){_==null&&S==null||lm(g),_!=null&&(g.curOp.scrollLeft=_),S!=null&&(g.curOp.scrollTop=S)}function lm(g){var _=g.curOp.scrollToPos;_&&(g.curOp.scrollToPos=null,O1(g,T1(g,_.from),T1(g,_.to),_.margin))}function O1(g,_,S,E){var T=Ly(g,{left:Math.min(_.left,S.left),top:Math.min(_.top,S.top)-E,right:Math.max(_.right,S.right),bottom:Math.max(_.bottom,S.bottom)+E});Kf(g,T.scrollLeft,T.scrollTop)}function Jf(g,_){Math.abs(g.doc.scrollTop-_)<2||(a||Oy(g,{top:_}),P1(g,_,!0),a&&Oy(g),tp(g,100))}function P1(g,_,S){_=Math.max(0,Math.min(g.display.scroller.scrollHeight-g.display.scroller.clientHeight,_)),(g.display.scroller.scrollTop!=_||S)&&(g.doc.scrollTop=_,g.display.scrollbars.setScrollTop(_),g.display.scroller.scrollTop!=_&&(g.display.scroller.scrollTop=_))}function uh(g,_,S,E){_=Math.max(0,Math.min(_,g.display.scroller.scrollWidth-g.display.scroller.clientWidth)),(S?_==g.doc.scrollLeft:Math.abs(g.doc.scrollLeft-_)<2)&&!E||(g.doc.scrollLeft=_,j1(g),g.display.scroller.scrollLeft!=_&&(g.display.scroller.scrollLeft=_),g.display.scrollbars.setScrollLeft(_))}function Qf(g){var _=g.display,S=_.gutters.offsetWidth,E=Math.round(g.doc.height+Xf(g.display));return{clientHeight:_.scroller.clientHeight,viewHeight:_.wrapper.clientHeight,scrollWidth:_.scroller.scrollWidth,clientWidth:_.scroller.clientWidth,viewWidth:_.wrapper.clientWidth,barLeft:g.options.fixedGutter?S:0,docHeight:E,scrollHeight:E+el(g)+_.barHeight,nativeBarWidth:_.nativeBarWidth,gutterWidth:S}}var ch=function(g,_,S){this.cm=S;var E=this.vert=ee("div",[ee("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=ee("div",[ee("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");E.tabIndex=T.tabIndex=-1,g(E),g(T),Re(E,"scroll",function(){E.clientHeight&&_(E.scrollTop,"vertical")}),Re(T,"scroll",function(){T.clientWidth&&_(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,h&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ch.prototype.update=function(g){var _=g.scrollWidth>g.clientWidth+1,S=g.scrollHeight>g.clientHeight+1,E=g.nativeBarWidth;if(S){this.vert.style.display="block",this.vert.style.bottom=_?E+"px":"0";var T=g.viewHeight-(_?E:0);this.vert.firstChild.style.height=Math.max(0,g.scrollHeight-g.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(_){this.horiz.style.display="block",this.horiz.style.right=S?E+"px":"0",this.horiz.style.left=g.barLeft+"px";var P=g.viewWidth-g.barLeft-(S?E:0);this.horiz.firstChild.style.width=Math.max(0,g.scrollWidth-g.clientWidth+P)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&g.clientHeight>0&&(E==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:S?E:0,bottom:_?E:0}},ch.prototype.setScrollLeft=function(g){this.horiz.scrollLeft!=g&&(this.horiz.scrollLeft=g),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ch.prototype.setScrollTop=function(g){this.vert.scrollTop!=g&&(this.vert.scrollTop=g),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ch.prototype.zeroWidthHack=function(){var g=A&&!x?"12px":"18px";this.horiz.style.height=this.vert.style.width=g,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new lt,this.disableVert=new lt},ch.prototype.enableZeroWidthBar=function(g,_,S){g.style.visibility="",_.set(1e3,function E(){var T=g.getBoundingClientRect();(S=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1))!=g?g.style.visibility="hidden":_.set(1e3,E)})},ch.prototype.clear=function(){var g=this.horiz.parentNode;g.removeChild(this.horiz),g.removeChild(this.vert)};var ep=function(){};function Ed(g,_){_||(_=Qf(g));var S=g.display.barWidth,E=g.display.barHeight;F1(g,_);for(var T=0;T<4&&S!=g.display.barWidth||E!=g.display.barHeight;T++)S!=g.display.barWidth&&g.options.lineWrapping&&om(g),F1(g,Qf(g)),S=g.display.barWidth,E=g.display.barHeight}function F1(g,_){var S=g.display,E=S.scrollbars.update(_);S.sizer.style.paddingRight=(S.barWidth=E.right)+"px",S.sizer.style.paddingBottom=(S.barHeight=E.bottom)+"px",S.heightForcer.style.borderBottom=E.bottom+"px solid transparent",E.right&&E.bottom?(S.scrollbarFiller.style.display="block",S.scrollbarFiller.style.height=E.bottom+"px",S.scrollbarFiller.style.width=E.right+"px"):S.scrollbarFiller.style.display="",E.bottom&&g.options.coverGutterNextToScrollbar&&g.options.fixedGutter?(S.gutterFiller.style.display="block",S.gutterFiller.style.height=E.bottom+"px",S.gutterFiller.style.width=_.gutterWidth+"px"):S.gutterFiller.style.display=""}ep.prototype.update=function(){return{bottom:0,right:0}},ep.prototype.setScrollLeft=function(){},ep.prototype.setScrollTop=function(){},ep.prototype.clear=function(){};var N1={native:ch,null:ep};function $1(g){g.display.scrollbars&&(g.display.scrollbars.clear(),g.display.scrollbars.addClass&&B(g.display.wrapper,g.display.scrollbars.addClass)),g.display.scrollbars=new N1[g.options.scrollbarStyle](function(_){g.display.wrapper.insertBefore(_,g.display.scrollbarFiller),Re(_,"mousedown",function(){g.state.focused&&setTimeout(function(){return g.display.input.focus()},0)}),_.setAttribute("cm-not-content","true")},function(_,S){S=="horizontal"?uh(g,_):Jf(g,_)},g),g.display.scrollbars.addClass&&z(g.display.wrapper,g.display.scrollbars.addClass)}var nS=0;function hh(g){var _;g.curOp={cm:g,viewChanged:!1,startHeight:g.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nS,markArrays:null},_=g.curOp,Rs?Rs.ops.push(_):_.ownsGroup=Rs={ops:[_],delayedCallbacks:[]}}function dh(g){var _=g.curOp;_&&function(S,E){var T=S.ownsGroup;if(T)try{(function(P){var j=P.delayedCallbacks,U=0;do{for(;U<j.length;U++)j[U].call(null);for(var X=0;X<P.ops.length;X++){var Y=P.ops[X];if(Y.cursorActivityHandlers)for(;Y.cursorActivityCalled<Y.cursorActivityHandlers.length;)Y.cursorActivityHandlers[Y.cursorActivityCalled++].call(null,Y.cm)}}while(U<j.length)})(T)}finally{Rs=null,E(T)}}(_,function(S){for(var E=0;E<S.ops.length;E++)S.ops[E].cm.curOp=null;(function(T){for(var P=T.ops,j=0;j<P.length;j++)rS(P[j]);for(var U=0;U<P.length;U++)sS(P[U]);for(var X=0;X<P.length;X++)oS(P[X]);for(var Y=0;Y<P.length;Y++)aS(P[Y]);for(var ce=0;ce<P.length;ce++)lS(P[ce])})(S)})}function rS(g){var _=g.cm,S=_.display;(function(E){var T=E.display;!T.scrollbarsClipped&&T.scroller.offsetWidth&&(T.nativeBarWidth=T.scroller.offsetWidth-T.scroller.clientWidth,T.heightForcer.style.height=el(E)+"px",T.sizer.style.marginBottom=-T.nativeBarWidth+"px",T.sizer.style.borderRightWidth=el(E)+"px",T.scrollbarsClipped=!0)})(_),g.updateMaxLine&&Je(_),g.mustUpdate=g.viewChanged||g.forceUpdate||g.scrollTop!=null||g.scrollToPos&&(g.scrollToPos.from.line<S.viewFrom||g.scrollToPos.to.line>=S.viewTo)||S.maxLineChanged&&_.options.lineWrapping,g.update=g.mustUpdate&&new um(_,g.mustUpdate&&{top:g.scrollTop,ensure:g.scrollToPos},g.forceUpdate)}function sS(g){g.updatedDisplay=g.mustUpdate&&Iy(g.cm,g.update)}function oS(g){var _=g.cm,S=_.display;g.updatedDisplay&&om(_),g.barMeasure=Qf(_),S.maxLineChanged&&!_.options.lineWrapping&&(g.adjustWidthTo=ei(_,S.maxLine,S.maxLine.text.length).left+3,_.display.sizerWidth=g.adjustWidthTo,g.barMeasure.scrollWidth=Math.max(S.scroller.clientWidth,S.sizer.offsetLeft+g.adjustWidthTo+el(_)+_.display.barWidth),g.maxScrollLeft=Math.max(0,S.sizer.offsetLeft+g.adjustWidthTo-Pu(_))),(g.updatedDisplay||g.selectionChanged)&&(g.preparedSelection=S.input.prepareSelection())}function aS(g){var _=g.cm;g.adjustWidthTo!=null&&(_.display.sizer.style.minWidth=g.adjustWidthTo+"px",g.maxScrollLeft<_.doc.scrollLeft&&uh(_,Math.min(_.display.scroller.scrollLeft,g.maxScrollLeft),!0),_.display.maxLineChanged=!1);var S=g.focus&&g.focus==Q(Ne(_));g.preparedSelection&&_.display.input.showSelection(g.preparedSelection,S),(g.updatedDisplay||g.startHeight!=_.doc.height)&&Ed(_,g.barMeasure),g.updatedDisplay&&Fy(_,g.barMeasure),g.selectionChanged&&Ry(_),_.state.focused&&g.updateInput&&_.display.input.reset(g.typing),S&&M1(g.cm)}function lS(g){var _=g.cm,S=_.display,E=_.doc;if(g.updatedDisplay&&B1(_,g.update),S.wheelStartX==null||g.scrollTop==null&&g.scrollLeft==null&&!g.scrollToPos||(S.wheelStartX=S.wheelStartY=null),g.scrollTop!=null&&P1(_,g.scrollTop,g.forceScroll),g.scrollLeft!=null&&uh(_,g.scrollLeft,!0,!0),g.scrollToPos){var T=function(Y,ce,he,we){var be;we==null&&(we=0),Y.options.lineWrapping||ce!=he||(he=ce.sticky=="before"?Xe(ce.line,ce.ch+1,"before"):ce,ce=ce.ch?Xe(ce.line,ce.sticky=="before"?ce.ch-1:ce.ch,"after"):ce);for(var Fe=0;Fe<5;Fe++){var $e=!1,Oe=bl(Y,ce),Ue=he&&he!=ce?bl(Y,he):Oe,et=Ly(Y,be={left:Math.min(Oe.left,Ue.left),top:Math.min(Oe.top,Ue.top)-we,right:Math.max(Oe.left,Ue.left),bottom:Math.max(Oe.bottom,Ue.bottom)+we}),Ze=Y.doc.scrollTop,gt=Y.doc.scrollLeft;if(et.scrollTop!=null&&(Jf(Y,et.scrollTop),Math.abs(Y.doc.scrollTop-Ze)>1&&($e=!0)),et.scrollLeft!=null&&(uh(Y,et.scrollLeft),Math.abs(Y.doc.scrollLeft-gt)>1&&($e=!0)),!$e)break}return be}(_,jt(E,g.scrollToPos.from),jt(E,g.scrollToPos.to),g.scrollToPos.margin);(function(Y,ce){if(!ot(Y,"scrollCursorIntoView")){var he=Y.display,we=he.sizer.getBoundingClientRect(),be=null,Fe=he.wrapper.ownerDocument;if(ce.top+we.top<0?be=!0:ce.bottom+we.top>(Fe.defaultView.innerHeight||Fe.documentElement.clientHeight)&&(be=!1),be!=null&&!w){var $e=ee("div","​",null,`position: absolute;
                         top: `+(ce.top-he.viewOffset-Ou(Y.display))+`px;
                         height: `+(ce.bottom-ce.top+el(Y)+he.barHeight)+`px;
                         left: `+ce.left+"px; width: "+Math.max(2,ce.right-ce.left)+"px;");Y.display.lineSpace.appendChild($e),$e.scrollIntoView(be),Y.display.lineSpace.removeChild($e)}}})(_,T)}var P=g.maybeHiddenMarkers,j=g.maybeUnhiddenMarkers;if(P)for(var U=0;U<P.length;++U)P[U].lines.length||st(P[U],"hide");if(j)for(var X=0;X<j.length;++X)j[X].lines.length&&st(j[X],"unhide");S.wrapper.offsetHeight&&(E.scrollTop=_.display.scroller.scrollTop),g.changeObjs&&st(_,"changes",_,g.changeObjs),g.update&&g.update.finish()}function ua(g,_){if(g.curOp)return _();hh(g);try{return _()}finally{dh(g)}}function Ds(g,_){return function(){if(g.curOp)return _.apply(g,arguments);hh(g);try{return _.apply(g,arguments)}finally{dh(g)}}}function xo(g){return function(){if(this.curOp)return g.apply(this,arguments);hh(this);try{return g.apply(this,arguments)}finally{dh(this)}}}function Ls(g){return function(){var _=this.cm;if(!_||_.curOp)return g.apply(this,arguments);hh(_);try{return g.apply(this,arguments)}finally{dh(_)}}}function tp(g,_){g.doc.highlightFrontier<g.display.viewTo&&g.state.highlight.set(_,rt(uS,g))}function uS(g){var _=g.doc;if(!(_.highlightFrontier>=g.display.viewTo)){var S=+new Date+g.options.workTime,E=na(g,_.highlightFrontier),T=[];_.iter(E.line,Math.min(_.first+_.size,g.display.viewTo+500),function(P){if(E.line>=g.display.viewFrom){var j=P.styles,U=P.text.length>g.options.maxHighlightLength?Et(_.mode,E.state):null,X=Js(g,P,E,!0);U&&(E.state=U),P.styles=X.styles;var Y=P.styleClasses,ce=X.classes;ce?P.styleClasses=ce:Y&&(P.styleClasses=null);for(var he=!j||j.length!=P.styles.length||Y!=ce&&(!Y||!ce||Y.bgClass!=ce.bgClass||Y.textClass!=ce.textClass),we=0;!he&&we<j.length;++we)he=j[we]!=P.styles[we];he&&T.push(E.line),P.stateAfter=E.save(),E.nextLine()}else P.text.length<=g.options.maxHighlightLength&&Za(g,P.text,E),P.stateAfter=E.line%5==0?E.save():null,E.nextLine();if(+new Date>S)return tp(g,g.options.workDelay),!0}),_.highlightFrontier=E.line,_.modeFrontier=Math.max(_.modeFrontier,E.line),T.length&&ua(g,function(){for(var P=0;P<T.length;P++)dc(g,T[P],"text")})}}var um=function(g,_,S){var E=g.display;this.viewport=_,this.visible=am(E,g.doc,_),this.editorIsHidden=!E.wrapper.offsetWidth,this.wrapperHeight=E.wrapper.clientHeight,this.wrapperWidth=E.wrapper.clientWidth,this.oldDisplayWidth=Pu(g),this.force=S,this.dims=Cy(g),this.events=[]};function cS(g){if(g.hasFocus())return null;var _=Q(Ne(g));if(!_||!le(g.display.lineDiv,_))return null;var S={activeElt:_};if(window.getSelection){var E=Ge(g).getSelection();E.anchorNode&&E.extend&&le(g.display.lineDiv,E.anchorNode)&&(S.anchorNode=E.anchorNode,S.anchorOffset=E.anchorOffset,S.focusNode=E.focusNode,S.focusOffset=E.focusOffset)}return S}function Iy(g,_){var S=g.display,E=g.doc;if(_.editorIsHidden)return fc(g),!1;if(!_.force&&_.visible.from>=S.viewFrom&&_.visible.to<=S.viewTo&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo)&&S.renderedView==S.view&&D1(g)==0)return!1;z1(g)&&(fc(g),_.dims=Cy(g));var T=E.first+E.size,P=Math.max(_.visible.from-g.options.viewportMargin,E.first),j=Math.min(T,_.visible.to+g.options.viewportMargin);S.viewFrom<P&&P-S.viewFrom<20&&(P=Math.max(E.first,S.viewFrom)),S.viewTo>j&&S.viewTo-j<20&&(j=Math.min(T,S.viewTo)),go&&(P=yl(g.doc,P),j=iu(g.doc,j));var U=P!=S.viewFrom||j!=S.viewTo||S.lastWrapHeight!=_.wrapperHeight||S.lastWrapWidth!=_.wrapperWidth;(function(ce,he,we){var be=ce.display;be.view.length==0||he>=be.viewTo||we<=be.viewFrom?(be.view=As(ce,he,we),be.viewFrom=he):(be.viewFrom>he?be.view=As(ce,he,be.viewFrom).concat(be.view):be.viewFrom<he&&(be.view=be.view.slice(lh(ce,he))),be.viewFrom=he,be.viewTo<we?be.view=be.view.concat(As(ce,be.viewTo,we)):be.viewTo>we&&(be.view=be.view.slice(0,lh(ce,we)))),be.viewTo=we})(g,P,j),S.viewOffset=ne(Qe(g.doc,S.viewFrom)),g.display.mover.style.top=S.viewOffset+"px";var X=D1(g);if(!U&&X==0&&!_.force&&S.renderedView==S.view&&(S.updateLineNumbers==null||S.updateLineNumbers>=S.viewTo))return!1;var Y=cS(g);return X>4&&(S.lineDiv.style.display="none"),function(ce,he,we){var be=ce.display,Fe=ce.options.lineNumbers,$e=be.lineDiv,Oe=$e.firstChild;function Ue(Dt){var Vi=Dt.nextSibling;return f&&A&&ce.display.currentWheelTarget==Dt?Dt.style.display="none":Dt.parentNode.removeChild(Dt),Vi}for(var et=be.view,Ze=be.viewFrom,gt=0;gt<et.length;gt++){var ft=et[gt];if(!ft.hidden)if(ft.node&&ft.node.parentNode==$e){for(;Oe!=ft.node;)Oe=Ue(Oe);var mt=Fe&&he!=null&&he<=Ze&&ft.lineNumber;ft.changes&&(xt(ft.changes,"gutter")>-1&&(mt=!1),pd(ce,ft,Ze,we)),mt&&(W(ft.lineNumber),ft.lineNumber.appendChild(document.createTextNode(ci(ce.options,Ze)))),Oe=ft.node.nextSibling}else{var di=Hf(ce,ft,Ze,we);$e.insertBefore(di,Oe)}Ze+=ft.size}for(;Oe;)Oe=Ue(Oe)}(g,S.updateLineNumbers,_.dims),X>4&&(S.lineDiv.style.display=""),S.renderedView=S.view,function(ce){if(ce&&ce.activeElt&&ce.activeElt!=Q(ce.activeElt.ownerDocument)&&(ce.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(ce.activeElt.nodeName)&&ce.anchorNode&&le(document.body,ce.anchorNode)&&le(document.body,ce.focusNode))){var he=ce.activeElt.ownerDocument,we=he.defaultView.getSelection(),be=he.createRange();be.setEnd(ce.anchorNode,ce.anchorOffset),be.collapse(!1),we.removeAllRanges(),we.addRange(be),we.extend(ce.focusNode,ce.focusOffset)}}(Y),W(S.cursorDiv),W(S.selectionDiv),S.gutters.style.height=S.sizer.style.minHeight=0,U&&(S.lastWrapHeight=_.wrapperHeight,S.lastWrapWidth=_.wrapperWidth,tp(g,400)),S.updateLineNumbers=null,!0}function B1(g,_){for(var S=_.viewport,E=!0;;E=!1){if(E&&g.options.lineWrapping&&_.oldDisplayWidth!=Pu(g))E&&(_.visible=am(g.display,g.doc,S));else if(S&&S.top!=null&&(S={top:Math.min(g.doc.height+Xf(g.display)-Me(g),S.top)}),_.visible=am(g.display,g.doc,S),_.visible.from>=g.display.viewFrom&&_.visible.to<=g.display.viewTo)break;if(!Iy(g,_))break;om(g);var T=Qf(g);Zf(g),Ed(g,T),Fy(g,T),_.force=!1}_.signal(g,"update",g),g.display.viewFrom==g.display.reportedViewFrom&&g.display.viewTo==g.display.reportedViewTo||(_.signal(g,"viewportChange",g,g.display.viewFrom,g.display.viewTo),g.display.reportedViewFrom=g.display.viewFrom,g.display.reportedViewTo=g.display.viewTo)}function Oy(g,_){var S=new um(g,_);if(Iy(g,S)){om(g),B1(g,S);var E=Qf(g);Zf(g),Ed(g,E),Fy(g,E),S.finish()}}function Py(g){var _=g.gutters.offsetWidth;g.sizer.style.marginLeft=_+"px",hr(g,"gutterChanged",g)}function Fy(g,_){g.display.sizer.style.minHeight=_.docHeight+"px",g.display.heightForcer.style.top=_.docHeight+"px",g.display.gutters.style.height=_.docHeight+g.display.barHeight+el(g)+"px"}function j1(g){var _=g.display,S=_.view;if(_.alignWidgets||_.gutters.firstChild&&g.options.fixedGutter){for(var E=Sy(_)-_.scroller.scrollLeft+g.doc.scrollLeft,T=_.gutters.offsetWidth,P=E+"px",j=0;j<S.length;j++)if(!S[j].hidden){g.options.fixedGutter&&(S[j].gutter&&(S[j].gutter.style.left=P),S[j].gutterBackground&&(S[j].gutterBackground.style.left=P));var U=S[j].alignable;if(U)for(var X=0;X<U.length;X++)U[X].style.left=P}g.options.fixedGutter&&(_.gutters.style.left=E+T+"px")}}function z1(g){if(!g.options.lineNumbers)return!1;var _=g.doc,S=ci(g.options,_.first+_.size-1),E=g.display;if(S.length!=E.lineNumChars){var T=E.measure.appendChild(ee("div",[ee("div",S)],"CodeMirror-linenumber CodeMirror-gutter-elt")),P=T.firstChild.offsetWidth,j=T.offsetWidth-P;return E.lineGutter.style.width="",E.lineNumInnerWidth=Math.max(P,E.lineGutter.offsetWidth-j)+1,E.lineNumWidth=E.lineNumInnerWidth+j,E.lineNumChars=E.lineNumInnerWidth?S.length:-1,E.lineGutter.style.width=E.lineNumWidth+"px",Py(g.display),!0}return!1}function Ny(g,_){for(var S=[],E=!1,T=0;T<g.length;T++){var P=g[T],j=null;if(typeof P!="string"&&(j=P.style,P=P.className),P=="CodeMirror-linenumbers"){if(!_)continue;E=!0}S.push({className:P,style:j})}return _&&!E&&S.push({className:"CodeMirror-linenumbers",style:null}),S}function G1(g){var _=g.gutters,S=g.gutterSpecs;W(_),g.lineGutter=null;for(var E=0;E<S.length;++E){var T=S[E],P=T.className,j=T.style,U=_.appendChild(ee("div",null,"CodeMirror-gutter "+P));j&&(U.style.cssText=j),P=="CodeMirror-linenumbers"&&(g.lineGutter=U,U.style.width=(g.lineNumWidth||1)+"px")}_.style.display=S.length?"":"none",Py(g)}function ip(g){G1(g.display),Bo(g),j1(g)}function hS(g,_,S,E){var T=this;this.input=S,T.scrollbarFiller=ee("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=ee("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=te("div",null,"CodeMirror-code"),T.selectionDiv=ee("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=ee("div",null,"CodeMirror-cursors"),T.measure=ee("div",null,"CodeMirror-measure"),T.lineMeasure=ee("div",null,"CodeMirror-measure"),T.lineSpace=te("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var P=te("div",[T.lineSpace],"CodeMirror-lines");T.mover=ee("div",[P],null,"position: relative"),T.sizer=ee("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=ee("div",null,null,"position: absolute; height: 50px; width: 1px;"),T.gutters=ee("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=ee("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=ee("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),m&&y>=105&&(T.wrapper.style.clipPath="inset(0px)"),T.wrapper.setAttribute("translate","no"),h&&d<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),f||a&&R||(T.scroller.draggable=!0),g&&(g.appendChild?g.appendChild(T.wrapper):g(T.wrapper)),T.viewFrom=T.viewTo=_.first,T.reportedViewFrom=T.reportedViewTo=_.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=Ny(E.gutters,E.lineNumbers),G1(T),S.init(T)}um.prototype.signal=function(g,_){ct(g,_)&&this.events.push(arguments)},um.prototype.finish=function(){for(var g=0;g<this.events.length;g++)st.apply(null,this.events[g])};var cm=0,Fu=null;function U1(g){var _=g.wheelDeltaX,S=g.wheelDeltaY;return _==null&&g.detail&&g.axis==g.HORIZONTAL_AXIS&&(_=g.detail),S==null&&g.detail&&g.axis==g.VERTICAL_AXIS?S=g.detail:S==null&&(S=g.wheelDelta),{x:_,y:S}}function dS(g){var _=U1(g);return _.x*=Fu,_.y*=Fu,_}function q1(g,_){m&&y==102&&(g.display.chromeScrollHack==null?g.display.sizer.style.pointerEvents="none":clearTimeout(g.display.chromeScrollHack),g.display.chromeScrollHack=setTimeout(function(){g.display.chromeScrollHack=null,g.display.sizer.style.pointerEvents=""},100));var S=U1(_),E=S.x,T=S.y,P=Fu;_.deltaMode===0&&(E=_.deltaX,T=_.deltaY,P=1);var j=g.display,U=j.scroller,X=U.scrollWidth>U.clientWidth,Y=U.scrollHeight>U.clientHeight;if(E&&X||T&&Y){if(T&&A&&f){e:for(var ce=_.target,he=j.view;ce!=U;ce=ce.parentNode)for(var we=0;we<he.length;we++)if(he[we].node==ce){g.display.currentWheelTarget=ce;break e}}if(E&&!a&&!v&&P!=null)return T&&Y&&Jf(g,Math.max(0,U.scrollTop+T*P)),uh(g,Math.max(0,U.scrollLeft+E*P)),(!T||T&&Y)&&Yt(_),void(j.wheelStartX=null);if(T&&P!=null){var be=T*P,Fe=g.doc.scrollTop,$e=Fe+j.wrapper.clientHeight;be<0?Fe=Math.max(0,Fe+be-50):$e=Math.min(g.doc.height,$e+be+50),Oy(g,{top:Fe,bottom:$e})}cm<20&&_.deltaMode!==0&&(j.wheelStartX==null?(j.wheelStartX=U.scrollLeft,j.wheelStartY=U.scrollTop,j.wheelDX=E,j.wheelDY=T,setTimeout(function(){if(j.wheelStartX!=null){var Oe=U.scrollLeft-j.wheelStartX,Ue=U.scrollTop-j.wheelStartY,et=Ue&&j.wheelDY&&Ue/j.wheelDY||Oe&&j.wheelDX&&Oe/j.wheelDX;j.wheelStartX=j.wheelStartY=null,et&&(Fu=(Fu*cm+et)/(cm+1),++cm)}},200)):(j.wheelDX+=E,j.wheelDY+=T))}}h?Fu=-.53:a?Fu=15:m?Fu=-.7:b&&(Fu=-1/3);var La=function(g,_){this.ranges=g,this.primIndex=_};La.prototype.primary=function(){return this.ranges[this.primIndex]},La.prototype.equals=function(g){if(g==this)return!0;if(g.primIndex!=this.primIndex||g.ranges.length!=this.ranges.length)return!1;for(var _=0;_<this.ranges.length;_++){var S=this.ranges[_],E=g.ranges[_];if(!cn(S.anchor,E.anchor)||!cn(S.head,E.head))return!1}return!0},La.prototype.deepCopy=function(){for(var g=[],_=0;_<this.ranges.length;_++)g[_]=new Gn(Zn(this.ranges[_].anchor),Zn(this.ranges[_].head));return new La(g,this.primIndex)},La.prototype.somethingSelected=function(){for(var g=0;g<this.ranges.length;g++)if(!this.ranges[g].empty())return!0;return!1},La.prototype.contains=function(g,_){_||(_=g);for(var S=0;S<this.ranges.length;S++){var E=this.ranges[S];if(yt(_,E.from())>=0&&yt(g,E.to())<=0)return S}return-1};var Gn=function(g,_){this.anchor=g,this.head=_};function xl(g,_,S){var E=g&&g.options.selectionsMayTouch,T=_[S];_.sort(function(we,be){return yt(we.from(),be.from())}),S=xt(_,T);for(var P=1;P<_.length;P++){var j=_[P],U=_[P-1],X=yt(U.to(),j.from());if(E&&!j.empty()?X>0:X>=0){var Y=Kn(U.from(),j.from()),ce=zn(U.to(),j.to()),he=U.empty()?j.from()==j.head:U.from()==U.head;P<=S&&--S,_.splice(--P,2,new Gn(he?ce:Y,he?Y:ce))}}return new La(_,S)}function pc(g,_){return new La([new Gn(g,_||g)],0)}function gc(g){return g.text?Xe(g.from.line+g.text.length-1,se(g.text).length+(g.text.length==1?g.from.ch:0)):g.to}function V1(g,_){if(yt(g,_.from)<0)return g;if(yt(g,_.to)<=0)return gc(_);var S=g.line+_.text.length-(_.to.line-_.from.line)-1,E=g.ch;return g.line==_.to.line&&(E+=gc(_).ch-_.to.ch),Xe(S,E)}function $y(g,_){for(var S=[],E=0;E<g.sel.ranges.length;E++){var T=g.sel.ranges[E];S.push(new Gn(V1(T.anchor,_),V1(T.head,_)))}return xl(g.cm,S,g.sel.primIndex)}function H1(g,_,S){return g.line==_.line?Xe(S.line,g.ch-_.ch+S.ch):Xe(S.line+(g.line-_.line),g.ch)}function By(g){g.doc.mode=ke(g.options,g.doc.modeOption),np(g)}function np(g){g.doc.iter(function(_){_.stateAfter&&(_.stateAfter=null),_.styles&&(_.styles=null)}),g.doc.modeFrontier=g.doc.highlightFrontier=g.doc.first,tp(g,100),g.state.modeGen++,g.curOp&&Bo(g)}function W1(g,_){return _.from.ch==0&&_.to.ch==0&&se(_.text)==""&&(!g.cm||g.cm.options.wholeLineUpdateBefore)}function jy(g,_,S,E){function T(et){return S?S[et]:null}function P(et,Ze,gt){(function(ft,mt,di,Dt){ft.text=mt,ft.stateAfter&&(ft.stateAfter=null),ft.styles&&(ft.styles=null),ft.order!=null&&(ft.order=null),eu(ft),gl(ft,di);var Vi=Dt?Dt(ft):1;Vi!=ft.height&&Bt(ft,Vi)})(et,Ze,gt,E),hr(et,"change",et,_)}function j(et,Ze){for(var gt=[],ft=et;ft<Ze;++ft)gt.push(new Zt(Y[ft],T(ft),E));return gt}var U=_.from,X=_.to,Y=_.text,ce=Qe(g,U.line),he=Qe(g,X.line),we=se(Y),be=T(Y.length-1),Fe=X.line-U.line;if(_.full)g.insert(0,j(0,Y.length)),g.remove(Y.length,g.size-Y.length);else if(W1(g,_)){var $e=j(0,Y.length-1);P(he,he.text,be),Fe&&g.remove(U.line,Fe),$e.length&&g.insert(U.line,$e)}else if(ce==he)if(Y.length==1)P(ce,ce.text.slice(0,U.ch)+we+ce.text.slice(X.ch),be);else{var Oe=j(1,Y.length-1);Oe.push(new Zt(we+ce.text.slice(X.ch),be,E)),P(ce,ce.text.slice(0,U.ch)+Y[0],T(0)),g.insert(U.line+1,Oe)}else if(Y.length==1)P(ce,ce.text.slice(0,U.ch)+Y[0]+he.text.slice(X.ch),T(0)),g.remove(U.line+1,Fe);else{P(ce,ce.text.slice(0,U.ch)+Y[0],T(0)),P(he,we+he.text.slice(X.ch),be);var Ue=j(1,Y.length-1);Fe>1&&g.remove(U.line+1,Fe-1),g.insert(U.line+1,Ue)}hr(g,"change",g,_)}function mc(g,_,S){(function E(T,P,j){if(T.linked)for(var U=0;U<T.linked.length;++U){var X=T.linked[U];if(X.doc!=P){var Y=j&&X.sharedHist;S&&!Y||(_(X.doc,Y),E(X.doc,T,Y))}}})(g,null,!0)}function X1(g,_){if(_.cm)throw new Error("This document is already in use.");g.doc=_,_.cm=g,Ty(g),By(g),Y1(g),g.options.direction=_.direction,g.options.lineWrapping||Je(g),g.options.mode=_.modeOption,Bo(g)}function Y1(g){(g.doc.direction=="rtl"?z:B)(g.display.lineDiv,"CodeMirror-rtl")}function hm(g){this.done=[],this.undone=[],this.undoDepth=g?g.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=g?g.maxGeneration:1}function zy(g,_){var S={from:Zn(_.from),to:gc(_),text:_i(g,_.from,_.to)};return J1(g,S,_.from.line,_.to.line+1),mc(g,function(E){return J1(E,S,_.from.line,_.to.line+1)},!0),S}function Z1(g){for(;g.length&&se(g).ranges;)g.pop()}function K1(g,_,S,E){var T=g.history;T.undone.length=0;var P,j,U=+new Date;if((T.lastOp==E||T.lastOrigin==_.origin&&_.origin&&(_.origin.charAt(0)=="+"&&T.lastModTime>U-(g.cm?g.cm.options.historyEventDelay:500)||_.origin.charAt(0)=="*"))&&(P=function(Y,ce){return ce?(Z1(Y.done),se(Y.done)):Y.done.length&&!se(Y.done).ranges?se(Y.done):Y.done.length>1&&!Y.done[Y.done.length-2].ranges?(Y.done.pop(),se(Y.done)):void 0}(T,T.lastOp==E)))j=se(P.changes),yt(_.from,_.to)==0&&yt(_.from,j.to)==0?j.to=gc(_):P.changes.push(zy(g,_));else{var X=se(T.done);for(X&&X.ranges||dm(g.sel,T.done),P={changes:[zy(g,_)],generation:T.generation},T.done.push(P);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(S),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=U,T.lastOp=T.lastSelOp=E,T.lastOrigin=T.lastSelOrigin=_.origin,j||st(g,"historyAdded")}function fS(g,_,S,E){var T=g.history,P=E&&E.origin;S==T.lastSelOp||P&&T.lastSelOrigin==P&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==P||function(j,U,X,Y){var ce=U.charAt(0);return ce=="*"||ce=="+"&&X.ranges.length==Y.ranges.length&&X.somethingSelected()==Y.somethingSelected()&&new Date-j.history.lastSelTime<=(j.cm?j.cm.options.historyEventDelay:500)}(g,P,se(T.done),_))?T.done[T.done.length-1]=_:dm(_,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=P,T.lastSelOp=S,E&&E.clearRedo!==!1&&Z1(T.undone)}function dm(g,_){var S=se(_);S&&S.ranges&&S.equals(g)||_.push(g)}function J1(g,_,S,E){var T=_["spans_"+g.id],P=0;g.iter(Math.max(g.first,S),Math.min(g.first+g.size,E),function(j){j.markedSpans&&((T||(T=_["spans_"+g.id]={}))[P]=j.markedSpans),++P})}function pS(g){if(!g)return null;for(var _,S=0;S<g.length;++S)g[S].marker.explicitlyCleared?_||(_=g.slice(0,S)):_&&_.push(g[S]);return _?_.length?_:null:g}function Q1(g,_){var S=function(ce,he){var we=he["spans_"+ce.id];if(!we)return null;for(var be=[],Fe=0;Fe<he.text.length;++Fe)be.push(pS(we[Fe]));return be}(g,_),E=Mu(g,_);if(!S)return E;if(!E)return S;for(var T=0;T<S.length;++T){var P=S[T],j=E[T];if(P&&j)e:for(var U=0;U<j.length;++U){for(var X=j[U],Y=0;Y<P.length;++Y)if(P[Y].marker==X.marker)continue e;P.push(X)}else j&&(S[T]=j)}return S}function Cd(g,_,S){for(var E=[],T=0;T<g.length;++T){var P=g[T];if(P.ranges)E.push(S?La.prototype.deepCopy.call(P):P);else{var j=P.changes,U=[];E.push({changes:U});for(var X=0;X<j.length;++X){var Y=j[X],ce=void 0;if(U.push({from:Y.from,to:Y.to,text:Y.text}),_)for(var he in Y)(ce=he.match(/^spans_(\d+)$/))&&xt(_,Number(ce[1]))>-1&&(se(U)[he]=Y[he],delete Y[he])}}}return E}function Gy(g,_,S,E){if(E){var T=g.anchor;if(S){var P=yt(_,T)<0;P!=yt(S,T)<0?(T=_,_=S):P!=yt(_,S)<0&&(_=S)}return new Gn(T,_)}return new Gn(S||_,_)}function fm(g,_,S,E,T){T==null&&(T=g.cm&&(g.cm.display.shift||g.extend)),to(g,new La([Gy(g.sel.primary(),_,S,T)],0),E)}function ex(g,_,S){for(var E=[],T=g.cm&&(g.cm.display.shift||g.extend),P=0;P<g.sel.ranges.length;P++)E[P]=Gy(g.sel.ranges[P],_[P],null,T);to(g,xl(g.cm,E,g.sel.primIndex),S)}function Uy(g,_,S,E){var T=g.sel.ranges.slice(0);T[_]=S,to(g,xl(g.cm,T,g.sel.primIndex),E)}function tx(g,_,S,E){to(g,pc(_,S),E)}function ix(g,_,S){var E=g.history.done,T=se(E);T&&T.ranges?(E[E.length-1]=_,pm(g,_,S)):to(g,_,S)}function to(g,_,S){pm(g,_,S),fS(g,g.sel,g.cm?g.cm.curOp.id:NaN,S)}function pm(g,_,S){(ct(g,"beforeSelectionChange")||g.cm&&ct(g.cm,"beforeSelectionChange"))&&(_=function(T,P,j){var U={ranges:P.ranges,update:function(X){this.ranges=[];for(var Y=0;Y<X.length;Y++)this.ranges[Y]=new Gn(jt(T,X[Y].anchor),jt(T,X[Y].head))},origin:j&&j.origin};return st(T,"beforeSelectionChange",T,U),T.cm&&st(T.cm,"beforeSelectionChange",T.cm,U),U.ranges!=P.ranges?xl(T.cm,U.ranges,U.ranges.length-1):P}(g,_,S));var E=S&&S.bias||(yt(_.primary().head,g.sel.primary().head)<0?-1:1);nx(g,sx(g,_,E,!0)),S&&S.scroll===!1||!g.cm||g.cm.getOption("readOnly")=="nocursor"||wd(g.cm)}function nx(g,_){_.equals(g.sel)||(g.sel=_,g.cm&&(g.cm.curOp.updateInput=1,g.cm.curOp.selectionChanged=!0,It(g.cm)),hr(g,"cursorActivity",g))}function rx(g){nx(g,sx(g,g.sel,null,!1))}function sx(g,_,S,E){for(var T,P=0;P<_.ranges.length;P++){var j=_.ranges[P],U=_.ranges.length==g.sel.ranges.length&&g.sel.ranges[P],X=gm(g,j.anchor,U&&U.anchor,S,E),Y=j.head==j.anchor?X:gm(g,j.head,U&&U.head,S,E);(T||X!=j.anchor||Y!=j.head)&&(T||(T=_.ranges.slice(0,P)),T[P]=new Gn(X,Y))}return T?xl(g.cm,T,_.primIndex):_}function Sd(g,_,S,E,T){var P=Qe(g,_.line);if(P.markedSpans)for(var j=0;j<P.markedSpans.length;++j){var U=P.markedSpans[j],X=U.marker,Y="selectLeft"in X?!X.selectLeft:X.inclusiveLeft,ce="selectRight"in X?!X.selectRight:X.inclusiveRight;if((U.from==null||(Y?U.from<=_.ch:U.from<_.ch))&&(U.to==null||(ce?U.to>=_.ch:U.to>_.ch))){if(T&&(st(X,"beforeCursorEnter"),X.explicitlyCleared)){if(P.markedSpans){--j;continue}break}if(!X.atomic)continue;if(S){var he=X.find(E<0?1:-1),we=void 0;if((E<0?ce:Y)&&(he=ox(g,he,-E,he&&he.line==_.line?P:null)),he&&he.line==_.line&&(we=yt(he,S))&&(E<0?we<0:we>0))return Sd(g,he,_,E,T)}var be=X.find(E<0?-1:1);return(E<0?Y:ce)&&(be=ox(g,be,E,be.line==_.line?P:null)),be?Sd(g,be,_,E,T):null}}return _}function gm(g,_,S,E,T){var P=E||1,j=Sd(g,_,S,P,T)||!T&&Sd(g,_,S,P,!0)||Sd(g,_,S,-P,T)||!T&&Sd(g,_,S,-P,!0);return j||(g.cantEdit=!0,Xe(g.first,0))}function ox(g,_,S,E){return S<0&&_.ch==0?_.line>g.first?jt(g,Xe(_.line-1)):null:S>0&&_.ch==(E||Qe(g,_.line)).text.length?_.line<g.first+g.size-1?Xe(_.line+1,0):null:new Xe(_.line,_.ch+S)}function ax(g){g.setSelection(Xe(g.firstLine(),0),Xe(g.lastLine()),Ct)}function lx(g,_,S){var E={canceled:!1,from:_.from,to:_.to,text:_.text,origin:_.origin,cancel:function(){return E.canceled=!0}};return S&&(E.update=function(T,P,j,U){T&&(E.from=jt(g,T)),P&&(E.to=jt(g,P)),j&&(E.text=j),U!==void 0&&(E.origin=U)}),st(g,"beforeChange",g,E),g.cm&&st(g.cm,"beforeChange",g.cm,E),E.canceled?(g.cm&&(g.cm.curOp.updateInput=2),null):{from:E.from,to:E.to,text:E.text,origin:E.origin}}function Td(g,_,S){if(g.cm){if(!g.cm.curOp)return Ds(g.cm,Td)(g,_,S);if(g.cm.state.suppressEdits)return}if(!(ct(g,"beforeChange")||g.cm&&ct(g.cm,"beforeChange"))||(_=lx(g,_,!0))){var E=Fo&&!S&&function(P,j,U){var X=null;if(P.iter(j.line,U.line+1,function(et){if(et.markedSpans)for(var Ze=0;Ze<et.markedSpans.length;++Ze){var gt=et.markedSpans[Ze].marker;!gt.readOnly||X&&xt(X,gt)!=-1||(X||(X=[])).push(gt)}}),!X)return null;for(var Y=[{from:j,to:U}],ce=0;ce<X.length;++ce)for(var he=X[ce],we=he.find(0),be=0;be<Y.length;++be){var Fe=Y[be];if(!(yt(Fe.to,we.from)<0||yt(Fe.from,we.to)>0)){var $e=[be,1],Oe=yt(Fe.from,we.from),Ue=yt(Fe.to,we.to);(Oe<0||!he.inclusiveLeft&&!Oe)&&$e.push({from:Fe.from,to:we.from}),(Ue>0||!he.inclusiveRight&&!Ue)&&$e.push({from:we.to,to:Fe.to}),Y.splice.apply(Y,$e),be+=$e.length-3}}return Y}(g,_.from,_.to);if(E)for(var T=E.length-1;T>=0;--T)ux(g,{from:E[T].from,to:E[T].to,text:T?[""]:_.text,origin:_.origin});else ux(g,_)}}function ux(g,_){if(_.text.length!=1||_.text[0]!=""||yt(_.from,_.to)!=0){var S=$y(g,_);K1(g,_,S,g.cm?g.cm.curOp.id:NaN),rp(g,_,S,Mu(g,_));var E=[];mc(g,function(T,P){P||xt(E,T.history)!=-1||(fx(T.history,_),E.push(T.history)),rp(T,_,null,Mu(T,_))})}}function mm(g,_,S){var E=g.cm&&g.cm.state.suppressEdits;if(!E||S){for(var T,P=g.history,j=g.sel,U=_=="undo"?P.done:P.undone,X=_=="undo"?P.undone:P.done,Y=0;Y<U.length&&(T=U[Y],S?!T.ranges||T.equals(g.sel):T.ranges);Y++);if(Y!=U.length){for(P.lastOrigin=P.lastSelOrigin=null;;){if(!(T=U.pop()).ranges){if(E)return void U.push(T);break}if(dm(T,X),S&&!T.equals(g.sel))return void to(g,T,{clearRedo:!1});j=T}var ce=[];dm(j,X),X.push({changes:ce,generation:P.generation}),P.generation=T.generation||++P.maxGeneration;for(var he=ct(g,"beforeChange")||g.cm&&ct(g.cm,"beforeChange"),we=function($e){var Oe=T.changes[$e];if(Oe.origin=_,he&&!lx(g,Oe,!1))return U.length=0,{};ce.push(zy(g,Oe));var Ue=$e?$y(g,Oe):se(U);rp(g,Oe,Ue,Q1(g,Oe)),!$e&&g.cm&&g.cm.scrollIntoView({from:Oe.from,to:gc(Oe)});var et=[];mc(g,function(Ze,gt){gt||xt(et,Ze.history)!=-1||(fx(Ze.history,Oe),et.push(Ze.history)),rp(Ze,Oe,null,Q1(Ze,Oe))})},be=T.changes.length-1;be>=0;--be){var Fe=we(be);if(Fe)return Fe.v}}}}function cx(g,_){if(_!=0&&(g.first+=_,g.sel=new La(re(g.sel.ranges,function(T){return new Gn(Xe(T.anchor.line+_,T.anchor.ch),Xe(T.head.line+_,T.head.ch))}),g.sel.primIndex),g.cm)){Bo(g.cm,g.first,g.first-_,_);for(var S=g.cm.display,E=S.viewFrom;E<S.viewTo;E++)dc(g.cm,E,"gutter")}}function rp(g,_,S,E){if(g.cm&&!g.cm.curOp)return Ds(g.cm,rp)(g,_,S,E);if(_.to.line<g.first)cx(g,_.text.length-1-(_.to.line-_.from.line));else if(!(_.from.line>g.lastLine())){if(_.from.line<g.first){var T=_.text.length-1-(g.first-_.from.line);cx(g,T),_={from:Xe(g.first,0),to:Xe(_.to.line+T,_.to.ch),text:[se(_.text)],origin:_.origin}}var P=g.lastLine();_.to.line>P&&(_={from:_.from,to:Xe(P,Qe(g,P).text.length),text:[_.text[0]],origin:_.origin}),_.removed=_i(g,_.from,_.to),S||(S=$y(g,_)),g.cm?function(j,U,X){var Y=j.doc,ce=j.display,he=U.from,we=U.to,be=!1,Fe=he.line;j.options.lineWrapping||(Fe=zt(ys(Qe(Y,he.line))),Y.iter(Fe,we.line+1,function(Ze){if(Ze==ce.maxLine)return be=!0,!0})),Y.sel.contains(U.from,U.to)>-1&&It(j),jy(Y,U,X,k1(j)),j.options.lineWrapping||(Y.iter(Fe,he.line+U.text.length,function(Ze){var gt=Ie(Ze);gt>ce.maxLineLength&&(ce.maxLine=Ze,ce.maxLineLength=gt,ce.maxLineChanged=!0,be=!1)}),be&&(j.curOp.updateMaxLine=!0)),function(Ze,gt){if(Ze.modeFrontier=Math.min(Ze.modeFrontier,gt),!(Ze.highlightFrontier<gt-10)){for(var ft=Ze.first,mt=gt-1;mt>ft;mt--){var di=Qe(Ze,mt).stateAfter;if(di&&(!(di instanceof gs)||mt+di.lookAhead<gt)){ft=mt+1;break}}Ze.highlightFrontier=Math.min(Ze.highlightFrontier,ft)}}(Y,he.line),tp(j,400);var $e=U.text.length-(we.line-he.line)-1;U.full?Bo(j):he.line!=we.line||U.text.length!=1||W1(j.doc,U)?Bo(j,he.line,we.line+1,$e):dc(j,he.line,"text");var Oe=ct(j,"changes"),Ue=ct(j,"change");if(Ue||Oe){var et={from:he,to:we,text:U.text,removed:U.removed,origin:U.origin};Ue&&hr(j,"change",j,et),Oe&&(j.curOp.changeObjs||(j.curOp.changeObjs=[])).push(et)}j.display.selForContextMenu=null}(g.cm,_,E):jy(g,_,E),pm(g,S,Ct),g.cantEdit&&gm(g,Xe(g.firstLine(),0))&&(g.cantEdit=!1)}}function Ad(g,_,S,E,T){var P;E||(E=S),yt(E,S)<0&&(S=(P=[E,S])[0],E=P[1]),typeof _=="string"&&(_=g.splitLines(_)),Td(g,{from:S,to:E,text:_,origin:T})}function hx(g,_,S,E){S<g.line?g.line+=E:_<g.line&&(g.line=_,g.ch=0)}function dx(g,_,S,E){for(var T=0;T<g.length;++T){var P=g[T],j=!0;if(P.ranges){P.copied||((P=g[T]=P.deepCopy()).copied=!0);for(var U=0;U<P.ranges.length;U++)hx(P.ranges[U].anchor,_,S,E),hx(P.ranges[U].head,_,S,E)}else{for(var X=0;X<P.changes.length;++X){var Y=P.changes[X];if(S<Y.from.line)Y.from=Xe(Y.from.line+E,Y.from.ch),Y.to=Xe(Y.to.line+E,Y.to.ch);else if(_<=Y.to.line){j=!1;break}}j||(g.splice(0,T+1),T=0)}}}function fx(g,_){var S=_.from.line,E=_.to.line,T=_.text.length-(E-S)-1;dx(g.done,S,E,T),dx(g.undone,S,E,T)}function sp(g,_,S,E){var T=_,P=_;return typeof _=="number"?P=Qe(g,Pn(g,_)):T=zt(_),T==null?null:(E(P,T)&&g.cm&&dc(g.cm,T,S),P)}function op(g){this.lines=g,this.parent=null;for(var _=0,S=0;S<g.length;++S)g[S].parent=this,_+=g[S].height;this.height=_}function ap(g){this.children=g;for(var _=0,S=0,E=0;E<g.length;++E){var T=g[E];_+=T.chunkSize(),S+=T.height,T.parent=this}this.size=_,this.height=S,this.parent=null}Gn.prototype.from=function(){return Kn(this.anchor,this.head)},Gn.prototype.to=function(){return zn(this.anchor,this.head)},Gn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},op.prototype={chunkSize:function(){return this.lines.length},removeInner:function(g,_){for(var S=g,E=g+_;S<E;++S){var T=this.lines[S];this.height-=T.height,Xt(T),hr(T,"delete")}this.lines.splice(g,_)},collapse:function(g){g.push.apply(g,this.lines)},insertInner:function(g,_,S){this.height+=S,this.lines=this.lines.slice(0,g).concat(_).concat(this.lines.slice(g));for(var E=0;E<_.length;++E)_[E].parent=this},iterN:function(g,_,S){for(var E=g+_;g<E;++g)if(S(this.lines[g]))return!0}},ap.prototype={chunkSize:function(){return this.size},removeInner:function(g,_){this.size-=_;for(var S=0;S<this.children.length;++S){var E=this.children[S],T=E.chunkSize();if(g<T){var P=Math.min(_,T-g),j=E.height;if(E.removeInner(g,P),this.height-=j-E.height,T==P&&(this.children.splice(S--,1),E.parent=null),(_-=P)==0)break;g=0}else g-=T}if(this.size-_<25&&(this.children.length>1||!(this.children[0]instanceof op))){var U=[];this.collapse(U),this.children=[new op(U)],this.children[0].parent=this}},collapse:function(g){for(var _=0;_<this.children.length;++_)this.children[_].collapse(g)},insertInner:function(g,_,S){this.size+=_.length,this.height+=S;for(var E=0;E<this.children.length;++E){var T=this.children[E],P=T.chunkSize();if(g<=P){if(T.insertInner(g,_,S),T.lines&&T.lines.length>50){for(var j=T.lines.length%25+25,U=j;U<T.lines.length;){var X=new op(T.lines.slice(U,U+=25));T.height-=X.height,this.children.splice(++E,0,X),X.parent=this}T.lines=T.lines.slice(0,j),this.maybeSpill()}break}g-=P}},maybeSpill:function(){if(!(this.children.length<=10)){var g=this;do{var _=new ap(g.children.splice(g.children.length-5,5));if(g.parent){g.size-=_.size,g.height-=_.height;var S=xt(g.parent.children,g);g.parent.children.splice(S+1,0,_)}else{var E=new ap(g.children);E.parent=g,g.children=[E,_],g=E}_.parent=g.parent}while(g.children.length>10);g.parent.maybeSpill()}},iterN:function(g,_,S){for(var E=0;E<this.children.length;++E){var T=this.children[E],P=T.chunkSize();if(g<P){var j=Math.min(_,P-g);if(T.iterN(g,j,S))return!0;if((_-=j)==0)break;g=0}else g-=P}}};var lp=function(g,_,S){if(S)for(var E in S)S.hasOwnProperty(E)&&(this[E]=S[E]);this.doc=g,this.node=_};function px(g,_,S){ne(_)<(g.curOp&&g.curOp.scrollTop||g.doc.scrollTop)&&My(g,S)}lp.prototype.clear=function(){var g=this.doc.cm,_=this.line.widgets,S=this.line,E=zt(S);if(E!=null&&_){for(var T=0;T<_.length;++T)_[T]==this&&_.splice(T--,1);_.length||(S.widgets=null);var P=hc(this);Bt(S,Math.max(0,S.height-P)),g&&(ua(g,function(){px(g,S,-P),dc(g,E,"widget")}),hr(g,"lineWidgetCleared",g,this,E))}},lp.prototype.changed=function(){var g=this,_=this.height,S=this.doc.cm,E=this.line;this.height=null;var T=hc(this)-_;T&&(_o(this.doc,E)||Bt(E,E.height+T),S&&ua(S,function(){S.curOp.forceUpdate=!0,px(S,E,T),hr(S,"lineWidgetChanged",S,g,zt(E))}))},Ht(lp);var gx=0,yc=function(g,_){this.lines=[],this.type=_,this.doc=g,this.id=++gx};function Rd(g,_,S,E,T){if(E&&E.shared)return function(he,we,be,Fe,$e){(Fe=Be(Fe)).shared=!1;var Oe=[Rd(he,we,be,Fe,$e)],Ue=Oe[0],et=Fe.widgetNode;return mc(he,function(Ze){et&&(Fe.widgetNode=et.cloneNode(!0)),Oe.push(Rd(Ze,jt(Ze,we),jt(Ze,be),Fe,$e));for(var gt=0;gt<Ze.linked.length;++gt)if(Ze.linked[gt].isParent)return;Ue=se(Oe)}),new up(Oe,Ue)}(g,_,S,E,T);if(g.cm&&!g.cm.curOp)return Ds(g.cm,Rd)(g,_,S,E,T);var P=new yc(g,T),j=yt(_,S);if(E&&Be(E,P,!1),j>0||j==0&&P.clearWhenEmpty!==!1)return P;if(P.replacedWith&&(P.collapsed=!0,P.widgetNode=te("span",[P.replacedWith],"CodeMirror-widget"),E.handleMouseEvents||P.widgetNode.setAttribute("cm-ignore-events","true"),E.insertLeft&&(P.widgetNode.insertLeft=!0)),P.collapsed){if(la(g,_.line,_,S,P)||_.line!=S.line&&la(g,S.line,_,S,P))throw new Error("Inserting collapsed marker partially overlapping an existing one");go=!0}P.addToHistory&&K1(g,{from:_,to:S,origin:"markText"},g.sel,NaN);var U,X=_.line,Y=g.cm;if(g.iter(X,S.line+1,function(he){Y&&P.collapsed&&!Y.options.lineWrapping&&ys(he)==Y.display.maxLine&&(U=!0),P.collapsed&&X!=_.line&&Bt(he,0),function(we,be,Fe){var $e=Fe&&window.WeakSet&&(Fe.markedSpans||(Fe.markedSpans=new WeakSet));$e&&we.markedSpans&&$e.has(we.markedSpans)?we.markedSpans.push(be):(we.markedSpans=we.markedSpans?we.markedSpans.concat([be]):[be],$e&&$e.add(we.markedSpans)),be.marker.attachLine(we)}(he,new mo(P,X==_.line?_.ch:null,X==S.line?S.ch:null),g.cm&&g.cm.curOp),++X}),P.collapsed&&g.iter(_.line,S.line+1,function(he){_o(g,he)&&Bt(he,0)}),P.clearOnEnter&&Re(P,"beforeCursorEnter",function(){return P.clear()}),P.readOnly&&(Fo=!0,(g.history.done.length||g.history.undone.length)&&g.clearHistory()),P.collapsed&&(P.id=++gx,P.atomic=!0),Y){if(U&&(Y.curOp.updateMaxLine=!0),P.collapsed)Bo(Y,_.line,S.line+1);else if(P.className||P.startStyle||P.endStyle||P.css||P.attributes||P.title)for(var ce=_.line;ce<=S.line;ce++)dc(Y,ce,"text");P.atomic&&rx(Y.doc),hr(Y,"markerAdded",Y,P)}return P}yc.prototype.clear=function(){if(!this.explicitlyCleared){var g=this.doc.cm,_=g&&!g.curOp;if(_&&hh(g),ct(this,"clear")){var S=this.find();S&&hr(this,"clear",S.from,S.to)}for(var E=null,T=null,P=0;P<this.lines.length;++P){var j=this.lines[P],U=yo(j.markedSpans,this);g&&!this.collapsed?dc(g,zt(j),"text"):g&&(U.to!=null&&(T=zt(j)),U.from!=null&&(E=zt(j))),j.markedSpans=aa(j.markedSpans,U),U.from==null&&this.collapsed&&!_o(this.doc,j)&&g&&Bt(j,_d(g.display))}if(g&&this.collapsed&&!g.options.lineWrapping)for(var X=0;X<this.lines.length;++X){var Y=ys(this.lines[X]),ce=Ie(Y);ce>g.display.maxLineLength&&(g.display.maxLine=Y,g.display.maxLineLength=ce,g.display.maxLineChanged=!0)}E!=null&&g&&this.collapsed&&Bo(g,E,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,g&&rx(g.doc)),g&&hr(g,"markerCleared",g,this,E,T),_&&dh(g),this.parent&&this.parent.clear()}},yc.prototype.find=function(g,_){var S,E;g==null&&this.type=="bookmark"&&(g=1);for(var T=0;T<this.lines.length;++T){var P=this.lines[T],j=yo(P.markedSpans,this);if(j.from!=null&&(S=Xe(_?P:zt(P),j.from),g==-1))return S;if(j.to!=null&&(E=Xe(_?P:zt(P),j.to),g==1))return E}return S&&{from:S,to:E}},yc.prototype.changed=function(){var g=this,_=this.find(-1,!0),S=this,E=this.doc.cm;_&&E&&ua(E,function(){var T=_.line,P=zt(_.line),j=Fn(E,P);if(j&&(x1(j),E.curOp.selectionChanged=E.curOp.forceUpdate=!0),E.curOp.updateMaxLine=!0,!_o(S.doc,T)&&S.height!=null){var U=S.height;S.height=null;var X=hc(S)-U;X&&Bt(T,T.height+X)}hr(E,"markerChanged",E,g)})},yc.prototype.attachLine=function(g){if(!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;_.maybeHiddenMarkers&&xt(_.maybeHiddenMarkers,this)!=-1||(_.maybeUnhiddenMarkers||(_.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(g)},yc.prototype.detachLine=function(g){if(this.lines.splice(xt(this.lines,g),1),!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;(_.maybeHiddenMarkers||(_.maybeHiddenMarkers=[])).push(this)}},Ht(yc);var up=function(g,_){this.markers=g,this.primary=_;for(var S=0;S<g.length;++S)g[S].parent=this};function mx(g){return g.findMarks(Xe(g.first,0),g.clipPos(Xe(g.lastLine())),function(_){return _.parent})}function gS(g){for(var _=function(E){var T=g[E],P=[T.primary.doc];mc(T.primary.doc,function(X){return P.push(X)});for(var j=0;j<T.markers.length;j++){var U=T.markers[j];xt(P,U.doc)==-1&&(U.parent=null,T.markers.splice(j--,1))}},S=0;S<g.length;S++)_(S)}up.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var g=0;g<this.markers.length;++g)this.markers[g].clear();hr(this,"clear")}},up.prototype.find=function(g,_){return this.primary.find(g,_)},Ht(up);var mS=0,jo=function(g,_,S,E,T){if(!(this instanceof jo))return new jo(g,_,S,E,T);S==null&&(S=0),ap.call(this,[new op([new Zt("",null)])]),this.first=S,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=S;var P=Xe(S,0);this.sel=pc(P),this.history=new hm(null),this.id=++mS,this.modeOption=_,this.lineSep=E,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof g=="string"&&(g=this.splitLines(g)),jy(this,{from:P,to:P,text:g}),to(this,pc(P),Ct)};jo.prototype=I(ap.prototype,{constructor:jo,iter:function(g,_,S){S?this.iterN(g-this.first,_-g,S):this.iterN(this.first,this.first+this.size,g)},insert:function(g,_){for(var S=0,E=0;E<_.length;++E)S+=_[E].height;this.insertInner(g-this.first,_,S)},remove:function(g,_){this.removeInner(g-this.first,_)},getValue:function(g){var _=bi(this,this.first,this.first+this.size);return g===!1?_:_.join(g||this.lineSeparator())},setValue:Ls(function(g){var _=Xe(this.first,0),S=this.first+this.size-1;Td(this,{from:_,to:Xe(S,Qe(this,S).text.length),text:this.splitLines(g),origin:"setValue",full:!0},!0),this.cm&&Kf(this.cm,0,0),to(this,pc(_),Ct)}),replaceRange:function(g,_,S,E){Ad(this,g,_=jt(this,_),S=S?jt(this,S):_,E)},getRange:function(g,_,S){var E=_i(this,jt(this,g),jt(this,_));return S===!1?E:S===""?E.join(""):E.join(S||this.lineSeparator())},getLine:function(g){var _=this.getLineHandle(g);return _&&_.text},getLineHandle:function(g){if(Ar(this,g))return Qe(this,g)},getLineNumber:function(g){return zt(g)},getLineHandleVisualStart:function(g){return typeof g=="number"&&(g=Qe(this,g)),ys(g)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(g){return jt(this,g)},getCursor:function(g){var _=this.sel.primary();return g==null||g=="head"?_.head:g=="anchor"?_.anchor:g=="end"||g=="to"||g===!1?_.to():_.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ls(function(g,_,S){tx(this,jt(this,typeof g=="number"?Xe(g,_||0):g),null,S)}),setSelection:Ls(function(g,_,S){tx(this,jt(this,g),jt(this,_||g),S)}),extendSelection:Ls(function(g,_,S){fm(this,jt(this,g),_&&jt(this,_),S)}),extendSelections:Ls(function(g,_){ex(this,Yr(this,g),_)}),extendSelectionsBy:Ls(function(g,_){ex(this,Yr(this,re(this.sel.ranges,g)),_)}),setSelections:Ls(function(g,_,S){if(g.length){for(var E=[],T=0;T<g.length;T++)E[T]=new Gn(jt(this,g[T].anchor),jt(this,g[T].head||g[T].anchor));_==null&&(_=Math.min(g.length-1,this.sel.primIndex)),to(this,xl(this.cm,E,_),S)}}),addSelection:Ls(function(g,_,S){var E=this.sel.ranges.slice(0);E.push(new Gn(jt(this,g),jt(this,_||g))),to(this,xl(this.cm,E,E.length-1),S)}),getSelection:function(g){for(var _,S=this.sel.ranges,E=0;E<S.length;E++){var T=_i(this,S[E].from(),S[E].to());_=_?_.concat(T):T}return g===!1?_:_.join(g||this.lineSeparator())},getSelections:function(g){for(var _=[],S=this.sel.ranges,E=0;E<S.length;E++){var T=_i(this,S[E].from(),S[E].to());g!==!1&&(T=T.join(g||this.lineSeparator())),_[E]=T}return _},replaceSelection:function(g,_,S){for(var E=[],T=0;T<this.sel.ranges.length;T++)E[T]=g;this.replaceSelections(E,_,S||"+input")},replaceSelections:Ls(function(g,_,S){for(var E=[],T=this.sel,P=0;P<T.ranges.length;P++){var j=T.ranges[P];E[P]={from:j.from(),to:j.to(),text:this.splitLines(g[P]),origin:S}}for(var U=_&&_!="end"&&function(Y,ce,he){for(var we=[],be=Xe(Y.first,0),Fe=be,$e=0;$e<ce.length;$e++){var Oe=ce[$e],Ue=H1(Oe.from,be,Fe),et=H1(gc(Oe),be,Fe);if(be=Oe.to,Fe=et,he=="around"){var Ze=Y.sel.ranges[$e],gt=yt(Ze.head,Ze.anchor)<0;we[$e]=new Gn(gt?et:Ue,gt?Ue:et)}else we[$e]=new Gn(Ue,Ue)}return new La(we,Y.sel.primIndex)}(this,E,_),X=E.length-1;X>=0;X--)Td(this,E[X]);U?ix(this,U):this.cm&&wd(this.cm)}),undo:Ls(function(){mm(this,"undo")}),redo:Ls(function(){mm(this,"redo")}),undoSelection:Ls(function(){mm(this,"undo",!0)}),redoSelection:Ls(function(){mm(this,"redo",!0)}),setExtending:function(g){this.extend=g},getExtending:function(){return this.extend},historySize:function(){for(var g=this.history,_=0,S=0,E=0;E<g.done.length;E++)g.done[E].ranges||++_;for(var T=0;T<g.undone.length;T++)g.undone[T].ranges||++S;return{undo:_,redo:S}},clearHistory:function(){var g=this;this.history=new hm(this.history),mc(this,function(_){return _.history=g.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(g){return g&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(g){return this.history.generation==(g||this.cleanGeneration)},getHistory:function(){return{done:Cd(this.history.done),undone:Cd(this.history.undone)}},setHistory:function(g){var _=this.history=new hm(this.history);_.done=Cd(g.done.slice(0),null,!0),_.undone=Cd(g.undone.slice(0),null,!0)},setGutterMarker:Ls(function(g,_,S){return sp(this,g,"gutter",function(E){var T=E.gutterMarkers||(E.gutterMarkers={});return T[_]=S,!S&&me(T)&&(E.gutterMarkers=null),!0})}),clearGutter:Ls(function(g){var _=this;this.iter(function(S){S.gutterMarkers&&S.gutterMarkers[g]&&sp(_,S,"gutter",function(){return S.gutterMarkers[g]=null,me(S.gutterMarkers)&&(S.gutterMarkers=null),!0})})}),lineInfo:function(g){var _;if(typeof g=="number"){if(!Ar(this,g)||(_=g,!(g=Qe(this,g))))return null}else if((_=zt(g))==null)return null;return{line:_,handle:g,text:g.text,gutterMarkers:g.gutterMarkers,textClass:g.textClass,bgClass:g.bgClass,wrapClass:g.wrapClass,widgets:g.widgets}},addLineClass:Ls(function(g,_,S){return sp(this,g,_=="gutter"?"gutter":"class",function(E){var T=_=="text"?"textClass":_=="background"?"bgClass":_=="gutter"?"gutterClass":"wrapClass";if(E[T]){if(F(S).test(E[T]))return!1;E[T]+=" "+S}else E[T]=S;return!0})}),removeLineClass:Ls(function(g,_,S){return sp(this,g,_=="gutter"?"gutter":"class",function(E){var T=_=="text"?"textClass":_=="background"?"bgClass":_=="gutter"?"gutterClass":"wrapClass",P=E[T];if(!P)return!1;if(S==null)E[T]=null;else{var j=P.match(F(S));if(!j)return!1;var U=j.index+j[0].length;E[T]=P.slice(0,j.index)+(j.index&&U!=P.length?" ":"")+P.slice(U)||null}return!0})}),addLineWidget:Ls(function(g,_,S){return function(E,T,P,j){var U=new lp(E,P,j),X=E.cm;return X&&U.noHScroll&&(X.display.alignWidgets=!0),sp(E,T,"widget",function(Y){var ce=Y.widgets||(Y.widgets=[]);if(U.insertAt==null?ce.push(U):ce.splice(Math.min(ce.length,Math.max(0,U.insertAt)),0,U),U.line=Y,X&&!_o(E,Y)){var he=ne(Y)<E.scrollTop;Bt(Y,Y.height+hc(U)),he&&My(X,U.height),X.curOp.forceUpdate=!0}return!0}),X&&hr(X,"lineWidgetAdded",X,U,typeof T=="number"?T:zt(T)),U}(this,g,_,S)}),removeLineWidget:function(g){g.clear()},markText:function(g,_,S){return Rd(this,jt(this,g),jt(this,_),S,S&&S.type||"range")},setBookmark:function(g,_){var S={replacedWith:_&&(_.nodeType==null?_.widget:_),insertLeft:_&&_.insertLeft,clearWhenEmpty:!1,shared:_&&_.shared,handleMouseEvents:_&&_.handleMouseEvents};return Rd(this,g=jt(this,g),g,S,"bookmark")},findMarksAt:function(g){var _=[],S=Qe(this,(g=jt(this,g)).line).markedSpans;if(S)for(var E=0;E<S.length;++E){var T=S[E];(T.from==null||T.from<=g.ch)&&(T.to==null||T.to>=g.ch)&&_.push(T.marker.parent||T.marker)}return _},findMarks:function(g,_,S){g=jt(this,g),_=jt(this,_);var E=[],T=g.line;return this.iter(g.line,_.line+1,function(P){var j=P.markedSpans;if(j)for(var U=0;U<j.length;U++){var X=j[U];X.to!=null&&T==g.line&&g.ch>=X.to||X.from==null&&T!=g.line||X.from!=null&&T==_.line&&X.from>=_.ch||S&&!S(X.marker)||E.push(X.marker.parent||X.marker)}++T}),E},getAllMarks:function(){var g=[];return this.iter(function(_){var S=_.markedSpans;if(S)for(var E=0;E<S.length;++E)S[E].from!=null&&g.push(S[E].marker)}),g},posFromIndex:function(g){var _,S=this.first,E=this.lineSeparator().length;return this.iter(function(T){var P=T.text.length+E;if(P>g)return _=g,!0;g-=P,++S}),jt(this,Xe(S,_))},indexFromPos:function(g){var _=(g=jt(this,g)).ch;if(g.line<this.first||g.ch<0)return 0;var S=this.lineSeparator().length;return this.iter(this.first,g.line,function(E){_+=E.text.length+S}),_},copy:function(g){var _=new jo(bi(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return _.scrollTop=this.scrollTop,_.scrollLeft=this.scrollLeft,_.sel=this.sel,_.extend=!1,g&&(_.history.undoDepth=this.history.undoDepth,_.setHistory(this.getHistory())),_},linkedDoc:function(g){g||(g={});var _=this.first,S=this.first+this.size;g.from!=null&&g.from>_&&(_=g.from),g.to!=null&&g.to<S&&(S=g.to);var E=new jo(bi(this,_,S),g.mode||this.modeOption,_,this.lineSep,this.direction);return g.sharedHist&&(E.history=this.history),(this.linked||(this.linked=[])).push({doc:E,sharedHist:g.sharedHist}),E.linked=[{doc:this,isParent:!0,sharedHist:g.sharedHist}],function(T,P){for(var j=0;j<P.length;j++){var U=P[j],X=U.find(),Y=T.clipPos(X.from),ce=T.clipPos(X.to);if(yt(Y,ce)){var he=Rd(T,Y,ce,U.primary,U.primary.type);U.markers.push(he),he.parent=U}}}(E,mx(this)),E},unlinkDoc:function(g){if(g instanceof Ur&&(g=g.doc),this.linked){for(var _=0;_<this.linked.length;++_)if(this.linked[_].doc==g){this.linked.splice(_,1),g.unlinkDoc(this),gS(mx(this));break}}if(g.history==this.history){var S=[g.id];mc(g,function(E){return S.push(E.id)},!0),g.history=new hm(null),g.history.done=Cd(this.history.done,S),g.history.undone=Cd(this.history.undone,S)}},iterLinkedDocs:function(g){mc(this,g)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(g){return this.lineSep?g.split(this.lineSep):En(g)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ls(function(g){var _;g!="rtl"&&(g="ltr"),g!=this.direction&&(this.direction=g,this.iter(function(S){return S.order=null}),this.cm&&ua(_=this.cm,function(){Y1(_),Bo(_)}))})}),jo.prototype.eachLine=jo.prototype.iter;var yx=0;function yS(g){var _=this;if(vx(_),!ot(_,g)&&!Qa(_.display,g)){Yt(g),h&&(yx=+new Date);var S=ah(_,g,!0),E=g.dataTransfer.files;if(S&&!_.isReadOnly())if(E&&E.length&&window.FileReader&&window.File)for(var T=E.length,P=Array(T),j=0,U=function(){++j==T&&Ds(_,function(){var be={from:S=jt(_.doc,S),to:S,text:_.doc.splitLines(P.filter(function(Fe){return Fe!=null}).join(_.doc.lineSeparator())),origin:"paste"};Td(_.doc,be),ix(_.doc,pc(jt(_.doc,S),jt(_.doc,gc(be))))})()},X=function(be,Fe){if(_.options.allowDropFileTypes&&xt(_.options.allowDropFileTypes,be.type)==-1)U();else{var $e=new FileReader;$e.onerror=function(){return U()},$e.onload=function(){var Oe=$e.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Oe)||(P[Fe]=Oe),U()},$e.readAsText(be)}},Y=0;Y<E.length;Y++)X(E[Y],Y);else{if(_.state.draggingText&&_.doc.sel.contains(S)>-1)return _.state.draggingText(g),void setTimeout(function(){return _.display.input.focus()},20);try{var ce=g.dataTransfer.getData("Text");if(ce){var he;if(_.state.draggingText&&!_.state.draggingText.copy&&(he=_.listSelections()),pm(_.doc,pc(S,S)),he)for(var we=0;we<he.length;++we)Ad(_.doc,"",he[we].anchor,he[we].head,"drag");_.replaceSelection(ce,"around","paste"),_.display.input.focus()}}catch{}}}}function vx(g){g.display.dragCursor&&(g.display.lineSpace.removeChild(g.display.dragCursor),g.display.dragCursor=null)}function _x(g){if(document.getElementsByClassName){for(var _=document.getElementsByClassName("CodeMirror"),S=[],E=0;E<_.length;E++){var T=_[E].CodeMirror;T&&S.push(T)}S.length&&S[0].operation(function(){for(var P=0;P<S.length;P++)g(S[P])})}}var bx=!1;function vS(){var g;bx||(Re(window,"resize",function(){g==null&&(g=setTimeout(function(){g=null,_x(_S)},100))}),Re(window,"blur",function(){return _x(xd)}),bx=!0)}function _S(g){var _=g.display;_.cachedCharWidth=_.cachedTextHeight=_.cachedPaddingH=null,_.scrollbarsClipped=!1,g.setSize()}for(var vc={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},cp=0;cp<10;cp++)vc[cp+48]=vc[cp+96]=String(cp);for(var ym=65;ym<=90;ym++)vc[ym]=String.fromCharCode(ym);for(var hp=1;hp<=12;hp++)vc[hp+111]=vc[hp+63235]="F"+hp;var Nu={};function bS(g){var _,S,E,T,P=g.split(/-(?!$)/);g=P[P.length-1];for(var j=0;j<P.length-1;j++){var U=P[j];if(/^(cmd|meta|m)$/i.test(U))T=!0;else if(/^a(lt)?$/i.test(U))_=!0;else if(/^(c|ctrl|control)$/i.test(U))S=!0;else{if(!/^s(hift)?$/i.test(U))throw new Error("Unrecognized modifier name: "+U);E=!0}}return _&&(g="Alt-"+g),S&&(g="Ctrl-"+g),T&&(g="Cmd-"+g),E&&(g="Shift-"+g),g}function xS(g){var _={};for(var S in g)if(g.hasOwnProperty(S)){var E=g[S];if(/^(name|fallthrough|(de|at)tach)$/.test(S))continue;if(E=="..."){delete g[S];continue}for(var T=re(S.split(" "),bS),P=0;P<T.length;P++){var j=void 0,U=void 0;P==T.length-1?(U=T.join(" "),j=E):(U=T.slice(0,P+1).join(" "),j="...");var X=_[U];if(X){if(X!=j)throw new Error("Inconsistent bindings for "+U)}else _[U]=j}delete g[S]}for(var Y in _)g[Y]=_[Y];return g}function kd(g,_,S,E){var T=(_=vm(_)).call?_.call(g,E):_[g];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&S(T))return"handled";if(_.fallthrough){if(Object.prototype.toString.call(_.fallthrough)!="[object Array]")return kd(g,_.fallthrough,S,E);for(var P=0;P<_.fallthrough.length;P++){var j=kd(g,_.fallthrough[P],S,E);if(j)return j}}}function xx(g){var _=typeof g=="string"?g:vc[g.keyCode];return _=="Ctrl"||_=="Alt"||_=="Shift"||_=="Mod"}function wx(g,_,S){var E=g;return _.altKey&&E!="Alt"&&(g="Alt-"+g),(q?_.metaKey:_.ctrlKey)&&E!="Ctrl"&&(g="Ctrl-"+g),(q?_.ctrlKey:_.metaKey)&&E!="Mod"&&(g="Cmd-"+g),!S&&_.shiftKey&&E!="Shift"&&(g="Shift-"+g),g}function Ex(g,_){if(v&&g.keyCode==34&&g.char)return!1;var S=vc[g.keyCode];return S!=null&&!g.altGraphKey&&(g.keyCode==3&&g.code&&(S=g.code),wx(S,g,_))}function vm(g){return typeof g=="string"?Nu[g]:g}function Dd(g,_){for(var S=g.doc.sel.ranges,E=[],T=0;T<S.length;T++){for(var P=_(S[T]);E.length&&yt(P.from,se(E).to)<=0;){var j=E.pop();if(yt(j.from,P.from)<0){P.from=j.from;break}}E.push(P)}ua(g,function(){for(var U=E.length-1;U>=0;U--)Ad(g.doc,"",E[U].from,E[U].to,"+delete");wd(g)})}function qy(g,_,S){var E=V(g.text,_+S,S);return E<0||E>g.text.length?null:E}function Vy(g,_,S){var E=qy(g,_.ch,S);return E==null?null:new Xe(_.line,E,S<0?"after":"before")}function Hy(g,_,S,E,T){if(g){_.doc.direction=="rtl"&&(T=-T);var P=Ae(S,_.doc.direction);if(P){var j,U=T<0?se(P):P[0],X=T<0==(U.level==1)?"after":"before";if(U.level>0||_.doc.direction=="rtl"){var Y=vr(_,S);j=T<0?S.text.length-1:0;var ce=Xi(_,Y,j).top;j=oe(function(he){return Xi(_,Y,he).top==ce},T<0==(U.level==1)?U.from:U.to-1,j),X=="before"&&(j=qy(S,j,1))}else j=T<0?U.to:U.from;return new Xe(E,j,X)}}return new Xe(E,T<0?S.text.length:0,T<0?"before":"after")}Nu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Nu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Nu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Nu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Nu.default=A?Nu.macDefault:Nu.pcDefault;var dp={selectAll:ax,singleSelection:function(g){return g.setSelection(g.getCursor("anchor"),g.getCursor("head"),Ct)},killLine:function(g){return Dd(g,function(_){if(_.empty()){var S=Qe(g.doc,_.head.line).text.length;return _.head.ch==S&&_.head.line<g.lastLine()?{from:_.head,to:Xe(_.head.line+1,0)}:{from:_.head,to:Xe(_.head.line,S)}}return{from:_.from(),to:_.to()}})},deleteLine:function(g){return Dd(g,function(_){return{from:Xe(_.from().line,0),to:jt(g.doc,Xe(_.to().line+1,0))}})},delLineLeft:function(g){return Dd(g,function(_){return{from:Xe(_.from().line,0),to:_.from()}})},delWrappedLineLeft:function(g){return Dd(g,function(_){var S=g.charCoords(_.head,"div").top+5;return{from:g.coordsChar({left:0,top:S},"div"),to:_.from()}})},delWrappedLineRight:function(g){return Dd(g,function(_){var S=g.charCoords(_.head,"div").top+5,E=g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:S},"div");return{from:_.from(),to:E}})},undo:function(g){return g.undo()},redo:function(g){return g.redo()},undoSelection:function(g){return g.undoSelection()},redoSelection:function(g){return g.redoSelection()},goDocStart:function(g){return g.extendSelection(Xe(g.firstLine(),0))},goDocEnd:function(g){return g.extendSelection(Xe(g.lastLine()))},goLineStart:function(g){return g.extendSelectionsBy(function(_){return Cx(g,_.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(g){return g.extendSelectionsBy(function(_){return Sx(g,_.head)},{origin:"+move",bias:1})},goLineEnd:function(g){return g.extendSelectionsBy(function(_){return function(S,E){var T=Qe(S.doc,E),P=function(j){for(var U;U=Ja(j);)j=U.find(1,!0).line;return j}(T);return P!=T&&(E=zt(P)),Hy(!0,S,T,E,-1)}(g,_.head.line)},{origin:"+move",bias:-1})},goLineRight:function(g){return g.extendSelectionsBy(function(_){var S=g.cursorCoords(_.head,"div").top+5;return g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:S},"div")},Wt)},goLineLeft:function(g){return g.extendSelectionsBy(function(_){var S=g.cursorCoords(_.head,"div").top+5;return g.coordsChar({left:0,top:S},"div")},Wt)},goLineLeftSmart:function(g){return g.extendSelectionsBy(function(_){var S=g.cursorCoords(_.head,"div").top+5,E=g.coordsChar({left:0,top:S},"div");return E.ch<g.getLine(E.line).search(/\S/)?Sx(g,_.head):E},Wt)},goLineUp:function(g){return g.moveV(-1,"line")},goLineDown:function(g){return g.moveV(1,"line")},goPageUp:function(g){return g.moveV(-1,"page")},goPageDown:function(g){return g.moveV(1,"page")},goCharLeft:function(g){return g.moveH(-1,"char")},goCharRight:function(g){return g.moveH(1,"char")},goColumnLeft:function(g){return g.moveH(-1,"column")},goColumnRight:function(g){return g.moveH(1,"column")},goWordLeft:function(g){return g.moveH(-1,"word")},goGroupRight:function(g){return g.moveH(1,"group")},goGroupLeft:function(g){return g.moveH(-1,"group")},goWordRight:function(g){return g.moveH(1,"word")},delCharBefore:function(g){return g.deleteH(-1,"codepoint")},delCharAfter:function(g){return g.deleteH(1,"char")},delWordBefore:function(g){return g.deleteH(-1,"word")},delWordAfter:function(g){return g.deleteH(1,"word")},delGroupBefore:function(g){return g.deleteH(-1,"group")},delGroupAfter:function(g){return g.deleteH(1,"group")},indentAuto:function(g){return g.indentSelection("smart")},indentMore:function(g){return g.indentSelection("add")},indentLess:function(g){return g.indentSelection("subtract")},insertTab:function(g){return g.replaceSelection("	")},insertSoftTab:function(g){for(var _=[],S=g.listSelections(),E=g.options.tabSize,T=0;T<S.length;T++){var P=S[T].from(),j=ze(g.getLine(P.line),P.ch,E);_.push(ge(E-j%E))}g.replaceSelections(_)},defaultTab:function(g){g.somethingSelected()?g.indentSelection("add"):g.execCommand("insertTab")},transposeChars:function(g){return ua(g,function(){for(var _=g.listSelections(),S=[],E=0;E<_.length;E++)if(_[E].empty()){var T=_[E].head,P=Qe(g.doc,T.line).text;if(P){if(T.ch==P.length&&(T=new Xe(T.line,T.ch-1)),T.ch>0)T=new Xe(T.line,T.ch+1),g.replaceRange(P.charAt(T.ch-1)+P.charAt(T.ch-2),Xe(T.line,T.ch-2),T,"+transpose");else if(T.line>g.doc.first){var j=Qe(g.doc,T.line-1).text;j&&(T=new Xe(T.line,1),g.replaceRange(P.charAt(0)+g.doc.lineSeparator()+j.charAt(j.length-1),Xe(T.line-1,j.length-1),T,"+transpose"))}}S.push(new Gn(T,T))}g.setSelections(S)})},newlineAndIndent:function(g){return ua(g,function(){for(var _=g.listSelections(),S=_.length-1;S>=0;S--)g.replaceRange(g.doc.lineSeparator(),_[S].anchor,_[S].head,"+input");_=g.listSelections();for(var E=0;E<_.length;E++)g.indentLine(_[E].from().line,null,!0);wd(g)})},openLine:function(g){return g.replaceSelection(`
`,"start")},toggleOverwrite:function(g){return g.toggleOverwrite()}};function Cx(g,_){var S=Qe(g.doc,_),E=ys(S);return E!=S&&(_=zt(E)),Hy(!0,g,E,_,1)}function Sx(g,_){var S=Cx(g,_.line),E=Qe(g.doc,S.line),T=Ae(E,g.doc.direction);if(!T||T[0].level==0){var P=Math.max(S.ch,E.text.search(/\S/)),j=_.line==S.line&&_.ch<=P&&_.ch;return Xe(S.line,j?0:P,S.sticky)}return S}function _m(g,_,S){if(typeof _=="string"&&!(_=dp[_]))return!1;g.display.input.ensurePolled();var E=g.display.shift,T=!1;try{g.isReadOnly()&&(g.state.suppressEdits=!0),S&&(g.display.shift=!1),T=_(g)!=Mt}finally{g.display.shift=E,g.state.suppressEdits=!1}return T}var wS=new lt;function fp(g,_,S,E){var T=g.state.keySeq;if(T){if(xx(_))return"handled";if(/\'$/.test(_)?g.state.keySeq=null:wS.set(50,function(){g.state.keySeq==T&&(g.state.keySeq=null,g.display.input.reset())}),Tx(g,T+" "+_,S,E))return!0}return Tx(g,_,S,E)}function Tx(g,_,S,E){var T=function(P,j,U){for(var X=0;X<P.state.keyMaps.length;X++){var Y=kd(j,P.state.keyMaps[X],U,P);if(Y)return Y}return P.options.extraKeys&&kd(j,P.options.extraKeys,U,P)||kd(j,P.options.keyMap,U,P)}(g,_,E);return T=="multi"&&(g.state.keySeq=_),T=="handled"&&hr(g,"keyHandled",g,_,S),T!="handled"&&T!="multi"||(Yt(S),Ry(g)),!!T}function Ax(g,_){var S=Ex(_,!0);return!!S&&(_.shiftKey&&!g.state.keySeq?fp(g,"Shift-"+S,_,function(E){return _m(g,E,!0)})||fp(g,S,_,function(E){if(typeof E=="string"?/^go[A-Z]/.test(E):E.motion)return _m(g,E)}):fp(g,S,_,function(E){return _m(g,E)}))}var Wy=null;function Rx(g){var _=this;if(!(g.target&&g.target!=_.display.input.getField()||(_.curOp.focus=Q(Ne(_)),ot(_,g)))){h&&d<11&&g.keyCode==27&&(g.returnValue=!1);var S=g.keyCode;_.display.shift=S==16||g.shiftKey;var E=Ax(_,g);v&&(Wy=E?S:null,E||S!=88||hs||!(A?g.metaKey:g.ctrlKey)||_.replaceSelection("",null,"cut")),a&&!A&&!E&&S==46&&g.shiftKey&&!g.ctrlKey&&document.execCommand&&document.execCommand("cut"),S!=18||/\bCodeMirror-crosshair\b/.test(_.display.lineDiv.className)||function(T){var P=T.display.lineDiv;function j(U){U.keyCode!=18&&U.altKey||(B(P,"CodeMirror-crosshair"),We(document,"keyup",j),We(document,"mouseover",j))}z(P,"CodeMirror-crosshair"),Re(document,"keyup",j),Re(document,"mouseover",j)}(_)}}function kx(g){g.keyCode==16&&(this.doc.sel.shift=!1),ot(this,g)}function Dx(g){var _=this;if(!(g.target&&g.target!=_.display.input.getField()||Qa(_.display,g)||ot(_,g)||g.ctrlKey&&!g.altKey||A&&g.metaKey)){var S=g.keyCode,E=g.charCode;if(v&&S==Wy)return Wy=null,void Yt(g);if(!v||g.which&&!(g.which<10)||!Ax(_,g)){var T=String.fromCharCode(E??S);T!="\b"&&(function(P,j,U){return fp(P,"'"+U+"'",j,function(X){return _m(P,X,!0)})}(_,g,T)||_.display.input.onKeyPress(g))}}}var pp,gp,Xy=function(g,_,S){this.time=g,this.pos=_,this.button=S};function Lx(g){var _=this,S=_.display;if(!(ot(_,g)||S.activeTouch&&S.input.supportsTouch())){if(S.input.ensurePolled(),S.shift=g.shiftKey,Qa(S,g))f||(S.scroller.draggable=!1,setTimeout(function(){return S.scroller.draggable=!0},100));else if(!Yy(_,g)){var E=ah(_,g),T=Mi(g),P=E?function(j,U){var X=+new Date;return gp&&gp.compare(X,j,U)?(pp=gp=null,"triple"):pp&&pp.compare(X,j,U)?(gp=new Xy(X,j,U),pp=null,"double"):(pp=new Xy(X,j,U),gp=null,"single")}(E,T):"single";Ge(_).focus(),T==1&&_.state.selectingText&&_.state.selectingText(g),E&&function(j,U,X,Y,ce){var he="Click";return Y=="double"?he="Double"+he:Y=="triple"&&(he="Triple"+he),fp(j,wx(he=(U==1?"Left":U==2?"Middle":"Right")+he,ce),ce,function(we){if(typeof we=="string"&&(we=dp[we]),!we)return!1;var be=!1;try{j.isReadOnly()&&(j.state.suppressEdits=!0),be=we(j,X)!=Mt}finally{j.state.suppressEdits=!1}return be})}(_,T,E,P,g)||(T==1?E?function(j,U,X,Y){h?setTimeout(rt(M1,j),0):j.curOp.focus=Q(Ne(j));var ce,he=function(be,Fe,$e){var Oe=be.getOption("configureMouse"),Ue=Oe?Oe(be,Fe,$e):{};if(Ue.unit==null){var et=L?$e.shiftKey&&$e.metaKey:$e.altKey;Ue.unit=et?"rectangle":Fe=="single"?"char":Fe=="double"?"word":"line"}return(Ue.extend==null||be.doc.extend)&&(Ue.extend=be.doc.extend||$e.shiftKey),Ue.addNew==null&&(Ue.addNew=A?$e.metaKey:$e.ctrlKey),Ue.moveOnDrag==null&&(Ue.moveOnDrag=!(A?$e.altKey:$e.ctrlKey)),Ue}(j,X,Y),we=j.doc.sel;j.options.dragDrop&&ri&&!j.isReadOnly()&&X=="single"&&(ce=we.contains(U))>-1&&(yt((ce=we.ranges[ce]).from(),U)<0||U.xRel>0)&&(yt(ce.to(),U)>0||U.xRel<0)?function(be,Fe,$e,Oe){var Ue=be.display,et=!1,Ze=Ds(be,function(mt){f&&(Ue.scroller.draggable=!1),be.state.draggingText=!1,be.state.delayingBlurEvent&&(be.hasFocus()?be.state.delayingBlurEvent=!1:ky(be)),We(Ue.wrapper.ownerDocument,"mouseup",Ze),We(Ue.wrapper.ownerDocument,"mousemove",gt),We(Ue.scroller,"dragstart",ft),We(Ue.scroller,"drop",Ze),et||(Yt(mt),Oe.addNew||fm(be.doc,$e,null,null,Oe.extend),f&&!b||h&&d==9?setTimeout(function(){Ue.wrapper.ownerDocument.body.focus({preventScroll:!0}),Ue.input.focus()},20):Ue.input.focus())}),gt=function(mt){et=et||Math.abs(Fe.clientX-mt.clientX)+Math.abs(Fe.clientY-mt.clientY)>=10},ft=function(){return et=!0};f&&(Ue.scroller.draggable=!0),be.state.draggingText=Ze,Ze.copy=!Oe.moveOnDrag,Re(Ue.wrapper.ownerDocument,"mouseup",Ze),Re(Ue.wrapper.ownerDocument,"mousemove",gt),Re(Ue.scroller,"dragstart",ft),Re(Ue.scroller,"drop",Ze),be.state.delayingBlurEvent=!0,setTimeout(function(){return Ue.input.focus()},20),Ue.scroller.dragDrop&&Ue.scroller.dragDrop()}(j,Y,U,he):function(be,Fe,$e,Oe){h&&ky(be);var Ue=be.display,et=be.doc;Yt(Fe);var Ze,gt,ft=et.sel,mt=ft.ranges;if(Oe.addNew&&!Oe.extend?(gt=et.sel.contains($e),Ze=gt>-1?mt[gt]:new Gn($e,$e)):(Ze=et.sel.primary(),gt=et.sel.primIndex),Oe.unit=="rectangle")Oe.addNew||(Ze=new Gn($e,$e)),$e=ah(be,Fe,!0,!0),gt=-1;else{var di=Mx(be,$e,Oe.unit);Ze=Oe.extend?Gy(Ze,di.anchor,di.head,Oe.extend):di}Oe.addNew?gt==-1?(gt=mt.length,to(et,xl(be,mt.concat([Ze]),gt),{scroll:!1,origin:"*mouse"})):mt.length>1&&mt[gt].empty()&&Oe.unit=="char"&&!Oe.extend?(to(et,xl(be,mt.slice(0,gt).concat(mt.slice(gt+1)),0),{scroll:!1,origin:"*mouse"}),ft=et.sel):Uy(et,gt,Ze,gi):(gt=0,to(et,new La([Ze],0),gi),ft=et.sel);var Dt=$e;function Vi(Pi){if(yt(Dt,Pi)!=0)if(Dt=Pi,Oe.unit=="rectangle"){for(var qn=[],Ai=be.options.tabSize,an=ze(Qe(et,$e.line).text,$e.ch,Ai),Bi=ze(Qe(et,Pi.line).text,Pi.ch,Ai),Dn=Math.min(an,Bi),wo=Math.max(an,Bi),Vn=Math.min($e.line,Pi.line),io=Math.min(be.lastLine(),Math.max($e.line,Pi.line));Vn<=io;Vn++){var no=Qe(et,Vn).text,Br=Qi(no,Dn,Ai);Dn==wo?qn.push(new Gn(Xe(Vn,Br),Xe(Vn,Br))):no.length>Br&&qn.push(new Gn(Xe(Vn,Br),Xe(Vn,Qi(no,wo,Ai))))}qn.length||qn.push(new Gn($e,$e)),to(et,xl(be,ft.ranges.slice(0,gt).concat(qn),gt),{origin:"*mouse",scroll:!1}),be.scrollIntoView(Pi)}else{var Eo,tl=Ze,Gs=Mx(be,Pi,Oe.unit),El=tl.anchor;yt(Gs.anchor,El)>0?(Eo=Gs.head,El=Kn(tl.from(),Gs.anchor)):(Eo=Gs.anchor,El=zn(tl.to(),Gs.head));var Cm=ft.ranges.slice(0);Cm[gt]=function(qx,fh){var ca=fh.anchor,_c=fh.head,AS=Qe(qx.doc,ca.line);if(yt(ca,_c)==0&&ca.sticky==_c.sticky)return fh;var Id=Ae(AS);if(!Id)return fh;var Qy=de(Id,ca.ch,ca.sticky),yp=Id[Qy];if(yp.from!=ca.ch&&yp.to!=ca.ch)return fh;var Sm,vp=Qy+(yp.from==ca.ch==(yp.level!=1)?0:1);if(vp==0||vp==Id.length)return fh;if(_c.line!=ca.line)Sm=(_c.line-ca.line)*(qx.doc.direction=="ltr"?1:-1)>0;else{var ev=de(Id,_c.ch,_c.sticky),Vx=ev-Qy||(_c.ch-ca.ch)*(yp.level==1?-1:1);Sm=ev==vp-1||ev==vp?Vx<0:Vx>0}var tv=Id[vp+(Sm?-1:0)],Hx=Sm==(tv.level==1),Wx=Hx?tv.from:tv.to,Xx=Hx?"after":"before";return ca.ch==Wx&&ca.sticky==Xx?fh:new Gn(new Xe(ca.line,Wx,Xx),_c)}(be,new Gn(jt(et,El),Eo)),to(et,xl(be,Cm,gt),gi)}}var ai=Ue.wrapper.getBoundingClientRect(),gn=0;function Un(Pi){var qn=++gn,Ai=ah(be,Pi,!0,Oe.unit=="rectangle");if(Ai)if(yt(Ai,Dt)!=0){be.curOp.focus=Q(Ne(be)),Vi(Ai);var an=am(Ue,et);(Ai.line>=an.to||Ai.line<an.from)&&setTimeout(Ds(be,function(){gn==qn&&Un(Pi)}),150)}else{var Bi=Pi.clientY<ai.top?-20:Pi.clientY>ai.bottom?20:0;Bi&&setTimeout(Ds(be,function(){gn==qn&&(Ue.scroller.scrollTop+=Bi,Un(Pi))}),50)}}function mn(Pi){be.state.selectingText=!1,gn=1/0,Pi&&(Yt(Pi),Ue.input.focus()),We(Ue.wrapper.ownerDocument,"mousemove",tn),We(Ue.wrapper.ownerDocument,"mouseup",yn),et.history.lastSelOrigin=null}var tn=Ds(be,function(Pi){Pi.buttons!==0&&Mi(Pi)?Un(Pi):mn(Pi)}),yn=Ds(be,mn);be.state.selectingText=yn,Re(Ue.wrapper.ownerDocument,"mousemove",tn),Re(Ue.wrapper.ownerDocument,"mouseup",yn)}(j,Y,U,he)}(_,E,P,g):xi(g)==S.scroller&&Yt(g):T==2?(E&&fm(_.doc,E),setTimeout(function(){return S.input.focus()},20)):T==3&&(M?_.display.input.onContextMenu(g):ky(_)))}}}function Mx(g,_,S){if(S=="char")return new Gn(_,_);if(S=="word")return g.findWordAt(_);if(S=="line")return new Gn(Xe(_.line,0),jt(g.doc,Xe(_.line+1,0)));var E=S(g,_);return new Gn(E.from,E.to)}function Ix(g,_,S,E){var T,P;if(_.touches)T=_.touches[0].clientX,P=_.touches[0].clientY;else try{T=_.clientX,P=_.clientY}catch{return!1}if(T>=Math.floor(g.display.gutters.getBoundingClientRect().right))return!1;E&&Yt(_);var j=g.display,U=j.lineDiv.getBoundingClientRect();if(P>U.bottom||!ct(g,S))return ti(_);P-=U.top-j.viewOffset;for(var X=0;X<g.display.gutterSpecs.length;++X){var Y=j.gutters.childNodes[X];if(Y&&Y.getBoundingClientRect().right>=T)return st(g,S,g,jn(g.doc,P),g.display.gutterSpecs[X].className,_),ti(_)}}function Yy(g,_){return Ix(g,_,"gutterClick",!0)}function Ox(g,_){Qa(g.display,_)||function(S,E){return ct(S,"gutterContextMenu")?Ix(S,E,"gutterContextMenu",!1):!1}(g,_)||ot(g,_,"contextmenu")||M||g.display.input.onContextMenu(_)}function Px(g){g.display.wrapper.className=g.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+g.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Yf(g)}Xy.prototype.compare=function(g,_,S){return this.time+400>g&&yt(_,this.pos)==0&&S==this.button};var Ld={toString:function(){return"CodeMirror.Init"}},Fx={},bm={};function ES(g,_,S){if(!_!=!(S&&S!=Ld)){var E=g.display.dragFunctions,T=_?Re:We;T(g.display.scroller,"dragstart",E.start),T(g.display.scroller,"dragenter",E.enter),T(g.display.scroller,"dragover",E.over),T(g.display.scroller,"dragleave",E.leave),T(g.display.scroller,"drop",E.drop)}}function CS(g){g.options.lineWrapping?(z(g.display.wrapper,"CodeMirror-wrap"),g.display.sizer.style.minWidth="",g.display.sizerWidth=null):(B(g.display.wrapper,"CodeMirror-wrap"),Je(g)),Ty(g),Bo(g),Yf(g),setTimeout(function(){return Ed(g)},100)}function Ur(g,_){var S=this;if(!(this instanceof Ur))return new Ur(g,_);this.options=_=_?Be(_):{},Be(Fx,_,!1);var E=_.value;typeof E=="string"?E=new jo(E,_.mode,null,_.lineSeparator,_.direction):_.mode&&(E.modeOption=_.mode),this.doc=E;var T=new Ur.inputStyles[_.inputStyle](this),P=this.display=new hS(g,E,T,_);for(var j in P.wrapper.CodeMirror=this,Px(this),_.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$1(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new lt,keySeq:null,specialChars:null},_.autofocus&&!R&&P.input.focus(),h&&d<11&&setTimeout(function(){return S.display.input.reset(!0)},20),function(X){var Y=X.display;Re(Y.scroller,"mousedown",Ds(X,Lx)),Re(Y.scroller,"dblclick",h&&d<11?Ds(X,function(Oe){if(!ot(X,Oe)){var Ue=ah(X,Oe);if(Ue&&!Yy(X,Oe)&&!Qa(X.display,Oe)){Yt(Oe);var et=X.findWordAt(Ue);fm(X.doc,et.anchor,et.head)}}}):function(Oe){return ot(X,Oe)||Yt(Oe)}),Re(Y.scroller,"contextmenu",function(Oe){return Ox(X,Oe)}),Re(Y.input.getField(),"contextmenu",function(Oe){Y.scroller.contains(Oe.target)||Ox(X,Oe)});var ce,he={end:0};function we(){Y.activeTouch&&(ce=setTimeout(function(){return Y.activeTouch=null},1e3),(he=Y.activeTouch).end=+new Date)}function be(Oe){if(Oe.touches.length!=1)return!1;var Ue=Oe.touches[0];return Ue.radiusX<=1&&Ue.radiusY<=1}function Fe(Oe,Ue){if(Ue.left==null)return!0;var et=Ue.left-Oe.left,Ze=Ue.top-Oe.top;return et*et+Ze*Ze>400}Re(Y.scroller,"touchstart",function(Oe){if(!ot(X,Oe)&&!be(Oe)&&!Yy(X,Oe)){Y.input.ensurePolled(),clearTimeout(ce);var Ue=+new Date;Y.activeTouch={start:Ue,moved:!1,prev:Ue-he.end<=300?he:null},Oe.touches.length==1&&(Y.activeTouch.left=Oe.touches[0].pageX,Y.activeTouch.top=Oe.touches[0].pageY)}}),Re(Y.scroller,"touchmove",function(){Y.activeTouch&&(Y.activeTouch.moved=!0)}),Re(Y.scroller,"touchend",function(Oe){var Ue=Y.activeTouch;if(Ue&&!Qa(Y,Oe)&&Ue.left!=null&&!Ue.moved&&new Date-Ue.start<300){var et,Ze=X.coordsChar(Y.activeTouch,"page");et=!Ue.prev||Fe(Ue,Ue.prev)?new Gn(Ze,Ze):!Ue.prev.prev||Fe(Ue,Ue.prev.prev)?X.findWordAt(Ze):new Gn(Xe(Ze.line,0),jt(X.doc,Xe(Ze.line+1,0))),X.setSelection(et.anchor,et.head),X.focus(),Yt(Oe)}we()}),Re(Y.scroller,"touchcancel",we),Re(Y.scroller,"scroll",function(){Y.scroller.clientHeight&&(Jf(X,Y.scroller.scrollTop),uh(X,Y.scroller.scrollLeft,!0),st(X,"scroll",X))}),Re(Y.scroller,"mousewheel",function(Oe){return q1(X,Oe)}),Re(Y.scroller,"DOMMouseScroll",function(Oe){return q1(X,Oe)}),Re(Y.wrapper,"scroll",function(){return Y.wrapper.scrollTop=Y.wrapper.scrollLeft=0}),Y.dragFunctions={enter:function(Oe){ot(X,Oe)||Rt(Oe)},over:function(Oe){ot(X,Oe)||(function(Ue,et){var Ze=ah(Ue,et);if(Ze){var gt=document.createDocumentFragment();Ay(Ue,Ze,gt),Ue.display.dragCursor||(Ue.display.dragCursor=ee("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ue.display.lineSpace.insertBefore(Ue.display.dragCursor,Ue.display.cursorDiv)),K(Ue.display.dragCursor,gt)}}(X,Oe),Rt(Oe))},start:function(Oe){return function(Ue,et){if(h&&(!Ue.state.draggingText||+new Date-yx<100))Rt(et);else if(!ot(Ue,et)&&!Qa(Ue.display,et)&&(et.dataTransfer.setData("Text",Ue.getSelection()),et.dataTransfer.effectAllowed="copyMove",et.dataTransfer.setDragImage&&!b)){var Ze=ee("img",null,null,"position: fixed; left: 0; top: 0;");Ze.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",v&&(Ze.width=Ze.height=1,Ue.display.wrapper.appendChild(Ze),Ze._top=Ze.offsetTop),et.dataTransfer.setDragImage(Ze,0,0),v&&Ze.parentNode.removeChild(Ze)}}(X,Oe)},drop:Ds(X,yS),leave:function(Oe){ot(X,Oe)||vx(X)}};var $e=Y.input.getField();Re($e,"keyup",function(Oe){return kx.call(X,Oe)}),Re($e,"keydown",Ds(X,Rx)),Re($e,"keypress",Ds(X,Dx)),Re($e,"focus",function(Oe){return Dy(X,Oe)}),Re($e,"blur",function(Oe){return xd(X,Oe)})}(this),vS(),hh(this),this.curOp.forceUpdate=!0,X1(this,E),_.autofocus&&!R||this.hasFocus()?setTimeout(function(){S.hasFocus()&&!S.state.focused&&Dy(S)},20):xd(this),bm)bm.hasOwnProperty(j)&&bm[j](this,_[j],Ld);z1(this),_.finishInit&&_.finishInit(this);for(var U=0;U<Zy.length;++U)Zy[U](this);dh(this),f&&_.lineWrapping&&getComputedStyle(P.lineDiv).textRendering=="optimizelegibility"&&(P.lineDiv.style.textRendering="auto")}Ur.defaults=Fx,Ur.optionHandlers=bm;var Zy=[];function mp(g,_,S,E){var T,P=g.doc;S==null&&(S="add"),S=="smart"&&(P.mode.indent?T=na(g,_).state:S="prev");var j=g.options.tabSize,U=Qe(P,_),X=ze(U.text,null,j);U.stateAfter&&(U.stateAfter=null);var Y,ce=U.text.match(/^\s*/)[0];if(E||/\S/.test(U.text)){if(S=="smart"&&((Y=P.mode.indent(T,U.text.slice(ce.length),U.text))==Mt||Y>150)){if(!E)return;S="prev"}}else Y=0,S="not";S=="prev"?Y=_>P.first?ze(Qe(P,_-1).text,null,j):0:S=="add"?Y=X+g.options.indentUnit:S=="subtract"?Y=X-g.options.indentUnit:typeof S=="number"&&(Y=X+S),Y=Math.max(0,Y);var he="",we=0;if(g.options.indentWithTabs)for(var be=Math.floor(Y/j);be;--be)we+=j,he+="	";if(we<Y&&(he+=ge(Y-we)),he!=ce)return Ad(P,he,Xe(_,0),Xe(_,ce.length),"+input"),U.stateAfter=null,!0;for(var Fe=0;Fe<P.sel.ranges.length;Fe++){var $e=P.sel.ranges[Fe];if($e.head.line==_&&$e.head.ch<ce.length){var Oe=Xe(_,ce.length);Uy(P,Fe,new Gn(Oe,Oe));break}}}Ur.defineInitHook=function(g){return Zy.push(g)};var wl=null;function xm(g){wl=g}function Ky(g,_,S,E,T){var P=g.doc;g.display.shift=!1,E||(E=P.sel);var j=+new Date-200,U=T=="paste"||g.state.pasteIncoming>j,X=En(_),Y=null;if(U&&E.ranges.length>1)if(wl&&wl.text.join(`
`)==_){if(E.ranges.length%wl.text.length==0){Y=[];for(var ce=0;ce<wl.text.length;ce++)Y.push(P.splitLines(wl.text[ce]))}}else X.length==E.ranges.length&&g.options.pasteLinesPerSelection&&(Y=re(X,function(Ue){return[Ue]}));for(var he=g.curOp.updateInput,we=E.ranges.length-1;we>=0;we--){var be=E.ranges[we],Fe=be.from(),$e=be.to();be.empty()&&(S&&S>0?Fe=Xe(Fe.line,Fe.ch-S):g.state.overwrite&&!U?$e=Xe($e.line,Math.min(Qe(P,$e.line).text.length,$e.ch+se(X).length)):U&&wl&&wl.lineWise&&wl.text.join(`
`)==X.join(`
`)&&(Fe=$e=Xe(Fe.line,0)));var Oe={from:Fe,to:$e,text:Y?Y[we%Y.length]:X,origin:T||(U?"paste":g.state.cutIncoming>j?"cut":"+input")};Td(g.doc,Oe),hr(g,"inputRead",g,Oe)}_&&!U&&$x(g,_),wd(g),g.curOp.updateInput<2&&(g.curOp.updateInput=he),g.curOp.typing=!0,g.state.pasteIncoming=g.state.cutIncoming=-1}function Nx(g,_){var S=g.clipboardData&&g.clipboardData.getData("Text");if(S)return g.preventDefault(),_.isReadOnly()||_.options.disableInput||!_.hasFocus()||ua(_,function(){return Ky(_,S,0,null,"paste")}),!0}function $x(g,_){if(g.options.electricChars&&g.options.smartIndent)for(var S=g.doc.sel,E=S.ranges.length-1;E>=0;E--){var T=S.ranges[E];if(!(T.head.ch>100||E&&S.ranges[E-1].head.line==T.head.line)){var P=g.getModeAt(T.head),j=!1;if(P.electricChars){for(var U=0;U<P.electricChars.length;U++)if(_.indexOf(P.electricChars.charAt(U))>-1){j=mp(g,T.head.line,"smart");break}}else P.electricInput&&P.electricInput.test(Qe(g.doc,T.head.line).text.slice(0,T.head.ch))&&(j=mp(g,T.head.line,"smart"));j&&hr(g,"electricInput",g,T.head.line)}}}function Bx(g){for(var _=[],S=[],E=0;E<g.doc.sel.ranges.length;E++){var T=g.doc.sel.ranges[E].head.line,P={anchor:Xe(T,0),head:Xe(T+1,0)};S.push(P),_.push(g.getRange(P.anchor,P.head))}return{text:_,ranges:S}}function jx(g,_,S,E){g.setAttribute("autocorrect",S?"":"off"),g.setAttribute("autocapitalize",E?"":"off"),g.setAttribute("spellcheck",!!_)}function zx(){var g=ee("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),_=ee("div",[g],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return f?g.style.width="1000px":g.setAttribute("wrap","off"),C&&(g.style.border="1px solid black"),jx(g),_}function Jy(g,_,S,E,T){var P=_,j=S,U=Qe(g,_.line),X=T&&g.direction=="rtl"?-S:S;function Y(Ue){var et,Ze;if(E=="codepoint"){var gt=U.text.charCodeAt(_.ch+(S>0?0:-1));if(isNaN(gt))et=null;else{var ft=S>0?gt>=55296&&gt<56320:gt>=56320&&gt<57343;et=new Xe(_.line,Math.max(0,Math.min(U.text.length,_.ch+S*(ft?2:1))),-S)}}else et=T?function(mt,di,Dt,Vi){var ai=Ae(di,mt.doc.direction);if(!ai)return Vy(di,Dt,Vi);Dt.ch>=di.text.length?(Dt.ch=di.text.length,Dt.sticky="before"):Dt.ch<=0&&(Dt.ch=0,Dt.sticky="after");var gn=de(ai,Dt.ch,Dt.sticky),Un=ai[gn];if(mt.doc.direction=="ltr"&&Un.level%2==0&&(Vi>0?Un.to>Dt.ch:Un.from<Dt.ch))return Vy(di,Dt,Vi);var mn,tn=function(Vn,io){return qy(di,Vn instanceof Xe?Vn.ch:Vn,io)},yn=function(Vn){return mt.options.lineWrapping?(mn=mn||vr(mt,di),R1(mt,di,mn,Vn)):{begin:0,end:di.text.length}},Pi=yn(Dt.sticky=="before"?tn(Dt,-1):Dt.ch);if(mt.doc.direction=="rtl"||Un.level==1){var qn=Un.level==1==Vi<0,Ai=tn(Dt,qn?1:-1);if(Ai!=null&&(qn?Ai<=Un.to&&Ai<=Pi.end:Ai>=Un.from&&Ai>=Pi.begin)){var an=qn?"before":"after";return new Xe(Dt.line,Ai,an)}}var Bi=function(Vn,io,no){for(var Br=function(El,Cm){return Cm?new Xe(Dt.line,tn(El,1),"before"):new Xe(Dt.line,El,"after")};Vn>=0&&Vn<ai.length;Vn+=io){var Eo=ai[Vn],tl=io>0==(Eo.level!=1),Gs=tl?no.begin:tn(no.end,-1);if(Eo.from<=Gs&&Gs<Eo.to||(Gs=tl?Eo.from:tn(Eo.to,-1),no.begin<=Gs&&Gs<no.end))return Br(Gs,tl)}},Dn=Bi(gn+Vi,Vi,Pi);if(Dn)return Dn;var wo=Vi>0?Pi.end:tn(Pi.begin,-1);return wo==null||Vi>0&&wo==di.text.length||!(Dn=Bi(Vi>0?0:ai.length-1,Vi,yn(wo)))?null:Dn}(g.cm,U,_,S):Vy(U,_,S);if(et==null){if(Ue||(Ze=_.line+X)<g.first||Ze>=g.first+g.size||(_=new Xe(Ze,_.ch,_.sticky),!(U=Qe(g,Ze))))return!1;_=Hy(T,g.cm,U,_.line,X)}else _=et;return!0}if(E=="char"||E=="codepoint")Y();else if(E=="column")Y(!0);else if(E=="word"||E=="group")for(var ce=null,he=E=="group",we=g.cm&&g.cm.getHelper(_,"wordChars"),be=!0;!(S<0)||Y(!be);be=!1){var Fe=U.text.charAt(_.ch)||`
`,$e=ie(Fe,we)?"w":he&&Fe==`
`?"n":!he||/\s/.test(Fe)?null:"p";if(!he||be||$e||($e="s"),ce&&ce!=$e){S<0&&(S=1,Y(),_.sticky="after");break}if($e&&(ce=$e),S>0&&!Y(!be))break}var Oe=gm(g,_,P,j,!0);return cn(P,Oe)&&(Oe.hitSide=!0),Oe}function Gx(g,_,S,E){var T,P,j=g.doc,U=_.left;if(E=="page"){var X=Math.min(g.display.wrapper.clientHeight,Ge(g).innerHeight||j(g).documentElement.clientHeight),Y=Math.max(X-.5*_d(g.display),3);T=(S>0?_.bottom:_.top)+S*Y}else E=="line"&&(T=S>0?_.bottom+3:_.top-3);for(;(P=wy(g,U,T)).outside;){if(S<0?T<=0:T>=j.height){P.hitSide=!0;break}T+=5*S}return P}var ir=function(g){this.cm=g,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new lt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ux(g,_){var S=Fn(g,_.line);if(!S||S.hidden)return null;var E=Qe(g.doc,_.line),T=vt(S,E,_.line),P=Ae(E,g.doc.direction),j="left";P&&(j=de(P,_.ch)%2?"right":"left");var U=b1(T.map,_.ch,j);return U.offset=U.collapse=="right"?U.end:U.start,U}function Md(g,_){return _&&(g.bad=!0),g}function wm(g,_,S){var E;if(_==g.display.lineDiv){if(!(E=g.display.lineDiv.childNodes[S]))return Md(g.clipPos(Xe(g.display.viewTo-1)),!0);_=null,S=0}else for(E=_;;E=E.parentNode){if(!E||E==g.display.lineDiv)return null;if(E.parentNode&&E.parentNode==g.display.lineDiv)break}for(var T=0;T<g.display.view.length;T++){var P=g.display.view[T];if(P.node==E)return SS(P,_,S)}}function SS(g,_,S){var E=g.text.firstChild,T=!1;if(!_||!le(E,_))return Md(Xe(zt(g.line),0),!0);if(_==E&&(T=!0,_=E.childNodes[S],S=0,!_)){var P=g.rest?se(g.rest):g.line;return Md(Xe(zt(P),P.text.length),T)}var j=_.nodeType==3?_:null,U=_;for(j||_.childNodes.length!=1||_.firstChild.nodeType!=3||(j=_.firstChild,S&&(S=j.nodeValue.length));U.parentNode!=E;)U=U.parentNode;var X=g.measure,Y=X.maps;function ce(Oe,Ue,et){for(var Ze=-1;Ze<(Y?Y.length:0);Ze++)for(var gt=Ze<0?X.map:Y[Ze],ft=0;ft<gt.length;ft+=3){var mt=gt[ft+2];if(mt==Oe||mt==Ue){var di=zt(Ze<0?g.line:g.rest[Ze]),Dt=gt[ft]+et;return(et<0||mt!=Oe)&&(Dt=gt[ft+(et?1:0)]),Xe(di,Dt)}}}var he=ce(j,U,S);if(he)return Md(he,T);for(var we=U.nextSibling,be=j?j.nodeValue.length-S:0;we;we=we.nextSibling){if(he=ce(we,we.firstChild,0))return Md(Xe(he.line,he.ch-be),T);be+=we.textContent.length}for(var Fe=U.previousSibling,$e=S;Fe;Fe=Fe.previousSibling){if(he=ce(Fe,Fe.firstChild,-1))return Md(Xe(he.line,he.ch+$e),T);$e+=Fe.textContent.length}}ir.prototype.init=function(g){var _=this,S=this,E=S.cm,T=S.div=g.lineDiv;function P(U){for(var X=U.target;X;X=X.parentNode){if(X==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(X.className))break}return!1}function j(U){if(P(U)&&!ot(E,U)){if(E.somethingSelected())xm({lineWise:!1,text:E.getSelections()}),U.type=="cut"&&E.replaceSelection("",null,"cut");else{if(!E.options.lineWiseCopyCut)return;var X=Bx(E);xm({lineWise:!0,text:X.text}),U.type=="cut"&&E.operation(function(){E.setSelections(X.ranges,0,Ct),E.replaceSelection("",null,"cut")})}if(U.clipboardData){U.clipboardData.clearData();var Y=wl.text.join(`
`);if(U.clipboardData.setData("Text",Y),U.clipboardData.getData("Text")==Y)return void U.preventDefault()}var ce=zx(),he=ce.firstChild;E.display.lineSpace.insertBefore(ce,E.display.lineSpace.firstChild),he.value=wl.text.join(`
`);var we=Q(T.ownerDocument);ye(he),setTimeout(function(){E.display.lineSpace.removeChild(ce),we.focus(),we==T&&S.showPrimarySelection()},50)}}T.contentEditable=!0,jx(T,E.options.spellcheck,E.options.autocorrect,E.options.autocapitalize),Re(T,"paste",function(U){!P(U)||ot(E,U)||Nx(U,E)||d<=11&&setTimeout(Ds(E,function(){return _.updateFromDOM()}),20)}),Re(T,"compositionstart",function(U){_.composing={data:U.data,done:!1}}),Re(T,"compositionupdate",function(U){_.composing||(_.composing={data:U.data,done:!1})}),Re(T,"compositionend",function(U){_.composing&&(U.data!=_.composing.data&&_.readFromDOMSoon(),_.composing.done=!0)}),Re(T,"touchstart",function(){return S.forceCompositionEnd()}),Re(T,"input",function(){_.composing||_.readFromDOMSoon()}),Re(T,"copy",j),Re(T,"cut",j)},ir.prototype.screenReaderLabelChanged=function(g){g?this.div.setAttribute("aria-label",g):this.div.removeAttribute("aria-label")},ir.prototype.prepareSelection=function(){var g=L1(this.cm,!1);return g.focus=Q(this.div.ownerDocument)==this.div,g},ir.prototype.showSelection=function(g,_){g&&this.cm.display.view.length&&((g.focus||_)&&this.showPrimarySelection(),this.showMultipleSelections(g))},ir.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ir.prototype.showPrimarySelection=function(){var g=this.getSelection(),_=this.cm,S=_.doc.sel.primary(),E=S.from(),T=S.to();if(_.display.viewTo==_.display.viewFrom||E.line>=_.display.viewTo||T.line<_.display.viewFrom)g.removeAllRanges();else{var P=wm(_,g.anchorNode,g.anchorOffset),j=wm(_,g.focusNode,g.focusOffset);if(!P||P.bad||!j||j.bad||yt(Kn(P,j),E)!=0||yt(zn(P,j),T)!=0){var U=_.display.view,X=E.line>=_.display.viewFrom&&Ux(_,E)||{node:U[0].measure.map[2],offset:0},Y=T.line<_.display.viewTo&&Ux(_,T);if(!Y){var ce=U[U.length-1].measure,he=ce.maps?ce.maps[ce.maps.length-1]:ce.map;Y={node:he[he.length-1],offset:he[he.length-2]-he[he.length-3]}}if(X&&Y){var we,be=g.rangeCount&&g.getRangeAt(0);try{we=N(X.node,X.offset,Y.offset,Y.node)}catch{}we&&(!a&&_.state.focused?(g.collapse(X.node,X.offset),we.collapsed||(g.removeAllRanges(),g.addRange(we))):(g.removeAllRanges(),g.addRange(we)),be&&g.anchorNode==null?g.addRange(be):a&&this.startGracePeriod()),this.rememberSelection()}else g.removeAllRanges()}}},ir.prototype.startGracePeriod=function(){var g=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){g.gracePeriod=!1,g.selectionChanged()&&g.cm.operation(function(){return g.cm.curOp.selectionChanged=!0})},20)},ir.prototype.showMultipleSelections=function(g){K(this.cm.display.cursorDiv,g.cursors),K(this.cm.display.selectionDiv,g.selection)},ir.prototype.rememberSelection=function(){var g=this.getSelection();this.lastAnchorNode=g.anchorNode,this.lastAnchorOffset=g.anchorOffset,this.lastFocusNode=g.focusNode,this.lastFocusOffset=g.focusOffset},ir.prototype.selectionInEditor=function(){var g=this.getSelection();if(!g.rangeCount)return!1;var _=g.getRangeAt(0).commonAncestorContainer;return le(this.div,_)},ir.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Q(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ir.prototype.blur=function(){this.div.blur()},ir.prototype.getField=function(){return this.div},ir.prototype.supportsTouch=function(){return!0},ir.prototype.receivedFocus=function(){var g=this,_=this;this.selectionInEditor()?setTimeout(function(){return g.pollSelection()},20):ua(this.cm,function(){return _.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function S(){_.cm.state.focused&&(_.pollSelection(),_.polling.set(_.cm.options.pollInterval,S))})},ir.prototype.selectionChanged=function(){var g=this.getSelection();return g.anchorNode!=this.lastAnchorNode||g.anchorOffset!=this.lastAnchorOffset||g.focusNode!=this.lastFocusNode||g.focusOffset!=this.lastFocusOffset},ir.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var g=this.getSelection(),_=this.cm;if(D&&m&&this.cm.display.gutterSpecs.length&&function(T){for(var P=T;P;P=P.parentNode)if(/CodeMirror-gutter-wrapper/.test(P.className))return!0;return!1}(g.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var S=wm(_,g.anchorNode,g.anchorOffset),E=wm(_,g.focusNode,g.focusOffset);S&&E&&ua(_,function(){to(_.doc,pc(S,E),Ct),(S.bad||E.bad)&&(_.curOp.selectionChanged=!0)})}}},ir.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var g,_,S,E=this.cm,T=E.display,P=E.doc.sel.primary(),j=P.from(),U=P.to();if(j.ch==0&&j.line>E.firstLine()&&(j=Xe(j.line-1,Qe(E.doc,j.line-1).length)),U.ch==Qe(E.doc,U.line).text.length&&U.line<E.lastLine()&&(U=Xe(U.line+1,0)),j.line<T.viewFrom||U.line>T.viewTo-1)return!1;j.line==T.viewFrom||(g=lh(E,j.line))==0?(_=zt(T.view[0].line),S=T.view[0].node):(_=zt(T.view[g].line),S=T.view[g-1].node.nextSibling);var X,Y,ce=lh(E,U.line);if(ce==T.view.length-1?(X=T.viewTo-1,Y=T.lineDiv.lastChild):(X=zt(T.view[ce+1].line)-1,Y=T.view[ce+1].node.previousSibling),!S)return!1;for(var he=E.doc.splitLines(function(di,Dt,Vi,ai,gn){var Un="",mn=!1,tn=di.doc.lineSeparator(),yn=!1;function Pi(Bi){return function(Dn){return Dn.id==Bi}}function qn(){mn&&(Un+=tn,yn&&(Un+=tn),mn=yn=!1)}function Ai(Bi){Bi&&(qn(),Un+=Bi)}function an(Bi){if(Bi.nodeType==1){var Dn=Bi.getAttribute("cm-text");if(Dn)return void Ai(Dn);var wo,Vn=Bi.getAttribute("cm-marker");if(Vn){var io=di.findMarks(Xe(ai,0),Xe(gn+1,0),Pi(+Vn));return void(io.length&&(wo=io[0].find(0))&&Ai(_i(di.doc,wo.from,wo.to).join(tn)))}if(Bi.getAttribute("contenteditable")=="false")return;var no=/^(pre|div|p|li|table|br)$/i.test(Bi.nodeName);if(!/^br$/i.test(Bi.nodeName)&&Bi.textContent.length==0)return;no&&qn();for(var Br=0;Br<Bi.childNodes.length;Br++)an(Bi.childNodes[Br]);/^(pre|p)$/i.test(Bi.nodeName)&&(yn=!0),no&&(mn=!0)}else Bi.nodeType==3&&Ai(Bi.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;an(Dt),Dt!=Vi;)Dt=Dt.nextSibling,yn=!1;return Un}(E,S,Y,_,X)),we=_i(E.doc,Xe(_,0),Xe(X,Qe(E.doc,X).text.length));he.length>1&&we.length>1;)if(se(he)==se(we))he.pop(),we.pop(),X--;else{if(he[0]!=we[0])break;he.shift(),we.shift(),_++}for(var be=0,Fe=0,$e=he[0],Oe=we[0],Ue=Math.min($e.length,Oe.length);be<Ue&&$e.charCodeAt(be)==Oe.charCodeAt(be);)++be;for(var et=se(he),Ze=se(we),gt=Math.min(et.length-(he.length==1?be:0),Ze.length-(we.length==1?be:0));Fe<gt&&et.charCodeAt(et.length-Fe-1)==Ze.charCodeAt(Ze.length-Fe-1);)++Fe;if(he.length==1&&we.length==1&&_==j.line)for(;be&&be>j.ch&&et.charCodeAt(et.length-Fe-1)==Ze.charCodeAt(Ze.length-Fe-1);)be--,Fe++;he[he.length-1]=et.slice(0,et.length-Fe).replace(/^\u200b+/,""),he[0]=he[0].slice(be).replace(/\u200b+$/,"");var ft=Xe(_,be),mt=Xe(X,we.length?se(we).length-Fe:0);return he.length>1||he[0]||yt(ft,mt)?(Ad(E.doc,he,ft,mt,"+input"),!0):void 0},ir.prototype.ensurePolled=function(){this.forceCompositionEnd()},ir.prototype.reset=function(){this.forceCompositionEnd()},ir.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ir.prototype.readFromDOMSoon=function(){var g=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(g.readDOMTimeout=null,g.composing){if(!g.composing.done)return;g.composing=null}g.updateFromDOM()},80))},ir.prototype.updateFromDOM=function(){var g=this;!this.cm.isReadOnly()&&this.pollContent()||ua(this.cm,function(){return Bo(g.cm)})},ir.prototype.setUneditable=function(g){g.contentEditable="false"},ir.prototype.onKeyPress=function(g){g.charCode==0||this.composing||(g.preventDefault(),this.cm.isReadOnly()||Ds(this.cm,Ky)(this.cm,String.fromCharCode(g.charCode==null?g.keyCode:g.charCode),0))},ir.prototype.readOnlyChanged=function(g){this.div.contentEditable=String(g!="nocursor")},ir.prototype.onContextMenu=function(){},ir.prototype.resetPosition=function(){},ir.prototype.needsContentAttribute=!0;var is=function(g){this.cm=g,this.prevInput="",this.pollingFast=!1,this.polling=new lt,this.hasSelection=!1,this.composing=null,this.resetting=!1};is.prototype.init=function(g){var _=this,S=this,E=this.cm;this.createField(g);var T=this.textarea;function P(j){if(!ot(E,j)){if(E.somethingSelected())xm({lineWise:!1,text:E.getSelections()});else{if(!E.options.lineWiseCopyCut)return;var U=Bx(E);xm({lineWise:!0,text:U.text}),j.type=="cut"?E.setSelections(U.ranges,null,Ct):(S.prevInput="",T.value=U.text.join(`
`),ye(T))}j.type=="cut"&&(E.state.cutIncoming=+new Date)}}g.wrapper.insertBefore(this.wrapper,g.wrapper.firstChild),C&&(T.style.width="0px"),Re(T,"input",function(){h&&d>=9&&_.hasSelection&&(_.hasSelection=null),S.poll()}),Re(T,"paste",function(j){ot(E,j)||Nx(j,E)||(E.state.pasteIncoming=+new Date,S.fastPoll())}),Re(T,"cut",P),Re(T,"copy",P),Re(g.scroller,"paste",function(j){if(!Qa(g,j)&&!ot(E,j)){if(!T.dispatchEvent)return E.state.pasteIncoming=+new Date,void S.focus();var U=new Event("paste");U.clipboardData=j.clipboardData,T.dispatchEvent(U)}}),Re(g.lineSpace,"selectstart",function(j){Qa(g,j)||Yt(j)}),Re(T,"compositionstart",function(){var j=E.getCursor("from");S.composing&&S.composing.range.clear(),S.composing={start:j,range:E.markText(j,E.getCursor("to"),{className:"CodeMirror-composing"})}}),Re(T,"compositionend",function(){S.composing&&(S.poll(),S.composing.range.clear(),S.composing=null)})},is.prototype.createField=function(g){this.wrapper=zx(),this.textarea=this.wrapper.firstChild},is.prototype.screenReaderLabelChanged=function(g){g?this.textarea.setAttribute("aria-label",g):this.textarea.removeAttribute("aria-label")},is.prototype.prepareSelection=function(){var g=this.cm,_=g.display,S=g.doc,E=L1(g);if(g.options.moveInputWithCursor){var T=bl(g,S.sel.primary().head,"div"),P=_.wrapper.getBoundingClientRect(),j=_.lineDiv.getBoundingClientRect();E.teTop=Math.max(0,Math.min(_.wrapper.clientHeight-10,T.top+j.top-P.top)),E.teLeft=Math.max(0,Math.min(_.wrapper.clientWidth-10,T.left+j.left-P.left))}return E},is.prototype.showSelection=function(g){var _=this.cm.display;K(_.cursorDiv,g.cursors),K(_.selectionDiv,g.selection),g.teTop!=null&&(this.wrapper.style.top=g.teTop+"px",this.wrapper.style.left=g.teLeft+"px")},is.prototype.reset=function(g){if(!(this.contextMenuPending||this.composing&&g)){var _=this.cm;if(this.resetting=!0,_.somethingSelected()){this.prevInput="";var S=_.getSelection();this.textarea.value=S,_.state.focused&&ye(this.textarea),h&&d>=9&&(this.hasSelection=S)}else g||(this.prevInput=this.textarea.value="",h&&d>=9&&(this.hasSelection=null));this.resetting=!1}},is.prototype.getField=function(){return this.textarea},is.prototype.supportsTouch=function(){return!1},is.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!R||Q(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},is.prototype.blur=function(){this.textarea.blur()},is.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},is.prototype.receivedFocus=function(){this.slowPoll()},is.prototype.slowPoll=function(){var g=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){g.poll(),g.cm.state.focused&&g.slowPoll()})},is.prototype.fastPoll=function(){var g=!1,_=this;_.pollingFast=!0,_.polling.set(20,function S(){_.poll()||g?(_.pollingFast=!1,_.slowPoll()):(g=!0,_.polling.set(60,S))})},is.prototype.poll=function(){var g=this,_=this.cm,S=this.textarea,E=this.prevInput;if(this.contextMenuPending||this.resetting||!_.state.focused||fn(S)&&!E&&!this.composing||_.isReadOnly()||_.options.disableInput||_.state.keySeq)return!1;var T=S.value;if(T==E&&!_.somethingSelected())return!1;if(h&&d>=9&&this.hasSelection===T||A&&/[\uf700-\uf7ff]/.test(T))return _.display.input.reset(),!1;if(_.doc.sel==_.display.selForContextMenu){var P=T.charCodeAt(0);if(P!=8203||E||(E="​"),P==8666)return this.reset(),this.cm.execCommand("undo")}for(var j=0,U=Math.min(E.length,T.length);j<U&&E.charCodeAt(j)==T.charCodeAt(j);)++j;return ua(_,function(){Ky(_,T.slice(j),E.length-j,null,g.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?S.value=g.prevInput="":g.prevInput=T,g.composing&&(g.composing.range.clear(),g.composing.range=_.markText(g.composing.start,_.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},is.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},is.prototype.onKeyPress=function(){h&&d>=9&&(this.hasSelection=null),this.fastPoll()},is.prototype.onContextMenu=function(g){var _=this,S=_.cm,E=S.display,T=_.textarea;_.contextMenuPending&&_.contextMenuPending();var P=ah(S,g),j=E.scroller.scrollTop;if(P&&!v){S.options.resetSelectionOnContextMenu&&S.doc.sel.contains(P)==-1&&Ds(S,to)(S.doc,pc(P),Ct);var U,X=T.style.cssText,Y=_.wrapper.style.cssText,ce=_.wrapper.offsetParent.getBoundingClientRect();if(_.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(g.clientY-ce.top-5)+"px; left: "+(g.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(h?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,f&&(U=T.ownerDocument.defaultView.scrollY),E.input.focus(),f&&T.ownerDocument.defaultView.scrollTo(null,U),E.input.reset(),S.somethingSelected()||(T.value=_.prevInput=" "),_.contextMenuPending=be,E.selForContextMenu=S.doc.sel,clearTimeout(E.detectingSelectAll),h&&d>=9&&we(),M){Rt(g);var he=function(){We(window,"mouseup",he),setTimeout(be,20)};Re(window,"mouseup",he)}else setTimeout(be,50)}function we(){if(T.selectionStart!=null){var Fe=S.somethingSelected(),$e="​"+(Fe?T.value:"");T.value="⇚",T.value=$e,_.prevInput=Fe?"":"​",T.selectionStart=1,T.selectionEnd=$e.length,E.selForContextMenu=S.doc.sel}}function be(){if(_.contextMenuPending==be&&(_.contextMenuPending=!1,_.wrapper.style.cssText=Y,T.style.cssText=X,h&&d<9&&E.scrollbars.setScrollTop(E.scroller.scrollTop=j),T.selectionStart!=null)){(!h||h&&d<9)&&we();var Fe=0,$e=function(){E.selForContextMenu==S.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&_.prevInput=="​"?Ds(S,ax)(S):Fe++<10?E.detectingSelectAll=setTimeout($e,500):(E.selForContextMenu=null,E.input.reset())};E.detectingSelectAll=setTimeout($e,200)}}},is.prototype.readOnlyChanged=function(g){g||this.reset(),this.textarea.disabled=g=="nocursor",this.textarea.readOnly=!!g},is.prototype.setUneditable=function(){},is.prototype.needsContentAttribute=!1,function(g){var _=g.optionHandlers;function S(E,T,P,j){g.defaults[E]=T,P&&(_[E]=j?function(U,X,Y){Y!=Ld&&P(U,X,Y)}:P)}g.defineOption=S,g.Init=Ld,S("value","",function(E,T){return E.setValue(T)},!0),S("mode",null,function(E,T){E.doc.modeOption=T,By(E)},!0),S("indentUnit",2,By,!0),S("indentWithTabs",!1),S("smartIndent",!0),S("tabSize",4,function(E){np(E),Yf(E),Bo(E)},!0),S("lineSeparator",null,function(E,T){if(E.doc.lineSep=T,T){var P=[],j=E.doc.first;E.doc.iter(function(X){for(var Y=0;;){var ce=X.text.indexOf(T,Y);if(ce==-1)break;Y=ce+T.length,P.push(Xe(j,ce))}j++});for(var U=P.length-1;U>=0;U--)Ad(E.doc,T,P[U],Xe(P[U].line,P[U].ch+T.length))}}),S("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(E,T,P){E.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),P!=Ld&&E.refresh()}),S("specialCharPlaceholder",kn,function(E){return E.refresh()},!0),S("electricChars",!0),S("inputStyle",R?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),S("spellcheck",!1,function(E,T){return E.getInputField().spellcheck=T},!0),S("autocorrect",!1,function(E,T){return E.getInputField().autocorrect=T},!0),S("autocapitalize",!1,function(E,T){return E.getInputField().autocapitalize=T},!0),S("rtlMoveVisually",!O),S("wholeLineUpdateBefore",!0),S("theme","default",function(E){Px(E),ip(E)},!0),S("keyMap","default",function(E,T,P){var j=vm(T),U=P!=Ld&&vm(P);U&&U.detach&&U.detach(E,j),j.attach&&j.attach(E,U||null)}),S("extraKeys",null),S("configureMouse",null),S("lineWrapping",!1,CS,!0),S("gutters",[],function(E,T){E.display.gutterSpecs=Ny(T,E.options.lineNumbers),ip(E)},!0),S("fixedGutter",!0,function(E,T){E.display.gutters.style.left=T?Sy(E.display)+"px":"0",E.refresh()},!0),S("coverGutterNextToScrollbar",!1,function(E){return Ed(E)},!0),S("scrollbarStyle","native",function(E){$1(E),Ed(E),E.display.scrollbars.setScrollTop(E.doc.scrollTop),E.display.scrollbars.setScrollLeft(E.doc.scrollLeft)},!0),S("lineNumbers",!1,function(E,T){E.display.gutterSpecs=Ny(E.options.gutters,T),ip(E)},!0),S("firstLineNumber",1,ip,!0),S("lineNumberFormatter",function(E){return E},ip,!0),S("showCursorWhenSelecting",!1,Zf,!0),S("resetSelectionOnContextMenu",!0),S("lineWiseCopyCut",!0),S("pasteLinesPerSelection",!0),S("selectionsMayTouch",!1),S("readOnly",!1,function(E,T){T=="nocursor"&&(xd(E),E.display.input.blur()),E.display.input.readOnlyChanged(T)}),S("screenReaderLabel",null,function(E,T){T=T===""?null:T,E.display.input.screenReaderLabelChanged(T)}),S("disableInput",!1,function(E,T){T||E.display.input.reset()},!0),S("dragDrop",!0,ES),S("allowDropFileTypes",null),S("cursorBlinkRate",530),S("cursorScrollMargin",0),S("cursorHeight",1,Zf,!0),S("singleCursorHeightPerLine",!0,Zf,!0),S("workTime",100),S("workDelay",100),S("flattenSpans",!0,np,!0),S("addModeClass",!1,np,!0),S("pollInterval",100),S("undoDepth",200,function(E,T){return E.doc.history.undoDepth=T}),S("historyEventDelay",1250),S("viewportMargin",10,function(E){return E.refresh()},!0),S("maxHighlightLength",1e4,np,!0),S("moveInputWithCursor",!0,function(E,T){T||E.display.input.resetPosition()}),S("tabindex",null,function(E,T){return E.display.input.getField().tabIndex=T||""}),S("autofocus",null),S("direction","ltr",function(E,T){return E.doc.setDirection(T)},!0),S("phrases",null)}(Ur),function(g){var _=g.optionHandlers,S=g.helpers={};g.prototype={constructor:g,focus:function(){Ge(this).focus(),this.display.input.focus()},setOption:function(E,T){var P=this.options,j=P[E];P[E]==T&&E!="mode"||(P[E]=T,_.hasOwnProperty(E)&&Ds(this,_[E])(this,T,j),st(this,"optionChange",this,E))},getOption:function(E){return this.options[E]},getDoc:function(){return this.doc},addKeyMap:function(E,T){this.state.keyMaps[T?"push":"unshift"](vm(E))},removeKeyMap:function(E){for(var T=this.state.keyMaps,P=0;P<T.length;++P)if(T[P]==E||T[P].name==E)return T.splice(P,1),!0},addOverlay:xo(function(E,T){var P=E.token?E:g.getMode(this.options,E);if(P.startState)throw new Error("Overlays may not be stateful.");(function(j,U,X){for(var Y=0,ce=X(U);Y<j.length&&X(j[Y])<=ce;)Y++;j.splice(Y,0,U)})(this.state.overlays,{mode:P,modeSpec:E,opaque:T&&T.opaque,priority:T&&T.priority||0},function(j){return j.priority}),this.state.modeGen++,Bo(this)}),removeOverlay:xo(function(E){for(var T=this.state.overlays,P=0;P<T.length;++P){var j=T[P].modeSpec;if(j==E||typeof E=="string"&&j.name==E)return T.splice(P,1),this.state.modeGen++,void Bo(this)}}),indentLine:xo(function(E,T,P){typeof T!="string"&&typeof T!="number"&&(T=T==null?this.options.smartIndent?"smart":"prev":T?"add":"subtract"),Ar(this.doc,E)&&mp(this,E,T,P)}),indentSelection:xo(function(E){for(var T=this.doc.sel.ranges,P=-1,j=0;j<T.length;j++){var U=T[j];if(U.empty())U.head.line>P&&(mp(this,U.head.line,E,!0),P=U.head.line,j==this.doc.sel.primIndex&&wd(this));else{var X=U.from(),Y=U.to(),ce=Math.max(P,X.line);P=Math.min(this.lastLine(),Y.line-(Y.ch?0:1))+1;for(var he=ce;he<P;++he)mp(this,he,E);var we=this.doc.sel.ranges;X.ch==0&&T.length==we.length&&we[j].from().ch>0&&Uy(this.doc,j,new Gn(X,we[j].to()),Ct)}}}),getTokenAt:function(E,T){return sa(this,E,T)},getLineTokens:function(E,T){return sa(this,Xe(E),T,!0)},getTokenTypeAt:function(E){E=jt(this.doc,E);var T,P=po(this,Qe(this.doc,E.line)),j=0,U=(P.length-1)/2,X=E.ch;if(X==0)T=P[2];else for(;;){var Y=j+U>>1;if((Y?P[2*Y-1]:0)>=X)U=Y;else{if(!(P[2*Y+1]<X)){T=P[2*Y+2];break}j=Y+1}}var ce=T?T.indexOf("overlay "):-1;return ce<0?T:ce==0?null:T.slice(0,ce-1)},getModeAt:function(E){var T=this.doc.mode;return T.innerMode?g.innerMode(T,this.getTokenAt(E).state).mode:T},getHelper:function(E,T){return this.getHelpers(E,T)[0]},getHelpers:function(E,T){var P=[];if(!S.hasOwnProperty(T))return P;var j=S[T],U=this.getModeAt(E);if(typeof U[T]=="string")j[U[T]]&&P.push(j[U[T]]);else if(U[T])for(var X=0;X<U[T].length;X++){var Y=j[U[T][X]];Y&&P.push(Y)}else U.helperType&&j[U.helperType]?P.push(j[U.helperType]):j[U.name]&&P.push(j[U.name]);for(var ce=0;ce<j._global.length;ce++){var he=j._global[ce];he.pred(U,this)&&xt(P,he.val)==-1&&P.push(he.val)}return P},getStateAfter:function(E,T){var P=this.doc;return na(this,(E=Pn(P,E??P.first+P.size-1))+1,T).state},cursorCoords:function(E,T){var P=this.doc.sel.primary();return bl(this,E==null?P.head:typeof E=="object"?jt(this.doc,E):E?P.from():P.to(),T||"page")},charCoords:function(E,T){return nm(this,jt(this.doc,E),T||"page")},coordsChar:function(E,T){return wy(this,(E=S1(this,E,T||"page")).left,E.top)},lineAtHeight:function(E,T){return E=S1(this,{top:E,left:0},T||"page").top,jn(this.doc,E+this.display.viewOffset)},heightAtLine:function(E,T,P){var j,U=!1;if(typeof E=="number"){var X=this.doc.first+this.doc.size-1;E<this.doc.first?E=this.doc.first:E>X&&(E=X,U=!0),j=Qe(this.doc,E)}else j=E;return im(this,j,{top:0,left:0},T||"page",P||U).top+(U?this.doc.height-ne(j):0)},defaultTextHeight:function(){return _d(this.display)},defaultCharWidth:function(){return bd(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(E,T,P,j,U){var X,Y,ce,he=this.display,we=(E=bl(this,jt(this.doc,E))).bottom,be=E.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),he.sizer.appendChild(T),j=="over")we=E.top;else if(j=="above"||j=="near"){var Fe=Math.max(he.wrapper.clientHeight,this.doc.height),$e=Math.max(he.sizer.clientWidth,he.lineSpace.clientWidth);(j=="above"||E.bottom+T.offsetHeight>Fe)&&E.top>T.offsetHeight?we=E.top-T.offsetHeight:E.bottom+T.offsetHeight<=Fe&&(we=E.bottom),be+T.offsetWidth>$e&&(be=$e-T.offsetWidth)}T.style.top=we+"px",T.style.left=T.style.right="",U=="right"?(be=he.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(U=="left"?be=0:U=="middle"&&(be=(he.sizer.clientWidth-T.offsetWidth)/2),T.style.left=be+"px"),P&&(X=this,Y={left:be,top:we,right:be+T.offsetWidth,bottom:we+T.offsetHeight},(ce=Ly(X,Y)).scrollTop!=null&&Jf(X,ce.scrollTop),ce.scrollLeft!=null&&uh(X,ce.scrollLeft))},triggerOnKeyDown:xo(Rx),triggerOnKeyPress:xo(Dx),triggerOnKeyUp:kx,triggerOnMouseDown:xo(Lx),execCommand:function(E){if(dp.hasOwnProperty(E))return dp[E].call(null,this)},triggerElectric:xo(function(E){$x(this,E)}),findPosH:function(E,T,P,j){var U=1;T<0&&(U=-1,T=-T);for(var X=jt(this.doc,E),Y=0;Y<T&&!(X=Jy(this.doc,X,U,P,j)).hitSide;++Y);return X},moveH:xo(function(E,T){var P=this;this.extendSelectionsBy(function(j){return P.display.shift||P.doc.extend||j.empty()?Jy(P.doc,j.head,E,T,P.options.rtlMoveVisually):E<0?j.from():j.to()},Wt)}),deleteH:xo(function(E,T){var P=this.doc.sel,j=this.doc;P.somethingSelected()?j.replaceSelection("",null,"+delete"):Dd(this,function(U){var X=Jy(j,U.head,E,T,!1);return E<0?{from:X,to:U.head}:{from:U.head,to:X}})}),findPosV:function(E,T,P,j){var U=1,X=j;T<0&&(U=-1,T=-T);for(var Y=jt(this.doc,E),ce=0;ce<T;++ce){var he=bl(this,Y,"div");if(X==null?X=he.left:he.left=X,(Y=Gx(this,he,U,P)).hitSide)break}return Y},moveV:xo(function(E,T){var P=this,j=this.doc,U=[],X=!this.display.shift&&!j.extend&&j.sel.somethingSelected();if(j.extendSelectionsBy(function(ce){if(X)return E<0?ce.from():ce.to();var he=bl(P,ce.head,"div");ce.goalColumn!=null&&(he.left=ce.goalColumn),U.push(he.left);var we=Gx(P,he,E,T);return T=="page"&&ce==j.sel.primary()&&My(P,nm(P,we,"div").top-he.top),we},Wt),U.length)for(var Y=0;Y<j.sel.ranges.length;Y++)j.sel.ranges[Y].goalColumn=U[Y]}),findWordAt:function(E){var T=Qe(this.doc,E.line).text,P=E.ch,j=E.ch;if(T){var U=this.getHelper(E,"wordChars");E.sticky!="before"&&j!=T.length||!P?++j:--P;for(var X=T.charAt(P),Y=ie(X,U)?function(ce){return ie(ce,U)}:/\s/.test(X)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!ie(ce)};P>0&&Y(T.charAt(P-1));)--P;for(;j<T.length&&Y(T.charAt(j));)++j}return new Gn(Xe(E.line,P),Xe(E.line,j))},toggleOverwrite:function(E){E!=null&&E==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),st(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Q(Ne(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:xo(function(E,T){Kf(this,E,T)}),getScrollInfo:function(){var E=this.display.scroller;return{left:E.scrollLeft,top:E.scrollTop,height:E.scrollHeight-el(this)-this.display.barHeight,width:E.scrollWidth-el(this)-this.display.barWidth,clientHeight:Me(this),clientWidth:Pu(this)}},scrollIntoView:xo(function(E,T){E==null?(E={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof E=="number"?E={from:Xe(E,0),to:null}:E.from==null&&(E={from:E,to:null}),E.to||(E.to=E.from),E.margin=T||0,E.from.line!=null?function(P,j){lm(P),P.curOp.scrollToPos=j}(this,E):O1(this,E.from,E.to,E.margin)}),setSize:xo(function(E,T){var P=this,j=function(X){return typeof X=="number"||/^\d+$/.test(String(X))?X+"px":X};E!=null&&(this.display.wrapper.style.width=j(E)),T!=null&&(this.display.wrapper.style.height=j(T)),this.options.lineWrapping&&w1(this);var U=this.display.viewFrom;this.doc.iter(U,this.display.viewTo,function(X){if(X.widgets){for(var Y=0;Y<X.widgets.length;Y++)if(X.widgets[Y].noHScroll){dc(P,U,"widget");break}}++U}),this.curOp.forceUpdate=!0,st(this,"refresh",this)}),operation:function(E){return ua(this,E)},startOperation:function(){return hh(this)},endOperation:function(){return dh(this)},refresh:xo(function(){var E=this.display.cachedTextHeight;Bo(this),this.curOp.forceUpdate=!0,Yf(this),Kf(this,this.doc.scrollLeft,this.doc.scrollTop),Py(this.display),(E==null||Math.abs(E-_d(this.display))>.5||this.options.lineWrapping)&&Ty(this),st(this,"refresh",this)}),swapDoc:xo(function(E){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),X1(this,E),Yf(this),this.display.input.reset(),Kf(this,E.scrollLeft,E.scrollTop),this.curOp.forceScroll=!0,hr(this,"swapDoc",this,T),T}),phrase:function(E){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,E)?T[E]:E},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ht(g),g.registerHelper=function(E,T,P){S.hasOwnProperty(E)||(S[E]=g[E]={_global:[]}),S[E][T]=P},g.registerGlobalHelper=function(E,T,P,j){g.registerHelper(E,T,j),S[E]._global.push({pred:P,val:j})}}(Ur);var TS="iter insert remove copy getEditor constructor".split(" ");for(var Em in jo.prototype)jo.prototype.hasOwnProperty(Em)&&xt(TS,Em)<0&&(Ur.prototype[Em]=function(g){return function(){return g.apply(this.doc,arguments)}}(jo.prototype[Em]));return Ht(jo),Ur.inputStyles={textarea:is,contenteditable:ir},Ur.defineMode=function(g){Ur.defaults.mode||g=="null"||(Ur.defaults.mode=g),fo.apply(this,arguments)},Ur.defineMIME=function(g,_){Ii[g]=_},Ur.defineMode("null",function(){return{token:function(g){return g.skipToEnd()}}}),Ur.defineMIME("text/plain","null"),Ur.defineExtension=function(g,_){Ur.prototype[g]=_},Ur.defineDocExtension=function(g,_){jo.prototype[g]=_},Ur.fromTextArea=function(g,_){if((_=_?Be(_):{}).value=g.value,!_.tabindex&&g.tabIndex&&(_.tabindex=g.tabIndex),!_.placeholder&&g.placeholder&&(_.placeholder=g.placeholder),_.autofocus==null){var S=Q(g.ownerDocument);_.autofocus=S==g||g.getAttribute("autofocus")!=null&&S==document.body}function E(){g.value=U.getValue()}var T;if(g.form&&(Re(g.form,"submit",E),!_.leaveSubmitMethodAlone)){var P=g.form;T=P.submit;try{var j=P.submit=function(){E(),P.submit=T,P.submit(),P.submit=j}}catch{}}_.finishInit=function(X){X.save=E,X.getTextArea=function(){return g},X.toTextArea=function(){X.toTextArea=isNaN,E(),g.parentNode.removeChild(X.getWrapperElement()),g.style.display="",g.form&&(We(g.form,"submit",E),_.leaveSubmitMethodAlone||typeof g.form.submit!="function"||(g.form.submit=T))}},g.style.display="none";var U=Ur(function(X){return g.parentNode.insertBefore(X,g.nextSibling)},_);return U},function(g){g.off=We,g.on=Re,g.wheelEventPixels=dS,g.Doc=jo,g.splitLines=En,g.countColumn=ze,g.findColumn=Qi,g.isWordChar=Z,g.Pass=Mt,g.signal=st,g.Line=Zt,g.changeEnd=gc,g.scrollbarModel=N1,g.Pos=Xe,g.cmpPos=yt,g.modes=zs,g.mimeModes=Ii,g.resolveMode=ve,g.getMode=ke,g.modeExtensions=it,g.extendMode=Ke,g.copyState=Et,g.startState=Ti,g.innerMode=Qt,g.commands=dp,g.keyMap=Nu,g.keyName=Ex,g.isModifierKey=xx,g.lookupKey=kd,g.normalizeKeyMap=xS,g.StringStream=bt,g.SharedTextMarker=up,g.TextMarker=yc,g.LineWidget=lp,g.e_preventDefault=Yt,g.e_stopPropagation=St,g.e_stop=Rt,g.addClass=z,g.contains=le,g.rmClass=B,g.keyNames=vc}(Ur),Ur.version="5.65.9",Ur})},{}],11:[function(t,n,r){var s;s=function(o){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;o.defineMode("gfm",function(l,u){var c=0,h={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(p){return{code:p.code,codeBlock:p.codeBlock,ateSpace:p.ateSpace}},token:function(p,m){if(m.combineTokens=null,m.codeBlock)return p.match(/^```+/)?(m.codeBlock=!1,null):(p.skipToEnd(),null);if(p.sol()&&(m.code=!1),p.sol()&&p.match(/^```+/))return p.skipToEnd(),m.codeBlock=!0,null;if(p.peek()==="`"){p.next();var y=p.pos;p.eatWhile("`");var v=1+p.pos-y;return m.code?v===c&&(m.code=!1):(c=v,m.code=!0),null}return m.code?(p.next(),null):p.eatSpace()?(m.ateSpace=!0,null):(p.sol()||m.ateSpace)&&(m.ateSpace=!1,u.gitHubSpice!==!1)&&(p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||p.match(a)&&p.string.slice(p.start-2,p.start)!="]("&&(p.start==0||/\W/.test(p.string.charAt(p.start-1)))?(m.combineTokens=!0,"link"):(p.next(),null)},blankLine:function(p){return p.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var f in u)d[f]=u[f];return d.name="markdown",o.overlayMode(o.getMode(l,d),h)},"markdown"),o.defineMIME("text/x-gfm","gfm")},typeof r=="object"&&typeof n=="object"?s(t("../../lib/codemirror"),t("../markdown/markdown"),t("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(t,n,r){var s;s=function(o){o.defineMode("markdown",function(a,l){var u=o.getMode(a,"text/html"),c=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var h={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in h)h.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(h[d]=l.tokenTypeOverrides[d]);var f=/^([*\-_])(?:\s*\1){2,}\s*$/,p=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,m=/^\[(x| )\](?=\s)/i,y=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,v=/^ {0,3}(?:\={1,}|-{2,})\s*$/,b=/^[^#!\[\]*_\\<>` "'(~:]+/,x=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,w=/^\s*\[[^\]]+?\]:.*$/,C=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function D(Q,z,J){return z.f=z.inline=J,J(Q,z)}function R(Q,z,J){return z.f=z.block=J,J(Q,z)}function A(Q){if(Q.linkTitle=!1,Q.linkHref=!1,Q.linkText=!1,Q.em=!1,Q.strong=!1,Q.strikethrough=!1,Q.quote=0,Q.indentedCode=!1,Q.f==O){var z=c;if(!z){var J=o.innerMode(u,Q.htmlState);z=J.mode.name=="xml"&&J.state.tagStart===null&&!J.state.context&&J.state.tokenize.isInText}z&&(Q.f=F,Q.block=L,Q.htmlState=null)}return Q.trailingSpace=0,Q.trailingSpaceNewLine=!1,Q.prevLine=Q.thisLine,Q.thisLine={stream:null},null}function L(Q,z){var J,ye=Q.column()===z.indentation,Ne=!(J=z.prevLine.stream)||!/\S/.test(J.string),Ge=z.indentedCode,rt=z.prevLine.hr,Be=z.list!==!1,ze=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var lt=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,Be)){for(z.list=null;lt<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=lt-z.listStack[z.listStack.length-1])}var xt=!(Ne||rt||z.prevLine.header||Be&&Ge||z.prevLine.fencedCodeEnd),Mt=(z.list===!1||rt||Ne)&&z.indentation<=ze&&Q.match(f),Ct=null;if(z.indentationDiff>=4&&(Ge||z.prevLine.fencedCodeEnd||z.prevLine.header||Ne))return Q.skipToEnd(),z.indentedCode=!0,h.code;if(Q.eatSpace())return null;if(ye&&z.indentation<=ze&&(Ct=Q.match(y))&&Ct[1].length<=6)return z.quote=0,z.header=Ct[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,q(z);if(z.indentation<=ze&&Q.eat(">"))return z.quote=ye?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),Q.eatSpace(),q(z);if(!Mt&&!z.setext&&ye&&z.indentation<=ze&&(Ct=Q.match(p))){var gi=Ct[1]?"ol":"ul";return z.indentation=lt+Q.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&Q.match(m,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+gi]),q(z)}return ye&&z.indentation<=ze&&(Ct=Q.match(x,!0))?(z.quote=0,z.fencedEndRE=new RegExp(Ct[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(Wt){if(o.findModeByName){var Qi=o.findModeByName(Wt);Qi&&(Wt=Qi.mime||Qi.mimes[0])}var He=o.getMode(a,Wt);return He.name=="null"?null:He}(Ct[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=o.startState(z.localMode)),z.f=z.block=$,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,q(z)):z.setext||!(xt&&Be||z.quote||z.list!==!1||z.code||Mt||w.test(Q.string))&&(Ct=Q.lookAhead(1))&&(Ct=Ct.match(v))?(z.setext?(z.header=z.setext,z.setext=0,Q.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=Ct[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,q(z)):Mt?(Q.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,h.hr):Q.peek()==="["?D(Q,z,K):D(Q,z,z.inline)}function O(Q,z){var J=u.token(Q,z.htmlState);if(!c){var ye=o.innerMode(u,z.htmlState);(ye.mode.name=="xml"&&ye.state.tagStart===null&&!ye.state.context&&ye.state.tokenize.isInText||z.md_inside&&Q.current().indexOf(">")>-1)&&(z.f=F,z.block=L,z.htmlState=null)}return J}function $(Q,z){var J,ye=z.listStack[z.listStack.length-1]||0,Ne=z.indentation<ye,Ge=ye+3;return z.fencedEndRE&&z.indentation<=Ge&&(Ne||Q.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),Ne||(J=q(z)),z.localMode=z.localState=null,z.block=L,z.f=F,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,Ne?R(Q,z,z.block):J):z.localMode?z.localMode.token(Q,z.localState):(Q.skipToEnd(),h.code)}function q(Q){var z=[];if(Q.formatting){z.push(h.formatting),typeof Q.formatting=="string"&&(Q.formatting=[Q.formatting]);for(var J=0;J<Q.formatting.length;J++)z.push(h.formatting+"-"+Q.formatting[J]),Q.formatting[J]==="header"&&z.push(h.formatting+"-"+Q.formatting[J]+"-"+Q.header),Q.formatting[J]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=Q.quote?z.push(h.formatting+"-"+Q.formatting[J]+"-"+Q.quote):z.push("error"))}if(Q.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(Q.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(Q.linkHref?z.push(h.linkHref,"url"):(Q.strong&&z.push(h.strong),Q.em&&z.push(h.em),Q.strikethrough&&z.push(h.strikethrough),Q.emoji&&z.push(h.emoji),Q.linkText&&z.push(h.linkText),Q.code&&z.push(h.code),Q.image&&z.push(h.image),Q.imageAltText&&z.push(h.imageAltText,"link"),Q.imageMarker&&z.push(h.imageMarker)),Q.header&&z.push(h.header,h.header+"-"+Q.header),Q.quote&&(z.push(h.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=Q.quote?z.push(h.quote+"-"+Q.quote):z.push(h.quote+"-"+l.maxBlockquoteDepth)),Q.list!==!1){var ye=(Q.listStack.length-1)%3;ye?ye===1?z.push(h.list2):z.push(h.list3):z.push(h.list1)}return Q.trailingSpaceNewLine?z.push("trailing-space-new-line"):Q.trailingSpace&&z.push("trailing-space-"+(Q.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function M(Q,z){if(Q.match(b,!0))return q(z)}function F(Q,z){var J=z.text(Q,z);if(J!==void 0)return J;if(z.list)return z.list=null,q(z);if(z.taskList)return Q.match(m,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,q(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&Q.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),q(z);var ye=Q.next();if(z.linkTitle){z.linkTitle=!1;var Ne=ye;ye==="("&&(Ne=")");var Ge="^\\s*(?:[^"+(Ne=(Ne+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+Ne;if(Q.match(new RegExp(Ge),!0))return h.linkHref}if(ye==="`"){var rt=z.formatting;l.highlightFormatting&&(z.formatting="code"),Q.eatWhile("`");var Be=Q.current().length;if(z.code!=0||z.quote&&Be!=1){if(Be==z.code){var ze=q(z);return z.code=0,ze}return z.formatting=rt,q(z)}return z.code=Be,q(z)}if(z.code)return q(z);if(ye==="\\"&&(Q.next(),l.highlightFormatting)){var lt=q(z),xt=h.formatting+"-escape";return lt?lt+" "+xt:xt}if(ye==="!"&&Q.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),q(z);if(ye==="["&&z.imageMarker&&Q.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),q(z);if(ye==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var lt=q(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=B,lt}if(ye==="["&&!z.image)return z.linkText&&Q.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),q(z);if(ye==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var lt=q(z);return z.linkText=!1,z.inline=z.f=Q.match(/\(.*?\)| ?\[.*?\]/,!1)?B:F,lt}if(ye==="<"&&Q.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=N,l.highlightFormatting&&(z.formatting="link"),(lt=q(z))?lt+=" ":lt="",lt+h.linkInline;if(ye==="<"&&Q.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=N,l.highlightFormatting&&(z.formatting="link"),(lt=q(z))?lt+=" ":lt="",lt+h.linkEmail;if(l.xml&&ye==="<"&&Q.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Mt=Q.string.indexOf(">",Q.pos);if(Mt!=-1){var Ct=Q.string.substring(Q.start,Mt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Ct)&&(z.md_inside=!0)}return Q.backUp(1),z.htmlState=o.startState(u),R(Q,z,O)}if(l.xml&&ye==="<"&&Q.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(ye==="*"||ye==="_"){for(var gi=1,Wt=Q.pos==1?" ":Q.string.charAt(Q.pos-2);gi<3&&Q.eat(ye);)gi++;var Qi=Q.peek()||" ",He=!/\s/.test(Qi)&&(!C.test(Qi)||/\s/.test(Wt)||C.test(Wt)),ge=!/\s/.test(Wt)&&(!C.test(Wt)||/\s/.test(Qi)||C.test(Qi)),se=null,re=null;if(gi%2&&(z.em||!He||ye!=="*"&&ge&&!C.test(Wt)?z.em!=ye||!ge||ye!=="*"&&He&&!C.test(Qi)||(se=!1):se=!0),gi>1&&(z.strong||!He||ye!=="*"&&ge&&!C.test(Wt)?z.strong!=ye||!ge||ye!=="*"&&He&&!C.test(Qi)||(re=!1):re=!0),re!=null||se!=null)return l.highlightFormatting&&(z.formatting=se==null?"strong":re==null?"em":"strong em"),se===!0&&(z.em=ye),re===!0&&(z.strong=ye),ze=q(z),se===!1&&(z.em=!1),re===!1&&(z.strong=!1),ze}else if(ye===" "&&(Q.eat("*")||Q.eat("_"))){if(Q.peek()===" ")return q(z);Q.backUp(1)}if(l.strikethrough){if(ye==="~"&&Q.eatWhile(ye)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),ze=q(z),z.strikethrough=!1,ze;if(Q.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),q(z)}else if(ye===" "&&Q.match("~~",!0)){if(Q.peek()===" ")return q(z);Q.backUp(2)}}if(l.emoji&&ye===":"&&Q.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var pe=q(z);return z.emoji=!1,pe}return ye===" "&&(Q.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),q(z)}function N(Q,z){if(Q.next()===">"){z.f=z.inline=F,l.highlightFormatting&&(z.formatting="link");var J=q(z);return J?J+=" ":J="",J+h.linkInline}return Q.match(/^[^>]+/,!0),h.linkInline}function B(Q,z){if(Q.eatSpace())return null;var J,ye=Q.next();return ye==="("||ye==="["?(z.f=z.inline=(J=ye==="("?")":"]",function(Ne,Ge){if(Ne.next()===J){Ge.f=Ge.inline=F,l.highlightFormatting&&(Ge.formatting="link-string");var rt=q(Ge);return Ge.linkHref=!1,rt}return Ne.match(W[J]),Ge.linkHref=!0,q(Ge)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,q(z)):"error"}var W={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function K(Q,z){return Q.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=ee,Q.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,q(z)):D(Q,z,F)}function ee(Q,z){if(Q.match("]:",!0)){z.f=z.inline=te,l.highlightFormatting&&(z.formatting="link");var J=q(z);return z.linkText=!1,J}return Q.match(/^([^\]\\]|\\.)+/,!0),h.linkText}function te(Q,z){return Q.eatSpace()?null:(Q.match(/^[^\s]+/,!0),Q.peek()===void 0?z.linkTitle=!0:Q.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=F,h.linkHref+" url")}var le={startState:function(){return{f:L,prevLine:{stream:null},thisLine:{stream:null},block:L,htmlState:null,indentation:0,inline:F,text:M,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(Q){return{f:Q.f,prevLine:Q.prevLine,thisLine:Q.thisLine,block:Q.block,htmlState:Q.htmlState&&o.copyState(u,Q.htmlState),indentation:Q.indentation,localMode:Q.localMode,localState:Q.localMode?o.copyState(Q.localMode,Q.localState):null,inline:Q.inline,text:Q.text,formatting:!1,linkText:Q.linkText,linkTitle:Q.linkTitle,linkHref:Q.linkHref,code:Q.code,em:Q.em,strong:Q.strong,strikethrough:Q.strikethrough,emoji:Q.emoji,header:Q.header,setext:Q.setext,hr:Q.hr,taskList:Q.taskList,list:Q.list,listStack:Q.listStack.slice(0),quote:Q.quote,indentedCode:Q.indentedCode,trailingSpace:Q.trailingSpace,trailingSpaceNewLine:Q.trailingSpaceNewLine,md_inside:Q.md_inside,fencedEndRE:Q.fencedEndRE}},token:function(Q,z){if(z.formatting=!1,Q!=z.thisLine.stream){if(z.header=0,z.hr=!1,Q.match(/^\s*$/,!0))return A(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:Q},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=O)){var J=Q.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=J,z.indentationDiff=null,J>0)return null}}return z.f(Q,z)},innerMode:function(Q){return Q.block==O?{state:Q.htmlState,mode:u}:Q.localState?{state:Q.localState,mode:Q.localMode}:{state:Q,mode:le}},indent:function(Q,z,J){return Q.block==O&&u.indent?u.indent(Q.htmlState,z,J):Q.localState&&Q.localMode.indent?Q.localMode.indent(Q.localState,z,J):o.Pass},blankLine:A,getType:q,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return le},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")},typeof r=="object"&&typeof n=="object"?s(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):s(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(t,n,r){(function(s){s.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var o=0;o<s.modeInfo.length;o++){var a=s.modeInfo[o];a.mimes&&(a.mime=a.mimes[0])}s.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.mime==l)return c;if(c.mimes){for(var h=0;h<c.mimes.length;h++)if(c.mimes[h]==l)return c}}return/\+xml$/.test(l)?s.findModeByMIME("application/xml"):/\+json$/.test(l)?s.findModeByMIME("application/json"):void 0},s.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.ext){for(var h=0;h<c.ext.length;h++)if(c.ext[h]==l)return c}}},s.findModeByFileName=function(l){for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.file&&c.file.test(l))return c}var h=l.lastIndexOf("."),d=h>-1&&l.substring(h+1,l.length);if(d)return s.findModeByExtension(d)},s.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var c=s.modeInfo[u];if(c.name.toLowerCase()==l)return c;if(c.alias){for(var h=0;h<c.alias.length;h++)if(c.alias[h].toLowerCase()==l)return c}}}})(typeof r=="object"&&typeof n=="object"?t("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(t,n,r){(function(s){var o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};s.defineMode("xml",function(l,u){var c,h,d=l.indentUnit,f={},p=u.htmlMode?o:a;for(var m in p)f[m]=p[m];for(var m in u)f[m]=u[m];function y(W,K){function ee(le){return K.tokenize=le,le(W,K)}var te=W.next();return te=="<"?W.eat("!")?W.eat("[")?W.match("CDATA[")?ee(b("atom","]]>")):null:W.match("--")?ee(b("comment","-->")):W.match("DOCTYPE",!0,!0)?(W.eatWhile(/[\w\._\-]/),ee(x(1))):null:W.eat("?")?(W.eatWhile(/[\w\._\-]/),K.tokenize=b("meta","?>"),"meta"):(c=W.eat("/")?"closeTag":"openTag",K.tokenize=v,"tag bracket"):te=="&"?(W.eat("#")?W.eat("x")?W.eatWhile(/[a-fA-F\d]/)&&W.eat(";"):W.eatWhile(/[\d]/)&&W.eat(";"):W.eatWhile(/[\w\.\-:]/)&&W.eat(";"))?"atom":"error":(W.eatWhile(/[^&<]/),null)}function v(W,K){var ee,te,le=W.next();if(le==">"||le=="/"&&W.eat(">"))return K.tokenize=y,c=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return c="equals",null;if(le=="<"){K.tokenize=y,K.state=A,K.tagName=K.tagStart=null;var Q=K.tokenize(W,K);return Q?Q+" tag error":"tag error"}return/[\'\"]/.test(le)?(K.tokenize=(ee=le,te=function(z,J){for(;!z.eol();)if(z.next()==ee){J.tokenize=v;break}return"string"},te.isInAttribute=!0,te),K.stringStartCol=W.column(),K.tokenize(W,K)):(W.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function b(W,K){return function(ee,te){for(;!ee.eol();){if(ee.match(K)){te.tokenize=y;break}ee.next()}return W}}function x(W){return function(K,ee){for(var te;(te=K.next())!=null;){if(te=="<")return ee.tokenize=x(W+1),ee.tokenize(K,ee);if(te==">"){if(W==1){ee.tokenize=y;break}return ee.tokenize=x(W-1),ee.tokenize(K,ee)}}return"meta"}}function w(W){return W&&W.toLowerCase()}function C(W,K,ee){this.prev=W.context,this.tagName=K||"",this.indent=W.indented,this.startOfLine=ee,(f.doNotIndent.hasOwnProperty(K)||W.context&&W.context.noIndent)&&(this.noIndent=!0)}function D(W){W.context&&(W.context=W.context.prev)}function R(W,K){for(var ee;;){if(!W.context||(ee=W.context.tagName,!f.contextGrabbers.hasOwnProperty(w(ee))||!f.contextGrabbers[w(ee)].hasOwnProperty(w(K))))return;D(W)}}function A(W,K,ee){return W=="openTag"?(ee.tagStart=K.column(),L):W=="closeTag"?O:A}function L(W,K,ee){return W=="word"?(ee.tagName=K.current(),h="tag",M):f.allowMissingTagName&&W=="endTag"?(h="tag bracket",M(W,0,ee)):(h="error",L)}function O(W,K,ee){if(W=="word"){var te=K.current();return ee.context&&ee.context.tagName!=te&&f.implicitlyClosed.hasOwnProperty(w(ee.context.tagName))&&D(ee),ee.context&&ee.context.tagName==te||f.matchClosing===!1?(h="tag",$):(h="tag error",q)}return f.allowMissingTagName&&W=="endTag"?(h="tag bracket",$(W,0,ee)):(h="error",q)}function $(W,K,ee){return W!="endTag"?(h="error",$):(D(ee),A)}function q(W,K,ee){return h="error",$(W,0,ee)}function M(W,K,ee){if(W=="word")return h="attribute",F;if(W=="endTag"||W=="selfcloseTag"){var te=ee.tagName,le=ee.tagStart;return ee.tagName=ee.tagStart=null,W=="selfcloseTag"||f.autoSelfClosers.hasOwnProperty(w(te))?R(ee,te):(R(ee,te),ee.context=new C(ee,te,le==ee.indented)),A}return h="error",M}function F(W,K,ee){return W=="equals"?N:(f.allowMissing||(h="error"),M(W,0,ee))}function N(W,K,ee){return W=="string"?B:W=="word"&&f.allowUnquoted?(h="string",M):(h="error",M(W,0,ee))}function B(W,K,ee){return W=="string"?B:M(W,0,ee)}return y.isInText=!0,{startState:function(W){var K={tokenize:y,state:A,indented:W||0,tagName:null,tagStart:null,context:null};return W!=null&&(K.baseIndent=W),K},token:function(W,K){if(!K.tagName&&W.sol()&&(K.indented=W.indentation()),W.eatSpace())return null;c=null;var ee=K.tokenize(W,K);return(ee||c)&&ee!="comment"&&(h=null,K.state=K.state(c||ee,W,K),h&&(ee=h=="error"?ee+" error":h)),ee},indent:function(W,K,ee){var te=W.context;if(W.tokenize.isInAttribute)return W.tagStart==W.indented?W.stringStartCol+1:W.indented+d;if(te&&te.noIndent)return s.Pass;if(W.tokenize!=v&&W.tokenize!=y)return ee?ee.match(/^(\s*)/)[0].length:0;if(W.tagName)return f.multilineTagIndentPastTag!==!1?W.tagStart+W.tagName.length+2:W.tagStart+d*(f.multilineTagIndentFactor||1);if(f.alignCDATA&&/<!\[CDATA\[/.test(K))return 0;var le=K&&/^<(\/)?([\w_:\.-]*)/.exec(K);if(le&&le[1])for(;te;){if(te.tagName==le[2]){te=te.prev;break}if(!f.implicitlyClosed.hasOwnProperty(w(te.tagName)))break;te=te.prev}else if(le)for(;te;){var Q=f.contextGrabbers[w(te.tagName)];if(!Q||!Q.hasOwnProperty(w(le[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+d:W.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:f.htmlMode?"html":"xml",helperType:f.htmlMode?"html":"xml",skipAttribute:function(W){W.state==N&&(W.state=M)},xmlCurrentTag:function(W){return W.tagName?{name:W.tagName,close:W.type=="closeTag"}:null},xmlCurrentContext:function(W){for(var K=[],ee=W.context;ee;ee=ee.prev)K.push(ee.tagName);return K.reverse()}}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof r=="object"&&typeof n=="object"?t("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(t,n,r){(function(s,o){o(typeof r=="object"&&n!==void 0?r:(s=typeof globalThis<"u"?globalThis:s||self).marked={})})(this,function(s){function o(He,ge){for(var se=0;se<ge.length;se++){var re=ge[se];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(He,re.key,re)}}function a(He,ge){(ge==null||ge>He.length)&&(ge=He.length);for(var se=0,re=new Array(ge);se<ge;se++)re[se]=He[se];return re}function l(He,ge){var se=typeof Symbol<"u"&&He[Symbol.iterator]||He["@@iterator"];if(se)return(se=se.call(He)).next.bind(se);if(Array.isArray(He)||(se=function(pe,I){if(pe){if(typeof pe=="string")return a(pe,I);var G=Object.prototype.toString.call(pe).slice(8,-1);return G==="Object"&&pe.constructor&&(G=pe.constructor.name),G==="Map"||G==="Set"?Array.from(pe):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?a(pe,I):void 0}}(He))||ge&&He&&typeof He.length=="number"){se&&(He=se);var re=0;return function(){return re>=He.length?{done:!0}:{done:!1,value:He[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}s.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var c=/[&<>"']/,h=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,f=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},m=function(He){return p[He]};function y(He,ge){if(ge){if(c.test(He))return He.replace(h,m)}else if(d.test(He))return He.replace(f,m);return He}var v=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function b(He){return He.replace(v,function(ge,se){return(se=se.toLowerCase())==="colon"?":":se.charAt(0)==="#"?se.charAt(1)==="x"?String.fromCharCode(parseInt(se.substring(2),16)):String.fromCharCode(+se.substring(1)):""})}var x=/(^|[^\[])\^/g;function w(He,ge){He=typeof He=="string"?He:He.source,ge=ge||"";var se={replace:function(re,pe){return pe=(pe=pe.source||pe).replace(x,"$1"),He=He.replace(re,pe),se},getRegex:function(){return new RegExp(He,ge)}};return se}var C=/[^\w:]/g,D=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function R(He,ge,se){if(He){var re;try{re=decodeURIComponent(b(se)).replace(C,"").toLowerCase()}catch{return null}if(re.indexOf("javascript:")===0||re.indexOf("vbscript:")===0||re.indexOf("data:")===0)return null}ge&&!D.test(se)&&(se=function(pe,I){A[" "+pe]||(L.test(pe)?A[" "+pe]=pe+"/":A[" "+pe]=N(pe,"/",!0));var G=(pe=A[" "+pe]).indexOf(":")===-1;return I.substring(0,2)==="//"?G?I:pe.replace(O,"$1")+I:I.charAt(0)==="/"?G?I:pe.replace($,"$1")+I:pe+I}(ge,se));try{se=encodeURI(se).replace(/%25/g,"%")}catch{return null}return se}var A={},L=/^[^:]+:\/*[^/]*$/,O=/^([^:]+:)[\s\S]*$/,$=/^([^:]+:\/*[^/]*)[\s\S]*$/,q={exec:function(){}};function M(He){for(var ge,se,re=1;re<arguments.length;re++)for(se in ge=arguments[re])Object.prototype.hasOwnProperty.call(ge,se)&&(He[se]=ge[se]);return He}function F(He,ge){var se=He.replace(/\|/g,function(pe,I,G){for(var Z=!1,ie=I;--ie>=0&&G[ie]==="\\";)Z=!Z;return Z?"|":" |"}).split(/ \|/),re=0;if(se[0].trim()||se.shift(),se.length>0&&!se[se.length-1].trim()&&se.pop(),se.length>ge)se.splice(ge);else for(;se.length<ge;)se.push("");for(;re<se.length;re++)se[re]=se[re].trim().replace(/\\\|/g,"|");return se}function N(He,ge,se){var re=He.length;if(re===0)return"";for(var pe=0;pe<re;){var I=He.charAt(re-pe-1);if(I!==ge||se){if(I===ge||!se)break;pe++}else pe++}return He.slice(0,re-pe)}function B(He){He&&He.sanitize&&!He.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function W(He,ge){if(ge<1)return"";for(var se="";ge>1;)1&ge&&(se+=He),ge>>=1,He+=He;return se+He}function K(He,ge,se,re){var pe=ge.href,I=ge.title?y(ge.title):null,G=He[1].replace(/\\([\[\]])/g,"$1");if(He[0].charAt(0)!=="!"){re.state.inLink=!0;var Z={type:"link",raw:se,href:pe,title:I,text:G,tokens:re.inlineTokens(G)};return re.state.inLink=!1,Z}return{type:"image",raw:se,href:pe,title:I,text:y(G)}}var ee=function(){function He(se){this.options=se||s.defaults}var ge=He.prototype;return ge.space=function(se){var re=this.rules.block.newline.exec(se);if(re&&re[0].length>0)return{type:"space",raw:re[0]}},ge.code=function(se){var re=this.rules.block.code.exec(se);if(re){var pe=re[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:re[0],codeBlockStyle:"indented",text:this.options.pedantic?pe:N(pe,`
`)}}},ge.fences=function(se){var re=this.rules.block.fences.exec(se);if(re){var pe=re[0],I=function(G,Z){var ie=G.match(/^(\s+)(?:```)/);if(ie===null)return Z;var me=ie[1];return Z.split(`
`).map(function(_e){var xe=_e.match(/^\s+/);return xe===null?_e:xe[0].length>=me.length?_e.slice(me.length):_e}).join(`
`)}(pe,re[3]||"");return{type:"code",raw:pe,lang:re[2]?re[2].trim():re[2],text:I}}},ge.heading=function(se){var re=this.rules.block.heading.exec(se);if(re){var pe=re[2].trim();if(/#$/.test(pe)){var I=N(pe,"#");this.options.pedantic?pe=I.trim():I&&!/ $/.test(I)||(pe=I.trim())}return{type:"heading",raw:re[0],depth:re[1].length,text:pe,tokens:this.lexer.inline(pe)}}},ge.hr=function(se){var re=this.rules.block.hr.exec(se);if(re)return{type:"hr",raw:re[0]}},ge.blockquote=function(se){var re=this.rules.block.blockquote.exec(se);if(re){var pe=re[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:re[0],tokens:this.lexer.blockTokens(pe,[]),text:pe}}},ge.list=function(se){var re=this.rules.block.list.exec(se);if(re){var pe,I,G,Z,ie,me,_e,xe,V,oe,fe,de,Te=re[1].trim(),Ae=Te.length>1,Se={type:"list",raw:"",ordered:Ae,start:Ae?+Te.slice(0,-1):"",loose:!1,items:[]};Te=Ae?"\\d{1,9}\\"+Te.slice(-1):"\\"+Te,this.options.pedantic&&(Te=Ae?Te:"[*+-]");for(var Re=new RegExp("^( {0,3}"+Te+")((?:[	 ][^\\n]*)?(?:\\n|$))");se&&(de=!1,re=Re.exec(se))&&!this.rules.block.hr.test(se);){if(pe=re[0],se=se.substring(pe.length),xe=re[2].split(`
`,1)[0],V=se.split(`
`,1)[0],this.options.pedantic?(Z=2,fe=xe.trimLeft()):(Z=(Z=re[2].search(/[^ ]/))>4?1:Z,fe=xe.slice(Z),Z+=re[1].length),me=!1,!xe&&/^ *$/.test(V)&&(pe+=V+`
`,se=se.substring(V.length+1),de=!0),!de)for(var Pe=new RegExp("^ {0,"+Math.min(3,Z-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),We=new RegExp("^ {0,"+Math.min(3,Z-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),st=new RegExp("^ {0,"+Math.min(3,Z-1)+"}(?:```|~~~)"),ot=new RegExp("^ {0,"+Math.min(3,Z-1)+"}#");se&&(xe=oe=se.split(`
`,1)[0],this.options.pedantic&&(xe=xe.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!st.test(xe))&&!ot.test(xe)&&!Pe.test(xe)&&!We.test(se);){if(xe.search(/[^ ]/)>=Z||!xe.trim())fe+=`
`+xe.slice(Z);else{if(me)break;fe+=`
`+xe}me||xe.trim()||(me=!0),pe+=oe+`
`,se=se.substring(oe.length+1)}Se.loose||(_e?Se.loose=!0:/\n *\n *$/.test(pe)&&(_e=!0)),this.options.gfm&&(I=/^\[[ xX]\] /.exec(fe))&&(G=I[0]!=="[ ] ",fe=fe.replace(/^\[[ xX]\] +/,"")),Se.items.push({type:"list_item",raw:pe,task:!!I,checked:G,loose:!1,text:fe}),Se.raw+=pe}Se.items[Se.items.length-1].raw=pe.trimRight(),Se.items[Se.items.length-1].text=fe.trimRight(),Se.raw=Se.raw.trimRight();var It=Se.items.length;for(ie=0;ie<It;ie++){this.lexer.state.top=!1,Se.items[ie].tokens=this.lexer.blockTokens(Se.items[ie].text,[]);var ct=Se.items[ie].tokens.filter(function(Yt){return Yt.type==="space"}),Ht=ct.every(function(Yt){for(var St,ti=0,Rt=l(Yt.raw.split(""));!(St=Rt()).done;)if(St.value===`
`&&(ti+=1),ti>1)return!0;return!1});!Se.loose&&ct.length&&Ht&&(Se.loose=!0,Se.items[ie].loose=!0)}return Se}},ge.html=function(se){var re=this.rules.block.html.exec(se);if(re){var pe={type:"html",raw:re[0],pre:!this.options.sanitizer&&(re[1]==="pre"||re[1]==="script"||re[1]==="style"),text:re[0]};if(this.options.sanitize){var I=this.options.sanitizer?this.options.sanitizer(re[0]):y(re[0]);pe.type="paragraph",pe.text=I,pe.tokens=this.lexer.inline(I)}return pe}},ge.def=function(se){var re=this.rules.block.def.exec(se);if(re)return re[3]&&(re[3]=re[3].substring(1,re[3].length-1)),{type:"def",tag:re[1].toLowerCase().replace(/\s+/g," "),raw:re[0],href:re[2],title:re[3]}},ge.table=function(se){var re=this.rules.block.table.exec(se);if(re){var pe={type:"table",header:F(re[1]).map(function(_e){return{text:_e}}),align:re[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:re[3]&&re[3].trim()?re[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(pe.header.length===pe.align.length){pe.raw=re[0];var I,G,Z,ie,me=pe.align.length;for(I=0;I<me;I++)/^ *-+: *$/.test(pe.align[I])?pe.align[I]="right":/^ *:-+: *$/.test(pe.align[I])?pe.align[I]="center":/^ *:-+ *$/.test(pe.align[I])?pe.align[I]="left":pe.align[I]=null;for(me=pe.rows.length,I=0;I<me;I++)pe.rows[I]=F(pe.rows[I],pe.header.length).map(function(_e){return{text:_e}});for(me=pe.header.length,G=0;G<me;G++)pe.header[G].tokens=this.lexer.inline(pe.header[G].text);for(me=pe.rows.length,G=0;G<me;G++)for(ie=pe.rows[G],Z=0;Z<ie.length;Z++)ie[Z].tokens=this.lexer.inline(ie[Z].text);return pe}}},ge.lheading=function(se){var re=this.rules.block.lheading.exec(se);if(re)return{type:"heading",raw:re[0],depth:re[2].charAt(0)==="="?1:2,text:re[1],tokens:this.lexer.inline(re[1])}},ge.paragraph=function(se){var re=this.rules.block.paragraph.exec(se);if(re){var pe=re[1].charAt(re[1].length-1)===`
`?re[1].slice(0,-1):re[1];return{type:"paragraph",raw:re[0],text:pe,tokens:this.lexer.inline(pe)}}},ge.text=function(se){var re=this.rules.block.text.exec(se);if(re)return{type:"text",raw:re[0],text:re[0],tokens:this.lexer.inline(re[0])}},ge.escape=function(se){var re=this.rules.inline.escape.exec(se);if(re)return{type:"escape",raw:re[0],text:y(re[1])}},ge.tag=function(se){var re=this.rules.inline.tag.exec(se);if(re)return!this.lexer.state.inLink&&/^<a /i.test(re[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(re[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(re[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(re[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:re[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(re[0]):y(re[0]):re[0]}},ge.link=function(se){var re=this.rules.inline.link.exec(se);if(re){var pe=re[2].trim();if(!this.options.pedantic&&/^</.test(pe)){if(!/>$/.test(pe))return;var I=N(pe.slice(0,-1),"\\");if((pe.length-I.length)%2==0)return}else{var G=function(xe,V){if(xe.indexOf(V[1])===-1)return-1;for(var oe=xe.length,fe=0,de=0;de<oe;de++)if(xe[de]==="\\")de++;else if(xe[de]===V[0])fe++;else if(xe[de]===V[1]&&--fe<0)return de;return-1}(re[2],"()");if(G>-1){var Z=(re[0].indexOf("!")===0?5:4)+re[1].length+G;re[2]=re[2].substring(0,G),re[0]=re[0].substring(0,Z).trim(),re[3]=""}}var ie=re[2],me="";if(this.options.pedantic){var _e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ie);_e&&(ie=_e[1],me=_e[3])}else me=re[3]?re[3].slice(1,-1):"";return ie=ie.trim(),/^</.test(ie)&&(ie=this.options.pedantic&&!/>$/.test(pe)?ie.slice(1):ie.slice(1,-1)),K(re,{href:ie&&ie.replace(this.rules.inline._escapes,"$1"),title:me&&me.replace(this.rules.inline._escapes,"$1")},re[0],this.lexer)}},ge.reflink=function(se,re){var pe;if((pe=this.rules.inline.reflink.exec(se))||(pe=this.rules.inline.nolink.exec(se))){var I=(pe[2]||pe[1]).replace(/\s+/g," ");if(!(I=re[I.toLowerCase()])||!I.href){var G=pe[0].charAt(0);return{type:"text",raw:G,text:G}}return K(pe,I,pe[0],this.lexer)}},ge.emStrong=function(se,re,pe){pe===void 0&&(pe="");var I=this.rules.inline.emStrong.lDelim.exec(se);if(I&&(!I[3]||!pe.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var G=I[1]||I[2]||"";if(!G||G&&(pe===""||this.rules.inline.punctuation.exec(pe))){var Z,ie,me=I[0].length-1,_e=me,xe=0,V=I[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(V.lastIndex=0,re=re.slice(-1*se.length+me);(I=V.exec(re))!=null;)if(Z=I[1]||I[2]||I[3]||I[4]||I[5]||I[6])if(ie=Z.length,I[3]||I[4])_e+=ie;else if(!((I[5]||I[6])&&me%3)||(me+ie)%3){if(!((_e-=ie)>0)){if(ie=Math.min(ie,ie+_e+xe),Math.min(me,ie)%2){var oe=se.slice(1,me+I.index+ie);return{type:"em",raw:se.slice(0,me+I.index+ie+1),text:oe,tokens:this.lexer.inlineTokens(oe)}}var fe=se.slice(2,me+I.index+ie-1);return{type:"strong",raw:se.slice(0,me+I.index+ie+1),text:fe,tokens:this.lexer.inlineTokens(fe)}}}else xe+=ie}}},ge.codespan=function(se){var re=this.rules.inline.code.exec(se);if(re){var pe=re[2].replace(/\n/g," "),I=/[^ ]/.test(pe),G=/^ /.test(pe)&&/ $/.test(pe);return I&&G&&(pe=pe.substring(1,pe.length-1)),pe=y(pe,!0),{type:"codespan",raw:re[0],text:pe}}},ge.br=function(se){var re=this.rules.inline.br.exec(se);if(re)return{type:"br",raw:re[0]}},ge.del=function(se){var re=this.rules.inline.del.exec(se);if(re)return{type:"del",raw:re[0],text:re[2],tokens:this.lexer.inlineTokens(re[2])}},ge.autolink=function(se,re){var pe,I,G=this.rules.inline.autolink.exec(se);if(G)return I=G[2]==="@"?"mailto:"+(pe=y(this.options.mangle?re(G[1]):G[1])):pe=y(G[1]),{type:"link",raw:G[0],text:pe,href:I,tokens:[{type:"text",raw:pe,text:pe}]}},ge.url=function(se,re){var pe;if(pe=this.rules.inline.url.exec(se)){var I,G;if(pe[2]==="@")G="mailto:"+(I=y(this.options.mangle?re(pe[0]):pe[0]));else{var Z;do Z=pe[0],pe[0]=this.rules.inline._backpedal.exec(pe[0])[0];while(Z!==pe[0]);I=y(pe[0]),G=pe[1]==="www."?"http://"+I:I}return{type:"link",raw:pe[0],text:I,href:G,tokens:[{type:"text",raw:I,text:I}]}}},ge.inlineText=function(se,re){var pe,I=this.rules.inline.text.exec(se);if(I)return pe=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(I[0]):y(I[0]):I[0]:y(this.options.smartypants?re(I[0]):I[0]),{type:"text",raw:I[0],text:pe}},He}(),te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:q,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};te.def=w(te.def).replace("label",te._label).replace("title",te._title).getRegex(),te.bullet=/(?:[*+-]|\d{1,9}[.)])/,te.listItemStart=w(/^( *)(bull) */).replace("bull",te.bullet).getRegex(),te.list=w(te.list).replace(/bull/g,te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+te.def.source+")").getRegex(),te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,te.html=w(te.html,"i").replace("comment",te._comment).replace("tag",te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),te.paragraph=w(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.blockquote=w(te.blockquote).replace("paragraph",te.paragraph).getRegex(),te.normal=M({},te),te.gfm=M({},te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),te.gfm.table=w(te.gfm.table).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.gfm.paragraph=w(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.pedantic=M({},te.normal,{html:w(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:q,paragraph:w(te.normal._paragraph).replace("hr",te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:q,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:q,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function Q(He){return He.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function z(He){var ge,se,re="",pe=He.length;for(ge=0;ge<pe;ge++)se=He.charCodeAt(ge),Math.random()>.5&&(se="x"+se.toString(16)),re+="&#"+se+";";return re}le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=w(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=w(te._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=w(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=w(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=w(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=w(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=w(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=w(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=w(le.reflink).replace("label",le._label).replace("ref",te._label).getRegex(),le.nolink=w(le.nolink).replace("ref",te._label).getRegex(),le.reflinkSearch=w(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=M({},le),le.pedantic=M({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:w(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:w(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=M({},le.normal,{escape:w(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=w(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=M({},le.gfm,{br:w(le.br).replace("{2,}","*").getRegex(),text:w(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var J=function(){function He(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||s.defaults,this.options.tokenizer=this.options.tokenizer||new ee,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var G={block:te.normal,inline:le.normal};this.options.pedantic?(G.block=te.pedantic,G.inline=le.pedantic):this.options.gfm&&(G.block=te.gfm,this.options.breaks?G.inline=le.breaks:G.inline=le.gfm),this.tokenizer.rules=G}He.lex=function(I,G){return new He(G).lex(I)},He.lexInline=function(I,G){return new He(G).inlineTokens(I)};var ge,se,re,pe=He.prototype;return pe.lex=function(I){var G;for(I=I.replace(/\r\n|\r/g,`
`),this.blockTokens(I,this.tokens);G=this.inlineQueue.shift();)this.inlineTokens(G.src,G.tokens);return this.tokens},pe.blockTokens=function(I,G){var Z,ie,me,_e,xe=this;for(G===void 0&&(G=[]),I=this.options.pedantic?I.replace(/\t/g,"    ").replace(/^ +$/gm,""):I.replace(/^( *)(\t+)/gm,function(oe,fe,de){return fe+"    ".repeat(de.length)});I;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(oe){return!!(Z=oe.call({lexer:xe},I,G))&&(I=I.substring(Z.raw.length),G.push(Z),!0)}))){if(Z=this.tokenizer.space(I))I=I.substring(Z.raw.length),Z.raw.length===1&&G.length>0?G[G.length-1].raw+=`
`:G.push(Z);else if(Z=this.tokenizer.code(I))I=I.substring(Z.raw.length),!(ie=G[G.length-1])||ie.type!=="paragraph"&&ie.type!=="text"?G.push(Z):(ie.raw+=`
`+Z.raw,ie.text+=`
`+Z.text,this.inlineQueue[this.inlineQueue.length-1].src=ie.text);else if(Z=this.tokenizer.fences(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.heading(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.hr(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.blockquote(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.list(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.html(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.def(I))I=I.substring(Z.raw.length),!(ie=G[G.length-1])||ie.type!=="paragraph"&&ie.type!=="text"?this.tokens.links[Z.tag]||(this.tokens.links[Z.tag]={href:Z.href,title:Z.title}):(ie.raw+=`
`+Z.raw,ie.text+=`
`+Z.raw,this.inlineQueue[this.inlineQueue.length-1].src=ie.text);else if(Z=this.tokenizer.table(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.lheading(I))I=I.substring(Z.raw.length),G.push(Z);else if(me=I,this.options.extensions&&this.options.extensions.startBlock&&function(){var oe=1/0,fe=I.slice(1),de=void 0;xe.options.extensions.startBlock.forEach(function(Te){typeof(de=Te.call({lexer:this},fe))=="number"&&de>=0&&(oe=Math.min(oe,de))}),oe<1/0&&oe>=0&&(me=I.substring(0,oe+1))}(),this.state.top&&(Z=this.tokenizer.paragraph(me)))ie=G[G.length-1],_e&&ie.type==="paragraph"?(ie.raw+=`
`+Z.raw,ie.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):G.push(Z),_e=me.length!==I.length,I=I.substring(Z.raw.length);else if(Z=this.tokenizer.text(I))I=I.substring(Z.raw.length),(ie=G[G.length-1])&&ie.type==="text"?(ie.raw+=`
`+Z.raw,ie.text+=`
`+Z.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ie.text):G.push(Z);else if(I){var V="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(V);break}throw new Error(V)}}return this.state.top=!0,G},pe.inline=function(I,G){return G===void 0&&(G=[]),this.inlineQueue.push({src:I,tokens:G}),G},pe.inlineTokens=function(I,G){var Z,ie,me,_e=this;G===void 0&&(G=[]);var xe,V,oe,fe=I;if(this.tokens.links){var de=Object.keys(this.tokens.links);if(de.length>0)for(;(xe=this.tokenizer.rules.inline.reflinkSearch.exec(fe))!=null;)de.includes(xe[0].slice(xe[0].lastIndexOf("[")+1,-1))&&(fe=fe.slice(0,xe.index)+"["+W("a",xe[0].length-2)+"]"+fe.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(xe=this.tokenizer.rules.inline.blockSkip.exec(fe))!=null;)fe=fe.slice(0,xe.index)+"["+W("a",xe[0].length-2)+"]"+fe.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(xe=this.tokenizer.rules.inline.escapedEmSt.exec(fe))!=null;)fe=fe.slice(0,xe.index)+"++"+fe.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;I;)if(V||(oe=""),V=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ae){return!!(Z=Ae.call({lexer:_e},I,G))&&(I=I.substring(Z.raw.length),G.push(Z),!0)})))if(Z=this.tokenizer.escape(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.tag(I))I=I.substring(Z.raw.length),(ie=G[G.length-1])&&Z.type==="text"&&ie.type==="text"?(ie.raw+=Z.raw,ie.text+=Z.text):G.push(Z);else if(Z=this.tokenizer.link(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.reflink(I,this.tokens.links))I=I.substring(Z.raw.length),(ie=G[G.length-1])&&Z.type==="text"&&ie.type==="text"?(ie.raw+=Z.raw,ie.text+=Z.text):G.push(Z);else if(Z=this.tokenizer.emStrong(I,fe,oe))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.codespan(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.br(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.del(I))I=I.substring(Z.raw.length),G.push(Z);else if(Z=this.tokenizer.autolink(I,z))I=I.substring(Z.raw.length),G.push(Z);else if(this.state.inLink||!(Z=this.tokenizer.url(I,z))){if(me=I,this.options.extensions&&this.options.extensions.startInline&&function(){var Ae=1/0,Se=I.slice(1),Re=void 0;_e.options.extensions.startInline.forEach(function(Pe){typeof(Re=Pe.call({lexer:this},Se))=="number"&&Re>=0&&(Ae=Math.min(Ae,Re))}),Ae<1/0&&Ae>=0&&(me=I.substring(0,Ae+1))}(),Z=this.tokenizer.inlineText(me,Q))I=I.substring(Z.raw.length),Z.raw.slice(-1)!=="_"&&(oe=Z.raw.slice(-1)),V=!0,(ie=G[G.length-1])&&ie.type==="text"?(ie.raw+=Z.raw,ie.text+=Z.text):G.push(Z);else if(I){var Te="Infinite loop on byte: "+I.charCodeAt(0);if(this.options.silent){console.error(Te);break}throw new Error(Te)}}else I=I.substring(Z.raw.length),G.push(Z);return G},ge=He,re=[{key:"rules",get:function(){return{block:te,inline:le}}}],(se=null)&&o(ge.prototype,se),re&&o(ge,re),Object.defineProperty(ge,"prototype",{writable:!1}),He}(),ye=function(){function He(se){this.options=se||s.defaults}var ge=He.prototype;return ge.code=function(se,re,pe){var I=(re||"").match(/\S*/)[0];if(this.options.highlight){var G=this.options.highlight(se,I);G!=null&&G!==se&&(pe=!0,se=G)}return se=se.replace(/\n$/,"")+`
`,I?'<pre><code class="'+this.options.langPrefix+y(I,!0)+'">'+(pe?se:y(se,!0))+`</code></pre>
`:"<pre><code>"+(pe?se:y(se,!0))+`</code></pre>
`},ge.blockquote=function(se){return`<blockquote>
`+se+`</blockquote>
`},ge.html=function(se){return se},ge.heading=function(se,re,pe,I){return this.options.headerIds?"<h"+re+' id="'+(this.options.headerPrefix+I.slug(pe))+'">'+se+"</h"+re+`>
`:"<h"+re+">"+se+"</h"+re+`>
`},ge.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},ge.list=function(se,re,pe){var I=re?"ol":"ul";return"<"+I+(re&&pe!==1?' start="'+pe+'"':"")+`>
`+se+"</"+I+`>
`},ge.listitem=function(se){return"<li>"+se+`</li>
`},ge.checkbox=function(se){return"<input "+(se?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ge.paragraph=function(se){return"<p>"+se+`</p>
`},ge.table=function(se,re){return re&&(re="<tbody>"+re+"</tbody>"),`<table>
<thead>
`+se+`</thead>
`+re+`</table>
`},ge.tablerow=function(se){return`<tr>
`+se+`</tr>
`},ge.tablecell=function(se,re){var pe=re.header?"th":"td";return(re.align?"<"+pe+' align="'+re.align+'">':"<"+pe+">")+se+"</"+pe+`>
`},ge.strong=function(se){return"<strong>"+se+"</strong>"},ge.em=function(se){return"<em>"+se+"</em>"},ge.codespan=function(se){return"<code>"+se+"</code>"},ge.br=function(){return this.options.xhtml?"<br/>":"<br>"},ge.del=function(se){return"<del>"+se+"</del>"},ge.link=function(se,re,pe){if((se=R(this.options.sanitize,this.options.baseUrl,se))===null)return pe;var I='<a href="'+y(se)+'"';return re&&(I+=' title="'+re+'"'),I+=">"+pe+"</a>"},ge.image=function(se,re,pe){if((se=R(this.options.sanitize,this.options.baseUrl,se))===null)return pe;var I='<img src="'+se+'" alt="'+pe+'"';return re&&(I+=' title="'+re+'"'),I+=this.options.xhtml?"/>":">"},ge.text=function(se){return se},He}(),Ne=function(){function He(){}var ge=He.prototype;return ge.strong=function(se){return se},ge.em=function(se){return se},ge.codespan=function(se){return se},ge.del=function(se){return se},ge.html=function(se){return se},ge.text=function(se){return se},ge.link=function(se,re,pe){return""+pe},ge.image=function(se,re,pe){return""+pe},ge.br=function(){return""},He}(),Ge=function(){function He(){this.seen={}}var ge=He.prototype;return ge.serialize=function(se){return se.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ge.getNextSafeSlug=function(se,re){var pe=se,I=0;if(this.seen.hasOwnProperty(pe)){I=this.seen[se];do pe=se+"-"+ ++I;while(this.seen.hasOwnProperty(pe))}return re||(this.seen[se]=I,this.seen[pe]=0),pe},ge.slug=function(se,re){re===void 0&&(re={});var pe=this.serialize(se);return this.getNextSafeSlug(pe,re.dryrun)},He}(),rt=function(){function He(se){this.options=se||s.defaults,this.options.renderer=this.options.renderer||new ye,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ne,this.slugger=new Ge}He.parse=function(se,re){return new He(re).parse(se)},He.parseInline=function(se,re){return new He(re).parseInline(se)};var ge=He.prototype;return ge.parse=function(se,re){re===void 0&&(re=!0);var pe,I,G,Z,ie,me,_e,xe,V,oe,fe,de,Te,Ae,Se,Re,Pe,We,st,ot="",It=se.length;for(pe=0;pe<It;pe++)if(oe=se[pe],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[oe.type])||(st=this.options.extensions.renderers[oe.type].call({parser:this},oe))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(oe.type))switch(oe.type){case"space":continue;case"hr":ot+=this.renderer.hr();continue;case"heading":ot+=this.renderer.heading(this.parseInline(oe.tokens),oe.depth,b(this.parseInline(oe.tokens,this.textRenderer)),this.slugger);continue;case"code":ot+=this.renderer.code(oe.text,oe.lang,oe.escaped);continue;case"table":for(xe="",_e="",Z=oe.header.length,I=0;I<Z;I++)_e+=this.renderer.tablecell(this.parseInline(oe.header[I].tokens),{header:!0,align:oe.align[I]});for(xe+=this.renderer.tablerow(_e),V="",Z=oe.rows.length,I=0;I<Z;I++){for(_e="",ie=(me=oe.rows[I]).length,G=0;G<ie;G++)_e+=this.renderer.tablecell(this.parseInline(me[G].tokens),{header:!1,align:oe.align[G]});V+=this.renderer.tablerow(_e)}ot+=this.renderer.table(xe,V);continue;case"blockquote":V=this.parse(oe.tokens),ot+=this.renderer.blockquote(V);continue;case"list":for(fe=oe.ordered,de=oe.start,Te=oe.loose,Z=oe.items.length,V="",I=0;I<Z;I++)Re=(Se=oe.items[I]).checked,Pe=Se.task,Ae="",Se.task&&(We=this.renderer.checkbox(Re),Te?Se.tokens.length>0&&Se.tokens[0].type==="paragraph"?(Se.tokens[0].text=We+" "+Se.tokens[0].text,Se.tokens[0].tokens&&Se.tokens[0].tokens.length>0&&Se.tokens[0].tokens[0].type==="text"&&(Se.tokens[0].tokens[0].text=We+" "+Se.tokens[0].tokens[0].text)):Se.tokens.unshift({type:"text",text:We}):Ae+=We),Ae+=this.parse(Se.tokens,Te),V+=this.renderer.listitem(Ae,Pe,Re);ot+=this.renderer.list(V,fe,de);continue;case"html":ot+=this.renderer.html(oe.text);continue;case"paragraph":ot+=this.renderer.paragraph(this.parseInline(oe.tokens));continue;case"text":for(V=oe.tokens?this.parseInline(oe.tokens):oe.text;pe+1<It&&se[pe+1].type==="text";)V+=`
`+((oe=se[++pe]).tokens?this.parseInline(oe.tokens):oe.text);ot+=re?this.renderer.paragraph(V):V;continue;default:var ct='Token with "'+oe.type+'" type was not found.';if(this.options.silent)return void console.error(ct);throw new Error(ct)}else ot+=st||"";return ot},ge.parseInline=function(se,re){re=re||this.renderer;var pe,I,G,Z="",ie=se.length;for(pe=0;pe<ie;pe++)if(I=se[pe],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[I.type])||(G=this.options.extensions.renderers[I.type].call({parser:this},I))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(I.type))switch(I.type){case"escape":case"text":Z+=re.text(I.text);break;case"html":Z+=re.html(I.text);break;case"link":Z+=re.link(I.href,I.title,this.parseInline(I.tokens,re));break;case"image":Z+=re.image(I.href,I.title,I.text);break;case"strong":Z+=re.strong(this.parseInline(I.tokens,re));break;case"em":Z+=re.em(this.parseInline(I.tokens,re));break;case"codespan":Z+=re.codespan(I.text);break;case"br":Z+=re.br();break;case"del":Z+=re.del(this.parseInline(I.tokens,re));break;default:var me='Token with "'+I.type+'" type was not found.';if(this.options.silent)return void console.error(me);throw new Error(me)}else Z+=G||"";return Z},He}();function Be(He,ge,se){if(He==null)throw new Error("marked(): input parameter is undefined or null");if(typeof He!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(He)+", string expected");if(typeof ge=="function"&&(se=ge,ge=null),B(ge=M({},Be.defaults,ge||{})),se){var re,pe=ge.highlight;try{re=J.lex(He,ge)}catch(me){return se(me)}var I=function(me){var _e;if(!me)try{ge.walkTokens&&Be.walkTokens(re,ge.walkTokens),_e=rt.parse(re,ge)}catch(xe){me=xe}return ge.highlight=pe,me?se(me):se(null,_e)};if(!pe||pe.length<3||(delete ge.highlight,!re.length))return I();var G=0;return Be.walkTokens(re,function(me){me.type==="code"&&(G++,setTimeout(function(){pe(me.text,me.lang,function(_e,xe){if(_e)return I(_e);xe!=null&&xe!==me.text&&(me.text=xe,me.escaped=!0),--G===0&&I()})},0))}),void(G===0&&I())}function Z(me){if(me.message+=`
Please report this to https://github.com/markedjs/marked.`,ge.silent)return"<p>An error occurred:</p><pre>"+y(me.message+"",!0)+"</pre>";throw me}try{var ie=J.lex(He,ge);if(ge.walkTokens){if(ge.async)return Promise.all(Be.walkTokens(ie,ge.walkTokens)).then(function(){return rt.parse(ie,ge)}).catch(Z);Be.walkTokens(ie,ge.walkTokens)}return rt.parse(ie,ge)}catch(me){Z(me)}}Be.options=Be.setOptions=function(He){var ge;return M(Be.defaults,He),ge=Be.defaults,s.defaults=ge,Be},Be.getDefaults=u,Be.defaults=s.defaults,Be.use=function(){for(var He=arguments.length,ge=new Array(He),se=0;se<He;se++)ge[se]=arguments[se];var re,pe=M.apply(void 0,[{}].concat(ge)),I=Be.defaults.extensions||{renderers:{},childTokens:{}};ge.forEach(function(G){if(G.extensions&&(re=!0,G.extensions.forEach(function(ie){if(!ie.name)throw new Error("extension name required");if(ie.renderer){var me=I.renderers?I.renderers[ie.name]:null;I.renderers[ie.name]=me?function(){for(var _e=arguments.length,xe=new Array(_e),V=0;V<_e;V++)xe[V]=arguments[V];var oe=ie.renderer.apply(this,xe);return oe===!1&&(oe=me.apply(this,xe)),oe}:ie.renderer}if(ie.tokenizer){if(!ie.level||ie.level!=="block"&&ie.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");I[ie.level]?I[ie.level].unshift(ie.tokenizer):I[ie.level]=[ie.tokenizer],ie.start&&(ie.level==="block"?I.startBlock?I.startBlock.push(ie.start):I.startBlock=[ie.start]:ie.level==="inline"&&(I.startInline?I.startInline.push(ie.start):I.startInline=[ie.start]))}ie.childTokens&&(I.childTokens[ie.name]=ie.childTokens)})),G.renderer&&function(){var ie=Be.defaults.renderer||new ye,me=function(xe){var V=ie[xe];ie[xe]=function(){for(var oe=arguments.length,fe=new Array(oe),de=0;de<oe;de++)fe[de]=arguments[de];var Te=G.renderer[xe].apply(ie,fe);return Te===!1&&(Te=V.apply(ie,fe)),Te}};for(var _e in G.renderer)me(_e);pe.renderer=ie}(),G.tokenizer&&function(){var ie=Be.defaults.tokenizer||new ee,me=function(xe){var V=ie[xe];ie[xe]=function(){for(var oe=arguments.length,fe=new Array(oe),de=0;de<oe;de++)fe[de]=arguments[de];var Te=G.tokenizer[xe].apply(ie,fe);return Te===!1&&(Te=V.apply(ie,fe)),Te}};for(var _e in G.tokenizer)me(_e);pe.tokenizer=ie}(),G.walkTokens){var Z=Be.defaults.walkTokens;pe.walkTokens=function(ie){var me=[];return me.push(G.walkTokens.call(this,ie)),Z&&(me=me.concat(Z.call(this,ie))),me}}re&&(pe.extensions=I),Be.setOptions(pe)})},Be.walkTokens=function(He,ge){for(var se,re=[],pe=function(){var G=se.value;switch(re=re.concat(ge.call(Be,G)),G.type){case"table":for(var Z,ie=l(G.header);!(Z=ie()).done;){var me=Z.value;re=re.concat(Be.walkTokens(me.tokens,ge))}for(var _e,xe=l(G.rows);!(_e=xe()).done;)for(var V,oe=l(_e.value);!(V=oe()).done;){var fe=V.value;re=re.concat(Be.walkTokens(fe.tokens,ge))}break;case"list":re=re.concat(Be.walkTokens(G.items,ge));break;default:Be.defaults.extensions&&Be.defaults.extensions.childTokens&&Be.defaults.extensions.childTokens[G.type]?Be.defaults.extensions.childTokens[G.type].forEach(function(de){re=re.concat(Be.walkTokens(G[de],ge))}):G.tokens&&(re=re.concat(Be.walkTokens(G.tokens,ge)))}},I=l(He);!(se=I()).done;)pe();return re},Be.parseInline=function(He,ge){if(He==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof He!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(He)+", string expected");B(ge=M({},Be.defaults,ge||{}));try{var se=J.lexInline(He,ge);return ge.walkTokens&&Be.walkTokens(se,ge.walkTokens),rt.parseInline(se,ge)}catch(re){if(re.message+=`
Please report this to https://github.com/markedjs/marked.`,ge.silent)return"<p>An error occurred:</p><pre>"+y(re.message+"",!0)+"</pre>";throw re}},Be.Parser=rt,Be.parser=rt.parse,Be.Renderer=ye,Be.TextRenderer=Ne,Be.Lexer=J,Be.lexer=J.lex,Be.Tokenizer=ee,Be.Slugger=Ge,Be.parse=Be;var ze=Be.options,lt=Be.setOptions,xt=Be.use,Mt=Be.walkTokens,Ct=Be.parseInline,gi=Be,Wt=rt.parse,Qi=J.lex;s.Lexer=J,s.Parser=rt,s.Renderer=ye,s.Slugger=Ge,s.TextRenderer=Ne,s.Tokenizer=ee,s.getDefaults=u,s.lexer=Qi,s.marked=Be,s.options=ze,s.parse=gi,s.parseInline=Ct,s.parser=Wt,s.setOptions=lt,s.use=xt,s.walkTokens=Mt,Object.defineProperty(s,"__esModule",{value:!0})})},{}],16:[function(t,n,r){(function(s){(function(){var o;(function(){(o=function(a,l,u,c){c=c||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=c.flags||{},this.memoized={},this.loaded=!1;var h,d,f,p,m,y=this;function v(C,D){var R=y._readFile(C,null,c.asyncLoad);c.asyncLoad?R.then(function(A){D(A)}):D(R)}function b(C){l=C,u&&w()}function x(C){u=C,l&&w()}function w(){for(y.rules=y._parseAFF(l),y.compoundRuleCodes={},d=0,p=y.compoundRules.length;d<p;d++){var C=y.compoundRules[d];for(f=0,m=C.length;f<m;f++)y.compoundRuleCodes[C[f]]=[]}for(d in"ONLYINCOMPOUND"in y.flags&&(y.compoundRuleCodes[y.flags.ONLYINCOMPOUND]=[]),y.dictionaryTable=y._parseDIC(u),y.compoundRuleCodes)y.compoundRuleCodes[d].length===0&&delete y.compoundRuleCodes[d];for(d=0,p=y.compoundRules.length;d<p;d++){var D=y.compoundRules[d],R="";for(f=0,m=D.length;f<m;f++){var A=D[f];A in y.compoundRuleCodes?R+="("+y.compoundRuleCodes[A].join("|")+")":R+=A}y.compoundRules[d]=new RegExp(R,"i")}y.loaded=!0,c.asyncLoad&&c.loadedCallback&&c.loadedCallback(y)}return a&&(y.dictionary=a,l&&u?w():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(h=c.dictionaryPath?c.dictionaryPath:"typo/dictionaries",l||v(chrome.extension.getURL(h+"/"+a+"/"+a+".aff"),b),u||v(chrome.extension.getURL(h+"/"+a+"/"+a+".dic"),x)):(h=c.dictionaryPath?c.dictionaryPath:s!==void 0?s+"/dictionaries":"./dictionaries",l||v(h+"/"+a+"/"+a+".aff",b),u||v(h+"/"+a+"/"+a+".dic",x))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var c,h=new XMLHttpRequest;return h.open("GET",a,u),u&&(c=new Promise(function(f,p){h.onload=function(){h.status===200?f(h.responseText):p(h.statusText)},h.onerror=function(){p(h.statusText)}})),h.overrideMimeType&&h.overrideMimeType("text/plain; charset="+l),h.send(null),u?c:h.responseText}if(t!==void 0){var d=t("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(f){return console.log(f),""}}},_parseAFF:function(a){var l,u,c,h,d,f,p,m={},y=a.split(/\r?\n/);for(h=0,f=y.length;h<f;h++)if(l=(l=this._removeAffixComments(y[h])).trim()){var v=l.split(/\s+/),b=v[0];if(b=="PFX"||b=="SFX"){var x=v[1],w=v[2],C=[];for(d=h+1,p=h+1+(u=parseInt(v[3],10));d<p;d++){var D=(c=y[d].split(/\s+/))[2],R=c[3].split("/"),A=R[0];A==="0"&&(A="");var L=this.parseRuleCodes(R[1]),O=c[4],$={};$.add=A,L.length>0&&($.continuationClasses=L),O!=="."&&($.match=b==="SFX"?new RegExp(O+"$"):new RegExp("^"+O)),D!="0"&&($.remove=b==="SFX"?new RegExp(D+"$"):D),C.push($)}m[x]={type:b,combineable:w=="Y",entries:C},h+=u}else if(b==="COMPOUNDRULE"){for(d=h+1,p=h+1+(u=parseInt(v[1],10));d<p;d++)c=(l=y[d]).split(/\s+/),this.compoundRules.push(c[1]);h+=u}else b==="REP"?(c=l.split(/\s+/)).length===3&&this.replacementTable.push([c[1],c[2]]):this.flags[b]=v[1]}return m},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function c(N,B){u.hasOwnProperty(N)||(u[N]=null),B.length>0&&(u[N]===null&&(u[N]=[]),u[N].push(B))}for(var h=1,d=l.length;h<d;h++){var f=l[h];if(f){var p=f.split("/",2),m=p[0];if(p.length>1){var y=this.parseRuleCodes(p[1]);"NEEDAFFIX"in this.flags&&y.indexOf(this.flags.NEEDAFFIX)!=-1||c(m,y);for(var v=0,b=y.length;v<b;v++){var x=y[v],w=this.rules[x];if(w)for(var C=this._applyRule(m,w),D=0,R=C.length;D<R;D++){var A=C[D];if(c(A,[]),w.combineable)for(var L=v+1;L<b;L++){var O=y[L],$=this.rules[O];if($&&$.combineable&&w.type!=$.type)for(var q=this._applyRule(A,$),M=0,F=q.length;M<F;M++)c(q[M],[])}}x in this.compoundRuleCodes&&this.compoundRuleCodes[x].push(m)}}else c(m.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,c=a.length;u<c;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,c=[],h=0,d=u.length;h<d;h++){var f=u[h];if(!f.match||a.match(f.match)){var p=a;if(f.remove&&(p=p.replace(f.remove,"")),l.type==="SFX"?p+=f.add:p=f.add+p,c.push(p),"continuationClasses"in f)for(var m=0,y=f.continuationClasses.length;m<y;m++){var v=this.rules[f.continuationClasses[m]];v&&(c=c.concat(this._applyRule(p,v)))}}}return c},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var c=l[0].toLowerCase()+l.substring(1);if(c!==l){if(this.hasFlag(c,"KEEPCASE"))return!1;if(this.checkExact(c))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,c=this.dictionaryTable[a];if(c===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(c===null)return!0;if(typeof c=="object"){for(l=0,u=c.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",c[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var c=0,h=this.replacementTable.length;c<h;c++){var d=this.replacementTable[c];if(a.indexOf(d[0])!==-1){var f=a.replace(d[0],d[1]);if(this.check(f))return[f]}}var p=this;function m(y,v){var b,x,w,C,D={},R=p.alphabet.length;if(typeof y=="string"){var A=y;(y={})[A]=!0}for(var A in y)for(b=0,w=A.length+1;b<w;b++){var L=[A.substring(0,b),A.substring(b)];if(L[1]&&(C=L[0]+L[1].substring(1),v&&!p.check(C)||(C in D?D[C]+=1:D[C]=1)),L[1].length>1&&L[1][1]!==L[1][0]&&(C=L[0]+L[1][1]+L[1][0]+L[1].substring(2),v&&!p.check(C)||(C in D?D[C]+=1:D[C]=1)),L[1]){var O=L[1].substring(0,1).toUpperCase()===L[1].substring(0,1)?"uppercase":"lowercase";for(x=0;x<R;x++){var $=p.alphabet[x];O==="uppercase"&&($=$.toUpperCase()),$!=L[1].substring(0,1)&&(C=L[0]+$+L[1].substring(1),v&&!p.check(C)||(C in D?D[C]+=1:D[C]=1))}}if(L[1])for(x=0;x<R;x++)O=L[0].substring(-1).toUpperCase()===L[0].substring(-1)&&L[1].substring(0,1).toUpperCase()===L[1].substring(0,1)?"uppercase":"lowercase",$=p.alphabet[x],O==="uppercase"&&($=$.toUpperCase()),C=L[0]+$+L[1],v&&!p.check(C)||(C in D?D[C]+=1:D[C]=1)}return D}return p.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(y){var v,b=m(y),x=m(b,!0);for(var w in b)p.check(w)&&(w in x?x[w]+=b[w]:x[w]=b[w]);var C=[];for(v in x)x.hasOwnProperty(v)&&C.push([v,x[v]]);C.sort(function(L,O){var $=L[1],q=O[1];return $<q?-1:$>q?1:O[0].localeCompare(L[0])}).reverse();var D=[],R="lowercase";y.toUpperCase()===y?R="uppercase":y.substr(0,1).toUpperCase()+y.substr(1).toLowerCase()===y&&(R="capitalized");var A=l;for(v=0;v<Math.min(A,C.length);v++)R==="uppercase"?C[v][0]=C[v][0].toUpperCase():R==="capitalized"&&(C[v][0]=C[v][0].substr(0,1).toUpperCase()+C[v][0].substr(1)),p.hasFlag(C[v][0],"NOSUGGEST")||D.indexOf(C[v][0])!=-1?A++:D.push(C[v][0]);return D}(a),limit:l},this.memoized[a].suggestions}}})(),n!==void 0&&(n.exports=o)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(t,n,r){var s=t("codemirror");s.commands.tabAndIndentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentMore");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}},s.commands.shiftTabAndUnindentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentLess");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}}},{codemirror:10}],18:[function(t,n,r){var s=t("codemirror");t("codemirror/addon/edit/continuelist.js"),t("./codemirror/tablist"),t("codemirror/addon/display/fullscreen.js"),t("codemirror/mode/markdown/markdown.js"),t("codemirror/addon/mode/overlay.js"),t("codemirror/addon/display/placeholder.js"),t("codemirror/addon/display/autorefresh.js"),t("codemirror/addon/selection/mark-selection.js"),t("codemirror/addon/search/searchcursor.js"),t("codemirror/mode/gfm/gfm.js"),t("codemirror/mode/xml/xml.js");var o=t("codemirror-spell-checker"),a=t("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),c={toggleBold:w,toggleItalic:C,drawLink:te,toggleHeadingSmaller:L,toggleHeadingBigger:O,drawImage:le,toggleBlockquote:A,toggleOrderedList:K,toggleUnorderedList:W,toggleCodeBlock:R,togglePreview:ze,toggleStrikethrough:D,toggleHeading1:$,toggleHeading2:q,toggleHeading3:M,toggleHeading4:F,toggleHeading5:N,toggleHeading6:B,cleanBlock:ee,drawTable:ye,drawHorizontalRule:Ne,undo:Ge,redo:rt,toggleSideBySide:Be,toggleFullScreen:x},h={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var V,oe=!1;return V=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(V)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(V.substr(0,4)))&&(oe=!0),oe};function f(V){return V=l?V.replace("Ctrl","Cmd"):V.replace("Cmd","Ctrl")}function p(V,oe,fe,de){var Te=m(V,!1,oe,fe,"button",de);Te.classList.add("easymde-dropdown"),Te.onclick=function(){Te.focus()};var Ae=document.createElement("div");Ae.className="easymde-dropdown-content";for(var Se=0;Se<V.children.length;Se++){var Re,Pe=V.children[Se];(Re=m(typeof Pe=="string"&&Pe in re?re[Pe]:Pe,!0,oe,fe,"button",de)).addEventListener("click",function(We){We.stopPropagation()},!1),Ae.appendChild(Re)}return Te.appendChild(Ae),Te}function m(V,oe,fe,de,Te,Ae){V=V||{};var Se=document.createElement(Te);if(V.attributes)for(var Re in V.attributes)Object.prototype.hasOwnProperty.call(V.attributes,Re)&&Se.setAttribute(Re,V.attributes[Re]);var Pe=Ae.options.toolbarButtonClassPrefix?Ae.options.toolbarButtonClassPrefix+"-":"";Se.className=Pe+V.name,Se.setAttribute("type",Te),fe=fe==null||fe,V.text&&(Se.innerText=V.text),V.name&&V.name in de&&(c[V.name]=V.action),V.title&&fe&&(Se.title=function(St,ti,Rt){var xi,Mi=St;return ti&&Rt[xi=function(on){for(var en in c)if(c[en]===on)return en;return null}(ti)]&&(Mi+=" ("+f(Rt[xi])+")"),Mi}(V.title,V.action,de),l&&(Se.title=Se.title.replace("Ctrl","⌘"),Se.title=Se.title.replace("Alt","⌥"))),V.title&&Se.setAttribute("aria-label",V.title),V.noDisable&&Se.classList.add("no-disable"),V.noMobile&&Se.classList.add("no-mobile");var We=[];V.className!==void 0&&(We=V.className.split(" "));for(var st=[],ot=0;ot<We.length;ot++){var It=We[ot];It.match(/^fa([srlb]|(-[\w-]*)|$)/)?st.push(It):Se.classList.add(It)}if(Se.tabIndex=-1,st.length>0){for(var ct=document.createElement("i"),Ht=0;Ht<st.length;Ht++){var Yt=st[Ht];ct.classList.add(Yt)}Se.appendChild(ct)}return V.icon!==void 0&&(Se.innerHTML=V.icon),V.action&&oe&&(typeof V.action=="function"?Se.onclick=function(St){St.preventDefault(),V.action(Ae)}:typeof V.action=="string"&&(Se.onclick=function(St){St.preventDefault(),window.open(V.action,"_blank")})),Se}function y(){var V=document.createElement("i");return V.className="separator",V.innerHTML="|",V}function v(V,oe){oe=oe||V.getCursor("start");var fe=V.getTokenAt(oe);if(!fe.type)return{};for(var de,Te,Ae=fe.type.split(" "),Se={},Re=0;Re<Ae.length;Re++)(de=Ae[Re])==="strong"?Se.bold=!0:de==="variable-2"?(Te=V.getLine(oe.line),/^\s*\d+\.\s/.test(Te)?Se["ordered-list"]=!0:Se["unordered-list"]=!0):de==="atom"?Se.quote=!0:de==="em"?Se.italic=!0:de==="quote"?Se.quote=!0:de==="strikethrough"?Se.strikethrough=!0:de==="comment"?Se.code=!0:de!=="link"||Se.image?de==="image"?Se.image=!0:de.match(/^header(-[1-6])?$/)&&(Se[de.replace("header","heading")]=!0):Se.link=!0;return Se}var b="";function x(V){var oe=V.codemirror;oe.setOption("fullScreen",!oe.getOption("fullScreen")),oe.getOption("fullScreen")?(b=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=b;var fe=oe.getWrapperElement(),de=fe.nextSibling;if(de.classList.contains("editor-preview-active-side"))if(V.options.sideBySideFullscreen===!1){var Te=fe.parentNode;oe.getOption("fullScreen")?Te.classList.remove("sided--no-fullscreen"):Te.classList.add("sided--no-fullscreen")}else Be(V);V.options.onToggleFullScreen&&V.options.onToggleFullScreen(oe.getOption("fullScreen")||!1),V.options.maxHeight!==void 0&&(oe.getOption("fullScreen")?(oe.getScrollerElement().style.removeProperty("height"),de.style.removeProperty("height")):(oe.getScrollerElement().style.height=V.options.maxHeight,V.setPreviewMaxHeight())),V.toolbar_div.classList.toggle("fullscreen"),V.toolbarElements&&V.toolbarElements.fullscreen&&V.toolbarElements.fullscreen.classList.toggle("active")}function w(V){gi(V,"bold",V.options.blockStyles.bold)}function C(V){gi(V,"italic",V.options.blockStyles.italic)}function D(V){gi(V,"strikethrough","~~")}function R(V){var oe=V.options.blockStyles.code;function fe(En){if(typeof En!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof En+": "+En;return En.styles&&En.styles[2]&&En.styles[2].indexOf("formatting-code-block")!==-1}function de(En){return En.state.base.base||En.state.base}function Te(En,fn,hs,pn,zs){hs=hs||En.getLineHandle(fn),pn=pn||En.getTokenAt({line:fn,ch:1}),zs=zs||!!hs.text&&En.getTokenAt({line:fn,ch:hs.text.length-1});var Ii=pn.type?pn.type.split(" "):[];return zs&&de(zs).indentedCode?"indented":Ii.indexOf("comment")!==-1&&(de(pn).fencedChars||de(zs).fencedChars||fe(hs)?"fenced":"single")}var Ae,Se,Re,Pe=V.codemirror,We=Pe.getCursor("start"),st=Pe.getCursor("end"),ot=Pe.getTokenAt({line:We.line,ch:We.ch||1}),It=Pe.getLineHandle(We.line),ct=Te(Pe,We.line,It,ot);if(ct==="single"){var Ht=It.text.slice(0,We.ch).replace("`",""),Yt=It.text.slice(We.ch).replace("`","");Pe.replaceRange(Ht+Yt,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),We.ch--,We!==st&&st.ch--,Pe.setSelection(We,st),Pe.focus()}else if(ct==="fenced")if(We.line!==st.line||We.ch!==st.ch){for(Ae=We.line;Ae>=0&&!fe(It=Pe.getLineHandle(Ae));Ae--);var St,ti,Rt,xi,Mi=de(Pe.getTokenAt({line:Ae,ch:1})).fencedChars;fe(Pe.getLineHandle(We.line))?(St="",ti=We.line):fe(Pe.getLineHandle(We.line-1))?(St="",ti=We.line-1):(St=Mi+`
`,ti=We.line),fe(Pe.getLineHandle(st.line))?(Rt="",xi=st.line,st.ch===0&&(xi+=1)):st.ch!==0&&fe(Pe.getLineHandle(st.line+1))?(Rt="",xi=st.line+1):(Rt=Mi+`
`,xi=st.line+1),st.ch===0&&(xi-=1),Pe.operation(function(){Pe.replaceRange(Rt,{line:xi,ch:0},{line:xi+(Rt?0:1),ch:0}),Pe.replaceRange(St,{line:ti,ch:0},{line:ti+(St?0:1),ch:0})}),Pe.setSelection({line:ti+(St?1:0),ch:0},{line:xi+(St?1:-1),ch:0}),Pe.focus()}else{var on=We.line;if(fe(Pe.getLineHandle(We.line))&&(Te(Pe,We.line+1)==="fenced"?(Ae=We.line,on=We.line+1):(Se=We.line,on=We.line-1)),Ae===void 0)for(Ae=on;Ae>=0&&!fe(It=Pe.getLineHandle(Ae));Ae--);if(Se===void 0)for(Re=Pe.lineCount(),Se=on;Se<Re&&!fe(It=Pe.getLineHandle(Se));Se++);Pe.operation(function(){Pe.replaceRange("",{line:Ae,ch:0},{line:Ae+1,ch:0}),Pe.replaceRange("",{line:Se-1,ch:0},{line:Se,ch:0})}),Pe.focus()}else if(ct==="indented"){if(We.line!==st.line||We.ch!==st.ch)Ae=We.line,Se=st.line,st.ch===0&&Se--;else{for(Ae=We.line;Ae>=0;Ae--)if(!(It=Pe.getLineHandle(Ae)).text.match(/^\s*$/)&&Te(Pe,Ae,It)!=="indented"){Ae+=1;break}for(Re=Pe.lineCount(),Se=We.line;Se<Re;Se++)if(!(It=Pe.getLineHandle(Se)).text.match(/^\s*$/)&&Te(Pe,Se,It)!=="indented"){Se-=1;break}}var en=Pe.getLineHandle(Se+1),ri=en&&Pe.getTokenAt({line:Se+1,ch:en.text.length-1});ri&&de(ri).indentedCode&&Pe.replaceRange(`
`,{line:Se+1,ch:0});for(var Ot=Ae;Ot<=Se;Ot++)Pe.indentLine(Ot,"subtract");Pe.focus()}else{var Si=We.line===st.line&&We.ch===st.ch&&We.ch===0,Bn=We.line!==st.line;Si||Bn?function(En,fn,hs,pn){var zs=fn.line+1,Ii=hs.line+1,fo=fn.line!==hs.line,ve=pn+`
`,ke=`
`+pn;fo&&Ii++,fo&&hs.ch===0&&(ke=pn+`
`,Ii--),lt(En,!1,[ve,ke]),En.setSelection({line:zs,ch:0},{line:Ii,ch:0})}(Pe,We,st,oe):lt(Pe,!1,["`","`"])}}function A(V){Mt(V.codemirror,"quote")}function L(V){xt(V.codemirror,"smaller")}function O(V){xt(V.codemirror,"bigger")}function $(V){xt(V.codemirror,void 0,1)}function q(V){xt(V.codemirror,void 0,2)}function M(V){xt(V.codemirror,void 0,3)}function F(V){xt(V.codemirror,void 0,4)}function N(V){xt(V.codemirror,void 0,5)}function B(V){xt(V.codemirror,void 0,6)}function W(V){var oe=V.codemirror,fe="*";["-","+","*"].includes(V.options.unorderedListStyle)&&(fe=V.options.unorderedListStyle),Mt(oe,"unordered-list",fe)}function K(V){Mt(V.codemirror,"ordered-list")}function ee(V){(function(oe){if(!oe.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var fe,de=oe.getCursor("start"),Te=oe.getCursor("end"),Ae=de.line;Ae<=Te.line;Ae++)fe=(fe=oe.getLine(Ae)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),oe.replaceRange(fe,{line:Ae,ch:0},{line:Ae,ch:99999999999999})})(V.codemirror)}function te(V){var oe=V.options,fe="https://";if(oe.promptURLs){var de=prompt(oe.promptTexts.link,fe);if(!de)return!1;fe=Q(de)}Ct(V,"link",oe.insertTexts.link,fe)}function le(V){var oe=V.options,fe="https://";if(oe.promptURLs){var de=prompt(oe.promptTexts.image,fe);if(!de)return!1;fe=Q(de)}Ct(V,"image",oe.insertTexts.image,fe)}function Q(V){return encodeURI(V).replace(/([\\()])/g,"\\$1")}function z(V){V.openBrowseFileWindow()}function J(V,oe){var fe=V.codemirror,de=v(fe),Te=V.options,Ae=oe.substr(oe.lastIndexOf("/")+1),Se=Ae.substring(Ae.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Se))lt(fe,de.image,Te.insertTexts.uploadedImage,oe);else{var Re=Te.insertTexts.link;Re[0]="["+Ae,lt(fe,de.link,Re,oe)}V.updateStatusBar("upload-image",V.options.imageTexts.sbOnUploaded.replace("#image_name#",Ae)),setTimeout(function(){V.updateStatusBar("upload-image",V.options.imageTexts.sbInit)},1e3)}function ye(V){var oe=V.codemirror,fe=v(oe),de=V.options;lt(oe,fe.table,de.insertTexts.table)}function Ne(V){var oe=V.codemirror,fe=v(oe),de=V.options;lt(oe,fe.image,de.insertTexts.horizontalRule)}function Ge(V){var oe=V.codemirror;oe.undo(),oe.focus()}function rt(V){var oe=V.codemirror;oe.redo(),oe.focus()}function Be(V){var oe=V.codemirror,fe=oe.getWrapperElement(),de=fe.nextSibling,Te=V.toolbarElements&&V.toolbarElements["side-by-side"],Ae=!1,Se=fe.parentNode;de.classList.contains("editor-preview-active-side")?(V.options.sideBySideFullscreen===!1&&Se.classList.remove("sided--no-fullscreen"),de.classList.remove("editor-preview-active-side"),Te&&Te.classList.remove("active"),fe.classList.remove("CodeMirror-sided")):(setTimeout(function(){oe.getOption("fullScreen")||(V.options.sideBySideFullscreen===!1?Se.classList.add("sided--no-fullscreen"):x(V)),de.classList.add("editor-preview-active-side")},1),Te&&Te.classList.add("active"),fe.classList.add("CodeMirror-sided"),Ae=!0);var Re=fe.lastChild;if(Re.classList.contains("editor-preview-active")){Re.classList.remove("editor-preview-active");var Pe=V.toolbarElements.preview,We=V.toolbar_div;Pe.classList.remove("active"),We.classList.remove("disabled-for-preview")}if(oe.sideBySideRenderingFunction||(oe.sideBySideRenderingFunction=function(){var ot=V.options.previewRender(V.value(),de);ot!=null&&(de.innerHTML=ot)}),Ae){var st=V.options.previewRender(V.value(),de);st!=null&&(de.innerHTML=st),oe.on("update",oe.sideBySideRenderingFunction)}else oe.off("update",oe.sideBySideRenderingFunction);oe.refresh()}function ze(V){var oe=V.codemirror,fe=oe.getWrapperElement(),de=V.toolbar_div,Te=!!V.options.toolbar&&V.toolbarElements.preview,Ae=fe.lastChild;if(oe.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&Be(V),!Ae||!Ae.classList.contains("editor-preview-full")){if((Ae=document.createElement("div")).className="editor-preview-full",V.options.previewClass)if(Array.isArray(V.options.previewClass))for(var Se=0;Se<V.options.previewClass.length;Se++)Ae.classList.add(V.options.previewClass[Se]);else typeof V.options.previewClass=="string"&&Ae.classList.add(V.options.previewClass);fe.appendChild(Ae)}Ae.classList.contains("editor-preview-active")?(Ae.classList.remove("editor-preview-active"),Te&&(Te.classList.remove("active"),de.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ae.classList.add("editor-preview-active")},1),Te&&(Te.classList.add("active"),de.classList.add("disabled-for-preview")));var Re=V.options.previewRender(V.value(),Ae);Re!==null&&(Ae.innerHTML=Re)}function lt(V,oe,fe,de){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var Te,Ae=fe[0],Se=fe[1],Re={},Pe={};Object.assign(Re,V.getCursor("start")),Object.assign(Pe,V.getCursor("end")),de&&(Ae=Ae.replace("#url#",de),Se=Se.replace("#url#",de)),oe?(Ae=(Te=V.getLine(Re.line)).slice(0,Re.ch),Se=Te.slice(Re.ch),V.replaceRange(Ae+Se,{line:Re.line,ch:0})):(Te=V.getSelection(),V.replaceSelection(Ae+Te+Se),Re.ch+=Ae.length,Re!==Pe&&(Pe.ch+=Ae.length)),V.setSelection(Re,Pe),V.focus()}}function xt(V,oe,fe){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var de=V.getCursor("start"),Te=V.getCursor("end"),Ae=de.line;Ae<=Te.line;Ae++)(function(Se){var Re=V.getLine(Se),Pe=Re.search(/[^#]/);Re=oe!==void 0?Pe<=0?oe=="bigger"?"###### "+Re:"# "+Re:Pe==6&&oe=="smaller"?Re.substr(7):Pe==1&&oe=="bigger"?Re.substr(2):oe=="bigger"?Re.substr(1):"#"+Re:Pe<=0?"#".repeat(fe)+" "+Re:Pe==fe?Re.substr(Pe+1):"#".repeat(fe)+" "+Re.substr(Pe+1),V.replaceRange(Re,{line:Se,ch:0},{line:Se,ch:99999999999999})})(Ae);V.focus()}}function Mt(V,oe,fe){if(!V.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var de=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,Te=/^\s*/,Ae=v(V),Se=V.getCursor("start"),Re=V.getCursor("end"),Pe={quote:/^(\s*)>\s+/,"unordered-list":de,"ordered-list":de},We=function(It,ct,Ht){var Yt=de.exec(ct),St=function(ti,Rt){return{quote:">","unordered-list":fe,"ordered-list":"%%i."}[ti].replace("%%i",Rt)}(It,st);return Yt!==null?(function(ti,Rt){var xi=new RegExp({quote:">","unordered-list":"\\"+fe,"ordered-list":"\\d+."}[ti]);return Rt&&xi.test(Rt)}(It,Yt[2])&&(St=""),ct=Yt[1]+St+Yt[3]+ct.replace(Te,"").replace(Pe[It],"$1")):Ht==0&&(ct=St+" "+ct),ct},st=1,ot=Se.line;ot<=Re.line;ot++)(function(It){var ct=V.getLine(It);Ae[oe]?ct=ct.replace(Pe[oe],"$1"):(oe=="unordered-list"&&(ct=We("ordered-list",ct,!0)),ct=We(oe,ct,!1),st+=1),V.replaceRange(ct,{line:It,ch:0},{line:It,ch:99999999999999})})(ot);V.focus()}}function Ct(V,oe,fe,de){if(V.codemirror&&!V.isPreviewActive()){var Te=V.codemirror,Ae=v(Te)[oe];if(Ae){var Se=Te.getCursor("start"),Re=Te.getCursor("end"),Pe=Te.getLine(Se.line),We=Pe.slice(0,Se.ch),st=Pe.slice(Se.ch);oe=="link"?We=We.replace(/(.*)[^!]\[/,"$1"):oe=="image"&&(We=We.replace(/(.*)!\[$/,"$1")),st=st.replace(/]\(.*?\)/,""),Te.replaceRange(We+st,{line:Se.line,ch:0},{line:Se.line,ch:99999999999999}),Se.ch-=fe[0].length,Se!==Re&&(Re.ch-=fe[0].length),Te.setSelection(Se,Re),Te.focus()}else lt(Te,Ae,fe,de)}}function gi(V,oe,fe,de){if(V.codemirror&&!V.isPreviewActive()){de=de===void 0?fe:de;var Te,Ae=V.codemirror,Se=v(Ae),Re=fe,Pe=de,We=Ae.getCursor("start"),st=Ae.getCursor("end");Se[oe]?(Re=(Te=Ae.getLine(We.line)).slice(0,We.ch),Pe=Te.slice(We.ch),oe=="bold"?(Re=Re.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Pe=Pe.replace(/(\*\*|__)/,"")):oe=="italic"?(Re=Re.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Pe=Pe.replace(/(\*|_)/,"")):oe=="strikethrough"&&(Re=Re.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Pe=Pe.replace(/(\*\*|~~)/,"")),Ae.replaceRange(Re+Pe,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),oe=="bold"||oe=="strikethrough"?(We.ch-=2,We!==st&&(st.ch-=2)):oe=="italic"&&(We.ch-=1,We!==st&&(st.ch-=1))):(Te=Ae.getSelection(),oe=="bold"?Te=(Te=Te.split("**").join("")).split("__").join(""):oe=="italic"?Te=(Te=Te.split("*").join("")).split("_").join(""):oe=="strikethrough"&&(Te=Te.split("~~").join("")),Ae.replaceSelection(Re+Te+Pe),We.ch+=fe.length,st.ch=We.ch+Te.length),Ae.setSelection(We,st),Ae.focus()}}function Wt(V,oe){if(Math.abs(V)<1024)return""+V+oe[0];var fe=0;do V/=1024,++fe;while(Math.abs(V)>=1024&&fe<oe.length);return""+V.toFixed(1)+oe[fe]}function Qi(V,oe){for(var fe in oe)Object.prototype.hasOwnProperty.call(oe,fe)&&(oe[fe]instanceof Array?V[fe]=oe[fe].concat(V[fe]instanceof Array?V[fe]:[]):oe[fe]!==null&&typeof oe[fe]=="object"&&oe[fe].constructor===Object?V[fe]=Qi(V[fe]||{},oe[fe]):V[fe]=oe[fe]);return V}function He(V){for(var oe=1;oe<arguments.length;oe++)V=Qi(V,arguments[oe]);return V}function ge(V){var oe=V.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),fe=0;if(oe===null)return fe;for(var de=0;de<oe.length;de++)oe[de].charCodeAt(0)>=19968?fe+=oe[de].length:fe+=1;return fe}var se={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},re={bold:{name:"bold",action:w,className:se.bold,title:"Bold",default:!0},italic:{name:"italic",action:C,className:se.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:D,className:se.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:L,className:se.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:L,className:se["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:O,className:se["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:$,className:se["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:q,className:se["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:M,className:se["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:R,className:se.code,title:"Code"},quote:{name:"quote",action:A,className:se.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:W,className:se["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:K,className:se["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:ee,className:se["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:te,className:se.link,title:"Create Link",default:!0},image:{name:"image",action:le,className:se.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:se["upload-image"],title:"Import an image"},table:{name:"table",action:ye,className:se.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:Ne,className:se["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:ze,className:se.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:Be,className:se["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:x,className:se.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:se.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:Ge,className:se.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:rt,className:se.redo,noDisable:!0,title:"Redo"}},pe={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},I={link:"URL for the link:",image:"URL of the image:"},G={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},Z={bold:"**",code:"```",italic:"*"},ie={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},me={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function _e(V){(V=V||{}).parent=this;var oe=!0;if(V.autoDownloadFontAwesome===!1&&(oe=!1),V.autoDownloadFontAwesome!==!0)for(var fe=document.styleSheets,de=0;de<fe.length;de++)fe[de].href&&fe[de].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(oe=!1);if(oe){var Te=document.createElement("link");Te.rel="stylesheet",Te.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(Te)}if(V.element)this.element=V.element;else if(V.element===null)return void console.log("EasyMDE: Error. No element was found.");if(V.toolbar===void 0)for(var Ae in V.toolbar=[],re)Object.prototype.hasOwnProperty.call(re,Ae)&&(Ae.indexOf("separator-")!=-1&&V.toolbar.push("|"),(re[Ae].default===!0||V.showIcons&&V.showIcons.constructor===Array&&V.showIcons.indexOf(Ae)!=-1)&&V.toolbar.push(Ae));if(Object.prototype.hasOwnProperty.call(V,"previewClass")||(V.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(V,"status")||(V.status=["autosave","lines","words","cursor"],V.uploadImage&&V.status.unshift("upload-image")),V.previewRender||(V.previewRender=function(Re){return this.parent.markdown(Re)}),V.parsingConfig=He({highlightFormatting:!0},V.parsingConfig||{}),V.insertTexts=He({},pe,V.insertTexts||{}),V.promptTexts=He({},I,V.promptTexts||{}),V.blockStyles=He({},Z,V.blockStyles||{}),V.autosave!=null&&(V.autosave.timeFormat=He({},G,V.autosave.timeFormat||{})),V.iconClassMap=He({},se,V.iconClassMap||{}),V.shortcuts=He({},h,V.shortcuts||{}),V.maxHeight=V.maxHeight||void 0,V.direction=V.direction||"ltr",V.maxHeight!==void 0?V.minHeight=V.maxHeight:V.minHeight=V.minHeight||"300px",V.errorCallback=V.errorCallback||function(Re){alert(Re)},V.uploadImage=V.uploadImage||!1,V.imageMaxSize=V.imageMaxSize||2097152,V.imageAccept=V.imageAccept||"image/png, image/jpeg, image/gif, image/avif",V.imageTexts=He({},ie,V.imageTexts||{}),V.errorMessages=He({},me,V.errorMessages||{}),V.imagePathAbsolute=V.imagePathAbsolute||!1,V.imageCSRFName=V.imageCSRFName||"csrfmiddlewaretoken",V.imageCSRFHeader=V.imageCSRFHeader||!1,V.autosave!=null&&V.autosave.unique_id!=null&&V.autosave.unique_id!=""&&(V.autosave.uniqueId=V.autosave.unique_id),V.overlayMode&&V.overlayMode.combine===void 0&&(V.overlayMode.combine=!0),this.options=V,this.render(),!V.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(V.initialValue),V.uploadImage){var Se=this;this.codemirror.on("dragenter",function(Re,Pe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbOnDragEnter),Pe.stopPropagation(),Pe.preventDefault()}),this.codemirror.on("dragend",function(Re,Pe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbInit),Pe.stopPropagation(),Pe.preventDefault()}),this.codemirror.on("dragleave",function(Re,Pe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbInit),Pe.stopPropagation(),Pe.preventDefault()}),this.codemirror.on("dragover",function(Re,Pe){Se.updateStatusBar("upload-image",Se.options.imageTexts.sbOnDragEnter),Pe.stopPropagation(),Pe.preventDefault()}),this.codemirror.on("drop",function(Re,Pe){Pe.stopPropagation(),Pe.preventDefault(),V.imageUploadFunction?Se.uploadImagesUsingCustomFunction(V.imageUploadFunction,Pe.dataTransfer.files):Se.uploadImages(Pe.dataTransfer.files)}),this.codemirror.on("paste",function(Re,Pe){V.imageUploadFunction?Se.uploadImagesUsingCustomFunction(V.imageUploadFunction,Pe.clipboardData.files):Se.uploadImages(Pe.clipboardData.files)})}}function xe(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}_e.prototype.uploadImages=function(V,oe,fe){if(V.length!==0){for(var de=[],Te=0;Te<V.length;Te++)de.push(V[Te].name),this.uploadImage(V[Te],oe,fe);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",de.join(", ")))}},_e.prototype.uploadImagesUsingCustomFunction=function(V,oe){if(oe.length!==0){for(var fe=[],de=0;de<oe.length;de++)fe.push(oe[de].name),this.uploadImageUsingCustomFunction(V,oe[de]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",fe.join(", ")))}},_e.prototype.updateStatusBar=function(V,oe){if(this.gui.statusbar){var fe=this.gui.statusbar.getElementsByClassName(V);fe.length===1?this.gui.statusbar.getElementsByClassName(V)[0].textContent=oe:fe.length===0?console.log("EasyMDE: status bar item "+V+" was not found."):console.log("EasyMDE: Several status bar items named "+V+" was found.")}},_e.prototype.markdown=function(V){if(a){var oe;if(oe=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?oe.breaks=!1:oe.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var fe=this.options.renderingConfig.hljs||window.hljs;fe&&(oe.highlight=function(Te,Ae){return Ae&&fe.getLanguage(Ae)?fe.highlight(Ae,Te).value:fe.highlightAuto(Te).value})}a.setOptions(oe);var de=a.parse(V);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(de=this.options.renderingConfig.sanitizerFunction.call(this,de)),de=function(Te){for(var Ae=new DOMParser().parseFromString(Te,"text/html"),Se=Ae.getElementsByTagName("li"),Re=0;Re<Se.length;Re++)for(var Pe=Se[Re],We=0;We<Pe.children.length;We++){var st=Pe.children[We];st instanceof HTMLInputElement&&st.type==="checkbox"&&(Pe.style.marginLeft="-1.5em",Pe.style.listStyleType="none")}return Ae.documentElement.innerHTML}(de=function(Te){for(var Ae;(Ae=u.exec(Te))!==null;){var Se=Ae[0];if(Se.indexOf("target=")===-1){var Re=Se.replace(/>$/,' target="_blank">');Te=Te.replace(Se,Re)}}return Te}(de))}},_e.prototype.render=function(V){if(V||(V=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==V){this.element=V;var oe,fe,de=this.options,Te=this,Ae={};for(var Se in de.shortcuts)de.shortcuts[Se]!==null&&c[Se]!==null&&function(ct){Ae[f(de.shortcuts[ct])]=function(){var Ht=c[ct];typeof Ht=="function"?Ht(Te):typeof Ht=="string"&&window.open(Ht,"_blank")}}(Se);if(Ae.Enter="newlineAndIndentContinueMarkdownList",Ae.Tab="tabAndIndentMarkdownList",Ae["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ae.Esc=function(ct){ct.getOption("fullScreen")&&x(Te)},this.documentOnKeyDown=function(ct){(ct=ct||window.event).keyCode==27&&Te.codemirror.getOption("fullScreen")&&x(Te)},document.addEventListener("keydown",this.documentOnKeyDown,!1),de.overlayMode?(s.defineMode("overlay-mode",function(ct){return s.overlayMode(s.getMode(ct,de.spellChecker!==!1?"spell-checker":"gfm"),de.overlayMode.mode,de.overlayMode.combine)}),oe="overlay-mode",(fe=de.parsingConfig).gitHubSpice=!1):((oe=de.parsingConfig).name="gfm",oe.gitHubSpice=!1),de.spellChecker!==!1&&(oe="spell-checker",(fe=de.parsingConfig).name="gfm",fe.gitHubSpice=!1,typeof de.spellChecker=="function"?de.spellChecker({codeMirrorInstance:s}):o({codeMirrorInstance:s})),this.codemirror=s.fromTextArea(V,{mode:oe,backdrop:fe,theme:de.theme!=null?de.theme:"easymde",tabSize:de.tabSize!=null?de.tabSize:2,indentUnit:de.tabSize!=null?de.tabSize:2,indentWithTabs:de.indentWithTabs!==!1,lineNumbers:de.lineNumbers===!0,autofocus:de.autofocus===!0,extraKeys:Ae,direction:de.direction,lineWrapping:de.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:de.placeholder||V.getAttribute("placeholder")||"",styleSelectedText:de.styleSelectedText!=null?de.styleSelectedText:!d(),scrollbarStyle:de.scrollbarStyle!=null?de.scrollbarStyle:"native",configureMouse:function(ct,Ht,Yt){return{addNew:!1}},inputStyle:de.inputStyle!=null?de.inputStyle:d()?"contenteditable":"textarea",spellcheck:de.nativeSpellcheck==null||de.nativeSpellcheck,autoRefresh:de.autoRefresh!=null&&de.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=de.minHeight,de.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=de.maxHeight),de.forceSync===!0){var Re=this.codemirror;Re.on("change",function(){Re.save()})}this.gui={};var Pe=document.createElement("div");Pe.classList.add("EasyMDEContainer"),Pe.setAttribute("role","application");var We=this.codemirror.getWrapperElement();We.parentNode.insertBefore(Pe,We),Pe.appendChild(We),de.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),de.status!==!1&&(this.gui.statusbar=this.createStatusbar()),de.autosave!=null&&de.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(Te._autosave_timeout),Te._autosave_timeout=setTimeout(function(){Te.autosave()},Te.options.autosave.submit_delay||Te.options.autosave.delay||1e3)}));var st=this;this.codemirror.on("update",function(){de.previewImagesInEditor&&Pe.querySelectorAll(".cm-image-marker").forEach(function(ct){var Ht=ct.parentElement;if(Ht.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Ht.hasAttribute("data-img-src")){var Yt=Ht.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),Yt&&Yt.length>=2){var St=Yt[1];if(de.imagesPreviewHandler){var ti=de.imagesPreviewHandler(Yt[1]);typeof ti=="string"&&(St=ti)}if(window.EMDEimagesCache[St])It(Ht,window.EMDEimagesCache[St]);else{var Rt=document.createElement("img");Rt.onload=function(){window.EMDEimagesCache[St]={naturalWidth:Rt.naturalWidth,naturalHeight:Rt.naturalHeight,url:St},It(Ht,window.EMDEimagesCache[St])},Rt.src=St}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(de.autofocus===!0||V.autofocus)&&this.codemirror.focus();var ot=this.codemirror;setTimeout((function(){ot.refresh()}).bind(ot),0)}function It(ct,Ht){var Yt,St;ct.setAttribute("data-img-src",Ht.url),ct.setAttribute("style","--bg-image:url("+Ht.url+");--width:"+Ht.naturalWidth+"px;--height:"+(Yt=Ht.naturalWidth,St=Ht.naturalHeight,Yt<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?St+"px":St/Yt*100+"%")),st.codemirror.setSize()}},_e.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},_e.prototype.autosave=function(){if(xe()){var V=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(V.element.form!=null&&V.element.form!=null&&V.element.form.addEventListener("submit",function(){clearTimeout(V.autosaveTimeoutId),V.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+V.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var oe=V.value();oe!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,oe):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var fe=document.getElementById("autosaved");if(fe!=null&&fe!=null&&fe!=""){var de=new Date,Te=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(de),Ae=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;fe.innerHTML=Ae+Te}}else console.log("EasyMDE: localStorage not available, cannot autosave")},_e.prototype.clearAutosavedValue=function(){if(xe()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},_e.prototype.openBrowseFileWindow=function(V,oe){var fe=this,de=this.gui.toolbar.getElementsByClassName("imageInput")[0];de.click(),de.addEventListener("change",function Te(Ae){fe.options.imageUploadFunction?fe.uploadImagesUsingCustomFunction(fe.options.imageUploadFunction,Ae.target.files):fe.uploadImages(Ae.target.files,V,oe),de.removeEventListener("change",Te)})},_e.prototype.uploadImage=function(V,oe,fe){var de=this;function Te(Pe){de.updateStatusBar("upload-image",Pe),setTimeout(function(){de.updateStatusBar("upload-image",de.options.imageTexts.sbInit)},1e4),fe&&typeof fe=="function"&&fe(Pe),de.options.errorCallback(Pe)}function Ae(Pe){var We=de.options.imageTexts.sizeUnits.split(",");return Pe.replace("#image_name#",V.name).replace("#image_size#",Wt(V.size,We)).replace("#image_max_size#",Wt(de.options.imageMaxSize,We))}if(oe=oe||function(Pe){J(de,Pe)},V.size>this.options.imageMaxSize)Te(Ae(this.options.errorMessages.fileTooLarge));else{var Se=new FormData;Se.append("image",V),de.options.imageCSRFToken&&!de.options.imageCSRFHeader&&Se.append(de.options.imageCSRFName,de.options.imageCSRFToken);var Re=new XMLHttpRequest;Re.upload.onprogress=function(Pe){if(Pe.lengthComputable){var We=""+Math.round(100*Pe.loaded/Pe.total);de.updateStatusBar("upload-image",de.options.imageTexts.sbProgress.replace("#file_name#",V.name).replace("#progress#",We))}},Re.open("POST",this.options.imageUploadEndpoint),de.options.imageCSRFToken&&de.options.imageCSRFHeader&&Re.setRequestHeader(de.options.imageCSRFName,de.options.imageCSRFToken),Re.onload=function(){try{var Pe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void Te(Ae(de.options.errorMessages.importError))}this.status===200&&Pe&&!Pe.error&&Pe.data&&Pe.data.filePath?oe((de.options.imagePathAbsolute?"":window.location.origin+"/")+Pe.data.filePath):Pe.error&&Pe.error in de.options.errorMessages?Te(Ae(de.options.errorMessages[Pe.error])):Pe.error?Te(Ae(Pe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),Te(Ae(de.options.errorMessages.importError)))},Re.onerror=function(Pe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Pe.target.status+" ("+Pe.target.statusText+")"),Te(de.options.errorMessages.importError)},Re.send(Se)}},_e.prototype.uploadImageUsingCustomFunction=function(V,oe){var fe=this;V.apply(this,[oe,function(de){J(fe,de)},function(de){var Te=function(Ae){var Se=fe.options.imageTexts.sizeUnits.split(",");return Ae.replace("#image_name#",oe.name).replace("#image_size#",Wt(oe.size,Se)).replace("#image_max_size#",Wt(fe.options.imageMaxSize,Se))}(de);fe.updateStatusBar("upload-image",Te),setTimeout(function(){fe.updateStatusBar("upload-image",fe.options.imageTexts.sbInit)},1e4),fe.options.errorCallback(Te)}])},_e.prototype.setPreviewMaxHeight=function(){var V=this.codemirror.getWrapperElement(),oe=V.nextSibling,fe=parseInt(window.getComputedStyle(V).paddingTop),de=parseInt(window.getComputedStyle(V).borderTopWidth),Te=(parseInt(this.options.maxHeight)+2*fe+2*de).toString()+"px";oe.style.height=Te},_e.prototype.createSideBySide=function(){var V=this.codemirror,oe=V.getWrapperElement(),fe=oe.nextSibling;if(!fe||!fe.classList.contains("editor-preview-side")){if((fe=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var de=0;de<this.options.previewClass.length;de++)fe.classList.add(this.options.previewClass[de]);else typeof this.options.previewClass=="string"&&fe.classList.add(this.options.previewClass);oe.parentNode.insertBefore(fe,oe.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return fe;var Te=!1,Ae=!1;return V.on("scroll",function(Se){if(Te)Te=!1;else{Ae=!0;var Re=Se.getScrollInfo().height-Se.getScrollInfo().clientHeight,Pe=parseFloat(Se.getScrollInfo().top)/Re,We=(fe.scrollHeight-fe.clientHeight)*Pe;fe.scrollTop=We}}),fe.onscroll=function(){if(Ae)Ae=!1;else{Te=!0;var Se=fe.scrollHeight-fe.clientHeight,Re=parseFloat(fe.scrollTop)/Se,Pe=(V.getScrollInfo().height-V.getScrollInfo().clientHeight)*Re;V.scrollTo(0,Pe)}},fe},_e.prototype.createToolbar=function(V){if((V=V||this.options.toolbar)&&V.length!==0){var oe;for(oe=0;oe<V.length;oe++)re[V[oe]]!=null&&(V[oe]=re[V[oe]]);var fe=document.createElement("div");fe.className="editor-toolbar",fe.setAttribute("role","toolbar");var de=this,Te={};for(de.toolbar=V,oe=0;oe<V.length;oe++)if((V[oe].name!="guide"||de.options.toolbarGuideIcon!==!1)&&!(de.options.hideIcons&&de.options.hideIcons.indexOf(V[oe].name)!=-1||(V[oe].name=="fullscreen"||V[oe].name=="side-by-side")&&d())){if(V[oe]==="|"){for(var Ae=!1,Se=oe+1;Se<V.length;Se++)V[Se]==="|"||de.options.hideIcons&&de.options.hideIcons.indexOf(V[Se].name)!=-1||(Ae=!0);if(!Ae)continue}(function(We){var st;if(st=We==="|"?y():We.children?p(We,de.options.toolbarTips,de.options.shortcuts,de):m(We,!0,de.options.toolbarTips,de.options.shortcuts,"button",de),Te[We.name||We]=st,fe.appendChild(st),We.name==="upload-image"){var ot=document.createElement("input");ot.className="imageInput",ot.type="file",ot.multiple=!0,ot.name="image",ot.accept=de.options.imageAccept,ot.style.display="none",ot.style.opacity=0,fe.appendChild(ot)}})(V[oe])}de.toolbar_div=fe,de.toolbarElements=Te;var Re=this.codemirror;Re.on("cursorActivity",function(){var We=v(Re);for(var st in Te)(function(ot){var It=Te[ot];We[ot]?It.classList.add("active"):ot!="fullscreen"&&ot!="side-by-side"&&It.classList.remove("active")})(st)});var Pe=Re.getWrapperElement();return Pe.parentNode.insertBefore(fe,Pe),fe}},_e.prototype.createStatusbar=function(V){V=V||this.options.status;var oe=this.options,fe=this.codemirror;if(V&&V.length!==0){var de,Te,Ae,Se,Re=[];for(de=0;de<V.length;de++)if(Te=void 0,Ae=void 0,Se=void 0,typeof V[de]=="object")Re.push({className:V[de].className,defaultValue:V[de].defaultValue,onUpdate:V[de].onUpdate,onActivity:V[de].onActivity});else{var Pe=V[de];Pe==="words"?(Se=function(ct){ct.innerHTML=ge(fe.getValue())},Te=function(ct){ct.innerHTML=ge(fe.getValue())}):Pe==="lines"?(Se=function(ct){ct.innerHTML=fe.lineCount()},Te=function(ct){ct.innerHTML=fe.lineCount()}):Pe==="cursor"?(Se=function(ct){ct.innerHTML="1:1"},Ae=function(ct){var Ht=fe.getCursor(),Yt=Ht.line+1,St=Ht.ch+1;ct.innerHTML=Yt+":"+St}):Pe==="autosave"?Se=function(ct){oe.autosave!=null&&oe.autosave.enabled===!0&&ct.setAttribute("id","autosaved")}:Pe==="upload-image"&&(Se=function(ct){ct.innerHTML=oe.imageTexts.sbInit}),Re.push({className:Pe,defaultValue:Se,onUpdate:Te,onActivity:Ae})}var We=document.createElement("div");for(We.className="editor-statusbar",de=0;de<Re.length;de++){var st=Re[de],ot=document.createElement("span");ot.className=st.className,typeof st.defaultValue=="function"&&st.defaultValue(ot),typeof st.onUpdate=="function"&&this.codemirror.on("update",function(ct,Ht){return function(){Ht.onUpdate(ct)}}(ot,st)),typeof st.onActivity=="function"&&this.codemirror.on("cursorActivity",function(ct,Ht){return function(){Ht.onActivity(ct)}}(ot,st)),We.appendChild(ot)}var It=this.codemirror.getWrapperElement();return It.parentNode.insertBefore(We,It.nextSibling),We}},_e.prototype.value=function(V){var oe=this.codemirror;if(V===void 0)return oe.getValue();if(oe.getDoc().setValue(V),this.isPreviewActive()){var fe=oe.getWrapperElement().lastChild,de=this.options.previewRender(V,fe);de!==null&&(fe.innerHTML=de)}return this},_e.toggleBold=w,_e.toggleItalic=C,_e.toggleStrikethrough=D,_e.toggleBlockquote=A,_e.toggleHeadingSmaller=L,_e.toggleHeadingBigger=O,_e.toggleHeading1=$,_e.toggleHeading2=q,_e.toggleHeading3=M,_e.toggleHeading4=F,_e.toggleHeading5=N,_e.toggleHeading6=B,_e.toggleCodeBlock=R,_e.toggleUnorderedList=W,_e.toggleOrderedList=K,_e.cleanBlock=ee,_e.drawLink=te,_e.drawImage=le,_e.drawUploadedImage=z,_e.drawTable=ye,_e.drawHorizontalRule=Ne,_e.undo=Ge,_e.redo=rt,_e.togglePreview=ze,_e.toggleSideBySide=Be,_e.toggleFullScreen=x,_e.prototype.toggleBold=function(){w(this)},_e.prototype.toggleItalic=function(){C(this)},_e.prototype.toggleStrikethrough=function(){D(this)},_e.prototype.toggleBlockquote=function(){A(this)},_e.prototype.toggleHeadingSmaller=function(){L(this)},_e.prototype.toggleHeadingBigger=function(){O(this)},_e.prototype.toggleHeading1=function(){$(this)},_e.prototype.toggleHeading2=function(){q(this)},_e.prototype.toggleHeading3=function(){M(this)},_e.prototype.toggleHeading4=function(){F(this)},_e.prototype.toggleHeading5=function(){N(this)},_e.prototype.toggleHeading6=function(){B(this)},_e.prototype.toggleCodeBlock=function(){R(this)},_e.prototype.toggleUnorderedList=function(){W(this)},_e.prototype.toggleOrderedList=function(){K(this)},_e.prototype.cleanBlock=function(){ee(this)},_e.prototype.drawLink=function(){te(this)},_e.prototype.drawImage=function(){le(this)},_e.prototype.drawUploadedImage=function(){z(this)},_e.prototype.drawTable=function(){ye(this)},_e.prototype.drawHorizontalRule=function(){Ne(this)},_e.prototype.undo=function(){Ge(this)},_e.prototype.redo=function(){rt(this)},_e.prototype.togglePreview=function(){ze(this)},_e.prototype.toggleSideBySide=function(){Be(this)},_e.prototype.toggleFullScreen=function(){x(this)},_e.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},_e.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},_e.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},_e.prototype.getState=function(){return v(this.codemirror)},_e.prototype.toTextArea=function(){var V=this.codemirror,oe=V.getWrapperElement(),fe=oe.parentNode;fe&&(this.gui.toolbar&&fe.removeChild(this.gui.toolbar),this.gui.statusbar&&fe.removeChild(this.gui.statusbar),this.gui.sideBySide&&fe.removeChild(this.gui.sideBySide)),fe.parentNode.insertBefore(oe,fe),fe.remove(),V.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},n.exports=_e},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})})(CTe);var Xet=CTe.exports;const Yet=Ea(Xet);(()=>{var i=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var e="min-label",t="max-label",n="#1E293B",r=()=>{let s=null,o=null,a=null,l,u=!1,c=n,h="",d,f=null,p=null,m=null,y=[],v=()=>{var O;let $=(O=s==null?void 0:s.shadowRoot)==null?void 0:O.querySelector(".range-slider-box");f=document.createElement("div"),f.classList.add("labels-row"),$.prepend(f)},b=O=>{let $=document.createElement("label");return $.className=O,$.setAttribute("for","range-slider"),$},x=()=>{p=b(e),p.textContent=L(a==null?void 0:a.getTextMin(),h),m=b(t),m.textContent=L(a==null?void 0:a.getTextMax(),h),o==null||o.before(p),o==null||o.after(m);let O=a==null?void 0:a.getValues();if(O)for(let $=0;$<O.length;$++){let q=b(`value${$+1}-label generated-label`);q.textContent=L(O[$],h),y.push(q),f==null||f.append(q)}},w=()=>{for(let O of y)!O||O.remove();p==null||p.remove(),m==null||m.remove(),f==null||f.remove(),y=[]},C=O=>{u=O,u?(v(),x()):w()},D=O=>{c=O;for(let $ of y)!$||($.style.color=c??n);p&&(p.style.color=c??n),m&&(m.style.color=c??n)},R=O=>{h=O,l&&l()},A=()=>{!a||!f||f.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},L=(O,$)=>{let q=`${(O??"").toString()}${$}`;return d&&typeof d=="function"?d(O):q};return{get name(){return"Generated Labels"},init:(O,$,q,M)=>{var F,N,B;s=O,a=M,o=(F=O.shadowRoot)==null?void 0:F.getElementById("range-slider"),l=$,c=(N=s.getAttribute("generate-labels-text-color"))!=null?N:n,h=(B=s.getAttribute("generate-labels-units"))!=null?B:"",C(i(s.getAttribute("generate-labels"))),A(),D(c)},update:O=>{if(!(!u||!O.values)){A();for(let $=0;$<O.values.length;$++){let q=O.values[$],M=y[$];if(q===void 0&&M){M.remove(),y[$]=void 0;continue}if(q!==void 0&&!M){let F=b(`value${$+1}-label generated-label`);if(F.textContent=L(q,h),y[$]=F,O.values.length<=0)f==null||f.append(F);else if($===0)f==null||f.append(F);else{let N=y[$-1];N==null||N.after(F)}continue}!M||(M.textContent=L(q,h))}p&&(p.textContent=L(O.textMin,h)),m&&(m.textContent=L(O.textMax,h)),D(c)}},onAttrChange:(O,$)=>{O==="generate-labels"&&C(i($)),O==="generate-labels-text-color"&&D($),O==="generate-labels-units"&&R($)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:O=>{C(i(O))}}},{name:"textColor",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsTextColor",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"units",attributes:{get(){return h??""},set:O=>{R(O)}}},{name:"generateLabelsUnits",attributes:{get(){return h??""},set:O=>{R(O)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:O=>{d=O,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:w}};window.tcRangeSliderPlugins.push(r)})();function Zet(i,e){Object.keys(e).forEach(t=>{i.setAttribute(t,e[t])})}class Ket extends Xa{register(){super.register()}unregister(){super.unregister()}build(){const e=this.schema.properties,t=this.options,n=this.schema.description,r=this.theme,s=this.defaults.startVals[this.key];t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(e).find(c=>c.includes("min")),l=Object.keys(e).find(c=>c.includes("max")),u={min:e[a].minimum,max:e[l].maximum,value1:(s==null?void 0:s[a])||e[a].default,value2:(s==null?void 0:s[l])||e[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};Zet(o,u),this.input=o,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",c=>{c.preventDefault(),c.stopPropagation(),this.value={[a]:c.detail.value1,[l]:c.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const Jet=[{type:"object",format:"minmax",func:Ket}],Qet=i=>{Jet.map(({type:e,format:t,func:n})=>{Dr.defaults.startVals=i,Dr.defaults.editors[t]=n,Dr.defaults.resolvers.unshift(r=>{if(r.type===e&&r.format===t)return t})})};window.SimpleMDE=Yet;const ett=i=>{Qet(i.value||{});const e=i.renderRoot.querySelector("form");let n=new Dr(e,{schema:i.schema,...i.value?{startval:i.value}:{},theme:"html",ajax:!0,...i.options});return n.on("ready",()=>{if(Object.values(n.editors).some(r=>r instanceof fTe)){const r=document.createElement("style");r.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,i.renderRoot.insertBefore(r,i.renderRoot.firstChild)}}),n};async function vve(i){if(i&&typeof i!="object")try{const e=await fetch(i);if(e.ok)return await e.json();console.error("Failed to fetch schema from URL: ",e.status)}catch(e){console.error("Error fetching schema: ",e)}return i}const ttt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,itt=`
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var ER={exports:{}};ER.exports;(function(i,e){var t=200,n="__lodash_hash_undefined__",r=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",h="[object Date]",d="[object Error]",f="[object Function]",p="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Null]",b="[object Object]",x="[object Promise]",w="[object Proxy]",C="[object RegExp]",D="[object Set]",R="[object String]",A="[object Symbol]",L="[object Undefined]",O="[object WeakMap]",$="[object ArrayBuffer]",q="[object DataView]",M="[object Float32Array]",F="[object Float64Array]",N="[object Int8Array]",B="[object Int16Array]",W="[object Int32Array]",K="[object Uint8Array]",ee="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,ye={};ye[M]=ye[F]=ye[N]=ye[B]=ye[W]=ye[K]=ye[ee]=ye[te]=ye[le]=!0,ye[a]=ye[l]=ye[$]=ye[c]=ye[q]=ye[h]=ye[d]=ye[f]=ye[m]=ye[y]=ye[b]=ye[C]=ye[D]=ye[R]=ye[O]=!1;var Ne=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,Ge=typeof self=="object"&&self&&self.Object===Object&&self,rt=Ne||Ge||Function("return this")(),Be=e&&!e.nodeType&&e,ze=Be&&!0&&i&&!i.nodeType&&i,lt=ze&&ze.exports===Be,xt=lt&&Ne.process,Mt=function(){try{return xt&&xt.binding&&xt.binding("util")}catch{}}(),Ct=Mt&&Mt.isTypedArray;function gi(ae,ne){for(var Ie=-1,Je=ae==null?0:ae.length,Zt=0,Xt=[];++Ie<Je;){var Oi=ae[Ie];ne(Oi,Ie,ae)&&(Xt[Zt++]=Oi)}return Xt}function Wt(ae,ne){for(var Ie=-1,Je=ne.length,Zt=ae.length;++Ie<Je;)ae[Zt+Ie]=ne[Ie];return ae}function Qi(ae,ne){for(var Ie=-1,Je=ae==null?0:ae.length;++Ie<Je;)if(ne(ae[Ie],Ie,ae))return!0;return!1}function He(ae,ne){for(var Ie=-1,Je=Array(ae);++Ie<ae;)Je[Ie]=ne(Ie);return Je}function ge(ae){return function(ne){return ae(ne)}}function se(ae,ne){return ae.has(ne)}function re(ae,ne){return ae==null?void 0:ae[ne]}function pe(ae){var ne=-1,Ie=Array(ae.size);return ae.forEach(function(Je,Zt){Ie[++ne]=[Zt,Je]}),Ie}function I(ae,ne){return function(Ie){return ae(ne(Ie))}}function G(ae){var ne=-1,Ie=Array(ae.size);return ae.forEach(function(Je){Ie[++ne]=Je}),Ie}var Z=Array.prototype,ie=Function.prototype,me=Object.prototype,_e=rt["__core-js_shared__"],xe=ie.toString,V=me.hasOwnProperty,oe=function(){var ae=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),fe=me.toString,de=RegExp("^"+xe.call(V).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=lt?rt.Buffer:void 0,Ae=rt.Symbol,Se=rt.Uint8Array,Re=me.propertyIsEnumerable,Pe=Z.splice,We=Ae?Ae.toStringTag:void 0,st=Object.getOwnPropertySymbols,ot=Te?Te.isBuffer:void 0,It=I(Object.keys,Object),ct=sa(rt,"DataView"),Ht=sa(rt,"Map"),Yt=sa(rt,"Promise"),St=sa(rt,"Set"),ti=sa(rt,"WeakMap"),Rt=sa(Object,"create"),xi=No(ct),Mi=No(Ht),on=No(Yt),en=No(St),ri=No(ti),Ot=Ae?Ae.prototype:void 0,Si=Ot?Ot.valueOf:void 0;function Bn(ae){var ne=-1,Ie=ae==null?0:ae.length;for(this.clear();++ne<Ie;){var Je=ae[ne];this.set(Je[0],Je[1])}}function En(){this.__data__=Rt?Rt(null):{},this.size=0}function fn(ae){var ne=this.has(ae)&&delete this.__data__[ae];return this.size-=ne?1:0,ne}function hs(ae){var ne=this.__data__;if(Rt){var Ie=ne[ae];return Ie===n?void 0:Ie}return V.call(ne,ae)?ne[ae]:void 0}function pn(ae){var ne=this.__data__;return Rt?ne[ae]!==void 0:V.call(ne,ae)}function zs(ae,ne){var Ie=this.__data__;return this.size+=this.has(ae)?0:1,Ie[ae]=Rt&&ne===void 0?n:ne,this}Bn.prototype.clear=En,Bn.prototype.delete=fn,Bn.prototype.get=hs,Bn.prototype.has=pn,Bn.prototype.set=zs;function Ii(ae){var ne=-1,Ie=ae==null?0:ae.length;for(this.clear();++ne<Ie;){var Je=ae[ne];this.set(Je[0],Je[1])}}function fo(){this.__data__=[],this.size=0}function ve(ae){var ne=this.__data__,Ie=zn(ne,ae);if(Ie<0)return!1;var Je=ne.length-1;return Ie==Je?ne.pop():Pe.call(ne,Ie,1),--this.size,!0}function ke(ae){var ne=this.__data__,Ie=zn(ne,ae);return Ie<0?void 0:ne[Ie][1]}function it(ae){return zn(this.__data__,ae)>-1}function Ke(ae,ne){var Ie=this.__data__,Je=zn(Ie,ae);return Je<0?(++this.size,Ie.push([ae,ne])):Ie[Je][1]=ne,this}Ii.prototype.clear=fo,Ii.prototype.delete=ve,Ii.prototype.get=ke,Ii.prototype.has=it,Ii.prototype.set=Ke;function Et(ae){var ne=-1,Ie=ae==null?0:ae.length;for(this.clear();++ne<Ie;){var Je=ae[ne];this.set(Je[0],Je[1])}}function Qt(){this.size=0,this.__data__={hash:new Bn,map:new(Ht||Ii),string:new Bn}}function Ti(ae){var ne=Ka(this,ae).delete(ae);return this.size-=ne?1:0,ne}function bt(ae){return Ka(this,ae).get(ae)}function Qe(ae){return Ka(this,ae).has(ae)}function _i(ae,ne){var Ie=Ka(this,ae),Je=Ie.size;return Ie.set(ae,ne),this.size+=Ie.size==Je?0:1,this}Et.prototype.clear=Qt,Et.prototype.delete=Ti,Et.prototype.get=bt,Et.prototype.has=Qe,Et.prototype.set=_i;function bi(ae){var ne=-1,Ie=ae==null?0:ae.length;for(this.__data__=new Et;++ne<Ie;)this.add(ae[ne])}function Bt(ae){return this.__data__.set(ae,n),this}function zt(ae){return this.__data__.has(ae)}bi.prototype.add=bi.prototype.push=Bt,bi.prototype.has=zt;function jn(ae){var ne=this.__data__=new Ii(ae);this.size=ne.size}function Ar(){this.__data__=new Ii,this.size=0}function ci(ae){var ne=this.__data__,Ie=ne.delete(ae);return this.size=ne.size,Ie}function Xe(ae){return this.__data__.get(ae)}function yt(ae){return this.__data__.has(ae)}function cn(ae,ne){var Ie=this.__data__;if(Ie instanceof Ii){var Je=Ie.__data__;if(!Ht||Je.length<t-1)return Je.push([ae,ne]),this.size=++Ie.size,this;Ie=this.__data__=new Et(Je)}return Ie.set(ae,ne),this.size=Ie.size,this}jn.prototype.clear=Ar,jn.prototype.delete=ci,jn.prototype.get=Xe,jn.prototype.has=yt,jn.prototype.set=cn;function Zn(ae,ne){var Ie=Rr(ae),Je=!Ie&&gl(ae),Zt=!Ie&&!Je&&$o(ae),Xt=!Ie&&!Je&&!Zt&&ys(ae),Oi=Ie||Je||Zt||Xt,hn=Oi?He(ae.length,String):[],Rn=hn.length;for(var Cn in ae)(ne||V.call(ae,Cn))&&!(Oi&&(Cn=="length"||Zt&&(Cn=="offset"||Cn=="parent")||Xt&&(Cn=="buffer"||Cn=="byteLength"||Cn=="byteOffset")||go(Cn,Rn)))&&hn.push(Cn);return hn}function zn(ae,ne){for(var Ie=ae.length;Ie--;)if(eu(ae[Ie][0],ne))return Ie;return-1}function Kn(ae,ne,Ie){var Je=ne(ae);return Rr(ae)?Je:Wt(Je,Ie(ae))}function Pn(ae){return ae==null?ae===void 0?L:v:We&&We in Object(ae)?Nr(ae):Mu(ae)}function jt(ae){return la(ae)&&Pn(ae)==a}function Yr(ae,ne,Ie,Je,Zt){return ae===ne?!0:ae==null||ne==null||!la(ae)&&!la(ne)?ae!==ae&&ne!==ne:gs(ae,ne,Ie,Je,Yr,Zt)}function gs(ae,ne,Ie,Je,Zt,Xt){var Oi=Rr(ae),hn=Rr(ne),Rn=Oi?l:Fo(ae),Cn=hn?l:Fo(ne);Rn=Rn==a?b:Rn,Cn=Cn==a?b:Cn;var kn=Rn==b,vs=Cn==b,Sn=Rn==Cn;if(Sn&&$o(ae)){if(!$o(ne))return!1;Oi=!0,kn=!1}if(Sn&&!kn)return Xt||(Xt=new jn),Oi||ys(ae)?na(ae,ne,Ie,Je,Zt,Xt):Za(ae,ne,Rn,Ie,Je,Zt,Xt);if(!(Ie&r)){var $r=kn&&V.call(ae,"__wrapped__"),bo=vs&&V.call(ne,"__wrapped__");if($r||bo){var Da=$r?ae.value():ae,As=bo?ne.value():ne;return Xt||(Xt=new jn),Zt(Da,As,Ie,Je,Xt)}}return Sn?(Xt||(Xt=new jn),ra(ae,ne,Ie,Je,Zt,Xt)):!1}function ms(ae){if(!eo(ae)||yo(ae))return!1;var ne=tu(ae)?de:z;return ne.test(No(ae))}function Js(ae){return la(ae)&&Ja(ae.length)&&!!ye[Pn(ae)]}function po(ae){if(!aa(ae))return It(ae);var ne=[];for(var Ie in Object(ae))V.call(ae,Ie)&&Ie!="constructor"&&ne.push(Ie);return ne}function na(ae,ne,Ie,Je,Zt,Xt){var Oi=Ie&r,hn=ae.length,Rn=ne.length;if(hn!=Rn&&!(Oi&&Rn>hn))return!1;var Cn=Xt.get(ae);if(Cn&&Xt.get(ne))return Cn==ne;var kn=-1,vs=!0,Sn=Ie&s?new bi:void 0;for(Xt.set(ae,ne),Xt.set(ne,ae);++kn<hn;){var $r=ae[kn],bo=ne[kn];if(Je)var Da=Oi?Je(bo,$r,kn,ne,ae,Xt):Je($r,bo,kn,ae,ne,Xt);if(Da!==void 0){if(Da)continue;vs=!1;break}if(Sn){if(!Qi(ne,function(As,Rs){if(!se(Sn,Rs)&&($r===As||Zt($r,As,Ie,Je,Xt)))return Sn.push(Rs)})){vs=!1;break}}else if(!($r===bo||Zt($r,bo,Ie,Je,Xt))){vs=!1;break}}return Xt.delete(ae),Xt.delete(ne),vs}function Za(ae,ne,Ie,Je,Zt,Xt,Oi){switch(Ie){case q:if(ae.byteLength!=ne.byteLength||ae.byteOffset!=ne.byteOffset)return!1;ae=ae.buffer,ne=ne.buffer;case $:return!(ae.byteLength!=ne.byteLength||!Xt(new Se(ae),new Se(ne)));case c:case h:case y:return eu(+ae,+ne);case d:return ae.name==ne.name&&ae.message==ne.message;case C:case R:return ae==ne+"";case m:var hn=pe;case D:var Rn=Je&r;if(hn||(hn=G),ae.size!=ne.size&&!Rn)return!1;var Cn=Oi.get(ae);if(Cn)return Cn==ne;Je|=s,Oi.set(ae,ne);var kn=na(hn(ae),hn(ne),Je,Zt,Xt,Oi);return Oi.delete(ae),kn;case A:if(Si)return Si.call(ae)==Si.call(ne)}return!1}function ra(ae,ne,Ie,Je,Zt,Xt){var Oi=Ie&r,hn=Qs(ae),Rn=hn.length,Cn=Qs(ne),kn=Cn.length;if(Rn!=kn&&!Oi)return!1;for(var vs=Rn;vs--;){var Sn=hn[vs];if(!(Oi?Sn in ne:V.call(ne,Sn)))return!1}var $r=Xt.get(ae);if($r&&Xt.get(ne))return $r==ne;var bo=!0;Xt.set(ae,ne),Xt.set(ne,ae);for(var Da=Oi;++vs<Rn;){Sn=hn[vs];var As=ae[Sn],Rs=ne[Sn];if(Je)var vl=Oi?Je(Rs,As,Sn,ne,ae,Xt):Je(As,Rs,Sn,ae,ne,Xt);if(!(vl===void 0?As===Rs||Zt(As,Rs,Ie,Je,Xt):vl)){bo=!1;break}Da||(Da=Sn=="constructor")}if(bo&&!Da){var hr=ae.constructor,_l=ne.constructor;hr!=_l&&"constructor"in ae&&"constructor"in ne&&!(typeof hr=="function"&&hr instanceof hr&&typeof _l=="function"&&_l instanceof _l)&&(bo=!1)}return Xt.delete(ae),Xt.delete(ne),bo}function Qs(ae){return Kn(ae,yl,oa)}function Ka(ae,ne){var Ie=ae.__data__;return mo(ne)?Ie[typeof ne=="string"?"string":"hash"]:Ie.map}function sa(ae,ne){var Ie=re(ae,ne);return ms(Ie)?Ie:void 0}function Nr(ae){var ne=V.call(ae,We),Ie=ae[We];try{ae[We]=void 0;var Je=!0}catch{}var Zt=fe.call(ae);return Je&&(ne?ae[We]=Ie:delete ae[We]),Zt}var oa=st?function(ae){return ae==null?[]:(ae=Object(ae),gi(st(ae),function(ne){return Re.call(ae,ne)}))}:iu,Fo=Pn;(ct&&Fo(new ct(new ArrayBuffer(1)))!=q||Ht&&Fo(new Ht)!=m||Yt&&Fo(Yt.resolve())!=x||St&&Fo(new St)!=D||ti&&Fo(new ti)!=O)&&(Fo=function(ae){var ne=Pn(ae),Ie=ne==b?ae.constructor:void 0,Je=Ie?No(Ie):"";if(Je)switch(Je){case xi:return q;case Mi:return m;case on:return x;case en:return D;case ri:return O}return ne});function go(ae,ne){return ne=ne??o,!!ne&&(typeof ae=="number"||J.test(ae))&&ae>-1&&ae%1==0&&ae<ne}function mo(ae){var ne=typeof ae;return ne=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?ae!=="__proto__":ae===null}function yo(ae){return!!oe&&oe in ae}function aa(ae){var ne=ae&&ae.constructor,Ie=typeof ne=="function"&&ne.prototype||me;return ae===Ie}function Mu(ae){return fe.call(ae)}function No(ae){if(ae!=null){try{return xe.call(ae)}catch{}try{return ae+""}catch{}}return""}function eu(ae,ne){return ae===ne||ae!==ae&&ne!==ne}var gl=jt(function(){return arguments}())?jt:function(ae){return la(ae)&&V.call(ae,"callee")&&!Re.call(ae,"callee")},Rr=Array.isArray;function vo(ae){return ae!=null&&Ja(ae.length)&&!tu(ae)}var $o=ot||_o;function ml(ae,ne){return Yr(ae,ne)}function tu(ae){if(!eo(ae))return!1;var ne=Pn(ae);return ne==f||ne==p||ne==u||ne==w}function Ja(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=o}function eo(ae){var ne=typeof ae;return ae!=null&&(ne=="object"||ne=="function")}function la(ae){return ae!=null&&typeof ae=="object"}var ys=Ct?ge(Ct):Js;function yl(ae){return vo(ae)?Zn(ae):po(ae)}function iu(){return[]}function _o(){return!1}i.exports=ml})(ER,ER.exports);var ntt=ER.exports;const _ve=Ea(ntt),rtt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var Rl,kb,TTe,ATe;class STe extends Yn{constructor(){super();Tn(this,kb);Tn(this,Rl,null);this.schema,this.value,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1}get editor(){return ki(this,Rl)}get schema(){return this._schema}set schema(t){ki(this,Rl)&&!_ve(this._schema,t)&&ki(this,Rl).destroy(),this._schema=t}get value(){return this._value}set value(t){ki(this,Rl)&&ki(this,Rl).ready&&!_ve(this._value,t)&&ki(this,Rl).setValue(t),this._value=t}async updated(t){this._value=await vve(this.value),t.has("schema")&&(this._schema=await vve(this.schema),(!ki(this,Rl)||ki(this,Rl).destroyed)&&(da(this,Rl,await ett(this)),Us(this,kb,ATe).call(this)))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return tt`
      <style>
        ${ttt}
        ${!this.unstyled&&rtt}
        ${!this.unstyled&&itt}
      </style>
      <form></form>
    `}}Rl=new WeakMap,kb=new WeakSet,TTe=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},ATe=function(){["ready","change"].map(n=>{ki(this,Rl).on(n,()=>{this._value=ki(this,Rl).getValue(),Us(this,kb,TTe).call(this)})})},Ye(STe,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",STe);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var On=i=>i!==void 0,RTe=(i,e,t)=>e in i?i[e]:i[e]=t;const VE={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class stt{constructor(e){this._parser=new e}toDocument(e){return this._parser.parseFromString(e,"application/xml")}getAllTextContent(e,t){return FD(e,t).join("")}}function FD(i,e){return kTe(i,e,[]).join("")}function kTe(i,e,t){if(i.nodeType===VE.CDATA_SECTION||i.nodeType===VE.TEXT)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{var n;for(n=i.firstChild;n;n=n.nextSibling)kTe(n,e,t)}return t}function ott(i,e,t,n){for(var r=att(e);r;r=ltt(r)){var s=r.namespaceURI||null,o=i[s];if(On(o)){var a=o[r.localName];On(a)&&a.call(n,r,t)}}}function att(i){let e=i.firstElementChild||i.firstChild;for(;e&&e.nodeType!==VE.ELEMENT;)e=e.nextSibling;return e}function ltt(i){let e=i.nextElementSibling||i.nextSibling;for(;e&&e.nodeType!==VE.ELEMENT;)e=e.nextSibling;return e}function Sa(i,e,t){return utt(i,e,t)}function utt(i,e,t){var n=On(t)?t:{},r,s;for(r=0,s=i.length;r<s;++r)n[i[r]]=e;return n}function DTe(i,e){return function(t,n){var r=i.call(On(e)?e:this,t,n);if(On(r)){var s=n[n.length-1];s.push(r)}}}function ia(i,e,t,n,r){return n.push(i),ott(e,t,n,r),n.pop()}function li(i,e,t){return function(n,r){let s=i.call(On(t)?t:this,n,r);if(On(s)){var o=r[r.length-1],a=On(e)?e:n.localName;o[a]=s}}}function Al(i,e,t){return function(n,r){var s=i.call(On(t)?t:this,n,r);if(On(s)){var o=r[r.length-1],a=On(e)?e:n.localName,l=RTe(o,a,[]);l.push(s)}}}const ctt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function htt(i){return i.replace(ctt,"")}function b0(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return On(e[1])||!1}function t_(i){return sf(FD(i,!1))}function sf(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function tI(i){return CR(FD(i,!1))}function CR(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function pr(i){return htt(FD(i,!1))}const dtt="http://www.w3.org/1999/xlink";function w5(i){return i.getAttributeNS(dtt,"href")}function ftt(i,e){return ia({},jtt,i,e)}function LTe(i){return[sf(i.getAttribute("minx")),sf(i.getAttribute("miny")),sf(i.getAttribute("maxx")),sf(i.getAttribute("maxy"))]}function ptt(i,e){const t=LTe(i),n=[sf(i.getAttribute("resx")),sf(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS")||i.getAttribute("SRS"),extent:t,res:n}}function gtt(i,e){const t=LTe(i);if(!(!On(t[0])||!On(t[1])||!On(t[2])||!On(t[3])))return t}function mtt(i,e){const t=parseFloat(i.getAttribute("min")),n=parseFloat(i.getAttribute("max"));return{min:t,max:n}}function ytt(i,e){const t=ia({},ztt,i,e);if(!On(t))return;const n=t.westBoundLongitude,r=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(!On(n)||!On(r)||!On(s)||!On(o)))return[n,r,s,o]}function vtt(i,e){return ia({},Ott,i,e)}function _tt(i,e){return ia({},Ptt,i,e)}function btt(i,e){return ia({},Ftt,i,e)}function xtt(i,e){return ia({},Ntt,i,e)}function wtt(i,e){return ia({},$tt,i,e)}function Ett(i,e){return ia([],Btt,i,e)}function Ctt(i,e){const t=b0(i.getAttribute("queryable"));return ia({queryable:On(t)?t:!1},OTe,i,e)}function Stt(i,e){var t=e[e.length-1];const n=ia({},OTe,i,e);if(!On(n))return;let r=b0(i.getAttribute("queryable"));On(r)||(r=t.queryable),n.queryable=On(r)?r:!1;let s=CR(i.getAttribute("cascaded"));On(s)||(s=t.cascaded),n.cascaded=s;let o=b0(i.getAttribute("opaque"));On(o)||(o=t.opaque),n.opaque=On(o)?o:!1;let a=b0(i.getAttribute("noSubsets"));On(a)||(a=t.noSubsets),n.noSubsets=On(a)?a:!1;let l=sf(i.getAttribute("fixedWidth"));On(l)||(l=t.fixedWidth),n.fixedWidth=l;let u=sf(i.getAttribute("fixedHeight"));On(u)||(u=t.fixedHeight),n.fixedHeight=u;const c=["Style","CRS","AuthorityURL"];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=t[p];if(On(m)){let y=RTe(n,p,[]);y=y.concat(m),n[p]=y}}const h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,f=h.length;d<f;d++){const p=h[d],m=n[p];if(!On(m)){const y=t[p];n[p]=y}}return n}function Ttt(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:b0(i.getAttribute("multipleValues")),nearestValue:b0(i.getAttribute("nearestValue")),current:b0(i.getAttribute("current")),values:pr(i)}}function wf(i,e){return ia({},Wtt,i,e)}function Att(i,e){return ia({},Gtt,i,e)}function Rtt(i,e){return ia({},qtt,i,e)}function ktt(i,e){return ia({},Vtt,i,e)}function iI(i,e){return ia({},Utt,i,e)}function MTe(i,e){var t=wf(i,e);if(On(t)){const n=[CR(i.getAttribute("width")),CR(i.getAttribute("height"))];return t.size=n,t}}function Dtt(i,e){var t=wf(i,e);if(On(t))return t.name=i.getAttribute("name"),t}function Ltt(i,e){var t=wf(i,e);if(On(t))return t.type=i.getAttribute("type"),t}function Mtt(i,e){return ia({},Htt,i,e)}function ITe(i,e){return ia([],Xtt,i,e)}const Ta=[null,"http://www.opengis.net/wms"],Itt=Sa(Ta,{Service:li(_tt),Capability:li(vtt)}),Ott=Sa(Ta,{Request:li(Att),Exception:li(Ett),Layer:li(Ctt)}),Ptt=Sa(Ta,{Name:li(pr),Title:li(pr),Abstract:li(pr),KeywordList:li(ITe),OnlineResource:li(w5),ContactInformation:li(btt),Fees:li(pr),AccessConstraints:li(pr),LayerLimit:li(tI),MaxWidth:li(tI),MaxHeight:li(tI)}),Ftt=Sa(Ta,{ContactPersonPrimary:li(xtt),ContactPosition:li(pr),ContactAddress:li(wtt),ContactVoiceTelephone:li(pr),ContactFacsimileTelephone:li(pr),ContactElectronicMailAddress:li(pr)}),Ntt=Sa(Ta,{ContactPerson:li(pr),ContactOrganization:li(pr)}),$tt=Sa(Ta,{AddressType:li(pr),Address:li(pr),City:li(pr),StateOrProvince:li(pr),PostCode:li(pr),Country:li(pr)}),Btt=Sa(Ta,{Format:DTe(pr)}),OTe=Sa(Ta,{Name:li(pr),Title:li(pr),Abstract:li(pr),KeywordList:li(ITe),CRS:Al(pr),SRS:Al(pr),EX_GeographicBoundingBox:li(ytt),LatLonBoundingBox:li(gtt),BoundingBox:Al(ptt),Dimension:Al(Ttt),Attribution:li(ftt),AuthorityURL:Al(Dtt),Identifier:Al(pr),MetadataURL:Al(Ltt),DataURL:Al(wf),FeatureListURL:Al(wf),Style:Al(Mtt),MinScaleDenominator:li(t_),MaxScaleDenominator:li(t_),ScaleHint:li(mtt),Layer:Al(Stt)}),jtt=Sa(Ta,{Title:li(pr),OnlineResource:li(w5),LogoURL:li(MTe)}),ztt=Sa(Ta,{westBoundLongitude:li(t_),eastBoundLongitude:li(t_),southBoundLatitude:li(t_),northBoundLatitude:li(t_)}),Gtt=Sa(Ta,{GetCapabilities:li(iI),GetMap:li(iI),GetFeatureInfo:li(iI)}),Utt=Sa(Ta,{Format:Al(pr),DCPType:Al(Rtt)}),qtt=Sa(Ta,{HTTP:li(ktt)}),Vtt=Sa(Ta,{Get:li(wf),Post:li(wf)}),Htt=Sa(Ta,{Name:li(pr),Title:li(pr),Abstract:li(pr),LegendURL:Al(MTe),StyleSheetURL:li(wf),StyleURL:li(wf)}),Wtt=Sa(Ta,{Format:li(pr),OnlineResource:li(w5)}),Xtt=Sa(Ta,{Keyword:DTe(pr)});class Ytt{constructor(e,t){!t&&typeof window<"u"&&(t=window.DOMParser),this.version=void 0,this._parser=new stt(t),this._data=e}data(e){return this._data=e,this}toJSON(e){return e=e||this._data,this.parse(e)}parse(e){return this.readFromDocument(this._parser.toDocument(e))}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==VE.ELEMENT)return this.readFromNode(t);return null}readFromNode(e){return this.version=e.getAttribute("version"),ia({version:this.version},Itt,e,[])||null}}async function Ztt(i){let e=new URL(i),t=e.searchParams;t.set("SERVICE","WMS"),t.set("REQUEST","GetCapabilities");let n=e.toString();const r=await fetch(n);if(r.ok){const s=await r.text();return new Ytt(s).toJSON()}else throw new Error(`Error: ${r.status}`)}function E5(i){const e=/\b(?:wms|ows)\b/i,t=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return e.test(i)?"TileWMS":t.test(i)?"XYZ":!1}function Ktt(i){const t=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(i),n=E5(i);return!!(i&&t&&n)}function PTe(i){return i.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function Jtt(i){try{return JSON.parse(PTe(i)),!!i}catch{return!1}}function Qtt(i,e){const t=new URL(i).searchParams;Object.entries(e).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{t.set(l,a[l])}):t.set(o,a)});const n=i.split("?")[0],r=t.toString();return`${n}?${r}`}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function bve(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Jh(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bve(Object(t),!0).forEach(function(n){eit(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):bve(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function EA(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?EA=function(e){return typeof e}:EA=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EA(i)}function eit(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ef(){return Ef=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ef.apply(this,arguments)}function tit(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function iit(i,e){if(i==null)return{};var t=tit(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}var nit="1.15.2";function hf(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var Ff=hf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),hC=hf(/Edge/i),xve=hf(/firefox/i),oE=hf(/safari/i)&&!hf(/chrome/i)&&!hf(/android/i),FTe=hf(/iP(ad|od|hone)/i),NTe=hf(/chrome/i)&&hf(/android/i),$Te={capture:!1,passive:!1};function Cr(i,e,t){i.addEventListener(e,t,!Ff&&$Te)}function ar(i,e,t){i.removeEventListener(e,t,!Ff&&$Te)}function SR(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function rit(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function kc(i,e,t,n){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&SR(i,e):SR(i,e))||n&&i===t)return i;if(i===t)break}while(i=rit(i))}return null}var wve=/\s+/g;function ru(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var n=(" "+i.className+" ").replace(wve," ").replace(" "+e+" "," ");i.className=(n+(t?" "+e:"")).replace(wve," ")}}function ji(i,e,t){var n=i&&i.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function S_(i,e){var t="";if(typeof i=="string")t=i;else do{var n=ji(i,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function BTe(i,e,t){if(i){var n=i.getElementsByTagName(e),r=0,s=n.length;if(t)for(;r<s;r++)t(n[r],r);return n}return[]}function zh(){var i=document.scrollingElement;return i||document.documentElement}function oo(i,e,t,n,r){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,a,l,u,c,h;if(i!==window&&i.parentNode&&i!==zh()?(s=i.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,c=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||t)&&i!==window&&(r=r||i.parentNode,!Ff))do if(r&&r.getBoundingClientRect&&(ji(r,"transform")!=="none"||t&&ji(r,"position")!=="static")){var d=r.getBoundingClientRect();o-=d.top+parseInt(ji(r,"border-top-width")),a-=d.left+parseInt(ji(r,"border-left-width")),l=o+s.height,u=a+s.width;break}while(r=r.parentNode);if(n&&i!==window){var f=S_(r||i),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,c/=m,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function Eve(i,e,t){for(var n=ig(i,!0),r=oo(i)[e];n;){var s=oo(n)[t],o=void 0;if(t==="top"||t==="left"?o=r>=s:o=r<=s,!o)return n;if(n===zh())break;n=ig(n,!1)}return!1}function Q_(i,e,t,n){for(var r=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==zi.ghost&&(n||o[s]!==zi.dragged)&&kc(o[s],t.draggable,i,!1)){if(r===e)return o[s];r++}s++}return null}function C5(i,e){for(var t=i.lastElementChild;t&&(t===zi.ghost||ji(t,"display")==="none"||e&&!SR(t,e));)t=t.previousElementSibling;return t||null}function Vu(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==zi.clone&&(!e||SR(i,e))&&t++;return t}function Cve(i){var e=0,t=0,n=zh();if(i)do{var r=S_(i),s=r.a,o=r.d;e+=i.scrollLeft*s,t+=i.scrollTop*o}while(i!==n&&(i=i.parentNode));return[e,t]}function sit(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===i[t][n])return Number(t)}return-1}function ig(i,e){if(!i||!i.getBoundingClientRect)return zh();var t=i,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=ji(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return zh();if(n||e)return t;n=!0}}while(t=t.parentNode);return zh()}function oit(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function nI(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var aE;function jTe(i,e){return function(){if(!aE){var t=arguments,n=this;t.length===1?i.call(n,t[0]):i.apply(n,t),aE=setTimeout(function(){aE=void 0},e)}}}function ait(){clearTimeout(aE),aE=void 0}function zTe(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function GTe(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function UTe(i,e,t){var n={};return Array.from(i.children).forEach(function(r){var s,o,a,l;if(!(!kc(r,e.draggable,i,!1)||r.animated||r===t)){var u=oo(r);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,u.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var pu="Sortable"+new Date().getTime();function lit(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(ji(r,"display")==="none"||r===zi.ghost)){i.push({target:r,rect:oo(r)});var s=Jh({},i[i.length-1].rect);if(r.thisAnimationDuration){var o=S_(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(sit(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;i.forEach(function(a){var l=0,u=a.target,c=u.fromRect,h=oo(u),d=u.prevFromRect,f=u.prevToRect,p=a.rect,m=S_(u,!0);m&&(h.top-=m.f,h.left-=m.e),u.toRect=h,u.thisAnimationDuration&&nI(d,h)&&!nI(c,h)&&(p.top-h.top)/(p.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(l=cit(p,d,f,r.options)),nI(h,c)||(u.prevFromRect=c,u.prevToRect=h,l||(l=r.options.animation),r.animate(u,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),i=[]},animate:function(n,r,s,o){if(o){ji(n,"transition",""),ji(n,"transform","");var a=S_(this.el),l=a&&a.a,u=a&&a.d,c=(r.left-s.left)/(l||1),h=(r.top-s.top)/(u||1);n.animatingX=!!c,n.animatingY=!!h,ji(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=uit(n),ji(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ji(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){ji(n,"transition",""),ji(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function uit(i){return i.offsetWidth}function cit(i,e,t,n){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var lv=[],rI={initializeByDefault:!0},dC={mount:function(e){for(var t in rI)rI.hasOwnProperty(t)&&!(t in e)&&(e[t]=rI[t]);lv.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),lv.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var s=e+"Global";lv.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](Jh({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Jh({sortable:t},n)))})},initializePlugins:function(e,t,n,r){lv.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Ef(n,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return lv.forEach(function(r){typeof r.eventProperties=="function"&&Ef(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return lv.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],n))}),r}};function hit(i){var e=i.sortable,t=i.rootEl,n=i.name,r=i.targetEl,s=i.cloneEl,o=i.toEl,a=i.fromEl,l=i.oldIndex,u=i.newIndex,c=i.oldDraggableIndex,h=i.newDraggableIndex,d=i.originalEvent,f=i.putSortable,p=i.extraEventProperties;if(e=e||t&&t[pu],!!e){var m,y=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ff&&!hC?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=o||t,m.from=a||t,m.item=r||t,m.clone=s,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var b=Jh(Jh({},p),dC.getEventProperties(n,e));for(var x in b)m[x]=b[x];t&&t.dispatchEvent(m),y[v]&&y[v].call(e,m)}}var dit=["evt"],Sl=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,s=iit(n,dit);dC.pluginEvent.bind(zi)(e,t,Jh({dragEl:kt,parentEl:Ms,ghostEl:nn,rootEl:ds,nextEl:Km,lastDownEl:CA,cloneEl:bs,cloneHidden:Vp,dragStarted:Mw,putSortable:fa,activeSortable:zi.active,originalEvent:r,oldIndex:i_,oldDraggableIndex:lE,newIndex:su,newDraggableIndex:zp,hideGhostForTarget:WTe,unhideGhostForTarget:XTe,cloneNowHidden:function(){Vp=!0},cloneNowShown:function(){Vp=!1},dispatchSortableEvent:function(a){il({sortable:t,name:a,originalEvent:r})}},s))};function il(i){hit(Jh({putSortable:fa,cloneEl:bs,targetEl:kt,rootEl:ds,oldIndex:i_,oldDraggableIndex:lE,newIndex:su,newDraggableIndex:zp},i))}var kt,Ms,nn,ds,Km,CA,bs,Vp,i_,su,lE,zp,uT,fa,Ov=!1,TR=!1,AR=[],jm,Ec,sI,oI,Sve,Tve,Mw,uv,uE,cE=!1,cT=!1,SA,Ia,aI=[],xP=!1,RR=[],ND=typeof document<"u",hT=FTe,Ave=hC||Ff?"cssFloat":"float",fit=ND&&!NTe&&!FTe&&"draggable"in document.createElement("div"),qTe=function(){if(ND){if(Ff)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),VTe=function(e,t){var n=ji(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Q_(e,0,t),o=Q_(e,1,t),a=s&&ji(s),l=o&&ji(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+oo(s).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+oo(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=r&&n[Ave]==="none"||o&&n[Ave]==="none"&&u+c>r)?"vertical":"horizontal"},pit=function(e,t,n){var r=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,u=n?t.width:t.height;return r===a||s===l||r+o/2===a+u/2},git=function(e,t){var n;return AR.some(function(r){var s=r[pu].options.emptyInsertThreshold;if(!(!s||C5(r))){var o=oo(r),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return n=r}}),n},HTe=function(e){function t(s,o){return function(a,l,u,c){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,c),o)(a,l,u,c);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var n={},r=e.group;(!r||EA(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},WTe=function(){!qTe&&nn&&ji(nn,"display","none")},XTe=function(){!qTe&&nn&&ji(nn,"display","")};ND&&!NTe&&document.addEventListener("click",function(i){if(TR)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),TR=!1,!1},!0);var zm=function(e){if(kt){e=e.touches?e.touches[0]:e;var t=git(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[pu]._onDragOver(n)}}},mit=function(e){kt&&kt.parentNode[pu]._isOutsideThisEl(e.target)};function zi(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=Ef({},e),i[pu]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return VTe(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:zi.supportPointer!==!1&&"PointerEvent"in window&&!oE,emptyInsertThreshold:5};dC.initializePlugins(this,i,t);for(var n in t)!(n in e)&&(e[n]=t[n]);HTe(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:fit,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Cr(i,"pointerdown",this._onTapStart):(Cr(i,"mousedown",this._onTapStart),Cr(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(Cr(i,"dragover",this),Cr(i,"dragenter",this)),AR.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ef(this,lit())}zi.prototype={constructor:zi,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(uv=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,kt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,s=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=r.filter;if(Cit(n),!kt&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&oE&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=kc(l,r.draggable,n,!1),!(l&&l.animated)&&CA!==l)){if(i_=Vu(l),lE=Vu(l,r.draggable),typeof c=="function"){if(c.call(this,e,l,this)){il({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),Sl("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=kc(u,h.trim(),n,!1),h)return il({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),Sl("filter",t,{evt:e}),!0}),c)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!kc(u,r.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var r=this,s=r.el,o=r.options,a=s.ownerDocument,l;if(n&&!kt&&n.parentNode===s){var u=oo(n);if(ds=s,kt=n,Ms=kt.parentNode,Km=kt.nextSibling,CA=n,uT=o.group,zi.dragged=kt,jm={target:kt,clientX:(t||e).clientX,clientY:(t||e).clientY},Sve=jm.clientX-u.left,Tve=jm.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,kt.style["will-change"]="all",l=function(){if(Sl("delayEnded",r,{evt:e}),zi.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!xve&&r.nativeDraggable&&(kt.draggable=!0),r._triggerDragStart(e,t),il({sortable:r,name:"choose",originalEvent:e}),ru(kt,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){BTe(kt,c.trim(),lI)}),Cr(a,"dragover",zm),Cr(a,"mousemove",zm),Cr(a,"touchmove",zm),Cr(a,"mouseup",r._onDrop),Cr(a,"touchend",r._onDrop),Cr(a,"touchcancel",r._onDrop),xve&&this.nativeDraggable&&(this.options.touchStartThreshold=4,kt.draggable=!0),Sl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(hC||Ff))){if(zi.eventCanceled){this._onDrop();return}Cr(a,"mouseup",r._disableDelayedDrag),Cr(a,"touchend",r._disableDelayedDrag),Cr(a,"touchcancel",r._disableDelayedDrag),Cr(a,"mousemove",r._delayedDragTouchMoveHandler),Cr(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&Cr(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){kt&&lI(kt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ar(e,"mouseup",this._disableDelayedDrag),ar(e,"touchend",this._disableDelayedDrag),ar(e,"touchcancel",this._disableDelayedDrag),ar(e,"mousemove",this._delayedDragTouchMoveHandler),ar(e,"touchmove",this._delayedDragTouchMoveHandler),ar(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Cr(document,"pointermove",this._onTouchMove):t?Cr(document,"touchmove",this._onTouchMove):Cr(document,"mousemove",this._onTouchMove):(Cr(kt,"dragend",this),Cr(ds,"dragstart",this._onDragStart));try{document.selection?TA(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ov=!1,ds&&kt){Sl("dragStarted",this,{evt:t}),this.nativeDraggable&&Cr(document,"dragover",mit);var n=this.options;!e&&ru(kt,n.dragClass,!1),ru(kt,n.ghostClass,!0),zi.active=this,e&&this._appendGhost(),il({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ec){this._lastX=Ec.clientX,this._lastY=Ec.clientY,WTe();for(var e=document.elementFromPoint(Ec.clientX,Ec.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ec.clientX,Ec.clientY),e!==t);)t=e;if(kt.parentNode[pu]._isOutsideThisEl(e),t)do{if(t[pu]){var n=void 0;if(n=t[pu]._onDragOver({clientX:Ec.clientX,clientY:Ec.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);XTe()}},_onTouchMove:function(e){if(jm){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=nn&&S_(nn,!0),a=nn&&o&&o.a,l=nn&&o&&o.d,u=hT&&Ia&&Cve(Ia),c=(s.clientX-jm.clientX+r.x)/(a||1)+(u?u[0]-aI[0]:0)/(a||1),h=(s.clientY-jm.clientY+r.y)/(l||1)+(u?u[1]-aI[1]:0)/(l||1);if(!zi.active&&!Ov){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(nn){o?(o.e+=c-(sI||0),o.f+=h-(oI||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ji(nn,"webkitTransform",d),ji(nn,"mozTransform",d),ji(nn,"msTransform",d),ji(nn,"transform",d),sI=c,oI=h,Ec=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!nn){var e=this.options.fallbackOnBody?document.body:ds,t=oo(kt,!0,hT,!0,e),n=this.options;if(hT){for(Ia=e;ji(Ia,"position")==="static"&&ji(Ia,"transform")==="none"&&Ia!==document;)Ia=Ia.parentNode;Ia!==document.body&&Ia!==document.documentElement?(Ia===document&&(Ia=zh()),t.top+=Ia.scrollTop,t.left+=Ia.scrollLeft):Ia=zh(),aI=Cve(Ia)}nn=kt.cloneNode(!0),ru(nn,n.ghostClass,!1),ru(nn,n.fallbackClass,!0),ru(nn,n.dragClass,!0),ji(nn,"transition",""),ji(nn,"transform",""),ji(nn,"box-sizing","border-box"),ji(nn,"margin",0),ji(nn,"top",t.top),ji(nn,"left",t.left),ji(nn,"width",t.width),ji(nn,"height",t.height),ji(nn,"opacity","0.8"),ji(nn,"position",hT?"absolute":"fixed"),ji(nn,"zIndex","100000"),ji(nn,"pointerEvents","none"),zi.ghost=nn,e.appendChild(nn),ji(nn,"transform-origin",Sve/parseInt(nn.style.width)*100+"% "+Tve/parseInt(nn.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,s=n.options;if(Sl("dragStart",this,{evt:e}),zi.eventCanceled){this._onDrop();return}Sl("setupClone",this),zi.eventCanceled||(bs=GTe(kt),bs.removeAttribute("id"),bs.draggable=!1,bs.style["will-change"]="",this._hideClone(),ru(bs,this.options.chosenClass,!1),zi.clone=bs),n.cloneId=TA(function(){Sl("clone",n),!zi.eventCanceled&&(n.options.removeCloneOnHide||ds.insertBefore(bs,kt),n._hideClone(),il({sortable:n,name:"clone"}))}),!t&&ru(kt,s.dragClass,!0),t?(TR=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ar(document,"mouseup",n._onDrop),ar(document,"touchend",n._onDrop),ar(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,kt)),Cr(document,"drop",n),ji(kt,"transform","translateZ(0)")),Ov=!0,n._dragStartId=TA(n._dragStarted.bind(n,t,e)),Cr(document,"selectstart",n),Mw=!0,oE&&ji(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,r,s,o,a=this.options,l=a.group,u=zi.active,c=uT===l,h=a.sort,d=fa||u,f,p=this,m=!1;if(xP)return;function y(K,ee){Sl(K,p,Jh({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:h,fromSortable:d,target:n,completed:b,onMove:function(le,Q){return dT(ds,t,kt,r,le,oo(le),e,Q)},changed:x},ee))}function v(){y("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function b(K){return y("dragOverCompleted",{insertion:K}),K&&(c?u._hideClone():u._showClone(p),p!==d&&(ru(kt,fa?fa.options.ghostClass:u.options.ghostClass,!1),ru(kt,a.ghostClass,!0)),fa!==p&&p!==zi.active?fa=p:p===zi.active&&fa&&(fa=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){y("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===kt&&!kt.animated||n===t&&!n.animated)&&(uv=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(kt.parentNode[pu]._isOutsideThisEl(e.target),!K&&zm(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function x(){su=Vu(kt),zp=Vu(kt,a.draggable),il({sortable:p,name:"change",toEl:t,newIndex:su,newDraggableIndex:zp,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=kc(n,a.draggable,t,!0),y("dragOver"),zi.eventCanceled)return m;if(kt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return b(!1);if(TR=!1,u&&!a.disabled&&(c?h||(o=Ms!==ds):fa===this||(this.lastPutMode=uT.checkPull(this,u,kt,e))&&l.checkPut(this,u,kt,e))){if(f=this._getDirection(e,n)==="vertical",r=oo(kt),y("dragOverValid"),zi.eventCanceled)return m;if(o)return Ms=ds,v(),this._hideClone(),y("revert"),zi.eventCanceled||(Km?ds.insertBefore(kt,Km):ds.appendChild(kt)),b(!0);var w=C5(t,a.draggable);if(!w||bit(e,f,this)&&!w.animated){if(w===kt)return b(!1);if(w&&t===e.target&&(n=w),n&&(s=oo(n)),dT(ds,t,kt,r,n,s,e,!!n)!==!1)return v(),w&&w.nextSibling?t.insertBefore(kt,w.nextSibling):t.appendChild(kt),Ms=t,x(),b(!0)}else if(w&&_it(e,f,this)){var C=Q_(t,0,a,!0);if(C===kt)return b(!1);if(n=C,s=oo(n),dT(ds,t,kt,r,n,s,e,!1)!==!1)return v(),t.insertBefore(kt,C),Ms=t,x(),b(!0)}else if(n.parentNode===t){s=oo(n);var D=0,R,A=kt.parentNode!==t,L=!pit(kt.animated&&kt.toRect||r,n.animated&&n.toRect||s,f),O=f?"top":"left",$=Eve(n,"top","top")||Eve(kt,"top","top"),q=$?$.scrollTop:void 0;uv!==n&&(R=s[O],cE=!1,cT=!L&&a.invertSwap||A),D=xit(e,n,s,f,L?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,cT,uv===n);var M;if(D!==0){var F=Vu(kt);do F-=D,M=Ms.children[F];while(M&&(ji(M,"display")==="none"||M===nn))}if(D===0||M===n)return b(!1);uv=n,uE=D;var N=n.nextElementSibling,B=!1;B=D===1;var W=dT(ds,t,kt,r,n,s,e,B);if(W!==!1)return(W===1||W===-1)&&(B=W===1),xP=!0,setTimeout(vit,30),v(),B&&!N?t.appendChild(kt):n.parentNode.insertBefore(kt,B?N:n),$&&zTe($,0,q-$.scrollTop),Ms=kt.parentNode,R!==void 0&&!cT&&(SA=Math.abs(R-oo(n)[O])),x(),b(!0)}if(t.contains(kt))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ar(document,"mousemove",this._onTouchMove),ar(document,"touchmove",this._onTouchMove),ar(document,"pointermove",this._onTouchMove),ar(document,"dragover",zm),ar(document,"mousemove",zm),ar(document,"touchmove",zm)},_offUpEvents:function(){var e=this.el.ownerDocument;ar(e,"mouseup",this._onDrop),ar(e,"touchend",this._onDrop),ar(e,"pointerup",this._onDrop),ar(e,"touchcancel",this._onDrop),ar(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(su=Vu(kt),zp=Vu(kt,n.draggable),Sl("drop",this,{evt:e}),Ms=kt&&kt.parentNode,su=Vu(kt),zp=Vu(kt,n.draggable),zi.eventCanceled){this._nulling();return}Ov=!1,cT=!1,cE=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wP(this.cloneId),wP(this._dragStartId),this.nativeDraggable&&(ar(document,"drop",this),ar(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),oE&&ji(document.body,"user-select",""),ji(kt,"transform",""),e&&(Mw&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),nn&&nn.parentNode&&nn.parentNode.removeChild(nn),(ds===Ms||fa&&fa.lastPutMode!=="clone")&&bs&&bs.parentNode&&bs.parentNode.removeChild(bs),kt&&(this.nativeDraggable&&ar(kt,"dragend",this),lI(kt),kt.style["will-change"]="",Mw&&!Ov&&ru(kt,fa?fa.options.ghostClass:this.options.ghostClass,!1),ru(kt,this.options.chosenClass,!1),il({sortable:this,name:"unchoose",toEl:Ms,newIndex:null,newDraggableIndex:null,originalEvent:e}),ds!==Ms?(su>=0&&(il({rootEl:Ms,name:"add",toEl:Ms,fromEl:ds,originalEvent:e}),il({sortable:this,name:"remove",toEl:Ms,originalEvent:e}),il({rootEl:Ms,name:"sort",toEl:Ms,fromEl:ds,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ms,originalEvent:e})),fa&&fa.save()):su!==i_&&su>=0&&(il({sortable:this,name:"update",toEl:Ms,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ms,originalEvent:e})),zi.active&&((su==null||su===-1)&&(su=i_,zp=lE),il({sortable:this,name:"end",toEl:Ms,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Sl("nulling",this),ds=kt=Ms=nn=Km=bs=CA=Vp=jm=Ec=Mw=su=zp=i_=lE=uv=uE=fa=uT=zi.dragged=zi.ghost=zi.clone=zi.active=null,RR.forEach(function(e){e.checked=!0}),RR.length=sI=oI=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":kt&&(this._onDragOver(e),yit(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,s=n.length,o=this.options;r<s;r++)t=n[r],kc(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Eit(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];kc(a,this.options.draggable,r,!1)&&(n[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(r.removeChild(n[s]),r.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return kc(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=dC.modifyOption(this,e,t);typeof r<"u"?n[e]=r:n[e]=t,e==="group"&&HTe(n)},destroy:function(){Sl("destroy",this);var e=this.el;e[pu]=null,ar(e,"mousedown",this._onTapStart),ar(e,"touchstart",this._onTapStart),ar(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ar(e,"dragover",this),ar(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),AR.splice(AR.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Vp){if(Sl("hideClone",this),zi.eventCanceled)return;ji(bs,"display","none"),this.options.removeCloneOnHide&&bs.parentNode&&bs.parentNode.removeChild(bs),Vp=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Vp){if(Sl("showClone",this),zi.eventCanceled)return;kt.parentNode==ds&&!this.options.group.revertClone?ds.insertBefore(bs,kt):Km?ds.insertBefore(bs,Km):ds.appendChild(bs),this.options.group.revertClone&&this.animate(kt,bs),ji(bs,"display",""),Vp=!1}}};function yit(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function dT(i,e,t,n,r,s,o,a){var l,u=i[pu],c=u.options.onMove,h;return window.CustomEvent&&!Ff&&!hC?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=i,l.dragged=t,l.draggedRect=n,l.related=r||e,l.relatedRect=s||oo(e),l.willInsertAfter=a,l.originalEvent=o,i.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function lI(i){i.draggable=!1}function vit(){xP=!1}function _it(i,e,t){var n=oo(Q_(t.el,0,t.options,!0)),r=UTe(t.el,t.options,nn),s=10;return e?i.clientX<r.left-s||i.clientY<n.top&&i.clientX<n.right:i.clientY<r.top-s||i.clientY<n.bottom&&i.clientX<n.left}function bit(i,e,t){var n=oo(C5(t.el,t.options.draggable)),r=UTe(t.el,t.options,nn),s=10;return e?i.clientX>r.right+s||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>r.bottom+s||i.clientX>n.right&&i.clientY>n.top}function xit(i,e,t,n,r,s,o,a){var l=n?i.clientY:i.clientX,u=n?t.height:t.width,c=n?t.top:t.left,h=n?t.bottom:t.right,d=!1;if(!o){if(a&&SA<u*r){if(!cE&&(uE===1?l>c+u*s/2:l<h-u*s/2)&&(cE=!0),cE)d=!0;else if(uE===1?l<c+SA:l>h-SA)return-uE}else if(l>c+u*(1-r)/2&&l<h-u*(1-r)/2)return wit(e)}return d=d||o,d&&(l<c+u*s/2||l>h-u*s/2)?l>c+u/2?1:-1:0}function wit(i){return Vu(kt)<Vu(i)?1:-1}function Eit(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Cit(i){RR.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&RR.push(n)}}function TA(i){return setTimeout(i,0)}function wP(i){return clearTimeout(i)}ND&&Cr(document,"touchmove",function(i){(zi.active||Ov)&&i.cancelable&&i.preventDefault()});zi.utils={on:Cr,off:ar,css:ji,find:BTe,is:function(e,t){return!!kc(e,t,e,!1)},extend:oit,throttle:jTe,closest:kc,toggleClass:ru,clone:GTe,index:Vu,nextTick:TA,cancelNextTick:wP,detectDirection:VTe,getChild:Q_};zi.get=function(i){return i[pu]};zi.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(zi.utils=Jh(Jh({},zi.utils),n.utils)),dC.mount(n)})};zi.create=function(i,e){return new zi(i,e)};zi.version=nit;var ro=[],Iw,EP,CP=!1,uI,cI,kR,Ow;function Sit(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?Cr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Cr(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Cr(document,"touchmove",this._handleFallbackAutoScroll):Cr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ar(document,"dragover",this._handleAutoScroll):(ar(document,"pointermove",this._handleFallbackAutoScroll),ar(document,"touchmove",this._handleFallbackAutoScroll),ar(document,"mousemove",this._handleFallbackAutoScroll)),Rve(),AA(),ait()},nulling:function(){kR=EP=Iw=CP=Ow=uI=cI=null,ro.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var r=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(kR=t,n||this.options.forceAutoScrollFallback||hC||Ff||oE){hI(t,this.options,a,n);var l=ig(a,!0);CP&&(!Ow||s!==uI||o!==cI)&&(Ow&&Rve(),Ow=setInterval(function(){var u=ig(document.elementFromPoint(s,o),!0);u!==l&&(l=u,AA()),hI(t,r.options,u,n)},10),uI=s,cI=o)}else{if(!this.options.bubbleScroll||ig(a,!0)===zh()){AA();return}hI(t,this.options,ig(a,!1),!1)}}},Ef(i,{pluginName:"scroll",initializeByDefault:!0})}function AA(){ro.forEach(function(i){clearInterval(i.pid)}),ro=[]}function Rve(){clearInterval(Ow)}var hI=jTe(function(i,e,t,n){if(e.scroll){var r=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=zh(),u=!1,c;EP!==t&&(EP=t,AA(),Iw=e.scroll,c=e.scrollFn,Iw===!0&&(Iw=ig(t,!0)));var h=0,d=Iw;do{var f=d,p=oo(f),m=p.top,y=p.bottom,v=p.left,b=p.right,x=p.width,w=p.height,C=void 0,D=void 0,R=f.scrollWidth,A=f.scrollHeight,L=ji(f),O=f.scrollLeft,$=f.scrollTop;f===l?(C=x<R&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),D=w<A&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(C=x<R&&(L.overflowX==="auto"||L.overflowX==="scroll"),D=w<A&&(L.overflowY==="auto"||L.overflowY==="scroll"));var q=C&&(Math.abs(b-r)<=o&&O+x<R)-(Math.abs(v-r)<=o&&!!O),M=D&&(Math.abs(y-s)<=o&&$+w<A)-(Math.abs(m-s)<=o&&!!$);if(!ro[h])for(var F=0;F<=h;F++)ro[F]||(ro[F]={});(ro[h].vx!=q||ro[h].vy!=M||ro[h].el!==f)&&(ro[h].el=f,ro[h].vx=q,ro[h].vy=M,clearInterval(ro[h].pid),(q!=0||M!=0)&&(u=!0,ro[h].pid=setInterval((function(){n&&this.layer===0&&zi.active._onTouchMove(kR);var N=ro[this.layer].vy?ro[this.layer].vy*a:0,B=ro[this.layer].vx?ro[this.layer].vx*a:0;typeof c=="function"&&c.call(zi.dragged.parentNode[pu],B,N,i,kR,ro[this.layer].el)!=="continue"||zTe(ro[this.layer].el,B,N)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=ig(d,!1)));CP=u}},30),YTe=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=n||s;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(h)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function S5(){}S5.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Q_(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:YTe};Ef(S5,{pluginName:"revertOnSpill"});function T5(){}T5.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:YTe};Ef(T5,{pluginName:"removeOnSpill"});zi.mount(new Sit);zi.mount(T5,S5);const Tit=i=>{const e=i.item;let t=Array.prototype.slice.call(e.parentNode.childNodes);return t=t.filter(n=>n.nodeType!=Node.ELEMENT_NODE||!n.classList.contains("sortable-fallback")),t},Ait=(i,e,t,n,r,s)=>{const a=i.item.parentNode;for(const m of t)a.appendChild(m);if(i.oldIndex==i.newIndex)return;const l=n.getArray(),u=i.item.querySelector("eox-layercontrol-layer").layer.get(r),c=l.find(m=>m.get(r)===u),h=s.dataset.layer,d=l.find(m=>m.get(r)==h);let f,p;for(f=0;f<l.length;f++)if(l[f]==c){n.removeAt(f);break}for(p=0;p<l.length;p++)if(l[p]===d){f>p?n.insertAt(p,c):n.insertAt(p+1,c);break}e.requestUpdate()};function Rit(i,e,t,n){let r=[],s=null;i._sortable=zi.create(i,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>r=Tit(o),onMove:o=>{s=o.related},onEnd:o=>Ait(o,n,r,e,t,s)})}function kit(i,e,t,n){const r=i.getArray();let s=!1;r.forEach(o=>{const a=o.ol_uid;o.get(e)||(o.set(e,a),s=!0),o.get(t)||(o.set(t,`layer ${a}`),s=!0),s&&n.requestUpdate()})}function A5(i,e,t){let n=[];const r=(s,o,a)=>{n=[...n,...s.filter(u=>u.get(o)===a)];const l=s.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>r(u.getLayers().getArray(),o,a)),n};return r(i,e,t),n}function Dit(i,e,t){if(!i||!e)return!1;if(!ZTe(i,t))return!0;const n=i.get("minZoom"),r=i.get("maxZoom"),s=e.getView().getZoom();return s>n&&s<r}function ZTe(i,e){const t=i.get("minZoom"),n=i.get("maxZoom");return!!(e&&(t!==-1/0||n!==1/0))}function Lit(i,e){var r,s,o;return!i||!e?void 0:i.getLayers?"group":((o=(r=e.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:r.ol_uid)==null?void 0:o.includes(i.getSource?(s=i.getSource())==null?void 0:s.ol_uid:void 0))?"draw":i.declutter_!==void 0?"vector":"raster"}function KTe(i,e){var n;let t={};for(const r in i){const s=i[r].type;if(s&&s!=="object")t[r]=s==="number"?Number(e[r]):e[r];else if(typeof i[r]=="object"&&((n=i[r])!=null&&n.properties)){const o=KTe(i[r].properties,e);Object.keys(o).length>0&&(t[r]=o)}}return t}function Mit(i,e){var s;if(!e||!i.getSource().getTileUrlFunction())return null;const t=new URL(i.getSource().getTileUrlFunction()([0,0,0])),n=Object.fromEntries(t.searchParams.entries()),r=KTe(((s=e.schema)==null?void 0:s.properties)||e.schema,n);return Object.keys(r).length?r:null}const Iit=(i,e)=>i==null?void 0:i.filter(t=>["remove","sort"].filter(n=>e!=null&&e.get("layerControlDisable")?n!=="sort":!0).includes(t)),Oit=(i,e)=>i==null?void 0:i.filter(t=>{let n=!0;return["remove","sort"].includes(t)&&(n=!1),t==="info"&&(n=e.get("description")),t==="config"&&(n=e.get("layerConfig")),n}),Pit=(i,e)=>tt`
  <button slot="${i}-icon" class="icon">${e?i:In}</button>
`,Fit=i=>tt`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:e}=i;e==null||e.set("layerControlOptional",!0),e==null||e.setVisible(!1),i.dispatchEvent(new CustomEvent("changed",{detail:e,bubbles:!0}))}}
  >
    ${i.unstyled?"x":In}
  </button>
`,Nit=i=>tt`
  <span class="button sort-icon icon drag-handle">
    ${i?"═":In}
  </span>
`,JTe=i=>{var t;const e=["layerControlHide","layerControlOptional"];return(t=i==null?void 0:i.getArray())==null?void 0:t.filter(n=>e.every(r=>!n.get(r)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QTe=_D(class extends bD{constructor(i){if(super(i),i.type!==Bp.PROPERTY&&i.type!==Bp.ATTRIBUTE&&i.type!==Bp.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!VNe(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===Wv||e===In)return e;const t=i.element,n=i.name;if(i.type===Bp.PROPERTY){if(e===t[n])return Wv}else if(i.type===Bp.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(n))return Wv}else if(i.type===Bp.ATTRIBUTE&&t.getAttribute(n)===e+"")return Wv;return tN(i),e}}),$it=(i,e,t)=>{let n=e;return t.layer.getSource().getTileUrlFunction()&&(n||(n=t.layer.getSource().getTileUrlFunction()),t.layer.getSource().setTileUrlFunction((...r)=>Qtt(n(...r),i)),t.layer.getSource().setKey(new Date)),n};var q2,V2,H2,Bk,tAe,jk,zk;class eAe extends Yn{constructor(){super();Tn(this,Bk);Tn(this,q2,{});Tn(this,V2,null);Tn(this,H2);Tn(this,jk,"");Tn(this,zk,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.debouncedDataChange=Bb(Us(this,Bk,tAe),1e3,{leading:!0})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){da(this,V2,Mit(this.layer,this.layerConfig)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const t={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return tt`
      <style>
        ${ki(this,jk)}
        ${!this.unstyled&&ki(this,zk)}
      </style>
      ${Hi(this.layerConfig,()=>tt`
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${ki(this,V2)}
            .options=${t}
            @change=${this.debouncedDataChange}
          ></eox-jsonform>
        `)}
    `}}q2=new WeakMap,V2=new WeakMap,H2=new WeakMap,Bk=new WeakSet,tAe=function(t){da(this,q2,t.detail),da(this,H2,$it(ki(this,q2),ki(this,H2),this)),this.requestUpdate()},jk=new WeakMap,zk=new WeakMap,Ye(eAe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",eAe);var W2,Gk,Uk;class iAe extends Yn{constructor(){super();Tn(this,W2,t=>this.selectedTab===t&&"highlighted");Tn(this,Gk,`
    .tabbed figure {
      margin: 0;
    }
    .tabbed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div {
      display: flex;
    }
    .tabbed .tab {
      display: none;
    }
    .tabbed .tab.highlighted {
      display: block;
    }
    .tabbed label.highlighted {
      background: lightgrey;
    }
  `);Tn(this,Uk,`
    .tabbed {
      font-size: small;
    }
    .tabbed label.highlighted {
      background: #00417011;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: #00417011;
      border-top: 1px solid #0041701a;
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.tabs,n=this.actions,r=n.length+t.length>1;return tt`
      <style>
        ${ki(this,Gk)}
        ${!this.unstyled&&ki(this,Uk)}
      </style>
      <div class="tabbed">
        <!-- Navigation for tabs and actions -->
        ${Hi(r,()=>tt`
            <nav>
              <div>
                <!-- Labels for tabs -->
                ${$l(t,(s,o)=>tt`
                      <label
                        class=${ki(this,W2).call(this,o)}
                        @click=${()=>this.selectedTab=o}
                      >
                        <!-- Customizable icon for each tab -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </label>
                    `)}
              </div>
              <div>
                <!-- Icons for actions -->
                ${$l(n,s=>tt`
                      <span>
                        <!-- Customizable icon for each action -->
                        <slot name=${`${s}-icon`}>${s}</slot>
                      </span>
                    `)}
              </div>
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${$l(t,(s,o)=>tt`
              <div class="tab ${ki(this,W2).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}W2=new WeakMap,Gk=new WeakMap,Uk=new WeakMap,Ye(iAe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-tabs",iAe);var qk,Vk;class nAe extends Yn{constructor(){super();Ye(this,"_removeButton",()=>Fit(this));Ye(this,"_sortButton",()=>Nit(this.unstyled));Ye(this,"_button",t=>Pit(t,this.unstyled));Tn(this,qk,"");Tn(this,Vk,`
    ${Q0}  
    ${BN}
    ${CD}
    ${jN}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      display: flex;
      border-radius: 4px;
      cursor: pointer;
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tabs button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tabs button.icon {
      opacity: .7;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tabs button.icon:hover {
      opacity: 1;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
    }
    eox-layercontrol-tabs button.icon,
    eox-layercontrol-tabs .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tabs button.icon::before,
    eox-layercontrol-tabs .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content] {
      padding: 12px 6px;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const t=Iit(this.tools,this.layer),n=Oit(this.tools,this.layer),r=this[`_${t==null?void 0:t[0]}Button`]?this[`_${t==null?void 0:t[0]}Button`]():In,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=t==null?void 0:t.length,a=n==null?void 0:n.length;return tt`
      <style>
        ${ki(this,qk)}
        ${!this.unstyled&&ki(this,Vk)}
      </style>
      ${Hi(o+a>0,()=>tt`
          ${Hi(o===1&&a===0,()=>tt`
              <div class="single-action-container">
                <div class="single-action">${r}</div>
              </div>
            `,()=>{var u;return tt`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||In}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tabs
                  .noShadow=${!1}
                  .actions=${t}
                  .tabs=${n}
                  .unstyled=${this.unstyled}
                >
                  <!-- Rendering tabs and content -->
                  ${$l(n,c=>this._button(c))}

                  <div slot="info-content">
                    ${wh(this.layer.get("description"))}
                  </div>
                  <div slot="opacity-content">
                    <!-- Input for opacity -->
                    <input
                      type="range"
                      min="0"
                      max="1"
                      step="0.01"
                      value=${QTe((u=this.layer)==null?void 0:u.getOpacity())}
                      @input=${c=>this.layer.setOpacity(parseFloat(c.target.value))}
                    />
                  </div>
                  <div slot="config-content">
                    <!-- Layer configuration -->
                    ${Hi(this.layer.get("layerConfig"),()=>tt`
                        <eox-layercontrol-layerconfig
                          slot="config-content"
                          .layer=${this.layer}
                          .noShadow=${!0}
                          .layerConfig=${this.layer.get("layerConfig")}
                          .unstyled=${this.unstyled}
                          @changed=${()=>this.requestUpdate()}
                        ></eox-layercontrol-layerconfig>
                      `)}
                  </div>
                  <div slot="remove-icon">${this._removeButton()}</div>
                  <div slot="sort-icon">${this._sortButton()}</div>
                </eox-layercontrol-tabs>
              </details>
            `})}
        `)}
    `}}qk=new WeakMap,Vk=new WeakMap,Ye(nAe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",nAe);const Bit=i=>{const e=()=>{const t=Dit(i.layer,i.map,i.showLayerZoomState);let n=!1;!t&&i.currLayerVisibilityBasedOnZoom?(i.currLayerVisibilityBasedOnZoom=!1,n=!0):t&&!i.currLayerVisibilityBasedOnZoom&&(i.currLayerVisibilityBasedOnZoom=!0,n=!0),n&&(i.requestUpdate(),i.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};ZTe(i.layer,i.showLayerZoomState)&&(e(),i.map.getView().on("change:resolution",()=>e()))},jit=(i,e)=>{const t=e.layer;t.setVisible(i.target.checked),i.target.checked&&t.get("layerControlExclusive")&&e.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(r=>{var s;r.layer!==t&&((s=r.layer)!=null&&s.get("layerControlExclusive"))&&(r.layer.setVisible(!1),r.requestUpdate())}),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:t})),e.requestUpdate()};var Eg,RA,sAe,Hk,Wk;class rAe extends Yn{constructor(){super();Tn(this,Eg);Ye(this,"currLayerVisibilityBasedOnZoom",!0);Tn(this,Hk,"");Tn(this,Wk,`
    ${CD}
    eox-layercontrol-layer {
      width: 100%;
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){Bit(this)}render(){var l;const t=this.layer.getVisible(),n=t?"visible":"",r=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=Us(this,Eg,RA).call(this,"layerControlDisable")?"disabled":"",o=Us(this,Eg,RA).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return tt`
      <style>
        ${ki(this,Hk)}
        ${!this.unstyled&&ki(this,Wk)}
      </style>
      ${Hi(this.layer,()=>tt`
          <!-- Render the layer -->
          <div class="layer ${n} ${r}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${QTe(t)}
                @click=${Us(this,Eg,sAe)}
              />

              <!-- Layer title -->
              <span class="title">${Us(this,Eg,RA).call(this,this.titleProperty)}</span>
              ${Hi(a,()=>tt`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}Eg=new WeakSet,RA=function(t){var n;return(n=this.layer)==null?void 0:n.get(t)},sAe=function(t){jit(t,this)},Hk=new WeakMap,Wk=new WeakMap,Ye(rAe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer",rAe);var Xk,Yk;class oAe extends Yn{constructor(){super();Tn(this,Xk,"");Tn(this,Yk,`
    details summary {
      cursor: pointer;
      display: flex;
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: block;
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var r,s;const t=!!((r=this.group)!=null&&r.get("layerControlExpand")),n=(s=JTe(this.group.getLayers()))==null?void 0:s.length;return tt`
      <style>
        ${ki(this,Xk)}
        ${!this.unstyled&&ki(this,Yk)}
      </style>
      ${Hi(this.group,()=>tt`
          <!-- Render the details element with the layer control -->
          <details
            open=${t||In}
            data-children-length=${n}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}Xk=new WeakMap,Yk=new WeakMap,Ye(oAe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",oAe);const zit=i=>{const{layers:e,idProperty:t,titleProperty:n,renderRoot:r}=i,s=Bb(()=>{i.requestUpdate(),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),o=()=>s();if(e&&(e.hasListener("change:length")&&(e==null||e.un("change:length",o)),e.on("change:length",o),e)){const a=r.querySelector("ul");kit(e,t,n,i),Rit(a,e,t,i)}};var Zk,Kk;class aAe extends Yn{constructor(){super();Tn(this,Zk,"");Tn(this,Kk,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: 48px;
    }
    li {
      list-style: none;
    }
    li {
      border-bottom: 1px solid #0041703a;
    }
    li:first-child {
      border-top: 1px solid #0041703a;
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1}firstUpdated(){zit(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.layers?JTe(this.layers).reverse():[];return tt`
      <style>
        ${ki(this,Zk)}
        ${!this.unstyled&&ki(this,Kk)}
      </style>
      <ul>
        ${Hi(this.layers,()=>tt`
            ${FN(t,n=>n,n=>tt`
                <li
                  data-layer="${n.get(this.idProperty)}"
                  data-type="${Lit(n,this.map)}"
                >
                  ${n.getLayers?tt`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${n}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:tt`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${n}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}Zk=new WeakMap,Kk=new WeakMap,Ye(aAe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",aAe);const Git=i=>{const e=i.querySelector("select[name=optional]"),t=e?e.value:null,n=A5(i.layers.getArray(),"layerControlOptional",!0).find(r=>(r.get(i.idProperty)||r.ol_uid)===t);n==null||n.set("layerControlOptional",!1),n==null||n.setVisible(!0),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),i.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(r=>r.requestUpdate()),i.requestUpdate()};var Jk,uAe;class lAe extends Yn{constructor(){super();Tn(this,Jk);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=A5(this.layers.getArray(),"layerControlOptional",!0);return tt`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${t.map(n=>{const r=n.get(this.idProperty)||n.ol_uid,s=n.get(this.titleProperty),o=`layer ${n.get(this.idProperty)}`;return tt` <option value="${r}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${Us(this,Jk,uAe)}">add</button>
    `}}Jk=new WeakSet,uAe=function(){Git(this)},Ye(lAe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",lAe);const Uit=(i,e)=>{e.jsonInput=i.target.value,e.requestUpdate()},kve=i=>{const e=JSON.parse(`{"data":${PTe(i.jsonInput)}}`);Array.isArray(e.data)?e.data.forEach(t=>{i.eoxMap.addOrUpdateLayer(t)}):i.eoxMap.addOrUpdateLayer(e.data),i.jsonInput=null,i.requestUpdate()},qit=(i,e)=>{e.urlInput=i.target.value,e.requestUpdate()};async function Vit(i){const e=i.urlInput;if(i.wmsCapabilities=null,i.searchLoad=!0,i.requestUpdate(),!e)return!1;if(E5(e)==="XYZ")return{Name:e};try{const t=await Ztt(e);i.wmsCapabilities=t}catch{}finally{i.searchLoad=!1,i.requestUpdate()}return!1}const Hit=(i,e)=>{const{Name:t}=i,n=E5(e.urlInput)||"XYZ",r={type:"Tile",properties:{id:t,title:t},source:{type:n,url:e.urlInput,params:{LAYERS:t}}};e.jsonInput=JSON.stringify(r)},Wit=(i,e)=>{e.open=i||null,e.urlInput=null,e.jsonInput=null,e.wmsCapabilities=null,e.requestUpdate()};var wa,hAe,dAe,SP,fAe,pAe,kA,Qk,eD;class cAe extends Yn{constructor(){super();Tn(this,wa);Ye(this,"urlInput",null);Ye(this,"jsonInput",null);Ye(this,"open",null);Ye(this,"searchLoad",!1);Ye(this,"wmsCapabilities",null);Tn(this,Qk,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);Tn(this,eD,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=this.open?"open":"close",n=this.open==="url",r=this.open==="json",s=!Ktt(this.urlInput)||this.searchLoad?!0:In;return tt`
      <style>
        ${ki(this,Qk)}
        ${!this.unstyled&&ki(this,eD)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${t}">
            <li
              @click=${()=>Us(this,wa,kA).call(this,"url")}
              class="${n?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>Us(this,wa,kA).call(this,"json")}
              class="${r?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>Us(this,wa,kA).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${t}">
          ${n?tt`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${Us(this,wa,hAe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${Us(this,wa,dAe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?tt`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return tt`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>Us(this,wa,SP).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:In}
            `:tt`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${Us(this,wa,pAe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${Jtt(this.jsonInput)?In:!0}
                  @click=${Us(this,wa,fAe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}wa=new WeakSet,hAe=function(t){qit(t,this)},dAe=async function(){const t=await Vit(this);t&&Us(this,wa,SP).call(this,t)},SP=function(t){Hit(t,this),kve(this)},fAe=function(){kve(this)},pAe=function(t){Uit(t,this)},kA=function(t){Wit(t,this)},Qk=new WeakMap,eD=new WeakMap,Ye(cAe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",cAe);const Xit=(i,e)=>{if(e.requestUpdate(),i.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const t=e.renderRoot.querySelector("eox-layercontrol-optional-list");t==null||t.requestUpdate()}},gAe=i=>{let e;return typeof i=="string"?e=document.querySelector(i):e=i,e},Yit=i=>{const e=gAe(i.for);return e&&e.map!==i.map&&(i.map=e.map),e};var B_,tD,yAe,iD;class mAe extends Yn{constructor(){super();Tn(this,tD);Tn(this,B_);Tn(this,iD,"* { font-family: Roboto, sans-serif; }");this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride=""}firstUpdated(){da(this,B_,Yit(this))}render(){var r,s,o;const t=(r=this.map)==null?void 0:r.getLayers().getArray(),n=t&&((s=A5(t,"layerControlOptional",!0))==null?void 0:s.length)>0;return tt`
      <style>
        ${!this.unstyled&&ki(this,iD)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${Hi(this.addExternalLayers&&((o=ki(this,B_))==null?void 0:o.addOrUpdateLayer),()=>tt`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${ki(this,B_)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Hi(this.map,()=>tt`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            @changed=${Us(this,tD,yAe)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Hi(n,()=>tt`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}B_=new WeakMap,tD=new WeakSet,yAe=function(t){Xit(t,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:t.detail}))},iD=new WeakMap,Ye(mAe,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String}});customElements.define("eox-layercontrol",mAe);class Zit extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(e,t,n){t!==n&&(this[e]=n),this.render()}}class Kit extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          background: lightgrey;
          border: 1px solid darkgrey;
          border-radius: 4px;
          padding: 4px 8px;
          overflow: hidden;


          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(e,t,n){t!==n&&(this[e]=n),this.render()}}customElements.define("eox-layout",Zit);customElements.define("eox-layout-item",Kit);let Zl=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};function Jit(i){i.stopPropagation()}const N0={PROPERTYCHANGE:"propertychange"};let fC=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Qit(i,e,t){let n,r;t=t||Gh;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+t(i[n],e),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function Gh(i,e){return i>e?1:i<e?-1:0}function ent(i,e){return i<e?1:i>e?-1:0}function $D(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function tnt(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Hn(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function ad(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function int(i,e,t){const n=e||Gh;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||t&&o===0)})}function eb(){return!0}function Hb(){return!1}function tb(){}function vAe(i){let e=!1,t,n,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!ad(s,n))&&(e=!0,r=this,n=s,t=i.apply(this,arguments)),t}}function R5(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Wb(i){for(const e in i)delete i[e]}function Cf(i){let e;for(e in i)return!1;return!e}let Xb=class extends fC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new Zl(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let u=a[n];for(delete a[n];u--;)this.removeEventListener(n,tb);delete o[n]}return l}disposeInternal(){this.listeners_&&Wb(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=tb,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}};const qt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Wi(i,e,t,n,r){if(n&&n!==i&&(t=t.bind(n)),r){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function ib(i,e,t,n){return Wi(i,e,t,n,!0)}function gr(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Wb(i))}let pC=class extends Xb{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(qt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Wi(this,e[s],t);return r}return Wi(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=ib(this,e[s],t)}else n=ib(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)nnt(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};pC.prototype.on;pC.prototype.once;pC.prototype.un;function nnt(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)gr(i[e]);else gr(i)}function hi(){throw new Error("Unimplemented abstract method.")}let rnt=0;function Gt(i){return i.ol_uid||(i.ol_uid=String(++rnt))}let Dve=class extends Zl{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}},lc=class extends pC{constructor(e){super(),this.on,this.once,this.un,Gt(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Dve(n,e,t)),n=N0.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Dve(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Cf(this.values_)&&(this.values_=null),t||this.notify(e,n)}}};const za={ADD:"add",REMOVE:"remove"},Lve={LENGTH:"length"};let fT=class extends Zl{constructor(e,t,n){super(e),this.element=t,this.index=n}},qa=class extends lc{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Lve.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new fT(za.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new fT(za.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new fT(za.REMOVE,r,e)),this.dispatchEvent(new fT(za.ADD,t,e))}updateLength_(){this.set(Lve.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}};const wr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function sn(i,e){if(!i)throw new Error(e)}function Fi(i,e,t){return Math.min(Math.max(i,e),t)}function _Ae(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=r,n=s):l>0&&(t+=o*l,n+=a*l)}return df(i,e,t,n)}function df(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function snt(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let u=n;u<e+1;u++)n==u?i[a][u]=0:i[a][u]+=l*i[n][u]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function Mve(i){return i*180/Math.PI}function Bc(i){return i*Math.PI/180}function Uh(i,e){const t=i%e;return t*e<0?t+e:t}function hu(i,e,t){return i+t*(e-i)}function Yb(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function DR(i,e){return Math.round(Yb(i,e))}function n_(i,e){return Math.floor(Yb(i,e))}function ng(i,e){return Math.ceil(Yb(i,e))}let bAe=class extends lc{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[wr.OPACITY]=e.opacity!==void 0?e.opacity:1,sn(typeof t[wr.OPACITY]=="number","Layer opacity must be a number"),t[wr.VISIBLE]=e.visible!==void 0?e.visible:!0,t[wr.Z_INDEX]=e.zIndex,t[wr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[wr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[wr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[wr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Fi(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return hi()}getLayerStatesArray(e){return hi()}getExtent(){return this.get(wr.EXTENT)}getMaxResolution(){return this.get(wr.MAX_RESOLUTION)}getMinResolution(){return this.get(wr.MIN_RESOLUTION)}getMinZoom(){return this.get(wr.MIN_ZOOM)}getMaxZoom(){return this.get(wr.MAX_ZOOM)}getOpacity(){return this.get(wr.OPACITY)}getSourceState(){return hi()}getVisible(){return this.get(wr.VISIBLE)}getZIndex(){return this.get(wr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(wr.EXTENT,e)}setMaxResolution(e){this.set(wr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(wr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(wr.MAX_ZOOM,e)}setMinZoom(e){this.set(wr.MIN_ZOOM,e)}setOpacity(e){sn(typeof e=="number","Layer opacity must be a number"),this.set(wr.OPACITY,e)}setVisible(e){this.set(wr.VISIBLE,e)}setZIndex(e){this.set(wr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};const So={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ir={ANIMATING:0,INTERACTING:1},ou={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},xAe=42,nb=256,ont={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function Ive(i){return ont[i]}const rb={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let sb=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||rb[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const gC=6378137,r_=Math.PI*gC,ant=[-r_,-r_,r_,r_],lnt=[-180,-85,180,85],pT=gC*Math.log(Math.tan(Math.PI/2));let cv=class extends sb{constructor(e){super({code:e,units:"m",extent:ant,global:!0,worldExtent:lnt,getPointResolution:function(t,n){return t/Math.cosh(n[1]/gC)}})}};const Ove=[new cv("EPSG:3857"),new cv("EPSG:102100"),new cv("EPSG:102113"),new cv("EPSG:900913"),new cv("http://www.opengis.net/def/crs/EPSG/0/3857"),new cv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function unt(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t){e[r]=r_*i[r]/180;let s=gC*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));s>pT?s=pT:s<-pT&&(s=-pT),e[r+1]=s}return e}function cnt(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t)e[r]=180*i[r]/r_,e[r+1]=360*Math.atan(Math.exp(i[r+1]/gC))/Math.PI-90;return e}const hnt=6378137,Pve=[-180,-90,180,90],dnt=Math.PI*hnt/180;let Gm=class extends sb{constructor(e,t){super({code:e,units:"degrees",extent:Pve,axisOrientation:t,global:!0,metersPerUnit:dnt,worldExtent:Pve})}};const Fve=[new Gm("CRS:84"),new Gm("EPSG:4326","neu"),new Gm("urn:ogc:def:crs:OGC:1.3:CRS84"),new Gm("urn:ogc:def:crs:OGC:2:84"),new Gm("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Gm("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Gm("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let TP={};function fnt(i){return TP[i]||TP[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function pnt(i,e){TP[i]=e}let T_={};function ob(i,e,t){const n=i.getCode(),r=e.getCode();n in T_||(T_[n]={}),T_[n][r]=t}function wAe(i,e){let t;return i in T_&&e in T_[i]&&(t=T_[i][e]),t}const Vo={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ga(i){const e=Wa();for(let t=0,n=i.length;t<n;++t)hE(e,i[t]);return e}function gnt(i,e,t){const n=Math.min.apply(null,i),r=Math.min.apply(null,e),s=Math.max.apply(null,i),o=Math.max.apply(null,e);return nc(n,r,s,o,t)}function ql(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function EAe(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function iy(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function vu(i,e){return k5(i,e[0],e[1])}function ya(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function k5(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function AP(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let l=Vo.UNKNOWN;return o<t?l=l|Vo.LEFT:o>r&&(l=l|Vo.RIGHT),a<n?l=l|Vo.BELOW:a>s&&(l=l|Vo.ABOVE),l===Vo.UNKNOWN&&(l=Vo.INTERSECTING),l}function Wa(){return[1/0,1/0,-1/0,-1/0]}function nc(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function Zb(i){return nc(1/0,1/0,-1/0,-1/0,i)}function A_(i,e){const t=i[0],n=i[1];return nc(t,n,t,n,e)}function D5(i,e,t,n,r){const s=Zb(r);return SAe(s,i,e,t,n)}function rc(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function mnt(i,e,t){return Math.abs(i[0]-e[0])<t&&Math.abs(i[2]-e[2])<t&&Math.abs(i[1]-e[1])<t&&Math.abs(i[3]-e[3])<t}function CAe(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function hE(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function SAe(i,e,t,n,r){for(;t<n;t+=r)ynt(i,e[t],e[t+1]);return i}function ynt(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function L5(i,e){let t;return t=e($0(i)),t||(t=e(Kb(i)),t)||(t=e(Jb(i)),t)||(t=e(uc(i)),t)?t:!1}function HE(i){let e=0;return ld(i)||(e=Di(i)*Vr(i)),e}function $0(i){return[i[0],i[1]]}function Kb(i){return[i[2],i[1]]}function Ko(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function vnt(i,e){let t;if(e==="bottom-left")t=$0(i);else if(e==="bottom-right")t=Kb(i);else if(e==="top-left")t=uc(i);else if(e==="top-right")t=Jb(i);else throw new Error("Invalid corner");return t}function WE(i,e,t,n,r){const[s,o,a,l,u,c,h,d]=RP(i,e,t,n);return nc(Math.min(s,a,u,h),Math.min(o,l,c,d),Math.max(s,a,u,h),Math.max(o,l,c,d),r)}function RP(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,u=r*a,c=s*o,h=s*a,d=i[0],f=i[1];return[d-l+h,f-u-c,d-l-h,f-u+c,d+l-h,f+u+c,d+l+h,f+u-c,d-l+h,f-u-c]}function Vr(i){return i[3]-i[1]}function ho(i,e,t){const n=t||Wa();return Hr(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):Zb(n),n}function uc(i){return[i[0],i[3]]}function Jb(i){return[i[2],i[3]]}function Di(i){return i[2]-i[0]}function Hr(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function ld(i){return i[2]<i[0]||i[3]<i[1]}function _nt(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function M5(i,e){const t=(i[2]-i[0])/2*(e-1),n=(i[3]-i[1])/2*(e-1);i[0]-=t,i[2]+=t,i[1]-=n,i[3]+=n}function bnt(i,e,t){let n=!1;const r=AP(i,e),s=AP(i,t);if(r===Vo.INTERSECTING||s===Vo.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],u=i[3],c=e[0],h=e[1],d=t[0],f=t[1],p=(f-h)/(d-c);let m,y;s&Vo.ABOVE&&!(r&Vo.ABOVE)&&(m=d-(f-u)/p,n=m>=o&&m<=l),!n&&s&Vo.RIGHT&&!(r&Vo.RIGHT)&&(y=f-(d-l)*p,n=y>=a&&y<=u),!n&&s&Vo.BELOW&&!(r&Vo.BELOW)&&(m=d-(f-a)/p,n=m>=o&&m<=l),!n&&s&Vo.LEFT&&!(r&Vo.LEFT)&&(y=f-(d-o)*p,n=y>=a&&y<=u)}return n}function ab(i,e,t,n){if(ld(i))return Zb(t);let r=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let u=0;u<n;++u)r.push(i[0]+a*u/n,i[1],i[2],i[1]+l*u/n,i[2]-a*u/n,i[3],i[0],i[3]-l*u/n)}else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return gnt(s,o,t)}function I5(i,e){const t=e.getExtent(),n=Ko(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=Di(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function O5(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];I5(i,e);const r=Di(n);if(Di(i)>r&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}function i0(i,e,t){const n=t!==void 0?i.toFixed(t):""+i;let r=n.indexOf(".");return r=r===-1?n.length:r,r>e?n:new Array(1+e-r).join("0")+n}function P5(i,e){const t=(""+i).split("."),n=(""+e).split(".");for(let r=0;r<Math.max(t.length,n.length);r++){const s=parseInt(t[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function TAe(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function AAe(i,e){const t=i[0],n=i[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],u=s[1],c=l-o,h=u-a,d=c===0&&h===0?0:(c*(t-o)+h*(n-a))/(c*c+h*h||0);let f,p;return d<=0?(f=o,p=a):d>=1?(f=l,p=u):(f=o+d*c,p=a+d*h),[f,p]}function Nve(i,e,t){const n=Uh(e+180,360)-180,r=Math.abs(3600*n),s=t||0;let o=Math.floor(r/3600),a=Math.floor((r-o*3600)/60),l=Yb(r-o*3600-a*60,s);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let u=o+"°";return(a!==0||l!==0)&&(u+=" "+i0(a,2)+"′"),l!==0&&(u+=" "+i0(l,2,s)+"″"),n!==0&&(u+=" "+i.charAt(n<0?1:0)),u}function Hu(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function F5(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function RAe(i,e){return i[0]*=e,i[1]*=e,i}function lb(i,e){const t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function LR(i,e){return Math.sqrt(lb(i,e))}function xnt(i,e){return lb(i,AAe(i,e))}function BD(i,e){if(e.canWrapX()){const t=Di(e.getExtent()),n=kAe(i,e,t);n&&(i[0]-=n*t)}return i}function kAe(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||Di(n),r=Math.floor((i[0]-n[0])/t)),r}const jD=63710088e-1;function kP(i,e,t){t=t||jD;const n=Bc(i[1]),r=Bc(e[1]),s=(r-n)/2,o=Bc(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function dI(i,e){let t=0;for(let n=0,r=i.length;n<r-1;++n)t+=kP(i[n],i[n+1],e);return t}function DAe(i,e){e=e||{};const t=e.radius||jD,n=e.projection||"EPSG:3857",r=i.getType();r!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let s=0,o,a,l,u,c,h;switch(r){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=i.getCoordinates(),s=dI(o,t);break}case"MultiLineString":case"Polygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)s+=dI(o[l],t);break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],c=0,h=a.length;c<h;++c)s+=dI(a[c],t);break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,u=d.length;l<u;++l)s+=DAe(d[l],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function gT(i,e){let t=0;const n=i.length;let r=i[n-1][0],s=i[n-1][1];for(let o=0;o<n;o++){const a=i[o][0],l=i[o][1];t+=Bc(a-r)*(2+Math.sin(Bc(s))+Math.sin(Bc(l))),r=a,s=l}return t*e*e/2}function LAe(i,e){e=e||{};const t=e.radius||jD,n=e.projection||"EPSG:3857",r=i.getType();r!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let s=0,o,a,l,u,c,h;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),s=Math.abs(gT(o[0],t)),l=1,u=o.length;l<u;++l)s-=Math.abs(gT(o[l],t));break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],s+=Math.abs(gT(a[0],t)),c=1,h=a.length;c<h;++c)s-=Math.abs(gT(a[c],t));break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,u=d.length;l<u;++l)s+=LAe(d[l],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function wnt(i,e,t,n){n=n||jD;const r=Bc(i[1]),s=Bc(i[0]),o=e/n,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(t)),l=s+Math.atan2(Math.sin(t)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[Mve(l),Mve(a)]}function MAe(...i){console.warn(...i)}function XE(...i){console.error(...i)}let DP=!0;function IAe(i){DP=!(i===void 0?!0:i)}function N5(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function zD(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function OAe(i){pnt(i.getCode(),i),ob(i,i,N5)}function Ent(i){i.forEach(OAe)}function Lt(i){return typeof i=="string"?fnt(i):i||null}function ub(i,e,t,n){i=Lt(i);let r;const s=i.getPointResolutionFunc();if(s){if(r=s(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(r=r*o/rb[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=Nf(i,Lt("EPSG:4326"));if(a===zD&&o!=="degrees")r=e*i.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const c=kP(u.slice(0,2),u.slice(2,4)),h=kP(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const l=n?rb[n]:i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function LP(i){Ent(i),i.forEach(function(e){i.forEach(function(t){e!==t&&ob(e,t,N5)})})}function Cnt(i,e,t,n){i.forEach(function(r){e.forEach(function(s){ob(r,s,t),ob(s,r,n)})})}function $5(i,e){return i?typeof i=="string"?Lt(i):i:Lt(e)}function $ve(i){return function(e,t,n){const r=e.length;n=n!==void 0?n:2,t=t!==void 0?t:new Array(r);for(let s=0;s<r;s+=n){const o=i(e.slice(s,s+n)),a=o.length;for(let l=0,u=n;l<u;++l)t[s+l]=l>=a?e[s+l]:o[l]}return t}}function Snt(i,e,t,n){const r=Lt(i),s=Lt(e);ob(r,s,$ve(t)),ob(s,r,$ve(n))}function Tnt(i,e){return IAe(),Qb(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Bve(i,e){const t=Qb(i,e!==void 0?e:"EPSG:3857","EPSG:4326"),n=t[0];return(n<-180||n>180)&&(t[0]=Uh(n+180,360)-180),t}function ma(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Nf(i,e)===N5)&&t}function Nf(i,e){const t=i.getCode(),n=e.getCode();let r=wAe(t,n);return r||(r=zD),r}function Qh(i,e){const t=Lt(i),n=Lt(e);return Nf(t,n)}function Qb(i,e,t){return Qh(e,t)(i,void 0,i.length)}function PAe(i,e,t,n){const r=Qh(e,t);return ab(i,r,void 0,n)}let Ant=null;function Rnt(){return Ant}function B0(i,e){return i}function Os(i,e){return DP&&!Hu(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(DP=!1,MAe("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function mC(i,e){return i}function _u(i,e){return i}function jve(i,e,t){return function(n){let r,s;if(i.canWrapX()){const o=i.getExtent(),a=Di(o);n=n.slice(0),s=kAe(n,i,a),s&&(n[0]=n[0]-s*a),n[0]=Fi(n[0],o[0],o[2]),n[1]=Fi(n[1],o[1],o[3]),r=t(n)}else r=t(n);return s&&e.canWrapX()&&(r[0]+=s*Di(e.getExtent())),r}}function knt(){LP(Ove),LP(Fve),Cnt(Fve,Ove,unt,cnt)}knt();function zve(i,e,t){return function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+c,f=i[2]-l/2+c,p=i[1]+u/2+h,m=i[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),p>m&&(p=(m+p)/2,m=p);let y=Fi(n[0],d,f),v=Fi(n[1],p,m);if(o&&t&&r){const b=30*r;y+=-b*Math.log(1+Math.max(0,d-n[0])/b)+b*Math.log(1+Math.max(0,n[0]-f)/b),v+=-b*Math.log(1+Math.max(0,p-n[1])/b)+b*Math.log(1+Math.max(0,n[1]-m)/b)}return[y,v]}}function Dnt(i){return i}function B5(i,e,t,n){const r=Di(e)/t[0],s=Vr(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function j5(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),Fi(n,t/2,e*2)}function Lnt(i,e,t,n){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=i[0],u=i[i.length-1],c=t?B5(l,t,o,n):l;if(a)return e?j5(r,c,u):Fi(r,u,c);const h=Math.min(c,r),d=Math.floor($D(i,h,s));return i[d]>c&&d<i.length-1?i[d+1]:i[d]}}}function Mnt(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const c=r?B5(e,r,l,s):e;if(u)return n?j5(o,c,t):Fi(o,t,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(i)-h),f=-a*(.5-h)+.5,p=Math.min(c,o),m=Math.floor(Math.log(e/p)/Math.log(i)+f),y=Math.max(d,m),v=e/Math.pow(i,y);return Fi(v,t,c)}}}function Gve(i,e,t,n,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const u=n?B5(i,n,a,r):i;return!t||!l?Fi(s,e,u):j5(s,u,e)}}}function z5(i){if(i!==void 0)return 0}function Uve(i){if(i!==void 0)return i}function Int(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Ont(i){const e=i===void 0?Bc(5):i;return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function FAe(i){return Math.pow(i,3)}function ny(i){return 1-FAe(1-i)}function Pnt(i){return 3*i*i-2*i*i*i}function Fnt(i){return i}const G5=new Array(6);function Ss(){return[1,0,0,1,0,0]}function MP(i){return GD(i,1,0,0,1,0,0)}function e1(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=i[4],a=i[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5];return i[0]=t*l+r*u,i[1]=n*l+s*u,i[2]=t*c+r*h,i[3]=n*c+s*h,i[4]=t*d+r*f+o,i[5]=n*d+s*f+a,i}function GD(i,e,t,n,r,s,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i[4]=s,i[5]=o,i}function Nnt(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function fs(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function $nt(i,e){const t=Math.cos(e),n=Math.sin(e);return e1(i,GD(G5,t,n,-n,t,0,0))}function dE(i,e,t){return e1(i,GD(G5,e,0,0,t,0,0))}function U5(i,e,t){return e1(i,GD(G5,1,0,0,1,e,t))}function Tu(i,e,t,n,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return i[0]=n*u,i[1]=r*l,i[2]=-n*l,i[3]=r*u,i[4]=o*n*u-a*n*l+e,i[5]=o*r*l+a*r*u+t,i}function q5(i,e){const t=Bnt(e);sn(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*l-o*a)/t,i[5]=-(n*l-r*a)/t,i}function Bnt(i){return i[0]*i[3]-i[1]*i[2]}const qve=[1e6,1e6,1e6,1e6,2,2];function jnt(i){return"matrix("+i.map((t,n)=>Math.round(t*qve[n])/qve[n]).join(", ")+")"}function _g(i,e,t,n,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],u=i[a+1];s[o++]=r[0]*l+r[2]*u+r[4],s[o++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=o&&(s.length=o),s}function V5(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],c=s[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-u,p=i[d+1]-c;o[h++]=u+f*a-p*l,o[h++]=c+f*l+p*a;for(let m=d+2;m<d+n;++m)o[h++]=i[m]}return o&&o.length!=h&&(o.length=h),o}function znt(i,e,t,n,r,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-u;a[c++]=l+r*d,a[c++]=u+s*f;for(let p=h+2;p<h+n;++p)a[c++]=i[p]}return a&&a.length!=c&&(a.length=c),a}function Gnt(i,e,t,n,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let u=l+2;u<l+n;++u)o[a++]=i[u]}return o&&o.length!=a&&(o.length=a),o}const Vve=Ss();let H5=class extends lc{constructor(){super(),this.extent_=Wa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=vAe((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return hi()}closestPointXY(e,t,n,r){return hi()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return hi()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Zb(t),this.extentRevision_=this.getRevision()}return _nt(this.extent_,e)}rotate(e,t){hi()}scale(e,t,n){hi()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return hi()}getType(){return hi()}applyTransform(e){hi()}intersectsExtent(e){return hi()}translate(e,t){hi()}transform(e,t){const n=Lt(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),u=n.getWorldExtent(),c=Vr(u)/Vr(l);return Tu(Vve,u[0],u[3],c,-c,0,0,0),_g(s,0,s.length,a,Vve,o),Qh(n,t)(s,o,a)}:Qh(n,t);return this.applyTransform(r),this}},Unt=class extends H5{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return D5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return hi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=YE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){hi()}setLayout(e,t,n){let r;if(e)r=YE(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=ry(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();V5(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Ko(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();znt(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Gnt(n,0,n.length,r,e,t,n),this.changed()}}};function ry(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function YE(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function qnt(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return _g(n,0,n.length,r,e,t)}const ed=Unt;function Hve(i,e,t,n,r,s,o){const a=i[e],l=i[e+1],u=i[t]-a,c=i[t+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-a)*u+(s-l)*c)/(u*u+c*c);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=hu(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function W5(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],u=df(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function X5(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=W5(i,e,a,n,r),e=a}return r}function Vnt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=X5(i,e,a,n,r),e=a[a.length-1]}return r}function Y5(i,e,t,n,r,s,o,a,l,u,c){if(e==t)return u;let h,d;if(r===0){if(d=df(o,a,i[e],i[e+1]),d<u){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return u}c=c||[NaN,NaN];let f=e+n;for(;f<t;)if(Hve(i,f-n,f,n,o,a,c),d=df(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(s&&(Hve(i,t-n,e,n,o,a,c),d=df(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function Z5(i,e,t,n,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=Y5(i,e,f,n,r,s,o,a,l,u,c),e=f}return u}function Hnt(i,e,t,n,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=Z5(i,e,f,n,r,s,o,a,l,u,c),e=f[f.length-1]}return u}function NAe(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function yC(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function vC(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=yC(i,e,t[o],n);r[s++]=l,e=l}return r.length=s,r}function $Ae(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=vC(i,e,t[o],n,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function UD(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-n];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const p=i[d],m=i[d+1],y=i[h],v=i[h+1];for(let b=d+n;b<h;b+=n){const x=i[b],w=i[b+1],C=_Ae(x,w,p,m,y,v);C>f&&(c=b,f=C)}f>r&&(l[(c-e)/n]=1,d+n<c&&u.push(d,c),c+n<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*n],s[o++]=i[e+h*n+1]);return o}function BAe(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=UD(i,e,c,n,r,s,o),a.push(o),e=c}return o}function Jm(i,e){return e*Math.round(i/e)}function Wnt(i,e,t,n,r,s,o){if(e==t)return o;let a=Jm(i[e],r),l=Jm(i[e+1],r);e+=n,s[o++]=a,s[o++]=l;let u,c;do if(u=Jm(i[e],r),c=Jm(i[e+1],r),e+=n,e==t)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<t;){const h=Jm(i[e],r),d=Jm(i[e+1],r);if(e+=n,h==u&&d==c)continue;const f=u-a,p=c-l,m=h-a,y=d-l;if(f*y==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&y<p||p==y||p>0&&y>p)){u=h,c=d;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function K5(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=Wnt(i,e,c,n,r,s,o),a.push(o),e=c}return o}function Xnt(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l],h=[];o=K5(i,e,c,n,r,s,o,h),a.push(h),e=c[c.length-1]}return o}function of(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function ZE(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=of(i,e,l,n,r[s]),e=l}return r.length=s,r}function IP(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:ZE(i,e,l,n,r[s]),e=l[l.length-1]}return r.length=s,r}function jAe(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function zAe(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=jAe(i,e,a,n),e=a}return r}function Ynt(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=zAe(i,e,a,n),e=a[a.length-1]}return r}let KE=class OP extends ed{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new OP(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<iy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return jAe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=UD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new OP(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yC(this.flatCoordinates,0,e,this.stride),this.changed()}},ps=class GAe extends ed{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new GAe(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=df(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return A_(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return k5(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=NAe(this.flatCoordinates,0,e,this.stride),this.changed()}};function Znt(i,e,t,n,r){return!L5(r,function(o){return!s0(i,e,t,n,o[0],o[1])})}function s0(i,e,t,n,r,s){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const u=i[e],c=i[e+1];l<=s?c>s&&(u-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function J5(i,e,t,n,r,s){if(t.length===0||!s0(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(s0(i,t[o-1],t[o],n,r,s))return!1;return!0}function Knt(i,e,t,n,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(J5(i,e,l,n,r,s))return!0;e=l[l.length-1]}return!1}function Q5(i,e,t,n,r,s,o){let a,l,u,c,h,d,f;const p=r[s+1],m=[];for(let b=0,x=t.length;b<x;++b){const w=t[b];for(c=i[w-n],d=i[w-n+1],a=e;a<w;a+=n)h=i[a],f=i[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(u=(p-d)/(f-d)*(h-c)+c,m.push(u)),c=h,d=f}let y=NaN,v=-1/0;for(m.sort(Gh),c=m[0],a=1,l=m.length;a<l;++a){h=m[a];const b=Math.abs(h-c);b>v&&(u=(c+h)/2,J5(i,e,t,n,u,p)&&(y=u,v=b)),c=h}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,v),o):[y,p,v]}function UAe(i,e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Q5(i,e,l,n,r,2*o,s),e=l[l.length-1]}return s}function qAe(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function qD(i,e,t,n,r){const s=SAe(Wa(),i,e,t,n);return Hr(r,s)?ya(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:qAe(i,e,t,n,function(o,a){return bnt(r,o,a)}):!1}function Jnt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){if(qD(i,e,t[s],n,r))return!0;e=t[s]}return!1}function VAe(i,e,t,n,r){return!!(qD(i,e,t,n,r)||s0(i,e,t,n,r[0],r[1])||s0(i,e,t,n,r[0],r[3])||s0(i,e,t,n,r[2],r[1])||s0(i,e,t,n,r[2],r[3]))}function HAe(i,e,t,n,r){if(!VAe(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(Znt(i,t[s-1],t[s],n,r)&&!qD(i,t[s-1],t[s],n,r))return!1;return!0}function Qnt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(HAe(i,e,a,n,r))return!0;e=a[a.length-1]}return!1}function ert(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function VD(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function e4(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=VD(i,e,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function WAe(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!e4(i,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function MR(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=VD(i,e,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&ert(i,e,a,n),e=a}return e}function PP(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s)e=MR(i,e,t[s],n,r);return e}function XAe(i,e){const t=[];let n=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=VD(i,n,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,n=l}return t}let Io=class FP extends ed{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Hn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new FP(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<iy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(X5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Z5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return J5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return zAe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),MR(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ZE(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ko(this.getExtent());this.flatInteriorPoint_=Q5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ps(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new KE(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new KE(t.slice(s,l),e);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;e4(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=MR(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=K5(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new FP(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return HAe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=vC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}};function trt(i,e,t,n){t=t||32;const r=[];for(let s=0;s<t;++s)Hn(r,wnt(i,e,2*Math.PI*s/t,n));return r.push(r[0],r[1]),new Io(r,"XY",[r.length])}function IR(i){if(ld(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new Io(s,"XY",[s.length])}const fI=0;let Yu=class extends lc{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=$5(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&IAe(),e.center&&(e.center=Os(e.center,this.projection_)),e.extent&&(e.extent=_u(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ou)delete t[a];this.setProperties(t,!0);const n=nrt(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=irt(e),s=n.constraint,o=rrt(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=Os(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Os(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===t){n&&mT(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<t;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Pnt,callback:n};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=Uh(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}srt(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Ir.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ir.ANIMATING]>0}getInteracting(){return this.hints_[Ir.INTERACTING]>0}cancelAnimations(){this.setHint(Ir.ANIMATING,-this.hints_[Ir.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&mT(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=d+h*(p-d),v=f+h*(m-f);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?Uh(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(Ir.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&mT(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],F5(n,e-this.getRotation()),TAe(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&B0(e,this.getProjection())}getCenterInternal(){return this.get(ou.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return mC(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();sn(t,"The view center is not defined");const n=this.getResolution();sn(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return sn(r!==void 0,"The view rotation is not defined"),WE(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ou.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(_u(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Di(e)/t[0],r=Vr(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(ou.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return function(o){return Math.log(n/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=pI(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=$D(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Fi(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Fi(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(sn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){sn(!ld(e),"Cannot fit empty extent provided as `geometry`");const r=_u(e,this.getProjection());n=IR(r)}else if(e.getType()==="Circle"){const r=_u(e.getExtent(),this.getProjection());n=IR(r),n.rotate(this.getRotation(),Ko(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*n-s[h+1]*r,p=s[h]*r+s[h+1]*n;a=Math.min(a,f),l=Math.min(l,p),u=Math.max(u,f),c=Math.max(c,p)}return[a,l,u,c]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Ko(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*c,p=d[1]*h+d[0]*c,m=this.getConstrainedCenter([f,p],l),y=t.callback?t.callback:tb;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),mT(y,!0))}centerOn(e,t,n){this.centerOnInternal(Os(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(pI(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=pI(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=B0(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Os(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Os(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Os(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ou.ROTATION)!==r&&this.set(ou.ROTATION,r),this.get(ou.RESOLUTION)!==o&&(this.set(ou.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ou.CENTER)||!Hu(this.get(ou.CENTER),a))&&this.set(ou.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Hu(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:ny,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ir.INTERACTING,1)}endInteraction(e,t,n){n=n&&Os(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(Ir.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}};function mT(i,e){setTimeout(function(){i(e)},0)}function irt(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return zve(i.extent,i.constrainOnlyCenter,t)}const e=$5(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,zve(t,!1,!1)}return Dnt}function nrt(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:fI,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,c=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=$5(i.projection,"EPSG:3857"),f=d.getExtent();let p=i.constrainOnlyCenter,m=i.extent;if(!u&&!m&&d.isGlobal()&&(p=!1,m=f),i.resolutions!==void 0){const y=i.resolutions;t=y[o],n=y[a]!==void 0?y[a]:y[y.length-1],i.constrainResolution?e=Lnt(y,c,!p&&m,h):e=Gve(t,n,c,!p&&m,h)}else{const v=(f?Math.max(Di(f),Vr(f)):360*rb.degrees/d.getMetersPerUnit())/nb/Math.pow(2,fI),b=v/Math.pow(2,28-fI);t=i.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=v/Math.pow(l,a):n=b),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=Mnt(l,t,n,c,!p&&m,h):e=Gve(t,n,c,!p&&m,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function rrt(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?Ont():t===!1?Uve:typeof t=="number"?Int(t):Uve}return z5}function srt(i){return!(i.sourceCenter&&i.targetCenter&&!Hu(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function pI(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}let ort=class extends bAe{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(wr.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(wr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(gr(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Wi(e,qt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Yu?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return t4(r,t.viewState)&&(!s||Hr(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const r=e instanceof Yu?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(wr.MAP,e)}getMapInternal(){return this.get(wr.MAP)}setMap(e){this.mapPrecomposeKey_&&(gr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(gr(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Wi(e,So.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);sn(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=Wi(this,qt.CHANGE,e.render,e),this.changed())}setSource(e){this.set(wr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function t4(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const sy=ort;function art(i,e,t,n,r){YAe(i,e,t||0,n||i.length-1,r||lrt)}function YAe(i,e,t,n,r){for(;n>t;){if(n-t>600){var s=n-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),c=Math.max(t,Math.floor(e-o*l/s+u)),h=Math.min(n,Math.floor(e+(s-o)*l/s+u));YAe(i,e,c,h,r)}var d=i[e],f=t,p=n;for(lw(i,t,e),r(i[n],d)>0&&lw(i,t,n);f<p;){for(lw(i,f,p),f++,p--;r(i[f],d)<0;)f++;for(;r(i[p],d)>0;)p--}r(i[t],d)===0?lw(i,t,p):(p++,lw(i,p,n)),p<=e&&(t=p+1),e<=p&&(n=p-1)}}function lw(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function lrt(i,e){return i<e?-1:i>e?1:0}let _C=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!vT(e,t))return n;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;vT(e,l)&&(t.leaf?n.push(a):mI(e,l)?this._all(a,n):s.push(a))}t=s.pop()}return n}collides(e){let t=this.data;if(!vT(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(vT(e,o)){if(t.leaf||mI(e,o))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Pv([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,u;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),n.leaf){const c=urt(e,n.children,t);if(c!==-1)return n.children.splice(c,1),s.push(n),this._condense(s),this}!u&&!n.leaf&&mI(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],u=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const s=n-t+1;let o=this._maxEntries,a;if(s<=o)return a=Pv(e.slice(t,n+1)),hv(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Pv([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));Wve(e,t,n,u,this.compareMinX);for(let c=t;c<=n;c+=u){const h=Math.min(c+u-1,n);Wve(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return hv(a,this.toBBox),a}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],c=gI(u),h=drt(e,u)-c;h<o?(o=h,s=c<s?c:s,a=u):h===o&&c<s&&(s=c,a=u)}t=a||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Fw(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const n=e[t],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=Pv(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,hv(n,this.toBBox),hv(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Pv([e,t]),this.data.height=e.height+1,this.data.leaf=!1,hv(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,s=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=Pw(e,0,a,this.toBBox),u=Pw(e,a,n,this.toBBox),c=frt(l,u),h=gI(l)+gI(u);c<s?(s=c,r=a,o=h<o?h:o):c===s&&h<o&&(o=h,r=a)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:crt,s=e.leaf?this.compareMinY:hrt,o=this._allDistMargin(e,t,n,r),a=this._allDistMargin(e,t,n,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const s=this.toBBox,o=Pw(e,0,t,s),a=Pw(e,n-t,n,s);let l=yT(o)+yT(a);for(let u=t;u<n-t;u++){const c=e.children[u];Fw(o,e.leaf?s(c):c),l+=yT(o)}for(let u=n-t-1;u>=t;u--){const c=e.children[u];Fw(a,e.leaf?s(c):c),l+=yT(a)}return l}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)Fw(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():hv(e[t],this.toBBox)}};function urt(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function hv(i,e){Pw(i,0,i.children.length,e,i)}function Pw(i,e,t,n,r){r||(r=Pv(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];Fw(r,i.leaf?n(o):o)}return r}function Fw(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function crt(i,e){return i.minX-e.minX}function hrt(i,e){return i.minY-e.minY}function gI(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function yT(i){return i.maxX-i.minX+(i.maxY-i.minY)}function drt(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function frt(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-n)}function mI(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function vT(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Pv(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Wve(i,e,t,n,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;art(i,o,e,t,r),s.push(e,o,o,t)}}const Ut={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Xve(i){return i[0]>0&&i[1]>0}function ZAe(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Qr(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}let KAe=class JAe{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Qr(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new JAe({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return hi()}getImage(e){return hi()}getHitDetectionImage(){return hi()}getPixelRatio(e){return 1}getImageState(){return hi()}getImageSize(){return hi()}getOrigin(){return hi()}getSize(){return hi()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Qr(e)}listenImageChange(e){hi()}load(){hi()}unlistenImageChange(e){hi()}ready(){return Promise.resolve()}};const cb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var ko={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};ko.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};ko.max=ko.whitepoint[2].D65;ko.rgb=function(i,e){e=e||ko.whitepoint[2].E;var t=i[0]/e[0],n=i[1]/e[1],r=i[2]/e[2],s,o,a;return s=t*3.240969941904521+n*-1.537383177570093+r*-.498610760293,o=t*-.96924363628087+n*1.87596750150772+r*.041555057407175,a=t*.055630079696993+n*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};cb.xyz=function(i,e){var t=i[0]/255,n=i[1]/255,r=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=t*.41239079926595+n*.35758433938387+r*.18048078840183,o=t*.21263900587151+n*.71516867876775+r*.072192315360733,a=t*.019330818715591+n*.11919477979462+r*.95053215224966;return e=e||ko.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const i4={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var n,r,s,o,a,l,u,c,h,d,f,p,m;if(s=i[0],o=i[1],a=i[2],s===0)return[0,0,0];var y=.0011070564598794539;return e=e||"D65",t=t||2,h=ko.whitepoint[t][e][0],d=ko.whitepoint[t][e][1],f=ko.whitepoint[t][e][2],p=4*h/(h+15*d+3*f),m=9*d/(h+15*d+3*f),n=o/(13*s)+p||0,r=a/(13*s)+m||0,u=s>8?d*Math.pow((s+16)/116,3):d*s*y,l=u*9*n/(4*r)||0,c=u*(12-3*n-20*r)/(4*r)||0,[l,u,c]}};ko.luv=function(i,e,t){var n,r,s,o,a,l,u,c,h,d,f,p,m,y=.008856451679035631,v=903.2962962962961;e=e||"D65",t=t||2,h=ko.whitepoint[t][e][0],d=ko.whitepoint[t][e][1],f=ko.whitepoint[t][e][2],p=4*h/(h+15*d+3*f),m=9*d/(h+15*d+3*f),l=i[0],u=i[1],c=i[2],n=4*l/(l+15*u+3*c)||0,r=9*u/(l+15*u+3*c)||0;var b=u/d;return s=b<=y?v*b:116*Math.pow(b,1/3)-16,o=13*s*(n-p),a=13*s*(r-m),[s,o,a]};var n4={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],n=i[2],r,s,o;return o=n/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o),[e,r,s]},xyz:function(i){return i4.xyz(n4.luv(i))}};i4.lchuv=function(i){var e=i[0],t=i[1],n=i[2],r=Math.sqrt(t*t+n*n),s=Math.atan2(n,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};ko.lchuv=function(i){return i4.lchuv(ko.luv(i))};var Yve={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function prt(i){var c,h;var e,t=[],n=1,r;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),sge[i])t=sge[i].slice(),r="rgb";else if(i==="transparent")n=0,r="rgb",t=[0,0,0];else if(i[0]==="#"){var s=i.slice(1),o=s.length,a=o<=4;n=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(n=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(n=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var l=e[1];r=l.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:r==="rgb"?d*255:r[0]==="h"||r[0]==="l"&&!f?d*100:r==="lab"?d*125:r==="lch"?f<2?d*150:d*360:r[0]==="o"&&!f?d:r==="oklab"?d*.4:r==="oklch"?f<2?d*.4:d*360:d;if(r[f]==="h"||f===2&&r[r.length-1]==="h"){if(Yve[d]!==void 0)return Yve[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),n=t.length>u?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),r=((h=(c=i.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:t,alpha:n}}const yI={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,n=i[2]/100,r,s,o,a,l,u=0;if(t===0)return l=n*255,[l,l,l];for(s=n<.5?n*(1+t):n+t-n*t,r=2*n-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[u++]=l*255;return a}};cb.hsl=function(i){var e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=s-r,a,l,u;return s===r?a=0:e===s?a=(t-n)/o:t===s?a=2+(n-e)/o:n===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(r+s)/2,s===r?l=0:u<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,u*100]};function QAe(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=prt(i);if(!t.space)return[];const n=t.space[0]==="h"?yI.min:cb.min,r=t.space[0]==="h"?yI.max:cb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),r[2]),t.space[0]==="h"&&(e=yI.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function grt(i){return typeof i=="string"?i:s4(i)}const mrt=1024,uw={};let vI=0;function yrt(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function Zve(i){const e=ko.lchuv(cb.xyz(i));return e[3]=i[3],e}function vrt(i){const e=ko.rgb(n4.xyz(i));return e[3]=i[3],e}function r4(i){if(uw.hasOwnProperty(i))return uw[i];if(vI>=mrt){let t=0;for(const n in uw)t++&3||(delete uw[n],--vI)}const e=QAe(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+i+'" as color');return eRe(e),uw[i]=e,++vI,e}function Yc(i){return Array.isArray(i)?i:r4(i)}function eRe(i){return i[0]=Fi(i[0]+.5|0,0,255),i[1]=Fi(i[1]+.5|0,0,255),i[2]=Fi(i[2]+.5|0,0,255),i[3]=Fi(i[3],0,1),i}function s4(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}function _rt(i){try{return r4(i),!0}catch{return!1}}const Mg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",brt=Mg.includes("firefox"),xrt=Mg.includes("safari")&&!Mg.includes("chrom"),wrt=xrt&&(Mg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Mg)),Ert=Mg.includes("webkit")&&!Mg.includes("edge"),o4=Mg.includes("macintosh"),tRe=typeof devicePixelRatio<"u"?devicePixelRatio:1,iRe=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,a4=typeof Image<"u"&&Image.prototype.decode,Crt=typeof createImageBitmap=="function",nRe=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function Xr(i,e,t,n){let r;return t&&t.length?r=t.shift():iRe?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let _I;function OR(){return _I||(_I=Xr(1,1)),_I}function j0(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function Srt(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function Trt(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function hb(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function PR(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function rRe(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function Art(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],s=e[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}let HD=class extends Xb{constructor(e,t,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=typeof r=="function"?Ut.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(qt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ut.IDLE&&this.loader){this.state=Ut.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;R5(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=Ut.LOADED}).catch(n=>{this.state=Ut.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}};function Rrt(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[ib(n,qt.LOAD,function(){o=!0,s||e()})];return n.src&&a4?(s=!0,n.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(ib(n,qt.ERROR,t)),function(){r=!1,a.forEach(gr)}}function krt(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s),e&&(i.src=e)})}function sRe(i,e){return e&&(i.src=e),i.src&&a4?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):krt(i)}function Yg(i,e){return e&&(i.src=e),i.src&&a4&&Crt?i.decode().then(()=>createImageBitmap(i)).catch(t=>{if(i.complete&&i.width)return i;throw t}):sRe(i)}let Drt=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=bI(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=bI(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,s){const o=bI(e,t,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===Ut.IDLE&&r.load(),r.getImageState()===Ut.LOADING?r.ready().then(()=>{this.patternCache_[o]=OR().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=OR().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function bI(i,e,t){const n=t?Yc(t):"null";return e+":"+i+":"+n}const Mh=new Drt;let cw=null,Lrt=class extends Xb{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Ut.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ut.LOADED){cw||(cw=Xr(1,1,void 0,{willReadFrequently:!0})),cw.drawImage(this.image_,0,0);try{cw.getImageData(0,0,1,1),this.tainted_=!1}catch{cw=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(qt.CHANGE)}handleImageError_(){this.imageState_=Ut.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ut.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Xr(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ut.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ut.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&sRe(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ut.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const r=n.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=grt(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===Ut.LOADED||this.imageState_===Ut.ERROR?e():this.addEventListener(qt.CHANGE,function t(){(this.imageState_===Ut.LOADED||this.imageState_===Ut.ERROR)&&(this.removeEventListener(qt.CHANGE,t),e())})})),this.ready_}};function l4(i,e,t,n,r,s){let o=e===void 0?void 0:Mh.get(e,t,r);return o||(o=new Lrt(i,i&&"src"in i?i.src||void 0:e,t,n,r),Mh.set(e,t,r,o,s)),s&&o&&!Mh.getPattern(e,t,r)&&Mh.set(e,t,r,o,s),o}function Ih(i){return i?Array.isArray(i)?s4(i):typeof i=="object"&&"src"in i?Mrt(i):i:null}function Mrt(i){if(!i.offset||!i.size)return Mh.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Mh.getPattern(e,void 0,i.color);if(t)return t;const n=Mh.get(i.src,"anonymous",null);if(n.getImageState()!==Ut.LOADED)return null;const r=Xr(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),l4(r.canvas,e,void 0,Ut.LOADED,i.color,!0),Mh.getPattern(e,void 0,i.color)}const _T="ol-hidden",Irt="ol-selectable",td="ol-unselectable",Kve="ol-unsupported",oy="ol-control",FR="ol-collapsed",Ort=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Jve=["style","variant","weight","size","lineHeight","family"],oRe=function(i){const e=i.match(Ort);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=Jve.length;n<r;++n){const s=e[n+1];s!==void 0&&(t[Jve[n]]=s)}return t.families=t.family.split(/,\s?/),t},aRe="10px sans-serif",Ol="#000",db="round",ff=[],pf=0,fb="round",JE=10,QE="#000",e2="center",NR="middle",o0=[0,0,0,0],t2=1,Vd=new lc;let Fv=null,NP;const $P={},Prt=function(){const e="32px ",t=["monospace","serif"],n=t.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let d=!0;for(let f=0;f<n;++f){const p=t[f];if(o=$R(u+" "+c+" "+e+p,r),h!=p){const m=$R(u+" "+c+" "+e+h+","+p,r);d=d&&m!=o}}return!!d}function l(){let u=!0;const c=Vd.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];Vd.get(f)<100&&(a.apply(this,f.split(`
`))?(Wb($P),Fv=null,NP=void 0,Vd.set(f,100)):(Vd.set(f,Vd.get(f)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const c=oRe(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const p=h[d],m=c.style+`
`+c.weight+`
`+p;Vd.get(m)===void 0&&(Vd.set(m,100,!0),a(c.style,c.weight,p)||(Vd.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),Frt=function(){let i;return function(e){let t=$P[e];if(t==null){if(iRe){const n=oRe(e),r=lRe(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);$P[e]=t}return t}}();function lRe(i,e){return Fv||(Fv=Xr(1,1)),i!=NP&&(Fv.font=i,NP=Fv.font),Fv.measureText(e)}function $R(i,e){return lRe(i,e).width}function Qve(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,s)=>Math.max(r,$R(i,s)),0);return t[e]=n,n}function Nrt(i,e){const t=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||i.font,f=$R(d,h);t.push(f),o+=f;const p=Frt(d);n.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:n,lineWidths:r}}function $rt(i,e,t,n,r,s,o,a,l,u,c){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=h=>h.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,u),i.scale(c[0],c[1]),Brt(n,i)):c[0]<0||c[1]<0?(i.translate(l,u),i.scale(c[0],c[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,u,o*c[0],a*c[1]),i.restore()}function Brt(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}let uRe=class cRe extends KAe{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ut.LOADING:Ut.LOADED,this.imageState_===Ut.LOADING&&this.ready().then(()=>this.imageState_=Ut.LOADED),this.render()}clone(){const e=this.getScale(),t=new cRe({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,r=Xr(n.size*e,n.size*e);this.draw_(n,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const D=r;r=s,s=D}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=r-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,p=t/2*(c/h),y=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return y*2;const v=r*Math.sin(a),b=Math.sqrt(r*r-v*v),x=s-b,C=Math.sqrt(v*v+x*x)/v;if(C<=n){const D=C*t/2-s-r;return 2*Math.max(y,D)}return y*2}createRenderOptions(){let e=db,t=fb,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=Ih(this.stroke_.getColor()??QE),a=this.stroke_.getWidth()??t2,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??fb,e=this.stroke_.getLineCap()??db,n=this.stroke_.getMiterLimit()??JE);const l=this.calculateLineJoinSize_(t,a,n),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Ol),t.fillStyle=Ih(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Yc(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=Xr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,u=a%2===0?n:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ol,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},u4=class hRe extends uRe{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new hRe({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}},Zc=class dRe{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new dRe({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=l4(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ut.IDLE&&t.load(),t.getImageState()===Ut.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},ec=class fRe{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new fRe({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},Do=class pRe{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=e_e,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new pRe({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=e_e,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function jrt(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(sn(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let xI=null;function gRe(i,e){if(!xI){const t=new Zc({color:"rgba(255,255,255,0.4)"}),n=new ec({color:"#3399CC",width:1.25});xI=[new Do({image:new u4({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return xI}function mRe(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new Do({fill:new Zc({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Do({stroke:new ec({color:e,width:n+2})}),new Do({stroke:new ec({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Do({image:new u4({radius:n*2,fill:new Zc({color:t}),stroke:new ec({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function e_e(i){return i.getGeometry()}function t_e(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}let zrt=class yRe extends KAe{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;sn(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Gt(o)),sn(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),sn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Ut.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Ut.LOADED:Ut.IDLE:l=Ut.LOADING:l=Ut.LOADED),this.color_=e.color!==void 0?Yc(e.color):null,this.iconImage_=l4(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(t_e(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(t_e(u,c,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new yRe({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ut.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ut.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(qt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(qt.CHANGE,e)}ready(){return this.iconImage_.ready()}};const WD=zrt,Grt="#333";let i2=class vRe{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Qr(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Zc({color:Grt}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new vRe({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Qr(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},ay=0;const ly=0,rs=1<<ay++,Tt=1<<ay++,Xo=1<<ay++,Pr=1<<ay++,_a=1<<ay++,jc=1<<ay++,Pa=Math.pow(2,ay)-1,_Re={[rs]:"boolean",[Tt]:"number",[Xo]:"string",[Pr]:"color",[_a]:"number[]",[jc]:"size"},Urt=Object.keys(_Re).map(Number).sort(Gh);function Lo(i){const e=[];for(const t of Urt)qrt(i,t)&&e.push(_Re[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function qrt(i,e){return(i&e)===e}function zc(i,e){return!!(i&e)}function bC(i,e){return i===e}let rg=class{constructor(e,t){this.type=e,this.value=t}},bRe=class{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}};function c4(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function Or(i,e,t){switch(typeof i){case"boolean":return new rg(rs,i);case"number":return new rg(t===jc?jc:Tt,i);case"string":{let r=Xo;return _rt(i)&&(r|=Pr),bC(r&t,ly)||(r&=t),new rg(r,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return ist(i,e,t);for(const r of i)if(typeof r!="number")throw new Error("Expected an array of numbers");let n=_a;return i.length===2?n|=jc:(i.length===3||i.length===4)&&(n|=Pr),t&&(n&=t),new rg(n,i)}const qe={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},Vrt={[qe.Get]:Yi(Pa,bn(1,1/0),Hrt),[qe.Var]:Yi(([i])=>i.type,bn(1,1),Wrt),[qe.Id]:Yi(Tt|Xo,hw,Xrt),[qe.Concat]:Yi(Xo,bn(2,1/0),sr(Pa)),[qe.GeometryType]:Yi(Xo,hw,Yrt),[qe.Resolution]:Yi(Tt,hw),[qe.Zoom]:Yi(Tt,hw),[qe.Time]:Yi(Tt,hw),[qe.Any]:Yi(rs,bn(2,1/0),sr(rs)),[qe.All]:Yi(rs,bn(2,1/0),sr(rs)),[qe.Not]:Yi(rs,bn(1,1),sr(rs)),[qe.Equal]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.NotEqual]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.GreaterThan]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.GreaterThanOrEqualTo]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.LessThan]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.LessThanOrEqualTo]:Yi(rs,bn(2,2),sr(Pa),Ep),[qe.Multiply]:Yi(i=>{let e=Tt|Pr;for(let t=0;t<i.length;t++)e&=i[t].type;return e},bn(2,1/0),sr(Tt|Pr),Ep),[qe.Coalesce]:Yi(i=>{let e=Pa;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},bn(2,1/0),sr(Pa),Ep),[qe.Divide]:Yi(Tt,bn(2,2),sr(Tt)),[qe.Add]:Yi(Tt,bn(2,1/0),sr(Tt)),[qe.Subtract]:Yi(Tt,bn(2,2),sr(Tt)),[qe.Clamp]:Yi(Tt,bn(3,3),sr(Tt)),[qe.Mod]:Yi(Tt,bn(2,2),sr(Tt)),[qe.Pow]:Yi(Tt,bn(2,2),sr(Tt)),[qe.Abs]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Floor]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Ceil]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Round]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Sin]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Cos]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Atan]:Yi(Tt,bn(1,2),sr(Tt)),[qe.Sqrt]:Yi(Tt,bn(1,1),sr(Tt)),[qe.Match]:Yi(i=>{let e=Pa;for(let t=2;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},bn(4,1/0),i_e,Krt),[qe.Between]:Yi(rs,bn(3,3),sr(Tt)),[qe.Interpolate]:Yi(i=>{let e=Pr|Tt;for(let t=3;t<i.length;t+=2)e&=i[t].type;return e},bn(6,1/0),i_e,Jrt),[qe.Case]:Yi(i=>{let e=Pa;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},bn(3,1/0),Zrt,Qrt),[qe.In]:Yi(rs,bn(2,2),est),[qe.Number]:Yi(Tt,bn(1,1/0),sr(Pa)),[qe.String]:Yi(Xo,bn(1,1/0),sr(Pa)),[qe.Array]:Yi(i=>i.length===2?_a|jc:i.length===3||i.length===4?_a|Pr:_a,bn(1,1/0),sr(Tt)),[qe.Color]:Yi(Pr,bn(1,4),sr(Tt)),[qe.Band]:Yi(Tt,bn(1,3),sr(Tt)),[qe.Palette]:Yi(Pr,bn(2,2),tst),[qe.ToString]:Yi(Xo,bn(1,1),sr(rs|Tt|Xo|Pr))};function Hrt(i,e){const t=[];for(let n=1,r=i.length;n<r;++n){const s=Or(i[n],e);if(t.push(s),!(s instanceof rg))throw new Error("Expected a literal argument for get operation");if(n>1){if(typeof s.value!="string"&&typeof s.value!="number")throw new Error("Expected key or array index of a get operation to be a string or number");continue}if(typeof s.value!="string")throw new Error("Expected the attribute name of a get operation to be a string");e.properties.add(String(s.value))}return t}function Wrt(i,e,t,n){const r=i[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new rg(Pa,r)];const s=e.style.variables[r],o=Or(s,e);if(o.value=r,n&&!zc(n,o.type))throw new Error(`The variable ${r} has type ${Lo(o.type)} but the following type was expected: ${Lo(n)}`);return[o]}function Xrt(i,e){e.featureId=!0}function Yrt(i,e){e.geometryType=!0}function hw(i,e){const t=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function bn(i,e){return function(t,n){const r=t[0],s=t.length-1;if(i===e){if(s!==i){const o=i===1?"":"s";throw new Error(`Expected ${i} argument${o} for ${r}, got ${s}`)}}else if(s<i||s>e){const o=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function sr(i){return function(e,t){const n=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Or(e[o+1],t);if(!zc(i,a.type)){const l=Lo(i),u=Lo(a.type);throw new Error(`Unexpected type for argument ${o} of ${n} operation, got ${l} but expected ${u}`)}a.type&=i,s[o]=a}return s}}function Ep(i,e,t){const n=i[0],r=i.length-1;let s=Pa;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===ly)throw new Error(`No common type could be found for arguments of ${n} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Or(i[a+1],e,s);return o}function Zrt(i,e){const t=i[0],n=i.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function i_e(i,e){const t=i[0],n=i.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function Krt(i,e,t,n){const r=i.length-1;let o=Or(i[1],e).type;const a=Or(i[i.length-1],e,n);let l=n!==void 0?n&a.type:a.type;const u=new Array(r-2);for(let h=0;h<r-2;h+=2){const d=Or(i[h+2],e),f=Or(i[h+3],e,n);o&=d.type,l&=f.type,u[h]=d,u[h+1]=f}const c=Xo|Tt|rs;if(!zc(c,o))throw new Error(`Expected an input of type ${Lo(c)} for the interpolate operation, got ${Lo(o)} instead`);if(o&=c,bC(l,ly))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let h=0;h<r-2;h+=2){const d=Or(i[h+2],e,o),f=Or(i[h+3],e,l);u[h]=d,u[h+1]=f}return[Or(i[1],e,o),...u,Or(i[i.length-1],e,l)]}function Jrt(i,e,t,n){const r=i[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Or(s,e);let o=Or(i[2],e);if(!zc(Tt,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Lo(o.type)} instead`);o=Or(i[2],e,Tt);const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){let u=Or(i[l+3],e);if(!zc(Tt,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Lo(u.type)} at position ${l+2} instead`);let c=Or(i[l+4],e);if(!zc(Tt|Pr,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Lo(c.type)} at position ${l+3} instead`);u=Or(i[l+3],e,Tt),c=Or(i[l+4],e,Tt|Pr),a[l]=u,a[l+1]=c}return[s,o,...a]}function Qrt(i,e,t,n){const r=Or(i[i.length-1],e,n);let s=n!==void 0?n&r.type:r.type;const o=new Array(i.length-1);for(let a=0;a<o.length-1;a+=2){const l=Or(i[a+1],e),u=Or(i[a+2],e,n);if(!zc(rs,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Lo(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(bC(s,ly))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let a=0;a<o.length-1;a+=2)o[a+1]=Or(i[a+2],e,s);return o[o.length-1]=Or(i[i.length-1],e,s),o}function est(i,e){let t=i[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let n=Xo|Tt;const r=new Array(t.length);for(let o=0;o<r.length;o++){const a=Or(t[o],e);n&=a.type,r[o]=a}if(bC(n,ly))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[Or(i[1],e,n),...r]}function tst(i,e){const t=Or(i[1],e,Tt);if(t.type!==Tt)throw new Error(`The first argument of palette must be an number, got ${Lo(t.type)} instead`);const n=i[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const r=new Array(n.length);for(let s=0;s<r.length;s++){const o=Or(n[s],e,Pr);if(!(o instanceof rg))throw new Error(`The palette color at index ${s} must be a literal value`);if(!zc(o.type,Pr))throw new Error(`The palette color at index ${s} should be of type color, got ${Lo(o.type)} instead`);r[s]=o}return[t,...r]}function Yi(i,...e){return function(t,n,r){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,n,o,r)||o;let a=typeof i=="function"?i(o):i;if(r!==void 0){if(!zc(a,r))throw new Error(`The following expression was expected to return ${Lo(r)}, but returns ${Lo(a)} instead: ${JSON.stringify(t)}`);a&=r}if(a===ly)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new bRe(a,s,...o)}}function ist(i,e,t){const n=i[0],r=Vrt[n];if(!r)throw new Error(`Unknown operator: ${n}`);return r(i,e,t)}function h4(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return h4(i.getGeometries()[0]);default:return""}}function xRe(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function $f(i,e,t){const n=Or(i,t);if(!zc(e,n.type)){const r=Lo(e),s=Lo(n.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Kc(n)}function Kc(i,e){if(i instanceof rg){if(i.type===Pr&&typeof i.value=="string"){const n=r4(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case qe.Number:case qe.String:case qe.Coalesce:return nst(i);case qe.Get:case qe.Var:return rst(i);case qe.Id:return n=>n.featureId;case qe.GeometryType:return n=>n.geometryType;case qe.Concat:{const n=i.args.map(r=>Kc(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case qe.Resolution:return n=>n.resolution;case qe.Any:case qe.All:case qe.Between:case qe.In:case qe.Not:return ost(i);case qe.Equal:case qe.NotEqual:case qe.LessThan:case qe.LessThanOrEqualTo:case qe.GreaterThan:case qe.GreaterThanOrEqualTo:return sst(i);case qe.Multiply:case qe.Divide:case qe.Add:case qe.Subtract:case qe.Clamp:case qe.Mod:case qe.Pow:case qe.Abs:case qe.Floor:case qe.Ceil:case qe.Round:case qe.Sin:case qe.Cos:case qe.Atan:case qe.Sqrt:return ast(i);case qe.Case:return lst(i);case qe.Match:return ust(i);case qe.Interpolate:return cst(i);case qe.ToString:return hst(i);default:throw new Error(`Unsupported operator ${t}`)}}function nst(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Kc(i.args[s]);switch(t){case qe.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case qe.Number:case qe.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function rst(i,e){const n=i.args[0].value;switch(i.operator){case qe.Get:return r=>{const s=i.args;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const c=s[a].value;o=o[c]}return o};case qe.Var:return r=>r.variables[n];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function sst(i,e){const t=i.operator,n=Kc(i.args[0]),r=Kc(i.args[1]);switch(t){case qe.Equal:return s=>n(s)===r(s);case qe.NotEqual:return s=>n(s)!==r(s);case qe.LessThan:return s=>n(s)<r(s);case qe.LessThanOrEqualTo:return s=>n(s)<=r(s);case qe.GreaterThan:return s=>n(s)>r(s);case qe.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function ost(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Kc(i.args[s]);switch(t){case qe.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case qe.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case qe.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case qe.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case qe.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function ast(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Kc(i.args[s]);switch(t){case qe.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case qe.Divide:return s=>r[0](s)/r[1](s);case qe.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case qe.Subtract:return s=>r[0](s)-r[1](s);case qe.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case qe.Mod:return s=>r[0](s)%r[1](s);case qe.Pow:return s=>Math.pow(r[0](s),r[1](s));case qe.Abs:return s=>Math.abs(r[0](s));case qe.Floor:return s=>Math.floor(r[0](s));case qe.Ceil:return s=>Math.ceil(r[0](s));case qe.Round:return s=>Math.round(r[0](s));case qe.Sin:return s=>Math.sin(r[0](s));case qe.Cos:return s=>Math.cos(r[0](s));case qe.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case qe.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function lst(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Kc(i.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(n[s](r))return n[s+1](r);return n[t-1](r)}}function ust(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Kc(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function cst(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Kc(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let u=2;u<t;u+=2){const c=n[u](r);let h=n[u+1](r);const d=Array.isArray(h);if(d&&(h=yrt(h)),c>=o)return u===2?h:d?dst(s,o,a,l,c,h):Nw(s,o,a,l,c,h);a=c,l=h}return l}}function hst(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Kc(i.args[s]);switch(t){case qe.ToString:return s=>{const o=r[0](s);return i.args[0].type===Pr?s4(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Nw(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+l*(s-n)}function dst(i,e,t,n,r,s){if(r-t===0)return n;const a=Zve(n),l=Zve(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[Nw(i,e,t,a[0],r,l[0]),Nw(i,e,t,a[1],r,l[1]),a[2]+Nw(i,e,t,0,r,u),Nw(i,e,t,n[3],r,s[3])];return eRe(vrt(c))}function fst(i){return!0}function pst(i){const e=c4(),t=gst(i,e),n=xRe();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return e.geometryType&&(n.geometryType=h4(r.getGeometry())),t(n)}}function n_e(i){const e=c4(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=BP(i[o],e);const r=xRe(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<t;++u){const c=n[u](r);c&&(s[l]=c,l+=1)}return s.length=l,s}}function gst(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?$f(s.filter,rs,e):fst;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=BP(s.style[u],e)}else a=[BP(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=n[a].filter;if(l(r)&&!(i[a].else&&o)){o=!0;for(const u of n[a].styles){const c=u(r);c&&s.push(c)}}}return s}}function BP(i,e){const t=n2(i,"",e),n=r2(i,"",e),r=mst(i,e),s=yst(i,e),o=Bl(i,"z-index",e);if(!t&&!n&&!r&&!s&&!Cf(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Do;return function(l){let u=!0;if(t){const c=t(l);c&&(u=!1),a.setFill(c)}if(n){const c=n(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function n2(i,e,t){let n;if(e+"fill-pattern-src"in i?n=xst(i,e+"fill-",t):n=d4(i,e+"fill-color",t),!n)return null;const r=new Zc;return function(s){const o=n(s);return o==="none"?null:(r.setColor(o),r)}}function r2(i,e,t){const n=Bl(i,e+"stroke-width",t),r=d4(i,e+"stroke-color",t);if(!n&&!r)return null;const s=Yd(i,e+"stroke-line-cap",t),o=Yd(i,e+"stroke-line-join",t),a=wRe(i,e+"stroke-line-dash",t),l=Bl(i,e+"stroke-line-dash-offset",t),u=Bl(i,e+"stroke-miter-limit",t),c=new ec;return function(h){if(r){const d=r(h);if(d==="none")return null;c.setColor(d)}if(n&&c.setWidth(n(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function mst(i,e){const t="text-",n=Yd(i,t+"value",e);if(!n)return null;const r=n2(i,t,e),s=n2(i,t+"background-",e),o=r2(i,t,e),a=r2(i,t+"background-",e),l=Yd(i,t+"font",e),u=Bl(i,t+"max-angle",e),c=Bl(i,t+"offset-x",e),h=Bl(i,t+"offset-y",e),d=s2(i,t+"overflow",e),f=Yd(i,t+"placement",e),p=Bl(i,t+"repeat",e),m=XD(i,t+"scale",e),y=s2(i,t+"rotate-with-view",e),v=Bl(i,t+"rotation",e),b=Yd(i,t+"align",e),x=Yd(i,t+"justify",e),w=Yd(i,t+"baseline",e),C=wRe(i,t+"padding",e),D=YD(i,t+"declutter-mode"),R=new i2({declutterMode:D});return function(A){if(R.setText(n(A)),r&&R.setFill(r(A)),s&&R.setBackgroundFill(s(A)),o&&R.setStroke(o(A)),a&&R.setBackgroundStroke(a(A)),l&&R.setFont(l(A)),u&&R.setMaxAngle(u(A)),c&&R.setOffsetX(c(A)),h&&R.setOffsetY(h(A)),d&&R.setOverflow(d(A)),f){const L=f(A);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(L)}if(p&&R.setRepeat(p(A)),m&&R.setScale(m(A)),y&&R.setRotateWithView(y(A)),v&&R.setRotation(v(A)),b){const L=b(A);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(L)}if(x){const L=x(A);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(L)}if(w){const L=w(A);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(L)}return C&&R.setPadding(C(A)),R}}function yst(i,e){return"icon-src"in i?vst(i,e):"shape-points"in i?_st(i,e):"circle-radius"in i?bst(i,e):null}function vst(i,e){const t="icon-",n=t+"src",r=ERe(i[n],n),s=BR(i,t+"anchor",e),o=XD(i,t+"scale",e),a=Bl(i,t+"opacity",e),l=BR(i,t+"displacement",e),u=Bl(i,t+"rotation",e),c=s2(i,t+"rotate-with-view",e),h=s_e(i,t+"anchor-origin"),d=o_e(i,t+"anchor-x-units"),f=o_e(i,t+"anchor-y-units"),p=Sst(i,t+"color"),m=Est(i,t+"cross-origin"),y=Cst(i,t+"offset"),v=s_e(i,t+"offset-origin"),b=jR(i,t+"width"),x=jR(i,t+"height"),w=wst(i,t+"size"),C=YD(i,t+"declutter-mode"),D=new WD({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:m,offset:y,offsetOrigin:v,height:x,width:b,size:w,declutterMode:C});return function(R){return a&&D.setOpacity(a(R)),l&&D.setDisplacement(l(R)),u&&D.setRotation(u(R)),c&&D.setRotateWithView(c(R)),o&&D.setScale(o(R)),s&&D.setAnchor(s(R)),D}}function _st(i,e){const t="shape-",n=t+"points",r=t+"radius",s=jP(i[n],n),o=jP(i[r],r),a=n2(i,t,e),l=r2(i,t,e),u=XD(i,t+"scale",e),c=BR(i,t+"displacement",e),h=Bl(i,t+"rotation",e),d=s2(i,t+"rotate-with-view",e),f=jR(i,t+"radius2"),p=jR(i,t+"angle"),m=YD(i,t+"declutter-mode"),y=new uRe({points:s,radius:o,radius2:f,angle:p,declutterMode:m});return function(v){return a&&y.setFill(a(v)),l&&y.setStroke(l(v)),c&&y.setDisplacement(c(v)),h&&y.setRotation(h(v)),d&&y.setRotateWithView(d(v)),u&&y.setScale(u(v)),y}}function bst(i,e){const t="circle-",n=n2(i,t,e),r=r2(i,t,e),s=Bl(i,t+"radius",e),o=XD(i,t+"scale",e),a=BR(i,t+"displacement",e),l=Bl(i,t+"rotation",e),u=s2(i,t+"rotate-with-view",e),c=YD(i,t+"declutter-mode"),h=new u4({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),n&&h.setFill(n(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function Bl(i,e,t){if(!(e in i))return;const n=$f(i[e],Tt,t);return function(r){return jP(n(r),e)}}function Yd(i,e,t){if(!(e in i))return null;const n=$f(i[e],Xo,t);return function(r){return ERe(n(r),e)}}function xst(i,e,t){const n=Yd(i,e+"pattern-src",t),r=r_e(i,e+"pattern-offset",t),s=r_e(i,e+"pattern-size",t),o=d4(i,e+"color",t);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function s2(i,e,t){if(!(e in i))return null;const n=$f(i[e],rs,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function d4(i,e,t){if(!(e in i))return null;const n=$f(i[e],Pr|Xo,t);return function(r){return CRe(n(r),e)}}function wRe(i,e,t){if(!(e in i))return null;const n=$f(i[e],_a,t);return function(r){return xC(n(r),e)}}function BR(i,e,t){if(!(e in i))return null;const n=$f(i[e],_a,t);return function(r){const s=xC(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function r_e(i,e,t){if(!(e in i))return null;const n=$f(i[e],_a,t);return function(r){return SRe(n(r),e)}}function XD(i,e,t){if(!(e in i))return null;const n=$f(i[e],_a|Tt,t);return function(r){return Tst(n(r),e)}}function jR(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wst(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Qr(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Est(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function s_e(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function o_e(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Cst(i,e){const t=i[e];if(t!==void 0)return xC(t,e)}function YD(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Sst(i,e){const t=i[e];if(t!==void 0)return CRe(t,e)}function xC(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function ERe(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function jP(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function CRe(i,e){if(typeof i=="string")return i;const t=xC(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function SRe(i,e){const t=xC(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Tst(i,e){return typeof i=="number"?i:SRe(i,e)}const a_e={RENDER_ORDER:"renderOrder"};let t1=class extends sy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(a_e.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new _C(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(a_e.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?gRe:e;const t=Ast(e);this.styleFunction_=e===null?void 0:jrt(t),this.changed()}};function Ast(i){if(i===void 0)return gRe;if(!i)return null;if(typeof i=="function"||i instanceof Do)return i;if(!Array.isArray(i))return n_e([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof Do){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof Do))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return pst(r)}return n_e(i)}class Rst extends fC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){hi()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Tu(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),q5(r,n)}forEachFeatureAtCoordinate(e,t,n,r,s,o,a,l){let u;const c=t.viewState;function h(w,C,D,R){return s.call(o,C,w?D:null,R)}const d=c.projection,f=BD(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&r){const w=d.getExtent(),C=Di(w);p.push([-C,0],[C,0])}const m=t.layerStatesArray,y=m.length,v=[],b=[];for(let w=0;w<p.length;w++)for(let C=y-1;C>=0;--C){const D=m[C],R=D.layer;if(R.hasRenderer()&&t4(D,c)&&a.call(l,R)){const A=R.getRenderer(),L=R.getSource();if(A&&L){const O=L.getWrapX()?f:e,$=h.bind(null,D.managed);b[0]=O[0]+p[w][0],b[1]=O[1]+p[w][1],u=A.forEachFeatureAtCoordinate(b,t,n,$,v)}if(u)return u}}if(v.length===0)return;const x=1/v.length;return v.forEach((w,C)=>w.distanceSq+=C*x),v.sort((w,C)=>w.distanceSq-C.distanceSq),v.some(w=>u=w.callback(w.feature,w.layer,w.geometry)),u}hasFeatureAtCoordinate(e,t,n,r,s,o){return this.forEachFeatureAtCoordinate(e,t,n,r,eb,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){hi()}scheduleExpireIconCache(e){Mh.canExpireCache()&&e.postRenderFunctions.push(kst)}}function kst(i,e){Mh.expire()}let fE=class extends Zl{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}};class Dst extends Rst{constructor(e){super(e),this.fontChangeListenerKey_=Wi(Vd,N0.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=td+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new fE(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){gr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(So.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});t.some(a=>a.layer instanceof t1&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const u=t[a];e.layerIndex=a;const c=u.layer,h=c.getSourceState();if(!t4(u,r)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(u))}this.declutter(e,s),Art(this.element_,this.children_),this.dispatchRenderEvent(So.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const r=t[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(n=>n.layer.renderDeferred(e))}}}let Gp=class extends Zl{constructor(e,t){super(e),this.layer=t}};const wI={LAYERS:"layers"};let Lst=class TRe extends bAe{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(wI.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new qa(n.slice(),{unique:!0}):sn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new qa(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(gr),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Wi(e,za.ADD,this.handleLayersAdd_,this),Wi(e,za.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(gr);Wb(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new Gp("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Wi(e,N0.PROPERTYCHANGE,this.handleLayerChange_,this),Wi(e,qt.CHANGE,this.handleLayerChange_,this)];e instanceof TRe&&t.push(Wi(e,"addlayer",this.handleLayerGroupAdd_,this),Wi(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Gt(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Gp("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Gp("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Gp("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Gt(t);this.listenerKeys_[n].forEach(gr),delete this.listenerKeys_[n],this.dispatchEvent(new Gp("removelayer",t)),this.changed()}getLayers(){return this.get(wI.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new Gp("removelayer",n[r]))}this.set(wI.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=ho(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const Ig=Lst;class Nv extends Zl{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Wd extends Nv{constructor(e,t,n,r,s,o){super(e,t,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Wn={SINGLECLICK:"singleclick",CLICK:qt.CLICK,DBLCLICK:qt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Sh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Mst extends Xb{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Wi(n,Sh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Wi(n,Sh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(qt.TOUCHMOVE,this.boundHandleTouchMove_,nRe?{passive:!1}:!1)}emulateClick_(e){let t=new Wd(Wn.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Wd(Wn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Wd(Wn.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Wn.POINTERUP||t.type==Wn.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Wn.POINTERDOWN||t.type==Wn.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Wd(Wn.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Wd(Wn.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Wi(n,Wn.POINTERMOVE,this.handlePointerMove_,this),Wi(n,Wn.POINTERUP,this.handlePointerUp_,this),Wi(this.element_,Wn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Wi(this.element_.getRootNode(),Wn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Wd(Wn.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Wd(Wn.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(gr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(qt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(gr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const xh={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},qs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},zR=1/0;class Ist{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Wb(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){sn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=zR?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,s=t[e],o=n[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&n[u]<n[l]?u:l;t[e]=t[c],n[e]=n[c],e=c}t[e]=s,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,s=n[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)n[t]=n[a],r[t]=r[a],t=a;else break}n[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==zR?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,t[r++]=o);t.length=r,n.length=r,this.heapify_()}}const at={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ARe extends Ist{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(qt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===at.LOADED||n===at.ERROR||n===at.EMPTY){n!==at.ERROR&&t.removeEventListener(qt.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,r,s,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===at.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,s.load())}}function Ost(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return zR;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class ih extends lc{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){PR(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&PR(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)gr(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==tb&&this.listenerKeys.push(Wi(e,xh.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Pst extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(qt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+td+" "+oy+(this.collapsed_&&this.collapsible_?" "+FR:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),n=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>R5(()=>r))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ad(t,this.renderedAttributions_)){rRe(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(FR),this.collapsed_?hb(this.collapseLabel_,this.label_):hb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const RRe=Pst;class Fst extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(qt.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+td+" "+oy,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(_T)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:ny}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(_T);!s&&n===0?this.element.classList.add(_T):s&&n!==0&&this.element.classList.remove(_T)}this.label_.style.transform=r}this.rotation_=n}}const kRe=Fst;class Nst extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(qt.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(qt.CLICK,this.handleClick_.bind(this,-n),!1);const d=t+" "+td+" "+oy,f=this.element;f.className=d,f.appendChild(c),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:ny})):n.setZoom(s)}}}const DRe=Nst;function LRe(i){i=i||{};const e=new qa;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new DRe(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new kRe(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new RRe(i.attributionOptions)),e}const zP={ACTIVE:"active"};class wC extends lc{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(zP.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(zP.ACTIVE,e)}setMap(e){this.map_=e}}function $st(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:Fnt,center:i.getConstrainedCenter(r)})}}function f4(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:ny})}class Bst extends wC{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Wn.DBLCLICK){const n=e.originalEvent,r=e.map,s=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();f4(a,o,s,this.duration_),n.preventDefault(),t=!0}return!t}}const jst=Bst;class uy extends wC{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Wn.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Wn.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Wn.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Wn.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function p4(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}function GP(i){const e=arguments;return function(t){let n=!0;for(let r=0,s=e.length;r<s&&(n=n&&e[r](t),!!n);++r);return n}}const zst=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Gst=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ust=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},MRe=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?Ust(i):!0},GR=eb,IRe=function(i){const e=i.originalEvent;return e.button==0&&!(Ert&&o4&&e.ctrlKey)},qst=Hb,Vst=function(i){return i.type==Wn.SINGLECLICK},g4=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l_e=function(i){const e=i.originalEvent;return!e.altKey&&(o4?e.metaKey:e.ctrlKey)&&!e.shiftKey},Hst=function(i){const e=i.originalEvent;return o4?e.metaKey:e.ctrlKey},ORe=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},PRe=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},EI=function(i){const e=i.originalEvent;return sn(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},FRe=function(i){const e=i.originalEvent;return sn(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class pE extends uy{constructor(e){super({stopDown:Hb}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:GP(g4,FRe);this.condition_=e.onFocusOnly?GP(MRe,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(p4(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();RAe(s,a.getResolution()),F5(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:ny})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Wst extends uy{constructor(e){e=e||{},super({stopDown:Hb}),this.condition_=e.condition?e.condition:Gst,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!EI(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===z5)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return EI(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return EI(e)&&IRe(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Xst extends fC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Io([r])}getGeometry(){return this.geometry_}}const dw={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class bT extends Zl{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class Yst extends uy{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Xst(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:IRe,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],s=n[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new bT(dw.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new bT(t?dw.BOXEND:dw.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new bT(dw.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new bT(dw.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}}class Zst extends Yst{constructor(e){e=e||{};const t=e.condition?e.condition:ORe;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:ny})}}const Kst=Zst,Um={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Jst extends wC{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return g4(t)&&PRe(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==qt.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==Um.DOWN||r==Um.LEFT||r==Um.RIGHT||r==Um.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;r==Um.DOWN?u=-a:r==Um.LEFT?l=-a:r==Um.RIGHT?l=a:u=a;const c=[l,u];F5(c,o.getRotation()),$st(o,c,this.duration_),n.preventDefault(),t=!0}}return!t}}class Qst extends wC{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!Hst(t)&&PRe(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==qt.KEYDOWN||e.type==qt.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();f4(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const eot=Qst;class tot{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class UR extends wC{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:GR;this.condition_=e.onFocusOnly?GP(MRe,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==qt.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==qt.WHEEL&&(s=r.deltaY,brt&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=tRe),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Fi(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),f4(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class iot extends uy{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Hb),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==z5&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(p4(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class not extends uy{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Hb),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(p4(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const rot=not;function sot(i){i=i||{};const e=new qa,t=new tot(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new Wst),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new jst({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new pE({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new iot),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new rot({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new Jst),e.push(new eot({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new UR({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new Kst({duration:i.zoomDuration})),e}function NRe(i){if(i instanceof sy){i.setMapInternal(null);return}i instanceof Ig&&i.getLayers().forEach(NRe)}function $Re(i,e){if(i instanceof sy){i.setMapInternal(e);return}if(i instanceof Ig){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)$Re(t[n],e)}}let BRe=class extends lc{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=oot(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:tRe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ss(),this.pixelToCoordinateTransform_=Ss(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||LRe(),this.interactions=t.interactions||sot({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ARe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(qs.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(qs.VIEW,this.handleViewChanged_),this.addChangeListener(qs.SIZE,this.handleSizeChanged_),this.addChangeListener(qs.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Yu)&&e.view.then(function(r){n.setView(new Yu(r))}),this.controls.addEventListener(za.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(za.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(za.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(za.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(za.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(za.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){$Re(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:eb,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof Ig?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:eb,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(qs.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return B0(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?fs(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(qs.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof qa){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Os(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?fs(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(qs.SIZE)}getView(){return this.get(qs.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return Ost(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new Wd(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Sh.POINTERDOWN||n===qt.WHEEL||n===qt.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Ir.ANIMATING]||o[Ir.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(So.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(So.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Nv(xh.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Nv(xh.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let r=0,s=n.length;r<s;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)gr(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(qt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(qt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,PR(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Dst(this)),this.mapBrowserEventHandler_=new Mst(this,this.moveTolerance_);for(const s in Wn)this.mapBrowserEventHandler_.addEventListener(Wn[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(qt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(qt.WHEEL,this.boundHandleBrowserEvent_,nRe?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Wi(n,qt.KEYDOWN,this.handleBrowserEvent,this),Wi(n,qt.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(gr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(gr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Wi(e,N0.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Wi(e,qt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(gr),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Gp("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Wi(e,N0.PROPERTYCHANGE,this.render,this),Wi(e,qt.CHANGE,this.render,this),Wi(e,"addlayer",this.handleLayerAdd_,this),Wi(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){NRe(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&Xve(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:WE(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Gt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=WE(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!ld(this.previousExtent_)&&!rc(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Nv(xh.MOVESTART,this,r)),this.previousExtent_=Zb(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Ir.ANIMATING]&&!s.viewHints[Ir.INTERACTING]&&!rc(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Nv(xh.MOVEEND,this,s)),EAe(s.extent,this.previousExtent_))),this.dispatchEvent(new Nv(xh.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(xh.LOADSTART)||this.hasListener(xh.LOADEND)||this.hasListener(So.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Gp("removelayer",t)),this.set(qs.LAYERGROUP,e)}setSize(e){this.set(qs.SIZE,e)}setTarget(e){this.set(qs.TARGET,e)}setView(e){if(!e||e instanceof Yu){this.set(qs.VIEW,e);return}this.set(qs.VIEW,new Yu);const t=this;e.then(function(n){t.setView(new Yu(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!Xve(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&MAe("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!ad(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function oot(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Ig({layers:i.layers});t[qs.LAYERGROUP]=n,t[qs.TARGET]=i.target,t[qs.VIEW]=i.view instanceof Yu?i.view:new Yu;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new qa(i.controls.slice()):(sn(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new qa(i.interactions.slice()):(sn(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new qa(i.overlays.slice()):(sn(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new qa,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const aot=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}',lot=".geolocation{top:65px;left:.5em}.ol-touch .geolocation{top:80px}";let Kr=class jRe extends lc{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new jRe(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(gr(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Wi(e,qt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?uot(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function uot(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(sn(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}class ZD extends ed{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new ZD(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)n[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);n[0]=s[0]+u*o,n[1]=s[1]+u*a;for(let c=2;c<this.stride;++c)n[c]=s[c]}return n.length=this.stride,l}return r}containsXY(e,t){const n=this.flatCoordinates,r=e-n[0],s=t-n[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return nc(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Hr(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:L5(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+n;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=NAe(r,0,e,this.stride);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),r=this.getStride();this.setCenter(V5(n,0,n.length,r,e,t,n)),this.changed()}}ZD.prototype.transform;let cot=class UP extends H5{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(gr),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Wi(e[t],qt.CHANGE,this.changed,this))}clone(){const e=new UP(CI(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<iy(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,n,r);return r}containsXY(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){Zb(e);const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)CAe(e,t[n].getExtent());return e}getGeometries(){return CI(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let r=!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}return r?new UP(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Ko(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(CI(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function CI(i){return i.map(e=>e.clone())}const ba=cot;function qR(i,e,t,n,r,s,o){let a,l;const u=(t-e)/n;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=i[e],h=i[e+1],d=0;const f=[0];for(let y=e+n;y<t;y+=n){const v=i[y],b=i[y+1];d+=Math.sqrt((v-c)*(v-c)+(b-h)*(b-h)),f.push(d),c=v,h=b}const p=r*d,m=Qit(f,p);m<0?(l=(p-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*n):a=e+m*n}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?i[a+c]:hu(i[a+c],i[a+n+c],l);return s}function qP(i,e,t,n,r,s){if(t==e)return null;let o;if(r<i[e+n-1])return s?(o=i.slice(e,e+n),o[n-1]=r,o):null;if(i[t-1]<r)return s?(o=i.slice(t-n,t),o[n-1]=r,o):null;if(r==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const u=i[a*n-1];if(r==u)return i.slice((a-1)*n,(a-1)*n+n);const c=i[(a+1)*n-1],h=(r-u)/(c-u);o=[];for(let d=0;d<n-1;++d)o.push(hu(i[(a-1)*n+d],i[a*n+d],h));return o.push(r),o}function hot(i,e,t,n,r,s,o){if(o)return qP(i,e,t[t.length-1],n,r,s);let a;if(r<i[n-1])return s?(a=i.slice(0,n),a[n-1]=r,a):null;if(i[i.length-1]<r)return s?(a=i.slice(i.length-n),a[n-1]=r,a):null;for(let l=0,u=t.length;l<u;++l){const c=t[l];if(e!=c){if(r<i[e+n-1])return null;if(r<=i[c-1])return qP(i,e,c,n,r,!1);e=c}}return null}function zRe(i,e,t,n){let r=i[e],s=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],u=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}let js=class VP extends ed{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Hn(this.flatCoordinates,e),this.changed()}clone(){const e=new VP(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<iy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(W5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Y5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return qAe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,qP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return qR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return zRe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=UD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new VP(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return qD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yC(this.flatCoordinates,0,e,this.stride),this.changed()}},Lu=class HP extends ed{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const r=e,s=[],o=[];for(let l=0,u=r.length;l<u;++l){const c=r[l];Hn(s,c.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Hn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new HP(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<iy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(X5(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Z5(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,hot(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return ZE(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new js(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new js(e.slice(s,l),n);r.push(u),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=qR(t,n,l,s,.5);Hn(e,u),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=BAe(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new HP(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return Jnt(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=vC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},ud=class GRe extends ed{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Hn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new GRe(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<iy(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=df(e,t,s[a],s[a+1]);if(u<r){r=u;for(let c=0;c<o;++c)n[c]=s[a+c];n.length=o}}return r}getCoordinates(){return of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new ps(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=n){const a=new ps(e.slice(s,s+n),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let r=0,s=t.length;r<s;r+=n){const o=t[r],a=t[r+1];if(k5(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yC(this.flatCoordinates,0,e,this.stride),this.changed()}};function URe(i,e,t,n){const r=[];let s=Wa();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=D5(i,e,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}let nh=class WP extends ed{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=s.length,h=u.getEnds();for(let d=0,f=h.length;d<f;++d)h[d]+=c;Hn(s,u.getFlatCoordinates()),o.push(h)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,n=o}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Hn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const n=new WP(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,r){return r<iy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vnt(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hnt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Knt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Ynt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),PP(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,IP(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=URe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=UAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ud(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;WAe(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=PP(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Xnt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new WP(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let s=0,o=n.length;s<o;++s)n[s]-=t;return new Io(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const c=new Io(t.slice(s,u),e,l);r.push(c),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return Qnt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=$Ae(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}};const u_e=Ss();let Wu=class XP{constructor(e,t,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?A_(this.flatCoordinates_):D5(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ko(this.getExtent());this.flatInteriorPoints_=Q5(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=XAe(this.flatCoordinates_,this.ends_),t=URe(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=UAe(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=qR(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=qR(e,t,o,2,.5);Hn(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Lt(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=Vr(n)/Vr(t);Tu(u_e,n[0],n[3],r,-r,0,0,0),_g(this.flatCoordinates_,0,this.flatCoordinates_.length,2,u_e,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new XP(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=vAe((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=UD(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=BAe(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=K5(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new XP(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}};Wu.prototype.getFlatCoordinates=Wu.prototype.getOrientedFlatCoordinates;let dot=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Kr,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Lt(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Lt(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return hi()}readFeature(e,t){return hi()}readFeatures(e,t){return hi()}readGeometry(e,t){return hi()}readProjection(e){return hi()}writeFeature(e,t){return hi()}writeFeatures(e,t){return hi()}writeGeometry(e,t){return hi()}};const EC=dot;function cs(i,e,t){const n=t?Lt(t.featureProjection):null,r=t?Lt(t.dataProjection):null;let s=i;if(n&&r&&!ma(n,r)){e&&(s=i.clone());const o=e?n:r,a=e?r:n;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Qh(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}function m4(i,e){const t=e?Lt(e.featureProjection):null,n=e?Lt(e.dataProjection):null;return t&&n&&!ma(t,n)?PAe(i,n,t):i}const fot={Point:ps,LineString:js,Polygon:Io,MultiPoint:ud,MultiLineString:Lu,MultiPolygon:nh};function pot(i,e,t){return Array.isArray(e[0])?(WAe(i,0,e,t)||(i=i.slice(),PP(i,0,e,t)),i):(e4(i,0,e,t)||(i=i.slice(),MR(i,0,e,t)),i)}function qRe(i,e){var s;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>qRe({...i,geometry:o})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const r=t.layout.length;return cs(new Wu(n,n==="Polygon"?pot(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function y4(i,e){if(!i)return null;if(Array.isArray(i)){const n=i.map(r=>y4(r,e));return new ba(n)}const t=fot[i.type];return cs(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}let v4=class extends EC{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(xT(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(xT(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return hi()}readFeaturesFromObject(e,t){return hi()}readGeometry(e,t){return this.readGeometryFromObject(xT(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return hi()}readProjection(e){return this.readProjectionFromObject(xT(e))}readProjectionFromObject(e){return hi()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return hi()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return hi()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return hi()}};function xT(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}const got={Point:_ot,LineString:bot,Polygon:Cot,MultiPoint:wot,MultiLineString:xot,MultiPolygon:Eot},mot={Point:Sot,LineString:Tot,Polygon:Aot,MultiPoint:kot,MultiLineString:Rot,MultiPolygon:Dot};class yot extends v4{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,t,n){const r=e,s=c_e(r.geometry,t),o=new Kr;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),r.attributes){o.setProperties(r.attributes,!0);const a=r.attributes[n];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,t){if(t=t||{},e.features){const n=e,r=[],s=n.features;for(let o=0,a=s.length;o<a;++o)r.push(this.readFeatureFromObject(s[o],t,e.objectIdFieldName));return r}return[this.readFeatureFromObject(e,t)]}readGeometryFromObject(e,t){return c_e(e,t)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const n=e.spatialReference.wkid;return Lt("EPSG:"+n)}return null}writeGeometryObject(e,t){return h_e(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={};if(!e.hasProperties())return n.attributes={},n;const r=e.getProperties(),s=e.getGeometry();if(s){n.geometry=h_e(s,t);const o=t&&(t.dataProjection||t.featureProjection);o&&(n.geometry.spatialReference={wkid:Number(Lt(o).getCode().split(":").pop())}),delete r[e.getGeometryName()]}return Cf(r)?n.attributes={}:n.attributes=r,n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let r=0,s=e.length;r<s;++r)n.push(this.writeFeatureObject(e[r],t));return{features:n}}}function c_e(i,e){if(!i)return null;let t;if(typeof i.x=="number"&&typeof i.y=="number")t="Point";else if(i.points)t="MultiPoint";else if(i.paths)i.paths.length===1?t="LineString":t="MultiLineString";else if(i.rings){const r=i,s=i1(r),o=vot(r.rings,s);o.length===1?(t="Polygon",i=Object.assign({},i,{rings:o[0]})):(t="MultiPolygon",i=Object.assign({},i,{rings:o}))}const n=got[t];return cs(n(i),!1,e)}function vot(i,e){const t=[],n=[],r=[];let s,o;for(s=0,o=i.length;s<o;++s)t.length=0,yC(t,0,i[s],e.length),VD(t,0,t.length,e.length)?n.push([i[s]]):r.push(i[s]);for(;r.length;){const a=r.shift();let l=!1;for(s=n.length-1;s>=0;s--){const u=n[s][0];if(ya(new KE(u).getExtent(),new KE(a).getExtent())){n[s].push(a),l=!0;break}}l||n.push([a.reverse()])}return n}function _ot(i){let e;return i.m!==void 0&&i.z!==void 0?e=new ps([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?e=new ps([i.x,i.y,i.z],"XYZ"):i.m!==void 0?e=new ps([i.x,i.y,i.m],"XYM"):e=new ps([i.x,i.y]),e}function bot(i){const e=i1(i);return new js(i.paths[0],e)}function xot(i){const e=i1(i);return new Lu(i.paths,e)}function i1(i){let e="XY";return i.hasZ===!0&&i.hasM===!0?e="XYZM":i.hasZ===!0?e="XYZ":i.hasM===!0&&(e="XYM"),e}function wot(i){const e=i1(i);return new ud(i.points,e)}function Eot(i){const e=i1(i);return new nh(i.rings,e)}function Cot(i){const e=i1(i);return new Io(i.rings,e)}function Sot(i,e){const t=i.getCoordinates();let n;const r=i.getLayout();if(r==="XYZ")n={x:t[0],y:t[1],z:t[2]};else if(r==="XYM")n={x:t[0],y:t[1],m:t[2]};else if(r==="XYZM")n={x:t[0],y:t[1],z:t[2],m:t[3]};else if(r==="XY")n={x:t[0],y:t[1]};else throw new Error("Invalid geometry layout");return n}function CC(i){const e=i.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function Tot(i,e){const t=CC(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:[i.getCoordinates()]}}function Aot(i,e){const t=CC(i);return{hasZ:t.hasZ,hasM:t.hasM,rings:i.getCoordinates(!1)}}function Rot(i,e){const t=CC(i);return{hasZ:t.hasZ,hasM:t.hasM,paths:i.getCoordinates()}}function kot(i,e){const t=CC(i);return{hasZ:t.hasZ,hasM:t.hasM,points:i.getCoordinates()}}function Dot(i,e){const t=CC(i),n=i.getCoordinates(!1),r=[];for(let s=0;s<n.length;s++)for(let o=n[s].length-1;o>=0;o--)r.push(n[s][o]);return{hasZ:t.hasZ,hasM:t.hasM,rings:r}}function h_e(i,e){const t=mot[i.getType()];return t(cs(i,!0,e),e)}const Lot=yot;let SC=class extends v4{constructor(e){e=e||{},super(),this.dataProjection=Lt(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Lt(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const r=_4(n.geometry);if(this.featureClass===Wu)return qRe({geometry:r,id:n.id,properties:n.properties},t);const s=new Kr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(y4(r,t)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(e,t){const n=e;let r=null;if(n.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],t);u&&r.push(u)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Mot(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Lt(t.properties.name);else if(t.type==="EPSG")n=Lt("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;const s=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=YP(o,t),delete s[e.getGeometryName()]),Cf(s)||(n.properties=s),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let r=0,s=e.length;r<s;++r)n.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return YP(e,this.adaptOptions(t))}};function _4(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=Oot(i);break}case"LineString":{t=Pot(i);break}case"Polygon":{t=Bot(i);break}case"MultiPoint":{t=Not(i);break}case"MultiLineString":{t=Fot(i);break}case"MultiPolygon":{t=$ot(i);break}case"GeometryCollection":{t=Iot(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function Mot(i,e){const t=_4(i);return y4(t,e)}function Iot(i,e){return i.geometries.map(function(n){return _4(n)})}function Oot(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:ry(e.length)}}function Pot(i){var n;const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:ry(((n=e[0])==null?void 0:n.length)||2)}}function Fot(i){var s,o;const e=i.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,n=[],r=vC(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:r,layout:ry(t)}}function Not(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:ry(((t=e[0])==null?void 0:t.length)||2)}}function $ot(i){var s,o;const e=i.coordinates,t=[],n=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,r=$Ae(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:ry(n)}}function Bot(i){var s,o;const e=i.coordinates,t=[],n=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,r=vC(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:r,layout:ry(n)}}function YP(i,e){i=cs(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=Vot(i);break}case"LineString":{n=zot(i);break}case"Polygon":{n=Hot(i,e);break}case"MultiPoint":{n=Uot(i);break}case"MultiLineString":{n=Got(i);break}case"MultiPolygon":{n=qot(i,e);break}case"GeometryCollection":{n=jot(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function jot(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return YP(n,e)})}}function zot(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function Got(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Uot(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function qot(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function Vot(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function Hot(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const z0="http://www.w3.org/2001/XMLSchema-instance";function Gi(i,e){return n1().createElementNS(i,e)}function dl(i,e){return VRe(i,e,[]).join("")}function VRe(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{let n;for(n=i.firstChild;n;n=n.nextSibling)VRe(n,e,t)}return t}function Ju(i){return"documentElement"in i}function Wot(i,e,t){return i.getAttributeNS(e,t)||""}function Qu(i){return new DOMParser().parseFromString(i,"application/xml")}function VR(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);if(r!==void 0){const s=n[n.length-1];Hn(s,r)}}}function ni(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);r!==void 0&&n[n.length-1].push(r)}}function mi(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);r!==void 0&&(n[n.length-1]=r)}}function Wr(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function Ce(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;o[a]=s}}}function De(i,e){return function(t,n,r){i.call(e!==void 0?e:this,t,n,r),r[r.length-1].node.appendChild(t)}}function HRe(i,e){let t,n;return function(r,s,o){if(t===void 0){t={};const a={};a[r.localName]=i,t[r.namespaceURI]=a,n=Ts(r.localName)}WRe(t,n,s,o)}}function Ts(i,e){return function(t,n,r){const o=n[n.length-1].node;let a=i;a===void 0&&(a=r);const l=e!==void 0?e:o.namespaceURI;return Gi(l,a)}}const Jo=Ts();function Wl(i,e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=i[e[r]];return n}function nt(i,e,t){t=t!==void 0?t:{};let n,r;for(n=0,r=i.length;n<r;++n)t[i[n]]=e;return t}function Vl(i,e,t,n){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const s=i[r.namespaceURI];if(s!==void 0){const o=s[r.localName];o!==void 0&&o.call(n,r,t)}}}function ht(i,e,t,n,r){return n.push(i),Vl(e,t,n,r),n.pop()}function WRe(i,e,t,n,r,s){const o=(r!==void 0?r:t).length;let a,l;for(let u=0;u<o;++u)a=t[u],a!==void 0&&(l=e.call(s!==void 0?s:this,a,n,r!==void 0?r[u]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(s,l,a,n))}function Ni(i,e,t,n,r,s,o){return r.push(i),WRe(e,t,n,r,s,o),r.pop()}let SI;function Xot(){return SI===void 0&&typeof XMLSerializer<"u"&&(SI=new XMLSerializer),SI}let TI;function n1(){return TI===void 0&&typeof document<"u"&&(TI=document.implementation.createDocument("","",null)),TI}class TC extends EC{constructor(){super(),this.xmlSerializer_=Xot()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const n=Qu(e);return this.readFeatureFromDocument(n,t)}return Ju(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const n=this.readFeaturesFromDocument(e,t);return n.length>0?n[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const n=Qu(e);return this.readFeaturesFromDocument(n,t)}return Ju(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Hn(n,this.readFeaturesFromNode(r,t));return n}readFeaturesFromNode(e,t){return hi()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const n=Qu(e);return this.readGeometryFromDocument(n,t)}return Ju(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Qu(e);return this.readProjectionFromDocument(t)}return Ju(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const n=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const n=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const n=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(e,t){return null}}const gf="http://www.opengis.net/gml",Yot=/^\s*$/;class ii extends TC{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:ni(this.readFeaturesInternal),featureMembers:mi(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,t){const n=e.localName;let r=null;if(n=="FeatureCollection")r=ht([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if(n=="featureMembers"||n=="featureMember"||n=="member"){const s=t[0];let o=s.featureType,a=s.featureNS;const l="p",u="p0";if(!o&&e.childNodes){o=[],a={};for(let d=0,f=e.childNodes.length;d<f;++d){const p=e.childNodes[d];if(p.nodeType===1){const m=p.nodeName.split(":").pop();if(!o.includes(m)){let y="",v=0;const b=p.namespaceURI;for(const x in a){if(a[x]===b){y=x;break}++v}y||(y=l+v,a[y]=b),o.push(y+":"+m)}}}n!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[u]=d}const c={},h=Array.isArray(o)?o:[o];for(const d in a){const f={};for(let p=0,m=h.length;p<m;++p)(h[p].includes(":")?h[p].split(":")[0]:u)===d&&(f[h[p].split(":").pop()]=n=="featureMembers"?ni(this.readFeatureElement,this):mi(this.readFeatureElement,this));c[a[d]]=f}n=="featureMember"||n=="member"?r=ht(void 0,c,e,t):r=ht([],c,e,t)}return r===null&&(r=[]),r}readGeometryOrExtent(e,t){const n=t[0];return n.srsName=e.firstElementChild.getAttribute("srsName"),n.srsDimension=e.firstElementChild.getAttribute("srsDimension"),ht(null,this.GEOMETRY_PARSERS,e,t,this)}readExtentElement(e,t){const n=t[0],r=this.readGeometryOrExtent(e,t);return r?m4(r,n):void 0}readGeometryElement(e,t){const n=t[0],r=this.readGeometryOrExtent(e,t);return r?cs(r,!1,n):void 0}readFeatureElementInternal(e,t,n){let r;const s={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let u;const c=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=dl(l,!1),Yot.test(u)&&(u=void 0)):(n&&(u=c==="boundedBy"?this.readExtentElement(l,t):this.readGeometryElement(l,t)),u?c!=="boundedBy"&&(r=c):u=this.readFeatureElementInternal(l,t,!1));const h=l.attributes.length;if(h>0&&!(u instanceof H5)){u={_content_:u};for(let d=0;d<h;d++){const f=l.attributes[d].name;u[f]=l.attributes[d].value}}s[c]?(s[c]instanceof Array||(s[c]=[s[c]]),s[c].push(u)):s[c]=u}if(!n)return s;const o=new Kr(s);r&&o.setGeometryName(r);const a=e.getAttribute("fid")||Wot(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,t){return this.readFeatureElementInternal(e,t,!0)}readPoint(e,t){const n=this.readFlatCoordinatesFromNode(e,t);if(n)return new ps(n,"XYZ")}readMultiPoint(e,t){const n=ht([],this.MULTIPOINT_PARSERS,e,t,this);if(n)return new ud(n)}readMultiLineString(e,t){const n=ht([],this.MULTILINESTRING_PARSERS,e,t,this);if(n)return new Lu(n)}readMultiPolygon(e,t){const n=ht([],this.MULTIPOLYGON_PARSERS,e,t,this);if(n)return new nh(n)}pointMemberParser(e,t){Vl(this.POINTMEMBER_PARSERS,e,t,this)}lineStringMemberParser(e,t){Vl(this.LINESTRINGMEMBER_PARSERS,e,t,this)}polygonMemberParser(e,t){Vl(this.POLYGONMEMBER_PARSERS,e,t,this)}readLineString(e,t){const n=this.readFlatCoordinatesFromNode(e,t);if(n)return new js(n,"XYZ")}readFlatLinearRing(e,t){const n=ht(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(n)return n}readLinearRing(e,t){const n=this.readFlatCoordinatesFromNode(e,t);if(n)return new KE(n,"XYZ")}readPolygon(e,t){const n=ht([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(n&&n[0]){const r=n[0],s=[r.length];let o,a;for(o=1,a=n.length;o<a;++o)Hn(r,n[o]),s.push(r.length);return new Io(r,"XYZ",s)}}readFlatCoordinatesFromNode(e,t){return ht(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}readGeometryFromNode(e,t){const n=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return n||null}readFeaturesFromNode(e,t){const n={featureType:this.featureType,featureNS:this.featureNS};return n&&Object.assign(n,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[n])||[]}readProjectionFromNode(e){return Lt(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}ii.prototype.namespace=gf;ii.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};ii.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};ii.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};ii.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:ni(ii.prototype.pointMemberParser),pointMembers:ni(ii.prototype.pointMemberParser)}};ii.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:ni(ii.prototype.lineStringMemberParser),lineStringMembers:ni(ii.prototype.lineStringMemberParser)}};ii.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:ni(ii.prototype.polygonMemberParser),polygonMembers:ni(ii.prototype.polygonMemberParser)}};ii.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:ni(ii.prototype.readFlatCoordinatesFromNode)}};ii.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ni(ii.prototype.readLineString)}};ii.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ni(ii.prototype.readPolygon)}};ii.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:mi(ii.prototype.readFlatLinearRing)}};function Og(i){const e=dl(i,!1);return x0(e)}function x0(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return e[1]!==void 0||!1}function KD(i){const e=dl(i,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function An(i){const e=dl(i,!1);return Zd(e)}function Zd(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function Ps(i){const e=dl(i,!1);return af(e)}function af(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function _t(i){return dl(i,!1).trim()}function pb(i,e){Li(i,e?"1":"0")}function Zot(i,e){i.appendChild(n1().createCDATASection(e))}function Kot(i,e){const t=new Date(e*1e3),n=t.getUTCFullYear()+"-"+i0(t.getUTCMonth()+1,2)+"-"+i0(t.getUTCDate(),2)+"T"+i0(t.getUTCHours(),2)+":"+i0(t.getUTCMinutes(),2)+":"+i0(t.getUTCSeconds(),2)+"Z";i.appendChild(n1().createTextNode(n))}function Dl(i,e){const t=e.toPrecision();i.appendChild(n1().createTextNode(t))}function HR(i,e){const t=e.toString();i.appendChild(n1().createTextNode(t))}function Li(i,e){i.appendChild(n1().createTextNode(e))}const Jot=gf+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",Qot={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class wn extends ii{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[gf].featureMember=ni(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:Jot}readFlatCoordinates(e,t){const n=dl(e,!1).replace(/^\s*|\s*$/g,""),s=t[0].srsName;let o="enu";if(s){const u=Lt(s);u&&(o=u.getAxisOrientation())}const a=n.trim().split(/\s+/),l=[];for(let u=0,c=a.length;u<c;u++){const h=a[u].split(/,+/),d=parseFloat(h[0]),f=parseFloat(h[1]),p=h.length===3?parseFloat(h[2]):0;o.substr(0,2)==="en"?l.push(d,f,p):l.push(f,d,p)}return l}readBox(e,t){const n=ht([null],this.BOX_PARSERS_,e,t,this);return nc(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(e,t){const n=ht(void 0,this.RING_PARSERS,e,t,this);n&&t[t.length-1].push(n)}outerBoundaryIsParser(e,t){const n=ht(void 0,this.RING_PARSERS,e,t,this);if(n){const r=t[t.length-1];r[0]=n}}GEOMETRY_NODE_FACTORY_(e,t,n){const r=t[t.length-1],s=r.multiSurface,o=r.surface,a=r.multiCurve;return Array.isArray(e)?n="Envelope":(n=e.getType(),n==="MultiPolygon"&&s===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="MultiLineString"&&a===!0&&(n="MultiCurve")),Gi("http://www.opengis.net/gml",n)}writeFeatureElement(e,t,n){const r=t.getId();r&&e.setAttribute("fid",r);const s=n[n.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(t.hasProperties()){const h=t.getProperties();for(const d in h){const f=h[d];f!==null&&(l.push(d),u.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=De(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=De(Li)))}}const c=Object.assign({},s);c.node=e,Ni(c,s.serializers,Ts(void 0,o),u,n,l)}writeCurveOrLineString(e,t,n){const s=n[n.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,n)}else if(e.nodeName==="Curve"){const o=Gi(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,n)}}writeLineStringOrCurveMember(e,t,n){const r=this.GEOMETRY_NODE_FACTORY_(t,n);r&&(e.appendChild(r),this.writeCurveOrLineString(r,t,n))}writeMultiCurveOrLineString(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName,a=r.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();Ni({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeGeometryElement(e,t,n){const r=n[n.length-1],s=Object.assign({},r);s.node=e;let o;Array.isArray(t)?o=m4(t,r):o=cs(t,!0,r),Ni(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}createCoordinatesNode_(e){const t=Gi(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}writeCoordinates_(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName,a=t.getCoordinates(),l=a.length,u=new Array(l);for(let c=0;c<l;++c){const h=a[c];u[c]=this.getCoords_(h,o,s)}Li(e,u.join(" "))}writeCurveSegments_(e,t,n){const r=Gi(e.namespaceURI,"LineStringSegment");e.appendChild(r),this.writeCurveOrLineString(r,t,n)}writeSurfaceOrPolygon(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();Ni({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,n,void 0,this)}else if(e.nodeName==="Surface"){const a=Gi(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,n)}}RING_NODE_FACTORY_(e,t,n){const r=t[t.length-1],s=r.node,o=r.exteriorWritten;return o===void 0&&(r.exteriorWritten=!0),Gi(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,t,n){const r=Gi(e.namespaceURI,"PolygonPatch");e.appendChild(r),this.writeSurfaceOrPolygon(r,t,n)}writeRing(e,t,n){const r=Gi(e.namespaceURI,"LinearRing");e.appendChild(r),this.writeLinearRing(r,t,n)}getCoords_(e,t,n){let r="enu";t&&(r=Lt(t).getAxisOrientation());let s=r.substr(0,2)==="en"?e[0]+","+e[1]:e[1]+","+e[0];if(n){const o=e[2]||0;s+=","+o}return s}writePoint(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=t.getCoordinates(),u=this.getCoords_(l,o,s);Li(a,u)}writeMultiPoint(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName;o&&e.setAttribute("srsName",o);const a=t.getPoints();Ni({node:e,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,Ts("pointMember"),a,n,void 0,this)}writePointMember(e,t,n){const r=Gi(e.namespaceURI,"Point");e.appendChild(r),this.writePoint(r,t,n)}writeLinearRing(e,t,n){const s=n[n.length-1].srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,n)}writeMultiSurfaceOrPolygon(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName,a=r.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();Ni({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeSurfaceOrPolygonMember(e,t,n){const r=this.GEOMETRY_NODE_FACTORY_(t,n);r&&(e.appendChild(r),this.writeSurfaceOrPolygon(r,t,n))}writeEnvelope(e,t,n){const s=n[n.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];Ni({node:e},this.ENVELOPE_SERIALIZERS,Jo,a,n,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,n){const r=t[t.length-1].node;return Gi("http://www.opengis.net/gml",Qot[r.nodeName])}}wn.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:mi(wn.prototype.readFlatCoordinates)}};wn.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:wn.prototype.innerBoundaryIsParser,outerBoundaryIs:wn.prototype.outerBoundaryIsParser}};wn.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ni(wn.prototype.readFlatCoordinates)}};wn.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:mi(ii.prototype.readPoint),MultiPoint:mi(ii.prototype.readMultiPoint),LineString:mi(ii.prototype.readLineString),MultiLineString:mi(ii.prototype.readMultiLineString),LinearRing:mi(ii.prototype.readLinearRing),Polygon:mi(ii.prototype.readPolygon),MultiPolygon:mi(ii.prototype.readMultiPolygon),Box:mi(wn.prototype.readBox)}};wn.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:De(wn.prototype.writeCurveOrLineString),MultiCurve:De(wn.prototype.writeMultiCurveOrLineString),Point:De(wn.prototype.writePoint),MultiPoint:De(wn.prototype.writeMultiPoint),LineString:De(wn.prototype.writeCurveOrLineString),MultiLineString:De(wn.prototype.writeMultiCurveOrLineString),LinearRing:De(wn.prototype.writeLinearRing),Polygon:De(wn.prototype.writeSurfaceOrPolygon),MultiPolygon:De(wn.prototype.writeMultiSurfaceOrPolygon),Surface:De(wn.prototype.writeSurfaceOrPolygon),MultiSurface:De(wn.prototype.writeMultiSurfaceOrPolygon),Envelope:De(wn.prototype.writeEnvelope)}};wn.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:De(wn.prototype.writeLineStringOrCurveMember),curveMember:De(wn.prototype.writeLineStringOrCurveMember)}};wn.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:De(wn.prototype.writeRing),innerBoundaryIs:De(wn.prototype.writeRing)}};wn.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:De(wn.prototype.writePointMember)}};wn.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:De(wn.prototype.writeSurfaceOrPolygonMember),polygonMember:De(wn.prototype.writeSurfaceOrPolygonMember)}};wn.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:De(Li),upperCorner:De(Li)}};const eat=gf+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",tat={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class si extends ii{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:eat,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,t){const n=ht([],this.MULTICURVE_PARSERS,e,t,this);if(n)return new Lu(n)}readFlatCurveRing(e,t){const n=ht([],this.MULTICURVE_PARSERS,e,t,this),r=[];for(let s=0,o=n.length;s<o;++s)Hn(r,n[s].getFlatCoordinates());return r}readMultiSurface(e,t){const n=ht([],this.MULTISURFACE_PARSERS,e,t,this);if(n)return new nh(n)}curveMemberParser(e,t){Vl(this.CURVEMEMBER_PARSERS,e,t,this)}surfaceMemberParser(e,t){Vl(this.SURFACEMEMBER_PARSERS,e,t,this)}readPatch(e,t){return ht([null],this.PATCHES_PARSERS,e,t,this)}readSegment(e,t){return ht([],this.SEGMENTS_PARSERS,e,t,this)}readPolygonPatch(e,t){return ht([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}readLineStringSegment(e,t){return ht([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}interiorParser(e,t){const n=ht(void 0,this.RING_PARSERS,e,t,this);n&&t[t.length-1].push(n)}exteriorParser(e,t){const n=ht(void 0,this.RING_PARSERS,e,t,this);if(n){const r=t[t.length-1];r[0]=n}}readSurface(e,t){const n=ht([null],this.SURFACE_PARSERS,e,t,this);if(n&&n[0]){const r=n[0],s=[r.length];let o,a;for(o=1,a=n.length;o<a;++o)Hn(r,n[o]),s.push(r.length);return new Io(r,"XYZ",s)}}readCurve(e,t){const n=ht([null],this.CURVE_PARSERS,e,t,this);if(n)return new js(n,"XYZ")}readEnvelope(e,t){const n=ht([null],this.ENVELOPE_PARSERS,e,t,this);return nc(n[1][0],n[1][1],n[2][0],n[2][1])}readFlatPos(e,t){let n=dl(e,!1);const r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=r.exec(n);)s.push(parseFloat(o[1])),n=n.substr(o[0].length);if(n!=="")return;const l=t[0].srsName;let u="enu";if(l&&(u=Lt(l).getAxisOrientation()),u==="neu"){let h,d;for(h=0,d=s.length;h<d;h+=3){const f=s[h],p=s[h+1];s[h]=p,s[h+1]=f}}const c=s.length;if(c==2&&s.push(0),c!==0)return s}readFlatPosList(e,t){const n=dl(e,!1).replace(/^\s*|\s*$/g,""),r=t[0],s=r.srsName,o=r.srsDimension;let a="enu";s&&(a=Lt(s).getAxisOrientation());const l=n.split(/\s+/);let u=2;e.getAttribute("srsDimension")?u=af(e.getAttribute("srsDimension")):e.getAttribute("dimension")?u=af(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?u=af(e.parentNode.getAttribute("srsDimension")):o&&(u=af(o));let c,h,d;const f=[];for(let p=0,m=l.length;p<m;p+=u)c=parseFloat(l[p]),h=parseFloat(l[p+1]),d=u===3?parseFloat(l[p+2]):0,a.substr(0,2)==="en"?f.push(c,h,d):f.push(h,c,d);return f}writePos_(e,t,n){const r=n[n.length-1],s=r.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=r.srsName;let l="enu";a&&(l=Lt(a).getAxisOrientation());const u=t.getCoordinates();let c;if(l.substr(0,2)==="en"?c=u[0]+" "+u[1]:c=u[1]+" "+u[0],s){const h=u[2]||0;c+=" "+h}Li(e,c)}getCoords_(e,t,n){let r="enu";t&&(r=Lt(t).getAxisOrientation());let s=r.substr(0,2)==="en"?e[0]+" "+e[1]:e[1]+" "+e[0];if(n){const o=e[2]||0;s+=" "+o}return s}writePosList_(e,t,n){const r=n[n.length-1],s=r.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=r.srsName,l=t.getCoordinates(),u=l.length,c=new Array(u);let h;for(let d=0;d<u;++d)h=l[d],c[d]=this.getCoords_(h,a,s);Li(e,c.join(" "))}writePoint(e,t,n){const s=n[n.length-1].srsName;s&&e.setAttribute("srsName",s);const o=Gi(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,t,n)}writeEnvelope(e,t,n){const s=n[n.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];Ni({node:e},this.ENVELOPE_SERIALIZERS,Jo,a,n,o,this)}writeLinearRing(e,t,n){const s=n[n.length-1].srsName;s&&e.setAttribute("srsName",s);const o=Gi(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,n)}RING_NODE_FACTORY_(e,t,n){const r=t[t.length-1],s=r.node,o=r.exteriorWritten;return o===void 0&&(r.exteriorWritten=!0),Gi(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=t.getLinearRings();Ni({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,n,void 0,this)}else if(e.nodeName==="Surface"){const a=Gi(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,t,n)}}writeCurveOrLineString(e,t,n){const s=n[n.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=Gi(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,t,n)}else if(e.nodeName==="Curve"){const o=Gi(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,n)}}writeMultiSurfaceOrPolygon(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName,a=r.surface;o&&e.setAttribute("srsName",o);const l=t.getPolygons();Ni({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeMultiPoint(e,t,n){const r=n[n.length-1],s=r.srsName,o=r.hasZ;s&&e.setAttribute("srsName",s);const a=t.getPoints();Ni({node:e,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,Ts("pointMember"),a,n,void 0,this)}writeMultiCurveOrLineString(e,t,n){const r=n[n.length-1],s=r.hasZ,o=r.srsName,a=r.curve;o&&e.setAttribute("srsName",o);const l=t.getLineStrings();Ni({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeRing(e,t,n){const r=Gi(e.namespaceURI,"LinearRing");e.appendChild(r),this.writeLinearRing(r,t,n)}writeSurfaceOrPolygonMember(e,t,n){const r=this.GEOMETRY_NODE_FACTORY_(t,n);r&&(e.appendChild(r),this.writeSurfaceOrPolygon(r,t,n))}writePointMember(e,t,n){const r=Gi(e.namespaceURI,"Point");e.appendChild(r),this.writePoint(r,t,n)}writeLineStringOrCurveMember(e,t,n){const r=this.GEOMETRY_NODE_FACTORY_(t,n);r&&(e.appendChild(r),this.writeCurveOrLineString(r,t,n))}writeSurfacePatches_(e,t,n){const r=Gi(e.namespaceURI,"PolygonPatch");e.appendChild(r),this.writeSurfaceOrPolygon(r,t,n)}writeCurveSegments_(e,t,n){const r=Gi(e.namespaceURI,"LineStringSegment");e.appendChild(r),this.writeCurveOrLineString(r,t,n)}writeGeometryElement(e,t,n){const r=n[n.length-1],s=Object.assign({},r);s.node=e;let o;Array.isArray(t)?o=m4(t,r):o=cs(t,!0,r),Ni(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],n,void 0,this)}writeFeatureElement(e,t,n){const r=t.getId();r&&e.setAttribute("fid",r);const s=n[n.length-1],o=s.featureNS,a=t.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(t.hasProperties()){const h=t.getProperties();for(const d in h){const f=h[d];f!==null&&(l.push(d),u.push(f),d==a||typeof f.getSimplifiedGeometry=="function"?d in s.serializers[o]||(s.serializers[o][d]=De(this.writeGeometryElement,this)):d in s.serializers[o]||(s.serializers[o][d]=De(Li)))}}const c=Object.assign({},s);c.node=e,Ni(c,s.serializers,Ts(void 0,o),u,n,l)}writeFeatureMembers_(e,t,n){const r=n[n.length-1],s=r.featureType,o=r.featureNS,a={};a[o]={},a[o][s]=De(this.writeFeatureElement,this);const l=Object.assign({},r);l.node=e,Ni(l,a,Ts(s,o),t,n)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,t,n){const r=t[t.length-1].node;return Gi(this.namespace,tat[r.nodeName])}GEOMETRY_NODE_FACTORY_(e,t,n){const r=t[t.length-1],s=r.multiSurface,o=r.surface,a=r.curve,l=r.multiCurve;return Array.isArray(e)?n="Envelope":(n=e.getType(),n==="MultiPolygon"&&s===!0?n="MultiSurface":n==="Polygon"&&o===!0?n="Surface":n==="LineString"&&a===!0?n="Curve":n==="MultiLineString"&&l===!0&&(n="MultiCurve")),Gi(this.namespace,n)}writeGeometryNode(e,t){t=this.adaptOptions(t);const n=Gi(this.namespace,"geom"),r={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(r,t),this.writeGeometryElement(n,e,[r]),n}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=Gi(this.namespace,"featureMembers");n.setAttributeNS(z0,"xsi:schemaLocation",this.schemaLocation);const r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(r,t),this.writeFeatureMembers_(n,e,[r]),n}}si.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:mi(si.prototype.readFlatPos),posList:mi(si.prototype.readFlatPosList),coordinates:mi(wn.prototype.readFlatCoordinates)}};si.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:si.prototype.interiorParser,exterior:si.prototype.exteriorParser}};si.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:mi(ii.prototype.readPoint),MultiPoint:mi(ii.prototype.readMultiPoint),LineString:mi(ii.prototype.readLineString),MultiLineString:mi(ii.prototype.readMultiLineString),LinearRing:mi(ii.prototype.readLinearRing),Polygon:mi(ii.prototype.readPolygon),MultiPolygon:mi(ii.prototype.readMultiPolygon),Surface:mi(si.prototype.readSurface),MultiSurface:mi(si.prototype.readMultiSurface),Curve:mi(si.prototype.readCurve),MultiCurve:mi(si.prototype.readMultiCurve),Envelope:mi(si.prototype.readEnvelope)}};si.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:ni(si.prototype.curveMemberParser),curveMembers:ni(si.prototype.curveMemberParser)}};si.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:ni(si.prototype.surfaceMemberParser),surfaceMembers:ni(si.prototype.surfaceMemberParser)}};si.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ni(ii.prototype.readLineString),Curve:ni(si.prototype.readCurve)}};si.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ni(ii.prototype.readPolygon),Surface:ni(si.prototype.readSurface)}};si.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:mi(si.prototype.readPatch)}};si.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:mi(si.prototype.readSegment)}};si.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:ni(si.prototype.readFlatPosList),upperCorner:ni(si.prototype.readFlatPosList)}};si.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:mi(si.prototype.readPolygonPatch)}};si.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:VR(si.prototype.readLineStringSegment)}};ii.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:mi(ii.prototype.readFlatLinearRing),Ring:mi(si.prototype.readFlatCurveRing)}};si.prototype.writeFeatures;si.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:De(si.prototype.writeRing),interior:De(si.prototype.writeRing)}};si.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:De(Li),upperCorner:De(Li)}};si.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:De(si.prototype.writeSurfaceOrPolygonMember),polygonMember:De(si.prototype.writeSurfaceOrPolygonMember)}};si.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:De(si.prototype.writePointMember)}};si.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:De(si.prototype.writeLineStringOrCurveMember),curveMember:De(si.prototype.writeLineStringOrCurveMember)}};si.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:De(si.prototype.writeCurveOrLineString),MultiCurve:De(si.prototype.writeMultiCurveOrLineString),Point:De(si.prototype.writePoint),MultiPoint:De(si.prototype.writeMultiPoint),LineString:De(si.prototype.writeCurveOrLineString),MultiLineString:De(si.prototype.writeMultiCurveOrLineString),LinearRing:De(si.prototype.writeLinearRing),Polygon:De(si.prototype.writeSurfaceOrPolygon),MultiPolygon:De(si.prototype.writeMultiSurfaceOrPolygon),Surface:De(si.prototype.writeSurfaceOrPolygon),MultiSurface:De(si.prototype.writeMultiSurfaceOrPolygon),Envelope:De(si.prototype.writeEnvelope)}};const _n=si,b4=_n;b4.prototype.writeFeatures;b4.prototype.writeFeaturesNode;const iat=b4,ls=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],nat="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",rat={rte:XRe,trk:YRe,wpt:ZRe},sat=nt(ls,{rte:ni(XRe),trk:ni(YRe),wpt:ni(ZRe)}),oat=nt(ls,{text:Ce(_t,"linkText"),type:Ce(_t,"linkType")}),aat=nt(ls,{name:Ce(_t),email:Oat,link:AC}),lat=nt(ls,{name:Ce(_t),desc:Ce(_t),author:Ce(Lat),copyright:Ce(Mat),link:AC,time:Ce(KD),keywords:Ce(_t),bounds:Iat,extensions:JD}),uat=nt(ls,{year:Ce(Ps),license:Ce(_t)}),cat=nt(ls,{rte:De($at),trk:De(Bat),wpt:De(zat)});class hat extends TC{constructor(e){super(),e=e||{},this.dataProjection=Lt("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,n=e.length;t<n;++t){const r=e[t];if(this.readExtensions_){const s=r.get("extensionsNode_")||null;this.readExtensions_(r,s)}r.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Qu(e)):Ju(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const n=this.readMetadataFromNode(t);if(n)return n}return null}readMetadataFromNode(e){if(!ls.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(ls.includes(t.namespaceURI)&&t.localName==="metadata")return ht({},lat,t,[]);return null}readFeatureFromNode(e,t){if(!ls.includes(e.namespaceURI))return null;const n=rat[e.localName];if(!n)return null;const r=n(e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_([r]),r):null}readFeaturesFromNode(e,t){if(!ls.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const n=ht([],sat,e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=Gi("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",z0),n.setAttributeNS(z0,"xsi:schemaLocation",nat),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),Ni({node:n},cat,Dat,e,[t]),n}}const dat=nt(ls,{name:Ce(_t),cmt:Ce(_t),desc:Ce(_t),src:Ce(_t),link:AC,number:Ce(Ps),extensions:JD,type:Ce(_t),rtept:Pat}),fat=nt(ls,{ele:Ce(An),time:Ce(KD)}),pat=nt(ls,{name:Ce(_t),cmt:Ce(_t),desc:Ce(_t),src:Ce(_t),link:AC,number:Ce(Ps),type:Ce(_t),extensions:JD,trkseg:Nat}),gat=nt(ls,{trkpt:Fat}),mat=nt(ls,{ele:Ce(An),time:Ce(KD)}),yat=nt(ls,{ele:Ce(An),time:Ce(KD),magvar:Ce(An),geoidheight:Ce(An),name:Ce(_t),cmt:Ce(_t),desc:Ce(_t),src:Ce(_t),link:AC,sym:Ce(_t),type:Ce(_t),fix:Ce(_t),sat:Ce(Ps),hdop:Ce(An),vdop:Ce(An),pdop:Ce(An),ageofdgpsdata:Ce(An),dgpsid:Ce(Ps),extensions:JD}),vat=["text","type"],_at=nt(ls,{text:De(Li),type:De(Li)}),bat=nt(ls,["name","cmt","desc","src","link","number","type","rtept"]),xat=nt(ls,{name:De(Li),cmt:De(Li),desc:De(Li),src:De(Li),link:De(E4),number:De(HR),type:De(Li),rtept:HRe(De(C4))}),wat=nt(ls,["ele","time"]),Eat=nt(ls,["name","cmt","desc","src","link","number","type","trkseg"]),Cat=nt(ls,{name:De(Li),cmt:De(Li),desc:De(Li),src:De(Li),link:De(E4),number:De(HR),type:De(Li),trkseg:HRe(De(jat))}),Sat=Ts("trkpt"),Tat=nt(ls,{trkpt:De(C4)}),Aat=nt(ls,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Rat=nt(ls,{ele:De(Dl),time:De(Kot),magvar:De(Dl),geoidheight:De(Dl),name:De(Li),cmt:De(Li),desc:De(Li),src:De(Li),link:De(E4),sym:De(Li),type:De(Li),fix:De(Li),sat:De(HR),hdop:De(Dl),vdop:De(Dl),pdop:De(Dl),ageofdgpsdata:De(Dl),dgpsid:De(HR)}),kat={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Dat(i,e,t){const n=i.getGeometry();if(n){const r=kat[n.getType()];if(r){const s=e[e.length-1].node;return Gi(s.namespaceURI,r)}}}function x4(i,e,t,n){return i.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in n?(i.push(n.ele),delete n.ele,e.hasZ=!0):i.push(0),"time"in n?(i.push(n.time),delete n.time,e.hasM=!0):i.push(0),i}function w4(i,e,t){let n="XY",r=2;if(i.hasZ&&i.hasM?(n="XYZM",r=4):i.hasZ?(n="XYZ",r=3):i.hasM&&(n="XYM",r=3),r!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*r]=e[s*4],e[s*r+1]=e[s*4+1],i.hasZ&&(e[s*r+2]=e[s*4+2]),i.hasM&&(e[s*r+2]=e[s*4+3]);if(e.length=e.length/4*r,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*r}return n}function Lat(i,e){const t=ht({},aat,i,e);if(t)return t}function Mat(i,e){const t=ht({},uat,i,e);if(t){const n=i.getAttribute("author");return n!==null&&(t.author=n),t}}function Iat(i,e){const t=e[e.length-1],n=i.getAttribute("minlat"),r=i.getAttribute("minlon"),s=i.getAttribute("maxlat"),o=i.getAttribute("maxlon");r!==null&&n!==null&&o!==null&&s!==null&&(t.bounds=[[parseFloat(r),parseFloat(n)],[parseFloat(o),parseFloat(s)]])}function Oat(i,e){const t=e[e.length-1],n=i.getAttribute("id"),r=i.getAttribute("domain");n!==null&&r!==null&&(t.email=`${n}@${r}`)}function AC(i,e){const t=e[e.length-1],n=i.getAttribute("href");n!==null&&(t.link=n),Vl(oat,i,e)}function JD(i,e){const t=e[e.length-1];t.extensionsNode_=i}function Pat(i,e){const t=ht({},fat,i,e);if(t){const n=e[e.length-1],r=n.flatCoordinates,s=n.layoutOptions;x4(r,s,i,t)}}function Fat(i,e){const t=ht({},mat,i,e);if(t){const n=e[e.length-1],r=n.flatCoordinates,s=n.layoutOptions;x4(r,s,i,t)}}function Nat(i,e){const t=e[e.length-1];Vl(gat,i,e);const n=t.flatCoordinates;t.ends.push(n.length)}function XRe(i,e){const t=e[0],n=ht({flatCoordinates:[],layoutOptions:{}},dat,i,e);if(!n)return;const r=n.flatCoordinates;delete n.flatCoordinates;const s=n.layoutOptions;delete n.layoutOptions;const o=w4(s,r),a=new js(r,o);cs(a,!1,t);const l=new Kr(a);return l.setProperties(n,!0),l}function YRe(i,e){const t=e[0],n=ht({flatCoordinates:[],ends:[],layoutOptions:{}},pat,i,e);if(!n)return;const r=n.flatCoordinates;delete n.flatCoordinates;const s=n.ends;delete n.ends;const o=n.layoutOptions;delete n.layoutOptions;const a=w4(o,r,s),l=new Lu(r,a,s);cs(l,!1,t);const u=new Kr(l);return u.setProperties(n,!0),u}function ZRe(i,e){const t=e[0],n=ht({},yat,i,e);if(!n)return;const r={},s=x4([],r,i,n),o=w4(r,s),a=new ps(s,o);cs(a,!1,t);const l=new Kr(a);return l.setProperties(n,!0),l}function E4(i,e,t){i.setAttribute("href",e);const r=t[t.length-1].properties,s=[r.linkText,r.linkType];Ni({node:i},_at,Jo,s,t,vat)}function C4(i,e,t){const n=t[t.length-1],s=n.node.namespaceURI,o=n.properties;switch(i.setAttributeNS(null,"lat",String(e[1])),i.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=i.nodeName=="rtept"?wat[s]:Aat[s],u=Wl(o,l);Ni({node:i,properties:o},Rat,Jo,u,t,l)}function $at(i,e,t){const n=t[0],r=e.getProperties(),s={node:i};s.properties=r;const o=e.getGeometry();if(o.getType()=="LineString"){const c=cs(o,!0,n);s.geometryLayout=c.getLayout(),r.rtept=c.getCoordinates()}const a=t[t.length-1].node,l=bat[a.namespaceURI],u=Wl(r,l);Ni(s,xat,Jo,u,t,l)}function Bat(i,e,t){const n=t[0],r=e.getProperties(),s={node:i};s.properties=r;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const c=cs(o,!0,n);r.trkseg=c.getLineStrings()}const a=t[t.length-1].node,l=Eat[a.namespaceURI],u=Wl(r,l);Ni(s,Cat,Jo,u,t,l)}function jat(i,e,t){const n={node:i};n.geometryLayout=e.getLayout(),n.properties={},Ni(n,Tat,Sat,e.getCoordinates(),t)}function zat(i,e,t){const n=t[0],r=t[t.length-1];r.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=cs(s,!0,n);r.geometryLayout=o.getLayout(),C4(i,o.getCoordinates(),t)}}const Gat=hat;class S4 extends EC{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(wT(e),this.adaptOptions(t))}readFeatureFromText(e,t){return hi()}readFeatures(e,t){return this.readFeaturesFromText(wT(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return hi()}readGeometry(e,t){return this.readGeometryFromText(wT(e),this.adaptOptions(t))}readGeometryFromText(e,t){return hi()}readProjection(e){return this.readProjectionFromText(wT(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return hi()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return hi()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return hi()}}function wT(i){return typeof i=="string"?i:""}const Uat=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,qat=/^H.([A-Z]{3}).*?:(.*)/,Vat=/^HFDTE(\d{2})(\d{2})(\d{2})/,Hat=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,Wat=/\r\n|\r|\n/;class Xat extends S4{constructor(e){super(),e=e||{},this.dataProjection=Lt("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(e,t){const n=this.altitudeMode_,r=e.split(Wat),s={},o=[];let a=2e3,l=0,u=1,c=-1,h,d;for(h=0,d=r.length;h<d;++h){const y=r[h];let v;if(y.charAt(0)=="B"){if(v=Uat.exec(y),v){const b=parseInt(v[1],10),x=parseInt(v[2],10),w=parseInt(v[3],10);let C=parseInt(v[4],10)+parseInt(v[5],10)/6e4;this.lad_&&(C+=parseInt(y.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),v[6]=="S"&&(C=-C);let D=parseInt(v[7],10)+parseInt(v[8],10)/6e4;if(this.lod_&&(D+=parseInt(y.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),v[9]=="W"&&(D=-D),o.push(D,C),n!="none"){let A;n=="gps"?A=parseInt(v[11],10):n=="barometric"?A=parseInt(v[12],10):A=0,o.push(A)}let R=Date.UTC(a,l,u,b,x,w);R<c&&(R=Date.UTC(a,l,u+1,b,x,w)),o.push(R/1e3),c=R}}else if(y.charAt(0)=="H")v=Hat.exec(y),v?(u=parseInt(v[1],10),l=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=Vat.exec(y),v?(u=parseInt(v[1],10),l=parseInt(v[2],10)-1,a=2e3+parseInt(v[3],10)):(v=qat.exec(y),v&&(s[v[1]]=v[2].trim())));else if(y.charAt(0)=="I"){const b=parseInt(y.slice(1,3),10);for(let x=0;x<b;x++){const w=y.slice(7+x*7,10+x*7);if(w==="LAD"||w==="LOD"){const C=parseInt(y.slice(3+x*7,5+x*7),10)-1,D=parseInt(y.slice(5+x*7,7+x*7),10);w==="LAD"?(this.lad_=!0,this.ladStart_=C,this.ladStop_=D):w==="LOD"&&(this.lod_=!0,this.lodStart_=C,this.lodStop_=D)}}}}if(o.length===0)return null;const f=n=="none"?"XYM":"XYZM",p=new js(o,f),m=new Kr(cs(p,!1,t));return m.setProperties(s,!0),m}readFeaturesFromText(e,t){const n=this.readFeatureFromText(e,t);return n?[n]:[]}}const Yat=Xat,ao={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},G0={};G0[ao.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};G0[ao.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};G0[ao.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};G0.none={none:{supports:[],formats:[],qualities:[]}};const Zat=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,d_e=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Kat=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function Jat(i){let e=i.getComplianceLevelSupportedFeatures();return e===void 0&&(e=G0[ao.VERSION1].level0),{url:i.imageInfo["@id"]===void 0?void 0:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,i.imageInfo.formats===void 0?[]:i.imageInfo.formats],qualities:[...e.qualities,i.imageInfo.qualities===void 0?[]:i.imageInfo.qualities],resolutions:i.imageInfo.scale_factors,tileSize:i.imageInfo.tile_width!==void 0?i.imageInfo.tile_height!==void 0?[i.imageInfo.tile_width,i.imageInfo.tile_height]:[i.imageInfo.tile_width,i.imageInfo.tile_width]:i.imageInfo.tile_height!=null?[i.imageInfo.tile_height,i.imageInfo.tile_height]:void 0}}function Qat(i){const e=i.getComplianceLevelSupportedFeatures(),t=Array.isArray(i.imageInfo.profile)&&i.imageInfo.profile.length>1,n=t&&i.imageInfo.profile[1].supports?i.imageInfo.profile[1].supports:[],r=t&&i.imageInfo.profile[1].formats?i.imageInfo.profile[1].formats:[],s=t&&i.imageInfo.profile[1].qualities?i.imageInfo.profile[1].qualities:[];return{url:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(o){return o.width})[0],i.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...e.supports,...n],formats:[...e.formats,...r],qualities:[...e.qualities,...s]}}function elt(i){const e=i.getComplianceLevelSupportedFeatures(),t=i.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...i.imageInfo.extraFormats],n=i.imageInfo.preferredFormats!==void 0&&Array.isArray(i.imageInfo.preferredFormats)&&i.imageInfo.preferredFormats.length>0?i.imageInfo.preferredFormats.filter(function(r){return["jpg","png","gif"].includes(r)}).reduce(function(r,s){return r===void 0&&t.includes(s)?s:r},void 0):void 0;return{url:i.imageInfo.id,sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(r){return[r.width,r.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(r){return r.width})[0],i.imageInfo.tiles.map(function(r){return r.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(r){return r.scaleFactors})[0],supports:i.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...i.imageInfo.extraFeatures],formats:t,qualities:i.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...i.imageInfo.extraQualities],preferredFormat:n}}const QD={};QD[ao.VERSION1]=Jat;QD[ao.VERSION2]=Qat;QD[ao.VERSION3]=elt;class tlt{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return ao.VERSION1;case"http://iiif.io/api/image/2/context.json":return ao.VERSION2;case"http://iiif.io/api/image/3/context.json":return ao.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(ao.VERSION1)&&this.imageInfo.identifier)return ao.VERSION1;break}sn(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case ao.VERSION1:if(Zat.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ao.VERSION3:if(Kat.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ao.VERSION2:if(typeof this.imageInfo.profile=="string"&&d_e.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&d_e.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const t=this.getComplianceLevelEntryFromProfile(e);if(t===void 0)return;const n=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return t===void 0?G0.none.none:G0[e][t]}getTileSourceOptions(e){const t=e||{},n=this.getImageApiVersion();if(n===void 0)return;const r=n===void 0?void 0:QD[n](this);if(r!==void 0)return{url:r.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:r.sizes,format:t.format!==void 0&&r.formats.includes(t.format)?t.format:r.preferredFormat!==void 0?r.preferredFormat:"jpg",supports:r.supports,quality:t.quality&&r.qualities.includes(t.quality)?t.quality:r.qualities.includes("native")?"native":"default",resolutions:Array.isArray(r.resolutions)?r.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:r.tileSize}}}const ilt=tlt,Bf=["http://www.google.com/kml/ext/2.2"],oi=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],nlt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",f_e={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},rlt=nt(oi,{ExtendedData:hke,Region:dke,MultiGeometry:Ce(lke,"geometry"),LineString:Ce(oke,"geometry"),LinearRing:Ce(ake,"geometry"),Point:Ce(uke,"geometry"),Polygon:Ce(cke,"geometry"),Style:Ce(R4),StyleMap:zlt,address:Ce(_t),description:Ce(_t),name:Ce(_t),open:Ce(Og),phoneNumber:Ce(_t),styleUrl:Ce(tke),visibility:Ce(Og)},nt(Bf,{MultiTrack:Ce(Rlt,"geometry"),Track:Ce(ske,"geometry")})),slt=nt(oi,{ExtendedData:hke,Region:dke,Link:Qlt,address:Ce(_t),description:Ce(_t),name:Ce(_t),open:Ce(Og),phoneNumber:Ce(_t),visibility:Ce(Og)}),olt=nt(oi,{href:Ce(eke)}),alt=nt(oi,{Altitude:Ce(An),Longitude:Ce(An),Latitude:Ce(An),Tilt:Ce(An),AltitudeMode:Ce(_t),Heading:Ce(An),Roll:Ce(An)}),KRe=nt(oi,{LatLonAltBox:Hlt,Lod:Xlt}),llt=nt(oi,["Document","Placemark"]),ult=nt(oi,{Document:De(aut),Placemark:De(gke)});let R_,DA=null,ZP,gE,mE,yE,WR,KP=null,T4,JP=null,QP,a0=null,p_e=null,eF=null;function XR(i){return 32/Math.min(i[0],i[1])}function clt(){R_=[255,255,255,1],DA=new Zc({color:R_}),ZP=[20,2],gE="pixels",mE="pixels",yE=[64,64],WR="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",KP=new WD({anchor:ZP,anchorOrigin:"bottom-left",anchorXUnits:gE,anchorYUnits:mE,crossOrigin:"anonymous",rotation:0,scale:XR(yE),size:yE,src:WR}),T4="NO_IMAGE",JP=new ec({color:R_,width:1}),QP=new ec({color:[51,51,51,1],width:2}),a0=new i2({font:"bold 16px Helvetica",fill:DA,stroke:QP,scale:.8}),p_e=new Do({fill:DA,image:KP,text:a0,stroke:JP,zIndex:0}),eF=[p_e]}let ET;function hlt(i){return i}class dlt extends TC{constructor(e){super(),e=e||{},eF||clt(),this.dataProjection=Lt("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:eF,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:hlt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=nt(oi,{Document:VR(this.readDocumentOrFolder_,this),Folder:VR(this.readDocumentOrFolder_,this),Placemark:ni(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=ht([],n,e,t,this);if(r)return r}readPlacemark_(e,t){const n=ht({geometry:null},rlt,e,t,this);if(!n)return;const r=new Kr,s=e.getAttribute("id");s!==null&&r.setId(s);const o=t[0],a=n.geometry;if(a&&cs(a,!1,o),r.setGeometry(a),delete n.geometry,this.extractStyles_){const l=n.Style,u=n.styleUrl,c=plt(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(c)}return delete n.Style,r.setProperties(n,!0),r}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const r=R4.call(this,e,t);if(r){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+n,o).href:s="#"+n,this.sharedStyles_[s]=r}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const r=nke.call(this,e,t);if(!r)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+n,o).href:s="#"+n,this.sharedStyles_[s]=r}readFeatureFromNode(e,t){if(!oi.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!oi.includes(e.namespaceURI))return[];let n;const r=e.localName;if(r=="Document"||r=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(r=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(r=="kml"){n=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&Hn(n,o)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=Qu(e);return this.readNameFromDocument(t)}return Ju(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(oi.includes(t.namespaceURI)&&t.localName=="name")return _t(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(oi.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const r=this.readNameFromNode(t);if(r)return r}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=Qu(e);Hn(t,this.readNetworkLinksFromDocument(n))}else Ju(e)?Hn(t,this.readNetworkLinksFromDocument(e)):Hn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Hn(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(oi.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const r=ht({},slt,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;oi.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&Hn(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=Qu(e);Hn(t,this.readRegionFromDocument(n))}else Ju(e)?Hn(t,this.readRegionFromDocument(e)):Hn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Hn(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(oi.includes(n.namespaceURI)&&n.localName=="Region"){const r=ht({},KRe,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;oi.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&Hn(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=Qu(e);Hn(t,this.readCameraFromDocument(n))}else Ju(e)?Hn(t,this.readCameraFromDocument(e)):Hn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&Hn(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(oi.includes(n.namespaceURI)&&n.localName==="Camera"){const r=ht({},alt,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;oi.includes(n.namespaceURI)&&(r==="Document"||r==="Folder"||r==="Placemark"||r==="kml")&&Hn(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=Gi(oi[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",Bf[0]),n.setAttributeNS(r,"xmlns:xsi",z0),n.setAttributeNS(z0,"xsi:schemaLocation",nlt);const s={node:n},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=llt[n.namespaceURI],l=Wl(o,a);return Ni(s,ult,Jo,l,[t],a,this),n}}function flt(i,e){const t=[0,0];let n="start";const r=i.getImage();if(r){const a=r.getSize();if(a&&a.length==2){const l=r.getScaleArray(),u=r.getAnchor();t[0]=l[0]*(a[0]-u[0]),t[1]=l[1]*(a[1]/2-u[1]),n="left"}}let s=i.getText();return s?(s=s.clone(),s.setFont(s.getFont()||a0.getFont()),s.setScale(s.getScale()||a0.getScale()),s.setFill(s.getFill()||a0.getFill()),s.setStroke(s.getStroke()||QP)):s=a0.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(n),new Do({image:r,text:s})}function plt(i,e,t,n,r){return function(s,o){let a=r,l="",u=[];if(a){const h=s.getGeometry();if(h)if(h instanceof ba)u=h.getGeometriesArrayRecursive().filter(function(d){const f=d.getType();return f==="Point"||f==="MultiPoint"}),a=u.length>0;else{const d=h.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(ET||(ET=document.createElement("textarea")),ET.innerHTML=l,l=ET.value));let c=t;if(i?c=i:e&&(c=JRe(e,t,n)),a){const h=flt(c[0],l);if(u.length>0){h.setGeometry(new ba(u));const d=new Do({geometry:c[0].getGeometry(),image:null,fill:c[0].getFill(),stroke:c[0].getStroke(),text:null});return[h,d].concat(c.slice(1))}return h}return c}}function JRe(i,e,t){return Array.isArray(i)?i:typeof i=="string"?JRe(t[i],e,t):e}function eL(i){const e=dl(i,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function QRe(i){let e=dl(i,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let r;for(;r=n.exec(e);){const s=parseFloat(r[1]),o=parseFloat(r[2]),a=r[3]?parseFloat(r[3]):0;t.push(s,o,a),e=e.substr(r[0].length)}if(e==="")return t}function eke(i){const e=dl(i,!1).trim();let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function tke(i){const e=dl(i,!1).trim().replace(/^(?!.*#)/,"#");let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function glt(i){const e=i.getAttribute("xunits"),t=i.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(i.getAttribute("x")),xunits:f_e[e],y:parseFloat(i.getAttribute("y")),yunits:f_e[t],origin:n}}function ike(i){return An(i)}const mlt=nt(oi,{Pair:jlt});function nke(i,e){return ht(void 0,mlt,i,e,this)}const ylt=nt(oi,{Icon:Ce(Llt),color:Ce(eL),heading:Ce(An),hotSpot:Ce(glt),scale:Ce(ike)});function vlt(i,e){const t=ht({},ylt,i,e);if(!t)return;const n=e[e.length-1],r="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(r).length>0;let o;const a=r.href;a?o=a:s&&(o=WR);let l,u,c,h="bottom-left";const d=t.hotSpot;d?(l=[d.x,d.y],u=d.xunits,c=d.yunits,h=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=ZP,u=gE,c=mE):o.includes("arrow-reverse")?(l=[54,42],u=gE,c=mE):o.includes("paddle")&&(l=[32,1],u=gE,c=mE));let f;const p=r.x,m=r.y;p!==void 0&&m!==void 0&&(f=[p,m]);let y;const v=r.w,b=r.h;v!==void 0&&b!==void 0&&(y=[v,b]);let x;const w=t.heading;w!==void 0&&(x=Bc(w));const C=t.scale,D=t.color;if(s){o==WR&&(y=yE);const R=new WD({anchor:l,anchorOrigin:h,anchorXUnits:u,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:f,offsetOrigin:"bottom-left",rotation:x,scale:C,size:y,src:this.iconUrlFunction_(o),color:D}),A=R.getScaleArray()[0],L=R.getSize();if(L===null){const O=R.getImageState();if(O===Ut.IDLE||O===Ut.LOADING){const $=function(){const q=R.getImageState();if(!(q===Ut.IDLE||q===Ut.LOADING)){const M=R.getSize();if(M&&M.length==2){const F=XR(M);R.setScale(A*F)}R.unlistenImageChange($)}};R.listenImageChange($),O===Ut.IDLE&&R.load()}}else if(L.length==2){const O=XR(L);R.setScale(A*O)}n.imageStyle=R}else n.imageStyle=T4}const _lt=nt(oi,{color:Ce(eL),scale:Ce(ike)});function blt(i,e){const t=ht({},_lt,i,e);if(!t)return;const n=e[e.length-1],r=new i2({fill:new Zc({color:"color"in t?t.color:R_}),scale:t.scale});n.textStyle=r}const xlt=nt(oi,{color:Ce(eL),width:Ce(An)});function wlt(i,e){const t=ht({},xlt,i,e);if(!t)return;const n=e[e.length-1],r=new ec({color:"color"in t?t.color:R_,width:"width"in t?t.width:1});n.strokeStyle=r}const Elt=nt(oi,{color:Ce(eL),fill:Ce(Og),outline:Ce(Og)});function Clt(i,e){const t=ht({},Elt,i,e);if(!t)return;const n=e[e.length-1],r=new Zc({color:"color"in t?t.color:R_});n.fillStyle=r;const s=t.fill;s!==void 0&&(n.fill=s);const o=t.outline;o!==void 0&&(n.outline=o)}const Slt=nt(oi,{coordinates:mi(QRe)});function rke(i,e){return ht(null,Slt,i,e)}function Tlt(i,e){const n=e[e.length-1].coordinates,r=dl(i,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),u=parseFloat(o[3]);n.push([a,l,u])}else n.push([])}const Alt=nt(Bf,{Track:ni(ske)});function Rlt(i,e){const t=ht([],Alt,i,e);if(t)return new Lu(t)}const klt=nt(oi,{when:eut},nt(Bf,{coord:Tlt}));function ske(i,e){const t=ht({coordinates:[],whens:[]},klt,i,e);if(!t)return;const n=[],r=t.coordinates,s=t.whens;for(let o=0,a=Math.min(r.length,s.length);o<a;++o)r[o].length==3&&n.push(r[o][0],r[o][1],r[o][2],s[o]);return new js(n,"XYZM")}const Dlt=nt(oi,{href:Ce(eke)},nt(Bf,{x:Ce(An),y:Ce(An),w:Ce(An),h:Ce(An)}));function Llt(i,e){const t=ht({},Dlt,i,e);return t||null}const Mlt=nt(oi,{coordinates:mi(QRe)});function A4(i,e){return ht(null,Mlt,i,e)}const tL=nt(oi,{extrude:Ce(Og),tessellate:Ce(Og),altitudeMode:Ce(_t)});function oke(i,e){const t=ht({},tL,i,e),n=A4(i,e);if(n){const r=new js(n,"XYZ");return r.setProperties(t,!0),r}}function ake(i,e){const t=ht({},tL,i,e),n=A4(i,e);if(n){const r=new Io(n,"XYZ",[n.length]);return r.setProperties(t,!0),r}}const Ilt=nt(oi,{LineString:ni(oke),LinearRing:ni(ake),MultiGeometry:ni(lke),Point:ni(uke),Polygon:ni(cke)});function lke(i,e){const t=ht([],Ilt,i,e);if(!t)return null;if(t.length===0)return new ba(t);let n,r=!0;const s=t[0].getType();let o;for(let a=1,l=t.length;a<l;++a)if(o=t[a],o.getType()!=s){r=!1;break}if(r){let a,l;if(s=="Point"){const u=t[0];a=u.getLayout(),l=u.getFlatCoordinates();for(let c=1,h=t.length;c<h;++c)o=t[c],Hn(l,o.getFlatCoordinates());n=new ud(l,a),AI(n,t)}else if(s=="LineString")n=new Lu(t),AI(n,t);else if(s=="Polygon")n=new nh(t),AI(n,t);else if(s=="GeometryCollection")n=new ba(t);else throw new Error("Unknown geometry type found")}else n=new ba(t);return n}function uke(i,e){const t=ht({},tL,i,e),n=A4(i,e);if(n){const r=new ps(n,"XYZ");return r.setProperties(t,!0),r}}const Olt=nt(oi,{innerBoundaryIs:Zlt,outerBoundaryIs:Jlt});function cke(i,e){const t=ht({},tL,i,e),n=ht([null],Olt,i,e);if(n&&n[0]){const r=n[0],s=[r.length];for(let a=1,l=n.length;a<l;++a)Hn(r,n[a]),s.push(r.length);const o=new Io(r,"XYZ",s);return o.setProperties(t,!0),o}}const Plt=nt(oi,{IconStyle:vlt,LabelStyle:blt,LineStyle:wlt,PolyStyle:Clt});function R4(i,e){const t=ht({},Plt,i,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:DA;const r=t.fill;r!==void 0&&!r&&(n=null);let s;"imageStyle"in t?t.imageStyle!=T4&&(s=t.imageStyle):s=KP;const o="textStyle"in t?t.textStyle:a0,a="strokeStyle"in t?t.strokeStyle:JP,l=t.outline;return l!==void 0&&!l?[new Do({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const d=c;return new ba(d.getGeometriesArrayRecursive().filter(function(f){const p=f.getType();return p!=="Polygon"&&p!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return c},fill:n,image:s,stroke:a,text:o,zIndex:void 0}),new Do({geometry:function(u){const c=u.getGeometry(),h=c.getType();if(h==="GeometryCollection"){const d=c;return new ba(d.getGeometriesArrayRecursive().filter(function(f){const p=f.getType();return p==="Polygon"||p==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return c},fill:n,stroke:null,zIndex:void 0})]:[new Do({fill:n,image:s,stroke:a,text:o,zIndex:void 0})]}function AI(i,e){const t=e.length,n=new Array(e.length),r=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let u=0;u<t;++u){const c=e[u];n[u]=c.get("extrude"),r[u]=c.get("tessellate"),s[u]=c.get("altitudeMode"),o=o||n[u]!==void 0,a=a||r[u]!==void 0,l=l||s[u]}o&&i.set("extrude",n),a&&i.set("tessellate",r),l&&i.set("altitudeMode",s)}const Flt=nt(oi,{displayName:Ce(_t),value:Ce(_t)});function Nlt(i,e){const t=i.getAttribute("name");Vl(Flt,i,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const $lt=nt(oi,{Data:Nlt,SchemaData:Ult});function hke(i,e){Vl($lt,i,e)}function dke(i,e){Vl(KRe,i,e)}const Blt=nt(oi,{Style:Ce(R4),key:Ce(_t),styleUrl:Ce(tke)});function jlt(i,e){const t=ht({},Blt,i,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const r=t.styleUrl;r&&(e[e.length-1]=r);const s=t.Style;s&&(e[e.length-1]=s)}}function zlt(i,e){const t=nke.call(this,i,e);if(!t)return;const n=e[e.length-1];if(Array.isArray(t))n.Style=t;else if(typeof t=="string")n.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const Glt=nt(oi,{SimpleData:qlt});function Ult(i,e){Vl(Glt,i,e)}function qlt(i,e){const t=i.getAttribute("name");if(t!==null){const n=_t(i),r=e[e.length-1];r[t]=n}}const Vlt=nt(oi,{altitudeMode:Ce(_t),minAltitude:Ce(An),maxAltitude:Ce(An),north:Ce(An),south:Ce(An),east:Ce(An),west:Ce(An)});function Hlt(i,e){const t=ht({},Vlt,i,e);if(!t)return;const n=e[e.length-1],r=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=r,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const Wlt=nt(oi,{minLodPixels:Ce(An),maxLodPixels:Ce(An),minFadeExtent:Ce(An),maxFadeExtent:Ce(An)});function Xlt(i,e){const t=ht({},Wlt,i,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const Ylt=nt(oi,{LinearRing:ni(rke)});function Zlt(i,e){const t=ht([],Ylt,i,e);t.length>0&&e[e.length-1].push(...t)}const Klt=nt(oi,{LinearRing:mi(rke)});function Jlt(i,e){const t=ht(void 0,Klt,i,e);if(t){const n=e[e.length-1];n[0]=t}}function Qlt(i,e){Vl(olt,i,e)}function eut(i,e){const n=e[e.length-1].whens,r=dl(i,!1),s=Date.parse(r);n.push(isNaN(s)?0:s)}function iL(i,e){const t=Yc(e),r=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(r[s]).toString(16);r[s]=o.length==1?"0"+o:o}Li(i,r.join(""))}function tut(i,e,t){const n=t[t.length-1],r=n.layout,s=n.stride;let o;if(r=="XY"||r=="XYM")o=2;else if(r=="XYZ"||r=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let u=1;u<o;++u)l+=","+e[u];for(let u=s;u<a;u+=s){l+=" "+e[u];for(let c=1;c<o;++c)l+=","+e[u+c]}}Li(i,l)}const LA=nt(oi,{Data:De(iut),value:De(rut),displayName:De(nut)});function iut(i,e,t){i.setAttribute("name",e.name);const n={node:i},r=e.value;typeof r=="object"?(r!==null&&r.displayName&&Ni(n,LA,Jo,[r.displayName],t,["displayName"]),r!==null&&r.value&&Ni(n,LA,Jo,[r.value],t,["value"])):Ni(n,LA,Jo,[r],t,["value"])}function nut(i,e){Zot(i,e)}function rut(i,e){Li(i,e)}const sut=nt(oi,{Placemark:De(gke)}),out=function(i,e,t){const n=e[e.length-1].node;return Gi(n.namespaceURI,"Placemark")};function aut(i,e,t){Ni({node:i},sut,out,e,t,void 0,this)}const lut=Ts("Data");function uut(i,e,t){const n={node:i},r=e.names,s=e.values,o=r.length;for(let a=0;a<o;a++)Ni(n,LA,lut,[{name:r[a],value:s[a]}],t)}const g_e=nt(oi,["href"],nt(Bf,["x","y","w","h"])),m_e=nt(oi,{href:De(Li)},nt(Bf,{x:De(Dl),y:De(Dl),w:De(Dl),h:De(Dl)})),cut=function(i,e,t){return Gi(Bf[0],"gx:"+t)};function hut(i,e,t){const n={node:i},r=t[t.length-1].node;let s=g_e[r.namespaceURI],o=Wl(e,s);Ni(n,m_e,Jo,o,t,s),s=g_e[Bf[0]],o=Wl(e,s),Ni(n,m_e,cut,o,t,s)}const dut=nt(oi,["scale","heading","Icon","color","hotSpot"]),fut=nt(oi,{Icon:De(hut),color:De(iL),heading:De(Dl),hotSpot:De(jut),scale:De(yke)});function put(i,e,t){const n={node:i},r={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const y=e.getAnchor(),v=e.getOrigin();if(v&&a&&v[0]!==0&&v[1]!==o[1]&&(l.x=v[0],l.y=a[1]-(v[1]+o[1])),y&&(y[0]!==o[0]/2||y[1]!==o[1]/2)){const b={x:y[0],xunits:"pixels",y:o[1]-y[1],yunits:"pixels"};r.hotSpot=b}}r.Icon=l;let u=e.getScaleArray()[0],c=o;if(c===null&&(c=yE),c.length==2){const y=XR(c);u=u/y}u!==1&&(r.scale=u);const h=e.getRotation();h!==0&&(r.heading=h);const d=e.getColor();d&&(r.color=d);const f=t[t.length-1].node,p=dut[f.namespaceURI],m=Wl(r,p);Ni(n,fut,Jo,m,t,p)}const gut=nt(oi,["color","scale"]),mut=nt(oi,{color:De(iL),scale:De(yke)});function yut(i,e,t){const n={node:i},r={},s=e.getFill();s&&(r.color=s.getColor());const o=e.getScale();o&&o!==1&&(r.scale=o);const a=t[t.length-1].node,l=gut[a.namespaceURI],u=Wl(r,l);Ni(n,mut,Jo,u,t,l)}const vut=nt(oi,["color","width"]),_ut=nt(oi,{color:De(iL),width:De(Dl)});function but(i,e,t){const n={node:i},r={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=vut[s.namespaceURI],a=Wl(r,o);Ni(n,_ut,Jo,a,t,o)}const xut={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},fke=function(i,e,t){if(i){const n=e[e.length-1].node;return Gi(n.namespaceURI,xut[i.getType()])}},wut=Ts("Point"),Eut=Ts("LineString"),Cut=Ts("LinearRing"),Sut=Ts("Polygon"),Tut=nt(oi,{LineString:De(k_),Point:De(k_),Polygon:De(mke),GeometryCollection:De(pke)});function pke(i,e,t){const n={node:i},r=e.getType();let s=[],o;if(r==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=fke;else if(r==="MultiPoint")s=e.getPoints(),o=wut;else if(r==="MultiLineString")s=e.getLineStrings(),o=Eut;else if(r==="MultiPolygon")s=e.getPolygons(),o=Sut;else throw new Error("Unknown geometry type");Ni(n,Tut,o,s,t)}const Aut=nt(oi,{LinearRing:De(k_)});function y_e(i,e,t){Ni({node:i},Aut,Cut,[e],t)}const RI=nt(oi,{ExtendedData:De(uut),MultiGeometry:De(pke),LineString:De(k_),LinearRing:De(k_),Point:De(k_),Polygon:De(mke),Style:De(But),address:De(Li),description:De(Li),name:De(Li),open:De(pb),phoneNumber:De(Li),styleUrl:De(Li),visibility:De(pb)}),Rut=nt(oi,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),kut=Ts("ExtendedData");function gke(i,e,t){const n={node:i};e.getId()&&i.setAttribute("id",e.getId());const r=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(r||{}).sort().filter(function(f){return!s[f]}),a=e.getStyleFunction();if(a){const f=a(e,0);if(f){const p=Array.isArray(f)?f:[f];let m=p;if(e.getGeometry()&&(m=p.filter(function(y){const v=y.getGeometryFunction()(e);if(v){const b=v.getType();return b==="GeometryCollection"?v.getGeometriesArrayRecursive().filter(function(x){const w=x.getType();return w==="Point"||w==="MultiPoint"}).length:b==="Point"||b==="MultiPoint"}})),this.writeStyles_){let y=p,v=p;e.getGeometry()&&(y=p.filter(function(b){const x=b.getGeometryFunction()(e);if(x){const w=x.getType();return w==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(C){const D=C.getType();return D==="LineString"||D==="MultiLineString"}).length:w==="LineString"||w==="MultiLineString"}}),v=p.filter(function(b){const x=b.getGeometryFunction()(e);if(x){const w=x.getType();return w==="GeometryCollection"?x.getGeometriesArrayRecursive().filter(function(C){const D=C.getType();return D==="Polygon"||D==="MultiPolygon"}).length:w==="Polygon"||w==="MultiPolygon"}})),r.Style={pointStyles:m,lineStyles:y,polyStyles:v}}if(m.length&&r.name===void 0){const y=m[0].getText();y&&(r.name=y.getText())}}}const l=t[t.length-1].node,u=Rut[l.namespaceURI],c=Wl(r,u);if(Ni(n,RI,Jo,c,t,u),o.length>0){const f=Wl(r,o);Ni(n,RI,kut,[{names:o,values:f}],t)}const h=t[0];let d=e.getGeometry();d&&(d=cs(d,!0,h)),Ni(n,RI,fke,[d],t)}const Dut=nt(oi,["extrude","tessellate","altitudeMode","coordinates"]),Lut=nt(oi,{extrude:De(pb),tessellate:De(pb),altitudeMode:De(Li),coordinates:De(tut)});function k_(i,e,t){const n=e.getFlatCoordinates(),r={node:i};r.layout=e.getLayout(),r.stride=e.getStride();const s=e.getProperties();s.coordinates=n;const o=t[t.length-1].node,a=Dut[o.namespaceURI],l=Wl(s,a);Ni(r,Lut,Jo,l,t,a)}const Mut=nt(oi,["color","fill","outline"]),v_e=nt(oi,{outerBoundaryIs:De(y_e),innerBoundaryIs:De(y_e)}),Iut=Ts("innerBoundaryIs"),Out=Ts("outerBoundaryIs");function mke(i,e,t){const n=e.getLinearRings(),r=n.shift(),s={node:i};Ni(s,v_e,Iut,n,t),Ni(s,v_e,Out,[r],t)}const Put=nt(oi,{color:De(iL),fill:De(pb),outline:De(pb)});function Fut(i,e,t){const n={node:i},r=e.getFill(),s=e.getStroke(),o={color:r?r.getColor():void 0,fill:r?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,l=Mut[a.namespaceURI],u=Wl(o,l);Ni(n,Put,Jo,u,t,l)}function yke(i,e){Dl(i,Math.round(e*1e6)/1e6)}const Nut=nt(oi,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),$ut=nt(oi,{IconStyle:De(put),LabelStyle:De(yut),LineStyle:De(but),PolyStyle:De(Fut)});function But(i,e,t){const n={node:i},r={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(r.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(r.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(r.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!r.LineStyle&&(r.LineStyle=l),r.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=Nut[s.namespaceURI],a=Wl(r,o);Ni(n,$ut,Jo,a,t,o)}function jut(i,e){i.setAttribute("x",String(e.x)),i.setAttribute("y",String(e.y)),i.setAttribute("xunits",e.xunits),i.setAttribute("yunits",e.yunits)}const vke=dlt;var k4={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */k4.read=function(i,e,t,n,r){var s,o,a=r*8-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=t?r-1:0,d=t?-1:1,f=i[e+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=s*256+i[e+h],h+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+i[e+h],h+=d,c-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-u}return(f?-1:1)*o*Math.pow(2,s-n)};k4.write=function(i,e,t,n,r,s){var o,a,l,u=s*8-r-1,c=(1<<u)-1,h=c>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*l-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;i[t+f]=a&255,f+=p,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;i[t+f]=o&255,f+=p,o/=256,u-=8);i[t+f-p]|=m*128};var zut=br,CT=k4;function br(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0;br.Fixed64=1;br.Bytes=2;br.Fixed32=5;var tF=65536*65536,__e=1/tF,Gut=12,_ke=typeof TextDecoder>"u"?null:new TextDecoder("utf8");br.prototype={destroy:function(){this.buf=null},readFields:function(i,e,t){for(t=t||this.length;this.pos<t;){var n=this.readVarint(),r=n>>3,s=this.pos;this.type=n&7,i(r,e,this),this.pos===s&&this.skip(n)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=ST(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=x_e(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ST(this.buf,this.pos)+ST(this.buf,this.pos+4)*tF;return this.pos+=8,i},readSFixed64:function(){var i=ST(this.buf,this.pos)+x_e(this.buf,this.pos+4)*tF;return this.pos+=8,i},readFloat:function(){var i=CT.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=CT.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,t,n;return n=e[this.pos++],t=n&127,n<128||(n=e[this.pos++],t|=(n&127)<<7,n<128)||(n=e[this.pos++],t|=(n&127)<<14,n<128)||(n=e[this.pos++],t|=(n&127)<<21,n<128)?t:(n=e[this.pos],t|=(n&15)<<28,Uut(t,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=Gut&&_ke?nct(this.buf,e,i):ict(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==br.Bytes)return i.push(this.readVarint(e));var t=Nd(this);for(i=i||[];this.pos<t;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==br.Bytes)return i.push(this.readSVarint());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==br.Bytes)return i.push(this.readBoolean());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==br.Bytes)return i.push(this.readFloat());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==br.Bytes)return i.push(this.readDouble());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==br.Bytes)return i.push(this.readFixed32());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==br.Bytes)return i.push(this.readSFixed32());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==br.Bytes)return i.push(this.readFixed64());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==br.Bytes)return i.push(this.readSFixed64());var e=Nd(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===br.Varint)for(;this.buf[this.pos++]>127;);else if(e===br.Bytes)this.pos=this.readVarint()+this.pos;else if(e===br.Fixed32)this.pos+=4;else if(e===br.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),fv(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),fv(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),fv(this.buf,i&-1,this.pos),fv(this.buf,Math.floor(i*__e),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),fv(this.buf,i&-1,this.pos),fv(this.buf,Math.floor(i*__e),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){qut(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=rct(this.buf,i,this.pos);var t=this.pos-e;t>=128&&b_e(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(i){this.realloc(4),CT.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),CT.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=i[t]},writeRawMessage:function(i,e){this.pos++;var t=this.pos;i(e,this);var n=this.pos-t;n>=128&&b_e(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeMessage:function(i,e,t){this.writeTag(i,br.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,Wut,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,Xut,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,Kut,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,Yut,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,Zut,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,Jut,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,Qut,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,ect,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,tct,e)},writeBytesField:function(i,e){this.writeTag(i,br.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,br.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,br.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,br.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,br.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,br.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,br.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,br.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,br.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,br.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function Uut(i,e,t){var n=t.buf,r,s;if(s=n[t.pos++],r=(s&112)>>4,s<128||(s=n[t.pos++],r|=(s&127)<<3,s<128)||(s=n[t.pos++],r|=(s&127)<<10,s<128)||(s=n[t.pos++],r|=(s&127)<<17,s<128)||(s=n[t.pos++],r|=(s&127)<<24,s<128)||(s=n[t.pos++],r|=(s&1)<<31,s<128))return dv(i,r,e);throw new Error("Expected varint not more than 10 bytes")}function Nd(i){return i.type===br.Bytes?i.readVarint()+i.pos:i.pos+1}function dv(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function qut(i,e){var t,n;if(i>=0?(t=i%4294967296|0,n=i/4294967296|0):(t=~(-i%4294967296),n=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Vut(t,n,e),Hut(n,e)}function Vut(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function Hut(i,e){var t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function b_e(i,e,t){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(var r=t.pos-1;r>=i;r--)t.buf[r+n]=t.buf[r]}function Wut(i,e){for(var t=0;t<i.length;t++)e.writeVarint(i[t])}function Xut(i,e){for(var t=0;t<i.length;t++)e.writeSVarint(i[t])}function Yut(i,e){for(var t=0;t<i.length;t++)e.writeFloat(i[t])}function Zut(i,e){for(var t=0;t<i.length;t++)e.writeDouble(i[t])}function Kut(i,e){for(var t=0;t<i.length;t++)e.writeBoolean(i[t])}function Jut(i,e){for(var t=0;t<i.length;t++)e.writeFixed32(i[t])}function Qut(i,e){for(var t=0;t<i.length;t++)e.writeSFixed32(i[t])}function ect(i,e){for(var t=0;t<i.length;t++)e.writeFixed64(i[t])}function tct(i,e){for(var t=0;t<i.length;t++)e.writeSFixed64(i[t])}function ST(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function fv(i,e,t){i[t]=e,i[t+1]=e>>>8,i[t+2]=e>>>16,i[t+3]=e>>>24}function x_e(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function ict(i,e,t){for(var n="",r=e;r<t;){var s=i[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>t)break;var l,u,c;a===1?s<128&&(o=s):a===2?(l=i[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=i[r+1],u=i[r+2],(l&192)===128&&(u&192)===128&&(o=(s&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=i[r+1],u=i[r+2],c=i[r+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(o=(s&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),r+=a}return n}function nct(i,e,t){return _ke.decode(i.subarray(e,t))}function rct(i,e,t){for(var n=0,r,s;n<e.length;n++){if(r=e.charCodeAt(n),r>55295&&r<57344)if(s)if(r<56320){i[t++]=239,i[t++]=191,i[t++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||n+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):s=r;continue}else s&&(i[t++]=239,i[t++]=191,i[t++]=189,s=null);r<128?i[t++]=r:(r<2048?i[t++]=r>>6|192:(r<65536?i[t++]=r>>12|224:(i[t++]=r>>18|240,i[t++]=r>>12&63|128),i[t++]=r>>6&63|128),i[t++]=r&63|128)}return t}const bke=Ea(zut);let sct=class extends EC{constructor(e){super(),e=e||{},this.dataProjection=new sb({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Wu,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,r){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,u=0,c=0,h=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),u+=e.readSVarint(),o===1&&c>h&&(r.push(c),h=c),n.push(l,u),c+=2;else if(o===7)c>h&&(n.push(n[h],n[h+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>h&&(r.push(c),h=c)}createFeature_(e,t,n){const r=t.type;if(r===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],u=[];this.readRawGeometry_(e,t,l,u);const c=cct(r,u.length);if(this.featureClass===Wu)s=new this.featureClass(c,l,u,2,o,a),s.transform(n.dataProjection);else{let h;if(c=="Polygon"){const p=XAe(l,u);h=p.length>1?new nh(l,"XY",p):new Io(l,"XY",u)}else h=c==="Point"?new ps(l,"XY"):c==="LineString"?new js(l,"XY"):c==="MultiPoint"?new ud(l,"XY"):c==="MultiLineString"?new Lu(l,"XY",u):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=cs(h,!1,n);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const r=Lt(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const s=new bke(e),o=s.readFields(oct,{}),a=[];for(const l in o){if(n&&!n.includes(l))continue;const u=o[l],c=u?[0,0,u.extent,u.extent]:null;r.setExtent(c);for(let h=0,d=u.length;h<d;++h){const f=uct(s,u,h),p=this.createFeature_(s,f,t);p!==null&&a.push(p)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}};function oct(i,e,t){if(i===3){const n={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(act,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function act(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let n=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)i=t.readVarint()>>3,n=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(n)}}function lct(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[r]=s}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function uct(i,e,t){i.pos=e.features[t];const n=i.readVarint()+i.pos,r={layer:e,type:0,properties:{}};return i.readFields(lct,r,n),r}function cct(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}const xke=sct;let D4=class{read(e){if(!e)return null;if(typeof e=="string"){const t=Qu(e);return this.readFromDocument(t)}return Ju(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){hi()}};const hct="http://www.w3.org/1999/xlink";function r1(i){return i.getAttributeNS(hct,"href")}const Kl=[null,"http://www.opengis.net/ows/1.1"],dct=nt(Kl,{ServiceIdentification:Ce(Nct),ServiceProvider:Ce(Bct),OperationsMetadata:Ce(Pct)});let fct=class extends D4{constructor(){super()}readFromNode(e){const t=ht({},dct,e,[]);return t||null}};const pct=nt(Kl,{DeliveryPoint:Ce(_t),City:Ce(_t),AdministrativeArea:Ce(_t),PostalCode:Ce(_t),Country:Ce(_t),ElectronicMailAddress:Ce(_t)}),gct=nt(Kl,{Value:Wr(jct)}),mct=nt(Kl,{AllowedValues:Ce(Rct)}),yct=nt(Kl,{Phone:Ce(Fct),Address:Ce(Act)}),vct=nt(Kl,{HTTP:Ce(Ict)}),_ct=nt(Kl,{Get:Wr(Mct),Post:void 0}),bct=nt(Kl,{DCP:Ce(Lct)}),xct=nt(Kl,{Operation:Oct}),wct=nt(Kl,{Voice:Ce(_t),Facsimile:Ce(_t)}),Ect=nt(Kl,{Constraint:Wr(kct)}),Cct=nt(Kl,{IndividualName:Ce(_t),PositionName:Ce(_t),ContactInfo:Ce(Dct)}),Sct=nt(Kl,{Abstract:Ce(_t),AccessConstraints:Ce(_t),Fees:Ce(_t),Title:Ce(_t),ServiceTypeVersion:Ce(_t),ServiceType:Ce(_t)}),Tct=nt(Kl,{ProviderName:Ce(_t),ProviderSite:Ce(r1),ServiceContact:Ce($ct)});function Act(i,e){return ht({},pct,i,e)}function Rct(i,e){return ht({},gct,i,e)}function kct(i,e){const t=i.getAttribute("name");if(t)return ht({name:t},mct,i,e)}function Dct(i,e){return ht({},yct,i,e)}function Lct(i,e){return ht({},vct,i,e)}function Mct(i,e){const t=r1(i);if(t)return ht({href:t},Ect,i,e)}function Ict(i,e){return ht({},_ct,i,e)}function Oct(i,e){const t=i.getAttribute("name"),n=ht({},bct,i,e);if(!n)return;const r=e[e.length-1];r[t]=n}function Pct(i,e){return ht({},xct,i,e)}function Fct(i,e){return ht({},wct,i,e)}function Nct(i,e){return ht({},Sct,i,e)}function $ct(i,e){return ht({},Cct,i,e)}function Bct(i,e){return ht({},Tct,i,e)}function jct(i,e){return _t(i)}const wke=fct;function w_e(i,e,t,n,r,s){r!==void 0?(r=r,s=s!==void 0?s:0):(r=[],s=0);let o=e;for(;o<t;){const a=i[o++];r[s++]=i[o++],r[s++]=a;for(let l=2;l<n;++l)r[s++]=i[o++]}return r.length=s,r}class zct extends S4{constructor(e){super(),e=e||{},this.dataProjection=Lt("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const n=this.readGeometryFromText(e,t);return new Kr(n)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const n=YE(this.geometryLayout_),r=Uct(e,n,this.factor_);w_e(r,0,r.length,n,r);const s=of(r,0,r.length,n),o=new js(s,this.geometryLayout_);return cs(o,!1,this.adaptOptions(t))}writeFeatureText(e,t){const n=e.getGeometry();if(n)return this.writeGeometryText(n,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){e=cs(e,!0,this.adaptOptions(t));const n=e.getFlatCoordinates(),r=e.getStride();return w_e(n,0,n.length,r,n),Gct(n,r,this.factor_)}}function Gct(i,e,t){t=t||1e5;let n;const r=new Array(e);for(n=0;n<e;++n)r[n]=0;for(let s=0,o=i.length;s<o;)for(n=0;n<e;++n,++s){const a=i[s],l=a-r[n];r[n]=a,i[s]=l}return qct(i,t)}function Uct(i,e,t){t=t||1e5;let n;const r=new Array(e);for(n=0;n<e;++n)r[n]=0;const s=Vct(i,t);for(let o=0,a=s.length;o<a;)for(n=0;n<e;++n,++o)r[n]+=s[o],s[o]=r[n];return s}function qct(i,e){e=e||1e5;for(let t=0,n=i.length;t<n;++t)i[t]=Math.round(i[t]*e);return Hct(i)}function Vct(i,e){e=e||1e5;const t=Wct(i);for(let n=0,r=t.length;n<r;++n)t[n]/=e;return t}function Hct(i){for(let e=0,t=i.length;e<t;++e){const n=i[e];i[e]=n<0?~(n<<1):n<<1}return Xct(i)}function Wct(i){const e=Yct(i);for(let t=0,n=e.length;t<n;++t){const r=e[t];e[t]=r&1?~(r>>1):r>>1}return e}function Xct(i){let e="";for(let t=0,n=i.length;t<n;++t)e+=Zct(i[t]);return e}function Yct(i){const e=[];let t=0,n=0;for(let r=0,s=i.length;r<s;++r){const o=i.charCodeAt(r)-63;t|=(o&31)<<n,o<32?(e.push(t),t=0,n=0):n+=5}return e}function Zct(i){let e,t="";for(;i>=32;)e=(32|i&31)+63,t+=String.fromCharCode(e),i>>=5;return e=i+63,t+=String.fromCharCode(e),t}const Kct=zct;class Jct extends v4{constructor(e){super(),e=e||{},this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=Lt(e.dataProjection?e.dataProjection:"EPSG:4326")}readFeaturesFromObject(e,t){if(e.type=="Topology"){const n=e;let r,s=null,o=null;n.transform&&(r=n.transform,s=r.scale,o=r.translate);const a=n.arcs;r&&aht(a,s,o);const l=[],u=n.objects,c=this.layerName_;let h;for(const d in u)this.layers_&&!this.layers_.includes(d)||(u[d].type==="GeometryCollection"?(h=u[d],l.push.apply(l,oht(h,a,s,o,c,d,t))):(h=u[d],l.push(Eke(h,a,s,o,c,d,t))));return l}return[]}readProjectionFromObject(e){return this.dataProjection}}const Qct={Point:eht,LineString:iht,Polygon:rht,MultiPoint:tht,MultiLineString:nht,MultiPolygon:sht};function nL(i,e){const t=[];let n;for(let r=0,s=i.length;r<s;++r)if(n=i[r],r>0&&t.pop(),n>=0){const o=e[n];for(let a=0,l=o.length;a<l;++a)t.push(o[a].slice(0))}else{const o=e[~n];for(let a=o.length-1;a>=0;--a)t.push(o[a].slice(0))}return t}function eht(i,e,t){const n=i.coordinates;return e&&t&&L4(n,e,t),new ps(n)}function tht(i,e,t){const n=i.coordinates;if(e&&t)for(let r=0,s=n.length;r<s;++r)L4(n[r],e,t);return new ud(n)}function iht(i,e){const t=nL(i.arcs,e);return new js(t)}function nht(i,e){const t=[];for(let n=0,r=i.arcs.length;n<r;++n)t[n]=nL(i.arcs[n],e);return new Lu(t)}function rht(i,e){const t=[];for(let n=0,r=i.arcs.length;n<r;++n)t[n]=nL(i.arcs[n],e);return new Io(t)}function sht(i,e){const t=[];for(let n=0,r=i.arcs.length;n<r;++n){const s=i.arcs[n],o=[];for(let a=0,l=s.length;a<l;++a)o[a]=nL(s[a],e);t[n]=o}return new nh(t)}function oht(i,e,t,n,r,s,o){const a=i.geometries,l=[];for(let u=0,c=a.length;u<c;++u)l[u]=Eke(a[u],e,t,n,r,s,o);return l}function Eke(i,e,t,n,r,s,o){let a=null;const l=i.type;if(l){const h=Qct[l];l==="Point"||l==="MultiPoint"?a=h(i,t,n):a=h(i,e),a=cs(a,!1,o)}const u=new Kr({geometry:a});i.id!==void 0&&u.setId(i.id);let c=i.properties;return r&&(c||(c={}),c[r]=s),c&&u.setProperties(c,!0),u}function aht(i,e,t){for(let n=0,r=i.length;n<r;++n)lht(i[n],e,t)}function lht(i,e,t){let n=0,r=0;for(let s=0,o=i.length;s<o;++s){const a=i[s];n+=a[0],r+=a[1],a[0]=n,a[1]=r,L4(a,e,t)}}function L4(i,e,t){i[0]=i[0]*e[0]+t[0],i[1]=i[1]*e[1]+t[1]}const Cke=Jct;class mr extends _n{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,t,n){const r=n[n.length-1];n[n.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},r),super.writeGeometryElement(e,t,n)}}mr.prototype.namespace="http://www.opengis.net/gml/3.2";mr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:mi(_n.prototype.readFlatPos),posList:mi(_n.prototype.readFlatPosList),coordinates:mi(wn.prototype.readFlatCoordinates)}};mr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:_n.prototype.interiorParser,exterior:_n.prototype.exteriorParser}};mr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:mi(ii.prototype.readPoint),MultiPoint:mi(ii.prototype.readMultiPoint),LineString:mi(ii.prototype.readLineString),MultiLineString:mi(ii.prototype.readMultiLineString),LinearRing:mi(ii.prototype.readLinearRing),Polygon:mi(ii.prototype.readPolygon),MultiPolygon:mi(ii.prototype.readMultiPolygon),Surface:mi(mr.prototype.readSurface),MultiSurface:mi(_n.prototype.readMultiSurface),Curve:mi(mr.prototype.readCurve),MultiCurve:mi(_n.prototype.readMultiCurve),Envelope:mi(mr.prototype.readEnvelope)}};mr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:ni(_n.prototype.curveMemberParser),curveMembers:ni(_n.prototype.curveMemberParser)}};mr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:ni(_n.prototype.surfaceMemberParser),surfaceMembers:ni(_n.prototype.surfaceMemberParser)}};mr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ni(ii.prototype.readLineString),Curve:ni(_n.prototype.readCurve)}};mr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ni(ii.prototype.readPolygon),Surface:ni(_n.prototype.readSurface)}};mr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:mi(_n.prototype.readPatch)}};mr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:mi(_n.prototype.readSegment)}};mr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:ni(_n.prototype.readFlatPosList),upperCorner:ni(_n.prototype.readFlatPosList)}};mr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:mi(_n.prototype.readPolygonPatch)}};mr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:VR(_n.prototype.readLineStringSegment)}};mr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:ni(ii.prototype.pointMemberParser),pointMembers:ni(ii.prototype.pointMemberParser)}};mr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:ni(ii.prototype.lineStringMemberParser),lineStringMembers:ni(ii.prototype.lineStringMemberParser)}};mr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:ni(ii.prototype.polygonMemberParser),polygonMembers:ni(ii.prototype.polygonMemberParser)}};mr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ni(ii.prototype.readFlatCoordinatesFromNode)}};mr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ni(ii.prototype.readLineString)}};mr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ni(ii.prototype.readPolygon)}};mr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:mi(ii.prototype.readFlatLinearRing),Ring:mi(mr.prototype.readFlatCurveRing)}};mr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:De(_n.prototype.writeRing),interior:De(_n.prototype.writeRing)}};mr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:De(Li),upperCorner:De(Li)}};mr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:De(_n.prototype.writeSurfaceOrPolygonMember),polygonMember:De(_n.prototype.writeSurfaceOrPolygonMember)}};mr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:De(_n.prototype.writePointMember)}};mr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:De(_n.prototype.writeLineStringOrCurveMember),curveMember:De(_n.prototype.writeLineStringOrCurveMember)}};mr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:De(_n.prototype.writeCurveOrLineString),MultiCurve:De(_n.prototype.writeMultiCurveOrLineString),Point:De(mr.prototype.writePoint),MultiPoint:De(_n.prototype.writeMultiPoint),LineString:De(_n.prototype.writeCurveOrLineString),MultiLineString:De(_n.prototype.writeMultiCurveOrLineString),LinearRing:De(_n.prototype.writeLinearRing),Polygon:De(_n.prototype.writeSurfaceOrPolygon),MultiPolygon:De(_n.prototype.writeMultiSurfaceOrPolygon),Surface:De(_n.prototype.writeSurfaceOrPolygon),MultiSurface:De(_n.prototype.writeMultiSurfaceOrPolygon),Envelope:De(_n.prototype.writeEnvelope)}};const M4=mr;class Ske{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}}class uht extends Ske{constructor(e,t){super(e),this.conditions=t,sn(this.conditions.length>=2,"At least 2 conditions are required")}}class cht extends uht{constructor(e){super("And",Array.prototype.slice.call(arguments))}}const hht=cht;class dht extends Ske{constructor(e,t,n){if(super("BBOX"),this.geometryName=e,this.extent=t,t.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=n}}function fht(i){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(hht,e))}function pht(i,e,t){return new dht(i,e,t)}const E_e={"http://www.opengis.net/gml":{boundedBy:Ce(ii.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:ni(ii.prototype.readFeaturesInternal)}},ght={"http://www.opengis.net/wfs":{totalInserted:Ce(Ps),totalUpdated:Ce(Ps),totalDeleted:Ce(Ps)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ce(Ps),totalUpdated:Ce(Ps),totalDeleted:Ce(Ps)}},mht={"http://www.opengis.net/wfs":{TransactionSummary:Ce(S_e,"transactionSummary"),InsertResults:Ce(A_e,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ce(S_e,"transactionSummary"),InsertResults:Ce(A_e,"insertIds")}},yht={"http://www.opengis.net/wfs":{PropertyName:De(Li)},"http://www.opengis.net/wfs/2.0":{PropertyName:De(Li)}},Tke={"http://www.opengis.net/wfs":{Insert:De(R_e),Update:De(D_e),Delete:De(k_e),Property:De(L_e),Native:De(M_e)},"http://www.opengis.net/wfs/2.0":{Insert:De(R_e),Update:De(D_e),Delete:De(k_e),Property:De(L_e),Native:De(M_e)}},Ake="feature",I4="http://www.w3.org/2000/xmlns/",O4={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},iF={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},P4={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},C_e={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},F4={"2.0.0":M4,"1.1.0":_n,"1.0.0":wn},vht="1.1.0";class _ht extends TC{constructor(e){super(),e=e||{},this.version_=e.version?e.version:vht,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new F4[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:C_e[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,t){const n={node:e};Object.assign(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(n,this.getReadOptions(e,t||{}));const r=[n];let s;this.version_==="2.0.0"?s=E_e:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=ht([],s,e,r,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(e){if(e){if(typeof e=="string"){const t=Qu(e);return this.readTransactionResponseFromDocument(t)}return Ju(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const t=Qu(e);return this.readFeatureCollectionMetadataFromDocument(t)}return Ju(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}readFeatureCollectionMetadataFromNode(e){const t={},n=af(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=n,ht(t,E_e,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}readTransactionResponseFromNode(e){return ht({},mht,e,[])}writeGetFeature(e){const t=Gi(iF[this.version_],"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version",this.version_),e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&t.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&t.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&t.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&t.setAttribute("count",String(e.count)),e.viewParams!==void 0&&t.setAttribute("viewParams",e.viewParams),t.setAttributeNS(z0,"xsi:schemaLocation",this.schemaLocation_);const n={node:t};if(Object.assign(n,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),sn(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let r=e.filter;e.bbox&&(sn(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),r=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,r)),Object.assign(n,{geometryName:e.geometryName,filter:r}),G_e(t,e.featureTypes,[n])}else e.featureTypes.forEach(r=>{const s=this.combineBboxAndFilter(r.geometryName,r.bbox,e.srsName,e.filter);Object.assign(n,{geometryName:r.geometryName,filter:s}),G_e(t,[r.name],[n])});return t}combineBboxAndFilter(e,t,n,r){const s=pht(e,t,n);return r?fht(r,s):s}writeTransaction(e,t,n,r){const s=[],o=r.version?r.version:this.version_,a=Gi(iF[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;r&&(l=r.gmlOptions?r.gmlOptions:{},r.handle&&a.setAttribute("handle",r.handle)),a.setAttributeNS(z0,"xsi:schemaLocation",C_e[o]);const u=bht(a,l,o,r);return e&&TT("Insert",e,s,u),t&&TT("Update",t,s,u),n&&TT("Delete",n,s,u),r.nativeElements&&TT("Native",r.nativeElements,s,u),a}readProjectionFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(!(t.childNodes.length===0||t.childNodes.length===1&&t.firstChild.nodeType===3)){const n=[{}];return this.gmlFormat_.readGeometryElement(t,n),Lt(n.pop().srsName)}}return null}}function bht(i,e,t,n){const r=n.featurePrefix?n.featurePrefix:Ake;let s;return t==="1.0.0"?s=2:t==="1.1.0"?s=3:t==="2.0.0"&&(s=3.2),Object.assign({node:i},{version:t,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:r,gmlVersion:s,hasZ:n.hasZ,srsName:n.srsName},e)}function TT(i,e,t,n){Ni(n,Tke,Ts(i),e,t)}function S_e(i,e){return ht({},ght,i,e)}const xht={"http://www.opengis.net/ogc":{FeatureId:ni(function(i,e){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:ni(function(i,e){return i.getAttribute("fid")})}};function T_e(i,e){Vl(xht,i,e)}const wht={"http://www.opengis.net/wfs":{Feature:T_e},"http://www.opengis.net/wfs/2.0":{Feature:T_e}};function A_e(i,e){return ht([],wht,i,e)}function R_e(i,e,t){const n=t[t.length-1],r=n.featureType,s=n.featureNS,o=n.gmlVersion,a=Gi(s,r);i.appendChild(a),o===2?wn.prototype.writeFeatureElement(a,e,t):o===3?_n.prototype.writeFeatureElement(a,e,t):M4.prototype.writeFeatureElement(a,e,t)}function Rke(i,e,t){const r=t[t.length-1].version,s=O4[r],o=Gi(s,"Filter"),a=Gi(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),i.appendChild(o)}function N4(i,e){i=i||Ake;const t=i+":";return e.startsWith(t)?e:t+e}function k_e(i,e,t){const n=t[t.length-1];sn(e.getId()!==void 0,"Features must have an id set");const r=n.featureType,s=n.featurePrefix,o=n.featureNS,a=N4(s,r);i.setAttribute("typeName",a),i.setAttributeNS(I4,"xmlns:"+s,o);const l=e.getId();l!==void 0&&Rke(i,l,t)}function D_e(i,e,t){const n=t[t.length-1];sn(e.getId()!==void 0,"Features must have an id set");const r=n.version,s=n.featureType,o=n.featurePrefix,a=n.featureNS,l=N4(o,s),u=e.getGeometryName();i.setAttribute("typeName",l),i.setAttributeNS(I4,"xmlns:"+o,a);const c=e.getId();if(c!==void 0){const h=e.getKeys(),d=[];for(let f=0,p=h.length;f<p;f++){const m=e.get(h[f]);if(m!==void 0){let y=h[f];m&&typeof m.getSimplifiedGeometry=="function"&&(y=u),d.push({name:y,value:m})}}Ni({version:r,gmlVersion:n.gmlVersion,node:i,hasZ:n.hasZ,srsName:n.srsName},Tke,Ts("Property"),d,t),Rke(i,c,t)}}function L_e(i,e,t){const n=t[t.length-1],r=n.version,s=iF[r],a=Gi(s,r==="2.0.0"?"ValueReference":"Name"),l=n.gmlVersion;if(i.appendChild(a),Li(a,e.name),e.value!==void 0&&e.value!==null){const u=Gi(s,"Value");i.appendChild(u),e.value&&typeof e.value.getSimplifiedGeometry=="function"?l===2?wn.prototype.writeGeometryElement(u,e.value,t):l===3?_n.prototype.writeGeometryElement(u,e.value,t):M4.prototype.writeGeometryElement(u,e.value,t):Li(u,e.value)}}function M_e(i,e,t){e.vendorId&&i.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&Li(i,e.value)}const rL={"http://www.opengis.net/wfs":{Query:De(I_e)},"http://www.opengis.net/wfs/2.0":{Query:De(I_e)},"http://www.opengis.net/ogc":{During:De(F_e),And:De(AT),Or:De(AT),Not:De(N_e),BBOX:De(O_e),Contains:De(Np),Intersects:De(Np),Within:De(Np),DWithin:De(P_e),PropertyIsEqualTo:De(zu),PropertyIsNotEqualTo:De(zu),PropertyIsLessThan:De(zu),PropertyIsLessThanOrEqualTo:De(zu),PropertyIsGreaterThan:De(zu),PropertyIsGreaterThanOrEqualTo:De(zu),PropertyIsNull:De($_e),PropertyIsBetween:De(B_e),PropertyIsLike:De(j_e)},"http://www.opengis.net/fes/2.0":{During:De(F_e),And:De(AT),Or:De(AT),Not:De(N_e),BBOX:De(O_e),Contains:De(Np),Disjoint:De(Np),Intersects:De(Np),ResourceId:De(Cht),Within:De(Np),DWithin:De(P_e),PropertyIsEqualTo:De(zu),PropertyIsNotEqualTo:De(zu),PropertyIsLessThan:De(zu),PropertyIsLessThanOrEqualTo:De(zu),PropertyIsGreaterThan:De(zu),PropertyIsGreaterThanOrEqualTo:De(zu),PropertyIsNull:De($_e),PropertyIsBetween:De(B_e),PropertyIsLike:De(j_e)}};function I_e(i,e,t){const n=t[t.length-1],r=n.version,s=n.featurePrefix,o=n.featureNS,a=n.propertyNames,l=n.srsName;let u;s?u=N4(s,e):u=e;let c;r==="2.0.0"?c="typeNames":c="typeName",i.setAttribute(c,u),l&&i.setAttribute("srsName",l),o&&i.setAttributeNS(I4,"xmlns:"+s,o);const h=Object.assign({},n);h.node=i,Ni(h,yht,Ts("PropertyName"),a,t);const d=n.filter;if(d){const f=Gi(sL(r),"Filter");i.appendChild(f),Eht(f,d,t)}}function Eht(i,e,t){const n=t[t.length-1],r={node:i};Object.assign(r,{context:n}),Ni(r,rL,Ts(e.getTagName()),[e],t)}function O_e(i,e,t){const n=t[t.length-1],s=n.context.version;n.srsName=e.srsName;const o=F4[s];s1(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.extent,t)}function Cht(i,e,t){i.setAttribute("rid",e.rid)}function Np(i,e,t){const n=t[t.length-1],s=n.context.version;n.srsName=e.srsName;const o=F4[s];s1(s,i,e.geometryName),o.prototype.writeGeometryElement(i,e.geometry,t)}function P_e(i,e,t){const s=t[t.length-1].context.version;Np(i,e,t);const o=Gi(sL(s),"Distance");Li(o,e.distance.toString()),s==="2.0.0"?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),i.appendChild(o)}function F_e(i,e,t){const s=t[t.length-1].context.version;YR(P4[s],"ValueReference",i,e.propertyName);const o=Gi(gf,"TimePeriod");i.appendChild(o);const a=Gi(gf,"begin");o.appendChild(a),z_e(a,e.begin);const l=Gi(gf,"end");o.appendChild(l),z_e(l,e.end)}function AT(i,e,t){const r=t[t.length-1].context,s={node:i};Object.assign(s,{context:r});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const u=o[a];Ni(s,rL,Ts(u.getTagName()),[u],t)}}function N_e(i,e,t){const r=t[t.length-1].context,s={node:i};Object.assign(s,{context:r});const o=e.condition;Ni(s,rL,Ts(o.getTagName()),[o],t)}function zu(i,e,t){const s=t[t.length-1].context.version;e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),s1(s,i,e.propertyName),ZR(s,i,""+e.expression)}function $_e(i,e,t){const s=t[t.length-1].context.version;s1(s,i,e.propertyName)}function B_e(i,e,t){const s=t[t.length-1].context.version,o=sL(s);s1(s,i,e.propertyName);const a=Gi(o,"LowerBoundary");i.appendChild(a),ZR(s,a,""+e.lowerBoundary);const l=Gi(o,"UpperBoundary");i.appendChild(l),ZR(s,l,""+e.upperBoundary)}function j_e(i,e,t){const s=t[t.length-1].context.version;i.setAttribute("wildCard",e.wildCard),i.setAttribute("singleChar",e.singleChar),i.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&i.setAttribute("matchCase",e.matchCase.toString()),s1(s,i,e.propertyName),ZR(s,i,""+e.pattern)}function YR(i,e,t,n){const r=Gi(i,e);Li(r,n),t.appendChild(r)}function ZR(i,e,t){YR(sL(i),"Literal",e,t)}function s1(i,e,t){i==="2.0.0"?YR(P4[i],"ValueReference",e,t):YR(O4[i],"PropertyName",e,t)}function z_e(i,e){const t=Gi(gf,"TimeInstant");i.appendChild(t);const n=Gi(gf,"timePosition");t.appendChild(n),Li(n,e)}function G_e(i,e,t){const n=t[t.length-1],r=Object.assign({},n);r.node=i,Ni(r,rL,Ts("Query"),e,t)}function sL(i){let e;return i==="2.0.0"?e=P4[i]:e=O4[i],e}const Sht=_ht,kr={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class U_e{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),t=[];for(let n=0;n<e;n++)t.push(this.readPoint());return t}readPolygon(){const e=this.readUint32(),t=[];for(let n=0;n<e;n++)t.push(this.readLineString());return t}readWkbHeader(e){const n=this.readUint8()>0,r=this.readUint32(n),s=Math.floor((r&268435455)/1e3),o=!!(r&2147483648)||s===1||s===3,a=!!(r&1073741824)||s===2||s===3,l=!!(r&536870912),u=(r&268435455)%1e3,c=["XY",o?"Z":"",a?"M":""].join(""),h=l?this.readUint32(n):null;if(e!==void 0&&e!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==n)throw new Error("Inconsistent endian");if(this.layout_!==c)throw new Error("Inconsistent geometry layout");if(h&&this.srid_!==h)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=n,this.hasZ_=o,this.hasM_=a,this.layout_=c,this.srid_=h,this.initialized_=!0;return u}readWkbPayload(e){switch(e){case kr.POINT:return this.readPoint();case kr.LINE_STRING:return this.readLineString();case kr.POLYGON:case kr.TRIANGLE:return this.readPolygon();case kr.MULTI_POINT:return this.readMultiPoint();case kr.MULTI_LINE_STRING:return this.readMultiLineString();case kr.MULTI_POLYGON:case kr.POLYHEDRAL_SURFACE:case kr.TIN:return this.readMultiPolygon();case kr.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,t){const n=this.readUint32(),r=[];for(let s=0;s<n;s++){const o=e.call(this,t);o&&r.push(o)}return r}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,kr.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,kr.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,kr.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case kr.POINT:return new ps(t,this.layout_);case kr.LINE_STRING:return new js(t,this.layout_);case kr.POLYGON:case kr.TRIANGLE:return new Io(t,this.layout_);case kr.MULTI_POINT:return new ud(t,this.layout_);case kr.MULTI_LINE_STRING:return new Lu(t,this.layout_);case kr.MULTI_POLYGON:case kr.POLYHEDRAL_SURFACE:case kr.TIN:return new nh(t,this.layout_);case kr.GEOMETRY_COLLECTION:return new ba(t);default:return null}}getSrid(){return this.srid_}}class Tht{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,t){const n=Object.assign.apply(null,t.split("").map((r,s)=>({[r]:e[s]})));for(const r of this.layout_)this.writeDouble(r in n?n[r]:this.nodata_[r])}writeLineString(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writePoint(e[n],t)}writePolygon(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeLineString(e[n],t)}writeWkbHeader(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}writeMultiPoint(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(1),this.writePoint(e[n],t)}writeMultiLineString(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(2),this.writeLineString(e[n],t)}writeMultiPolygon(e,t){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeWkbHeader(3),this.writePolygon(e[n],t)}writeGeometryCollection(e){this.writeUint32(e.length);for(let t=0;t<e.length;t++)this.writeGeometry(e[t])}findMinimumLayout(e,t="XYZM"){const n=(r,s)=>r===s?r:r==="XYZM"?s:s==="XYZM"?r:"XY";if(e instanceof ed)return n(e.getLayout(),t);if(e instanceof ba){const r=e.getGeometriesArray();for(let s=0;s<r.length&&t!=="XY";s++)t=this.findMinimumLayout(r[s],t)}return t}writeGeometry(e,t){const n={Point:kr.POINT,LineString:kr.LINE_STRING,Polygon:kr.POLYGON,MultiPoint:kr.MULTI_POINT,MultiLineString:kr.MULTI_LINE_STRING,MultiPolygon:kr.MULTI_POLYGON,GeometryCollection:kr.GEOMETRY_COLLECTION},r=e.getType(),s=n[r];if(!s)throw new Error("GeometryType "+r+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,t),e instanceof ed?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[r].call(this,e.getCoordinates(),e.getLayout()):e instanceof ba&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,o)=>s+o[0],0),t=new ArrayBuffer(e),n=new DataView(t);let r=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:n.setUint8(r,s[1]);break;case 4:n.setUint32(r,s[1],this.isLittleEndian_);break;case 8:n.setFloat64(r,s[1],this.isLittleEndian_);break}r+=s[0]}),t}}class Aht extends EC{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,t){return new Kr({geometry:this.readGeometry(e,t)})}readFeatures(e,t){let n=[];const r=this.readGeometry(e,t);return this.splitCollection&&r instanceof ba?n=r.getGeometriesArray():n=[r],n.map(s=>new Kr({geometry:s}))}readGeometry(e,t){const n=q_e(e);if(!n)return null;const s=new U_e(n).readGeometry();return this.viewCache_=n,t=this.getReadOptions(e,t),this.viewCache_=null,cs(s,!1,t)}readProjection(e){const t=this.viewCache_||q_e(e);if(!t)return;const n=new U_e(t);return n.readWkbHeader(),n.getSrid()&&Lt("EPSG:"+n.getSrid())||void 0}writeFeature(e,t){return this.writeGeometry(e.getGeometry(),t)}writeFeatures(e,t){return this.writeGeometry(new ba(e.map(n=>n.getGeometry())),t)}writeGeometry(e,t){t=this.adaptOptions(t);const n=new Tht({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let r=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=t.dataProjection&&Lt(t.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(r=Number(a.substring(5)))}}n.writeGeometry(cs(e,!0,t),r);const s=n.getBuffer();return this.hex_?Rht(s):s}}function Rht(i){const e=new Uint8Array(i);return Array.from(e.values()).map(t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase()).join("")}function kht(i){const e=new Uint8Array(i.length/2);for(let t=0;t<i.length/2;t++)e[t]=parseInt(i.substr(t*2,2),16);return new DataView(e.buffer)}function q_e(i){return typeof i=="string"?kht(i):ArrayBuffer.isView(i)?i instanceof DataView?i:new DataView(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new DataView(i):null}const Dht=Aht,Lht={POINT:ps,LINESTRING:js,POLYGON:Io,MULTIPOINT:ud,MULTILINESTRING:Lu,MULTIPOLYGON:nh},kke="EMPTY",Dke="Z",Lke="M",Mht="ZM",xr={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Iht={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class Oht{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let n=e,r;if(e=="(")r=xr.LEFT_PAREN;else if(e==",")r=xr.COMMA;else if(e==")")r=xr.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")r=xr.NUMBER,n=this.readNumber_();else if(this.isAlpha_(e))r=xr.TEXT,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")r=xr.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:n,type:r}}readNumber_(){let e;const t=this.index_;let n=!1,r=!1;do e=="."?n=!0:(e=="e"||e=="E")&&(r=!0),e=this.nextChar_();while(this.isNumeric_(e,n)||!r&&(e=="e"||e=="E")||r&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class Pht{constructor(e){this.lexer_=e,this.token_={position:0,type:xr.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(xr.TEXT)){const n=t.value;n===Dke?e="XYZ":n===Lke?e="XYM":n===Mht&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(xr.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(xr.COMMA));if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(xr.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(xr.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(xr.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(xr.LEFT_PAREN)){let e;if(this.token_.type==xr.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(xr.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(xr.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(xr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let n=0;n<t;++n){const r=this.token_;if(this.match(xr.NUMBER))e.push(r.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(xr.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(xr.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(xr.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(xr.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(xr.TEXT)&&this.token_.value==kke;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(xr.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const n=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(n)return new ba([]);const o=this.parseGeometryCollectionText_();return new ba(o)}const r=Lht[t];if(!r)throw new Error("Invalid geometry type: "+t);let s;if(n)t=="POINT"?s=[NaN,NaN]:s=[];else switch(t){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new r(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class Fht extends S4{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new Oht(e);return new Pht(t).parse()}readFeatureFromText(e,t){const n=this.readGeometryFromText(e,t),r=new Kr;return r.setGeometry(n),r}readFeaturesFromText(e,t){let n=[];const r=this.readGeometryFromText(e,t);this.splitCollection_&&r.getType()=="GeometryCollection"?n=r.getGeometriesArray():n=[r];const s=[];for(let o=0,a=n.length;o<a;++o){const l=new Kr;l.setGeometry(n[o]),s.push(l)}return s}readGeometryFromText(e,t){const n=this.parse_(e);return cs(n,!1,t)}writeFeatureText(e,t){const n=e.getGeometry();return n?this.writeGeometryText(n,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const n=[];for(let s=0,o=e.length;s<o;++s)n.push(e[s].getGeometry());const r=new ba(n);return this.writeGeometryText(r,t)}writeGeometryText(e,t){return Oke(cs(e,!0,t))}}function Mke(i){const e=i.getCoordinates();return e.length===0?"":e.join(" ")}function Nht(i){const e=[],t=i.getPoints();for(let n=0,r=t.length;n<r;++n)e.push("("+Mke(t[n])+")");return e.join(",")}function $ht(i){const e=[],t=i.getGeometries();for(let n=0,r=t.length;n<r;++n)e.push(Oke(t[n]));return e.join(",")}function $4(i){const e=i.getCoordinates(),t=[];for(let n=0,r=e.length;n<r;++n)t.push(e[n].join(" "));return t.join(",")}function Bht(i){const e=[],t=i.getLineStrings();for(let n=0,r=t.length;n<r;++n)e.push("("+$4(t[n])+")");return e.join(",")}function Ike(i){const e=[],t=i.getLinearRings();for(let n=0,r=t.length;n<r;++n)e.push("("+$4(t[n])+")");return e.join(",")}function jht(i){const e=[],t=i.getPolygons();for(let n=0,r=t.length;n<r;++n)e.push("("+Ike(t[n])+")");return e.join(",")}function zht(i){const e=i.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=Dke),(e==="XYM"||e==="XYZM")&&(t+=Lke),t}const Ght={Point:Mke,LineString:$4,Polygon:Ike,MultiPoint:Nht,MultiLineString:Bht,MultiPolygon:jht,GeometryCollection:$ht};function Oke(i){const e=i.getType(),t=Ght[e],n=t(i);let r=Iht[e];if(typeof i.getFlatCoordinates=="function"){const s=zht(i);s.length>0&&(r+=" "+s)}return n.length===0?r+" "+kke:r+"("+n+")"}const Uht=Fht,Aa=[null,"http://www.opengis.net/wms"],qht=nt(Aa,{Service:Ce(hdt),Capability:Ce(cdt)}),Vht=nt(Aa,{Request:Ce(vdt),Exception:Ce(gdt),Layer:Ce(mdt)});class Hht extends D4{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=ht({version:this.version},qht,e,[]);return t||null}}const Wht=nt(Aa,{Name:Ce(_t),Title:Ce(_t),Abstract:Ce(_t),KeywordList:Ce($ke),OnlineResource:Ce(r1),ContactInformation:Ce(ddt),Fees:Ce(_t),AccessConstraints:Ce(_t),LayerLimit:Ce(Ps),MaxWidth:Ce(Ps),MaxHeight:Ce(Ps)}),Xht=nt(Aa,{ContactPersonPrimary:Ce(fdt),ContactPosition:Ce(_t),ContactAddress:Ce(pdt),ContactVoiceTelephone:Ce(_t),ContactFacsimileTelephone:Ce(_t),ContactElectronicMailAddress:Ce(_t)}),Yht=nt(Aa,{ContactPerson:Ce(_t),ContactOrganization:Ce(_t)}),Zht=nt(Aa,{AddressType:Ce(_t),Address:Ce(_t),City:Ce(_t),StateOrProvince:Ce(_t),PostCode:Ce(_t),Country:Ce(_t)}),Kht=nt(Aa,{Format:ni(_t)}),Pke=nt(Aa,{Name:Ce(_t),Title:Ce(_t),Abstract:Ce(_t),KeywordList:Ce($ke),CRS:Wr(_t),EX_GeographicBoundingBox:Ce(udt),BoundingBox:Wr(ldt),Dimension:Wr(ydt),Attribution:Ce(adt),AuthorityURL:Wr(xdt),Identifier:Wr(_t),MetadataURL:Wr(wdt),DataURL:Wr(Sf),FeatureListURL:Wr(Sf),Style:Wr(Edt),MinScaleDenominator:Ce(An),MaxScaleDenominator:Ce(An),Layer:Wr(Fke)}),Jht=nt(Aa,{Title:Ce(_t),OnlineResource:Ce(r1),LogoURL:Ce(Nke)}),Qht=nt(Aa,{westBoundLongitude:Ce(An),eastBoundLongitude:Ce(An),southBoundLatitude:Ce(An),northBoundLatitude:Ce(An)}),edt=nt(Aa,{GetCapabilities:Ce(kI),GetMap:Ce(kI),GetFeatureInfo:Ce(kI)}),tdt=nt(Aa,{Format:Wr(_t),DCPType:Wr(_dt)}),idt=nt(Aa,{HTTP:Ce(bdt)}),ndt=nt(Aa,{Get:Ce(Sf),Post:Ce(Sf)}),rdt=nt(Aa,{Name:Ce(_t),Title:Ce(_t),Abstract:Ce(_t),LegendURL:Wr(Nke),StyleSheetURL:Ce(Sf),StyleURL:Ce(Sf)}),sdt=nt(Aa,{Format:Ce(_t),OnlineResource:Ce(r1)}),odt=nt(Aa,{Keyword:ni(_t)});function adt(i,e){return ht({},Jht,i,e)}function ldt(i,e){const t=[Zd(i.getAttribute("minx")),Zd(i.getAttribute("miny")),Zd(i.getAttribute("maxx")),Zd(i.getAttribute("maxy"))],n=[Zd(i.getAttribute("resx")),Zd(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:t,res:n}}function udt(i,e){const t=ht({},Qht,i,e);if(!t)return;const n=t.westBoundLongitude,r=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(n===void 0||r===void 0||s===void 0||o===void 0))return[n,r,s,o]}function cdt(i,e){return ht({},Vht,i,e)}function hdt(i,e){return ht({},Wht,i,e)}function ddt(i,e){return ht({},Xht,i,e)}function fdt(i,e){return ht({},Yht,i,e)}function pdt(i,e){return ht({},Zht,i,e)}function gdt(i,e){return ht([],Kht,i,e)}function mdt(i,e){const t=ht({},Pke,i,e);return t.Layer===void 0?Object.assign(t,Fke(i,e)):t}function Fke(i,e){const t=e[e.length-1],n=ht({},Pke,i,e);if(!n)return;let r=x0(i.getAttribute("queryable"));r===void 0&&(r=t.queryable),n.queryable=r!==void 0?r:!1;let s=af(i.getAttribute("cascaded"));s===void 0&&(s=t.cascaded),n.cascaded=s;let o=x0(i.getAttribute("opaque"));o===void 0&&(o=t.opaque),n.opaque=o!==void 0?o:!1;let a=x0(i.getAttribute("noSubsets"));a===void 0&&(a=t.noSubsets),n.noSubsets=a!==void 0?a:!1;let l=Zd(i.getAttribute("fixedWidth"));l||(l=t.fixedWidth),n.fixedWidth=l;let u=Zd(i.getAttribute("fixedHeight"));return u||(u=t.fixedHeight),n.fixedHeight=u,["Style","CRS","AuthorityURL"].forEach(function(d){if(d in t){const f=n[d]||[];n[d]=f.concat(t[d])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(d){if(!(d in n)){const f=t[d];n[d]=f}}),n}function ydt(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:x0(i.getAttribute("multipleValues")),nearestValue:x0(i.getAttribute("nearestValue")),current:x0(i.getAttribute("current")),values:_t(i)}}function Sf(i,e){return ht({},sdt,i,e)}function vdt(i,e){return ht({},edt,i,e)}function _dt(i,e){return ht({},idt,i,e)}function bdt(i,e){return ht({},ndt,i,e)}function kI(i,e){return ht({},tdt,i,e)}function Nke(i,e){const t=Sf(i,e);if(t){const n=[af(i.getAttribute("width")),af(i.getAttribute("height"))];return t.size=n,t}}function xdt(i,e){const t=Sf(i,e);if(t)return t.name=i.getAttribute("name"),t}function wdt(i,e){const t=Sf(i,e);if(t)return t.type=i.getAttribute("type"),t}function Edt(i,e){return ht({},rdt,i,e)}function $ke(i,e){return ht([],odt,i,e)}const Cdt=Hht,Sdt="_feature",Tdt="_layer";class Adt extends TC{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new wn,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const n=e.localName;let r=[];if(e.childNodes.length===0)return r;if(n=="msGMLOutput")for(let s=0,o=e.childNodes.length;s<o;s++){const a=e.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=t[0],c=Tdt,h=l.localName.replace(c,"");if(this.layers_&&!this.layers_.includes(h))continue;const d=h+Sdt;u.featureType=d,u.featureNS=this.featureNS_;const f={};f[d]=ni(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=nt([u.featureNS,null],f);l.setAttribute("namespaceURI",this.featureNS_);const m=ht([],p,l,t,this.gmlFormat_);m&&Hn(r,m)}if(n=="FeatureCollection"){const s=ht([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(r=s)}return r}readFeaturesFromNode(e,t){const n={};return t&&Object.assign(n,this.getReadOptions(e,t)),this.readFeatures_(e,[n])}}const Rdt=Adt,cd=[null,"http://www.opengis.net/wmts/1.0"],o1=[null,"http://www.opengis.net/ows/1.1"],kdt=nt(cd,{Contents:Ce(jdt)});let Ddt=class extends D4{constructor(){super(),this.owsParser_=new wke}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=t,n=ht(n,kdt,e,[]),n||null):null}};const Ldt=nt(cd,{Layer:Wr(zdt),TileMatrixSet:Wr(Gdt)}),Mdt=nt(cd,{Style:Wr(Udt),Format:Wr(_t),TileMatrixSetLink:Wr(qdt),Dimension:Wr(Vdt),ResourceURL:Wr(Hdt)},nt(o1,{Title:Ce(_t),Abstract:Ce(_t),WGS84BoundingBox:Ce(jke),BoundingBox:Wr(Wdt),Identifier:Ce(_t)})),Idt=nt(cd,{LegendURL:Wr(Xdt)},nt(o1,{Title:Ce(_t),Identifier:Ce(_t)})),Odt=nt(cd,{TileMatrixSet:Ce(_t),TileMatrixSetLimits:Ce(Zdt)}),Pdt=nt(cd,{TileMatrixLimits:ni(Kdt)}),Fdt=nt(cd,{TileMatrix:Ce(_t),MinTileRow:Ce(Ps),MaxTileRow:Ce(Ps),MinTileCol:Ce(Ps),MaxTileCol:Ce(Ps)}),Ndt=nt(cd,{Default:Ce(_t),Value:Wr(_t)},nt(o1,{Identifier:Ce(_t)})),Bke=nt(o1,{LowerCorner:ni(nF),UpperCorner:ni(nF)}),$dt=nt(cd,{WellKnownScaleSet:Ce(_t),TileMatrix:Wr(Ydt)},nt(o1,{SupportedCRS:Ce(_t),Identifier:Ce(_t),BoundingBox:Ce(jke)})),Bdt=nt(cd,{TopLeftCorner:Ce(nF),ScaleDenominator:Ce(An),TileWidth:Ce(Ps),TileHeight:Ce(Ps),MatrixWidth:Ce(Ps),MatrixHeight:Ce(Ps)},nt(o1,{Identifier:Ce(_t)}));function jdt(i,e){return ht({},Ldt,i,e)}function zdt(i,e){return ht({},Mdt,i,e)}function Gdt(i,e){return ht({},$dt,i,e)}function Udt(i,e){const t=ht({},Idt,i,e);if(!t)return;const n=i.getAttribute("isDefault")==="true";return t.isDefault=n,t}function qdt(i,e){return ht({},Odt,i,e)}function Vdt(i,e){return ht({},Ndt,i,e)}function Hdt(i,e){const t=i.getAttribute("format"),n=i.getAttribute("template"),r=i.getAttribute("resourceType"),s={};return t&&(s.format=t),n&&(s.template=n),r&&(s.resourceType=r),s}function jke(i,e){const t=ht([],Bke,i,e);if(t.length==2)return ga(t)}function Wdt(i,e){const t=i.getAttribute("crs"),n=ht([],Bke,i,e);if(n.length==2)return{extent:ga(n),crs:t}}function Xdt(i,e){const t={};return t.format=i.getAttribute("format"),t.href=r1(i),t}function nF(i,e){const t=_t(i).split(/\s+/);if(!t||t.length!=2)return;const n=+t[0],r=+t[1];if(!(isNaN(n)||isNaN(r)))return[n,r]}function Ydt(i,e){return ht({},Bdt,i,e)}function Zdt(i,e){return ht([],Pdt,i,e)}function Kdt(i,e){return ht({},Fdt,i,e)}const zke=Ddt,Jdt=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:Lot,GML:iat,GPX:Gat,GeoJSON:SC,IGC:Yat,IIIFInfo:ilt,KML:vke,MVT:xke,OWS:wke,Polyline:Kct,TopoJSON:Cke,WFS:Sht,WKB:Dht,WKT:Uht,WMSCapabilities:Cdt,WMSGetFeatureInfo:Rdt,WMTSCapabilities:zke},Symbol.toStringTag,{value:"Module"})),wi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},RT=[wi.FILL],sg=[wi.STROKE],l0=[wi.BEGIN_PATH],V_e=[wi.CLOSE_PATH];let Gke=class{drawCustom(e,t,n,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},RC=class extends Gke{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],vu(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,n,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=r);let c=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,p,m,y;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],y=AP(u,d),y!==m?(f&&(a[l++]=c,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):y===Vo.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,c=d[0],h=d[1],m=y;return(s&&f||p===t+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,t,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],u=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,n,r,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,f;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let m=0,y=p.length;m<y;++m){const v=[];f=this.drawCustomCoordinates_(u,f,p[m],a,v),d.push(v)}this.instructions.push([wi.CUSTOM,l,d,e,n,IP,s]),this.hitDetectionInstructions.push([wi.CUSTOM,l,d,e,r||n,IP,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([wi.CUSTOM,l,h,e,n,ZE,s]),this.hitDetectionInstructions.push([wi.CUSTOM,l,h,e,r||n,ZE,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([wi.CUSTOM,l,c,e,n,of,s]),this.hitDetectionInstructions.push([wi.CUSTOM,l,c,e,r||n,of,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([wi.CUSTOM,l,c,e,n,of,s]),this.hitDetectionInstructions.push([wi.CUSTOM,l,c,e,r||n,of,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([wi.CUSTOM,l,c,e,n,void 0,s]),this.hitDetectionInstructions.push([wi.CUSTOM,l,c,e,r||n,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[wi.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[wi.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,s,o=-1;for(t=0;t<n;++t)r=e[t],s=r[0],s==wi.END_GEOMETRY?o=t:s==wi.BEGIN_GEOMETRY&&(r[2]=t,tnt(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=Ih(r||Ol)}else n.fillStyle=void 0;if(t){const r=t.getColor();n.strokeStyle=Ih(r||QE);const s=t.getLineCap();n.lineCap=s!==void 0?s:db;const o=t.getLineDash();n.lineDash=o?o.slice():ff;const a=t.getLineDashOffset();n.lineDashOffset=a||pf;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:fb;const u=t.getWidth();n.lineWidth=u!==void 0?u:t2;const c=t.getMiterLimit();n.miterLimit=c!==void 0?c:JE,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[wi.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[wi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||s!=e.currentLineDash&&!ad(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[wi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=EAe(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ql(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},Qdt=class extends RC{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!vu(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([wi.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([wi.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=[];for(let l=0,u=r.length;l<u;l+=e.getStride())(!this.maxExtent||vu(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([wi.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([wi.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}};const eft=Qdt;let tft=class extends RC{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),a=[wi.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([wi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ff,pf],l0);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(sg),this.endGeometry(t)}drawMultiLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([wi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ff,pf],l0);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(sg),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(sg),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(sg),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(l0)}};const ift=tft;let nft=class extends RC{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(l0),this.hitDetectionInstructions.push(l0);for(let u=0;u<l;++u){const c=n[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,c,r,!0,!a),f=[wi.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(V_e),this.hitDetectionInstructions.push(V_e)),t=c}return o&&(this.instructions.push(RT),this.hitDetectionInstructions.push(RT)),a&&(this.instructions.push(sg),this.hitDetectionInstructions.push(sg)),t}drawCircle(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_FILL_STYLE,Ol]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ff,pf]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[wi.CIRCLE,u];this.instructions.push(l0,c),this.hitDetectionInstructions.push(l0,c),r.fillStyle!==void 0&&(this.instructions.push(RT),this.hitDetectionInstructions.push(RT)),r.strokeStyle!==void 0&&(this.instructions.push(sg),this.hitDetectionInstructions.push(sg)),this.endGeometry(t)}drawPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_FILL_STYLE,Ol]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ff,pf]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(t)}drawMultiPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_FILL_STYLE,Ol]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([wi.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,ff,pf]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=Jm(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}};const H_e=nft;function rft(i,e,t,n,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+r<n;){const[u,c]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=f,a>=i){const p=(i-a+f)/f,m=hu(u,h,p),y=hu(c,d,p);l.push(m,y),s.push(l),l=[m,y],a==i&&(o+=r),a=0}else if(a<i)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=f-a,m=hu(u,h,p/f),y=hu(c,d,p/f);l.push(m,y),s.push(l),l=[m,y],a=0,o+=r}}return a>0&&s.push(l),s}function sft(i,e,t,n,r){let s=t,o=t,a=0,l=0,u=t,c,h,d,f,p,m,y,v,b,x;for(h=t;h<n;h+=r){const w=e[h],C=e[h+1];p!==void 0&&(b=w-p,x=C-m,f=Math.sqrt(b*b+x*x),y!==void 0&&(l+=d,c=Math.acos((y*b+v*x)/(d*f)),c>i&&(l>a&&(a=l,s=u,o=h),l=0,u=h-r)),d=f,y=b,v=x),p=w,m=C}return l+=f,l>a?[u,h]:[s,o]}const KR={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};let oft=class extends RC{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ol]={fillStyle:Ol},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Hr(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const y=e.getEndss();d=[];for(let v=0,b=y.length;v<b;++v)d.push(y[v][0])}this.beginGeometry(e,t,n);const f=o.repeat,p=f?void 0:o.textAlign;let m=0;for(let y=0,v=d.length;y<v;++y){let b;f?b=rft(f*this.resolution,c,m,d[y],h):b=[c.slice(m,d[y])];for(let x=0,w=b.length;x<w;++x){const C=b[x];let D=0,R=C.length;if(p==null){const L=sft(o.maxAngle,C,0,C.length,2);D=L[0],R=L[1]}for(let L=D;L<R;L+=h)a.push(C[L],C[L+1]);const A=a.length;m=d[y],this.drawChars_(l,A),l=A}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();c=[];for(let x=0,w=b.length;x<w;x+=3)o.overflow||d.push(b[x+2]/this.resolution),c.push(b[x],b[x+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===l)return;if(d&&(f-l)/2!==c.length/h){let b=l/2;d=d.filter((x,w)=>{const C=a[(b+w)*2]===c[w*h]&&a[(b+w)*2+1]===c[w*h+1];return C||--b,C})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let p=o.padding;if(p!=o0&&(o.scale[0]<0||o.scale[1]<0)){let b=o.padding[0],x=o.padding[1],w=o.padding[2],C=o.padding[3];o.scale[0]<0&&(x=-x,C=-C),o.scale[1]<0&&(b=-b,w=-w),p=[b,x,w,C]}const m=this.pixelRatio;this.instructions.push([wi.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==o0?o0:p.map(function(b){return b*m}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/m,v=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Ol,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([wi.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ol:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=v,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||e2,justify:t.justify,textBaseline:t.textBaseline||NR,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=KR[r.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([wi.DRAW_CHARS,e,t,u,r.overflow,a,r.maxAngle,l,c,s,d*l,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([wi.DRAW_CHARS,e,t,u,r.overflow,a&&Ol,r.maxAngle,l,c,s,d*l,h,o,1/l,this.declutterMode_])}setTextStyle(e,t){let n,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ih(o.getColor()||Ol)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();s.lineCap=a.getLineCap()||db,s.lineDash=p?p.slice():ff,s.lineDashOffset=m===void 0?pf:m,s.lineJoin=a.getLineJoin()||fb,s.lineWidth=y===void 0?t2:y,s.miterLimit=v===void 0?JE:v,s.strokeStyle=Ih(a.getColor()||QE)}n=this.textState_;const l=e.getFont()||aRe;Prt(l);const u=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||NR,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||o0,n.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Gt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Gt(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}};const aft={Circle:H_e,Default:RC,Image:eft,LineString:ift,Polygon:H_e,Text:oft};let Uke=class{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const s=n[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[t];if(s===void 0){const o=aft[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}},qke=class extends pC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return hi()}getData(e){return null}prepareFrame(e){return hi()}renderFrame(e,t){return hi()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(r,s)=>{const o=this.loadedTileCallback.bind(this,n,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ut.LOADED||t.getState()===Ut.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ut.LOADED&&t!=Ut.ERROR&&e.addEventListener(qt.CHANGE,this.boundHandleImageChange_),t==Ut.IDLE&&(e.load(),t=e.getState()),t==Ut.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},B4=class{constructor(){Ye(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(OR(),{get:(e,t)=>{if(typeof OR()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const o=t[++n];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}};const W_e=[];let $v=null;function lft(){$v=Xr(1,1,void 0,{willReadFrequently:!0})}let j4=class extends qke{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ss(),this.pixelTransform=Ss(),this.inversePixelTransform=Ss(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){$v||lft(),$v.clearRect(0,0,1,1);let r;try{$v.drawImage(e,t,n,1,1,0,0,1,1),r=$v.getImageData(0,0,1,1).data}catch{return $v=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&ad(Yc(e.style.backgroundColor),Yc(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Xr();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=uc(n),s=Jb(n),o=Kb(n),a=$0(n);fs(t.coordinateToPixelTransform,r),fs(t.coordinateToPixelTransform,s),fs(t.coordinateToPixelTransform,o),fs(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;fs(l,r),fs(l,s),fs(l,o),fs(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Di(n)/r*o),l=Math.round(Vr(n)/r*o);Tu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),q5(this.inversePixelTransform,this.pixelTransform);const u=jnt(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new fE(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(So.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(So.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new B4),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(So.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(So.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,o,a){const l=s/2,u=o/2,c=r/t,h=-c,d=-e[0]+a,f=-e[1];return Tu(this.tempTransform,l,u,c,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}};function uft(i,e,t,n,r,s,o,a,l,u,c,h){let d=i[e],f=i[e+1],p=0,m=0,y=0,v=0;function b(){p=d,m=f,e+=n,d=i[e],f=i[e+1],v+=y,y=Math.sqrt((d-p)*(d-p)+(f-m)*(f-m))}do b();while(e<t-n&&v+y<s);let x=y===0?0:(s-v)/y;const w=hu(p,d,x),C=hu(m,f,x),D=e-n,R=v,A=s+a*l(u,r,c);for(;e<t-n&&v+y<A;)b();x=y===0?0:(A-v)/y;const L=hu(p,d,x),O=hu(m,f,x);let $;if(h){const B=[w,C,L,O];V5(B,0,4,2,h,B,B),$=B[0]>B[2]}else $=w>L;const q=Math.PI,M=[],F=D+n===e;e=D,y=0,v=R,d=i[e],f=i[e+1];let N;if(F){b(),N=Math.atan2(f-m,d-p),$&&(N+=N>0?-q:q);const B=(L+w)/2,W=(O+C)/2;return M[0]=[B,W,(A-s)/2,N,r],M}r=r.replace(/\n/g," ");for(let B=0,W=r.length;B<W;){b();let K=Math.atan2(f-m,d-p);if($&&(K+=K>0?-q:q),N!==void 0){let J=K-N;if(J+=J>q?-2*q:J<-q?2*q:0,Math.abs(J)>o)return null}N=K;const ee=B;let te=0;for(;B<W;++B){const J=$?W-B-1:B,ye=a*l(u,r[J],c);if(e+n<t&&v+y<s+te+ye/2)break;te+=ye}if(B===ee)continue;const le=$?r.substring(W-ee,W-B):r.substring(ee,B);x=y===0?0:(s+te/2-v)/y;const Q=hu(p,d,x),z=hu(m,f,x);M.push([Q,z,te/2,K,le]),s+=te}return M}const pv=Wa(),Cp=[],$d=[],Bd=[],Sp=[];function X_e(i){return i[3].declutterBox}const Y_e=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function DI(i,e){return e==="start"?e=Y_e.test(i)?"right":"left":e==="end"&&(e=Y_e.test(i)?"left":"right"),KR[e]}function cft(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}let hft=class{constructor(e,t,n,r,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ss(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new B4:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){const s=e+t+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),d=l.justify?KR[l.justify]:DI(Array.isArray(e)?e[0]:e,l.textAlign||e2),f=r&&o.lineWidth?o.lineWidth:0,p=h?e:e.split(`
`).reduce(cft,[]),{width:m,height:y,widths:v,heights:b,lineWidths:x}=Nrt(l,p),w=m+f,C=[],D=(w+2)*c[0],R=(y+f)*c[1],A={width:D<0?Math.floor(D):Math.ceil(D),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:C};(c[0]!=1||c[1]!=1)&&C.push("scale",c),r&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",f),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),n&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const L=.5-d;let O=d*w+L*f;const $=[],q=[];let M=0,F=0,N=0,B=0,W;for(let K=0,ee=p.length;K<ee;K+=2){const te=p[K];if(te===`
`){F+=M,M=0,O=d*w+L*f,++B;continue}const le=p[K+1]||l.font;le!==W&&(r&&$.push("font",le),n&&q.push("font",le),W=le),M=Math.max(M,b[N]);const Q=[te,O+L*v[N]+d*(v[N]-x[B]),.5*(f+M)+F];O+=v[N],r&&$.push("strokeText",Q),n&&q.push("fillText",Q),++N}return Array.prototype.push.apply(C,$),Array.prototype.push.apply(C,q),this.labels_[s]=A,A}replayTextBackground_(e,t,n,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,s,o,a,l,u,c,h,d,f,p,m,y){a*=d[0],l*=d[1];let v=n-a,b=r-l;const x=s+u>e?e-u:s,w=o+c>t?t-c:o,C=p[3]+x*d[0]+p[1],D=p[0]+w*d[1]+p[2],R=v-p[3],A=b-p[0];(m||h!==0)&&(Cp[0]=R,Sp[0]=R,Cp[1]=A,$d[1]=A,$d[0]=R+C,Bd[0]=$d[0],Bd[1]=A+D,Sp[1]=Bd[1]);let L;return h!==0?(L=Tu(Ss(),n,r,1,1,h,-n,-r),fs(L,Cp),fs(L,$d),fs(L,Bd),fs(L,Sp),nc(Math.min(Cp[0],$d[0],Bd[0],Sp[0]),Math.min(Cp[1],$d[1],Bd[1],Sp[1]),Math.max(Cp[0],$d[0],Bd[0],Sp[0]),Math.max(Cp[1],$d[1],Bd[1],Sp[1]),pv)):nc(Math.min(R,R+C),Math.min(A,A+D),Math.max(R,R+C),Math.max(A,A+D),pv),f&&(v=Math.round(v),b=Math.round(b)),{drawImageX:v,drawImageY:b,drawImageW:x,drawImageH:w,originX:u,originY:c,declutterBox:{minX:pv[0],minY:pv[1],maxX:pv[2],maxY:pv[3],value:y},canvasTransform:L,scale:d}}replayImageOrLabel_(e,t,n,r,s,o,a){const l=!!(o||a),u=r.declutterBox,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=t[0]&&u.maxX+c>=0&&u.minY-c<=t[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Cp,$d,Bd,Sp,o,a),$rt(e,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=fs(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,r){const s=this.textStates[t],o=this.createLabel(e,t,r,n),a=this.strokeStates[n],l=this.pixelRatio,u=DI(Array.isArray(e)?e[0]:e,s.textAlign||e2),c=KR[s.textBaseline||NR],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=u*d+2*(.5-u)*h,p=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:p}}execute_(e,t,n,r,s,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&ad(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=_g(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Nnt(this.renderedTransform_,n));let h=0;const d=r.length;let f=0,p,m,y,v,b,x,w,C,D,R,A,L,O,$=0,q=0,M=null,F=null;const N=this.coordinateCache_,B=this.viewRotation_,W=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},ee=this.instructions!=r||this.overlaps?0:200;let te,le,Q,z;for(;h<d;){const J=r[h];switch(J[0]){case wi.BEGIN_GEOMETRY:te=J[1],z=J[3],te.getGeometry()?a!==void 0&&!Hr(a,z.getExtent())?h=J[2]+1:++h:h=J[2],u&&(u.zIndex=J[4]);break;case wi.BEGIN_PATH:$>ee&&(this.fill_(e),$=0),q>ee&&(e.stroke(),q=0),!$&&!q&&(e.beginPath(),b=NaN,x=NaN),++h;break;case wi.CIRCLE:f=J[1];const Ne=c[f],Ge=c[f+1],rt=c[f+2],Be=c[f+3],ze=rt-Ne,lt=Be-Ge,xt=Math.sqrt(ze*ze+lt*lt);e.moveTo(Ne+xt,Ge),e.arc(Ne,Ge,xt,0,2*Math.PI,!0),++h;break;case wi.CLOSE_PATH:e.closePath(),++h;break;case wi.CUSTOM:f=J[1],p=J[2];const Mt=J[3],Ct=J[4],gi=J[5];K.geometry=Mt,K.feature=te,h in N||(N[h]=[]);const Wt=N[h];gi?gi(c,f,p,2,Wt):(Wt[0]=c[f],Wt[1]=c[f+1],Wt.length=2),u&&(u.zIndex=J[6]),Ct(Wt,K),++h;break;case wi.DRAW_IMAGE:f=J[1],p=J[2],D=J[3],m=J[4],y=J[5];let Qi=J[6];const He=J[7],ge=J[8],se=J[9],re=J[10];let pe=J[11];const I=J[12];let G=J[13];v=J[14]||"declutter";const Z=J[15];if(!D&&J.length>=20){R=J[19],A=J[20],L=J[21],O=J[22];const St=this.drawLabelWithPointPlacement_(R,A,L,O);D=St.label,J[3]=D;const ti=J[23];m=(St.anchorX-ti)*this.pixelRatio,J[4]=m;const Rt=J[24];y=(St.anchorY-Rt)*this.pixelRatio,J[5]=y,Qi=D.height,J[6]=Qi,G=D.width,J[13]=G}let ie;J.length>25&&(ie=J[25]);let me,_e,xe;J.length>17?(me=J[16],_e=J[17],xe=J[18]):(me=o0,_e=!1,xe=!1),re&&W?pe+=B:!re&&!W&&(pe-=B);let V=0;for(;f<p;f+=2){if(ie&&ie[V++]<G/this.pixelRatio)continue;const St=this.calculateImageOrLabelDimensions_(D.width,D.height,c[f],c[f+1],G,Qi,m,y,ge,se,pe,I,s,me,_e||xe,te),ti=[e,t,D,St,He,_e?M:null,xe?F:null];if(l){let Rt,xi,Mi;if(Z){const ri=p-f;if(!Z[ri]){Z[ri]={args:ti,declutterMode:v};continue}const Ot=Z[ri];Rt=Ot.args,xi=Ot.declutterMode,delete Z[ri],Mi=X_e(Rt)}let on,en;if(Rt&&(xi!=="declutter"||!l.collides(Mi))&&(on=!0),(v!=="declutter"||!l.collides(St.declutterBox))&&(en=!0),xi==="declutter"&&v==="declutter"){const ri=on&&en;on=ri,en=ri}on&&(xi!=="none"&&l.insert(Mi),this.replayImageOrLabel_.apply(this,Rt)),en&&(v!=="none"&&l.insert(St.declutterBox),this.replayImageOrLabel_.apply(this,ti))}else this.replayImageOrLabel_.apply(this,ti)}++h;break;case wi.DRAW_CHARS:const oe=J[1],fe=J[2],de=J[3],Te=J[4];O=J[5];const Ae=J[6],Se=J[7],Re=J[8];L=J[9];const Pe=J[10];R=J[11],A=J[12];const We=[J[13],J[13]];v=J[14]||"declutter";const st=this.textStates[A],ot=st.font,It=[st.scale[0]*Se,st.scale[1]*Se];let ct;ot in this.widths_?ct=this.widths_[ot]:(ct={},this.widths_[ot]=ct);const Ht=zRe(c,oe,fe,2),Yt=Math.abs(It[0])*Qve(ot,R,ct);if(Te||Yt<=Ht){const St=this.textStates[A].textAlign,ti=(Ht-Yt)*DI(R,St),Rt=uft(c,oe,fe,2,R,ti,Ae,Math.abs(It[0]),Qve,ot,ct,W?0:this.viewRotation_);e:if(Rt){const xi=[];let Mi,on,en,ri,Ot;if(L)for(Mi=0,on=Rt.length;Mi<on;++Mi){Ot=Rt[Mi],en=Ot[4],ri=this.createLabel(en,A,"",L),m=Ot[2]+(It[0]<0?-Pe:Pe),y=de*ri.height+(.5-de)*2*Pe*It[1]/It[0]-Re;const Si=this.calculateImageOrLabelDimensions_(ri.width,ri.height,Ot[0],Ot[1],ri.width,ri.height,m,y,0,0,Ot[3],We,!1,o0,!1,te);if(l&&v==="declutter"&&l.collides(Si.declutterBox))break e;xi.push([e,t,ri,Si,1,null,null])}if(O)for(Mi=0,on=Rt.length;Mi<on;++Mi){Ot=Rt[Mi],en=Ot[4],ri=this.createLabel(en,A,O,""),m=Ot[2],y=de*ri.height-Re;const Si=this.calculateImageOrLabelDimensions_(ri.width,ri.height,Ot[0],Ot[1],ri.width,ri.height,m,y,0,0,Ot[3],We,!1,o0,!1,te);if(l&&v==="declutter"&&l.collides(Si.declutterBox))break e;xi.push([e,t,ri,Si,1,null,null])}l&&v!=="none"&&l.load(xi.map(X_e));for(let Si=0,Bn=xi.length;Si<Bn;++Si)this.replayImageOrLabel_.apply(this,xi[Si])}}++h;break;case wi.END_GEOMETRY:if(o!==void 0){te=J[1];const St=o(te,z,v);if(St)return St}++h;break;case wi.FILL:ee?$++:this.fill_(e),++h;break;case wi.MOVE_TO_LINE_TO:for(f=J[1],p=J[2],le=c[f],Q=c[f+1],e.moveTo(le,Q),b=le+.5|0,x=Q+.5|0,f+=2;f<p;f+=2)le=c[f],Q=c[f+1],w=le+.5|0,C=Q+.5|0,(f==p-2||w!==b||C!==x)&&(e.lineTo(le,Q),b=w,x=C);++h;break;case wi.SET_FILL_STYLE:M=J,this.alignAndScaleFill_=J[2],$&&(this.fill_(e),$=0,q&&(e.stroke(),q=0)),e.fillStyle=J[1],++h;break;case wi.SET_STROKE_STYLE:F=J,q&&(e.stroke(),q=0),this.setStrokeStyle_(e,J),++h;break;case wi.STROKE:ee?q++:e.stroke(),++h;break;default:++h;break}}$&&this.fill_(e),q&&e.stroke()}execute(e,t,n,r,s,o){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,n,r,s){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}};const s_=["Polygon","Circle","LineString","Image","Text","Default"],JR=["Image","Text"],dft=s_.filter(i=>!JR.includes(i));let Vke=class{constructor(e,t,n,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ss(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const s=e[n];for(const o in s){const a=s[o];r[o]=new hft(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,s,o){r=Math.round(r);const a=r*2+1,l=Tu(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Xr(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Wa(),hE(h,e),ql(h,t*(this.renderBuffer_+r),h));const d=fft(r);let f;function p(C,D,R){const A=c.getImageData(0,0,a,a).data;for(let L=0,O=d.length;L<O;L++)if(A[d[L]]>0){if(!o||R==="none"||f!=="Image"&&f!=="Text"||o.includes(C)){const $=(d[L]-3)/4,q=r-$%a,M=r-($/a|0),F=s(C,D,q*q+M*M);if(F)return F}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Gh);let y,v,b,x,w;for(y=m.length-1;y>=0;--y){const C=m[y].toString();for(b=this.executorsByZIndex_[C],v=s_.length-1;v>=0;--v)if(f=s_[v],x=b[f],x!==void 0&&(w=x.executeHitDetection(c,l,n,p,h),w))return w}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],s=t[2],o=t[3],a=[n,r,n,o,s,o,s,r];return _g(a,0,8,2,e,a),a}isEmpty(){return Cf(this.executorsByZIndex_)}execute(e,t,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Gh),o=o||s_;const u=s_.length;let c,h,d,f,p;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const m=l[c].toString();for(p=this.executorsByZIndex_[m],d=0,f=o.length;d<f;++d){const y=o[d],v=p[y];if(v!==void 0){const b=a===null?void 0:v.getZIndexContext(),x=b?b.getContext():e,w=this.maxExtent_&&y!=="Image"&&y!=="Text";if(w&&(x.save(),this.clip(x,n)),!b||y==="Text"||y==="Image"?v.execute(x,t,n,r,s,a):b.pushFunction(C=>v.execute(C,t,n,r,s,a)),w&&x.restore(),b){b.offset();const C=l[c]*u+d;this.deferredZIndexContexts_[C]||(this.deferredZIndexContexts_[C]=[]),this.deferredZIndexContexts_[C].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Gh);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[n]].length=0}};const LI={};function fft(i){if(LI[i]!==void 0)return LI[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return LI[i]=r,r}let pft=class extends Gke{constructor(e,t,n,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?Yb(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ss()}drawImages_(e,t,n,r){if(!this.image_)return;const s=_g(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,m=f+this.imageAnchorY_;Tu(a,p,m,1,1,u,-p,-m),o.save(),o.transform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=_g(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=r){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,n,r,s){const o=this.context_,a=_g(e,t,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),n}drawRings_(e,t,n,r){for(let s=0,o=n.length;s<o;++s)t=this.moveToLineTo_(e,t,n[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hr(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=qnt(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hr(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Hr(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Hr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(n,r,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),ad(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:e2;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ih(n||Ol)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=s||ff;this.strokeState_={lineCap:r!==void 0?r:db,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||pf)*this.pixelRatio_,lineJoin:a!==void 0?a:fb,lineWidth:(l!==void 0?l:t2)*this.pixelRatio_,miterLimit:u!==void 0?u:JE,strokeStyle:Ih(n||QE)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Ih(f||Ol)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),p=n.getLineCap(),m=n.getLineDash(),y=n.getLineDashOffset(),v=n.getLineJoin(),b=n.getWidth(),x=n.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:db,lineDash:m||ff,lineDashOffset:y||pf,lineJoin:v!==void 0?v:fb,lineWidth:b!==void 0?b:t2,miterLimit:x!==void 0?x:JE,strokeStyle:Ih(f||QE)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:aRe,textAlign:h!==void 0?h:e2,textBaseline:d!==void 0?d:NR},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,p,m)=>f+=m%2?" ":p,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}};const Hke=pft,gu=.5;function Wke(i,e,t,n,r,s,o,a,l){const u=l?mC(r):r,c=i[0]*gu,h=i[1]*gu,d=Xr(c,h);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new Hke(d,gu,r,null,o,a,l?Nf(Rnt(),l):null),m=t.length,y=Math.floor((256*256*256-1)/m),v={};for(let x=1;x<=m;++x){const w=t[x-1],C=w.getStyleFunction()||n;if(!C)continue;let D=C(w,s);if(!D)continue;Array.isArray(D)||(D=[D]);const A=(x*y).toString(16).padStart(7,"#00000");for(let L=0,O=D.length;L<O;++L){const $=D[L],q=$.getGeometryFunction()(w);if(!q||!Hr(u,q.getExtent()))continue;const M=$.clone(),F=M.getFill();F&&F.setColor(A);const N=M.getStroke();N&&(N.setColor(A),N.setLineDash(null)),M.setText(void 0);const B=$.getImage();if(B){const te=B.getImageSize();if(!te)continue;const le=Xr(te[0],te[1],void 0,{alpha:!1}),Q=le.canvas;le.fillStyle=A,le.fillRect(0,0,Q.width,Q.height),M.setImage(new WD({img:Q,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const W=M.getZIndex()||0;let K=v[W];K||(K={},v[W]=K,K.Polygon=[],K.Circle=[],K.LineString=[],K.Point=[]);const ee=q.getType();if(ee==="GeometryCollection"){const te=q.getGeometriesArrayRecursive();for(let le=0,Q=te.length;le<Q;++le){const z=te[le];K[z.getType().replace("Multi","")].push(z,M)}}else K[ee.replace("Multi","")].push(q,M)}}const b=Object.keys(v).map(Number).sort(Gh);for(let x=0,w=b.length;x<w;++x){const C=v[b[x]];for(const D in C){const R=C[D];for(let A=0,L=R.length;A<L;A+=2){p.setStyle(R[A+1]);for(let O=0,$=e.length;O<$;++O)p.setTransform(e[O]),p.drawGeometry(R[A])}}}return d.getImageData(0,0,f.width,f.height)}function Xke(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*gu),s=Math.floor(Math.round(i[1])*gu),o=(Fi(r,0,t.width-1)+Fi(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],c=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&n.push(e[c/h-1])}return n}const gft=.5,Yke={Point:Eft,LineString:bft,Polygon:Sft,MultiPoint:Cft,MultiLineString:xft,MultiPolygon:wft,GeometryCollection:_ft,Circle:yft};function mft(i,e){return parseInt(Gt(i),10)-parseInt(Gt(e),10)}function QR(i,e){const t=Zke(i,e);return t*t}function Zke(i,e){return gft*i/e}function yft(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function ek(i,e,t,n,r,s,o,a){const l=[],u=t.getImage();if(u){let d=!0;const f=u.getImageState();f==Ut.LOADED||f==Ut.ERROR?d=!1:f==Ut.IDLE&&u.load(),d&&l.push(u.ready())}const c=t.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),vft(i,e,t,n,s,o,a),h}function vft(i,e,t,n,r,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,r);if(t.getRenderer())Kke(i,l,t,e,o);else{const c=Yke[l.getType()];c(i,l,t,e,o,s)}}function Kke(i,e,t,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Kke(i,o[a],t,n,r);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),r)}function _ft(i,e,t,n,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=Yke[o[a].getType()];u(i,o[a],t,n,r,s)}}function bft(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function xft(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function wft(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}function Eft(i,e,t,n,r,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Ut.LOADED)return;const c=i.getBuilder(t.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,n,r)}if(l){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,n,r)}}function Cft(i,e,t,n,r,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),c=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=Ut.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,n,r)}if(u){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,n,r)}}function Sft(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}let Jke=class extends j4{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Wa(),this.wrappedRenderedExtent_=Wa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,m=!(p[Ir.ANIMATING]||p[Ir.INTERACTING]),y=this.context,v=Math.round(Di(r)/a*f),b=Math.round(Vr(r)/a*f),x=h.getWrapX()&&l.canWrapX(),w=x?Di(c):null,C=x?Math.ceil((r[2]-c[2])/w)+1:1;let D=x?Math.floor((r[0]-c[0])/w):0;do{let R=this.getRenderTransform(o,a,0,f,v,b,D*w);t.declutter&&(R=R.slice(0)),e.execute(y,[y.canvas.width,y.canvas.height],R,u,m,n===void 0?s_:n?JR:dft,n?d&&t.declutter[d]:void 0)}while(++D<C)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Xr(this.context.canvas.width,this.context.canvas.height,W_e))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,j0(this.context),W_e.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(So.PRERENDER)||this.getLayer().hasListener(So.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=_u(n.extent);a=Hr(l,e.extent),this.clipped_=a&&!ya(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=n[0]*gu,d=n[1]*gu;c.push(this.getRenderTransform(r,s,o,gu,h,d,0).slice());const f=u.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!ya(p,l)){let m=l[0];const y=Di(p);let v=0,b;for(;m<p[0];)--v,b=y*v,c.push(this.getRenderTransform(r,s,o,gu,h,d,b).slice()),m+=y;for(v=0,m=l[2];m>p[2];)++v,b=y*v,c.push(this.getRenderTransform(r,s,o,gu,h,d,b).slice()),m-=y}this.hitDetectionImageData_=Wke(n,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o,QR(s,this.renderedPixelRatio_),null)}t(Xke(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},c=function(p,m,y){const v=Gt(p),b=u[v];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return u[v]=!0,s.splice(s.lastIndexOf(b),1),r(p,l,m);b.geometry=m,b.distanceSq=y}}else{if(y===0)return u[v]=!0,r(p,l,m);s.push(u[v]={feature:p,layer:l,geometry:m,distanceSq:y,callback:r})}};let h;const d=[this.replayGroup_],f=this.getLayer().getDeclutter();return d.some(p=>h=p.forEachFeatureAtCoordinate(e,o,a,n,c,f&&t.declutter[f]?t.declutter[f].all().map(m=>m.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[Ir.ANIMATING],s=e.viewHints[Ir.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=mft);const y=u.center.slice(),v=ql(l,p*h),b=v.slice(),x=[v.slice()],w=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!ya(w,e.extent)){const F=Di(w),N=Math.max(Di(v)/2,F);v[0]=w[0]-N,v[2]=w[2]+N,BD(y,c);const B=I5(x[0],c);B[0]<w[0]&&B[2]<w[2]?x.push([B[0]+F,B[1],B[2]+F,B[3]]):B[0]>w[0]&&B[2]>w[2]&&x.push([B[0]-F,B[1],B[2]-F,B[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&ya(this.wrappedRenderedExtent_,v))return ad(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new Uke(Zke(h,d),v,h,d);let D;for(let F=0,N=x.length;F<N;++F)n.loadFeatures(x[F],h,c);const R=QR(h,d);let A=!0;const L=(F,N)=>{let B;const W=F.getStyleFunction()||t.getStyleFunction();if(W&&(B=W(F,h)),B){const K=this.renderFeature(F,R,B,C,D,this.getLayer().getDeclutter(),N);A=A&&!K}},O=mC(v),$=n.getFeaturesInExtent(O);m&&$.sort(m);for(let F=0,N=$.length;F<N;++F)L($[F],F);this.renderedFeatures_=$,this.ready=A;const q=C.finish(),M=new Vke(v,h,d,n.getOverlaps(),q,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=v,this.renderedCenter_=y,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,c=n.length;u<c;++u)l=ek(r,e,n[u],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=ek(r,e,n,t,this.boundHandleStyleImageChange_,s,o,a);return l}},cy=class extends t1{constructor(e){super(e)}createRenderer(){return new Jke(this)}},rF=class{constructor(e){this.rbush_=new _C(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Gt(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[Gt(a)]=l}this.rbush_.load(n)}remove(e){const t=Gt(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Gt(t)],r=[n.minX,n.minY,n.maxX,n.maxY];rc(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,s=e.length;r<s;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return Cf(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return nc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}},Tft=class extends lc{constructor(e){super(),this.projection=Lt(e.projection),this.attributions_=Z_e(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Z_e(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Z_e(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const a1=Tft,Uo={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Aft(i,e){return[[-1/0,-1/0,1/0,1/0]]}let Rft=!1;function Qke(i,e,t,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Rft,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:t,featureProjection:r}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function K_e(i,e){return function(t,n,r,s,o){const a=this;Qke(i,e,t,n,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||tb)}}let Tp=class extends Zl{constructor(e,t,n){super(e),this.feature=t,this.features=n}},hy=class extends a1{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=tb,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(sn(this.format_,"`format` must be set when `url` is set"),this.loader_=K_e(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Aft;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new rF:null,this.loadedExtentsRtree_=new rF,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new qa(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Gt(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Tp(Uo.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Wu||(this.featureChangeKeys_[e]=[Wi(t,qt.CHANGE,this.handleFeatureChange_,this),Wi(t,N0.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof Wu){const s=this.idIndex_[r];s instanceof Wu?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:n=!1}else n=!1}return n&&(sn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Gt(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=Gt(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();t.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Uo.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new Tp(Uo.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Uo.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Uo.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(za.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(za.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(gr);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Tp(Uo.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof Wu||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof Wu||r.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Cf(this.nullGeometryFeatures_)||Hn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=O5(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||eb,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),h=a;if(a=c instanceof Wu?0:c.closestPointXY(n,r,o,a),a<h){s=u;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Gt(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Tp(Uo.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Gt(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Cf(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(c){return ya(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Tp(Uo.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tp(Uo.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Tp(Uo.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(r){if(rc(r.extent,e))return n=r,!0}),n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Gt(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(gr),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Uo.REMOVEFEATURE)&&this.dispatchEvent(new Tp(Uo.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){sn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(K_e(e,this.format_))}};function kft(i){if(!(i.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=i.inversePixelTransform[0],t=i.inversePixelTransform[1],n=Math.sqrt(e*e+t*t),r=i.frameState,s=e1(i.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=QR(r.viewState.resolution,n);let a;return new Hke(i.context,n,r.extent,s,r.viewState.rotation,o,a)}function eDe(i,e,t){const n=[];let r=i(0),s=i(1),o=e(r),a=e(s);const l=[s,r],u=[a,o],c=[1,0],h={};let d=1e5,f,p,m,y,v,b;for(;--d>0&&c.length>0;)m=c.pop(),r=l.pop(),o=u.pop(),b=m.toString(),b in h||(n.push(o[0],o[1]),h[b]=!0),y=c.pop(),s=l.pop(),a=u.pop(),v=(m+y)/2,f=i(v),p=e(f),_Ae(p[0],p[1],o[0],o[1],a[0],a[1])<t?(n.push(a[0],a[1]),b=y.toString(),h[b]=!0):(c.push(y,v,v,m),u.push(a,p,p,o),l.push(s,f,f,r));return n}function Dft(i,e,t,n,r){const s=Lt("EPSG:4326");return eDe(function(o){return[i,e+(t-e)*o]},Qh(s,n),r)}function Lft(i,e,t,n,r){const s=Lt("EPSG:4326");return eDe(function(o){return[e+(t-e)*o,i]},Qh(s,n),r)}const Mft=new ec({color:"rgba(0,0,0,0.2)"}),Ift=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class Oft extends cy{constructor(e){e=e||{};const t=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete t.maxLines,delete t.strokeStyle,delete t.targetSize,delete t.showLabels,delete t.lonLabelFormatter,delete t.latLabelFormatter,delete t.lonLabelPosition,delete t.latLabelPosition,delete t.lonLabelStyle,delete t.latLabelStyle,delete t.intervals,super(t),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:Mft,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?Nve.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?Nve.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new Do({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new i2({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Zc({color:"rgba(0,0,0,1)"}),stroke:new ec({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=n=>{const r=n.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(r),this.lonLabelStyleBase_},this.latLabelStyleBase_=new Do({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new i2({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Zc({color:"rgba(0,0,0,1)"}),stroke:new ec({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=n=>{const r=n.get("graticule_label");return this.latLabelStyleBase_.getText().setText(r),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(So.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:Ift,this.setSource(new hy({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new qa,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new Do({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,t){let n=e.slice();return this.projection_&&this.getSource().getWrapX()&&I5(n,this.projection_),this.loadedExtent_&&(mnt(this.loadedExtent_,n,t)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[n]}loaderFunction(e,t,n){this.loadedExtent_=e;const r=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=ho(s,e);if(this.renderedExtent_&&rc(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,ld(o)))return;const a=Ko(o),l=t*t/4;(!this.projection_||!ma(this.projection_,n))&&this.updateProjectionInfo_(n),this.createGraticule_(o,a,t,l);let c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);let h;for(;c>this.featurePool_.length;)h=new Kr,this.featurePool_.push(h);const d=r.getFeaturesCollection();d.clear();let f=0,p,m;for(p=0,m=this.meridians_.length;p<m;++p)h=this.featurePool_[f++],h.setGeometry(this.meridians_[p]),h.setStyle(this.lineStyle_),d.push(h);for(p=0,m=this.parallels_.length;p<m;++p)h=this.featurePool_[f++],h.setGeometry(this.parallels_[p]),h.setStyle(this.lineStyle_),d.push(h)}addMeridian_(e,t,n,r,s,o){const a=this.getMeridian_(e,t,n,r,o);if(Hr(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new ps([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,t,n,r,s,o){const a=this.getParallel_(e,t,n,r,o);if(Hr(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new ps([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const t=e.frameState.viewState.rotation,n=e.frameState.viewState.resolution,r=e.frameState.size,s=e.frameState.extent,o=Ko(s);let a=s;if(t){const p=r[0]*n,m=r[1]*n;a=[o[0]-p/2,o[1]-m/2,o[0]+p/2,o[1]+m/2]}let l=0,u=0,c=this.latLabelPosition_<.5;const h=this.projection_.getExtent(),d=Di(h);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!ya(h,s)){l=Math.floor((s[0]-h[0])/d),u=Math.ceil((s[2]-h[2])/d);const p=Math.abs(t)>Math.PI/2;c=c!==p}const f=kft(e);for(let p=l;p<=u;++p){let m=this.meridians_.length+this.parallels_.length,y,v,b,x;if(this.meridiansLabels_)for(v=0,b=this.meridiansLabels_.length;v<b;++v){const w=this.meridians_[v];if(!t&&p===0)x=this.getMeridianPoint_(w,s,v);else{const C=w.clone();C.translate(p*d,0),C.rotate(-t,o),x=this.getMeridianPoint_(C,a,v),x.rotate(t,o)}y=this.featurePool_[m++],y.setGeometry(x),y.set("graticule_label",this.meridiansLabels_[v].text),f.drawFeature(y,this.lonLabelStyle_(y))}if(this.parallelsLabels_&&(p===l&&c||p===u&&!c))for(v=0,b=this.parallels_.length;v<b;++v){const w=this.parallels_[v];if(!t&&p===0)x=this.getParallelPoint_(w,s,v);else{const C=w.clone();C.translate(p*d,0),C.rotate(-t,o),x=this.getParallelPoint_(C,a,v),x.rotate(t,o)}y=this.featurePool_[m++],y.setGeometry(x),y.set("graticule_label",this.parallelsLabels_[v].text),f.drawFeature(y,this.latLabelStyle_(y))}}}createGraticule_(e,t,n,r){const s=this.getInterval_(n);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=Di(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!ya(a,e)&&(Di(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const u=[Fi(t[0],this.minX_,this.maxX_),Fi(t[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(u);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let h=Fi(c[0],this.minLon_,this.maxLon_),d=Fi(c[1],this.minLat_,this.maxLat_);const f=this.maxLines_;let p,m,y,v,b=e;o||(b=[Fi(e[0],this.minX_,this.maxX_),Fi(e[1],this.minY_,this.maxY_),Fi(e[2],this.minX_,this.maxX_),Fi(e[3],this.minY_,this.maxY_)]);const x=ab(b,this.toLonLatTransform_,void 0,8);let w=x[3],C=x[2],D=x[1],R=x[0];if(o||(vu(b,this.bottomLeft_)&&(R=this.minLon_,D=this.minLat_),vu(b,this.bottomRight_)&&(C=this.maxLon_,D=this.minLat_),vu(b,this.topLeft_)&&(R=this.minLon_,w=this.maxLat_),vu(b,this.topRight_)&&(C=this.maxLon_,w=this.maxLat_),w=Fi(w,d,this.maxLat_),C=Fi(C,h,this.maxLon_),D=Fi(D,this.minLat_,d),R=Fi(R,this.minLon_,h)),h=Math.floor(h/s)*s,v=Fi(h,this.minLon_,this.maxLon_),m=this.addMeridian_(v,D,w,r,e,0),p=0,o)for(;(v-=s)>=R&&p++<f;)m=this.addMeridian_(v,D,w,r,e,m);else for(;v!=this.minLon_&&p++<f;)v=Math.max(v-s,this.minLon_),m=this.addMeridian_(v,D,w,r,e,m);if(v=Fi(h,this.minLon_,this.maxLon_),p=0,o)for(;(v+=s)<=C&&p++<f;)m=this.addMeridian_(v,D,w,r,e,m);else for(;v!=this.maxLon_&&p++<f;)v=Math.min(v+s,this.maxLon_),m=this.addMeridian_(v,D,w,r,e,m);for(this.meridians_.length=m,this.meridiansLabels_&&(this.meridiansLabels_.length=m),d=Math.floor(d/s)*s,y=Fi(d,this.minLat_,this.maxLat_),m=this.addParallel_(y,R,C,r,e,0),p=0;y!=this.minLat_&&p++<f;)y=Math.max(y-s,this.minLat_),m=this.addParallel_(y,R,C,r,e,m);for(y=Fi(d,this.minLat_,this.maxLat_),p=0;y!=this.maxLat_&&p++<f;)y=Math.min(y+s,this.maxLat_),m=this.addParallel_(y,R,C,r,e,m);this.parallels_.length=m,this.parallelsLabels_&&(this.parallelsLabels_.length=m)}getInterval_(e){const t=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1];let r=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const c=Fi(this.intervals_[l]/2,0,90),h=Fi(n,-90+c,90-c);if(o[0]=t-c,o[1]=h-c,a[0]=t+c,a[1]=h+c,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;r=this.intervals_[l]}return r}getMeridian_(e,t,n,r,s){const o=Dft(e,t,n,this.projection_,r);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new js(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,t,n){const r=e.getFlatCoordinates();let s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);const a=Math.max(t[1],r[s]),l=Math.min(t[3],r[o]),u=Fi(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,l),h=[r[s-1]+(r[o-1]-r[s-1])*(u-r[s])/(r[o]-r[s]),u],d=this.meridiansLabels_[n].geom;return d.setCoordinates(h),d}getMeridians(){return this.meridians_}getParallel_(e,t,n,r,s){const o=Lft(e,t,n,this.projection_,r);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new js(o,"XY"),a}getParallelPoint_(e,t,n){const r=e.getFlatCoordinates();let s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);const a=Math.max(t[0],r[s]),l=Math.min(t[2],r[o]),u=Fi(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,l),c=r[s+1]+(r[o+1]-r[s+1])*(u-r[s])/(r[o]-r[s]),h=[u,c],d=this.parallelsLabels_[n].geom;return d.setCoordinates(h),d}getParallels(){return this.parallels_}updateProjectionInfo_(e){const t=Lt("EPSG:4326"),n=e.getWorldExtent();this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0];const r=Qh(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=r;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const c=r(a,l,u);for(let h=0,d=c.length;h<d;h+=u)c[h]<o&&(c[h]+=360);return c}}this.fromLonLatTransform_=Qh(t,e);const s=ab([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Ko(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}const Pft=Oft,oL=34962,aL=34963,Fft=35040,z4=35044,sF=35048,Nft=5121,$ft=5123,Bft=5125,tDe=5126,J_e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function jft(i,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!wrt},e);const t=J_e.length;for(let n=0;n<t;++n)try{const r=i.getContext(J_e[n],e);if(r)return r}catch{}return null}const zft={STATIC_DRAW:z4,STREAM_DRAW:Fft,DYNAMIC_DRAW:sF};let tk=class{constructor(e,t){this.array_=null,this.type_=e,sn(e===oL||e===aL,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:zft.STATIC_DRAW}ofSize(e){return this.array_=new(MI(this.type_))(e),this}fromArray(e){return this.array_=MI(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(MI(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}};function MI(i){switch(i){case oL:return Float32Array;case aL:return Uint32Array;default:return Float32Array}}const kT={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Gft=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Uft=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;let Q_e=class{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||Gft),t.compileShader(n);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e.fragmentShader||Uft),t.compileShader(r),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,r),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const r=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,u=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,r,s,n[0],n[1],o,a,l,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n[0],n[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,n,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=Gt(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),n&&n(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let n,r=1;this.uniforms_.forEach(function(s){if(n=typeof s.value=="function"?s.value(e):s.value,n instanceof HTMLCanvasElement||n instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(s.location,r++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(s.location,n[0],n[1]);return;case 3:t.uniform3f(s.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(s.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(s.location,n)})}};function iDe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function nDe(i,e){return i[0]=e[0],i[1]=e[1],i[4]=e[2],i[5]=e[3],i[12]=e[4],i[13]=e[5],i}const Hd={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Th={UNSIGNED_BYTE:Nft,UNSIGNED_SHORT:$ft,UNSIGNED_INT:Bft,FLOAT:tDe},ik={};function ebe(i){return"shared/"+i}let tbe=0;function qft(){const i="unique/"+tbe;return tbe+=1,i}function Vft(i){let e=ik[i];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:jft(t)},ik[i]=e}return e.users+=1,e.context}function Hft(i){const e=ik[i];if(!e||(e.users-=1,e.users>0))return;const t=e.context,n=t.getExtension("WEBGL_lose_context");n&&n.loseContext();const r=t.canvas;r.width=1,r.height=1,delete ik[i]}let Wft=class extends fC{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?ebe(e.canvasCacheKey):qft(),this.gl_=Vft(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(kT.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(kT.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ss(),this.offsetScaleMatrix_=Ss(),this.tmpMat4_=iDe(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(n=>new Q_e({webGlContext:this.gl_,scaleRatio:n.scaleRatio,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms})):[new Q_e({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===ebe(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,n=Gt(e);let r=this.bufferCache_[n];if(!r){const s=t.createBuffer();r={buffer:e,webGlBuffer:s},this.bufferCache_[n]=r}t.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,n=Gt(e),r=this.bufferCache_[n];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(kT.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(kT.RESTORED,this.boundHandleWebGLContextRestored_),Hft(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,n){const r=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA),n?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindTexture(e,t,n){const r=this.gl_;r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.uniform1i(this.getUniformLocation(n),t)}prepareDrawToRenderTarget(e,t,n,r){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,n?s.ZERO:s.ONE_MINUS_SRC_ALPHA),r?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const n=this.gl_;this.getExtension("OES_element_index_uint");const r=n.UNSIGNED_INT,s=4,o=t-e,a=e*s;n.drawElements(n.TRIANGLES,o,r,a)}finalizeDraw(e,t,n){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,t,n):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,n=e.viewState.rotation,r=e.pixelRatio;this.setUniformFloatValue(Hd.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Hd.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Hd.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Hd.PIXEL_RATIO,r),this.setUniformFloatVec2(Hd.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Hd.ROTATION,n)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Hd.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Hd.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let n,r=0;this.uniforms_.forEach(s=>{if(n=typeof s.value=="function"?s.value(e):s.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=n):s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,r,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const o=!(n instanceof HTMLImageElement)||n.complete;!(n instanceof WebGLTexture)&&o&&s.prevValue!==n&&(s.prevValue=n,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),r++}else if(Array.isArray(n)&&n.length===6)this.setUniformMatrixValue(s.name,nDe(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:t.uniform2f(this.getUniformLocation(s.name),n[0],n[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),n[0],n[1],n[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(this.getUniformLocation(s.name),n)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const n=this.gl_,r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}getProgram(e,t){const n=this.gl_,r=this.compileShader(e,n.FRAGMENT_SHADER),s=this.compileShader(t,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,s),n.linkProgram(o),!n.getShaderParameter(r,n.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${n.getShaderInfoLog(r)}`;throw new Error(a)}if(n.deleteShader(r),!n.getShaderParameter(s,n.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${n.getShaderInfoLog(s)}`;throw new Error(a)}if(n.deleteShader(s),!n.getProgramParameter(o,n.LINK_STATUS)){const a=`GL program linking failed: ${n.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=Gt(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=Gt(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const n=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return Tu(t,0,0,2/(s*n[0]),2/(s*n[1]),-r,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,n,r,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,n,!1,r,s))}enableAttributes(e){const t=Xft(e);let n=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||tDe,t,n),n+=s.size*rDe(s.type)}}handleWebGLContextLost(e){Wb(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,n){const r=this.gl_;n=n||r.createTexture();const s=0,o=r.RGBA,a=0,l=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,n),t?r.texImage2D(r.TEXTURE_2D,s,o,l,u,t):r.texImage2D(r.TEXTURE_2D,s,o,e[0],e[1],a,l,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}};function Xft(i){let e=0;for(let t=0;t<i.length;t++){const n=i[t];e+=n.size*rDe(n.type)}return e}function rDe(i){switch(i){case Th.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Th.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Th.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Th.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}let sDe=class oDe extends qke{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Ss(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(wr.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(So.PRECOMPOSE)){const r=new fE(So.PRECOMPOSE,void 0,t,e);n.dispatchEvent(r)}}dispatchPostComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(So.POSTCOMPOSE)){const r=new fE(So.POSTCOMPOSE,void 0,t,e);n.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,n=-1,r;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof oDe)){t=!0;continue}const c=l.getClassName();if((t||c!==r)&&(n+=1,t=!1),r=c,u===this)break}const s="map/"+e.mapId+"/group/"+n;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Wft({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){Tu(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const s=new fE(e,this.inversePixelTransform_,n,t);r.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(So.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(So.POSTRENDER,e,t)}};const mh=new Uint8Array(4);class Yft{constructor(e,t){this.helper_=e;const n=e.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){ad(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return mh[0]=0,mh[1]=0,mh[2]=0,mh[3]=0,mh;this.readAll();const n=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return mh[0]=this.data_[n*4],mh[1]=this.data_[n*4+1],mh[2]=this.data_[n*4+2],mh[3]=this.data_[n*4+3],mh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const ibe={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};var aDe={exports:{}};aDe.exports=lL;aDe.exports.default=lL;function lL(i,e,t){t=t||2;var n=e&&e.length,r=n?e[0]*t:i.length,s=lDe(i,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,d,f;if(n&&(s=ept(i,e,s,t)),i.length>80*t){a=u=i[0],l=c=i[1];for(var p=t;p<r;p+=t)h=i[p],d=i[p+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return o2(s,o,t,a,l,f,0),o}function lDe(i,e,t,n,r){var s,o;if(r===lF(i,e,t,n)>0)for(s=e;s<t;s+=n)o=nbe(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=nbe(s,i[s],i[s+1],o);return o&&uL(o,o.next)&&(l2(o),o=o.next),o}function U0(i,e){if(!i)return i;e||(e=i);var t=i,n;do if(n=!1,!t.steiner&&(uL(t,t.next)||Es(t.prev,t,t.next)===0)){if(l2(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function o2(i,e,t,n,r,s,o){if(i){!o&&s&&spt(i,n,r,s);for(var a=i,l,u;i.prev!==i.next;){if(l=i.prev,u=i.next,s?Kft(i,n,r,s):Zft(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),l2(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=Jft(U0(i),e,t),o2(i,e,t,n,r,s,2)):o===2&&Qft(i,e,t,n,r,s):o2(U0(i),e,t,n,r,s,1);break}}}}function Zft(i){var e=i.prev,t=i,n=i.next;if(Es(e,t,n)>=0)return!1;for(var r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&o_(r,a,s,l,o,u,p.x,p.y)&&Es(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Kft(i,e,t,n){var r=i.prev,s=i,o=i.next;if(Es(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,m=a>l?a>u?a:u:l>u?l:u,y=c>h?c>d?c:d:h>d?h:d,v=oF(f,p,e,t,n),b=oF(m,y,e,t,n),x=i.prevZ,w=i.nextZ;x&&x.z>=v&&w&&w.z<=b;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==r&&x!==o&&o_(a,c,l,h,u,d,x.x,x.y)&&Es(x.prev,x,x.next)>=0||(x=x.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==r&&w!==o&&o_(a,c,l,h,u,d,w.x,w.y)&&Es(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=y&&x!==r&&x!==o&&o_(a,c,l,h,u,d,x.x,x.y)&&Es(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;w&&w.z<=b;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=y&&w!==r&&w!==o&&o_(a,c,l,h,u,d,w.x,w.y)&&Es(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Jft(i,e,t){var n=i;do{var r=n.prev,s=n.next.next;!uL(r,s)&&uDe(r,n,n.next,s)&&a2(r,s)&&a2(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),l2(n),l2(n.next),n=i=s),n=n.next}while(n!==i);return U0(n)}function Qft(i,e,t,n,r,s){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&lpt(o,a)){var l=cDe(o,a);o=U0(o,o.next),l=U0(l,l.next),o2(o,e,t,n,r,s,0),o2(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function ept(i,e,t,n){var r=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=lDe(i,a,l,n,!1),u===u.next&&(u.steiner=!0),r.push(apt(u));for(r.sort(tpt),s=0;s<r.length;s++)t=ipt(r[s],t);return t}function tpt(i,e){return i.x-e.x}function ipt(i,e){var t=npt(i,e);if(!t)return e;var n=cDe(t,i);return U0(n,n.next),U0(t,t.next)}function npt(i,e){var t=e,n=i.x,r=i.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,d;t=o;do n>=t.x&&t.x>=u&&n!==t.x&&o_(r<c?n:s,r,u,c,r<c?s:n,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(n-t.x),a2(t,i)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&rpt(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function rpt(i,e){return Es(i.prev,i,e.prev)<0&&Es(e.next,i,i.next)<0}function spt(i,e,t,n){var r=i;do r.z===0&&(r.z=oF(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,opt(r)}function opt(i){var e,t,n,r,s,o,a,l,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,u*=2}while(o>1);return i}function oF(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function apt(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function o_(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function lpt(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!upt(i,e)&&(a2(i,e)&&a2(e,i)&&cpt(i,e)&&(Es(i.prev,i,e.prev)||Es(i,e.prev,e))||uL(i,e)&&Es(i.prev,i,i.next)>0&&Es(e.prev,e,e.next)>0)}function Es(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function uL(i,e){return i.x===e.x&&i.y===e.y}function uDe(i,e,t,n){var r=LT(Es(i,e,t)),s=LT(Es(i,e,n)),o=LT(Es(t,n,i)),a=LT(Es(t,n,e));return!!(r!==s&&o!==a||r===0&&DT(i,t,e)||s===0&&DT(i,n,e)||o===0&&DT(t,i,n)||a===0&&DT(t,e,n))}function DT(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function LT(i){return i>0?1:i<0?-1:0}function upt(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&uDe(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function a2(i,e){return Es(i.prev,i,i.next)<0?Es(i,e,i.next)>=0&&Es(i,i.prev,e)>=0:Es(i,e,i.prev)<0||Es(i,i.next,e)<0}function cpt(i,e){var t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function cDe(i,e){var t=new aF(i.i,i.x,i.y),n=new aF(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function nbe(i,e,t,n){var r=new aF(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function l2(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function aF(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}lL.deviation=function(i,e,t,n){var r=e&&e.length,s=r?e[0]*t:i.length,o=Math.abs(lF(i,0,s,t));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:i.length;o-=Math.abs(lF(i,u,c,t))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,f=n[a+1]*t,p=n[a+2]*t;h+=Math.abs((i[d]-i[p])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[p+1]-i[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function lF(i,e,t,n){for(var r=0,s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}lL.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,r=0;r<i.length;r++){for(var s=0;s<i[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(i[r][s][o]);r>0&&(n+=i[r-1].length,t.holes.push(n))}return t};const rbe=.985;function hpt(i,e){e=e||[];const t=256,n=t-1;return e[0]=Math.floor(i/t/t/t)/n,e[1]=Math.floor(i/t/t)%t/n,e[2]=Math.floor(i/t)%t/n,e[3]=i%t/n,e}function dpt(i){let e=0;const t=256,n=t-1;return e+=Math.round(i[0]*t*t*t*n),e+=Math.round(i[1]*t*t*n),e+=Math.round(i[2]*t*n),e+=Math.round(i[3]*n),e}function fpt(){const i='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}function ppt(i,e){const t=i.viewState.projection,r=e.getSource().getWrapX()&&t.canWrapX(),s=t.getExtent(),o=i.extent,a=r?Di(s):null,l=r?Math.ceil((o[2]-s[2])/a)+1:1;return[r?Math.floor((o[0]-s[0])/a):0,l,a]}class hDe extends sDe{constructor(e,t){const n=t.uniforms||{},r=Ss();n[Hd.PROJECTION_MATRIX]=r,super(e,{uniforms:n,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new tk(oL,sF),this.indicesBuffer_=new tk(aL,sF),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const s=t.attributes?t.attributes.map(function(a){return{name:"a_prop_"+a.name,size:1,type:Th.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Th.FLOAT},{name:"a_index",size:1,type:Th.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:Th.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Th.FLOAT})),this.attributes.push(...s),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=Wa(),this.currentTransform_=r,this.renderTransform_=Ss(),this.invertRenderTransform_=Ss(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=fpt(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===ibe.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,q5(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[Wi(o,Uo.ADDFEATURE,this.handleSourceFeatureAdded_,this),Wi(o,Uo.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Wi(o,Uo.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Wi(o,Uo.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Gt(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Yft(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[Gt(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[Gt(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[Gt(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[n,r,s]=ppt(e,this.getLayer());return this.renderWorlds(e,!1,n,r,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,n,r,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),n=t.getSource(),r=e.viewState,s=!e.viewHints[Ir.ANIMATING]&&!e.viewHints[Ir.INTERACTING],o=!rc(this.previousExtent_,e.extent),a=this.sourceRevision_<n.getRevision();if(a&&(this.sourceRevision_=n.getRevision()),s&&(o||a)){const l=r.projection,u=r.resolution,c=t instanceof t1?t.getRenderBuffer():0,h=ql(e.extent,c*u);n.loadFeatures(h,u,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=Ss();this.helper.makeProjectionTransform(e,t);const r=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=r*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let c=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],fs(t,l),this.renderInstructions_[++c]=l[0],this.renderInstructions_[++c]=l[1],this.hitDetectionEnabled_){const f=hpt(c+5,u);this.renderInstructions_[++c]=f[0],this.renderInstructions_[++c]=f[1],this.renderInstructions_[++c]=f[2],this.renderInstructions_[++c]=f[3],this.renderInstructions_[++c]=Number(d)}for(let f=0;f<this.customAttributes.length;f++){const p=this.customAttributes[f].callback(o.feature,o.properties);this.renderInstructions_[++c]=p}}const h={id:++this.lastSentId,type:ibe.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:r-2};h.projectionTransform=t,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,t,n,r,s){if(sn(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=fs(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=dpt(l),c=this.renderInstructions_[u],h=Math.floor(c).toString(),f=this.getLayer().getSource().getFeatureByUid(h);if(f)return r(f,this.getLayer(),null)}renderWorlds(e,t,n,r,s){let o=n;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),U5(this.currentTransform_,o*s,0),e1(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<r)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){gr(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}let gpt=class{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}};const G4=.5;let l1=class extends Xb{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(qt.CHANGE)}release(){this.state===at.ERROR&&this.setState(at.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==at.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==at.LOADED){e.interimTile=null;break}e.getState()==at.LOADING?t=e:e.getState()==at.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==at.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){hi()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:FAe(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};function nk(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function uF(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}let gv=null;function mpt(i){gv||(gv=Xr(i.width,i.height,void 0,{willReadFrequently:!0}));const e=gv.canvas,t=i.width;e.width!==t&&(e.width=t);const n=i.height;return e.height!==n&&(e.height=n),gv.clearRect(0,0,t,n),gv.drawImage(i,0,0),gv.getImageData(0,0,t,n).data}const ypt=[256,256];let U4=class extends l1{constructor(e){const t=at.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=nk(this.data_);return e?[e.width,e.height]:ypt}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==at.IDLE&&this.state!==at.ERROR)return;this.state=at.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=at.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=at.ERROR,e.changed()})}};const vpt=10,sbe=.25;let q4=class{constructor(e,t,n,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Qh(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const x=b[0]+"/"+b[1];return a[x]||(a[x]=l(b)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Di(r)>=Di(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Di(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Di(this.targetProj_.getExtent()):null;const u=uc(n),c=Jb(n),h=Kb(n),d=$0(n),f=this.transformInv_(u),p=this.transformInv_(c),m=this.transformInv_(h),y=this.transformInv_(d),v=vpt+(o?Math.max(0,Math.ceil(Math.log2(HE(n)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,f,p,m,y,v),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(x,w,C){b=Math.min(b,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-b>this.sourceWorldWidth_/2){const w=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];w[0][0]-b>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-b>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-b>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const C=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-C<this.sourceWorldWidth_/2&&(x.source=w)}})}a={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,l,u){const c=ga([s,o,a,l]),h=this.sourceWorldWidth_?Di(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=ga([e,t,n,r]);p=Di(y)/this.targetWorldWidth_>sbe||p}!f&&this.sourceProj_.isGlobal()&&h&&(p=h>sbe||p)}if(!p&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Hr(c,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(u>0){if(!p){const y=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(y);let b;f?b=(Uh(s[0],d)+Uh(a[0],d))/2-Uh(v[0],d):b=(s[0]+a[0])/2-v[0];const x=(s[1]+a[1])/2-v[1];p=b*b+x*x>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const y=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(y),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(b);this.addQuad_(e,t,y,b,s,o,v,x,u-1),this.addQuad_(b,y,n,r,x,v,a,l,u-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(y),b=[(n[0]+r[0])/2,(n[1]+r[1])/2],x=this.transformInv_(b);this.addQuad_(e,y,b,r,s,v,x,l,u-1),this.addQuad_(y,t,n,b,v,o,a,x,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(e,n,r,s,a,l),m&14||this.addTriangle_(e,n,t,s,a,o),m&&(m&13||this.addTriangle_(t,r,e,o,l,s),m&7||this.addTriangle_(t,r,n,o,l,a))}calculateSourceExtent(){const e=Wa();return this.triangles_.forEach(function(t,n,r){const s=t.source;hE(e,s[0]),hE(e,s[1]),hE(e,s[2])}),e}getTriangles(){return this.triangles_}},II;const mf=[];function obe(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function OI(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function _pt(){if(II===void 0){const i=Xr(6,6,mf);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",obe(i,4,5,4,0),obe(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;II=OI(e,0)||OI(e,4)||OI(e,8),j0(i),mf.push(i.canvas)}return II}function u2(i,e,t,n){const r=Qb(t,e,i);let s=ub(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||vu(l,r)){const u=ub(i,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function dDe(i,e,t,n){const r=Ko(t);let s=u2(i,e,r,n);return(!isFinite(s)||s<=0)&&L5(t,function(o){return s=u2(i,e,o,n),isFinite(s)&&s>0}),s}function V4(i,e,t,n,r,s,o,a,l,u,c,h,d,f){const p=Xr(Math.round(t*i),Math.round(t*e),mf);if(h||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function m(C){return Math.round(C*t)/t}p.globalCompositeOperation="lighter";const y=Wa();l.forEach(function(C,D,R){CAe(y,C.extent)});let v;const b=t/n,x=(h?1:1+Math.pow(2,-24))/b;if(!d||l.length!==1||u!==0){if(v=Xr(Math.round(Di(y)*b),Math.round(Vr(y)*b),mf),h||(v.imageSmoothingEnabled=!1),r&&f){const C=(r[0]-y[0])*b,D=-(r[3]-y[3])*b,R=Di(r)*b,A=Vr(r)*b;v.rect(C,D,R,A),v.clip()}l.forEach(function(C,D,R){if(C.image.width>0&&C.image.height>0){if(C.clipExtent){v.save();const q=(C.clipExtent[0]-y[0])*b,M=-(C.clipExtent[3]-y[3])*b,F=Di(C.clipExtent)*b,N=Vr(C.clipExtent)*b;v.rect(h?q:Math.round(q),h?M:Math.round(M),h?F:Math.round(q+F)-Math.round(q),h?N:Math.round(M+N)-Math.round(M)),v.clip()}const A=(C.extent[0]-y[0])*b,L=-(C.extent[3]-y[3])*b,O=Di(C.extent)*b,$=Vr(C.extent)*b;v.drawImage(C.image,u,u,C.image.width-2*u,C.image.height-2*u,h?A:Math.round(A),h?L:Math.round(L),h?O:Math.round(A+O)-Math.round(A),h?$:Math.round(L+$)-Math.round(L)),C.clipExtent&&v.restore()}})}const w=uc(o);return a.getTriangles().forEach(function(C,D,R){const A=C.source,L=C.target;let O=A[0][0],$=A[0][1],q=A[1][0],M=A[1][1],F=A[2][0],N=A[2][1];const B=m((L[0][0]-w[0])/s),W=m(-(L[0][1]-w[1])/s),K=m((L[1][0]-w[0])/s),ee=m(-(L[1][1]-w[1])/s),te=m((L[2][0]-w[0])/s),le=m(-(L[2][1]-w[1])/s),Q=O,z=$;O=0,$=0,q-=Q,M-=z,F-=Q,N-=z;const J=[[q,M,0,0,K-B],[F,N,0,0,te-B],[0,0,q,M,ee-W],[0,0,F,N,le-W]],ye=snt(J);if(!ye)return;if(p.save(),p.beginPath(),_pt()||!h){p.moveTo(K,ee);const Ge=4,rt=B-K,Be=W-ee;for(let ze=0;ze<Ge;ze++)p.lineTo(K+m((ze+1)*rt/Ge),ee+m(ze*Be/(Ge-1))),ze!=Ge-1&&p.lineTo(K+m((ze+1)*rt/Ge),ee+m((ze+1)*Be/(Ge-1)));p.lineTo(te,le)}else p.moveTo(K,ee),p.lineTo(B,W),p.lineTo(te,le);p.clip(),p.transform(ye[0],ye[2],ye[1],ye[3],B,W),p.translate(y[0]-Q,y[3]-z);let Ne;if(v)Ne=v.canvas,p.scale(x,-x);else{const Ge=l[0],rt=Ge.extent;Ne=Ge.image,p.scale(Di(rt)/Ne.width,-Vr(rt)/Ne.height)}p.drawImage(Ne,0,0),p.restore()}),v&&(j0(v),mf.push(v.canvas)),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(C,D,R){const A=C.target,L=(A[0][0]-w[0])/s,O=-(A[0][1]-w[1])/s,$=(A[1][0]-w[0])/s,q=-(A[1][1]-w[1])/s,M=(A[2][0]-w[0])/s,F=-(A[2][1]-w[1])/s;p.beginPath(),p.moveTo($,q),p.lineTo(L,O),p.lineTo(M,F),p.closePath(),p.stroke()}),p.restore()),p.canvas}let H4=class extends U4{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?r?ho(n,r):n:r;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?ho(s,o):s;if(HE(l)===0){this.state=at.EMPTY;return}n&&(a?a=ho(a,n):a=n);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=dDe(t,c,l,u);if(!isFinite(h)||h<=0){this.state=at.EMPTY;return}const d=e.errorThreshold!==void 0?e.errorThreshold:G4;if(this.triangulation_=new q4(t,c,l,a,h*d,u),this.triangulation_.getTriangles().length===0){this.state=at.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let f=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(f[1]=Fi(f[1],a[1],a[3]),f[3]=Fi(f[3],a[1],a[3])):f=ho(f,a)),!HE(f))this.state=at.EMPTY;else{let p=0,m=0;t.canWrapX()&&(p=Di(n),m=Math.floor((f[0]-n[0])/p)),O5(f.slice(),t,!0).forEach(v=>{const b=this.sourceTileGrid_.getTileRangeForExtentAndZ(v,this.sourceZ_),x=e.getTileFunction;for(let w=b.minX;w<=b.maxX;w++)for(let C=b.minY;C<=b.maxY;C++){const D=x(this.sourceZ_,w,C,this.pixelRatio_);if(D){const R=m*p;this.sourceTiles_.push({tile:D,offset:R})}}++m}),this.sourceTiles_.length===0&&(this.state=at.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var C;const n=t.tile;if(!n||n.getState()!==at.LOADED)return;const r=n.getSize(),s=this.gutter_;let o;const a=uF(n.getData());a?o=a:o=mpt(nk(n.getData()));const l=[r[0]+2*s,r[1]+2*s],u=o instanceof Float32Array,c=l[0]*l[1],h=u?Float32Array:Uint8Array,d=new h(o.buffer),f=h.BYTES_PER_ELEMENT,p=f*d.length/c,m=d.byteLength/l[1],y=Math.floor(m/f/l[0]),v=c*y;let b=d;if(d.length!==v){b=new h(v);let D=0,R=0;const A=l[0]*y;for(let L=0;L<l[1];++L){for(let O=0;O<A;++O)b[D++]=d[R+O];R+=m/f}}const x=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);x[0]+=t.offset,x[2]+=t.offset;const w=(C=this.clipExtent_)==null?void 0:C.slice();w&&(w[0]+=t.offset,w[2]+=t.offset),e.push({extent:x,clipExtent:w,data:new Uint8Array(b.buffer),dataType:h,bytesPerPixel:p,pixelSize:l})}),this.sourceTiles_.length=0,e.length===0)this.state=at.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,c;const h=e[0].bytesPerPixel,d=Math.ceil(h/3);for(let f=d-1;f>=0;--f){const p=[];for(let w=0,C=e.length;w<C;++w){const D=e[w],R=D.data,A=D.pixelSize,L=A[0],O=A[1],$=Xr(L,O,mf),q=$.createImageData(L,O),M=q.data;let F=f*3;for(let N=0,B=M.length;N<B;N+=4)M[N]=R[F],M[N+1]=R[F+1],M[N+2]=R[F+2],M[N+3]=255,F+=h;$.putImageData(q,0,0),p.push({extent:D.extent,clipExtent:D.clipExtent,image:$.canvas})}const m=V4(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,p,this.gutter_,!1,!1,!1);for(let w=0,C=p.length;w<C;++w){const R=p[w].image.getContext("2d");j0(R),mf.push(R.canvas)}const y=m.getContext("2d"),v=y.getImageData(0,0,m.width,m.height);j0(y),mf.push(m),u||(c=new Uint8Array(h*v.width*v.height),u=new e[0].dataType(c.buffer));const b=v.data;let x=f*3;for(let w=0,C=b.length;w<C;w+=4)b[w+3]===255?(c[x]=b[w],c[x+1]=b[w+1],c[x+2]=b[w+2]):(c[x]=0,c[x+1]=0,c[x+2]=0),x+=h}this.reprojData_=u,this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=at.LOADED}this.changed()}load(){if(this.state!==at.IDLE&&this.state!==at.ERROR)return;this.state=at.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==at.IDLE&&n!==at.LOADING)return;e++;const r=Wi(t,qt.CHANGE,function(){const s=t.getState();(s==at.LOADED||s==at.ERROR||s==at.EMPTY)&&(gr(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==at.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(gr),this.sourcesListenerKeys_=null}},gb=class extends l1{constructor(e,t,n,r,s,o,a,l,u,c,h,d){super(s,at.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const y=p?ho(f,p):f;if(HE(y)===0){this.state=at.EMPTY;return}const v=e.getExtent();v&&(m?m=ho(m,v):m=v);const b=r.getResolution(this.wrappedTileCoord_[0]),x=dDe(e,n,y,b);if(!isFinite(x)||x<=0){this.state=at.EMPTY;return}const w=c!==void 0?c:G4;if(this.triangulation_=new q4(e,n,y,m,x*w,b),this.triangulation_.getTriangles().length===0){this.state=at.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let C=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(C[1]=Fi(C[1],m[1],m[3]),C[3]=Fi(C[3],m[1],m[3])):C=ho(C,m)),!HE(C))this.state=at.EMPTY;else{let D=0,R=0;e.canWrapX()&&(D=Di(v),R=Math.floor((C[0]-v[0])/D)),O5(C.slice(),e,!0).forEach(L=>{const O=t.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let $=O.minX;$<=O.maxX;$++)for(let q=O.minY;q<=O.maxY;q++){const M=u(this.sourceZ_,$,q,a);if(M){const F=R*D;this.sourceTiles_.push({tile:M,offset:F})}}++R}),this.sourceTiles_.length===0&&(this.state=at.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var r;const n=t.tile;if(n&&n.getState()==at.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=at.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=V4(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=at.LOADED}this.changed()}load(){if(this.state==at.IDLE){this.state=at.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==at.IDLE||n==at.LOADING){e++;const r=Wi(t,qt.CHANGE,function(s){const o=t.getState();(o==at.LOADED||o==at.ERROR||o==at.EMPTY)&&(gr(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==at.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(gr),this.sourcesListenerKeys_=null}release(){this.canvas_&&(j0(this.canvas_.getContext("2d")),mf.push(this.canvas_),this.canvas_=null),super.release()}},kC=class extends l1{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=at.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=at.ERROR,this.unlistenImage_(),this.image_=bpt(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=at.LOADED:this.state=at.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==at.ERROR&&(this.state=at.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==at.IDLE&&(this.state=at.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Rrt(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function bpt(){const i=Xr(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}let xpt=class extends Xb{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=e.gutter||0,this.helper_=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(qt.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===at.LOADED,this.loaded)this.uploadTile();else{if(e instanceof kC){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(qt.CHANGE,this.handleTileChange_)}}uploadTile(){hi()}setReady(){this.ready=!0,this.dispatchEvent(qt.CHANGE)}handleTileChange_(){this.tile.getState()===at.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(qt.CHANGE,this.handleTileChange_)}};function fDe(i,e,t){const n=t?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,n)}function wpt(i,e,t,n){fDe(i,e,n),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}function abe(i,e,t,n,r,s){const o=i.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,i.getExtension("OES_texture_float"),l=i.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),fDe(o,e,s&&l);const u=t.byteLength/n[1];let c=1;u%8===0?c=8:u%4===0?c=4:u%2===0&&(c=2);let h;switch(r){case 1:{h=o.LUMINANCE;break}case 2:{h=o.LUMINANCE_ALPHA;break}case 3:{h=o.RGB;break}case 4:{h=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${r}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,c),o.texImage2D(o.TEXTURE_2D,0,h,n[0],n[1],0,h,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let Bv=null;function Ept(){Bv=Xr(1,1,void 0,{willReadFrequently:!0})}let Cpt=class extends xpt{constructor(e){super(e),this.textures=[],this.renderSize_=Qr(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new tk(oL,z4);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}uploadTile(){const e=this.helper_,t=e.getGL(),n=this.tile;this.textures.length=0;let r;n instanceof kC||n instanceof gb?r=n.getImage():r=n.getData();const s=nk(r);if(s){const b=t.createTexture();this.textures.push(b),this.bandCount=4,wpt(t,b,s,n.interpolate),this.setReady();return}r=uF(r);const o=n.getSize(),a=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],l=r instanceof Float32Array,u=a[0]*a[1],c=l?Float32Array:Uint8Array,h=c.BYTES_PER_ELEMENT,d=r.byteLength/a[1];this.bandCount=Math.floor(d/h/a[0]);const f=Math.ceil(this.bandCount/4);if(f===1){const b=t.createTexture();this.textures.push(b),abe(e,b,r,a,this.bandCount,n.interpolate),this.setReady();return}const p=new Array(f);for(let b=0;b<f;++b){const x=t.createTexture();this.textures.push(x);const w=b<f-1?4:(this.bandCount-1)%4+1;p[b]=new c(u*w)}let m=0,y=0;const v=a[0]*this.bandCount;for(let b=0;b<a[1];++b){for(let x=0;x<v;++x){const w=r[y+x],C=Math.floor(m/this.bandCount),D=x%this.bandCount,R=Math.floor(D/4),A=p[R],L=A.length/u,O=D%4;A[C*L+O]=w,++m}y+=d/h}for(let b=0;b<f;++b){const x=this.textures[b],w=p[b],C=w.length/u;abe(e,x,w,a,C,n.interpolate)}this.setReady()}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(qt.CHANGE,this.handleTileChange_)}getImagePixelData_(e,t,n){const r=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1];Bv||Ept(),Bv.clearRect(0,0,1,1);const a=e.width,l=e.height,u=a-2*r,c=l-2*r,h=r+Math.floor(u*(t/s)),d=r+Math.floor(c*(n/o));let f;try{Bv.drawImage(e,h,d,1,1,0,0,1,1),f=Bv.getImageData(0,0,1,1).data}catch{return Bv=null,null}return f}getArrayPixelData_(e,t,n,r){const s=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],l=t[0],u=t[1],c=l+2*s,h=u+2*s,d=s+Math.floor(l*(n/o)),f=s+Math.floor(u*(r/a));if(e instanceof DataView){const m=e.byteLength/(c*h),y=m*(f*c+d),v=e.buffer.slice(y,y+m);return new DataView(v)}const p=this.bandCount*(f*c+d);return e.slice(p,p+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof U4){const n=this.tile.getData(),r=uF(n);if(r){const s=this.tile.getSize();return this.getArrayPixelData_(r,s,e,t)}return this.getImagePixelData_(nk(n),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}},W4=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return sn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return sn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){sn(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}},cL=class{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function mv(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new cL(i,e,t,n)}function c2(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function id(i,e,t){return i+"/"+e+"/"+t}function Hp(i){return id(i[0],i[1],i[2])}function Spt(i){const[e,t,n]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return id(e,t,n)}function pDe(i){return i.split("/").map(Number)}function X4(i){return(i[1]<<i[0])+i[2]}function Tpt(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}const Apt={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},Rpt={};function lbe(i){return 1/(i+2)}function kpt(){return{tileIds:new Set,representationsByZ:{}}}function ube(i,e){return i.tileIds.has(Gt(e))}function cbe(i,e,t){const n=i.representationsByZ;t in n||(n[t]=new Set),n[t].add(e),i.tileIds.add(Gt(e.tile))}function PI(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=ho(e,_u(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=ho(e,r))}return e}function cF(i,e){return`${i.getKey()},${i.getRevision()},${Hp(e)}`}let Dpt=class extends sDe{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ss(),this.tempMat4=iDe(),this.tempTileRange_=new cL(0,0,0,0),this.tempTileCoord_=c2(0,0,0),this.tempSize_=[0,0];const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new W4(n),this.frameState=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}isDrawableTile_(e){const t=this.getLayer(),n=e.getState(),r=t.getUseInterimTilesOnError();return n==at.LOADED||n==at.EMPTY||n==at.ERROR&&!r}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const n=this.getLayer().getRenderSource();return!n||ld(PI(e,e.extent))?!1:n.getState()==="ready"}createTileRepresentation(e){return hi()}enqueueTiles(e,t,n,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=l.getGutterForProjection(o.projection),h=Gt(l);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],f=this.tileRepresentationCache,p=a.getMapInternal(),m=Math.max(n-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let y=n;y>=m;--y){const v=u.getTileRangeForExtentAndZ(t,y,this.tempTileRange_),b=u.getResolution(y);for(let x=v.minX;x<=v.maxX;++x)for(let w=v.minY;w<=v.maxY;++w){const C=c2(y,x,w,this.tempTileCoord_),D=cF(l,C);let R,A;if(f.containsKey(D)&&(R=f.get(D),A=R.tile),(!R||R.tile.key!==l.getKey())&&(A=l.getTile(y,x,w,e.pixelRatio,o.projection)),ube(r,A))continue;if(!R)R=this.createTileRepresentation({tile:A,grid:u,helper:this.helper,gutter:c}),f.set(D,R);else if(this.isDrawableTile_(A))R.setTile(A);else{const O=A.getInterimTile();R.setTile(O)}cbe(r,R,y);const L=A.getKey();d[L]=!0,A.getState()===at.IDLE&&(e.tileQueue.isKeyQueued(L)||e.tileQueue.enqueue([A,h,u.getTileCoordCenter(C),b]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,n,r,s,o,a,l,u,c,h){}renderTileMask(e,t,n,r){}drawTile_(e,t,n,r,s,o,a){if(!t.ready)return;const u=t.tile.tileCoord,c=Hp(u),h=c in o?o[c]:1,d=a.getResolution(n),f=Qr(a.getTileSize(n),this.tempSize_),p=a.getOrigin(n),m=a.getTileCoordExtent(u),y=h<1?-1:lbe(n);h<1&&(e.animate=!0);const v=e.viewState,b=v.center[0],x=v.center[1],w=f[0]+2*r,C=f[1]+2*r,D=w/C,R=(b-p[0])/(f[0]*d),A=(p[1]-x)/(f[1]*d),L=v.resolution/d,O=u[1],$=u[2];MP(this.tileTransform_),dE(this.tileTransform_,2/(e.size[0]*L/w),-2/(e.size[1]*L/w)),$nt(this.tileTransform_,v.rotation),dE(this.tileTransform_,1,1/D),U5(this.tileTransform_,(f[0]*(O-R)-r)/w,(f[1]*($-A)-r)/C),this.renderTile(t,this.tileTransform_,e,s,d,f,p,m,y,r,h)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const n=e.viewState,r=this.getLayer(),s=r.getRenderSource(),o=s.getTileGridForProjection(n.projection),a=s.getGutterForProjection(n.projection),l=PI(e,e.extent),u=o.getZForResolution(n.resolution,s.zDirection),c=kpt(),h=r.getPreload();if(e.nextExtent){const D=o.getZForResolution(n.nextResolution,s.zDirection),R=PI(e,e.nextExtent);this.enqueueTiles(e,R,D,c,h)}this.enqueueTiles(e,l,u,c,0),h>0&&setTimeout(()=>{this.enqueueTiles(e,l,u-1,c,h-1)},0);const d={},f=Gt(this),p=e.time;let m=!1;for(const D of c.representationsByZ[u]){const R=D.tile;if((R instanceof gb||R instanceof H4)&&R.getState()===at.EMPTY)continue;const A=R.tileCoord;if(D.ready){const $=R.getAlpha(f,p);if($===1){R.endTransition(f);continue}m=!0;const q=Hp(A);d[q]=$}if(this.renderComplete=!1,this.findAltTiles_(o,A,u+1,c))continue;const O=o.getMinZoom();for(let $=u-1;$>=O&&!this.findAltTiles_(o,A,$,c);--$);}const y=c.representationsByZ,v=Object.keys(y).map(Number).sort(ent);if(this.beforeTilesMaskRender(e))for(let D=0,R=v.length;D<R;++D){const A=v[D];for(const L of y[A]){const O=L.tile.tileCoord;if(Hp(O)in d)continue;const q=o.getTileCoordExtent(O);this.renderTileMask(L,A,q,lbe(A))}}this.beforeTilesRender(e,m);for(let D=0,R=v.length;D<R;++D){const A=v[D];for(const L of y[A]){const O=L.tile.tileCoord;Hp(O)in d||this.drawTile_(e,L,A,a,l,d,o)}}for(const D of y[u]){const R=D.tile.tileCoord;Hp(R)in d&&this.drawTile_(e,D,u,a,l,d,o)}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const x=this.helper.getCanvas(),w=this.tileRepresentationCache;for(;w.canExpireCache();)w.pop().dispose();const C=function(D,R){s.updateCacheSize(.1,R.viewState.projection),s.expireCache(R.viewState.projection,Rpt)};return e.postRenderFunctions.push(C),this.postRender(t,e),x}findAltTiles_(e,t,n,r){const s=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let c=s.minY;c<=s.maxY;++c){const h=cF(l,[n,u,c]);let d=!1;if(a.containsKey(h)){const f=a.get(h);f.ready&&!ube(r,f.tile)&&(cbe(r,f,n),d=!0)}d||(o=!1)}return o}clearCache(){const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}};const ln={...Apt,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},MA={TEXTURE_COORD:"a_textureCoord"},Lpt=[{name:MA.TEXTURE_COORD,size:2,type:Th.FLOAT}];let Mpt=class extends Dpt{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new tk(aL,z4),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new Cpt(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,n,r,s,o,a,l,u,c,h){const d=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Lpt);let f=0;for(;f<e.textures.length;){const D=`${ln.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(e.textures[f],f,D),++f}for(let D=0;D<this.paletteTextures_.length;++D){const R=this.paletteTextures_[D],A=R.getTexture(d);this.helper.bindTexture(A,f,R.name),++f}const p=n.viewState,m=o[0]+2*c,y=o[1]+2*c,b=e.tile.tileCoord,x=b[1],w=b[2];this.helper.setUniformMatrixValue(ln.TILE_TRANSFORM,nDe(this.tempMat4,t)),this.helper.setUniformFloatValue(ln.TRANSITION_ALPHA,h),this.helper.setUniformFloatValue(ln.DEPTH,u);let C=r;c>0&&(C=l,ho(C,r,C)),this.helper.setUniformFloatVec4(ln.RENDER_EXTENT,C),this.helper.setUniformFloatValue(ln.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(ln.ZOOM,p.zoom),this.helper.setUniformFloatValue(ln.TEXTURE_PIXEL_WIDTH,m),this.helper.setUniformFloatValue(ln.TEXTURE_PIXEL_HEIGHT,y),this.helper.setUniformFloatValue(ln.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(ln.TEXTURE_ORIGIN_X,a[0]+x*o[0]*s-c*s),this.helper.setUniformFloatValue(ln.TEXTURE_ORIGIN_Y,a[1]-w*o[1]*s+c*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const n=this.frameState;if(!n)return null;const r=this.getLayer(),s=fs(n.pixelToCoordinateTransform,e.slice()),o=n.viewState,a=r.getExtent();if(a&&!vu(_u(a,o.projection),s))return null;const l=r.getSources(ga([s]),o.resolution);let u,c,h;for(u=l.length-1;u>=0;--u)if(c=l[u],c.getState()==="ready"){if(h=c.getTileGridForProjection(o.projection),c.getWrapX())break;const f=h.getExtent();if(!f||vu(f,s))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let f=h.getZForResolution(o.resolution);f>=h.getMinZoom();--f){const p=h.getTileCoordForCoordAndZ(s,f),m=cF(c,p);if(!d.containsKey(m))continue;const y=d.get(m),v=y.tile;if((v instanceof gb||v instanceof H4)&&v.getState()===at.EMPTY)return null;if(!y.loaded)continue;const b=h.getOrigin(f),x=Qr(h.getTileSize(f)),w=h.getResolution(f),C=(s[0]-b[0])/w-p[1]*x[0],D=(b[1]-s[1])/w-p[2]*x[1];return y.getPixelData(C,D)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const n of this.paletteTextures_)n.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}};function Ipt(i,e){return`operator_${i}_${Object.keys(e.functions).length}`}function w0(i){const e=i.toString();return e.includes(".")?e:e+".0"}function hL(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(w0).join(", ")})`}function IA(i){const e=Yc(i),t=e.length>3?e[3]:1;return hL([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}function Opt(i){const e=Qr(i);return hL(e)}const FI={};let Ppt=0;function rk(i){return i in FI||(FI[i]=Ppt++),FI[i]}function Kd(i){return w0(rk(i))}function Y4(i){return"u_var_"+i}function Fpt(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const NI="getBandValue",gDe="u_paletteTextures";function Npt(i,e,t,n){const r=Or(i,t,e);if(bC(r.type,ly))throw new Error("No matching type was found");if(!zc(e,r.type)){const s=Lo(e),o=Lo(r.type);throw new Error(`Expected expression to be of type ${s}, got ${o}`)}return Z4(r,e,n)}function dr(i){return(e,t,n)=>{const r=t.args.length,s=new Array(r);for(let o=0;o<r;++o)s[o]=Z4(t.args[o],n,e);return i(s,e)}}const $pt={[qe.Get]:(i,e)=>{const n=e.args[0].value;return n in i.properties||(i.properties[n]={name:n,type:e.type}),(i.inFragmentShader?"v_prop_":"a_prop_")+n},[qe.GeometryType]:(i,e,t)=>{const n="geometryType";return n in i.properties||(i.properties[n]={name:n,type:Xo,evaluator:o=>h4(o.getGeometry())}),(i.inFragmentShader?"v_prop_":"a_prop_")+n},[qe.Var]:(i,e)=>{const n=e.args[0].value;return n in i.variables||(i.variables[n]={name:n,type:e.type}),Y4(n)},[qe.Resolution]:()=>"u_resolution",[qe.Zoom]:()=>"u_zoom",[qe.Time]:()=>"u_time",[qe.Any]:dr(i=>`(${i.join(" || ")})`),[qe.All]:dr(i=>`(${i.join(" && ")})`),[qe.Not]:dr(([i])=>`(!${i})`),[qe.Equal]:dr(([i,e])=>`(${i} == ${e})`),[qe.NotEqual]:dr(([i,e])=>`(${i} != ${e})`),[qe.GreaterThan]:dr(([i,e])=>`(${i} > ${e})`),[qe.GreaterThanOrEqualTo]:dr(([i,e])=>`(${i} >= ${e})`),[qe.LessThan]:dr(([i,e])=>`(${i} < ${e})`),[qe.LessThanOrEqualTo]:dr(([i,e])=>`(${i} <= ${e})`),[qe.Multiply]:dr(i=>`(${i.join(" * ")})`),[qe.Divide]:dr(([i,e])=>`(${i} / ${e})`),[qe.Add]:dr(i=>`(${i.join(" + ")})`),[qe.Subtract]:dr(([i,e])=>`(${i} - ${e})`),[qe.Clamp]:dr(([i,e,t])=>`clamp(${i}, ${e}, ${t})`),[qe.Mod]:dr(([i,e])=>`mod(${i}, ${e})`),[qe.Pow]:dr(([i,e])=>`pow(${i}, ${e})`),[qe.Abs]:dr(([i])=>`abs(${i})`),[qe.Floor]:dr(([i])=>`floor(${i})`),[qe.Ceil]:dr(([i])=>`ceil(${i})`),[qe.Round]:dr(([i])=>`floor(${i} + 0.5)`),[qe.Sin]:dr(([i])=>`sin(${i})`),[qe.Cos]:dr(([i])=>`cos(${i})`),[qe.Atan]:dr(([i,e])=>e!==void 0?`atan(${i}, ${e})`:`atan(${i})`),[qe.Sqrt]:dr(([i])=>`sqrt(${i})`),[qe.Match]:dr(i=>{const e=i[0],t=i[i.length-1];let n=null;for(let r=i.length-3;r>=1;r-=2){const s=i[r],o=i[r+1];n=`(${e} == ${s} ? ${o} : ${n||t})`}return n}),[qe.Between]:dr(([i,e,t])=>`(${i} >= ${e} && ${i} <= ${t})`),[qe.Interpolate]:dr(([i,e,...t])=>{let n="";for(let r=0;r<t.length-2;r+=2){const s=t[r],o=n||t[r+1],a=t[r+2],l=t[r+3];let u;i===w0(1)?u=`(${e} - ${s}) / (${a} - ${s})`:u=`(pow(${i}, (${e} - ${s})) - 1.0) / (pow(${i}, (${a} - ${s})) - 1.0)`,n=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return n}),[qe.Case]:dr(i=>{const e=i[i.length-1];let t=null;for(let n=i.length-3;n>=0;n-=2){const r=i[n],s=i[n+1];t=`(${r} ? ${s} : ${t||e})`}return t}),[qe.In]:dr(([i,...e],t)=>{const n=Ipt("in",t),r=[];for(let s=0;s<e.length;s+=1)r.push(`  if (inputValue == ${e[s]}) { return true; }`);return t.functions[n]=`bool ${n}(float inputValue) {
${r.join(`
`)}
  return false;
}`,`${n}(${i})`}),[qe.Array]:dr(i=>`vec${i.length}(${i.join(", ")})`),[qe.Color]:dr(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`(${i[1]} * vec4(vec3(${i[0]} / 255.0), 1.0))`;const e=i.slice(0,3).map(n=>`${n} / 255.0`);return i.length===3?`vec4(${e.join(", ")}, 1.0)`:`(${i[3]} * vec4(${e.join(", ")}, 1.0))`}),[qe.Band]:dr(([i,e,t],n)=>{if(!(NI in n.functions)){let r="";const s=n.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${ln.TILE_TEXTURE_ARRAY}[${a}]`;r+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}n.functions[NI]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${ln.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${ln.TEXTURE_PIXEL_HEIGHT};
${r}
}`}return`${NI}(${i}, ${e??"0.0"}, ${t??"0.0"})`}),[qe.Palette]:(i,e)=>{const[t,...n]=e.args,r=n.length,s=new Uint8Array(r*4);for(let u=0;u<n.length;u++){const c=n[u].value,h=Yc(c),d=u*4;s[d]=h[0],s[d+1]=h[1],s[d+2]=h[2],s[d+3]=h[3]*255}i.paletteTextures||(i.paletteTextures=[]);const o=`${gDe}[${i.paletteTextures.length}]`,a=new gpt(o,s);i.paletteTextures.push(a);const l=Z4(t,Tt,i);return`texture2D(${o}, vec2((${l} + 0.5) / ${r}.0, 0.5))`}};function Z4(i,e,t){if(i instanceof bRe){const n=$pt[i.operator];if(n===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return n(t,i,e)}if((i.type&Tt)>0)return w0(i.value);if((i.type&rs)>0)return i.value.toString();if((i.type&Xo)>0)return Kd(i.value.toString());if((i.type&Pr)>0)return IA(i.value);if((i.type&_a)>0)return hL(i.value);if((i.type&jc)>0)return Opt(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${Lo(e)})`)}function Bpt(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const yv=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,vv=Bpt();class mDe{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${w0(vv["circle-radius"])} + ${w0(vv["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=IA(vv["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=w0(vv["stroke-width"]),this.strokeColorExpression_=IA(vv["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Kd("round"),this.strokeJoinExpression_=Kd("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=IA(vv["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,t,n){return this.varyings_.push({name:e,type:t,expression:n}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_prop_hitColor = a_prop_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_prop_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${rbe} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_prop_hitColor = a_prop_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_prop_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${rbe}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Kd("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Kd("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Kd("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Kd("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0.5, -0.5, distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_prop_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_prop_hitColor = a_prop_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${yv}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_prop_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_prop_hitColor;
  }
}`:null}}const Cc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},jpt=["#00f","#0ff","#0f0","#ff0","#f00"];class zpt extends t1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(Cc.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:jpt),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const n=e.weight?e.weight:"weight";typeof n=="string"?this.weightFunction_=function(r){return r.get(n)}:this.weightFunction_=n,this.setRenderOrder(null)}getBlur(){return this.get(Cc.BLUR)}getGradient(){return this.get(Cc.GRADIENT)}getRadius(){return this.get(Cc.RADIUS)}handleGradientChanged_(){this.gradient_=Gpt(this.getGradient())}setBlur(e){this.set(Cc.BLUR,e)}setGradient(e){this.set(Cc.GRADIENT,e)}setRadius(e){this.set(Cc.RADIUS,e)}createRenderer(){const e=new mDe().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new hDe(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const n=this.weightFunction_(t);return n!==void 0?Fi(n,0,1):1}}],uniforms:{u_size:()=>(this.get(Cc.RADIUS)+this.get(Cc.BLUR))*2,u_blurSlope:()=>this.get(Cc.RADIUS)/Math.max(1,this.get(Cc.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function Gpt(i){const n=Xr(1,256),r=n.createLinearGradient(0,0,1,256),s=1/(i.length-1);for(let o=0,a=i.length;o<a;++o)r.addColorStop(o*s,i[o]);return n.fillStyle=r,n.fillRect(0,0,1,256),n.canvas}const Upt=zpt;let qpt=class extends sy{constructor(e){e=e||{},super(e)}},yDe=class extends j4{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=ho(l,_u(t.extent,r.projection))),!a[Ir.ANIMATING]&&!a[Ir.INTERACTING]&&!ld(l))if(o){const u=r.projection,c=o.getImage(l,s,n,u);c&&(this.loadImage(c)?this.image_=c:c.getState()===Ut.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=fs(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!vu(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Di(o),u=Math.floor(a.width*((r[0]-o[0])/l));if(u<0||u>=a.width)return null;const c=Vr(o),h=Math.floor(a.height*((o[3]-r[1])/c));return h<0||h>=a.height?null:this.getImageData(a,u,h)}renderFrame(e,t){const n=this.image_,r=n.getExtent(),s=n.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,f=h.resolution,p=c*o/(f*l),m=c*a/(f*l);this.prepareContainer(e,t);const y=this.context.canvas.width,v=this.context.canvas.height,b=this.getRenderContext(e);let x=!1,w=!0;if(u.extent){const L=_u(u.extent,h.projection);w=Hr(L,e.extent),x=w&&!ya(L,e.extent),x&&this.clipUnrotated(b,e,L)}const C=n.getImage(),D=Tu(this.tempTransform,y/2,v/2,p,m,0,l*(r[0]-d[0])/o,l*(d[1]-r[3])/a);this.renderedResolution=a*c/l;const R=C.width*D[0],A=C.height*D[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,e),w&&R>=.5&&A>=.5){const L=D[4],O=D[5],$=u.opacity;$!==1&&(b.save(),b.globalAlpha=$),b.drawImage(C,0,0,+C.width,+C.height,L,O,R,A),$!==1&&b.restore()}return this.postRender(this.context,e),x&&b.restore(),b.imageSmoothingEnabled=!0,this.container}},Vpt=class extends qpt{constructor(e){super(e)}createRenderer(){return new yDe(this)}getData(e){return super.getData(e)}};const K4=Vpt,og={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};let vDe=class extends sy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(og.PRELOAD)}setPreload(e){this.set(og.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(og.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(og.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},_De=class extends j4{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Wa(),this.tmpTileRange_=new cL(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),r=t.getUseInterimTilesOnError();return n==at.LOADED||n==at.EMPTY||n==at.ERROR&&!r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,n,s,o);return u.getState()==at.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=fs(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!vu(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(t.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const f=c.getTileCoordForCoordAndZ(r,d),p=u.getTile(d,f[1],f[2],o,a);if(!(p instanceof kC||p instanceof gb)||p instanceof gb&&p.getState()===at.EMPTY)return null;if(p.getState()!==at.LOADED)continue;const m=c.getOrigin(d),y=Qr(c.getTileSize(d)),v=c.getResolution(d),b=Math.floor(h*((r[0]-m[0])/v-f[1]*y[0])),x=Math.floor(h*((m[1]-r[1])/v-f[2]*y[1])),w=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),b+w,x+w)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),p=f.getZForResolution(o,h.zDirection),m=f.getResolution(p);let y=e.extent;const v=e.viewState.resolution,b=h.getTilePixelRatio(u);this.prepareContainer(e,t);const x=this.context.canvas.width,w=this.context.canvas.height,C=n.extent&&_u(n.extent);C&&(y=ho(y,_u(n.extent)));const D=m*x/2/b,R=m*w/2/b,A=[a[0]-D,a[1]-R,a[0]+D,a[1]+R],L=f.getTileRangeForExtentAndZ(y,p),O={};O[p]={};const $=this.createLoadedTileFinder(h,s,O),q=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const F=l?RP(r.center,v,l,e.size):void 0;for(let le=L.minX;le<=L.maxX;++le)for(let Q=L.minY;Q<=L.maxY;++Q){if(l&&!f.tileCoordIntersectsViewport([p,le,Q],F))continue;const z=this.getTile(p,le,Q,e);if(this.isDrawableTile(z)){const Ne=Gt(this);if(z.getState()==at.LOADED){O[p][z.tileCoord.toString()]=z;let Ge=z.inTransition(Ne);Ge&&n.opacity!==1&&(z.endTransition(Ne),Ge=!1),!this.newTiles_&&(Ge||!this.renderedTiles.includes(z))&&(this.newTiles_=!0)}if(z.getAlpha(Ne,e.time)===1)continue}const J=f.getTileCoordChildTileRange(z.tileCoord,M,q);let ye=!1;J&&(ye=$(p+1,J)),ye||f.forEachTileCoordParentTileRange(z.tileCoord,$,M,q)}const N=m/o*u/b,B=this.getRenderContext(e);Tu(this.tempTransform,x/2,w/2,N,N,0,-x/2,-w/2),C&&this.clipUnrotated(B,e,C),h.getInterpolate()||(B.imageSmoothingEnabled=!1),this.preRender(B,e),this.renderedTiles.length=0;let W=Object.keys(O).map(Number);W.sort(Gh);let K,ee,te;n.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?W=W.reverse():(K=[],ee=[]);for(let le=W.length-1;le>=0;--le){const Q=W[le],z=h.getTilePixelSize(Q,u,s),ye=f.getResolution(Q)/m,Ne=z[0]*ye*N,Ge=z[1]*ye*N,rt=f.getTileCoordForCoordAndZ(uc(A),Q),Be=f.getTileCoordExtent(rt),ze=fs(this.tempTransform,[b*(Be[0]-A[0])/m,b*(A[3]-Be[3])/m]),lt=b*h.getGutterForProjection(s),xt=O[Q];for(const Mt in xt){const Ct=xt[Mt],gi=Ct.tileCoord,Wt=rt[1]-gi[1],Qi=Math.round(ze[0]-(Wt-1)*Ne),He=rt[2]-gi[2],ge=Math.round(ze[1]-(He-1)*Ge),se=Math.round(ze[0]-Wt*Ne),re=Math.round(ze[1]-He*Ge),pe=Qi-se,I=ge-re,G=p===Q,Z=G&&Ct.getAlpha(Gt(this),e.time)!==1;let ie=!1;if(!Z)if(K){te=[se,re,se+pe,re,se+pe,re+I,se,re+I];for(let me=0,_e=K.length;me<_e;++me)if(p!==Q&&Q<ee[me]){const xe=K[me];Hr([se,re,se+pe,re+I],[xe[0],xe[3],xe[4],xe[7]])&&(ie||(B.save(),ie=!0),B.beginPath(),B.moveTo(te[0],te[1]),B.lineTo(te[2],te[3]),B.lineTo(te[4],te[5]),B.lineTo(te[6],te[7]),B.moveTo(xe[6],xe[7]),B.lineTo(xe[4],xe[5]),B.lineTo(xe[2],xe[3]),B.lineTo(xe[0],xe[1]),B.clip())}K.push(te),ee.push(Q)}else B.clearRect(se,re,pe,I);this.drawTileImage(Ct,e,se,re,pe,I,lt,G),K&&!Z?(ie&&B.restore(),this.renderedTiles.unshift(Ct)):this.renderedTiles.push(Ct),this.updateUsedTiles(e.usedTiles,h,Ct)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!rc(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,h,f,u,s,y,p,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender(this.context,e),n.extent&&B.restore(),B.imageSmoothingEnabled=!0,this.container}drawTileImage(e,t,n,r,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(t),h=Gt(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(h,t.time):1),p=f!==c.globalAlpha;p&&(c.save(),c.globalAlpha=f),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,r,s,o),p&&c.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=(function(r,s,o){const a=Gt(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const r=Gt(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}manageTilePyramid(e,t,n,r,s,o,a,l,u){const c=Gt(t);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=e.tileQueue,f=n.getMinZoom(),p=e.viewState.rotation,m=p?RP(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let y=0,v,b,x,w,C,D;for(D=f;D<=a;++D)for(b=n.getTileRangeForExtentAndZ(o,D,b),x=n.getResolution(D),w=b.minX;w<=b.maxX;++w)for(C=b.minY;C<=b.maxY;++C)p&&!n.tileCoordIntersectsViewport([D,w,C],m)||(a-D<=l?(++y,v=t.getTile(D,w,C,r,s),v.getState()==at.IDLE&&(h[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,c,n.getTileCoordCenter(v.tileCoord),x])),u!==void 0&&u(v)):t.useTile(D,w,C,s));t.updateCacheSize(y,s)}},Hpt=class extends vDe{constructor(e){super(e)}createRenderer(){return new _De(this)}};const J4=Hpt;class Q4 extends HD{constructor(e,t,n,r,s){const o=s!==void 0?Ut.IDLE:Ut.LOADED;super(e,t,n,o),this.loader_=s!==void 0?s:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Ut.ERROR):this.state=Ut.LOADED,this.changed()}load(){this.state==Ut.IDLE&&(this.state=Ut.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function sk(i){return Array.isArray(i)?Math.min(...i):i}class Wpt extends yDe{constructor(e){super(e),this.vectorRenderer_=new Jke(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Ss(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=fs(this.coordinateToVectorPixelTransform_,fs(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const t=e.pixelRatio,n=e.viewState,r=n.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),M5(a,this.layerImageRatio_));const l=Di(a)/r,u=Vr(a)/r;if(!s[Ir.ANIMATING]&&!s[Ir.INTERACTING]&&!ld(a)){o.useContainer(null,null);const c=o.context,h=e.layerStatesArray[e.layerIndex],d=Object.assign({},h,{opacity:1}),f=Object.assign({},e,{extent:a,size:[l,u],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(f.declutter={[p]:new _C(9)});let m=!0;const y=new Q4(a,r,t,c.canvas,function(v){o.prepareFrame(f)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(f,null)&&(o.renderDeclutter(f),o.renderDeferred(f),m=!1),v())});y.addEventListener(qt.CHANGE,()=>{if(y.getState()!==Ut.LOADED)return;this.image_=m?null:y;const v=y.getPixelRatio(),b=sk(y.getResolution())*t/v;this.renderedResolution=b,this.coordinateToVectorPixelTransform_=Tu(this.coordinateToVectorPixelTransform_,l/2,u/2,1/b,-1/b,0,-n.center[0],-n.center[1])}),y.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,n,r,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,n,r,s):super.forEachFeatureAtCoordinate(e,t,n,r,s)}}class Xpt extends t1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Wpt(this)}}const Ypt=Xpt,Zpt={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},hbe={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};let Kpt=class extends _De{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Ss(),this.tileClipContexts_=null}prepareTile(e,t,n){let r;const s=e.getState();return(s===at.LOADED||s===at.ERROR)&&(this.updateExecutorGroup_(e,t,n),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),c=u.getSource().getTile(e,t,n,s,l),h=r.viewHints,d=!(h[Ir.ANIMATING]||h[Ir.INTERACTING]);return(d||!c.wantedResolution)&&(c.wantedResolution=a),this.prepareTile(c,s,l)&&(d||Date.now()-r.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(c,r),super.getTile(e,t,n,r)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?Gt(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const u=r.getSource(),c=!!r.getDeclutter(),h=u.getTileGrid(),f=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(t,n,e),m=Gt(r);delete e.hitDetectionImageData[m],e.executorGroups[m]=[],l.dirty=!1;for(let y=0,v=p.length;y<v;++y){const b=p[y];if(b.getState()!=at.LOADED)continue;const x=b.tileCoord,w=h.getTileCoordExtent(x),C=ho(f,w),D=ql(C,r.getRenderBuffer()*a,this.tmpExtent),R=rc(w,C)?null:D,A=new Uke(0,C,a,t),L=QR(a,t),O=function(N,B){let W;const K=N.getStyleFunction()||r.getStyleFunction();if(K&&(W=K(N,a)),W){const ee=this.renderFeature(N,L,W,A,c,B);l.dirty=l.dirty||ee}},$=b.getFeatures();o&&o!==l.renderedRenderOrder&&$.sort(o);for(let N=0,B=$.length;N<B;++N){const W=$[N];(!R||Hr(R,W.getGeometry().getExtent()))&&O.call(this,W,N)}const q=A.finish(),M=r.getRenderMode()!=="vector"&&c&&p.length===1?null:C,F=new Vke(M,a,t,u.getOverlaps(),q,r.getRenderBuffer(),!0);e.executorGroups[m].push(F)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,n,r,s){const o=t.viewState.resolution,a=t.viewState.rotation;n=n??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(t.viewState.projection),h=ga([e]);ql(h,o*n,h);const d={},f=function(y,v,b){let x=y.getId();x===void 0&&(x=Gt(y));const w=d[x];if(w){if(w!==!0&&b<w.distanceSq){if(b===0)return d[x]=!0,s.splice(s.lastIndexOf(w),1),r(y,l,v);w.geometry=v,w.distanceSq=b}}else{if(b===0)return d[x]=!0,r(y,l,v);s.push(d[x]={feature:y,layer:l,geometry:v,distanceSq:b,callback:r})}},p=this.renderedTiles;let m;for(let y=0,v=p.length;!m&&y<v;++y){const b=p[y],x=c.getTileCoordExtent(b.wrappedTileCoord);if(!Hr(x,h))continue;const w=Gt(l),C=[b.executorGroups[w]],D=l.getDeclutter();C.some(R=>{const A=D?t.declutter[D].all().map(L=>L.value):null;for(let L=0,O=R.length;L<O;++L)if(m=R[L].forEachFeatureAtCoordinate(e,o,a,n,f,A),m)return!0})}return m}getFeatures(e){return new Promise((t,n)=>{const r=this.getLayer(),s=Gt(r),o=r.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,c=o.getTileGridForProjection(a),h=fs(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let f;for(let x=0,w=this.renderedTiles.length;x<w;++x)if(d.toString()===this.renderedTiles[x].tileCoord.toString()){if(f=this.renderedTiles[x],f.getState()===at.LOADED){const C=c.getTileCoordExtent(f.tileCoord);o.getWrapX()&&a.canWrapX()&&!ya(l,C)&&BD(h,a);break}f=void 0}if(!f||f.loadingSourceTiles>0){t([]);return}const p=c.getTileCoordExtent(f.wrappedTileCoord),m=uc(p),y=[(h[0]-m[0])/u,(m[1]-h[1])/u],v=f.getSourceTiles().reduce(function(x,w){return x.concat(w.getFeatures())},[]);let b=f.hitDetectionImageData[s];if(!b){const x=Qr(c.getTileSize(c.getZForResolution(u,o.zDirection))),w=this.renderedRotation_,C=[this.getRenderTransform(c.getTileCoordCenter(f.wrappedTileCoord),u,0,gu,x[0]*gu,x[1]*gu,0)];b=Wke(x,C,v,r.getStyleFunction(),c.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(r).renderedResolution,w),f.hitDetectionImageData[s]=b}t(Xke(y,v,b))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const n=this.context,r=n.globalAlpha;n.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[Ir.ANIMATING]||s[Ir.INTERACTING]),a=this.renderedTiles;for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.executorGroups[Gt(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let f=h.length-1;f>=0;--f)h[f].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,o,JR,d?e.declutter[d]:void 0)}n.globalAlpha=r}renderDeferredInternal(e){const n=this.renderedTiles.reduce((a,l,u)=>(l.executorGroups[Gt(this.getLayer())].forEach(c=>a.push({executorGroup:c,index:u})),a),[]),r=n.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=n.length;a<l;++a){const u=n[a].executorGroup.getDeferredZIndexContexts();for(const c in u)s[c]=!0}Object.keys(s).sort(Gh).map(Number).forEach(a=>{r.forEach((l,u)=>{l[a]&&(l[a].forEach(c=>{const{executorGroup:h,index:d}=n[u],f=h.getRenderedContext(),p=f.globalAlpha;f.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[d];m&&m.draw(f),c.draw(f),m&&f.restore(),f.globalAlpha=p,c.clear()}),l[a].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,r=t.viewState,s=r.center,o=r.resolution,a=r.rotation,l=t.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,p=d.getTileCoordExtent(e.wrappedTileCoord),m=d.getTileCoordExtent(f,this.tmpExtent)[0]-p[0];return e1(dE(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(s,o,a,n,u,c,m))}postRender(e,t){var w;const n=t.viewHints,r=!(n[Ir.ANIMATING]||n[Ir.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),u=l?hbe[o].filter(C=>!JR.includes(C)):hbe[o],c=t.viewState,h=c.rotation,d=s.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),m=this.renderedTiles,y=[],v=[],b=[];let x=!0;for(let C=m.length-1;C>=0;--C){const D=m[C];x=x&&!D.getReplayState(s).dirty;const R=D.executorGroups[Gt(s)].filter(F=>F.hasExecutors(u));if(R.length===0)continue;const A=this.getTileRenderTransform(D,t),L=D.tileCoord[0];let O=!1;const $=R[0].getClipCoords(A);let q=e,M;if($){M=new B4,q=M.getContext();for(let F=0,N=y.length;F<N;++F)if(p!==L&&L<v[F]){const B=y[F];Hr([$[0],$[3],$[4],$[7]],[B[0],B[3],B[4],B[7]])&&(O||(q.save(),O=!0),q.beginPath(),q.moveTo($[0],$[1]),q.lineTo($[2],$[3]),q.lineTo($[4],$[5]),q.lineTo($[6],$[7]),q.moveTo(B[6],B[7]),q.lineTo(B[4],B[5]),q.lineTo(B[2],B[3]),q.lineTo(B[0],B[1]),q.clip())}y.push($),v.push(L)}for(let F=0,N=R.length;F<N;++F)R[F].execute(e,[e.canvas.width,e.canvas.height],A,h,r,u,(w=t.declutter)==null?void 0:w[l]);O&&(q===e?q.restore():b[C]=M)}e.globalAlpha=a,this.ready=x,this.tileClipContexts_=b,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=ek(r,e,n[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=ek(r,e,n,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),r=t.getRevision(),s=e.wantedResolution;return n.renderedTileResolution!==s||n.renderedTileRevision!==r}renderTileImage_(e,t){const n=this.getLayer(),r=e.getReplayState(n),s=n.getRevision(),o=e.executorGroups[Gt(n)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],u=n.getSource();let c=t.pixelRatio;const d=t.viewState.projection,f=u.getTileGridForProjection(d),p=f.getResolution(e.tileCoord[0]),m=t.pixelRatio/e.wantedResolution*p,y=f.getResolution(l),v=e.getContext(n);c=Math.round(Math.max(c,m/c));const b=u.getTilePixelSize(l,c,d);v.canvas.width=b[0],v.canvas.height=b[1];const x=c/m;if(x!==1){const R=MP(this.tmpTransform_);dE(R,x,x),v.setTransform.apply(v,R)}const w=f.getTileCoordExtent(a,this.tmpExtent),C=m/y,D=MP(this.tmpTransform_);dE(D,C,-C),U5(D,-w[0],-w[3]);for(let R=0,A=o.length;R<A;++R)o[R].execute(v,[v.canvas.width*x,v.canvas.height*x],D,0,!0,Zpt[n.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}},Jpt=class extends t1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const n=e.renderMode||"hybrid";sn(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Kpt(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(og.PRELOAD)}getUseInterimTilesOnError(){return this.get(og.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(og.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(og.USE_INTERIM_TILES_ON_ERROR,e)}};const bDe=Jpt;function Ui(i,e,t){const n=c4();return n.style=i.style,Npt(e,t,n,i)}function dbe(i){const e=Yc(i),t=e[0]*256,n=e[1],r=e[2]*256,s=Math.round(e[3]*255);return[t+n,r+s]}const Qpt=`vec4 unpackColor(vec2 packedColor) {
  return fract(packedColor[1] / 256.0) * vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    1.0
  );
}`;function xDe(i){return i===Pr||i===jc?2:i===_a?4:1}function $I(i){const e=xDe(i);return e>1?`vec${e}`:"float"}function ok(i){return(JSON.stringify(i).split("").reduce((t,n)=>(t<<5)-t+n.charCodeAt(0),0)>>>0).toString()}function e$(i,e,t,n){if(`${n}radius`in i&&n!=="icon-"){let r=Ui(t,i[`${n}radius`],Tt);if(`${n}radius2`in i){const s=Ui(t,i[`${n}radius2`],Tt);r=`max(${r}, ${s})`}`${n}stroke-width`in i&&(r=`(${r} + ${Ui(t,i[`${n}stroke-width`],Tt)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${r} * 2. + 0.5)`)}if(`${n}scale`in i){const r=Ui(t,i[`${n}scale`],jc);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${r}`)}`${n}displacement`in i&&e.setSymbolOffsetExpression(Ui(t,i[`${n}displacement`],_a)),`${n}rotation`in i&&e.setSymbolRotationExpression(Ui(t,i[`${n}rotation`],Tt)),`${n}rotate-with-view`in i&&e.setSymbolRotateWithView(!!i[`${n}rotate-with-view`])}function wDe(i,e,t,n,r){let s="vec4(0.)";if(e!==null&&(s=e),t!==null&&n!==null){const l=`smoothstep(-${n} + 0.63, -${n} - 0.58, ${i})`;s=`mix(${t}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${i}))`;let a=`${s} * ${o}`;return r!==null&&(a=`${a} * ${r}`),a}function t$(i,e,t,n,r){const s=new Image;let o;return s.crossOrigin=i[`${n}cross-origin`]===void 0?"anonymous":i[`${n}cross-origin`],s.src=i[`${n}src`],s.complete&&s.width&&s.height?o=hL([s.width,s.height]):(t[`u_texture${r}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${r}_size`),o=`u_texture${r}_size`),t[`u_texture${r}`]=s,e.addUniform(`sampler2D u_texture${r}`),o}function i$(i,e,t,n,r){let s=Ui(t,i[`${e}offset`],_a);if(`${e}offset-origin`in i)switch(i[`${e}offset-origin`]){case"top-right":s=`vec2(${n}.x, 0.) + ${r} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${n}.y) + ${r} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${n} - ${r} - ${s}`;break}return s}function egt(i,e,t,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,e$(i,e,n,"circle-");let s=null;"circle-opacity"in i&&(s=Ui(r,i["circle-opacity"],Tt));let o="coordsPx";"circle-scale"in i&&(o=`coordsPx / ${Ui(r,i["circle-scale"],jc)}`);let a=null;"circle-fill-color"in i&&(a=Ui(r,i["circle-fill-color"],Pr));let l=null;"circle-stroke-color"in i&&(l=Ui(r,i["circle-stroke-color"],Pr));let u=Ui(r,i["circle-radius"],Tt),c=null;"circle-stroke-width"in i&&(c=Ui(r,i["circle-stroke-width"],Tt),u=`(${u} + ${c} * 0.5)`);const h=`circleDistanceField(${o}, ${u})`,d=wDe(h,a,l,c,s);e.setSymbolColorExpression(d)}function tgt(i,e,t,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,e$(i,e,n,"shape-");let s=null;"shape-opacity"in i&&(s=Ui(r,i["shape-opacity"],Tt));let o="coordsPx";"shape-scale"in i&&(o=`coordsPx / ${Ui(r,i["shape-scale"],jc)}`);let a=null;"shape-fill-color"in i&&(a=Ui(r,i["shape-fill-color"],Pr));let l=null;"shape-stroke-color"in i&&(l=Ui(r,i["shape-stroke-color"],Pr));let u=null;"shape-stroke-width"in i&&(u=Ui(r,i["shape-stroke-width"],Tt));const c=Ui(r,i["shape-points"],Tt);let h="0.";"shape-angle"in i&&(h=Ui(r,i["shape-angle"],Tt));let d,f=Ui(r,i["shape-radius"],Tt);if(u!==null&&(f=`${f} + ${u} * 0.5`),"shape-radius2"in i){let m=Ui(r,i["shape-radius2"],Tt);u!==null&&(m=`${m} + ${u} * 0.5`),d=`starDistanceField(${o}, ${c}, ${f}, ${m}, ${h})`}else d=`regularDistanceField(${o}, ${c}, ${f}, ${h})`;const p=wDe(d,a,l,u,s);e.setSymbolColorExpression(p)}function igt(i,e,t,n,r){let s="vec4(1.0)";"icon-color"in i&&(s=Ui(r,i["icon-color"],Pr)),"icon-opacity"in i&&(s=`${s} * ${Ui(r,i["icon-opacity"],Tt)}`);const o=ok(i["icon-src"]),a=t$(i,e,t,"icon-",o);if(e.setSymbolColorExpression(`${s} * samplePremultiplied(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in i&&"icon-height"in i&&e.setSymbolSizeExpression(`vec2(${Ui(n,i["icon-width"],Tt)}, ${Ui(n,i["icon-height"],Tt)})`),"icon-offset"in i&&"icon-size"in i){const l=Ui(n,i["icon-size"],_a),u=e.getSymbolSizeExpression();e.setSymbolSizeExpression(l);const c=i$(i,"icon-",n,"v_quadSizePx",l);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(e$(i,e,n,"icon-"),"icon-anchor"in i){const l=Ui(n,i["icon-anchor"],_a);let u="1.0";"icon-scale"in i&&(u=Ui(n,i["icon-scale"],jc));let c;i["icon-anchor-x-units"]==="pixels"&&i["icon-anchor-y-units"]==="pixels"?c=`${l} * ${u}`:i["icon-anchor-x-units"]==="pixels"?c=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:i["icon-anchor-y-units"]==="pixels"?c=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:c=`${l} * v_quadSizePx`;let h=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in i)switch(i["icon-anchor-origin"]){case"top-right":h=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":h=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":h=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${h}`)}}function ngt(i,e,t,n,r){if("stroke-color"in i&&e.setStrokeColorExpression(Ui(r,i["stroke-color"],Pr)),"stroke-pattern-src"in i){const s=ok(i["stroke-pattern-src"]),o=t$(i,e,t,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in i&&"stroke-pattern-size"in i&&(a=Ui(r,i["stroke-pattern-size"],_a),l=i$(i,"stroke-pattern-",r,o,a));let u="0.";"stroke-pattern-spacing"in i&&(u=Ui(r,i["stroke-pattern-spacing"],Tt)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return samplePremultiplied(texture, texCoord);
}`;const c=`u_texture${s}`;let h="1.";"stroke-color"in i&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${c}, ${o}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in i&&e.setStrokeWidthExpression(Ui(n,i["stroke-width"],Tt)),"stroke-offset"in i&&e.setStrokeOffsetExpression(Ui(n,i["stroke-offset"],Tt)),"stroke-line-cap"in i&&e.setStrokeCapExpression(Ui(n,i["stroke-line-cap"],Xo)),"stroke-line-join"in i&&e.setStrokeJoinExpression(Ui(n,i["stroke-line-join"],Xo)),"stroke-miter-limit"in i&&e.setStrokeMiterLimitExpression(Ui(n,i["stroke-miter-limit"],Tt)),"stroke-line-dash"in i){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Kd("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${Kd("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=i["stroke-line-dash"].map(f=>Ui(r,f,Tt));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in i&&(o=Ui(n,i["stroke-line-dash-offset"],Tt));const l=`dashDistanceField_${ok(i["stroke-line-dash"])}`,u=s.map((f,p)=>`float dashLength${p} = ${f};`),c=s.map((f,p)=>`dashLength${p}`).join(" + ");let h="0.",d=`getSingleDashDistance(distance, radius, ${h}, dashLength0, totalDashLength, capType)`;for(let f=2;f<s.length;f+=2)h=`${h} + dashLength${f-2} + dashLength${f-1}`,d=`min(${d}, getSingleDashDistance(distance, radius, ${h}, dashLength${f}, totalDashLength, capType))`;r.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${c};
  return ${d};
}`,e.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function rgt(i,e,t,n,r){if("fill-color"in i&&e.setFillColorExpression(Ui(r,i["fill-color"],Pr)),"fill-pattern-src"in i){const s=ok(i["fill-pattern-src"]),o=t$(i,e,t,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in i&&"fill-pattern-size"in i&&(a=Ui(r,i["fill-pattern-size"],_a),l=i$(i,"fill-pattern-",r,o,a)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${s}`;let c="1.";"fill-color"in i&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${u}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function sgt(i){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:i},t={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:i},n=new mDe,r={};if("icon-src"in i?igt(i,n,r,e,t):"shape-points"in i?tgt(i,n,r,e,t):"circle-radius"in i&&egt(i,n,r,e,t),ngt(i,n,r,e,t),rgt(i,n,r,e,t),i.filter){const o=Ui(t,i.filter,rs);n.setFragmentDiscardExpression(`!${o}`)}Object.keys(t.variables).forEach(function(o){const a=t.variables[o],l=Y4(a.name);n.addUniform(`${$I(a.type)} ${l}`);let u;a.type===Xo?u=()=>rk(i.variables[a.name]):a.type===Pr?u=()=>dbe([...Yc(i.variables[a.name]||"#eee")]):a.type===rs?u=()=>i.variables[a.name]?1:0:u=()=>i.variables[a.name],r[l]=u}),Object.keys(t.properties).forEach(function(o){const a=t.properties[o];e.properties[o]||(e.properties[o]=a);let l=$I(a.type),u=`a_prop_${a.name}`;a.type===Pr&&(l="vec4",u=`unpackColor(${u})`,n.addVertexShaderFunction(Qpt)),n.addVarying(`v_prop_${a.name}`,l,u)}),Object.keys(e.properties).forEach(function(o){const a=e.properties[o];n.addAttribute(`${$I(a.type)} a_prop_${a.name}`)});const s=Object.keys(e.properties).map(function(o){const a=e.properties[o];let l;return a.evaluator?l=a.evaluator:a.type===Xo?l=u=>rk(u.get(a.name)):a.type===Pr?l=u=>dbe([...Yc(u.get(a.name)||"#eee")]):a.type===rs?l=u=>u.get(a.name)?1:0:l=u=>u.get(a.name),{name:a.name,size:xDe(a.type),callback:l}});for(const o in e.functions)n.addVertexShaderFunction(e.functions[o]);for(const o in t.functions)n.addFragmentShaderFunction(t.functions[o]);return{builder:n,attributes:s.reduce((o,a)=>({...o,[a.name]:{callback:a.callback,size:a.size}}),{}),uniforms:r}}class ogt extends sy{constructor(e){const t=Object.assign({},e);super(t),this.parseResult_=sgt(e.style),this.styleVariables_=e.style.variables||{},this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(t=>({name:t,...this.parseResult_.attributes[t]}));return new hDe(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}const agt=ogt;function fbe(i,e){const t=`
    attribute vec2 ${MA.TEXTURE_COORD};
    uniform mat4 ${ln.TILE_TRANSFORM};
    uniform float ${ln.TEXTURE_PIXEL_WIDTH};
    uniform float ${ln.TEXTURE_PIXEL_HEIGHT};
    uniform float ${ln.TEXTURE_RESOLUTION};
    uniform float ${ln.TEXTURE_ORIGIN_X};
    uniform float ${ln.TEXTURE_ORIGIN_Y};
    uniform float ${ln.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${MA.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${ln.TEXTURE_ORIGIN_X} + ${ln.TEXTURE_RESOLUTION} * ${ln.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${ln.TEXTURE_ORIGIN_Y} - ${ln.TEXTURE_RESOLUTION} * ${ln.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${ln.TILE_TRANSFORM} * vec4(${MA.TEXTURE_COORD}, ${ln.DEPTH}, 1.0);
    }
  `,n={...Fpt(),inFragmentShader:!0,bandCount:e,style:i},r=[];if(i.color!==void 0){const h=Ui(n,i.color,Pr);r.push(`color = ${h};`)}if(i.contrast!==void 0){const h=Ui(n,i.contrast,Tt);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb - (${h} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const h=Ui(n,i.exposure,Tt);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const h=Ui(n,i.saturation,Tt);r.push(`
      float saturation = ${h} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const h=Ui(n,i.gamma,Tt);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${h}));`)}if(i.brightness!==void 0){const h=Ui(n,i.brightness,Tt);r.push(`color.rgb = clamp(color.rgb + ${h}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(n.variables).length;if(o>1&&!i.variables)throw new Error(`Missing variables in style (expected ${n.variables})`);for(let h=0;h<o;++h){const d=n.variables[Object.keys(n.variables)[h]];if(!(d.name in i.variables))throw new Error(`Missing '${d.name}' in style variables`);const f=Y4(d.name);s[f]=function(){let p=i.variables[d.name];return typeof p=="string"&&(p=rk(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(h){return`uniform float ${h};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${ln.TILE_TEXTURE_ARRAY}[${l}];`),n.paletteTextures&&a.push(`uniform sampler2D ${gDe}[${n.paletteTextures.length}];`);const u=Object.keys(n.functions).map(function(h){return n.functions[h]}),c=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${ln.RENDER_EXTENT};
    uniform float ${ln.TRANSITION_ALPHA};
    uniform float ${ln.TEXTURE_PIXEL_WIDTH};
    uniform float ${ln.TEXTURE_PIXEL_HEIGHT};
    uniform float ${ln.RESOLUTION};
    uniform float ${ln.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${ln.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${ln.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${ln.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${ln.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${ln.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${r.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${ln.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:c,uniforms:s,paletteTextures:n.paletteTextures}}let EDe=class extends vDe{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style;const n=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(wr.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const n=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=fbe(this.style_,this.getSourceBandCount_());return new Mpt(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const n=this.getRenderer();let r;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}render(e,t){this.rendered=!0;const n=e.viewState,r=this.getSources(e.extent,n.resolution);let s=!0;for(let a=0,l=r.length;a<l;++a){const u=r[a],c=u.getState();if(c=="loading"){const h=()=>{u.getState()=="ready"&&(u.removeEventListener("change",h),this.changed())};u.addEventListener("change",h)}s=s&&c=="ready"}const o=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=n.resolution,o;if(this.renderedResolution_>.5*n.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!r.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=fbe(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}};EDe.prototype.dispose;const lgt=EDe,ugt=Object.freeze(Object.defineProperty({__proto__:null,Graticule:Pft,Group:Ig,Heatmap:Upt,Image:K4,Layer:sy,Tile:J4,Vector:cy,VectorImage:Ypt,VectorTile:bDe,WebGLPoints:agt,WebGLTile:lgt},Symbol.toStringTag,{value:"Module"}));let dL=class extends W4{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=pDe(e)[0];this.forEach(r=>{r.tileCoord[0]!==n&&(this.remove(Hp(r.tileCoord)),r.release())})}};const D_={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},_v=[0,0,0],Ap=5;let Zg=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,sn(int(this.resolutions_,(r,s)=>s-r,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,sn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=uc(n)),sn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,sn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:nb,sn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new cL(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=mv(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,u,n),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return mv(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return mv(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),u=Math.floor(s*l),c=Math.floor(o*l);if(t<r)return mv(u,u,c,c,n);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return mv(u,h,c,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,_v);const r=_v[1],s=_v[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,_v);const o=_v[1],a=_v[2];return mv(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=Qr(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Qr(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return nc(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),u=Qr(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/n/u[0],h=a*(l[1]-t)/n/u[1];return r?(c=ng(c,Ap)-1,h=ng(h,Ap)-1):(c=n_(c,Ap),h=n_(h,Ap)),c2(o,c,h,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=Qr(this.getTileSize(n),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-t)/a/l[1];return r?(u=ng(u,Ap)-1,c=ng(c,Ap)-1):(u=n_(u,Ap),c=n_(c,Ap)),c2(n,u,c,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=$D(this.resolutions_,e,t||0);return Fi(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return VAe(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}},CDe=class extends Zg{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}};function cgt(i,e,t){const n=[],r=[],s=[],o=[],a=[];t=t!==void 0?t:[];const l="SupportedCRS",u="TileMatrix",c="Identifier",h="ScaleDenominator",d="TopLeftCorner",f="TileWidth",p="TileHeight",m=i[l],y=Lt(m),v=y.getMetersPerUnit(),b=y.getAxisOrientation().substr(0,2)=="ne";return i[u].sort(function(x,w){return w[h]-x[h]}),i[u].forEach(function(x){let w;if(t.length>0?w=t.find(function(C){return x[c]==C[u]?!0:x[c].includes(":")?!1:i[c]+":"+x[c]===C[u]}):w=!0,w){r.push(x[c]);const C=x[h]*28e-5/v,D=x[f],R=x[p];b?s.push([x[d][1],x[d][0]]):s.push(x[d]),n.push(C),o.push(D==R?D:[D,R]),a.push([x.MatrixWidth,x.MatrixHeight])}}),new CDe({extent:e,origins:s,resolutions:n,matrixIds:r,tileSizes:o,sizes:a})}function n$(i){let e=i.getDefaultTileGrid();return e||(e=fgt(i),i.setDefaultTileGrid(e)),e}function hgt(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=jf(t);if(!vu(s,r)){const o=Di(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function dgt(i,e,t,n){n=n!==void 0?n:"top-left";const r=SDe(i,e,t);return new Zg({extent:i,origin:vnt(i,n),resolutions:r,tileSize:t})}function Kg(i){const e=i||{},t=e.extent||Lt("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:SDe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Zg(n)}function SDe(i,e,t,n){e=e!==void 0?e:xAe,t=Qr(t!==void 0?t:nb);const r=Vr(i),s=Di(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function fgt(i,e,t,n){const r=jf(i);return dgt(r,e,t,n)}function jf(i){i=Lt(i);let e=i.getExtent();if(!e){const t=180*rb.degrees/i.getMetersPerUnit();e=nc(-t,-t,t,t)}return e}let pgt=class extends a1{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Qr(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new dL(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let c=n.minX;c<=n.maxX;++c)for(let h=n.minY;h<=n.maxY;++h)l=id(t,c,h),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===at.LOADED,u&&(u=r(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return hi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:n$(e)}getTileCacheForProjection(e){const t=this.getProjection();return sn(t===null||ma(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=Qr(r.getTileSize(e),this.tmpSize);return s==1?o:ZAe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=hgt(n,e,t)),Tpt(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,r){}},TDe=class extends Zl{constructor(e,t){super(e),this.tile=t}};const u1=pgt;function ggt(i,e){const t=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=o[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-o[2]-1).toString()})}}function r$(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=ggt(i[r],e);return mb(n)}function mb(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const r=X4(e),s=Uh(r,i.length);return i[s](e,t,n)}}function mgt(i,e,t){}function s$(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}let ygt=class ADe extends u1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ADe.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Gt(t),r=t.getState();let s;r==at.LOADING?(this.tileLoadingKeys_[n]=!0,s=D_.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==at.ERROR?D_.TILELOADERROR:r==at.LOADED?D_.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new TDe(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=s$(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(r$(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const r=id(e,t,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}};const o$=ygt;let cc=class extends o${constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:vgt,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:kC,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ma(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ma(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ma(t,e)))return this.tileGrid;const n=Gt(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=n$(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||ma(t,e))return this.tileCache;const n=Gt(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new dL(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,u!==void 0?at.IDLE:at.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(qt.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||ma(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,n];let u;const c=Hp(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),m=new gb(o,d,s,f,l,p,this.getTilePixelRatio(r),this.getGutter(),(y,v,b,x)=>this.getTileInternal(y,v,b,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=h,u?(m.interimTile=u,m.refreshInterimChain(),a.replace(c,m)):a.set(c,m),m}getTileInternal(e,t,n,r,s){let o=null;const a=id(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,n,r,s,l),u.getState()==at.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=Lt(e);if(n){const r=Gt(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}};function vgt(i,e){i.getImage().src=e}function _gt(i){const e=i[0],t=new Array(e);let n=1<<e-1,r,s;for(r=0;r<e;++r)s=48,i[1]&n&&(s+=1),i[2]&n&&(s+=2),t[r]=String.fromCharCode(s),n>>=1;return t.join("")}const bgt='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class xgt extends cc{constructor(e){const t=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:Lt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=t,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(n).then(r=>r.json()).then(r=>this.handleImageryMetadataResponse(r))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const t=e.resourceSets[0].resources[0],n=this.maxZoom_==-1?t.zoomMax:this.maxZoom_,r=this.getProjection(),s=jf(r),o=this.hidpi_?2:1,a=t.imageWidth==t.imageHeight?t.imageWidth/o:[t.imageWidth/o,t.imageHeight/o],l=Kg({extent:s,minZoom:t.zoomMin,maxZoom:n,tileSize:a});this.tileGrid=l;const u=this.culture_,c=this.hidpi_,h=this.placeholderTiles_;if(this.tileUrlFunction=mb(t.imageUrlSubdomains.map(function(d){const f=[0,0,0],p=t.imageUrl.replace("{subdomain}",d).replace("{culture}",u);return function(m,y,v){if(!m)return;c2(m[0],m[1],m[2],f);const b=new URL(p.replace("{quadkey}",_gt(f))),x=b.searchParams;return c&&(x.set("dpi","d1"),x.set("device","mobile")),h===!0?x.delete("n"):h===!1&&x.set("n","z"),b.toString()}})),t.imageryProviders){const d=Nf(Lt("EPSG:4326"),this.getProjection());this.setAttributions(f=>{const p=[],m=f.viewState,y=this.getTileGrid(),v=y.getZForResolution(m.resolution,this.zDirection),x=y.getTileCoordForCoordAndZ(m.center,v)[0];return t.imageryProviders.map(function(w){let C=!1;const D=w.coverageAreas;for(let R=0,A=D.length;R<A;++R){const L=D[R];if(x>=L.zoomMin&&x<=L.zoomMax){const O=L.bbox,$=[O[1],O[0],O[3],O[2]],q=ab($,d);if(Hr(q,f.extent)){C=!0;break}}}C&&p.push(w.attribution)}),p.push(bgt),p})}this.setState("ready")}}const wgt=xgt;let Egt=class extends cc{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Kg({extent:jf(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}};const c1=Egt;class Cgt extends c1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);const n=new XMLHttpRequest;n.addEventListener("load",this.handleInitResponse_.bind(this,e)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",t),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}handleInitResponse_(e,t){const n=t.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.setState("error");return}this.applyTemplate_(r),this.templateCache_[e]=r,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}const Sgt=Cgt;class Tgt extends hy{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const n=t.getGeometry();return sn(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,n){var r;(r=this.source)==null||r.loadFeatures(e,t,n),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(qt.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(qt.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const n=e===0?0:Math.min(t,e)/e,r=e!==this.distance||this.interpolationRatio!==n;this.distance=e,this.minDistance=t,this.interpolationRatio=n,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=Wa(),t=this.distance*this.resolution,n=this.source.getFeatures(),r={};for(let s=0,o=n.length;s<o;s++){const a=n[s];if(!(Gt(a)in r)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();A_(u,e),ql(e,t,e);const c=this.source.getFeaturesInExtent(e).filter(function(h){const d=Gt(h);return d in r?!1:(r[d]=!0,!0)});this.features.push(this.createCluster(c,e))}}}}createCluster(e,t){const n=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?TAe(n,l.getCoordinates()):e.splice(a,1)}RAe(n,1/e.length);const r=Ko(t),s=this.interpolationRatio,o=new ps([n[0]*(1-s)+r[0]*s,n[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new Kr({geometry:o,features:e})}}const Agt=Tgt;let Rgt=class extends u1{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let n=e.tileGrid;n===void 0&&t&&(n=Kg({extent:jf(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:n,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Qr(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?Qr(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return!t||ma(t,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,n,r,s){const o=this.getTileCacheForProjection(r),a=id(e,t,n);if(o.containsKey(a)){const y=o.get(a);if(y&&y.key==this.getKey())return y}const l=this.getTileGrid(),u=Math.max.apply(null,l.getResolutions().map((y,v)=>{const b=Qr(l.getTileSize(v)),x=this.getTileSize(v);return Math.max(x[0]/b[0],x[1]/b[1])})),c=this.getTileGridForProjection(s),h=this.getTileGridForProjection(r),d=[e,t,n],f=this.getTileCoordForTileUrlFunction(d,r),p=Object.assign({sourceProj:s,sourceTileGrid:c,targetProj:r,targetTileGrid:h,tileCoord:d,wrappedTileCoord:f,pixelRatio:u,gutter:this.getGutterForProjection(s),getTileFunction:(y,v,b,x)=>this.getTile(y,v,b,x,s)},this.tileOptions),m=new H4(p);return m.key=this.getKey(),m}getTile(e,t,n,r,s){const o=this.getProjection();if(o&&s&&!ma(o,s))return this.getReprojTile_(e,t,n,s,o);const a=this.getTileSize(e),l=id(e,t,n);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const u=this.loader_;function c(){return R5(function(){return u(e,t,n)})}const h=Object.assign({tileCoord:[e,t,n],loader:c,size:a},this.tileOptions),d=new U4(h);return d.key=this.getKey(),d.addEventListener(qt.CHANGE,this.handleTileChange_),this.tileCache.set(l,d),d}handleTileChange_(e){const t=e.target,n=Gt(t),r=t.getState();let s;r==at.LOADING?(this.tileLoadingKeys_[n]=!0,s=D_.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==at.ERROR?D_.TILELOADERROR:r==at.LOADED?D_.TILELOADEND:void 0),s&&this.dispatchEvent(new TDe(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ma(t,e)))return this.tileGrid;const n=Gt(e);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=n$(e)),this.tileGridForProjection_[n]}setTileGridForProjection(e,t){const n=Lt(e);if(n){const r=Gt(n);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=t)}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||ma(t,e))return this.tileCache;const n=Gt(e);return n in this.tileCacheForProjection_||(this.tileCacheForProjection_[n]=new dL(.1)),this.tileCacheForProjection_[n]}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const r in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[r];s.expireCache(s==n?t:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}};const RDe=Rgt;function Ra(i){return(e,...t)=>kgt(i,e,t)}function h1(i,e){return Ra(kDe(i,e).get)}const{apply:kgt,construct:B5t,defineProperty:j5t,get:z5t,getOwnPropertyDescriptor:kDe,getPrototypeOf:a$,has:G5t,ownKeys:Dgt,set:U5t,setPrototypeOf:q5t}=Reflect,{iterator:DC,species:V5t,toStringTag:Lgt,for:H5t}=Symbol,Mgt=Object,{create:l$,defineProperty:Igt,freeze:W5t,is:X5t}=Mgt,Ogt=Array,Pgt=Ogt.prototype,DDe=Pgt[DC],Fgt=Ra(DDe),LDe=ArrayBuffer,Ngt=LDe.prototype;h1(Ngt,"byteLength");const pbe=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;pbe&&h1(pbe.prototype,"byteLength");const MDe=a$(Uint8Array);MDe.from;const pl=MDe.prototype;pl[DC];Ra(pl.keys);Ra(pl.values);Ra(pl.entries);Ra(pl.set);Ra(pl.reverse);Ra(pl.fill);Ra(pl.copyWithin);Ra(pl.sort);Ra(pl.slice);Ra(pl.subarray);h1(pl,"buffer");h1(pl,"byteOffset");h1(pl,"length");h1(pl,Lgt);const $gt=Uint8Array,IDe=Uint16Array,u$=Uint32Array,Bgt=Float32Array,h2=a$([][DC]()),ODe=Ra(h2.next),jgt=Ra(function*(){}().next),zgt=a$(h2),Ggt=DataView.prototype,Ugt=Ra(Ggt.getUint16),c$=WeakMap,PDe=c$.prototype,FDe=Ra(PDe.get),qgt=Ra(PDe.set),NDe=new c$,Vgt=l$(null,{next:{value:function(){const e=FDe(NDe,this);return ODe(e)}},[DC]:{value:function(){return this}}});function Hgt(i){if(i[DC]===DDe&&h2.next===ODe)return i;const e=l$(Vgt);return qgt(NDe,e,Fgt(i)),e}const Wgt=new c$,Xgt=l$(zgt,{next:{value:function(){const e=FDe(Wgt,this);return jgt(e)},writable:!0,configurable:!0}});for(const i of Dgt(h2))i!=="next"&&Igt(Xgt,i,kDe(h2,i));const $De=new LDe(4),Ygt=new Bgt($De),Zgt=new u$($De),yh=new IDe(512),vh=new $gt(512);for(let i=0;i<256;++i){const e=i-127;e<-27?(yh[i]=0,yh[i|256]=32768,vh[i]=24,vh[i|256]=24):e<-14?(yh[i]=1024>>-e-14,yh[i|256]=1024>>-e-14|32768,vh[i]=-e-1,vh[i|256]=-e-1):e<=15?(yh[i]=e+15<<10,yh[i|256]=e+15<<10|32768,vh[i]=13,vh[i|256]=13):e<128?(yh[i]=31744,yh[i|256]=64512,vh[i]=24,vh[i|256]=24):(yh[i]=31744,yh[i|256]=64512,vh[i]=13,vh[i|256]=13)}const h$=new u$(2048);for(let i=1;i<1024;++i){let e=i<<13,t=0;for(;!(e&8388608);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,h$[i]=e|t}for(let i=1024;i<2048;++i)h$[i]=939524096+(i-1024<<13);const d1=new u$(64);for(let i=1;i<31;++i)d1[i]=i<<23;d1[31]=1199570944;d1[32]=2147483648;for(let i=33;i<63;++i)d1[i]=2147483648+(i-32<<23);d1[63]=3347054592;const BDe=new IDe(64);for(let i=1;i<64;++i)i!==32&&(BDe[i]=1024);function Kgt(i){const e=i>>10;return Zgt[0]=h$[BDe[e]+(i&1023)]+d1[e],Ygt[0]}function jDe(i,e,...t){return Kgt(Ugt(i,e,...Hgt(t)))}var d$={exports:{}};function zDe(i,e,t){const n=t&&t.debug||!1;n&&console.log("[xml-utils] getting "+e+" in "+i);const r=typeof i=="object"?i.outer:i,s=r.slice(0,r.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const l=o[a],u=e+"\\="+l+"([^"+l+"]*)"+l;n&&console.log("[xml-utils] pattern:",u);const h=new RegExp(u).exec(s);if(n&&console.log("[xml-utils] match:",h),h)return h[1]}}d$.exports=zDe;d$.exports.default=zDe;var Jgt=d$.exports;const BI=Ea(Jgt);var f$={exports:{}},p$={exports:{}},g$={exports:{}};function GDe(i,e,t){const r=new RegExp(e).exec(i.slice(t));return r?t+r.index:-1}g$.exports=GDe;g$.exports.default=GDe;var Qgt=g$.exports,m$={exports:{}};function UDe(i,e,t){const r=new RegExp(e).exec(i.slice(t));return r?t+r.index+r[0].length-1:-1}m$.exports=UDe;m$.exports.default=UDe;var emt=m$.exports,y$={exports:{}};function qDe(i,e){const t=new RegExp(e,"g"),n=i.match(t);return n?n.length:0}y$.exports=qDe;y$.exports.default=qDe;var tmt=y$.exports;const imt=Qgt,jI=emt,gbe=tmt;function VDe(i,e,t){const n=t&&t.debug||!1,r=!(t&&typeof t.nested===!1),s=t&&t.startIndex||0;n&&console.log("[xml-utils] starting findTagByName with",e," and ",t);const o=imt(i,`<${e}[ 
>/]`,s);if(n&&console.log("[xml-utils] start:",o),o===-1)return;const a=i.slice(o+e.length);let l=jI(a,"^[^<]*[ /]>",0);const u=l!==-1&&a[l-1]==="/";if(n&&console.log("[xml-utils] selfClosing:",u),u===!1)if(r){let f=0,p=1,m=0;for(;(l=jI(a,"[ /]"+e+">",f))!==-1;){const y=a.substring(f,l+1);if(p+=gbe(y,"<"+e+`[ 
	>]`),m+=gbe(y,"</"+e+">"),m>=p)break;f=l}}else l=jI(a,"[ /]"+e+">",0);const c=o+e.length+l+1;if(n&&console.log("[xml-utils] end:",c),c===-1)return;const h=i.slice(o,c);let d;return u?d=null:d=h.slice(h.indexOf(">")+1,h.lastIndexOf("<")),{inner:d,outer:h,start:o,end:c}}p$.exports=VDe;p$.exports.default=VDe;var nmt=p$.exports;const rmt=nmt;function HDe(i,e,t){const n=[],r=t&&t.debug||!1,s=t&&typeof t.nested=="boolean"?t.nested:!0;let o=t&&t.startIndex||0,a;for(;a=rmt(i,e,{debug:r,startIndex:o});)s?o=a.start+1+e.length:o=a.end,n.push(a);return r&&console.log("findTagsByName found",n.length,"tags"),n}f$.exports=HDe;f$.exports.default=HDe;var smt=f$.exports;const omt=Ea(smt),vE={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},bh={};for(const i in vE)vE.hasOwnProperty(i)&&(bh[vE[i]]=parseInt(i,10));const amt=[bh.BitsPerSample,bh.ExtraSamples,bh.SampleFormat,bh.StripByteCounts,bh.StripOffsets,bh.StripRowCounts,bh.TileByteCounts,bh.TileOffsets,bh.SubIFDs],zI={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},vn={};for(const i in zI)zI.hasOwnProperty(i)&&(vn[zI[i]]=parseInt(i,10));const nl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},lmt={Unspecified:0,Assocalpha:1,Unassalpha:2},Y5t={Version:0,AddCompression:1},Z5t={None:0,Deflate:1,Zstandard:2},umt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function cmt(i,e){const{width:t,height:n}=i,r=new Uint8Array(t*n*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=256-i[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function hmt(i,e){const{width:t,height:n}=i,r=new Uint8Array(t*n*3);let s;for(let o=0,a=0;o<i.length;++o,a+=3)s=i[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function dmt(i,e){const{width:t,height:n}=i,r=new Uint8Array(t*n*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<i.length;++a,l+=3){const u=i[a];r[l]=e[u]/65536*256,r[l+1]=e[u+s]/65536*256,r[l+2]=e[u+o]/65536*256}return r}function fmt(i){const{width:e,height:t}=i,n=new Uint8Array(e*t*3);for(let r=0,s=0;r<i.length;r+=4,s+=3){const o=i[r],a=i[r+1],l=i[r+2],u=i[r+3];n[s]=255*((255-o)/256)*((255-u)/256),n[s+1]=255*((255-a)/256)*((255-u)/256),n[s+2]=255*((255-l)/256)*((255-u)/256)}return n}function pmt(i){const{width:e,height:t}=i,n=new Uint8ClampedArray(e*t*3);for(let r=0,s=0;r<i.length;r+=3,s+=3){const o=i[r],a=i[r+1],l=i[r+2];n[s]=o+1.402*(l-128),n[s+1]=o-.34414*(a-128)-.71414*(l-128),n[s+2]=o+1.772*(a-128)}return n}const gmt=.95047,mmt=1,ymt=1.08883;function vmt(i){const{width:e,height:t}=i,n=new Uint8Array(e*t*3);for(let r=0,s=0;r<i.length;r+=3,s+=3){const o=i[r+0],a=i[r+1]<<24>>24,l=i[r+2]<<24>>24;let u=(o+16)/116,c=a/500+u,h=u-l/200,d,f,p;c=gmt*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=mmt*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=ymt*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),d=c*3.2406+u*-1.5372+h*-.4986,f=c*-.9689+u*1.8758+h*.0415,p=c*.0557+u*-.204+h*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,n[s]=Math.max(0,Math.min(1,d))*255,n[s+1]=Math.max(0,Math.min(1,f))*255,n[s+2]=Math.max(0,Math.min(1,p))*255}return n}const WDe=new Map;function Jg(i,e){Array.isArray(i)||(i=[i]),i.forEach(t=>WDe.set(t,e))}async function XDe(i){const e=WDe.get(i.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const t=await e();return new t(i)}Jg([void 0,1],()=>zg(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(i=>i.default));Jg(5,()=>zg(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(i=>i.default));Jg(6,()=>{throw new Error("old style JPEG compression is not supported.")});Jg(7,()=>zg(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(i=>i.default));Jg([8,32946],()=>zg(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(i=>i.default));Jg(32773,()=>zg(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(i=>i.default));Jg(34887,()=>zg(()=>import("./lerc-CVS-eEjT.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18]),import.meta.url).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));Jg(50001,()=>zg(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([19,1]),import.meta.url).then(i=>i.default));function fL(i,e,t,n=1){return new(Object.getPrototypeOf(i)).constructor(e*t*n)}function _mt(i,e,t,n,r){const s=e/n,o=t/r;return i.map(a=>{const l=fL(a,n,r);for(let u=0;u<r;++u){const c=Math.min(Math.round(o*u),t-1);for(let h=0;h<n;++h){const d=Math.min(Math.round(s*h),e-1),f=a[c*e+d];l[u*n+h]=f}}return l})}function L_(i,e,t){return(1-t)*i+t*e}function bmt(i,e,t,n,r){const s=e/n,o=t/r;return i.map(a=>{const l=fL(a,n,r);for(let u=0;u<r;++u){const c=o*u,h=Math.floor(c),d=Math.min(Math.ceil(c),t-1);for(let f=0;f<n;++f){const p=s*f,m=p%1,y=Math.floor(p),v=Math.min(Math.ceil(p),e-1),b=a[h*e+y],x=a[h*e+v],w=a[d*e+y],C=a[d*e+v],D=L_(L_(b,x,m),L_(w,C,m),c%1);l[u*n+f]=D}}return l})}function xmt(i,e,t,n,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return _mt(i,e,t,n,r);case"bilinear":case"linear":return bmt(i,e,t,n,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function wmt(i,e,t,n,r,s){const o=e/n,a=t/r,l=fL(i,n,r,s);for(let u=0;u<r;++u){const c=Math.min(Math.round(a*u),t-1);for(let h=0;h<n;++h){const d=Math.min(Math.round(o*h),e-1);for(let f=0;f<s;++f){const p=i[c*e*s+d*s+f];l[u*n*s+h*s+f]=p}}}return l}function Emt(i,e,t,n,r,s){const o=e/n,a=t/r,l=fL(i,n,r,s);for(let u=0;u<r;++u){const c=a*u,h=Math.floor(c),d=Math.min(Math.ceil(c),t-1);for(let f=0;f<n;++f){const p=o*f,m=p%1,y=Math.floor(p),v=Math.min(Math.ceil(p),e-1);for(let b=0;b<s;++b){const x=i[h*e*s+y*s+b],w=i[h*e*s+v*s+b],C=i[d*e*s+y*s+b],D=i[d*e*s+v*s+b],R=L_(L_(x,w,m),L_(C,D,m),c%1);l[u*n*s+f*s+b]=R}}}return l}function Cmt(i,e,t,n,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return wmt(i,e,t,n,r,s);case"bilinear":case"linear":return Emt(i,e,t,n,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function Smt(i,e,t){let n=0;for(let r=e;r<t;++r)n+=i[r];return n}function hF(i,e,t){switch(i){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function Tmt(i,e){return(i===1||i===2)&&e<=32&&e%8===0?!1:!(i===3&&(e===16||e===32||e===64))}function Amt(i,e,t,n,r,s,o){const a=new DataView(i),l=t===2?o*s:o*s*n,u=t===2?1:n,c=hF(e,r,l),h=parseInt("1".repeat(r),2);if(e===1){let d;t===1?d=n*r:d=r;let f=s*d;f&7&&(f=f+7&-8);for(let p=0;p<o;++p){const m=p*f;for(let y=0;y<s;++y){const v=m+y*u*r;for(let b=0;b<u;++b){const x=v+b*r,w=(p*s+y)*u+b,C=Math.floor(x/8),D=x%8;if(D+r<=8)c[w]=a.getUint8(C)>>8-r-D&h;else if(D+r<=16)c[w]=a.getUint16(C)>>16-r-D&h;else if(D+r<=24){const R=a.getUint16(C)<<8|a.getUint8(C+2);c[w]=R>>24-r-D&h}else c[w]=a.getUint32(C)>>32-r-D&h}}}}return c.buffer}class YDe{constructor(e,t,n,r,s,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=n,this.littleEndian=r,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,n=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(r,s){return jDe(this,r,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const n=this.getSampleFormat(e),r=this.getBitsPerSample(e);return hF(n,r,t)}async getTileOrStrip(e,t,n,r,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=t*o+e:this.planarConfiguration===2&&(l=n*o*a+t*o+e);let c,h;this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:c,length:h}],s))[0];let f;return u===null||!u[l]?(f=(async()=>{let p=await r.decode(this.fileDirectory,d);const m=this.getSampleFormat(),y=this.getBitsPerSample();return Tmt(m,y)&&(p=Amt(p,m,this.planarConfiguration,this.getSamplesPerPixel(),y,this.getTileWidth(),this.getBlockHeight(t))),p})(),u!==null&&(u[l]=f)):f=u[l],{x:e,y:t,sample:n,data:await f}}async _readRaster(e,t,n,r,s,o,a,l,u){const c=this.getTileWidth(),h=this.getTileHeight(),d=this.getWidth(),f=this.getHeight(),p=Math.max(Math.floor(e[0]/c),0),m=Math.min(Math.ceil(e[2]/c),Math.ceil(d/c)),y=Math.max(Math.floor(e[1]/h),0),v=Math.min(Math.ceil(e[3]/h),Math.ceil(f/h)),b=e[2]-e[0];let x=this.getBytesPerPixel();const w=[],C=[];for(let A=0;A<t.length;++A)this.planarConfiguration===1?w.push(Smt(this.fileDirectory.BitsPerSample,0,t[A])/8):w.push(0),C.push(this.getReaderForSample(t[A]));const D=[],{littleEndian:R}=this;for(let A=y;A<v;++A)for(let L=p;L<m;++L){let O;this.planarConfiguration===1&&(O=this.getTileOrStrip(L,A,0,s,u));for(let $=0;$<t.length;++$){const q=$,M=t[$];this.planarConfiguration===2&&(x=this.getSampleByteSize(M),O=this.getTileOrStrip(L,A,M,s,u));const F=O.then(N=>{const B=N.data,W=new DataView(B),K=this.getBlockHeight(N.y),ee=N.y*h,te=N.x*c,le=ee+K,Q=(N.x+1)*c,z=C[q],J=Math.min(K,K-(le-e[3]),f-ee),ye=Math.min(c,c-(Q-e[2]),d-te);for(let Ne=Math.max(0,e[1]-ee);Ne<J;++Ne)for(let Ge=Math.max(0,e[0]-te);Ge<ye;++Ge){const rt=(Ne*c+Ge)*x,Be=z.call(W,rt+w[q],R);let ze;r?(ze=(Ne+ee-e[1])*b*t.length+(Ge+te-e[0])*t.length+q,n[ze]=Be):(ze=(Ne+ee-e[1])*b+Ge+te-e[0],n[q][ze]=Be)}});D.push(F)}}if(await Promise.all(D),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let A;return r?A=Cmt(n,e[2]-e[0],e[3]-e[1],o,a,t.length,l):A=xmt(n,e[2]-e[0],e[3]-e[1],o,a,l),A.width=o,A.height=a,A}return n.width=o||e[2]-e[0],n.height=a||e[3]-e[1],n}async readRasters({window:e,samples:t=[],interleave:n,pool:r=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=c[2]-c[0],d=c[3]-c[1],f=h*d,p=this.getSamplesPerPixel();if(!t||!t.length)for(let b=0;b<p;++b)t.push(b);else for(let b=0;b<t.length;++b)if(t[b]>=p)return Promise.reject(new RangeError(`Invalid sample index '${t[b]}'.`));let m;if(n){const b=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,x=Math.max.apply(null,this.fileDirectory.BitsPerSample);m=hF(b,x,f*t.length),l&&m.fill(l)}else{m=[];for(let b=0;b<t.length;++b){const x=this.getArrayForSample(t[b],f);Array.isArray(l)&&b<l.length?x.fill(l[b]):l&&!Array.isArray(l)&&x.fill(l),m.push(x)}}const y=r||await XDe(this.fileDirectory);return await this._readRaster(c,t,m,n,y,s,o,a,u)}async readRGB({window:e,interleave:t=!0,pool:n=null,width:r,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===nl.RGB){let v=[0,1,2];if(this.fileDirectory.ExtraSamples!==lmt.Unspecified&&a){v=[];for(let b=0;b<this.fileDirectory.BitsPerSample.length;b+=1)v.push(b)}return this.readRasters({window:e,interleave:t,samples:v,pool:n,width:r,height:s,resampleMethod:o,signal:l})}let h;switch(c){case nl.WhiteIsZero:case nl.BlackIsZero:case nl.Palette:h=[0];break;case nl.CMYK:h=[0,1,2,3];break;case nl.YCbCr:case nl.CIELab:h=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:u,interleave:!0,samples:h,pool:n,width:r,height:s,resampleMethod:o,signal:l},{fileDirectory:f}=this,p=await this.readRasters(d),m=2**this.fileDirectory.BitsPerSample[0];let y;switch(c){case nl.WhiteIsZero:y=cmt(p,m);break;case nl.BlackIsZero:y=hmt(p,m);break;case nl.Palette:y=dmt(p,f.ColorMap);break;case nl.CMYK:y=fmt(p);break;case nl.YCbCr:y=pmt(p);break;case nl.CIELab:y=vmt(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const v=new Uint8Array(y.length/3),b=new Uint8Array(y.length/3),x=new Uint8Array(y.length/3);for(let w=0,C=0;w<y.length;w+=3,++C)v[C]=y[w],b[C]=y[w+1],x[C]=y[w+2];y=[v,b,x]}return y.width=p.width,y.height=p.height,y}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let r=omt(n,"Item");e===null?r=r.filter(s=>BI(s,"sample")===void 0):r=r.filter(s=>Number(BI(s,"sample"))===e);for(let s=0;s<r.length;++s){const o=r[s];t[BI(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(n)return[n[0],-n[5],n[10]];if(e){const[r,s,o]=e.getResolution();return[r*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(){const e=this.getHeight(),t=this.getWidth();if(this.fileDirectory.ModelTransformation){const[n,r,s,o,a,l,u,c]=this.fileDirectory.ModelTransformation,d=[[0,0],[0,e],[t,0],[t,e]].map(([m,y])=>[o+n*m+r*y,c+a*m+l*y]),f=d.map(m=>m[0]),p=d.map(m=>m[1]);return[Math.min(...f),Math.min(...p),Math.max(...f),Math.max(...p)]}else{const n=this.getOrigin(),r=this.getResolution(),s=n[0],o=n[1],a=s+r[0]*this.getWidth(),l=o+r[1]*this.getHeight();return[Math.min(s,a),Math.min(o,l),Math.max(s,a),Math.max(o,l)]}}}class Rmt{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const n=this.getUint32(e,t),r=this.getUint32(e+4,t);let s;if(t){if(s=n+2**32*r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*n+r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,t){let n=0;const r=(this._dataView.getUint8(e+(t?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));r&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),n+=a*256**o}return r&&(n=-n),n}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return jDe(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class kmt{constructor(e,t,n,r){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=n,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),n=this.readUint32(e+4);let r;if(this._littleEndian){if(r=t+2**32*n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*t+n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let t=0;const n=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));n&&(r?o!==0&&(o=~(o-1)&255,r=!1):o=~o&255),t+=o*256**s}return n&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const Dmt=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class ZDe{constructor(e=Dmt,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(n=>{zg(()=>import("./decoder-Ddo2r026.js"),__vite__mapDeps([20,8]),import.meta.url).then(r=>{n(r.create)})}),this._awaitingDecoder.then(n=>{this._awaitingDecoder=null,this.workers=[];for(let r=0;r<e;r++)this.workers.push({worker:n(),idle:!0})}))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?XDe(e).then(n=>n.decode(e,t)):new Promise(n=>{const r=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];r.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(r.idle=!0,n(a.data.decoded),r.worker.removeEventListener("message",o))};r.worker.addEventListener("message",o),r.worker.postMessage({fileDirectory:e,buffer:t,id:s},[t])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const mbe=`\r
\r
`;function KDe(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const e={};for(const[t,n]of i)e[t.toLowerCase()]=n;return e}function Lmt(i){const e=i.split(`\r
`).map(t=>{const n=t.split(":").map(r=>r.trim());return n[0]=n[0].toLowerCase(),n});return KDe(e)}function Mmt(i){const[e,...t]=i.split(";").map(r=>r.trim()),n=t.map(r=>r.split("="));return{type:e,params:KDe(n)}}function dF(i){let e,t,n;return i&&([,e,t,n]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10)),{start:e,end:t,total:n}}function Imt(i,e){let t=null;const n=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)n.decode(new Uint8Array(i,a,s.length))===s&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<i.byteLength;){const a=n.decode(new Uint8Array(i,t,Math.min(s.length+1024,i.byteLength-t)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(mbe),c=Lmt(l.substr(0,u)),{start:h,end:d,total:f}=dF(c["content-range"]),p=t+s.length+u+mbe.length,m=parseInt(d,10)+1-parseInt(h,10);r.push({headers:c,data:i.slice(p,p+m),offset:h,length:m,fileSize:f}),t=p+m+4}return r}class v${async fetch(e,t=void 0){return Promise.all(e.map(n=>this.fetchSlice(n,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Omt extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const r=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,s]=n;this._deleteIfExpired(r,s)===!1&&(yield[r,s.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,s]=n;this.cache.has(r)||this._deleteIfExpired(r,s)===!1&&(yield[r,s.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,r]of this.entriesAscending())e.call(t,r,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function Pmt(i){return new Promise(e=>setTimeout(e,i))}function Fmt(i,e){const t=Array.isArray(i)?i:Array.from(i),n=Array.isArray(e)?e:Array.from(e);return t.map((r,s)=>[r,n[s]])}class yb extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,yb),this.name="AbortError"}}class Nmt extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const $mt=Nmt;class Bmt{constructor(e,t,n=null){this.offset=e,this.length=t,this.data=n}get top(){return this.offset+this.length}}class ybe{constructor(e,t,n){this.offset=e,this.length=t,this.blockIds=n}}class jmt extends v${constructor(e,{blockSize:t=65536,cacheSize:n=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Omt({maxSize:n,onEviction:(r,s)=>{this.evictedBlocks.set(r,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const n=[],r=[],s=[];this.evictedBlocks.clear();for(const{offset:d,length:f}of e){let p=d+f;const{fileSize:m}=this;m!==null&&(p=Math.min(p,m));const y=Math.floor(d/this.blockSize)*this.blockSize;for(let v=y;v<p;v+=this.blockSize){const b=Math.floor(v/this.blockSize);!this.blockCache.has(b)&&!this.blockRequests.has(b)&&(this.blockIdsToFetch.add(b),r.push(b)),this.blockRequests.has(b)&&n.push(this.blockRequests.get(b)),s.push(b)}}await Pmt(),this.fetchBlocks(t);const o=[];for(const d of r)this.blockRequests.has(d)&&o.push(this.blockRequests.get(d));await Promise.allSettled(n),await Promise.allSettled(o);const a=[],l=s.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const d of l){const f=this.blockRequests.get(d);if(!f)throw new Error(`Block ${d} is not in the block requests`);a.push(f)}await Promise.allSettled(a)}if(t&&t.aborted)throw new yb("Request was aborted");const u=s.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),c=u.filter(d=>!d);if(c.length)throw new $mt(c,"Request failed");const h=new Map(Fmt(s,u));return this.readSliceData(e,h)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(t,e);for(let r=0;r<t.length;++r){const s=t[r];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await n)[r],l=o*this.blockSize,u=l-a.offset,c=Math.min(u+this.blockSize,a.data.byteLength),h=a.data.slice(u,c),d=new Bmt(l,h.byteLength,h,o);this.blockCache.set(o,d),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((o,a)=>o-a);if(t.length===0)return[];let n=[],r=null;const s=[];for(const o of t)r===null||r+1===o?(n.push(o),r=o):(s.push(new ybe(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[o],r=o);return s.push(new ybe(n[0]*this.blockSize,n.length*this.blockSize,n)),s}readSliceData(e,t){return e.map(n=>{let r=n.offset+n.length;this.fileSize!==null&&(r=Math.min(this.fileSize,r));const s=Math.floor(n.offset/this.blockSize),o=Math.floor(r/this.blockSize),a=new ArrayBuffer(n.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const c=t.get(u),h=c.offset-n.offset,d=c.top-r;let f=0,p=0,m;h<0?f=-h:h>0&&(p=h),d<0?m=c.length-f:m=r-c.offset-f;const y=new Uint8Array(c.data,f,m);l.set(y,p)}return a})}}class _${get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class b${constructor(e){this.url=e}async request({headers:e,credentials:t,signal:n}={}){throw new Error("request is not implemented")}}class zmt extends _${constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Gmt extends b${constructor(e,t){super(e),this.credentials=t}async request({headers:e,credentials:t,signal:n}={}){const r=await fetch(this.url,{headers:e,credentials:t,signal:n});return new zmt(r)}}class Umt extends _${constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class qmt extends b${constructRequest(e,t){return new Promise((n,r)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;n(new Umt(s,o))},s.onerror=r,s.onabort=()=>r(new yb("Request aborted")),s.send(),t&&(t.aborted&&s.abort(),t.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class Vmt extends _${constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Hmt extends b${constructor(e){super(e),this.parsedUrl=yA.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",yA)}constructRequest(e,t){return new Promise((n,r)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const u=[];o.on("data",c=>{u.push(c)}),o.on("end",()=>{const c=Buffer.concat(u).buffer;l(c)}),o.on("error",r)});n(new Vmt(o,a))});s.on("error",r),t&&(t.aborted&&s.destroy(new yb("Request aborted")),t.addEventListener("abort",()=>s.destroy(new yb("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class x$ extends v${constructor(e,t,n,r){super(),this.client=e,this.headers=t,this.maxRanges=n,this.allowFullFile=r,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(n=>this.fetchSlice(n,t))))}async fetchSlices(e,t){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:r,length:s})=>`${r}-${r+s}`).join(",")}`},signal:t});if(n.ok)if(n.status===206){const{type:r,params:s}=Mmt(n.getHeader("content-type"));if(r==="multipart/byteranges"){const h=Imt(await n.getData(),s.boundary);return this._fileSize=h[0].fileSize||null,h}const o=await n.getData(),{start:a,end:l,total:u}=dF(n.getHeader("content-range"));this._fileSize=u||null;const c=[{data:o,offset:a,length:l-a}];if(e.length>1){const h=await Promise.all(e.slice(1).map(d=>this.fetchSlice(d,t)));return c.concat(h)}return c}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await n.getData();return this._fileSize=r.byteLength,[{data:r,offset:0,length:r.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:n,length:r}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+r}`},signal:t});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=dF(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:n,length:r}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function w$(i,{blockSize:e,cacheSize:t}){return e===null?i:new jmt(i,{blockSize:e,cacheSize:t})}function Wmt(i,{headers:e={},credentials:t,maxRanges:n=0,allowFullFile:r=!1,...s}={}){const o=new Gmt(i,t),a=new x$(o,e,n,r);return w$(a,s)}function Xmt(i,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...r}={}){const s=new qmt(i),o=new x$(s,e,t,n);return w$(o,r)}function Ymt(i,{headers:e={},maxRanges:t=0,allowFullFile:n=!1,...r}={}){const s=new Hmt(i),o=new x$(s,e,t,n);return w$(o,r)}function fF(i,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Wmt(i,t):typeof XMLHttpRequest<"u"?Xmt(i,t):Ymt(i,t)}class Zmt extends v${constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((n,r)=>{const s=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=a=>n(a.target.result),o.onerror=r,o.onabort=r,o.readAsArrayBuffer(s),t&&t.addEventListener("abort",()=>o.abort())})}}function Kmt(i){return new Zmt(i)}function pF(i){switch(i){case vn.BYTE:case vn.ASCII:case vn.SBYTE:case vn.UNDEFINED:return 1;case vn.SHORT:case vn.SSHORT:return 2;case vn.LONG:case vn.SLONG:case vn.FLOAT:case vn.IFD:return 4;case vn.RATIONAL:case vn.SRATIONAL:case vn.DOUBLE:case vn.LONG8:case vn.SLONG8:case vn.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function Jmt(i){const e=i.GeoKeyDirectory;if(!e)return null;const t={};for(let n=4;n<=e[3]*4;n+=4){const r=umt[e[n]],s=e[n+1]?vE[e[n+1]]:null,o=e[n+2],a=e[n+3];let l=null;if(!s)l=a;else{if(l=i[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${r}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}t[r]=l}return t}function bv(i,e,t,n){let r=null,s=null;const o=pF(e);switch(e){case vn.BYTE:case vn.ASCII:case vn.UNDEFINED:r=new Uint8Array(t),s=i.readUint8;break;case vn.SBYTE:r=new Int8Array(t),s=i.readInt8;break;case vn.SHORT:r=new Uint16Array(t),s=i.readUint16;break;case vn.SSHORT:r=new Int16Array(t),s=i.readInt16;break;case vn.LONG:case vn.IFD:r=new Uint32Array(t),s=i.readUint32;break;case vn.SLONG:r=new Int32Array(t),s=i.readInt32;break;case vn.LONG8:case vn.IFD8:r=new Array(t),s=i.readUint64;break;case vn.SLONG8:r=new Array(t),s=i.readInt64;break;case vn.RATIONAL:r=new Uint32Array(t*2),s=i.readUint32;break;case vn.SRATIONAL:r=new Int32Array(t*2),s=i.readInt32;break;case vn.FLOAT:r=new Float32Array(t),s=i.readFloat32;break;case vn.DOUBLE:r=new Float64Array(t),s=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===vn.RATIONAL||e===vn.SRATIONAL)for(let a=0;a<t;a+=2)r[a]=s.call(i,n+a*o),r[a+1]=s.call(i,n+(a*o+4));else for(let a=0;a<t;++a)r[a]=s.call(i,n+a*o);return e===vn.ASCII?new TextDecoder("utf-8").decode(r):r}class Qmt{constructor(e,t,n){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=n}}class MT extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class JDe{async readRasters(e={}){const{window:t,width:n,height:r}=e;let{resX:s,resY:o,bbox:a}=e;const l=await this.getImage();let u=l;const c=await this.getImageCount(),h=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(n||r){if(t){const[p,m]=l.getOrigin(),[y,v]=l.getResolution();a=[p+t[0]*y,m+t[1]*v,p+t[2]*y,m+t[3]*v]}const f=a||h;if(n){if(s)throw new Error("Both width and resX passed");s=(f[2]-f[0])/n}if(r){if(o)throw new Error("Both width and resY passed");o=(f[3]-f[1])/r}}if(s||o){const f=[];for(let p=0;p<c;++p){const m=await this.getImage(p),{SubfileType:y,NewSubfileType:v}=m.fileDirectory;(p===0||y===2||v&1)&&f.push(m)}f.sort((p,m)=>p.getWidth()-m.getWidth());for(let p=0;p<f.length;++p){const m=f[p],y=(h[2]-h[0])/m.getWidth(),v=(h[3]-h[1])/m.getHeight();if(u=m,s&&s>y||o&&o>v)break}}let d=t;if(a){const[f,p]=l.getOrigin(),[m,y]=u.getResolution(l);d=[Math.round((a[0]-f)/m),Math.round((a[1]-p)/y),Math.round((a[2]-f)/m),Math.round((a[3]-p)/y)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return u.readRasters({...e,window:d})}}class vb extends JDe{constructor(e,t,n,r,s={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=n,this.firstIFDOffset=r,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const n=this.bigTiff?4048:1024;return new kmt((await this.source.fetch([{offset:e,length:typeof t<"u"?t:n}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,n=this.bigTiff?8:2;let r=await this.getSlice(e);const s=this.bigTiff?r.readUint64(e):r.readUint16(e),o=s*t+(this.bigTiff?16:6);r.covers(e,o)||(r=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let h=0;h<s;l+=t,++h){const d=r.readUint16(l),f=r.readUint16(l+2),p=this.bigTiff?r.readUint64(l+4):r.readUint32(l+4);let m,y;const v=pF(f),b=l+(this.bigTiff?12:8);if(v*p<=(this.bigTiff?8:4))m=bv(r,f,p,b);else{const x=r.readOffset(b),w=pF(f)*p;if(r.covers(x,w))m=bv(r,f,p,x);else{const C=await this.getSlice(x,w);m=bv(C,f,p,x)}}p===1&&amt.indexOf(d)===-1&&!(f===vn.RATIONAL||f===vn.SRATIONAL)?y=m[0]:y=m,a[vE[d]]=y}const u=Jmt(a),c=r.readOffset(e+n+t*s);return new Qmt(a,u,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof MT?new MT(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new MT(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new YDe(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(n){if(n instanceof MT)t=!1;else throw n}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",n=t.length+100;let r=await this.getSlice(e,n);if(t===bv(r,vn.ASCII,t.length,e)){const o=bv(r,vn.ASCII,n,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>n&&(r=await this.getSlice(e,a));const l=bv(r,vn.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,c])=>{this.ghostValues[u]=c})}return this.ghostValues}static async fromSource(e,t,n){const r=(await e.fetch([{offset:0,length:1024}],n))[0],s=new Rmt(r),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const c=u?s.getUint64(8,a):s.getUint32(4,a);return new vb(e,a,u,c,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class e0t extends JDe{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,n=0;for(let r=0;r<this.imageFiles.length;r++){const s=this.imageFiles[r];for(let o=0;o<this.imageCounts[r];o++){if(e===t){const a=await s.requestIFD(n);return new YDe(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}t++,n++}n=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,n)=>t+n,0),this.imageCount}}async function QDe(i,e={},t){return vb.fromSource(fF(i,e),t)}async function eLe(i,e){return vb.fromSource(Kmt(i),e)}async function tLe(i,e=[],t={},n){const r=await vb.fromSource(fF(i,t),n),s=await Promise.all(e.map(o=>vb.fromSource(fF(o,t))));return new e0t(r,s)}function t0t(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function i0t(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,n=nl;return t===n.CMYK||t===n.YCbCr||t===n.CIELab||t===n.ICCLab}const vbe="STATISTICS_MAXIMUM",_be="STATISTICS_MINIMUM",GI=256;let UI;function n0t(){return UI||(UI=new ZDe),UI}function r0t(i){try{return i.getBoundingBox()}catch{return[0,0,i.getWidth(),i.getHeight()]}}function s0t(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function o0t(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}function a0t(i){const e=i.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let n=Lt(t);if(!n){const r=Ive(e.ProjLinearUnitsGeoKey);r&&(n=new sb({code:t,units:r}))}return n}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let n=Lt(t);if(!n){const r=Ive(e.GeogAngularUnitsGeoKey);r&&(n=new sb({code:t,units:r}))}return n}return null}function l0t(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let n=0;n<e;++n)t[n]=i.getImage(n);return Promise.all(t)})}function u0t(i,e){let t;return i.blob?t=eLe(i.blob):i.overviews?t=tLe(i.url,i.overviews,e):t=QDe(i.url,e),t.then(l0t)}function $w(i,e,t,n,r){if(Array.isArray(i)){const s=i.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(n);throw r(o),o}for(let o=0;o<s;++o)$w(i[o],e[o],t,n,r);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(n)}function c0t(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function h0t(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}let iLe=class extends RDe{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const n=this,r=new Array(t);for(let s=0;s<t;++s)r[s]=u0t(this.sourceInfo_[s],this.sourceOptions_);Promise.all(r).then(function(s){n.configure_(s)}).catch(function(s){XE(s),n.error_=s,n.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let n=t.length-1;n>=0;--n){const r=t[n],s=a0t(r);if(s){this.projection=s;break}}}configure_(e){let t,n,r,s,o;const a=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let c=0;const h=e.length;for(let m=0;m<h;++m){const y=[],v=[];e[m].forEach(A=>{t0t(A)?v.push(A):y.push(A)});const b=y.length;if(v.length>0&&v.length!==b)throw new Error(`Expected one mask per image found ${v.length} masks and ${b} images`);let x,w;const C=new Array(b),D=new Array(b),R=new Array(b);l[m]=new Array(b),u[m]=new Array(b);for(let A=0;A<b;++A){const L=y[A],O=L.getGDALNoData();u[m][A]=L.getGDALMetadata(0),l[m][A]=O;const $=this.sourceInfo_[m].bands;a[m]=$?$.length:L.getSamplesPerPixel();const q=b-(A+1);x||(x=r0t(L)),w||(w=s0t(L));const M=o0t(L,y[0]);R[q]=M[0];const F=[L.getTileWidth(),L.getTileHeight()];F[0]!==F[1]&&F[1]<GI&&(F[0]=GI,F[1]=GI),C[q]=F;const N=M[0]/Math.abs(M[1]);D[q]=[F[0],F[1]/N]}if(t?ho(t,x,t):t=x,!n)n=w;else{const A=`Origin mismatch for source ${m}, got [${w}] but expected [${n}]`;$w(n,w,0,A,this.viewRejector)}if(!o)o=R,this.resolutionFactors_[m]=1;else{o.length-c>R.length&&(c=o.length-R.length);const A=o[o.length-1]/R[R.length-1];this.resolutionFactors_[m]=A;const L=R.map($=>$*=A),O=`Resolution mismatch for source ${m}, got [${L}] but expected [${o}]`;$w(o.slice(c,o.length),L,.02,O,this.viewRejector)}r?$w(r.slice(c,r.length),D,.01,`Tile size mismatch for source ${m}`,this.viewRejector):r=D,s?$w(s.slice(c,s.length),C,0,`Tile size mismatch for source ${m}`,this.viewRejector):s=C,this.sourceImagery_[m]=y.reverse(),this.sourceMasks_[m]=v.reverse()}for(let m=0,y=this.sourceImagery_.length;m<y;++m){const v=this.sourceImagery_[m];for(;v.length<o.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let m=0;m<h;++m){if(this.sourceInfo_[m].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[m].length){this.addAlpha_=!0;break}const y=l[m],v=this.sourceInfo_[m].bands;if(v){for(let b=0;b<v.length;++b)if(y[v[b]-1]!==null){this.addAlpha_=!0;break e}continue}for(let b=0;b<y.length;++b)if(y[b]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let m=0;m<h;++m)d+=a[m];this.bandCount=d;const f=new Zg({extent:t,minZoom:c,origin:n,resolutions:o,tileSizes:r});this.tileGrid=f,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:B0(Ko(t),this.projection),extent:mC(t,this.projection),zoom:p})}loadTile_(e,t,n){const r=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,l=this.sourceInfo_,u=n0t();for(let c=0;c<s;++c){const h=l[c],d=this.resolutionFactors_[c],f=[Math.round(t*(r[0]*d)),Math.round(n*(r[1]*d)),Math.round((t+1)*(r[0]*d)),Math.round((n+1)*(r[1]*d))],p=this.sourceImagery_[c][e];let m;h.bands&&(m=h.bands.map(function(w){return w-1}));let y;"nodata"in h&&h.nodata!==null?y=h.nodata:m?y=m.map(function(w){return a[c][w]}):y=a[c];const v={window:f,width:r[0],height:r[1],samples:m,fillValue:y,pool:u,interleave:!1};i0t(this.convertToRGB_,p)?o[c]=p.readRGB(v):o[c]=p.readRasters(v);const b=s+c,x=this.sourceMasks_[c][e];if(!x){o[b]=Promise.resolve(null);continue}o[b]=x.readRasters({window:f,width:r[0],height:r[1],samples:[0],pool:u,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,r)).catch(function(c){throw XE(c),c})}composeTile_(e,t){const n=this.metadata_,r=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,c=this.addAlpha_,h=e[0]*e[1],d=h*o;let f;u?f=new Uint8Array(d):f=new Float32Array(d);let p=0;for(let m=0;m<h;++m){let y=c;for(let v=0;v<s;++v){const b=r[v];let x=b.min,w=b.max,C,D;if(u){const R=n[v][0];x===void 0&&(R&&_be in R?x=parseFloat(R[_be]):x=c0t(t[v][0])),w===void 0&&(R&&vbe in R?w=parseFloat(R[vbe]):w=h0t(t[v][0])),C=255/(w-x),D=-x*C}for(let R=0;R<a[v];++R){const A=t[v][R][m];let L;if(u?L=Fi(C*A+D,0,255):L=A,!c)f[p]=L;else{let O=b.nodata;if(O===void 0){let q;b.bands?q=b.bands[R]-1:q=R,O=l[v][q]}const $=isNaN(O);(!$&&A!==O||$&&!isNaN(A))&&(y=!1,f[p]=L)}p++}if(!y){const R=s+v,A=t[R];A&&!A[0][m]&&(y=!0)}}c&&(y||(f[p]=255),p++)}return f}};iLe.prototype.getView;const d0t=iLe,f0t="https://tile.googleapis.com/v1/createSession",p0t="https://tile.googleapis.com/v1/2dtiles",g0t="https://tile.googleapis.com/tile/v1/viewport",m0t=22;class y0t extends cc{constructor(e){const t=!!e.highDpi,n=e.overlay!==!0;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:n,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const r={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(r.imageFormat=e.imageFormat),e.scale&&(r.scale=e.scale),t&&(r.highDpi=!0),e.layerTypes&&(r.layerTypes=e.layerTypes),e.styles&&(r.styles=e.styles),e.overlay===!0&&(r.overlay=!0),e.apiOptions&&(r.apiOptions=e.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=f0t+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},n=await this.fetchSessionToken(e,t);if(!n.ok){try{const h=await n.json();this.error_=new Error(h.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const r=await n.json(),s=this.getTilePixelRatio(1),o=[r.tileWidth/s,r.tileHeight/s];this.tileGrid=Kg({extent:jf(this.getProjection()),maxZoom:m0t,tileSize:o});const a=r.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(h,d,f){const p=h[0],m=h[1],y=h[2];return`${p0t}/${p}/${m}/${y}?session=${a}&key=${l}`};const u=parseInt(r.expiry,10)*1e3,c=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),c),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[Ir.ANIMATING]||e.viewHints[Ir.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,n]=Bve($0(e.extent),e.viewState.projection),[r,s]=Bve(Jb(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${n}&east=${r}&west=${t}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,c=this.apiKey_,h=`${g0t}?session=${u}&key=${c}&${l}`;return this.previousViewportAttribution_=await fetch(h).then(d=>d.json()).then(d=>d.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}const v0t=y0t;let nLe=class extends kC{constructor(e,t,n,r,s,o,a){super(t,n,r,s,o,a),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==at.LOADED){const t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;const n=Xr(t[0],t[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e}};class _0t extends cc{constructor(e){const t=e.size,n=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",r=e.tilePixelRatio||1,s=t[0],o=t[1],a=[],l=e.tileSize||nb;let u=l*r;switch(n){case"default":for(;s>u||o>u;)a.push([Math.ceil(s/u),Math.ceil(o/u)]),u+=u;break;case"truncated":let D=s,R=o;for(;D>u||R>u;)a.push([Math.ceil(D/u),Math.ceil(R/u)]),D>>=1,R>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const c=[r],h=[0];for(let D=1,R=a.length;D<R;D++)c.push(r<<D),h.push(a[D-1][0]*a[D-1][1]+h[D-1]);c.reverse();const d=new Zg({tileSize:l,extent:e.extent||[0,-o,s,0],resolutions:c});let f=e.url;f&&!f.includes("{TileGroup}")&&!f.includes("{tileIndex}")&&(f+="{TileGroup}/{z}-{x}-{y}.jpg");const p=s$(f);let m=l*r;function y(D){return function(R,A,L){if(!R)return;const O=R[0],$=R[1],q=R[2],M=$+q*a[O][0],F=(M+h[O])/m|0,N={z:O,x:$,y:q,tileIndex:M,TileGroup:"TileGroup"+F};return D.replace(/\{(\w+?)\}/g,function(B,W){return N[W]})}}const v=mb(p.map(y)),b=nLe.bind(null,Qr(l*r));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:r,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:b,tileGrid:d,tileUrlFunction:v,transition:e.transition}),this.zDirection=e.zDirection;const x=d.getTileCoordForCoordAndResolution(Ko(d.getExtent()),c[c.length-1]),w=v(x,1,null),C=new Image;C.addEventListener("error",()=>{m=l,this.changed()}),C.src=w}}const b0t=_0t;function fw(i){return i.toLocaleString("en",{maximumFractionDigits:10})}class x0t extends cc{constructor(e){const t=e||{};let n=t.url||"";n=n+(n.lastIndexOf("/")===n.length-1||n===""?"":"/");const r=t.version||ao.VERSION2,s=t.sizes||[],o=t.size;sn(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],u=t.tileSize,c=t.tilePixelRatio||1,h=t.format||"jpg",d=t.quality||(t.version==ao.VERSION1?"native":"default");let f=t.resolutions||[];const p=t.supports||[],m=t.extent||[0,-l,a,0],y=s!=null&&Array.isArray(s)&&s.length>0,v=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),b=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let x,w,C;if(f.sort(function(L,O){return O-L}),v||b)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(x=u,w=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(x=u[0],w=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(x=u[0],w=u[1]):u[0]==null&&Number.isInteger(u[1])&&(x=u[1],w=u[1])))),(x===void 0||w===void 0)&&(x=nb,w=nb),f.length==0){C=Math.max(Math.ceil(Math.log(a/x)/Math.LN2),Math.ceil(Math.log(l/w)/Math.LN2));for(let L=C;L>=0;L--)f.push(Math.pow(2,L))}else{const L=Math.max(...f);C=Math.round(Math.log(L)/Math.LN2)}else if(x=a,w=l,f=[],y){s.sort(function(O,$){return O[0]-$[0]}),C=-1;const L=[];for(let O=0;O<s.length;O++){const $=a/s[O][0];if(f.length>0&&f[f.length-1]==$){L.push(O);continue}f.push($),C++}if(L.length>0)for(let O=0;O<L.length;O++)s.splice(L[O]-O,1)}else f.push(1),s.push([a,l]),C=0;const D=new Zg({tileSize:[x,w],extent:m,origin:uc(m),resolutions:f}),R=function(L,O,$){let q,M;const F=L[0];if(F>C)return;const N=L[1],B=L[2],W=f[F];if(!(N===void 0||B===void 0||W===void 0||N<0||Math.ceil(a/W/x)<=N||B<0||Math.ceil(l/W/w)<=B)){if(b||v){const K=N*x*W,ee=B*w*W;let te=x*W,le=w*W,Q=x,z=w;if(K+te>a&&(te=a-K),ee+le>l&&(le=l-ee),K+x*W>a&&(Q=Math.floor((a-K+W-1)/W)),ee+w*W>l&&(z=Math.floor((l-ee+W-1)/W)),K==0&&te==a&&ee==0&&le==l)q="full";else if(!b||p.includes("regionByPx"))q=K+","+ee+","+te+","+le;else if(p.includes("regionByPct")){const J=fw(K/a*100),ye=fw(ee/l*100),Ne=fw(te/a*100),Ge=fw(le/l*100);q="pct:"+J+","+ye+","+Ne+","+Ge}r==ao.VERSION3&&(!b||p.includes("sizeByWh"))?M=Q+","+z:!b||p.includes("sizeByW")?M=Q+",":p.includes("sizeByH")?M=","+z:p.includes("sizeByWh")?M=Q+","+z:p.includes("sizeByPct")&&(M="pct:"+fw(100/W))}else if(q="full",y){const K=s[F][0],ee=s[F][1];r==ao.VERSION3?K==a&&ee==l?M="max":M=K+","+ee:K==a?M="full":M=K+","}else M=r==ao.VERSION3?"max":"full";return n+q+"/"+M+"/0/"+d+"."+h}},A=nLe.bind(null,Qr(u||256).map(function(L){return L*c}));super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:t.state,tileClass:A,tileGrid:D,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:R,transition:t.transition}),this.zDirection=t.zDirection}}const w0t=x0t;let E0t=class extends HD{constructor(e,t,n,r,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?ho(n,u):n,h=Ko(c),d=u2(e,t,h,r),f=G4,p=new q4(e,t,c,l,d*f,r),m=p.calculateSourceExtent(),y=ld(m)?null:o(m,d,s),v=y?Ut.IDLE:Ut.EMPTY,b=y?y.getPixelRatio():1;super(n,r,b,v),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=p,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=y,this.sourcePixelRatio_=b,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ut.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Ut.LOADED){const t=Di(this.targetExtent_)/this.targetResolution_,n=Vr(this.targetExtent_)/this.targetResolution_;this.canvas_=V4(t,n,this.sourcePixelRatio_,sk(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ut.IDLE){this.state=Ut.LOADING,this.changed();const e=this.sourceImage_.getState();e==Ut.LOADED||e==Ut.ERROR?this.reproject_():(this.sourceListenerKey_=Wi(this.sourceImage_,qt.CHANGE,function(t){const n=this.sourceImage_.getState();(n==Ut.LOADED||n==Ut.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){gr(this.sourceListenerKey_),this.sourceListenerKey_=null}};const Oh=4,qI={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};let C0t=class extends Zl{constructor(e,t){super(e),this.image=t}},S0t=class extends a1{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const n=$D(t,e,0);e=t[n]}return e}getImage(e,t,n,r){const s=this.getProjection();if(!s||!r||ma(s,r))return s&&(r=s),this.getImageInternal(e,t,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ma(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&rc(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new E0t(s,r,e,t,n,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,n,r){if(this.loader){const s=gL(e,t,n,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&ya(this.wantedExtent_,s)||ya(this.image.getExtent(),s))&&(this.wantedResolution_&&sk(this.wantedResolution_)===o||sk(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new HD(s,o,n,this.loader),this.image.addEventListener(qt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let n;switch(t.getState()){case Ut.LOADING:this.loading=!0,n=qI.IMAGELOADSTART;break;case Ut.LOADED:this.loading=!1,n=qI.IMAGELOADEND;break;case Ut.ERROR:this.loading=!1,n=qI.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new C0t(n,t))}};function pL(i,e){i.getImage().src=e}function gL(i,e,t,n){const r=e/t,s=Ko(i),o=ng(Di(i)/r,Oh),a=ng(Vr(i)/r,Oh),l=ng((n-1)*o/2,Oh),u=o+2*l,c=ng((n-1)*a/2,Oh),h=a+2*c;return WE(s,r,0,[u,h])}const Qg=S0t;function Tf(i,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const n=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}function rLe(i,e,t,n,r,s){const o=r.getCode().split(/:(?=\d+$)/).pop(),a=t/n,l=[DR(Di(e)/a,Oh),DR(Vr(e)/a,Oh)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*n:90*n);const u=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Tf(u,s)}function sLe(i){const e=i.load?i.load:Yg,t=Lt(i.projection||"EPSG:3857");return function(n,r,s){s=i.hidpi?s:1;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,i.params),n=gL(n,r,s,i.ratio);const a=rLe(i.url,n,r,s,t,o),l=new Image;return i.crossOrigin!==null&&(l.crossOrigin=i.crossOrigin),e(l,a).then(u=>{const c=Di(n)/u.width*s;return{image:u,extent:n,resolution:c,pixelRatio:s}})}}class T0t extends Qg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:pL,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,n,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=sLe({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Yg(s))})),super.getImageInternal(e,t,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const A0t=T0t;class R0t extends Qg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,t,n,r){t=this.findNearestResolution(t);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==t&&s.getPixelRatio()==n&&ya(s.getExtent(),e))return s;e=e.slice(),M5(e,this.ratio_);const o=Di(e)/t,a=Vr(e)/t,l=[o*n,a*n],u=this.canvasFunction_.call(this,e,t,n,l,r);return u&&(s=new Q4(e,t,n,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}const k0t=R0t;function D0t(i,e,t,n){const r=Di(i),s=Vr(i),o=e[0],a=e[1],l=.0254/n;return a*r>o*s?r*t/(o*l):s*t/(a*l)}function L0t(i,e,t,n,r,s,o){const a=D0t(t,n,s,o),l=Ko(t),u={OPERATION:r?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,e),Tf(i,u)}function oLe(i){const e=i.load||Yg;return function(t,n,r){const s=new Image;i.crossOrigin!==null&&(s.crossOrigin=i.crossOrigin),t=gL(t,n,r,i.ratio);const o=Di(t)/n,a=Vr(t)/n,l=[o*r,a*r],u=L0t(i.url,i.params,t,l,i.useOverlay,i.metersPerUnit||1,i.displayDpi||96);return e(s,u).then(c=>({image:c,extent:t,pixelRatio:r}))}}class M0t extends Qg{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:pL,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,n,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=oLe({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Yg(s))})),super.getImageInternal(e,t,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}const I0t=M0t;function aLe(i){const e=i.load||Yg,t=i.imageExtent,n=new Image;return i.crossOrigin!==null&&(n.crossOrigin=i.crossOrigin),()=>e(n,i.url).then(r=>{const s=Di(t)/r.width,o=Vr(t)/r.height;return{image:r,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}let O0t=class extends Qg{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,n=e.imageLoadFunction!==void 0?e.imageLoadFunction:pL;super({attributions:e.attributions,interpolate:e.interpolate,projection:Lt(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new HD(this.imageExtent_,void 0,1,aLe({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(r,s)=>(this.image.setImage(r),n(this.image,s),Yg(r))})),this.image.addEventListener(qt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,n,r){return Hr(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}};const P0t=O0t,ak="1.3.0",bbe=[101,101];function lLe(i,e,t,n,r){r.WIDTH=t[0],r.HEIGHT=t[1];const s=n.getAxisOrientation();let o;const a=P5(r.VERSION,"1.3")>=0;return r[a?"CRS":"SRS"]=n.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,r.BBOX=o.join(","),Tf(i,r)}function uLe(i,e,t,n,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[DR(Di(i)/a,Oh),DR(Vr(i)/a,Oh)];if(t!=1)switch(o){case"geoserver":const c=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+c:s.FORMAT_OPTIONS="dpi:"+c;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return lLe(r,i,l,n,s)}function lk(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:ak,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}function cLe(i){const e=i.hidpi===void 0?!0:i.hidpi,t=Lt(i.projection||"EPSG:3857"),n=i.ratio||1.5,r=i.load||Yg;return(s,o,a)=>{s=gL(s,o,a,n),a!=1&&(!e||i.serverType===void 0)&&(a=1);const l=uLe(s,o,a,t,i.url,lk(i.params,"GetMap"),i.serverType),u=new Image;return i.crossOrigin!==null&&(u.crossOrigin=i.crossOrigin),r(u,l).then(c=>({image:c,extent:s,pixelRatio:a}))}}function F0t(i,e,t){if(i.url===void 0)return;const n=Lt(i.projection||"EPSG:3857"),r=WE(e,t,0,bbe),s={QUERY_LAYERS:i.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,lk(i.params,"GetFeatureInfo"),i.params);const o=n_((e[0]-r[0])/t,Oh),a=n_((r[3]-e[1])/t,Oh),l=P5(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,lLe(i.url,r,bbe,n,s)}function N0t(i,e){if(i.url===void 0)return;const t={SERVICE:"WMS",VERSION:ak,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i.params===void 0||i.params.LAYER===void 0){const n=i.params.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;t.LAYER=n}if(e!==void 0){const n=Lt(i.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;t.SCALE=e*n/r}return Object.assign(t,i.params),Tf(i.url,t)}class $0t extends Qg{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:pL,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,n,r){const s=Lt(n),o=this.getProjection();o&&o!==s&&(t=u2(o,s,e,t),e=Qb(e,s,o));const a={url:this.url_,params:{...this.params_,...r},projection:o||s};return F0t(a,e,t)}getLegendUrl(e,t){return N0t({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,n,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=cLe({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Yg(s))})),super.getImageInternal(e,t,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const hLe=$0t;function E$(i,e,t,n){const r=document.createElement("script"),s="olc_"+Gt(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=i+(i.includes("?")?"&":"?")+(n||"callback")+"="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(r)}class B0t extends Error{constructor(e){const t="Unexpected response status: "+e.status;super(t),this.name="ResponseError",this.response=e}}class j0t extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function dLe(i){return new Promise(function(e,t){function n(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const c="Error parsing response text as JSON: "+u.message;t(new Error(c));return}e(l);return}t(new B0t(a))}function r(o){t(new j0t(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",n),s.addEventListener("error",r),s.open("GET",i),s.setRequestHeader("Accept","application/json"),s.send()})}function fLe(i,e){return e.includes("://")?e:new URL(e,i).href}const z0t={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},G0t={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function pLe(i,e){if(!e.length)return i;const t=new URL(i,"file:/");if(t.pathname.split("/").includes("collections"))return XE('The "collections" query parameter cannot be added to collection endpoints'),i;const n=e.map(o=>encodeURIComponent(o)).join(",");t.searchParams.append("collections",n);const r=i.split("?")[0],s=decodeURIComponent(t.searchParams.toString());return`${r}?${s}`}function U0t(i,e,t){let n,r;for(let s=0;s<i.length;++s){const o=i[s];if(o.rel==="item"){if(o.type===e){n=o.href;break}(z0t[o.type]||!r&&o.type.startsWith("image/"))&&(r=o.href)}}if(!n)if(r)n=r;else throw new Error('Could not find "item" link');return t&&(n=pLe(n,t)),n}function q0t(i,e,t,n){let r,s;const o={};for(let a=0;a<i.length;++a){const l=i[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===e){r=l.href;break}G0t[l.type]&&(s=l.href)}}if(!r&&t)for(let a=0;a<t.length;++a){const l=t[a];if(o[l]){r=o[l];break}}if(!r)if(s)r=s;else throw new Error('Could not find "item" link');return n&&(r=pLe(r,n)),r}function xbe(i,e,t,n){let r=i.projection;if(!r&&(r=Lt(e.crs),!r))throw new Error(`Unsupported CRS: ${e.crs}`);const s=e.orderedAxes,o=(s?s.slice(0,2).map(C=>C.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):r.getAxisOrientation().substr(0,2))!=="en",a=e.tileMatrices,l={};for(let C=0;C<a.length;++C){const D=a[C];l[D.id]=D}const u={},c=[];if(n)for(let C=0;C<n.length;++C){const D=n[C],R=D.tileMatrix;c.push(R),u[R]=D}else for(let C=0;C<a.length;++C){const D=a[C].id;c.push(D)}const h=c.length,d=new Array(h),f=new Array(h),p=new Array(h),m=new Array(h),y=[-1/0,-1/0,1/0,1/0];for(let C=0;C<h;++C){const D=c[C],R=l[D],A=R.pointOfOrigin;o?d[C]=[A[1],A[0]]:d[C]=A,f[C]=R.cellSize,p[C]=[R.matrixWidth,R.matrixHeight],m[C]=[R.tileWidth,R.tileHeight];const L=u[D];if(L){const O=R.cellSize*R.tileWidth,$=d[C][0]+L.minTileCol*O,q=d[C][0]+(L.maxTileCol+1)*O,M=R.cellSize*R.tileHeight,F=R.cornerOfOrigin==="bottomLeft";let N,B;F?(N=d[C][1]+L.minTileRow*M,B=d[C][1]+(L.maxTileRow+1)*M):(N=d[C][1]-(L.maxTileRow+1)*M,B=d[C][1]-L.minTileRow*M),ho(y,[$,N,q,B],y)}}const v=new Zg({origins:d,resolutions:f,sizes:p,tileSizes:m,extent:n?y:void 0}),b=i.context,x=i.url;function w(C,D,R){if(!C)return;const A=c[C[0]],L=l[A],O=L.cornerOfOrigin==="bottomLeft",$={tileMatrix:A,tileCol:C[1],tileRow:O?-C[2]-1:C[2]};if(n){const M=u[L.id];if($.tileCol<M.minTileCol||$.tileCol>M.maxTileCol||$.tileRow<M.minTileRow||$.tileRow>M.maxTileRow)return}Object.assign($,b);const q=t.replace(/\{(\w+?)\}/g,function(M,F){return $[F]});return fLe(x,q)}return{grid:v,urlTemplate:t,urlFunction:w}}function V0t(i,e){const t=e.tileMatrixSetLimits;let n;if(e.dataType==="map")n=U0t(e.links,i.mediaType,i.collections);else if(e.dataType==="vector")n=q0t(e.links,i.mediaType,i.supportedMediaTypes,i.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return xbe(i,e.tileMatrixSet,n,t);const r=e.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!r)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=r.href,o=fLe(i.url,s);return dLe(o).then(function(a){return xbe(i,a,n,t)})}function gLe(i){return dLe(i.url).then(function(e){return V0t(i,e)})}class H0t extends cc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections};gLe(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){XE(e),this.setState("error")}}const W0t=H0t;let X0t=class extends l1{constructor(e,t,n,r,s,o){super(e,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==at.IDLE&&(this.setState(at.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(at.ERROR)}setFeatures(e){this.features_=e,this.setState(at.LOADED)}setLoader(e){this.loader_=e}};const wbe=[];let Y0t=class extends l1{constructor(e,t,n,r){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=n}getContext(e){const t=Gt(e);return t in this.context_||(this.context_[t]=Xr(1,1,wbe)),this.context_[t]}hasContext(e){return Gt(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=Gt(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];j0(t),wbe.push(t.canvas),delete this.context_[e]}super.release()}},Z0t=class extends o${constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||jf(t),r=e.tileGrid||Kg({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:K0t,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new dL(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:X0t,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],n=this.tileCache;if(n.getCount()===0)return t;const r=pDe(n.peekFirstKey())[0],s=this.tileGrid;return n.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==at.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.tileCoord;if(Hr(e,s.getTileCoordExtent(h))){const d=c.getFeatures();if(d)for(let f=0,p=d.length;f<p;++f){const m=d[f],y=m.getGeometry();Hr(e,y.getExtent())&&t.push(m)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const n=this.getTileCacheForProjection(e),r=Object.keys(t).reduce((s,o)=>{const a=Spt(o),l=n.peek(a);if(l){const u=l.sourceTiles;for(let c=0,h=u.length;c<h;++c)s[u[c].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(r)}getSourceTiles(e,t,n){if(n.getState()===at.IDLE){n.setState(at.LOADING);const r=n.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);ql(o,-l,o);const u=this.tileGrid,c=u.getExtent();c&&ho(o,c,o);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,h,d=>{const f=this.tileUrlFunction(d,e,t),p=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?at.IDLE:at.EMPTY,f,this.format_,this.tileLoadFunction);n.sourceTiles.push(p);const m=p.getState();if(m<at.LOADED){const y=v=>{this.handleTileChange(v);const b=p.getState();if(b===at.LOADED||b===at.ERROR){const x=p.getKey();x in n.errorTileKeys?p.getState()===at.LOADED&&delete n.errorTileKeys[x]:n.loadingSourceTiles--,b===at.ERROR?n.errorTileKeys[x]=!0:p.removeEventListener(qt.CHANGE,y),n.loadingSourceTiles===0&&n.setState(Cf(n.errorTileKeys)?at.LOADED:at.ERROR)}};p.addEventListener(qt.CHANGE,y),n.loadingSourceTiles++}m===at.IDLE&&(p.extent=u.getTileCoordExtent(d),p.projection=t,p.resolution=u.getResolution(d[0]),this.sourceTileCache.set(f,p),p.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===at.ERROR)?at.ERROR:at.LOADED)}return n.sourceTiles}getTile(e,t,n,r,s){const o=id(e,t,n),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[e,t,n];let c=this.getTileCoordForTileUrlFunction(u,s);const h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(c&&h){const m=d.getTileCoordExtent(c);ql(m,-d.getResolution(e),m),Hr(h,m)||(c=null)}let f=!0;if(c!==null){const m=this.tileGrid,y=d.getResolution(e),v=m.getZForResolution(y,1),b=d.getTileCoordExtent(c);ql(b,-y,b),m.forEachTileCoord(b,v,x=>{f=f&&!this.tileUrlFunction(x,r,s)})}const p=new Y0t(u,f?at.EMPTY:at.IDLE,c,this.getSourceTiles.bind(this,r,s));return p.key=a,l?(p.interimTile=l,p.refreshInterimChain(),this.tileCache.replace(o,p)):this.tileCache.set(o,p),p}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(u,c){return r.getOrigin(c)}),a=s.map(function(u,c){return r.getTileSize(c)}),l=xAe+1;for(let u=s.length;u<l;++u)s.push(s[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);n=new Zg({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=Qr(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}};const C$=Z0t;function K0t(i,e){i.setLoader(function(t,n,r){Qke(e,i.getFormat(),t,n,r,i.onLoad.bind(i),i.onError.bind(i))})}class J0t extends C${constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const t={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections};gLe(t).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){XE(e),this.setState("error")}}const Q0t=J0t,mLe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class eyt extends c1{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[mLe];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const yLe=eyt;let vLe=!0;try{new ImageData(10,10)}catch{vLe=!1}let VI;function tyt(i,e,t){if(vLe)return new ImageData(i,e,t);VI||(VI=document.createElement("canvas").getContext("2d"));const n=VI.createImageData(e,t);return n.data.set(i),n}function _Le(i){let e=!0;try{new ImageData(10,10)}catch{e=!1}function t(n,r,s){return e?new ImageData(n,r,s):{data:n,width:r,height:s}}return function(n){const r=n.buffers,s=n.meta,o=n.imageOps,a=n.width,l=n.height,u=r.length,c=r[0].byteLength;if(o){const p=new Array(u);for(let y=0;y<u;++y)p[y]=t(new Uint8ClampedArray(r[y]),a,l);return i(p,s).data.buffer}const h=new Uint8ClampedArray(c),d=new Array(u),f=new Array(u);for(let p=0;p<u;++p)d[p]=new Uint8ClampedArray(r[p]),f[p]=[0,0,0,0];for(let p=0;p<c;p+=4){for(let y=0;y<u;++y){const v=d[y];f[y][0]=v[p],f[y][1]=v[p+1],f[y][2]=v[p+2],f[y][3]=v[p+3]}const m=i(f,s);h[p]=m[0],h[p+1]=m[1],h[p+2]=m[2],h[p+3]=m[3]}return h.buffer}}function iyt(i,e){const n=Object.keys(i.lib||{}).map(function(s){return"const "+s+" = "+i.lib[s].toString()+";"}).concat(["const __minion__ = ("+_Le.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(n.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return r.addEventListener("message",e),r}function nyt(i,e){const t=_Le(i.operation);let n=!1;return{postMessage:function(r){setTimeout(function(){n||e({data:{buffer:t(r),meta:r.meta}})},0)},terminate:function(){n=!0}}}class ryt extends fC{constructor(e){super(),this._imageOps=!!e.imageOps;let t;e.threads===0?t=0:this._imageOps?t=1:t=e.threads||1;const n=new Array(t);if(t)for(let r=0;r<t;++r)n[r]=iyt(e,this._onWorkerMessage.bind(this,r));else n[0]=nyt(e,this._onWorkerMessage.bind(this,0));this._workers=n,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(e,t,n){this._enqueue({inputs:e,meta:t,callback:n}),this._dispatch()}_enqueue(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||this._queue.length===0)return;const e=this._queue.shift();this._job=e;const t=e.inputs[0].width,n=e.inputs[0].height,r=e.inputs.map(function(l){return l.data.buffer}),s=this._workers.length;if(this._running=s,s===1){this._workers[0].postMessage({buffers:r,meta:e.meta,imageOps:this._imageOps,width:t,height:n},r);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const u=l*a,c=[];for(let h=0,d=r.length;h<d;++h)c.push(r[h].slice(u,u+a));this._workers[l].postMessage({buffers:c,meta:e.meta,imageOps:this._imageOps,width:t,height:n},c)}}_onWorkerMessage(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,this._running===0&&this._resolveJob())}_resolveJob(){const e=this._job,t=this._workers.length;let n,r;if(t===1)n=new Uint8ClampedArray(this._dataLookup[0].buffer),r=this._dataLookup[0].meta;else{const s=e.inputs[0].data.length;n=new Uint8ClampedArray(s),r=new Array(t);const o=4*Math.ceil(s/4/t);for(let a=0;a<t;++a){const l=this._dataLookup[a].buffer,u=a*o;n.set(new Uint8ClampedArray(l),u),r[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},e.callback(null,tyt(n,e.inputs[0].width,e.inputs[0].height),r),this._dispatch()}disposeInternal(){for(let e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}const Ebe={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class Cbe extends Zl{constructor(e,t,n){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=n}}class bLe extends Qg{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=ayt(e.sources);const t=this.changed.bind(this);for(let n=0,r=this.layers_.length;n<r;++n)this.layers_[n].addEventListener(qt.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new ARe(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Ss(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:oyt(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Ss(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Gt(this),renderTargets:{}},this.setAttributions(function(n){const r=[];for(let s=0,o=e.sources.length;s<o;++s){const a=e.sources[s],l=a instanceof a1?a:a.getSource();if(!l)continue;const u=l.getAttributions();if(typeof u=="function"){const c=u(n);r.push.apply(r,c)}}return r.length!==0?r:null}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new ryt({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,n){const r=Object.assign({},this.frameState_);r.viewState=Object.assign({},r.viewState);const s=Ko(e);r.size[0]=Math.ceil(Di(e)/t),r.size[1]=Math.ceil(Vr(e)/t),r.extent=[s[0]-r.size[0]*t/2,s[1]-r.size[1]*t/2,s[0]+r.size[0]*t/2,s[1]+r.size[1]*t/2],r.time=Date.now();const o=r.viewState;return o.center=s,o.projection=n,o.resolution=t,r}allSourcesReady_(){let e=!0,t;for(let n=0,r=this.layers_.length;n<r;++n)if(t=this.layers_[n].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,n,r){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(t!==o||!rc(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,n=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const o=syt(this.layers_[s],e);if(o)n[s]=o;else return}const r={};this.dispatchEvent(new Cbe(Ebe.BEFOREOPERATIONS,e,r)),this.processor_.process(n,r,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,n,r){if(t||!n)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!rc(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(Di(s)/o),u=Math.round(Vr(s)/o);a=Xr(l,u),this.renderedImageCanvas_=new Q4(s,o,1,a.canvas)}a.putImageData(n,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Cbe(Ebe.AFTEROPERATIONS,e,r))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let n=0,r=this.layers_.length;n<r&&(t=this.layers_[n].getSource().getResolutions(e),!t);++n);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}bLe.prototype.dispose;let qm=null;function syt(i,e){const t=i.getRenderer();if(!t)throw new Error("Unsupported layer type: "+i);if(!t.prepareFrame(e))return null;const n=e.size[0],r=e.size[1];if(n===0||r===0)return null;const s=t.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===r)return o.getContext("2d").getImageData(0,0,n,r)}if(!qm)qm=Xr(n,r,void 0,{willReadFrequently:!0});else{const a=qm.canvas;a.width!==n||a.height!==r?qm=Xr(n,r,void 0,{willReadFrequently:!0}):qm.clearRect(0,0,n,r)}return qm.drawImage(o,0,0,n,r),qm.getImageData(0,0,n,r)}function oyt(i){return i.map(function(e){return e.getLayerState()})}function ayt(i){const e=i.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=lyt(i[n]);return t}function lyt(i){let e;return i instanceof a1?i instanceof u1?e=new J4({source:i}):i instanceof Qg&&(e=new K4({source:i})):e=i,e}const uyt=bLe,cyt='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',hyt='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',dyt='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',fyt={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},pyt={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class gyt extends c1{constructor(e){const t=e.layer.indexOf("-"),n=t==-1?e.layer:e.layer.slice(0,t),r=pyt[n]||{minZoom:0,maxZoom:20,retina:!0},s=fyt[e.layer],o=e.apiKey?"?api_key="+e.apiKey:"",a=r.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,u=[cyt,hyt,mLe];e.layer.startsWith("stamen_")&&u.splice(1,0,dyt),super({attributions:u,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:r.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:r.minZoom,opaque:s.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}const myt=gyt;class yyt extends cc{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Wa(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,n,r,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=Uh(X4(e),a.length);l=a[u]}return rLe(l,n,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),r,s,o)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);const s=r.getTileCoordExtent(e,this.tmpExtent_);let o=Qr(r.getTileSize(e[0]),this.tmpSize);t!=1&&(o=ZAe(o,t,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,s,t,n,a)}}const vyt=yyt;class _yt extends c1{constructor(e){e=e||{},super({opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,n)=>{const r=t.getTileCoord()[0],s=Qr(this.tileGrid.getTileSize(r)),o=Xr(s[0],s[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,s[0]+.5,s[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(n,s[0]/2,s[1]/2,s[0]),o.fillText(n,s[0]/2,s[1]/2,s[0]),t.setImage(o.canvas)}})}}const byt=_yt;let xyt=class extends cc{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Lt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)E$(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Lt("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const u=Nf(t,n);r=ab(e.bounds,u)}const s=jf(n),o=e.minzoom||0,a=e.maxzoom||22,l=Kg({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=r$(e.tiles,l),e.attribution&&!this.getAttributions()){const u=r!==void 0?r:s;this.setAttributions(function(c){return Hr(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}};const wyt=xyt;let Eyt=class extends cc{constructor(e){e=e||{};const t=Object.assign({},e.params),n="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Wa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,n,r){const s=Lt(n),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=Qb(e,s,o),u=u2(o,s,e,t),c=a.getZForResolution(u,this.zDirection),h=a.getResolution(c),d=a.getTileCoordForCoordAndZ(l,c);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const p=this.gutter_;p!==0&&(f=ql(f,h*p,f));const m={QUERY_LAYERS:this.params_.LAYERS};Object.assign(m,lk(this.params_,"GetFeatureInfo"),r);const y=Math.floor((l[0]-f[0])/h),v=Math.floor((f[3]-l[1])/h);return m[this.v13_?"I":"X"]=y,m[this.v13_?"J":"Y"]=v,this.getRequestUrl_(d,f,1,o||s,m)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:ak,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(e!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=e*r/s}return Object.assign(n,t),Tf(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,n,r,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=Uh(X4(e),o.length);a=o[l]}return uLe(t,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(e[0]),n,r,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||ak;this.v13_=P5(e,"1.3")>=0}tileUrlFunction(e,t,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=r.getResolution(e[0]);let o=r.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=ql(o,s*a,o));const l=Object.assign({},lk(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,n,l)}};const xLe=Eyt;class Cyt extends l1{constructor(e,t,n,r,s,o){super(e,t),this.src_=n,this.extent_=r,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),n=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-n)*this.grid_.length)];if(typeof r!="string")return null;let s=r.charCodeAt(Math.floor(t*r.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(e,t,n){this.state==at.EMPTY&&n===!0?(this.state=at.IDLE,ib(this,qt.CHANGE,function(r){t(this.getData(e))},this),this.loadInternal_()):n===!0?setTimeout(()=>{t(this.getData(e))},0):t(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=at.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=at.LOADED,this.changed()}loadInternal_(){if(this.state==at.IDLE)if(this.state=at.LOADING,this.jsonp_)E$(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleError_();return}this.handleLoad_(n)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(at.EMPTY)}}class Syt extends u1{constructor(e){if(super({projection:Lt("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=mgt,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)E$(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,t,n,r){if(this.tileGrid){const s=this.tileGrid.getZForResolution(t,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(e,n,r)}else r===!0?setTimeout(function(){n(null)},0):n(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const t=Lt("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const c=Nf(t,n);r=ab(e.bounds,c)}const s=jf(n),o=e.minzoom||0,a=e.maxzoom||22,l=Kg({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=e.template;const u=e.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=r$(u,l),e.attribution){const c=r!==void 0?r:s;this.setAttributions(function(h){return Hr(c,h.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,t,n,r,s){const o=id(e,t,n);if(this.tileCache.containsKey(o))return this.tileCache.get(o);const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),u=this.tileUrlFunction_(l,r,s),c=new Cyt(a,u!==void 0?at.IDLE:at.EMPTY,u!==void 0?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,c),c}useTile(e,t,n){const r=id(e,t,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const Tyt=Syt;let Ayt=class extends cc{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=s$(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=mb(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(mb(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Tf(e,n):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const u={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(u,s);let c=e;return t=="KVP"?c=Tf(c,u):c=c.replace(/\{(\w+?)\}/g,function(h,d){return u[d]}),c}}};const wLe=Ayt;function Ryt(i,e){const t=i.Contents.Layer,n=t==null?void 0:t.find(function(q){return q.Identifier==e.layer});if(!n)return null;const r=i.Contents.TileMatrixSet;let s;n.TileMatrixSetLink.length>1?"projection"in e?s=n.TileMatrixSetLink.findIndex(function(q){const F=r.find(function(W){return W.Identifier==q.TileMatrixSet}).SupportedCRS,N=Lt(F),B=Lt(e.projection);return N&&B?ma(N,B):F==e.projection}):s=n.TileMatrixSetLink.findIndex(function(q){return q.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const o=n.TileMatrixSetLink[s].TileMatrixSet,a=n.TileMatrixSetLink[s].TileMatrixSetLimits;let l=n.Format[0];"format"in e&&(l=e.format),s=n.Style.findIndex(function(q){return"style"in e?q.Title==e.style:q.isDefault}),s<0&&(s=0);const u=n.Style[s].Identifier,c={};"Dimension"in n&&n.Dimension.forEach(function(q,M,F){const N=q.Identifier;let B=q.Default;B===void 0&&(B=q.Value[0]),c[N]=B});const d=i.Contents.TileMatrixSet.find(function(q){return q.Identifier==o});let f;const p=d.SupportedCRS;if(p&&(f=Lt(p)),"projection"in e){const q=Lt(e.projection);q&&(!f||ma(q,f))&&(f=q)}let m=!1;const y=f.getAxisOrientation().substr(0,2)=="ne";let v=d.TileMatrix[0],b={MinTileCol:0,MinTileRow:0,MaxTileCol:v.MatrixWidth-1,MaxTileRow:v.MatrixHeight-1};if(a){b=a[a.length-1];const q=d.TileMatrix.find(M=>M.Identifier===b.TileMatrix||d.Identifier+":"+M.Identifier===b.TileMatrix);q&&(v=q)}const x=v.ScaleDenominator*28e-5/f.getMetersPerUnit(),w=y?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,C=v.TileWidth*x,D=v.TileHeight*x;let R=d.BoundingBox;R&&y&&(R=[R[1],R[0],R[3],R[2]]);let A=[w[0]+C*b.MinTileCol,w[1]-D*(1+b.MaxTileRow),w[0]+C*(1+b.MaxTileCol),w[1]-D*b.MinTileRow];if(R!==void 0&&!ya(R,A)){const q=n.WGS84BoundingBox,M=Lt("EPSG:4326").getExtent();if(A=R,q)m=q[0]===M[0]&&q[2]===M[2];else{const F=PAe(R,d.SupportedCRS,"EPSG:4326");m=F[0]-1e-10<=M[0]&&F[2]+1e-10>=M[2]}}const L=cgt(d,A,a),O=[];let $=e.requestEncoding;if($=$!==void 0?$:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const q=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let M=0,F=q.length;M<F;++M)if(q[M].Constraint){const B=q[M].Constraint.find(function(W){return W.name=="GetEncoding"}).AllowedValues.Value;if($===""&&($=B[0]),$==="KVP")B.includes("KVP")&&O.push(q[M].href);else break}else q[M].href&&($="KVP",O.push(q[M].href))}return O.length===0&&($="REST",n.ResourceURL.forEach(function(q){q.resourceType==="tile"&&(l=q.format,O.push(q.template))})),{urls:O,layer:e.layer,matrixSet:o,format:l,projection:f,requestEncoding:$,tileGrid:L,style:u,dimensions:c,wrapX:m,crossOrigin:e.crossOrigin}}function kyt(i,e){const t=new W4(32),n=i.getExtent();return function(r,s){t.expireCache(),n&&(r=ho(n,r));const o=i.getZForResolution(s),a=[];return i.forEachTileCoord(r,o,l=>{const u=l.toString();if(!t.containsKey(u)){const c=e(l);t.set(u,c)}a.push(t.get(u))}),a}}const Dyt=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:wgt,CartoDB:Sgt,Cluster:Agt,DataTile:RDe,GeoTIFF:d0t,Google:v0t,IIIF:w0t,Image:Qg,ImageArcGISRest:A0t,ImageCanvas:k0t,ImageMapGuide:I0t,ImageStatic:P0t,ImageWMS:hLe,OGCMapTile:W0t,OGCVectorTile:Q0t,OSM:yLe,Raster:uyt,Source:a1,StadiaMaps:myt,Tile:u1,TileArcGISRest:vyt,TileDebug:byt,TileImage:cc,TileJSON:wyt,TileWMS:xLe,UTFGrid:Tyt,UrlTile:o$,Vector:hy,VectorTile:C$,WMTS:wLe,XYZ:c1,Zoomify:b0t,createArcGISRestLoader:sLe,createMapGuideLoader:oLe,createStaticLoader:aLe,createWMSLoader:cLe,sourcesFromTileGrid:kyt},Symbol.toStringTag,{value:"Module"})),_s={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Lyt={ERROR:"error"};class Myt extends Zl{constructor(e){super(Lyt.ERROR),this.code=e.code,this.message=e.message}}class Iyt extends lc{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=zD,this.watchId_=void 0,this.addChangeListener(_s.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(_s.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Nf(Lt("EPSG:4326"),e),this.position_&&this.set(_s.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(_s.ACCURACY,t.accuracy),this.set(_s.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(_s.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(_s.HEADING,t.heading===null?void 0:Bc(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const n=this.transform_(this.position_);this.set(_s.POSITION,n.slice()),this.set(_s.SPEED,t.speed===null?void 0:t.speed);const r=trt(this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(_s.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new Myt(e))}getAccuracy(){return this.get(_s.ACCURACY)}getAccuracyGeometry(){return this.get(_s.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(_s.ALTITUDE)}getAltitudeAccuracy(){return this.get(_s.ALTITUDE_ACCURACY)}getHeading(){return this.get(_s.HEADING)}getPosition(){return this.get(_s.POSITION)}getProjection(){return this.get(_s.PROJECTION)}getSpeed(){return this.get(_s.SPEED)}getTracking(){return this.get(_s.TRACKING)}getTrackingOptions(){return this.get(_s.TRACKING_OPTIONS)}setProjection(e){this.set(_s.PROJECTION,Lt(e))}setTracking(e){this.set(_s.TRACKING,e)}setTrackingOptions(e){this.set(_s.TRACKING_OPTIONS,e)}}const Oa={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class ELe extends lc{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Irt,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Oa.ELEMENT,this.handleElementChanged),this.addChangeListener(Oa.MAP,this.handleMapChanged),this.addChangeListener(Oa.OFFSET,this.handleOffsetChanged),this.addChangeListener(Oa.POSITION,this.handlePositionChanged),this.addChangeListener(Oa.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Oa.ELEMENT)}getId(){return this.id}getMap(){return this.get(Oa.MAP)||null}getOffset(){return this.get(Oa.OFFSET)}getPosition(){return this.get(Oa.POSITION)}getPositioning(){return this.get(Oa.POSITIONING)}handleElementChanged(){rRe(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(PR(this.element),gr(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Wi(e,xh.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Oa.ELEMENT,e)}setMap(e){this.set(Oa.MAP,e)}setOffset(e){this.set(Oa.OFFSET,e)}setPosition(e){this.set(Oa.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Oa.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[Srt(r),Trt(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!ya(n,s)){const a=s[0]-n[0],l=n[2]-s[2],u=s[1]-n[1],c=n[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const p=[f[0]+h[0],f[1]+h[1]],m=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(p),duration:m.duration,easing:m.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(Oa.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,t){const n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let l="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c)}getOptions(){return this.options}}const Sbe=0,_E=1,Tbe=[0,0,0,0],M_=[],HI={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class WI extends Zl{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class Oyt extends uy{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:FRe,this.defaultDeleteCondition_=function(n){return zst(n)&&Vst(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:GR,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new rF,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new cy({source:new hy({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:Fyt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new qa(this.source_.getFeatures()),this.source_.addEventListener(Uo.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Uo.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(za.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(za.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(qt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new qa;const n=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,l=o.length;a<l;++a){const u=o[a].feature;u&&!n.includes(u)&&this.featuresBeingModified_.push(u)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new WI(HI.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(qt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(r){e===r.feature&&n.push(r)});for(let r=n.length-1;r>=0;--r){const s=n[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),r={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length-1;r<s;++r){const o=n.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(ga(o),a)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[r],index:a,segment:u};this.rBush_.insert(ga(u),c)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[r],index:a,segment:u};this.rBush_.insert(ga(u),c)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length;a<l;++a){const u=o[a];for(let c=0,h=u.length-1;c<h;++c){const d=u.slice(c,c+2),f={feature:e,geometry:t,depth:[a,r],index:c,segment:d};this.rBush_.insert(ga(d),f)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),r={feature:e,geometry:t,index:Sbe,segment:[n,n]},s={feature:e,geometry:t,index:_E,segment:[n,n]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(A_(n),r);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let r=0;r<n.length;++r){const s=n[r],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,n){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new Kr(new ps(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",n),r}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Wn.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Wn.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Wn.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],l=a[0],u=l.feature;n.includes(u)||n.push(u);const c=l.geometry;r.includes(c)||r.push(c);const h=l.depth;let d;const f=l.segment,p=a[1];for(;t.length<c.getStride();)t.push(f[p][t.length]);switch(c.getType()){case"Point":d=t,f[0]=t,f[1]=t;break;case"MultiPoint":d=c.getCoordinates(),d[l.index]=t,f[0]=t,f[1]=t;break;case"LineString":d=c.getCoordinates(),d[l.index+p]=t,f[p]=t;break;case"MultiLineString":d=c.getCoordinates(),d[h[0]][l.index+p]=t,f[p]=t;break;case"Polygon":d=c.getCoordinates(),d[h[0]][l.index+p]=t,f[p]=t;break;case"MultiPolygon":d=c.getCoordinates(),d[h[1]][h[0]][l.index+p]=t,f[p]=t;break;case"Circle":if(f[0]=t,f[1]=t,l.index===Sbe)this.changingFeature_=!0,c.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let m=LR(Os(c.getCenter()),Os(t));c.setRadius(m),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(c,d)}this.createOrUpdateVertexFeature_(t,n,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){e.map.getView().getProjection();const r=[],s=n.getGeometry().getCoordinates(),o=ga([s]),a=this.rBush_.getInExtent(o),l={};a.sort(Pyt);for(let u=0,c=a.length;u<c;++u){const h=a[u],d=h.segment;let f=Gt(h.geometry);const p=h.depth;if(p&&(f+="-"+p.join("-")),l[f]||(l[f]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===_E){const m=Rbe(t,h);Hu(m,s)&&!l[f][0]&&(this.dragSegments_.push([h,0]),l[f][0]=h);continue}if(Hu(d[0],s)&&!l[f][0]){this.dragSegments_.push([h,0]),l[f][0]=h;continue}if(Hu(d[1],s)&&!l[f][1]){if(l[f][0]&&l[f][0].index===0){let m=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":m=m[p[1]];case"Polygon":if(h.index!==m[p[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[f][1]=h;continue}Gt(d)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(e)&&r.push(h)}r.length&&this.willModifyFeatures_(e,[r]);for(let u=r.length-1;u>=0;--u)this.insertVertex_(r[u],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],r=n.geometry;if(r.getType()==="Circle"){const s=r.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(A_(s),o);let l=r;this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(ga(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new WI(HI.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const r=n||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(l,u){return Abe(r,l)-Abe(r,u)};let o,a;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,c,h)=>{h&&h.getType()==="Point"&&(h=new ps(B0(h.getCoordinates())));const d=h||u.getGeometry();if(u instanceof Kr&&this.features_.getArray().includes(u)){a=d;const f=u.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:u,geometry:a,segment:[f,f]}]}return!0},{layerFilter:l})}if(!o){const l=_u(A_(r,Tbe)),u=t.getView().getResolution()*this.pixelTolerance_,c=mC(ql(l,u,Tbe));o=this.rBush_.getInExtent(c)}if(o&&o.length>0){const l=o.sort(s)[0],u=l.segment;let c=Rbe(r,l);const h=t.getPixelFromCoordinate(c);let d=LR(e,h);if(a||d<=this.pixelTolerance_){const f={};if(f[Gt(u)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-r[0],this.delta_[1]=c[1]-r[1]),l.geometry.getType()==="Circle"&&l.index===_E)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);else{const p=t.getPixelFromCoordinate(u[0]),m=t.getPixelFromCoordinate(u[1]),y=lb(h,p),v=lb(h,m);d=Math.sqrt(Math.min(y,v)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(c=y>v?u[1]:u[0]),this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);const b={};b[Gt(l.geometry)]=!0;for(let x=1,w=o.length;x<w;++x){const C=o[x].segment;if(Hu(u[0],C[0])&&Hu(u[1],C[1])||Hu(u[0],C[1])&&Hu(u[1],C[0])){const D=Gt(o[x].geometry);D in b||(b[D]=!0,f[Gt(C)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,l);const u=this.rBush_;u.remove(e),this.updateSegmentIndices_(s,a,o,1);const c={segment:[n[0],t],feature:r,geometry:s,depth:o,index:a};u.insert(ga(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[t,n[1]],feature:r,geometry:s,depth:o,index:a+1};u.insert(ga(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Wn.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new WI(HI.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,r,s,o,a,l,u,c,h,d,f,p;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],p=Gt(f.feature),f.depth&&(p+="-"+f.depth.join("-")),p in t||(t[p]={}),o[1]===0?(t[p].right=f,t[p].index=f.index):o[1]==1&&(t[p].left=f,t[p].index=f.index+1);for(p in t){switch(d=t[p].right,c=t[p].left,u=t[p].index,h=u-1,c!==void 0?f=c:f=d,h<0&&(h=0),a=f.geometry,s=a.getCoordinates(),r=s,n=!1,a.getType()){case"MultiLineString":s[f.depth[0]].length>2&&(s[f.depth[0]].splice(u,1),n=!0);break;case"LineString":s.length>2&&(s.splice(u,1),n=!0);break;case"MultiPolygon":r=r[f.depth[1]];case"Polygon":r=r[f.depth[0]],r.length>4&&(u==r.length-1&&(u=0),r.splice(u,1),n=!0,u===0&&(r.pop(),r.push(r[0]),h=r.length-1));break}if(n){this.setGeometryCoordinates_(a,s);const m=[];if(c!==void 0&&(this.rBush_.remove(c),m.push(c.segment[0])),d!==void 0&&(this.rBush_.remove(d),m.push(d.segment[1])),c!==void 0&&d!==void 0){const y={depth:f.depth,feature:f.feature,geometry:f.geometry,index:h,segment:m};this.rBush_.insert(ga(y.segment),y)}this.updateSegmentIndices_(a,u,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(n===void 0||s.depth===void 0||ad(s.depth,n))&&s.index>t&&(s.index+=r)})}}function Pyt(i,e){return i.index-e.index}function Abe(i,e,t){const n=e.geometry;if(n.getType()==="Circle"){let s=n;if(e.index===_E){const o=lb(s.getCenter(),Os(i)),a=Math.sqrt(o)-s.getRadius();return a*a}}const r=Os(i);return M_[0]=Os(e.segment[0]),M_[1]=Os(e.segment[1]),xnt(r,M_)}function Rbe(i,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===_E)return B0(n.getClosestPoint(Os(i)));const r=Os(i);return M_[0]=Os(e.segment[0]),M_[1]=Os(e.segment[1]),B0(AAe(r,M_))}function Fyt(){const i=mRe();return function(e,t){return i.Point}}const IT={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class OT extends Zl{constructor(e,t){super(e),this.feature=t}}function Nyt(i,e){const t=[];for(let n=0;n<e.length;++n){const s=e[n].getGeometry();CLe(i,s,t)}return t}function PT(i,e){return df(i[0],i[1],e[0],e[1])}function a_(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function FT(i,e,t){let n,r;e<t?(n=e,r=t):(n=t,r=e);const s=Math.ceil(n),o=Math.floor(r);if(s>o){const l=l_(i,n),u=l_(i,r);return PT(l,u)}let a=0;if(n<s){const l=l_(i,n),u=a_(i,s);a+=PT(l,u)}if(o<r){const l=a_(i,o),u=l_(i,r);a+=PT(l,u)}for(let l=s;l<o-1;++l){const u=a_(i,l),c=a_(i,l+1);a+=PT(u,c)}return a}function CLe(i,e,t){if(e instanceof js){NT(i,e.getCoordinates(),!1,t);return}if(e instanceof Lu){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r)NT(i,n[r],!1,t);return}if(e instanceof Io){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r)NT(i,n[r],!0,t);return}if(e instanceof nh){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length;a<l;++a)NT(i,o[a],!0,t)}return}if(e instanceof ba){const n=e.getGeometries();for(let r=0;r<n.length;++r)CLe(i,n[r],t);return}}const XI={index:-1,endIndex:NaN};function $yt(i,e,t,n){const r=i[0],s=i[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const d=e.targets[h],f=d.coordinates;let p=1/0,m;for(let y=0;y<f.length-1;++y){const v=f[y],b=f[y+1],x=SLe(r,s,v,b);x.squaredDistance<p&&(p=x.squaredDistance,m=y+x.along)}p<o&&(o=p,d.ring&&e.targetIndex===h&&(d.endIndex>d.startIndex?m<d.startIndex&&(m+=f.length):d.endIndex<d.startIndex&&m>d.startIndex&&(m-=f.length)),l=m,a=h)}const u=e.targets[a];let c=u.ring;if(e.targetIndex===a&&c){const h=l_(u.coordinates,l),d=t.getPixelFromCoordinate(h);LR(d,e.startPx)>n&&(c=!1)}if(c){const h=u.coordinates,d=h.length,f=u.startIndex,p=l;if(f<p){const m=FT(h,f,p);FT(h,f,p-d)<m&&(l-=d)}else{const m=FT(h,f,p);FT(h,f,p+d)<m&&(l+=d)}}return XI.index=a,XI.endIndex=l,XI}function NT(i,e,t,n){const r=i[0],s=i[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],u=e[o+1],c=SLe(r,s,l,u);if(c.squaredDistance===0){const h=o+c.along;n.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const YI={along:0,squaredDistance:0};function SLe(i,e,t,n){const r=t[0],s=t[1],o=n[0],a=n[1],l=o-r,u=a-s;let c=0,h=r,d=s;return(l!==0||u!==0)&&(c=Fi(((i-r)*l+(e-s)*u)/(l*l+u*u),0,1),h+=l*c,d+=u*c),YI.along=c,YI.squaredDistance=Yb(df(i,e,h,d),10),YI}function l_(i,e){const t=i.length;let n=Math.floor(e);const r=e-n;n>=t?n-=t:n<0&&(n+=t);let s=n+1;s>=t&&(s-=t);const o=i[n],a=o[0],l=o[1],u=i[s],c=u[0]-a,h=u[1]-l;return[a+c*r,l+h*r]}class Byt extends uy{constructor(e){const t=e;t.stopDown||(t.stopDown=Hb),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Gyt(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:eb,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const r=this.mode_;if(r==="Circle")n=function(s,o,a){const l=o||new ZD([NaN,NaN]),u=Os(s[0]),c=lb(u,Os(s[s.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let s;r==="Point"?s=ps:r==="LineString"?s=js:r==="Polygon"&&(s=Io),n=function(o,a,l){return a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new cy({source:new hy({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:jyt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:g4,this.freehandCondition_,e.freehand?this.freehandCondition_=GR:this.freehandCondition_=e.freehandCondition?e.freehandCondition:ORe,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(zP.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=GR:t=e:t=qst,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===qt.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Wn.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Wn.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Wn.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Wn.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===Wn.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Wn.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Wn.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Wd(Wn.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=ga([n,r]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=Nyt(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,r=e.startIndex<=t;n===r?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),n=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),n=r-s+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const r=[];if(t<n){const s=Math.ceil(t);let o=Math.floor(n);o===n&&(o-=1);for(let a=s;a<=o;++a)r.push(a_(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(n);o===n&&(o+=1);for(let a=s;a>=o;--a)r.push(a_(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&LR(t.startPx,e.pixel)<this.snapTolerance_)return;const n=$yt(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,n.endIndex)}t.targetIndex=n.index;const r=t.targets[t.targetIndex];r.endIndex=n.endIndex;const s=l_(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,r=t[0]-n[0],s=t[1]-n[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")n=!0;else if(o==="Circle")n=this.sketchCoords_.length===2;else if(o==="LineString")r=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let l=0,u=s.length;l<u;l++){const c=s[l],h=a.getPixelFromCoordinate(c),d=e[0]-h[0],f=e[1]-h[1],p=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(d*d+f*f)<=p,n){this.finishCoordinate_=c;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Kr(new ps(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Kr);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new js(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=YE(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Kr(new js(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Kr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new OT(IT.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=YE(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let r,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,n)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,n)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const n=e.getGeometry(),r=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,r)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,r),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new ud([t])):this.type_==="MultiLineString"?e.setGeometry(new Lu([t])):this.type_==="MultiPolygon"&&e.setGeometry(new nh([t])),this.dispatchEvent(new OT(IT.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new OT(IT.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let r;if(t==="LineString"||t==="Circle")r=this.sketchCoords_;else if(t==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Kr(new ps(r)),this.updateSketchFeatures_(),this.dispatchEvent(new OT(IT.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function jyt(){const i=mRe();return function(e,t){return i[e.getGeometry().getType()]}}function zyt(){return function(i,e,t){const n=ga([i[0],i[i.length-1]].map(function(s){return Os(s)})),r=[[$0(n),Kb(n),Jb(n),uc(n),$0(n)]];return e?e.setCoordinates(r):e=new Io(r),e}}function Gyt(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const Uyt=Byt;let TLe=null;function mL(i){TLe=i;const e=Object.keys(i.defs),t=e.length;let n,r;for(n=0;n<t;++n){const s=e[n];if(!Lt(s)){const o=i.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),OAe(new sb({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(n=0;n<t;++n){const s=e[n],o=Lt(s);for(r=0;r<t;++r){const a=e[r],l=Lt(a);if(!wAe(s,a))if(i.defs[s]===i.defs[a])LP([o,l]);else{const u=i(s,a);Snt(o,l,jve(o,l,u.forward),jve(l,o,u.inverse))}}}}let qyt=async function(i){const e=await fetch(`https://epsg.io/${i}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};async function Vyt(i){typeof i=="string"&&(i=parseInt(i.split(":").pop(),10));const e=TLe;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const t="EPSG:"+i;return e.defs(t)||(e.defs(t,await qyt(i)),mL(e)),Lt(t)}const S$={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};function kbe(i,e,t,n){const r=new CustomEvent(e,{detail:{originalEvent:t,geoJSON:n}});i.dispatchEvent(r)}function ALe(i,e,t,n=!1,r=!1){const s=n?[i.feature]:i.features;r&&e.getSource().clear();const o=e.getSource().getFeatures();if(!e.get("multipleFeatures")&&(o.length||s.length>1))return console.error("Multiple features detected!");s.forEach(u=>{const c=u.getGeometry();if(c instanceof js){const d=DAe(c,{radius:6378137,projection:"EPSG:3857"});u.set("measure",d)}else if(c instanceof Io){const d=LAe(c,{radius:6378137,projection:"EPSG:3857"});u.set("measure",d)}const h=Gt(u);u.set("id",h),u.setId(h)}),!n&&s.length&&(e.getSource().addFeatures(s),t.map.getView().fit(e.getSource().getExtent(),{duration:750}));const a=new SC,l=JSON.parse(a.writeFeatures(s,S$));(n||r)&&kbe(t,"drawend",i,l),kbe(t,"addfeatures",i,l)}function Hyt(i,e,t,n=!1){try{const r=Wyt(i);if(!r){console.error("Unsupported format or invalid data");return}const s=r.readFeatures(i,S$);ALe({features:s},e,t,!1,n)}catch(r){console.error("Error parsing data:",r)}}function Wyt(i){return Xyt(i)?new SC:Yyt(i)?new vke({extractStyles:!1}):Zyt(i)?new Cke:null}function Xyt(i){try{const e=JSON.parse(i);return e.type==="FeatureCollection"||e.type==="Feature"}catch{return!1}}function Yyt(i){return i.includes("<kml")&&i.includes("</kml>")}function Zyt(i){try{const e=JSON.parse(i);return e.type==="Topology"&&e.objects}catch{return!1}}async function Kyt(i){return mL(ea),await Vyt(i)}function Jyt(i,e){ea.defs(i,e),mL(ea)}function Dbe(i){i.setRotation(i.getRotation())}function Qyt(i,e,t){const n=Object.assign({},t);if(i.interactions[n.id])throw Error(`Interaction with id: ${n.id} already exists.`);n.modify=typeof n.modify=="boolean"?n.modify:!0;const r=e.getSource();n.type==="Box"&&(n.geometryFunction=zyt(),n.type="Circle");const s=new Uyt({...n,source:r});n.active===!1&&s.setActive(!1),s.on("drawend",l=>{e.get("isDrawingEnabled")&&ALe(l,e,i,!0)}),i.map.addInteraction(s),i.interactions[n.id]=s;const o=new Oyt({source:r});o.setActive(n.modify),i.map.addInteraction(o),i.interactions[`${n.id}_modify`]=o;const a=()=>{i.getLayerById(e.get("id"))||(i.removeInteraction(n.id),i.removeInteraction(`${n.id}_modify`),i.map.getLayerGroup().un("change",a))};i.map.getLayerGroup().on("change",a)}var evt=Object.defineProperty,tvt=Object.getOwnPropertyDescriptor,ivt=(i,e,t,n)=>{for(var r=n>1?void 0:n?tvt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&evt(e,t,r),r};class RLe extends NN{constructor(){super(),this.propertyTransform=(e,t)=>e}renderContent(e){UNe(this.hasTemplate("properties")?tt`${this.renderTemplate("properties",e.getProperties(),"tooltip-1")}`:tt` <style>
              ul {
                margin: 0;
                padding: 15px 15px 15px 30px;
                background: #0008;
                border-radius: 15px;
                color: white;
                max-width: 250px;
                font-size: small;
              }
              span {
                font-weight: bold;
              }
            </style>
            <ul>
              ${Object.entries(e.getProperties()).map(([t,n])=>this.propertyTransform({key:t,value:n},e)).filter(t=>t).map(({key:t,value:n})=>tt`<li><span>${t}</span>: ${n}</li>`)}
            </ul>`,this.shadowRoot)}}ivt([$t()],RLe.prototype,"propertyTransform",2);customElements.define("eox-map-tooltip",RLe);class nvt{constructor(e,t,n){var d,f;this.eoxMap=e,this.selectLayer=t,this.options=n,this.active=n.active||t.getVisible(),this.panIn=n.panIn||!1;const r=this.eoxMap.map.getOverlayById("eox-map-tooltip");let s;this.selectedFids=[],r?(this.tooltip=r.getElement(),s=r):(this.tooltip=this.eoxMap.querySelector("eox-map-tooltip")||((d=n.overlay)==null?void 0:d.element),this.tooltip&&(s=new ELe({element:this.tooltip,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...n.overlay}),this.eoxMap.map.addOverlay(s)));const o=()=>{s&&n.condition==="pointermove"&&s.setPosition(void 0)};e.map.on("change:target",p=>{var m,y;(m=p.oldValue)==null||m.removeEventListener("pointerleave",o),(y=p.target.getTargetElement())==null||y.addEventListener("pointerleave",o)}),(f=e.map.getTargetElement())==null||f.addEventListener("pointerleave",o);let a;if(this.options.layer)a=this.options.layer;else{const p=this.selectLayer.get("_jsonDefinition");a={...p,style:n.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:p.type}}}a.renderMode="vector",delete a.interactions,this.selectStyleLayer=_b(e,a),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const l=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((p,m)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(p))?l(p,m):null);const u=p=>{this.panIn&&this.eoxMap.map.getView().fit(p.getGeometry().getExtent(),{duration:750})},c=p=>{if(!this.active)return;const m=this.eoxMap.map.getView().getZoom();p.dragging||!this.active||m<this.selectLayer.getMinZoom()||m>this.selectLayer.getMaxZoom()||this.selectLayer.getFeatures(p.pixel).then(y=>{const v=y.length?y[0]:null,b=v?[this.getId(v)]:[],x=this.selectedFids[0]!==b[0];if(this.selectedFids=b,x&&(this.selectStyleLayer.changed(),v&&u(v)),s){const C=p.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",D=p.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";s.setPositioning(`${D}-${C}`),s.setPosition(v?p.coordinate:null),v&&this.tooltip.renderContent&&this.tooltip.renderContent(v)}const w=new CustomEvent("select",{detail:{id:n.id,originalEvent:p,feature:v}});this.eoxMap.dispatchEvent(w)})};this.eoxMap.map.on(n.condition||"click",c),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const p=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(p),this.setActive(p)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener);const h=()=>{var p,m,y,v;e.getLayerById(t.get("id"))?((p=e.selectInteractions[n.id])==null||p.setActive(!0),(m=this.selectStyleLayer)==null||m.setMap(this.eoxMap.map),s==null||s.setMap(this.eoxMap.map)):((y=e.selectInteractions[n.id])==null||y.setActive(!1),(v=this.selectStyleLayer)==null||v.setMap(null),s==null||s.setMap(null))};e.map.getLayerGroup().on("change",h)}setActive(e){this.active=e}highlightById(e){this.selectedFids=e,this.selectStyleLayer.changed()}remove(){this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener)}getId(e){if(this.options.idProperty)return e.get(this.options.idProperty);if(e.getId()!==void 0)return e.getId();if(e.get("id")!==void 0)return e.get("id");throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function rvt(i,e,t){if(i.interactions[t.id])throw Error(`Interaction with id: ${t.id} already exists.`);return i.selectInteractions[t.id]=new nvt(i,e,t),i.selectInteractions[t.id]}function svt(i){var t;let e;if((t=i.source)!=null&&t.tileGrid){if(i.source.tileGrid)if(i.source.type==="WMTS"){const r=Lt("EPSG:3857").getExtent(),s=Di(r)/128,o=new Array(19),a=new Array(19);for(let l=0;l<19;++l)o[l]=s/Math.pow(2,l),a[l]=l;e=new CDe({resolutions:o,origin:uc(r),projection:i.source.tileGrid.projection||"EPSG:3857",matrixIds:a,...i.source.tileGrid})}else e=Kg({...i.source.tileGrid});return e}}const ovt={GeoJSON:SC,MVT:xke},avt={Group:Ig,Image:K4,Tile:J4,Vector:cy,VectorTile:bDe},lvt={ImageWMS:hLe,OSM:yLe,Tile:u1,TileWMS:xLe,Vector:hy,VectorTile:C$,WMTS:wLe,XYZ:c1};function _b(i,e,t=!0){var c,h;e=JSON.parse(JSON.stringify(e));const n={...window.eoxMapAdvancedOlFormats,...ovt},r={...window.eoxMapAdvancedOlLayers,...avt},s={...window.eoxMapAdvancedOlSources,...lvt},o=r[e.type],a=s[(c=e.source)==null?void 0:c.type];if(!o)throw window.eoxMapAdvancedOlLayers?new Error(`Layer type ${e.type} not supported!`):new Error(`Layer type ${e.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);if(e.source&&!a)throw window.eoxMapAdvancedOlSources?new Error(`Source type ${e.source.type} not supported!`):new Error(`Source type ${e.source.type} not created! Forgot to import advanced layers & sources plugin from @eox/map/dist/eox-map-advanced-layers-and-sources.js?`);const l=svt(e),u=new o({...e,...e.source&&{source:new a({...e.source,...e.source.format&&e.source.type!=="WMTS"&&{format:new n[typeof e.source.format=="object"?e.source.format.type:e.source.format]({...typeof e.source.format=="object"&&{...e.source.format}})},...e.source.tileGrid&&{tileGrid:l},...e.source.projection&&{projection:Lt(e.source.projection)}})},...e.type==="Group"&&{layers:[]},...e.properties,style:void 0});if(u.set("_jsonDefinition",e,!0),e.type==="Group"){const d=e.layers.reverse().map(f=>_b(i,f));d.forEach(f=>f.set("_group",u,!0)),u.setLayers(new qa(d))}if(e.style&&u.setStyle(e.style),t&&((h=e.interactions)!=null&&h.length))for(let d=0,f=e.interactions.length;d<f;d++){const p=e.interactions[d];kLe(i,u,p)}return LLe(u,e),u}function kLe(i,e,t){t.type==="draw"?Qyt(i,e,t.options):t.type==="select"&&rvt(i,e,t.options)}function DLe(i,e,t){var s,o,a,l;const n=t.get("_jsonDefinition");if(e.type!==n.type||((s=e.source)==null?void 0:s.type)!==((o=n.source)==null?void 0:o.type))throw new Error("Layers are not compatible to be updated");const r=_b(i,e,!1);if(JSON.stringify(e.source)!==JSON.stringify(n.source)&&t.setSource(r.getSource()),["Vector","VectorTile"].includes(e.type)&&JSON.stringify(e.style)!==JSON.stringify(n.style)&&t.setStyle(r.getStyle()),JSON.stringify(e.properties)!==JSON.stringify(n.properties)&&t.setProperties(e.properties),e.visible!==n.visible&&t.setVisible(e.visible),e.opacity!==n.opacity&&t.setOpacity(e.opacity),JSON.stringify(e.interactions)!==JSON.stringify(n.interactions)&&((a=n.interactions)==null||a.forEach(u=>{const c=e.interactions.find(h=>h.type===u.type);c?c.type==="draw"?(i.interactions[c.options.id].setActive(c.options.active),i.interactions[`${c.options.id}_modify`].setActive(c.options.modify)):i.selectInteractions[c.options.id].setActive(c.options.active):i.removeInteraction(u.options.id)}),(l=e.interactions)==null||l.forEach(u=>{n.interactions.find(h=>h.type===u.type)||kLe(i,t,u)})),e.type==="Group"){const u=e.layers.map(h=>{var d;return(d=h.properties)==null?void 0:d.id}),c=t.getLayers();c.forEach(h=>{u.includes(h.get("id"))||c.remove(h)}),e.layers.forEach(h=>{const d=h.properties.id;if(c.getArray().map(f=>f.get("id")).includes(d))DLe(i,h,i.getLayerById(d));else{const f=_b(i,h);c.push(f)}}),c.getArray().sort((h,d)=>u.indexOf(h.get("id"))-u.indexOf(d.get("id"))),c.changed()}return LLe(t,e),t.set("_jsonDefinition",e,!0),t}const uvt=(i,e)=>e?[...e].reverse().map(t=>_b(i,t)):[];function LLe(i,e){i.on("change:opacity",()=>{e.opacity=i.getOpacity()}),i.on("change:visible",()=>{e.visible=i.getVisible()}),i.on("change:zIndex",()=>{e.zIndex=i.getZIndex()}),i.on("propertychange",t=>{t.key!=="map"&&(e.properties[t.key]=t.target.get(t.key))})}function ZI(i,e){return MLe(i.map.getLayers().getArray()).find(n=>n.get("id")===e)}function MLe(i){const e=[];e.push(...i);let t=e.filter(n=>n instanceof Ig);for(;t.length;){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r].getLayers().getArray();e.push(...o),n.push(...o.filter(a=>a instanceof Ig))}t=n}return e}function Lbe(i){if(i){const e=i;return!Hu(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90?Tnt(e):e}return[0,0]}const Mbe=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Ibe={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class cvt extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const n=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof n=="string"?document.createTextNode(n):n;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(qt.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${td} ${oy}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Obe(t))if(Pbe(t))dvt(t);else{let n;this.source_?n=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:n=e.getTargetElement(),this.keys_?hvt(n):ILe(n)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=Pbe(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(hb(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Ibe.ENTERFULLSCREEN)):(hb(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Ibe.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(qs.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(qs.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let n=0,r=e.length;n<r;++n)gr(e[n]);e.length=0;const t=this.getMap();if(t){const n=t.getOwnerDocument();Obe(n)?this.element.classList.remove(Kve):this.element.classList.add(Kve);for(let r=0,s=Mbe.length;r<s;++r)e.push(Wi(n,Mbe[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Obe(i){const e=i.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&i.fullscreenEnabled)}function Pbe(i){return!!(i.webkitIsFullScreen||i.fullscreenElement)}function ILe(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}function hvt(i){i.webkitRequestFullscreen?i.webkitRequestFullscreen():ILe(i)}function dvt(i){i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()}const fvt=cvt,KI="projection",Fbe="coordinateFormat";class pvt extends ih{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(KI,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Fbe)}getProjection(){return this.get(KI)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(Wi(t,Sh.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Wi(t,Sh.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(Fbe,e)}setProjection(e){this.set(KI,Lt(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Nf(this.mapProjection_,s):this.transform_=zD}const r=this.getMap().getCoordinateFromPixelInternal(e);if(r){if(this.transform_(r,r),this.wrapX_){const o=this.getProjection()||this.mapProjection_;BD(r,o)}const s=this.getCoordinateFormat();s?t=s(r):t=r.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const gvt=pvt,JI=.75,$T=.1;class mvt extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",n=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const s=e.label!==void 0?e.label:"›";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=n,a.appendChild(o),a.addEventListener(qt.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new BRe({view:e.view,controls:new qa,interactions:new qa});this.ovmap_=l,e.layers&&e.layers.forEach(function(b){l.addLayer(b)});const u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new ELe({position:[0,0],positioning:"center-center",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const c=t+" "+td+" "+oy+(this.collapsed_&&this.collapsible_?" "+FR:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.ovmapDiv_),h.appendChild(a);const d=this,f=this.boxOverlay_,p=this.boxOverlay_.getElement(),m=function(b){return{clientX:b.clientX,clientY:b.clientY}},y=function(b){const x=m(b),w=l.getEventCoordinateInternal(x);f.setPosition(w)},v=function(b){const x=l.getEventCoordinateInternal(b);d.getMap().getView().setCenterInternal(x),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v)};p.addEventListener("mousedown",function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",v)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const n=t.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Wi(e,N0.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===qs.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&(e.key===qs.TARGET||e.key===qs.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new Yu({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ou.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(ou.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),s=e.getView().calculateExtentInternal(n);if(this.viewExtent_&&rc(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),u=t.getPixelFromCoordinateInternal(uc(s)),c=t.getPixelFromCoordinateInternal(Kb(s)),h=Math.abs(u[0]-c[0]),d=Math.abs(u[1]-c[1]),f=o[0],p=o[1];h<f*$T||d<p*$T||h>f*JI||d>p*JI?this.resetExtent_():ya(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,n=e.getSize(),s=e.getView().calculateExtentInternal(n),o=t.getView(),a=Math.log(JI/$T)/Math.LN2,l=1/(Math.pow(2,a/2)*$T);M5(s,l),o.fitInternal(IR(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,n=e.getView();t.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),r=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-r.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),u=r.getCenterInternal(),c=r.getResolution(),h=s.getResolution(),d=n[0]*c/h,f=n[1]*c/h;if(a.setPosition(u),l){l.style.width=d+"px",l.style.height=f+"px";const p="rotate("+o+"rad)";l.style.transform=p}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=ib(this.ovmap_,xh.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(FR),this.collapsed_?hb(this.collapseLabel_,this.label_):hb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const yvt=mvt,QI="units",vvt=[1,2,5],pw=25.4/.28;class _vt extends ih{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+td,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(QI,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(QI)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(QI,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=ub(n,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||pw)/pw,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||pw)/pw:void 0;let u=a*o,c="";if(r=="degrees"){const x=rb.degrees;u*=x,u<x/60?(c="″",o*=3600):u<x?(c="′",o*=60):c="°"}else if(r=="imperial")u<.9144?(c="in",o/=.0254):u<1609.344?(c="ft",o/=.3048):(c="mi",o/=1609.344);else if(r=="nautical")o/=1852,c="NM";else if(r=="metric")u<1e-6?(c="nm",o*=1e9):u<.001?(c="μm",o*=1e6):u<1?(c="mm",o*=1e3):u<1e3?c="m":(c="km",o/=1e3);else if(r=="us")u<.9144?(c="in",o*=39.37):u<1609.344?(c="ft",o/=.30480061):(c="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,p,m,y,v;for(;;){p=Math.floor(h/3);const x=Math.pow(10,p);if(d=vvt[(h%3+3)%3]*x,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=m,f=y,p=v;break}else if(f>=a)break;m=d,y=f,v=p,++h}const b=this.scaleBar_?this.createScaleBar(f,d,c):d.toFixed(p<0?-p:0)+" "+c;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let c=0;c<o;++c){const h=c%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(c%2===0||o===2?this.createStepText(c,e,!1,t,n):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${n?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=ub(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||pw,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const bvt=_vt,gw={VERTICAL:0,HORIZONTAL:1};class xvt extends ih{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=gw.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=t+"-thumb "+td;const r=this.element;r.className=t+" "+td+" "+oy,r.appendChild(n),r.addEventListener(Sh.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),r.addEventListener(Sh.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),r.addEventListener(Sh.POINTERUP,this.handleDraggerEnd_.bind(this),!1),r.addEventListener(qt.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(qt.CLICK,Jit,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,n=e.offsetHeight;if(t===0&&n===0)return this.sliderInitialized_=!1;const r=getComputedStyle(e);t-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>n?(this.direction_=gw.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=gw.VERTICAL,this.heightLimit_=n-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),n=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(n),s=t.getConstrainedZoom(t.getZoomForResolution(r));t.animateInternal({zoom:s,duration:this.duration_,easing:ny})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const n=this.handleDraggerDrag_,r=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Wi(s,Sh.POINTERMOVE,n,this),Wi(s,Sh.POINTERUP,r,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,n=e.clientY-this.startY_,r=this.getRelativePosition_(t,n);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(gr),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),n=this.element.firstElementChild;this.direction_==gw.HORIZONTAL?n.style.left=this.widthLimit_*t+"px":n.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let n;return this.direction_===gw.HORIZONTAL?n=e/this.widthLimit_:n=t/this.heightLimit_,Fi(n,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return Fi(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const wvt=xvt;class Evt extends ih{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",n=e.label!==void 0?e.label:"E",r=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof n=="string"?document.createTextNode(n):n),s.addEventListener(qt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+td+" "+oy,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),n=this.extent?_u(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(IR(n))}}const Cvt=Evt,Svt=Object.freeze(Object.defineProperty({__proto__:null,Attribution:RRe,Control:ih,FullScreen:fvt,MousePosition:gvt,OverviewMap:yvt,Rotate:kRe,ScaleLine:bvt,Zoom:DRe,ZoomSlider:wvt,ZoomToExtent:Cvt,defaults:LRe},Symbol.toStringTag,{value:"Module"}));class Tvt extends ih{constructor(e){const t=e||{},n=document.createElement("div");n.className="geolocation ol-unselectable ol-control";const r=document.createElement("button");r.title="Show your location";const s=document.createElement("img");if(t.buttonIcon)s.src=t.buttonIcon;else{const o=`url(
        "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-6 -6 36 36'%3E %3Cpath d='M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z' /%3E%3C/svg%3E"
      )`;s.style.background="var(--ol-subtle-foreground-color)",s.style.maskImage=o,s.style.webkitMaskImage=o}s.style.height="100%",s.style.width="100%",s.style.position="absolute",s.style.pointerEvents="none",n.appendChild(s),n.appendChild(r),super({element:n}),this._centerWhenReady=t.centerWhenReady,this._highAccuracy=t.highAccuracy,this._trackAccuracy=t.trackAccuracy,this._trackHeading=t.trackHeading,this._positionFeature=new Kr({geometry:new ps([NaN,NaN]),heading:0}),this._source=new hy({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new Kr,this._accuracyFeature.setStyle(new Do({fill:new Zc({color:"rgba(0, 0, 0, 0.2)"}),stroke:new ec({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new cy({source:this._source}),t.style&&this._layer.setStyle(t.style),r.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(e){this._layer.setMap(e),super.setMap(e),e&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((e,t)=>{const n=this.getMap();n&&(this._geolocation=new Iyt({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:n.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",r=>{n.getView().setCenter(r.target.getPosition())}),this._geolocation.on("error",function(r){t(r)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",r=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",r.target.getHeading())}),this._geolocation.on("change:position",()=>{const r=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(r||null),e(r)}),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())})})}getElement(){return this.element}async centerOnPosition(){var e,t;try{await this.initGeolocation();const n=(e=this._geolocation)==null?void 0:e.getPosition();n&&((t=this.getMap())==null||t.getView().setCenter(n))}catch(n){console.error(n)}}}const Avt={...Svt,Geolocation:Tvt};function Rvt(i,e,t,n){e&&e[t]?JSON.stringify(e[t])!==JSON.stringify(n)&&(i.removeControl(t),Nbe(i,t,n)):Nbe(i,t,n)}function Nbe(i,e,t){const n=Object.assign({},t);t&&t.layers&&(n.layers=uvt(i,t.layers));const r=new Avt[e](n);i.map.addControl(r),i.mapControls[e]=r}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kvt=(i,e,t)=>{for(const n of e)if(n[0]===i)return(0,n[1])();return t==null?void 0:t()};var Dvt=Object.defineProperty,Lvt=Object.getOwnPropertyDescriptor,OLe=(i,e,t,n)=>{for(var r=n>1?void 0:n?Lvt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&Dvt(e,t,r),r};class T$ extends NN{constructor(){super(...arguments),this.value=50,this.enabled="true"}render(){return tt`
      <style>
        :host {
          display: block;
        }
        /* Inspired by https://www.codehim.com/html5-css3/html-css-image-comparison-slider/ */
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: 0.2rem;

          position: relative;
          height: 100%;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          box-shadow: 0 0 5px black;
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          background-color: var(--thumb-bgc);
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          box-shadow: 0 0 5px black;
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
      </style>
      ${kvt(this.enabled,[["first",()=>tt`<slot name="first"></slot>`],["second",()=>tt`<slot name="second"></slot>`]],()=>tt`
          <div class="eox-map-compare">
            <div class="eox-map-compare__first">
              <slot name="first"></slot>
            </div>
            <div class="eox-map-compare__second">
              <slot name="second"></slot>
            </div>
            <input
              type="range"
              class="eox-map-compare__range"
              min="0"
              max="100"
              value=${this.value}
              @input=${e=>this.value=parseInt(e.target.value)}
            />
          </div>
        `)}
    `}}OLe([$t()],T$.prototype,"value",2);OLe([$t({type:String})],T$.prototype,"enabled",2);customElements.define("eox-map-compare",T$);function Mvt(i,e,t=.001){let n=!0;for(let r=i.length-1;r>=0;--r)if(!Ivt(i[r],e[r],t)){n=!1;break}return n}function Ivt(i,e,t=.001){return Math.abs(i-e)<t}function $be(i,e=!1){e?(i.addInteraction(new UR({condition:l_e})),"ontouchstart"in window||navigator.maxTouchPoints>0?i.addInteraction(new pE({condition:function(n){return this.getPointerCount()===2||l_e(n)}})):i.addInteraction(new pE)):(i.addInteraction(new UR),i.addInteraction(new pE))}function Ovt(i){i.getInteractions().getArray().forEach(e=>{(e instanceof UR||e instanceof pE)&&i.removeInteraction(e)})}var Pvt=Object.defineProperty,Fvt=Object.getOwnPropertyDescriptor,rh=(i,e,t,n)=>{for(var r=n>1?void 0:n?Fvt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&Pvt(e,t,r),r};let sc=class extends Yn{constructor(){super(...arguments),this._center=[0,0],this._zoom=0,this._animationOptions={},this.map=new BRe({controls:[],layers:[],view:new Yu({center:[0,0],zoom:0,projection:this.projection})}),this.interactions={},this.selectInteractions={},this.mapControls={},this.addOrUpdateLayer=i=>{var r;i.interactions||(i.interactions=[]);const e=(r=i.properties)==null?void 0:r.id,t=e?ZI(this,e):!1;let n;return t?(DLe(this,i,t),n=t):(n=_b(this,i),this.map.addLayer(n)),n},this.removeInteraction=i=>{this.map.removeInteraction(this.interactions[i]),delete this.interactions[i],this.interactions[`${i}_modify`]&&(this.map.removeInteraction(this.interactions[`${i}_modify`]),delete this.interactions[`${i}_modify`])},this.removeSelect=i=>{this.selectInteractions[i].remove(),delete this.selectInteractions[i]},this.removeControl=i=>{this.map.removeControl(this.mapControls[i]),delete this.mapControls[i]},this.getLayerById=i=>ZI(this,i),this.parseFeature=i=>new SC().writeFeaturesObject(i,S$),this.parseTextToFeature=(i,e,t=!1)=>{Hyt(i,e,this,t)},this.registerProjectionFromCode=Kyt,this.registerProjection=Jyt,this.getFlatLayersArray=MLe}set center(i){const e=(i==null?void 0:i.length)&&Mvt(i,this.map.getView().getCenter());if(i&&!e){if(!this.projection||this.projection==="EPSG:3857"){const t=Lbe(i);this._center=t}else this._center=i;this._animateToState()}}get center(){return this._center}set zoom(i){i!==void 0&&(this._zoom=i,this._animateToState())}get zoom(){return this._zoom}set zoomExtent(i){if(!i||!i.length){this._zoomExtent=void 0;return}const e=this.map.getView();Dbe(e),setTimeout(()=>{e.fit(i,this.animationOptions)},0),this._zoomExtent=i}set controls(i){const e=this._controls,t=i;if(e){const n=Object.keys(e),r=Object.keys(t);for(let s=0,o=n.length;s<o;s++){const a=n[s];r.includes(a)||this.removeControl(a)}}if(t){const n=Object.keys(i);for(let r=0,s=n.length;r<s;r++){const o=n[r];Rvt(this,e,o,i[o])}}this._controls=t}get controls(){return this._controls}set layers(i){const e=this._layers,t=JSON.parse(JSON.stringify(i)).reverse();e&&e.forEach(r=>{var s,o,a;if(!((s=r.properties)!=null&&s.id)||!t.find(l=>l.properties.id===r.properties.id)){const l=ZI(this,(o=r.properties)==null?void 0:o.id);(a=l.get("_jsonDefinition").interactions)==null||a.forEach(c=>{c.type==="select"?this.removeSelect(c.options.id):this.removeInteraction(c.options.id)}),this.map.removeLayer(l)}}),t.forEach(r=>{this.addOrUpdateLayer(r)});const n=t.map(r=>{var s;return(s=r.properties)==null?void 0:s.id});this.map.getLayers().getArray().sort((r,s)=>n.indexOf(r.get("id"))-n.indexOf(s.get("id"))),this._layers=t}get layers(){return this._layers}set preventScroll(i){i?(Ovt(this.map),$be(this.map,!0)):$be(this.map),this._preventScroll=i}get preventScroll(){return this._preventScroll}set config(i){var e,t,n,r;this._config=i,(i==null?void 0:i.animationOptions)!==void 0&&(this.animationOptions=i.animationOptions),this.projection=((e=i==null?void 0:i.view)==null?void 0:e.projection)||"EPSG:3857",this.layers=(i==null?void 0:i.layers)||[],this.controls=(i==null?void 0:i.controls)||{},this.preventScroll===void 0&&(this.preventScroll=i==null?void 0:i.preventScroll),this.zoom=((t=i==null?void 0:i.view)==null?void 0:t.zoom)||0,this.center=((n=i==null?void 0:i.view)==null?void 0:n.center)||[0,0],this.zoomExtent=(r=i==null?void 0:i.view)==null?void 0:r.zoomExtent}set animationOptions(i){this._animationOptions=i}get animationOptions(){return this._animationOptions}get config(){return this._config}get projection(){return this._projection}set projection(i){const e=this.map.getView();if(i&&Lt(i)&&i!==e.getProjection().getCode()){const t=Qb(e.getCenter(),e.getProjection().getCode(),i),n=Lt(i),r=e.getResolution(),s=e.getProjection().getMetersPerUnit(),o=n.getMetersPerUnit(),a=ub(e.getProjection(),1/s,e.getCenter(),"m")*s,l=ub(n,1/o,t,"m")*o,u=r*a/l,c=new Yu({zoom:e.getZoom(),center:t,resolution:u,rotation:e.getRotation(),projection:i});["change:center","change:resolution","change:rotation","propertychange"].forEach(d=>{const f=e.getListeners(d);if(f!=null&&f.length)for(let p=f.length-1;p>=0;p--){const m=f[p];e.un(d,m),c.on(d,m)}}),this.map.setView(c),this.getFlatLayersArray(this.map.getLayers().getArray()).filter(d=>d instanceof cy).forEach(d=>d.getSource().refresh()),this._projection=i,this.center=t}}set sync(i){this._sync=i,i&&setTimeout(()=>{const e=gAe(i);e&&this.map.setView(e.map.getView())})}get sync(){return this._sync}_animateToState(){const i=Object.assign({},this.animationOptions),e=this.map.getView();if(Dbe(e),!i||!Object.keys(i).length){e.setCenter(this.center),e.setZoom(this.zoom);return}i.center=Lbe(this.center),i.zoom=this.zoom,e.animate(i)}render(){return tt`
      <style>
        ${`
      :host {
        display: block;
      }
      .eox-map-tooltip {
        pointer-events: none !important;
      }
    `}
        ${aot}
        ${lot}
      </style>
      <div style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}buffer(i,e){return ql(i,e)}firstUpdated(){this.map.once("change:target",i=>{i.target.getView().setCenter(this.center)}),this.map.setTarget(this.renderRoot.querySelector("div")),this._zoomExtent?this.map.getView().fit(this._zoomExtent,this.animationOptions):this._animateToState(),this.map.on("loadend",()=>{this.dispatchEvent(new CustomEvent("loadend",{detail:this.map}))}),this.dispatchEvent(new CustomEvent("mapmounted",{detail:this.map}))}updated(i){}};rh([$t({attribute:!1,type:Array})],sc.prototype,"center",1);rh([$t({attribute:!1,type:Array})],sc.prototype,"layers",1);rh([$t({attribute:"prevent-scroll",type:Boolean})],sc.prototype,"preventScroll",1);rh([$t({attribute:!1,type:Object})],sc.prototype,"config",1);rh([$t({attribute:"projection",type:String})],sc.prototype,"projection",1);rh([$t()],sc.prototype,"sync",1);rh([Ks()],sc.prototype,"map",2);rh([Ks()],sc.prototype,"interactions",2);rh([Ks()],sc.prototype,"selectInteractions",2);rh([Ks()],sc.prototype,"mapControls",2);sc=rh([ta("eox-map")],sc);window.eoxMapAdvancedOlFormats=Jdt;var al=(i,e,t)=>new Promise((n,r)=>{var s=l=>{try{a(t.next(l))}catch(u){r(u)}},o=l=>{try{a(t.throw(l))}catch(u){r(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(i,e)).next())}),mu=Uint8Array,u_=Uint16Array,Nvt=Int32Array,PLe=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FLe=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$vt=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NLe=function(i,e){for(var t=new u_(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var r=new Nvt(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return{b:t,r}},$Le=NLe(PLe,2),BLe=$Le.b,Bvt=$Le.r;BLe[28]=258,Bvt[258]=28;var jvt=NLe(FLe,0),zvt=jvt.b,gF=new u_(32768);for(Tr=0;Tr<32768;++Tr)jd=(Tr&43690)>>1|(Tr&21845)<<1,jd=(jd&52428)>>2|(jd&13107)<<2,jd=(jd&61680)>>4|(jd&3855)<<4,gF[Tr]=((jd&65280)>>8|(jd&255)<<8)>>1;var jd,Tr,bE=function(i,e,t){for(var n=i.length,r=0,s=new u_(e);r<n;++r)i[r]&&++s[i[r]-1];var o=new u_(e);for(r=1;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new u_(1<<e);var l=15-e;for(r=0;r<n;++r)if(i[r])for(var u=r<<4|i[r],c=e-i[r],h=o[i[r]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[gF[h]>>l]=u}else for(a=new u_(n),r=0;r<n;++r)i[r]&&(a[r]=gF[o[i[r]-1]++]>>15-i[r]);return a},LC=new mu(288);for(Tr=0;Tr<144;++Tr)LC[Tr]=8;var Tr;for(Tr=144;Tr<256;++Tr)LC[Tr]=9;var Tr;for(Tr=256;Tr<280;++Tr)LC[Tr]=7;var Tr;for(Tr=280;Tr<288;++Tr)LC[Tr]=8;var Tr,jLe=new mu(32);for(Tr=0;Tr<32;++Tr)jLe[Tr]=5;var Tr,Gvt=bE(LC,9,1),Uvt=bE(jLe,5,1),e3=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Sc=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},t3=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},qvt=function(i){return(i+7)/8|0},Vvt=function(i,e,t){(e==null||e<0)&&(e=0),(t==null||t>i.length)&&(t=i.length);var n=new mu(t-e);return n.set(i.subarray(e,t)),n},Hvt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],lu=function(i,e,t){var n=new Error(e||Hvt[i]);if(n.code=i,Error.captureStackTrace&&Error.captureStackTrace(n,lu),!t)throw n;return n},A$=function(i,e,t,n){var r=i.length,s=n?n.length:0;if(!r||e.f&&!e.l)return t||new mu(0);var o=!t||e.i!=2,a=e.i;t||(t=new mu(r*3));var l=function(ze){var lt=t.length;if(ze>lt){var xt=new mu(Math.max(lt*2,ze));xt.set(t),t=xt}},u=e.f||0,c=e.p||0,h=e.b||0,d=e.l,f=e.d,p=e.m,m=e.n,y=r*8;do{if(!d){u=Sc(i,c,1);var v=Sc(i,c+1,3);if(c+=3,v)if(v==1)d=Gvt,f=Uvt,p=9,m=5;else if(v==2){var C=Sc(i,c,31)+257,D=Sc(i,c+10,15)+4,R=C+Sc(i,c+5,31)+1;c+=14;for(var A=new mu(R),L=new mu(19),O=0;O<D;++O)L[$vt[O]]=Sc(i,c+O*3,7);c+=D*3;for(var $=e3(L),q=(1<<$)-1,M=bE(L,$,1),O=0;O<R;){var F=M[Sc(i,c,q)];c+=F&15;var b=F>>4;if(b<16)A[O++]=b;else{var N=0,B=0;for(b==16?(B=3+Sc(i,c,3),c+=2,N=A[O-1]):b==17?(B=3+Sc(i,c,7),c+=3):b==18&&(B=11+Sc(i,c,127),c+=7);B--;)A[O++]=N}}var W=A.subarray(0,C),K=A.subarray(C);p=e3(W),m=e3(K),d=bE(W,p,1),f=bE(K,m,1)}else lu(1);else{var b=qvt(c)+4,x=i[b-4]|i[b-3]<<8,w=b+x;if(w>r){a&&lu(0);break}o&&l(h+x),t.set(i.subarray(b,w),h),e.b=h+=x,e.p=c=w*8,e.f=u;continue}if(c>y){a&&lu(0);break}}o&&l(h+131072);for(var ee=(1<<p)-1,te=(1<<m)-1,le=c;;le=c){var N=d[t3(i,c)&ee],Q=N>>4;if(c+=N&15,c>y){a&&lu(0);break}if(N||lu(2),Q<256)t[h++]=Q;else if(Q==256){le=c,d=null;break}else{var z=Q-254;if(Q>264){var O=Q-257,J=PLe[O];z=Sc(i,c,(1<<J)-1)+BLe[O],c+=J}var ye=f[t3(i,c)&te],Ne=ye>>4;ye||lu(3),c+=ye&15;var K=zvt[Ne];if(Ne>3){var J=FLe[Ne];K+=t3(i,c)&(1<<J)-1,c+=J}if(c>y){a&&lu(0);break}o&&l(h+131072);var Ge=h+z;if(h<K){var rt=s-K,Be=Math.min(K,Ge);for(rt+h<0&&lu(3);h<Be;++h)t[h]=n[rt+h]}for(;h<Ge;h+=4)t[h]=t[h-K],t[h+1]=t[h+1-K],t[h+2]=t[h+2-K],t[h+3]=t[h+3-K];h=Ge}}e.l=d,e.p=le,e.b=h,e.f=u,d&&(u=1,e.m=p,e.d=f,e.n=m)}while(!u);return h==t.length?t:Vvt(t,0,h)},Wvt=new mu(0),Xvt=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&lu(6,"invalid gzip data");var e=i[3],t=10;e&4&&(t+=(i[10]|i[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!i[t++]);return t+(e&2)},Yvt=function(i){var e=i.length;return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0},Zvt=function(i,e){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&lu(6,"invalid zlib data"),(i[1]>>5&1)==+!e&&lu(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function Kvt(i,e){return A$(i,{i:2},e&&e.out,e&&e.dictionary)}function Jvt(i,e){var t=Xvt(i);return t+8>i.length&&lu(6,"invalid gzip data"),A$(i.subarray(t,-8),{i:2},e&&e.out||new mu(Yvt(i)),e&&e.dictionary)}function Qvt(i,e){return A$(i.subarray(Zvt(i,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function mF(i,e){return i[0]==31&&i[1]==139&&i[2]==8?Jvt(i,e):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?Kvt(i,e):Qvt(i,e)}var e_t=typeof TextDecoder<"u"&&new TextDecoder,t_t=0;try{e_t.decode(Wvt,{stream:!0}),t_t=1}catch{}var zLe=(i,e)=>i*Math.pow(2,e),mw=(i,e)=>Math.floor(i/Math.pow(2,e)),uk=(i,e)=>zLe(i.getUint16(e+1,!0),8)+i.getUint8(e),GLe=(i,e)=>zLe(i.getUint32(e+2,!0),16)+i.getUint16(e,!0),i_t=(i,e,t,n,r)=>{if(i!=n.getUint8(r))return i-n.getUint8(r);const s=uk(n,r+1);if(e!=s)return e-s;const o=uk(n,r+4);return t!=o?t-o:0},n_t=(i,e,t,n)=>{const r=ULe(i,e|128,t,n);return r?{z:e,x:t,y:n,offset:r[0],length:r[1],is_dir:!0}:null},Bbe=(i,e,t,n)=>{const r=ULe(i,e,t,n);return r?{z:e,x:t,y:n,offset:r[0],length:r[1],is_dir:!1}:null},ULe=(i,e,t,n)=>{let r=0,s=i.byteLength/17-1;for(;r<=s;){const o=s+r>>1,a=i_t(e,t,n,i,o*17);if(a>0)r=o+1;else if(a<0)s=o-1;else return[GLe(i,o*17+7),i.getUint32(o*17+13,!0)]}return null},r_t=(i,e)=>i.is_dir&&!e.is_dir?1:!i.is_dir&&e.is_dir?-1:i.z!==e.z?i.z-e.z:i.x!==e.x?i.x-e.x:i.y-e.y,qLe=(i,e)=>{const t=i.getUint8(e*17);return{z:t&127,x:uk(i,e*17+1),y:uk(i,e*17+4),offset:GLe(i,e*17+7),length:i.getUint32(e*17+13,!0),is_dir:t>>7===1}},jbe=i=>{const e=[],t=new DataView(i);for(let n=0;n<t.byteLength/17;n++)e.push(qLe(t,n));return s_t(e)},s_t=i=>{i.sort(r_t);const e=new ArrayBuffer(17*i.length),t=new Uint8Array(e);for(let n=0;n<i.length;n++){const r=i[n];let s=r.z;r.is_dir&&(s=s|128),t[n*17]=s,t[n*17+1]=r.x&255,t[n*17+2]=r.x>>8&255,t[n*17+3]=r.x>>16&255,t[n*17+4]=r.y&255,t[n*17+5]=r.y>>8&255,t[n*17+6]=r.y>>16&255,t[n*17+7]=r.offset&255,t[n*17+8]=mw(r.offset,8)&255,t[n*17+9]=mw(r.offset,16)&255,t[n*17+10]=mw(r.offset,24)&255,t[n*17+11]=mw(r.offset,32)&255,t[n*17+12]=mw(r.offset,48)&255,t[n*17+13]=r.length&255,t[n*17+14]=r.length>>8&255,t[n*17+15]=r.length>>16&255,t[n*17+16]=r.length>>24&255}return e},o_t=(i,e)=>{if(i.byteLength<17)return null;const t=i.byteLength/17,n=qLe(i,t-1);if(n.is_dir){const r=n.z,s=e.z-r,o=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:r,x:o,y:a}}return null};function a_t(i){return al(this,null,function*(){const e=yield i.getBytes(0,512e3),t=new DataView(e.data),n=t.getUint32(4,!0),r=t.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,n)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let c=0,h=0,d=0,f=-180,p=-85,m=180,y=85;if(o.bounds){const b=o.bounds.split(",");f=+b[0],p=+b[1],m=+b[2],y=+b[3]}if(o.center){const b=o.center.split(",");c=+b[0],h=+b[1],d=+b[2]}return{specVersion:t.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:f,minLat:p,maxLon:m,maxLat:y,centerZoom:d,centerLon:c,centerLat:h,etag:e.etag}})}function l_t(i,e,t,n,r,s,o){return al(this,null,function*(){let a=yield t.getArrayBuffer(e,i.rootDirectoryOffset,i.rootDirectoryLength,i);i.specVersion===1&&(a=jbe(a));const l=Bbe(new DataView(a),n,r,s);if(l){let h=(yield e.getBytes(l.offset,l.length,o)).data;const d=new DataView(h);return d.getUint8(0)==31&&d.getUint8(1)==139&&(h=mF(new Uint8Array(h))),{data:h}}const u=o_t(new DataView(a),{z:n,x:r,y:s});if(u){const c=n_t(new DataView(a),u.z,u.x,u.y);if(c){let h=yield t.getArrayBuffer(e,c.offset,c.length,i);i.specVersion===1&&(h=jbe(h));const d=Bbe(new DataView(h),n,r,s);if(d){let p=(yield e.getBytes(d.offset,d.length,o)).data;const m=new DataView(p);return m.getUint8(0)==31&&m.getUint8(1)==139&&(p=mF(new Uint8Array(p))),{data:p}}}}})}var VLe={getHeader:a_t,getZxy:l_t};function xv(i,e){return(e>>>0)*4294967296+(i>>>0)}function u_t(i,e){const t=e.buf;let n,r;if(r=t[e.pos++],n=(r&112)>>4,r<128||(r=t[e.pos++],n|=(r&127)<<3,r<128)||(r=t[e.pos++],n|=(r&127)<<10,r<128)||(r=t[e.pos++],n|=(r&127)<<17,r<128)||(r=t[e.pos++],n|=(r&127)<<24,r<128)||(r=t[e.pos++],n|=(r&1)<<31,r<128))return xv(i,n);throw new Error("Expected varint not more than 10 bytes")}function yw(i){const e=i.buf;let t,n;return n=e[i.pos++],t=n&127,n<128||(n=e[i.pos++],t|=(n&127)<<7,n<128)||(n=e[i.pos++],t|=(n&127)<<14,n<128)||(n=e[i.pos++],t|=(n&127)<<21,n<128)?t:(n=e[i.pos],t|=(n&15)<<28,u_t(t,i))}function c_t(i,e,t,n){if(n==0){t==1&&(e[0]=i-1-e[0],e[1]=i-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var h_t=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function d_t(i,e,t){if(i>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,i)-1||t>Math.pow(2,i)-1)throw Error("tile x/y outside zoom level bounds");const n=h_t[i],r=Math.pow(2,i);let s=0,o=0,a=0;const l=[e,t];let u=r/2;for(;u>0;)s=(l[0]&u)>0?1:0,o=(l[1]&u)>0?1:0,a+=u*u*(3*s^o),c_t(u,l,s,o),u=u/2;return n+a}function HLe(i,e){return al(this,null,function*(){if(e===1||e===0)return i;if(e===2){if(typeof globalThis.DecompressionStream>"u")return mF(new Uint8Array(i));{let n=new Response(i).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}}else throw Error("Compression method not supported")})}var jv=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(jv||{}),f_t=127;function p_t(i,e){let t=0,n=i.length-1;for(;t<=n;){const r=n+t>>1,s=e-i[r].tileId;if(s>0)t=r+1;else if(s<0)n=r-1;else return i[r]}return n>=0&&(i[n].runLength===0||e-i[n].tileId<i[n].runLength)?i[n]:null}var g_t=class{constructor(i,e=new Headers){this.url=i,this.customHeaders=e}getKey(){return this.url}setHeaders(i){this.customHeaders=i}getBytes(i,e,t){return al(this,null,function*(){let n;t||(n=new AbortController,t=n.signal);const r=new Headers(this.customHeaders);r.set("Range","bytes="+i+"-"+(i+e-1));let s=yield fetch(this.url,{signal:t,headers:r});if(s.status===416&&i===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);s=yield fetch(this.url,{signal:t,headers:{Range:"bytes=0-"+(u-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>e))throw n&&n.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function Tc(i,e){const t=i.getUint32(e+4,!0),n=i.getUint32(e+0,!0);return t*Math.pow(2,32)+n}function m_t(i,e){const t=new DataView(i),n=t.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:Tc(t,8),rootDirectoryLength:Tc(t,16),jsonMetadataOffset:Tc(t,24),jsonMetadataLength:Tc(t,32),leafDirectoryOffset:Tc(t,40),leafDirectoryLength:Tc(t,48),tileDataOffset:Tc(t,56),tileDataLength:Tc(t,64),numAddressedTiles:Tc(t,72),numTileEntries:Tc(t,80),numTileContents:Tc(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}function WLe(i){const e={buf:new Uint8Array(i),pos:0},t=yw(e),n=[];let r=0;for(let s=0;s<t;s++){const o=yw(e);n.push({tileId:r+o,offset:0,length:0,runLength:1}),r+=o}for(let s=0;s<t;s++)n[s].runLength=yw(e);for(let s=0;s<t;s++)n[s].length=yw(e);for(let s=0;s<t;s++){const o=yw(e);o===0&&s>0?n[s].offset=n[s-1].offset+n[s-1].length:n[s].offset=o-1}return n}function y_t(i){const e=new DataView(i);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var c_=class extends Error{};function v_t(i,e,t,n){return al(this,null,function*(){const r=yield i.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(y_t(r.data)<3)return[yield VLe.getHeader(i)];const o=r.data.slice(0,f_t);let a=r.etag;n&&r.etag!=n&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+i.getKey()),a=void 0);const l=m_t(o,a);if(t){const u=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),c=i.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,h=WLe(yield e(u,l.internalCompression));return[l,[c,h.length,h]]}return[l,void 0]})}function __t(i,e,t,n,r){return al(this,null,function*(){const s=yield i.getBytes(t,n);if(r.etag&&r.etag!==s.etag)throw new c_(s.etag);const o=yield e(s.data,r.internalCompression),a=WLe(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var b_t=class{constructor(i=100,e=!0,t=HLe){this.cache=new Map,this.maxCacheEntries=i,this.counter=1,this.prefetch=e,this.decompress=t}getHeader(i,e){return al(this,null,function*(){const t=i.getKey();if(this.cache.has(t))return this.cache.get(t).lastUsed=this.counter++,yield this.cache.get(t).data;const n=new Promise((r,s)=>{v_t(i,this.decompress,this.prefetch,e).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),r(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:n}),n})}getDirectory(i,e,t,n){return al(this,null,function*(){const r=i.getKey()+"|"+(n.etag||"")+"|"+e+"|"+t;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const s=new Promise((o,a)=>{__t(i,this.decompress,e,t,n).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(i,e,t,n){return al(this,null,function*(){const r=i.getKey()+"|"+(n.etag||"")+"|"+e+"|"+t;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const s=new Promise((o,a)=>{i.getBytes(e,t).then(l=>{if(n.etag&&n.etag!==l.etag)throw new c_(l.etag);o(l.data),this.cache.has(r),this.prune()}).catch(l=>{a(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let i=1/0,e;this.cache.forEach((t,n)=>{t.lastUsed<i&&(i=t.lastUsed,e=n)}),e&&this.cache.delete(e)}}invalidate(i,e){return al(this,null,function*(){this.cache.delete(i.getKey()),yield this.getHeader(i,e)})}},R$=class{constructor(i,e,t){typeof i=="string"?this.source=new g_t(i):this.source=i,t?this.decompress=t:this.decompress=HLe,e?this.cache=e:this.cache=new b_t}getHeader(){return al(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(i,e,t,n){return al(this,null,function*(){const r=d_t(i,e,t),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return VLe.getZxy(s,this.source,this.cache,i,e,t,n);if(i<s.minZoom||i>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,o,a,s),c=p_t(u,r);if(c)if(c.runLength>0){const h=yield this.source.getBytes(s.tileDataOffset+c.offset,c.length,n);if(s.etag&&s.etag!==h.etag)throw new c_(h.etag);return{data:yield this.decompress(h.data,s.tileCompression),cacheControl:h.cacheControl,expires:h.expires}}else o=s.leafDirectoryOffset+c.offset,a=c.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(i,e,t,n){return al(this,null,function*(){try{return yield this.getZxyAttempt(i,e,t,n)}catch(r){if(r instanceof c_)return this.cache.invalidate(this.source,r.message),yield this.getZxyAttempt(i,e,t,n);throw r}})}getMetadataAttempt(){return al(this,null,function*(){const i=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(i.jsonMetadataOffset,i.jsonMetadataLength);if(i.etag&&i.etag!==e.etag)throw new c_(e.etag);const t=yield this.decompress(e.data,i.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(t))})}getMetadata(){return al(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(i){if(i instanceof c_)return this.cache.invalidate(this.source,i.message),yield this.getMetadataAttempt();throw i}})}};class zf{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const yr={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class x_t extends zf{constructor(e){super(yr.ERROR),this.error=e}}const k$={PROPERTYCHANGE:"propertychange"};class XLe{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function w_t(i,e,t){let n,r;t=t||qh;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+t(i[n],e),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function qh(i,e){return i>e?1:i<e?-1:0}function E_t(i,e){return i<e?1:i>e?-1:0}function yL(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function C_t(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Vh(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function f1(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function S_t(i,e,t){const n=e||qh;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||t&&o===0)})}function T_t(){return!0}function d2(){}function YLe(i){let e=!1,t,n,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!f1(s,n))&&(e=!0,r=this,n=s,t=i.apply(this,arguments)),t}}function ZLe(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function MC(i){for(const e in i)delete i[e]}function Pg(i){let e;for(e in i)return!1;return!e}class IC extends XLe{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new zf(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let u=a[n];for(delete a[n];u--;)this.removeEventListener(n,d2);delete o[n]}return l}disposeInternal(){this.listeners_&&MC(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=d2,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}function To(i,e,t,n,r){if(n&&n!==i&&(t=t.bind(n)),r){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function ck(i,e,t,n){return To(i,e,t,n,!0)}function Qo(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),MC(i))}class OC extends IC{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(yr.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=To(this,e[s],t);return r}return To(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=ck(this,e[s],t)}else n=ck(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)A_t(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}OC.prototype.on;OC.prototype.once;OC.prototype.un;function A_t(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)Qo(i[e]);else Qo(i)}function qi(){throw new Error("Unimplemented abstract method.")}let R_t=0;function yi(i){return i.ol_uid||(i.ol_uid=String(++R_t))}class zbe extends zf{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class dy extends OC{constructor(e){super(),this.on,this.once,this.un,yi(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new zbe(n,e,t)),n=k$.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new zbe(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Pg(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}function zr(i,e){if(!i)throw new Error(e)}class vL extends dy{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new vL(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Qo(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=To(e,yr.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?k_t(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function k_t(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(zr(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}const D$=new Array(6);function Hl(){return[1,0,0,1,0,0]}function yF(i){return bL(i,1,0,0,1,0,0)}function _L(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=i[4],a=i[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5];return i[0]=t*l+r*u,i[1]=n*l+s*u,i[2]=t*c+r*h,i[3]=n*c+s*h,i[4]=t*d+r*f+o,i[5]=n*d+s*f+a,i}function bL(i,e,t,n,r,s,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i[4]=s,i[5]=o,i}function D_t(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Wo(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function L_t(i,e){const t=Math.cos(e),n=Math.sin(e);return _L(i,bL(D$,t,n,-n,t,0,0))}function xE(i,e,t){return _L(i,bL(D$,e,0,0,t,0,0))}function KLe(i,e,t){return _L(i,bL(D$,1,0,0,1,e,t))}function Jc(i,e,t,n,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return i[0]=n*u,i[1]=r*l,i[2]=-n*l,i[3]=r*u,i[4]=o*n*u-a*n*l+e,i[5]=o*r*l+a*r*u+t,i}function M_t(i,e){const t=I_t(e);zr(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*l-o*a)/t,i[5]=-(n*l-r*a)/t,i}function I_t(i){return i[0]*i[3]-i[1]*i[2]}const Gbe=[1e6,1e6,1e6,1e6,2,2];function O_t(i){return"matrix("+i.map((t,n)=>Math.round(t*Gbe[n])/Gbe[n]).join(", ")+")"}const Ho={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function bb(i){const e=Au();for(let t=0,n=i.length;t<n;++t)wE(e,i[t]);return e}function P_t(i,e,t){const n=Math.min.apply(null,i),r=Math.min.apply(null,e),s=Math.max.apply(null,i),o=Math.max.apply(null,e);return Rf(n,r,s,o,t)}function Hh(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function F_t(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function fy(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function Af(i,e){return L$(i,e[0],e[1])}function Mc(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function L$(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function vF(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let l=Ho.UNKNOWN;return o<t?l=l|Ho.LEFT:o>r&&(l=l|Ho.RIGHT),a<n?l=l|Ho.BELOW:a>s&&(l=l|Ho.ABOVE),l===Ho.UNKNOWN&&(l=Ho.INTERSECTING),l}function Au(){return[1/0,1/0,-1/0,-1/0]}function Rf(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function PC(i){return Rf(1/0,1/0,-1/0,-1/0,i)}function JLe(i,e){const t=i[0],n=i[1];return Rf(t,n,t,n,e)}function M$(i,e,t,n,r){const s=PC(r);return eMe(s,i,e,t,n)}function FC(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function QLe(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function wE(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function eMe(i,e,t,n,r){for(;t<n;t+=r)N_t(i,e[t],e[t+1]);return i}function N_t(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function tMe(i,e){let t;return t=e(xL(i)),t||(t=e(wL(i)),t)||(t=e(EL(i)),t)||(t=e(em(i)),t)?t:!1}function f2(i){let e=0;return py(i)||(e=Xn(i)*Xs(i)),e}function xL(i){return[i[0],i[1]]}function wL(i){return[i[2],i[1]]}function Qc(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function $_t(i,e){let t;if(e==="bottom-left")t=xL(i);else if(e==="bottom-right")t=wL(i);else if(e==="top-left")t=em(i);else if(e==="top-right")t=EL(i);else throw new Error("Invalid corner");return t}function iMe(i,e,t,n,r){const[s,o,a,l,u,c,h,d]=_F(i,e,t,n);return Rf(Math.min(s,a,u,h),Math.min(o,l,c,d),Math.max(s,a,u,h),Math.max(o,l,c,d),r)}function _F(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,u=r*a,c=s*o,h=s*a,d=i[0],f=i[1];return[d-l+h,f-u-c,d-l-h,f-u+c,d+l-h,f+u+c,d+l+h,f+u-c,d-l+h,f-u-c]}function Xs(i){return i[3]-i[1]}function va(i,e,t){const n=t||Au();return Cs(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):PC(n),n}function em(i){return[i[0],i[3]]}function EL(i){return[i[2],i[3]]}function Xn(i){return i[2]-i[0]}function Cs(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function py(i){return i[2]<i[0]||i[3]<i[1]}function B_t(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function j_t(i,e,t){let n=!1;const r=vF(i,e),s=vF(i,t);if(r===Ho.INTERSECTING||s===Ho.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],u=i[3],c=e[0],h=e[1],d=t[0],f=t[1],p=(f-h)/(d-c);let m,y;s&Ho.ABOVE&&!(r&Ho.ABOVE)&&(m=d-(f-u)/p,n=m>=o&&m<=l),!n&&s&Ho.RIGHT&&!(r&Ho.RIGHT)&&(y=f-(d-l)*p,n=y>=a&&y<=u),!n&&s&Ho.BELOW&&!(r&Ho.BELOW)&&(m=d-(f-a)/p,n=m>=o&&m<=l),!n&&s&Ho.LEFT&&!(r&Ho.LEFT)&&(y=f-(d-o)*p,n=y>=a&&y<=u)}return n}function nMe(i,e,t,n){if(py(i))return PC(t);let r=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let u=0;u<n;++u)r.push(i[0]+a*u/n,i[1],i[2],i[1]+l*u/n,i[2]-a*u/n,i[3],i[0],i[3]-l*u/n)}else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return P_t(s,o,t)}function rMe(i,e){const t=e.getExtent(),n=Qc(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=Xn(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function I$(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];rMe(i,e);const r=Xn(n);if(Xn(i)>r&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}const z_t={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function Ube(i){return z_t[i]}const p2={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class g2{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||p2[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const NC=6378137,h_=Math.PI*NC,G_t=[-h_,-h_,h_,h_],U_t=[-180,-85,180,85],BT=NC*Math.log(Math.tan(Math.PI/2));class wv extends g2{constructor(e){super({code:e,units:"m",extent:G_t,global:!0,worldExtent:U_t,getPointResolution:function(t,n){return t/Math.cosh(n[1]/NC)}})}}const qbe=[new wv("EPSG:3857"),new wv("EPSG:102100"),new wv("EPSG:102113"),new wv("EPSG:900913"),new wv("http://www.opengis.net/def/crs/EPSG/0/3857"),new wv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function q_t(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t){e[r]=h_*i[r]/180;let s=NC*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));s>BT?s=BT:s<-BT&&(s=-BT),e[r+1]=s}return e}function V_t(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t)e[r]=180*i[r]/h_,e[r+1]=360*Math.atan(Math.exp(i[r+1]/NC))/Math.PI-90;return e}const H_t=6378137,Vbe=[-180,-90,180,90],W_t=Math.PI*H_t/180;class Vm extends g2{constructor(e,t){super({code:e,units:"degrees",extent:Vbe,axisOrientation:t,global:!0,metersPerUnit:W_t,worldExtent:Vbe})}}const Hbe=[new Vm("CRS:84"),new Vm("EPSG:4326","neu"),new Vm("urn:ogc:def:crs:OGC:1.3:CRS84"),new Vm("urn:ogc:def:crs:OGC:2:84"),new Vm("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Vm("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Vm("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let bF={};function X_t(i){return bF[i]||bF[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Y_t(i,e){bF[i]=e}let I_={};function hk(i,e,t){const n=i.getCode(),r=e.getCode();n in I_||(I_[n]={}),I_[n][r]=t}function Z_t(i,e){let t;return i in I_&&e in I_[i]&&(t=I_[i][e]),t}function $s(i,e,t){return Math.min(Math.max(i,e),t)}function K_t(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=r,n=s):l>0&&(t+=o*l,n+=a*l)}return E0(i,e,t,n)}function E0(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function J_t(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let u=n;u<e+1;u++)n==u?i[a][u]=0:i[a][u]+=l*i[n][u]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function OA(i){return i*Math.PI/180}function C0(i,e){const t=i%e;return t*e<0?t+e:t}function du(i,e,t){return i+t*(e-i)}function CL(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function Wbe(i,e){return Math.round(CL(i,e))}function jT(i,e){return Math.floor(CL(i,e))}function ag(i,e){return Math.ceil(CL(i,e))}function sMe(i,e){const t=(""+i).split("."),n=(""+e).split(".");for(let r=0;r<Math.max(t.length,n.length);r++){const s=parseInt(t[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function Q_t(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function dk(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function ebt(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function oMe(i,e){if(e.canWrapX()){const t=Xn(e.getExtent()),n=tbt(i,e,t);n&&(i[0]-=n*t)}return i}function tbt(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||Xn(n),r=Math.floor((i[0]-n[0])/t)),r}const ibt=63710088e-1;function Xbe(i,e,t){t=t||ibt;const n=OA(i[1]),r=OA(e[1]),s=(r-n)/2,o=OA(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function nbt(...i){console.warn(...i)}function Ybe(...i){console.error(...i)}let xF=!0;function rbt(i){xF=!(i===void 0?!0:i)}function O$(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function aMe(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function sbt(i){Y_t(i.getCode(),i),hk(i,i,O$)}function obt(i){i.forEach(sbt)}function tr(i){return typeof i=="string"?X_t(i):i||null}function Zbe(i,e,t,n){i=tr(i);let r;const s=i.getPointResolutionFunc();if(s){if(r=s(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(r=r*o/p2[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=$C(i,tr("EPSG:4326"));if(a===aMe&&o!=="degrees")r=e*i.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const c=Xbe(u.slice(0,2),u.slice(2,4)),h=Xbe(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const l=n?p2[n]:i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function Kbe(i){obt(i),i.forEach(function(e){i.forEach(function(t){e!==t&&hk(e,t,O$)})})}function abt(i,e,t,n){i.forEach(function(r){e.forEach(function(s){hk(r,s,t),hk(s,r,n)})})}function P$(i,e){return i?typeof i=="string"?tr(i):i:tr(e)}function ll(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||$C(i,e)===O$)&&t}function $C(i,e){const t=i.getCode(),n=e.getCode();let r=Z_t(t,n);return r||(r=aMe),r}function xb(i,e){const t=tr(i),n=tr(e);return $C(t,n)}function lMe(i,e,t){return xb(e,t)(i,void 0,i.length)}function uMe(i,e,t,n){const r=xb(e,t);return nMe(i,r,void 0,n)}let lbt=null;function ubt(){return lbt}function wF(i,e){return i}function Rp(i,e){return xF&&!dk(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(xF=!1,nbt("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function SL(i,e){return i}function Ic(i,e){return i}function cbt(){Kbe(qbe),Kbe(Hbe),abt(Hbe,qbe,q_t,V_t)}cbt();function bg(i,e,t,n,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],u=i[a+1];s[o++]=r[0]*l+r[2]*u+r[4],s[o++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=o&&(s.length=o),s}function cMe(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],c=s[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-u,p=i[d+1]-c;o[h++]=u+f*a-p*l,o[h++]=c+f*l+p*a;for(let m=d+2;m<d+n;++m)o[h++]=i[m]}return o&&o.length!=h&&(o.length=h),o}function hbt(i,e,t,n,r,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-u;a[c++]=l+r*d,a[c++]=u+s*f;for(let p=h+2;p<h+n;++p)a[c++]=i[p]}return a&&a.length!=c&&(a.length=c),a}function dbt(i,e,t,n,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let u=l+2;u<l+n;++u)o[a++]=i[u]}return o&&o.length!=a&&(o.length=a),o}const Jbe=Hl();class hMe extends dy{constructor(){super(),this.extent_=Au(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=YLe((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return qi()}closestPointXY(e,t,n,r){return qi()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return qi()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&PC(t),this.extentRevision_=this.getRevision()}return B_t(this.extent_,e)}rotate(e,t){qi()}scale(e,t,n){qi()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return qi()}getType(){return qi()}applyTransform(e){qi()}intersectsExtent(e){return qi()}translate(e,t){qi()}transform(e,t){const n=tr(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),u=n.getWorldExtent(),c=Xs(u)/Xs(l);return Jc(Jbe,u[0],u[3],c,-c,0,0,0),bg(s,0,s.length,a,Jbe,o),xb(n,t)(s,o,a)}:xb(n,t);return this.applyTransform(r),this}}class gy extends hMe{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return M$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return qi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Qbe(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){qi()}setLayout(e,t,n){let r;if(e)r=Qbe(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=my(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();cMe(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Qc(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();hbt(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();dbt(n,0,n.length,r,e,t,n),this.changed()}}}function my(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Qbe(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function fbt(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return bg(n,0,n.length,r,e,t)}function pbt(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function TL(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function BC(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=TL(i,e,t[o],n);r[s++]=l,e=l}return r.length=s,r}function dMe(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=BC(i,e,t[o],n,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}class fk extends hMe{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Qo),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(To(e[t],yr.CHANGE,this.changed,this))}clone(){const e=new fk(i3(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<fy(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,n,r);return r}containsXY(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){PC(e);const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)QLe(e,t[n].getExtent());return e}getGeometries(){return i3(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let r=!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}return r?new fk(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Qc(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(i3(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function i3(i){return i.map(e=>e.clone())}const gbt=fk;function e1e(i,e,t,n,r,s,o){const a=i[e],l=i[e+1],u=i[t]-a,c=i[t+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-a)*u+(s-l)*c)/(u*u+c*c);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=du(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function F$(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],u=E0(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function N$(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=F$(i,e,a,n,r),e=a}return r}function mbt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=N$(i,e,a,n,r),e=a[a.length-1]}return r}function $$(i,e,t,n,r,s,o,a,l,u,c){if(e==t)return u;let h,d;if(r===0){if(d=E0(o,a,i[e],i[e+1]),d<u){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return u}c=c||[NaN,NaN];let f=e+n;for(;f<t;)if(e1e(i,f-n,f,n,o,a,c),d=E0(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(s&&(e1e(i,t-n,e,n,o,a,c),d=E0(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<n;++h)l[h]=c[h];l.length=n}return u}function B$(i,e,t,n,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=$$(i,e,f,n,r,s,o,a,l,u,c),e=f}return u}function ybt(i,e,t,n,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=B$(i,e,f,n,r,s,o,a,l,u,c),e=f[f.length-1]}return u}function AL(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-n];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const p=i[d],m=i[d+1],y=i[h],v=i[h+1];for(let b=d+n;b<h;b+=n){const x=i[b],w=i[b+1],C=K_t(x,w,p,m,y,v);C>f&&(c=b,f=C)}f>r&&(l[(c-e)/n]=1,d+n<c&&u.push(d,c),c+n<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*n],s[o++]=i[e+h*n+1]);return o}function fMe(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=AL(i,e,c,n,r,s,o),a.push(o),e=c}return o}function Qm(i,e){return e*Math.round(i/e)}function vbt(i,e,t,n,r,s,o){if(e==t)return o;let a=Qm(i[e],r),l=Qm(i[e+1],r);e+=n,s[o++]=a,s[o++]=l;let u,c;do if(u=Qm(i[e],r),c=Qm(i[e+1],r),e+=n,e==t)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<t;){const h=Qm(i[e],r),d=Qm(i[e+1],r);if(e+=n,h==u&&d==c)continue;const f=u-a,p=c-l,m=h-a,y=d-l;if(f*y==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&y<p||p==y||p>0&&y>p)){u=h,c=d;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function j$(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=vbt(i,e,c,n,r,s,o),a.push(o),e=c}return o}function _bt(i,e,t,n,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l],h=[];o=j$(i,e,c,n,r,s,o,h),a.push(h),e=c[c.length-1]}return o}function lg(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function m2(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=lg(i,e,l,n,r[s]),e=l}return r.length=s,r}function EF(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:m2(i,e,l,n,r[s]),e=l[l.length-1]}return r.length=s,r}function pMe(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function gMe(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=pMe(i,e,a,n),e=a}return r}function bbt(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=gMe(i,e,a,n),e=a[a.length-1]}return r}class y2 extends gy{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new y2(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<fy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return pMe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return lg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new y2(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TL(this.flatCoordinates,0,e,this.stride),this.changed()}}function mMe(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function pk(i,e,t,n,r,s,o){let a,l;const u=(t-e)/n;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=i[e],h=i[e+1],d=0;const f=[0];for(let y=e+n;y<t;y+=n){const v=i[y],b=i[y+1];d+=Math.sqrt((v-c)*(v-c)+(b-h)*(b-h)),f.push(d),c=v,h=b}const p=r*d,m=w_t(f,p);m<0?(l=(p-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*n):a=e+m*n}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?i[a+c]:du(i[a+c],i[a+n+c],l);return s}function CF(i,e,t,n,r,s){if(t==e)return null;let o;if(r<i[e+n-1])return s?(o=i.slice(e,e+n),o[n-1]=r,o):null;if(i[t-1]<r)return s?(o=i.slice(t-n,t),o[n-1]=r,o):null;if(r==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const u=i[a*n-1];if(r==u)return i.slice((a-1)*n,(a-1)*n+n);const c=i[(a+1)*n-1],h=(r-u)/(c-u);o=[];for(let d=0;d<n-1;++d)o.push(du(i[(a-1)*n+d],i[a*n+d],h));return o.push(r),o}function xbt(i,e,t,n,r,s,o){if(o)return CF(i,e,t[t.length-1],n,r,s);let a;if(r<i[n-1])return s?(a=i.slice(0,n),a[n-1]=r,a):null;if(i[i.length-1]<r)return s?(a=i.slice(i.length-n),a[n-1]=r,a):null;for(let l=0,u=t.length;l<u;++l){const c=t[l];if(e!=c){if(r<i[e+n-1])return null;if(r<=i[c-1])return CF(i,e,c,n,r,!1);e=c}}return null}function wbt(i,e,t,n,r){return!tMe(r,function(o){return!u0(i,e,t,n,o[0],o[1])})}function u0(i,e,t,n,r,s){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const u=i[e],c=i[e+1];l<=s?c>s&&(u-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function z$(i,e,t,n,r,s){if(t.length===0||!u0(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(u0(i,t[o-1],t[o],n,r,s))return!1;return!0}function Ebt(i,e,t,n,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(z$(i,e,l,n,r,s))return!0;e=l[l.length-1]}return!1}function RL(i,e,t,n,r){const s=eMe(Au(),i,e,t,n);return Cs(r,s)?Mc(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:mMe(i,e,t,n,function(o,a){return j_t(r,o,a)}):!1}function Cbt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){if(RL(i,e,t[s],n,r))return!0;e=t[s]}return!1}function yMe(i,e,t,n,r){return!!(RL(i,e,t,n,r)||u0(i,e,t,n,r[0],r[1])||u0(i,e,t,n,r[0],r[3])||u0(i,e,t,n,r[2],r[1])||u0(i,e,t,n,r[2],r[3]))}function vMe(i,e,t,n,r){if(!yMe(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(wbt(i,t[s-1],t[s],n,r)&&!RL(i,t[s-1],t[s],n,r))return!1;return!0}function Sbt(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(vMe(i,e,a,n,r))return!0;e=a[a.length-1]}return!1}function _Me(i,e,t,n){let r=i[e],s=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],u=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}class q0 extends gy{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Vh(this.flatCoordinates,e),this.changed()}clone(){const e=new q0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<fy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(F$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$$(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return mMe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,CF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return lg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return pk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return _Me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new q0(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return RL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TL(this.flatCoordinates,0,e,this.stride),this.changed()}}class v2 extends gy{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const r=e,s=[],o=[];for(let l=0,u=r.length;l<u;++l){const c=r[l];Vh(s,c.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Vh(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new v2(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<fy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(N$(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),B$(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,xbt(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return m2(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new q0(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new q0(e.slice(s,l),n);r.push(u),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=pk(t,n,l,s,.5);Vh(e,u),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=fMe(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new v2(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return Cbt(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=BC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class V0 extends gy{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new V0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=E0(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return JLe(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return L$(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pbt(this.flatCoordinates,0,e,this.stride),this.changed()}}class jC extends gy{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Vh(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new jC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<fy(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=E0(e,t,s[a],s[a+1]);if(u<r){r=u;for(let c=0;c<o;++c)n[c]=s[a+c];n.length=o}}return r}getCoordinates(){return lg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new V0(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=n){const a=new V0(e.slice(s,s+n),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let r=0,s=t.length;r<s;r+=n){const o=t[r],a=t[r+1];if(L$(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TL(this.flatCoordinates,0,e,this.stride),this.changed()}}function G$(i,e,t,n,r,s,o){let a,l,u,c,h,d,f;const p=r[s+1],m=[];for(let b=0,x=t.length;b<x;++b){const w=t[b];for(c=i[w-n],d=i[w-n+1],a=e;a<w;a+=n)h=i[a],f=i[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(u=(p-d)/(f-d)*(h-c)+c,m.push(u)),c=h,d=f}let y=NaN,v=-1/0;for(m.sort(qh),c=m[0],a=1,l=m.length;a<l;++a){h=m[a];const b=Math.abs(h-c);b>v&&(u=(c+h)/2,z$(i,e,t,n,u,p)&&(y=u,v=b)),c=h}return isNaN(y)&&(y=r[s]),o?(o.push(y,p,v),o):[y,p,v]}function bMe(i,e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=G$(i,e,l,n,r,2*o,s),e=l[l.length-1]}return s}function Tbt(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function U$(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function q$(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=U$(i,e,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function xMe(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!q$(i,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function gk(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=U$(i,e,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&Tbt(i,e,a,n),e=a}return e}function SF(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s)e=gk(i,e,t[s],n,r);return e}function wMe(i,e){const t=[];let n=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=U$(i,n,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,n=l}return t}class Fg extends gy{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Vh(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<fy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(N$(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),B$(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return z$(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return gMe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),gk(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,m2(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Qc(this.getExtent());this.flatInteriorPoint_=G$(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new V0(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new y2(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new y2(t.slice(s,l),e);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;q$(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=gk(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=j$(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Fg(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return vMe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=BC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function t1e(i){if(py(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new Fg(s,"XY",[s.length])}function EMe(i,e,t,n){const r=[];let s=Au();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=M$(i,e,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class _2 extends gy{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=s.length,h=u.getEnds();for(let d=0,f=h.length;d<f;++d)h[d]+=c;Vh(s,u.getFlatCoordinates()),o.push(h)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,n=o}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Vh(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const n=new _2(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,r){return r<fy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mbt(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ybt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Ebt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return bbt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),SF(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,EF(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=EMe(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=bMe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new jC(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;xMe(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=SF(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=_bt(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new _2(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let s=0,o=n.length;s<o;++s)n[s]-=t;return new Fg(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const c=new Fg(t.slice(s,u),e,l);r.push(c),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return Sbt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=dMe(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const i1e=Hl();class ja{constructor(e,t,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?JLe(this.flatCoordinates_):M$(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Qc(this.getExtent());this.flatInteriorPoints_=G$(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=wMe(this.flatCoordinates_,this.ends_),t=EMe(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=bMe(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=pk(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=pk(e,t,o,2,.5);Vh(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=tr(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=Xs(n)/Xs(t);Jc(i1e,n[0],n[3],r,-r,0,0,0),bg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,i1e,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new ja(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=YLe((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=AL(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=fMe(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=j$(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new ja(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ja.prototype.getFlatCoordinates=ja.prototype.getOrientedFlatCoordinates;class CMe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=vL,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?tr(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=tr(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return qi()}readFeature(e,t){return qi()}readFeatures(e,t){return qi()}readGeometry(e,t){return qi()}readProjection(e){return qi()}writeFeature(e,t){return qi()}writeFeatures(e,t){return qi()}writeGeometry(e,t){return qi()}}function kL(i,e,t){const n=t?tr(t.featureProjection):null,r=t?tr(t.dataProjection):null;let s=i;if(n&&r&&!ll(n,r)){e&&(s=i.clone());const o=e?n:r,a=e?r:n;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(xb(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}const Abt={Point:V0,LineString:q0,Polygon:Fg,MultiPoint:jC,MultiLineString:v2,MultiPolygon:_2};function Rbt(i,e,t){return Array.isArray(e[0])?(xMe(i,0,e,t)||(i=i.slice(),SF(i,0,e,t)),i):(q$(i,0,e,t)||(i=i.slice(),gk(i,0,e,t)),i)}function SMe(i,e){var s;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>SMe({...i,geometry:o})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const r=t.layout.length;return kL(new ja(n,n==="Polygon"?Rbt(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function V$(i,e){if(!i)return null;if(Array.isArray(i)){const n=i.map(r=>V$(r,e));return new gbt(n)}const t=Abt[i.type];return kL(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}class kbt extends CMe{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(zT(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(zT(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return qi()}readFeaturesFromObject(e,t){return qi()}readGeometry(e,t){return this.readGeometryFromObject(zT(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return qi()}readProjection(e){return this.readProjectionFromObject(zT(e))}readProjectionFromObject(e){return qi()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return qi()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return qi()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return qi()}}function zT(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}class Dbt extends kbt{constructor(e){e=e||{},super(),this.dataProjection=tr(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=tr(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const r=H$(n.geometry);if(this.featureClass===ja)return SMe({geometry:r,id:n.id,properties:n.properties},t);const s=new vL;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(V$(r,t)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(e,t){const n=e;let r=null;if(n.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],t);u&&r.push(u)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Lbt(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=tr(t.properties.name);else if(t.type==="EPSG")n=tr("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;const s=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=TF(o,t),delete s[e.getGeometryName()]),Pg(s)||(n.properties=s),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let r=0,s=e.length;r<s;++r)n.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return TF(e,this.adaptOptions(t))}}function H$(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=Ibt(i);break}case"LineString":{t=Obt(i);break}case"Polygon":{t=$bt(i);break}case"MultiPoint":{t=Fbt(i);break}case"MultiLineString":{t=Pbt(i);break}case"MultiPolygon":{t=Nbt(i);break}case"GeometryCollection":{t=Mbt(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function Lbt(i,e){const t=H$(i);return V$(t,e)}function Mbt(i,e){return i.geometries.map(function(n){return H$(n)})}function Ibt(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:my(e.length)}}function Obt(i){var n;const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:my(((n=e[0])==null?void 0:n.length)||2)}}function Pbt(i){var s,o;const e=i.coordinates,t=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,n=[],r=BC(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:r,layout:my(t)}}function Fbt(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:my(((t=e[0])==null?void 0:t.length)||2)}}function Nbt(i){var s,o;const e=i.coordinates,t=[],n=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,r=dMe(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:my(n)}}function $bt(i){var s,o;const e=i.coordinates,t=[],n=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,r=BC(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:r,layout:my(n)}}function TF(i,e){i=kL(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=qbt(i);break}case"LineString":{n=jbt(i);break}case"Polygon":{n=Vbt(i,e);break}case"MultiPoint":{n=Gbt(i);break}case"MultiLineString":{n=zbt(i);break}case"MultiPolygon":{n=Ubt(i,e);break}case"GeometryCollection":{n=Bbt(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function Bbt(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return TF(n,e)})}}function jbt(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function zbt(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Gbt(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function Ubt(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function qbt(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function Vbt(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const dt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function TMe(i){return Math.pow(i,3)}function Hbt(i){return 1-TMe(1-i)}function Wbt(i){return 3*i*i-2*i*i*i}class zC extends IC{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(yr.CHANGE)}release(){this.state===dt.ERROR&&this.setState(dt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==dt.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==dt.LOADED){e.interimTile=null;break}e.getState()==dt.LOADING?t=e:e.getState()==dt.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==dt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){qi()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:TMe(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const Ng=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"";Ng.includes("firefox");const Xbt=Ng.includes("safari")&&!Ng.includes("chrom"),Ybt=Xbt&&(Ng.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ng));Ng.includes("webkit")&&Ng.includes("edge");Ng.includes("macintosh");const AMe=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,W$=typeof Image<"u"&&Image.prototype.decode,Zbt=typeof createImageBitmap=="function";(function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i})();function Zs(i,e,t,n){let r;return t&&t.length?r=t.shift():AMe?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let n3;function mk(){return n3||(n3=Zs(1,1)),n3}function H0(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function yk(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function AF(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}let Ev=null;function Kbt(i){Ev||(Ev=Zs(i.width,i.height,void 0,{willReadFrequently:!0}));const e=Ev.canvas,t=i.width;e.width!==t&&(e.width=t);const n=i.height;return e.height!==n&&(e.height=n),Ev.clearRect(0,0,t,n),Ev.drawImage(i,0,0),Ev.getImageData(0,0,t,n).data}const Jbt=[256,256];class X$ extends zC{constructor(e){const t=dt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null}getSize(){if(this.size_)return this.size_;const e=yk(this.data_);return e?[e.width,e.height]:Jbt}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==dt.IDLE&&this.state!==dt.ERROR)return;this.state=dt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=dt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=dt.ERROR,e.changed()})}}const Y$=.5,Qbt=10,n1e=.25;class Z${constructor(e,t,n,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=xb(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const x=b[0]+"/"+b[1];return a[x]||(a[x]=l(b)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Xn(r)>=Xn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xn(this.targetProj_.getExtent()):null;const u=em(n),c=EL(n),h=wL(n),d=xL(n),f=this.transformInv_(u),p=this.transformInv_(c),m=this.transformInv_(h),y=this.transformInv_(d),v=Qbt+(o?Math.max(0,Math.ceil(Math.log2(f2(n)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,f,p,m,y,v),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(x,w,C){b=Math.min(b,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-b>this.sourceWorldWidth_/2){const w=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];w[0][0]-b>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-b>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-b>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const C=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-C<this.sourceWorldWidth_/2&&(x.source=w)}})}a={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,l,u){const c=bb([s,o,a,l]),h=this.sourceWorldWidth_?Xn(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=bb([e,t,n,r]);p=Xn(y)/this.targetWorldWidth_>n1e||p}!f&&this.sourceProj_.isGlobal()&&h&&(p=h>n1e||p)}if(!p&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Cs(c,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(u>0){if(!p){const y=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(y);let b;f?b=(C0(s[0],d)+C0(a[0],d))/2-C0(v[0],d):b=(s[0]+a[0])/2-v[0];const x=(s[1]+a[1])/2-v[1];p=b*b+x*x>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const y=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(y),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(b);this.addQuad_(e,t,y,b,s,o,v,x,u-1),this.addQuad_(b,y,n,r,x,v,a,l,u-1)}else{const y=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(y),b=[(n[0]+r[0])/2,(n[1]+r[1])/2],x=this.transformInv_(b);this.addQuad_(e,y,b,r,s,v,x,l,u-1),this.addQuad_(y,t,n,b,v,o,a,x,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(e,n,r,s,a,l),m&14||this.addTriangle_(e,n,t,s,a,o),m&&(m&13||this.addTriangle_(t,r,e,o,l,s),m&7||this.addTriangle_(t,r,n,o,l,a))}calculateSourceExtent(){const e=Au();return this.triangles_.forEach(function(t,n,r){const s=t.source;wE(e,s[0]),wE(e,s[1]),wE(e,s[2])}),e}getTriangles(){return this.triangles_}}let r3;const yf=[];function r1e(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function s3(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function e1t(){if(r3===void 0){const i=Zs(6,6,yf);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",r1e(i,4,5,4,0),r1e(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;r3=s3(e,0)||s3(e,4)||s3(e,8),H0(i),yf.push(i.canvas)}return r3}function vk(i,e,t,n){const r=lMe(t,e,i);let s=Zbe(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||Af(l,r)){const u=Zbe(i,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function RMe(i,e,t,n){const r=Qc(t);let s=vk(i,e,r,n);return(!isFinite(s)||s<=0)&&tMe(t,function(o){return s=vk(i,e,o,n),isFinite(s)&&s>0}),s}function K$(i,e,t,n,r,s,o,a,l,u,c,h,d,f){const p=Zs(Math.round(t*i),Math.round(t*e),yf);if(h||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function m(C){return Math.round(C*t)/t}p.globalCompositeOperation="lighter";const y=Au();l.forEach(function(C,D,R){QLe(y,C.extent)});let v;const b=t/n,x=(h?1:1+Math.pow(2,-24))/b;if(!d||l.length!==1||u!==0){if(v=Zs(Math.round(Xn(y)*b),Math.round(Xs(y)*b),yf),h||(v.imageSmoothingEnabled=!1),r&&f){const C=(r[0]-y[0])*b,D=-(r[3]-y[3])*b,R=Xn(r)*b,A=Xs(r)*b;v.rect(C,D,R,A),v.clip()}l.forEach(function(C,D,R){if(C.image.width>0&&C.image.height>0){if(C.clipExtent){v.save();const q=(C.clipExtent[0]-y[0])*b,M=-(C.clipExtent[3]-y[3])*b,F=Xn(C.clipExtent)*b,N=Xs(C.clipExtent)*b;v.rect(h?q:Math.round(q),h?M:Math.round(M),h?F:Math.round(q+F)-Math.round(q),h?N:Math.round(M+N)-Math.round(M)),v.clip()}const A=(C.extent[0]-y[0])*b,L=-(C.extent[3]-y[3])*b,O=Xn(C.extent)*b,$=Xs(C.extent)*b;v.drawImage(C.image,u,u,C.image.width-2*u,C.image.height-2*u,h?A:Math.round(A),h?L:Math.round(L),h?O:Math.round(A+O)-Math.round(A),h?$:Math.round(L+$)-Math.round(L)),C.clipExtent&&v.restore()}})}const w=em(o);return a.getTriangles().forEach(function(C,D,R){const A=C.source,L=C.target;let O=A[0][0],$=A[0][1],q=A[1][0],M=A[1][1],F=A[2][0],N=A[2][1];const B=m((L[0][0]-w[0])/s),W=m(-(L[0][1]-w[1])/s),K=m((L[1][0]-w[0])/s),ee=m(-(L[1][1]-w[1])/s),te=m((L[2][0]-w[0])/s),le=m(-(L[2][1]-w[1])/s),Q=O,z=$;O=0,$=0,q-=Q,M-=z,F-=Q,N-=z;const J=[[q,M,0,0,K-B],[F,N,0,0,te-B],[0,0,q,M,ee-W],[0,0,F,N,le-W]],ye=J_t(J);if(!ye)return;if(p.save(),p.beginPath(),e1t()||!h){p.moveTo(K,ee);const Ge=4,rt=B-K,Be=W-ee;for(let ze=0;ze<Ge;ze++)p.lineTo(K+m((ze+1)*rt/Ge),ee+m(ze*Be/(Ge-1))),ze!=Ge-1&&p.lineTo(K+m((ze+1)*rt/Ge),ee+m((ze+1)*Be/(Ge-1)));p.lineTo(te,le)}else p.moveTo(K,ee),p.lineTo(B,W),p.lineTo(te,le);p.clip(),p.transform(ye[0],ye[2],ye[1],ye[3],B,W),p.translate(y[0]-Q,y[3]-z);let Ne;if(v)Ne=v.canvas,p.scale(x,-x);else{const Ge=l[0],rt=Ge.extent;Ne=Ge.image,p.scale(Xn(rt)/Ne.width,-Xs(rt)/Ne.height)}p.drawImage(Ne,0,0),p.restore()}),v&&(H0(v),yf.push(v.canvas)),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(C,D,R){const A=C.target,L=(A[0][0]-w[0])/s,O=-(A[0][1]-w[1])/s,$=(A[1][0]-w[0])/s,q=-(A[1][1]-w[1])/s,M=(A[2][0]-w[0])/s,F=-(A[2][1]-w[1])/s;p.beginPath(),p.moveTo($,q),p.lineTo(L,O),p.lineTo(M,F),p.closePath(),p.stroke()}),p.restore()),p.canvas}class J$ extends X${constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?r?va(n,r):n:r;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?va(s,o):s;if(f2(l)===0){this.state=dt.EMPTY;return}n&&(a?a=va(a,n):a=n);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=RMe(t,c,l,u);if(!isFinite(h)||h<=0){this.state=dt.EMPTY;return}const d=e.errorThreshold!==void 0?e.errorThreshold:Y$;if(this.triangulation_=new Z$(t,c,l,a,h*d,u),this.triangulation_.getTriangles().length===0){this.state=dt.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let f=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(f[1]=$s(f[1],a[1],a[3]),f[3]=$s(f[3],a[1],a[3])):f=va(f,a)),!f2(f))this.state=dt.EMPTY;else{let p=0,m=0;t.canWrapX()&&(p=Xn(n),m=Math.floor((f[0]-n[0])/p)),I$(f.slice(),t,!0).forEach(v=>{const b=this.sourceTileGrid_.getTileRangeForExtentAndZ(v,this.sourceZ_),x=e.getTileFunction;for(let w=b.minX;w<=b.maxX;w++)for(let C=b.minY;C<=b.maxY;C++){const D=x(this.sourceZ_,w,C,this.pixelRatio_);if(D){const R=m*p;this.sourceTiles_.push({tile:D,offset:R})}}++m}),this.sourceTiles_.length===0&&(this.state=dt.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var C;const n=t.tile;if(!n||n.getState()!==dt.LOADED)return;const r=n.getSize(),s=this.gutter_;let o;const a=AF(n.getData());a?o=a:o=Kbt(yk(n.getData()));const l=[r[0]+2*s,r[1]+2*s],u=o instanceof Float32Array,c=l[0]*l[1],h=u?Float32Array:Uint8Array,d=new h(o.buffer),f=h.BYTES_PER_ELEMENT,p=f*d.length/c,m=d.byteLength/l[1],y=Math.floor(m/f/l[0]),v=c*y;let b=d;if(d.length!==v){b=new h(v);let D=0,R=0;const A=l[0]*y;for(let L=0;L<l[1];++L){for(let O=0;O<A;++O)b[D++]=d[R+O];R+=m/f}}const x=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);x[0]+=t.offset,x[2]+=t.offset;const w=(C=this.clipExtent_)==null?void 0:C.slice();w&&(w[0]+=t.offset,w[2]+=t.offset),e.push({extent:x,clipExtent:w,data:new Uint8Array(b.buffer),dataType:h,bytesPerPixel:p,pixelSize:l})}),this.sourceTiles_.length=0,e.length===0)this.state=dt.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,c;const h=e[0].bytesPerPixel,d=Math.ceil(h/3);for(let f=d-1;f>=0;--f){const p=[];for(let w=0,C=e.length;w<C;++w){const D=e[w],R=D.data,A=D.pixelSize,L=A[0],O=A[1],$=Zs(L,O,yf),q=$.createImageData(L,O),M=q.data;let F=f*3;for(let N=0,B=M.length;N<B;N+=4)M[N]=R[F],M[N+1]=R[F+1],M[N+2]=R[F+2],M[N+3]=255,F+=h;$.putImageData(q,0,0),p.push({extent:D.extent,clipExtent:D.clipExtent,image:$.canvas})}const m=K$(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,p,this.gutter_,!1,!1,!1);for(let w=0,C=p.length;w<C;++w){const R=p[w].image.getContext("2d");H0(R),yf.push(R.canvas)}const y=m.getContext("2d"),v=y.getImageData(0,0,m.width,m.height);H0(y),yf.push(m),u||(c=new Uint8Array(h*v.width*v.height),u=new e[0].dataType(c.buffer));const b=v.data;let x=f*3;for(let w=0,C=b.length;w<C;w+=4)b[w+3]===255?(c[x]=b[w],c[x+1]=b[w+1],c[x+2]=b[w+2]):(c[x]=0,c[x+1]=0,c[x+2]=0),x+=h}this.reprojData_=u,this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(s*this.pixelRatio_)],this.state=dt.LOADED}this.changed()}load(){if(this.state!==dt.IDLE&&this.state!==dt.ERROR)return;this.state=dt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==dt.IDLE&&n!==dt.LOADING)return;e++;const r=To(t,yr.CHANGE,function(){const s=t.getState();(s==dt.LOADED||s==dt.ERROR||s==dt.EMPTY)&&(Qo(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==dt.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Qo),this.sourcesListenerKeys_=null}}class kMe{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return zr(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return zr(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){zr(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function _k(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function $g(i,e,t){return i+"/"+e+"/"+t}function Wp(i){return $g(i[0],i[1],i[2])}function t1t(i){const[e,t,n]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return $g(e,t,n)}function DMe(i){return i.split("/").map(Number)}function LMe(i){return(i[1]<<i[0])+i[2]}function i1t(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}class DL extends kMe{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=DMe(e)[0];this.forEach(r=>{r.tileCoord[0]!==n&&(this.remove(Wp(r.tileCoord)),r.release())})}}const O_={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Q$ extends dy{constructor(e){super(),this.projection=tr(e.projection),this.attributions_=s1e(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=s1e(e),this.changed()}setState(e){this.state_=e,this.changed()}}function s1e(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}class LL{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Cv(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new LL(i,e,t,n)}const MMe=42,e6=256;function n1t(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Bs(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}const Sv=[0,0,0],kp=5;class GC{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,zr(S_t(this.resolutions_,(r,s)=>s-r,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,zr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=em(n)),zr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,zr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:e6,zr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new LL(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Cv(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,u,n),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Cv(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return Cv(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),u=Math.floor(s*l),c=Math.floor(o*l);if(t<r)return Cv(u,u,c,c,n);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return Cv(u,h,c,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Sv);const r=Sv[1],s=Sv[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Sv);const o=Sv[1],a=Sv[2];return Cv(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=Bs(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Bs(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return Rf(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),u=Bs(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/n/u[0],h=a*(l[1]-t)/n/u[1];return r?(c=ag(c,kp)-1,h=ag(h,kp)-1):(c=jT(c,kp),h=jT(h,kp)),_k(o,c,h,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=Bs(this.getTileSize(n),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-t)/a/l[1];return r?(u=ag(u,kp)-1,c=ag(c,kp)-1):(u=jT(u,kp),c=jT(c,kp)),_k(n,u,c,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=yL(this.resolutions_,e,t||0);return $s(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return yMe(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}class r1t extends GC{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function s1t(i,e,t){const n=[],r=[],s=[],o=[],a=[];t=t!==void 0?t:[];const l="SupportedCRS",u="TileMatrix",c="Identifier",h="ScaleDenominator",d="TopLeftCorner",f="TileWidth",p="TileHeight",m=i[l],y=tr(m),v=y.getMetersPerUnit(),b=y.getAxisOrientation().substr(0,2)=="ne";return i[u].sort(function(x,w){return w[h]-x[h]}),i[u].forEach(function(x){let w;if(t.length>0?w=t.find(function(C){return x[c]==C[u]?!0:x[c].includes(":")?!1:i[c]+":"+x[c]===C[u]}):w=!0,w){r.push(x[c]);const C=x[h]*28e-5/v,D=x[f],R=x[p];b?s.push([x[d][1],x[d][0]]):s.push(x[d]),n.push(C),o.push(D==R?D:[D,R]),a.push([x.MatrixWidth,x.MatrixHeight])}}),new r1t({extent:e,origins:s,resolutions:n,matrixIds:r,tileSizes:o,sizes:a})}function t6(i){let e=i.getDefaultTileGrid();return e||(e=l1t(i),i.setDefaultTileGrid(e)),e}function o1t(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=p1(t);if(!Af(s,r)){const o=Xn(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function a1t(i,e,t,n){n=n!==void 0?n:"top-left";const r=IMe(i,e,t);return new GC({extent:i,origin:$_t(i,n),resolutions:r,tileSize:t})}function ML(i){const e=i||{},t=e.extent||tr("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:IMe(t,e.maxZoom,e.tileSize,e.maxResolution)};return new GC(n)}function IMe(i,e,t,n){e=e!==void 0?e:MMe,t=Bs(t!==void 0?t:e6);const r=Xs(i),s=Xn(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function l1t(i,e,t,n){const r=p1(i);return a1t(r,e,t,n)}function p1(i){i=tr(i);let e=i.getExtent();if(!e){const t=180*p2.degrees/i.getMetersPerUnit();e=Rf(-t,-t,t,t)}return e}class OMe extends Q${constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Bs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new DL(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let c=n.minX;c<=n.maxX;++c)for(let h=n.minY;h<=n.maxY;++h)l=$g(t,c,h),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===dt.LOADED,u&&(u=r(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return qi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:t6(e)}getTileCacheForProjection(e){const t=this.getProjection();return zr(t===null||ll(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=Bs(r.getTileSize(e),this.tmpSize);return s==1?o:n1t(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=o1t(n,e,t)),i1t(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,r){}}class PMe extends zf{constructor(e,t){super(e),this.tile=t}}class FMe extends OMe{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let n=e.tileGrid;n===void 0&&t&&(n=ML({extent:p1(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:n,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Bs(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?Bs(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return!t||ll(t,e)?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,n,r,s){const o=this.getTileCacheForProjection(r),a=$g(e,t,n);if(o.containsKey(a)){const y=o.get(a);if(y&&y.key==this.getKey())return y}const l=this.getTileGrid(),u=Math.max.apply(null,l.getResolutions().map((y,v)=>{const b=Bs(l.getTileSize(v)),x=this.getTileSize(v);return Math.max(x[0]/b[0],x[1]/b[1])})),c=this.getTileGridForProjection(s),h=this.getTileGridForProjection(r),d=[e,t,n],f=this.getTileCoordForTileUrlFunction(d,r),p=Object.assign({sourceProj:s,sourceTileGrid:c,targetProj:r,targetTileGrid:h,tileCoord:d,wrappedTileCoord:f,pixelRatio:u,gutter:this.getGutterForProjection(s),getTileFunction:(y,v,b,x)=>this.getTile(y,v,b,x,s)},this.tileOptions),m=new J$(p);return m.key=this.getKey(),m}getTile(e,t,n,r,s){const o=this.getProjection();if(o&&s&&!ll(o,s))return this.getReprojTile_(e,t,n,s,o);const a=this.getTileSize(e),l=$g(e,t,n);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const u=this.loader_;function c(){return ZLe(function(){return u(e,t,n)})}const h=Object.assign({tileCoord:[e,t,n],loader:c,size:a},this.tileOptions),d=new X$(h);return d.key=this.getKey(),d.addEventListener(yr.CHANGE,this.handleTileChange_),this.tileCache.set(l,d),d}handleTileChange_(e){const t=e.target,n=yi(t),r=t.getState();let s;r==dt.LOADING?(this.tileLoadingKeys_[n]=!0,s=O_.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==dt.ERROR?O_.TILELOADERROR:r==dt.LOADED?O_.TILELOADEND:void 0),s&&this.dispatchEvent(new PMe(s,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ll(t,e)))return this.tileGrid;const n=yi(e);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=t6(e)),this.tileGridForProjection_[n]}setTileGridForProjection(e,t){const n=tr(e);if(n){const r=yi(n);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=t)}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||ll(t,e))return this.tileCache;const n=yi(e);return n in this.tileCacheForProjection_||(this.tileCacheForProjection_[n]=new DL(.1)),this.tileCacheForProjection_[n]}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const r in this.tileCacheForProjection_){const s=this.tileCacheForProjection_[r];s.expireCache(s==n?t:{})}}clear(){super.clear();for(const e in this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}function u1t(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function c1t(i,e){if(!i)return!1;if(i===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,n=nl;return t===n.CMYK||t===n.YCbCr||t===n.CIELab||t===n.ICCLab}const o1e="STATISTICS_MAXIMUM",a1e="STATISTICS_MINIMUM",o3=256;let a3;function h1t(){return a3||(a3=new ZDe),a3}function d1t(i){try{return i.getBoundingBox()}catch{return[0,0,i.getWidth(),i.getHeight()]}}function f1t(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function p1t(i,e){try{return i.getResolution(e)}catch{return[e.getWidth()/i.getWidth(),e.getHeight()/i.getHeight()]}}function g1t(i){const e=i.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let n=tr(t);if(!n){const r=Ube(e.ProjLinearUnitsGeoKey);r&&(n=new g2({code:t,units:r}))}return n}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let n=tr(t);if(!n){const r=Ube(e.GeogAngularUnitsGeoKey);r&&(n=new g2({code:t,units:r}))}return n}return null}function m1t(i){return i.getImageCount().then(function(e){const t=new Array(e);for(let n=0;n<e;++n)t[n]=i.getImage(n);return Promise.all(t)})}function y1t(i,e){let t;return i.blob?t=eLe(i.blob):i.overviews?t=tLe(i.url,i.overviews,e):t=QDe(i.url,e),t.then(m1t)}function Bw(i,e,t,n,r){if(Array.isArray(i)){const s=i.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(n);throw r(o),o}for(let o=0;o<s;++o)Bw(i[o],e[o],t,n,r);return}if(e=e,Math.abs(i-e)>t*i)throw new Error(n)}function v1t(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function _1t(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}class NMe extends FMe{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const n=this,r=new Array(t);for(let s=0;s<t;++s)r[s]=y1t(this.sourceInfo_[s],this.sourceOptions_);Promise.all(r).then(function(s){n.configure_(s)}).catch(function(s){Ybe(s),n.error_=s,n.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let n=t.length-1;n>=0;--n){const r=t[n],s=g1t(r);if(s){this.projection=s;break}}}configure_(e){let t,n,r,s,o;const a=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let c=0;const h=e.length;for(let m=0;m<h;++m){const y=[],v=[];e[m].forEach(A=>{u1t(A)?v.push(A):y.push(A)});const b=y.length;if(v.length>0&&v.length!==b)throw new Error(`Expected one mask per image found ${v.length} masks and ${b} images`);let x,w;const C=new Array(b),D=new Array(b),R=new Array(b);l[m]=new Array(b),u[m]=new Array(b);for(let A=0;A<b;++A){const L=y[A],O=L.getGDALNoData();u[m][A]=L.getGDALMetadata(0),l[m][A]=O;const $=this.sourceInfo_[m].bands;a[m]=$?$.length:L.getSamplesPerPixel();const q=b-(A+1);x||(x=d1t(L)),w||(w=f1t(L));const M=p1t(L,y[0]);R[q]=M[0];const F=[L.getTileWidth(),L.getTileHeight()];F[0]!==F[1]&&F[1]<o3&&(F[0]=o3,F[1]=o3),C[q]=F;const N=M[0]/Math.abs(M[1]);D[q]=[F[0],F[1]/N]}if(t?va(t,x,t):t=x,!n)n=w;else{const A=`Origin mismatch for source ${m}, got [${w}] but expected [${n}]`;Bw(n,w,0,A,this.viewRejector)}if(!o)o=R,this.resolutionFactors_[m]=1;else{o.length-c>R.length&&(c=o.length-R.length);const A=o[o.length-1]/R[R.length-1];this.resolutionFactors_[m]=A;const L=R.map($=>$*=A),O=`Resolution mismatch for source ${m}, got [${L}] but expected [${o}]`;Bw(o.slice(c,o.length),L,.02,O,this.viewRejector)}r?Bw(r.slice(c,r.length),D,.01,`Tile size mismatch for source ${m}`,this.viewRejector):r=D,s?Bw(s.slice(c,s.length),C,0,`Tile size mismatch for source ${m}`,this.viewRejector):s=C,this.sourceImagery_[m]=y.reverse(),this.sourceMasks_[m]=v.reverse()}for(let m=0,y=this.sourceImagery_.length;m<y;++m){const v=this.sourceImagery_[m];for(;v.length<o.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let m=0;m<h;++m){if(this.sourceInfo_[m].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[m].length){this.addAlpha_=!0;break}const y=l[m],v=this.sourceInfo_[m].bands;if(v){for(let b=0;b<v.length;++b)if(y[v[b]-1]!==null){this.addAlpha_=!0;break e}continue}for(let b=0;b<y.length;++b)if(y[b]!==null){this.addAlpha_=!0;break e}}let d=this.addAlpha_?1:0;for(let m=0;m<h;++m)d+=a[m];this.bandCount=d;const f=new GC({extent:t,minZoom:c,origin:n,resolutions:o,tileSizes:r});this.tileGrid=f,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:wF(Qc(t),this.projection),extent:SL(t,this.projection),zoom:p})}loadTile_(e,t,n){const r=this.getTileSize(e),s=this.sourceImagery_.length,o=new Array(s*2),a=this.nodataValues_,l=this.sourceInfo_,u=h1t();for(let c=0;c<s;++c){const h=l[c],d=this.resolutionFactors_[c],f=[Math.round(t*(r[0]*d)),Math.round(n*(r[1]*d)),Math.round((t+1)*(r[0]*d)),Math.round((n+1)*(r[1]*d))],p=this.sourceImagery_[c][e];let m;h.bands&&(m=h.bands.map(function(w){return w-1}));let y;"nodata"in h&&h.nodata!==null?y=h.nodata:m?y=m.map(function(w){return a[c][w]}):y=a[c];const v={window:f,width:r[0],height:r[1],samples:m,fillValue:y,pool:u,interleave:!1};c1t(this.convertToRGB_,p)?o[c]=p.readRGB(v):o[c]=p.readRasters(v);const b=s+c,x=this.sourceMasks_[c][e];if(!x){o[b]=Promise.resolve(null);continue}o[b]=x.readRasters({window:f,width:r[0],height:r[1],samples:[0],pool:u,interleave:!1})}return Promise.all(o).then(this.composeTile_.bind(this,r)).catch(function(c){throw Ybe(c),c})}composeTile_(e,t){const n=this.metadata_,r=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,c=this.addAlpha_,h=e[0]*e[1],d=h*o;let f;u?f=new Uint8Array(d):f=new Float32Array(d);let p=0;for(let m=0;m<h;++m){let y=c;for(let v=0;v<s;++v){const b=r[v];let x=b.min,w=b.max,C,D;if(u){const R=n[v][0];x===void 0&&(R&&a1e in R?x=parseFloat(R[a1e]):x=v1t(t[v][0])),w===void 0&&(R&&o1e in R?w=parseFloat(R[o1e]):w=_1t(t[v][0])),C=255/(w-x),D=-x*C}for(let R=0;R<a[v];++R){const A=t[v][R][m];let L;if(u?L=$s(C*A+D,0,255):L=A,!c)f[p]=L;else{let O=b.nodata;if(O===void 0){let q;b.bands?q=b.bands[R]-1:q=R,O=l[v][q]}const $=isNaN(O);(!$&&A!==O||$&&!isNaN(A))&&(y=!1,f[p]=L)}p++}if(!y){const R=s+v,A=t[R];A&&!A[0][m]&&(y=!0)}}c&&(y||(f[p]=255),p++)}return f}}NMe.prototype.getView;const Er={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class $Me extends dy{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Er.OPACITY]=e.opacity!==void 0?e.opacity:1,zr(typeof t[Er.OPACITY]=="number","Layer opacity must be a number"),t[Er.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Er.Z_INDEX]=e.zIndex,t[Er.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Er.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Er.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Er.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=$s(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return qi()}getLayerStatesArray(e){return qi()}getExtent(){return this.get(Er.EXTENT)}getMaxResolution(){return this.get(Er.MAX_RESOLUTION)}getMinResolution(){return this.get(Er.MIN_RESOLUTION)}getMinZoom(){return this.get(Er.MIN_ZOOM)}getMaxZoom(){return this.get(Er.MAX_ZOOM)}getOpacity(){return this.get(Er.OPACITY)}getSourceState(){return qi()}getVisible(){return this.get(Er.VISIBLE)}getZIndex(){return this.get(Er.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Er.EXTENT,e)}setMaxResolution(e){this.set(Er.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Er.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Er.MAX_ZOOM,e)}setMinZoom(e){this.set(Er.MIN_ZOOM,e)}setOpacity(e){zr(typeof e=="number","Layer opacity must be a number"),this.set(Er.OPACITY,e)}setVisible(e){this.set(Er.VISIBLE,e)}setZIndex(e){this.set(Er.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const fu={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},lo={ANIMATING:0,INTERACTING:1},Ac={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function l1e(i,e,t){return function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+c,f=i[2]-l/2+c,p=i[1]+u/2+h,m=i[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),p>m&&(p=(m+p)/2,m=p);let y=$s(n[0],d,f),v=$s(n[1],p,m);if(o&&t&&r){const b=30*r;y+=-b*Math.log(1+Math.max(0,d-n[0])/b)+b*Math.log(1+Math.max(0,n[0]-f)/b),v+=-b*Math.log(1+Math.max(0,p-n[1])/b)+b*Math.log(1+Math.max(0,n[1]-m)/b)}return[y,v]}}function b1t(i){return i}function i6(i,e,t,n){const r=Xn(e)/t[0],s=Xs(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function n6(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),$s(n,t/2,e*2)}function x1t(i,e,t,n){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=i[0],u=i[i.length-1],c=t?i6(l,t,o,n):l;if(a)return e?n6(r,c,u):$s(r,u,c);const h=Math.min(c,r),d=Math.floor(yL(i,h,s));return i[d]>c&&d<i.length-1?i[d+1]:i[d]}}}function w1t(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const c=r?i6(e,r,l,s):e;if(u)return n?n6(o,c,t):$s(o,t,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(i)-h),f=-a*(.5-h)+.5,p=Math.min(c,o),m=Math.floor(Math.log(e/p)/Math.log(i)+f),y=Math.max(d,m),v=e/Math.pow(i,y);return $s(v,t,c)}}}function u1e(i,e,t,n,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const u=n?i6(i,n,a,r):i;return!t||!l?$s(s,e,u):n6(s,u,e)}}}function E1t(i){if(i!==void 0)return 0}function c1e(i){if(i!==void 0)return i}function C1t(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function S1t(i){const e=i===void 0?OA(5):i;return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}const l3=0;class h1e extends dy{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=P$(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&rbt(),e.center&&(e.center=Rp(e.center,this.projection_)),e.extent&&(e.extent=Ic(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Ac)delete t[a];this.setProperties(t,!0);const n=A1t(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=T1t(e),s=n.constraint,o=R1t(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=Rp(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Rp(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===t){n&&GT(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<t;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||Wbt,callback:n};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=C0(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}k1t(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(lo.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[lo.ANIMATING]>0}getInteracting(){return this.hints_[lo.INTERACTING]>0}cancelAnimations(){this.setHint(lo.ANIMATING,-this.hints_[lo.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&GT(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const y=d+h*(p-d),v=f+h*(m-f);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?C0(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(lo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&GT(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],ebt(n,e-this.getRotation()),Q_t(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&wF(e,this.getProjection())}getCenterInternal(){return this.get(Ac.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return SL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();zr(t,"The view center is not defined");const n=this.getResolution();zr(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return zr(r!==void 0,"The view rotation is not defined"),iMe(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ac.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ic(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Xn(e)/t[0],r=Xs(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(Ac.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return function(o){return Math.log(n/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=u3(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=yL(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=$s(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,$s(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(zr(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){zr(!py(e),"Cannot fit empty extent provided as `geometry`");const r=Ic(e,this.getProjection());n=t1e(r)}else if(e.getType()==="Circle"){const r=Ic(e.getExtent(),this.getProjection());n=t1e(r),n.rotate(this.getRotation(),Qc(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*n-s[h+1]*r,p=s[h]*r+s[h+1]*n;a=Math.min(a,f),l=Math.min(l,p),u=Math.max(u,f),c=Math.max(c,p)}return[a,l,u,c]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Qc(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*c,p=d[1]*h+d[0]*c,m=this.getConstrainedCenter([f,p],l),y=t.callback?t.callback:d2;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},y):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),GT(y,!0))}centerOn(e,t,n){this.centerOnInternal(Rp(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(u3(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=u3(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=wF(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Rp(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Rp(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Rp(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Ac.ROTATION)!==r&&this.set(Ac.ROTATION,r),this.get(Ac.RESOLUTION)!==o&&(this.set(Ac.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Ac.CENTER)||!dk(this.get(Ac.CENTER),a))&&this.set(Ac.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!dk(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:Hbt,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(lo.INTERACTING,1)}endInteraction(e,t,n){n=n&&Rp(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(lo.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function GT(i,e){setTimeout(function(){i(e)},0)}function T1t(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return l1e(i.extent,i.constrainOnlyCenter,t)}const e=P$(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,l1e(t,!1,!1)}return b1t}function A1t(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:l3,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,c=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=P$(i.projection,"EPSG:3857"),f=d.getExtent();let p=i.constrainOnlyCenter,m=i.extent;if(!u&&!m&&d.isGlobal()&&(p=!1,m=f),i.resolutions!==void 0){const y=i.resolutions;t=y[o],n=y[a]!==void 0?y[a]:y[y.length-1],i.constrainResolution?e=x1t(y,c,!p&&m,h):e=u1e(t,n,c,!p&&m,h)}else{const v=(f?Math.max(Xn(f),Xs(f)):360*p2.degrees/d.getMetersPerUnit())/e6/Math.pow(2,l3),b=v/Math.pow(2,28-l3);t=i.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=v/Math.pow(l,a):n=b),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=w1t(l,t,n,c,!p&&m,h):e=u1e(t,n,c,!p&&m,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function R1t(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?S1t():t===!1?c1e:typeof t=="number"?C1t(t):c1e}return E1t}function k1t(i){return!(i.sourceCenter&&i.targetCenter&&!dk(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function u3(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}class r6 extends $Me{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Er.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Er.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Qo(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=To(e,yr.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof h1e?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return D1t(r,t.viewState)&&(!s||Cs(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const r=e instanceof h1e?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Er.MAP,e)}getMapInternal(){return this.get(Er.MAP)}setMap(e){this.mapPrecomposeKey_&&(Qo(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Qo(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=To(e,fu.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);zr(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=To(this,yr.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Er.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function D1t(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}class L1t extends r6{constructor(e){e=e||{},super(e)}}const ui={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class BMe extends OC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return qi()}getData(e){return null}prepareFrame(e){return qi()}renderFrame(e,t){return qi()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(r,s)=>{const o=this.loadedTileCallback.bind(this,n,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ui.LOADED||t.getState()===ui.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ui.LOADED&&t!=ui.ERROR&&e.addEventListener(yr.CHANGE,this.boundHandleImageChange_),t==ui.IDLE&&(e.load(),t=e.getState()),t==ui.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class PA extends zf{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}class s6{constructor(){Ye(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(mk(),{get:(e,t)=>{if(typeof mk()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const o=t[++n];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}function M1t(i){return typeof i=="string"?i:a6(i)}const I1t=1024,vw={};let c3=0;function O1t(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function d1e(i){const e=ko.lchuv(cb.xyz(i));return e[3]=i[3],e}function P1t(i){const e=ko.rgb(n4.xyz(i));return e[3]=i[3],e}function o6(i){if(vw.hasOwnProperty(i))return vw[i];if(c3>=I1t){let t=0;for(const n in vw)t++&3||(delete vw[n],--c3)}const e=QAe(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+i+'" as color');return jMe(e),vw[i]=e,++c3,e}function W0(i){return Array.isArray(i)?i:o6(i)}function jMe(i){return i[0]=$s(i[0]+.5|0,0,255),i[1]=$s(i[1]+.5|0,0,255),i[2]=$s(i[2]+.5|0,0,255),i[3]=$s(i[3],0,1),i}function a6(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}function F1t(i){try{return o6(i),!0}catch{return!1}}const f1e=[];let zv=null;function N1t(){zv=Zs(1,1,void 0,{willReadFrequently:!0})}class l6 extends BMe{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Hl(),this.pixelTransform=Hl(),this.inversePixelTransform=Hl(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){zv||N1t(),zv.clearRect(0,0,1,1);let r;try{zv.drawImage(e,t,n,1,1,0,0,1,1),r=zv.getImageData(0,0,1,1).data}catch{return zv=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&f1(W0(e.style.backgroundColor),W0(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Zs();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=em(n),s=EL(n),o=wL(n),a=xL(n);Wo(t.coordinateToPixelTransform,r),Wo(t.coordinateToPixelTransform,s),Wo(t.coordinateToPixelTransform,o),Wo(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Wo(l,r),Wo(l,s),Wo(l,o),Wo(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Xn(n)/r*o),l=Math.round(Xs(n)/r*o);Jc(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),M_t(this.inversePixelTransform,this.pixelTransform);const u=O_t(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new PA(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(fu.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(fu.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new s6),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(fu.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(fu.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,o,a){const l=s/2,u=o/2,c=r/t,h=-c,d=-e[0]+a,f=-e[1];return Jc(this.tempTransform,l,u,c,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class $1t extends l6{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],n=e.pixelRatio,r=e.viewState,s=r.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=va(l,Ic(t.extent,r.projection))),!a[lo.ANIMATING]&&!a[lo.INTERACTING]&&!py(l))if(o){const u=r.projection,c=o.getImage(l,s,n,u);c&&(this.loadImage(c)?this.image_=c:c.getState()===ui.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=Wo(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!Af(s,r))return null;const o=this.image_.getExtent(),a=this.image_.getImage(),l=Xn(o),u=Math.floor(a.width*((r[0]-o[0])/l));if(u<0||u>=a.width)return null;const c=Xs(o),h=Math.floor(a.height*((o[3]-r[1])/c));return h<0||h>=a.height?null:this.getImageData(a,u,h)}renderFrame(e,t){const n=this.image_,r=n.getExtent(),s=n.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],c=e.pixelRatio,h=e.viewState,d=h.center,f=h.resolution,p=c*o/(f*l),m=c*a/(f*l);this.prepareContainer(e,t);const y=this.context.canvas.width,v=this.context.canvas.height,b=this.getRenderContext(e);let x=!1,w=!0;if(u.extent){const L=Ic(u.extent,h.projection);w=Cs(L,e.extent),x=w&&!Mc(L,e.extent),x&&this.clipUnrotated(b,e,L)}const C=n.getImage(),D=Jc(this.tempTransform,y/2,v/2,p,m,0,l*(r[0]-d[0])/o,l*(d[1]-r[3])/a);this.renderedResolution=a*c/l;const R=C.width*D[0],A=C.height*D[3];if(this.getLayer().getSource().getInterpolate()||(b.imageSmoothingEnabled=!1),this.preRender(b,e),w&&R>=.5&&A>=.5){const L=D[4],O=D[5],$=u.opacity;$!==1&&(b.save(),b.globalAlpha=$),b.drawImage(C,0,0,+C.width,+C.height,L,O,R,A),$!==1&&b.restore()}return this.postRender(this.context,e),x&&b.restore(),b.imageSmoothingEnabled=!0,this.container}}class B1t extends L1t{constructor(e){super(e)}createRenderer(){return new $1t(this)}getData(e){return super.getData(e)}}const ug={ADD:"add",REMOVE:"remove"},p1e={LENGTH:"length"};class UT extends zf{constructor(e,t,n){super(e),this.element=t,this.index=n}}let RF=class extends dy{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(p1e.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new UT(ug.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new UT(ug.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new UT(ug.REMOVE,r,e)),this.dispatchEvent(new UT(ug.ADD,t,e))}updateLength_(){this.set(p1e.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}};class Tv extends zf{constructor(e,t){super(e),this.layer=t}}const h3={LAYERS:"layers"};class b2 extends $Me{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(h3.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new RF(n.slice(),{unique:!0}):zr(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new RF(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Qo),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(To(e,ug.ADD,this.handleLayersAdd_,this),To(e,ug.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Qo);MC(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new Tv("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[To(e,k$.PROPERTYCHANGE,this.handleLayerChange_,this),To(e,yr.CHANGE,this.handleLayerChange_,this)];e instanceof b2&&t.push(To(e,"addlayer",this.handleLayerGroupAdd_,this),To(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[yi(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Tv("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Tv("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Tv("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=yi(t);this.listenerKeys_[n].forEach(Qo),delete this.listenerKeys_[n],this.dispatchEvent(new Tv("removelayer",t)),this.changed()}getLayers(){return this.get(h3.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new Tv("removelayer",n[r]))}this.set(h3.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=va(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class ss{constructor(e){this.name=e}toString(){return this.name}}ss.GeoTIFF=new ss("GeoTIFF");ss.ImageStatic=new ss("ImageStatic");ss.PMTilesRaster=new ss("PMTilesRaster");ss.PMTilesVector=new ss("PMTilesVector");ss.TileJSON=new ss("TileJSON");ss.TileWMS=new ss("TileWMS");ss.WMTS=new ss("WMTS");ss.XYZ=new ss("XYZ");class u6 extends IC{constructor(e,t,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=typeof r=="function"?ui.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(yr.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ui.IDLE&&this.loader){this.state=ui.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;ZLe(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=ui.LOADED}).catch(n=>{this.state=ui.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function j1t(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[ck(n,yr.LOAD,function(){o=!0,s||e()})];return n.src&&W$?(s=!0,n.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(ck(n,yr.ERROR,t)),function(){r=!1,a.forEach(Qo)}}function z1t(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s),e&&(i.src=e)})}function zMe(i,e){return e&&(i.src=e),i.src&&W$?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):z1t(i)}function GMe(i,e){return e&&(i.src=e),i.src&&W$&&Zbt?i.decode().then(()=>createImageBitmap(i)).catch(t=>{if(i.complete&&i.width)return i;throw t}):zMe(i)}function kF(i){return Array.isArray(i)?Math.min(...i):i}class G1t extends u6{constructor(e,t,n,r,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?va(n,u):n,h=Qc(c),d=vk(e,t,h,r),f=Y$,p=new Z$(e,t,c,l,d*f,r),m=p.calculateSourceExtent(),y=py(m)?null:o(m,d,s),v=y?ui.IDLE:ui.EMPTY,b=y?y.getPixelRatio():1;super(n,r,b,v),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=p,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=y,this.sourcePixelRatio_=b,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ui.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ui.LOADED){const t=Xn(this.targetExtent_)/this.targetResolution_,n=Xs(this.targetExtent_)/this.targetResolution_;this.canvas_=K$(t,n,this.sourcePixelRatio_,kF(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ui.IDLE){this.state=ui.LOADING,this.changed();const e=this.sourceImage_.getState();e==ui.LOADED||e==ui.ERROR?this.reproject_():(this.sourceListenerKey_=To(this.sourceImage_,yr.CHANGE,function(t){const n=this.sourceImage_.getState();(n==ui.LOADED||n==ui.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){Qo(this.sourceListenerKey_),this.sourceListenerKey_=null}}const d_=4,d3={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class U1t extends zf{constructor(e,t){super(e),this.image=t}}class q1t extends Q${constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const n=yL(t,e,0);e=t[n]}return e}getImage(e,t,n,r){const s=this.getProjection();if(!s||!r||ll(s,r))return s&&(r=s),this.getImageInternal(e,t,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ll(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&FC(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new G1t(s,r,e,t,n,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,n,r){if(this.loader){const s=H1t(e,t,n,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Mc(this.wantedExtent_,s)||Mc(this.image.getExtent(),s))&&(this.wantedResolution_&&kF(this.wantedResolution_)===o||kF(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new u6(s,o,n,this.loader),this.image.addEventListener(yr.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let n;switch(t.getState()){case ui.LOADING:this.loading=!0,n=d3.IMAGELOADSTART;break;case ui.LOADED:this.loading=!1,n=d3.IMAGELOADEND;break;case ui.ERROR:this.loading=!1,n=d3.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new U1t(n,t))}}function V1t(i,e){i.getImage().src=e}function H1t(i,e,t,n){const r=e/t,s=Qc(i),o=ag(Xn(i)/r,d_),a=ag(Xs(i)/r,d_),l=ag((n-1)*o/2,d_),u=o+2*l,c=ag((n-1)*a/2,d_),h=a+2*c;return iMe(s,r,0,[u,h])}function W1t(i){const e=i.load||GMe,t=i.imageExtent,n=new Image;return i.crossOrigin!==null&&(n.crossOrigin=i.crossOrigin),()=>e(n,i.url).then(r=>{const s=Xn(t)/r.width,o=Xs(t)/r.height;return{image:r,extent:t,resolution:s!==o?[s,o]:o,pixelRatio:1}})}class X1t extends q1t{constructor(e){const t=e.crossOrigin!==void 0?e.crossOrigin:null,n=e.imageLoadFunction!==void 0?e.imageLoadFunction:V1t;super({attributions:e.attributions,interpolate:e.interpolate,projection:tr(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new u6(this.imageExtent_,void 0,1,W1t({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(r,s)=>(this.image.setImage(r),n(this.image,s),GMe(r))})),this.image.addEventListener(yr.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,n,r){return Cs(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}class IL extends zC{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=dt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=dt.ERROR,this.unlistenImage_(),this.image_=Y1t(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=dt.LOADED:this.state=dt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==dt.ERROR&&(this.state=dt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==dt.IDLE&&(this.state=dt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=j1t(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Y1t(){const i=Zs(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class wb extends zC{constructor(e,t,n,r,s,o,a,l,u,c,h,d){super(s,dt.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const y=p?va(f,p):f;if(f2(y)===0){this.state=dt.EMPTY;return}const v=e.getExtent();v&&(m?m=va(m,v):m=v);const b=r.getResolution(this.wrappedTileCoord_[0]),x=RMe(e,n,y,b);if(!isFinite(x)||x<=0){this.state=dt.EMPTY;return}const w=c!==void 0?c:Y$;if(this.triangulation_=new Z$(e,n,y,m,x*w,b),this.triangulation_.getTriangles().length===0){this.state=dt.EMPTY;return}this.sourceZ_=t.getZForResolution(x);let C=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(C[1]=$s(C[1],m[1],m[3]),C[3]=$s(C[3],m[1],m[3])):C=va(C,m)),!f2(C))this.state=dt.EMPTY;else{let D=0,R=0;e.canWrapX()&&(D=Xn(v),R=Math.floor((C[0]-v[0])/D)),I$(C.slice(),e,!0).forEach(L=>{const O=t.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let $=O.minX;$<=O.maxX;$++)for(let q=O.minY;q<=O.maxY;q++){const M=u(this.sourceZ_,$,q,a);if(M){const F=R*D;this.sourceTiles_.push({tile:M,offset:F})}}++R}),this.sourceTiles_.length===0&&(this.state=dt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var r;const n=t.tile;if(n&&n.getState()==dt.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:s,clipExtent:o,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=dt.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=K$(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=dt.LOADED}this.changed()}load(){if(this.state==dt.IDLE){this.state=dt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==dt.IDLE||n==dt.LOADING){e++;const r=To(t,yr.CHANGE,function(s){const o=t.getState();(o==dt.LOADED||o==dt.ERROR||o==dt.EMPTY)&&(Qo(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==dt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Qo),this.sourcesListenerKeys_=null}release(){this.canvas_&&(H0(this.canvas_.getContext("2d")),yf.push(this.canvas_),this.canvas_=null),super.release()}}function Z1t(i,e){const t=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=o[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-o[2]-1).toString()})}}function UMe(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Z1t(i[r],e);return DF(n)}function DF(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const r=LMe(e),s=C0(r,i.length);return i[s](e,t,n)}}function qMe(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}class OL extends OMe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===OL.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=yi(t),r=t.getState();let s;r==dt.LOADING?(this.tileLoadingKeys_[n]=!0,s=O_.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==dt.ERROR?O_.TILELOADERROR:r==dt.LOADED?O_.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new PMe(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=qMe(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(UMe(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const r=$g(e,t,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}class PL extends OL{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:K1t,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:IL,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ll(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ll(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ll(t,e)))return this.tileGrid;const n=yi(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=t6(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||ll(t,e))return this.tileCache;const n=yi(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new DL(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,u!==void 0?dt.IDLE:dt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(yr.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||ll(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,n];let u;const c=Wp(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),p=this.getTileCoordForTileUrlFunction(l,s),m=new wb(o,d,s,f,l,p,this.getTilePixelRatio(r),this.getGutter(),(y,v,b,x)=>this.getTileInternal(y,v,b,x,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=h,u?(m.interimTile=u,m.refreshInterimChain(),a.replace(c,m)):a.set(c,m),m}getTileInternal(e,t,n,r,s){let o=null;const a=$g(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,n,r,s,l),u.getState()==dt.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=tr(e);if(n){const r=yi(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function K1t(i,e){i.getImage().src=e}function J1t(i,e,t,n){const r=document.createElement("script"),s="olc_"+yi(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=i+(i.includes("?")?"&":"?")+(n||"callback")+"="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(r)}class Q1t extends PL{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:tr("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)J1t(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=tr("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const u=$C(t,n);r=nMe(e.bounds,u)}const s=p1(n),o=e.minzoom||0,a=e.maxzoom||22,l=ML({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=UMe(e.tiles,l),e.attribution&&!this.getAttributions()){const u=r!==void 0?r:s;this.setAttributions(function(c){return Cs(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const cg={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class VMe extends r6{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(cg.PRELOAD)}setPreload(e){this.set(cg.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(cg.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(cg.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class HMe extends l6{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Au(),this.tmpTileRange_=new LL(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),r=t.getUseInterimTilesOnError();return n==dt.LOADED||n==dt.EMPTY||n==dt.ERROR&&!r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,n,s,o);return u.getState()==dt.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=Wo(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!Af(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(t.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const f=c.getTileCoordForCoordAndZ(r,d),p=u.getTile(d,f[1],f[2],o,a);if(!(p instanceof IL||p instanceof wb)||p instanceof wb&&p.getState()===dt.EMPTY)return null;if(p.getState()!==dt.LOADED)continue;const m=c.getOrigin(d),y=Bs(c.getTileSize(d)),v=c.getResolution(d),b=Math.floor(h*((r[0]-m[0])/v-f[1]*y[0])),x=Math.floor(h*((m[1]-r[1])/v-f[2]*y[1])),w=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),b+w,x+w)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),p=f.getZForResolution(o,h.zDirection),m=f.getResolution(p);let y=e.extent;const v=e.viewState.resolution,b=h.getTilePixelRatio(u);this.prepareContainer(e,t);const x=this.context.canvas.width,w=this.context.canvas.height,C=n.extent&&Ic(n.extent);C&&(y=va(y,Ic(n.extent)));const D=m*x/2/b,R=m*w/2/b,A=[a[0]-D,a[1]-R,a[0]+D,a[1]+R],L=f.getTileRangeForExtentAndZ(y,p),O={};O[p]={};const $=this.createLoadedTileFinder(h,s,O),q=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;const F=l?_F(r.center,v,l,e.size):void 0;for(let le=L.minX;le<=L.maxX;++le)for(let Q=L.minY;Q<=L.maxY;++Q){if(l&&!f.tileCoordIntersectsViewport([p,le,Q],F))continue;const z=this.getTile(p,le,Q,e);if(this.isDrawableTile(z)){const Ne=yi(this);if(z.getState()==dt.LOADED){O[p][z.tileCoord.toString()]=z;let Ge=z.inTransition(Ne);Ge&&n.opacity!==1&&(z.endTransition(Ne),Ge=!1),!this.newTiles_&&(Ge||!this.renderedTiles.includes(z))&&(this.newTiles_=!0)}if(z.getAlpha(Ne,e.time)===1)continue}const J=f.getTileCoordChildTileRange(z.tileCoord,M,q);let ye=!1;J&&(ye=$(p+1,J)),ye||f.forEachTileCoordParentTileRange(z.tileCoord,$,M,q)}const N=m/o*u/b,B=this.getRenderContext(e);Jc(this.tempTransform,x/2,w/2,N,N,0,-x/2,-w/2),C&&this.clipUnrotated(B,e,C),h.getInterpolate()||(B.imageSmoothingEnabled=!1),this.preRender(B,e),this.renderedTiles.length=0;let W=Object.keys(O).map(Number);W.sort(qh);let K,ee,te;n.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?W=W.reverse():(K=[],ee=[]);for(let le=W.length-1;le>=0;--le){const Q=W[le],z=h.getTilePixelSize(Q,u,s),ye=f.getResolution(Q)/m,Ne=z[0]*ye*N,Ge=z[1]*ye*N,rt=f.getTileCoordForCoordAndZ(em(A),Q),Be=f.getTileCoordExtent(rt),ze=Wo(this.tempTransform,[b*(Be[0]-A[0])/m,b*(A[3]-Be[3])/m]),lt=b*h.getGutterForProjection(s),xt=O[Q];for(const Mt in xt){const Ct=xt[Mt],gi=Ct.tileCoord,Wt=rt[1]-gi[1],Qi=Math.round(ze[0]-(Wt-1)*Ne),He=rt[2]-gi[2],ge=Math.round(ze[1]-(He-1)*Ge),se=Math.round(ze[0]-Wt*Ne),re=Math.round(ze[1]-He*Ge),pe=Qi-se,I=ge-re,G=p===Q,Z=G&&Ct.getAlpha(yi(this),e.time)!==1;let ie=!1;if(!Z)if(K){te=[se,re,se+pe,re,se+pe,re+I,se,re+I];for(let me=0,_e=K.length;me<_e;++me)if(p!==Q&&Q<ee[me]){const xe=K[me];Cs([se,re,se+pe,re+I],[xe[0],xe[3],xe[4],xe[7]])&&(ie||(B.save(),ie=!0),B.beginPath(),B.moveTo(te[0],te[1]),B.lineTo(te[2],te[3]),B.lineTo(te[4],te[5]),B.lineTo(te[6],te[7]),B.moveTo(xe[6],xe[7]),B.lineTo(xe[4],xe[5]),B.lineTo(xe[2],xe[3]),B.lineTo(xe[0],xe[1]),B.clip())}K.push(te),ee.push(Q)}else B.clearRect(se,re,pe,I);this.drawTileImage(Ct,e,se,re,pe,I,lt,G),K&&!Z?(ie&&B.restore(),this.renderedTiles.unshift(Ct)):this.renderedTiles.push(Ct),this.updateUsedTiles(e.usedTiles,h,Ct)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!FC(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,h,f,u,s,y,p,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender(this.context,e),n.extent&&B.restore(),B.imageSmoothingEnabled=!0,this.container}drawTileImage(e,t,n,r,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(t),h=yi(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(h,t.time):1),p=f!==c.globalAlpha;p&&(c.save(),c.globalAlpha=f),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,r,s,o),p&&c.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=(function(r,s,o){const a=yi(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const r=yi(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}manageTilePyramid(e,t,n,r,s,o,a,l,u){const c=yi(t);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=e.tileQueue,f=n.getMinZoom(),p=e.viewState.rotation,m=p?_F(e.viewState.center,e.viewState.resolution,p,e.size):void 0;let y=0,v,b,x,w,C,D;for(D=f;D<=a;++D)for(b=n.getTileRangeForExtentAndZ(o,D,b),x=n.getResolution(D),w=b.minX;w<=b.maxX;++w)for(C=b.minY;C<=b.maxY;++C)p&&!n.tileCoordIntersectsViewport([D,w,C],m)||(a-D<=l?(++y,v=t.getTile(D,w,C,r,s),v.getState()==dt.IDLE&&(h[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,c,n.getTileCoordCenter(v.tileCoord),x])),u!==void 0&&u(v)):t.useTile(D,w,C,s));t.updateCacheSize(y,s)}}class g1e extends VMe{constructor(e){super(e)}createRenderer(){return new HMe(this)}}class FL{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bs(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new FL({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return qi()}getImage(e){return qi()}getHitDetectionImage(){return qi()}getPixelRatio(e){return 1}getImageState(){return qi()}getImageSize(){return qi()}getOrigin(){return qi()}getSize(){return qi()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bs(e)}listenImageChange(e){qi()}load(){qi()}unlistenImageChange(e){qi()}ready(){return Promise.resolve()}}class ext{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=f3(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=f3(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,s){const o=f3(e,t,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===ui.IDLE&&r.load(),r.getImageState()===ui.LOADING?r.ready().then(()=>{this.patternCache_[o]=mk().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=mk().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function f3(i,e,t){const n=t?W0(t):"null";return e+":"+i+":"+n}const hg=new ext;let _w=null;class txt extends IC{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?ui.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ui.LOADED){_w||(_w=Zs(1,1,void 0,{willReadFrequently:!0})),_w.drawImage(this.image_,0,0);try{_w.getImageData(0,0,1,1),this.tainted_=!1}catch{_w=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(yr.CHANGE)}handleImageError_(){this.imageState_=ui.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ui.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Zs(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ui.IDLE){this.image_||this.initializeImage_(),this.imageState_=ui.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&zMe(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ui.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const r=n.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=M1t(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===ui.LOADED||this.imageState_===ui.ERROR?e():this.addEventListener(yr.CHANGE,function t(){(this.imageState_===ui.LOADED||this.imageState_===ui.ERROR)&&(this.removeEventListener(yr.CHANGE,t),e())})})),this.ready_}}function c6(i,e,t,n,r,s){let o=e===void 0?void 0:hg.get(e,t,r);return o||(o=new txt(i,i&&"src"in i?i.src||void 0:e,t,n,r),hg.set(e,t,r,o,s)),s&&o&&!hg.getPattern(e,t,r)&&hg.set(e,t,r,o,s),o}function Ph(i){return i?Array.isArray(i)?a6(i):typeof i=="object"&&"src"in i?ixt(i):i:null}function ixt(i){if(!i.offset||!i.size)return hg.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=hg.getPattern(e,void 0,i.color);if(t)return t;const n=hg.get(i.src,"anonymous",null);if(n.getImageState()!==ui.LOADED)return null;const r=Zs(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),c6(r.canvas,e,void 0,ui.LOADED,i.color,!0),hg.getPattern(e,void 0,i.color)}const nxt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),m1e=["style","variant","weight","size","lineHeight","family"],WMe=function(i){const e=i.match(nxt);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=m1e.length;n<r;++n){const s=e[n+1];s!==void 0&&(t[m1e[n]]=s)}return t.families=t.family.split(/,\s?/),t},XMe="10px sans-serif",Pl="#000",Eb="round",vf=[],_f=0,Cb="round",x2=10,w2="#000",E2="center",bk="middle",c0=[0,0,0,0],C2=1,Dp=new dy;let Gv=null,LF;const MF={},rxt=function(){const e="32px ",t=["monospace","serif"],n=t.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let d=!0;for(let f=0;f<n;++f){const p=t[f];if(o=xk(u+" "+c+" "+e+p,r),h!=p){const m=xk(u+" "+c+" "+e+h+","+p,r);d=d&&m!=o}}return!!d}function l(){let u=!0;const c=Dp.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];Dp.get(f)<100&&(a.apply(this,f.split(`
`))?(MC(MF),Gv=null,LF=void 0,Dp.set(f,100)):(Dp.set(f,Dp.get(f)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const c=WMe(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const p=h[d],m=c.style+`
`+c.weight+`
`+p;Dp.get(m)===void 0&&(Dp.set(m,100,!0),a(c.style,c.weight,p)||(Dp.set(m,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),sxt=function(){let i;return function(e){let t=MF[e];if(t==null){if(AMe){const n=WMe(e),r=YMe(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);MF[e]=t}return t}}();function YMe(i,e){return Gv||(Gv=Zs(1,1)),i!=LF&&(Gv.font=i,LF=Gv.font),Gv.measureText(e)}function xk(i,e){return YMe(i,e).width}function y1e(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,s)=>Math.max(r,xk(i,s)),0);return t[e]=n,n}function oxt(i,e){const t=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||i.font,f=xk(d,h);t.push(f),o+=f;const p=sxt(d);n.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:n,lineWidths:r}}function axt(i,e,t,n,r,s,o,a,l,u,c){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=h=>h.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,u),i.scale(c[0],c[1]),lxt(n,i)):c[0]<0||c[1]<0?(i.translate(l,u),i.scale(c[0],c[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,u,o*c[0],a*c[1]),i.restore()}function lxt(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class NL extends FL{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ui.LOADING:ui.LOADED,this.imageState_===ui.LOADING&&this.ready().then(()=>this.imageState_=ui.LOADED),this.render()}clone(){const e=this.getScale(),t=new NL({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,r=Zs(n.size*e,n.size*e);this.draw_(n,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const D=r;r=s,s=D}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=r-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,p=t/2*(c/h),y=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return y*2;const v=r*Math.sin(a),b=Math.sqrt(r*r-v*v),x=s-b,C=Math.sqrt(v*v+x*x)/v;if(C<=n){const D=C*t/2-s-r;return 2*Math.max(y,D)}return y*2}createRenderOptions(){let e=Eb,t=Cb,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=Ph(this.stroke_.getColor()??w2),a=this.stroke_.getWidth()??C2,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Cb,e=this.stroke_.getLineCap()??Eb,n=this.stroke_.getMiterLimit()??x2);const l=this.calculateLineJoinSize_(t,a,n),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Pl),t.fillStyle=Ph(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=W0(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=Zs(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,u=a%2===0?n:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Pl,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class $L extends NL{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new $L({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class g1{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new g1({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=c6(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ui.IDLE&&t.load(),t.getImageState()===ui.LOADING&&(this.patternImage_=t)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class h6{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new h6({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const BL=h6;class jL{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=v1e,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new jL({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=v1e,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function uxt(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(zr(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let p3=null;function ZMe(i,e){if(!p3){const t=new g1({color:"rgba(255,255,255,0.4)"}),n=new BL({color:"#3399CC",width:1.25});p3=[new jL({image:new $L({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return p3}function v1e(i){return i.getGeometry()}const P_=jL;function _1e(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class zL extends FL{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;zr(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||yi(o)),zr(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),zr(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ui.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?ui.LOADED:ui.IDLE:l=ui.LOADING:l=ui.LOADED),this.color_=e.color!==void 0?W0(e.color):null,this.iconImage_=c6(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(_1e(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(_1e(u,c,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new zL({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ui.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ui.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(yr.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(yr.CHANGE,e)}ready(){return this.iconImage_.ready()}}const cxt="#333";class d6{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Bs(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new g1({color:cxt}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new d6({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bs(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let yy=0;const vy=0,xs=1<<yy++,Kt=1<<yy++,ol=1<<yy++,uo=1<<yy++,Gc=1<<yy++,F_=1<<yy++,Fa=Math.pow(2,yy)-1,KMe={[xs]:"boolean",[Kt]:"number",[ol]:"string",[uo]:"color",[Gc]:"number[]",[F_]:"size"},hxt=Object.keys(KMe).map(Number).sort(qh);function Mo(i){const e=[];for(const t of hxt)dxt(i,t)&&e.push(KMe[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function dxt(i,e){return(i&e)===e}function Uc(i,e){return!!(i&e)}function UC(i,e){return i===e}class dg{constructor(e,t){this.type=e,this.value=t}}class JMe{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function f6(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function fxt(i){switch(i){case"string":return ol;case"color":return uo;case"number":return Kt;case"boolean":return xs;case"number[]":return Gc;default:throw new Error(`Unrecognized type hint: ${i}`)}}function Sr(i,e,t){switch(typeof i){case"boolean":return new dg(xs,i);case"number":return new dg(t===F_?F_:Kt,i);case"string":{let r=ol;return F1t(i)&&(r|=uo),UC(r&t,vy)||(r&=t),new dg(r,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return Sxt(i,e,t);for(const r of i)if(typeof r!="number")throw new Error("Expected an array of numbers");let n=Gc;return i.length===2?n|=F_:(i.length===3||i.length===4)&&(n|=uo),t&&(n&=t),new dg(n,i)}const Ve={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},pxt={[Ve.Get]:Zi(([i,e])=>e!==void 0?fxt(e.value):Fa,xn(1,2),gxt),[Ve.Var]:Zi(([i])=>i.type,xn(1,1),mxt),[Ve.Id]:Zi(Kt|ol,bw,yxt),[Ve.Concat]:Zi(ol,xn(2,1/0),or(Fa)),[Ve.GeometryType]:Zi(ol,bw,vxt),[Ve.Resolution]:Zi(Kt,bw),[Ve.Zoom]:Zi(Kt,bw),[Ve.Time]:Zi(Kt,bw),[Ve.Any]:Zi(xs,xn(2,1/0),or(xs)),[Ve.All]:Zi(xs,xn(2,1/0),or(xs)),[Ve.Not]:Zi(xs,xn(1,1),or(xs)),[Ve.Equal]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.NotEqual]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.GreaterThan]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.GreaterThanOrEqualTo]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.LessThan]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.LessThanOrEqualTo]:Zi(xs,xn(2,2),or(Fa),Lp),[Ve.Multiply]:Zi(i=>{let e=Kt|uo;for(let t=0;t<i.length;t++)e&=i[t].type;return e},xn(2,1/0),or(Kt|uo),Lp),[Ve.Coalesce]:Zi(i=>{let e=Fa;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},xn(2,1/0),or(Fa),Lp),[Ve.Divide]:Zi(Kt,xn(2,2),or(Kt)),[Ve.Add]:Zi(Kt,xn(2,1/0),or(Kt)),[Ve.Subtract]:Zi(Kt,xn(2,2),or(Kt)),[Ve.Clamp]:Zi(Kt,xn(3,3),or(Kt)),[Ve.Mod]:Zi(Kt,xn(2,2),or(Kt)),[Ve.Pow]:Zi(Kt,xn(2,2),or(Kt)),[Ve.Abs]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Floor]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Ceil]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Round]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Sin]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Cos]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Atan]:Zi(Kt,xn(1,2),or(Kt)),[Ve.Sqrt]:Zi(Kt,xn(1,1),or(Kt)),[Ve.Match]:Zi(i=>{let e=Fa;for(let t=2;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},xn(4,1/0),b1e,bxt),[Ve.Between]:Zi(xs,xn(3,3),or(Kt)),[Ve.Interpolate]:Zi(i=>{let e=uo|Kt;for(let t=3;t<i.length;t+=2)e&=i[t].type;return e},xn(6,1/0),b1e,xxt),[Ve.Case]:Zi(i=>{let e=Fa;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},xn(3,1/0),_xt,wxt),[Ve.In]:Zi(xs,xn(2,2),Ext),[Ve.Number]:Zi(Kt,xn(1,1/0),or(Fa)),[Ve.String]:Zi(ol,xn(1,1/0),or(Fa)),[Ve.Array]:Zi(i=>i.length===2?Gc|F_:i.length===3||i.length===4?Gc|uo:Gc,xn(1,1/0),or(Kt)),[Ve.Color]:Zi(uo,xn(1,4),or(Kt)),[Ve.Band]:Zi(Kt,xn(1,3),or(Kt)),[Ve.Palette]:Zi(uo,xn(2,2),Cxt),[Ve.ToString]:Zi(ol,xn(1,1),or(xs|Kt|ol|uo))};function gxt(i,e){const t=Sr(i[1],e);if(!(t instanceof dg))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),i.length===3){const n=Sr(i[2],e);return[t,n]}return[t]}function mxt(i,e,t,n){const r=i[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new dg(Fa,r)];const s=e.style.variables[r],o=Sr(s,e);if(o.value=r,n&&!Uc(n,o.type))throw new Error(`The variable ${r} has type ${Mo(o.type)} but the following type was expected: ${Mo(n)}`);return[o]}function yxt(i,e){e.featureId=!0}function vxt(i,e){e.geometryType=!0}function bw(i,e){const t=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function xn(i,e){return function(t,n){const r=t[0],s=t.length-1;if(i===e){if(s!==i){const o=i===1?"":"s";throw new Error(`Expected ${i} argument${o} for ${r}, got ${s}`)}}else if(s<i||s>e){const o=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function or(i){return function(e,t){const n=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Sr(e[o+1],t);if(!Uc(i,a.type)){const l=Mo(i),u=Mo(a.type);throw new Error(`Unexpected type for argument ${o} of ${n} operation, got ${l} but expected ${u}`)}a.type&=i,s[o]=a}return s}}function Lp(i,e,t){const n=i[0],r=i.length-1;let s=Fa;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===vy)throw new Error(`No common type could be found for arguments of ${n} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Sr(i[a+1],e,s);return o}function _xt(i,e){const t=i[0],n=i.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function b1e(i,e){const t=i[0],n=i.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function bxt(i,e,t,n){const r=i.length-1;let o=Sr(i[1],e).type;const a=Sr(i[i.length-1],e);let l=n!==void 0?n&a.type:a.type;const u=new Array(r-2);for(let h=0;h<r-2;h+=2){const d=Sr(i[h+2],e),f=Sr(i[h+3],e);o&=d.type,l&=f.type,u[h]=d,u[h+1]=f}const c=ol|Kt|xs;if(!Uc(c,o))throw new Error(`Expected an input of type ${Mo(c)} for the interpolate operation, got ${Mo(o)} instead`);if(o&=c,UC(l,vy))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let h=0;h<r-2;h+=2){const d=Sr(i[h+2],e,o),f=Sr(i[h+3],e,l);u[h]=d,u[h+1]=f}return[Sr(i[1],e,o),...u,Sr(i[i.length-1],e,l)]}function xxt(i,e,t,n){const r=i[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Sr(s,e);let o=Sr(i[2],e);if(!Uc(Kt,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Mo(o.type)} instead`);o=Sr(i[2],e,Kt);const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){let u=Sr(i[l+3],e);if(!Uc(Kt,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Mo(u.type)} at position ${l+2} instead`);let c=Sr(i[l+4],e);if(!Uc(Kt|uo,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Mo(c.type)} at position ${l+3} instead`);u=Sr(i[l+3],e,Kt),c=Sr(i[l+4],e,Kt|uo),a[l]=u,a[l+1]=c}return[s,o,...a]}function wxt(i,e,t,n){const r=Sr(i[i.length-1],e,n);let s=n!==void 0?n&r.type:r.type;const o=new Array(i.length-1);for(let a=0;a<o.length-1;a+=2){const l=Sr(i[a+1],e),u=Sr(i[a+2],e,n);if(!Uc(xs,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Mo(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(UC(s,vy))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let a=0;a<o.length-1;a+=2)o[a+1]=Sr(i[a+2],e,s);return o[o.length-1]=Sr(i[i.length-1],e,s),o}function Ext(i,e){let t=i[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let n=ol|Kt;const r=new Array(t.length);for(let o=0;o<r.length;o++){const a=Sr(t[o],e);n&=a.type,r[o]=a}if(UC(n,vy))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[Sr(i[1],e,n),...r]}function Cxt(i,e){const t=Sr(i[1],e,Kt);if(t.type!==Kt)throw new Error(`The first argument of palette must be an number, got ${Mo(t.type)} instead`);const n=i[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const r=new Array(n.length);for(let s=0;s<r.length;s++){const o=Sr(n[s],e,uo);if(!(o instanceof dg))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Uc(o.type,uo))throw new Error(`The palette color at index ${s} should be of type color, got ${Mo(o.type)} instead`);r[s]=o}return[t,...r]}function Zi(i,...e){return function(t,n,r){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,n,o,r)||o;let a=typeof i=="function"?i(o):i;if(r!==void 0){if(!Uc(a,r))throw new Error(`The following expression was expected to return ${Mo(r)}, but returns ${Mo(a)} instead: ${JSON.stringify(t)}`);a&=r}if(a===vy)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new JMe(a,s,...o)}}function Sxt(i,e,t){const n=i[0],r=pxt[n];if(!r)throw new Error(`Unknown operator: ${n}`);return r(i,e,t)}function p6(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return p6(i.getGeometries()[0]);default:return""}}function QMe(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Gf(i,e,t){const n=Sr(i,t);if(!Uc(e,n.type)){const r=Mo(e),s=Mo(n.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return eh(n)}function eh(i,e){if(i instanceof dg){if(i.type===uo&&typeof i.value=="string"){const n=o6(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case Ve.Number:case Ve.String:case Ve.Coalesce:return Txt(i);case Ve.Get:case Ve.Var:return Axt(i);case Ve.Id:return n=>n.featureId;case Ve.GeometryType:return n=>n.geometryType;case Ve.Concat:{const n=i.args.map(r=>eh(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case Ve.Resolution:return n=>n.resolution;case Ve.Any:case Ve.All:case Ve.Between:case Ve.In:case Ve.Not:return kxt(i);case Ve.Equal:case Ve.NotEqual:case Ve.LessThan:case Ve.LessThanOrEqualTo:case Ve.GreaterThan:case Ve.GreaterThanOrEqualTo:return Rxt(i);case Ve.Multiply:case Ve.Divide:case Ve.Add:case Ve.Subtract:case Ve.Clamp:case Ve.Mod:case Ve.Pow:case Ve.Abs:case Ve.Floor:case Ve.Ceil:case Ve.Round:case Ve.Sin:case Ve.Cos:case Ve.Atan:case Ve.Sqrt:return Dxt(i);case Ve.Case:return Lxt(i);case Ve.Match:return Mxt(i);case Ve.Interpolate:return Ixt(i);case Ve.ToString:return Oxt(i);default:throw new Error(`Unsupported operator ${t}`)}}function Txt(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=eh(i.args[s]);switch(t){case Ve.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Ve.Number:case Ve.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Axt(i,e){const n=i.args[0].value;switch(i.operator){case Ve.Get:return r=>r.properties[n];case Ve.Var:return r=>r.variables[n];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Rxt(i,e){const t=i.operator,n=eh(i.args[0]),r=eh(i.args[1]);switch(t){case Ve.Equal:return s=>n(s)===r(s);case Ve.NotEqual:return s=>n(s)!==r(s);case Ve.LessThan:return s=>n(s)<r(s);case Ve.LessThanOrEqualTo:return s=>n(s)<=r(s);case Ve.GreaterThan:return s=>n(s)>r(s);case Ve.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function kxt(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=eh(i.args[s]);switch(t){case Ve.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case Ve.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case Ve.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case Ve.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case Ve.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Dxt(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=eh(i.args[s]);switch(t){case Ve.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case Ve.Divide:return s=>r[0](s)/r[1](s);case Ve.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case Ve.Subtract:return s=>r[0](s)-r[1](s);case Ve.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case Ve.Mod:return s=>r[0](s)%r[1](s);case Ve.Pow:return s=>Math.pow(r[0](s),r[1](s));case Ve.Abs:return s=>Math.abs(r[0](s));case Ve.Floor:return s=>Math.floor(r[0](s));case Ve.Ceil:return s=>Math.ceil(r[0](s));case Ve.Round:return s=>Math.round(r[0](s));case Ve.Sin:return s=>Math.sin(r[0](s));case Ve.Cos:return s=>Math.cos(r[0](s));case Ve.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Ve.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Lxt(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=eh(i.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(n[s](r))return n[s+1](r);return n[t-1](r)}}function Mxt(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=eh(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function Ixt(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=eh(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let u=2;u<t;u+=2){const c=n[u](r);let h=n[u+1](r);const d=Array.isArray(h);if(d&&(h=O1t(h)),c>=o)return u===2?h:d?Pxt(s,o,a,l,c,h):jw(s,o,a,l,c,h);a=c,l=h}return l}}function Oxt(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=eh(i.args[s]);switch(t){case Ve.ToString:return s=>{const o=r[0](s);return i.args[0].type===uo?a6(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function jw(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+l*(s-n)}function Pxt(i,e,t,n,r,s){if(r-t===0)return n;const a=d1e(n),l=d1e(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[jw(i,e,t,a[0],r,l[0]),jw(i,e,t,a[1],r,l[1]),a[2]+jw(i,e,t,0,r,u),jw(i,e,t,n[3],r,s[3])];return jMe(P1t(c))}function Fxt(i){return!0}function Nxt(i){const e=f6(),t=$xt(i,e),n=QMe();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return e.geometryType&&(n.geometryType=p6(r.getGeometry())),t(n)}}function x1e(i){const e=f6(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=IF(i[o],e);const r=QMe(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<t;++u){const c=n[u](r);c&&(s[l]=c,l+=1)}return s.length=l,s}}function $xt(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?Gf(s.filter,xs,e):Fxt;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=IF(s.style[u],e)}else a=[IF(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=n[a].filter;if(l(r)&&!(i[a].else&&o)){o=!0;for(const u of n[a].styles){const c=u(r);c&&s.push(c)}}}return s}}function IF(i,e){const t=S2(i,"",e),n=T2(i,"",e),r=Bxt(i,e),s=jxt(i,e),o=jl(i,"z-index",e);if(!t&&!n&&!r&&!s&&!Pg(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new P_;return function(l){let u=!0;if(t){const c=t(l);c&&(u=!1),a.setFill(c)}if(n){const c=n(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function S2(i,e,t){let n;if(e+"fill-pattern-src"in i?n=qxt(i,e+"fill-",t):n=g6(i,e+"fill-color",t),!n)return null;const r=new g1;return function(s){const o=n(s);return o==="none"?null:(r.setColor(o),r)}}function T2(i,e,t){const n=jl(i,e+"stroke-width",t),r=g6(i,e+"stroke-color",t);if(!n&&!r)return null;const s=Jd(i,e+"stroke-line-cap",t),o=Jd(i,e+"stroke-line-join",t),a=eIe(i,e+"stroke-line-dash",t),l=jl(i,e+"stroke-line-dash-offset",t),u=jl(i,e+"stroke-miter-limit",t),c=new BL;return function(h){if(r){const d=r(h);if(d==="none")return null;c.setColor(d)}if(n&&c.setWidth(n(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function Bxt(i,e){const t="text-",n=Jd(i,t+"value",e);if(!n)return null;const r=S2(i,t,e),s=S2(i,t+"background-",e),o=T2(i,t,e),a=T2(i,t+"background-",e),l=Jd(i,t+"font",e),u=jl(i,t+"max-angle",e),c=jl(i,t+"offset-x",e),h=jl(i,t+"offset-y",e),d=A2(i,t+"overflow",e),f=Jd(i,t+"placement",e),p=jl(i,t+"repeat",e),m=GL(i,t+"scale",e),y=A2(i,t+"rotate-with-view",e),v=jl(i,t+"rotation",e),b=Jd(i,t+"align",e),x=Jd(i,t+"justify",e),w=Jd(i,t+"baseline",e),C=eIe(i,t+"padding",e),D=UL(i,t+"declutter-mode"),R=new d6({declutterMode:D});return function(A){if(R.setText(n(A)),r&&R.setFill(r(A)),s&&R.setBackgroundFill(s(A)),o&&R.setStroke(o(A)),a&&R.setBackgroundStroke(a(A)),l&&R.setFont(l(A)),u&&R.setMaxAngle(u(A)),c&&R.setOffsetX(c(A)),h&&R.setOffsetY(h(A)),d&&R.setOverflow(d(A)),f){const L=f(A);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");R.setPlacement(L)}if(p&&R.setRepeat(p(A)),m&&R.setScale(m(A)),y&&R.setRotateWithView(y(A)),v&&R.setRotation(v(A)),b){const L=b(A);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");R.setTextAlign(L)}if(x){const L=x(A);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");R.setJustify(L)}if(w){const L=w(A);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");R.setTextBaseline(L)}return C&&R.setPadding(C(A)),R}}function jxt(i,e){return"icon-src"in i?zxt(i,e):"shape-points"in i?Gxt(i,e):"circle-radius"in i?Uxt(i,e):null}function zxt(i,e){const t="icon-",n=t+"src",r=tIe(i[n],n),s=wk(i,t+"anchor",e),o=GL(i,t+"scale",e),a=jl(i,t+"opacity",e),l=wk(i,t+"displacement",e),u=jl(i,t+"rotation",e),c=A2(i,t+"rotate-with-view",e),h=E1e(i,t+"anchor-origin"),d=C1e(i,t+"anchor-x-units"),f=C1e(i,t+"anchor-y-units"),p=Xxt(i,t+"color"),m=Hxt(i,t+"cross-origin"),y=Wxt(i,t+"offset"),v=E1e(i,t+"offset-origin"),b=Ek(i,t+"width"),x=Ek(i,t+"height"),w=Vxt(i,t+"size"),C=UL(i,t+"declutter-mode"),D=new zL({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:m,offset:y,offsetOrigin:v,height:x,width:b,size:w,declutterMode:C});return function(R){return a&&D.setOpacity(a(R)),l&&D.setDisplacement(l(R)),u&&D.setRotation(u(R)),c&&D.setRotateWithView(c(R)),o&&D.setScale(o(R)),s&&D.setAnchor(s(R)),D}}function Gxt(i,e){const t="shape-",n=t+"points",r=t+"radius",s=OF(i[n],n),o=OF(i[r],r),a=S2(i,t,e),l=T2(i,t,e),u=GL(i,t+"scale",e),c=wk(i,t+"displacement",e),h=jl(i,t+"rotation",e),d=A2(i,t+"rotate-with-view",e),f=Ek(i,t+"radius2"),p=Ek(i,t+"angle"),m=UL(i,t+"declutter-mode"),y=new NL({points:s,radius:o,radius2:f,angle:p,declutterMode:m});return function(v){return a&&y.setFill(a(v)),l&&y.setStroke(l(v)),c&&y.setDisplacement(c(v)),h&&y.setRotation(h(v)),d&&y.setRotateWithView(d(v)),u&&y.setScale(u(v)),y}}function Uxt(i,e){const t="circle-",n=S2(i,t,e),r=T2(i,t,e),s=jl(i,t+"radius",e),o=GL(i,t+"scale",e),a=wk(i,t+"displacement",e),l=jl(i,t+"rotation",e),u=A2(i,t+"rotate-with-view",e),c=UL(i,t+"declutter-mode"),h=new $L({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),n&&h.setFill(n(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function jl(i,e,t){if(!(e in i))return;const n=Gf(i[e],Kt,t);return function(r){return OF(n(r),e)}}function Jd(i,e,t){if(!(e in i))return null;const n=Gf(i[e],ol,t);return function(r){return tIe(n(r),e)}}function qxt(i,e,t){const n=Jd(i,e+"pattern-src",t),r=w1e(i,e+"pattern-offset",t),s=w1e(i,e+"pattern-size",t),o=g6(i,e+"color",t);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function A2(i,e,t){if(!(e in i))return null;const n=Gf(i[e],xs,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function g6(i,e,t){if(!(e in i))return null;const n=Gf(i[e],uo|ol,t);return function(r){return iIe(n(r),e)}}function eIe(i,e,t){if(!(e in i))return null;const n=Gf(i[e],Gc,t);return function(r){return qC(n(r),e)}}function wk(i,e,t){if(!(e in i))return null;const n=Gf(i[e],Gc,t);return function(r){const s=qC(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function w1e(i,e,t){if(!(e in i))return null;const n=Gf(i[e],Gc,t);return function(r){return nIe(n(r),e)}}function GL(i,e,t){if(!(e in i))return null;const n=Gf(i[e],Gc|Kt,t);return function(r){return Yxt(n(r),e)}}function Ek(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Vxt(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Bs(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Hxt(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function E1e(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function C1e(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Wxt(i,e){const t=i[e];if(t!==void 0)return qC(t,e)}function UL(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Xxt(i,e){const t=i[e];if(t!==void 0)return iIe(t,e)}function qC(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function tIe(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function OF(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function iIe(i,e){if(typeof i=="string")return i;const t=qC(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function nIe(i,e){const t=qC(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function Yxt(i,e){return typeof i=="number"?i:nIe(i,e)}const S1e={RENDER_ORDER:"renderOrder"};class rIe extends r6{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(S1e.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new _C(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(S1e.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?ZMe:e;const t=Zxt(e);this.styleFunction_=e===null?void 0:uxt(t),this.changed()}}function Zxt(i){if(i===void 0)return ZMe;if(!i)return null;if(typeof i=="function"||i instanceof P_)return i;if(!Array.isArray(i))return x1e([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof P_){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof P_))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return Nxt(r)}return x1e(i)}const Ei={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},qT=[Ei.FILL],fg=[Ei.STROKE],h0=[Ei.BEGIN_PATH],T1e=[Ei.CLOSE_PATH];class sIe{drawCustom(e,t,n,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class VC extends sIe{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],Af(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,n,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=r);let c=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,p,m,y;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],y=vF(u,d),y!==m?(f&&(a[l++]=c,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):y===Ho.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,c=d[0],h=d[1],m=y;return(s&&f||p===t+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,t,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],u=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,n,r,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,f;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let m=0,y=p.length;m<y;++m){const v=[];f=this.drawCustomCoordinates_(u,f,p[m],a,v),d.push(v)}this.instructions.push([Ei.CUSTOM,l,d,e,n,EF,s]),this.hitDetectionInstructions.push([Ei.CUSTOM,l,d,e,r||n,EF,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([Ei.CUSTOM,l,h,e,n,m2,s]),this.hitDetectionInstructions.push([Ei.CUSTOM,l,h,e,r||n,m2,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([Ei.CUSTOM,l,c,e,n,lg,s]),this.hitDetectionInstructions.push([Ei.CUSTOM,l,c,e,r||n,lg,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([Ei.CUSTOM,l,c,e,n,lg,s]),this.hitDetectionInstructions.push([Ei.CUSTOM,l,c,e,r||n,lg,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([Ei.CUSTOM,l,c,e,n,void 0,s]),this.hitDetectionInstructions.push([Ei.CUSTOM,l,c,e,r||n,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[Ei.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ei.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,s,o=-1;for(t=0;t<n;++t)r=e[t],s=r[0],s==Ei.END_GEOMETRY?o=t:s==Ei.BEGIN_GEOMETRY&&(r[2]=t,C_t(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=Ph(r||Pl)}else n.fillStyle=void 0;if(t){const r=t.getColor();n.strokeStyle=Ph(r||w2);const s=t.getLineCap();n.lineCap=s!==void 0?s:Eb;const o=t.getLineDash();n.lineDash=o?o.slice():vf;const a=t.getLineDashOffset();n.lineDashOffset=a||_f;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:Cb;const u=t.getWidth();n.lineWidth=u!==void 0?u:C2;const c=t.getMiterLimit();n.miterLimit=c!==void 0?c:x2,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Ei.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ei.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||s!=e.currentLineDash&&!f1(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ei.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=F_t(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Hh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Kxt extends VC{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Af(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([Ei.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=[];for(let l=0,u=r.length;l<u;l+=e.getStride())(!this.maxExtent||Af(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([Ei.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Jxt=Kxt;class Qxt extends VC{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),a=[Ei.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,vf,_f],h0);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(fg),this.endGeometry(t)}drawMultiLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,vf,_f],h0);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(fg),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(fg),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(fg),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(h0)}}const ewt=Qxt;class twt extends VC{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(h0),this.hitDetectionInstructions.push(h0);for(let u=0;u<l;++u){const c=n[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,c,r,!0,!a),f=[Ei.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(T1e),this.hitDetectionInstructions.push(T1e)),t=c}return o&&(this.instructions.push(qT),this.hitDetectionInstructions.push(qT)),a&&(this.instructions.push(fg),this.hitDetectionInstructions.push(fg)),t}drawCircle(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,Pl]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,vf,_f]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[Ei.CIRCLE,u];this.instructions.push(h0,c),this.hitDetectionInstructions.push(h0,c),r.fillStyle!==void 0&&(this.instructions.push(qT),this.hitDetectionInstructions.push(qT)),r.strokeStyle!==void 0&&(this.instructions.push(fg),this.hitDetectionInstructions.push(fg)),this.endGeometry(t)}drawPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,Pl]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,vf,_f]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(t)}drawMultiPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,Pl]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,vf,_f]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=Qm(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const A1e=twt;function iwt(i,e,t,n,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+r<n;){const[u,c]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=f,a>=i){const p=(i-a+f)/f,m=du(u,h,p),y=du(c,d,p);l.push(m,y),s.push(l),l=[m,y],a==i&&(o+=r),a=0}else if(a<i)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=f-a,m=du(u,h,p/f),y=du(c,d,p/f);l.push(m,y),s.push(l),l=[m,y],a=0,o+=r}}return a>0&&s.push(l),s}function nwt(i,e,t,n,r){let s=t,o=t,a=0,l=0,u=t,c,h,d,f,p,m,y,v,b,x;for(h=t;h<n;h+=r){const w=e[h],C=e[h+1];p!==void 0&&(b=w-p,x=C-m,f=Math.sqrt(b*b+x*x),y!==void 0&&(l+=d,c=Math.acos((y*b+v*x)/(d*f)),c>i&&(l>a&&(a=l,s=u,o=h),l=0,u=h-r)),d=f,y=b,v=x),p=w,m=C}return l+=f,l>a?[u,h]:[s,o]}const Ck={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class rwt extends VC{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Pl]={fillStyle:Pl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Cs(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const y=e.getEndss();d=[];for(let v=0,b=y.length;v<b;++v)d.push(y[v][0])}this.beginGeometry(e,t,n);const f=o.repeat,p=f?void 0:o.textAlign;let m=0;for(let y=0,v=d.length;y<v;++y){let b;f?b=iwt(f*this.resolution,c,m,d[y],h):b=[c.slice(m,d[y])];for(let x=0,w=b.length;x<w;++x){const C=b[x];let D=0,R=C.length;if(p==null){const L=nwt(o.maxAngle,C,0,C.length,2);D=L[0],R=L[1]}for(let L=D;L<R;L+=h)a.push(C[L],C[L+1]);const A=a.length;m=d[y],this.drawChars_(l,A),l=A}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();c=[];for(let x=0,w=b.length;x<w;x+=3)o.overflow||d.push(b[x+2]/this.resolution),c.push(b[x],b[x+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===l)return;if(d&&(f-l)/2!==c.length/h){let b=l/2;d=d.filter((x,w)=>{const C=a[(b+w)*2]===c[w*h]&&a[(b+w)*2+1]===c[w*h+1];return C||--b,C})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let p=o.padding;if(p!=c0&&(o.scale[0]<0||o.scale[1]<0)){let b=o.padding[0],x=o.padding[1],w=o.padding[2],C=o.padding[3];o.scale[0]<0&&(x=-x,C=-C),o.scale[1]<0&&(b=-b,w=-w),p=[b,x,w,C]}const m=this.pixelRatio;this.instructions.push([Ei.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==c0?c0:p.map(function(b){return b*m}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/m,v=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=Pl,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Pl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=v,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||E2,justify:t.justify,textBaseline:t.textBaseline||bk,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Ck[r.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ei.DRAW_CHARS,e,t,u,r.overflow,a,r.maxAngle,l,c,s,d*l,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Ei.DRAW_CHARS,e,t,u,r.overflow,a&&Pl,r.maxAngle,l,c,s,d*l,h,o,1/l,this.declutterMode_])}setTextStyle(e,t){let n,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ph(o.getColor()||Pl)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();s.lineCap=a.getLineCap()||Eb,s.lineDash=p?p.slice():vf,s.lineDashOffset=m===void 0?_f:m,s.lineJoin=a.getLineJoin()||Cb,s.lineWidth=y===void 0?C2:y,s.miterLimit=v===void 0?x2:v,s.strokeStyle=Ph(a.getColor()||w2)}n=this.textState_;const l=e.getFont()||XMe;rxt(l);const u=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||bk,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||c0,n.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:yi(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+yi(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const swt={Circle:A1e,Default:VC,Image:Jxt,LineString:ewt,Polygon:A1e,Text:rwt};class oIe{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const s=n[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[t];if(s===void 0){const o=swt[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function owt(i,e,t,n,r,s,o,a,l,u,c,h){let d=i[e],f=i[e+1],p=0,m=0,y=0,v=0;function b(){p=d,m=f,e+=n,d=i[e],f=i[e+1],v+=y,y=Math.sqrt((d-p)*(d-p)+(f-m)*(f-m))}do b();while(e<t-n&&v+y<s);let x=y===0?0:(s-v)/y;const w=du(p,d,x),C=du(m,f,x),D=e-n,R=v,A=s+a*l(u,r,c);for(;e<t-n&&v+y<A;)b();x=y===0?0:(A-v)/y;const L=du(p,d,x),O=du(m,f,x);let $;if(h){const B=[w,C,L,O];cMe(B,0,4,2,h,B,B),$=B[0]>B[2]}else $=w>L;const q=Math.PI,M=[],F=D+n===e;e=D,y=0,v=R,d=i[e],f=i[e+1];let N;if(F){b(),N=Math.atan2(f-m,d-p),$&&(N+=N>0?-q:q);const B=(L+w)/2,W=(O+C)/2;return M[0]=[B,W,(A-s)/2,N,r],M}r=r.replace(/\n/g," ");for(let B=0,W=r.length;B<W;){b();let K=Math.atan2(f-m,d-p);if($&&(K+=K>0?-q:q),N!==void 0){let J=K-N;if(J+=J>q?-2*q:J<-q?2*q:0,Math.abs(J)>o)return null}N=K;const ee=B;let te=0;for(;B<W;++B){const J=$?W-B-1:B,ye=a*l(u,r[J],c);if(e+n<t&&v+y<s+te+ye/2)break;te+=ye}if(B===ee)continue;const le=$?r.substring(W-ee,W-B):r.substring(ee,B);x=y===0?0:(s+te/2-v)/y;const Q=du(p,d,x),z=du(m,f,x);M.push([Q,z,te/2,K,le]),s+=te}return M}const Av=Au(),Mp=[],zd=[],Gd=[],Ip=[];function R1e(i){return i[3].declutterBox}const k1e=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function g3(i,e){return e==="start"?e=k1e.test(i)?"right":"left":e==="end"&&(e=k1e.test(i)?"left":"right"),Ck[e]}function awt(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class lwt{constructor(e,t,n,r,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Hl(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new s6:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){const s=e+t+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),d=l.justify?Ck[l.justify]:g3(Array.isArray(e)?e[0]:e,l.textAlign||E2),f=r&&o.lineWidth?o.lineWidth:0,p=h?e:e.split(`
`).reduce(awt,[]),{width:m,height:y,widths:v,heights:b,lineWidths:x}=oxt(l,p),w=m+f,C=[],D=(w+2)*c[0],R=(y+f)*c[1],A={width:D<0?Math.floor(D):Math.ceil(D),height:R<0?Math.floor(R):Math.ceil(R),contextInstructions:C};(c[0]!=1||c[1]!=1)&&C.push("scale",c),r&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",f),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),n&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const L=.5-d;let O=d*w+L*f;const $=[],q=[];let M=0,F=0,N=0,B=0,W;for(let K=0,ee=p.length;K<ee;K+=2){const te=p[K];if(te===`
`){F+=M,M=0,O=d*w+L*f,++B;continue}const le=p[K+1]||l.font;le!==W&&(r&&$.push("font",le),n&&q.push("font",le),W=le),M=Math.max(M,b[N]);const Q=[te,O+L*v[N]+d*(v[N]-x[B]),.5*(f+M)+F];O+=v[N],r&&$.push("strokeText",Q),n&&q.push("fillText",Q),++N}return Array.prototype.push.apply(C,$),Array.prototype.push.apply(C,q),this.labels_[s]=A,A}replayTextBackground_(e,t,n,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,s,o,a,l,u,c,h,d,f,p,m,y){a*=d[0],l*=d[1];let v=n-a,b=r-l;const x=s+u>e?e-u:s,w=o+c>t?t-c:o,C=p[3]+x*d[0]+p[1],D=p[0]+w*d[1]+p[2],R=v-p[3],A=b-p[0];(m||h!==0)&&(Mp[0]=R,Ip[0]=R,Mp[1]=A,zd[1]=A,zd[0]=R+C,Gd[0]=zd[0],Gd[1]=A+D,Ip[1]=Gd[1]);let L;return h!==0?(L=Jc(Hl(),n,r,1,1,h,-n,-r),Wo(L,Mp),Wo(L,zd),Wo(L,Gd),Wo(L,Ip),Rf(Math.min(Mp[0],zd[0],Gd[0],Ip[0]),Math.min(Mp[1],zd[1],Gd[1],Ip[1]),Math.max(Mp[0],zd[0],Gd[0],Ip[0]),Math.max(Mp[1],zd[1],Gd[1],Ip[1]),Av)):Rf(Math.min(R,R+C),Math.min(A,A+D),Math.max(R,R+C),Math.max(A,A+D),Av),f&&(v=Math.round(v),b=Math.round(b)),{drawImageX:v,drawImageY:b,drawImageW:x,drawImageH:w,originX:u,originY:c,declutterBox:{minX:Av[0],minY:Av[1],maxX:Av[2],maxY:Av[3],value:y},canvasTransform:L,scale:d}}replayImageOrLabel_(e,t,n,r,s,o,a){const l=!!(o||a),u=r.declutterBox,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=t[0]&&u.maxX+c>=0&&u.minY-c<=t[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Mp,zd,Gd,Ip,o,a),axt(e,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=Wo(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,r){const s=this.textStates[t],o=this.createLabel(e,t,r,n),a=this.strokeStates[n],l=this.pixelRatio,u=g3(Array.isArray(e)?e[0]:e,s.textAlign||E2),c=Ck[s.textBaseline||bk],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=u*d+2*(.5-u)*h,p=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:p}}execute_(e,t,n,r,s,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&f1(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=bg(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),D_t(this.renderedTransform_,n));let h=0;const d=r.length;let f=0,p,m,y,v,b,x,w,C,D,R,A,L,O,$=0,q=0,M=null,F=null;const N=this.coordinateCache_,B=this.viewRotation_,W=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,K={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},ee=this.instructions!=r||this.overlaps?0:200;let te,le,Q,z;for(;h<d;){const J=r[h];switch(J[0]){case Ei.BEGIN_GEOMETRY:te=J[1],z=J[3],te.getGeometry()?a!==void 0&&!Cs(a,z.getExtent())?h=J[2]+1:++h:h=J[2],u&&(u.zIndex=J[4]);break;case Ei.BEGIN_PATH:$>ee&&(this.fill_(e),$=0),q>ee&&(e.stroke(),q=0),!$&&!q&&(e.beginPath(),b=NaN,x=NaN),++h;break;case Ei.CIRCLE:f=J[1];const Ne=c[f],Ge=c[f+1],rt=c[f+2],Be=c[f+3],ze=rt-Ne,lt=Be-Ge,xt=Math.sqrt(ze*ze+lt*lt);e.moveTo(Ne+xt,Ge),e.arc(Ne,Ge,xt,0,2*Math.PI,!0),++h;break;case Ei.CLOSE_PATH:e.closePath(),++h;break;case Ei.CUSTOM:f=J[1],p=J[2];const Mt=J[3],Ct=J[4],gi=J[5];K.geometry=Mt,K.feature=te,h in N||(N[h]=[]);const Wt=N[h];gi?gi(c,f,p,2,Wt):(Wt[0]=c[f],Wt[1]=c[f+1],Wt.length=2),u&&(u.zIndex=J[6]),Ct(Wt,K),++h;break;case Ei.DRAW_IMAGE:f=J[1],p=J[2],D=J[3],m=J[4],y=J[5];let Qi=J[6];const He=J[7],ge=J[8],se=J[9],re=J[10];let pe=J[11];const I=J[12];let G=J[13];v=J[14]||"declutter";const Z=J[15];if(!D&&J.length>=20){R=J[19],A=J[20],L=J[21],O=J[22];const St=this.drawLabelWithPointPlacement_(R,A,L,O);D=St.label,J[3]=D;const ti=J[23];m=(St.anchorX-ti)*this.pixelRatio,J[4]=m;const Rt=J[24];y=(St.anchorY-Rt)*this.pixelRatio,J[5]=y,Qi=D.height,J[6]=Qi,G=D.width,J[13]=G}let ie;J.length>25&&(ie=J[25]);let me,_e,xe;J.length>17?(me=J[16],_e=J[17],xe=J[18]):(me=c0,_e=!1,xe=!1),re&&W?pe+=B:!re&&!W&&(pe-=B);let V=0;for(;f<p;f+=2){if(ie&&ie[V++]<G/this.pixelRatio)continue;const St=this.calculateImageOrLabelDimensions_(D.width,D.height,c[f],c[f+1],G,Qi,m,y,ge,se,pe,I,s,me,_e||xe,te),ti=[e,t,D,St,He,_e?M:null,xe?F:null];if(l){let Rt,xi,Mi;if(Z){const ri=p-f;if(!Z[ri]){Z[ri]={args:ti,declutterMode:v};continue}const Ot=Z[ri];Rt=Ot.args,xi=Ot.declutterMode,delete Z[ri],Mi=R1e(Rt)}let on,en;if(Rt&&(xi!=="declutter"||!l.collides(Mi))&&(on=!0),(v!=="declutter"||!l.collides(St.declutterBox))&&(en=!0),xi==="declutter"&&v==="declutter"){const ri=on&&en;on=ri,en=ri}on&&(xi!=="none"&&l.insert(Mi),this.replayImageOrLabel_.apply(this,Rt)),en&&(v!=="none"&&l.insert(St.declutterBox),this.replayImageOrLabel_.apply(this,ti))}else this.replayImageOrLabel_.apply(this,ti)}++h;break;case Ei.DRAW_CHARS:const oe=J[1],fe=J[2],de=J[3],Te=J[4];O=J[5];const Ae=J[6],Se=J[7],Re=J[8];L=J[9];const Pe=J[10];R=J[11],A=J[12];const We=[J[13],J[13]];v=J[14]||"declutter";const st=this.textStates[A],ot=st.font,It=[st.scale[0]*Se,st.scale[1]*Se];let ct;ot in this.widths_?ct=this.widths_[ot]:(ct={},this.widths_[ot]=ct);const Ht=_Me(c,oe,fe,2),Yt=Math.abs(It[0])*y1e(ot,R,ct);if(Te||Yt<=Ht){const St=this.textStates[A].textAlign,ti=(Ht-Yt)*g3(R,St),Rt=owt(c,oe,fe,2,R,ti,Ae,Math.abs(It[0]),y1e,ot,ct,W?0:this.viewRotation_);e:if(Rt){const xi=[];let Mi,on,en,ri,Ot;if(L)for(Mi=0,on=Rt.length;Mi<on;++Mi){Ot=Rt[Mi],en=Ot[4],ri=this.createLabel(en,A,"",L),m=Ot[2]+(It[0]<0?-Pe:Pe),y=de*ri.height+(.5-de)*2*Pe*It[1]/It[0]-Re;const Si=this.calculateImageOrLabelDimensions_(ri.width,ri.height,Ot[0],Ot[1],ri.width,ri.height,m,y,0,0,Ot[3],We,!1,c0,!1,te);if(l&&v==="declutter"&&l.collides(Si.declutterBox))break e;xi.push([e,t,ri,Si,1,null,null])}if(O)for(Mi=0,on=Rt.length;Mi<on;++Mi){Ot=Rt[Mi],en=Ot[4],ri=this.createLabel(en,A,O,""),m=Ot[2],y=de*ri.height-Re;const Si=this.calculateImageOrLabelDimensions_(ri.width,ri.height,Ot[0],Ot[1],ri.width,ri.height,m,y,0,0,Ot[3],We,!1,c0,!1,te);if(l&&v==="declutter"&&l.collides(Si.declutterBox))break e;xi.push([e,t,ri,Si,1,null,null])}l&&v!=="none"&&l.load(xi.map(R1e));for(let Si=0,Bn=xi.length;Si<Bn;++Si)this.replayImageOrLabel_.apply(this,xi[Si])}}++h;break;case Ei.END_GEOMETRY:if(o!==void 0){te=J[1];const St=o(te,z,v);if(St)return St}++h;break;case Ei.FILL:ee?$++:this.fill_(e),++h;break;case Ei.MOVE_TO_LINE_TO:for(f=J[1],p=J[2],le=c[f],Q=c[f+1],e.moveTo(le,Q),b=le+.5|0,x=Q+.5|0,f+=2;f<p;f+=2)le=c[f],Q=c[f+1],w=le+.5|0,C=Q+.5|0,(f==p-2||w!==b||C!==x)&&(e.lineTo(le,Q),b=w,x=C);++h;break;case Ei.SET_FILL_STYLE:M=J,this.alignAndScaleFill_=J[2],$&&(this.fill_(e),$=0,q&&(e.stroke(),q=0)),e.fillStyle=J[1],++h;break;case Ei.SET_STROKE_STYLE:F=J,q&&(e.stroke(),q=0),this.setStrokeStyle_(e,J),++h;break;case Ei.STROKE:ee?q++:e.stroke(),++h;break;default:++h;break}}$&&this.fill_(e),q&&e.stroke()}execute(e,t,n,r,s,o){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,n,r,s){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}}const f_=["Polygon","Circle","LineString","Image","Text","Default"],Sk=["Image","Text"],uwt=f_.filter(i=>!Sk.includes(i));class aIe{constructor(e,t,n,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hl(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const s=e[n];for(const o in s){const a=s[o];r[o]=new lwt(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,s,o){r=Math.round(r);const a=r*2+1,l=Jc(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Zs(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Au(),wE(h,e),Hh(h,t*(this.renderBuffer_+r),h));const d=cwt(r);let f;function p(C,D,R){const A=c.getImageData(0,0,a,a).data;for(let L=0,O=d.length;L<O;L++)if(A[d[L]]>0){if(!o||R==="none"||f!=="Image"&&f!=="Text"||o.includes(C)){const $=(d[L]-3)/4,q=r-$%a,M=r-($/a|0),F=s(C,D,q*q+M*M);if(F)return F}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(qh);let y,v,b,x,w;for(y=m.length-1;y>=0;--y){const C=m[y].toString();for(b=this.executorsByZIndex_[C],v=f_.length-1;v>=0;--v)if(f=f_[v],x=b[f],x!==void 0&&(w=x.executeHitDetection(c,l,n,p,h),w))return w}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],s=t[2],o=t[3],a=[n,r,n,o,s,o,s,r];return bg(a,0,8,2,e,a),a}isEmpty(){return Pg(this.executorsByZIndex_)}execute(e,t,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(qh),o=o||f_;const u=f_.length;let c,h,d,f,p;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const m=l[c].toString();for(p=this.executorsByZIndex_[m],d=0,f=o.length;d<f;++d){const y=o[d],v=p[y];if(v!==void 0){const b=a===null?void 0:v.getZIndexContext(),x=b?b.getContext():e,w=this.maxExtent_&&y!=="Image"&&y!=="Text";if(w&&(x.save(),this.clip(x,n)),!b||y==="Text"||y==="Image"?v.execute(x,t,n,r,s,a):b.pushFunction(C=>v.execute(C,t,n,r,s,a)),w&&x.restore(),b){b.offset();const C=l[c]*u+d;this.deferredZIndexContexts_[C]||(this.deferredZIndexContexts_[C]=[]),this.deferredZIndexContexts_[C].push(b)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(qh);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[n]].length=0}}const m3={};function cwt(i){if(m3[i]!==void 0)return m3[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return m3[i]=r,r}class hwt extends sIe{constructor(e,t,n,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?CL(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hl()}drawImages_(e,t,n,r){if(!this.image_)return;const s=bg(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,m=f+this.imageAnchorY_;Jc(a,p,m,1,1,u,-p,-m),o.save(),o.transform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=bg(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=r){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,n,r,s){const o=this.context_,a=bg(e,t,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),n}drawRings_(e,t,n,r){for(let s=0,o=n.length;s<o;++s)t=this.moveToLineTo_(e,t,n[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cs(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=fbt(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cs(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Cs(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cs(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Cs(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(n,r,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),f1(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:E2;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ph(n||Pl)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=s||vf;this.strokeState_={lineCap:r!==void 0?r:Eb,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||_f)*this.pixelRatio_,lineJoin:a!==void 0?a:Cb,lineWidth:(l!==void 0?l:C2)*this.pixelRatio_,miterLimit:u!==void 0?u:x2,strokeStyle:Ph(n||w2)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Ph(f||Pl)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),p=n.getLineCap(),m=n.getLineDash(),y=n.getLineDashOffset(),v=n.getLineJoin(),b=n.getWidth(),x=n.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:Eb,lineDash:m||vf,lineDashOffset:y||_f,lineJoin:v!==void 0?v:Cb,lineWidth:b!==void 0?b:C2,miterLimit:x!==void 0?x:x2,strokeStyle:Ph(f||w2)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:XMe,textAlign:h!==void 0?h:E2,textBaseline:d!==void 0?d:bk},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,p,m)=>f+=m%2?" ":p,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const dwt=hwt,yu=.5;function lIe(i,e,t,n,r,s,o,a,l){const u=l?SL(r):r,c=i[0]*yu,h=i[1]*yu,d=Zs(c,h);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new dwt(d,yu,r,null,o,a,l?$C(ubt(),l):null),m=t.length,y=Math.floor((256*256*256-1)/m),v={};for(let x=1;x<=m;++x){const w=t[x-1],C=w.getStyleFunction()||n;if(!C)continue;let D=C(w,s);if(!D)continue;Array.isArray(D)||(D=[D]);const A=(x*y).toString(16).padStart(7,"#00000");for(let L=0,O=D.length;L<O;++L){const $=D[L],q=$.getGeometryFunction()(w);if(!q||!Cs(u,q.getExtent()))continue;const M=$.clone(),F=M.getFill();F&&F.setColor(A);const N=M.getStroke();N&&(N.setColor(A),N.setLineDash(null)),M.setText(void 0);const B=$.getImage();if(B){const te=B.getImageSize();if(!te)continue;const le=Zs(te[0],te[1],void 0,{alpha:!1}),Q=le.canvas;le.fillStyle=A,le.fillRect(0,0,Q.width,Q.height),M.setImage(new zL({img:Q,anchor:B.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:B.getOrigin(),opacity:1,size:B.getSize(),scale:B.getScale(),rotation:B.getRotation(),rotateWithView:B.getRotateWithView()}))}const W=M.getZIndex()||0;let K=v[W];K||(K={},v[W]=K,K.Polygon=[],K.Circle=[],K.LineString=[],K.Point=[]);const ee=q.getType();if(ee==="GeometryCollection"){const te=q.getGeometriesArrayRecursive();for(let le=0,Q=te.length;le<Q;++le){const z=te[le];K[z.getType().replace("Multi","")].push(z,M)}}else K[ee.replace("Multi","")].push(q,M)}}const b=Object.keys(v).map(Number).sort(qh);for(let x=0,w=b.length;x<w;++x){const C=v[b[x]];for(const D in C){const R=C[D];for(let A=0,L=R.length;A<L;A+=2){p.setStyle(R[A+1]);for(let O=0,$=e.length;O<$;++O)p.setTransform(e[O]),p.drawGeometry(R[A])}}}return d.getImageData(0,0,f.width,f.height)}function uIe(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*yu),s=Math.floor(Math.round(i[1])*yu),o=($s(r,0,t.width-1)+$s(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],c=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&n.push(e[c/h-1])}return n}const fwt=.5,cIe={Point:xwt,LineString:vwt,Polygon:Ewt,MultiPoint:wwt,MultiLineString:_wt,MultiPolygon:bwt,GeometryCollection:ywt,Circle:gwt};function pwt(i,e){return parseInt(yi(i),10)-parseInt(yi(e),10)}function PF(i,e){const t=hIe(i,e);return t*t}function hIe(i,e){return fwt*i/e}function gwt(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function Tk(i,e,t,n,r,s,o,a){const l=[],u=t.getImage();if(u){let d=!0;const f=u.getImageState();f==ui.LOADED||f==ui.ERROR?d=!1:f==ui.IDLE&&u.load(),d&&l.push(u.ready())}const c=t.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),mwt(i,e,t,n,s,o,a),h}function mwt(i,e,t,n,r,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,r);if(t.getRenderer())dIe(i,l,t,e,o);else{const c=cIe[l.getType()];c(i,l,t,e,o,s)}}function dIe(i,e,t,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)dIe(i,o[a],t,n,r);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),r)}function ywt(i,e,t,n,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=cIe[o[a].getType()];u(i,o[a],t,n,r,s)}}function vwt(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function _wt(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function bwt(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}function xwt(i,e,t,n,r,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=ui.LOADED)return;const c=i.getBuilder(t.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,n,r)}if(l){const c=i.getBuilder(t.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,n,r)}}function wwt(i,e,t,n,r,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),c=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=ui.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,n,r)}if(u){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,n,r)}}function Ewt(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}class Cwt extends l6{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Au(),this.wrappedRenderedExtent_=Au(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,m=!(p[lo.ANIMATING]||p[lo.INTERACTING]),y=this.context,v=Math.round(Xn(r)/a*f),b=Math.round(Xs(r)/a*f),x=h.getWrapX()&&l.canWrapX(),w=x?Xn(c):null,C=x?Math.ceil((r[2]-c[2])/w)+1:1;let D=x?Math.floor((r[0]-c[0])/w):0;do{let R=this.getRenderTransform(o,a,0,f,v,b,D*w);t.declutter&&(R=R.slice(0)),e.execute(y,[y.canvas.width,y.canvas.height],R,u,m,n===void 0?f_:n?Sk:uwt,n?d&&t.declutter[d]:void 0)}while(++D<C)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Zs(this.context.canvas.width,this.context.canvas.height,f1e))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,H0(this.context),f1e.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(fu.PRERENDER)||this.getLayer().hasListener(fu.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=Ic(n.extent);a=Cs(l,e.extent),this.clipped_=a&&!Mc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=n[0]*yu,d=n[1]*yu;c.push(this.getRenderTransform(r,s,o,yu,h,d,0).slice());const f=u.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Mc(p,l)){let m=l[0];const y=Xn(p);let v=0,b;for(;m<p[0];)--v,b=y*v,c.push(this.getRenderTransform(r,s,o,yu,h,d,b).slice()),m+=y;for(v=0,m=l[2];m>p[2];)++v,b=y*v,c.push(this.getRenderTransform(r,s,o,yu,h,d,b).slice()),m-=y}this.hitDetectionImageData_=lIe(n,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o,PF(s,this.renderedPixelRatio_),null)}t(uIe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},c=function(p,m,y){const v=yi(p),b=u[v];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return u[v]=!0,s.splice(s.lastIndexOf(b),1),r(p,l,m);b.geometry=m,b.distanceSq=y}}else{if(y===0)return u[v]=!0,r(p,l,m);s.push(u[v]={feature:p,layer:l,geometry:m,distanceSq:y,callback:r})}};let h;const d=[this.replayGroup_],f=this.getLayer().getDeclutter();return d.some(p=>h=p.forEachFeatureAtCoordinate(e,o,a,n,c,f&&t.declutter[f]?t.declutter[f].all().map(m=>m.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[lo.ANIMATING],s=e.viewHints[lo.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=pwt);const y=u.center.slice(),v=Hh(l,p*h),b=v.slice(),x=[v.slice()],w=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!Mc(w,e.extent)){const F=Xn(w),N=Math.max(Xn(v)/2,F);v[0]=w[0]-N,v[2]=w[2]+N,oMe(y,c);const B=rMe(x[0],c);B[0]<w[0]&&B[2]<w[2]?x.push([B[0]+F,B[1],B[2]+F,B[3]]):B[0]>w[0]&&B[2]>w[2]&&x.push([B[0]-F,B[1],B[2]-F,B[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&Mc(this.wrappedRenderedExtent_,v))return f1(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=y,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new oIe(hIe(h,d),v,h,d);let D;for(let F=0,N=x.length;F<N;++F)n.loadFeatures(x[F],h,c);const R=PF(h,d);let A=!0;const L=(F,N)=>{let B;const W=F.getStyleFunction()||t.getStyleFunction();if(W&&(B=W(F,h)),B){const K=this.renderFeature(F,R,B,C,D,this.getLayer().getDeclutter(),N);A=A&&!K}},O=SL(v),$=n.getFeaturesInExtent(O);m&&$.sort(m);for(let F=0,N=$.length;F<N;++F)L($[F],F);this.renderedFeatures_=$,this.ready=A;const q=C.finish(),M=new aIe(v,h,d,n.getOverlaps(),q,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=b,this.wrappedRenderedExtent_=v,this.renderedCenter_=y,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let u=0,c=n.length;u<c;++u)l=Tk(r,e,n[u],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Tk(r,e,n,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class Swt extends rIe{constructor(e){super(e)}createRenderer(){return new Cwt(this)}}class D1e{constructor(e){this.rbush_=new _C(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[yi(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[yi(a)]=l}this.rbush_.load(n)}remove(e){const t=yi(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[yi(t)],r=[n.minX,n.minY,n.maxX,n.maxY];FC(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,s=e.length;r<s;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return Pg(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Rf(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const Gu={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Twt(i,e){return[[-1/0,-1/0,1/0,1/0]]}let Awt=!1;function fIe(i,e,t,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Awt,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:t,featureProjection:r}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function L1e(i,e){return function(t,n,r,s,o){const a=this;fIe(i,e,t,n,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||d2)}}class Op extends zf{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Rwt extends Q${constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=d2,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(zr(this.format_,"`format` must be set when `url` is set"),this.loader_=L1e(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Twt;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new D1e:null,this.loadedExtentsRtree_=new D1e,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new RF(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=yi(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Op(Gu.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ja||(this.featureChangeKeys_[e]=[To(t,yr.CHANGE,this.handleFeatureChange_,this),To(t,k$.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof ja){const s=this.idIndex_[r];s instanceof ja?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:n=!1}else n=!1}return n&&(zr(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=yi(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=yi(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();t.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Gu.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new Op(Gu.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Gu.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Gu.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(ug.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(ug.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Qo);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Op(Gu.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof ja||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof ja||r.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Pg(this.nullGeometryFeatures_)||Vh(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=I$(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||T_t,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),h=a;if(a=c instanceof ja?0:c.closestPointXY(n,r,o,a),a<h){s=u;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=yi(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Op(Gu.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:yi(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Pg(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(c){return Mc(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Op(Gu.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Op(Gu.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Op(Gu.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(r){if(FC(r.extent,e))return n=r,!0}),n&&t.remove(n)}removeFeatures(e){const t=[];for(let n=0,r=e.length;n<r;++n){const s=e[n],o=this.removeFeatureInternal(s);o&&t.push(o)}t.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=yi(e);if(!(t in this.uidIndex_))return;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Qo),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Gu.REMOVEFEATURE)&&this.dispatchEvent(new Op(Gu.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_){const r=this.idIndex_[n];if(e instanceof ja&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){zr(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(L1e(e,this.format_))}}const kwt={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},M1e={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Dwt extends HMe{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Hl(),this.tileClipContexts_=null}prepareTile(e,t,n){let r;const s=e.getState();return(s===dt.LOADED||s===dt.ERROR)&&(this.updateExecutorGroup_(e,t,n),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),c=u.getSource().getTile(e,t,n,s,l),h=r.viewHints,d=!(h[lo.ANIMATING]||h[lo.INTERACTING]);return(d||!c.wantedResolution)&&(c.wantedResolution=a),this.prepareTile(c,s,l)&&(d||Date.now()-r.time<8)&&u.getRenderMode()!=="vector"&&this.renderTileImage_(c,r),super.getTile(e,t,n,r)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?yi(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const u=r.getSource(),c=!!r.getDeclutter(),h=u.getTileGrid(),f=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),p=u.getSourceTiles(t,n,e),m=yi(r);delete e.hitDetectionImageData[m],e.executorGroups[m]=[],l.dirty=!1;for(let y=0,v=p.length;y<v;++y){const b=p[y];if(b.getState()!=dt.LOADED)continue;const x=b.tileCoord,w=h.getTileCoordExtent(x),C=va(f,w),D=Hh(C,r.getRenderBuffer()*a,this.tmpExtent),R=FC(w,C)?null:D,A=new oIe(0,C,a,t),L=PF(a,t),O=function(N,B){let W;const K=N.getStyleFunction()||r.getStyleFunction();if(K&&(W=K(N,a)),W){const ee=this.renderFeature(N,L,W,A,c,B);l.dirty=l.dirty||ee}},$=b.getFeatures();o&&o!==l.renderedRenderOrder&&$.sort(o);for(let N=0,B=$.length;N<B;++N){const W=$[N];(!R||Cs(R,W.getGeometry().getExtent()))&&O.call(this,W,N)}const q=A.finish(),M=r.getRenderMode()!=="vector"&&c&&p.length===1?null:C,F=new aIe(M,a,t,u.getOverlaps(),q,r.getRenderBuffer(),!0);e.executorGroups[m].push(F)}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,n,r,s){const o=t.viewState.resolution,a=t.viewState.rotation;n=n??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(t.viewState.projection),h=bb([e]);Hh(h,o*n,h);const d={},f=function(y,v,b){let x=y.getId();x===void 0&&(x=yi(y));const w=d[x];if(w){if(w!==!0&&b<w.distanceSq){if(b===0)return d[x]=!0,s.splice(s.lastIndexOf(w),1),r(y,l,v);w.geometry=v,w.distanceSq=b}}else{if(b===0)return d[x]=!0,r(y,l,v);s.push(d[x]={feature:y,layer:l,geometry:v,distanceSq:b,callback:r})}},p=this.renderedTiles;let m;for(let y=0,v=p.length;!m&&y<v;++y){const b=p[y],x=c.getTileCoordExtent(b.wrappedTileCoord);if(!Cs(x,h))continue;const w=yi(l),C=[b.executorGroups[w]],D=l.getDeclutter();C.some(R=>{const A=D?t.declutter[D].all().map(L=>L.value):null;for(let L=0,O=R.length;L<O;++L)if(m=R[L].forEachFeatureAtCoordinate(e,o,a,n,f,A),m)return!0})}return m}getFeatures(e){return new Promise((t,n)=>{const r=this.getLayer(),s=yi(r),o=r.getSource(),a=this.renderedProjection,l=a.getExtent(),u=this.renderedResolution,c=o.getTileGridForProjection(a),h=Wo(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(h,u);let f;for(let x=0,w=this.renderedTiles.length;x<w;++x)if(d.toString()===this.renderedTiles[x].tileCoord.toString()){if(f=this.renderedTiles[x],f.getState()===dt.LOADED){const C=c.getTileCoordExtent(f.tileCoord);o.getWrapX()&&a.canWrapX()&&!Mc(l,C)&&oMe(h,a);break}f=void 0}if(!f||f.loadingSourceTiles>0){t([]);return}const p=c.getTileCoordExtent(f.wrappedTileCoord),m=em(p),y=[(h[0]-m[0])/u,(m[1]-h[1])/u],v=f.getSourceTiles().reduce(function(x,w){return x.concat(w.getFeatures())},[]);let b=f.hitDetectionImageData[s];if(!b){const x=Bs(c.getTileSize(c.getZForResolution(u,o.zDirection))),w=this.renderedRotation_,C=[this.getRenderTransform(c.getTileCoordCenter(f.wrappedTileCoord),u,0,yu,x[0]*yu,x[1]*yu,0)];b=lIe(x,C,v,r.getStyleFunction(),c.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(r).renderedResolution,w),f.hitDetectionImageData[s]=b}t(uIe(y,v,b))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const n=this.context,r=n.globalAlpha;n.globalAlpha=t.opacity;const s=e.viewHints,o=!(s[lo.ANIMATING]||s[lo.INTERACTING]),a=this.renderedTiles;for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.executorGroups[yi(this.getLayer())],d=this.getLayer().getDeclutter();if(h)for(let f=h.length-1;f>=0;--f)h[f].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(c,e),e.viewState.rotation,o,Sk,d?e.declutter[d]:void 0)}n.globalAlpha=r}renderDeferredInternal(e){const n=this.renderedTiles.reduce((a,l,u)=>(l.executorGroups[yi(this.getLayer())].forEach(c=>a.push({executorGroup:c,index:u})),a),[]),r=n.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=n.length;a<l;++a){const u=n[a].executorGroup.getDeferredZIndexContexts();for(const c in u)s[c]=!0}Object.keys(s).sort(qh).map(Number).forEach(a=>{r.forEach((l,u)=>{l[a]&&(l[a].forEach(c=>{const{executorGroup:h,index:d}=n[u],f=h.getRenderedContext(),p=f.globalAlpha;f.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[d];m&&m.draw(f),c.draw(f),m&&f.restore(),f.globalAlpha=p,c.clear()}),l[a].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,r=t.viewState,s=r.center,o=r.resolution,a=r.rotation,l=t.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,p=d.getTileCoordExtent(e.wrappedTileCoord),m=d.getTileCoordExtent(f,this.tmpExtent)[0]-p[0];return _L(xE(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(s,o,a,n,u,c,m))}postRender(e,t){var w;const n=t.viewHints,r=!(n[lo.ANIMATING]||n[lo.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=s.getDeclutter(),u=l?M1e[o].filter(C=>!Sk.includes(C)):M1e[o],c=t.viewState,h=c.rotation,d=s.getSource(),p=d.getTileGridForProjection(c.projection).getZForResolution(c.resolution,d.zDirection),m=this.renderedTiles,y=[],v=[],b=[];let x=!0;for(let C=m.length-1;C>=0;--C){const D=m[C];x=x&&!D.getReplayState(s).dirty;const R=D.executorGroups[yi(s)].filter(F=>F.hasExecutors(u));if(R.length===0)continue;const A=this.getTileRenderTransform(D,t),L=D.tileCoord[0];let O=!1;const $=R[0].getClipCoords(A);let q=e,M;if($){M=new s6,q=M.getContext();for(let F=0,N=y.length;F<N;++F)if(p!==L&&L<v[F]){const B=y[F];Cs([$[0],$[3],$[4],$[7]],[B[0],B[3],B[4],B[7]])&&(O||(q.save(),O=!0),q.beginPath(),q.moveTo($[0],$[1]),q.lineTo($[2],$[3]),q.lineTo($[4],$[5]),q.lineTo($[6],$[7]),q.moveTo(B[6],B[7]),q.lineTo(B[4],B[5]),q.lineTo(B[2],B[3]),q.lineTo(B[0],B[1]),q.clip())}y.push($),v.push(L)}for(let F=0,N=R.length;F<N;++F)R[F].execute(e,[e.canvas.width,e.canvas.height],A,h,r,u,(w=t.declutter)==null?void 0:w[l]);O&&(q===e?q.restore():b[C]=M)}e.globalAlpha=a,this.ready=x,this.tileClipContexts_=b,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=Tk(r,e,n[l],t,this.boundHandleStyleImageChange_,void 0,s,o)||a;else a=Tk(r,e,n,t,this.boundHandleStyleImageChange_,void 0,s,o);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),r=t.getRevision(),s=e.wantedResolution;return n.renderedTileResolution!==s||n.renderedTileRevision!==r}renderTileImage_(e,t){const n=this.getLayer(),r=e.getReplayState(n),s=n.getRevision(),o=e.executorGroups[yi(n)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],u=n.getSource();let c=t.pixelRatio;const d=t.viewState.projection,f=u.getTileGridForProjection(d),p=f.getResolution(e.tileCoord[0]),m=t.pixelRatio/e.wantedResolution*p,y=f.getResolution(l),v=e.getContext(n);c=Math.round(Math.max(c,m/c));const b=u.getTilePixelSize(l,c,d);v.canvas.width=b[0],v.canvas.height=b[1];const x=c/m;if(x!==1){const R=yF(this.tmpTransform_);xE(R,x,x),v.setTransform.apply(v,R)}const w=f.getTileCoordExtent(a,this.tmpExtent),C=m/y,D=yF(this.tmpTransform_);xE(D,C,-C),KLe(D,-w[0],-w[3]);for(let R=0,A=o.length;R<A;++R)o[R].execute(v,[v.canvas.width*x,v.canvas.height*x],D,0,!0,kwt[n.getRenderMode()],null);r.renderedTileResolution=e.wantedResolution}}class Lwt extends rIe{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const n=e.renderMode||"hybrid";zr(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Dwt(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(cg.PRELOAD)}getUseInterimTilesOnError(){return this.get(cg.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(cg.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(cg.USE_INTERIM_TILES_ON_ERROR,e)}}let Mwt=class extends zC{constructor(e,t,n,r,s,o){super(e,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==dt.IDLE&&(this.setState(dt.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(dt.ERROR)}setFeatures(e){this.features_=e,this.setState(dt.LOADED)}setLoader(e){this.loader_=e}};const I1e=[];class Iwt extends zC{constructor(e,t,n,r){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=n}getContext(e){const t=yi(e);return t in this.context_||(this.context_[t]=Zs(1,1,I1e)),this.context_[t]}hasContext(e){return yi(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=yi(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];H0(t),I1e.push(t.canvas),delete this.context_[e]}super.release()}}class pIe extends OL{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||p1(t),r=e.tileGrid||ML({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Owt,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new DL(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Mwt,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],n=this.tileCache;if(n.getCount()===0)return t;const r=DMe(n.peekFirstKey())[0],s=this.tileGrid;return n.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==dt.LOADED)return;const a=o.getSourceTiles();for(let l=0,u=a.length;l<u;++l){const c=a[l],h=c.tileCoord;if(Cs(e,s.getTileCoordExtent(h))){const d=c.getFeatures();if(d)for(let f=0,p=d.length;f<p;++f){const m=d[f],y=m.getGeometry();Cs(e,y.getExtent())&&t.push(m)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const n=this.getTileCacheForProjection(e),r=Object.keys(t).reduce((s,o)=>{const a=t1t(o),l=n.peek(a);if(l){const u=l.sourceTiles;for(let c=0,h=u.length;c<h;++c)s[u[c].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(r)}getSourceTiles(e,t,n){if(n.getState()===dt.IDLE){n.setState(dt.LOADING);const r=n.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);Hh(o,-l,o);const u=this.tileGrid,c=u.getExtent();c&&va(o,c,o);const h=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(o,h,d=>{const f=this.tileUrlFunction(d,e,t),p=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?dt.IDLE:dt.EMPTY,f,this.format_,this.tileLoadFunction);n.sourceTiles.push(p);const m=p.getState();if(m<dt.LOADED){const y=v=>{this.handleTileChange(v);const b=p.getState();if(b===dt.LOADED||b===dt.ERROR){const x=p.getKey();x in n.errorTileKeys?p.getState()===dt.LOADED&&delete n.errorTileKeys[x]:n.loadingSourceTiles--,b===dt.ERROR?n.errorTileKeys[x]=!0:p.removeEventListener(yr.CHANGE,y),n.loadingSourceTiles===0&&n.setState(Pg(n.errorTileKeys)?dt.LOADED:dt.ERROR)}};p.addEventListener(yr.CHANGE,y),n.loadingSourceTiles++}m===dt.IDLE&&(p.extent=u.getTileCoordExtent(d),p.projection=t,p.resolution=u.getResolution(d[0]),this.sourceTileCache.set(f,p),p.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===dt.ERROR)?dt.ERROR:dt.LOADED)}return n.sourceTiles}getTile(e,t,n,r,s){const o=$g(e,t,n),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const u=[e,t,n];let c=this.getTileCoordForTileUrlFunction(u,s);const h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(c&&h){const m=d.getTileCoordExtent(c);Hh(m,-d.getResolution(e),m),Cs(h,m)||(c=null)}let f=!0;if(c!==null){const m=this.tileGrid,y=d.getResolution(e),v=m.getZForResolution(y,1),b=d.getTileCoordExtent(c);Hh(b,-y,b),m.forEachTileCoord(b,v,x=>{f=f&&!this.tileUrlFunction(x,r,s)})}const p=new Iwt(u,f?dt.EMPTY:dt.IDLE,c,this.getSourceTiles.bind(this,r,s));return p.key=a,l?(p.interimTile=l,p.refreshInterimChain(),this.tileCache.replace(o,p)):this.tileCache.set(o,p),p}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(u,c){return r.getOrigin(c)}),a=s.map(function(u,c){return r.getTileSize(c)}),l=MMe+1;for(let u=s.length;u<l;++u)s.push(s[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);n=new GC({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=Bs(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function Owt(i,e){i.setLoader(function(t,n,r){fIe(e,i.getFormat(),t,n,r,i.onLoad.bind(i),i.onError.bind(i))})}function Ak(i,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const n=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}const FF="1.3.0";function Pwt(i,e,t,n,r){r.WIDTH=t[0],r.HEIGHT=t[1];const s=n.getAxisOrientation();let o;const a=sMe(r.VERSION,"1.3")>=0;return r[a?"CRS":"SRS"]=n.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,r.BBOX=o.join(","),Ak(i,r)}function Fwt(i,e,t,n,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[Wbe(Xn(i)/a,d_),Wbe(Xs(i)/a,d_)];if(t!=1)switch(o){case"geoserver":const c=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+c:s.FORMAT_OPTIONS="dpi:"+c;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return Pwt(r,i,l,n,s)}function O1e(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:FF,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}class Nwt extends PL{constructor(e){e=e||{};const t=Object.assign({},e.params),n="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Au(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,n,r){const s=tr(n),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=lMe(e,s,o),u=vk(o,s,e,t),c=a.getZForResolution(u,this.zDirection),h=a.getResolution(c),d=a.getTileCoordForCoordAndZ(l,c);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const p=this.gutter_;p!==0&&(f=Hh(f,h*p,f));const m={QUERY_LAYERS:this.params_.LAYERS};Object.assign(m,O1e(this.params_,"GetFeatureInfo"),r);const y=Math.floor((l[0]-f[0])/h),v=Math.floor((f[3]-l[1])/h);return m[this.v13_?"I":"X"]=y,m[this.v13_?"J":"Y"]=v,this.getRequestUrl_(d,f,1,o||s,m)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:FF,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(e!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=e*r/s}return Object.assign(n,t),Ak(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,n,r,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=C0(LMe(e),o.length);a=o[l]}return Fwt(t,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(e[0]),n,r,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||FF;this.v13_=sMe(e,"1.3")>=0}tileUrlFunction(e,t,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=r.getResolution(e[0]);let o=r.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=Hh(o,s*a,o));const l=Object.assign({},O1e(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,n,l)}}class $wt extends PL{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=qMe(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=DF(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(DF(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Ak(e,n):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const u={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(u,s);let c=e;return t=="KVP"?c=Ak(c,u):c=c.replace(/\{(\w+?)\}/g,function(h,d){return u[d]}),c}}}function Bwt(i,e){const t=i.Contents.Layer,n=t==null?void 0:t.find(function(q){return q.Identifier==e.layer});if(!n)return null;const r=i.Contents.TileMatrixSet;let s;n.TileMatrixSetLink.length>1?"projection"in e?s=n.TileMatrixSetLink.findIndex(function(q){const F=r.find(function(W){return W.Identifier==q.TileMatrixSet}).SupportedCRS,N=tr(F),B=tr(e.projection);return N&&B?ll(N,B):F==e.projection}):s=n.TileMatrixSetLink.findIndex(function(q){return q.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const o=n.TileMatrixSetLink[s].TileMatrixSet,a=n.TileMatrixSetLink[s].TileMatrixSetLimits;let l=n.Format[0];"format"in e&&(l=e.format),s=n.Style.findIndex(function(q){return"style"in e?q.Title==e.style:q.isDefault}),s<0&&(s=0);const u=n.Style[s].Identifier,c={};"Dimension"in n&&n.Dimension.forEach(function(q,M,F){const N=q.Identifier;let B=q.Default;B===void 0&&(B=q.Value[0]),c[N]=B});const d=i.Contents.TileMatrixSet.find(function(q){return q.Identifier==o});let f;const p=d.SupportedCRS;if(p&&(f=tr(p)),"projection"in e){const q=tr(e.projection);q&&(!f||ll(q,f))&&(f=q)}let m=!1;const y=f.getAxisOrientation().substr(0,2)=="ne";let v=d.TileMatrix[0],b={MinTileCol:0,MinTileRow:0,MaxTileCol:v.MatrixWidth-1,MaxTileRow:v.MatrixHeight-1};if(a){b=a[a.length-1];const q=d.TileMatrix.find(M=>M.Identifier===b.TileMatrix||d.Identifier+":"+M.Identifier===b.TileMatrix);q&&(v=q)}const x=v.ScaleDenominator*28e-5/f.getMetersPerUnit(),w=y?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,C=v.TileWidth*x,D=v.TileHeight*x;let R=d.BoundingBox;R&&y&&(R=[R[1],R[0],R[3],R[2]]);let A=[w[0]+C*b.MinTileCol,w[1]-D*(1+b.MaxTileRow),w[0]+C*(1+b.MaxTileCol),w[1]-D*b.MinTileRow];if(R!==void 0&&!Mc(R,A)){const q=n.WGS84BoundingBox,M=tr("EPSG:4326").getExtent();if(A=R,q)m=q[0]===M[0]&&q[2]===M[2];else{const F=uMe(R,d.SupportedCRS,"EPSG:4326");m=F[0]-1e-10<=M[0]&&F[2]+1e-10>=M[2]}}const L=s1t(d,A,a),O=[];let $=e.requestEncoding;if($=$!==void 0?$:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const q=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let M=0,F=q.length;M<F;++M)if(q[M].Constraint){const B=q[M].Constraint.find(function(W){return W.name=="GetEncoding"}).AllowedValues.Value;if($===""&&($=B[0]),$==="KVP")B.includes("KVP")&&O.push(q[M].href);else break}else q[M].href&&($="KVP",O.push(q[M].href))}return O.length===0&&($="REST",n.ResourceURL.forEach(function(q){q.resourceType==="tile"&&(l=q.format,O.push(q.template))})),{urls:O,layer:e.layer,matrixSet:o,format:l,projection:f,requestEncoding:$,tileGrid:L,style:u,dimensions:c,wrapX:m,crossOrigin:e.crossOrigin}}class jwt extends IC{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=e.gutter||0,this.helper_=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(yr.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===dt.LOADED,this.loaded)this.uploadTile();else{if(e instanceof IL){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(yr.CHANGE,this.handleTileChange_)}}uploadTile(){qi()}setReady(){this.ready=!0,this.dispatchEvent(yr.CHANGE)}handleTileChange_(){this.tile.getState()===dt.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(yr.CHANGE,this.handleTileChange_)}}const m6=34962,y6=34963,zwt=35040,v6=35044,Gwt=35048,Uwt=5121,qwt=5123,Vwt=5125,gIe=5126,P1e=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Hwt(i,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!Ybt},e);const t=P1e.length;for(let n=0;n<t;++n)try{const r=i.getContext(P1e[n],e);if(r)return r}catch{}return null}const Wwt={STATIC_DRAW:v6,STREAM_DRAW:zwt,DYNAMIC_DRAW:Gwt};class mIe{constructor(e,t){this.array_=null,this.type_=e,zr(e===m6||e===y6,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:Wwt.STATIC_DRAW}ofSize(e){return this.array_=new(y3(this.type_))(e),this}fromArray(e){return this.array_=y3(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(y3(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function y3(i){switch(i){case m6:return Float32Array;case y6:return Uint32Array;default:return Float32Array}}function yIe(i,e,t){const n=t?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,n)}function Xwt(i,e,t,n){yIe(i,e,n),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)}function F1e(i,e,t,n,r,s){const o=i.getGL();let a,l;t instanceof Float32Array?(a=o.FLOAT,i.getExtension("OES_texture_float"),l=i.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),yIe(o,e,s&&l);const u=t.byteLength/n[1];let c=1;u%8===0?c=8:u%4===0?c=4:u%2===0&&(c=2);let h;switch(r){case 1:{h=o.LUMINANCE;break}case 2:{h=o.LUMINANCE_ALPHA;break}case 3:{h=o.RGB;break}case 4:{h=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${r}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,c),o.texImage2D(o.TEXTURE_2D,0,h,n[0],n[1],0,h,a,t),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let Uv=null;function Ywt(){Uv=Zs(1,1,void 0,{willReadFrequently:!0})}class Zwt extends jwt{constructor(e){super(e),this.textures=[],this.renderSize_=Bs(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new mIe(m6,v6);t.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(t),this.coords=t,this.setTile(e.tile)}uploadTile(){const e=this.helper_,t=e.getGL(),n=this.tile;this.textures.length=0;let r;n instanceof IL||n instanceof wb?r=n.getImage():r=n.getData();const s=yk(r);if(s){const b=t.createTexture();this.textures.push(b),this.bandCount=4,Xwt(t,b,s,n.interpolate),this.setReady();return}r=AF(r);const o=n.getSize(),a=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],l=r instanceof Float32Array,u=a[0]*a[1],c=l?Float32Array:Uint8Array,h=c.BYTES_PER_ELEMENT,d=r.byteLength/a[1];this.bandCount=Math.floor(d/h/a[0]);const f=Math.ceil(this.bandCount/4);if(f===1){const b=t.createTexture();this.textures.push(b),F1e(e,b,r,a,this.bandCount,n.interpolate),this.setReady();return}const p=new Array(f);for(let b=0;b<f;++b){const x=t.createTexture();this.textures.push(x);const w=b<f-1?4:(this.bandCount-1)%4+1;p[b]=new c(u*w)}let m=0,y=0;const v=a[0]*this.bandCount;for(let b=0;b<a[1];++b){for(let x=0;x<v;++x){const w=r[y+x],C=Math.floor(m/this.bandCount),D=x%this.bandCount,R=Math.floor(D/4),A=p[R],L=A.length/u,O=D%4;A[C*L+O]=w,++m}y+=d/h}for(let b=0;b<f;++b){const x=this.textures[b],w=p[b],C=w.length/u;F1e(e,x,w,a,C,n.interpolate)}this.setReady()}disposeInternal(){const e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(yr.CHANGE,this.handleTileChange_)}getImagePixelData_(e,t,n){const r=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1];Uv||Ywt(),Uv.clearRect(0,0,1,1);const a=e.width,l=e.height,u=a-2*r,c=l-2*r,h=r+Math.floor(u*(t/s)),d=r+Math.floor(c*(n/o));let f;try{Uv.drawImage(e,h,d,1,1,0,0,1,1),f=Uv.getImageData(0,0,1,1).data}catch{return Uv=null,null}return f}getArrayPixelData_(e,t,n,r){const s=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],l=t[0],u=t[1],c=l+2*s,h=u+2*s,d=s+Math.floor(l*(n/o)),f=s+Math.floor(u*(r/a));if(e instanceof DataView){const m=e.byteLength/(c*h),y=m*(f*c+d),v=e.buffer.slice(y,y+m);return new DataView(v)}const p=this.bandCount*(f*c+d);return e.slice(p,p+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof X$){const n=this.tile.getData(),r=AF(n);if(r){const s=this.tile.getSize();return this.getArrayPixelData_(r,s,e,t)}return this.getImagePixelData_(yk(n),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}const VT={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Kwt=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Jwt=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class N1e{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e.vertexShader||Kwt),t.compileShader(n);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e.fragmentShader||Jwt),t.compileShader(r),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,n),t.attachShader(this.renderTargetProgram_,r),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),n=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const r=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,u=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,r,s,n[0],n[1],o,a,l,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n[0],n[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,n,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=yi(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),n&&n(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let n,r=1;this.uniforms_.forEach(function(s){if(n=typeof s.value=="function"?s.value(e):s.value,n instanceof HTMLCanvasElement||n instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,n.width,n.height,0,t.UNSIGNED_BYTE,new Uint8Array(n.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.uniform1i(s.location,r++);else if(Array.isArray(n))switch(n.length){case 2:t.uniform2f(s.location,n[0],n[1]);return;case 3:t.uniform3f(s.location,n[0],n[1],n[2]);return;case 4:t.uniform4f(s.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(s.location,n)})}}function vIe(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _Ie(i,e){return i[0]=e[0],i[1]=e[1],i[4]=e[2],i[5]=e[3],i[12]=e[4],i[13]=e[5],i}const Pp={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},zw={UNSIGNED_BYTE:Uwt,UNSIGNED_SHORT:qwt,UNSIGNED_INT:Vwt,FLOAT:gIe},Rk={};function $1e(i){return"shared/"+i}let B1e=0;function Qwt(){const i="unique/"+B1e;return B1e+=1,i}function eEt(i){let e=Rk[i];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:Hwt(t)},Rk[i]=e}return e.users+=1,e.context}function tEt(i){const e=Rk[i];if(!e||(e.users-=1,e.users>0))return;const t=e.context,n=t.getExtension("WEBGL_lose_context");n&&n.loseContext();const r=t.canvas;r.width=1,r.height=1,delete Rk[i]}class iEt extends XLe{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?$1e(e.canvasCacheKey):Qwt(),this.gl_=eEt(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(VT.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(VT.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Hl(),this.offsetScaleMatrix_=Hl(),this.tmpMat4_=vIe(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(n=>new N1e({webGlContext:this.gl_,scaleRatio:n.scaleRatio,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms})):[new N1e({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===$1e(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,n=yi(e);let r=this.bufferCache_[n];if(!r){const s=t.createBuffer();r={buffer:e,webGlBuffer:s},this.bufferCache_[n]=r}t.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,n=yi(e),r=this.bufferCache_[n];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(VT.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(VT.RESTORED,this.boundHandleWebGLContextRestored_),tEt(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,n){const r=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA),n?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindTexture(e,t,n){const r=this.gl_;r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.uniform1i(this.getUniformLocation(n),t)}prepareDrawToRenderTarget(e,t,n,r){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,n?s.ZERO:s.ONE_MINUS_SRC_ALPHA),r?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const n=this.gl_;this.getExtension("OES_element_index_uint");const r=n.UNSIGNED_INT,s=4,o=t-e,a=e*s;n.drawElements(n.TRIANGLES,o,r,a)}finalizeDraw(e,t,n){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,t,n):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,n=e.viewState.rotation,r=e.pixelRatio;this.setUniformFloatValue(Pp.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Pp.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Pp.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Pp.PIXEL_RATIO,r),this.setUniformFloatVec2(Pp.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Pp.ROTATION,n)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Pp.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Pp.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let n,r=0;this.uniforms_.forEach(s=>{if(n=typeof s.value=="function"?s.value(e):s.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=n):s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,r,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const o=!(n instanceof HTMLImageElement)||n.complete;!(n instanceof WebGLTexture)&&o&&s.prevValue!==n&&(s.prevValue=n,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),r++}else if(Array.isArray(n)&&n.length===6)this.setUniformMatrixValue(s.name,_Ie(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:t.uniform2f(this.getUniformLocation(s.name),n[0],n[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),n[0],n[1],n[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&t.uniform1f(this.getUniformLocation(s.name),n)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const n=this.gl_,r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}getProgram(e,t){const n=this.gl_,r=this.compileShader(e,n.FRAGMENT_SHADER),s=this.compileShader(t,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,s),n.linkProgram(o),!n.getShaderParameter(r,n.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${n.getShaderInfoLog(r)}`;throw new Error(a)}if(n.deleteShader(r),!n.getShaderParameter(s,n.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${n.getShaderInfoLog(s)}`;throw new Error(a)}if(n.deleteShader(s),!n.getProgramParameter(o,n.LINK_STATUS)){const a=`GL program linking failed: ${n.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=yi(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=yi(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const n=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return Jc(t,0,0,2/(s*n[0]),2/(s*n[1]),-r,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,n,r,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,n,!1,r,s))}enableAttributes(e){const t=nEt(e);let n=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||gIe,t,n),n+=s.size*bIe(s.type)}}handleWebGLContextLost(e){MC(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,n){const r=this.gl_;n=n||r.createTexture();const s=0,o=r.RGBA,a=0,l=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,n),t?r.texImage2D(r.TEXTURE_2D,s,o,l,u,t):r.texImage2D(r.TEXTURE_2D,s,o,e[0],e[1],a,l,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}}function nEt(i){let e=0;for(let t=0;t<i.length;t++){const n=i[t];e+=n.size*bIe(n.type)}return e}function bIe(i){switch(i){case zw.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case zw.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case zw.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case zw.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class _6 extends BMe{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Hl(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(Er.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(fu.PRECOMPOSE)){const r=new PA(fu.PRECOMPOSE,void 0,t,e);n.dispatchEvent(r)}}dispatchPostComposeEvent(e,t){const n=this.getLayer();if(n.hasListener(fu.POSTCOMPOSE)){const r=new PA(fu.POSTCOMPOSE,void 0,t,e);n.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,n=-1,r;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof _6)){t=!0;continue}const c=l.getClassName();if((t||c!==r)&&(n+=1,t=!1),r=c,u===this)break}const s="map/"+e.mapId+"/group/"+n;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new iEt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){Jc(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const s=new PA(e,this.inversePixelTransform_,n,t);r.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(fu.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(fu.POSTRENDER,e,t)}}const rEt={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},sEt={};function j1e(i){return 1/(i+2)}function oEt(){return{tileIds:new Set,representationsByZ:{}}}function z1e(i,e){return i.tileIds.has(yi(e))}function G1e(i,e,t){const n=i.representationsByZ;t in n||(n[t]=new Set),n[t].add(e),i.tileIds.add(yi(e.tile))}function v3(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=va(e,Ic(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=va(e,r))}return e}function NF(i,e){return`${i.getKey()},${Wp(e)}`}class aEt extends _6{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Hl(),this.tempMat4=vIe(),this.tempTileRange_=new LL(0,0,0,0),this.tempTileCoord_=_k(0,0,0),this.tempSize_=[0,0];const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new kMe(n),this.frameState=null,this.projection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}isDrawableTile_(e){const t=this.getLayer(),n=e.getState(),r=t.getUseInterimTilesOnError();return n==dt.LOADED||n==dt.EMPTY||n==dt.ERROR&&!r}prepareFrameInternal(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;const n=this.getLayer().getRenderSource();return!n||py(v3(e,e.extent))?!1:n.getState()==="ready"}createTileRepresentation(e){return qi()}enqueueTiles(e,t,n,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=l.getGutterForProjection(o.projection),h=yi(l);h in e.wantedTiles||(e.wantedTiles[h]={});const d=e.wantedTiles[h],f=this.tileRepresentationCache,p=a.getMapInternal(),m=Math.max(n-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let y=n;y>=m;--y){const v=u.getTileRangeForExtentAndZ(t,y,this.tempTileRange_),b=u.getResolution(y);for(let x=v.minX;x<=v.maxX;++x)for(let w=v.minY;w<=v.maxY;++w){const C=_k(y,x,w,this.tempTileCoord_),D=NF(l,C);let R,A;if(f.containsKey(D)&&(R=f.get(D),A=R.tile),(!R||R.tile.key!==l.getKey())&&(A=l.getTile(y,x,w,e.pixelRatio,o.projection)),z1e(r,A))continue;if(!R)R=this.createTileRepresentation({tile:A,grid:u,helper:this.helper,gutter:c}),f.set(D,R);else if(this.isDrawableTile_(A))R.setTile(A);else{const O=A.getInterimTile();R.setTile(O)}G1e(r,R,y);const L=A.getKey();d[L]=!0,A.getState()===dt.IDLE&&(e.tileQueue.isKeyQueued(L)||e.tileQueue.enqueue([A,h,u.getTileCoordCenter(C),b]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,n,r,s,o,a,l,u,c,h){}renderTileMask(e,t,n,r){}drawTile_(e,t,n,r,s,o,a){if(!t.ready)return;const u=t.tile.tileCoord,c=Wp(u),h=c in o?o[c]:1,d=a.getResolution(n),f=Bs(a.getTileSize(n),this.tempSize_),p=a.getOrigin(n),m=a.getTileCoordExtent(u),y=h<1?-1:j1e(n);h<1&&(e.animate=!0);const v=e.viewState,b=v.center[0],x=v.center[1],w=f[0]+2*r,C=f[1]+2*r,D=w/C,R=(b-p[0])/(f[0]*d),A=(p[1]-x)/(f[1]*d),L=v.resolution/d,O=u[1],$=u[2];yF(this.tileTransform_),xE(this.tileTransform_,2/(e.size[0]*L/w),-2/(e.size[1]*L/w)),L_t(this.tileTransform_,v.rotation),xE(this.tileTransform_,1,1/D),KLe(this.tileTransform_,(f[0]*(O-R)-r)/w,(f[1]*($-A)-r)/C),this.renderTile(t,this.tileTransform_,e,s,d,f,p,m,y,r,h)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const n=e.viewState,r=this.getLayer(),s=r.getRenderSource(),o=s.getTileGridForProjection(n.projection),a=s.getGutterForProjection(n.projection),l=v3(e,e.extent),u=o.getZForResolution(n.resolution,s.zDirection),c=oEt(),h=r.getPreload();if(e.nextExtent){const D=o.getZForResolution(n.nextResolution,s.zDirection),R=v3(e,e.nextExtent);this.enqueueTiles(e,R,D,c,h)}this.enqueueTiles(e,l,u,c,0),h>0&&setTimeout(()=>{this.enqueueTiles(e,l,u-1,c,h-1)},0);const d={},f=yi(this),p=e.time;let m=!1;for(const D of c.representationsByZ[u]){const R=D.tile;if((R instanceof wb||R instanceof J$)&&R.getState()===dt.EMPTY)continue;const A=R.tileCoord;if(D.ready){const $=R.getAlpha(f,p);if($===1){R.endTransition(f);continue}m=!0;const q=Wp(A);d[q]=$}if(this.renderComplete=!1,this.findAltTiles_(o,A,u+1,c))continue;const O=o.getMinZoom();for(let $=u-1;$>=O&&!this.findAltTiles_(o,A,$,c);--$);}const y=c.representationsByZ,v=Object.keys(y).map(Number).sort(E_t);if(this.beforeTilesMaskRender(e))for(let D=0,R=v.length;D<R;++D){const A=v[D];for(const L of y[A]){const O=L.tile.tileCoord;if(Wp(O)in d)continue;const q=o.getTileCoordExtent(O);this.renderTileMask(L,A,q,j1e(A))}}this.beforeTilesRender(e,m);for(let D=0,R=v.length;D<R;++D){const A=v[D];for(const L of y[A]){const O=L.tile.tileCoord;Wp(O)in d||this.drawTile_(e,L,A,a,l,d,o)}}for(const D of y[u]){const R=D.tile.tileCoord;Wp(R)in d&&this.drawTile_(e,D,u,a,l,d,o)}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const x=this.helper.getCanvas(),w=this.tileRepresentationCache;for(;w.canExpireCache();)w.pop().dispose();const C=function(D,R){s.updateCacheSize(.1,R.viewState.projection),s.expireCache(R.viewState.projection,sEt)};return e.postRenderFunctions.push(C),this.postRender(t,e),x}findAltTiles_(e,t,n,r){const s=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let c=s.minY;c<=s.maxY;++c){const h=NF(l,[n,u,c]);let d=!1;if(a.containsKey(h)){const f=a.get(h);f.ready&&!z1e(r,f.tile)&&(G1e(r,f,n),d=!0)}d||(o=!1)}return o}clearCache(){const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}const un={...rEt,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},FA={TEXTURE_COORD:"a_textureCoord"},lEt=[{name:FA.TEXTURE_COORD,size:2,type:zw.FLOAT}];class uEt extends aEt{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new mIe(y6,v6),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new Zwt(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,n,r,s,o,a,l,u,c,h){const d=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(lEt);let f=0;for(;f<e.textures.length;){const D=`${un.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(e.textures[f],f,D),++f}for(let D=0;D<this.paletteTextures_.length;++D){const R=this.paletteTextures_[D],A=R.getTexture(d);this.helper.bindTexture(A,f,R.name),++f}const p=n.viewState,m=o[0]+2*c,y=o[1]+2*c,b=e.tile.tileCoord,x=b[1],w=b[2];this.helper.setUniformMatrixValue(un.TILE_TRANSFORM,_Ie(this.tempMat4,t)),this.helper.setUniformFloatValue(un.TRANSITION_ALPHA,h),this.helper.setUniformFloatValue(un.DEPTH,u);let C=r;c>0&&(C=l,va(C,r,C)),this.helper.setUniformFloatVec4(un.RENDER_EXTENT,C),this.helper.setUniformFloatValue(un.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(un.ZOOM,p.zoom),this.helper.setUniformFloatValue(un.TEXTURE_PIXEL_WIDTH,m),this.helper.setUniformFloatValue(un.TEXTURE_PIXEL_HEIGHT,y),this.helper.setUniformFloatValue(un.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(un.TEXTURE_ORIGIN_X,a[0]+x*o[0]*s-c*s),this.helper.setUniformFloatValue(un.TEXTURE_ORIGIN_Y,a[1]-w*o[1]*s+c*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const n=this.frameState;if(!n)return null;const r=this.getLayer(),s=Wo(n.pixelToCoordinateTransform,e.slice()),o=n.viewState,a=r.getExtent();if(a&&!Af(Ic(a,o.projection),s))return null;const l=r.getSources(bb([s]),o.resolution);let u,c,h;for(u=l.length-1;u>=0;--u)if(c=l[u],c.getState()==="ready"){if(h=c.getTileGridForProjection(o.projection),c.getWrapX())break;const f=h.getExtent();if(!f||Af(f,s))break}if(u<0)return null;const d=this.tileRepresentationCache;for(let f=h.getZForResolution(o.resolution);f>=h.getMinZoom();--f){const p=h.getTileCoordForCoordAndZ(s,f),m=NF(c,p);if(!d.containsKey(m))continue;const y=d.get(m),v=y.tile;if((v instanceof wb||v instanceof J$)&&v.getState()===dt.EMPTY)return null;if(!y.loaded)continue;const b=h.getOrigin(f),x=Bs(h.getTileSize(f)),w=h.getResolution(f),C=(s[0]-b[0])/w-p[1]*x[0],D=(b[1]-s[1])/w-p[2]*x[1];return y.getPixelData(C,D)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const n of this.paletteTextures_)n.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class cEt{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function hEt(i,e){return`operator_${i}_${Object.keys(e.functions).length}`}function qL(i){const e=i.toString();return e.includes(".")?e:e+".0"}function b6(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(qL).join(", ")})`}function dEt(i){const e=W0(i),t=e.length>3?e[3]:1;return b6([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}function fEt(i){const e=Bs(i);return b6(e)}const _3={};let pEt=0;function xIe(i){return i in _3||(_3[i]=pEt++),_3[i]}function gEt(i){return qL(xIe(i))}function wIe(i){return"u_var_"+i}function mEt(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const b3="getBandValue",EIe="u_paletteTextures";function yEt(i,e,t,n){const r=Sr(i,t,e);if(UC(r.type,vy))throw new Error("No matching type was found");if(!Uc(e,r.type)){const s=Mo(e),o=Mo(r.type);throw new Error(`Expected expression to be of type ${s}, got ${o}`)}return x6(r,e,n)}function fr(i){return(e,t,n)=>{const r=t.args.length,s=new Array(r);for(let o=0;o<r;++o)s[o]=x6(t.args[o],n,e);return i(s,e)}}const vEt={[Ve.Get]:(i,e)=>{const n=e.args[0].value;return n in i.properties||(i.properties[n]={name:n,type:e.type}),(i.inFragmentShader?"v_prop_":"a_prop_")+n},[Ve.GeometryType]:(i,e,t)=>{const n="geometryType";return n in i.properties||(i.properties[n]={name:n,type:ol,evaluator:o=>p6(o.getGeometry())}),(i.inFragmentShader?"v_prop_":"a_prop_")+n},[Ve.Var]:(i,e)=>{const n=e.args[0].value;return n in i.variables||(i.variables[n]={name:n,type:e.type}),wIe(n)},[Ve.Resolution]:()=>"u_resolution",[Ve.Zoom]:()=>"u_zoom",[Ve.Time]:()=>"u_time",[Ve.Any]:fr(i=>`(${i.join(" || ")})`),[Ve.All]:fr(i=>`(${i.join(" && ")})`),[Ve.Not]:fr(([i])=>`(!${i})`),[Ve.Equal]:fr(([i,e])=>`(${i} == ${e})`),[Ve.NotEqual]:fr(([i,e])=>`(${i} != ${e})`),[Ve.GreaterThan]:fr(([i,e])=>`(${i} > ${e})`),[Ve.GreaterThanOrEqualTo]:fr(([i,e])=>`(${i} >= ${e})`),[Ve.LessThan]:fr(([i,e])=>`(${i} < ${e})`),[Ve.LessThanOrEqualTo]:fr(([i,e])=>`(${i} <= ${e})`),[Ve.Multiply]:fr(i=>`(${i.join(" * ")})`),[Ve.Divide]:fr(([i,e])=>`(${i} / ${e})`),[Ve.Add]:fr(i=>`(${i.join(" + ")})`),[Ve.Subtract]:fr(([i,e])=>`(${i} - ${e})`),[Ve.Clamp]:fr(([i,e,t])=>`clamp(${i}, ${e}, ${t})`),[Ve.Mod]:fr(([i,e])=>`mod(${i}, ${e})`),[Ve.Pow]:fr(([i,e])=>`pow(${i}, ${e})`),[Ve.Abs]:fr(([i])=>`abs(${i})`),[Ve.Floor]:fr(([i])=>`floor(${i})`),[Ve.Ceil]:fr(([i])=>`ceil(${i})`),[Ve.Round]:fr(([i])=>`floor(${i} + 0.5)`),[Ve.Sin]:fr(([i])=>`sin(${i})`),[Ve.Cos]:fr(([i])=>`cos(${i})`),[Ve.Atan]:fr(([i,e])=>e!==void 0?`atan(${i}, ${e})`:`atan(${i})`),[Ve.Sqrt]:fr(([i])=>`sqrt(${i})`),[Ve.Match]:fr(i=>{const e=i[0],t=i[i.length-1];let n=null;for(let r=i.length-3;r>=1;r-=2){const s=i[r],o=i[r+1];n=`(${e} == ${s} ? ${o} : ${n||t})`}return n}),[Ve.Between]:fr(([i,e,t])=>`(${i} >= ${e} && ${i} <= ${t})`),[Ve.Interpolate]:fr(([i,e,...t])=>{let n="";for(let r=0;r<t.length-2;r+=2){const s=t[r],o=n||t[r+1],a=t[r+2],l=t[r+3];let u;i===qL(1)?u=`(${e} - ${s}) / (${a} - ${s})`:u=`(pow(${i}, (${e} - ${s})) - 1.0) / (pow(${i}, (${a} - ${s})) - 1.0)`,n=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return n}),[Ve.Case]:fr(i=>{const e=i[i.length-1];let t=null;for(let n=i.length-3;n>=0;n-=2){const r=i[n],s=i[n+1];t=`(${r} ? ${s} : ${t||e})`}return t}),[Ve.In]:fr(([i,...e],t)=>{const n=hEt("in",t),r=[];for(let s=0;s<e.length;s+=1)r.push(`  if (inputValue == ${e[s]}) { return true; }`);return t.functions[n]=`bool ${n}(float inputValue) {
${r.join(`
`)}
  return false;
}`,`${n}(${i})`}),[Ve.Array]:fr(i=>`vec${i.length}(${i.join(", ")})`),[Ve.Color]:fr(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`(${i[1]} * vec4(vec3(${i[0]} / 255.0), 1.0))`;const e=i.slice(0,3).map(n=>`${n} / 255.0`);return i.length===3?`vec4(${e.join(", ")}, 1.0)`:`(${i[3]} * vec4(${e.join(", ")}, 1.0))`}),[Ve.Band]:fr(([i,e,t],n)=>{if(!(b3 in n.functions)){let r="";const s=n.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${un.TILE_TEXTURE_ARRAY}[${a}]`;r+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}n.functions[b3]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${un.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${un.TEXTURE_PIXEL_HEIGHT};
${r}
}`}return`${b3}(${i}, ${e??"0.0"}, ${t??"0.0"})`}),[Ve.Palette]:(i,e)=>{const[t,...n]=e.args,r=n.length,s=new Uint8Array(r*4);for(let u=0;u<n.length;u++){const c=n[u].value,h=W0(c),d=u*4;s[d]=h[0],s[d+1]=h[1],s[d+2]=h[2],s[d+3]=h[3]*255}i.paletteTextures||(i.paletteTextures=[]);const o=`${EIe}[${i.paletteTextures.length}]`,a=new cEt(o,s);i.paletteTextures.push(a);const l=x6(t,Kt,i);return`texture2D(${o}, vec2((${l} + 0.5) / ${r}.0, 0.5))`}};function x6(i,e,t){if(i instanceof JMe){const n=vEt[i.operator];if(n===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return n(t,i,e)}if((i.type&Kt)>0)return qL(i.value);if((i.type&xs)>0)return i.value.toString();if((i.type&ol)>0)return gEt(i.value.toString());if((i.type&uo)>0)return dEt(i.value);if((i.type&Gc)>0)return b6(i.value);if((i.type&F_)>0)return fEt(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${Mo(e)})`)}function Rv(i,e,t){const n=f6();return n.style=i.style,yEt(e,t,n,i)}function U1e(i,e){const t=`
    attribute vec2 ${FA.TEXTURE_COORD};
    uniform mat4 ${un.TILE_TRANSFORM};
    uniform float ${un.TEXTURE_PIXEL_WIDTH};
    uniform float ${un.TEXTURE_PIXEL_HEIGHT};
    uniform float ${un.TEXTURE_RESOLUTION};
    uniform float ${un.TEXTURE_ORIGIN_X};
    uniform float ${un.TEXTURE_ORIGIN_Y};
    uniform float ${un.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${FA.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${un.TEXTURE_ORIGIN_X} + ${un.TEXTURE_RESOLUTION} * ${un.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${un.TEXTURE_ORIGIN_Y} - ${un.TEXTURE_RESOLUTION} * ${un.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${un.TILE_TRANSFORM} * vec4(${FA.TEXTURE_COORD}, ${un.DEPTH}, 1.0);
    }
  `,n={...mEt(),inFragmentShader:!0,bandCount:e,style:i},r=[];if(i.color!==void 0){const h=Rv(n,i.color,uo);r.push(`color = ${h};`)}if(i.contrast!==void 0){const h=Rv(n,i.contrast,Kt);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb - (${h} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const h=Rv(n,i.exposure,Kt);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const h=Rv(n,i.saturation,Kt);r.push(`
      float saturation = ${h} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const h=Rv(n,i.gamma,Kt);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${h}));`)}if(i.brightness!==void 0){const h=Rv(n,i.brightness,Kt);r.push(`color.rgb = clamp(color.rgb + ${h}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(n.variables).length;if(o>1&&!i.variables)throw new Error(`Missing variables in style (expected ${n.variables})`);for(let h=0;h<o;++h){const d=n.variables[Object.keys(n.variables)[h]];if(!(d.name in i.variables))throw new Error(`Missing '${d.name}' in style variables`);const f=wIe(d.name);s[f]=function(){let p=i.variables[d.name];return typeof p=="string"&&(p=xIe(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(h){return`uniform float ${h};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${un.TILE_TEXTURE_ARRAY}[${l}];`),n.paletteTextures&&a.push(`uniform sampler2D ${EIe}[${n.paletteTextures.length}];`);const u=Object.keys(n.functions).map(function(h){return n.functions[h]}),c=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${un.RENDER_EXTENT};
    uniform float ${un.TRANSITION_ALPHA};
    uniform float ${un.TEXTURE_PIXEL_WIDTH};
    uniform float ${un.TEXTURE_PIXEL_HEIGHT};
    uniform float ${un.RESOLUTION};
    uniform float ${un.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${un.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${un.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${un.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${un.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${un.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${r.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${un.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:c,uniforms:s,paletteTextures:n.paletteTextures}}class $F extends VMe{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style;const n=e.cacheSize;delete e.cacheSize,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.cacheSize_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Er.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const n=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=U1e(this.style_,this.getSourceBandCount_());return new uEt(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}renderSources(e,t){const n=this.getRenderer();let r;for(let s=0,o=t.length;s<o;++s)this.renderedSource_=t[s],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}render(e,t){this.rendered=!0;const n=e.viewState,r=this.getSources(e.extent,n.resolution);let s=!0;for(let a=0,l=r.length;a<l;++a){const u=r[a],c=u.getState();if(c=="loading"){const h=()=>{u.getState()=="ready"&&(u.removeEventListener("change",h),this.changed())};u.addEventListener("change",h)}s=s&&c=="ready"}const o=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=n.resolution,o;if(this.renderedResolution_>.5*n.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!r.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){this.styleVariables_=e.variables||{},this.style_=e;const t=U1e(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}$F.prototype.dispose;class q1e extends PL{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:ML({extent:p1(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var CIe={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Jr,function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function n(h,d){return h.indexOf(d)===-1?h.length:h.indexOf(d)}function r(h){var d=h.replace(/^v/,"").replace(/\+.*$/,""),f=n(d,"-"),p=d.substring(0,f).split(".");return p.push(d.substring(f+1)),p}function s(h){return isNaN(Number(h))?h:Number(h)}function o(h){if(typeof h!="string")throw new TypeError("Invalid argument expected string");if(!t.test(h))throw new Error("Invalid argument not valid semver ('"+h+"' received)")}function a(h,d){[h,d].forEach(o);for(var f=r(h),p=r(d),m=0;m<Math.max(f.length-1,p.length-1);m++){var y=parseInt(f[m]||0,10),v=parseInt(p[m]||0,10);if(y>v)return 1;if(v>y)return-1}var b=f[f.length-1],x=p[p.length-1];if(b&&x){var w=b.split(".").map(s),C=x.split(".").map(s);for(m=0;m<Math.max(w.length,C.length);m++){if(w[m]===void 0||typeof C[m]=="string"&&typeof w[m]=="number")return-1;if(C[m]===void 0||typeof w[m]=="string"&&typeof C[m]=="number"||w[m]>C[m])return 1;if(C[m]>w[m])return-1}}else if(b||x)return b?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function c(h){if(typeof h!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof h);if(l.indexOf(h)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(h){return typeof h=="string"&&t.test(h)},a.compare=function(h,d,f){c(f);var p=a(h,d);return u[f].indexOf(p)>-1},a})})(CIe);var _Et=CIe.exports,BF=_Et;const w6="1.0.0",At=!0,Ci={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},S0={itemAndCollection:{"cube:":Ci.datacube,"eo:":Ci.eo,"file:":Ci.file,"label:":Ci.label,"pc:":Ci.pointcloud,"processing:":Ci.processing,"proj:":Ci.projection,"raster:":Ci.raster,"sar:":Ci.sar,"sat:":Ci.sat,"sci:":Ci.scientific,"view:":Ci.view,version:Ci.version,deprecated:Ci.version,published:Ci.timestamps,expires:Ci.timestamps,unpublished:Ci.timestamps},catalog:{},collection:{item_assets:Ci["item-assets"]},item:{}};S0.collection=Object.assign(S0.collection,S0.itemAndCollection);S0.item=Object.assign(S0.item,S0.itemAndCollection);var Gw={parseUrl(i){let e=i.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(e)return{id:e[1],version:e[2]}}},Qn={version:w6,extensions:{},set(i){if(typeof i.stac_version!="string"?Qn.version="0.6.0":Qn.version=i.stac_version,Array.isArray(i.stac_extensions))for(let e of i.stac_extensions){let t=Gw.parseUrl(e);t&&(Qn.extensions[t.id]=t.version)}},before(i,e=null){let t=e?Qn.extensions[e]:Qn.version;return typeof t>"u"?!1:BF.compare(t,i,"<")}},je={type(i){let e=typeof i;if(e==="object"){if(i===null)return"null";if(Array.isArray(i))return"array"}return e},is(i,e){return je.type(i)===e},isDefined(i){return typeof i<"u"},isObject(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)},rename(i,e,t){return typeof i[e]<"u"&&typeof i[t]>"u"?(i[t]=i[e],delete i[e],!0):!1},forAll(i,e,t){if(i[e]&&typeof i[e]=="object")for(let n in i[e])t(i[e][n])},toArray(i,e){return typeof i[e]<"u"&&!Array.isArray(i[e])?(i[e]=[i[e]],!0):!1},flattenArray(i,e,t,n=!1){if(Array.isArray(i[e])){for(let r in i[e])if(typeof t[r]=="string"){let s=i[e][r];i[t[r]]=n?[s]:s}return delete i[e],!0}return!1},flattenOneElementArray(i,e,t=!1){return!t&&Array.isArray(i[e])?i[e].length===1?(i[e]=i[e][0],!0):!1:!0},removeFromArray(i,e,t){if(Array.isArray(i[e])){let n=i[e].indexOf(t);return n>-1&&i[e].splice(n,1),!0}return!1},ensure(i,e,t){return je.type(t)!==je.type(i[e])&&(i[e]=t),!0},upgradeExtension(i,e){let{id:t,version:n}=Gw.parseUrl(e),r=i.stac_extensions.findIndex(s=>{let o=Gw.parseUrl(s);return o&&o.id===t&&BF.compare(o.version,n,"<")});return r!==-1?(i.stac_extensions[r]=e,!0):!1},addExtension(i,e){let{id:t,version:n}=Gw.parseUrl(e),r=i.stac_extensions.findIndex(s=>{if(s===e)return!0;let o=Gw.parseUrl(s);return!!(o&&o.id===t&&BF.compare(o.version,n,"<"))});return r===-1?i.stac_extensions.push(e):i.stac_extensions[r]=e,i.stac_extensions.sort(),!0},removeExtension(i,e){return je.removeFromArray(i,"stac_extensions",e)},migrateExtensionShortnames(i){let e=Object.keys(Ci),t=Object.values(Ci);return je.mapValues(i,"stac_extensions",e,t)},populateExtensions(i,e){let t=[];(e=="catalog"||e=="collection")&&t.push(i),(e=="item"||e=="collection")&&je.isObject(i.assets)&&(t=t.concat(Object.values(i.assets))),e=="collection"&&je.isObject(i.item_assets)&&(t=t.concat(Object.values(i.item_assets))),e=="collection"&&je.isObject(i.summaries)&&t.push(i.summaries),e=="item"&&je.isObject(i.properties)&&t.push(i.properties);for(let n of t)Object.keys(n).forEach(r=>{let s=r.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(s)){let o=S0[e][s[0]];je.is(o,"string")&&je.addExtension(i,o)}})},mapValues(i,e,t,n){let r=s=>{let o=t.indexOf(s);return o>=0?n[o]:s};return Array.isArray(i[e])?i[e]=i[e].map(r):typeof i[e]<"u"&&(i[e]=r(i[e])),!0},mapObject(i,e){for(let t in i)i[t]=e(i[t],t)},moveTo(i,e,t,n=!1,r=!1){let s;return n?r?s=o=>Array.isArray(o):s=o=>Array.isArray(o)&&o.length===1:s=je.isDefined,s(i[e])?(t[e]=n&&!r?i[e][0]:i[e],delete i[e],!0):!1},runAll(i,e,t,n){for(let r in i)r.startsWith("migrate")||i[r](e,t,n)},toUTC(i,e){if(typeof i[e]=="string")try{return i[e]=this.toISOString(i[e]),!0}catch{}return delete i[e],!1},toISOString(i){return i instanceof Date||(i=new Date(i)),i.toISOString().replace(".000","")}},Ah={multihash:null,hexToUint8(i){if(i.length===0||i.length%2!==0)throw new Error(`The string "${i}" is not valid hex.`);return new Uint8Array(i.match(/.{1,2}/g).map(e=>parseInt(e,16)))},uint8ToHex(i){return i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")},toMultihash(i,e,t){if(!Ah.multihash||!je.is(i[e],"string"))return!1;try{const n=Ah.multihash.encode(Ah.hexToUint8(i[e]),t);return i[e]=Ah.uint8ToHex(n),!0}catch(n){return console.warn(n),!1}}},E6={migrate(i,e=!0){return Qn.set(i),e&&(i.stac_version=w6),i.type="Catalog",je.ensure(i,"stac_extensions",[]),Qn.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"id",""),je.ensure(i,"description",""),je.ensure(i,"links",[]),je.runAll(E6,i,i),Qn.before("0.8.0")&&je.populateExtensions(i,"catalog"),i}},C6={migrate(i,e=!0){return E6.migrate(i,e),i.type="Collection",Qn.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"license","proprietary"),je.ensure(i,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),je.runAll(C6,i,i),je.isObject(i.properties)&&(je.removeFromArray(i,"stac_extensions","commons"),delete i.properties),Qn.before("0.8.0")&&je.populateExtensions(i,"collection"),Qn.before("1.0.0-beta.1")&&je.mapValues(i,"stac_extensions",["assets"],["item-assets"]),i},extent(i){if(je.ensure(i,"extent",{}),Qn.before("0.8.0")&&(Array.isArray(i.extent.spatial)&&(i.extent.spatial={bbox:[i.extent.spatial]}),Array.isArray(i.extent.temporal)&&(i.extent.temporal={interval:[i.extent.temporal]})),je.ensure(i.extent,"spatial",{}),je.ensure(i.extent.spatial,"bbox",[]),je.ensure(i.extent,"temporal",{}),je.ensure(i.extent.temporal,"interval",[]),Qn.before("1.0.0-rc.3")){if(i.extent.temporal.interval.length>1){let e,t;for(let n of i.extent.temporal.interval){if(n[0]===null)e=null;else if(typeof n[0]=="string"&&e!==null)try{let r=new Date(n[0]);(typeof e>"u"||r<e)&&(e=r)}catch{}if(n[1]===null)t=null;else if(typeof n[1]=="string"&&t!==null)try{let r=new Date(n[1]);(typeof t>"u"||r>t)&&(t=r)}catch{}}i.extent.temporal.interval.unshift([e?je.toISOString(e):null,t?je.toISOString(t):null])}if(i.extent.spatial.bbox.length>1){let e=i.extent.spatial.bbox.reduce((t,n)=>Array.isArray(n)?Math.max(n.length,t):t,4);if(e>=4){let t=new Array(e).fill(null),n=e/2;for(let r of i.extent.spatial.bbox){if(!Array.isArray(r)||r.length<4)break;for(let s in r){let o=r[s];t[s]===null?t[s]=o:s<n?t[s]=Math.min(o,t[s]):t[s]=Math.max(o,t[s])}}t.findIndex(r=>r===null)===-1&&i.extent.spatial.bbox.unshift(t)}}}},collectionAssets(i){Qn.before("1.0.0-rc.1")&&je.removeExtension(i,"collection-assets"),R2.migrateAll(i)},itemAsset(i){Qn.before("1.0.0-beta.2")&&je.rename(i,"item_assets","assets"),R2.migrateAll(i,"item_assets")},summaries(i){if(je.ensure(i,"summaries",{}),Qn.before("0.8.0")&&je.isObject(i.other_properties)){for(let e in i.other_properties){let t=i.other_properties[e];Array.isArray(t.extent)&&t.extent.length===2?i.summaries[e]={minimum:t.extent[0],maximum:t.extent[1]}:Array.isArray(t.values)&&(t.values.filter(n=>Array.isArray(n)).length===t.values.length?i.summaries[e]=t.values.reduce((n,r)=>n.concat(r),[]):i.summaries[e]=t.values)}delete i.other_properties}if(Qn.before("1.0.0-beta.1")&&je.isObject(i.properties)&&!i.links.find(e=>["child","item"].includes(e.rel)))for(let e in i.properties){let t=i.properties[e];Array.isArray(t)||(t=[t]),i.summaries[e]=t}Qn.before("1.0.0-rc.1")&&je.mapObject(i.summaries,e=>(je.rename(e,"min","minimum"),je.rename(e,"max","maximum"),e)),VL.migrate(i.summaries,i,!0),je.moveTo(i.summaries,"sci:doi",i,!0)&&je.addExtension(i,Ci.scientific),je.moveTo(i.summaries,"sci:publications",i,!0,!0)&&je.addExtension(i,Ci.scientific),je.moveTo(i.summaries,"sci:citation",i,!0)&&je.addExtension(i,Ci.scientific),je.moveTo(i.summaries,"cube:dimensions",i,!0)&&je.addExtension(i,Ci.datacube),Object.keys(i.summaries).length===0&&delete i.summaries}},S6={migrate(i,e=null,t=!0){Qn.set(i),t&&(i.stac_version=w6),je.ensure(i,"stac_extensions",[]),Qn.before("1.0.0-rc.1")&&je.migrateExtensionShortnames(i),je.ensure(i,"id",""),je.ensure(i,"type","Feature"),je.isObject(i.geometry)||(i.geometry=null),i.geometry!==null&&je.ensure(i,"bbox",[]),je.ensure(i,"properties",{}),je.ensure(i,"links",[]),je.ensure(i,"assets",{});let n=!1;return je.isObject(e)&&je.isObject(e.properties)&&(je.removeFromArray(i,"stac_extensions","commons"),i.properties=Object.assign({},e.properties,i.properties),n=!0),je.runAll(S6,i,i),VL.migrate(i.properties,i),R2.migrateAll(i),(Qn.before("0.8.0")||n)&&je.populateExtensions(i,"item"),i}},SIe={migrate(i,e=!0){return je.ensure(i,"collections",[]),je.ensure(i,"links",[]),je.runAll(SIe,i,i),i.collections=i.collections.map(t=>C6.migrate(t,e)),i}},TIe={migrate(i,e=!0){return je.ensure(i,"type","FeatureCollection"),je.ensure(i,"features",[]),je.ensure(i,"links",[]),je.runAll(TIe,i,i),i.features=i.features.map(t=>S6.migrate(t,null,e)),i}},R2={migrateAll(i,e="assets"){for(let t in i[e])R2.migrate(i[e][t],i)},migrate(i,e){return je.runAll(R2,i,e),VL.migrate(i,e),i},mediaTypes(i){je.is(i.type,"string")&&je.mapValues(i,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(i,e){let t=je.isObject(e.properties)&&Array.isArray(e.properties["eo:bands"])?e.properties["eo:bands"]:[];if(Array.isArray(i["eo:bands"]))for(let n in i["eo:bands"]){let r=i["eo:bands"][n];je.is(r,"number")&&je.isObject(t[r])?r=t[r]:je.isObject(r)||(r={}),i["eo:bands"][n]=r}}},VL={migrate(i,e,t=!1){return je.runAll(VL,i,e,t),i},_commonMetadata(i){Qn.before("1.0.0-rc.3")&&(je.toUTC(i,"created"),je.toUTC(i,"updated"))},_timestamps(i,e){je.toUTC(i,"published"),je.toUTC(i,"expires"),je.toUTC(i,"unpublished"),je.upgradeExtension(e,Ci.timestamps)},_versioningIndicator(i,e){je.upgradeExtension(e,Ci.version)},checksum(i,e){Qn.before("0.9.0")&&Ah.multihash&&(je.rename(i,"checksum:md5","checksum:multihash")&&Ah.toMultihash(i,"checksum:multihash","md5"),je.rename(i,"checksum:sha1","checksum:multihash")&&Ah.toMultihash(i,"checksum:multihash","sha1"),je.rename(i,"checksum:sha2","checksum:multihash")&&Ah.toMultihash(i,"checksum:multihash","sha2-256"),je.rename(i,"checksum:sha3","checksum:multihash")&&Ah.toMultihash(i,"checksum:multihash","sha3-256")),Qn.before("1.0.0-rc.1")&&je.rename(i,"checksum:multihash","file:checksum")&&je.addExtension(e,Ci.file),je.removeExtension(e,"checksum")},classification(i,e){Qn.before("1.1.0","classification")&&je.forAll(i,"classification:classes",t=>je.rename(t,"color-hint","color_hint")),je.upgradeExtension(e,Ci.classification)},cube(i,e){je.upgradeExtension(e,Ci.datacube)},dtr(i,e){Qn.before("0.9.0")&&(je.rename(i,"dtr:start_datetime","start_datetime"),je.rename(i,"dtr:end_datetime","end_datetime"),je.removeExtension(e,"datetime-range"))},eo(i,e){Qn.before("0.9.0")&&(je.rename(i,"eo:epsg","proj:epsg")&&je.addExtension(e,Ci.projection),je.rename(i,"eo:platform","platform"),je.rename(i,"eo:instrument","instruments")&&je.toArray(i,"instruments"),je.rename(i,"eo:constellation","constellation"),je.rename(i,"eo:off_nadir","view:off_nadir")&&je.addExtension(e,Ci.view),je.rename(i,"eo:azimuth","view:azimuth")&&je.addExtension(e,Ci.view),je.rename(i,"eo:incidence_angle","view:incidence_angle")&&je.addExtension(e,Ci.view),je.rename(i,"eo:sun_azimuth","view:sun_azimuth")&&je.addExtension(e,Ci.view),je.rename(i,"eo:sun_elevation","view:sun_elevation")&&je.addExtension(e,Ci.view)),Qn.before("1.0.0-beta.1")&&je.rename(i,"eo:gsd","gsd"),je.upgradeExtension(e,Ci.eo)},file(i,e){je.upgradeExtension(e,Ci.file)},label(i,e){Qn.before("0.8.0")&&(je.rename(i,"label:property","label:properties"),je.rename(i,"label:task","label:tasks"),je.rename(i,"label:overview","label:overviews")&&je.toArray(i,"label:overviews"),je.rename(i,"label:method","label:methods"),je.toArray(i,"label:classes")),je.upgradeExtension(e,Ci.label)},pc(i,e){Qn.before("0.8.0")&&je.rename(i,"pc:schema","pc:schemas"),je.upgradeExtension(e,Ci.pointcloud)},processing(i,e){je.upgradeExtension(e,Ci.processing)},proj(i,e){je.upgradeExtension(e,Ci.projection)},raster(i,e){je.upgradeExtension(e,Ci.raster)},sar(i,e,t){je.rename(i,"sar:incidence_angle","view:incidence_angle")&&je.addExtension(e,Ci.view),je.rename(i,"sar:pass_direction","sat:orbit_state")&&je.mapValues(i,"sat:orbit_state",[null],["geostationary"])&&je.addExtension(e,Ci.sat),Qn.before("0.7.0")&&(je.flattenArray(i,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],t),je.flattenArray(i,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],t),je.flattenArray(i,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],t),je.rename(i,"sar:off_nadir","view:off_nadir")&&je.addExtension(e,Ci.view)),Qn.before("0.9.0")&&(je.rename(i,"sar:platform","platform"),je.rename(i,"sar:instrument","instruments")&&je.toArray(i,"instruments"),je.rename(i,"sar:constellation","constellation"),je.rename(i,"sar:type","sar:product_type"),je.rename(i,"sar:polarization","sar:polarizations"),je.flattenOneElementArray(i,"sar:absolute_orbit",t)&&je.rename(i,"sar:absolute_orbit","sat:absolute_orbit")&&je.addExtension(e,Ci.sat),je.flattenOneElementArray(i,"sar:relative_orbit",t)&&je.rename(i,"sar:relative_orbit","sat:relative_orbit")&&je.addExtension(e,Ci.sat)),je.upgradeExtension(e,Ci.sar)},sat(i,e){Qn.before("0.9.0")&&(je.rename(i,"sat:off_nadir_angle","sat:off_nadir"),je.rename(i,"sat:azimuth_angle","sat:azimuth"),je.rename(i,"sat:sun_azimuth_angle","sat:sun_azimuth"),je.rename(i,"sat:sun_elevation_angle","sat:sun_elevation")),je.upgradeExtension(e,Ci.sat)},sci(i,e){je.upgradeExtension(e,Ci.scientific)},item(i){Qn.before("0.8.0")&&(je.rename(i,"item:license","license"),je.rename(i,"item:providers","providers"))},table(i,e){je.upgradeExtension(e,Ci.table)},view(i,e){je.upgradeExtension(e,Ci.view)}},qv={item(i,e=null,t=!0){return S6.migrate(i,e,t)},catalog(i,e=!0){return E6.migrate(i,e)},collection(i,e=!0){return C6.migrate(i,e)},collectionCollection(i,e=!0){return SIe.migrate(i,e)},itemCollection(i,e=!0){return TIe.migrate(i,e)},stac(i,e=!0){return i.type==="Feature"?qv.item(i,null,e):i.type==="FeatureCollection"?qv.itemCollection(i,e):i.type==="Collection"||!i.type&&je.isDefined(i.extent)&&je.isDefined(i.license)?qv.collection(i,e):!i.type&&Array.isArray(i.collections)?qv.collectionCollection(i,e):qv.catalog(i,e)},enableMultihash(i){Ah.multihash=i}},bEt=qv;const xEt=Ea(bEt);function m1(i){let e=i.length>=6,t=i[0],n=i[e?3:2],r=i[1],s=i[e?4:3],o={west:t,east:n,south:r,north:s};return e&&(o.base=i[2],o.height=i[5]),o}function x3(i){let{west:e,east:t,south:n,north:r}=m1(i);return[[[e,r],[e,n],[t,n],[t,r],[e,r]]]}function wEt(i){if(!qc(i))return null;let e=m1(i),t=[];if(RIe(i)){let n=(e.west+360+e.east)/2;n>180&&(n-=360),t.push(n)}else t.push((e.west+e.east)/2);return t.push((e.south+e.north)/2),typeof e.base<"u"&&t.push((e.base+e.height)/2),t}function AIe(i){if(qc(i)?i=[i]:Array.isArray(i)&&(i=i.filter(n=>qc(n))),!Array.isArray(i)||i.length===0)return null;let e=i.reduce((n,r)=>{if(RIe(r)){let{west:s,east:o,south:a,north:l}=m1(r);n.push(x3([-180,a,o,l])),n.push(x3([s,a,180,l]))}else n.push(x3(r));return n},[]),t=null;if(e.length===1?t={type:"Polygon",coordinates:e[0]}:e.length>1&&(t={type:"MultiPolygon",coordinates:e}),t)return{type:"Feature",geometry:t,properties:{}}}function qc(i){if(!Array.isArray(i)||![4,6].includes(i.length)||i.some(s=>typeof s!="number"))return!1;let{west:e,east:t,south:n,north:r}=m1(i);return n<=r&&e>=-180&&e<=180&&n>=-90&&t<=180&&t>=-180&&r<=90}function RIe(i){if(!qc(i))return!1;let{west:e,east:t}=m1(i);return e>t}function kIe(i){if(!Array.isArray(i)||i.length===0)return null;let e={west:180,south:90,east:-180,north:-90};i.forEach(n=>{if(!qc(n))return;let r=m1(n),s=["west","south"];for(let o in r){let a=s.includes(o)?Math.min:Math.max;e[o]=a(e[o],r[o])}});let t=[e.west,e.south,e.east,e.north];return qc(t)?t:null}function zl(i){return typeof i=="string"&&i.length>0}function kl(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)}function DIe(...i){if(i=i.filter(e=>Array.isArray(e)),i.length>1){let e=Math.max(...i.map(n=>n.length)),t=[];for(let n=0;n<e;n++)t.push(Object.assign({},...i.map(r=>r[n])));return t}else if(i.length===1)return i[0];return[]}function EEt(i){switch(i){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return i.startsWith("u")?0:null}function CEt(i){switch(i){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class HL{constructor(e,t={},n=[]){if(!kl(e))throw new Error("Given data is not an object");if(e instanceof HL){for(let r of n)this[r]=e[r];e=e.toJSON()}this._keyMap=t,this._privateKeys=["_keyMap","_privateKeys"].concat(n);for(let r in e)typeof this[r]>"u"&&(r in t?this[r]=t[r](e[r],this):this[r]=e[r])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return wEt(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(t=>{if(typeof this[t]=="function"||this._privateKeys.includes(t))return;let n=this[t];if(t in this._keyMap){let r=Array.isArray(n)?[]:{};for(let s in n)r[s]=n[s].toJSON();n=r}e[t]=n}),e}}var LIe={exports:{}},Uw={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */Uw.exports;var V1e;function SEt(){return V1e||(V1e=1,function(i,e){(function(t){var n=e&&!e.nodeType&&e,r=i&&!i.nodeType&&i,s=typeof Jr=="object"&&Jr;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,c=26,h=38,d=700,f=72,p=128,m="-",y=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=l-u,C=Math.floor,D=String.fromCharCode,R;function A(te){throw new RangeError(x[te])}function L(te,le){for(var Q=te.length,z=[];Q--;)z[Q]=le(te[Q]);return z}function O(te,le){var Q=te.split("@"),z="";Q.length>1&&(z=Q[0]+"@",te=Q[1]),te=te.replace(b,".");var J=te.split("."),ye=L(J,le).join(".");return z+ye}function $(te){for(var le=[],Q=0,z=te.length,J,ye;Q<z;)J=te.charCodeAt(Q++),J>=55296&&J<=56319&&Q<z?(ye=te.charCodeAt(Q++),(ye&64512)==56320?le.push(((J&1023)<<10)+(ye&1023)+65536):(le.push(J),Q--)):le.push(J);return le}function q(te){return L(te,function(le){var Q="";return le>65535&&(le-=65536,Q+=D(le>>>10&1023|55296),le=56320|le&1023),Q+=D(le),Q}).join("")}function M(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:l}function F(te,le){return te+22+75*(te<26)-((le!=0)<<5)}function N(te,le,Q){var z=0;for(te=Q?C(te/d):te>>1,te+=C(te/le);te>w*c>>1;z+=l)te=C(te/w);return C(z+(w+1)*te/(te+h))}function B(te){var le=[],Q=te.length,z,J=0,ye=p,Ne=f,Ge,rt,Be,ze,lt,xt,Mt,Ct,gi;for(Ge=te.lastIndexOf(m),Ge<0&&(Ge=0),rt=0;rt<Ge;++rt)te.charCodeAt(rt)>=128&&A("not-basic"),le.push(te.charCodeAt(rt));for(Be=Ge>0?Ge+1:0;Be<Q;){for(ze=J,lt=1,xt=l;Be>=Q&&A("invalid-input"),Mt=M(te.charCodeAt(Be++)),(Mt>=l||Mt>C((a-J)/lt))&&A("overflow"),J+=Mt*lt,Ct=xt<=Ne?u:xt>=Ne+c?c:xt-Ne,!(Mt<Ct);xt+=l)gi=l-Ct,lt>C(a/gi)&&A("overflow"),lt*=gi;z=le.length+1,Ne=N(J-ze,z,ze==0),C(J/z)>a-ye&&A("overflow"),ye+=C(J/z),J%=z,le.splice(J++,0,ye)}return q(le)}function W(te){var le,Q,z,J,ye,Ne,Ge,rt,Be,ze,lt,xt=[],Mt,Ct,gi,Wt;for(te=$(te),Mt=te.length,le=p,Q=0,ye=f,Ne=0;Ne<Mt;++Ne)lt=te[Ne],lt<128&&xt.push(D(lt));for(z=J=xt.length,J&&xt.push(m);z<Mt;){for(Ge=a,Ne=0;Ne<Mt;++Ne)lt=te[Ne],lt>=le&&lt<Ge&&(Ge=lt);for(Ct=z+1,Ge-le>C((a-Q)/Ct)&&A("overflow"),Q+=(Ge-le)*Ct,le=Ge,Ne=0;Ne<Mt;++Ne)if(lt=te[Ne],lt<le&&++Q>a&&A("overflow"),lt==le){for(rt=Q,Be=l;ze=Be<=ye?u:Be>=ye+c?c:Be-ye,!(rt<ze);Be+=l)Wt=rt-ze,gi=l-ze,xt.push(D(F(ze+Wt%gi,0))),rt=C(Wt/gi);xt.push(D(F(rt,0))),ye=N(Q,Ct,z==J),Q=0,++z}++Q,++le}return xt.join("")}function K(te){return O(te,function(le){return y.test(le)?B(le.slice(4).toLowerCase()):le})}function ee(te){return O(te,function(le){return v.test(le)?"xn--"+W(le):le})}if(o={version:"1.3.2",ucs2:{decode:$,encode:q},decode:B,encode:W,toASCII:ee,toUnicode:K},n&&r)if(i.exports==n)r.exports=o;else for(R in o)o.hasOwnProperty(R)&&(n[R]=o[R]);else t.punycode=o})(Jr)}(Uw,Uw.exports)),Uw.exports}var w3={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var H1e;function TEt(){return H1e||(H1e=1,function(i){(function(e,t){i.exports?i.exports=t():e.IPv6=t(e)})(Jr,function(e){var t=e&&e.IPv6;function n(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var c;for(c=0;c<l&&a[c]!=="";c++);if(c<u)for(a.splice(c,1,"0000");a.length<u;)a.splice(c,0,"0000");for(var h,d=0;d<u;d++){h=a[d].split("");for(var f=0;f<3&&(h[0]==="0"&&h.length>1);f++)h.splice(0,1);a[d]=h.join("")}var p=-1,m=0,y=0,v=-1,b=!1;for(d=0;d<u;d++)b?a[d]==="0"?y+=1:(b=!1,y>m&&(p=v,m=y)):a[d]==="0"&&(b=!0,v=d,y=1);y>m&&(p=v,m=y),m>1&&a.splice(p,m,""),l=a.length;var x="";for(a[0]===""&&(x=":"),d=0;d<l&&(x+=a[d],d!==l-1);d++)x+=":";return a[l-1]===""&&(x+=":"),x}function r(){return e.IPv6===this&&(e.IPv6=t),this}return{best:n,noConflict:r}})}(w3)),w3.exports}var E3={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var W1e;function AEt(){return W1e||(W1e=1,function(i){(function(e,t){i.exports?i.exports=t():e.SecondLevelDomains=t(e)})(Jr,function(e){var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(r){var s=r.lastIndexOf(".");if(s<=0||s>=r.length-1)return!1;var o=r.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=n.list[r.slice(s+1)];return a?a.indexOf(" "+r.slice(o+1,s)+" ")>=0:!1},is:function(r){var s=r.lastIndexOf(".");if(s<=0||s>=r.length-1)return!1;var o=r.lastIndexOf(".",s-1);if(o>=0)return!1;var a=n.list[r.slice(s+1)];return a?a.indexOf(" "+r.slice(0,s)+" ")>=0:!1},get:function(r){var s=r.lastIndexOf(".");if(s<=0||s>=r.length-1)return null;var o=r.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=n.list[r.slice(s+1)];return!a||a.indexOf(" "+r.slice(o+1,s)+" ")<0?null:r.slice(o+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n})}(E3)),E3.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */(function(i){(function(e,t){i.exports?i.exports=t(SEt(),TEt(),AEt()):e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(Jr,function(e,t,n,r){var s=r&&r.URI;function o(M,F){var N=arguments.length>=1,B=arguments.length>=2;if(!(this instanceof o))return N?B?new o(M,F):new o(M):new o;if(M===void 0){if(N)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?M=location.href+"":M=""}if(M===null&&N)throw new TypeError("null is not a valid argument for URI");return this.href(M),F!==void 0?this.absoluteTo(F):this}function a(M){return/^[0-9]+$/.test(M)}o.version="1.19.11";var l=o.prototype,u=Object.prototype.hasOwnProperty;function c(M){return M.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function h(M){return M===void 0?"Undefined":String(Object.prototype.toString.call(M)).slice(8,-1)}function d(M){return h(M)==="Array"}function f(M,F){var N={},B,W;if(h(F)==="RegExp")N=null;else if(d(F))for(B=0,W=F.length;B<W;B++)N[F[B]]=!0;else N[F]=!0;for(B=0,W=M.length;B<W;B++){var K=N&&N[M[B]]!==void 0||!N&&F.test(M[B]);K&&(M.splice(B,1),W--,B--)}return M}function p(M,F){var N,B;if(d(F)){for(N=0,B=F.length;N<B;N++)if(!p(M,F[N]))return!1;return!0}var W=h(F);for(N=0,B=M.length;N<B;N++)if(W==="RegExp"){if(typeof M[N]=="string"&&M[N].match(F))return!0}else if(M[N]===F)return!0;return!1}function m(M,F){if(!d(M)||!d(F)||M.length!==F.length)return!1;M.sort(),F.sort();for(var N=0,B=M.length;N<B;N++)if(M[N]!==F[N])return!1;return!0}function y(M){var F=/^\/+|\/+$/g;return M.replace(F,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(M){if(!(!M||!M.nodeName)){var F=M.nodeName.toLowerCase();if(!(F==="input"&&M.type!=="image"))return o.domAttributes[F]}};function v(M){return escape(M)}function b(M){return encodeURIComponent(M).replace(/[!'()*]/g,v).replace(/\*/g,"%2A")}o.encode=b,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=b,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(M,F){var N=o.encode(M+"");return F===void 0&&(F=o.escapeQuerySpace),F?N.replace(/%20/g,"+"):N},o.decodeQuery=function(M,F){M+="",F===void 0&&(F=o.escapeQuerySpace);try{return o.decode(F?M.replace(/\+/g,"%20"):M)}catch{return M}};var x={encode:"encode",decode:"decode"},w,C=function(M,F){return function(N){try{return o[F](N+"").replace(o.characters[M][F].expression,function(B){return o.characters[M][F].map[B]})}catch{return N}}};for(w in x)o[w+"PathSegment"]=C("pathname",x[w]),o[w+"UrnPathSegment"]=C("urnpath",x[w]);var D=function(M,F,N){return function(B){var W;N?W=function(le){return o[F](o[N](le))}:W=o[F];for(var K=(B+"").split(M),ee=0,te=K.length;ee<te;ee++)K[ee]=W(K[ee]);return K.join(M)}};o.decodePath=D("/","decodePathSegment"),o.decodeUrnPath=D(":","decodeUrnPathSegment"),o.recodePath=D("/","encodePathSegment","decode"),o.recodeUrnPath=D(":","encodeUrnPathSegment","decode"),o.encodeReserved=C("reserved","encode"),o.parse=function(M,F){var N;return F||(F={preventInvalidHostname:o.preventInvalidHostname}),M=M.replace(o.leading_whitespace_expression,""),M=M.replace(o.ascii_tab_whitespace,""),N=M.indexOf("#"),N>-1&&(F.fragment=M.substring(N+1)||null,M=M.substring(0,N)),N=M.indexOf("?"),N>-1&&(F.query=M.substring(N+1)||null,M=M.substring(0,N)),M=M.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),M=M.replace(/^[/\\]{2,}/i,"//"),M.substring(0,2)==="//"?(F.protocol=null,M=M.substring(2),M=o.parseAuthority(M,F)):(N=M.indexOf(":"),N>-1&&(F.protocol=M.substring(0,N)||null,F.protocol&&!F.protocol.match(o.protocol_expression)?F.protocol=void 0:M.substring(N+1,N+3).replace(/\\/g,"/")==="//"?(M=M.substring(N+3),M=o.parseAuthority(M,F)):(M=M.substring(N+1),F.urn=!0))),F.path=M,F},o.parseHost=function(M,F){M||(M=""),M=M.replace(/\\/g,"/");var N=M.indexOf("/"),B,W;if(N===-1&&(N=M.length),M.charAt(0)==="[")B=M.indexOf("]"),F.hostname=M.substring(1,B)||null,F.port=M.substring(B+2,N)||null,F.port==="/"&&(F.port=null);else{var K=M.indexOf(":"),ee=M.indexOf("/"),te=M.indexOf(":",K+1);te!==-1&&(ee===-1||te<ee)?(F.hostname=M.substring(0,N)||null,F.port=null):(W=M.substring(0,N).split(":"),F.hostname=W[0]||null,F.port=W[1]||null)}return F.hostname&&M.substring(N).charAt(0)!=="/"&&(N++,M="/"+M),F.preventInvalidHostname&&o.ensureValidHostname(F.hostname,F.protocol),F.port&&o.ensureValidPort(F.port),M.substring(N)||"/"},o.parseAuthority=function(M,F){return M=o.parseUserinfo(M,F),o.parseHost(M,F)},o.parseUserinfo=function(M,F){var N=M,B=M.indexOf("\\");B!==-1&&(M=M.replace(/\\/g,"/"));var W=M.indexOf("/"),K=M.lastIndexOf("@",W>-1?W:M.length-1),ee;return K>-1&&(W===-1||K<W)?(ee=M.substring(0,K).split(":"),F.username=ee[0]?o.decode(ee[0]):null,ee.shift(),F.password=ee[0]?o.decode(ee.join(":")):null,M=N.substring(K+1)):(F.username=null,F.password=null),M},o.parseQuery=function(M,F){if(!M)return{};if(M=M.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!M)return{};for(var N={},B=M.split("&"),W=B.length,K,ee,te,le=0;le<W;le++)K=B[le].split("="),ee=o.decodeQuery(K.shift(),F),te=K.length?o.decodeQuery(K.join("="),F):null,ee!=="__proto__"&&(u.call(N,ee)?((typeof N[ee]=="string"||N[ee]===null)&&(N[ee]=[N[ee]]),N[ee].push(te)):N[ee]=te);return N},o.build=function(M){var F="",N=!1;return M.protocol&&(F+=M.protocol+":"),!M.urn&&(F||M.hostname)&&(F+="//",N=!0),F+=o.buildAuthority(M)||"",typeof M.path=="string"&&(M.path.charAt(0)!=="/"&&N&&(F+="/"),F+=M.path),typeof M.query=="string"&&M.query&&(F+="?"+M.query),typeof M.fragment=="string"&&M.fragment&&(F+="#"+M.fragment),F},o.buildHost=function(M){var F="";if(M.hostname)o.ip6_expression.test(M.hostname)?F+="["+M.hostname+"]":F+=M.hostname;else return"";return M.port&&(F+=":"+M.port),F},o.buildAuthority=function(M){return o.buildUserinfo(M)+o.buildHost(M)},o.buildUserinfo=function(M){var F="";return M.username&&(F+=o.encode(M.username)),M.password&&(F+=":"+o.encode(M.password)),F&&(F+="@"),F},o.buildQuery=function(M,F,N){var B="",W,K,ee,te;for(K in M)if(K!=="__proto__"&&u.call(M,K))if(d(M[K]))for(W={},ee=0,te=M[K].length;ee<te;ee++)M[K][ee]!==void 0&&W[M[K][ee]+""]===void 0&&(B+="&"+o.buildQueryParameter(K,M[K][ee],N),F!==!0&&(W[M[K][ee]+""]=!0));else M[K]!==void 0&&(B+="&"+o.buildQueryParameter(K,M[K],N));return B.substring(1)},o.buildQueryParameter=function(M,F,N){return o.encodeQuery(M,N)+(F!==null?"="+o.encodeQuery(F,N):"")},o.addQuery=function(M,F,N){if(typeof F=="object")for(var B in F)u.call(F,B)&&o.addQuery(M,B,F[B]);else if(typeof F=="string"){if(M[F]===void 0){M[F]=N;return}else typeof M[F]=="string"&&(M[F]=[M[F]]);d(N)||(N=[N]),M[F]=(M[F]||[]).concat(N)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(M,F,N){if(typeof F=="object")for(var B in F)u.call(F,B)&&o.setQuery(M,B,F[B]);else if(typeof F=="string")M[F]=N===void 0?null:N;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(M,F,N){var B,W,K;if(d(F))for(B=0,W=F.length;B<W;B++)M[F[B]]=void 0;else if(h(F)==="RegExp")for(K in M)F.test(K)&&(M[K]=void 0);else if(typeof F=="object")for(K in F)u.call(F,K)&&o.removeQuery(M,K,F[K]);else if(typeof F=="string")N!==void 0?h(N)==="RegExp"?!d(M[F])&&N.test(M[F])?M[F]=void 0:M[F]=f(M[F],N):M[F]===String(N)&&(!d(N)||N.length===1)?M[F]=void 0:d(M[F])&&(M[F]=f(M[F],N)):M[F]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(M,F,N,B){switch(h(F)){case"String":break;case"RegExp":for(var W in M)if(u.call(M,W)&&F.test(W)&&(N===void 0||o.hasQuery(M,W,N)))return!0;return!1;case"Object":for(var K in F)if(u.call(F,K)&&!o.hasQuery(M,K,F[K]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(h(N)){case"Undefined":return F in M;case"Boolean":var ee=!!(d(M[F])?M[F].length:M[F]);return N===ee;case"Function":return!!N(M[F],F,M);case"Array":if(!d(M[F]))return!1;var te=B?p:m;return te(M[F],N);case"RegExp":return d(M[F])?B?p(M[F],N):!1:!!(M[F]&&M[F].match(N));case"Number":N=String(N);case"String":return d(M[F])?B?p(M[F],N):!1:M[F]===N;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var M=[],F=[],N=0,B=0;B<arguments.length;B++){var W=new o(arguments[B]);M.push(W);for(var K=W.segment(),ee=0;ee<K.length;ee++)typeof K[ee]=="string"&&F.push(K[ee]),K[ee]&&N++}if(!F.length||!N)return new o("");var te=new o("").segment(F);return(M[0].path()===""||M[0].path().slice(0,1)==="/")&&te.path("/"+te.path()),te.normalize()},o.commonPath=function(M,F){var N=Math.min(M.length,F.length),B;for(B=0;B<N;B++)if(M.charAt(B)!==F.charAt(B)){B--;break}return B<1?M.charAt(0)===F.charAt(0)&&M.charAt(0)==="/"?"/":"":((M.charAt(B)!=="/"||F.charAt(B)!=="/")&&(B=M.substring(0,B).lastIndexOf("/")),M.substring(0,B+1))},o.withinString=function(M,F,N){N||(N={});var B=N.start||o.findUri.start,W=N.end||o.findUri.end,K=N.trim||o.findUri.trim,ee=N.parens||o.findUri.parens,te=/[a-z0-9-]=["']?$/i;for(B.lastIndex=0;;){var le=B.exec(M);if(!le)break;var Q=le.index;if(N.ignoreHtml){var z=M.slice(Math.max(Q-3,0),Q);if(z&&te.test(z))continue}for(var J=Q+M.slice(Q).search(W),ye=M.slice(Q,J),Ne=-1;;){var Ge=ee.exec(ye);if(!Ge)break;var rt=Ge.index+Ge[0].length;Ne=Math.max(Ne,rt)}if(Ne>-1?ye=ye.slice(0,Ne)+ye.slice(Ne).replace(K,""):ye=ye.replace(K,""),!(ye.length<=le[0].length)&&!(N.ignore&&N.ignore.test(ye))){J=Q+ye.length;var Be=F(ye,Q,J,M);if(Be===void 0){B.lastIndex=J;continue}Be=String(Be),M=M.slice(0,Q)+Be+M.slice(J),B.lastIndex=Q+Be.length}}return B.lastIndex=0,M},o.ensureValidHostname=function(M,F){var N=!!M,B=!!F,W=!1;if(B&&(W=p(o.hostProtocols,F)),W&&!N)throw new TypeError("Hostname cannot be empty, if protocol is "+F);if(M&&M.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+M+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(M).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+M+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(M){if(M){var F=Number(M);if(!(a(F)&&F>0&&F<65536))throw new TypeError('Port "'+M+'" is not a valid port')}},o.noConflict=function(M){if(M){var F={URI:this.noConflict()};return r.URITemplate&&typeof r.URITemplate.noConflict=="function"&&(F.URITemplate=r.URITemplate.noConflict()),r.IPv6&&typeof r.IPv6.noConflict=="function"&&(F.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict=="function"&&(F.SecondLevelDomains=r.SecondLevelDomains.noConflict()),F}else r.URI===this&&(r.URI=s);return this},l.build=function(M){return M===!0?this._deferred_build=!0:(M===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function R(M){return function(F,N){return F===void 0?this._parts[M]||"":(this._parts[M]=F||null,this.build(!N),this)}}function A(M,F){return function(N,B){return N===void 0?this._parts[M]||"":(N!==null&&(N=N+"",N.charAt(0)===F&&(N=N.substring(1))),this._parts[M]=N,this.build(!B),this)}}l.protocol=R("protocol"),l.username=R("username"),l.password=R("password"),l.hostname=R("hostname"),l.port=R("port"),l.query=A("query","?"),l.fragment=A("fragment","#"),l.search=function(M,F){var N=this.query(M,F);return typeof N=="string"&&N.length?"?"+N:N},l.hash=function(M,F){var N=this.fragment(M,F);return typeof N=="string"&&N.length?"#"+N:N},l.pathname=function(M,F){if(M===void 0||M===!0){var N=this._parts.path||(this._parts.hostname?"/":"");return M?(this._parts.urn?o.decodeUrnPath:o.decodePath)(N):N}else return this._parts.urn?this._parts.path=M?o.recodeUrnPath(M):"":this._parts.path=M?o.recodePath(M):"/",this.build(!F),this},l.path=l.pathname,l.href=function(M,F){var N;if(M===void 0)return this.toString();this._string="",this._parts=o._parts();var B=M instanceof o,W=typeof M=="object"&&(M.hostname||M.path||M.pathname);if(M.nodeName){var K=o.getDomAttribute(M);M=M[K]||"",W=!1}if(!B&&W&&M.pathname!==void 0&&(M=M.toString()),typeof M=="string"||M instanceof String)this._parts=o.parse(String(M),this._parts);else if(B||W){var ee=B?M._parts:M;for(N in ee)N!=="query"&&u.call(this._parts,N)&&(this._parts[N]=ee[N]);ee.query&&this.query(ee.query,!1)}else throw new TypeError("invalid input");return this.build(!F),this},l.is=function(M){var F=!1,N=!1,B=!1,W=!1,K=!1,ee=!1,te=!1,le=!this._parts.urn;switch(this._parts.hostname&&(le=!1,N=o.ip4_expression.test(this._parts.hostname),B=o.ip6_expression.test(this._parts.hostname),F=N||B,W=!F,K=W&&n&&n.has(this._parts.hostname),ee=W&&o.idn_expression.test(this._parts.hostname),te=W&&o.punycode_expression.test(this._parts.hostname)),M.toLowerCase()){case"relative":return le;case"absolute":return!le;case"domain":case"name":return W;case"sld":return K;case"ip":return F;case"ip4":case"ipv4":case"inet4":return N;case"ip6":case"ipv6":case"inet6":return B;case"idn":return ee;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return te}return null};var L=l.protocol,O=l.port,$=l.hostname;l.protocol=function(M,F){if(M&&(M=M.replace(/:(\/\/)?$/,""),!M.match(o.protocol_expression)))throw new TypeError('Protocol "'+M+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return L.call(this,M,F)},l.scheme=l.protocol,l.port=function(M,F){return this._parts.urn?M===void 0?"":this:(M!==void 0&&(M===0&&(M=null),M&&(M+="",M.charAt(0)===":"&&(M=M.substring(1)),o.ensureValidPort(M))),O.call(this,M,F))},l.hostname=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M!==void 0){var N={preventInvalidHostname:this._parts.preventInvalidHostname},B=o.parseHost(M,N);if(B!=="/")throw new TypeError('Hostname "'+M+'" contains characters other than [A-Z0-9.-]');M=N.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(M,this._parts.protocol)}return $.call(this,M,F)},l.origin=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0){var N=this.protocol(),B=this.authority();return B?(N?N+"://":"")+this.authority():""}else{var W=o(M);return this.protocol(W.protocol()).authority(W.authority()).build(!F),this}},l.host=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var N=o.parseHost(M,this._parts);if(N!=="/")throw new TypeError('Hostname "'+M+'" contains characters other than [A-Z0-9.-]');return this.build(!F),this},l.authority=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var N=o.parseAuthority(M,this._parts);if(N!=="/")throw new TypeError('Hostname "'+M+'" contains characters other than [A-Z0-9.-]');return this.build(!F),this},l.userinfo=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0){var N=o.buildUserinfo(this._parts);return N&&N.substring(0,N.length-1)}else return M[M.length-1]!=="@"&&(M+="@"),o.parseUserinfo(M,this._parts),this.build(!F),this},l.resource=function(M,F){var N;return M===void 0?this.path()+this.search()+this.hash():(N=o.parse(M),this._parts.path=N.path,this._parts.query=N.query,this._parts.fragment=N.fragment,this.build(!F),this)},l.subdomain=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0){if(!this._parts.hostname||this.is("IP"))return"";var N=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,N)||""}else{var B=this._parts.hostname.length-this.domain().length,W=this._parts.hostname.substring(0,B),K=new RegExp("^"+c(W));if(M&&M.charAt(M.length-1)!=="."&&(M+="."),M.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return M&&o.ensureValidHostname(M,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(K,M),this.build(!F),this}},l.domain=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(typeof M=="boolean"&&(F=M,M=void 0),M===void 0){if(!this._parts.hostname||this.is("IP"))return"";var N=this._parts.hostname.match(/\./g);if(N&&N.length<2)return this._parts.hostname;var B=this._parts.hostname.length-this.tld(F).length-1;return B=this._parts.hostname.lastIndexOf(".",B-1)+1,this._parts.hostname.substring(B)||""}else{if(!M)throw new TypeError("cannot set domain empty");if(M.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(M,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=M;else{var W=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(W,M)}return this.build(!F),this}},l.tld=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(typeof M=="boolean"&&(F=M,M=void 0),M===void 0){if(!this._parts.hostname||this.is("IP"))return"";var N=this._parts.hostname.lastIndexOf("."),B=this._parts.hostname.substring(N+1);return F!==!0&&n&&n.list[B.toLowerCase()]&&n.get(this._parts.hostname)||B}else{var W;if(M)if(M.match(/[^a-zA-Z0-9-]/))if(n&&n.is(M))W=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(W,M);else throw new TypeError('TLD "'+M+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");W=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(W,M)}else throw new TypeError("cannot set TLD empty");return this.build(!F),this}},l.directory=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0||M===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var N=this._parts.path.length-this.filename().length-1,B=this._parts.path.substring(0,N)||(this._parts.hostname?"/":"");return M?o.decodePath(B):B}else{var W=this._parts.path.length-this.filename().length,K=this._parts.path.substring(0,W),ee=new RegExp("^"+c(K));return this.is("relative")||(M||(M="/"),M.charAt(0)!=="/"&&(M="/"+M)),M&&M.charAt(M.length-1)!=="/"&&(M+="/"),M=o.recodePath(M),this._parts.path=this._parts.path.replace(ee,M),this.build(!F),this}},l.filename=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(typeof M!="string"){if(!this._parts.path||this._parts.path==="/")return"";var N=this._parts.path.lastIndexOf("/"),B=this._parts.path.substring(N+1);return M?o.decodePathSegment(B):B}else{var W=!1;M.charAt(0)==="/"&&(M=M.substring(1)),M.match(/\.?\//)&&(W=!0);var K=new RegExp(c(this.filename())+"$");return M=o.recodePath(M),this._parts.path=this._parts.path.replace(K,M),W?this.normalizePath(F):this.build(!F),this}},l.suffix=function(M,F){if(this._parts.urn)return M===void 0?"":this;if(M===void 0||M===!0){if(!this._parts.path||this._parts.path==="/")return"";var N=this.filename(),B=N.lastIndexOf("."),W,K;return B===-1?"":(W=N.substring(B+1),K=/^[a-z0-9%]+$/i.test(W)?W:"",M?o.decodePathSegment(K):K)}else{M.charAt(0)==="."&&(M=M.substring(1));var ee=this.suffix(),te;if(ee)M?te=new RegExp(c(ee)+"$"):te=new RegExp(c("."+ee)+"$");else{if(!M)return this;this._parts.path+="."+o.recodePath(M)}return te&&(M=o.recodePath(M),this._parts.path=this._parts.path.replace(te,M)),this.build(!F),this}},l.segment=function(M,F,N){var B=this._parts.urn?":":"/",W=this.path(),K=W.substring(0,1)==="/",ee=W.split(B);if(M!==void 0&&typeof M!="number"&&(N=F,F=M,M=void 0),M!==void 0&&typeof M!="number")throw new Error('Bad segment "'+M+'", must be 0-based integer');if(K&&ee.shift(),M<0&&(M=Math.max(ee.length+M,0)),F===void 0)return M===void 0?ee:ee[M];if(M===null||ee[M]===void 0)if(d(F)){ee=[];for(var te=0,le=F.length;te<le;te++)!F[te].length&&(!ee.length||!ee[ee.length-1].length)||(ee.length&&!ee[ee.length-1].length&&ee.pop(),ee.push(y(F[te])))}else(F||typeof F=="string")&&(F=y(F),ee[ee.length-1]===""?ee[ee.length-1]=F:ee.push(F));else F?ee[M]=y(F):ee.splice(M,1);return K&&ee.unshift(""),this.path(ee.join(B),N)},l.segmentCoded=function(M,F,N){var B,W,K;if(typeof M!="number"&&(N=F,F=M,M=void 0),F===void 0){if(B=this.segment(M,F,N),!d(B))B=B!==void 0?o.decode(B):void 0;else for(W=0,K=B.length;W<K;W++)B[W]=o.decode(B[W]);return B}if(!d(F))F=typeof F=="string"||F instanceof String?o.encode(F):F;else for(W=0,K=F.length;W<K;W++)F[W]=o.encode(F[W]);return this.segment(M,F,N)};var q=l.query;return l.query=function(M,F){if(M===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof M=="function"){var N=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),B=M.call(this,N);return this._parts.query=o.buildQuery(B||N,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!F),this}else return M!==void 0&&typeof M!="string"?(this._parts.query=o.buildQuery(M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!F),this):q.call(this,M,F)},l.setQuery=function(M,F,N){var B=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof M=="string"||M instanceof String)B[M]=F!==void 0?F:null;else if(typeof M=="object")for(var W in M)u.call(M,W)&&(B[W]=M[W]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof M!="string"&&(N=F),this.build(!N),this},l.addQuery=function(M,F,N){var B=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(B,M,F===void 0?null:F),this._parts.query=o.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof M!="string"&&(N=F),this.build(!N),this},l.removeQuery=function(M,F,N){var B=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(B,M,F),this._parts.query=o.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof M!="string"&&(N=F),this.build(!N),this},l.hasQuery=function(M,F,N){var B=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(B,M,F,N)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(M){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!M)),this},l.normalizeHostname=function(M){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!M)),this},l.normalizePort=function(M){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!M)),this},l.normalizePath=function(M){var F=this._parts.path;if(!F)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!M),this;if(this._parts.path==="/")return this;F=o.recodePath(F);var N,B="",W,K;for(F.charAt(0)!=="/"&&(N=!0,F="/"+F),(F.slice(-3)==="/.."||F.slice(-2)==="/.")&&(F+="/"),F=F.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),N&&(B=F.substring(1).match(/^(\.\.\/)+/)||"",B&&(B=B[0]));W=F.search(/\/\.\.(\/|$)/),W!==-1;){if(W===0){F=F.substring(3);continue}K=F.substring(0,W).lastIndexOf("/"),K===-1&&(K=W),F=F.substring(0,K)+F.substring(W+3)}return N&&this.is("relative")&&(F=B+F.substring(1)),this._parts.path=F,this.build(!M),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(M){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!M)),this},l.normalizeFragment=function(M){return this._parts.fragment||(this._parts.fragment=null,this.build(!M)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var M=o.encode,F=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=M,o.decode=F}return this},l.unicode=function(){var M=o.encode,F=o.decode;o.encode=b,o.decode=unescape;try{this.normalize()}finally{o.encode=M,o.decode=F}return this},l.readable=function(){var M=this.clone();M.username("").password("").normalize();var F="";if(M._parts.protocol&&(F+=M._parts.protocol+"://"),M._parts.hostname&&(M.is("punycode")&&e?(F+=e.toUnicode(M._parts.hostname),M._parts.port&&(F+=":"+M._parts.port)):F+=M.host()),M._parts.hostname&&M._parts.path&&M._parts.path.charAt(0)!=="/"&&(F+="/"),F+=M.path(!0),M._parts.query){for(var N="",B=0,W=M._parts.query.split("&"),K=W.length;B<K;B++){var ee=(W[B]||"").split("=");N+="&"+o.decodeQuery(ee[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),ee[1]!==void 0&&(N+="="+o.decodeQuery(ee[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}F+="?"+N.substring(1)}return F+=o.decodeQuery(M.hash(),!0),F},l.absoluteTo=function(M){var F=this.clone(),N=["protocol","username","password","hostname","port"],B,W,K;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(M instanceof o||(M=new o(M)),F._parts.protocol||(F._parts.protocol=M._parts.protocol,this._parts.hostname))return F;for(W=0;K=N[W];W++)F._parts[K]=M._parts[K];return F._parts.path?(F._parts.path.substring(-2)===".."&&(F._parts.path+="/"),F.path().charAt(0)!=="/"&&(B=M.directory(),B=B||(M.path().indexOf("/")===0?"/":""),F._parts.path=(B?B+"/":"")+F._parts.path,F.normalizePath())):(F._parts.path=M._parts.path,F._parts.query||(F._parts.query=M._parts.query)),F.build(),F},l.relativeTo=function(M){var F=this.clone().normalize(),N,B,W,K,ee;if(F._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(M=new o(M).normalize(),N=F._parts,B=M._parts,K=F.path(),ee=M.path(),K.charAt(0)!=="/")throw new Error("URI is already relative");if(ee.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(N.protocol===B.protocol&&(N.protocol=null),N.username!==B.username||N.password!==B.password||N.protocol!==null||N.username!==null||N.password!==null)return F.build();if(N.hostname===B.hostname&&N.port===B.port)N.hostname=null,N.port=null;else return F.build();if(K===ee)return N.path="",F.build();if(W=o.commonPath(K,ee),!W)return F.build();var te=B.path.substring(W.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return N.path=te+N.path.substring(W.length)||"./",F.build()},l.equals=function(M){var F=this.clone(),N=new o(M),B={},W={},K={},ee,te,le;if(F.normalize(),N.normalize(),F.toString()===N.toString())return!0;if(ee=F.query(),te=N.query(),F.query(""),N.query(""),F.toString()!==N.toString()||ee.length!==te.length)return!1;B=o.parseQuery(ee,this._parts.escapeQuerySpace),W=o.parseQuery(te,this._parts.escapeQuerySpace);for(le in B)if(u.call(B,le)){if(d(B[le])){if(!m(B[le],W[le]))return!1}else if(B[le]!==W[le])return!1;K[le]=!0}for(le in W)if(u.call(W,le)&&!K[le])return!1;return!0},l.preventInvalidHostname=function(M){return this._parts.preventInvalidHostname=!!M,this},l.duplicateQueryParameters=function(M){return this._parts.duplicateQueryParameters=!!M,this},l.escapeQuerySpace=function(M){return this._parts.escapeQuerySpace=!!M,this},o})})(LIe);var REt=LIe.exports;const jF=Ea(REt),X1e=["http","https"];function kEt(i){return typeof i=="string"&&i.startsWith("/vsi")&&!i.startsWith("/vsicurl/")}function DEt(i,e,t=!0){return LEt(i,e,!1,t)}function LEt(i,e=null,t=!1,n=!0){typeof i=="string"&&i.startsWith("/vsicurl/")&&(i=i.replace(/^\/vsicurl\//,""));let r=jF(i);if(e&&r.is("relative")&&!kEt(i)){let s=jF(e),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),r=r.absoluteTo(s)}return r.normalize(),t&&(r.query(""),r.fragment("")),n?r.toString():r}const MEt="application/geo+json",IEt=["application/json",MEt,"text/json"],Y1e=["image/gif","image/jpeg","image/apng","image/png","image/webp"],MIe=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],IIe=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(MIe);function T6(i,e,t=!1){return Array.isArray(e)||(e=[e]),t&&typeof i>"u"?!0:typeof i!="string"?!1:(e=e.map(n=>n.toLowerCase()),e.includes(i.toLowerCase()))}function OEt(i,e=!1){return T6(i,IEt,e)}class OIe extends HL{constructor(e,t=null,n={},r=[]){super(e,n,["_context"].concat(r)),this._context||(this._context=t)}getAbsoluteUrl(e=!0){return this._context?DEt(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let t=new jF(this.href),n=t.protocol().toLowerCase(),r=t.suffix().toLowerCase();return zl(n)&&!X1e.includes(n)?!1:zl(this.type)&&Y1e.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&zl(r)&&(r==="jpg"||Y1e.includes("image/"+r)))}isType(e){return zl(this.type)&&T6(this.type,e)}isGeoTIFF(){return this.isType(IIe)}isCOG(){return this.isType(MIe)}isHTTP(){let t=this.getAbsoluteUrl(!1).protocol().toLowerCase();return zl(t)&&X1e.includes(t)}}class A6 extends OIe{constructor(e,t=null){super(e,t)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(e,t=null){return Array.isArray(e)?e.map(n=>kl(n)?new A6(n,t):n):[]}}class PIe extends HL{constructor(e,t=null,n={},r=[]){if(super(e,Object.assign({links:A6.fromLinks},n),["_url"].concat(r)),!this._url&&(this._url=t,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,t=!0){return this.getLinksWithRels([e]).filter(n=>OEt(n.type,t))}getStacLinkWithRel(e,t=!0){const n=this.getStacLinksWithRel(e,t);return n.length>0?n[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>kl(e)&&zl(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(t=>t.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(t=>e.includes(t.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(t=>!e.includes(t.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class FIe extends PIe{constructor(e,t=null,n={},r=[]){super(e,t,n,r)}getAll(){return[]}}class xg extends OIe{constructor(e,t=null,n=null){super(e,n,{},["_key"]),this._key||(this._key=t)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getBands(){return DIe(this["eo:bands"],this["raster:bands"])}findVisualBands(){let e={red:null,green:null,blue:null},t=this.getBands();for(let r in t){let s=parseInt(r,10),o=t[s];kl(o)&&zl(o.common_name)&&o.common_name in e&&(e[o.common_name]={index:s,band:o})}return Object.values(e).every(r=>r!==null)?e:null}findBand(e,t="name",n=null){Array.isArray(e)||(e=[e]),kl(n)||(n=this.getBands());let r=n.findIndex(s=>kl(s)&&e.includes(s[t]));return r>=0?{index:r,band:n[r]}:null}getBand(e){return kl(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(e=null){e=this.getBand(e);const t={minimum:null,maximum:null},n=a=>a.minimum!==null&&a.maximum!==null;if(e&&(kl(e.statistics)&&(typeof e.statistics.minimum=="number"&&(t.minimum=e.statistics.minimum),typeof e.statistics.maximum=="number"&&(t.maximum=e.statistics.maximum),n(t))||kl(e.histogram)&&(typeof e.histogram.min=="number"&&(t.minimum=e.histogram.min),typeof e.histogram.max=="number"&&(t.maximum=e.histogram.max),n(t))))return t;let r=this.getMetadata("classification:classes");if(Array.isArray(r)&&(r.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),t),n(t)))return t;let s=this.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),t),n(t)))return t;let o=kl(e)&&e.data_type||this.getMetadata("file:data_type");return o&&(t.minimum=EEt(o),t.maximum=CEt(o)),t}getNoDataValues(e=null){e=this.getBand(e);let t=[];if(e&&typeof e.nodata<"u")t.push(e.nodata);else{let n=this.getMetadata("file:nodata");if(typeof n<"u")t=n;else{let r=this.getMetadata("classification:classes");Array.isArray(r)&&(t=r.filter(s=>!!s.nodata).map(s=>s.value))}}return t.map(n=>n==="nan"?NaN:n==="+inf"?1/0:n==="-inf"?-1/0:n)}isDefinition(){return!zl(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(e,t=!1){return Array.isArray(e)||(e=[e]),t&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(n=>e.includes(n))}static fromAssets(e,t=null){let n={};if(kl(e))for(let r in e)n[r]=new xg(e[r],r,t);return n}}class HC extends PIe{constructor(e,t=null,n={},r=[]){super(e,t,n,r)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(t=>t.canBrowserDisplayImage(e))}getThumbnails(e=!0,t=null){let n=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(n.length===0&&(n=this.getLinksWithRels(["preview"])),e&&(n=n.filter(r=>r.canBrowserDisplayImage())),t&&n.length>1){let r=s=>Array.isArray(s.roles)&&s.roles.includes(t)||s.getKey()===t;n=n.filter(r).concat(n.filter(s=>!r(s)))}return n}getDefaultGeoTIFF(e=!0,t=!1){var r;return(r=this.rankGeoTIFFs(e,t)[0])==null?void 0:r.asset}rankGeoTIFFs(e=!0,t=!1,n=null,r=null){kl(n)||(n={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(IIe);e&&(o=o.filter(l=>l.isHTTP()&&(!t||l.isCOG())));let a=Object.entries(n);for(let l of o){let u=0;if(a.length>0){let c=a.filter(([h])=>l.hasRole(h,!0)).map(([,h])=>h);c.length>0&&(u+=Math.max(...c))}!t&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof r=="function"&&(u+=r(l)),s.push({asset:l,score:u})}return s.sort((l,u)=>u.score-l.score),s}findVisualAssets(){let e={red:null,green:null,blue:null},t=Object.keys(e),n=this.getAssets();for(let s of n){let o=s.getBands();if(o.length!==1)continue;let a=s.findBand(t,"common_name",o);a&&(e[a.band.common_name]=s)}return Object.values(e).every(s=>s!==null)?e:null}getAsset(e){return kl(this.assets)&&this.assets[e]||null}getAssets(){return kl(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,t=!1){return this.getAssets().filter(n=>n.hasRole(e,t))}getAssetWithRole(e,t=!1){return this.getAssetsWithRoles([e],t)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(t=>T6(t.type,e))}equals(e){return this===e?!0:!(e instanceof HC)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}}class NIe extends HC{constructor(e,t=null,n={},r=[]){super(e,t,n,r)}getObjectType(){return this.type}getSearchLink(e=null){let t=this.getStacLinksWithRel("search");return e?t[0]||null:t.find(n=>n.method===e||!e&&!n.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class PEt extends NIe{constructor(e,t=null){super(e,t)}}function qw(i){if(zl(i)&&i.length>=10)try{let t=i.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(n=>parseInt(n,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function FEt(i,e){return new Date(i.valueOf()+(e-i)/2)}function $Ie(i){if(!Array.isArray(i)||i.length===0)return null;let e,t;const n=(r,s,o)=>typeof r>"u"?s:r===null||s===null?null:o(r,s);return i.forEach(([r,s])=>{e=n(e,r,Math.min),t=n(t,s,Math.max)}),[e===null?null:new Date(e),t===null?null:new Date(t)]}class BIe extends NIe{constructor(e,t=null){const n={assets:xg.fromAssets,item_assets:xg.fromAssets};super(e,t,n)}toGeoJSON(){let e=AIe(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0&&qc(e[0])?e[0]:null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1&&qc(e[0])?e:e.length>1?e.filter((t,n)=>n>0&&qc(t)):[]}getRawBoundingBoxes(){var t,n;let e=(n=(t=this.extent)==null?void 0:t.spatial)==null?void 0:n.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var t,n;let e=(n=(t=this.extent)==null?void 0:t.temporal)==null?void 0:n.interval;return Array.isArray(e)&&e.length>0?e.filter(r=>Array.isArray(r)&&(zl(r[0])||zl(r[1]))).map(r=>r.map(s=>qw(s))):[]}getSummary(e){return this.summaries[e]}getBands(){let e=this.getSummary("eo:bands"),t=this.getSummary("raster:bands"),n=[e,t].filter(r=>Array.isArray(r));return n.length>=2?DIe(...n):n.length===1?n[0]:[]}}class NEt extends FIe{constructor(e,t=null){const n={collections:r=>r.map(s=>new BIe(s))};super(e,t,n)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return kIe(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return $Ie(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}}class jIe extends HC{constructor(e,t=null){super(e,t,{assets:xg.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return qc(this.bbox)?this.bbox:null}getBoundingBoxes(){return qc(this.bbox)?[this.bbox]:[]}getDateTime(){let e=qw(this.properties.datetime);if(!e){let t=qw(this.properties.start_datetime),n=qw(this.properties.end_datetime);return t&&n?FEt(t,n):t||n}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return zl(this.properties.start_datetime)||zl(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:zl(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(t=>t.map(n=>qw(n)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("eo:bands");return Array.isArray(e)?e:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class $Et extends FIe{constructor(e,t=null){const n={features:r=>r.map(s=>new jIe(s))};super(e,t,n)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return kIe(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return $Ie(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}}function BEt(i,e=!0,t=!1){return e&&(i=xEt.stac(i,t)),i.type==="Feature"?new jIe(i):i.type==="FeatureCollection"?new $Et(i):i.type==="Collection"||!i.type&&typeof i.extent<"u"&&typeof i.license<"u"?new BIe(i):!i.type&&Array.isArray(i.collections)?new NEt(i):new PEt(i)}function R6(i,e){return zIe(i,e,[]).join("")}function zIe(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{let n;for(n=i.firstChild;n;n=n.nextSibling)zIe(n,e,t)}return t}function jEt(i){return"documentElement"in i}function zEt(i){return new DOMParser().parseFromString(i,"application/xml")}function zF(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);r!==void 0&&n[n.length-1].push(r)}}function Fl(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function vi(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;o[a]=s}}}function Fr(i,e,t){t=t!==void 0?t:{};let n,r;for(n=0,r=i.length;n<r;++n)t[i[n]]=e;return t}function GEt(i,e,t,n){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const s=i[r.namespaceURI];if(s!==void 0){const o=s[r.localName];o!==void 0&&o.call(n,r,t)}}}function ts(i,e,t,n,r){return n.push(i),GEt(e,t,n,r),n.pop()}function UEt(i){const e=R6(i,!1);return qEt(e)}function qEt(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function pg(i){const e=R6(i,!1);return VEt(e)}function VEt(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function er(i){return R6(i,!1).trim()}class HEt extends CMe{constructor(e){super(),e=e||{},this.dataProjection=new g2({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:ja,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,r){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,u=0,c=0,h=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),u+=e.readSVarint(),o===1&&c>h&&(r.push(c),h=c),n.push(l,u),c+=2;else if(o===7)c>h&&(n.push(n[h],n[h+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>h&&(r.push(c),h=c)}createFeature_(e,t,n){const r=t.type;if(r===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],u=[];this.readRawGeometry_(e,t,l,u);const c=KEt(r,u.length);if(this.featureClass===ja)s=new this.featureClass(c,l,u,2,o,a),s.transform(n.dataProjection);else{let h;if(c=="Polygon"){const p=wMe(l,u);h=p.length>1?new _2(l,"XY",p):new Fg(l,"XY",u)}else h=c==="Point"?new V0(l,"XY"):c==="LineString"?new q0(l,"XY"):c==="MultiPoint"?new jC(l,"XY"):c==="MultiLineString"?new v2(l,"XY",u):null;const d=this.featureClass;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=kL(h,!1,n);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const r=tr(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const s=new bke(e),o=s.readFields(WEt,{}),a=[];for(const l in o){if(n&&!n.includes(l))continue;const u=o[l],c=u?[0,0,u.extent,u.extent]:null;r.setExtent(c);for(let h=0,d=u.length;h<d;++h){const f=ZEt(s,u,h),p=this.createFeature_(s,f,t);p!==null&&a.push(p)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function WEt(i,e,t){if(i===3){const n={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(XEt,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function XEt(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let n=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)i=t.readVarint()>>3,n=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(n)}}function YEt(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[r]=s}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function ZEt(i,e,t){i.pos=e.features[t];const n=i.readVarint()+i.pos,r={layer:e,type:0,properties:{}};return i.readFields(YEt,r,n),r}function KEt(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}class GIe{read(e){if(!e)return null;if(typeof e=="string"){const t=zEt(e);return this.readFromDocument(t)}return jEt(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){qi()}}const JEt="http://www.w3.org/1999/xlink";function k6(i){return i.getAttributeNS(JEt,"href")}const Jl=[null,"http://www.opengis.net/ows/1.1"],QEt=Fr(Jl,{ServiceIdentification:vi(C2t),ServiceProvider:vi(T2t),OperationsMetadata:vi(w2t)});class e2t extends GIe{constructor(){super()}readFromNode(e){const t=ts({},QEt,e,[]);return t||null}}const t2t=Fr(Jl,{DeliveryPoint:vi(er),City:vi(er),AdministrativeArea:vi(er),PostalCode:vi(er),Country:vi(er),ElectronicMailAddress:vi(er)}),i2t=Fr(Jl,{Value:Fl(A2t)}),n2t=Fr(Jl,{AllowedValues:vi(g2t)}),r2t=Fr(Jl,{Phone:vi(E2t),Address:vi(p2t)}),s2t=Fr(Jl,{HTTP:vi(b2t)}),o2t=Fr(Jl,{Get:Fl(_2t),Post:void 0}),a2t=Fr(Jl,{DCP:vi(v2t)}),l2t=Fr(Jl,{Operation:x2t}),u2t=Fr(Jl,{Voice:vi(er),Facsimile:vi(er)}),c2t=Fr(Jl,{Constraint:Fl(m2t)}),h2t=Fr(Jl,{IndividualName:vi(er),PositionName:vi(er),ContactInfo:vi(y2t)}),d2t=Fr(Jl,{Abstract:vi(er),AccessConstraints:vi(er),Fees:vi(er),Title:vi(er),ServiceTypeVersion:vi(er),ServiceType:vi(er)}),f2t=Fr(Jl,{ProviderName:vi(er),ProviderSite:vi(k6),ServiceContact:vi(S2t)});function p2t(i,e){return ts({},t2t,i,e)}function g2t(i,e){return ts({},i2t,i,e)}function m2t(i,e){const t=i.getAttribute("name");if(t)return ts({name:t},n2t,i,e)}function y2t(i,e){return ts({},r2t,i,e)}function v2t(i,e){return ts({},s2t,i,e)}function _2t(i,e){const t=k6(i);if(t)return ts({href:t},c2t,i,e)}function b2t(i,e){return ts({},o2t,i,e)}function x2t(i,e){const t=i.getAttribute("name"),n=ts({},a2t,i,e);if(!n)return;const r=e[e.length-1];r[t]=n}function w2t(i,e){return ts({},l2t,i,e)}function E2t(i,e){return ts({},u2t,i,e)}function C2t(i,e){return ts({},d2t,i,e)}function S2t(i,e){return ts({},h2t,i,e)}function T2t(i,e){return ts({},f2t,i,e)}function A2t(i,e){return er(i)}const hd=[null,"http://www.opengis.net/wmts/1.0"],y1=[null,"http://www.opengis.net/ows/1.1"],R2t=Fr(hd,{Contents:vi(B2t)});let k2t=class extends GIe{constructor(){super(),this.owsParser_=new e2t}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=t,n=ts(n,R2t,e,[]),n||null):null}};const D2t=Fr(hd,{Layer:Fl(j2t),TileMatrixSet:Fl(z2t)}),L2t=Fr(hd,{Style:Fl(G2t),Format:Fl(er),TileMatrixSetLink:Fl(U2t),Dimension:Fl(q2t),ResourceURL:Fl(V2t)},Fr(y1,{Title:vi(er),Abstract:vi(er),WGS84BoundingBox:vi(qIe),BoundingBox:Fl(H2t),Identifier:vi(er)})),M2t=Fr(hd,{LegendURL:Fl(W2t)},Fr(y1,{Title:vi(er),Identifier:vi(er)})),I2t=Fr(hd,{TileMatrixSet:vi(er),TileMatrixSetLimits:vi(Y2t)}),O2t=Fr(hd,{TileMatrixLimits:zF(Z2t)}),P2t=Fr(hd,{TileMatrix:vi(er),MinTileRow:vi(pg),MaxTileRow:vi(pg),MinTileCol:vi(pg),MaxTileCol:vi(pg)}),F2t=Fr(hd,{Default:vi(er),Value:Fl(er)},Fr(y1,{Identifier:vi(er)})),UIe=Fr(y1,{LowerCorner:zF(GF),UpperCorner:zF(GF)}),N2t=Fr(hd,{WellKnownScaleSet:vi(er),TileMatrix:Fl(X2t)},Fr(y1,{SupportedCRS:vi(er),Identifier:vi(er),BoundingBox:vi(qIe)})),$2t=Fr(hd,{TopLeftCorner:vi(GF),ScaleDenominator:vi(UEt),TileWidth:vi(pg),TileHeight:vi(pg),MatrixWidth:vi(pg),MatrixHeight:vi(pg)},Fr(y1,{Identifier:vi(er)}));function B2t(i,e){return ts({},D2t,i,e)}function j2t(i,e){return ts({},L2t,i,e)}function z2t(i,e){return ts({},N2t,i,e)}function G2t(i,e){const t=ts({},M2t,i,e);if(!t)return;const n=i.getAttribute("isDefault")==="true";return t.isDefault=n,t}function U2t(i,e){return ts({},I2t,i,e)}function q2t(i,e){return ts({},F2t,i,e)}function V2t(i,e){const t=i.getAttribute("format"),n=i.getAttribute("template"),r=i.getAttribute("resourceType"),s={};return t&&(s.format=t),n&&(s.template=n),r&&(s.resourceType=r),s}function qIe(i,e){const t=ts([],UIe,i,e);if(t.length==2)return bb(t)}function H2t(i,e){const t=i.getAttribute("crs"),n=ts([],UIe,i,e);if(n.length==2)return{extent:bb(n),crs:t}}function W2t(i,e){const t={};return t.format=i.getAttribute("format"),t.href=k6(i),t}function GF(i,e){const t=er(i).split(/\s+/);if(!t||t.length!=2)return;const n=+t[0],r=+t[1];if(!(isNaN(n)||isNaN(r)))return[n,r]}function X2t(i,e){return ts({},$2t,i,e)}function Y2t(i,e){return ts([],O2t,i,e)}function Z2t(i,e){return ts({},P2t,i,e)}const K2t=k2t;class Z1e extends FMe{constructor(t){super({...t,state:"loading"});Ye(this,"loadImage",t=>new Promise((n,r)=>{const s=new Image;s.addEventListener("load",()=>n(s)),s.addEventListener("error",()=>r(new Error("load failed"))),s.src=t}));const n=new R$(t.url);n.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setLoader(async(s,o,a)=>{const l=await n.getZxy(s,o,a),u=URL.createObjectURL(new Blob([l.data])),c=await this.loadImage(u);return URL.revokeObjectURL(u),c}),this.setState("ready")})}}class J2t extends pIe{constructor(t){super({...t,state:"loading",url:"pmtiles://"+t.url+"/{z}/{x}/{y}",format:new HEt});Ye(this,"tileLoadFunction",(t,n)=>{const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=n.match(r),o=+s[2],a=+s[3],l=+s[4];t.setLoader((u,c,h)=>{t.setState(dt.LOADING),this.pmtiles_.getZxy(o,a,l).then(d=>{if(d){const f=t.getFormat();t.setFeatures(f.readFeatures(d.data,{extent:u,featureProjection:h})),t.setState(dt.LOADED)}else t.setFeatures([]),t.setState(dt.EMPTY)}).catch(d=>{t.setFeatures([]),t.setState(dt.ERROR)})})});this.pmtiles_=new R$(t.url),this.pmtiles_.getHeader().then(n=>{this.tileGrid.minZoom=n.minZoom,this.tileGrid.maxZoom=n.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const Q2t=new P_({fill:new g1({color:"rgba(255,255,255,0.4)"}),stroke:new BL({color:"#3399CC",width:3})}),eCt=new P_({stroke:new BL({color:"#ff9933",width:1})});function tCt(i,e){const t={url:i.getAbsoluteUrl()};let n=null;i.getBands().length===1&&(n=0);const{minimum:r,maximum:s}=i.getMinMaxValues(n);typeof r=="number"&&(t.min=r),typeof s=="number"&&(t.max=s);const o=i.getNoDataValues(n);return o.length>0&&(t.nodata=o[0]),e.length>0&&(t.bands=e),t}async function K1e(i,e=void 0){return e}function J1e(i,e){const t=i.clone();return e.hasOnlyBounds()||t.setFill(null),t}function iCt(i){let e=i.href;if(e.includes("{s}"))if(Array.isArray(i["href:servers"])&&i["href:servers"].length>0){const t=Math.random()*i["href:servers"].length|0;e=e.replace("{s}",i["href:servers"][t])}else return null;return e}async function nCt(i){try{const e=new URL(i);e.searchParams.set("service","wmts"),e.searchParams.set("request","GetCapabilities");const t=await fetch(e);return new K2t().read(await t.text())}catch{return null}}class D6 extends b2{constructor(e){const t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(n=>t[n]=e[n]),super(t),this.getSourceOptions_=e.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||Q2t,this.collectionStyle_=e.collectionStyle||eCt,this.boundsLayer_=null,e.data){try{this.configure_(e.data,e.url,e.assets,e.bands)}catch(n){this.handleError_(n)}return}if(!e.url)throw new Error("Either url or data must be provided");fetch(e.url).then(n=>n.json()).then(n=>this.configure_(n,e.url,e.assets,e.bands)).catch(n=>this.handleError_(n))}getBoundsLayer(){return this.boundsLayer_}handleError_(e){this.dispatchEvent(new x_t(e))}configure_(e,t=null,n=null,r=[]){e instanceof xg||e instanceof HC?this.data_=e:this.data_=BEt(e),t&&t.includes("://")&&this.data_.setAbsoluteUrl(t),this.bands_=r,this.boundsLayer_=this.addFootprint_();const s=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(J1e(this.boundsStyle_,this))};this.getLayers().on("add",s),this.getLayers().on("remove",s),this.setAssets(n).then(()=>this.dispatchEvent("assetsready")).catch(o=>this.handleError_(o)),this.dispatchEvent("sourceready")}async addApiCollection_(){const e=this.getData().getAll().map(t=>{const n=new D6({data:t,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(n),n});return await Promise.all(e)}async addStacAssets_(){let e=this.getAssets();if(e===null){e=[];const n=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(n)e.push(n);else{const r=this.getData().getThumbnails().filter(s=>!Array.isArray(s.roles)||!s.roles.includes("example"));r.length>0&&e.push(r[0])}}const t=e.map(n=>this.addImagery_(n));return await Promise.all(t)}async addImagery_(e){if(e){if(e.isGeoTIFF())return await this.addGeoTiff_(e);if(e.canBrowserDisplayImage())return await this.addThumbnail_(e)}}async addThumbnail_(e){if(!this.displayPreview_)return;let t={url:e.getAbsoluteUrl(),projection:await K1e(e,"EPSG:4326"),imageExtent:e.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(t=await this.getSourceOptions_(ss.ImageStatic,t,e));const n=new B1t({source:new X1t(t)});return this.addLayer_(n,e),n}async addWebMapLinks_(){const e=this.getWebMapLinks();if(e.length>0)return await this.addLayerForLink(e[0])}async addLayerForLink(e){const t=iCt(e);if(!t)return;const n={attributions:e.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},r=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,e)),a),s=[];switch(e.rel){case"pmtiles":const a=await new R$(n.url).getHeader();let l;switch(a.tileType){case jv.Mvt:l=new J2t(await r(ss.PMTilesVector,n));break;case jv.Avif:case jv.Jpeg:case jv.Png:case jv.Webp:l=new Z1e(await r(ss.PMTilesRaster,n));break;default:return}s.push(l);break;case"tilejson":s.push(new Q1t(await r(ss.TileJSON,n)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const h in e["wms:layers"]){const d=e["wms:layers"][h]||"";let f="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][h]=="string"&&(f=e["wms:styles"][h]);const p=Object.assign({LAYERS:d,STYLES:f},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(p.FORMAT=e.type);const m=await r(ss.TileWMS,Object.assign({},n,{params:p}));s.push(new Nwt(m))}break;case"wmts":const u=await nCt(t);if(!u)return;const c=Array.isArray(e["wmts:layer"])?e["wmts:layer"]:[e["wmts:layer"]];for(const h of c){let d=Object.assign({},n,{layer:h});typeof e.type=="string"&&e.type.startsWith("image/")&&(d.format=e.type),d=await r(ss.WMTS,d),s.push(new $wt(Bwt(u,d)))}break;case"xyz":s.push(new q1e(await r(ss.XYZ,n)));break;default:return}return s.map(o=>{let a;return o instanceof pIe?a=new Lwt({source:o,declutter:!0}):o instanceof Z1e?a=new $F({source:o}):a=new g1e({source:o}),this.addLayer_(a,e),a})}async addGeoTiff_(e){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let n={sources:[tCt(e,this.bands_)]};const r=await K1e();r&&(n.projection=r),this.getSourceOptions_&&(n=await this.getSourceOptions_(ss.GeoTIFF,n,e));const s=async(o,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(o));try{const o=new NMe(n),a=new $F({source:o});if(this.useTileLayerAsFallback_){const l=()=>s(e,a);o.on("error",l),o.on("tileloaderror",l),o.on("change",()=>{o.getState()==="error"&&s(e,a)}),a.on("error",l),await o.getView()}return this.addLayer_(a,e),a}catch(o){if(this.useTileLayerAsFallback_)return await s(e,null);this.handleError_(o)}}async addTileLayerForImagery_(e){let t={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(e)};this.getSourceOptions_&&(t=await this.getSourceOptions_(ss.XYZ,t,e));const n=new g1e({source:new q1e(t)});return this.addLayer_(n,e),n}addLayer_(e,t,n=0){e.set("stac",t),e.setZIndex(n),this.getLayers().push(e)}addFootprint_(){let e=null;const t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=AIe(t.getBoundingBox()):e=t.toGeoJSON(),e){const n=new Dbt,r=new Rwt({format:n,loader:(o,a,l)=>{const u=n.readFeatures(e,{featureProjection:l});r.addFeatures(u)}}),s=new Swt({source:r,style:J1e(this.boundsStyle_,this),visible:this.displayFootprint_});return s.set("bounds",!0),this.addLayer_(s,t,1),s}return null}async updateLayers_(){const e=this.getLayers();for(let n=e.getLength()-1;n>=0;n--){const s=e.item(n).get("stac");s&&(s.isLink()||s.isAsset())&&e.removeAt(n)}const t=this.getData();t.isItemCollection()||t.isCollectionCollection()?await this.addApiCollection_():(t.isItem()||t.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(n=>n!==e)>"u"}getWebMapLinks(){let e=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(e=[this.displayWebMapLink_]);let t=this.data_.getLinksWithRels(e);return Array.isArray(this.displayWebMapLink_)?t=this.displayWebMapLink_.map(n=>{if(typeof n=="string"){const r=t.find(s=>s.id===n);return r||null}return n}).filter(n=>!!n):t.sort((n,r)=>{const s=e.indexOf(n.rel),o=e.indexOf(r.rel);return s-o}),t}async setAssets(e){Array.isArray(e)?this.assets_=e.map(t=>typeof t=="string"?this.getData().getAsset(t):t instanceof xg?t:new xg(t)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const e=this.boundsLayer_.getMapInternal();if(!e)return;const t=e.getView();if(!t)return;const n=this.getData();if(!n)return;const r=n.getBoundingBox();if(r)return uMe(r,"EPSG:4326",t.getProjection())}}mL(ea);window.eoxMapAdvancedOlLayers={...ugt,STAC:D6};class rCt extends cc{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e==null?void 0:e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"application/xml")).then(t=>{this.handleCapabilitiesResponse(t,e)})}handleCapabilitiesResponse(e,t){const r=new zke().read(e),s=Ryt(r,t);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=mb(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Tf(e,n):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=e;return t=="KVP"?l=Tf(l,a):l=l.replace(/\{(\w+?)\}/g,function(u,c){return a[c]}),l}}}window.eoxMapAdvancedOlSources={...Dyt,WMTSCapabilities:rCt};const sCt=(i,e="property")=>i.map(([t,n])=>{var s,o;if(t==="extent"&&((o=(s=n.value)==null?void 0:s.temporal)==null?void 0:o.interval.length)>0){const a=n.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(n.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}n.formatted=n.formatted.replaceAll(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const r=a=>Object.entries(a).filter(([l,u])=>{let c=!0;return u.roles&&(c=u.roles.includes("metadata")),u.rel&&(c=u.rel==="example"),c});return(t==="assets"||t==="links"||t==="providers")&&(e==="property"?n.formatted=`<ul>${r(n.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:e==="featured"&&(n.formatted=r(n.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(t)&&(n.length=r(n.value).length),[t,n]}),oCt=`
:host {
  display: block;
}
`,aCt=`
${Q0}

:host {
  --color-primary: #004170;
  --color-primary-lighter: color-mix(in srgb, var(--color-primary), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
header h1 {
  font-size: 24px;
  color: var(--color-primary);
}
header h2 {
  font-size: 22px;
  color: var(--color-primary);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#properties ul {
  padding: 0;
}
section#properties > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#properties slot > li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#properties slot:not([name=description]) ul li {
  list-style: none;
}
section#properties .colon {
  margin-right: 4px;
}
section#properties .label {
  font-weight: bold;
}
section#properties ul li,
section#properties ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#properties ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--color-primary);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`;var C3,Q1e;function v1(){if(Q1e)return C3;Q1e=1;const i={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return C3={locales:[],collator:new Intl.Collator(i.collatorOptions),dateFormatter:new Intl.DateTimeFormat(i.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(i.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(i.numberFormatterOptions),translate:null,getDefaults(){return i},setLocales(t,n={},r={},s={},o={}){this.locales=t,o=Object.assign({},i.collatorOptions,o),this.collator=new Intl.Collator(t,o),n=Object.assign({},i.dateFormatterOptions,n),this.dateFormatter=new Intl.DateTimeFormat(t,n),r=Object.assign({},i.dateTimeFormatterOptions,r),this.dateTimeFormatter=new Intl.DateTimeFormat(t,r),s=Object.assign({},i.numberFormatterOptions,s),this.numberFormatter=new Intl.NumberFormat(t,s)},setTranslator(t){this.translate=t},format(t,n=null){if(n)for(let r in n)t=t.replaceAll(`{${r}}`,n[r]);return t}},C3}var S3,exe;function WC(){if(exe)return S3;exe=1;const i=v1(),e={e(t){return typeof t!="string"&&(t=String(t)),t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(t,n=null){return typeof i.translate=="function"?i.translate(t,n):i.format(t,n)},toNothing(t=null){return t===null&&(t=e.t("n/a")),`<i class="null">${t}</i>`},toList(t,n=!1,r=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(t)||(t=[t]),n&&(t=t.slice(0),typeof n=="function"?t.sort(n):t.sort(),s===null&&(o="ol")),typeof r=="function"&&(t=t.map(r)),t.length===0?e.toNothing():t.length===1?t[0]:`<${o}><li>${t.join("</li><li>")}</li></${o}>`},toLink(t,n="",r="",s="_blank"){return n||(t.length>50?n=t.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"​/[…]/​"+o[4]:o[1]}):n=t.replace(/^\w+:\/\//i,"")),`<a href="${e.e(t)}" rel="${e.e(r)}" target="${e.e(s)}">${e.e(n)}</a>`},toObject(t,n=null,r=null,s=[],o=null,a=[]){let l="<dl>",u=Array.isArray(s)&&s.length>=2?s:Object.keys(t);for(let c of u){if(!(c in t)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([c])))continue;let h;typeof r=="function"?h=r(c,t):h=e.formatKey(c,!0);let d=t[c];typeof n=="function"&&(d=n(d,c,t)),l+=`<dt>${h}</dt><dd>${d}</dd>`}return l+="</dl>",l},abbrev(t,n){return`<abbr title="${e.e(n)}">${e.e(t)}</abbr>`},isObject(t){return typeof t=="object"&&t===Object(t)&&!Array.isArray(t)},formatKey(t,n=!1){if(t.includes("/"))return e.e(e.t(t));n===!1&&(t=t.replace(/^[\w-]+:/i,""));let r=t.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return e.e(e.t(r))},hexToUint8(t){if(t.length===0||t.length%2!==0)throw new Error(`The string "${t}" is not valid hex.`);return new Uint8Array(t.match(/.{1,2}/g).map(n=>parseInt(n,16)))},uint8ToHex(t){return t.reduce((n,r)=>n+r.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(t){return t.reduce((n,r)=>Object.keys(r).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),n),[])},unit(t,n=""){return typeof n=="string"&&n.length>0?(n=e.t(n),`${t}&nbsp;<span class="unit">${n}</unit>`):t}};return S3=e,S3}const HT=WC(),lCt=v1(),Vw={fields(i){let e=["extensions","metadata","links","assets"];for(let t of e)for(let n in i[t])i[t][n]=Vw.field(i[t][n],i[t],i);return i},field(i,e={},t={}){if(typeof i=="string")return{label:i};if(typeof i.alias=="string"){let n=e[i.alias]||t.metadata[i.alias];if(!n)throw new Error("Alias is invalid: "+i.alias);return Object.assign(i,Vw.field(n,e,t))}if(HT.isObject(i.items)){let n=[];for(let r in i.items)i.items[r]=Vw.field(i.items[r],e,t),n.push(Object.assign({key:r},i.items[r]));i.itemOrder=n.sort((r,s)=>r.id===!0?-1:s.id===!0?1:typeof r.order=="number"&&typeof s.order=="number"?r.order-s.order:lCt.collator.compare(HT.t(r.label),HT.t(s.label))).map(r=>r.key)}if(HT.isObject(i.properties))for(let n in i.properties)i.properties[n]=Vw.field(i.properties[n],e,t);return i}};var uCt=Vw;const xw=uCt,VIe={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(i){i=xw.fields(i);for(let e in this.fields)Object.assign(this.fields[e],i[e])},getDependency(i){return this.dependencies[i]||console.warn(`Dependency '${i}' not registered.`),this.dependencies[i]},addDependency(i,e){this.dependencies[i]=e},addExtension(i,e){this.fields.extensions[i]=xw.field(e,this.fields.extensions)},addMetadataField(i,e){this.fields.metadata[i]=xw.field(e,this.fields.metadata)},addLinkField(i,e){this.fields.links[i]=xw.field(e,this.fields.links)},addAssetField(i,e){this.fields.assets[i]=xw.field(e,this.fields.assets)},addMetadataFields(i){for(var e in i)VIe.addMetadataField(e,i[e])},getExtension(i){return this.fields.extensions[i]?this.fields.extensions[i]:{}},getSpecification(i,e=null){let t={};return e==="assets"&&this.fields.assets[i]?t=this.fields.assets[i]:e==="links"&&this.fields.links[i]?t=this.fields.links[i]:this.fields.metadata[i]&&(t=this.fields.metadata[i]),t}};var L6=VIe;const cCt={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},hCt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"}},dCt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},fCt={id:"Identifier",keywords:"Keywords",datetime:{label:"Time of Data",format:"Timestamp",summary:!1},title:{label:"Title",summary:!1},description:{label:"Description",format:"CommonMark",summary:!1},start_datetime:{label:"Time of Data begins",format:"Timestamp",summary:!1},end_datetime:{label:"Time of Data ends",format:"Timestamp",summary:!1},created:{label:"Created",format:"Timestamp",summary:"r"},updated:{label:"Updated",format:"Timestamp",summary:"r"},published:{label:"Published",format:"Timestamp",summary:"r"},expires:{label:"Expires",format:"Timestamp",summary:"r"},unpublished:{label:"Unpublished",format:"Timestamp",summary:"r"},license:{label:"License",format:"License",summary:!1},providers:{label:"Providers",format:"Providers",summary:!1},platform:"Platform",instruments:{label:"Instruments",format:"CSV"},constellation:"Constellation",mission:"Mission",gsd:{label:"GSD",explain:"Ground Sample Distance",unit:"m"},version:{label:"Data Version",summary:!1},deprecated:{label:"Deprecated",summary:!1},experimental:{label:"Experimental",summary:!1},language:{label:"Current Language",ext:"language",summary:"v",properties:{name:{label:"Name"},alternate:{label:"Alternate Name"},code:{label:"Code"},dir:{label:"Direction",explain:"Reading and writing direction",mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},languages:{label:"Available Languages",ext:"language",summary:!1,items:{name:{label:"Name",sortable:!0,order:0},alternate:{label:"Alternate Name",sortable:!0,order:1},code:{label:"Code",sortable:!0,order:2},dir:{label:"Direction",explain:"Reading and writing direction",sortable:!0,order:3,mapping:{ltr:"left-to-right",rtl:"right-to-left"},default:"ltr"}}},contacts:{label:"Contacts",ext:"contacts",summary:"v",items:{name:{label:"Name"},identifier:{label:"Identifier"},position:{label:"Position"},organization:{label:"Organization"},logo:{label:"Logo",format:"Image"},phones:{label:"Phone",items:{value:{label:"Number",format:"Phone",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal",fax:"Fax"}}}},emails:{label:"Email",items:{value:{label:"Address",format:"Email",order:0},roles:{label:"Used For",order:1,mapping:{work:"Work",home:"Personal"}}}},addresses:{label:"Postal Addresses",format:"Address",items:{deliveryPoint:{label:"Street / House",order:0},city:{label:"City",order:1},administrativeArea:{label:"State / Province",order:2},postalCode:{label:"Postal Code",order:3},country:{label:"Country",order:4}}},links:{label:"Additional Resources",format:"Link"},contactInstructions:"Further Instructions",roles:{label:"Types",format:"CSV"}}},themes:{label:"Themes",ext:"themes",summary:!1,items:{scheme:{label:"Vocabulary",order:0,format:"Url"},concepts:{label:"Terms",order:1,format:"Concepts",items:{id:{label:"Identifier",order:0},title:{label:"Title",order:1},description:{label:"Description",order:2},url:{label:"URL",order:3,format:"Url"}}}}},crs:{label:"CRS",format:"CRS",explain:"Coordinate Reference System"},"anon:size":{label:"Uncertainty",unit:"°",explain:"The size of one side of the anonymized bounding box"},"anon:warning":{label:"Warning",summary:!1},"classification:classes":{summary:!1,label:"Classes",items:{color_hint:{label:"Color",order:0,format:"HexColor"},value:{label:"Value",sortable:!0,order:1},title:{label:"Title",sortable:!0,order:2},name:{label:"Identifier",sortable:!0,order:3},description:{label:"Description",order:4,format:"CommonMark"},percentage:{label:"Percentage of samples",sortable:!0,order:5,unit:"%"},count:{label:"Number of samples",sortable:!0,order:6},nodata:{label:"No-data value",order:7,default:!1}}},"classification:bitfields":{summary:!1,label:"Bit Mask",items:{name:{label:"Name",sortable:!0,order:0},offset:{label:"Offset",explain:"Offset to the first bit",order:1},length:{label:"Number of bits",order:2},description:{label:"Description",order:3,format:"CommonMark"},classes:{alias:"classification:classes"},roles:{label:"Purpose"}}},"cube:dimensions":{label:"Dimensions",summary:!1,listWithKeys:!0,items:{type:{label:"Type",order:0},axis:{label:"Axis",order:1},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},bbox:{alias:"proj:bbox",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:5},geometry_types:{label:"Geometry Types",order:5},reference_system:{label:"Reference System",explain:"Coordinate / Temporal / Other Reference System",order:6}}},"cube:variables":{label:"Variables",summary:!1,listWithKeys:!0,items:{dimensions:{label:"Dimensions",order:0},type:{label:"Type",order:1,mapping:{data:"Measured values",auxiliary:"Coordinate data"}},description:{label:"Description",format:"CommonMark",order:2},extent:{label:"Extent",format:"Extent",order:3},values:{label:"Values",order:4},step:{label:"Step",order:5},unit:{alias:"file:unit",order:6}}},"eo:bands":{label:"Spectral Bands",items:{name:{label:"Name",sortable:!0,id:!0,order:0},common_name:{label:"Common Name",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2},center_wavelength:{label:"Wavelength",explain:"The center wavelength of the band",unit:"μm",sortable:!0,order:5},full_width_half_max:{label:"FWHM",explain:"Full Width Half Max",unit:"μm",sortable:!0,order:6},gsd:{alias:"gsd",sortable:!0,order:3},cloud_cover:{alias:"eo:cloud_cover",sortable:!0,order:4},solar_illumination:{label:"Solar Illumination",sortable:!0,order:7,unit:"W/m²/μm"},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"eo:cloud_cover":{label:"Cloud Cover",unit:"%"},"eo:snow_cover":{label:"Snow/Ice Cover",unit:"%"},"forecast:reference_datetime":{label:"Reference Time",format:"Timestamp",summary:"r"},"forecast:horizon":{label:"Forecast Horizon",explain:"The time between the reference time and the forecast time",format:"Duration"},"forecast:duration":{label:"Forecast Length",format:"Duration"},"file:bits_per_sample":"Bits per Sample","file:byte_order":"Byte Order","file:checksum":{label:"Checksum",format:"Checksum",summary:!1},"file:data_type":{label:"Data Type of Values",format:"FileDataType"},"file:header_size":{label:"Header Size",format:"FileSize",summary:!1},"file:nodata":{label:"No-Data Values",format:"CSV",summary:!1},"file:size":{label:"Size",format:"FileSize",summary:!1},"file:unit":"Unit of Values","file:values":{label:"Map of Values",summary:!1,items:{values:{label:"Values",format:"CSV",order:1},summary:{label:"Summary",order:0}}},"file:local_path":{label:"Local Path",summary:!1},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{label:"System Environment",mapping:{OR:"Operational system, real-time data",OT:"Operational system, test data",IR:"Test system, real-time data",IT:"Test system, test data",IP:"Test system, playback data",IS:"Test system, simulated data"}},"goes:image_type":{label:"Area",mapping:{"FULL DISK":"The Americas (full disk)",CONUS:"North America (continental US)",MESOSCALE:"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{label:"Area in Central/South America",mapping:{1:"Region 1",2:"Region 2"}},"goes:mode":{label:"Capture Mode",mapping:{3:"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)",4:"4: 1x full disk (every 5 minutes)",6:"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{label:"Time Threshold in a Group",explain:"Lightning group maximum time difference among lightning events in a group",unit:"s"},"goes:flash_time_threshold":{label:"Time Threshold in a Flash",explain:"Lightning flash maximum time difference among lightning events in a flash",unit:"s"},"goes:lightning_wavelength":{label:"Central Wavelength",unit:"nm"},"goes:yaw_flip_flag":{label:"Yaw Flip Configuration",explain:"Flag indicating that the spacecraft is operating in yaw flip configuration.",mapping:{0:"Upright",1:"Neither",2:"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{label:"Satellite Subpoint Latitude",unit:"°N"},"goes:nominal_satellite_subpoint_lon":{label:"Satellite Subpoint Longitude",unit:"°E"},"goes:nominal_satellite_height":{label:"Satellite Height",explain:"Nominal satellite height above GRS 80 ellipsoid",unit:"km"},"goes:percent_navigated_L1b_events":{label:"Events navigated by Instrument",format:"Percent0to1",unit:"%"},"goes:percent_uncorrectable_L0_errors":{label:"Data Lost",format:"Percent0to1",unit:"%"},"grid:code":{label:"Grid",format:"GridCode"},"raster:bands":{label:"Bands",items:{nodata:{alias:"file:nodata"},sampling:{label:"Sampling",mapping:{area:"Area",point:"Point (at pixel center)"}},data_type:{alias:"file:data_type"},bits_per_sample:{alias:"file:bits_per_sample"},spatial_resolution:{label:"Resolution",explain:"Average spatial resolution",unit:"m"},statistics:{label:"Statistics",items:{mean:"Average",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stdev:{label:"Std. Dev.",explain:"Standard Deviation"},valid_percent:{label:"Valid",explain:"Percentage of valid pixels",unit:"%"}}},unit:{alias:"file:unit"},scale:"Scale",offset:"Offset",histogram:{label:"Histogram",custom:!0},"classification:classes":{alias:"classification:classes"},"classification:bitfields":{alias:"classification:bitfields"}}},"label:properties":{label:"Properties",null:"raster data"},"label:classes":{label:"Classes",items:{name:{label:"Name",null:"raster-formatted",sortable:!0,id:!0},classes:"Classes"}},"label:description":{label:"Description",format:"CommonMark",summary:!1},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{label:"Overviews",summary:!1,items:{property_key:{label:"Property Key",id:!0},counts:{label:"Counts",custom:!0},statistics:{label:"Statistics",custom:!0}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{label:"Pass Number",mapping:{1:"1 (less latency / less gauges)",2:"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{label:"Accumulation Period",unit:"h"},"noaa_mrms_qpe:region":{label:"Region",mapping:{CONUS:"Continental US",HAWAII:"Hawaii",GUAM:"Guam",ALASKA:"Alaska",CARIB:"Caribbean Islands"}},"openeo:status":"Processing Status",api_version:{label:"API Version",ext:"openeo"},backend_version:{label:"Back-End Version",ext:"openeo"},production:{label:"Production-Ready",ext:"openeo"},endpoints:{label:"Supported Endpoints",ext:"openeo",summary:!1,items:{path:{label:"Path Template",order:0},methods:{label:"HTTP Methods",order:1,format:"CSV"}}},billing:{label:"Billing",ext:"openeo",custom:!0,summary:!1},"order:status":{label:"Status",mapping:{orderable:"Orderable (data can be ordered)",ordered:"Ordered (preparing to deliver data)",pending:"Pending (waiting for activation)",shipping:"Shipping (data is getting processed)",succeeded:"Delivered (data is available)",failed:"Failed (unable to deliver)",canceled:"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{label:"Submitted",format:"Timestamp",summary:"r"},"order:expiration_date":{alias:"expires"},"pc:count":{label:"Points",explain:"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{label:"Schemas",summary:!1,items:{name:{label:"Name",sortable:!0,id:!0},size:{label:"Size",unit:"bytes",sortable:!0},type:{label:"Type",sortable:!0}}},"pc:density":"Density","pc:statistics":{label:"Statistics",summary:"s",items:{name:{label:"Name",id:!0},position:"Position",average:"Average",count:"Count",maximum:{label:"Max.",explain:"Maxmimum value"},minimum:{label:"Min.",explain:"Minimum value"},stddev:{label:"Std. Dev.",explain:"Standard Deviation"},variance:"Variance"}},"processing:expression":{label:"Processing Instructions",summary:!1},"processing:lineage":{label:"Lineage",format:"CommonMark",summary:!1},"processing:level":"Level","processing:facility":"Facility","processing:software":{label:"Software",format:"Software",summary:!1},"processing:version":"Processor Version","processing:datetime":{label:"Processing Time",format:"Timestamp",summary:"r"},"product:type":"Product Type","product:timeliness":{label:"Timeliness",format:"Duration"},"product:timeliness_category":"Timeliness Category","proj:epsg":{label:"EPSG Code",format:"EPSG",summary:"v"},"proj:wkt2":{label:"WKT2",explain:"Well-Known Text, version 2",format:"WKT2",summary:!1},"proj:projjson":{label:"PROJJSON",explain:"JSON encoding of WKT2",format:"PROJJSON",summary:!1},"proj:geometry":{label:"Footprint",custom:!0,summary:!1},"proj:bbox":{label:"Bounding Box",custom:!0,summary:!1},"proj:centroid":{label:"Centroid",custom:!0,summary:!1},"proj:shape":{label:"Image Dimensions",format:"Shape",summary:!1},"proj:transform":{label:"Transformation Matrix",format:"Transform",summary:!1},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{label:"Center Frequency",unit:"GHz"},"sar:polarizations":{label:"Polarizations",format:"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{label:"Range Resolution",unit:"m"},"sar:resolution_azimuth":{label:"Azimuth Resolution",unit:"m"},"sar:pixel_spacing_range":{label:"Range Pixel Spacing",unit:"m"},"sar:pixel_spacing_azimuth":{label:"Azimuth Pixel Spacing",unit:"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{label:"ENL",explain:"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{label:"Int. Designator",explain:"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{label:"Abs. Orbit Number",explain:"Absolute Orbit Number"},"sat:relative_orbit":{label:"Rel. Orbit Number",explain:"Relative Orbit Number"},"sat:anx_datetime":{label:"ANX Time",format:"Timestamp",explain:"Ascending Node Crossing time",summary:"r"},"sci:doi":{label:"DOI",format:"DOI"},"sci:citation":"Citation","sci:publications":{label:"Publications",summary:!1,items:{citation:{label:"Publication",sortable:!0,order:0},doi:{label:"DOI",format:"DOI",sortable:!0,order:1}}},"ssys:targets":"Target Body","storage:platform":{label:"Provider",mapping:{ALIBABA:"Alibaba Cloud",AWS:"Amazon AWS",AZURE:"Microsoft Azure",GCP:"Google Cloud Platform",IBM:"IBM Cloud",ORACLE:"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{label:"Columns",items:{name:{label:"Name",sortable:!0,id:!0,order:0},type:{label:"Data Type",sortable:!0,order:1},description:{label:"Description",format:"CommonMark",order:2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{label:"Tables",summary:!1,listWithKeys:!0,items:{name:{label:"Name",sortable:!0,id:!0,order:0},description:{label:"Description",format:"CommonMark",order:1}}},"tiles:tile_matrix_sets":{label:"Tile Matrix Sets",custom:!0,summary:!1},"tiles:tile_matrix_set_links":{label:"Tile Matrix Set Links",custom:!0,summary:!1},"view:off_nadir":{label:"Off-Nadir Angle",unit:"°"},"view:incidence_angle":{label:"Incidence Angle",unit:"°"},"view:azimuth":{label:"Viewing Azimuth",unit:"°"},"view:sun_azimuth":{label:"Sun Azimuth",unit:"°"},"view:sun_elevation":{label:"Sun Elevation",unit:"°"},"pl:black_fill":{label:"Unfilled Image Parts",unit:"%"},"pl:clear_percent":{label:"Clear Sky",unit:"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{label:"Spatial Resolution",unit:"m"},"pl:publishing_stage":{label:"Publishing Stage",mapping:{preview:"Preview",standard:"Standard",finalized:"Finalized"}},"pl:quality_category":{label:"Quality Category",mapping:{standard:"Standard",test:"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{label:"Type",mapping:{image:"Single image",image_collection:"Image collection",table:"Table"}},"gee:cadence":"Cadence","gee:schema":{label:"Variables",items:{name:"Name",description:"Description",type:"Data Type"},summary:!1},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{label:"Terms of Use",format:"CommonMark",summary:!1},"gee:visualizations":{label:"Visualizations",custom:!0,summary:!1},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{label:"WRS Type",explain:"Worldwide Reference System Type"},"landsat:wrs_path":{label:"WRS Path",explain:"Worldwide Reference System Path"},"landsat:wrs_row":{label:"WRS Row",explain:"Worldwide Reference System Row"},"landsat:cloud_cover_land":{label:"Land Cloud Cover",unit:"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{label:"Summary",summary:!1},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{label:"Product ID",summary:"s"},"sentinel:data_coverage":{label:"Data Coverage",unit:"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{label:"Processing Level",explain:"Geolocation precision level",mapping:{L2:"Geolocation using only satellite telemetry",L3:"Control points used to geolocate image, no terrain correction",L4:"Control points used to geolocate image, orthorectified"},summary:"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{label:"Specification",mapping:{SR:"Surface Reflectance (Optical)",ST:"Surface Temperature (Optical)",NRB:"Normalized Radar Backscatter (SAR)",POL:"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{label:"Platform Altitude",unit:"m"},"card4l:incidence_angle_near_range":{label:"Incidence Angle (near)",unit:"°"},"card4l:incidence_angle_far_range":{label:"Incidence Angle (far)",unit:"°"},"card4l:noise_equivalent_intensity":{label:"Noise Equivalent Intensity",unit:"dB"},"card4l:mean_faraday_rotation_angle":{label:"Mean Faraday Rotation",unit:"°"},"card4l:speckle_filtering":{label:"Speckle Filtering",custom:!0,summary:!1,null:"not applied"},"card4l:relative_rtc_accuracy":{label:"Rel. RTC Accuracy",explain:"Relative accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:absolute_rtc_accuracy":{label:"Abs. RTC Accuracy",explain:"Absolute accuracy of the Radiometric Terrain Correction",unit:"dB"},"card4l:northern_geometric_accuracy":{label:"Northern Geometric Accuracy",unit:"m"},"card4l:eastern_geometric_accuracy":{label:"Eastern Geometric Accuracy",unit:"m"},"card4l:ellipsoidal_height":{label:"Ellipsoidal Height",unit:"m"},"geoadmin:variant":{label:"Product Variant",mapping:{krel:"RGB color with relief",komb:"RGB color without relief",kgrel:"Grayscale with relief",kgrs:"Grayscale without relief"}},"href:servers":{label:"Servers",ext:"web-map-links"},"pmtiles:layers":{label:"Layers",ext:"web-map-links"},"wms:layers":{label:"Layers",ext:"web-map-links"},"wms:styles":{label:"Styles",ext:"web-map-links"},"wms:dimensions":{label:"Dimensions",ext:"web-map-links"},"wms:transparent":{label:"Transparency",ext:"web-map-links"},"wmts:layer":{label:"Layers",ext:"web-map-links"},"wmts:dimensions":{label:"Dimensions",ext:"web-map-links"}},pCt={extensions:cCt,links:hCt,assets:dCt,metadata:fCt};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lf=function(){return lf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},lf.apply(this,arguments)},T0="\\d+(?:[\\.,]\\d+)?",gCt="("+T0+"W)",mCt="("+T0+"Y)?("+T0+"M)?("+T0+"D)?",yCt="T("+T0+"H)?("+T0+"M)?("+T0+"S)?",vCt="^P(?:"+gCt+"|"+mCt+"(?:"+yCt+")?)$",_Ct=new RegExp(vCt),HIe=["weeks","years","months","days","hours","minutes","seconds"],WIe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},bCt=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),xCt=function(i){var e=i.match(_Ct);if(!e)throw new Error("Invalid duration string");var t=e.slice(1).reduce(function(n,r,s){return n[HIe[s]]=parseFloat(r)||0,n},{});return t},wCt=function(i){return i.weeks&&i.weeks>0?Object.assign({},bCt,{weeks:i.weeks}):HIe.reduce(function(e,t){var n;return lf(lf({},e),(n={},n[t]=i[t]||0,n))},{})},M6={locales:{},options:{},setLocales:function(i,e){this.locales=lf(lf({},this.locales),i),e&&(this.options=lf(lf({},this.options),e))},getLangConfig:function(i){var e=this.locales[i];if(!e&&this.options.fallbackLocale&&(e=this.locales[this.options.fallbackLocale]),!e)throw new Error("isoDuration: Translations for language: "+i+" are not provided");return e}},ECt=function(i){for(var e=["years","months","days"],t="",n=0,r=e;n<r.length;n++){var s=r[n];i[s]&&(t+=""+i[s]+WIe[s])}return t},CCt=function(i){for(var e=["hours","minutes","seconds"],t="",n=0,r=e;n<r.length;n++){var s=r[n];i[s]&&(t+=""+i[s]+WIe[s])}return t},SCt=function(i){if(i.weeks>0)return"P"+i.weeks+"W";var e="P",t=ECt(i);t&&(e+=t);var n=CCt(i);return n&&(e+="T"+n),!t&&!n&&(e+="0D"),e},TCt=function(i,e){var t=M6.getLangConfig(e);return i.weeks+" "+t.weeks(i.weeks)},ACt=function(i,e,t){for(var n=M6.getLangConfig(e),r="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],u=i[l];if(u&&(r!==""&&(r+=" "),r+=u+" "+n[l](u),o++,t&&t.largest&&t.largest<=o))break}return r},RCt=function(i,e,t){return i.weeks>0?TCt(i,e):ACt(i,e,t)},T3=["seconds","minutes","hours","days","months"],WT=function(i){return function(e){return{nextUnitValue:Math.floor(e/i),value:e%i}}},txe=function(i,e){return new Date(e,i+1,0).getDate()},kCt={seconds:WT(60),minutes:WT(60),hours:WT(24),days:function(i,e){for(var t=e?new Date(e.getTime()):new Date,n=i,r=0,s=txe(t.getMonth(),t.getFullYear());n>s;)n=n-s,r++,t.setMonth(t.getMonth()+1),s=txe(t.getMonth(),t.getFullYear());return{nextUnitValue:r,value:n}},months:WT(12)},DCt=function(i,e){for(var t=lf({},i),n=0;n<T3.length;n++){var r=T3[n],s=t[r];if(s>0){var o=kCt[r](s,e);if(t[r]=o.value,o.nextUnitValue){var a=r==="months"?"years":T3[n+1];t[a]=t[a]+o.nextUnitValue}}}return t},ixe=function(){function i(e){this.durationObj=e}return i.prototype.parse=function(){return this.durationObj},i.prototype.toString=function(){return SCt(this.durationObj)},i.prototype.humanize=function(e,t){return RCt(this.durationObj,e,t)},i.prototype.normalize=function(e){return this.durationObj=DCt(this.durationObj,e),this},i.prototype.isEmpty=function(){var e=this;return Object.keys(this.durationObj).every(function(t){return e.durationObj[t]===0})},i}();function LCt(i){return i<=2?0:i>2&&i<11?1:0}var MCt={years:function(i){return i===1?"سنة":"سنوات"},months:function(i){return i===1?"شهر":"أشهر"},weeks:function(i){return i===1?"أسبوع":"أسابيع"},days:function(i){return i===1?"يوم":"أيام"},hours:function(i){return i===1?"ساعة":"ساعات"},minutes:function(i){return["دقيقة","دقائق"][LCt(i)]},seconds:function(i){return i===1?"ثانية":"ثواني"},decimal:","};function Ws(i){return Math.floor(i)!==i?2:i%100>=5&&i%100<=20||i%10>=5&&i%10<=9||i%10===0?0:i%10===1?1:i>1?2:0}var ICt={years:function(i){return["години","година","години"][Ws(i)]},months:function(i){return["месеца","месец","месеца"][Ws(i)]},weeks:function(i){return["седмици","седмица","седмици"][Ws(i)]},days:function(i){return["дни","ден","дни"][Ws(i)]},hours:function(i){return["часа","час","часа"][Ws(i)]},minutes:function(i){return["минути","минута","минути"][Ws(i)]},seconds:function(i){return["секунди","секунда","секунди"][Ws(i)]},decimal:","},OCt={years:function(i){return"any"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"os")},weeks:function(i){return"setman"+(i===1?"a":"es")},days:function(i){return"di"+(i===1?"a":"es")},hours:function(i){return"hor"+(i===1?"a":"es")},minutes:function(i){return"minut"+(i===1?"":"s")},seconds:function(i){return"segon"+(i===1?"":"s")},decimal:","};function Ll(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&i%100<10?2:3}var PCt={years:function(i){return["rok","roku","roky","let"][Ll(i)]},months:function(i){return["měsíc","měsíce","měsíce","měsíců"][Ll(i)]},weeks:function(i){return["týden","týdne","týdny","týdnů"][Ll(i)]},days:function(i){return["den","dne","dny","dní"][Ll(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodin"][Ll(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][Ll(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][Ll(i)]},decimal:","},FCt={years:function(){return"år"},months:function(i){return"måned"+(i===1?"":"er")},weeks:function(i){return"uge"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"e")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minut"+(i===1?"":"ter")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},NCt={years:function(i){return"Jahr"+(i===1?"":"e")},months:function(i){return"Monat"+(i===1?"":"e")},weeks:function(i){return"Woche"+(i===1?"":"n")},days:function(i){return"Tag"+(i===1?"":"e")},hours:function(i){return"Stunde"+(i===1?"":"n")},minutes:function(i){return"Minute"+(i===1?"":"n")},seconds:function(i){return"Sekunde"+(i===1?"":"n")},decimal:","},$Ct={years:function(i){return"year"+(i===1?"":"s")},months:function(i){return"month"+(i===1?"":"s")},weeks:function(i){return"week"+(i===1?"":"s")},days:function(i){return"day"+(i===1?"":"s")},hours:function(i){return"hour"+(i===1?"":"s")},minutes:function(i){return"minute"+(i===1?"":"s")},seconds:function(i){return"second"+(i===1?"":"s")},decimal:"."},BCt={years:function(i){return"año"+(i===1?"":"s")},months:function(i){return"mes"+(i===1?"":"es")},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"día"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},jCt={years:function(i){return"aasta"+(i===1?"":"t")},months:function(i){return"kuu"+(i===1?"":"d")},weeks:function(i){return"nädal"+(i===1?"":"at")},days:function(i){return"päev"+(i===1?"":"a")},hours:function(i){return"tund"+(i===1?"":"i")},minutes:function(i){return"minut"+(i===1?"":"it")},seconds:function(i){return"sekund"+(i===1?"":"it")},decimal:","},zCt={years:function(){return"سال"},months:function(){return"ماه"},weeks:function(){return"هفته"},days:function(){return"روز"},hours:function(){return"ساعت"},minutes:function(){return"دقیقه"},seconds:function(){return"ثانیه"},decimal:"."},GCt={years:function(i){return i===1?"vuosi":"vuotta"},months:function(i){return i===1?"kuukausi":"kuukautta"},weeks:function(i){return"viikko"+(i===1?"":"a")},days:function(i){return"päivä"+(i===1?"":"ä")},hours:function(i){return"tunti"+(i===1?"":"a")},minutes:function(i){return"minuutti"+(i===1?"":"a")},seconds:function(i){return"sekunti"+(i===1?"":"a")},decimal:","},UCt={years:function(){return"ár"},months:function(i){return i===1?"mánaður":"mánaðir"},weeks:function(i){return i===1?"vika":"vikur"},days:function(i){return i===1?"dagur":"dagar"},hours:function(i){return i===1?"tími":"tímar"},minutes:function(i){return i===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},qCt={years:function(i){return"an"+(i>=2?"s":"")},months:function(){return"mois"},weeks:function(i){return"semaine"+(i>=2?"s":"")},days:function(i){return"jour"+(i>=2?"s":"")},hours:function(i){return"heure"+(i>=2?"s":"")},minutes:function(i){return"minute"+(i>=2?"s":"")},seconds:function(i){return"seconde"+(i>=2?"s":"")},decimal:","},VCt={years:function(i){return i===1?"χρόνος":"χρόνια"},months:function(i){return i===1?"μήνας":"μήνες"},weeks:function(i){return i===1?"εβδομάδα":"εβδομάδες"},days:function(i){return i===1?"μέρα":"μέρες"},hours:function(i){return i===1?"ώρα":"ώρες"},minutes:function(i){return i===1?"λεπτό":"λεπτά"},seconds:function(i){return i===1?"δευτερόλεπτο":"δευτερόλεπτα"},decimal:","},HCt={years:function(i){return i===1?"שנה":"שנים"},months:function(i){return i===1?"חודש":"חודשים"},weeks:function(i){return i===1?"שבוע":"שבועות"},days:function(i){return i===1?"יום":"ימים"},hours:function(i){return i===1?"שעה":"שעות"},minutes:function(i){return i===1?"דקה":"דקות"},seconds:function(i){return i===1?"שניה":"שניות"},decimal:"."},WCt={years:function(i){return i%10===2||i%10===3||i%10===4?"godine":"godina"},months:function(i){return i===1?"mjesec":i===2||i===3||i===4?"mjeseca":"mjeseci"},weeks:function(i){return i%10===1&&i!==11?"tjedan":"tjedna"},days:function(i){return i===1?"dan":"dana"},hours:function(i){return i===1?"sat":i===2||i===3||i===4?"sata":"sati"},minutes:function(i){var e=i%10;return(e===2||e===3||e===4)&&(i<10||i>14)?"minute":"minuta"},seconds:function(i){return i===10||i===11||i===12||i===13||i===14||i===16||i===17||i===18||i===19||i%10===5?"sekundi":i%10===1?"sekunda":i%10===2||i%10===3||i%10===4?"sekunde":"sekundi"},decimal:","},XCt={years:function(){return"év"},months:function(){return"hónap"},weeks:function(){return"hét"},days:function(){return"nap"},hours:function(){return"óra"},minutes:function(){return"perc"},seconds:function(){return"másodperc"},decimal:","},YCt={years:function(){return"ár"},months:function(i){return"mánuð"+(i===1?"ur":"ir")},weeks:function(i){return"vik"+(i===1?"a":"ur")},days:function(i){return"dag"+(i===1?"ur":"ar")},hours:function(i){return"klukkutím"+(i===1?"i":"ar")},minutes:function(i){return"mínút"+(i===1?"a":"ur")},seconds:function(i){return"sekúnd"+(i===1?"a":"ur")},decimal:"."},ZCt={years:function(i){return"ann"+(i===1?"o":"i")},months:function(i){return"mes"+(i===1?"e":"i")},weeks:function(i){return"settiman"+(i===1?"a":"e")},days:function(i){return"giorn"+(i===1?"o":"i")},hours:function(i){return"or"+(i===1?"a":"e")},minutes:function(i){return"minut"+(i===1?"o":"i")},seconds:function(i){return"second"+(i===1?"o":"i")},decimal:","},KCt={years:function(){return"年"},months:function(){return"月"},weeks:function(){return"週"},days:function(){return"日"},hours:function(){return"時間"},minutes:function(){return"分"},seconds:function(){return"秒"},decimal:"."},JCt={years:function(){return"년"},months:function(){return"개월"},weeks:function(){return"주일"},days:function(){return"일"},hours:function(){return"시간"},minutes:function(){return"분"},seconds:function(){return"초"},decimal:"."},QCt={years:function(){return"ປີ"},months:function(){return"ເດືອນ"},weeks:function(){return"ອາທິດ"},days:function(){return"ມື້"},hours:function(){return"ຊົ່ວໂມງ"},minutes:function(){return"ນາທີ"},seconds:function(){return"ວິນາທີ"},decimal:","};function kv(i){return i===1||i%10===1&&i%100>20?0:Math.floor(i)!==i||i%10>=2&&i%100>20||i%10>=2&&i%100<10?1:2}var eSt={years:function(i){return i%10===0||i%100>=10&&i%100<=20?"metų":"metai"},months:function(i){return["mėnuo","mėnesiai","mėnesių"][kv(i)]},weeks:function(i){return["savaitė","savaitės","savaičių"][kv(i)]},days:function(i){return["diena","dienos","dienų"][kv(i)]},hours:function(i){return["valanda","valandos","valandų"][kv(i)]},minutes:function(i){return["minutė","minutės","minučių"][kv(i)]},seconds:function(i){return["sekundė","sekundės","sekundžių"][kv(i)]},decimal:","};function Hm(i){return i===1||i%10===1&&i%100!==11?0:1}var tSt={years:function(i){return["gads","gadi"][Hm(i)]},months:function(i){return["mēnesis","mēneši"][Hm(i)]},weeks:function(i){return["nedēļa","nedēļas"][Hm(i)]},days:function(i){return["diena","dienas"][Hm(i)]},hours:function(i){return["stunda","stundas"][Hm(i)]},minutes:function(i){return["minūte","minūtes"][Hm(i)]},seconds:function(i){return["sekunde","sekundes"][Hm(i)]},decimal:","},iSt={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},nSt={years:function(){return"jaar"},months:function(i){return i===1?"maand":"maanden"},weeks:function(i){return i===1?"week":"weken"},days:function(i){return i===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(i){return i===1?"minuut":"minuten"},seconds:function(i){return i===1?"seconde":"seconden"},decimal:","},rSt={years:function(){return"år"},months:function(i){return"måned"+(i===1?"":"er")},weeks:function(i){return"uke"+(i===1?"":"r")},days:function(i){return"dag"+(i===1?"":"er")},hours:function(i){return"time"+(i===1?"":"r")},minutes:function(i){return"minutt"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","};function Wm(i){return i===1?0:Math.floor(i)!==i?1:i%10>=2&&i%10<=4&&!(i%100>10&&i%100<20)?2:3}var sSt={years:function(i){return["rok","roku","lata","lat"][Wm(i)]},months:function(i){return["miesiąc","miesiąca","miesiące","miesięcy"][Wm(i)]},weeks:function(i){return["tydzień","tygodnia","tygodnie","tygodni"][Wm(i)]},days:function(i){return["dzień","dnia","dni","dni"][Wm(i)]},hours:function(i){return["godzina","godziny","godziny","godzin"][Wm(i)]},minutes:function(i){return["minuta","minuty","minuty","minut"][Wm(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekund"][Wm(i)]},decimal:","},oSt={years:function(i){return"ano"+(i===1?"":"s")},months:function(i){return i===1?"mês":"meses"},weeks:function(i){return"semana"+(i===1?"":"s")},days:function(i){return"dia"+(i===1?"":"s")},hours:function(i){return"hora"+(i===1?"":"s")},minutes:function(i){return"minuto"+(i===1?"":"s")},seconds:function(i){return"segundo"+(i===1?"":"s")},decimal:","},aSt={years:function(i){return i===1?"an":"ani"},months:function(i){return i===1?"lună":"luni"},weeks:function(i){return i===1?"săptămână":"săptămâni"},days:function(i){return i===1?"zi":"zile"},hours:function(i){return i===1?"oră":"ore"},minutes:function(i){return i===1?"minut":"minute"},seconds:function(i){return i===1?"secundă":"secunde"},decimal:","},lSt={years:function(i){return["лет","год","года"][Ws(i)]},months:function(i){return["месяцев","месяц","месяца"][Ws(i)]},weeks:function(i){return["недель","неделя","недели"][Ws(i)]},days:function(i){return["дней","день","дня"][Ws(i)]},hours:function(i){return["часов","час","часа"][Ws(i)]},minutes:function(i){return["минут","минута","минуты"][Ws(i)]},seconds:function(i){return["секунд","секунда","секунды"][Ws(i)]},decimal:","},uSt={years:function(i){return["rok","roky","roky","rokov"][Ll(i)]},months:function(i){return["mesiac","mesiace","mesiace","mesiacov"][Ll(i)]},weeks:function(i){return["týždeň","týždne","týždne","týždňov"][Ll(i)]},days:function(i){return["deň","dni","dni","dní"][Ll(i)]},hours:function(i){return["hodina","hodiny","hodiny","hodín"][Ll(i)]},minutes:function(i){return["minúta","minúty","minúty","minút"][Ll(i)]},seconds:function(i){return["sekunda","sekundy","sekundy","sekúnd"][Ll(i)]},decimal:","},cSt={years:function(){return"år"},months:function(i){return"månad"+(i===1?"":"er")},weeks:function(i){return"veck"+(i===1?"a":"or")},days:function(i){return"dag"+(i===1?"":"ar")},hours:function(i){return"timm"+(i===1?"e":"ar")},minutes:function(i){return"minut"+(i===1?"":"er")},seconds:function(i){return"sekund"+(i===1?"":"er")},decimal:","},hSt={years:function(){return"yıl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gün"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},dSt={years:function(i){return["років","рік","роки"][Ws(i)]},months:function(i){return["місяців","місяць","місяці"][Ws(i)]},weeks:function(i){return["тижнів","тиждень","тижні"][Ws(i)]},days:function(i){return["днів","день","дні"][Ws(i)]},hours:function(i){return["годин","година","години"][Ws(i)]},minutes:function(i){return["хвилин","хвилина","хвилини"][Ws(i)]},seconds:function(i){return["секунд","секунда","секунди"][Ws(i)]},decimal:","},fSt={years:function(){return"سال"},months:function(i){return i===1?"مہینہ":"مہینے"},weeks:function(i){return i===1?"ہفتہ":"ہفتے"},days:function(){return"دن"},hours:function(i){return i===1?"گھنٹہ":"گھنٹے"},minutes:function(){return"منٹ"},seconds:function(){return"سیکنڈ"},decimal:"."},pSt={years:function(){return"năm"},months:function(){return"tháng"},weeks:function(){return"tuần"},days:function(){return"ngày"},hours:function(){return"giờ"},minutes:function(){return"phút"},seconds:function(){return"giây"},decimal:","},gSt={years:function(){return"年"},months:function(){return"个月"},weeks:function(){return"周"},days:function(){return"天"},hours:function(){return"小时"},minutes:function(){return"分钟"},seconds:function(){return"秒"},decimal:"."},mSt={years:function(){return"年"},months:function(){return"個月"},weeks:function(){return"周"},days:function(){return"天"},hours:function(){return"小時"},minutes:function(){return"分鐘"},seconds:function(){return"秒"},decimal:"."};function XIe(i){return typeof i=="string"?new ixe(xCt(i)):new ixe(wCt(i))}XIe.setLocales=function(i,e){M6.setLocales(i,e)};const ySt=Object.freeze(Object.defineProperty({__proto__:null,ar:MCt,bg:ICt,ca:OCt,cs:PCt,da:FCt,de:NCt,en:$Ct,es:BCt,et:jCt,fa:zCt,fi:GCt,fo:UCt,fr:qCt,gr:VCt,he:HCt,hr:WCt,hu:XCt,is:YCt,isoDuration:XIe,it:ZCt,ja:KCt,ko:JCt,lo:QCt,lt:eSt,lv:tSt,ms:iSt,nl:nSt,no:rSt,pl:sSt,pt:oSt,ro:aSt,ru:lSt,sk:uSt,sv:cSt,tr:hSt,uk:dSt,ur:fSt,vi:pSt,zhCN:gSt,zhTW:mSt},Symbol.toStringTag,{value:"Module"})),vSt=eN(ySt);var XT={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var nxe;function _St(){if(nxe)return XT;nxe=1;var i=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,n=/\\([\u000b\u0020-\u00ff])/g,r=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;XT.format=o,XT.parse=a;function o(h){if(!h||typeof h!="object")throw new TypeError("argument obj is required");var d=h.parameters,f=h.type;if(!f||!s.test(f))throw new TypeError("invalid type");var p=f;if(d&&typeof d=="object")for(var m,y=Object.keys(d).sort(),v=0;v<y.length;v++){if(m=y[v],!t.test(m))throw new TypeError("invalid parameter name");p+="; "+m+"="+u(d[m])}return p}function a(h){if(!h)throw new TypeError("argument string is required");var d=typeof h=="object"?l(h):h;if(typeof d!="string")throw new TypeError("argument string is required to be a string");var f=d.indexOf(";"),p=f!==-1?d.slice(0,f).trim():d.trim();if(!s.test(p))throw new TypeError("invalid media type");var m=new c(p.toLowerCase());if(f!==-1){var y,v,b;for(i.lastIndex=f;v=i.exec(d);){if(v.index!==f)throw new TypeError("invalid parameter format");f+=v[0].length,y=v[1].toLowerCase(),b=v[2],b.charCodeAt(0)===34&&(b=b.slice(1,-1),b.indexOf("\\")!==-1&&(b=b.replace(n,"$1"))),m.parameters[y]=b}if(f!==d.length)throw new TypeError("invalid parameter format")}return m}function l(h){var d;if(typeof h.getHeader=="function"?d=h.getHeader("content-type"):typeof h.headers=="object"&&(d=h.headers&&h.headers["content-type"]),typeof d!="string")throw new TypeError("content-type header is missing from object");return d}function u(h){var d=String(h);if(t.test(d))return d;if(d.length>0&&!e.test(d))throw new TypeError("invalid parameter value");return'"'+d.replace(r,"\\$1")+'"'}function c(h){this.parameters=Object.create(null),this.type=h}return XT}var YT={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var rxe;function bSt(){return rxe||(rxe=1,function(i,e){(function(t,n){n(e)})(Jr,function(t){function n(H){switch(H._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var r=function(H,ue){this.current=H,this.entering=ue===!0},s=function(){var H=this.current,ue=this.entering;if(H===null)return null;var Ee=n(H);return ue&&Ee?H._firstChild?(this.current=H._firstChild,this.entering=!0):this.entering=!1:H===this.root?this.current=null:H._next===null?(this.current=H._parent,this.entering=!1):(this.current=H._next,this.entering=!0),{entering:ue,node:H}},o=function(H){return{current:H,root:H,entering:!0,next:s,resumeAt:r}},a=function(H,ue){this._type=H,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ue,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return n(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(H){this._literal=H}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(H){this._destination=H}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(H){this._title=H}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(H){this._info=H}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(H){this._level=H}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(H){this._listData.type=H}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(H){this._listData.tight=H}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(H){this._listData.start=H}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(H){this._listData.delimiter=H}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(H){this._onEnter=H}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(H){this._onExit=H}}),a.prototype.appendChild=function(H){H.unlink(),H._parent=this,this._lastChild?(this._lastChild._next=H,H._prev=this._lastChild,this._lastChild=H):(this._firstChild=H,this._lastChild=H)},a.prototype.prependChild=function(H){H.unlink(),H._parent=this,this._firstChild?(this._firstChild._prev=H,H._next=this._firstChild,this._firstChild=H):(this._firstChild=H,this._lastChild=H)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(H){H.unlink(),H._next=this._next,H._next&&(H._next._prev=H),H._prev=this,this._next=H,H._parent=this._parent,H._next||(H._parent._lastChild=H)},a.prototype.insertBefore=function(H){H.unlink(),H._prev=this._prev,H._prev&&(H._prev._next=H),H._next=this,this._prev=H,H._parent=this._parent,H._prev||(H._parent._firstChild=H)},a.prototype.walker=function(){var H=new o(this);return H};var u={};function c(H){var ue,Ee,Le=u[H];if(Le)return Le;for(Le=u[H]=[],ue=0;ue<128;ue++)Ee=String.fromCharCode(ue),/^[0-9a-z]$/i.test(Ee)?Le.push(Ee):Le.push("%"+("0"+ue.toString(16).toUpperCase()).slice(-2));for(ue=0;ue<H.length;ue++)Le[H.charCodeAt(ue)]=H[ue];return Le}function h(H,ue,Ee){var Le,pt,ut,fi,Pt,Ri="";for(typeof ue!="string"&&(Ee=ue,ue=h.defaultChars),typeof Ee>"u"&&(Ee=!0),Pt=c(ue),Le=0,pt=H.length;Le<pt;Le++){if(ut=H.charCodeAt(Le),Ee&&ut===37&&Le+2<pt&&/^[0-9a-f]{2}$/i.test(H.slice(Le+1,Le+3))){Ri+=H.slice(Le,Le+3),Le+=2;continue}if(ut<128){Ri+=Pt[ut];continue}if(ut>=55296&&ut<=57343){if(ut>=55296&&ut<=56319&&Le+1<pt&&(fi=H.charCodeAt(Le+1),fi>=56320&&fi<=57343)){Ri+=encodeURIComponent(H[Le]+H[Le+1]),Le++;continue}Ri+="%EF%BF%BD";continue}Ri+=encodeURIComponent(H[Le])}return Ri}h.defaultChars=";/?:@&=+$,-_.!~*'()#",h.componentChars="-_.!~*'()";var d=h,f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Jr<"u"?Jr:typeof self<"u"?self:{};function p(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}function m(H,ue){return ue={exports:{}},H(ue,ue.exports),ue.exports}function y(H){return H&&H.default||H}var v="Á",b="á",x="Ă",w="ă",C="∾",D="∿",R="∾̳",A="Â",L="â",O="´",$="А",q="а",M="Æ",F="æ",N="⁡",B="𝔄",W="𝔞",K="À",ee="à",te="ℵ",le="ℵ",Q="Α",z="α",J="Ā",ye="ā",Ne="⨿",Ge="&",rt="&",Be="⩕",ze="⩓",lt="∧",xt="⩜",Mt="⩘",Ct="⩚",gi="∠",Wt="⦤",Qi="∠",He="⦨",ge="⦩",se="⦪",re="⦫",pe="⦬",I="⦭",G="⦮",Z="⦯",ie="∡",me="∟",_e="⊾",xe="⦝",V="∢",oe="Å",fe="⍼",de="Ą",Te="ą",Ae="𝔸",Se="𝕒",Re="⩯",Pe="≈",We="⩰",st="≊",ot="≋",It="'",ct="⁡",Ht="≈",Yt="≊",St="Å",ti="å",Rt="𝒜",xi="𝒶",Mi="≔",on="*",en="≈",ri="≍",Ot="Ã",Si="ã",Bn="Ä",En="ä",fn="∳",hs="⨑",pn="≌",zs="϶",Ii="‵",fo="∽",ve="⋍",ke="∖",it="⫧",Ke="⊽",Et="⌅",Qt="⌆",Ti="⌅",bt="⎵",Qe="⎶",_i="≌",bi="Б",Bt="б",zt="„",jn="∵",Ar="∵",ci="∵",Xe="⦰",yt="϶",cn="ℬ",Zn="ℬ",zn="Β",Kn="β",Pn="ℶ",jt="≬",Yr="𝔅",gs="𝔟",ms="⋂",Js="◯",po="⋃",na="⨀",Za="⨁",ra="⨂",Qs="⨆",Ka="★",sa="▽",Nr="△",oa="⨄",Fo="⋁",go="⋀",mo="⤍",yo="⧫",aa="▪",Mu="▴",No="▾",eu="◂",gl="▸",Rr="␣",vo="▒",$o="░",ml="▓",tu="█",Ja="=⃥",eo="≡⃥",la="⫭",ys="⌐",yl="𝔹",iu="𝕓",_o="⊥",ae="⊥",ne="⋈",Ie="⧉",Je="┐",Zt="╕",Xt="╖",Oi="╗",hn="┌",Rn="╒",Cn="╓",kn="╔",vs="─",Sn="═",$r="┬",bo="╤",Da="╥",As="╦",Rs="┴",vl="╧",hr="╨",_l="╩",pd="⊟",Iu="⊞",gd="⊠",Uf="┘",md="╛",qf="╜",Vf="╝",Hf="└",yd="╘",vd="╙",Wf="╚",hc="│",Qa="║",Ou="┼",Xf="╪",tm="╫",el="╬",Pu="┤",Me="╡",vt="╢",ei="╣",Fn="├",vr="╞",Xi="╟",ks="╠",oh="‵",b1="˘",JC="˘",x1="¦",w1="𝒷",Yf="ℬ",E1="⁏",C1="∽",by="⋍",im="⧅",S1="\\",nm="⟈",bl="•",T1="•",xy="≎",wy="⪮",A1="≏",R1="≎",Ey="≏",QC="Ć",eS="ć",tS="⩄",_d="⩉",bd="⩋",Cy="∩",Sy="⋒",k1="⩇",Ty="⩀",ah="ⅅ",lh="∩︀",Bo="⁁",dc="ˇ",fc="ℭ",rm="⩍",D1="Č",Zf="č",L1="Ç",Ay="ç",sm="Ĉ",iS="ĉ",Ry="∰",M1="⩌",ky="⩐",Dy="Ċ",xd="ċ",om="¸",I1="¸",am="⦲",Ly="¢",My="·",wd="·",Kf="𝔠",lm="ℭ",O1="Ч",Jf="ч",P1="✓",uh="✓",Qf="Χ",ch="χ",ep="ˆ",Ed="≗",F1="↺",N1="↻",$1="⊛",nS="⊚",hh="⊝",dh="⊙",rS="®",sS="Ⓢ",oS="⊖",aS="⊕",lS="⊗",ua="○",Ds="⧃",xo="≗",Ls="⨐",tp="⫯",uS="⧂",um="∲",cS="”",Iy="’",B1="♣",Oy="♣",Py=":",Fy="∷",j1="⩴",z1="≔",Ny="≔",G1=",",ip="@",hS="∁",cm="∘",Fu="∁",U1="ℂ",dS="≅",q1="⩭",La="≡",Gn="∮",xl="∯",pc="∮",gc="𝕔",V1="ℂ",$y="∐",H1="∐",By="©",np="©",W1="℗",jy="∳",mc="↵",X1="✗",Y1="⨯",hm="𝒞",zy="𝒸",Z1="⫏",K1="⫑",fS="⫐",dm="⫒",J1="⋯",pS="⤸",Q1="⤵",Cd="⋞",Gy="⋟",fm="↶",ex="⤽",Uy="⩈",tx="⩆",ix="≍",to="∪",pm="⋓",nx="⩊",rx="⊍",sx="⩅",Sd="∪︀",gm="↷",ox="⤼",ax="⋞",lx="⋟",Td="⋎",ux="⋏",mm="¤",cx="↶",rp="↷",Ad="⋎",hx="⋏",dx="∲",fx="∱",sp="⌭",op="†",ap="‡",lp="ℸ",px="↓",gx="↡",yc="⇓",Rd="‐",up="⫤",mx="⊣",gS="⤏",mS="˝",jo="Ď",yx="ď",yS="Д",vx="д",_x="‡",bx="⇊",vS="ⅅ",_S="ⅆ",vc="⤑",cp="⩷",ym="°",hp="∇",Nu="Δ",bS="δ",xS="⦱",kd="⥿",xx="𝔇",wx="𝔡",Ex="⥥",vm="⇃",Dd="⇂",qy="´",Vy="˙",Hy="˝",dp="`",Cx="˜",Sx="⋄",_m="⋄",wS="⋄",fp="♦",Tx="♦",Ax="¨",Wy="ⅆ",Rx="ϝ",kx="⋲",Dx="÷",pp="÷",gp="⋇",Xy="⋇",Lx="Ђ",Mx="ђ",Ix="⌞",Yy="⌍",Ox="$",Px="𝔻",Ld="𝕕",Fx="¨",bm="˙",ES="⃜",CS="≐",Ur="≑",Zy="≐",mp="∸",wl="∔",xm="⊡",Ky="⌆",Nx="∯",$x="¨",Bx="⇓",jx="⇐",zx="⇔",Jy="⫤",Gx="⟸",ir="⟺",Ux="⟹",Md="⇒",wm="⊨",SS="⇑",is="⇕",TS="∥",Em="⤓",g="↓",_="↓",S="⇓",E="⇵",T="̑",P="⇊",j="⇃",U="⇂",X="⥐",Y="⥞",ce="⥖",he="↽",we="⥟",be="⥗",Fe="⇁",$e="↧",Oe="⊤",Ue="⤐",et="⌟",Ze="⌌",gt="𝒟",ft="𝒹",mt="Ѕ",di="ѕ",Dt="⧶",Vi="Đ",ai="đ",gn="⋱",Un="▿",mn="▾",tn="⇵",yn="⥯",Pi="⦦",qn="Џ",Ai="џ",an="⟿",Bi="É",Dn="é",wo="⩮",Vn="Ě",io="ě",no="Ê",Br="ê",Eo="≖",tl="≕",Gs="Э",El="э",Cm="⩷",qx="Ė",fh="ė",ca="≑",_c="ⅇ",AS="≒",Id="𝔈",Qy="𝔢",yp="⪚",Sm="È",vp="è",ev="⪖",Vx="⪘",tv="⪙",Hx="∈",Wx="⏧",Xx="ℓ",J6="⪕",Q6="⪗",e8="Ē",t8="ē",i8="∅",n8="∅",r8="◻",s8="∅",o8="▫",a8=" ",l8=" ",u8=" ",c8="Ŋ",h8="ŋ",d8=" ",f8="Ę",p8="ę",g8="𝔼",m8="𝕖",y8="⋕",v8="⧣",_8="⩱",b8="ε",x8="Ε",w8="ε",E8="ϵ",C8="≖",S8="≕",T8="≂",A8="⪖",R8="⪕",k8="⩵",D8="=",L8="≂",M8="≟",I8="⇌",O8="≡",P8="⩸",F8="⧥",N8="⥱",$8="≓",B8="ℯ",j8="ℰ",z8="≐",G8="⩳",U8="≂",q8="Η",V8="η",H8="Ð",W8="ð",X8="Ë",Y8="ë",Z8="€",K8="!",J8="∃",Q8="∃",eB="ℰ",tB="ⅇ",iB="ⅇ",nB="≒",rB="Ф",sB="ф",oB="♀",aB="ﬃ",lB="ﬀ",uB="ﬄ",cB="𝔉",hB="𝔣",dB="ﬁ",fB="◼",pB="▪",gB="fj",mB="♭",yB="ﬂ",vB="▱",_B="ƒ",bB="𝔽",xB="𝕗",wB="∀",EB="∀",CB="⋔",SB="⫙",TB="ℱ",AB="⨍",RB="½",kB="⅓",DB="¼",LB="⅕",MB="⅙",IB="⅛",OB="⅔",PB="⅖",FB="¾",NB="⅗",$B="⅜",BB="⅘",jB="⅚",zB="⅝",GB="⅞",UB="⁄",qB="⌢",VB="𝒻",HB="ℱ",WB="ǵ",XB="Γ",YB="γ",ZB="Ϝ",KB="ϝ",JB="⪆",QB="Ğ",ej="ğ",tj="Ģ",ij="Ĝ",nj="ĝ",rj="Г",sj="г",oj="Ġ",aj="ġ",lj="≥",uj="≧",cj="⪌",hj="⋛",dj="≥",fj="≧",pj="⩾",gj="⪩",mj="⩾",yj="⪀",vj="⪂",_j="⪄",bj="⋛︀",xj="⪔",wj="𝔊",Ej="𝔤",Cj="≫",Sj="⋙",Tj="⋙",Aj="ℷ",Rj="Ѓ",kj="ѓ",Dj="⪥",Lj="≷",Mj="⪒",Ij="⪤",Oj="⪊",Pj="⪊",Fj="⪈",Nj="≩",$j="⪈",Bj="≩",jj="⋧",zj="𝔾",Gj="𝕘",Uj="`",qj="≥",Vj="⋛",Hj="≧",Wj="⪢",Xj="≷",Yj="⩾",Zj="≳",Kj="𝒢",Jj="ℊ",Qj="≳",ez="⪎",tz="⪐",iz="⪧",nz="⩺",rz=">",sz=">",oz="≫",az="⋗",lz="⦕",uz="⩼",cz="⪆",hz="⥸",dz="⋗",fz="⋛",pz="⪌",gz="≷",mz="≳",yz="≩︀",vz="≩︀",_z="ˇ",bz=" ",xz="½",wz="ℋ",Ez="Ъ",Cz="ъ",Sz="⥈",Tz="↔",Az="⇔",Rz="↭",kz="^",Dz="ℏ",Lz="Ĥ",Mz="ĥ",Iz="♥",Oz="♥",Pz="…",Fz="⊹",Nz="𝔥",$z="ℌ",Bz="ℋ",jz="⤥",zz="⤦",Gz="⇿",Uz="∻",qz="↩",Vz="↪",Hz="𝕙",Wz="ℍ",Xz="―",Yz="─",Zz="𝒽",Kz="ℋ",Jz="ℏ",Qz="Ħ",e9="ħ",t9="≎",i9="≏",n9="⁃",r9="‐",s9="Í",o9="í",a9="⁣",l9="Î",u9="î",c9="И",h9="и",d9="İ",f9="Е",p9="е",g9="¡",m9="⇔",y9="𝔦",v9="ℑ",_9="Ì",b9="ì",x9="ⅈ",w9="⨌",E9="∭",C9="⧜",S9="℩",T9="Ĳ",A9="ĳ",R9="Ī",k9="ī",D9="ℑ",L9="ⅈ",M9="ℐ",I9="ℑ",O9="ı",P9="ℑ",F9="⊷",N9="Ƶ",$9="⇒",B9="℅",j9="∞",z9="⧝",G9="ı",U9="⊺",q9="∫",V9="∬",H9="ℤ",W9="∫",X9="⊺",Y9="⋂",Z9="⨗",K9="⨼",J9="⁣",Q9="⁢",eG="Ё",tG="ё",iG="Į",nG="į",rG="𝕀",sG="𝕚",oG="Ι",aG="ι",lG="⨼",uG="¿",cG="𝒾",hG="ℐ",dG="∈",fG="⋵",pG="⋹",gG="⋴",mG="⋳",yG="∈",vG="⁢",_G="Ĩ",bG="ĩ",xG="І",wG="і",EG="Ï",CG="ï",SG="Ĵ",TG="ĵ",AG="Й",RG="й",kG="𝔍",DG="𝔧",LG="ȷ",MG="𝕁",IG="𝕛",OG="𝒥",PG="𝒿",FG="Ј",NG="ј",$G="Є",BG="є",jG="Κ",zG="κ",GG="ϰ",UG="Ķ",qG="ķ",VG="К",HG="к",WG="𝔎",XG="𝔨",YG="ĸ",ZG="Х",KG="х",JG="Ќ",QG="ќ",e7="𝕂",t7="𝕜",i7="𝒦",n7="𝓀",r7="⇚",s7="Ĺ",o7="ĺ",a7="⦴",l7="ℒ",u7="Λ",c7="λ",h7="⟨",d7="⟪",f7="⦑",p7="⟨",g7="⪅",m7="ℒ",y7="«",v7="⇤",_7="⤟",b7="←",x7="↞",w7="⇐",E7="⤝",C7="↩",S7="↫",T7="⤹",A7="⥳",R7="↢",k7="⤙",D7="⤛",L7="⪫",M7="⪭",I7="⪭︀",O7="⤌",P7="⤎",F7="❲",N7="{",$7="[",B7="⦋",j7="⦏",z7="⦍",G7="Ľ",U7="ľ",q7="Ļ",V7="ļ",H7="⌈",W7="{",X7="Л",Y7="л",Z7="⤶",K7="“",J7="„",Q7="⥧",eU="⥋",tU="↲",iU="≤",nU="≦",rU="⟨",sU="⇤",oU="←",aU="←",lU="⇐",uU="⇆",cU="↢",hU="⌈",dU="⟦",fU="⥡",pU="⥙",gU="⇃",mU="⌊",yU="↽",vU="↼",_U="⇇",bU="↔",xU="↔",wU="⇔",EU="⇆",CU="⇋",SU="↭",TU="⥎",AU="↤",RU="⊣",kU="⥚",DU="⋋",LU="⧏",MU="⊲",IU="⊴",OU="⥑",PU="⥠",FU="⥘",NU="↿",$U="⥒",BU="↼",jU="⪋",zU="⋚",GU="≤",UU="≦",qU="⩽",VU="⪨",HU="⩽",WU="⩿",XU="⪁",YU="⪃",ZU="⋚︀",KU="⪓",JU="⪅",QU="⋖",eq="⋚",tq="⪋",iq="⋚",nq="≦",rq="≶",sq="≶",oq="⪡",aq="≲",lq="⩽",uq="≲",cq="⥼",hq="⌊",dq="𝔏",fq="𝔩",pq="≶",gq="⪑",mq="⥢",yq="↽",vq="↼",_q="⥪",bq="▄",xq="Љ",wq="љ",Eq="⇇",Cq="≪",Sq="⋘",Tq="⌞",Aq="⇚",Rq="⥫",kq="◺",Dq="Ŀ",Lq="ŀ",Mq="⎰",Iq="⎰",Oq="⪉",Pq="⪉",Fq="⪇",Nq="≨",$q="⪇",Bq="≨",jq="⋦",zq="⟬",Gq="⇽",Uq="⟦",qq="⟵",Vq="⟵",Hq="⟸",Wq="⟷",Xq="⟷",Yq="⟺",Zq="⟼",Kq="⟶",Jq="⟶",Qq="⟹",eV="↫",tV="↬",iV="⦅",nV="𝕃",rV="𝕝",sV="⨭",oV="⨴",aV="∗",lV="_",uV="↙",cV="↘",hV="◊",dV="◊",fV="⧫",pV="(",gV="⦓",mV="⇆",yV="⌟",vV="⇋",_V="⥭",bV="‎",xV="⊿",wV="‹",EV="𝓁",CV="ℒ",SV="↰",TV="↰",AV="≲",RV="⪍",kV="⪏",DV="[",LV="‘",MV="‚",IV="Ł",OV="ł",PV="⪦",FV="⩹",NV="<",$V="<",BV="≪",jV="⋖",zV="⋋",GV="⋉",UV="⥶",qV="⩻",VV="◃",HV="⊴",WV="◂",XV="⦖",YV="⥊",ZV="⥦",KV="≨︀",JV="≨︀",QV="¯",eH="♂",tH="✠",iH="✠",nH="↦",rH="↦",sH="↧",oH="↤",aH="↥",lH="▮",uH="⨩",cH="М",hH="м",dH="—",fH="∺",pH="∡",gH=" ",mH="ℳ",yH="𝔐",vH="𝔪",_H="℧",bH="µ",xH="*",wH="⫰",EH="∣",CH="·",SH="⊟",TH="−",AH="∸",RH="⨪",kH="∓",DH="⫛",LH="…",MH="∓",IH="⊧",OH="𝕄",PH="𝕞",FH="∓",NH="𝓂",$H="ℳ",BH="∾",jH="Μ",zH="μ",GH="⊸",UH="⊸",qH="∇",VH="Ń",HH="ń",WH="∠⃒",XH="≉",YH="⩰̸",ZH="≋̸",KH="ŉ",JH="≉",QH="♮",eW="ℕ",tW="♮",iW=" ",nW="≎̸",rW="≏̸",sW="⩃",oW="Ň",aW="ň",lW="Ņ",uW="ņ",cW="≇",hW="⩭̸",dW="⩂",fW="Н",pW="н",gW="–",mW="⤤",yW="↗",vW="⇗",_W="↗",bW="≠",xW="≐̸",wW="​",EW="​",CW="​",SW="​",TW="≢",AW="⤨",RW="≂̸",kW="≫",DW="≪",LW=`
`,MW="∄",IW="∄",OW="𝔑",PW="𝔫",FW="≧̸",NW="≱",$W="≱",BW="≧̸",jW="⩾̸",zW="⩾̸",GW="⋙̸",UW="≵",qW="≫⃒",VW="≯",HW="≯",WW="≫̸",XW="↮",YW="⇎",ZW="⫲",KW="∋",JW="⋼",QW="⋺",eX="∋",tX="Њ",iX="њ",nX="↚",rX="⇍",sX="‥",oX="≦̸",aX="≰",lX="↚",uX="⇍",cX="↮",hX="⇎",dX="≰",fX="≦̸",pX="⩽̸",gX="⩽̸",mX="≮",yX="⋘̸",vX="≴",_X="≪⃒",bX="≮",xX="⋪",wX="⋬",EX="≪̸",CX="∤",SX="⁠",TX=" ",AX="𝕟",RX="ℕ",kX="⫬",DX="¬",LX="≢",MX="≭",IX="∦",OX="∉",PX="≠",FX="≂̸",NX="∄",$X="≯",BX="≱",jX="≧̸",zX="≫̸",GX="≹",UX="⩾̸",qX="≵",VX="≎̸",HX="≏̸",WX="∉",XX="⋵̸",YX="⋹̸",ZX="∉",KX="⋷",JX="⋶",QX="⧏̸",eY="⋪",tY="⋬",iY="≮",nY="≰",rY="≸",sY="≪̸",oY="⩽̸",aY="≴",lY="⪢̸",uY="⪡̸",cY="∌",hY="∌",dY="⋾",fY="⋽",pY="⊀",gY="⪯̸",mY="⋠",yY="∌",vY="⧐̸",_Y="⋫",bY="⋭",xY="⊏̸",wY="⋢",EY="⊐̸",CY="⋣",SY="⊂⃒",TY="⊈",AY="⊁",RY="⪰̸",kY="⋡",DY="≿̸",LY="⊃⃒",MY="⊉",IY="≁",OY="≄",PY="≇",FY="≉",NY="∤",$Y="∦",BY="∦",jY="⫽⃥",zY="∂̸",GY="⨔",UY="⊀",qY="⋠",VY="⊀",HY="⪯̸",WY="⪯̸",XY="⤳̸",YY="↛",ZY="⇏",KY="↝̸",JY="↛",QY="⇏",eZ="⋫",tZ="⋭",iZ="⊁",nZ="⋡",rZ="⪰̸",sZ="𝒩",oZ="𝓃",aZ="∤",lZ="∦",uZ="≁",cZ="≄",hZ="≄",dZ="∤",fZ="∦",pZ="⋢",gZ="⋣",mZ="⊄",yZ="⫅̸",vZ="⊈",_Z="⊂⃒",bZ="⊈",xZ="⫅̸",wZ="⊁",EZ="⪰̸",CZ="⊅",SZ="⫆̸",TZ="⊉",AZ="⊃⃒",RZ="⊉",kZ="⫆̸",DZ="≹",LZ="Ñ",MZ="ñ",IZ="≸",OZ="⋪",PZ="⋬",FZ="⋫",NZ="⋭",$Z="Ν",BZ="ν",jZ="#",zZ="№",GZ=" ",UZ="≍⃒",qZ="⊬",VZ="⊭",HZ="⊮",WZ="⊯",XZ="≥⃒",YZ=">⃒",ZZ="⤄",KZ="⧞",JZ="⤂",QZ="≤⃒",eK="<⃒",tK="⊴⃒",iK="⤃",nK="⊵⃒",rK="∼⃒",sK="⤣",oK="↖",aK="⇖",lK="↖",uK="⤧",cK="Ó",hK="ó",dK="⊛",fK="Ô",pK="ô",gK="⊚",mK="О",yK="о",vK="⊝",_K="Ő",bK="ő",xK="⨸",wK="⊙",EK="⦼",CK="Œ",SK="œ",TK="⦿",AK="𝔒",RK="𝔬",kK="˛",DK="Ò",LK="ò",MK="⧁",IK="⦵",OK="Ω",PK="∮",FK="↺",NK="⦾",$K="⦻",BK="‾",jK="⧀",zK="Ō",GK="ō",UK="Ω",qK="ω",VK="Ο",HK="ο",WK="⦶",XK="⊖",YK="𝕆",ZK="𝕠",KK="⦷",JK="“",QK="‘",eJ="⦹",tJ="⊕",iJ="↻",nJ="⩔",rJ="∨",sJ="⩝",oJ="ℴ",aJ="ℴ",lJ="ª",uJ="º",cJ="⊶",hJ="⩖",dJ="⩗",fJ="⩛",pJ="Ⓢ",gJ="𝒪",mJ="ℴ",yJ="Ø",vJ="ø",_J="⊘",bJ="Õ",xJ="õ",wJ="⨶",EJ="⨷",CJ="⊗",SJ="Ö",TJ="ö",AJ="⌽",RJ="‾",kJ="⏞",DJ="⎴",LJ="⏜",MJ="¶",IJ="∥",OJ="∥",PJ="⫳",FJ="⫽",NJ="∂",$J="∂",BJ="П",jJ="п",zJ="%",GJ=".",UJ="‰",qJ="⊥",VJ="‱",HJ="𝔓",WJ="𝔭",XJ="Φ",YJ="φ",ZJ="ϕ",KJ="ℳ",JJ="☎",QJ="Π",eQ="π",tQ="⋔",iQ="ϖ",nQ="ℏ",rQ="ℎ",sQ="ℏ",oQ="⨣",aQ="⊞",lQ="⨢",uQ="+",cQ="∔",hQ="⨥",dQ="⩲",fQ="±",pQ="±",gQ="⨦",mQ="⨧",yQ="±",vQ="ℌ",_Q="⨕",bQ="𝕡",xQ="ℙ",wQ="£",EQ="⪷",CQ="⪻",SQ="≺",TQ="≼",AQ="⪷",RQ="≺",kQ="≼",DQ="≺",LQ="⪯",MQ="≼",IQ="≾",OQ="⪯",PQ="⪹",FQ="⪵",NQ="⋨",$Q="⪯",BQ="⪳",jQ="≾",zQ="′",GQ="″",UQ="ℙ",qQ="⪹",VQ="⪵",HQ="⋨",WQ="∏",XQ="∏",YQ="⌮",ZQ="⌒",KQ="⌓",JQ="∝",QQ="∝",eee="∷",tee="∝",iee="≾",nee="⊰",ree="𝒫",see="𝓅",oee="Ψ",aee="ψ",lee=" ",uee="𝔔",cee="𝔮",hee="⨌",dee="𝕢",fee="ℚ",pee="⁗",gee="𝒬",mee="𝓆",yee="ℍ",vee="⨖",_ee="?",bee="≟",xee='"',wee='"',Eee="⇛",Cee="∽̱",See="Ŕ",Tee="ŕ",Aee="√",Ree="⦳",kee="⟩",Dee="⟫",Lee="⦒",Mee="⦥",Iee="⟩",Oee="»",Pee="⥵",Fee="⇥",Nee="⤠",$ee="⤳",Bee="→",jee="↠",zee="⇒",Gee="⤞",Uee="↪",qee="↬",Vee="⥅",Hee="⥴",Wee="⤖",Xee="↣",Yee="↝",Zee="⤚",Kee="⤜",Jee="∶",Qee="ℚ",ete="⤍",tte="⤏",ite="⤐",nte="❳",rte="}",ste="]",ote="⦌",ate="⦎",lte="⦐",ute="Ř",cte="ř",hte="Ŗ",dte="ŗ",fte="⌉",pte="}",gte="Р",mte="р",yte="⤷",vte="⥩",_te="”",bte="”",xte="↳",wte="ℜ",Ete="ℛ",Cte="ℜ",Ste="ℝ",Tte="ℜ",Ate="▭",Rte="®",kte="®",Dte="∋",Lte="⇋",Mte="⥯",Ite="⥽",Ote="⌋",Pte="𝔯",Fte="ℜ",Nte="⥤",$te="⇁",Bte="⇀",jte="⥬",zte="Ρ",Gte="ρ",Ute="ϱ",qte="⟩",Vte="⇥",Hte="→",Wte="→",Xte="⇒",Yte="⇄",Zte="↣",Kte="⌉",Jte="⟧",Qte="⥝",eie="⥕",tie="⇂",iie="⌋",nie="⇁",rie="⇀",sie="⇄",oie="⇌",aie="⇉",lie="↝",uie="↦",cie="⊢",hie="⥛",die="⋌",fie="⧐",pie="⊳",gie="⊵",mie="⥏",yie="⥜",vie="⥔",_ie="↾",bie="⥓",xie="⇀",wie="˚",Eie="≓",Cie="⇄",Sie="⇌",Tie="‏",Aie="⎱",Rie="⎱",kie="⫮",Die="⟭",Lie="⇾",Mie="⟧",Iie="⦆",Oie="𝕣",Pie="ℝ",Fie="⨮",Nie="⨵",$ie="⥰",Bie=")",jie="⦔",zie="⨒",Gie="⇉",Uie="⇛",qie="›",Vie="𝓇",Hie="ℛ",Wie="↱",Xie="↱",Yie="]",Zie="’",Kie="’",Jie="⋌",Qie="⋊",ene="▹",tne="⊵",ine="▸",nne="⧎",rne="⧴",sne="⥨",one="℞",ane="Ś",lne="ś",une="‚",cne="⪸",hne="Š",dne="š",fne="⪼",pne="≻",gne="≽",mne="⪰",yne="⪴",vne="Ş",_ne="ş",bne="Ŝ",xne="ŝ",wne="⪺",Ene="⪶",Cne="⋩",Sne="⨓",Tne="≿",Ane="С",Rne="с",kne="⊡",Dne="⋅",Lne="⩦",Mne="⤥",Ine="↘",One="⇘",Pne="↘",Fne="§",Nne=";",$ne="⤩",Bne="∖",jne="∖",zne="✶",Gne="𝔖",Une="𝔰",qne="⌢",Vne="♯",Hne="Щ",Wne="щ",Xne="Ш",Yne="ш",Zne="↓",Kne="←",Jne="∣",Qne="∥",ere="→",tre="↑",ire="­",nre="Σ",rre="σ",sre="ς",ore="ς",are="∼",lre="⩪",ure="≃",cre="≃",hre="⪞",dre="⪠",fre="⪝",pre="⪟",gre="≆",mre="⨤",yre="⥲",vre="←",_re="∘",bre="∖",xre="⨳",wre="⧤",Ere="∣",Cre="⌣",Sre="⪪",Tre="⪬",Are="⪬︀",Rre="Ь",kre="ь",Dre="⌿",Lre="⧄",Mre="/",Ire="𝕊",Ore="𝕤",Pre="♠",Fre="♠",Nre="∥",$re="⊓",Bre="⊓︀",jre="⊔",zre="⊔︀",Gre="√",Ure="⊏",qre="⊑",Vre="⊏",Hre="⊑",Wre="⊐",Xre="⊒",Yre="⊐",Zre="⊒",Kre="□",Jre="□",Qre="⊓",ese="⊏",tse="⊑",ise="⊐",nse="⊒",rse="⊔",sse="▪",ose="□",ase="▪",lse="→",use="𝒮",cse="𝓈",hse="∖",dse="⌣",fse="⋆",pse="⋆",gse="☆",mse="★",yse="ϵ",vse="ϕ",_se="¯",bse="⊂",xse="⋐",wse="⪽",Ese="⫅",Cse="⊆",Sse="⫃",Tse="⫁",Ase="⫋",Rse="⊊",kse="⪿",Dse="⥹",Lse="⊂",Mse="⋐",Ise="⊆",Ose="⫅",Pse="⊆",Fse="⊊",Nse="⫋",$se="⫇",Bse="⫕",jse="⫓",zse="⪸",Gse="≻",Use="≽",qse="≻",Vse="⪰",Hse="≽",Wse="≿",Xse="⪰",Yse="⪺",Zse="⪶",Kse="⋩",Jse="≿",Qse="∋",eoe="∑",toe="∑",ioe="♪",noe="¹",roe="²",soe="³",ooe="⊃",aoe="⋑",loe="⪾",uoe="⫘",coe="⫆",hoe="⊇",doe="⫄",foe="⊃",poe="⊇",goe="⟉",moe="⫗",yoe="⥻",voe="⫂",_oe="⫌",boe="⊋",xoe="⫀",woe="⊃",Eoe="⋑",Coe="⊇",Soe="⫆",Toe="⊋",Aoe="⫌",Roe="⫈",koe="⫔",Doe="⫖",Loe="⤦",Moe="↙",Ioe="⇙",Ooe="↙",Poe="⤪",Foe="ß",Noe="	",$oe="⌖",Boe="Τ",joe="τ",zoe="⎴",Goe="Ť",Uoe="ť",qoe="Ţ",Voe="ţ",Hoe="Т",Woe="т",Xoe="⃛",Yoe="⌕",Zoe="𝔗",Koe="𝔱",Joe="∴",Qoe="∴",eae="∴",tae="Θ",iae="θ",nae="ϑ",rae="ϑ",sae="≈",oae="∼",aae="  ",lae=" ",uae=" ",cae="≈",hae="∼",dae="Þ",fae="þ",pae="˜",gae="∼",mae="≃",yae="≅",vae="≈",_ae="⨱",bae="⊠",xae="×",wae="⨰",Eae="∭",Cae="⤨",Sae="⌶",Tae="⫱",Aae="⊤",Rae="𝕋",kae="𝕥",Dae="⫚",Lae="⤩",Mae="‴",Iae="™",Oae="™",Pae="▵",Fae="▿",Nae="◃",$ae="⊴",Bae="≜",jae="▹",zae="⊵",Gae="◬",Uae="≜",qae="⨺",Vae="⃛",Hae="⨹",Wae="⧍",Xae="⨻",Yae="⏢",Zae="𝒯",Kae="𝓉",Jae="Ц",Qae="ц",ele="Ћ",tle="ћ",ile="Ŧ",nle="ŧ",rle="≬",sle="↞",ole="↠",ale="Ú",lle="ú",ule="↑",cle="↟",hle="⇑",dle="⥉",fle="Ў",ple="ў",gle="Ŭ",mle="ŭ",yle="Û",vle="û",_le="У",ble="у",xle="⇅",wle="Ű",Ele="ű",Cle="⥮",Sle="⥾",Tle="𝔘",Ale="𝔲",Rle="Ù",kle="ù",Dle="⥣",Lle="↿",Mle="↾",Ile="▀",Ole="⌜",Ple="⌜",Fle="⌏",Nle="◸",$le="Ū",Ble="ū",jle="¨",zle="_",Gle="⏟",Ule="⎵",qle="⏝",Vle="⋃",Hle="⊎",Wle="Ų",Xle="ų",Yle="𝕌",Zle="𝕦",Kle="⤒",Jle="↑",Qle="↑",eue="⇑",tue="⇅",iue="↕",nue="↕",rue="⇕",sue="⥮",oue="↿",aue="↾",lue="⊎",uue="↖",cue="↗",hue="υ",due="ϒ",fue="ϒ",pue="Υ",gue="υ",mue="↥",yue="⊥",vue="⇈",_ue="⌝",bue="⌝",xue="⌎",wue="Ů",Eue="ů",Cue="◹",Sue="𝒰",Tue="𝓊",Aue="⋰",Rue="Ũ",kue="ũ",Due="▵",Lue="▴",Mue="⇈",Iue="Ü",Oue="ü",Pue="⦧",Fue="⦜",Nue="ϵ",$ue="ϰ",Bue="∅",jue="ϕ",zue="ϖ",Gue="∝",Uue="↕",que="⇕",Vue="ϱ",Hue="ς",Wue="⊊︀",Xue="⫋︀",Yue="⊋︀",Zue="⫌︀",Kue="ϑ",Jue="⊲",Que="⊳",ece="⫨",tce="⫫",ice="⫩",nce="В",rce="в",sce="⊢",oce="⊨",ace="⊩",lce="⊫",uce="⫦",cce="⊻",hce="∨",dce="⋁",fce="≚",pce="⋮",gce="|",mce="‖",yce="|",vce="‖",_ce="∣",bce="|",xce="❘",wce="≀",Ece=" ",Cce="𝔙",Sce="𝔳",Tce="⊲",Ace="⊂⃒",Rce="⊃⃒",kce="𝕍",Dce="𝕧",Lce="∝",Mce="⊳",Ice="𝒱",Oce="𝓋",Pce="⫋︀",Fce="⊊︀",Nce="⫌︀",$ce="⊋︀",Bce="⊪",jce="⦚",zce="Ŵ",Gce="ŵ",Uce="⩟",qce="∧",Vce="⋀",Hce="≙",Wce="℘",Xce="𝔚",Yce="𝔴",Zce="𝕎",Kce="𝕨",Jce="℘",Qce="≀",ehe="≀",the="𝒲",ihe="𝓌",nhe="⋂",rhe="◯",she="⋃",ohe="▽",ahe="𝔛",lhe="𝔵",uhe="⟷",che="⟺",hhe="Ξ",dhe="ξ",fhe="⟵",phe="⟸",ghe="⟼",mhe="⋻",yhe="⨀",vhe="𝕏",_he="𝕩",bhe="⨁",xhe="⨂",whe="⟶",Ehe="⟹",Che="𝒳",She="𝓍",The="⨆",Ahe="⨄",Rhe="△",khe="⋁",Dhe="⋀",Lhe="Ý",Mhe="ý",Ihe="Я",Ohe="я",Phe="Ŷ",Fhe="ŷ",Nhe="Ы",$he="ы",Bhe="¥",jhe="𝔜",zhe="𝔶",Ghe="Ї",Uhe="ї",qhe="𝕐",Vhe="𝕪",Hhe="𝒴",Whe="𝓎",Xhe="Ю",Yhe="ю",Zhe="ÿ",Khe="Ÿ",Jhe="Ź",Qhe="ź",ede="Ž",tde="ž",ide="З",nde="з",rde="Ż",sde="ż",ode="ℨ",ade="​",lde="Ζ",ude="ζ",cde="𝔷",hde="ℨ",dde="Ж",fde="ж",pde="⇝",gde="𝕫",mde="ℤ",yde="𝒵",vde="𝓏",_de="‍",bde="‌",XOe={Aacute:v,aacute:b,Abreve:x,abreve:w,ac:C,acd:D,acE:R,Acirc:A,acirc:L,acute:O,Acy:$,acy:q,AElig:M,aelig:F,af:N,Afr:B,afr:W,Agrave:K,agrave:ee,alefsym:te,aleph:le,Alpha:Q,alpha:z,Amacr:J,amacr:ye,amalg:Ne,amp:Ge,AMP:rt,andand:Be,And:ze,and:lt,andd:xt,andslope:Mt,andv:Ct,ang:gi,ange:Wt,angle:Qi,angmsdaa:He,angmsdab:ge,angmsdac:se,angmsdad:re,angmsdae:pe,angmsdaf:I,angmsdag:G,angmsdah:Z,angmsd:ie,angrt:me,angrtvb:_e,angrtvbd:xe,angsph:V,angst:oe,angzarr:fe,Aogon:de,aogon:Te,Aopf:Ae,aopf:Se,apacir:Re,ap:Pe,apE:We,ape:st,apid:ot,apos:It,ApplyFunction:ct,approx:Ht,approxeq:Yt,Aring:St,aring:ti,Ascr:Rt,ascr:xi,Assign:Mi,ast:on,asymp:en,asympeq:ri,Atilde:Ot,atilde:Si,Auml:Bn,auml:En,awconint:fn,awint:hs,backcong:pn,backepsilon:zs,backprime:Ii,backsim:fo,backsimeq:ve,Backslash:ke,Barv:it,barvee:Ke,barwed:Et,Barwed:Qt,barwedge:Ti,bbrk:bt,bbrktbrk:Qe,bcong:_i,Bcy:bi,bcy:Bt,bdquo:zt,becaus:jn,because:Ar,Because:ci,bemptyv:Xe,bepsi:yt,bernou:cn,Bernoullis:Zn,Beta:zn,beta:Kn,beth:Pn,between:jt,Bfr:Yr,bfr:gs,bigcap:ms,bigcirc:Js,bigcup:po,bigodot:na,bigoplus:Za,bigotimes:ra,bigsqcup:Qs,bigstar:Ka,bigtriangledown:sa,bigtriangleup:Nr,biguplus:oa,bigvee:Fo,bigwedge:go,bkarow:mo,blacklozenge:yo,blacksquare:aa,blacktriangle:Mu,blacktriangledown:No,blacktriangleleft:eu,blacktriangleright:gl,blank:Rr,blk12:vo,blk14:$o,blk34:ml,block:tu,bne:Ja,bnequiv:eo,bNot:la,bnot:ys,Bopf:yl,bopf:iu,bot:_o,bottom:ae,bowtie:ne,boxbox:Ie,boxdl:Je,boxdL:Zt,boxDl:Xt,boxDL:Oi,boxdr:hn,boxdR:Rn,boxDr:Cn,boxDR:kn,boxh:vs,boxH:Sn,boxhd:$r,boxHd:bo,boxhD:Da,boxHD:As,boxhu:Rs,boxHu:vl,boxhU:hr,boxHU:_l,boxminus:pd,boxplus:Iu,boxtimes:gd,boxul:Uf,boxuL:md,boxUl:qf,boxUL:Vf,boxur:Hf,boxuR:yd,boxUr:vd,boxUR:Wf,boxv:hc,boxV:Qa,boxvh:Ou,boxvH:Xf,boxVh:tm,boxVH:el,boxvl:Pu,boxvL:Me,boxVl:vt,boxVL:ei,boxvr:Fn,boxvR:vr,boxVr:Xi,boxVR:ks,bprime:oh,breve:b1,Breve:JC,brvbar:x1,bscr:w1,Bscr:Yf,bsemi:E1,bsim:C1,bsime:by,bsolb:im,bsol:S1,bsolhsub:nm,bull:bl,bullet:T1,bump:xy,bumpE:wy,bumpe:A1,Bumpeq:R1,bumpeq:Ey,Cacute:QC,cacute:eS,capand:tS,capbrcup:_d,capcap:bd,cap:Cy,Cap:Sy,capcup:k1,capdot:Ty,CapitalDifferentialD:ah,caps:lh,caret:Bo,caron:dc,Cayleys:fc,ccaps:rm,Ccaron:D1,ccaron:Zf,Ccedil:L1,ccedil:Ay,Ccirc:sm,ccirc:iS,Cconint:Ry,ccups:M1,ccupssm:ky,Cdot:Dy,cdot:xd,cedil:om,Cedilla:I1,cemptyv:am,cent:Ly,centerdot:My,CenterDot:wd,cfr:Kf,Cfr:lm,CHcy:O1,chcy:Jf,check:P1,checkmark:uh,Chi:Qf,chi:ch,circ:ep,circeq:Ed,circlearrowleft:F1,circlearrowright:N1,circledast:$1,circledcirc:nS,circleddash:hh,CircleDot:dh,circledR:rS,circledS:sS,CircleMinus:oS,CirclePlus:aS,CircleTimes:lS,cir:ua,cirE:Ds,cire:xo,cirfnint:Ls,cirmid:tp,cirscir:uS,ClockwiseContourIntegral:um,CloseCurlyDoubleQuote:cS,CloseCurlyQuote:Iy,clubs:B1,clubsuit:Oy,colon:Py,Colon:Fy,Colone:j1,colone:z1,coloneq:Ny,comma:G1,commat:ip,comp:hS,compfn:cm,complement:Fu,complexes:U1,cong:dS,congdot:q1,Congruent:La,conint:Gn,Conint:xl,ContourIntegral:pc,copf:gc,Copf:V1,coprod:$y,Coproduct:H1,copy:By,COPY:np,copysr:W1,CounterClockwiseContourIntegral:jy,crarr:mc,cross:X1,Cross:Y1,Cscr:hm,cscr:zy,csub:Z1,csube:K1,csup:fS,csupe:dm,ctdot:J1,cudarrl:pS,cudarrr:Q1,cuepr:Cd,cuesc:Gy,cularr:fm,cularrp:ex,cupbrcap:Uy,cupcap:tx,CupCap:ix,cup:to,Cup:pm,cupcup:nx,cupdot:rx,cupor:sx,cups:Sd,curarr:gm,curarrm:ox,curlyeqprec:ax,curlyeqsucc:lx,curlyvee:Td,curlywedge:ux,curren:mm,curvearrowleft:cx,curvearrowright:rp,cuvee:Ad,cuwed:hx,cwconint:dx,cwint:fx,cylcty:sp,dagger:op,Dagger:ap,daleth:lp,darr:px,Darr:gx,dArr:yc,dash:Rd,Dashv:up,dashv:mx,dbkarow:gS,dblac:mS,Dcaron:jo,dcaron:yx,Dcy:yS,dcy:vx,ddagger:_x,ddarr:bx,DD:vS,dd:_S,DDotrahd:vc,ddotseq:cp,deg:ym,Del:hp,Delta:Nu,delta:bS,demptyv:xS,dfisht:kd,Dfr:xx,dfr:wx,dHar:Ex,dharl:vm,dharr:Dd,DiacriticalAcute:qy,DiacriticalDot:Vy,DiacriticalDoubleAcute:Hy,DiacriticalGrave:dp,DiacriticalTilde:Cx,diam:Sx,diamond:_m,Diamond:wS,diamondsuit:fp,diams:Tx,die:Ax,DifferentialD:Wy,digamma:Rx,disin:kx,div:Dx,divide:pp,divideontimes:gp,divonx:Xy,DJcy:Lx,djcy:Mx,dlcorn:Ix,dlcrop:Yy,dollar:Ox,Dopf:Px,dopf:Ld,Dot:Fx,dot:bm,DotDot:ES,doteq:CS,doteqdot:Ur,DotEqual:Zy,dotminus:mp,dotplus:wl,dotsquare:xm,doublebarwedge:Ky,DoubleContourIntegral:Nx,DoubleDot:$x,DoubleDownArrow:Bx,DoubleLeftArrow:jx,DoubleLeftRightArrow:zx,DoubleLeftTee:Jy,DoubleLongLeftArrow:Gx,DoubleLongLeftRightArrow:ir,DoubleLongRightArrow:Ux,DoubleRightArrow:Md,DoubleRightTee:wm,DoubleUpArrow:SS,DoubleUpDownArrow:is,DoubleVerticalBar:TS,DownArrowBar:Em,downarrow:g,DownArrow:_,Downarrow:S,DownArrowUpArrow:E,DownBreve:T,downdownarrows:P,downharpoonleft:j,downharpoonright:U,DownLeftRightVector:X,DownLeftTeeVector:Y,DownLeftVectorBar:ce,DownLeftVector:he,DownRightTeeVector:we,DownRightVectorBar:be,DownRightVector:Fe,DownTeeArrow:$e,DownTee:Oe,drbkarow:Ue,drcorn:et,drcrop:Ze,Dscr:gt,dscr:ft,DScy:mt,dscy:di,dsol:Dt,Dstrok:Vi,dstrok:ai,dtdot:gn,dtri:Un,dtrif:mn,duarr:tn,duhar:yn,dwangle:Pi,DZcy:qn,dzcy:Ai,dzigrarr:an,Eacute:Bi,eacute:Dn,easter:wo,Ecaron:Vn,ecaron:io,Ecirc:no,ecirc:Br,ecir:Eo,ecolon:tl,Ecy:Gs,ecy:El,eDDot:Cm,Edot:qx,edot:fh,eDot:ca,ee:_c,efDot:AS,Efr:Id,efr:Qy,eg:yp,Egrave:Sm,egrave:vp,egs:ev,egsdot:Vx,el:tv,Element:Hx,elinters:Wx,ell:Xx,els:J6,elsdot:Q6,Emacr:e8,emacr:t8,empty:i8,emptyset:n8,EmptySmallSquare:r8,emptyv:s8,EmptyVerySmallSquare:o8,emsp13:a8,emsp14:l8,emsp:u8,ENG:c8,eng:h8,ensp:d8,Eogon:f8,eogon:p8,Eopf:g8,eopf:m8,epar:y8,eparsl:v8,eplus:_8,epsi:b8,Epsilon:x8,epsilon:w8,epsiv:E8,eqcirc:C8,eqcolon:S8,eqsim:T8,eqslantgtr:A8,eqslantless:R8,Equal:k8,equals:D8,EqualTilde:L8,equest:M8,Equilibrium:I8,equiv:O8,equivDD:P8,eqvparsl:F8,erarr:N8,erDot:$8,escr:B8,Escr:j8,esdot:z8,Esim:G8,esim:U8,Eta:q8,eta:V8,ETH:H8,eth:W8,Euml:X8,euml:Y8,euro:Z8,excl:K8,exist:J8,Exists:Q8,expectation:eB,exponentiale:tB,ExponentialE:iB,fallingdotseq:nB,Fcy:rB,fcy:sB,female:oB,ffilig:aB,fflig:lB,ffllig:uB,Ffr:cB,ffr:hB,filig:dB,FilledSmallSquare:fB,FilledVerySmallSquare:pB,fjlig:gB,flat:mB,fllig:yB,fltns:vB,fnof:_B,Fopf:bB,fopf:xB,forall:wB,ForAll:EB,fork:CB,forkv:SB,Fouriertrf:TB,fpartint:AB,frac12:RB,frac13:kB,frac14:DB,frac15:LB,frac16:MB,frac18:IB,frac23:OB,frac25:PB,frac34:FB,frac35:NB,frac38:$B,frac45:BB,frac56:jB,frac58:zB,frac78:GB,frasl:UB,frown:qB,fscr:VB,Fscr:HB,gacute:WB,Gamma:XB,gamma:YB,Gammad:ZB,gammad:KB,gap:JB,Gbreve:QB,gbreve:ej,Gcedil:tj,Gcirc:ij,gcirc:nj,Gcy:rj,gcy:sj,Gdot:oj,gdot:aj,ge:lj,gE:uj,gEl:cj,gel:hj,geq:dj,geqq:fj,geqslant:pj,gescc:gj,ges:mj,gesdot:yj,gesdoto:vj,gesdotol:_j,gesl:bj,gesles:xj,Gfr:wj,gfr:Ej,gg:Cj,Gg:Sj,ggg:Tj,gimel:Aj,GJcy:Rj,gjcy:kj,gla:Dj,gl:Lj,glE:Mj,glj:Ij,gnap:Oj,gnapprox:Pj,gne:Fj,gnE:Nj,gneq:$j,gneqq:Bj,gnsim:jj,Gopf:zj,gopf:Gj,grave:Uj,GreaterEqual:qj,GreaterEqualLess:Vj,GreaterFullEqual:Hj,GreaterGreater:Wj,GreaterLess:Xj,GreaterSlantEqual:Yj,GreaterTilde:Zj,Gscr:Kj,gscr:Jj,gsim:Qj,gsime:ez,gsiml:tz,gtcc:iz,gtcir:nz,gt:rz,GT:sz,Gt:oz,gtdot:az,gtlPar:lz,gtquest:uz,gtrapprox:cz,gtrarr:hz,gtrdot:dz,gtreqless:fz,gtreqqless:pz,gtrless:gz,gtrsim:mz,gvertneqq:yz,gvnE:vz,Hacek:_z,hairsp:bz,half:xz,hamilt:wz,HARDcy:Ez,hardcy:Cz,harrcir:Sz,harr:Tz,hArr:Az,harrw:Rz,Hat:kz,hbar:Dz,Hcirc:Lz,hcirc:Mz,hearts:Iz,heartsuit:Oz,hellip:Pz,hercon:Fz,hfr:Nz,Hfr:$z,HilbertSpace:Bz,hksearow:jz,hkswarow:zz,hoarr:Gz,homtht:Uz,hookleftarrow:qz,hookrightarrow:Vz,hopf:Hz,Hopf:Wz,horbar:Xz,HorizontalLine:Yz,hscr:Zz,Hscr:Kz,hslash:Jz,Hstrok:Qz,hstrok:e9,HumpDownHump:t9,HumpEqual:i9,hybull:n9,hyphen:r9,Iacute:s9,iacute:o9,ic:a9,Icirc:l9,icirc:u9,Icy:c9,icy:h9,Idot:d9,IEcy:f9,iecy:p9,iexcl:g9,iff:m9,ifr:y9,Ifr:v9,Igrave:_9,igrave:b9,ii:x9,iiiint:w9,iiint:E9,iinfin:C9,iiota:S9,IJlig:T9,ijlig:A9,Imacr:R9,imacr:k9,image:D9,ImaginaryI:L9,imagline:M9,imagpart:I9,imath:O9,Im:P9,imof:F9,imped:N9,Implies:$9,incare:B9,in:"∈",infin:j9,infintie:z9,inodot:G9,intcal:U9,int:q9,Int:V9,integers:H9,Integral:W9,intercal:X9,Intersection:Y9,intlarhk:Z9,intprod:K9,InvisibleComma:J9,InvisibleTimes:Q9,IOcy:eG,iocy:tG,Iogon:iG,iogon:nG,Iopf:rG,iopf:sG,Iota:oG,iota:aG,iprod:lG,iquest:uG,iscr:cG,Iscr:hG,isin:dG,isindot:fG,isinE:pG,isins:gG,isinsv:mG,isinv:yG,it:vG,Itilde:_G,itilde:bG,Iukcy:xG,iukcy:wG,Iuml:EG,iuml:CG,Jcirc:SG,jcirc:TG,Jcy:AG,jcy:RG,Jfr:kG,jfr:DG,jmath:LG,Jopf:MG,jopf:IG,Jscr:OG,jscr:PG,Jsercy:FG,jsercy:NG,Jukcy:$G,jukcy:BG,Kappa:jG,kappa:zG,kappav:GG,Kcedil:UG,kcedil:qG,Kcy:VG,kcy:HG,Kfr:WG,kfr:XG,kgreen:YG,KHcy:ZG,khcy:KG,KJcy:JG,kjcy:QG,Kopf:e7,kopf:t7,Kscr:i7,kscr:n7,lAarr:r7,Lacute:s7,lacute:o7,laemptyv:a7,lagran:l7,Lambda:u7,lambda:c7,lang:h7,Lang:d7,langd:f7,langle:p7,lap:g7,Laplacetrf:m7,laquo:y7,larrb:v7,larrbfs:_7,larr:b7,Larr:x7,lArr:w7,larrfs:E7,larrhk:C7,larrlp:S7,larrpl:T7,larrsim:A7,larrtl:R7,latail:k7,lAtail:D7,lat:L7,late:M7,lates:I7,lbarr:O7,lBarr:P7,lbbrk:F7,lbrace:N7,lbrack:$7,lbrke:B7,lbrksld:j7,lbrkslu:z7,Lcaron:G7,lcaron:U7,Lcedil:q7,lcedil:V7,lceil:H7,lcub:W7,Lcy:X7,lcy:Y7,ldca:Z7,ldquo:K7,ldquor:J7,ldrdhar:Q7,ldrushar:eU,ldsh:tU,le:iU,lE:nU,LeftAngleBracket:rU,LeftArrowBar:sU,leftarrow:oU,LeftArrow:aU,Leftarrow:lU,LeftArrowRightArrow:uU,leftarrowtail:cU,LeftCeiling:hU,LeftDoubleBracket:dU,LeftDownTeeVector:fU,LeftDownVectorBar:pU,LeftDownVector:gU,LeftFloor:mU,leftharpoondown:yU,leftharpoonup:vU,leftleftarrows:_U,leftrightarrow:bU,LeftRightArrow:xU,Leftrightarrow:wU,leftrightarrows:EU,leftrightharpoons:CU,leftrightsquigarrow:SU,LeftRightVector:TU,LeftTeeArrow:AU,LeftTee:RU,LeftTeeVector:kU,leftthreetimes:DU,LeftTriangleBar:LU,LeftTriangle:MU,LeftTriangleEqual:IU,LeftUpDownVector:OU,LeftUpTeeVector:PU,LeftUpVectorBar:FU,LeftUpVector:NU,LeftVectorBar:$U,LeftVector:BU,lEg:jU,leg:zU,leq:GU,leqq:UU,leqslant:qU,lescc:VU,les:HU,lesdot:WU,lesdoto:XU,lesdotor:YU,lesg:ZU,lesges:KU,lessapprox:JU,lessdot:QU,lesseqgtr:eq,lesseqqgtr:tq,LessEqualGreater:iq,LessFullEqual:nq,LessGreater:rq,lessgtr:sq,LessLess:oq,lesssim:aq,LessSlantEqual:lq,LessTilde:uq,lfisht:cq,lfloor:hq,Lfr:dq,lfr:fq,lg:pq,lgE:gq,lHar:mq,lhard:yq,lharu:vq,lharul:_q,lhblk:bq,LJcy:xq,ljcy:wq,llarr:Eq,ll:Cq,Ll:Sq,llcorner:Tq,Lleftarrow:Aq,llhard:Rq,lltri:kq,Lmidot:Dq,lmidot:Lq,lmoustache:Mq,lmoust:Iq,lnap:Oq,lnapprox:Pq,lne:Fq,lnE:Nq,lneq:$q,lneqq:Bq,lnsim:jq,loang:zq,loarr:Gq,lobrk:Uq,longleftarrow:qq,LongLeftArrow:Vq,Longleftarrow:Hq,longleftrightarrow:Wq,LongLeftRightArrow:Xq,Longleftrightarrow:Yq,longmapsto:Zq,longrightarrow:Kq,LongRightArrow:Jq,Longrightarrow:Qq,looparrowleft:eV,looparrowright:tV,lopar:iV,Lopf:nV,lopf:rV,loplus:sV,lotimes:oV,lowast:aV,lowbar:lV,LowerLeftArrow:uV,LowerRightArrow:cV,loz:hV,lozenge:dV,lozf:fV,lpar:pV,lparlt:gV,lrarr:mV,lrcorner:yV,lrhar:vV,lrhard:_V,lrm:bV,lrtri:xV,lsaquo:wV,lscr:EV,Lscr:CV,lsh:SV,Lsh:TV,lsim:AV,lsime:RV,lsimg:kV,lsqb:DV,lsquo:LV,lsquor:MV,Lstrok:IV,lstrok:OV,ltcc:PV,ltcir:FV,lt:NV,LT:$V,Lt:BV,ltdot:jV,lthree:zV,ltimes:GV,ltlarr:UV,ltquest:qV,ltri:VV,ltrie:HV,ltrif:WV,ltrPar:XV,lurdshar:YV,luruhar:ZV,lvertneqq:KV,lvnE:JV,macr:QV,male:eH,malt:tH,maltese:iH,Map:"⤅",map:nH,mapsto:rH,mapstodown:sH,mapstoleft:oH,mapstoup:aH,marker:lH,mcomma:uH,Mcy:cH,mcy:hH,mdash:dH,mDDot:fH,measuredangle:pH,MediumSpace:gH,Mellintrf:mH,Mfr:yH,mfr:vH,mho:_H,micro:bH,midast:xH,midcir:wH,mid:EH,middot:CH,minusb:SH,minus:TH,minusd:AH,minusdu:RH,MinusPlus:kH,mlcp:DH,mldr:LH,mnplus:MH,models:IH,Mopf:OH,mopf:PH,mp:FH,mscr:NH,Mscr:$H,mstpos:BH,Mu:jH,mu:zH,multimap:GH,mumap:UH,nabla:qH,Nacute:VH,nacute:HH,nang:WH,nap:XH,napE:YH,napid:ZH,napos:KH,napprox:JH,natural:QH,naturals:eW,natur:tW,nbsp:iW,nbump:nW,nbumpe:rW,ncap:sW,Ncaron:oW,ncaron:aW,Ncedil:lW,ncedil:uW,ncong:cW,ncongdot:hW,ncup:dW,Ncy:fW,ncy:pW,ndash:gW,nearhk:mW,nearr:yW,neArr:vW,nearrow:_W,ne:bW,nedot:xW,NegativeMediumSpace:wW,NegativeThickSpace:EW,NegativeThinSpace:CW,NegativeVeryThinSpace:SW,nequiv:TW,nesear:AW,nesim:RW,NestedGreaterGreater:kW,NestedLessLess:DW,NewLine:LW,nexist:MW,nexists:IW,Nfr:OW,nfr:PW,ngE:FW,nge:NW,ngeq:$W,ngeqq:BW,ngeqslant:jW,nges:zW,nGg:GW,ngsim:UW,nGt:qW,ngt:VW,ngtr:HW,nGtv:WW,nharr:XW,nhArr:YW,nhpar:ZW,ni:KW,nis:JW,nisd:QW,niv:eX,NJcy:tX,njcy:iX,nlarr:nX,nlArr:rX,nldr:sX,nlE:oX,nle:aX,nleftarrow:lX,nLeftarrow:uX,nleftrightarrow:cX,nLeftrightarrow:hX,nleq:dX,nleqq:fX,nleqslant:pX,nles:gX,nless:mX,nLl:yX,nlsim:vX,nLt:_X,nlt:bX,nltri:xX,nltrie:wX,nLtv:EX,nmid:CX,NoBreak:SX,NonBreakingSpace:TX,nopf:AX,Nopf:RX,Not:kX,not:DX,NotCongruent:LX,NotCupCap:MX,NotDoubleVerticalBar:IX,NotElement:OX,NotEqual:PX,NotEqualTilde:FX,NotExists:NX,NotGreater:$X,NotGreaterEqual:BX,NotGreaterFullEqual:jX,NotGreaterGreater:zX,NotGreaterLess:GX,NotGreaterSlantEqual:UX,NotGreaterTilde:qX,NotHumpDownHump:VX,NotHumpEqual:HX,notin:WX,notindot:XX,notinE:YX,notinva:ZX,notinvb:KX,notinvc:JX,NotLeftTriangleBar:QX,NotLeftTriangle:eY,NotLeftTriangleEqual:tY,NotLess:iY,NotLessEqual:nY,NotLessGreater:rY,NotLessLess:sY,NotLessSlantEqual:oY,NotLessTilde:aY,NotNestedGreaterGreater:lY,NotNestedLessLess:uY,notni:cY,notniva:hY,notnivb:dY,notnivc:fY,NotPrecedes:pY,NotPrecedesEqual:gY,NotPrecedesSlantEqual:mY,NotReverseElement:yY,NotRightTriangleBar:vY,NotRightTriangle:_Y,NotRightTriangleEqual:bY,NotSquareSubset:xY,NotSquareSubsetEqual:wY,NotSquareSuperset:EY,NotSquareSupersetEqual:CY,NotSubset:SY,NotSubsetEqual:TY,NotSucceeds:AY,NotSucceedsEqual:RY,NotSucceedsSlantEqual:kY,NotSucceedsTilde:DY,NotSuperset:LY,NotSupersetEqual:MY,NotTilde:IY,NotTildeEqual:OY,NotTildeFullEqual:PY,NotTildeTilde:FY,NotVerticalBar:NY,nparallel:$Y,npar:BY,nparsl:jY,npart:zY,npolint:GY,npr:UY,nprcue:qY,nprec:VY,npreceq:HY,npre:WY,nrarrc:XY,nrarr:YY,nrArr:ZY,nrarrw:KY,nrightarrow:JY,nRightarrow:QY,nrtri:eZ,nrtrie:tZ,nsc:iZ,nsccue:nZ,nsce:rZ,Nscr:sZ,nscr:oZ,nshortmid:aZ,nshortparallel:lZ,nsim:uZ,nsime:cZ,nsimeq:hZ,nsmid:dZ,nspar:fZ,nsqsube:pZ,nsqsupe:gZ,nsub:mZ,nsubE:yZ,nsube:vZ,nsubset:_Z,nsubseteq:bZ,nsubseteqq:xZ,nsucc:wZ,nsucceq:EZ,nsup:CZ,nsupE:SZ,nsupe:TZ,nsupset:AZ,nsupseteq:RZ,nsupseteqq:kZ,ntgl:DZ,Ntilde:LZ,ntilde:MZ,ntlg:IZ,ntriangleleft:OZ,ntrianglelefteq:PZ,ntriangleright:FZ,ntrianglerighteq:NZ,Nu:$Z,nu:BZ,num:jZ,numero:zZ,numsp:GZ,nvap:UZ,nvdash:qZ,nvDash:VZ,nVdash:HZ,nVDash:WZ,nvge:XZ,nvgt:YZ,nvHarr:ZZ,nvinfin:KZ,nvlArr:JZ,nvle:QZ,nvlt:eK,nvltrie:tK,nvrArr:iK,nvrtrie:nK,nvsim:rK,nwarhk:sK,nwarr:oK,nwArr:aK,nwarrow:lK,nwnear:uK,Oacute:cK,oacute:hK,oast:dK,Ocirc:fK,ocirc:pK,ocir:gK,Ocy:mK,ocy:yK,odash:vK,Odblac:_K,odblac:bK,odiv:xK,odot:wK,odsold:EK,OElig:CK,oelig:SK,ofcir:TK,Ofr:AK,ofr:RK,ogon:kK,Ograve:DK,ograve:LK,ogt:MK,ohbar:IK,ohm:OK,oint:PK,olarr:FK,olcir:NK,olcross:$K,oline:BK,olt:jK,Omacr:zK,omacr:GK,Omega:UK,omega:qK,Omicron:VK,omicron:HK,omid:WK,ominus:XK,Oopf:YK,oopf:ZK,opar:KK,OpenCurlyDoubleQuote:JK,OpenCurlyQuote:QK,operp:eJ,oplus:tJ,orarr:iJ,Or:nJ,or:rJ,ord:sJ,order:oJ,orderof:aJ,ordf:lJ,ordm:uJ,origof:cJ,oror:hJ,orslope:dJ,orv:fJ,oS:pJ,Oscr:gJ,oscr:mJ,Oslash:yJ,oslash:vJ,osol:_J,Otilde:bJ,otilde:xJ,otimesas:wJ,Otimes:EJ,otimes:CJ,Ouml:SJ,ouml:TJ,ovbar:AJ,OverBar:RJ,OverBrace:kJ,OverBracket:DJ,OverParenthesis:LJ,para:MJ,parallel:IJ,par:OJ,parsim:PJ,parsl:FJ,part:NJ,PartialD:$J,Pcy:BJ,pcy:jJ,percnt:zJ,period:GJ,permil:UJ,perp:qJ,pertenk:VJ,Pfr:HJ,pfr:WJ,Phi:XJ,phi:YJ,phiv:ZJ,phmmat:KJ,phone:JJ,Pi:QJ,pi:eQ,pitchfork:tQ,piv:iQ,planck:nQ,planckh:rQ,plankv:sQ,plusacir:oQ,plusb:aQ,pluscir:lQ,plus:uQ,plusdo:cQ,plusdu:hQ,pluse:dQ,PlusMinus:fQ,plusmn:pQ,plussim:gQ,plustwo:mQ,pm:yQ,Poincareplane:vQ,pointint:_Q,popf:bQ,Popf:xQ,pound:wQ,prap:EQ,Pr:CQ,pr:SQ,prcue:TQ,precapprox:AQ,prec:RQ,preccurlyeq:kQ,Precedes:DQ,PrecedesEqual:LQ,PrecedesSlantEqual:MQ,PrecedesTilde:IQ,preceq:OQ,precnapprox:PQ,precneqq:FQ,precnsim:NQ,pre:$Q,prE:BQ,precsim:jQ,prime:zQ,Prime:GQ,primes:UQ,prnap:qQ,prnE:VQ,prnsim:HQ,prod:WQ,Product:XQ,profalar:YQ,profline:ZQ,profsurf:KQ,prop:JQ,Proportional:QQ,Proportion:eee,propto:tee,prsim:iee,prurel:nee,Pscr:ree,pscr:see,Psi:oee,psi:aee,puncsp:lee,Qfr:uee,qfr:cee,qint:hee,qopf:dee,Qopf:fee,qprime:pee,Qscr:gee,qscr:mee,quaternions:yee,quatint:vee,quest:_ee,questeq:bee,quot:xee,QUOT:wee,rAarr:Eee,race:Cee,Racute:See,racute:Tee,radic:Aee,raemptyv:Ree,rang:kee,Rang:Dee,rangd:Lee,range:Mee,rangle:Iee,raquo:Oee,rarrap:Pee,rarrb:Fee,rarrbfs:Nee,rarrc:$ee,rarr:Bee,Rarr:jee,rArr:zee,rarrfs:Gee,rarrhk:Uee,rarrlp:qee,rarrpl:Vee,rarrsim:Hee,Rarrtl:Wee,rarrtl:Xee,rarrw:Yee,ratail:Zee,rAtail:Kee,ratio:Jee,rationals:Qee,rbarr:ete,rBarr:tte,RBarr:ite,rbbrk:nte,rbrace:rte,rbrack:ste,rbrke:ote,rbrksld:ate,rbrkslu:lte,Rcaron:ute,rcaron:cte,Rcedil:hte,rcedil:dte,rceil:fte,rcub:pte,Rcy:gte,rcy:mte,rdca:yte,rdldhar:vte,rdquo:_te,rdquor:bte,rdsh:xte,real:wte,realine:Ete,realpart:Cte,reals:Ste,Re:Tte,rect:Ate,reg:Rte,REG:kte,ReverseElement:Dte,ReverseEquilibrium:Lte,ReverseUpEquilibrium:Mte,rfisht:Ite,rfloor:Ote,rfr:Pte,Rfr:Fte,rHar:Nte,rhard:$te,rharu:Bte,rharul:jte,Rho:zte,rho:Gte,rhov:Ute,RightAngleBracket:qte,RightArrowBar:Vte,rightarrow:Hte,RightArrow:Wte,Rightarrow:Xte,RightArrowLeftArrow:Yte,rightarrowtail:Zte,RightCeiling:Kte,RightDoubleBracket:Jte,RightDownTeeVector:Qte,RightDownVectorBar:eie,RightDownVector:tie,RightFloor:iie,rightharpoondown:nie,rightharpoonup:rie,rightleftarrows:sie,rightleftharpoons:oie,rightrightarrows:aie,rightsquigarrow:lie,RightTeeArrow:uie,RightTee:cie,RightTeeVector:hie,rightthreetimes:die,RightTriangleBar:fie,RightTriangle:pie,RightTriangleEqual:gie,RightUpDownVector:mie,RightUpTeeVector:yie,RightUpVectorBar:vie,RightUpVector:_ie,RightVectorBar:bie,RightVector:xie,ring:wie,risingdotseq:Eie,rlarr:Cie,rlhar:Sie,rlm:Tie,rmoustache:Aie,rmoust:Rie,rnmid:kie,roang:Die,roarr:Lie,robrk:Mie,ropar:Iie,ropf:Oie,Ropf:Pie,roplus:Fie,rotimes:Nie,RoundImplies:$ie,rpar:Bie,rpargt:jie,rppolint:zie,rrarr:Gie,Rrightarrow:Uie,rsaquo:qie,rscr:Vie,Rscr:Hie,rsh:Wie,Rsh:Xie,rsqb:Yie,rsquo:Zie,rsquor:Kie,rthree:Jie,rtimes:Qie,rtri:ene,rtrie:tne,rtrif:ine,rtriltri:nne,RuleDelayed:rne,ruluhar:sne,rx:one,Sacute:ane,sacute:lne,sbquo:une,scap:cne,Scaron:hne,scaron:dne,Sc:fne,sc:pne,sccue:gne,sce:mne,scE:yne,Scedil:vne,scedil:_ne,Scirc:bne,scirc:xne,scnap:wne,scnE:Ene,scnsim:Cne,scpolint:Sne,scsim:Tne,Scy:Ane,scy:Rne,sdotb:kne,sdot:Dne,sdote:Lne,searhk:Mne,searr:Ine,seArr:One,searrow:Pne,sect:Fne,semi:Nne,seswar:$ne,setminus:Bne,setmn:jne,sext:zne,Sfr:Gne,sfr:Une,sfrown:qne,sharp:Vne,SHCHcy:Hne,shchcy:Wne,SHcy:Xne,shcy:Yne,ShortDownArrow:Zne,ShortLeftArrow:Kne,shortmid:Jne,shortparallel:Qne,ShortRightArrow:ere,ShortUpArrow:tre,shy:ire,Sigma:nre,sigma:rre,sigmaf:sre,sigmav:ore,sim:are,simdot:lre,sime:ure,simeq:cre,simg:hre,simgE:dre,siml:fre,simlE:pre,simne:gre,simplus:mre,simrarr:yre,slarr:vre,SmallCircle:_re,smallsetminus:bre,smashp:xre,smeparsl:wre,smid:Ere,smile:Cre,smt:Sre,smte:Tre,smtes:Are,SOFTcy:Rre,softcy:kre,solbar:Dre,solb:Lre,sol:Mre,Sopf:Ire,sopf:Ore,spades:Pre,spadesuit:Fre,spar:Nre,sqcap:$re,sqcaps:Bre,sqcup:jre,sqcups:zre,Sqrt:Gre,sqsub:Ure,sqsube:qre,sqsubset:Vre,sqsubseteq:Hre,sqsup:Wre,sqsupe:Xre,sqsupset:Yre,sqsupseteq:Zre,square:Kre,Square:Jre,SquareIntersection:Qre,SquareSubset:ese,SquareSubsetEqual:tse,SquareSuperset:ise,SquareSupersetEqual:nse,SquareUnion:rse,squarf:sse,squ:ose,squf:ase,srarr:lse,Sscr:use,sscr:cse,ssetmn:hse,ssmile:dse,sstarf:fse,Star:pse,star:gse,starf:mse,straightepsilon:yse,straightphi:vse,strns:_se,sub:bse,Sub:xse,subdot:wse,subE:Ese,sube:Cse,subedot:Sse,submult:Tse,subnE:Ase,subne:Rse,subplus:kse,subrarr:Dse,subset:Lse,Subset:Mse,subseteq:Ise,subseteqq:Ose,SubsetEqual:Pse,subsetneq:Fse,subsetneqq:Nse,subsim:$se,subsub:Bse,subsup:jse,succapprox:zse,succ:Gse,succcurlyeq:Use,Succeeds:qse,SucceedsEqual:Vse,SucceedsSlantEqual:Hse,SucceedsTilde:Wse,succeq:Xse,succnapprox:Yse,succneqq:Zse,succnsim:Kse,succsim:Jse,SuchThat:Qse,sum:eoe,Sum:toe,sung:ioe,sup1:noe,sup2:roe,sup3:soe,sup:ooe,Sup:aoe,supdot:loe,supdsub:uoe,supE:coe,supe:hoe,supedot:doe,Superset:foe,SupersetEqual:poe,suphsol:goe,suphsub:moe,suplarr:yoe,supmult:voe,supnE:_oe,supne:boe,supplus:xoe,supset:woe,Supset:Eoe,supseteq:Coe,supseteqq:Soe,supsetneq:Toe,supsetneqq:Aoe,supsim:Roe,supsub:koe,supsup:Doe,swarhk:Loe,swarr:Moe,swArr:Ioe,swarrow:Ooe,swnwar:Poe,szlig:Foe,Tab:Noe,target:$oe,Tau:Boe,tau:joe,tbrk:zoe,Tcaron:Goe,tcaron:Uoe,Tcedil:qoe,tcedil:Voe,Tcy:Hoe,tcy:Woe,tdot:Xoe,telrec:Yoe,Tfr:Zoe,tfr:Koe,there4:Joe,therefore:Qoe,Therefore:eae,Theta:tae,theta:iae,thetasym:nae,thetav:rae,thickapprox:sae,thicksim:oae,ThickSpace:aae,ThinSpace:lae,thinsp:uae,thkap:cae,thksim:hae,THORN:dae,thorn:fae,tilde:pae,Tilde:gae,TildeEqual:mae,TildeFullEqual:yae,TildeTilde:vae,timesbar:_ae,timesb:bae,times:xae,timesd:wae,tint:Eae,toea:Cae,topbot:Sae,topcir:Tae,top:Aae,Topf:Rae,topf:kae,topfork:Dae,tosa:Lae,tprime:Mae,trade:Iae,TRADE:Oae,triangle:Pae,triangledown:Fae,triangleleft:Nae,trianglelefteq:$ae,triangleq:Bae,triangleright:jae,trianglerighteq:zae,tridot:Gae,trie:Uae,triminus:qae,TripleDot:Vae,triplus:Hae,trisb:Wae,tritime:Xae,trpezium:Yae,Tscr:Zae,tscr:Kae,TScy:Jae,tscy:Qae,TSHcy:ele,tshcy:tle,Tstrok:ile,tstrok:nle,twixt:rle,twoheadleftarrow:sle,twoheadrightarrow:ole,Uacute:ale,uacute:lle,uarr:ule,Uarr:cle,uArr:hle,Uarrocir:dle,Ubrcy:fle,ubrcy:ple,Ubreve:gle,ubreve:mle,Ucirc:yle,ucirc:vle,Ucy:_le,ucy:ble,udarr:xle,Udblac:wle,udblac:Ele,udhar:Cle,ufisht:Sle,Ufr:Tle,ufr:Ale,Ugrave:Rle,ugrave:kle,uHar:Dle,uharl:Lle,uharr:Mle,uhblk:Ile,ulcorn:Ole,ulcorner:Ple,ulcrop:Fle,ultri:Nle,Umacr:$le,umacr:Ble,uml:jle,UnderBar:zle,UnderBrace:Gle,UnderBracket:Ule,UnderParenthesis:qle,Union:Vle,UnionPlus:Hle,Uogon:Wle,uogon:Xle,Uopf:Yle,uopf:Zle,UpArrowBar:Kle,uparrow:Jle,UpArrow:Qle,Uparrow:eue,UpArrowDownArrow:tue,updownarrow:iue,UpDownArrow:nue,Updownarrow:rue,UpEquilibrium:sue,upharpoonleft:oue,upharpoonright:aue,uplus:lue,UpperLeftArrow:uue,UpperRightArrow:cue,upsi:hue,Upsi:due,upsih:fue,Upsilon:pue,upsilon:gue,UpTeeArrow:mue,UpTee:yue,upuparrows:vue,urcorn:_ue,urcorner:bue,urcrop:xue,Uring:wue,uring:Eue,urtri:Cue,Uscr:Sue,uscr:Tue,utdot:Aue,Utilde:Rue,utilde:kue,utri:Due,utrif:Lue,uuarr:Mue,Uuml:Iue,uuml:Oue,uwangle:Pue,vangrt:Fue,varepsilon:Nue,varkappa:$ue,varnothing:Bue,varphi:jue,varpi:zue,varpropto:Gue,varr:Uue,vArr:que,varrho:Vue,varsigma:Hue,varsubsetneq:Wue,varsubsetneqq:Xue,varsupsetneq:Yue,varsupsetneqq:Zue,vartheta:Kue,vartriangleleft:Jue,vartriangleright:Que,vBar:ece,Vbar:tce,vBarv:ice,Vcy:nce,vcy:rce,vdash:sce,vDash:oce,Vdash:ace,VDash:lce,Vdashl:uce,veebar:cce,vee:hce,Vee:dce,veeeq:fce,vellip:pce,verbar:gce,Verbar:mce,vert:yce,Vert:vce,VerticalBar:_ce,VerticalLine:bce,VerticalSeparator:xce,VerticalTilde:wce,VeryThinSpace:Ece,Vfr:Cce,vfr:Sce,vltri:Tce,vnsub:Ace,vnsup:Rce,Vopf:kce,vopf:Dce,vprop:Lce,vrtri:Mce,Vscr:Ice,vscr:Oce,vsubnE:Pce,vsubne:Fce,vsupnE:Nce,vsupne:$ce,Vvdash:Bce,vzigzag:jce,Wcirc:zce,wcirc:Gce,wedbar:Uce,wedge:qce,Wedge:Vce,wedgeq:Hce,weierp:Wce,Wfr:Xce,wfr:Yce,Wopf:Zce,wopf:Kce,wp:Jce,wr:Qce,wreath:ehe,Wscr:the,wscr:ihe,xcap:nhe,xcirc:rhe,xcup:she,xdtri:ohe,Xfr:ahe,xfr:lhe,xharr:uhe,xhArr:che,Xi:hhe,xi:dhe,xlarr:fhe,xlArr:phe,xmap:ghe,xnis:mhe,xodot:yhe,Xopf:vhe,xopf:_he,xoplus:bhe,xotime:xhe,xrarr:whe,xrArr:Ehe,Xscr:Che,xscr:She,xsqcup:The,xuplus:Ahe,xutri:Rhe,xvee:khe,xwedge:Dhe,Yacute:Lhe,yacute:Mhe,YAcy:Ihe,yacy:Ohe,Ycirc:Phe,ycirc:Fhe,Ycy:Nhe,ycy:$he,yen:Bhe,Yfr:jhe,yfr:zhe,YIcy:Ghe,yicy:Uhe,Yopf:qhe,yopf:Vhe,Yscr:Hhe,yscr:Whe,YUcy:Xhe,yucy:Yhe,yuml:Zhe,Yuml:Khe,Zacute:Jhe,zacute:Qhe,Zcaron:ede,zcaron:tde,Zcy:ide,zcy:nde,Zdot:rde,zdot:sde,zeetrf:ode,ZeroWidthSpace:ade,Zeta:lde,zeta:ude,zfr:cde,Zfr:hde,ZHcy:dde,zhcy:fde,zigrarr:pde,zopf:gde,Zopf:mde,Zscr:yde,zscr:vde,zwj:_de,zwnj:bde},YOe=Object.freeze({__proto__:null,Aacute:v,aacute:b,Abreve:x,abreve:w,ac:C,acd:D,acE:R,Acirc:A,acirc:L,acute:O,Acy:$,acy:q,AElig:M,aelig:F,af:N,Afr:B,afr:W,Agrave:K,agrave:ee,alefsym:te,aleph:le,Alpha:Q,alpha:z,Amacr:J,amacr:ye,amalg:Ne,amp:Ge,AMP:rt,andand:Be,And:ze,and:lt,andd:xt,andslope:Mt,andv:Ct,ang:gi,ange:Wt,angle:Qi,angmsdaa:He,angmsdab:ge,angmsdac:se,angmsdad:re,angmsdae:pe,angmsdaf:I,angmsdag:G,angmsdah:Z,angmsd:ie,angrt:me,angrtvb:_e,angrtvbd:xe,angsph:V,angst:oe,angzarr:fe,Aogon:de,aogon:Te,Aopf:Ae,aopf:Se,apacir:Re,ap:Pe,apE:We,ape:st,apid:ot,apos:It,ApplyFunction:ct,approx:Ht,approxeq:Yt,Aring:St,aring:ti,Ascr:Rt,ascr:xi,Assign:Mi,ast:on,asymp:en,asympeq:ri,Atilde:Ot,atilde:Si,Auml:Bn,auml:En,awconint:fn,awint:hs,backcong:pn,backepsilon:zs,backprime:Ii,backsim:fo,backsimeq:ve,Backslash:ke,Barv:it,barvee:Ke,barwed:Et,Barwed:Qt,barwedge:Ti,bbrk:bt,bbrktbrk:Qe,bcong:_i,Bcy:bi,bcy:Bt,bdquo:zt,becaus:jn,because:Ar,Because:ci,bemptyv:Xe,bepsi:yt,bernou:cn,Bernoullis:Zn,Beta:zn,beta:Kn,beth:Pn,between:jt,Bfr:Yr,bfr:gs,bigcap:ms,bigcirc:Js,bigcup:po,bigodot:na,bigoplus:Za,bigotimes:ra,bigsqcup:Qs,bigstar:Ka,bigtriangledown:sa,bigtriangleup:Nr,biguplus:oa,bigvee:Fo,bigwedge:go,bkarow:mo,blacklozenge:yo,blacksquare:aa,blacktriangle:Mu,blacktriangledown:No,blacktriangleleft:eu,blacktriangleright:gl,blank:Rr,blk12:vo,blk14:$o,blk34:ml,block:tu,bne:Ja,bnequiv:eo,bNot:la,bnot:ys,Bopf:yl,bopf:iu,bot:_o,bottom:ae,bowtie:ne,boxbox:Ie,boxdl:Je,boxdL:Zt,boxDl:Xt,boxDL:Oi,boxdr:hn,boxdR:Rn,boxDr:Cn,boxDR:kn,boxh:vs,boxH:Sn,boxhd:$r,boxHd:bo,boxhD:Da,boxHD:As,boxhu:Rs,boxHu:vl,boxhU:hr,boxHU:_l,boxminus:pd,boxplus:Iu,boxtimes:gd,boxul:Uf,boxuL:md,boxUl:qf,boxUL:Vf,boxur:Hf,boxuR:yd,boxUr:vd,boxUR:Wf,boxv:hc,boxV:Qa,boxvh:Ou,boxvH:Xf,boxVh:tm,boxVH:el,boxvl:Pu,boxvL:Me,boxVl:vt,boxVL:ei,boxvr:Fn,boxvR:vr,boxVr:Xi,boxVR:ks,bprime:oh,breve:b1,Breve:JC,brvbar:x1,bscr:w1,Bscr:Yf,bsemi:E1,bsim:C1,bsime:by,bsolb:im,bsol:S1,bsolhsub:nm,bull:bl,bullet:T1,bump:xy,bumpE:wy,bumpe:A1,Bumpeq:R1,bumpeq:Ey,Cacute:QC,cacute:eS,capand:tS,capbrcup:_d,capcap:bd,cap:Cy,Cap:Sy,capcup:k1,capdot:Ty,CapitalDifferentialD:ah,caps:lh,caret:Bo,caron:dc,Cayleys:fc,ccaps:rm,Ccaron:D1,ccaron:Zf,Ccedil:L1,ccedil:Ay,Ccirc:sm,ccirc:iS,Cconint:Ry,ccups:M1,ccupssm:ky,Cdot:Dy,cdot:xd,cedil:om,Cedilla:I1,cemptyv:am,cent:Ly,centerdot:My,CenterDot:wd,cfr:Kf,Cfr:lm,CHcy:O1,chcy:Jf,check:P1,checkmark:uh,Chi:Qf,chi:ch,circ:ep,circeq:Ed,circlearrowleft:F1,circlearrowright:N1,circledast:$1,circledcirc:nS,circleddash:hh,CircleDot:dh,circledR:rS,circledS:sS,CircleMinus:oS,CirclePlus:aS,CircleTimes:lS,cir:ua,cirE:Ds,cire:xo,cirfnint:Ls,cirmid:tp,cirscir:uS,ClockwiseContourIntegral:um,CloseCurlyDoubleQuote:cS,CloseCurlyQuote:Iy,clubs:B1,clubsuit:Oy,colon:Py,Colon:Fy,Colone:j1,colone:z1,coloneq:Ny,comma:G1,commat:ip,comp:hS,compfn:cm,complement:Fu,complexes:U1,cong:dS,congdot:q1,Congruent:La,conint:Gn,Conint:xl,ContourIntegral:pc,copf:gc,Copf:V1,coprod:$y,Coproduct:H1,copy:By,COPY:np,copysr:W1,CounterClockwiseContourIntegral:jy,crarr:mc,cross:X1,Cross:Y1,Cscr:hm,cscr:zy,csub:Z1,csube:K1,csup:fS,csupe:dm,ctdot:J1,cudarrl:pS,cudarrr:Q1,cuepr:Cd,cuesc:Gy,cularr:fm,cularrp:ex,cupbrcap:Uy,cupcap:tx,CupCap:ix,cup:to,Cup:pm,cupcup:nx,cupdot:rx,cupor:sx,cups:Sd,curarr:gm,curarrm:ox,curlyeqprec:ax,curlyeqsucc:lx,curlyvee:Td,curlywedge:ux,curren:mm,curvearrowleft:cx,curvearrowright:rp,cuvee:Ad,cuwed:hx,cwconint:dx,cwint:fx,cylcty:sp,dagger:op,Dagger:ap,daleth:lp,darr:px,Darr:gx,dArr:yc,dash:Rd,Dashv:up,dashv:mx,dbkarow:gS,dblac:mS,Dcaron:jo,dcaron:yx,Dcy:yS,dcy:vx,ddagger:_x,ddarr:bx,DD:vS,dd:_S,DDotrahd:vc,ddotseq:cp,deg:ym,Del:hp,Delta:Nu,delta:bS,demptyv:xS,dfisht:kd,Dfr:xx,dfr:wx,dHar:Ex,dharl:vm,dharr:Dd,DiacriticalAcute:qy,DiacriticalDot:Vy,DiacriticalDoubleAcute:Hy,DiacriticalGrave:dp,DiacriticalTilde:Cx,diam:Sx,diamond:_m,Diamond:wS,diamondsuit:fp,diams:Tx,die:Ax,DifferentialD:Wy,digamma:Rx,disin:kx,div:Dx,divide:pp,divideontimes:gp,divonx:Xy,DJcy:Lx,djcy:Mx,dlcorn:Ix,dlcrop:Yy,dollar:Ox,Dopf:Px,dopf:Ld,Dot:Fx,dot:bm,DotDot:ES,doteq:CS,doteqdot:Ur,DotEqual:Zy,dotminus:mp,dotplus:wl,dotsquare:xm,doublebarwedge:Ky,DoubleContourIntegral:Nx,DoubleDot:$x,DoubleDownArrow:Bx,DoubleLeftArrow:jx,DoubleLeftRightArrow:zx,DoubleLeftTee:Jy,DoubleLongLeftArrow:Gx,DoubleLongLeftRightArrow:ir,DoubleLongRightArrow:Ux,DoubleRightArrow:Md,DoubleRightTee:wm,DoubleUpArrow:SS,DoubleUpDownArrow:is,DoubleVerticalBar:TS,DownArrowBar:Em,downarrow:g,DownArrow:_,Downarrow:S,DownArrowUpArrow:E,DownBreve:T,downdownarrows:P,downharpoonleft:j,downharpoonright:U,DownLeftRightVector:X,DownLeftTeeVector:Y,DownLeftVectorBar:ce,DownLeftVector:he,DownRightTeeVector:we,DownRightVectorBar:be,DownRightVector:Fe,DownTeeArrow:$e,DownTee:Oe,drbkarow:Ue,drcorn:et,drcrop:Ze,Dscr:gt,dscr:ft,DScy:mt,dscy:di,dsol:Dt,Dstrok:Vi,dstrok:ai,dtdot:gn,dtri:Un,dtrif:mn,duarr:tn,duhar:yn,dwangle:Pi,DZcy:qn,dzcy:Ai,dzigrarr:an,Eacute:Bi,eacute:Dn,easter:wo,Ecaron:Vn,ecaron:io,Ecirc:no,ecirc:Br,ecir:Eo,ecolon:tl,Ecy:Gs,ecy:El,eDDot:Cm,Edot:qx,edot:fh,eDot:ca,ee:_c,efDot:AS,Efr:Id,efr:Qy,eg:yp,Egrave:Sm,egrave:vp,egs:ev,egsdot:Vx,el:tv,Element:Hx,elinters:Wx,ell:Xx,els:J6,elsdot:Q6,Emacr:e8,emacr:t8,empty:i8,emptyset:n8,EmptySmallSquare:r8,emptyv:s8,EmptyVerySmallSquare:o8,emsp13:a8,emsp14:l8,emsp:u8,ENG:c8,eng:h8,ensp:d8,Eogon:f8,eogon:p8,Eopf:g8,eopf:m8,epar:y8,eparsl:v8,eplus:_8,epsi:b8,Epsilon:x8,epsilon:w8,epsiv:E8,eqcirc:C8,eqcolon:S8,eqsim:T8,eqslantgtr:A8,eqslantless:R8,Equal:k8,equals:D8,EqualTilde:L8,equest:M8,Equilibrium:I8,equiv:O8,equivDD:P8,eqvparsl:F8,erarr:N8,erDot:$8,escr:B8,Escr:j8,esdot:z8,Esim:G8,esim:U8,Eta:q8,eta:V8,ETH:H8,eth:W8,Euml:X8,euml:Y8,euro:Z8,excl:K8,exist:J8,Exists:Q8,expectation:eB,exponentiale:tB,ExponentialE:iB,fallingdotseq:nB,Fcy:rB,fcy:sB,female:oB,ffilig:aB,fflig:lB,ffllig:uB,Ffr:cB,ffr:hB,filig:dB,FilledSmallSquare:fB,FilledVerySmallSquare:pB,fjlig:gB,flat:mB,fllig:yB,fltns:vB,fnof:_B,Fopf:bB,fopf:xB,forall:wB,ForAll:EB,fork:CB,forkv:SB,Fouriertrf:TB,fpartint:AB,frac12:RB,frac13:kB,frac14:DB,frac15:LB,frac16:MB,frac18:IB,frac23:OB,frac25:PB,frac34:FB,frac35:NB,frac38:$B,frac45:BB,frac56:jB,frac58:zB,frac78:GB,frasl:UB,frown:qB,fscr:VB,Fscr:HB,gacute:WB,Gamma:XB,gamma:YB,Gammad:ZB,gammad:KB,gap:JB,Gbreve:QB,gbreve:ej,Gcedil:tj,Gcirc:ij,gcirc:nj,Gcy:rj,gcy:sj,Gdot:oj,gdot:aj,ge:lj,gE:uj,gEl:cj,gel:hj,geq:dj,geqq:fj,geqslant:pj,gescc:gj,ges:mj,gesdot:yj,gesdoto:vj,gesdotol:_j,gesl:bj,gesles:xj,Gfr:wj,gfr:Ej,gg:Cj,Gg:Sj,ggg:Tj,gimel:Aj,GJcy:Rj,gjcy:kj,gla:Dj,gl:Lj,glE:Mj,glj:Ij,gnap:Oj,gnapprox:Pj,gne:Fj,gnE:Nj,gneq:$j,gneqq:Bj,gnsim:jj,Gopf:zj,gopf:Gj,grave:Uj,GreaterEqual:qj,GreaterEqualLess:Vj,GreaterFullEqual:Hj,GreaterGreater:Wj,GreaterLess:Xj,GreaterSlantEqual:Yj,GreaterTilde:Zj,Gscr:Kj,gscr:Jj,gsim:Qj,gsime:ez,gsiml:tz,gtcc:iz,gtcir:nz,gt:rz,GT:sz,Gt:oz,gtdot:az,gtlPar:lz,gtquest:uz,gtrapprox:cz,gtrarr:hz,gtrdot:dz,gtreqless:fz,gtreqqless:pz,gtrless:gz,gtrsim:mz,gvertneqq:yz,gvnE:vz,Hacek:_z,hairsp:bz,half:xz,hamilt:wz,HARDcy:Ez,hardcy:Cz,harrcir:Sz,harr:Tz,hArr:Az,harrw:Rz,Hat:kz,hbar:Dz,Hcirc:Lz,hcirc:Mz,hearts:Iz,heartsuit:Oz,hellip:Pz,hercon:Fz,hfr:Nz,Hfr:$z,HilbertSpace:Bz,hksearow:jz,hkswarow:zz,hoarr:Gz,homtht:Uz,hookleftarrow:qz,hookrightarrow:Vz,hopf:Hz,Hopf:Wz,horbar:Xz,HorizontalLine:Yz,hscr:Zz,Hscr:Kz,hslash:Jz,Hstrok:Qz,hstrok:e9,HumpDownHump:t9,HumpEqual:i9,hybull:n9,hyphen:r9,Iacute:s9,iacute:o9,ic:a9,Icirc:l9,icirc:u9,Icy:c9,icy:h9,Idot:d9,IEcy:f9,iecy:p9,iexcl:g9,iff:m9,ifr:y9,Ifr:v9,Igrave:_9,igrave:b9,ii:x9,iiiint:w9,iiint:E9,iinfin:C9,iiota:S9,IJlig:T9,ijlig:A9,Imacr:R9,imacr:k9,image:D9,ImaginaryI:L9,imagline:M9,imagpart:I9,imath:O9,Im:P9,imof:F9,imped:N9,Implies:$9,incare:B9,infin:j9,infintie:z9,inodot:G9,intcal:U9,int:q9,Int:V9,integers:H9,Integral:W9,intercal:X9,Intersection:Y9,intlarhk:Z9,intprod:K9,InvisibleComma:J9,InvisibleTimes:Q9,IOcy:eG,iocy:tG,Iogon:iG,iogon:nG,Iopf:rG,iopf:sG,Iota:oG,iota:aG,iprod:lG,iquest:uG,iscr:cG,Iscr:hG,isin:dG,isindot:fG,isinE:pG,isins:gG,isinsv:mG,isinv:yG,it:vG,Itilde:_G,itilde:bG,Iukcy:xG,iukcy:wG,Iuml:EG,iuml:CG,Jcirc:SG,jcirc:TG,Jcy:AG,jcy:RG,Jfr:kG,jfr:DG,jmath:LG,Jopf:MG,jopf:IG,Jscr:OG,jscr:PG,Jsercy:FG,jsercy:NG,Jukcy:$G,jukcy:BG,Kappa:jG,kappa:zG,kappav:GG,Kcedil:UG,kcedil:qG,Kcy:VG,kcy:HG,Kfr:WG,kfr:XG,kgreen:YG,KHcy:ZG,khcy:KG,KJcy:JG,kjcy:QG,Kopf:e7,kopf:t7,Kscr:i7,kscr:n7,lAarr:r7,Lacute:s7,lacute:o7,laemptyv:a7,lagran:l7,Lambda:u7,lambda:c7,lang:h7,Lang:d7,langd:f7,langle:p7,lap:g7,Laplacetrf:m7,laquo:y7,larrb:v7,larrbfs:_7,larr:b7,Larr:x7,lArr:w7,larrfs:E7,larrhk:C7,larrlp:S7,larrpl:T7,larrsim:A7,larrtl:R7,latail:k7,lAtail:D7,lat:L7,late:M7,lates:I7,lbarr:O7,lBarr:P7,lbbrk:F7,lbrace:N7,lbrack:$7,lbrke:B7,lbrksld:j7,lbrkslu:z7,Lcaron:G7,lcaron:U7,Lcedil:q7,lcedil:V7,lceil:H7,lcub:W7,Lcy:X7,lcy:Y7,ldca:Z7,ldquo:K7,ldquor:J7,ldrdhar:Q7,ldrushar:eU,ldsh:tU,le:iU,lE:nU,LeftAngleBracket:rU,LeftArrowBar:sU,leftarrow:oU,LeftArrow:aU,Leftarrow:lU,LeftArrowRightArrow:uU,leftarrowtail:cU,LeftCeiling:hU,LeftDoubleBracket:dU,LeftDownTeeVector:fU,LeftDownVectorBar:pU,LeftDownVector:gU,LeftFloor:mU,leftharpoondown:yU,leftharpoonup:vU,leftleftarrows:_U,leftrightarrow:bU,LeftRightArrow:xU,Leftrightarrow:wU,leftrightarrows:EU,leftrightharpoons:CU,leftrightsquigarrow:SU,LeftRightVector:TU,LeftTeeArrow:AU,LeftTee:RU,LeftTeeVector:kU,leftthreetimes:DU,LeftTriangleBar:LU,LeftTriangle:MU,LeftTriangleEqual:IU,LeftUpDownVector:OU,LeftUpTeeVector:PU,LeftUpVectorBar:FU,LeftUpVector:NU,LeftVectorBar:$U,LeftVector:BU,lEg:jU,leg:zU,leq:GU,leqq:UU,leqslant:qU,lescc:VU,les:HU,lesdot:WU,lesdoto:XU,lesdotor:YU,lesg:ZU,lesges:KU,lessapprox:JU,lessdot:QU,lesseqgtr:eq,lesseqqgtr:tq,LessEqualGreater:iq,LessFullEqual:nq,LessGreater:rq,lessgtr:sq,LessLess:oq,lesssim:aq,LessSlantEqual:lq,LessTilde:uq,lfisht:cq,lfloor:hq,Lfr:dq,lfr:fq,lg:pq,lgE:gq,lHar:mq,lhard:yq,lharu:vq,lharul:_q,lhblk:bq,LJcy:xq,ljcy:wq,llarr:Eq,ll:Cq,Ll:Sq,llcorner:Tq,Lleftarrow:Aq,llhard:Rq,lltri:kq,Lmidot:Dq,lmidot:Lq,lmoustache:Mq,lmoust:Iq,lnap:Oq,lnapprox:Pq,lne:Fq,lnE:Nq,lneq:$q,lneqq:Bq,lnsim:jq,loang:zq,loarr:Gq,lobrk:Uq,longleftarrow:qq,LongLeftArrow:Vq,Longleftarrow:Hq,longleftrightarrow:Wq,LongLeftRightArrow:Xq,Longleftrightarrow:Yq,longmapsto:Zq,longrightarrow:Kq,LongRightArrow:Jq,Longrightarrow:Qq,looparrowleft:eV,looparrowright:tV,lopar:iV,Lopf:nV,lopf:rV,loplus:sV,lotimes:oV,lowast:aV,lowbar:lV,LowerLeftArrow:uV,LowerRightArrow:cV,loz:hV,lozenge:dV,lozf:fV,lpar:pV,lparlt:gV,lrarr:mV,lrcorner:yV,lrhar:vV,lrhard:_V,lrm:bV,lrtri:xV,lsaquo:wV,lscr:EV,Lscr:CV,lsh:SV,Lsh:TV,lsim:AV,lsime:RV,lsimg:kV,lsqb:DV,lsquo:LV,lsquor:MV,Lstrok:IV,lstrok:OV,ltcc:PV,ltcir:FV,lt:NV,LT:$V,Lt:BV,ltdot:jV,lthree:zV,ltimes:GV,ltlarr:UV,ltquest:qV,ltri:VV,ltrie:HV,ltrif:WV,ltrPar:XV,lurdshar:YV,luruhar:ZV,lvertneqq:KV,lvnE:JV,macr:QV,male:eH,malt:tH,maltese:iH,map:nH,mapsto:rH,mapstodown:sH,mapstoleft:oH,mapstoup:aH,marker:lH,mcomma:uH,Mcy:cH,mcy:hH,mdash:dH,mDDot:fH,measuredangle:pH,MediumSpace:gH,Mellintrf:mH,Mfr:yH,mfr:vH,mho:_H,micro:bH,midast:xH,midcir:wH,mid:EH,middot:CH,minusb:SH,minus:TH,minusd:AH,minusdu:RH,MinusPlus:kH,mlcp:DH,mldr:LH,mnplus:MH,models:IH,Mopf:OH,mopf:PH,mp:FH,mscr:NH,Mscr:$H,mstpos:BH,Mu:jH,mu:zH,multimap:GH,mumap:UH,nabla:qH,Nacute:VH,nacute:HH,nang:WH,nap:XH,napE:YH,napid:ZH,napos:KH,napprox:JH,natural:QH,naturals:eW,natur:tW,nbsp:iW,nbump:nW,nbumpe:rW,ncap:sW,Ncaron:oW,ncaron:aW,Ncedil:lW,ncedil:uW,ncong:cW,ncongdot:hW,ncup:dW,Ncy:fW,ncy:pW,ndash:gW,nearhk:mW,nearr:yW,neArr:vW,nearrow:_W,ne:bW,nedot:xW,NegativeMediumSpace:wW,NegativeThickSpace:EW,NegativeThinSpace:CW,NegativeVeryThinSpace:SW,nequiv:TW,nesear:AW,nesim:RW,NestedGreaterGreater:kW,NestedLessLess:DW,NewLine:LW,nexist:MW,nexists:IW,Nfr:OW,nfr:PW,ngE:FW,nge:NW,ngeq:$W,ngeqq:BW,ngeqslant:jW,nges:zW,nGg:GW,ngsim:UW,nGt:qW,ngt:VW,ngtr:HW,nGtv:WW,nharr:XW,nhArr:YW,nhpar:ZW,ni:KW,nis:JW,nisd:QW,niv:eX,NJcy:tX,njcy:iX,nlarr:nX,nlArr:rX,nldr:sX,nlE:oX,nle:aX,nleftarrow:lX,nLeftarrow:uX,nleftrightarrow:cX,nLeftrightarrow:hX,nleq:dX,nleqq:fX,nleqslant:pX,nles:gX,nless:mX,nLl:yX,nlsim:vX,nLt:_X,nlt:bX,nltri:xX,nltrie:wX,nLtv:EX,nmid:CX,NoBreak:SX,NonBreakingSpace:TX,nopf:AX,Nopf:RX,Not:kX,not:DX,NotCongruent:LX,NotCupCap:MX,NotDoubleVerticalBar:IX,NotElement:OX,NotEqual:PX,NotEqualTilde:FX,NotExists:NX,NotGreater:$X,NotGreaterEqual:BX,NotGreaterFullEqual:jX,NotGreaterGreater:zX,NotGreaterLess:GX,NotGreaterSlantEqual:UX,NotGreaterTilde:qX,NotHumpDownHump:VX,NotHumpEqual:HX,notin:WX,notindot:XX,notinE:YX,notinva:ZX,notinvb:KX,notinvc:JX,NotLeftTriangleBar:QX,NotLeftTriangle:eY,NotLeftTriangleEqual:tY,NotLess:iY,NotLessEqual:nY,NotLessGreater:rY,NotLessLess:sY,NotLessSlantEqual:oY,NotLessTilde:aY,NotNestedGreaterGreater:lY,NotNestedLessLess:uY,notni:cY,notniva:hY,notnivb:dY,notnivc:fY,NotPrecedes:pY,NotPrecedesEqual:gY,NotPrecedesSlantEqual:mY,NotReverseElement:yY,NotRightTriangleBar:vY,NotRightTriangle:_Y,NotRightTriangleEqual:bY,NotSquareSubset:xY,NotSquareSubsetEqual:wY,NotSquareSuperset:EY,NotSquareSupersetEqual:CY,NotSubset:SY,NotSubsetEqual:TY,NotSucceeds:AY,NotSucceedsEqual:RY,NotSucceedsSlantEqual:kY,NotSucceedsTilde:DY,NotSuperset:LY,NotSupersetEqual:MY,NotTilde:IY,NotTildeEqual:OY,NotTildeFullEqual:PY,NotTildeTilde:FY,NotVerticalBar:NY,nparallel:$Y,npar:BY,nparsl:jY,npart:zY,npolint:GY,npr:UY,nprcue:qY,nprec:VY,npreceq:HY,npre:WY,nrarrc:XY,nrarr:YY,nrArr:ZY,nrarrw:KY,nrightarrow:JY,nRightarrow:QY,nrtri:eZ,nrtrie:tZ,nsc:iZ,nsccue:nZ,nsce:rZ,Nscr:sZ,nscr:oZ,nshortmid:aZ,nshortparallel:lZ,nsim:uZ,nsime:cZ,nsimeq:hZ,nsmid:dZ,nspar:fZ,nsqsube:pZ,nsqsupe:gZ,nsub:mZ,nsubE:yZ,nsube:vZ,nsubset:_Z,nsubseteq:bZ,nsubseteqq:xZ,nsucc:wZ,nsucceq:EZ,nsup:CZ,nsupE:SZ,nsupe:TZ,nsupset:AZ,nsupseteq:RZ,nsupseteqq:kZ,ntgl:DZ,Ntilde:LZ,ntilde:MZ,ntlg:IZ,ntriangleleft:OZ,ntrianglelefteq:PZ,ntriangleright:FZ,ntrianglerighteq:NZ,Nu:$Z,nu:BZ,num:jZ,numero:zZ,numsp:GZ,nvap:UZ,nvdash:qZ,nvDash:VZ,nVdash:HZ,nVDash:WZ,nvge:XZ,nvgt:YZ,nvHarr:ZZ,nvinfin:KZ,nvlArr:JZ,nvle:QZ,nvlt:eK,nvltrie:tK,nvrArr:iK,nvrtrie:nK,nvsim:rK,nwarhk:sK,nwarr:oK,nwArr:aK,nwarrow:lK,nwnear:uK,Oacute:cK,oacute:hK,oast:dK,Ocirc:fK,ocirc:pK,ocir:gK,Ocy:mK,ocy:yK,odash:vK,Odblac:_K,odblac:bK,odiv:xK,odot:wK,odsold:EK,OElig:CK,oelig:SK,ofcir:TK,Ofr:AK,ofr:RK,ogon:kK,Ograve:DK,ograve:LK,ogt:MK,ohbar:IK,ohm:OK,oint:PK,olarr:FK,olcir:NK,olcross:$K,oline:BK,olt:jK,Omacr:zK,omacr:GK,Omega:UK,omega:qK,Omicron:VK,omicron:HK,omid:WK,ominus:XK,Oopf:YK,oopf:ZK,opar:KK,OpenCurlyDoubleQuote:JK,OpenCurlyQuote:QK,operp:eJ,oplus:tJ,orarr:iJ,Or:nJ,or:rJ,ord:sJ,order:oJ,orderof:aJ,ordf:lJ,ordm:uJ,origof:cJ,oror:hJ,orslope:dJ,orv:fJ,oS:pJ,Oscr:gJ,oscr:mJ,Oslash:yJ,oslash:vJ,osol:_J,Otilde:bJ,otilde:xJ,otimesas:wJ,Otimes:EJ,otimes:CJ,Ouml:SJ,ouml:TJ,ovbar:AJ,OverBar:RJ,OverBrace:kJ,OverBracket:DJ,OverParenthesis:LJ,para:MJ,parallel:IJ,par:OJ,parsim:PJ,parsl:FJ,part:NJ,PartialD:$J,Pcy:BJ,pcy:jJ,percnt:zJ,period:GJ,permil:UJ,perp:qJ,pertenk:VJ,Pfr:HJ,pfr:WJ,Phi:XJ,phi:YJ,phiv:ZJ,phmmat:KJ,phone:JJ,Pi:QJ,pi:eQ,pitchfork:tQ,piv:iQ,planck:nQ,planckh:rQ,plankv:sQ,plusacir:oQ,plusb:aQ,pluscir:lQ,plus:uQ,plusdo:cQ,plusdu:hQ,pluse:dQ,PlusMinus:fQ,plusmn:pQ,plussim:gQ,plustwo:mQ,pm:yQ,Poincareplane:vQ,pointint:_Q,popf:bQ,Popf:xQ,pound:wQ,prap:EQ,Pr:CQ,pr:SQ,prcue:TQ,precapprox:AQ,prec:RQ,preccurlyeq:kQ,Precedes:DQ,PrecedesEqual:LQ,PrecedesSlantEqual:MQ,PrecedesTilde:IQ,preceq:OQ,precnapprox:PQ,precneqq:FQ,precnsim:NQ,pre:$Q,prE:BQ,precsim:jQ,prime:zQ,Prime:GQ,primes:UQ,prnap:qQ,prnE:VQ,prnsim:HQ,prod:WQ,Product:XQ,profalar:YQ,profline:ZQ,profsurf:KQ,prop:JQ,Proportional:QQ,Proportion:eee,propto:tee,prsim:iee,prurel:nee,Pscr:ree,pscr:see,Psi:oee,psi:aee,puncsp:lee,Qfr:uee,qfr:cee,qint:hee,qopf:dee,Qopf:fee,qprime:pee,Qscr:gee,qscr:mee,quaternions:yee,quatint:vee,quest:_ee,questeq:bee,quot:xee,QUOT:wee,rAarr:Eee,race:Cee,Racute:See,racute:Tee,radic:Aee,raemptyv:Ree,rang:kee,Rang:Dee,rangd:Lee,range:Mee,rangle:Iee,raquo:Oee,rarrap:Pee,rarrb:Fee,rarrbfs:Nee,rarrc:$ee,rarr:Bee,Rarr:jee,rArr:zee,rarrfs:Gee,rarrhk:Uee,rarrlp:qee,rarrpl:Vee,rarrsim:Hee,Rarrtl:Wee,rarrtl:Xee,rarrw:Yee,ratail:Zee,rAtail:Kee,ratio:Jee,rationals:Qee,rbarr:ete,rBarr:tte,RBarr:ite,rbbrk:nte,rbrace:rte,rbrack:ste,rbrke:ote,rbrksld:ate,rbrkslu:lte,Rcaron:ute,rcaron:cte,Rcedil:hte,rcedil:dte,rceil:fte,rcub:pte,Rcy:gte,rcy:mte,rdca:yte,rdldhar:vte,rdquo:_te,rdquor:bte,rdsh:xte,real:wte,realine:Ete,realpart:Cte,reals:Ste,Re:Tte,rect:Ate,reg:Rte,REG:kte,ReverseElement:Dte,ReverseEquilibrium:Lte,ReverseUpEquilibrium:Mte,rfisht:Ite,rfloor:Ote,rfr:Pte,Rfr:Fte,rHar:Nte,rhard:$te,rharu:Bte,rharul:jte,Rho:zte,rho:Gte,rhov:Ute,RightAngleBracket:qte,RightArrowBar:Vte,rightarrow:Hte,RightArrow:Wte,Rightarrow:Xte,RightArrowLeftArrow:Yte,rightarrowtail:Zte,RightCeiling:Kte,RightDoubleBracket:Jte,RightDownTeeVector:Qte,RightDownVectorBar:eie,RightDownVector:tie,RightFloor:iie,rightharpoondown:nie,rightharpoonup:rie,rightleftarrows:sie,rightleftharpoons:oie,rightrightarrows:aie,rightsquigarrow:lie,RightTeeArrow:uie,RightTee:cie,RightTeeVector:hie,rightthreetimes:die,RightTriangleBar:fie,RightTriangle:pie,RightTriangleEqual:gie,RightUpDownVector:mie,RightUpTeeVector:yie,RightUpVectorBar:vie,RightUpVector:_ie,RightVectorBar:bie,RightVector:xie,ring:wie,risingdotseq:Eie,rlarr:Cie,rlhar:Sie,rlm:Tie,rmoustache:Aie,rmoust:Rie,rnmid:kie,roang:Die,roarr:Lie,robrk:Mie,ropar:Iie,ropf:Oie,Ropf:Pie,roplus:Fie,rotimes:Nie,RoundImplies:$ie,rpar:Bie,rpargt:jie,rppolint:zie,rrarr:Gie,Rrightarrow:Uie,rsaquo:qie,rscr:Vie,Rscr:Hie,rsh:Wie,Rsh:Xie,rsqb:Yie,rsquo:Zie,rsquor:Kie,rthree:Jie,rtimes:Qie,rtri:ene,rtrie:tne,rtrif:ine,rtriltri:nne,RuleDelayed:rne,ruluhar:sne,rx:one,Sacute:ane,sacute:lne,sbquo:une,scap:cne,Scaron:hne,scaron:dne,Sc:fne,sc:pne,sccue:gne,sce:mne,scE:yne,Scedil:vne,scedil:_ne,Scirc:bne,scirc:xne,scnap:wne,scnE:Ene,scnsim:Cne,scpolint:Sne,scsim:Tne,Scy:Ane,scy:Rne,sdotb:kne,sdot:Dne,sdote:Lne,searhk:Mne,searr:Ine,seArr:One,searrow:Pne,sect:Fne,semi:Nne,seswar:$ne,setminus:Bne,setmn:jne,sext:zne,Sfr:Gne,sfr:Une,sfrown:qne,sharp:Vne,SHCHcy:Hne,shchcy:Wne,SHcy:Xne,shcy:Yne,ShortDownArrow:Zne,ShortLeftArrow:Kne,shortmid:Jne,shortparallel:Qne,ShortRightArrow:ere,ShortUpArrow:tre,shy:ire,Sigma:nre,sigma:rre,sigmaf:sre,sigmav:ore,sim:are,simdot:lre,sime:ure,simeq:cre,simg:hre,simgE:dre,siml:fre,simlE:pre,simne:gre,simplus:mre,simrarr:yre,slarr:vre,SmallCircle:_re,smallsetminus:bre,smashp:xre,smeparsl:wre,smid:Ere,smile:Cre,smt:Sre,smte:Tre,smtes:Are,SOFTcy:Rre,softcy:kre,solbar:Dre,solb:Lre,sol:Mre,Sopf:Ire,sopf:Ore,spades:Pre,spadesuit:Fre,spar:Nre,sqcap:$re,sqcaps:Bre,sqcup:jre,sqcups:zre,Sqrt:Gre,sqsub:Ure,sqsube:qre,sqsubset:Vre,sqsubseteq:Hre,sqsup:Wre,sqsupe:Xre,sqsupset:Yre,sqsupseteq:Zre,square:Kre,Square:Jre,SquareIntersection:Qre,SquareSubset:ese,SquareSubsetEqual:tse,SquareSuperset:ise,SquareSupersetEqual:nse,SquareUnion:rse,squarf:sse,squ:ose,squf:ase,srarr:lse,Sscr:use,sscr:cse,ssetmn:hse,ssmile:dse,sstarf:fse,Star:pse,star:gse,starf:mse,straightepsilon:yse,straightphi:vse,strns:_se,sub:bse,Sub:xse,subdot:wse,subE:Ese,sube:Cse,subedot:Sse,submult:Tse,subnE:Ase,subne:Rse,subplus:kse,subrarr:Dse,subset:Lse,Subset:Mse,subseteq:Ise,subseteqq:Ose,SubsetEqual:Pse,subsetneq:Fse,subsetneqq:Nse,subsim:$se,subsub:Bse,subsup:jse,succapprox:zse,succ:Gse,succcurlyeq:Use,Succeeds:qse,SucceedsEqual:Vse,SucceedsSlantEqual:Hse,SucceedsTilde:Wse,succeq:Xse,succnapprox:Yse,succneqq:Zse,succnsim:Kse,succsim:Jse,SuchThat:Qse,sum:eoe,Sum:toe,sung:ioe,sup1:noe,sup2:roe,sup3:soe,sup:ooe,Sup:aoe,supdot:loe,supdsub:uoe,supE:coe,supe:hoe,supedot:doe,Superset:foe,SupersetEqual:poe,suphsol:goe,suphsub:moe,suplarr:yoe,supmult:voe,supnE:_oe,supne:boe,supplus:xoe,supset:woe,Supset:Eoe,supseteq:Coe,supseteqq:Soe,supsetneq:Toe,supsetneqq:Aoe,supsim:Roe,supsub:koe,supsup:Doe,swarhk:Loe,swarr:Moe,swArr:Ioe,swarrow:Ooe,swnwar:Poe,szlig:Foe,Tab:Noe,target:$oe,Tau:Boe,tau:joe,tbrk:zoe,Tcaron:Goe,tcaron:Uoe,Tcedil:qoe,tcedil:Voe,Tcy:Hoe,tcy:Woe,tdot:Xoe,telrec:Yoe,Tfr:Zoe,tfr:Koe,there4:Joe,therefore:Qoe,Therefore:eae,Theta:tae,theta:iae,thetasym:nae,thetav:rae,thickapprox:sae,thicksim:oae,ThickSpace:aae,ThinSpace:lae,thinsp:uae,thkap:cae,thksim:hae,THORN:dae,thorn:fae,tilde:pae,Tilde:gae,TildeEqual:mae,TildeFullEqual:yae,TildeTilde:vae,timesbar:_ae,timesb:bae,times:xae,timesd:wae,tint:Eae,toea:Cae,topbot:Sae,topcir:Tae,top:Aae,Topf:Rae,topf:kae,topfork:Dae,tosa:Lae,tprime:Mae,trade:Iae,TRADE:Oae,triangle:Pae,triangledown:Fae,triangleleft:Nae,trianglelefteq:$ae,triangleq:Bae,triangleright:jae,trianglerighteq:zae,tridot:Gae,trie:Uae,triminus:qae,TripleDot:Vae,triplus:Hae,trisb:Wae,tritime:Xae,trpezium:Yae,Tscr:Zae,tscr:Kae,TScy:Jae,tscy:Qae,TSHcy:ele,tshcy:tle,Tstrok:ile,tstrok:nle,twixt:rle,twoheadleftarrow:sle,twoheadrightarrow:ole,Uacute:ale,uacute:lle,uarr:ule,Uarr:cle,uArr:hle,Uarrocir:dle,Ubrcy:fle,ubrcy:ple,Ubreve:gle,ubreve:mle,Ucirc:yle,ucirc:vle,Ucy:_le,ucy:ble,udarr:xle,Udblac:wle,udblac:Ele,udhar:Cle,ufisht:Sle,Ufr:Tle,ufr:Ale,Ugrave:Rle,ugrave:kle,uHar:Dle,uharl:Lle,uharr:Mle,uhblk:Ile,ulcorn:Ole,ulcorner:Ple,ulcrop:Fle,ultri:Nle,Umacr:$le,umacr:Ble,uml:jle,UnderBar:zle,UnderBrace:Gle,UnderBracket:Ule,UnderParenthesis:qle,Union:Vle,UnionPlus:Hle,Uogon:Wle,uogon:Xle,Uopf:Yle,uopf:Zle,UpArrowBar:Kle,uparrow:Jle,UpArrow:Qle,Uparrow:eue,UpArrowDownArrow:tue,updownarrow:iue,UpDownArrow:nue,Updownarrow:rue,UpEquilibrium:sue,upharpoonleft:oue,upharpoonright:aue,uplus:lue,UpperLeftArrow:uue,UpperRightArrow:cue,upsi:hue,Upsi:due,upsih:fue,Upsilon:pue,upsilon:gue,UpTeeArrow:mue,UpTee:yue,upuparrows:vue,urcorn:_ue,urcorner:bue,urcrop:xue,Uring:wue,uring:Eue,urtri:Cue,Uscr:Sue,uscr:Tue,utdot:Aue,Utilde:Rue,utilde:kue,utri:Due,utrif:Lue,uuarr:Mue,Uuml:Iue,uuml:Oue,uwangle:Pue,vangrt:Fue,varepsilon:Nue,varkappa:$ue,varnothing:Bue,varphi:jue,varpi:zue,varpropto:Gue,varr:Uue,vArr:que,varrho:Vue,varsigma:Hue,varsubsetneq:Wue,varsubsetneqq:Xue,varsupsetneq:Yue,varsupsetneqq:Zue,vartheta:Kue,vartriangleleft:Jue,vartriangleright:Que,vBar:ece,Vbar:tce,vBarv:ice,Vcy:nce,vcy:rce,vdash:sce,vDash:oce,Vdash:ace,VDash:lce,Vdashl:uce,veebar:cce,vee:hce,Vee:dce,veeeq:fce,vellip:pce,verbar:gce,Verbar:mce,vert:yce,Vert:vce,VerticalBar:_ce,VerticalLine:bce,VerticalSeparator:xce,VerticalTilde:wce,VeryThinSpace:Ece,Vfr:Cce,vfr:Sce,vltri:Tce,vnsub:Ace,vnsup:Rce,Vopf:kce,vopf:Dce,vprop:Lce,vrtri:Mce,Vscr:Ice,vscr:Oce,vsubnE:Pce,vsubne:Fce,vsupnE:Nce,vsupne:$ce,Vvdash:Bce,vzigzag:jce,Wcirc:zce,wcirc:Gce,wedbar:Uce,wedge:qce,Wedge:Vce,wedgeq:Hce,weierp:Wce,Wfr:Xce,wfr:Yce,Wopf:Zce,wopf:Kce,wp:Jce,wr:Qce,wreath:ehe,Wscr:the,wscr:ihe,xcap:nhe,xcirc:rhe,xcup:she,xdtri:ohe,Xfr:ahe,xfr:lhe,xharr:uhe,xhArr:che,Xi:hhe,xi:dhe,xlarr:fhe,xlArr:phe,xmap:ghe,xnis:mhe,xodot:yhe,Xopf:vhe,xopf:_he,xoplus:bhe,xotime:xhe,xrarr:whe,xrArr:Ehe,Xscr:Che,xscr:She,xsqcup:The,xuplus:Ahe,xutri:Rhe,xvee:khe,xwedge:Dhe,Yacute:Lhe,yacute:Mhe,YAcy:Ihe,yacy:Ohe,Ycirc:Phe,ycirc:Fhe,Ycy:Nhe,ycy:$he,yen:Bhe,Yfr:jhe,yfr:zhe,YIcy:Ghe,yicy:Uhe,Yopf:qhe,yopf:Vhe,Yscr:Hhe,yscr:Whe,YUcy:Xhe,yucy:Yhe,yuml:Zhe,Yuml:Khe,Zacute:Jhe,zacute:Qhe,Zcaron:ede,zcaron:tde,Zcy:ide,zcy:nde,Zdot:rde,zdot:sde,zeetrf:ode,ZeroWidthSpace:ade,Zeta:lde,zeta:ude,zfr:cde,Zfr:hde,ZHcy:dde,zhcy:fde,zigrarr:pde,zopf:gde,Zopf:mde,Zscr:yde,zscr:vde,zwj:_de,zwnj:bde,default:XOe}),xde="Á",wde="á",Ede="Â",Cde="â",Sde="´",Tde="Æ",Ade="æ",Rde="À",kde="à",Dde="&",Lde="&",Mde="Å",Ide="å",Ode="Ã",Pde="ã",Fde="Ä",Nde="ä",$de="¦",Bde="Ç",jde="ç",zde="¸",Gde="¢",Ude="©",qde="©",Vde="¤",Hde="°",Wde="÷",Xde="É",Yde="é",Zde="Ê",Kde="ê",Jde="È",Qde="è",efe="Ð",tfe="ð",ife="Ë",nfe="ë",rfe="½",sfe="¼",ofe="¾",afe=">",lfe=">",ufe="Í",cfe="í",hfe="Î",dfe="î",ffe="¡",pfe="Ì",gfe="ì",mfe="¿",yfe="Ï",vfe="ï",_fe="«",bfe="<",xfe="<",wfe="¯",Efe="µ",Cfe="·",Sfe=" ",Tfe="¬",Afe="Ñ",Rfe="ñ",kfe="Ó",Dfe="ó",Lfe="Ô",Mfe="ô",Ife="Ò",Ofe="ò",Pfe="ª",Ffe="º",Nfe="Ø",$fe="ø",Bfe="Õ",jfe="õ",zfe="Ö",Gfe="ö",Ufe="¶",qfe="±",Vfe="£",Hfe='"',Wfe='"',Xfe="»",Yfe="®",Zfe="®",Kfe="§",Jfe="­",Qfe="¹",epe="²",tpe="³",ipe="ß",npe="Þ",rpe="þ",spe="×",ope="Ú",ape="ú",lpe="Û",upe="û",cpe="Ù",hpe="ù",dpe="¨",fpe="Ü",ppe="ü",gpe="Ý",mpe="ý",ype="¥",vpe="ÿ",ZOe={Aacute:xde,aacute:wde,Acirc:Ede,acirc:Cde,acute:Sde,AElig:Tde,aelig:Ade,Agrave:Rde,agrave:kde,amp:Dde,AMP:Lde,Aring:Mde,aring:Ide,Atilde:Ode,atilde:Pde,Auml:Fde,auml:Nde,brvbar:$de,Ccedil:Bde,ccedil:jde,cedil:zde,cent:Gde,copy:Ude,COPY:qde,curren:Vde,deg:Hde,divide:Wde,Eacute:Xde,eacute:Yde,Ecirc:Zde,ecirc:Kde,Egrave:Jde,egrave:Qde,ETH:efe,eth:tfe,Euml:ife,euml:nfe,frac12:rfe,frac14:sfe,frac34:ofe,gt:afe,GT:lfe,Iacute:ufe,iacute:cfe,Icirc:hfe,icirc:dfe,iexcl:ffe,Igrave:pfe,igrave:gfe,iquest:mfe,Iuml:yfe,iuml:vfe,laquo:_fe,lt:bfe,LT:xfe,macr:wfe,micro:Efe,middot:Cfe,nbsp:Sfe,not:Tfe,Ntilde:Afe,ntilde:Rfe,Oacute:kfe,oacute:Dfe,Ocirc:Lfe,ocirc:Mfe,Ograve:Ife,ograve:Ofe,ordf:Pfe,ordm:Ffe,Oslash:Nfe,oslash:$fe,Otilde:Bfe,otilde:jfe,Ouml:zfe,ouml:Gfe,para:Ufe,plusmn:qfe,pound:Vfe,quot:Hfe,QUOT:Wfe,raquo:Xfe,reg:Yfe,REG:Zfe,sect:Kfe,shy:Jfe,sup1:Qfe,sup2:epe,sup3:tpe,szlig:ipe,THORN:npe,thorn:rpe,times:spe,Uacute:ope,uacute:ape,Ucirc:lpe,ucirc:upe,Ugrave:cpe,ugrave:hpe,uml:dpe,Uuml:fpe,uuml:ppe,Yacute:gpe,yacute:mpe,yen:ype,yuml:vpe},KOe=Object.freeze({__proto__:null,Aacute:xde,aacute:wde,Acirc:Ede,acirc:Cde,acute:Sde,AElig:Tde,aelig:Ade,Agrave:Rde,agrave:kde,amp:Dde,AMP:Lde,Aring:Mde,aring:Ide,Atilde:Ode,atilde:Pde,Auml:Fde,auml:Nde,brvbar:$de,Ccedil:Bde,ccedil:jde,cedil:zde,cent:Gde,copy:Ude,COPY:qde,curren:Vde,deg:Hde,divide:Wde,Eacute:Xde,eacute:Yde,Ecirc:Zde,ecirc:Kde,Egrave:Jde,egrave:Qde,ETH:efe,eth:tfe,Euml:ife,euml:nfe,frac12:rfe,frac14:sfe,frac34:ofe,gt:afe,GT:lfe,Iacute:ufe,iacute:cfe,Icirc:hfe,icirc:dfe,iexcl:ffe,Igrave:pfe,igrave:gfe,iquest:mfe,Iuml:yfe,iuml:vfe,laquo:_fe,lt:bfe,LT:xfe,macr:wfe,micro:Efe,middot:Cfe,nbsp:Sfe,not:Tfe,Ntilde:Afe,ntilde:Rfe,Oacute:kfe,oacute:Dfe,Ocirc:Lfe,ocirc:Mfe,Ograve:Ife,ograve:Ofe,ordf:Pfe,ordm:Ffe,Oslash:Nfe,oslash:$fe,Otilde:Bfe,otilde:jfe,Ouml:zfe,ouml:Gfe,para:Ufe,plusmn:qfe,pound:Vfe,quot:Hfe,QUOT:Wfe,raquo:Xfe,reg:Yfe,REG:Zfe,sect:Kfe,shy:Jfe,sup1:Qfe,sup2:epe,sup3:tpe,szlig:ipe,THORN:npe,thorn:rpe,times:spe,Uacute:ope,uacute:ape,Ucirc:lpe,ucirc:upe,Ugrave:cpe,ugrave:hpe,uml:dpe,Uuml:fpe,uuml:ppe,Yacute:gpe,yacute:mpe,yen:ype,yuml:vpe,default:ZOe}),_pe="&",bpe="'",xpe=">",wpe="<",Epe='"',JOe={amp:_pe,apos:bpe,gt:xpe,lt:wpe,quot:Epe},QOe=Object.freeze({__proto__:null,amp:_pe,apos:bpe,gt:xpe,lt:wpe,quot:Epe,default:JOe}),ePe={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},tPe=Object.freeze({__proto__:null,default:ePe}),iPe=y(tPe),Cpe=m(function(H,ue){var Ee=f&&f.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(ue,"__esModule",{value:!0});var Le=Ee(iPe);function pt(ut){if(ut>=55296&&ut<=57343||ut>1114111)return"�";ut in Le.default&&(ut=Le.default[ut]);var fi="";return ut>65535&&(ut-=65536,fi+=String.fromCharCode(ut>>>10&1023|55296),ut=56320|ut&1023),fi+=String.fromCharCode(ut),fi}ue.default=pt});p(Cpe);var Spe=y(YOe),nPe=y(KOe),Tpe=y(QOe),Od=m(function(H,ue){var Ee=f&&f.__importDefault||function(Ln){return Ln&&Ln.__esModule?Ln:{default:Ln}};Object.defineProperty(ue,"__esModule",{value:!0});var Le=Ee(Spe),pt=Ee(nPe),ut=Ee(Tpe),fi=Ee(Cpe);ue.decodeXML=Pt(ut.default),ue.decodeHTMLStrict=Pt(Le.default);function Pt(Ln){var Mn=Object.keys(Ln).join("|"),nr=Jn(Ln);Mn+="|#[xX][\\da-fA-F]+|#\\d+";var rr=new RegExp("&(?:"+Mn+");","g");return function(Co){return String(Co).replace(rr,nr)}}var Ri=function(Ln,Mn){return Ln<Mn?1:-1};ue.decodeHTML=function(){for(var Ln=Object.keys(pt.default).sort(Ri),Mn=Object.keys(Le.default).sort(Ri),nr=0,rr=0;nr<Mn.length;nr++)Ln[rr]===Mn[nr]?(Mn[nr]+=";?",rr++):Mn[nr]+=";";var Co=new RegExp("&(?:"+Mn.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),Dm=Jn(Le.default);function oM(Lm){return Lm.substr(-1)!==";"&&(Lm+=";"),Dm(Lm)}return function(Lm){return String(Lm).replace(Co,oM)}}();function Jn(Ln){return function(nr){return nr.charAt(1)==="#"?nr.charAt(2)==="X"||nr.charAt(2)==="x"?fi.default(parseInt(nr.substr(3),16)):fi.default(parseInt(nr.substr(2),10)):Ln[nr.slice(1,-1)]}}});p(Od),Od.decodeXML,Od.decodeHTMLStrict,Od.decodeHTML;var Tm=m(function(H,ue){var Ee=f&&f.__importDefault||function(zo){return zo&&zo.__esModule?zo:{default:zo}};Object.defineProperty(ue,"__esModule",{value:!0});var Le=Ee(Tpe),pt=Jn(Le.default),ut=Ln(pt);ue.encodeXML=Dm(pt,ut);var fi=Ee(Spe),Pt=Jn(fi.default),Ri=Ln(Pt);ue.encodeHTML=Dm(Pt,Ri);function Jn(zo){return Object.keys(zo).sort().reduce(function(bp,ph){return bp[zo[ph]]="&"+ph+";",bp},{})}function Ln(zo){var bp=[],ph=[];return Object.keys(zo).forEach(function(Mm){return Mm.length===1?bp.push("\\"+Mm):ph.push(Mm)}),ph.unshift("["+bp.join("")+"]"),new RegExp(ph.join("|"),"g")}var Mn=/[^\0-\x7F]/g,nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function rr(zo){return"&#x"+zo.charCodeAt(0).toString(16).toUpperCase()+";"}function Co(zo,bp){var ph=zo.charCodeAt(0),Mm=zo.charCodeAt(1),kNe=(ph-55296)*1024+Mm-56320+65536;return"&#x"+kNe.toString(16).toUpperCase()+";"}function Dm(zo,bp){return function(ph){return ph.replace(bp,function(Mm){return zo[Mm]}).replace(nr,Co).replace(Mn,rr)}}var oM=Ln(pt);function Lm(zo){return zo.replace(oM,rr).replace(nr,Co).replace(Mn,rr)}ue.escape=Lm});p(Tm),Tm.encodeXML,Tm.encodeHTML,Tm.escape;var ha=m(function(H,ue){Object.defineProperty(ue,"__esModule",{value:!0});function Ee(Pt,Ri){return(!Ri||Ri<=0?Od.decodeXML:Od.decodeHTML)(Pt)}ue.decode=Ee;function Le(Pt,Ri){return(!Ri||Ri<=0?Od.decodeXML:Od.decodeHTMLStrict)(Pt)}ue.decodeStrict=Le;function pt(Pt,Ri){return(!Ri||Ri<=0?Tm.encodeXML:Tm.encodeHTML)(Pt)}ue.encode=pt;var ut=Tm;ue.encodeXML=ut.encodeXML,ue.encodeHTML=ut.encodeHTML,ue.escape=ut.escape,ue.encodeHTML4=ut.encodeHTML,ue.encodeHTML5=ut.encodeHTML;var fi=Od;ue.decodeXML=fi.decodeXML,ue.decodeHTML=fi.decodeHTML,ue.decodeHTMLStrict=fi.decodeHTMLStrict,ue.decodeHTML4=fi.decodeHTML,ue.decodeHTML5=fi.decodeHTML,ue.decodeHTML4Strict=fi.decodeHTMLStrict,ue.decodeHTML5Strict=fi.decodeHTMLStrict,ue.decodeXMLStrict=fi.decodeXML});p(ha),ha.decode,ha.decodeStrict,ha.encode,ha.encodeXML,ha.encodeHTML,ha.escape,ha.encodeHTML4,ha.encodeHTML5,ha.decodeXML;var Ape=ha.decodeHTML;ha.decodeHTMLStrict,ha.decodeHTML4,ha.decodeHTML5,ha.decodeHTML4Strict,ha.decodeHTML5Strict,ha.decodeXMLStrict;var rPe=92,Rpe="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",kpe="[A-Za-z][A-Za-z0-9-]*",sPe="[a-zA-Z_:][a-zA-Z0-9:._-]*",oPe="[^\"'=<>`\\x00-\\x20]+",aPe="'[^']*'",lPe='"[^"]*"',uPe="(?:"+oPe+"|"+aPe+"|"+lPe+")",cPe="(?:\\s*=\\s*"+uPe+")",hPe="(?:\\s+"+sPe+cPe+"?)",Dpe="<"+kpe+hPe+"*\\s*/?>",Lpe="</"+kpe+"\\s*[>]",dPe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",fPe="[<][?][\\s\\S]*?[?][>]",pPe="<![A-Z]+\\s+[^>]*>",gPe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",mPe="(?:"+Dpe+"|"+Lpe+"|"+dPe+"|"+fPe+"|"+pPe+"|"+gPe+")",yPe=new RegExp("^"+mPe),vPe=/[\\&]/,Mpe="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",_Pe=new RegExp("\\\\"+Mpe+"|"+Rpe,"gi"),bPe='[&<>"]',Ipe=new RegExp(bPe,"g"),xPe=function(H){return H.charCodeAt(0)===rPe?H.charAt(1):Ape(H)},Ope=function(H){return vPe.test(H)?H.replace(_Pe,xPe):H},wPe=function(H){try{return d(H)}catch{return H}},EPe=function(H){switch(H){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return H}},Ppe=function(H){return Ipe.test(H)?H.replace(Ipe,EPe):H};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var eM;function tM(H){return eM(H)}if(String.fromCodePoint)eM=function(H){try{return String.fromCodePoint(H)}catch(ue){if(ue instanceof RangeError)return"�";throw ue}};else{var CPe=String.fromCharCode,SPe=Math.floor;eM=function(){var H=16384,ue=[],Ee,Le,pt=-1,ut=arguments.length;if(!ut)return"";for(var fi="";++pt<ut;){var Pt=Number(arguments[pt]);if(!isFinite(Pt)||Pt<0||Pt>1114111||SPe(Pt)!==Pt)return"�";Pt<=65535?ue.push(Pt):(Pt-=65536,Ee=(Pt>>10)+55296,Le=Pt%1024+56320,ue.push(Ee,Le)),(pt+1===ut||ue.length>H)&&(fi+=CPe.apply(null,ue),ue.length=0)}return fi}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var H=function(){try{var Ee={},Le=Object.defineProperty,pt=Le(Ee,Ee,Ee)&&Le}catch{}return pt}(),ue=function(Ee){if(this==null)throw TypeError();var Le=String(this),pt=Ee?Number(Ee):0;if(pt!=pt&&(pt=0),pt<0||pt==1/0)throw RangeError();for(var ut="";pt;)pt%2==1&&(ut+=Le),pt>1&&(Le+=Le),pt>>=1;return ut};H?H(String.prototype,"repeat",{value:ue,configurable:!0,writable:!0}):String.prototype.repeat=ue}();var RS=wPe,iM=Ope,Fpe=10,nM=42,kS=95,TPe=96,Npe=91,APe=93,$pe=60,RPe=33,Bpe=92,kPe=38,jpe=40,rM=41,DPe=58,Am=39,Rm=34,zpe=Mpe,sM="\\\\"+zpe,LPe=Rpe,MPe=yPe,Gpe=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),IPe=new RegExp('^(?:"('+sM+`|[^"\\x00])*"|'(`+sM+"|[^'\\x00])*'|\\(("+sM+"|[^()\\x00])*\\))"),OPe=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,Upe=new RegExp("^"+zpe),PPe=new RegExp("^"+LPe,"i"),FPe=/`+/,NPe=/^`+/,$Pe=/\.\.\./g,BPe=/--+/g,jPe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,zPe=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,GPe=/^ *(?:\n *)?/,qpe=/^[ \t\n\x0b\x0c\x0d]/,Vpe=/^\s/,UPe=/ *$/,qPe=/^ */,Hpe=/^ *(?:\n|$)/,VPe=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,HPe=/^[^\n`\[\]\\!<&*_'"]+/m,Ma=function(H){var ue=new a("text");return ue._literal=H,ue},Wpe=function(H){return H.slice(1,H.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},WPe=function(H){var ue=H.exec(this.subject.slice(this.pos));return ue===null?null:(this.pos+=ue.index+ue[0].length,ue[0])},XPe=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},YPe=function(){return this.match(GPe),!0},ZPe=function(H){var ue=this.match(NPe);if(ue===null)return!1;for(var Ee=this.pos,Le,pt,ut;(Le=this.match(FPe))!==null;)if(Le===ue)return pt=new a("code"),ut=this.subject.slice(Ee,this.pos-ue.length).replace(/\n/gm," "),ut.length>0&&ut.match(/[^ ]/)!==null&&ut[0]==" "&&ut[ut.length-1]==" "?pt._literal=ut.slice(1,ut.length-1):pt._literal=ut,H.appendChild(pt),!0;return this.pos=Ee,H.appendChild(Ma(ue)),!0},KPe=function(H){var ue=this.subject,Ee;return this.pos+=1,this.peek()===Fpe?(this.pos+=1,Ee=new a("linebreak"),H.appendChild(Ee)):Upe.test(ue.charAt(this.pos))?(H.appendChild(Ma(ue.charAt(this.pos))),this.pos+=1):H.appendChild(Ma("\\")),!0},JPe=function(H){var ue,Ee,Le;return(ue=this.match(jPe))?(Ee=ue.slice(1,ue.length-1),Le=new a("link"),Le._destination=RS("mailto:"+Ee),Le._title="",Le.appendChild(Ma(Ee)),H.appendChild(Le),!0):(ue=this.match(zPe))?(Ee=ue.slice(1,ue.length-1),Le=new a("link"),Le._destination=RS(Ee),Le._title="",Le.appendChild(Ma(Ee)),H.appendChild(Le),!0):!1},QPe=function(H){var ue=this.match(MPe);if(ue===null)return!1;var Ee=new a("html_inline");return Ee._literal=ue,H.appendChild(Ee),!0},eFe=function(H){var ue=0,Ee,Le,pt,ut=this.pos,fi,Pt,Ri,Jn,Ln,Mn,nr,rr;if(H===Am||H===Rm)ue++,this.pos++;else for(;this.peek()===H;)ue++,this.pos++;return ue===0?null:(Ee=ut===0?`
`:this.subject.charAt(ut-1),pt=this.peek(),pt===-1?Le=`
`:Le=tM(pt),Ln=Vpe.test(Le),Mn=Gpe.test(Le),nr=Vpe.test(Ee),rr=Gpe.test(Ee),fi=!Ln&&(!Mn||nr||rr),Pt=!nr&&(!rr||Ln||Mn),H===kS?(Ri=fi&&(!Pt||rr),Jn=Pt&&(!fi||Mn)):H===Am||H===Rm?(Ri=fi&&!Pt,Jn=Pt):(Ri=fi,Jn=Pt),this.pos=ut,{numdelims:ue,can_open:Ri,can_close:Jn})},tFe=function(H,ue){var Ee=this.scanDelims(H);if(!Ee)return!1;var Le=Ee.numdelims,pt=this.pos,ut;this.pos+=Le,H===Am?ut="’":H===Rm?ut="“":ut=this.subject.slice(pt,this.pos);var fi=Ma(ut);return ue.appendChild(fi),(Ee.can_open||Ee.can_close)&&(this.options.smart||H!==Am&&H!==Rm)&&(this.delimiters={cc:H,numdelims:Le,origdelims:Le,node:fi,previous:this.delimiters,next:null,can_open:Ee.can_open,can_close:Ee.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},iFe=function(H){H.previous!==null&&(H.previous.next=H.next),H.next===null?this.delimiters=H.previous:H.next.previous=H.previous},nFe=function(H,ue){H.next!==ue&&(H.next=ue,ue.previous=H)},rFe=function(H){for(var ue,Ee,Le,pt,ut,fi,Pt,Ri,Jn,Ln,Mn=[[],[],[]],nr=!1,rr=0;rr<3;rr++)Mn[rr][kS]=H,Mn[rr][nM]=H,Mn[rr][Am]=H,Mn[rr][Rm]=H;for(Ee=this.delimiters;Ee!==null&&Ee.previous!==H;)Ee=Ee.previous;for(;Ee!==null;){var Co=Ee.cc;if(!Ee.can_close)Ee=Ee.next;else{for(ue=Ee.previous,Ln=!1;ue!==null&&ue!==H&&ue!==Mn[Ee.origdelims%3][Co];){if(nr=(Ee.can_open||ue.can_close)&&Ee.origdelims%3!==0&&(ue.origdelims+Ee.origdelims)%3===0,ue.cc===Ee.cc&&ue.can_open&&!nr){Ln=!0;break}ue=ue.previous}if(Le=Ee,Co===nM||Co===kS)if(!Ln)Ee=Ee.next;else{Pt=Ee.numdelims>=2&&ue.numdelims>=2?2:1,pt=ue.node,ut=Ee.node,ue.numdelims-=Pt,Ee.numdelims-=Pt,pt._literal=pt._literal.slice(0,pt._literal.length-Pt),ut._literal=ut._literal.slice(0,ut._literal.length-Pt);var Dm=new a(Pt===1?"emph":"strong");for(Ri=pt._next;Ri&&Ri!==ut;)Jn=Ri._next,Ri.unlink(),Dm.appendChild(Ri),Ri=Jn;pt.insertAfter(Dm),nFe(ue,Ee),ue.numdelims===0&&(pt.unlink(),this.removeDelimiter(ue)),Ee.numdelims===0&&(ut.unlink(),fi=Ee.next,this.removeDelimiter(Ee),Ee=fi)}else Co===Am?(Ee.node._literal="’",Ln&&(ue.node._literal="‘"),Ee=Ee.next):Co===Rm&&(Ee.node._literal="”",Ln&&(ue.node.literal="“"),Ee=Ee.next);Ln||(Mn[Le.origdelims%3][Co]=Le.previous,Le.can_open||this.removeDelimiter(Le))}}for(;this.delimiters!==null&&this.delimiters!==H;)this.removeDelimiter(this.delimiters)},sFe=function(){var H=this.match(IPe);return H===null?null:iM(H.substr(1,H.length-2))},oFe=function(){var H=this.match(OPe);if(H===null){if(this.peek()===$pe)return null;for(var ue=this.pos,Ee=0,Le;(Le=this.peek())!==-1;)if(Le===Bpe&&Upe.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Le===jpe)this.pos+=1,Ee+=1;else if(Le===rM){if(Ee<1)break;this.pos+=1,Ee-=1}else{if(qpe.exec(tM(Le))!==null)break;this.pos+=1}return this.pos===ue&&Le!==rM||Ee!==0?null:(H=this.subject.substr(ue,this.pos-ue),RS(iM(H)))}else return RS(iM(H.substr(1,H.length-2)))},aFe=function(){var H=this.match(VPe);return H===null||H.length>1001?0:H.length},lFe=function(H){var ue=this.pos;this.pos+=1;var Ee=Ma("[");return H.appendChild(Ee),this.addBracket(Ee,ue,!1),!0},uFe=function(H){var ue=this.pos;if(this.pos+=1,this.peek()===Npe){this.pos+=1;var Ee=Ma("![");H.appendChild(Ee),this.addBracket(Ee,ue+1,!0)}else H.appendChild(Ma("!"));return!0},cFe=function(H){var ue,Ee,Le,pt,ut=!1,fi,Pt;if(this.pos+=1,ue=this.pos,Pt=this.brackets,Pt===null)return H.appendChild(Ma("]")),!0;if(!Pt.active)return H.appendChild(Ma("]")),this.removeBracket(),!0;Ee=Pt.image;var Ri=this.pos;if(this.peek()===jpe&&(this.pos++,this.spnl()&&(Le=this.parseLinkDestination())!==null&&this.spnl()&&(qpe.test(this.subject.charAt(this.pos-1))&&(pt=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===rM?(this.pos+=1,ut=!0):this.pos=Ri),!ut){var Jn=this.pos,Ln=this.parseLinkLabel();if(Ln>2?fi=this.subject.slice(Jn,Jn+Ln):Pt.bracketAfter||(fi=this.subject.slice(Pt.index,ue)),Ln===0&&(this.pos=Ri),fi){var Mn=this.refmap[Wpe(fi)];Mn&&(Le=Mn.destination,pt=Mn.title,ut=!0)}}if(ut){var nr=new a(Ee?"image":"link");nr._destination=Le,nr._title=pt||"";var rr,Co;for(rr=Pt.node._next;rr;)Co=rr._next,rr.unlink(),nr.appendChild(rr),rr=Co;if(H.appendChild(nr),this.processEmphasis(Pt.previousDelimiter),this.removeBracket(),Pt.node.unlink(),!Ee)for(Pt=this.brackets;Pt!==null;)Pt.image||(Pt.active=!1),Pt=Pt.previous;return!0}else return this.removeBracket(),this.pos=ue,H.appendChild(Ma("]")),!0},hFe=function(H,ue,Ee){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:H,previous:this.brackets,previousDelimiter:this.delimiters,index:ue,image:Ee,active:!0}},dFe=function(){this.brackets=this.brackets.previous},fFe=function(H){var ue;return(ue=this.match(PPe))?(H.appendChild(Ma(Ape(ue))),!0):!1},pFe=function(H){var ue;return(ue=this.match(HPe))?(this.options.smart?H.appendChild(Ma(ue.replace($Pe,"…").replace(BPe,function(Ee){var Le=0,pt=0;return Ee.length%3===0?pt=Ee.length/3:Ee.length%2===0?Le=Ee.length/2:Ee.length%3===2?(Le=1,pt=(Ee.length-2)/3):(Le=2,pt=(Ee.length-4)/3),"—".repeat(pt)+"–".repeat(Le)}))):H.appendChild(Ma(ue)),!0):!1},gFe=function(H){this.pos+=1;var ue=H._lastChild;if(ue&&ue.type==="text"&&ue._literal[ue._literal.length-1]===" "){var Ee=ue._literal[ue._literal.length-2]===" ";ue._literal=ue._literal.replace(UPe,""),H.appendChild(new a(Ee?"linebreak":"softbreak"))}else H.appendChild(new a("softbreak"));return this.match(qPe),!0},mFe=function(H,ue){this.subject=H,this.pos=0;var Ee,Le,pt,ut,fi=this.pos;if(ut=this.parseLinkLabel(),ut===0)return 0;if(Ee=this.subject.substr(0,ut),this.peek()===DPe)this.pos++;else return this.pos=fi,0;if(this.spnl(),Le=this.parseLinkDestination(),Le===null)return this.pos=fi,0;var Pt=this.pos;this.spnl(),this.pos!==Pt&&(pt=this.parseLinkTitle()),pt===null&&(pt="",this.pos=Pt);var Ri=!0;if(this.match(Hpe)===null&&(pt===""?Ri=!1:(pt="",this.pos=Pt,Ri=this.match(Hpe)!==null)),!Ri)return this.pos=fi,0;var Jn=Wpe(Ee);return Jn===""?(this.pos=fi,0):(ue[Jn]||(ue[Jn]={destination:Le,title:pt}),this.pos-fi)},yFe=function(H){var ue=!1,Ee=this.peek();if(Ee===-1)return!1;switch(Ee){case Fpe:ue=this.parseNewline(H);break;case Bpe:ue=this.parseBackslash(H);break;case TPe:ue=this.parseBackticks(H);break;case nM:case kS:ue=this.handleDelim(Ee,H);break;case Am:case Rm:ue=this.options.smart&&this.handleDelim(Ee,H);break;case Npe:ue=this.parseOpenBracket(H);break;case RPe:ue=this.parseBang(H);break;case APe:ue=this.parseCloseBracket(H);break;case $pe:ue=this.parseAutolink(H)||this.parseHtmlTag(H);break;case kPe:ue=this.parseEntity(H);break;default:ue=this.parseString(H);break}return ue||(this.pos+=1,H.appendChild(Ma(tM(Ee)))),!0},vFe=function(H){for(this.subject=H._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(H););H._string_content=null,this.processEmphasis(null)};function _Fe(H){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:WPe,peek:XPe,spnl:YPe,parseBackticks:ZPe,parseBackslash:KPe,parseAutolink:JPe,parseHtmlTag:QPe,scanDelims:eFe,handleDelim:tFe,parseLinkTitle:sFe,parseLinkDestination:oFe,parseLinkLabel:aFe,parseOpenBracket:lFe,parseBang:uFe,parseCloseBracket:cFe,addBracket:hFe,removeBracket:dFe,parseEntity:fFe,parseString:pFe,parseNewline:gFe,parseReference:mFe,parseInline:yFe,processEmphasis:rFe,removeDelimiter:iFe,options:H||{},parse:vFe}}var DS=4,Xpe=9,bFe=10,Ype=62,xFe=60,Zpe=32,Kpe=91,wFe=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Dpe+"|"+Lpe+")\\s*$","i")],EFe=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],CFe=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,SFe=/^[#`~*+_=<>0-9-]/,Jpe=/[^ \t\f\v\r\n]/,TFe=/^[*+-]/,AFe=/^(\d{1,9})([.)])/,RFe=/^#{1,6}(?:[ \t]+|$)/,kFe=/^`{3,}(?!.*`)|^~{3,}/,DFe=/^(?:`{3,}|~{3,})(?= *$)/,LFe=/^(?:=+|-+)[ \t]*$/,MFe=/\r\n|\n|\r/,IFe=function(H){return!Jpe.test(H)},Yx=function(H){return H===Zpe||H===Xpe},$u=function(H,ue){return ue<H.length?H.charCodeAt(ue):-1},Qpe=function(H){for(;H;){if(H._lastLineBlank)return!0;var ue=H.type;if(!H._lastLineChecked&&(ue==="list"||ue==="item"))H._lastLineChecked=!0,H=H._lastChild;else{H._lastLineChecked=!0;break}}return!1},OFe=function(){if(this.partiallyConsumedTab){this.offset+=1;var H=4-this.column%4;this.tip._string_content+=" ".repeat(H)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},PFe=function(H,ue){for(;!this.blocks[this.tip.type].canContain(H);)this.finalize(this.tip,this.lineNumber-1);var Ee=ue+1,Le=new a(H,[[this.lineNumber,Ee],[0,0]]);return Le._string_content="",this.tip.appendChild(Le),this.tip=Le,Le},FFe=function(H,ue){var Ee=H.currentLine.slice(H.nextNonspace),Le,pt,ut,fi,Pt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:H.indent};if(H.indent>=4)return null;if(Le=Ee.match(TFe))Pt.type="bullet",Pt.bulletChar=Le[0][0];else if((Le=Ee.match(AFe))&&(ue.type!=="paragraph"||Le[1]==="1"))Pt.type="ordered",Pt.start=parseInt(Le[1]),Pt.delimiter=Le[2];else return null;if(pt=$u(H.currentLine,H.nextNonspace+Le[0].length),!(pt===-1||pt===Xpe||pt===Zpe)||ue.type==="paragraph"&&!H.currentLine.slice(H.nextNonspace+Le[0].length).match(Jpe))return null;H.advanceNextNonspace(),H.advanceOffset(Le[0].length,!0),ut=H.column,fi=H.offset;do H.advanceOffset(1,!0),pt=$u(H.currentLine,H.offset);while(H.column-ut<5&&Yx(pt));var Ri=$u(H.currentLine,H.offset)===-1,Jn=H.column-ut;return Jn>=5||Jn<1||Ri?(Pt.padding=Le[0].length+1,H.column=ut,H.offset=fi,Yx($u(H.currentLine,H.offset))&&H.advanceOffset(1,!0)):Pt.padding=Le[0].length+Jn,Pt},NFe=function(H,ue){return H.type===ue.type&&H.delimiter===ue.delimiter&&H.bulletChar===ue.bulletChar},$Fe=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var H=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=H}this.allClosed=!0}},ege={document:{continue:function(){return 0},finalize:function(){},canContain:function(H){return H!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(H,ue){for(var Ee=ue._firstChild;Ee;){if(Qpe(Ee)&&Ee._next){ue._listData.tight=!1;break}for(var Le=Ee._firstChild;Le;){if(Qpe(Le)&&(Ee._next||Le._next)){ue._listData.tight=!1;break}Le=Le._next}Ee=Ee._next}},canContain:function(H){return H==="item"},acceptsLines:!1},block_quote:{continue:function(H){var ue=H.currentLine;if(!H.indented&&$u(ue,H.nextNonspace)===Ype)H.advanceNextNonspace(),H.advanceOffset(1,!1),Yx($u(ue,H.offset))&&H.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(H){return H!=="item"},acceptsLines:!1},item:{continue:function(H,ue){if(H.blank){if(ue._firstChild==null)return 1;H.advanceNextNonspace()}else if(H.indent>=ue._listData.markerOffset+ue._listData.padding)H.advanceOffset(ue._listData.markerOffset+ue._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(H){return H!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(H,ue){var Ee=H.currentLine,Le=H.indent;if(ue._isFenced){var pt=Le<=3&&Ee.charAt(H.nextNonspace)===ue._fenceChar&&Ee.slice(H.nextNonspace).match(DFe);if(pt&&pt[0].length>=ue._fenceLength)return H.lastLineLength=H.offset+Le+pt[0].length,H.finalize(ue,H.lineNumber),2;for(var ut=ue._fenceOffset;ut>0&&Yx($u(Ee,H.offset));)H.advanceOffset(1,!0),ut--}else if(Le>=DS)H.advanceOffset(DS,!0);else if(H.blank)H.advanceNextNonspace();else return 1;return 0},finalize:function(H,ue){if(ue._isFenced){var Ee=ue._string_content,Le=Ee.indexOf(`
`),pt=Ee.slice(0,Le),ut=Ee.slice(Le+1);ue.info=Ope(pt.trim()),ue._literal=ut}else ue._literal=ue._string_content.replace(/(\n *)+$/,`
`);ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(H,ue){return H.blank&&(ue._htmlBlockType===6||ue._htmlBlockType===7)?1:0},finalize:function(H,ue){ue._literal=ue._string_content.replace(/(\n *)+$/,""),ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(H){return H.blank?1:0},finalize:function(H,ue){for(var Ee,Le=!1;$u(ue._string_content,0)===Kpe&&(Ee=H.inlineParser.parseReference(ue._string_content,H.refmap));)ue._string_content=ue._string_content.slice(Ee),Le=!0;Le&&IFe(ue._string_content)&&ue.unlink()},canContain:function(){return!1},acceptsLines:!0}},BFe=[function(H){return!H.indented&&$u(H.currentLine,H.nextNonspace)===Ype?(H.advanceNextNonspace(),H.advanceOffset(1,!1),Yx($u(H.currentLine,H.offset))&&H.advanceOffset(1,!0),H.closeUnmatchedBlocks(),H.addChild("block_quote",H.nextNonspace),1):0},function(H){var ue;if(!H.indented&&(ue=H.currentLine.slice(H.nextNonspace).match(RFe))){H.advanceNextNonspace(),H.advanceOffset(ue[0].length,!1),H.closeUnmatchedBlocks();var Ee=H.addChild("heading",H.nextNonspace);return Ee.level=ue[0].trim().length,Ee._string_content=H.currentLine.slice(H.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),H.advanceOffset(H.currentLine.length-H.offset),2}else return 0},function(H){var ue;if(!H.indented&&(ue=H.currentLine.slice(H.nextNonspace).match(kFe))){var Ee=ue[0].length;H.closeUnmatchedBlocks();var Le=H.addChild("code_block",H.nextNonspace);return Le._isFenced=!0,Le._fenceLength=Ee,Le._fenceChar=ue[0][0],Le._fenceOffset=H.indent,H.advanceNextNonspace(),H.advanceOffset(Ee,!1),2}else return 0},function(H,ue){if(!H.indented&&$u(H.currentLine,H.nextNonspace)===xFe){var Ee=H.currentLine.slice(H.nextNonspace),Le;for(Le=1;Le<=7;Le++)if(wFe[Le].test(Ee)&&(Le<7||ue.type!=="paragraph")){H.closeUnmatchedBlocks();var pt=H.addChild("html_block",H.offset);return pt._htmlBlockType=Le,2}}return 0},function(H,ue){var Ee;if(!H.indented&&ue.type==="paragraph"&&(Ee=H.currentLine.slice(H.nextNonspace).match(LFe))){H.closeUnmatchedBlocks();for(var Le;$u(ue._string_content,0)===Kpe&&(Le=H.inlineParser.parseReference(ue._string_content,H.refmap));)ue._string_content=ue._string_content.slice(Le);if(ue._string_content.length>0){var pt=new a("heading",ue.sourcepos);return pt.level=Ee[0][0]==="="?1:2,pt._string_content=ue._string_content,ue.insertAfter(pt),ue.unlink(),H.tip=pt,H.advanceOffset(H.currentLine.length-H.offset,!1),2}else return 0}else return 0},function(H){return!H.indented&&CFe.test(H.currentLine.slice(H.nextNonspace))?(H.closeUnmatchedBlocks(),H.addChild("thematic_break",H.nextNonspace),H.advanceOffset(H.currentLine.length-H.offset,!1),2):0},function(H,ue){var Ee;return(!H.indented||ue.type==="list")&&(Ee=FFe(H,ue))?(H.closeUnmatchedBlocks(),(H.tip.type!=="list"||!NFe(ue._listData,Ee))&&(ue=H.addChild("list",H.nextNonspace),ue._listData=Ee),ue=H.addChild("item",H.nextNonspace),ue._listData=Ee,1):0},function(H){return H.indented&&H.tip.type!=="paragraph"&&!H.blank?(H.advanceOffset(DS,!0),H.closeUnmatchedBlocks(),H.addChild("code_block",H.offset),2):0}],jFe=function(H,ue){for(var Ee=this.currentLine,Le,pt,ut;H>0&&(ut=Ee[this.offset]);)ut==="	"?(Le=4-this.column%4,ue?(this.partiallyConsumedTab=Le>H,pt=Le>H?H:Le,this.column+=pt,this.offset+=this.partiallyConsumedTab?0:1,H-=pt):(this.partiallyConsumedTab=!1,this.column+=Le,this.offset+=1,H-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,H-=1)},zFe=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},GFe=function(){for(var H=this.currentLine,ue=this.offset,Ee=this.column,Le;(Le=H.charAt(ue))!=="";)if(Le===" ")ue++,Ee++;else if(Le==="	")ue++,Ee+=4-Ee%4;else break;this.blank=Le===`
`||Le==="\r"||Le==="",this.nextNonspace=ue,this.nextNonspaceColumn=Ee,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=DS},UFe=function(H){var ue=!0,Ee,Le=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,H.indexOf("\0")!==-1&&(H=H.replace(/\0/g,"�")),this.currentLine=H;for(var pt;(pt=Le._lastChild)&&pt._open;){switch(Le=pt,this.findNextNonspace(),this.blocks[Le.type].continue(this,Le)){case 0:break;case 1:ue=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ue){Le=Le._parent;break}}this.allClosed=Le===this.oldtip,this.lastMatchedContainer=Le;for(var ut=Le.type!=="paragraph"&&ege[Le.type].acceptsLines,fi=this.blockStarts,Pt=fi.length;!ut;){if(this.findNextNonspace(),!this.indented&&!SFe.test(H.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var Ri=0;Ri<Pt;){var Jn=fi[Ri](this,Le);if(Jn===1){Le=this.tip;break}else if(Jn===2){Le=this.tip,ut=!0;break}else Ri++}if(Ri===Pt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Le.lastChild&&(Le.lastChild._lastLineBlank=!0),Ee=Le.type;for(var Ln=this.blank&&!(Ee==="block_quote"||Ee==="code_block"&&Le._isFenced||Ee==="item"&&!Le._firstChild&&Le.sourcepos[0][0]===this.lineNumber),Mn=Le;Mn;)Mn._lastLineBlank=Ln,Mn=Mn._parent;this.blocks[Ee].acceptsLines?(this.addLine(),Ee==="html_block"&&Le._htmlBlockType>=1&&Le._htmlBlockType<=5&&EFe[Le._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=H.length,this.finalize(Le,this.lineNumber))):this.offset<H.length&&!this.blank&&(Le=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=H.length},qFe=function(H,ue){var Ee=H._parent;H._open=!1,H.sourcepos[1]=[ue,this.lastLineLength],this.blocks[H.type].finalize(this,H),this.tip=Ee},VFe=function(H){var ue,Ee,Le,pt=H.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Ee=pt.next();)ue=Ee.node,Le=ue.type,!Ee.entering&&(Le==="paragraph"||Le==="heading")&&this.inlineParser.parse(ue)},tge=function(){var H=new a("document",[[1,1],[0,0]]);return H},HFe=function(H){this.doc=new tge,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ue=H.split(MFe),Ee=ue.length;H.charCodeAt(H.length-1)===bFe&&(Ee-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Le=0;Le<Ee;Le++)this.incorporateLine(ue[Le]);for(;this.tip;)this.finalize(this.tip,Ee);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function WFe(H){return{doc:new tge,blocks:ege,blockStarts:BFe,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new _Fe(H),findNextNonspace:GFe,advanceOffset:jFe,advanceNextNonspace:zFe,addLine:OFe,addChild:PFe,incorporateLine:UFe,finalize:qFe,processInlines:VFe,closeUnmatchedBlocks:$Fe,parse:HFe,options:H||{}}}function _p(){}function XFe(H){var ue=H.walker(),Ee,Le;for(this.buffer="",this.lastOut=`
`;Ee=ue.next();)Le=Ee.node.type,this[Le]&&this[Le](Ee.node,Ee.entering);return this.buffer}function YFe(H){this.buffer+=H,this.lastOut=H}function ZFe(){this.lastOut!==`
`&&this.lit(`
`)}function KFe(H){this.lit(H)}function JFe(H){return H}_p.prototype.render=XFe,_p.prototype.out=KFe,_p.prototype.lit=YFe,_p.prototype.cr=ZFe,_p.prototype.esc=JFe;var QFe=/^javascript:|vbscript:|file:|data:/i,eNe=/^data:image\/(?:png|gif|jpeg|webp)/i,ige=function(H){return QFe.test(H)&&!eNe.test(H)};function tNe(H,ue,Ee){if(!(this.disableTags>0)){if(this.buffer+="<"+H,ue&&ue.length>0)for(var Le=0,pt;(pt=ue[Le])!==void 0;)this.buffer+=" "+pt[0]+'="'+pt[1]+'"',Le++;Ee&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function ns(H){H=H||{},H.softbreak=H.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=H}function iNe(H){this.out(H.literal)}function nNe(){this.lit(this.options.softbreak)}function rNe(){this.tag("br",[],!0),this.cr()}function sNe(H,ue){var Ee=this.attrs(H);ue?(this.options.safe&&ige(H.destination)||Ee.push(["href",this.esc(H.destination)]),H.title&&Ee.push(["title",this.esc(H.title)]),this.tag("a",Ee)):this.tag("/a")}function oNe(H,ue){ue?(this.disableTags===0&&(this.options.safe&&ige(H.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(H.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(H.title&&this.lit('" title="'+this.esc(H.title)),this.lit('" />')))}function aNe(H,ue){this.tag(ue?"em":"/em")}function lNe(H,ue){this.tag(ue?"strong":"/strong")}function uNe(H,ue){var Ee=H.parent.parent,Le=this.attrs(H);Ee!==null&&Ee.type==="list"&&Ee.listTight||(ue?(this.cr(),this.tag("p",Le)):(this.tag("/p"),this.cr()))}function cNe(H,ue){var Ee="h"+H.level,Le=this.attrs(H);ue?(this.cr(),this.tag(Ee,Le)):(this.tag("/"+Ee),this.cr())}function hNe(H){this.tag("code"),this.out(H.literal),this.tag("/code")}function dNe(H){var ue=H.info?H.info.split(/\s+/):[],Ee=this.attrs(H);ue.length>0&&ue[0].length>0&&Ee.push(["class","language-"+this.esc(ue[0])]),this.cr(),this.tag("pre"),this.tag("code",Ee),this.out(H.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function fNe(H){var ue=this.attrs(H);this.cr(),this.tag("hr",ue,!0),this.cr()}function pNe(H,ue){var Ee=this.attrs(H);ue?(this.cr(),this.tag("blockquote",Ee),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function gNe(H,ue){var Ee=H.listType==="bullet"?"ul":"ol",Le=this.attrs(H);if(ue){var pt=H.listStart;pt!==null&&pt!==1&&Le.push(["start",pt.toString()]),this.cr(),this.tag(Ee,Le),this.cr()}else this.cr(),this.tag("/"+Ee),this.cr()}function mNe(H,ue){var Ee=this.attrs(H);ue?this.tag("li",Ee):(this.tag("/li"),this.cr())}function yNe(H){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(H.literal)}function vNe(H){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(H.literal),this.cr()}function _Ne(H,ue){ue&&H.onEnter?this.lit(H.onEnter):!ue&&H.onExit&&this.lit(H.onExit)}function bNe(H,ue){this.cr(),ue&&H.onEnter?this.lit(H.onEnter):!ue&&H.onExit&&this.lit(H.onExit),this.cr()}function xNe(H){this.lit(this.esc(H))}function wNe(H){var ue=[];if(this.options.sourcepos){var Ee=H.sourcepos;Ee&&ue.push(["data-sourcepos",String(Ee[0][0])+":"+String(Ee[0][1])+"-"+String(Ee[1][0])+":"+String(Ee[1][1])])}return ue}ns.prototype=Object.create(_p.prototype),ns.prototype.text=iNe,ns.prototype.html_inline=yNe,ns.prototype.html_block=vNe,ns.prototype.softbreak=nNe,ns.prototype.linebreak=rNe,ns.prototype.link=sNe,ns.prototype.image=oNe,ns.prototype.emph=aNe,ns.prototype.strong=lNe,ns.prototype.paragraph=uNe,ns.prototype.heading=cNe,ns.prototype.code=hNe,ns.prototype.code_block=dNe,ns.prototype.thematic_break=fNe,ns.prototype.block_quote=pNe,ns.prototype.list=gNe,ns.prototype.item=mNe,ns.prototype.custom_inline=_Ne,ns.prototype.custom_block=bNe,ns.prototype.esc=Ppe,ns.prototype.out=xNe,ns.prototype.tag=tNe,ns.prototype.attrs=wNe;var ENe=/\<[^>]*\>/;function CNe(H){return H.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function km(H){H=H||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=H}function SNe(H){this.buffer="";var ue,Ee,Le=H.walker(),pt,ut,fi,Pt,Ri,Jn,Ln=this.options;for(Ln.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;pt=Le.next();)if(fi=pt.entering,ut=pt.node,Jn=ut.type,Pt=ut.isContainer,Ri=Jn==="thematic_break"||Jn==="linebreak"||Jn==="softbreak",Ee=CNe(Jn),fi){switch(ue=[],Jn){case"document":ue.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":ut.listType!==null&&ue.push(["type",ut.listType.toLowerCase()]),ut.listStart!==null&&ue.push(["start",String(ut.listStart)]),ut.listTight!==null&&ue.push(["tight",ut.listTight?"true":"false"]);var Mn=ut.listDelimiter;if(Mn!==null){var nr="";Mn==="."?nr="period":nr="paren",ue.push(["delimiter",nr])}break;case"code_block":ut.info&&ue.push(["info",ut.info]);break;case"heading":ue.push(["level",String(ut.level)]);break;case"link":case"image":ue.push(["destination",ut.destination]),ue.push(["title",ut.title]);break;case"custom_inline":case"custom_block":ue.push(["on_enter",ut.onEnter]),ue.push(["on_exit",ut.onExit]);break}if(Ln.sourcepos){var rr=ut.sourcepos;rr&&ue.push(["sourcepos",String(rr[0][0])+":"+String(rr[0][1])+"-"+String(rr[1][0])+":"+String(rr[1][1])])}if(this.cr(),this.out(this.tag(Ee,ue,Ri)),Pt)this.indentLevel+=1;else if(!Pt&&!Ri){var Co=ut.literal;Co&&this.out(this.esc(Co)),this.out(this.tag("/"+Ee))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Ee));return Ln.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function TNe(H){this.disableTags>0?this.buffer+=H.replace(ENe,""):this.buffer+=H,this.lastOut=H}function ANe(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var H=this.indentLevel;H>0;H--)this.buffer+=this.indent}}function RNe(H,ue,Ee){var Le="<"+H;if(ue&&ue.length>0)for(var pt=0,ut;(ut=ue[pt])!==void 0;)Le+=" "+ut[0]+'="'+this.esc(ut[1])+'"',pt++;return Ee&&(Le+=" /"),Le+=">",Le}km.prototype=Object.create(_p.prototype),km.prototype.render=SNe,km.prototype.out=TNe,km.prototype.cr=ANe,km.prototype.tag=RNe,km.prototype.esc=Ppe,t.HtmlRenderer=ns,t.Node=a,t.Parser=WFe,t.Renderer=_p,t.XmlRenderer=km,Object.defineProperty(t,"__esModule",{value:!0})})}(YT,YT.exports)),YT.exports}var ZT={exports:{}},A3,sxe;function xSt(){if(sxe)return A3;sxe=1;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var s=e.charAt(r),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=r}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,y=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,m++;for(var x=(b-v)*c+1>>>0,w=new Uint8Array(x);v!==b;){for(var C=p[v],D=0,R=x-1;(C!==0||D<y)&&R!==-1;R--,D++)C+=256*w[R]>>>0,w[R]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=D,v++}for(var A=x-y;A!==x&&w[A]===0;)A++;for(var L=l.repeat(m);A<x;++A)L+=e.charAt(w[A]);return L}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var y=0,v=0;p[m]===l;)y++,m++;for(var b=(p.length-m)*u+1>>>0,x=new Uint8Array(b);p[m];){var w=t[p.charCodeAt(m)];if(w===255)return;for(var C=0,D=b-1;(w!==0||C<v)&&D!==-1;D--,C++)w+=a*x[D]>>>0,x[D]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=C,m++}if(p[m]!==" "){for(var R=b-v;R!==b&&x[R]===0;)R++;for(var A=new Uint8Array(y+(b-R)),L=y;R!==b;)A[L++]=x[R++];return A}}}function f(p){var m=d(p);if(m)return m;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:d,decode:f}}return A3=i,A3}var KT={},R3={},k3={},D3,oxe;function wSt(){if(oxe)return D3;oxe=1;var i=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=qg(),r=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},o;return D3=function(l){if(typeof l!="function")return!1;if(t.test(e.call(l)))return!0;if(!n){var u=i.call(l);return u==="[object GeneratorFunction]"}if(!r)return!1;if(typeof o>"u"){var c=s();o=c?r(c):!1}return r(l)===o},D3}var L3,axe;function ESt(){if(axe)return L3;axe=1;var i=u5;return L3=function(t){return!!i(t)},L3}var lxe;function CSt(){return lxe||(lxe=1,function(i){var e=QN,t=wSt(),n=u5,r=ESt();function s(ge){return ge.call.bind(ge)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),c=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(o)var d=s(BigInt.prototype.valueOf);if(a)var f=s(Symbol.prototype.valueOf);function p(ge,se){if(typeof ge!="object")return!1;try{return se(ge),!0}catch{return!1}}i.isArgumentsObject=e,i.isGeneratorFunction=t,i.isTypedArray=r;function m(ge){return typeof Promise<"u"&&ge instanceof Promise||ge!==null&&typeof ge=="object"&&typeof ge.then=="function"&&typeof ge.catch=="function"}i.isPromise=m;function y(ge){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ge):r(ge)||z(ge)}i.isArrayBufferView=y;function v(ge){return n(ge)==="Uint8Array"}i.isUint8Array=v;function b(ge){return n(ge)==="Uint8ClampedArray"}i.isUint8ClampedArray=b;function x(ge){return n(ge)==="Uint16Array"}i.isUint16Array=x;function w(ge){return n(ge)==="Uint32Array"}i.isUint32Array=w;function C(ge){return n(ge)==="Int8Array"}i.isInt8Array=C;function D(ge){return n(ge)==="Int16Array"}i.isInt16Array=D;function R(ge){return n(ge)==="Int32Array"}i.isInt32Array=R;function A(ge){return n(ge)==="Float32Array"}i.isFloat32Array=A;function L(ge){return n(ge)==="Float64Array"}i.isFloat64Array=L;function O(ge){return n(ge)==="BigInt64Array"}i.isBigInt64Array=O;function $(ge){return n(ge)==="BigUint64Array"}i.isBigUint64Array=$;function q(ge){return l(ge)==="[object Map]"}q.working=typeof Map<"u"&&q(new Map);function M(ge){return typeof Map>"u"?!1:q.working?q(ge):ge instanceof Map}i.isMap=M;function F(ge){return l(ge)==="[object Set]"}F.working=typeof Set<"u"&&F(new Set);function N(ge){return typeof Set>"u"?!1:F.working?F(ge):ge instanceof Set}i.isSet=N;function B(ge){return l(ge)==="[object WeakMap]"}B.working=typeof WeakMap<"u"&&B(new WeakMap);function W(ge){return typeof WeakMap>"u"?!1:B.working?B(ge):ge instanceof WeakMap}i.isWeakMap=W;function K(ge){return l(ge)==="[object WeakSet]"}K.working=typeof WeakSet<"u"&&K(new WeakSet);function ee(ge){return K(ge)}i.isWeakSet=ee;function te(ge){return l(ge)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function le(ge){return typeof ArrayBuffer>"u"?!1:te.working?te(ge):ge instanceof ArrayBuffer}i.isArrayBuffer=le;function Q(ge){return l(ge)==="[object DataView]"}Q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Q(new DataView(new ArrayBuffer(1),0,1));function z(ge){return typeof DataView>"u"?!1:Q.working?Q(ge):ge instanceof DataView}i.isDataView=z;var J=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ye(ge){return l(ge)==="[object SharedArrayBuffer]"}function Ne(ge){return typeof J>"u"?!1:(typeof ye.working>"u"&&(ye.working=ye(new J)),ye.working?ye(ge):ge instanceof J)}i.isSharedArrayBuffer=Ne;function Ge(ge){return l(ge)==="[object AsyncFunction]"}i.isAsyncFunction=Ge;function rt(ge){return l(ge)==="[object Map Iterator]"}i.isMapIterator=rt;function Be(ge){return l(ge)==="[object Set Iterator]"}i.isSetIterator=Be;function ze(ge){return l(ge)==="[object Generator]"}i.isGeneratorObject=ze;function lt(ge){return l(ge)==="[object WebAssembly.Module]"}i.isWebAssemblyCompiledModule=lt;function xt(ge){return p(ge,u)}i.isNumberObject=xt;function Mt(ge){return p(ge,c)}i.isStringObject=Mt;function Ct(ge){return p(ge,h)}i.isBooleanObject=Ct;function gi(ge){return o&&p(ge,d)}i.isBigIntObject=gi;function Wt(ge){return a&&p(ge,f)}i.isSymbolObject=Wt;function Qi(ge){return xt(ge)||Mt(ge)||Ct(ge)||gi(ge)||Wt(ge)}i.isBoxedPrimitive=Qi;function He(ge){return typeof Uint8Array<"u"&&(le(ge)||Ne(ge))}i.isAnyArrayBuffer=He,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ge){Object.defineProperty(i,ge,{enumerable:!1,value:function(){throw new Error(ge+" is not supported in userland")}})})}(k3)),k3}var M3,uxe;function SSt(){return uxe||(uxe=1,M3=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),M3}var JT={exports:{}},cxe;function TSt(){return cxe||(cxe=1,typeof Object.create=="function"?JT.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:JT.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),JT.exports}var hxe;function dxe(){return hxe||(hxe=1,function(i){var e={},t=Object.getOwnPropertyDescriptors||function(J){for(var ye=Object.keys(J),Ne={},Ge=0;Ge<ye.length;Ge++)Ne[ye[Ge]]=Object.getOwnPropertyDescriptor(J,ye[Ge]);return Ne},n=/%[sdj%]/g;i.format=function(z){if(!D(z)){for(var J=[],ye=0;ye<arguments.length;ye++)J.push(a(arguments[ye]));return J.join(" ")}for(var ye=1,Ne=arguments,Ge=Ne.length,rt=String(z).replace(n,function(ze){if(ze==="%%")return"%";if(ye>=Ge)return ze;switch(ze){case"%s":return String(Ne[ye++]);case"%d":return Number(Ne[ye++]);case"%j":try{return JSON.stringify(Ne[ye++])}catch{return"[Circular]"}default:return ze}}),Be=Ne[ye];ye<Ge;Be=Ne[++ye])x(Be)||!O(Be)?rt+=" "+Be:rt+=" "+a(Be);return rt},i.deprecate=function(z,J){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return i.deprecate(z,J).apply(this,arguments)};var ye=!1;function Ne(){if(!ye){if(process.throwDeprecation)throw new Error(J);process.traceDeprecation?console.trace(J):console.error(J),ye=!0}return z.apply(this,arguments)}return Ne};var r={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}i.debuglog=function(z){if(z=z.toUpperCase(),!r[z])if(s.test(z)){var J=process.pid;r[z]=function(){var ye=i.format.apply(i,arguments);console.error("%s %d: %s",z,J,ye)}}else r[z]=function(){};return r[z]};function a(z,J){var ye={seen:[],stylize:u};return arguments.length>=3&&(ye.depth=arguments[2]),arguments.length>=4&&(ye.colors=arguments[3]),b(J)?ye.showHidden=J:J&&i._extend(ye,J),A(ye.showHidden)&&(ye.showHidden=!1),A(ye.depth)&&(ye.depth=2),A(ye.colors)&&(ye.colors=!1),A(ye.customInspect)&&(ye.customInspect=!0),ye.colors&&(ye.stylize=l),h(ye,z,ye.depth)}i.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,J){var ye=a.styles[J];return ye?"\x1B["+a.colors[ye][0]+"m"+z+"\x1B["+a.colors[ye][1]+"m":z}function u(z,J){return z}function c(z){var J={};return z.forEach(function(ye,Ne){J[ye]=!0}),J}function h(z,J,ye){if(z.customInspect&&J&&M(J.inspect)&&J.inspect!==i.inspect&&!(J.constructor&&J.constructor.prototype===J)){var Ne=J.inspect(ye,z);return D(Ne)||(Ne=h(z,Ne,ye)),Ne}var Ge=d(z,J);if(Ge)return Ge;var rt=Object.keys(J),Be=c(rt);if(z.showHidden&&(rt=Object.getOwnPropertyNames(J)),q(J)&&(rt.indexOf("message")>=0||rt.indexOf("description")>=0))return f(J);if(rt.length===0){if(M(J)){var ze=J.name?": "+J.name:"";return z.stylize("[Function"+ze+"]","special")}if(L(J))return z.stylize(RegExp.prototype.toString.call(J),"regexp");if($(J))return z.stylize(Date.prototype.toString.call(J),"date");if(q(J))return f(J)}var lt="",xt=!1,Mt=["{","}"];if(v(J)&&(xt=!0,Mt=["[","]"]),M(J)){var Ct=J.name?": "+J.name:"";lt=" [Function"+Ct+"]"}if(L(J)&&(lt=" "+RegExp.prototype.toString.call(J)),$(J)&&(lt=" "+Date.prototype.toUTCString.call(J)),q(J)&&(lt=" "+f(J)),rt.length===0&&(!xt||J.length==0))return Mt[0]+lt+Mt[1];if(ye<0)return L(J)?z.stylize(RegExp.prototype.toString.call(J),"regexp"):z.stylize("[Object]","special");z.seen.push(J);var gi;return xt?gi=p(z,J,ye,Be,rt):gi=rt.map(function(Wt){return m(z,J,ye,Be,Wt,xt)}),z.seen.pop(),y(gi,lt,Mt)}function d(z,J){if(A(J))return z.stylize("undefined","undefined");if(D(J)){var ye="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(ye,"string")}if(C(J))return z.stylize(""+J,"number");if(b(J))return z.stylize(""+J,"boolean");if(x(J))return z.stylize("null","null")}function f(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,J,ye,Ne,Ge){for(var rt=[],Be=0,ze=J.length;Be<ze;++Be)ee(J,String(Be))?rt.push(m(z,J,ye,Ne,String(Be),!0)):rt.push("");return Ge.forEach(function(lt){lt.match(/^\d+$/)||rt.push(m(z,J,ye,Ne,lt,!0))}),rt}function m(z,J,ye,Ne,Ge,rt){var Be,ze,lt;if(lt=Object.getOwnPropertyDescriptor(J,Ge)||{value:J[Ge]},lt.get?lt.set?ze=z.stylize("[Getter/Setter]","special"):ze=z.stylize("[Getter]","special"):lt.set&&(ze=z.stylize("[Setter]","special")),ee(Ne,Ge)||(Be="["+Ge+"]"),ze||(z.seen.indexOf(lt.value)<0?(x(ye)?ze=h(z,lt.value,null):ze=h(z,lt.value,ye-1),ze.indexOf(`
`)>-1&&(rt?ze=ze.split(`
`).map(function(xt){return"  "+xt}).join(`
`).slice(2):ze=`
`+ze.split(`
`).map(function(xt){return"   "+xt}).join(`
`))):ze=z.stylize("[Circular]","special")),A(Be)){if(rt&&Ge.match(/^\d+$/))return ze;Be=JSON.stringify(""+Ge),Be.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Be=Be.slice(1,-1),Be=z.stylize(Be,"name")):(Be=Be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Be=z.stylize(Be,"string"))}return Be+": "+ze}function y(z,J,ye){var Ne=z.reduce(function(Ge,rt){return rt.indexOf(`
`)>=0,Ge+rt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ne>60?ye[0]+(J===""?"":J+`
 `)+" "+z.join(`,
  `)+" "+ye[1]:ye[0]+J+" "+z.join(", ")+" "+ye[1]}i.types=CSt();function v(z){return Array.isArray(z)}i.isArray=v;function b(z){return typeof z=="boolean"}i.isBoolean=b;function x(z){return z===null}i.isNull=x;function w(z){return z==null}i.isNullOrUndefined=w;function C(z){return typeof z=="number"}i.isNumber=C;function D(z){return typeof z=="string"}i.isString=D;function R(z){return typeof z=="symbol"}i.isSymbol=R;function A(z){return z===void 0}i.isUndefined=A;function L(z){return O(z)&&N(z)==="[object RegExp]"}i.isRegExp=L,i.types.isRegExp=L;function O(z){return typeof z=="object"&&z!==null}i.isObject=O;function $(z){return O(z)&&N(z)==="[object Date]"}i.isDate=$,i.types.isDate=$;function q(z){return O(z)&&(N(z)==="[object Error]"||z instanceof Error)}i.isError=q,i.types.isNativeError=q;function M(z){return typeof z=="function"}i.isFunction=M;function F(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}i.isPrimitive=F,i.isBuffer=SSt();function N(z){return Object.prototype.toString.call(z)}function B(z){return z<10?"0"+z.toString(10):z.toString(10)}var W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function K(){var z=new Date,J=[B(z.getHours()),B(z.getMinutes()),B(z.getSeconds())].join(":");return[z.getDate(),W[z.getMonth()],J].join(" ")}i.log=function(){console.log("%s - %s",K(),i.format.apply(i,arguments))},i.inherits=TSt(),i._extend=function(z,J){if(!J||!O(J))return z;for(var ye=Object.keys(J),Ne=ye.length;Ne--;)z[ye[Ne]]=J[ye[Ne]];return z};function ee(z,J){return Object.prototype.hasOwnProperty.call(z,J)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;i.promisify=function(J){if(typeof J!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&J[te]){var ye=J[te];if(typeof ye!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ye,te,{value:ye,enumerable:!1,writable:!1,configurable:!0}),ye}function ye(){for(var Ne,Ge,rt=new Promise(function(lt,xt){Ne=lt,Ge=xt}),Be=[],ze=0;ze<arguments.length;ze++)Be.push(arguments[ze]);Be.push(function(lt,xt){lt?Ge(lt):Ne(xt)});try{J.apply(this,Be)}catch(lt){Ge(lt)}return rt}return Object.setPrototypeOf(ye,Object.getPrototypeOf(J)),te&&Object.defineProperty(ye,te,{value:ye,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ye,t(J))},i.promisify.custom=te;function le(z,J){if(!z){var ye=new Error("Promise was rejected with a falsy value");ye.reason=z,z=ye}return J(z)}function Q(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function J(){for(var ye=[],Ne=0;Ne<arguments.length;Ne++)ye.push(arguments[Ne]);var Ge=ye.pop();if(typeof Ge!="function")throw new TypeError("The last argument must be of type Function");var rt=this,Be=function(){return Ge.apply(rt,arguments)};z.apply(this,ye).then(function(ze){process.nextTick(Be.bind(null,null,ze))},function(ze){process.nextTick(le.bind(null,ze,Be))})}return Object.setPrototypeOf(J,Object.getPrototypeOf(z)),Object.defineProperties(J,t(z)),J}i.callbackify=Q}(R3)),R3}var fxe;function ASt(){return fxe||(fxe=1,KT.TextEncoder=typeof TextEncoder<"u"?TextEncoder:dxe().TextEncoder,KT.TextDecoder=typeof TextDecoder<"u"?TextDecoder:dxe().TextDecoder),KT}var I3,pxe;function I6(){if(pxe)return I3;pxe=1;const{TextEncoder:i,TextDecoder:e}=ASt(),t=new e,n=a=>t.decode(a),r=new i,s=a=>r.encode(a);function o(a,l){const u=new Uint8Array(l);let c=0;for(const h of a)u.set(h,c),c+=h.length;return u}return I3={decodeText:n,encodeText:s,concat:o},I3}var O3,gxe;function RSt(){if(gxe)return O3;gxe=1;const{encodeText:i}=I6();class e{constructor(n,r,s,o){this.name=n,this.code=r,this.codeBuf=i(this.code),this.alphabet=o,this.codec=s(o)}encode(n){return this.codec.encode(n)}decode(n){for(const r of n)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${n}'`);return this.codec.decode(n)}}return O3=e,O3}var P3,mxe;function kSt(){if(mxe)return P3;mxe=1;const i=(n,r,s)=>{const o={};for(let d=0;d<r.length;++d)o[r[d]]=d;let a=n.length;for(;n[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let u=0,c=0,h=0;for(let d=0;d<a;++d){const f=o[n[d]];if(f===void 0)throw new SyntaxError("Invalid character "+n[d]);c=c<<s|f,u+=s,u>=8&&(u-=8,l[h++]=255&c>>u)}if(u>=s||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return l},e=(n,r,s)=>{const o=r[r.length-1]==="=",a=(1<<s)-1;let l="",u=0,c=0;for(let h=0;h<n.length;++h)for(c=c<<8|n[h],u+=8;u>s;)u-=s,l+=r[a&c>>u];if(u&&(l+=r[a&c<<s-u]),o)for(;l.length*s&7;)l+="=";return l};return P3={rfc4648:n=>r=>({encode(s){return e(s,r,n)},decode(s){return i(s,r,n)}})},P3}var F3,yxe;function DSt(){if(yxe)return F3;yxe=1;const i=xSt(),e=RSt(),{rfc4648:t}=kSt(),{decodeText:n,encodeText:r}=I6(),o=[["identity","\0",()=>({encode:n,decode:r}),""],["base2","0",t(1),"01"],["base8","7",t(3),"01234567"],["base10","9",i,"0123456789"],["base16","f",t(4),"0123456789abcdef"],["base16upper","F",t(4),"0123456789ABCDEF"],["base32hex","v",t(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",t(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",t(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",t(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",t(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",i,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",i,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",i,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((u,c)=>(u[c[0]]=new e(c[0],c[1],c[2],c[3]),u),{}),l=o.reduce((u,c)=>(u[c[1]]=a[c[0]],u),{});return F3={names:a,codes:l},F3}var vxe;function LSt(){return vxe||(vxe=1,function(i,e){const t=DSt(),{encodeText:n,decodeText:r,concat:s}=I6();function o(f,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:m,codeBuf:y}=h(f);return c(m,p),s([y,p],y.length+p.length)}function a(f,p){const m=h(f),y=n(m.encode(p));return s([m.codeBuf,y],m.codeBuf.length+y.length)}function l(f){f instanceof Uint8Array&&(f=r(f));const p=f[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(f=f.toLowerCase()),h(f[0]).decode(f.substring(1))}function u(f){if(f instanceof Uint8Array&&(f=r(f)),Object.prototype.toString.call(f)!=="[object String]")return!1;try{return h(f[0]).name}catch{return!1}}function c(f,p){h(f).decode(r(p))}function h(f){if(Object.prototype.hasOwnProperty.call(t.names,f))return t.names[f];if(Object.prototype.hasOwnProperty.call(t.codes,f))return t.codes[f];throw new Error(`Unsupported encoding: ${f}`)}function d(f){return f instanceof Uint8Array&&(f=r(f)),h(f[0])}e=i.exports=o,e.encode=a,e.decode=l,e.isEncoded=u,e.encoding=h,e.encodingFromData=d,e.names=Object.freeze(t.names),e.codes=Object.freeze(t.codes)}(ZT,ZT.exports)),ZT.exports}var N3,_xe;function MSt(){if(_xe)return N3;_xe=1,N3=r;var i=128,e=127,t=~e,n=Math.pow(2,31);function r(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw r.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=n;)o[a++]=s&255|i,s/=128;for(;s&t;)o[a++]=s&255|i,s>>>=7;return o[a]=s|0,r.bytes=a-l+1,o}return N3}var $3,bxe;function ISt(){if(bxe)return $3;bxe=1,$3=t;var i=128,e=127;function t(n,o){var s=0,o=o||0,a=0,l=o,u,c=n.length;do{if(l>=c||a>49)throw t.bytes=0,new RangeError("Could not decode varint");u=n[l++],s+=a<28?(u&e)<<a:(u&e)*Math.pow(2,a),a+=7}while(u>=i);return t.bytes=l-o,s}return $3}var B3,xxe;function OSt(){if(xxe)return B3;xxe=1;var i=Math.pow(2,7),e=Math.pow(2,14),t=Math.pow(2,21),n=Math.pow(2,28),r=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return B3=function(u){return u<i?1:u<e?2:u<t?3:u<n?4:u<r?5:u<s?6:u<o?7:u<a?8:u<l?9:10},B3}var j3,wxe;function PSt(){return wxe||(wxe=1,j3={encode:MSt(),decode:ISt(),encodingLength:OSt()}),j3}var z3,Exe;function FSt(){return Exe||(Exe=1,z3={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),z3}function NSt(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<i.length;r++){var s=i.charAt(r),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=r}var a=i.length,l=i.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,y=0,v=0,b=p.length;v!==b&&p[v]===0;)v++,m++;for(var x=(b-v)*c+1>>>0,w=new Uint8Array(x);v!==b;){for(var C=p[v],D=0,R=x-1;(C!==0||D<y)&&R!==-1;R--,D++)C+=256*w[R]>>>0,w[R]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=D,v++}for(var A=x-y;A!==x&&w[A]===0;)A++;for(var L=l.repeat(m);A<x;++A)L+=i.charAt(w[A]);return L}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var y=0,v=0;p[m]===l;)y++,m++;for(var b=(p.length-m)*u+1>>>0,x=new Uint8Array(b);p[m];){var w=t[p.charCodeAt(m)];if(w===255)return;for(var C=0,D=b-1;(w!==0||C<v)&&D!==-1;D--,C++)w+=a*x[D]>>>0,x[D]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=C,m++}if(p[m]!==" "){for(var R=b-v;R!==b&&x[R]===0;)R++;for(var A=new Uint8Array(y+(b-R)),L=y;R!==b;)A[L++]=x[R++];return A}}}function f(p){var m=d(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var $St=NSt,BSt=$St;const YIe=new Uint8Array(0),jSt=i=>i.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),zSt=i=>{const e=i.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):YIe},ZIe=(i,e)=>{if(i===e)return!0;if(i.byteLength!==e.byteLength)return!1;for(let t=0;t<i.byteLength;t++)if(i[t]!==e[t])return!1;return!0},_y=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},GSt=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),KIe=i=>new TextEncoder().encode(i),JIe=i=>new TextDecoder().decode(i),USt=Object.freeze(Object.defineProperty({__proto__:null,coerce:_y,empty:YIe,equals:ZIe,fromHex:zSt,fromString:KIe,isBinary:GSt,toHex:jSt,toString:JIe},Symbol.toStringTag,{value:"Module"}));class qSt{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class VSt{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return QIe(this,e)}}class HSt{constructor(e){this.decoders=e}or(e){return QIe(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const QIe=(i,e)=>new HSt({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class WSt{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new qSt(e,t,n),this.decoder=new VSt(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const WL=({name:i,prefix:e,encode:t,decode:n})=>new WSt(i,e,t,n),XC=({prefix:i,name:e,alphabet:t})=>{const{encode:n,decode:r}=BSt(t,e);return WL({prefix:i,name:e,encode:n,decode:s=>_y(r(s))})},XSt=(i,e,t,n)=>{const r={};for(let c=0;c<e.length;++c)r[e[c]]=c;let s=i.length;for(;i[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let a=0,l=0,u=0;for(let c=0;c<s;++c){const h=r[i[c]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|h,a+=t,a>=8&&(a-=8,o[u++]=255&l>>a)}if(a>=t||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},YSt=(i,e,t)=>{const n=e[e.length-1]==="=",r=(1<<t)-1;let s="",o=0,a=0;for(let l=0;l<i.length;++l)for(a=a<<8|i[l],o+=8;o>t;)o-=t,s+=e[r&a>>o];if(o&&(s+=e[r&a<<t-o]),n)for(;s.length*t&7;)s+="=";return s},ka=({name:i,prefix:e,bitsPerChar:t,alphabet:n})=>WL({prefix:e,name:i,encode(r){return YSt(r,n,t)},decode(r){return XSt(r,n,t,i)}}),ZSt=WL({prefix:"\0",name:"identity",encode:i=>JIe(i),decode:i=>KIe(i)}),KSt=Object.freeze(Object.defineProperty({__proto__:null,identity:ZSt},Symbol.toStringTag,{value:"Module"})),JSt=ka({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),QSt=Object.freeze(Object.defineProperty({__proto__:null,base2:JSt},Symbol.toStringTag,{value:"Module"})),eTt=ka({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tTt=Object.freeze(Object.defineProperty({__proto__:null,base8:eTt},Symbol.toStringTag,{value:"Module"})),iTt=XC({prefix:"9",name:"base10",alphabet:"0123456789"}),nTt=Object.freeze(Object.defineProperty({__proto__:null,base10:iTt},Symbol.toStringTag,{value:"Module"})),rTt=ka({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sTt=ka({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),oTt=Object.freeze(Object.defineProperty({__proto__:null,base16:rTt,base16upper:sTt},Symbol.toStringTag,{value:"Module"})),EE=ka({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aTt=ka({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lTt=ka({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),uTt=ka({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cTt=ka({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hTt=ka({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dTt=ka({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fTt=ka({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pTt=ka({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),gTt=Object.freeze(Object.defineProperty({__proto__:null,base32:EE,base32hex:cTt,base32hexpad:dTt,base32hexpadupper:fTt,base32hexupper:hTt,base32pad:lTt,base32padupper:uTt,base32upper:aTt,base32z:pTt},Symbol.toStringTag,{value:"Module"})),mTt=XC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yTt=XC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),vTt=Object.freeze(Object.defineProperty({__proto__:null,base36:mTt,base36upper:yTt},Symbol.toStringTag,{value:"Module"})),Qd=XC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_Tt=XC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bTt=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Qd,base58flickr:_Tt},Symbol.toStringTag,{value:"Module"})),xTt=ka({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wTt=ka({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ETt=ka({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),CTt=ka({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),STt=Object.freeze(Object.defineProperty({__proto__:null,base64:xTt,base64pad:wTt,base64url:ETt,base64urlpad:CTt},Symbol.toStringTag,{value:"Module"})),e3e=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),TTt=e3e.reduce((i,e,t)=>(i[t]=e,i),[]),ATt=e3e.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function RTt(i){return i.reduce((e,t)=>(e+=TTt[t],e),"")}function kTt(i){const e=[];for(const t of i){const n=ATt[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const DTt=WL({prefix:"🚀",name:"base256emoji",encode:RTt,decode:kTt}),LTt=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:DTt},Symbol.toStringTag,{value:"Module"}));var MTt=t3e,Cxe=128,ITt=127,OTt=~ITt,PTt=Math.pow(2,31);function t3e(i,e,t){e=e||[],t=t||0;for(var n=t;i>=PTt;)e[t++]=i&255|Cxe,i/=128;for(;i&OTt;)e[t++]=i&255|Cxe,i>>>=7;return e[t]=i|0,t3e.bytes=t-n+1,e}var FTt=UF,NTt=128,Sxe=127;function UF(i,n){var t=0,n=n||0,r=0,s=n,o,a=i.length;do{if(s>=a)throw UF.bytes=0,new RangeError("Could not decode varint");o=i[s++],t+=r<28?(o&Sxe)<<r:(o&Sxe)*Math.pow(2,r),r+=7}while(o>=NTt);return UF.bytes=s-n,t}var $Tt=Math.pow(2,7),BTt=Math.pow(2,14),jTt=Math.pow(2,21),zTt=Math.pow(2,28),GTt=Math.pow(2,35),UTt=Math.pow(2,42),qTt=Math.pow(2,49),VTt=Math.pow(2,56),HTt=Math.pow(2,63),WTt=function(i){return i<$Tt?1:i<BTt?2:i<jTt?3:i<zTt?4:i<GTt?5:i<UTt?6:i<qTt?7:i<VTt?8:i<HTt?9:10},XTt={encode:MTt,decode:FTt,encodingLength:WTt},kk=XTt;const Dk=(i,e=0)=>[kk.decode(i,e),kk.decode.bytes],k2=(i,e,t=0)=>(kk.encode(i,e,t),e),D2=i=>kk.encodingLength(i),YTt=Object.freeze(Object.defineProperty({__proto__:null,decode:Dk,encodeTo:k2,encodingLength:D2},Symbol.toStringTag,{value:"Module"})),L2=(i,e)=>{const t=e.byteLength,n=D2(i),r=n+D2(t),s=new Uint8Array(r+t);return k2(i,s,0),k2(t,s,n),s.set(e,r),new XL(i,t,e,s)},i3e=i=>{const e=_y(i),[t,n]=Dk(e),[r,s]=Dk(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==r)throw new Error("Incorrect length");return new XL(t,r,o,e)},n3e=(i,e)=>i===e?!0:i.code===e.code&&i.size===e.size&&ZIe(i.bytes,e.bytes);class XL{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const ZTt=Object.freeze(Object.defineProperty({__proto__:null,Digest:XL,create:L2,decode:i3e,equals:n3e},Symbol.toStringTag,{value:"Module"})),O6=({name:i,code:e,encode:t})=>new r3e(i,e,t);class r3e{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?L2(this.code,t):t.then(n=>L2(this.code,n))}else throw Error("Unknown type, must be binary type")}}const KTt=Object.freeze(Object.defineProperty({__proto__:null,Hasher:r3e,from:O6},Symbol.toStringTag,{value:"Module"})),s3e=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),JTt=O6({name:"sha2-256",code:18,encode:s3e("SHA-256")}),QTt=O6({name:"sha2-512",code:19,encode:s3e("SHA-512")}),eAt=Object.freeze(Object.defineProperty({__proto__:null,sha256:JTt,sha512:QTt},Symbol.toStringTag,{value:"Module"})),o3e=0,tAt="identity",a3e=_y,iAt=i=>L2(o3e,a3e(i)),nAt={code:o3e,name:tAt,encode:a3e,digest:iAt},rAt=Object.freeze(Object.defineProperty({__proto__:null,identity:nAt},Symbol.toStringTag,{value:"Module"})),sAt="raw",oAt=85,aAt=i=>_y(i),lAt=i=>_y(i),uAt=Object.freeze(Object.defineProperty({__proto__:null,code:oAt,decode:lAt,encode:aAt,name:sAt},Symbol.toStringTag,{value:"Module"})),cAt=new TextEncoder,hAt=new TextDecoder,dAt="json",fAt=512,pAt=i=>cAt.encode(JSON.stringify(i)),gAt=i=>JSON.parse(hAt.decode(i)),mAt=Object.freeze(Object.defineProperty({__proto__:null,code:fAt,decode:gAt,encode:pAt,name:dAt},Symbol.toStringTag,{value:"Module"}));class Na{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:eA,byteLength:eA,code:QT,version:QT,multihash:QT,bytes:QT,_baseCache:eA,asCID:eA})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==ww)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==bAt)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Na.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=L2(e,t);return Na.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&n3e(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:r}=this;switch(n){case 0:return vAt(t,r,e||Qd.encoder);default:return _At(t,r,e||EE.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return wAt(/^0\.0/,EAt),!!(e&&(e[Axe]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Na)return e;if(e!=null&&e.asCID===e){const{version:t,code:n,multihash:r,bytes:s}=e;return new Na(t,n,r,s||Txe(t,n,r.bytes))}else if(e!=null&&e[Axe]===!0){const{version:t,multihash:n,code:r}=e,s=i3e(n);return Na.create(t,r,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==ww)throw new Error(`Version 0 CID must use dag-pb (code: ${ww}) block encoding`);return new Na(e,t,n,n.bytes)}case 1:{const r=Txe(e,t,n.bytes);return new Na(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Na.create(0,ww,e)}static createV1(e,t){return Na.create(1,e,t)}static decode(e){const[t,n]=Na.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Na.inspectBytes(e),n=t.size-t.multihashSize,r=_y(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),o=new XL(t.multihashCode,t.digestSize,s,r);return[t.version===0?Na.createV0(o):Na.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[h,d]=Dk(e.subarray(t));return t+=d,h};let r=n(),s=ww;if(r===18?(r=0,t=0):r===1&&(s=n()),r!==0&&r!==1)throw new RangeError(`Invalid CID version ${r}`);const o=t,a=n(),l=n(),u=t+l,c=u-o;return{version:r,codec:s,multihashCode:a,digestSize:l,multihashSize:c,size:u}}static parse(e,t){const[n,r]=yAt(e,t),s=Na.decode(r);return s._baseCache.set(n,e),s}}const yAt=(i,e)=>{switch(i[0]){case"Q":{const t=e||Qd;return[Qd.prefix,t.decode(`${Qd.prefix}${i}`)]}case Qd.prefix:{const t=e||Qd;return[Qd.prefix,t.decode(i)]}case EE.prefix:{const t=e||EE;return[EE.prefix,t.decode(i)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[i[0],e.decode(i)]}}},vAt=(i,e,t)=>{const{prefix:n}=t;if(n!==Qd.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const r=e.get(n);if(r==null){const s=t.encode(i).slice(1);return e.set(n,s),s}else return r},_At=(i,e,t)=>{const{prefix:n}=t,r=e.get(n);if(r==null){const s=t.encode(i);return e.set(n,s),s}else return r},ww=112,bAt=18,Txe=(i,e,t)=>{const n=D2(i),r=n+D2(e),s=new Uint8Array(r+t.byteLength);return k2(i,s,0),k2(e,s,n),s.set(t,r),s},Axe=Symbol.for("@ipld/js-cid/CID"),QT={writable:!1,configurable:!1,enumerable:!0},eA={writable:!1,enumerable:!1,configurable:!1},xAt="0.0.0-dev",wAt=(i,e)=>{if(i.test(xAt))console.warn(e);else throw new Error(e)},EAt=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,CAt={...KSt,...QSt,...tTt,...nTt,...oTt,...gTt,...vTt,...bTt,...STt,...LTt},SAt={...eAt,...rAt},TAt={raw:uAt,json:mAt},AAt=Object.freeze(Object.defineProperty({__proto__:null,CID:Na,bases:CAt,bytes:USt,codecs:TAt,digest:ZTt,hasher:KTt,hashes:SAt,varint:YTt},Symbol.toStringTag,{value:"Module"})),RAt=eN(AAt);var G3,Rxe;function l3e(){if(Rxe)return G3;Rxe=1;const{bases:i}=RAt;function e(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const t=e("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),n=e("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return G3={utf8:t,"utf-8":t,hex:i.base16,latin1:n,ascii:n,binary:n,...i},G3}var U3,kxe;function kAt(){if(kxe)return U3;kxe=1;const i=l3e();function e(t,n="utf8"){const r=i[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return r.encoder.encode(t).substring(1)}return U3=e,U3}var q3,Dxe;function DAt(){if(Dxe)return q3;Dxe=1;const i=l3e();function e(t,n="utf8"){const r=i[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return r.decoder.decode(`${r.prefix}${t}`)}return q3=e,q3}var V3,Lxe;function LAt(){if(Lxe)return V3;Lxe=1;function i(e,t){t||(t=e.reduce((s,o)=>s+o.length,0));const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}return V3=i,V3}var H3,Mxe;function MAt(){if(Mxe)return H3;Mxe=1;const i=LSt(),e=PSt(),{names:t}=FSt(),n=kAt(),r=DAt(),s=LAt(),o={};for(const b in t){const x=b;o[t[x]]=x}function a(b){if(!(b instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return n(b,"base16")}function l(b){return r(b,"base16")}function u(b){if(!(b instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return n(i.encode("base58btc",b)).slice(1)}function c(b){const x=b instanceof Uint8Array?n(b):b;return i.decode("z"+x)}function h(b){if(!(b instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(b.length<2)throw new Error("multihash too short. must be > 2 bytes.");const x=e.decode(b);if(!m(x))throw new Error(`multihash unknown function code: 0x${x.toString(16)}`);b=b.slice(e.decode.bytes);const w=e.decode(b);if(w<0)throw new Error(`multihash invalid length: ${w}`);if(b=b.slice(e.decode.bytes),b.length!==w)throw new Error(`multihash length inconsistent: 0x${n(b,"base16")}`);return{code:x,name:o[x],length:w,digest:b}}function d(b,x,w){if(!b||x===void 0)throw new Error("multihash encode requires at least two args: digest, code");const C=f(x);if(!(b instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(w==null&&(w=b.length),w&&b.length!==w)throw new Error("digest length should be equal to specified length.");const D=e.encode(C),R=e.encode(w);return s([D,R,b],D.length+R.length+b.length)}function f(b){let x=b;if(typeof b=="string"){if(t[b]===void 0)throw new Error(`Unrecognized hash function named: ${b}`);x=t[b]}if(typeof x!="number")throw new Error(`Hash function code should be a number. Got: ${x}`);if(o[x]===void 0&&!p(x))throw new Error(`Unrecognized function code: ${x}`);return x}function p(b){return b>0&&b<16}function m(b){return!!(p(b)||o[b])}function y(b){h(b)}function v(b){return y(b),b.subarray(0,2)}return H3={names:t,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:u,fromB58String:c,decode:h,encode:d,coerceCode:f,isAppCode:p,validate:y,prefix:v,isValidCode:m},H3}var W3,Ixe;function P6(){if(Ixe)return W3;Ixe=1;const i=WC(),e=v1(),t={array(n,r=!1,s=""){return i.toList(n,r,o=>t.format(o,s))},object(n){return i.toObject(n,r=>t.format(r))},null(n=null){return n===null&&(n=i.t("n/a")),i.toNothing(n)},number(n,r=""){return typeof n!="number"&&(n=parseFloat(n)),i.unit(e.numberFormatter.format(n),r)},string(n,r=""){return i.unit(i.e(n).replace(/(\r\n|\r|\n){2,}/g,"<br>"),r)},boolean(n){return n?"✔️":"❌"},format(n,r=""){return typeof n=="boolean"?t.boolean(n):typeof n=="number"?t.number(n,r):typeof n=="string"?t.string(n,r):Array.isArray(n)?t.array(n,r):i.isObject(n)?t.object(n):t.null()}};return W3=t,W3}const IAt="Afar",OAt="Abkhazian",PAt="Afrikaans",FAt="Akan",NAt="Amharic",$At="Aragonese",BAt="Arabic",jAt="Assamese",zAt="Avar",GAt="Aymara",UAt="Azerbaijani",qAt="Bashkir",VAt="Belarusian",HAt="Bulgarian",WAt="Bihari",XAt="Bislama",YAt="Bambara",ZAt="Bengali",KAt="Tibetan",JAt="Breton",QAt="Bosnian",eRt="Catalan",tRt="Chechen",iRt="Chamorro",nRt="Corsican",rRt="Cree",sRt="Czech",oRt="Old Bulgarian",aRt="Chuvash",lRt="Welsh",uRt="Danish",cRt="German",hRt="Divehi",dRt="Dzongkha",fRt="Ewe",pRt="Greek",gRt="English",mRt="Esperanto",yRt="Spanish",vRt="Estonian",_Rt="Basque",bRt="Persian",xRt="Peul",wRt="Finnish",ERt="Fijian",CRt="Faroese",SRt="French",TRt="West Frisian",ARt="Irish",RRt="Scottish Gaelic",kRt="Galician",DRt="Guarani",LRt="Gujarati",MRt="Manx",IRt="Hausa",ORt="Hebrew",PRt="Hindi",FRt="Hiri Motu",NRt="Croatian",$Rt="Haitian",BRt="Hungarian",jRt="Armenian",zRt="Herero",GRt="Interlingua",URt="Indonesian",qRt="Interlingue",VRt="Igbo",HRt="Sichuan Yi",WRt="Inupiak",XRt="Ido",YRt="Icelandic",ZRt="Italian",KRt="Inuktitut",JRt="Japanese",QRt="Javanese",ekt="Georgian",tkt="Kongo",ikt="Kikuyu",nkt="Kuanyama",rkt="Kazakh",skt="Greenlandic",okt="Cambodian",akt="Kannada",lkt="Korean",ukt="Kanuri",ckt="Kashmiri",hkt="Kurdish",dkt="Komi",fkt="Cornish",pkt="Kirghiz",gkt="Latin",mkt="Luxembourgish",ykt="Ganda",vkt="Limburgian",_kt="Lingala",bkt="Laotian",xkt="Lithuanian",wkt="Latvian",Ekt="Malagasy",Ckt="Marshallese",Skt="Maori",Tkt="Macedonian",Akt="Malayalam",Rkt="Mongolian",kkt="Moldovan",Dkt="Marathi",Lkt="Malay",Mkt="Maltese",Ikt="Burmese",Okt="Nauruan",Pkt="North Ndebele",Fkt="Nepali",Nkt="Ndonga",$kt="Dutch",Bkt="Norwegian Nynorsk",jkt="Norwegian",zkt="South Ndebele",Gkt="Navajo",Ukt="Chichewa",qkt="Occitan",Vkt="Ojibwa",Hkt="Oromo",Wkt="Oriya",Xkt="Ossetian",Ykt="Punjabi",Zkt="Pali",Kkt="Polish",Jkt="Pashto",Qkt="Portuguese",eDt="Quechua",tDt="Raeto Romance",iDt="Kirundi",nDt="Romanian",rDt="Russian",sDt="Rwandi",oDt="Sanskrit",aDt="Sardinian",lDt="Sindhi",uDt="Sango",cDt="Serbo-Croatian",hDt="Sinhalese",dDt="Slovak",fDt="Slovenian",pDt="Samoan",gDt="Shona",mDt="Somalia",yDt="Albanian",vDt="Serbian",_Dt="Swati",bDt="Southern Sotho",xDt="Sundanese",wDt="Swedish",EDt="Swahili",CDt="Tamil",SDt="Telugu",TDt="Tajik",ADt="Thai",RDt="Tigrinya",kDt="Turkmen",DDt="Tagalog",LDt="Tswana",MDt="Tonga",IDt="Turkish",ODt="Tsonga",PDt="Tatar",FDt="Twi",NDt="Tahitian",$Dt="Uyghur",BDt="Ukrainian",jDt="Urdu",zDt="Venda",GDt="Vietnamese",UDt="Volapük",qDt="Walloon",VDt="Wolof",HDt="Xhosa",WDt="Yiddish",XDt="Yoruba",YDt="Zhuang",ZDt="Chinese",KDt="Zulu",JDt={aa:IAt,ab:OAt,af:PAt,ak:FAt,am:NAt,an:$At,ar:BAt,as:jAt,av:zAt,ay:GAt,az:UAt,ba:qAt,be:VAt,bg:HAt,bh:WAt,bi:XAt,bm:YAt,bn:ZAt,bo:KAt,br:JAt,bs:QAt,ca:eRt,ce:tRt,ch:iRt,co:nRt,cr:rRt,cs:sRt,cu:oRt,cv:aRt,cy:lRt,da:uRt,de:cRt,dv:hRt,dz:dRt,ee:fRt,el:pRt,en:gRt,eo:mRt,es:yRt,et:vRt,eu:_Rt,fa:bRt,ff:xRt,fi:wRt,fj:ERt,fo:CRt,fr:SRt,fy:TRt,ga:ARt,gd:RRt,gl:kRt,gn:DRt,gu:LRt,gv:MRt,ha:IRt,he:ORt,hi:PRt,ho:FRt,hr:NRt,ht:$Rt,hu:BRt,hy:jRt,hz:zRt,ia:GRt,id:URt,ie:qRt,ig:VRt,ii:HRt,ik:WRt,io:XRt,is:YRt,it:ZRt,iu:KRt,ja:JRt,jv:QRt,ka:ekt,kg:tkt,ki:ikt,kj:nkt,kk:rkt,kl:skt,km:okt,kn:akt,ko:lkt,kr:ukt,ks:ckt,ku:hkt,kv:dkt,kw:fkt,ky:pkt,la:gkt,lb:mkt,lg:ykt,li:vkt,ln:_kt,lo:bkt,lt:xkt,lv:wkt,mg:Ekt,mh:Ckt,mi:Skt,mk:Tkt,ml:Akt,mn:Rkt,mo:kkt,mr:Dkt,ms:Lkt,mt:Mkt,my:Ikt,na:Okt,nd:Pkt,ne:Fkt,ng:Nkt,nl:$kt,nn:Bkt,no:jkt,nr:zkt,nv:Gkt,ny:Ukt,oc:qkt,oj:Vkt,om:Hkt,or:Wkt,os:Xkt,pa:Ykt,pi:Zkt,pl:Kkt,ps:Jkt,pt:Qkt,qu:eDt,rm:tDt,rn:iDt,ro:nDt,ru:rDt,rw:sDt,sa:oDt,sc:aDt,sd:lDt,sg:uDt,sh:cDt,si:hDt,sk:dDt,sl:fDt,sm:pDt,sn:gDt,so:mDt,sq:yDt,sr:vDt,ss:_Dt,st:bDt,su:xDt,sv:wDt,sw:EDt,ta:CDt,te:SDt,tg:TDt,th:ADt,ti:RDt,tk:kDt,tl:DDt,tn:LDt,to:MDt,tr:IDt,ts:ODt,tt:PDt,tw:FDt,ty:NDt,ug:$Dt,uk:BDt,ur:jDt,ve:zDt,vi:GDt,vo:UDt,wa:qDt,wo:VDt,xh:HDt,yi:WDt,yo:XDt,za:YDt,zh:ZDt,zu:KDt};var X3,Oxe;function u3e(){if(Oxe)return X3;Oxe=1;const i=WC(),e=P6(),t=v1(),n=L6,r={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,u=null){let c=i.isObject(u)&&typeof u=="string"?u.title:s;return i.toLink(s,c,u.rel||"")},formatLink(s){return i.toList(s,!1,o=>i.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return i.e(i.t(r._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const u=n.getDependency("content-type");if(!u)return l?"":i.e(s);let c;try{c=u.parse(s)}catch(h){return console.warn(h),l?"":i.e(s)}switch(c.type){case"image/tiff":return c.parameters.application==="geotiff"?c.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB2";case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";default:{let[h,d]=c.type.split("/");if(d=i.formatKey(d.replace(/^(vnd|x)[.+-]/,"")),l)return d;switch(h){case"audio":return`${d} audio`;case"image":return`${d} image`;case"font":return"Font";case"model":return`${d} 3D model`;case"video":return`${d} video`;case"text":case"application":return d;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return t.dateTimeFormatter.format(new Date(s))}catch{}return e.null()},formatPercent0to1(s,o,a={}){return e.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return t.dateFormatter.format(new Date(s))}catch{}return e.null()},formatDuration(s){if(typeof s=="string"){const o=n.getDependency("@musement/iso-duration");if(!o)return i.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(s).humanize("en");return u.length===0?i.e(i.t("none")):i.e(u)}return e.null()},formatLanguageCode(s){if(Array.isArray(s))return i.toList(s,!0,r.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return e.null();const o=JDt,[a,...l]=s.split("-");if(a in o){const u=o[a];return l.length>0?i.e(i.t(`${u} (${l.join(" ")})`)):i.e(i.t(u))}return i.e(i.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return e.null();if(s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return i.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let u=Array.isArray(l.links)?l.links.filter(c=>i.isObject(c)&&typeof c.href=="string"&&c.rel==="license"):[];return u.length>0?i.toList(u,!1,c=>i.toLink(c.href,c.title||s,"license")):e.string(s)},formatProviders(s){return i.toList(s,!1,o=>{let a=o.name,l="",u="";return typeof o.url=="string"&&o.url.length>0&&(a=i.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(c=>e.format(c)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(u=r.formatCommonMark(o.description)),`${a}${l}${u}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return e.null();const o=n.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!r.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else r.allowHtmlInCommonMark?a=s:a=i.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!i.isObject(s))return e.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return i.toList(o,!0,null,!1)},formatDOI(s){return s=e.format(s),i.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return i.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return i.toLink(o,a)}return e.format(o)})},formatEPSG(s){return typeof s=="string"&&(s=s.replace(/^epsg:/i,"")),s=parseInt(s,10),s>0?i.toLink(`http://epsg.io/${s}`,s):e.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?e.null():s[0]===s[1]?e.format(s[0],a.unit):s[0]===null?`< ${e.format(s[1],a.unit)}`:s[1]===null?`> ${e.format(s[0],a.unit)}`:s.map(l=>e.format(l,a.unit)).join(" – ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?e.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return i.isObject(s)?i.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+r.formatEPSG(s):typeof s.name=="string"?e.string(s.name):e.object(s):e.null()},formatTemporalExtent(s,o,a={}){if(!Array.isArray(s)||s.length!==2)return e.null();s=s.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=s;if(l||u){const c=a.shorten?t.dateFormatter:t.dateTimeFormatter;return l?u?c.formatRange(l,u):i.t("{0} until present",[c.format(l)]):i.t("Until {0}",[c.format(u)])}}catch{}return e.null()},formatTemporalExtents(s,o,a={}){let l=(u,c)=>u[0]===null?-1:t.collator.compare(u[0],c[0]);return i.toList(s,l,u=>r.formatTemporalExtent(u,o,a))},formatWKT2(s){if(typeof s!="string")return e.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${u}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return e.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return i.unit((s/Math.pow(1024,o)).toFixed(2)*1,r.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return e.null();const o=n.getDependency("multihashes");if(!o)return i.e(s);try{const a=o.decode(i.hexToUint8(s)),l=i.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${i.e(i.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${i.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return e.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?i.t("non-standard"):typeof s=="string"&&s in r.fileDataTypes?i.abbrev(i.t(s),i.t(r.fileDataTypes[s])):e.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${r.formatCSV(l)}]`)}return o.join("<br>")}else return r.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>e.format(l,a.unit)).join(" × "):e.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(e.format).join(o?"; ":", ")}else return e.format(s)},formatImage(s,o){let a="",l=null;if(i.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return e.format(l);return`<img src="${i.e(l)}" title="${i.e(a)}" class="${i.e(o.replace(":","_"))}">`},formatPhone(s){return i.toLink(`tel:${s}`,s)},formatEmail(s){return i.toLink(`mailto:${s}`,s)},formatConcepts(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=i.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${i.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=i.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${i.e(o.description)}</small>`),a})},formatAddress(s){return i.toList(s,!1,o=>{if(!i.isObject(o))return e.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return e.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return e.format(s);let o=function(c,h,d,f){let p=h.length;if(p%2===1)c.push(`Code: ${h}`);else{let m=p/2,y=h.substring(0,m);c.push(`${d}: ${y}`);let v=h.substring(m,p);c.push(`${f}: ${v}`)}},[a,l]=s.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(i.abbrev(i.t(a),i.t("Military Grid Reference System")));let[,c,h,d,f]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${i.t("UTM Zone")}: ${c}`),u.push(`${i.t("Latitude Band")}: ${h}`),u.push(`${i.t("Square Identifier")}: ${d}`),f&&o(u,f,i.t("Easting"),i.t("Northing"));break;case"MSIN":u.push(i.t("MODIS Sinusoidal Tile Grid")),o(u,l,i.t("Horizontal"),i.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);u.push(i.abbrev(i.t("WRS-"+p),i.t("Worldwide Reference System "+p))),o(u,l,i.t("Path"),i.t("Row"));break;case"DOQ":u.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quadrangle"))),u.push(`${i.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(i.t(a),i.t("Digital Orthophoto Quarter Quadrangle")));let m=l.substr(0,l.length-2);u.push(`${i.t("Quadrangle")}: ${m}`);let y=l.substr(-2),v=y[0]==="N"?i.t("North"):i.t("South"),b=y[1]==="E"?i.t("East"):i.t("West");u.push(`${i.t("Quarter")}: ${v} ${b}`);break;case"MXRA":u.push(i.t("Maxar ARD Tile Grid"));let[x,w]=l.split(/-(.*)/);x.startsWith("Z")&&(x=x.substring(1)),u.push(`${i.t("UTM Zone")}: ${x}`),u.push(`${i.t("Quadkey")}: ${w}`);break;case"EASE":let[C,D]=l.split("-");if(C==="DGGS"){u.push(i.t("EASE-DGGS"));let[L,O,...$]=D.split(".");if(u.push(`${i.t("Level")}: ${L}`),O.length===6){u.push(`${i.t("Level 0 row cell")}: ${O.substring(0,3)}`),u.push(`${i.t("Level 0 column cell")}: ${O.substring(3,6)}`);for(let q in $){let M=$[q];M.length===2&&(u.push(`${i.t("Fraction of level {i} row cell",{i:q})}: ${M[0]}`),u.push(`${i.t("Fraction of level {i} column cell",{i:q})}: ${M[1]}`))}}break}case"CDEM":let[,R,A]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(i.t("Copernicus Digital Elevation Model Grid")),u.push(`${i.t("Easting")}: ${A}`),u.push(`${i.t("Northing")}: ${R}`);default:u.push(s)}return u.join("<br>")}};return X3=r,X3}var Y3,Pxe;function QDt(){if(Pxe)return Y3;Pxe=1;const i=L6,e=WC(),t=v1(),n=P6(),r=u3e();function s(y,v,b,x,w){let C={};for(let D in v){let R;try{let A=D.split(/:(.*)/);A.length===1&&A.unshift(w);let L=A[0];if(typeof x=="function"&&!x(D,[D]))continue;R=v[D];let O=i.getSpecification(D,b);O.ext&&(L=O.ext);let $=!1;b==="summaries"&&O.listWithKeys&&Array.isArray(R)&&R.length>0&&(R=R[0],$=!0);let q=null,M=[];if(e.isObject(O.items)){let N=R;O.listWithKeys&&(N=Object.values(N));let B=[];Array.isArray(N)?B=e.keysFromListOfObjects(N):e.isObject(N)&&(B=Object.keys(N)),q={},M=O.itemOrder.filter(W=>B.includes(W)),B.forEach(W=>{typeof O.items[W]>"u"?(q[W]={label:e.formatKey(W),explain:W},M.push(W)):(q[W]=Object.assign({},O.items[W]),q[W].label=p(W,O.items[W]))})}let F;if(b==="summaries")if(!$&&e.isObject(R))if(typeof R.minimum<"u"&&typeof R.maximum<"u"){const N=B=>f(B,D,y,v,O,x,[D]);R.minimum===R.maximum?F=N(R.minimum):R.minimum===null?F=`< ${N(R.maximum)}`:R.maximum===null?F=`> ${N(R.minimum)}`:F=`${N(R.minimum)} – ${N(R.maximum)}`}else F=n.object(R);else if(i.externalRenderer&&q){let N=$?Object.assign({},R):R.slice(0);for(let B in N){let W=e.isObject(N[B])?{}:[];for(let K in q)W[K]=f(N[B][K],K,y,v,q[K]);N[B]=W}}else Array.isArray(R)?F=e.toList(R,!O.custom&&!O.items,N=>f(N,D,y,v,O)):console.warn(`Invalid summary value: ${R}`);typeof F>"u"&&(F=f(R,D,y,v,O,x,[D])),e.isObject(C[L])||(C[L]={extension:L,label:m(L),properties:{}}),C[L].properties[D]={label:p(D,O),value:R,formatted:F,items:q,itemOrder:M,spec:O}}catch(A){console.error(`Field '${D}' with value '${R}' resulted in an error`,A)}}return Object.values(C).sort((D,R)=>t.collator.compare(D.extension,R.extension))}function o(y,v,b=null,x=""){return s(v,y,"assets",b,x)}function a(y,v,b=null,x=""){return s(v,y,"links",b,x)}function l(y,v,b=null,x=""){return s(v,y,"providers",b,x)}function u(y,v=null,b=""){return s(y,y.summaries,"summaries",v,b)}function c(y,v=null,b=""){return s(y,y,"collection",v,b)}function h(y,v=null,b=""){return s(y,y,"catalog",v,b)}function d(y,v=null,b=""){return s(y,y.properties,"metadata",v,b)}function f(y,v,b=null,x=null,w=null,C=null,D=[]){if(e.isObject(w)||(w=i.getSpecification(v)),typeof w.format=="string"){let R=r[`format${w.format}`];return R||console.warn(`Formatter '${w.format}' not available.`),R(y,v,w,b,x)}else{if(typeof w.formatter=="function")return w.formatter(y,v,w,b,x);if(e.isObject(w.mapping)){let R=String(y);return typeof w.mapping[R]<"u"?y=w.mapping[R]:typeof w.mapping[R.toLowerCase()]<"u"?y=w.mapping[R.toLowerCase()]:typeof w.mapping[R.toUpperCase()]<"u"&&(y=w.mapping[R.toUpperCase()]),n.format(e.t(y),w.unit)}else{if(y===null&&w.null)return n.null(w.null);if(Array.isArray(y)){let R=(A,L)=>f(A,v,b,x,w,C,D.concat([L]));return typeof C=="function"&&D.length>0&&(y=y.filter((A,L)=>C(D[0],D.concat([L])))),i.externalRenderer&&(w.custom||w.items)?y.map(R):e.toList(y,!1,R)}else if(e.isObject(y)){let R=L=>e.isObject(w.items)?w.listWithKeys?{items:w.items,itemOrder:w.itemOrder}:w.items[L]:e.isObject(w.properties)?w.properties[L]:{},A=(L,O,$)=>f(L,O,b,$,R(O),C,D.concat([O]));if(i.externalRenderer&&(w.custom||w.items||w.properties)){let L={};for(let O in y)typeof C=="function"&&D.length>0&&!C(D[0],D.concat([k]))||(L[O]=A(y[O],O,y));return L}else{let L=$=>p($,R($)),O=w.listWithKeys?[]:w.itemOrder;return e.toObject(y,A,L,O,C,D)}}else return n.format(y,w.unit)}}}function p(y,v=null){if(e.isObject(v)||(v=i.getSpecification(y)),e.isObject(v)&&typeof v.label=="string"){if(typeof v.explain=="string")return v.explain.match(/^https?:\/\//i)?e.toLink(v.explain,e.t(v.label),"about"):e.abbrev(e.t(v.label),e.t(v.explain));if(typeof v.label=="string")return e.t(v.label)}return e.formatKey(y)}function m(y){return p(y,i.getExtension(y))}return Y3={format:f,label:p,extension:m,formatCatalog:h,formatCollection:c,formatSummaries:u,formatItemProperties:d,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},Y3}const X0=L6;X0.importFields(pCt);X0.addDependency("@musement/iso-duration",vSt);X0.addDependency("content-type",_St());X0.addDependency("commonmark",bSt());X0.addDependency("multihashes",MAt());var c3e={...QDt(),Fields:X0.exportFields(),Registry:X0,Helper:WC(),DataTypes:P6(),Formatters:u3e(),I18N:v1()};const Z3=Ea(c3e);var eLt=Object.defineProperty,tLt=Object.getOwnPropertyDescriptor,Ql=(i,e,t,n)=>{for(var r=n>1?void 0:n?tLt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&eLt(e,t,r),r};let Ru=class extends Yn{constructor(){super(...arguments),this.header=[],this.tags=[],this.properties=[],this.featured=[],this.footer=[],this.styleOverride="",this.stacInfo=[],this.fetchStac=async i=>{const t=await(await fetch(`${i}?ts=${Date.now()}`)).json();this.stacInfo=await this.parseStac(t),this.dispatchEvent(new CustomEvent("loaded"))},this.parseStac=async i=>{if(i.type==="Catalog")return Z3.formatCatalog(i);if(i.type==="Collection")return Z3.formatCollection(i);if(i.type==="Feature")return Z3.formatItemProperties(i)}}buildProperties(i){c3e.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0;const e=(t,n)=>sCt(Object.entries(this.stacProperties).filter(([r])=>t===this.properties&&(!t||t.length<1)?!0:t==null?void 0:t.includes(r)).reverse().sort(([r],[s])=>(t==null?void 0:t.indexOf(r))>(t==null?void 0:t.indexOf(s))?1:-1),n);return i.length<1?null:(this.stacProperties=i.reduce((t,n)=>({...t,...n.properties}),{}),tt`
      ${e(this.header).length>0?tt`
            <header part="header">
              <slot name="header">
                ${$l(e(this.header),([,t],n)=>x_`
              <h${kh((n+1).toString())}>${wh(t.formatted)}</h${kh((n+1).toString())}>
              `)}
              </slot>
            </header>
          `:In}
      <main>
        ${e(this.tags).length+e(this.properties).length>0?tt`
              <section id="tags" part="tags">
                <ul>
                  ${$l(e(this.tags),([,t])=>tt`<slot name=${t.label.toLowerCase()}
                      ><li>
                        <span class="label"
                          >${wh(t.formatted)}</span
                        >
                      </li></slot
                    >`)}
                </ul>
              </section>
              <section id="properties" part="properties">
                <ul
                  class=${e(this.properties).length===1?"single-property":In}
                >
                  ${$l(e(this.properties),([,t])=>tt`
                      <slot name=${t.label.toLowerCase()}>
                        <li>
                          ${Hi(e(this.properties).length>1,()=>tt` <span class="label">
                                ${t.label}</span
                              ><span class="colon">:</span>`)}
                          <span class="value">
                            ${Hi(t.label.toLowerCase()==="description",()=>tt`
                                <eox-stacinfo-shadow
                                  .content=${t.formatted}
                                >
                                </eox-stacinfo-shadow>
                              `,()=>tt`${wh(t.formatted)}`)}
                          </span>
                        </li>
                      </slot>
                    `)}
                </ul>
              </section>
            `:In}
        ${e(this.featured,"featured").length>0?tt`
              <section id="featured" part="featured">
                ${$l(e(this.featured,"featured").filter(([t,n])=>n.length!==void 0?n.length>0:!0),([,t])=>tt`
                    <details>
                      <summary>
                        <slot
                          name="featured-${t.label.toLowerCase()}-summary"
                          class="title"
                        >
                          ${t.label}
                          ${Hi(t.length,()=>tt`
                              <span class="count">${t.length}</span>
                            `)}
                        </slot>
                      </summary>
                      <div class="featured-container">
                        <slot name="featured-${t.label.toLowerCase()}">
                          ${Hi(t.label.toLowerCase()==="description",()=>tt`
                              <eox-stacinfo-shadow .content=${t.formatted}>
                              </eox-stacinfo-shadow>
                            `,()=>tt`${wh(t.formatted)}`)}
                        </slot>
                      </div>
                    </details>
                  `)}
              </section>
            `:In}
      </main>
      ${e(this.footer).length>0?tt`
            <footer part="footer">
              <slot name="footer">
                ${$l(e(this.footer),([t,n],r)=>x_`
                <div class="footer-container">
                  <h${kh((r+1).toString())}>
                    ${wh(n.label)}
                  </h${kh((r+1).toString())}>
                  <small>${wh(n.formatted)}</small>
                </div>
                ${Hi(t==="sci:citation",()=>tt`
                    <button
                      class="copy icon"
                      @click=${()=>navigator.clipboard.writeText(n.formatted)}
                    >
                      copy
                    </button>
                  `)}
              `)}
              </slot>
            </footer>
          `:In}
    `)}render(){return tt`
      <style>
        ${oCt}
        ${!this.unstyled&&aCt}
        ${this.styleOverride}
      </style>
      <slot></slot>
      ${this.buildProperties(this.stacInfo)}
    `}updated(i){i.has("for")&&this.fetchStac(this.for)}};Ql([$t({attribute:"allow-html"})],Ru.prototype,"allowHtml",2);Ql([$t({type:Boolean})],Ru.prototype,"unstyled",2);Ql([$t()],Ru.prototype,"for",2);Ql([$t({type:Array})],Ru.prototype,"header",2);Ql([$t({type:Array})],Ru.prototype,"tags",2);Ql([$t({type:Array})],Ru.prototype,"properties",2);Ql([$t({type:Array})],Ru.prototype,"featured",2);Ql([$t({type:Array})],Ru.prototype,"footer",2);Ql([$t({attribute:"style-override"})],Ru.prototype,"styleOverride",2);Ql([Ks()],Ru.prototype,"stacInfo",2);Ql([Ks()],Ru.prototype,"stacProperties",2);Ru=Ql([ta("eox-stacinfo")],Ru);let qF=class extends Yn{render(){return tt`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${wh(this.content)}</div>`}};Ql([$t()],qF.prototype,"content",2);qF=Ql([ta("eox-stacinfo-shadow")],qF);const Fxe={};function iLt(i){let e=Fxe[i];if(e)return e;e=Fxe[i]=[];for(let t=0;t<128;t++){const n=String.fromCharCode(t);e.push(n)}for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);e[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return e}function Sb(i,e){typeof e!="string"&&(e=Sb.defaultChars);const t=iLt(e);return i.replace(/(%[a-f0-9]{2})+/gi,function(n){let r="";for(let s=0,o=n.length;s<o;s+=3){const a=parseInt(n.slice(s+1,s+3),16);if(a<128){r+=t[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(n.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?r+="��":r+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(n.slice(s+4,s+6),16),u=parseInt(n.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const c=a<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?r+="���":r+=String.fromCharCode(c),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(n.slice(s+4,s+6),16),u=parseInt(n.slice(s+7,s+9),16),c=parseInt(n.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let h=a<<18&1835008|l<<12&258048|u<<6&4032|c&63;h<65536||h>1114111?r+="����":(h-=65536,r+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),s+=9;continue}}r+="�"}return r})}Sb.defaultChars=";/?:@&=+$,#";Sb.componentChars="";const Nxe={};function nLt(i){let e=Nxe[i];if(e)return e;e=Nxe[i]=[];for(let t=0;t<128;t++){const n=String.fromCharCode(t);/^[0-9a-z]$/i.test(n)?e.push(n):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<i.length;t++)e[i.charCodeAt(t)]=i[t];return e}function YC(i,e,t){typeof e!="string"&&(t=e,e=YC.defaultChars),typeof t>"u"&&(t=!0);const n=nLt(e);let r="";for(let s=0,o=i.length;s<o;s++){const a=i.charCodeAt(s);if(t&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(i.slice(s+1,s+3))){r+=i.slice(s,s+3),s+=2;continue}if(a<128){r+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=i.charCodeAt(s+1);if(l>=56320&&l<=57343){r+=encodeURIComponent(i[s]+i[s+1]),s++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(i[s])}return r}YC.defaultChars=";/?:@&=+$,-_.!~*'()#";YC.componentChars="-_.!~*'()";function F6(i){let e="";return e+=i.protocol||"",e+=i.slashes?"//":"",e+=i.auth?i.auth+"@":"",i.hostname&&i.hostname.indexOf(":")!==-1?e+="["+i.hostname+"]":e+=i.hostname||"",e+=i.port?":"+i.port:"",e+=i.pathname||"",e+=i.search||"",e+=i.hash||"",e}function Lk(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const rLt=/^([a-z0-9.+-]+:)/i,sLt=/:[0-9]*$/,oLt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,aLt=["<",">",'"',"`"," ","\r",`
`,"	"],lLt=["{","}","|","\\","^","`"].concat(aLt),uLt=["'"].concat(lLt),$xe=["%","/","?",";","#"].concat(uLt),Bxe=["/","?","#"],cLt=255,jxe=/^[+a-z0-9A-Z_-]{0,63}$/,hLt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,zxe={javascript:!0,"javascript:":!0},Gxe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function N6(i,e){if(i&&i instanceof Lk)return i;const t=new Lk;return t.parse(i,e),t}Lk.prototype.parse=function(i,e){let t,n,r,s=i;if(s=s.trim(),!e&&i.split("#").length===1){const u=oLt.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=rLt.exec(s);if(o&&(o=o[0],t=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=s.substr(0,2)==="//",r&&!(o&&zxe[o])&&(s=s.substr(2),this.slashes=!0)),!zxe[o]&&(r||o&&!Gxe[o])){let u=-1;for(let p=0;p<Bxe.length;p++)n=s.indexOf(Bxe[p]),n!==-1&&(u===-1||n<u)&&(u=n);let c,h;u===-1?h=s.lastIndexOf("@"):h=s.lastIndexOf("@",u),h!==-1&&(c=s.slice(0,h),s=s.slice(h+1),this.auth=c),u=-1;for(let p=0;p<$xe.length;p++)n=s.indexOf($xe[p]),n!==-1&&(u===-1||n<u)&&(u=n);u===-1&&(u=s.length),s[u-1]===":"&&u--;const d=s.slice(0,u);s=s.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){const p=this.hostname.split(/\./);for(let m=0,y=p.length;m<y;m++){const v=p[m];if(v&&!v.match(jxe)){let b="";for(let x=0,w=v.length;x<w;x++)v.charCodeAt(x)>127?b+="x":b+=v[x];if(!b.match(jxe)){const x=p.slice(0,m),w=p.slice(m+1),C=v.match(hLt);C&&(x.push(C[1]),w.unshift(C[2])),w.length&&(s=w.join(".")+s),this.hostname=x.join(".");break}}}}this.hostname.length>cLt&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),Gxe[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Lk.prototype.parseHost=function(i){let e=sLt.exec(i);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(this.hostname=i)};const dLt=Object.freeze(Object.defineProperty({__proto__:null,decode:Sb,encode:YC,format:F6,parse:N6},Symbol.toStringTag,{value:"Module"})),h3e=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d3e=/[\0-\x1F\x7F-\x9F]/,fLt=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,$6=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,f3e=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,p3e=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,pLt=Object.freeze(Object.defineProperty({__proto__:null,Any:h3e,Cc:d3e,Cf:fLt,P:$6,S:f3e,Z:p3e},Symbol.toStringTag,{value:"Module"})),gLt=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(i=>i.charCodeAt(0))),mLt=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(i=>i.charCodeAt(0)));var K3;const yLt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),vLt=(K3=String.fromCodePoint)!==null&&K3!==void 0?K3:function(i){let e="";return i>65535&&(i-=65536,e+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),e+=String.fromCharCode(i),e};function _Lt(i){var e;return i>=55296&&i<=57343||i>1114111?65533:(e=yLt.get(i))!==null&&e!==void 0?e:i}var Yo;(function(i){i[i.NUM=35]="NUM",i[i.SEMI=59]="SEMI",i[i.EQUALS=61]="EQUALS",i[i.ZERO=48]="ZERO",i[i.NINE=57]="NINE",i[i.LOWER_A=97]="LOWER_A",i[i.LOWER_F=102]="LOWER_F",i[i.LOWER_X=120]="LOWER_X",i[i.LOWER_Z=122]="LOWER_Z",i[i.UPPER_A=65]="UPPER_A",i[i.UPPER_F=70]="UPPER_F",i[i.UPPER_Z=90]="UPPER_Z"})(Yo||(Yo={}));const bLt=32;var gg;(function(i){i[i.VALUE_LENGTH=49152]="VALUE_LENGTH",i[i.BRANCH_LENGTH=16256]="BRANCH_LENGTH",i[i.JUMP_TABLE=127]="JUMP_TABLE"})(gg||(gg={}));function VF(i){return i>=Yo.ZERO&&i<=Yo.NINE}function xLt(i){return i>=Yo.UPPER_A&&i<=Yo.UPPER_F||i>=Yo.LOWER_A&&i<=Yo.LOWER_F}function wLt(i){return i>=Yo.UPPER_A&&i<=Yo.UPPER_Z||i>=Yo.LOWER_A&&i<=Yo.LOWER_Z||VF(i)}function ELt(i){return i===Yo.EQUALS||wLt(i)}var Go;(function(i){i[i.EntityStart=0]="EntityStart",i[i.NumericStart=1]="NumericStart",i[i.NumericDecimal=2]="NumericDecimal",i[i.NumericHex=3]="NumericHex",i[i.NamedEntity=4]="NamedEntity"})(Go||(Go={}));var Xp;(function(i){i[i.Legacy=0]="Legacy",i[i.Strict=1]="Strict",i[i.Attribute=2]="Attribute"})(Xp||(Xp={}));class CLt{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=Go.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Xp.Strict}startEntity(e){this.decodeMode=e,this.state=Go.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Go.EntityStart:return e.charCodeAt(t)===Yo.NUM?(this.state=Go.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Go.NamedEntity,this.stateNamedEntity(e,t));case Go.NumericStart:return this.stateNumericStart(e,t);case Go.NumericDecimal:return this.stateNumericDecimal(e,t);case Go.NumericHex:return this.stateNumericHex(e,t);case Go.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|bLt)===Yo.LOWER_X?(this.state=Go.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Go.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){const s=n-t;this.result=this.result*Math.pow(r,s)+parseInt(e.substr(t,s),r),this.consumed+=s}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(VF(r)||xLt(r))t+=1;else return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(VF(r))t+=1;else return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Yo.SEMI)this.consumed+=1;else if(this.decodeMode===Xp.Strict)return 0;return this.emitCodePoint(_Lt(this.result),this.consumed),this.errors&&(e!==Yo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let r=n[this.treeIndex],s=(r&gg.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=SLt(n,r,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Xp.Attribute&&(s===0||ELt(o))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],s=(r&gg.VALUE_LENGTH)>>14,s!==0){if(o===Yo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Xp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,r=(n[t]&gg.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:r}=this;return this.emitCodePoint(t===1?r[e]&~gg.VALUE_LENGTH:r[e+1],n),t===3&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case Go.NamedEntity:return this.result!==0&&(this.decodeMode!==Xp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Go.NumericDecimal:return this.emitNumericEntity(0,2);case Go.NumericHex:return this.emitNumericEntity(0,3);case Go.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Go.EntityStart:return 0}}}function g3e(i){let e="";const t=new CLt(i,n=>e+=vLt(n));return function(r,s){let o=0,a=0;for(;(a=r.indexOf("&",a))>=0;){e+=r.slice(o,a),t.startEntity(s);const u=t.write(r,a+1);if(u<0){o=a+t.end();break}o=a+u,a=u===0?o+1:o}const l=e+r.slice(o);return e="",l}}function SLt(i,e,t,n){const r=(e&gg.BRANCH_LENGTH)>>7,s=e&gg.JUMP_TABLE;if(r===0)return s!==0&&n===s?t:-1;if(s){const l=n-s;return l<0||l>=r?-1:i[t+l]-1}let o=t,a=o+r-1;for(;o<=a;){const l=o+a>>>1,u=i[l];if(u<n)o=l+1;else if(u>n)a=l-1;else return i[l+r]}return-1}const TLt=g3e(gLt);g3e(mLt);function m3e(i,e=Xp.Legacy){return TLt(i,e)}function ALt(i){return Object.prototype.toString.call(i)}function B6(i){return ALt(i)==="[object String]"}const RLt=Object.prototype.hasOwnProperty;function kLt(i,e){return RLt.call(i,e)}function YL(i){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){i[n]=t[n]})}}),i}function y3e(i,e,t){return[].concat(i.slice(0,e),t,i.slice(e+1))}function j6(i){return!(i>=55296&&i<=57343||i>=64976&&i<=65007||(i&65535)===65535||(i&65535)===65534||i>=0&&i<=8||i===11||i>=14&&i<=31||i>=127&&i<=159||i>1114111)}function Mk(i){if(i>65535){i-=65536;const e=55296+(i>>10),t=56320+(i&1023);return String.fromCharCode(e,t)}return String.fromCharCode(i)}const v3e=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,DLt=/&([a-z#][a-z0-9]{1,31});/gi,LLt=new RegExp(v3e.source+"|"+DLt.source,"gi"),MLt=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function ILt(i,e){if(e.charCodeAt(0)===35&&MLt.test(e)){const n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return j6(n)?Mk(n):i}const t=m3e(i);return t!==i?t:i}function OLt(i){return i.indexOf("\\")<0?i:i.replace(v3e,"$1")}function Tb(i){return i.indexOf("\\")<0&&i.indexOf("&")<0?i:i.replace(LLt,function(e,t,n){return t||ILt(e,n)})}const PLt=/[&<>"]/,FLt=/[&<>"]/g,NLt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function $Lt(i){return NLt[i]}function Bg(i){return PLt.test(i)?i.replace(FLt,$Lt):i}const BLt=/[.?*+^$[\]\\(){}|-]/g;function jLt(i){return i.replace(BLt,"\\$&")}function es(i){switch(i){case 9:case 32:return!0}return!1}function M2(i){if(i>=8192&&i<=8202)return!0;switch(i){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function I2(i){return $6.test(i)||f3e.test(i)}function O2(i){switch(i){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function ZL(i){return i=i.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(i=i.replace(/ẞ/g,"ß")),i.toLowerCase().toUpperCase()}const zLt={mdurl:dLt,ucmicro:pLt},GLt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:y3e,assign:YL,escapeHtml:Bg,escapeRE:jLt,fromCodePoint:Mk,has:kLt,isMdAsciiPunct:O2,isPunctChar:I2,isSpace:es,isString:B6,isValidEntityCode:j6,isWhiteSpace:M2,lib:zLt,normalizeReference:ZL,unescapeAll:Tb,unescapeMd:OLt},Symbol.toStringTag,{value:"Module"}));function ULt(i,e,t){let n,r,s,o;const a=i.posMax,l=i.pos;for(i.pos=e+1,n=1;i.pos<a;){if(s=i.src.charCodeAt(i.pos),s===93&&(n--,n===0)){r=!0;break}if(o=i.pos,i.md.inline.skipToken(i),s===91){if(o===i.pos-1)n++;else if(t)return i.pos=l,-1}}let u=-1;return r&&(u=i.pos),i.pos=l,u}function qLt(i,e,t){let n,r=e;const s={ok:!1,pos:0,str:""};if(i.charCodeAt(r)===60){for(r++;r<t;){if(n=i.charCodeAt(r),n===10||n===60)return s;if(n===62)return s.pos=r+1,s.str=Tb(i.slice(e+1,r)),s.ok=!0,s;if(n===92&&r+1<t){r+=2;continue}r++}return s}let o=0;for(;r<t&&(n=i.charCodeAt(r),!(n===32||n<32||n===127));){if(n===92&&r+1<t){if(i.charCodeAt(r+1)===32)break;r+=2;continue}if(n===40&&(o++,o>32))return s;if(n===41){if(o===0)break;o--}r++}return e===r||o!==0||(s.str=Tb(i.slice(e,r)),s.pos=r,s.ok=!0),s}function VLt(i,e,t,n){let r,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)o.str=n.str,o.marker=n.marker;else{if(s>=t)return o;let a=i.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;e++,s++,a===40&&(a=41),o.marker=a}for(;s<t;){if(r=i.charCodeAt(s),r===o.marker)return o.pos=s+1,o.str+=Tb(i.slice(e,s)),o.ok=!0,o;if(r===40&&o.marker===41)return o;r===92&&s+1<t&&s++,s++}return o.can_continue=!0,o.str+=Tb(i.slice(e,s)),o}const HLt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:qLt,parseLinkLabel:ULt,parseLinkTitle:VLt},Symbol.toStringTag,{value:"Module"})),dd={};dd.code_inline=function(i,e,t,n,r){const s=i[e];return"<code"+r.renderAttrs(s)+">"+Bg(s.content)+"</code>"};dd.code_block=function(i,e,t,n,r){const s=i[e];return"<pre"+r.renderAttrs(s)+"><code>"+Bg(i[e].content)+`</code></pre>
`};dd.fence=function(i,e,t,n,r){const s=i[e],o=s.info?Tb(s.info).trim():"";let a="",l="";if(o){const c=o.split(/(\s+)/g);a=c[0],l=c.slice(2).join("")}let u;if(t.highlight?u=t.highlight(s.content,a,l)||Bg(s.content):u=Bg(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const c=s.attrIndex("class"),h=s.attrs?s.attrs.slice():[];c<0?h.push(["class",t.langPrefix+a]):(h[c]=h[c].slice(),h[c][1]+=" "+t.langPrefix+a);const d={attrs:h};return`<pre><code${r.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${r.renderAttrs(s)}>${u}</code></pre>
`};dd.image=function(i,e,t,n,r){const s=i[e];return s.attrs[s.attrIndex("alt")][1]=r.renderInlineAsText(s.children,t,n),r.renderToken(i,e,t)};dd.hardbreak=function(i,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};dd.softbreak=function(i,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};dd.text=function(i,e){return Bg(i[e].content)};dd.html_block=function(i,e){return i[e].content};dd.html_inline=function(i,e){return i[e].content};function _1(){this.rules=YL({},dd)}_1.prototype.renderAttrs=function(e){let t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+Bg(e.attrs[t][0])+'="'+Bg(e.attrs[t][1])+'"';return r};_1.prototype.renderToken=function(e,t,n){const r=e[t];let s="";if(r.hidden)return"";r.block&&r.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(r.nesting===-1?"</":"<")+r.tag,s+=this.renderAttrs(r),r.nesting===0&&n.xhtmlOut&&(s+=" /");let o=!1;if(r.block&&(o=!0,r.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===r.tag)&&(o=!1)}return s+=o?`>
`:">",s};_1.prototype.renderInline=function(i,e,t){let n="";const r=this.rules;for(let s=0,o=i.length;s<o;s++){const a=i[s].type;typeof r[a]<"u"?n+=r[a](i,s,e,t,this):n+=this.renderToken(i,s,e)}return n};_1.prototype.renderInlineAsText=function(i,e,t){let n="";for(let r=0,s=i.length;r<s;r++)switch(i[r].type){case"text":n+=i[r].content;break;case"image":n+=this.renderInlineAsText(i[r].children,e,t);break;case"html_inline":case"html_block":n+=i[r].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};_1.prototype.render=function(i,e,t){let n="";const r=this.rules;for(let s=0,o=i.length;s<o;s++){const a=i[s].type;a==="inline"?n+=this.renderInline(i[s].children,e,t):typeof r[a]<"u"?n+=r[a](i,s,e,t,this):n+=this.renderToken(i,s,e,t)}return n};function Xl(){this.__rules__=[],this.__cache__=null}Xl.prototype.__find__=function(i){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===i)return e;return-1};Xl.prototype.__compile__=function(){const i=this,e=[""];i.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),i.__cache__={},e.forEach(function(t){i.__cache__[t]=[],i.__rules__.forEach(function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||i.__cache__[t].push(n.fn))})})};Xl.prototype.at=function(i,e,t){const n=this.__find__(i),r=t||{};if(n===-1)throw new Error("Parser rule not found: "+i);this.__rules__[n].fn=e,this.__rules__[n].alt=r.alt||[],this.__cache__=null};Xl.prototype.before=function(i,e,t,n){const r=this.__find__(i),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+i);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};Xl.prototype.after=function(i,e,t,n){const r=this.__find__(i),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+i);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};Xl.prototype.push=function(i,e,t){const n=t||{};this.__rules__.push({name:i,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Xl.prototype.enable=function(i,e){Array.isArray(i)||(i=[i]);const t=[];return i.forEach(function(n){const r=this.__find__(n);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!0,t.push(n)},this),this.__cache__=null,t};Xl.prototype.enableOnly=function(i,e){Array.isArray(i)||(i=[i]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(i,e)};Xl.prototype.disable=function(i,e){Array.isArray(i)||(i=[i]);const t=[];return i.forEach(function(n){const r=this.__find__(n);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[r].enabled=!1,t.push(n)},this),this.__cache__=null,t};Xl.prototype.getRules=function(i){return this.__cache__===null&&this.__compile__(),this.__cache__[i]||[]};function sh(i,e,t){this.type=i,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}sh.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let n=0,r=t.length;n<r;n++)if(t[n][0]===e)return n;return-1};sh.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};sh.prototype.attrSet=function(e,t){const n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r};sh.prototype.attrGet=function(e){const t=this.attrIndex(e);let n=null;return t>=0&&(n=this.attrs[t][1]),n};sh.prototype.attrJoin=function(e,t){const n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t};function _3e(i,e,t){this.src=i,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}_3e.prototype.Token=sh;const WLt=/\r\n?|\n/g,XLt=/\0/g;function YLt(i){let e;e=i.src.replace(WLt,`
`),e=e.replace(XLt,"�"),i.src=e}function ZLt(i){let e;i.inlineMode?(e=new i.Token("inline","",0),e.content=i.src,e.map=[0,1],e.children=[],i.tokens.push(e)):i.md.block.parse(i.src,i.md,i.env,i.tokens)}function KLt(i){const e=i.tokens;for(let t=0,n=e.length;t<n;t++){const r=e[t];r.type==="inline"&&i.md.inline.parse(r.content,i.md,i.env,r.children)}}function JLt(i){return/^<a[>\s]/i.test(i)}function QLt(i){return/^<\/a\s*>/i.test(i)}function eMt(i){const e=i.tokens;if(i.md.options.linkify)for(let t=0,n=e.length;t<n;t++){if(e[t].type!=="inline"||!i.md.linkify.pretest(e[t].content))continue;let r=e[t].children,s=0;for(let o=r.length-1;o>=0;o--){const a=r[o];if(a.type==="link_close"){for(o--;r[o].level!==a.level&&r[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(JLt(a.content)&&s>0&&s--,QLt(a.content)&&s++),!(s>0)&&a.type==="text"&&i.md.linkify.test(a.content)){const l=a.content;let u=i.md.linkify.match(l);const c=[];let h=a.level,d=0;u.length>0&&u[0].index===0&&o>0&&r[o-1].type==="text_special"&&(u=u.slice(1));for(let f=0;f<u.length;f++){const p=u[f].url,m=i.md.normalizeLink(p);if(!i.md.validateLink(m))continue;let y=u[f].text;u[f].schema?u[f].schema==="mailto:"&&!/^mailto:/i.test(y)?y=i.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=i.md.normalizeLinkText(y):y=i.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,"");const v=u[f].index;if(v>d){const C=new i.Token("text","",0);C.content=l.slice(d,v),C.level=h,c.push(C)}const b=new i.Token("link_open","a",1);b.attrs=[["href",m]],b.level=h++,b.markup="linkify",b.info="auto",c.push(b);const x=new i.Token("text","",0);x.content=y,x.level=h,c.push(x);const w=new i.Token("link_close","a",-1);w.level=--h,w.markup="linkify",w.info="auto",c.push(w),d=u[f].lastIndex}if(d<l.length){const f=new i.Token("text","",0);f.content=l.slice(d),f.level=h,c.push(f)}e[t].children=r=y3e(r,o,c)}}}}const b3e=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,tMt=/\((c|tm|r)\)/i,iMt=/\((c|tm|r)\)/ig,nMt={c:"©",r:"®",tm:"™"};function rMt(i,e){return nMt[e.toLowerCase()]}function sMt(i){let e=0;for(let t=i.length-1;t>=0;t--){const n=i[t];n.type==="text"&&!e&&(n.content=n.content.replace(iMt,rMt)),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function oMt(i){let e=0;for(let t=i.length-1;t>=0;t--){const n=i[t];n.type==="text"&&!e&&b3e.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),n.type==="link_open"&&n.info==="auto"&&e--,n.type==="link_close"&&n.info==="auto"&&e++}}function aMt(i){let e;if(i.md.options.typographer)for(e=i.tokens.length-1;e>=0;e--)i.tokens[e].type==="inline"&&(tMt.test(i.tokens[e].content)&&sMt(i.tokens[e].children),b3e.test(i.tokens[e].content)&&oMt(i.tokens[e].children))}const lMt=/['"]/,Uxe=/['"]/g,qxe="’";function tA(i,e,t){return i.slice(0,e)+t+i.slice(e+1)}function uMt(i,e){let t;const n=[];for(let r=0;r<i.length;r++){const s=i[r],o=i[r].level;for(t=n.length-1;t>=0&&!(n[t].level<=o);t--);if(n.length=t+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){Uxe.lastIndex=l;const c=Uxe.exec(a);if(!c)break;let h=!0,d=!0;l=c.index+1;const f=c[0]==="'";let p=32;if(c.index-1>=0)p=a.charCodeAt(c.index-1);else for(t=r-1;t>=0&&!(i[t].type==="softbreak"||i[t].type==="hardbreak");t--)if(i[t].content){p=i[t].content.charCodeAt(i[t].content.length-1);break}let m=32;if(l<u)m=a.charCodeAt(l);else for(t=r+1;t<i.length&&!(i[t].type==="softbreak"||i[t].type==="hardbreak");t++)if(i[t].content){m=i[t].content.charCodeAt(0);break}const y=O2(p)||I2(String.fromCharCode(p)),v=O2(m)||I2(String.fromCharCode(m)),b=M2(p),x=M2(m);if(x?h=!1:v&&(b||y||(h=!1)),b?d=!1:y&&(x||v||(d=!1)),m===34&&c[0]==='"'&&p>=48&&p<=57&&(d=h=!1),h&&d&&(h=y,d=v),!h&&!d){f&&(s.content=tA(s.content,c.index,qxe));continue}if(d)for(t=n.length-1;t>=0;t--){let w=n[t];if(n[t].level<o)break;if(w.single===f&&n[t].level===o){w=n[t];let C,D;f?(C=e.md.options.quotes[2],D=e.md.options.quotes[3]):(C=e.md.options.quotes[0],D=e.md.options.quotes[1]),s.content=tA(s.content,c.index,D),i[w.token].content=tA(i[w.token].content,w.pos,C),l+=D.length-1,w.token===r&&(l+=C.length-1),a=s.content,u=a.length,n.length=t;continue e}}h?n.push({token:r,pos:c.index,single:f,level:o}):d&&f&&(s.content=tA(s.content,c.index,qxe))}}}function cMt(i){if(i.md.options.typographer)for(let e=i.tokens.length-1;e>=0;e--)i.tokens[e].type!=="inline"||!lMt.test(i.tokens[e].content)||uMt(i.tokens[e].children,i)}function hMt(i){let e,t;const n=i.tokens,r=n.length;for(let s=0;s<r;s++){if(n[s].type!=="inline")continue;const o=n[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=t=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==t&&(o[t]=o[e]),t++);e!==t&&(o.length=t)}}const J3=[["normalize",YLt],["block",ZLt],["inline",KLt],["linkify",eMt],["replacements",aMt],["smartquotes",cMt],["text_join",hMt]];function z6(){this.ruler=new Xl;for(let i=0;i<J3.length;i++)this.ruler.push(J3[i][0],J3[i][1])}z6.prototype.process=function(i){const e=this.ruler.getRules("");for(let t=0,n=e.length;t<n;t++)e[t](i)};z6.prototype.State=_3e;function fd(i,e,t,n){this.src=i,this.md=e,this.env=t,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let s=0,o=0,a=0,l=0,u=r.length,c=!1;o<u;o++){const h=r.charCodeAt(o);if(!c)if(es(h)){a++,h===9?l+=4-l%4:l++;continue}else c=!0;(h===10||o===u-1)&&(h!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),c=!1,a=0,l=0,s=o+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}fd.prototype.push=function(i,e,t){const n=new sh(i,e,t);return n.block=!0,t<0&&this.level--,n.level=this.level,t>0&&this.level++,this.tokens.push(n),n};fd.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};fd.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};fd.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const n=this.src.charCodeAt(e);if(!es(n))break}return e};fd.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!es(this.src.charCodeAt(--e)))return e+1;return e};fd.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e};fd.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e};fd.prototype.getLines=function(e,t,n,r){if(e>=t)return"";const s=new Array(t-e);for(let o=0,a=e;a<t;a++,o++){let l=0;const u=this.bMarks[a];let c=u,h;for(a+1<t||r?h=this.eMarks[a]+1:h=this.eMarks[a];c<h&&l<n;){const d=this.src.charCodeAt(c);if(es(d))d===9?l+=4-(l+this.bsCount[a])%4:l++;else if(c-u<this.tShift[a])l++;else break;c++}l>n?s[o]=new Array(l-n+1).join(" ")+this.src.slice(c,h):s[o]=this.src.slice(c,h)}return s.join("")};fd.prototype.Token=sh;const dMt=65536;function Q3(i,e){const t=i.bMarks[e]+i.tShift[e],n=i.eMarks[e];return i.src.slice(t,n)}function Vxe(i){const e=[],t=i.length;let n=0,r=i.charCodeAt(n),s=!1,o=0,a="";for(;n<t;)r===124&&(s?(a+=i.substring(o,n-1),o=n):(e.push(a+i.substring(o,n)),a="",o=n+1)),s=r===92,n++,r=i.charCodeAt(n);return e.push(a+i.substring(o)),e}function fMt(i,e,t,n){if(e+2>t)return!1;let r=e+1;if(i.sCount[r]<i.blkIndent||i.sCount[r]-i.blkIndent>=4)return!1;let s=i.bMarks[r]+i.tShift[r];if(s>=i.eMarks[r])return!1;const o=i.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=i.eMarks[r])return!1;const a=i.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!es(a)||o===45&&es(a))return!1;for(;s<i.eMarks[r];){const w=i.src.charCodeAt(s);if(w!==124&&w!==45&&w!==58&&!es(w))return!1;s++}let l=Q3(i,e+1),u=l.split("|");const c=[];for(let w=0;w<u.length;w++){const C=u[w].trim();if(!C){if(w===0||w===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(C))return!1;C.charCodeAt(C.length-1)===58?c.push(C.charCodeAt(0)===58?"center":"right"):C.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=Q3(i,e).trim(),l.indexOf("|")===-1||i.sCount[e]-i.blkIndent>=4)return!1;u=Vxe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==c.length)return!1;if(n)return!0;const d=i.parentType;i.parentType="table";const f=i.md.block.ruler.getRules("blockquote"),p=i.push("table_open","table",1),m=[e,0];p.map=m;const y=i.push("thead_open","thead",1);y.map=[e,e+1];const v=i.push("tr_open","tr",1);v.map=[e,e+1];for(let w=0;w<u.length;w++){const C=i.push("th_open","th",1);c[w]&&(C.attrs=[["style","text-align:"+c[w]]]);const D=i.push("inline","",0);D.content=u[w].trim(),D.children=[],i.push("th_close","th",-1)}i.push("tr_close","tr",-1),i.push("thead_close","thead",-1);let b,x=0;for(r=e+2;r<t&&!(i.sCount[r]<i.blkIndent);r++){let w=!1;for(let D=0,R=f.length;D<R;D++)if(f[D](i,r,t,!0)){w=!0;break}if(w||(l=Q3(i,r).trim(),!l)||i.sCount[r]-i.blkIndent>=4||(u=Vxe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),x+=h-u.length,x>dMt))break;if(r===e+2){const D=i.push("tbody_open","tbody",1);D.map=b=[e+2,0]}const C=i.push("tr_open","tr",1);C.map=[r,r+1];for(let D=0;D<h;D++){const R=i.push("td_open","td",1);c[D]&&(R.attrs=[["style","text-align:"+c[D]]]);const A=i.push("inline","",0);A.content=u[D]?u[D].trim():"",A.children=[],i.push("td_close","td",-1)}i.push("tr_close","tr",-1)}return b&&(i.push("tbody_close","tbody",-1),b[1]=r),i.push("table_close","table",-1),m[1]=r,i.parentType=d,i.line=r,!0}function pMt(i,e,t){if(i.sCount[e]-i.blkIndent<4)return!1;let n=e+1,r=n;for(;n<t;){if(i.isEmpty(n)){n++;continue}if(i.sCount[n]-i.blkIndent>=4){n++,r=n;continue}break}i.line=r;const s=i.push("code_block","code",0);return s.content=i.getLines(e,r,4+i.blkIndent,!1)+`
`,s.map=[e,i.line],!0}function gMt(i,e,t,n){let r=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||r+3>s)return!1;const o=i.src.charCodeAt(r);if(o!==126&&o!==96)return!1;let a=r;r=i.skipChars(r,o);let l=r-a;if(l<3)return!1;const u=i.src.slice(a,r),c=i.src.slice(r,s);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(n)return!0;let h=e,d=!1;for(;h++,!(h>=t||(r=a=i.bMarks[h]+i.tShift[h],s=i.eMarks[h],r<s&&i.sCount[h]<i.blkIndent));)if(i.src.charCodeAt(r)===o&&!(i.sCount[h]-i.blkIndent>=4)&&(r=i.skipChars(r,o),!(r-a<l)&&(r=i.skipSpaces(r),!(r<s)))){d=!0;break}l=i.sCount[e],i.line=h+(d?1:0);const f=i.push("fence","code",0);return f.info=c,f.content=i.getLines(e+1,h,l,!0),f.markup=u,f.map=[e,i.line],!0}function mMt(i,e,t,n){let r=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];const o=i.lineMax;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(r)!==62)return!1;if(n)return!0;const a=[],l=[],u=[],c=[],h=i.md.block.ruler.getRules("blockquote"),d=i.parentType;i.parentType="blockquote";let f=!1,p;for(p=e;p<t;p++){const x=i.sCount[p]<i.blkIndent;if(r=i.bMarks[p]+i.tShift[p],s=i.eMarks[p],r>=s)break;if(i.src.charCodeAt(r++)===62&&!x){let C=i.sCount[p]+1,D,R;i.src.charCodeAt(r)===32?(r++,C++,R=!1,D=!0):i.src.charCodeAt(r)===9?(D=!0,(i.bsCount[p]+C)%4===3?(r++,C++,R=!1):R=!0):D=!1;let A=C;for(a.push(i.bMarks[p]),i.bMarks[p]=r;r<s;){const L=i.src.charCodeAt(r);if(es(L))L===9?A+=4-(A+i.bsCount[p]+(R?1:0))%4:A++;else break;r++}f=r>=s,l.push(i.bsCount[p]),i.bsCount[p]=i.sCount[p]+1+(D?1:0),u.push(i.sCount[p]),i.sCount[p]=A-C,c.push(i.tShift[p]),i.tShift[p]=r-i.bMarks[p];continue}if(f)break;let w=!1;for(let C=0,D=h.length;C<D;C++)if(h[C](i,p,t,!0)){w=!0;break}if(w){i.lineMax=p,i.blkIndent!==0&&(a.push(i.bMarks[p]),l.push(i.bsCount[p]),c.push(i.tShift[p]),u.push(i.sCount[p]),i.sCount[p]-=i.blkIndent);break}a.push(i.bMarks[p]),l.push(i.bsCount[p]),c.push(i.tShift[p]),u.push(i.sCount[p]),i.sCount[p]=-1}const m=i.blkIndent;i.blkIndent=0;const y=i.push("blockquote_open","blockquote",1);y.markup=">";const v=[e,0];y.map=v,i.md.block.tokenize(i,e,p);const b=i.push("blockquote_close","blockquote",-1);b.markup=">",i.lineMax=o,i.parentType=d,v[1]=i.line;for(let x=0;x<c.length;x++)i.bMarks[x+e]=a[x],i.tShift[x+e]=c[x],i.sCount[x+e]=u[x],i.bsCount[x+e]=l[x];return i.blkIndent=m,!0}function yMt(i,e,t,n){const r=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4)return!1;let s=i.bMarks[e]+i.tShift[e];const o=i.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<r;){const u=i.src.charCodeAt(s++);if(u!==o&&!es(u))return!1;u===o&&a++}if(a<3)return!1;if(n)return!0;i.line=e+1;const l=i.push("hr","hr",0);return l.map=[e,i.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function Hxe(i,e){const t=i.eMarks[e];let n=i.bMarks[e]+i.tShift[e];const r=i.src.charCodeAt(n++);if(r!==42&&r!==45&&r!==43)return-1;if(n<t){const s=i.src.charCodeAt(n);if(!es(s))return-1}return n}function Wxe(i,e){const t=i.bMarks[e]+i.tShift[e],n=i.eMarks[e];let r=t;if(r+1>=n)return-1;let s=i.src.charCodeAt(r++);if(s<48||s>57)return-1;for(;;){if(r>=n)return-1;if(s=i.src.charCodeAt(r++),s>=48&&s<=57){if(r-t>=10)return-1;continue}if(s===41||s===46)break;return-1}return r<n&&(s=i.src.charCodeAt(r),!es(s))?-1:r}function vMt(i,e){const t=i.level+2;for(let n=e+2,r=i.tokens.length-2;n<r;n++)i.tokens[n].level===t&&i.tokens[n].type==="paragraph_open"&&(i.tokens[n+2].hidden=!0,i.tokens[n].hidden=!0,n+=2)}function _Mt(i,e,t,n){let r,s,o,a,l=e,u=!0;if(i.sCount[l]-i.blkIndent>=4||i.listIndent>=0&&i.sCount[l]-i.listIndent>=4&&i.sCount[l]<i.blkIndent)return!1;let c=!1;n&&i.parentType==="paragraph"&&i.sCount[l]>=i.blkIndent&&(c=!0);let h,d,f;if((f=Wxe(i,l))>=0){if(h=!0,o=i.bMarks[l]+i.tShift[l],d=Number(i.src.slice(o,f-1)),c&&d!==1)return!1}else if((f=Hxe(i,l))>=0)h=!1;else return!1;if(c&&i.skipSpaces(f)>=i.eMarks[l])return!1;if(n)return!0;const p=i.src.charCodeAt(f-1),m=i.tokens.length;h?(a=i.push("ordered_list_open","ol",1),d!==1&&(a.attrs=[["start",d]])):a=i.push("bullet_list_open","ul",1);const y=[l,0];a.map=y,a.markup=String.fromCharCode(p);let v=!1;const b=i.md.block.ruler.getRules("list"),x=i.parentType;for(i.parentType="list";l<t;){s=f,r=i.eMarks[l];const w=i.sCount[l]+f-(i.bMarks[l]+i.tShift[l]);let C=w;for(;s<r;){const N=i.src.charCodeAt(s);if(N===9)C+=4-(C+i.bsCount[l])%4;else if(N===32)C++;else break;s++}const D=s;let R;D>=r?R=1:R=C-w,R>4&&(R=1);const A=w+R;a=i.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const L=[l,0];a.map=L,h&&(a.info=i.src.slice(o,f-1));const O=i.tight,$=i.tShift[l],q=i.sCount[l],M=i.listIndent;if(i.listIndent=i.blkIndent,i.blkIndent=A,i.tight=!0,i.tShift[l]=D-i.bMarks[l],i.sCount[l]=C,D>=r&&i.isEmpty(l+1)?i.line=Math.min(i.line+2,t):i.md.block.tokenize(i,l,t,!0),(!i.tight||v)&&(u=!1),v=i.line-l>1&&i.isEmpty(i.line-1),i.blkIndent=i.listIndent,i.listIndent=M,i.tShift[l]=$,i.sCount[l]=q,i.tight=O,a=i.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=i.line,L[1]=l,l>=t||i.sCount[l]<i.blkIndent||i.sCount[l]-i.blkIndent>=4)break;let F=!1;for(let N=0,B=b.length;N<B;N++)if(b[N](i,l,t,!0)){F=!0;break}if(F)break;if(h){if(f=Wxe(i,l),f<0)break;o=i.bMarks[l]+i.tShift[l]}else if(f=Hxe(i,l),f<0)break;if(p!==i.src.charCodeAt(f-1))break}return h?a=i.push("ordered_list_close","ol",-1):a=i.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),y[1]=l,i.line=l,i.parentType=x,u&&vMt(i,m),!0}function bMt(i,e,t,n){let r=i.bMarks[e]+i.tShift[e],s=i.eMarks[e],o=e+1;if(i.sCount[e]-i.blkIndent>=4||i.src.charCodeAt(r)!==91)return!1;function a(b){const x=i.lineMax;if(b>=x||i.isEmpty(b))return null;let w=!1;if(i.sCount[b]-i.blkIndent>3&&(w=!0),i.sCount[b]<0&&(w=!0),!w){const R=i.md.block.ruler.getRules("reference"),A=i.parentType;i.parentType="reference";let L=!1;for(let O=0,$=R.length;O<$;O++)if(R[O](i,b,x,!0)){L=!0;break}if(i.parentType=A,L)return null}const C=i.bMarks[b]+i.tShift[b],D=i.eMarks[b];return i.src.slice(C,D+1)}let l=i.src.slice(r,s+1);s=l.length;let u=-1;for(r=1;r<s;r++){const b=l.charCodeAt(r);if(b===91)return!1;if(b===93){u=r;break}else if(b===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(b===92&&(r++,r<s&&l.charCodeAt(r)===10)){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(r=u+2;r<s;r++){const b=l.charCodeAt(r);if(b===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(!es(b))break}const c=i.md.helpers.parseLinkDestination(l,r,s);if(!c.ok)return!1;const h=i.md.normalizeLink(c.str);if(!i.md.validateLink(h))return!1;r=c.pos;const d=r,f=o,p=r;for(;r<s;r++){const b=l.charCodeAt(r);if(b===10){const x=a(o);x!==null&&(l+=x,s=l.length,o++)}else if(!es(b))break}let m=i.md.helpers.parseLinkTitle(l,r,s);for(;m.can_continue;){const b=a(o);if(b===null)break;l+=b,r=s,s=l.length,o++,m=i.md.helpers.parseLinkTitle(l,r,s,m)}let y;for(r<s&&p!==r&&m.ok?(y=m.str,r=m.pos):(y="",r=d,o=f);r<s;){const b=l.charCodeAt(r);if(!es(b))break;r++}if(r<s&&l.charCodeAt(r)!==10&&y)for(y="",r=d,o=f;r<s;){const b=l.charCodeAt(r);if(!es(b))break;r++}if(r<s&&l.charCodeAt(r)!==10)return!1;const v=ZL(l.slice(1,u));return v?(n||(typeof i.env.references>"u"&&(i.env.references={}),typeof i.env.references[v]>"u"&&(i.env.references[v]={title:y,href:h}),i.line=o),!0):!1}const xMt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wMt="[a-zA-Z_:][a-zA-Z0-9:._-]*",EMt="[^\"'=<>`\\x00-\\x20]+",CMt="'[^']*'",SMt='"[^"]*"',TMt="(?:"+EMt+"|"+CMt+"|"+SMt+")",AMt="(?:\\s+"+wMt+"(?:\\s*=\\s*"+TMt+")?)",x3e="<[A-Za-z][A-Za-z0-9\\-]*"+AMt+"*\\s*\\/?>",w3e="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",RMt="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",kMt="<[?][\\s\\S]*?[?]>",DMt="<![A-Za-z][^>]*>",LMt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",MMt=new RegExp("^(?:"+x3e+"|"+w3e+"|"+RMt+"|"+kMt+"|"+DMt+"|"+LMt+")"),IMt=new RegExp("^(?:"+x3e+"|"+w3e+")"),Dv=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+xMt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(IMt.source+"\\s*$"),/^$/,!1]];function OMt(i,e,t,n){let r=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4||!i.md.options.html||i.src.charCodeAt(r)!==60)return!1;let o=i.src.slice(r,s),a=0;for(;a<Dv.length&&!Dv[a][0].test(o);a++);if(a===Dv.length)return!1;if(n)return Dv[a][2];let l=e+1;if(!Dv[a][1].test(o)){for(;l<t&&!(i.sCount[l]<i.blkIndent);l++)if(r=i.bMarks[l]+i.tShift[l],s=i.eMarks[l],o=i.src.slice(r,s),Dv[a][1].test(o)){o.length!==0&&l++;break}}i.line=l;const u=i.push("html_block","",0);return u.map=[e,l],u.content=i.getLines(e,l,i.blkIndent,!0),!0}function PMt(i,e,t,n){let r=i.bMarks[e]+i.tShift[e],s=i.eMarks[e];if(i.sCount[e]-i.blkIndent>=4)return!1;let o=i.src.charCodeAt(r);if(o!==35||r>=s)return!1;let a=1;for(o=i.src.charCodeAt(++r);o===35&&r<s&&a<=6;)a++,o=i.src.charCodeAt(++r);if(a>6||r<s&&!es(o))return!1;if(n)return!0;s=i.skipSpacesBack(s,r);const l=i.skipCharsBack(s,35,r);l>r&&es(i.src.charCodeAt(l-1))&&(s=l),i.line=e+1;const u=i.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,i.line];const c=i.push("inline","",0);c.content=i.src.slice(r,s).trim(),c.map=[e,i.line],c.children=[];const h=i.push("heading_close","h"+String(a),-1);return h.markup="########".slice(0,a),!0}function FMt(i,e,t){const n=i.md.block.ruler.getRules("paragraph");if(i.sCount[e]-i.blkIndent>=4)return!1;const r=i.parentType;i.parentType="paragraph";let s=0,o,a=e+1;for(;a<t&&!i.isEmpty(a);a++){if(i.sCount[a]-i.blkIndent>3)continue;if(i.sCount[a]>=i.blkIndent){let f=i.bMarks[a]+i.tShift[a];const p=i.eMarks[a];if(f<p&&(o=i.src.charCodeAt(f),(o===45||o===61)&&(f=i.skipChars(f,o),f=i.skipSpaces(f),f>=p))){s=o===61?1:2;break}}if(i.sCount[a]<0)continue;let d=!1;for(let f=0,p=n.length;f<p;f++)if(n[f](i,a,t,!0)){d=!0;break}if(d)break}if(!s)return!1;const l=i.getLines(e,a,i.blkIndent,!1).trim();i.line=a+1;const u=i.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[e,i.line];const c=i.push("inline","",0);c.content=l,c.map=[e,i.line-1],c.children=[];const h=i.push("heading_close","h"+String(s),-1);return h.markup=String.fromCharCode(o),i.parentType=r,!0}function NMt(i,e,t){const n=i.md.block.ruler.getRules("paragraph"),r=i.parentType;let s=e+1;for(i.parentType="paragraph";s<t&&!i.isEmpty(s);s++){if(i.sCount[s]-i.blkIndent>3||i.sCount[s]<0)continue;let u=!1;for(let c=0,h=n.length;c<h;c++)if(n[c](i,s,t,!0)){u=!0;break}if(u)break}const o=i.getLines(e,s,i.blkIndent,!1).trim();i.line=s;const a=i.push("paragraph_open","p",1);a.map=[e,i.line];const l=i.push("inline","",0);return l.content=o,l.map=[e,i.line],l.children=[],i.push("paragraph_close","p",-1),i.parentType=r,!0}const iA=[["table",fMt,["paragraph","reference"]],["code",pMt],["fence",gMt,["paragraph","reference","blockquote","list"]],["blockquote",mMt,["paragraph","reference","blockquote","list"]],["hr",yMt,["paragraph","reference","blockquote","list"]],["list",_Mt,["paragraph","reference","blockquote"]],["reference",bMt],["html_block",OMt,["paragraph","reference","blockquote"]],["heading",PMt,["paragraph","reference","blockquote"]],["lheading",FMt],["paragraph",NMt]];function KL(){this.ruler=new Xl;for(let i=0;i<iA.length;i++)this.ruler.push(iA[i][0],iA[i][1],{alt:(iA[i][2]||[]).slice()})}KL.prototype.tokenize=function(i,e,t){const n=this.ruler.getRules(""),r=n.length,s=i.md.options.maxNesting;let o=e,a=!1;for(;o<t&&(i.line=o=i.skipEmptyLines(o),!(o>=t||i.sCount[o]<i.blkIndent));){if(i.level>=s){i.line=t;break}const l=i.line;let u=!1;for(let c=0;c<r;c++)if(u=n[c](i,o,t,!1),u){if(l>=i.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");i.tight=!a,i.isEmpty(i.line-1)&&(a=!0),o=i.line,o<t&&i.isEmpty(o)&&(a=!0,o++,i.line=o)}};KL.prototype.parse=function(i,e,t,n){if(!i)return;const r=new this.State(i,e,t,n);this.tokenize(r,r.line,r.lineMax)};KL.prototype.State=fd;function ZC(i,e,t,n){this.src=i,this.env=t,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ZC.prototype.pushPending=function(){const i=new sh("text","",0);return i.content=this.pending,i.level=this.pendingLevel,this.tokens.push(i),this.pending="",i};ZC.prototype.push=function(i,e,t){this.pending&&this.pushPending();const n=new sh(i,e,t);let r=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(r),n};ZC.prototype.scanDelims=function(i,e){const t=this.posMax,n=this.src.charCodeAt(i),r=i>0?this.src.charCodeAt(i-1):32;let s=i;for(;s<t&&this.src.charCodeAt(s)===n;)s++;const o=s-i,a=s<t?this.src.charCodeAt(s):32,l=O2(r)||I2(String.fromCharCode(r)),u=O2(a)||I2(String.fromCharCode(a)),c=M2(r),h=M2(a),d=!h&&(!u||c||l),f=!c&&(!l||h||u);return{can_open:d&&(e||!f||l),can_close:f&&(e||!d||u),length:o}};ZC.prototype.Token=sh;function $Mt(i){switch(i){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function BMt(i,e){let t=i.pos;for(;t<i.posMax&&!$Mt(i.src.charCodeAt(t));)t++;return t===i.pos?!1:(e||(i.pending+=i.src.slice(i.pos,t)),i.pos=t,!0)}const jMt=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function zMt(i,e){if(!i.md.options.linkify||i.linkLevel>0)return!1;const t=i.pos,n=i.posMax;if(t+3>n||i.src.charCodeAt(t)!==58||i.src.charCodeAt(t+1)!==47||i.src.charCodeAt(t+2)!==47)return!1;const r=i.pending.match(jMt);if(!r)return!1;const s=r[1],o=i.md.linkify.matchAtStart(i.src.slice(t-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=i.md.normalizeLink(a);if(!i.md.validateLink(l))return!1;if(!e){i.pending=i.pending.slice(0,-s.length);const u=i.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=i.push("text","",0);c.content=i.md.normalizeLinkText(a);const h=i.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return i.pos+=a.length-s.length,!0}function GMt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==10)return!1;const n=i.pending.length-1,r=i.posMax;if(!e)if(n>=0&&i.pending.charCodeAt(n)===32)if(n>=1&&i.pending.charCodeAt(n-1)===32){let s=n-1;for(;s>=1&&i.pending.charCodeAt(s-1)===32;)s--;i.pending=i.pending.slice(0,s),i.push("hardbreak","br",0)}else i.pending=i.pending.slice(0,-1),i.push("softbreak","br",0);else i.push("softbreak","br",0);for(t++;t<r&&es(i.src.charCodeAt(t));)t++;return i.pos=t,!0}const G6=[];for(let i=0;i<256;i++)G6.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(i){G6[i.charCodeAt(0)]=1});function UMt(i,e){let t=i.pos;const n=i.posMax;if(i.src.charCodeAt(t)!==92||(t++,t>=n))return!1;let r=i.src.charCodeAt(t);if(r===10){for(e||i.push("hardbreak","br",0),t++;t<n&&(r=i.src.charCodeAt(t),!!es(r));)t++;return i.pos=t,!0}let s=i.src[t];if(r>=55296&&r<=56319&&t+1<n){const a=i.src.charCodeAt(t+1);a>=56320&&a<=57343&&(s+=i.src[t+1],t++)}const o="\\"+s;if(!e){const a=i.push("text_special","",0);r<256&&G6[r]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return i.pos=t+1,!0}function qMt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==96)return!1;const r=t;t++;const s=i.posMax;for(;t<s&&i.src.charCodeAt(t)===96;)t++;const o=i.src.slice(r,t),a=o.length;if(i.backticksScanned&&(i.backticks[a]||0)<=r)return e||(i.pending+=o),i.pos+=a,!0;let l=t,u;for(;(u=i.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&i.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===a){if(!e){const h=i.push("code_inline","code",0);h.markup=o,h.content=i.src.slice(t,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return i.pos=l,!0}i.backticks[c]=u}return i.backticksScanned=!0,e||(i.pending+=o),i.pos+=a,!0}function VMt(i,e){const t=i.pos,n=i.src.charCodeAt(t);if(e||n!==126)return!1;const r=i.scanDelims(i.pos,!0);let s=r.length;const o=String.fromCharCode(n);if(s<2)return!1;let a;s%2&&(a=i.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=i.push("text","",0),a.content=o+o,i.delimiters.push({marker:n,length:0,token:i.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return i.pos+=r.length,!0}function Xxe(i,e){let t;const n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];t=i.tokens[o.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=i.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",i.tokens[a.token-1].type==="text"&&i.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){const s=n.pop();let o=s+1;for(;o<i.tokens.length&&i.tokens[o].type==="s_close";)o++;o--,s!==o&&(t=i.tokens[o],i.tokens[o]=i.tokens[s],i.tokens[s]=t)}}function HMt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Xxe(i,i.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&Xxe(i,e[n].delimiters)}const E3e={tokenize:VMt,postProcess:HMt};function WMt(i,e){const t=i.pos,n=i.src.charCodeAt(t);if(e||n!==95&&n!==42)return!1;const r=i.scanDelims(i.pos,n===42);for(let s=0;s<r.length;s++){const o=i.push("text","",0);o.content=String.fromCharCode(n),i.delimiters.push({marker:n,length:r.length,token:i.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return i.pos+=r.length,!0}function Yxe(i,e){const t=e.length;for(let n=t-1;n>=0;n--){const r=e[n];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const s=e[r.end],o=n>0&&e[n-1].end===r.end+1&&e[n-1].marker===r.marker&&e[n-1].token===r.token-1&&e[r.end+1].token===s.token+1,a=String.fromCharCode(r.marker),l=i.tokens[r.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=i.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(i.tokens[e[n-1].token].content="",i.tokens[e[r.end+1].token].content="",n--)}}function XMt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Yxe(i,i.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&Yxe(i,e[n].delimiters)}const C3e={tokenize:WMt,postProcess:XMt};function YMt(i,e){let t,n,r,s,o="",a="",l=i.pos,u=!0;if(i.src.charCodeAt(i.pos)!==91)return!1;const c=i.pos,h=i.posMax,d=i.pos+1,f=i.md.helpers.parseLinkLabel(i,i.pos,!0);if(f<0)return!1;let p=f+1;if(p<h&&i.src.charCodeAt(p)===40){for(u=!1,p++;p<h&&(t=i.src.charCodeAt(p),!(!es(t)&&t!==10));p++);if(p>=h)return!1;if(l=p,r=i.md.helpers.parseLinkDestination(i.src,p,i.posMax),r.ok){for(o=i.md.normalizeLink(r.str),i.md.validateLink(o)?p=r.pos:o="",l=p;p<h&&(t=i.src.charCodeAt(p),!(!es(t)&&t!==10));p++);if(r=i.md.helpers.parseLinkTitle(i.src,p,i.posMax),p<h&&l!==p&&r.ok)for(a=r.str,p=r.pos;p<h&&(t=i.src.charCodeAt(p),!(!es(t)&&t!==10));p++);}(p>=h||i.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof i.env.references>"u")return!1;if(p<h&&i.src.charCodeAt(p)===91?(l=p+1,p=i.md.helpers.parseLinkLabel(i,p),p>=0?n=i.src.slice(l,p++):p=f+1):p=f+1,n||(n=i.src.slice(d,f)),s=i.env.references[ZL(n)],!s)return i.pos=c,!1;o=s.href,a=s.title}if(!e){i.pos=d,i.posMax=f;const m=i.push("link_open","a",1),y=[["href",o]];m.attrs=y,a&&y.push(["title",a]),i.linkLevel++,i.md.inline.tokenize(i),i.linkLevel--,i.push("link_close","a",-1)}return i.pos=p,i.posMax=h,!0}function ZMt(i,e){let t,n,r,s,o,a,l,u,c="";const h=i.pos,d=i.posMax;if(i.src.charCodeAt(i.pos)!==33||i.src.charCodeAt(i.pos+1)!==91)return!1;const f=i.pos+2,p=i.md.helpers.parseLinkLabel(i,i.pos+1,!1);if(p<0)return!1;if(s=p+1,s<d&&i.src.charCodeAt(s)===40){for(s++;s<d&&(t=i.src.charCodeAt(s),!(!es(t)&&t!==10));s++);if(s>=d)return!1;for(u=s,a=i.md.helpers.parseLinkDestination(i.src,s,i.posMax),a.ok&&(c=i.md.normalizeLink(a.str),i.md.validateLink(c)?s=a.pos:c=""),u=s;s<d&&(t=i.src.charCodeAt(s),!(!es(t)&&t!==10));s++);if(a=i.md.helpers.parseLinkTitle(i.src,s,i.posMax),s<d&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<d&&(t=i.src.charCodeAt(s),!(!es(t)&&t!==10));s++);else l="";if(s>=d||i.src.charCodeAt(s)!==41)return i.pos=h,!1;s++}else{if(typeof i.env.references>"u")return!1;if(s<d&&i.src.charCodeAt(s)===91?(u=s+1,s=i.md.helpers.parseLinkLabel(i,s),s>=0?r=i.src.slice(u,s++):s=p+1):s=p+1,r||(r=i.src.slice(f,p)),o=i.env.references[ZL(r)],!o)return i.pos=h,!1;c=o.href,l=o.title}if(!e){n=i.src.slice(f,p);const m=[];i.md.inline.parse(n,i.md,i.env,m);const y=i.push("image","img",0),v=[["src",c],["alt",""]];y.attrs=v,y.children=m,y.content=n,l&&v.push(["title",l])}return i.pos=s,i.posMax=d,!0}const KMt=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,JMt=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function QMt(i,e){let t=i.pos;if(i.src.charCodeAt(t)!==60)return!1;const n=i.pos,r=i.posMax;for(;;){if(++t>=r)return!1;const o=i.src.charCodeAt(t);if(o===60)return!1;if(o===62)break}const s=i.src.slice(n+1,t);if(JMt.test(s)){const o=i.md.normalizeLink(s);if(!i.md.validateLink(o))return!1;if(!e){const a=i.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=i.push("text","",0);l.content=i.md.normalizeLinkText(s);const u=i.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return i.pos+=s.length+2,!0}if(KMt.test(s)){const o=i.md.normalizeLink("mailto:"+s);if(!i.md.validateLink(o))return!1;if(!e){const a=i.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=i.push("text","",0);l.content=i.md.normalizeLinkText(s);const u=i.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return i.pos+=s.length+2,!0}return!1}function eIt(i){return/^<a[>\s]/i.test(i)}function tIt(i){return/^<\/a\s*>/i.test(i)}function iIt(i){const e=i|32;return e>=97&&e<=122}function nIt(i,e){if(!i.md.options.html)return!1;const t=i.posMax,n=i.pos;if(i.src.charCodeAt(n)!==60||n+2>=t)return!1;const r=i.src.charCodeAt(n+1);if(r!==33&&r!==63&&r!==47&&!iIt(r))return!1;const s=i.src.slice(n).match(MMt);if(!s)return!1;if(!e){const o=i.push("html_inline","",0);o.content=s[0],eIt(o.content)&&i.linkLevel++,tIt(o.content)&&i.linkLevel--}return i.pos+=s[0].length,!0}const rIt=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,sIt=/^&([a-z][a-z0-9]{1,31});/i;function oIt(i,e){const t=i.pos,n=i.posMax;if(i.src.charCodeAt(t)!==38||t+1>=n)return!1;if(i.src.charCodeAt(t+1)===35){const s=i.src.slice(t).match(rIt);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=i.push("text_special","",0);a.content=j6(o)?Mk(o):Mk(65533),a.markup=s[0],a.info="entity"}return i.pos+=s[0].length,!0}}else{const s=i.src.slice(t).match(sIt);if(s){const o=m3e(s[0]);if(o!==s[0]){if(!e){const a=i.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return i.pos+=s[0].length,!0}}}return!1}function Zxe(i){const e={},t=i.length;if(!t)return;let n=0,r=-2;const s=[];for(let o=0;o<t;o++){const a=i[o];if(s.push(0),(i[n].marker!==a.marker||r!==a.token-1)&&(n=o),r=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=n-s[n]-1,c=u;for(;u>l;u-=s[u]+1){const h=i[u];if(h.marker===a.marker&&h.open&&h.end<0){let d=!1;if((h.close||a.open)&&(h.length+a.length)%3===0&&(h.length%3!==0||a.length%3!==0)&&(d=!0),!d){const f=u>0&&!i[u-1].open?s[u-1]+1:0;s[o]=o-u+f,s[u]=f,a.open=!1,h.end=o,h.close=!1,c=-1,r=-2;break}}}c!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=c)}}function aIt(i){const e=i.tokens_meta,t=i.tokens_meta.length;Zxe(i.delimiters);for(let n=0;n<t;n++)e[n]&&e[n].delimiters&&Zxe(e[n].delimiters)}function lIt(i){let e,t,n=0;const r=i.tokens,s=i.tokens.length;for(e=t=0;e<s;e++)r[e].nesting<0&&n--,r[e].level=n,r[e].nesting>0&&n++,r[e].type==="text"&&e+1<s&&r[e+1].type==="text"?r[e+1].content=r[e].content+r[e+1].content:(e!==t&&(r[t]=r[e]),t++);e!==t&&(r.length=t)}const eO=[["text",BMt],["linkify",zMt],["newline",GMt],["escape",UMt],["backticks",qMt],["strikethrough",E3e.tokenize],["emphasis",C3e.tokenize],["link",YMt],["image",ZMt],["autolink",QMt],["html_inline",nIt],["entity",oIt]],tO=[["balance_pairs",aIt],["strikethrough",E3e.postProcess],["emphasis",C3e.postProcess],["fragments_join",lIt]];function KC(){this.ruler=new Xl;for(let i=0;i<eO.length;i++)this.ruler.push(eO[i][0],eO[i][1]);this.ruler2=new Xl;for(let i=0;i<tO.length;i++)this.ruler2.push(tO[i][0],tO[i][1])}KC.prototype.skipToken=function(i){const e=i.pos,t=this.ruler.getRules(""),n=t.length,r=i.md.options.maxNesting,s=i.cache;if(typeof s[e]<"u"){i.pos=s[e];return}let o=!1;if(i.level<r){for(let a=0;a<n;a++)if(i.level++,o=t[a](i,!0),i.level--,o){if(e>=i.pos)throw new Error("inline rule didn't increment state.pos");break}}else i.pos=i.posMax;o||i.pos++,s[e]=i.pos};KC.prototype.tokenize=function(i){const e=this.ruler.getRules(""),t=e.length,n=i.posMax,r=i.md.options.maxNesting;for(;i.pos<n;){const s=i.pos;let o=!1;if(i.level<r){for(let a=0;a<t;a++)if(o=e[a](i,!1),o){if(s>=i.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(i.pos>=n)break;continue}i.pending+=i.src[i.pos++]}i.pending&&i.pushPending()};KC.prototype.parse=function(i,e,t,n){const r=new this.State(i,e,t,n);this.tokenize(r);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](r)};KC.prototype.State=ZC;function uIt(i){const e={};i=i||{},e.src_Any=h3e.source,e.src_Cc=d3e.source,e.src_Z=p3e.source,e.src_P=$6.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><｜]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(i["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(i["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function HF(i){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(n){i[n]=t[n]})}),i}function JL(i){return Object.prototype.toString.call(i)}function cIt(i){return JL(i)==="[object String]"}function hIt(i){return JL(i)==="[object Object]"}function dIt(i){return JL(i)==="[object RegExp]"}function Kxe(i){return JL(i)==="[object Function]"}function fIt(i){return i.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const S3e={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function pIt(i){return Object.keys(i||{}).reduce(function(e,t){return e||S3e.hasOwnProperty(t)},!1)}const gIt={"http:":{validate:function(i,e,t){const n=i.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(n)?n.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(i,e,t){const n=i.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(n)?e>=3&&i[e-3]===":"||e>=3&&i[e-3]==="/"?0:n.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(i,e,t){const n=i.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(n)?n.match(t.re.mailto)[0].length:0}}},mIt="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",yIt="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function vIt(i){i.__index__=-1,i.__text_cache__=""}function _It(i){return function(e,t){const n=e.slice(t);return i.test(n)?n.match(i)[0].length:0}}function Jxe(){return function(i,e){e.normalize(i)}}function Ik(i){const e=i.re=uIt(i.__opts__),t=i.__tlds__.slice();i.onCompile(),i.__tlds_replaced__||t.push(mIt),t.push(e.src_xn),e.src_tlds=t.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");const r=[];i.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(i.__schemas__).forEach(function(a){const l=i.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(i.__compiled__[a]=u,hIt(l)){dIt(l.validate)?u.validate=_It(l.validate):Kxe(l.validate)?u.validate=l.validate:s(a,l),Kxe(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=Jxe();return}if(cIt(l)){r.push(a);return}s(a,l)}),r.forEach(function(a){i.__compiled__[i.__schemas__[a]]&&(i.__compiled__[a].validate=i.__compiled__[i.__schemas__[a]].validate,i.__compiled__[a].normalize=i.__compiled__[i.__schemas__[a]].normalize)}),i.__compiled__[""]={validate:null,normalize:Jxe()};const o=Object.keys(i.__compiled__).filter(function(a){return a.length>0&&i.__compiled__[a]}).map(fIt).join("|");i.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","i"),i.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","ig"),i.re.schema_at_start=RegExp("^"+i.re.schema_search.source,"i"),i.re.pretest=RegExp("("+i.re.schema_test.source+")|("+i.re.host_fuzzy_test.source+")|@","i"),vIt(i)}function bIt(i,e){const t=i.__index__,n=i.__last_index__,r=i.__text_cache__.slice(t,n);this.schema=i.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=n+e,this.raw=r,this.text=r,this.url=r}function WF(i,e){const t=new bIt(i,e);return i.__compiled__[t.schema].normalize(t,i),t}function ku(i,e){if(!(this instanceof ku))return new ku(i,e);e||pIt(i)&&(e=i,i={}),this.__opts__=HF({},S3e,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=HF({},gIt,i),this.__compiled__={},this.__tlds__=yIt,this.__tlds_replaced__=!1,this.re={},Ik(this)}ku.prototype.add=function(e,t){return this.__schemas__[e]=t,Ik(this),this};ku.prototype.set=function(e){return this.__opts__=HF(this.__opts__,e),this};ku.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,n,r,s,o,a,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(t=l.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],l.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(r=e.match(this.re.email_fuzzy))!==null&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};ku.prototype.pretest=function(e){return this.re.pretest.test(e)};ku.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0};ku.prototype.match=function(e){const t=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(WF(this,n)),n=this.__last_index__);let r=n?e.slice(n):e;for(;this.test(r);)t.push(WF(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null};ku.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,WF(this,0)):null};ku.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,r,s){return n!==s[r-1]}).reverse(),Ik(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Ik(this),this)};ku.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};ku.prototype.onCompile=function(){};const N_=2147483647,Fh=36,U6=1,P2=26,xIt=38,wIt=700,T3e=72,A3e=128,R3e="-",EIt=/^xn--/,CIt=/[^\0-\x7F]/,SIt=/[\x2E\u3002\uFF0E\uFF61]/g,TIt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},iO=Fh-U6,Nh=Math.floor,nO=String.fromCharCode;function Up(i){throw new RangeError(TIt[i])}function AIt(i,e){const t=[];let n=i.length;for(;n--;)t[n]=e(i[n]);return t}function k3e(i,e){const t=i.split("@");let n="";t.length>1&&(n=t[0]+"@",i=t[1]),i=i.replace(SIt,".");const r=i.split("."),s=AIt(r,e).join(".");return n+s}function D3e(i){const e=[];let t=0;const n=i.length;for(;t<n;){const r=i.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){const s=i.charCodeAt(t++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}const RIt=i=>String.fromCodePoint(...i),kIt=function(i){return i>=48&&i<58?26+(i-48):i>=65&&i<91?i-65:i>=97&&i<123?i-97:Fh},Qxe=function(i,e){return i+22+75*(i<26)-((e!=0)<<5)},L3e=function(i,e,t){let n=0;for(i=t?Nh(i/wIt):i>>1,i+=Nh(i/e);i>iO*P2>>1;n+=Fh)i=Nh(i/iO);return Nh(n+(iO+1)*i/(i+xIt))},M3e=function(i){const e=[],t=i.length;let n=0,r=A3e,s=T3e,o=i.lastIndexOf(R3e);o<0&&(o=0);for(let a=0;a<o;++a)i.charCodeAt(a)>=128&&Up("not-basic"),e.push(i.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const l=n;for(let c=1,h=Fh;;h+=Fh){a>=t&&Up("invalid-input");const d=kIt(i.charCodeAt(a++));d>=Fh&&Up("invalid-input"),d>Nh((N_-n)/c)&&Up("overflow"),n+=d*c;const f=h<=s?U6:h>=s+P2?P2:h-s;if(d<f)break;const p=Fh-f;c>Nh(N_/p)&&Up("overflow"),c*=p}const u=e.length+1;s=L3e(n-l,u,l==0),Nh(n/u)>N_-r&&Up("overflow"),r+=Nh(n/u),n%=u,e.splice(n++,0,r)}return String.fromCodePoint(...e)},I3e=function(i){const e=[];i=D3e(i);const t=i.length;let n=A3e,r=0,s=T3e;for(const l of i)l<128&&e.push(nO(l));const o=e.length;let a=o;for(o&&e.push(R3e);a<t;){let l=N_;for(const c of i)c>=n&&c<l&&(l=c);const u=a+1;l-n>Nh((N_-r)/u)&&Up("overflow"),r+=(l-n)*u,n=l;for(const c of i)if(c<n&&++r>N_&&Up("overflow"),c===n){let h=r;for(let d=Fh;;d+=Fh){const f=d<=s?U6:d>=s+P2?P2:d-s;if(h<f)break;const p=h-f,m=Fh-f;e.push(nO(Qxe(f+p%m,0))),h=Nh(p/m)}e.push(nO(Qxe(h,0))),s=L3e(r,u,a===o),r=0,++a}++r,++n}return e.join("")},DIt=function(i){return k3e(i,function(e){return EIt.test(e)?M3e(e.slice(4).toLowerCase()):e})},LIt=function(i){return k3e(i,function(e){return CIt.test(e)?"xn--"+I3e(e):e})},O3e={version:"2.3.1",ucs2:{decode:D3e,encode:RIt},decode:M3e,encode:I3e,toASCII:LIt,toUnicode:DIt},MIt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},IIt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},OIt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},PIt={default:MIt,zero:IIt,commonmark:OIt},FIt=/^(vbscript|javascript|file|data):/,NIt=/^data:image\/(gif|png|jpeg|webp);/;function $It(i){const e=i.trim().toLowerCase();return FIt.test(e)?NIt.test(e):!0}const P3e=["http:","https:","mailto:"];function BIt(i){const e=N6(i,!0);if(e.hostname&&(!e.protocol||P3e.indexOf(e.protocol)>=0))try{e.hostname=O3e.toASCII(e.hostname)}catch{}return YC(F6(e))}function jIt(i){const e=N6(i,!0);if(e.hostname&&(!e.protocol||P3e.indexOf(e.protocol)>=0))try{e.hostname=O3e.toUnicode(e.hostname)}catch{}return Sb(F6(e),Sb.defaultChars+"%")}function oc(i,e){if(!(this instanceof oc))return new oc(i,e);e||B6(i)||(e=i||{},i="default"),this.inline=new KC,this.block=new KL,this.core=new z6,this.renderer=new _1,this.linkify=new ku,this.validateLink=$It,this.normalizeLink=BIt,this.normalizeLinkText=jIt,this.utils=GLt,this.helpers=YL({},HLt),this.options={},this.configure(i),e&&this.set(e)}oc.prototype.set=function(i){return YL(this.options,i),this};oc.prototype.configure=function(i){const e=this;if(B6(i)){const t=i;if(i=PIt[t],!i)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!i)throw new Error("Wrong `markdown-it` preset, can't be empty");return i.options&&e.set(i.options),i.components&&Object.keys(i.components).forEach(function(t){i.components[t].rules&&e[t].ruler.enableOnly(i.components[t].rules),i.components[t].rules2&&e[t].ruler2.enableOnly(i.components[t].rules2)}),this};oc.prototype.enable=function(i,e){let t=[];Array.isArray(i)||(i=[i]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.enable(i,!0))},this),t=t.concat(this.inline.ruler2.enable(i,!0));const n=i.filter(function(r){return t.indexOf(r)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};oc.prototype.disable=function(i,e){let t=[];Array.isArray(i)||(i=[i]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.disable(i,!0))},this),t=t.concat(this.inline.ruler2.disable(i,!0));const n=i.filter(function(r){return t.indexOf(r)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};oc.prototype.use=function(i){const e=[this].concat(Array.prototype.slice.call(arguments,1));return i.apply(i,e),this};oc.prototype.parse=function(i,e){if(typeof i!="string")throw new Error("Input data should be a String");const t=new this.core.State(i,this,e);return this.core.process(t),t.tokens};oc.prototype.render=function(i,e){return e=e||{},this.renderer.render(this.parse(i,e),this.options,e)};oc.prototype.parseInline=function(i,e){const t=new this.core.State(i,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};oc.prototype.renderInline=function(i,e){return e=e||{},this.renderer.render(this.parseInline(i,e),this.options,e)};async function zIt(i){try{const e=await fetch(i);if(!e.ok)throw new Error("Network response was not ok");return await e.text()}catch(e){return console.error("There has been a problem with your fetch operation:",e),null}}const F3e=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,GIt={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},N3e={hr:!0,image:!0},UIt={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},qIt=["img","video"],rO={1:["0.0.0"]},VIt=["tour"],HIt=["iframe"];function $3e(){document.body.style.userSelect="none"}function WIt(){document.body.style.userSelect=""}function XIt(i,e,t){i.target===e&&($3e(),t.dragging=!0,t.lastX=i.clientX,t.lastY=i.clientY)}function YIt(i,e,t){if(t.dragging){let n=i.clientX-t.lastX,r=i.clientY-t.lastY,{top:s,left:o}=e.getBoundingClientRect();e.style.top=`${s+r}px`,e.style.left=`${o+n}px`,t.lastX=i.clientX,t.lastY=i.clientY}if(t.dragging||t.resizing){let n=t.lastX-i.clientX,r=i.clientY-t.lastY,{width:s,height:o,left:a,top:l}=e.getBoundingClientRect();t.resizing&&(e.style.width=`${s+n}px`,e.style.height=`${o+r}px`,e.style.top=`${l}px`),e.style.left=`${a-n}px`,t.lastX=i.clientX,t.lastY=i.clientY}}function ZIt(i){WIt(),i.dragging=!1,i.resizing=!1}function KIt(i,e){i.stopPropagation(),$3e(),e.resizing=!0,e.lastX=i.clientX,e.lastY=i.clientY}async function JIt(i,e,t){i.addEventListener("mousedown",n=>XIt(n,i,t)),window.addEventListener("mousemove",n=>YIt(n,i,t)),window.addEventListener("mouseup",()=>ZIt(t)),e.addEventListener("mousedown",n=>KIt(n,t))}function QIt(i){const e=document.querySelector("eox-storytelling"),{y:t}=e.getBoundingClientRect(),n=i.querySelector(".editor-wrapper"),r=c=>Number(c.replace("px","")),s=window.getComputedStyle(n),o=r(s.bottom),a=r(s.padding)*2,l=n.classList.contains("partial-height")?80:0,u=window.innerHeight-t-o-a-l;n.style.height=`${u}px`}function e3t(i){const e=document.createElement("input");e.type="file",e.accept=".md",e.onchange=t=>{const n=t.target.files[0];if(!n)return;const r=new FileReader;r.onload=s=>{const o=s.target.result;i.value(o)},r.readAsText(n)},e.click()}function t3t(i){const e=i.value(),t=new Blob([e],{type:"text/markdown"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`${document.title}.md`,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function B3e(i){const e=[];return i.forEach((t,n)=>{(t.startsWith("## ")||t.startsWith("# ")&&e.length)&&e.push(n)}),e}function ewe(i,e,t,n,r,s){const o=i.split(`
`),a=s.shadowRoot||s,l=a.querySelector("eox-storytelling-editor"),c=B3e(o)[e];if(n)if(r){const d=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(d).forEach(f=>{const p=d[f];t=t.replaceAll(`{${f}}`,p)}),s.selectedCustomElement=null}else{s.selectedCustomElement={markdown:t,fields:n},s.requestUpdate();return}c>=0?o.splice(c,0,t):o.push(t),l.editor.editor.editors["root.Story"].setValue(o.join(`
`)),setTimeout(()=>{const h=a.querySelector(`div[data-section="${e+1}"]`);h&&window.scrollTo(0,h.offsetTop)},200),s.addCustomSectionIndex=-1,s.requestUpdate()}function i3t(i,e,t){let n=null;t==null||t.codemirror.on("change",function(){const r=i.querySelector(".editor-saver");r.innerText="Auto Saving...",n&&clearTimeout(n),n=setTimeout(()=>{r.innerText="Saved";const s=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...s,[e||"default"]:t.value()})),n=null},2500)})}function n3t(i){var e;(e=(i.shadowRoot||i).querySelector(".CodeMirror-scroll"))==null||e.addEventListener("wheel",function(t){const n=t.deltaY,r=this.scrollHeight,s=this.clientHeight;(this.scrollTop===0&&n<0||this.scrollTop+s>=r&&n>0)&&t.preventDefault()},{passive:!1})}function r3t(i){if(i.showEditor!==void 0){let e=JSON.parse(localStorage.getItem("markdown")||"{}");const t=i.id||"default",n=e[t];n&&n!==i.markdown&&(confirm("Recover your Story from the last time you edited?")?i.markdown=n:(delete e[t],localStorage.setItem("markdown",JSON.stringify(e))))}}function j3e(i){var e,t;if((t=(e=i.editor.editor)==null?void 0:e.editors)!=null&&t["root.Story"]){const n=i.editor.editor.editors["root.Story"].simplemde_instance;i3t(i,i.storyId,n),n3t(i)}else setTimeout(()=>j3e(i),100)}function z3e(i){var t;i.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),i.editor&&i.editor.editor&&i.editor.editor.ready&&((t=i.editor.editor)!=null&&t.editors["root.Story"].simplemde_instance)?i.querySelector(".switch-input").click():setTimeout(()=>z3e(i),100)}const sO=(i,e,t,n,r)=>({name:i,action:r||function({codemirror:o}){const a=o.getCursor("start"),l=o.getCursor("end");o.replaceRange(e,a,l)},className:t,title:n}),s3t={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",sO("import",null,"fa fa-upload","Import Markdown File",e3t),sO("export",null,"fa fa-download","Export Markdown File",t3t),"|",sO("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const i=document.querySelector("eox-storytelling"),e=i.markdown.split(`
`),t=B3e(e);i&&(i.addCustomSectionIndex=t.length,i.requestUpdate())})],spellChecker:!1}}}}},o3t=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,a3t=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,l3t=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,u3t=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,c3t={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},h3t=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,d3t={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},f3t=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,p3t={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},g3t=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,m3t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},y3t=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,v3t={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},_3t=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:o3t,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:a3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:l3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:u3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:c3t},{name:"Tour",id:"ele-map-tour",markdown:h3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:d3t}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:f3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:p3t},{name:"Hero Image",id:"ele-hero-image",markdown:g3t,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:m3t},{name:"Hero Video",id:"ele-hero-video",markdown:y3t,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:v3t}]}];var G3e={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Jr,function(){function t(I){var G=function(Z,ie){if(typeof Z!="object"||!Z)return Z;var me=Z[Symbol.toPrimitive];if(me!==void 0){var _e=me.call(Z,ie||"default");if(typeof _e!="object")return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ie==="string"?String:Number)(Z)}(I,"string");return typeof G=="symbol"?G:G+""}function n(I){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(I)}function r(I,G){if(!(I instanceof G))throw new TypeError("Cannot call a class as a function")}function s(I,G){for(var Z=0;Z<G.length;Z++){var ie=G[Z];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(I,t(ie.key),ie)}}function o(I,G,Z){return G&&s(I.prototype,G),Z&&s(I,Z),Object.defineProperty(I,"prototype",{writable:!1}),I}var a=Date.now();function l(){var I={},G=!0,Z=0,ie=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(G=arguments[0],Z++);for(var me=function(xe){for(var V in xe)Object.prototype.hasOwnProperty.call(xe,V)&&(G&&Object.prototype.toString.call(xe[V])==="[object Object]"?I[V]=l(!0,I[V],xe[V]):I[V]=xe[V])};Z<ie;Z++){var _e=arguments[Z];me(_e)}return I}function u(I,G){if((q(I)||I===window||I===document)&&(I=[I]),F(I)||N(I)||(I=[I]),K(I)!=0){if(F(I)&&!N(I))for(var Z=I.length,ie=0;ie<Z&&G.call(I[ie],I[ie],ie,I)!==!1;ie++);else if(N(I)){for(var me in I)if(W(I,me)&&G.call(I[me],I[me],me,I)===!1)break}}}function c(I){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ie=I[a]=I[a]||[],me={all:ie,evt:null,found:null};return G&&Z&&K(ie)>0&&u(ie,function(_e,xe){if(_e.eventName==G&&_e.fn.toString()==Z.toString())return me.found=!0,me.evt=xe,!1}),me}function h(I){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=G.onElement,ie=G.withCallback,me=G.avoidDuplicate,_e=me===void 0||me,xe=G.once,V=xe!==void 0&&xe,oe=G.useCapture,fe=oe!==void 0&&oe,de=arguments.length>2?arguments[2]:void 0,Te=Z||[];function Ae(Se){O(ie)&&ie.call(de,Se,this),V&&Ae.destroy()}return $(Te)&&(Te=document.querySelectorAll(Te)),Ae.destroy=function(){u(Te,function(Se){var Re=c(Se,I,Ae);Re.found&&Re.all.splice(Re.evt,1),Se.removeEventListener&&Se.removeEventListener(I,Ae,fe)})},u(Te,function(Se){var Re=c(Se,I,Ae);(Se.addEventListener&&_e&&!Re.found||!_e)&&(Se.addEventListener(I,Ae,fe),Re.all.push({eventName:I,fn:Ae}))}),Ae}function d(I,G){u(G.split(" "),function(Z){return I.classList.add(Z)})}function f(I,G){u(G.split(" "),function(Z){return I.classList.remove(Z)})}function p(I,G){return I.classList.contains(G)}function m(I,G){for(;I!==document.body;){if(!(I=I.parentElement))return!1;if(typeof I.matches=="function"?I.matches(G):I.msMatchesSelector(G))return I}}function y(I){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!I||G==="")return!1;if(G==="none")return O(Z)&&Z(),!1;var ie=D(),me=G.split(" ");u(me,function(_e){d(I,"g"+_e)}),h(ie,{onElement:I,avoidDuplicate:!1,once:!0,withCallback:function(_e,xe){u(me,function(V){f(xe,"g"+V)}),O(Z)&&Z()}})}function v(I){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(G==="")return I.style.webkitTransform="",I.style.MozTransform="",I.style.msTransform="",I.style.OTransform="",I.style.transform="",!1;I.style.webkitTransform=G,I.style.MozTransform=G,I.style.msTransform=G,I.style.OTransform=G,I.style.transform=G}function b(I){I.style.display="block"}function x(I){I.style.display="none"}function w(I){var G=document.createDocumentFragment(),Z=document.createElement("div");for(Z.innerHTML=I;Z.firstChild;)G.appendChild(Z.firstChild);return G}function C(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function D(){var I,G=document.createElement("fakeelement"),Z={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(I in Z)if(G.style[I]!==void 0)return Z[I]}function R(I,G,Z,ie){if(I())G();else{var me;Z||(Z=100);var _e=setInterval(function(){I()&&(clearInterval(_e),me&&clearTimeout(me),G())},Z);ie&&(me=setTimeout(function(){clearInterval(_e)},ie))}}function A(I,G,Z){if(B(I))console.error("Inject assets error");else if(O(G)&&(Z=G,G=!1),$(G)&&G in window)O(Z)&&Z();else{var ie;if(I.indexOf(".css")!==-1){if((ie=document.querySelectorAll('link[href="'+I+'"]'))&&ie.length>0)return void(O(Z)&&Z());var me=document.getElementsByTagName("head")[0],_e=me.querySelectorAll('link[rel="stylesheet"]'),xe=document.createElement("link");return xe.rel="stylesheet",xe.type="text/css",xe.href=I,xe.media="all",_e?me.insertBefore(xe,_e[0]):me.appendChild(xe),void(O(Z)&&Z())}if((ie=document.querySelectorAll('script[src="'+I+'"]'))&&ie.length>0){if(O(Z)){if($(G))return R(function(){return window[G]!==void 0},function(){Z()}),!1;Z()}}else{var V=document.createElement("script");V.type="text/javascript",V.src=I,V.onload=function(){if(O(Z)){if($(G))return R(function(){return window[G]!==void 0},function(){Z()}),!1;Z()}},document.body.appendChild(V)}}}function L(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function O(I){return typeof I=="function"}function $(I){return typeof I=="string"}function q(I){return!(!I||!I.nodeType||I.nodeType!=1)}function M(I){return Array.isArray(I)}function F(I){return I&&I.length&&isFinite(I.length)}function N(I){return n(I)==="object"&&I!=null&&!O(I)&&!M(I)}function B(I){return I==null}function W(I,G){return I!==null&&hasOwnProperty.call(I,G)}function K(I){if(N(I)){if(I.keys)return I.keys().length;var G=0;for(var Z in I)W(I,Z)&&G++;return G}return I.length}function ee(I){return!isNaN(parseFloat(I))&&isFinite(I)}function te(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,G=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!G.length)return!1;if(G.length==1)return G[0];typeof I=="string"&&(I=parseInt(I));var Z=[];u(G,function(V){Z.push(V.getAttribute("data-taborder"))});var ie=Math.max.apply(Math,Z.map(function(V){return parseInt(V)})),me=I<0?1:I+1;me>ie&&(me="1");var _e=Z.filter(function(V){return V>=parseInt(me)}),xe=_e.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(xe,'"]'))}function le(I){if(I.events.hasOwnProperty("keyboard"))return!1;I.events.keyboard=h("keydown",{onElement:window,withCallback:function(G,Z){var ie=(G=G||window.event).keyCode;if(ie==9){var me=document.querySelector(".gbtn.focused");if(!me){var _e=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(_e=="input"||_e=="textarea"||_e=="button")return}G.preventDefault();var xe=document.querySelectorAll(".gbtn[data-taborder]");if(!xe||xe.length<=0)return;if(!me){var V=te();return void(V&&(V.focus(),d(V,"focused")))}var oe=te(me.getAttribute("data-taborder"));f(me,"focused"),oe&&(oe.focus(),d(oe,"focused"))}ie==39&&I.nextSlide(),ie==37&&I.prevSlide(),ie==27&&I.close()}})}var Q=o(function I(G,Z){var ie=this,me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(r(this,I),this.img=G,this.slide=Z,this.onclose=me,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(_e){return ie.dragStart(_e)},!1),this.img.addEventListener("mouseup",function(_e){return ie.dragEnd(_e)},!1),this.img.addEventListener("mousemove",function(_e){return ie.drag(_e)},!1),this.img.addEventListener("click",function(_e){return ie.slide.classList.contains("dragging-nav")?(ie.zoomOut(),!1):ie.zoomedIn?void(ie.zoomedIn&&!ie.dragging&&ie.zoomOut()):ie.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var I=this.widowWidth();if(!(this.zoomedIn||I<=768)){var G=this.img;if(G.setAttribute("data-style",G.getAttribute("style")),G.style.maxWidth=G.naturalWidth+"px",G.style.maxHeight=G.naturalHeight+"px",G.naturalWidth>I){var Z=I/2-G.naturalWidth/2;this.setTranslate(this.img.parentNode,Z,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(I){I.preventDefault(),this.zoomedIn?(I.type==="touchstart"?(this.initialX=I.touches[0].clientX-this.xOffset,this.initialY=I.touches[0].clientY-this.yOffset):(this.initialX=I.clientX-this.xOffset,this.initialY=I.clientY-this.yOffset),I.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(I){var G=this;I.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){G.dragging=!1,G.img.isDragging=!1,G.img.classList.remove("dragging")},100)}},{key:"drag",value:function(I){this.active&&(I.preventDefault(),I.type==="touchmove"?(this.currentX=I.touches[0].clientX-this.initialX,this.currentY=I.touches[0].clientY-this.initialY):(this.currentX=I.clientX-this.initialX,this.currentY=I.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(I){if(this.zoomedIn){var G=I.clientX-this.img.naturalWidth/2,Z=I.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,G,Z)}}},{key:"setTranslate",value:function(I,G,Z){I.style.transform="translate3d("+G+"px, "+Z+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=o(function I(){var G=this,Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r(this,I);var ie=Z.dragEl,me=Z.toleranceX,_e=me===void 0?40:me,xe=Z.toleranceY,V=xe===void 0?65:xe,oe=Z.slide,fe=oe===void 0?null:oe,de=Z.instance,Te=de===void 0?null:de;this.el=ie,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=_e,this.toleranceY=V,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=fe,this.instance=Te,this.el.addEventListener("mousedown",function(Ae){return G.dragStart(Ae)},!1),this.el.addEventListener("mouseup",function(Ae){return G.dragEnd(Ae)},!1),this.el.addEventListener("mousemove",function(Ae){return G.drag(Ae)},!1)},[{key:"dragStart",value:function(I){if(this.slide.classList.contains("zoomed"))this.active=!1;else{I.type==="touchstart"?(this.initialX=I.touches[0].clientX-this.xOffset,this.initialY=I.touches[0].clientY-this.yOffset):(this.initialX=I.clientX-this.xOffset,this.initialY=I.clientY-this.yOffset);var G=I.target.nodeName.toLowerCase();I.target.classList.contains("nodrag")||m(I.target,".nodrag")||["input","select","textarea","button","a"].indexOf(G)!==-1?this.active=!1:(I.preventDefault(),(I.target===this.el||G!=="img"&&m(I.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=m(I.target,".ginner-container")))}}},{key:"dragEnd",value:function(I){var G=this;I&&I.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){G.instance.preventOutsideClick=!1,G.toleranceReached=!1,G.lastDirection=null,G.dragging=!1,G.el.isDragging=!1,G.el.classList.remove("dragging"),G.slide.classList.remove("dragging-nav"),G.dragContainer.style.transform="",G.dragContainer.style.transition=""},100)}},{key:"drag",value:function(I){if(this.active){I.preventDefault(),this.slide.classList.add("dragging-nav"),I.type==="touchmove"?(this.currentX=I.touches[0].clientX-this.initialX,this.currentY=I.touches[0].clientY-this.initialY):(this.currentX=I.clientX-this.initialX,this.currentY=I.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var G=Math.abs(this.currentX),Z=Math.abs(this.currentY);if(G>0&&G>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var ie=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&ie&&(this.doSlideChange=ie),this.instance.settings.dragAutoSnap&&ie)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),ie=="right"&&this.instance.prevSlide(),void(ie=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&Z>0&&Z>=G&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var me=this.shouldClose();return!this.instance.settings.dragAutoSnap&&me&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&me&&this.instance.close())}}}},{key:"shouldChange",value:function(){var I=!1;if(Math.abs(this.currentX)>=this.toleranceX){var G=this.currentX>0?"right":"left";(G=="left"&&this.slide!==this.slide.parentNode.lastChild||G=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(I=G)}return I}},{key:"shouldClose",value:function(){var I=!1;return Math.abs(this.currentY)>=this.toleranceY&&(I=!0),I}},{key:"setTranslate",value:function(I,G,Z){var ie=arguments.length>3&&arguments[3]!==void 0&&arguments[3];I.style.transition=ie?"all .2s ease":"",I.style.transform="translate3d(".concat(G,"px, ").concat(Z,"px, 0)")}}]);function J(I,G,Z,ie){var me=I.querySelector(".gslide-media"),_e=new Image,xe="gSlideTitle_"+Z,V="gSlideDesc_"+Z;_e.addEventListener("load",function(){O(ie)&&ie()},!1),_e.src=G.href,G.sizes!=""&&G.srcset!=""&&(_e.sizes=G.sizes,_e.srcset=G.srcset),_e.alt="",B(G.alt)||G.alt===""||(_e.alt=G.alt),G.title!==""&&_e.setAttribute("aria-labelledby",xe),G.description!==""&&_e.setAttribute("aria-describedby",V),G.hasOwnProperty("_hasCustomWidth")&&G._hasCustomWidth&&(_e.style.width=G.width),G.hasOwnProperty("_hasCustomHeight")&&G._hasCustomHeight&&(_e.style.height=G.height),me.insertBefore(_e,me.firstChild)}function ye(I,G,Z,ie){var me=this,_e=I.querySelector(".ginner-container"),xe="gvideo"+Z,V=I.querySelector(".gslide-media"),oe=this.getAllPlayers();d(_e,"gvideo-container"),V.insertBefore(w('<div class="gvideo-wrapper"></div>'),V.firstChild);var fe=I.querySelector(".gvideo-wrapper");A(this.settings.plyr.css,"Plyr");var de=G.href,Te=G==null?void 0:G.videoProvider,Ae=!1;V.style.maxWidth=G.width,A(this.settings.plyr.js,"Plyr",function(){if(!Te&&de.match(/vimeo\.com\/([0-9]*)/)&&(Te="vimeo"),!Te&&(de.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||de.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||de.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||de.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(Te="youtube"),Te==="local"||!Te){Te="local";var Se='<video id="'+xe+'" ';Se+='style="background:#000; max-width: '.concat(G.width,';" '),Se+='preload="metadata" ',Se+='x-webkit-airplay="allow" ',Se+="playsinline ",Se+="controls ",Se+='class="gvideo-local">',Se+='<source src="'.concat(de,'">'),Ae=w(Se+="</video>")}var Re=Ae||w('<div id="'.concat(xe,'" data-plyr-provider="').concat(Te,'" data-plyr-embed-id="').concat(de,'"></div>'));d(fe,"".concat(Te,"-video gvideo")),fe.appendChild(Re),fe.setAttribute("data-id",xe),fe.setAttribute("data-index",Z);var Pe=W(me.settings.plyr,"config")?me.settings.plyr.config:{},We=new Plyr("#"+xe,Pe);We.on("ready",function(st){oe[xe]=st.detail.plyr,O(ie)&&ie()}),R(function(){return I.querySelector("iframe")&&I.querySelector("iframe").dataset.ready=="true"},function(){me.resize(I)}),We.on("enterfullscreen",Ne),We.on("exitfullscreen",Ne)})}function Ne(I){var G=m(I.target,".gslide-media");I.type==="enterfullscreen"&&d(G,"fullscreen"),I.type==="exitfullscreen"&&f(G,"fullscreen")}function Ge(I,G,Z,ie){var me,_e=this,xe=I.querySelector(".gslide-media"),V=!(!W(G,"href")||!G.href)&&G.href.split("#").pop().trim(),oe=!(!W(G,"content")||!G.content)&&G.content;if(oe&&($(oe)&&(me=w('<div class="ginlined-content">'.concat(oe,"</div>"))),q(oe))){oe.style.display=="none"&&(oe.style.display="block");var fe=document.createElement("div");fe.className="ginlined-content",fe.appendChild(oe),me=fe}if(V){var de=document.getElementById(V);if(!de)return!1;var Te=de.cloneNode(!0);Te.style.height=G.height,Te.style.maxWidth=G.width,d(Te,"ginlined-content"),me=Te}if(!me)return console.error("Unable to append inline slide content",G),!1;xe.style.height=G.height,xe.style.width=G.width,xe.appendChild(me),this.events["inlineclose"+V]=h("click",{onElement:xe.querySelectorAll(".gtrigger-close"),withCallback:function(Ae){Ae.preventDefault(),_e.close()}}),O(ie)&&ie()}function rt(I,G,Z,ie){var me=I.querySelector(".gslide-media"),_e=function(xe){var V=xe.url,oe=xe.allow,fe=xe.callback,de=xe.appendTo,Te=document.createElement("iframe");return Te.className="vimeo-video gvideo",Te.src=V,Te.style.width="100%",Te.style.height="100%",oe&&Te.setAttribute("allow",oe),Te.onload=function(){Te.onload=null,d(Te,"node-ready"),O(fe)&&fe()},de&&de.appendChild(Te),Te}({url:G.href,callback:ie});me.parentNode.style.maxWidth=G.width,me.parentNode.style.height=G.height,me.appendChild(_e)}var Be=o(function I(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r(this,I),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},N(G)&&(this.defaults=l(this.defaults,G))},[{key:"sourceType",value:function(I){var G=I;return(I=I.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":I.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||I.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||I.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||I.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||I.match(/vimeo\.com\/([0-9]*)/)||I.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":I.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":I.indexOf("#")>-1&&G.split("#").pop().trim()!==""?"inline":I.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(I,G){var Z=this,ie=l({descPosition:G.descPosition},this.defaults);if(N(I)&&!q(I)){W(I,"type")||(W(I,"content")&&I.content?I.type="inline":W(I,"href")&&(I.type=this.sourceType(I.href)));var me=l(ie,I);return this.setSize(me,G),me}var _e="",xe=I.getAttribute("data-glightbox"),V=I.nodeName.toLowerCase();if(V==="a"&&(_e=I.href),V==="img"&&(_e=I.src,ie.alt=I.alt),ie.href=_e,u(ie,function(Se,Re){W(G,Re)&&Re!=="width"&&(ie[Re]=G[Re]);var Pe=I.dataset[Re];B(Pe)||(ie[Re]=Z.sanitizeValue(Pe))}),ie.content&&(ie.type="inline"),!ie.type&&_e&&(ie.type=this.sourceType(_e)),B(xe)){if(!ie.title&&V=="a"){var oe=I.title;B(oe)||oe===""||(ie.title=oe)}if(!ie.title&&V=="img"){var fe=I.alt;B(fe)||fe===""||(ie.title=fe)}}else{var de=[];u(ie,function(Se,Re){de.push(";\\s?"+Re)}),de=de.join("\\s?:|"),xe.trim()!==""&&u(ie,function(Se,Re){var Pe=xe,We=new RegExp("s?"+Re+"s?:s?(.*?)("+de+"s?:|$)"),st=Pe.match(We);if(st&&st.length&&st[1]){var ot=st[1].trim().replace(/;\s*$/,"");ie[Re]=Z.sanitizeValue(ot)}})}if(ie.description&&ie.description.substring(0,1)==="."){var Te;try{Te=document.querySelector(ie.description).innerHTML}catch(Se){if(!(Se instanceof DOMException))throw Se}Te&&(ie.description=Te)}if(!ie.description){var Ae=I.querySelector(".glightbox-desc");Ae&&(ie.description=Ae.innerHTML)}return this.setSize(ie,G,I),this.slideConfig=ie,ie}},{key:"setSize",value:function(I,G){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ie=I.type=="video"?this.checkSize(G.videosWidth):this.checkSize(G.width),me=this.checkSize(G.height);return I.width=W(I,"width")&&I.width!==""?this.checkSize(I.width):ie,I.height=W(I,"height")&&I.height!==""?this.checkSize(I.height):me,Z&&I.type=="image"&&(I._hasCustomWidth=!!Z.dataset.width,I._hasCustomHeight=!!Z.dataset.height),I}},{key:"checkSize",value:function(I){return ee(I)?"".concat(I,"px"):I}},{key:"sanitizeValue",value:function(I){return I!=="true"&&I!=="false"?I:I==="true"}}]),ze=o(function I(G,Z,ie){r(this,I),this.element=G,this.instance=Z,this.index=ie},[{key:"setContent",value:function(){var I=this,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(p(G,"loaded"))return!1;var ie=this.instance.settings,me=this.slideConfig,_e=L();O(ie.beforeSlideLoad)&&ie.beforeSlideLoad({index:this.index,slide:G,player:!1});var xe=me.type,V=me.descPosition,oe=G.querySelector(".gslide-media"),fe=G.querySelector(".gslide-title"),de=G.querySelector(".gslide-desc"),Te=G.querySelector(".gdesc-inner"),Ae=Z,Se="gSlideTitle_"+this.index,Re="gSlideDesc_"+this.index;if(O(ie.afterSlideLoad)&&(Ae=function(){O(Z)&&Z(),ie.afterSlideLoad({index:I.index,slide:G,player:I.instance.getSlidePlayerInstance(I.index)})}),me.title==""&&me.description==""?Te&&Te.parentNode.parentNode.removeChild(Te.parentNode):(fe&&me.title!==""?(fe.id=Se,fe.innerHTML=me.title):fe.parentNode.removeChild(fe),de&&me.description!==""?(de.id=Re,_e&&ie.moreLength>0?(me.smallDescription=this.slideShortDesc(me.description,ie.moreLength,ie.moreText),de.innerHTML=me.smallDescription,this.descriptionEvents(de,me)):de.innerHTML=me.description):de.parentNode.removeChild(de),d(oe.parentNode,"desc-".concat(V)),d(Te.parentNode,"description-".concat(V))),d(oe,"gslide-".concat(xe)),d(G,"loaded"),xe!=="video"){if(xe!=="external")return xe==="inline"?(Ge.apply(this.instance,[G,me,this.index,Ae]),void(me.draggable&&new z({dragEl:G.querySelector(".gslide-inline"),toleranceX:ie.dragToleranceX,toleranceY:ie.dragToleranceY,slide:G,instance:this.instance}))):void(xe!=="image"?O(Ae)&&Ae():J(G,me,this.index,function(){var Pe=G.querySelector("img");me.draggable&&new z({dragEl:Pe,toleranceX:ie.dragToleranceX,toleranceY:ie.dragToleranceY,slide:G,instance:I.instance}),me.zoomable&&Pe.naturalWidth>Pe.offsetWidth&&(d(Pe,"zoomable"),new Q(Pe,G,function(){I.instance.resize()})),O(Ae)&&Ae()}));rt.apply(this,[G,me,this.index,Ae])}else ye.apply(this.instance,[G,me,this.index,Ae])}},{key:"slideShortDesc",value:function(I){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ie=document.createElement("div");ie.innerHTML=I;var me=ie.innerText,_e=Z;if((I=me.trim()).length<=G)return I;var xe=I.substr(0,G-1);return _e?(ie=null,xe+'... <a href="#" class="desc-more">'+Z+"</a>"):xe}},{key:"descriptionEvents",value:function(I,G){var Z=this,ie=I.querySelector(".desc-more");if(!ie)return!1;h("click",{onElement:ie,withCallback:function(me,_e){me.preventDefault();var xe=document.body,V=m(_e,".gslide-desc");if(!V)return!1;V.innerHTML=G.description,d(xe,"gdesc-open");var oe=h("click",{onElement:[xe,m(V,".gslide-description")],withCallback:function(fe,de){fe.target.nodeName.toLowerCase()!=="a"&&(f(xe,"gdesc-open"),d(xe,"gdesc-closed"),V.innerHTML=G.smallDescription,Z.descriptionEvents(V,G),setTimeout(function(){f(xe,"gdesc-closed")},400),oe.destroy())}})}})}},{key:"create",value:function(){return w(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){q(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var I=new Be(this.instance.settings.slideExtraAttributes);return this.slideConfig=I.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function lt(I){return Math.sqrt(I.x*I.x+I.y*I.y)}function xt(I,G){var Z=function(ie,me){var _e=lt(ie)*lt(me);if(_e===0)return 0;var xe=function(V,oe){return V.x*oe.x+V.y*oe.y}(ie,me)/_e;return xe>1&&(xe=1),Math.acos(xe)}(I,G);return function(ie,me){return ie.x*me.y-me.x*ie.y}(I,G)>0&&(Z*=-1),180*Z/Math.PI}var Mt=o(function I(G){r(this,I),this.handlers=[],this.el=G},[{key:"add",value:function(I){this.handlers.push(I)}},{key:"del",value:function(I){I||(this.handlers=[]);for(var G=this.handlers.length;G>=0;G--)this.handlers[G]===I&&this.handlers.splice(G,1)}},{key:"dispatch",value:function(){for(var I=0,G=this.handlers.length;I<G;I++){var Z=this.handlers[I];typeof Z=="function"&&Z.apply(this.el,arguments)}}}]);function Ct(I,G){var Z=new Mt(I);return Z.add(G),Z}var gi=o(function I(G,Z){r(this,I),this.element=typeof G=="string"?document.querySelector(G):G,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var ie=function(){};this.rotate=Ct(this.element,Z.rotate||ie),this.touchStart=Ct(this.element,Z.touchStart||ie),this.multipointStart=Ct(this.element,Z.multipointStart||ie),this.multipointEnd=Ct(this.element,Z.multipointEnd||ie),this.pinch=Ct(this.element,Z.pinch||ie),this.swipe=Ct(this.element,Z.swipe||ie),this.tap=Ct(this.element,Z.tap||ie),this.doubleTap=Ct(this.element,Z.doubleTap||ie),this.longTap=Ct(this.element,Z.longTap||ie),this.singleTap=Ct(this.element,Z.singleTap||ie),this.pressMove=Ct(this.element,Z.pressMove||ie),this.twoFingerPressMove=Ct(this.element,Z.twoFingerPressMove||ie),this.touchMove=Ct(this.element,Z.touchMove||ie),this.touchEnd=Ct(this.element,Z.touchEnd||ie),this.touchCancel=Ct(this.element,Z.touchCancel||ie),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(I){if(I.touches)if(I.target&&I.target.nodeName&&["a","button","input"].indexOf(I.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",I.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=I.touches[0].pageX,this.y1=I.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(I,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var G=this.preV;if(I.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var Z={x:I.touches[1].pageX-this.x1,y:I.touches[1].pageY-this.y1};G.x=Z.x,G.y=Z.y,this.pinchStartLen=lt(G),this.multipointStart.dispatch(I,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(I,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(I){if(I.touches){var G=this.preV,Z=I.touches.length,ie=I.touches[0].pageX,me=I.touches[0].pageY;if(this.isDoubleTap=!1,Z>1){var _e=I.touches[1].pageX,xe=I.touches[1].pageY,V={x:I.touches[1].pageX-ie,y:I.touches[1].pageY-me};G.x!==null&&(this.pinchStartLen>0&&(I.zoom=lt(V)/this.pinchStartLen,this.pinch.dispatch(I,this.element)),I.angle=xt(V,G),this.rotate.dispatch(I,this.element)),G.x=V.x,G.y=V.y,this.x2!==null&&this.sx2!==null?(I.deltaX=(ie-this.x2+_e-this.sx2)/2,I.deltaY=(me-this.y2+xe-this.sy2)/2):(I.deltaX=0,I.deltaY=0),this.twoFingerPressMove.dispatch(I,this.element),this.sx2=_e,this.sy2=xe}else{if(this.x2!==null){I.deltaX=ie-this.x2,I.deltaY=me-this.y2;var oe=Math.abs(this.x1-this.x2),fe=Math.abs(this.y1-this.y2);(oe>10||fe>10)&&(this._preventTap=!0)}else I.deltaX=0,I.deltaY=0;this.pressMove.dispatch(I,this.element)}this.touchMove.dispatch(I,this.element),this._cancelLongTap(),this.x2=ie,this.y2=me,Z>1&&I.preventDefault()}}},{key:"end",value:function(I){if(I.changedTouches){this._cancelLongTap();var G=this;I.touches.length<2&&(this.multipointEnd.dispatch(I,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(I.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){G.swipe.dispatch(I,G.element)},0)):(this.tapTimeout=setTimeout(function(){G._preventTap||G.tap.dispatch(I,G.element),G.isDoubleTap&&(G.doubleTap.dispatch(I,G.element),G.isDoubleTap=!1)},0),G.isDoubleTap||(G.singleTapTimeout=setTimeout(function(){G.singleTap.dispatch(I,G.element)},250))),this.touchEnd.dispatch(I,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(I){this.cancelAll(),this.touchCancel.dispatch(I,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(I,G,Z,ie){return Math.abs(I-G)>=Math.abs(Z-ie)?I-G>0?"Left":"Right":Z-ie>0?"Up":"Down"}},{key:"on",value:function(I,G){this[I]&&this[I].add(G)}},{key:"off",value:function(I,G){this[I]&&this[I].del(G)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function Wt(I){var G=function(){var xe,V=document.createElement("fakeelement"),oe={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(xe in oe)if(V.style[xe]!==void 0)return oe[xe]}(),Z=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,ie=p(I,"gslide-media")?I:I.querySelector(".gslide-media"),me=m(ie,".ginner-container"),_e=I.querySelector(".gslide-description");Z>769&&(ie=me),d(ie,"greset"),v(ie,"translate3d(0, 0, 0)"),h(G,{onElement:ie,once:!0,withCallback:function(xe,V){f(ie,"greset")}}),ie.style.opacity="",_e&&(_e.style.opacity="")}function Qi(I){if(I.events.hasOwnProperty("touch"))return!1;var G,Z,ie,me=C(),_e=me.width,xe=me.height,V=!1,oe=null,fe=null,de=null,Te=!1,Ae=1,Se=1,Re=!1,Pe=!1,We=null,st=null,ot=null,It=null,ct=0,Ht=0,Yt=!1,St=!1,ti={},Rt={},xi=0,Mi=0,on=document.getElementById("glightbox-slider"),en=document.querySelector(".goverlay"),ri=new gi(on,{touchStart:function(Ot){if(V=!0,(p(Ot.targetTouches[0].target,"ginner-container")||m(Ot.targetTouches[0].target,".gslide-desc")||Ot.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(V=!1),m(Ot.targetTouches[0].target,".gslide-inline")&&!p(Ot.targetTouches[0].target.parentNode,"gslide-inline")&&(V=!1),V){if(Rt=Ot.targetTouches[0],ti.pageX=Ot.targetTouches[0].pageX,ti.pageY=Ot.targetTouches[0].pageY,xi=Ot.targetTouches[0].clientX,Mi=Ot.targetTouches[0].clientY,oe=I.activeSlide,fe=oe.querySelector(".gslide-media"),ie=oe.querySelector(".gslide-inline"),de=null,p(fe,"gslide-image")&&(de=fe.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(fe=oe.querySelector(".ginner-container")),f(en,"greset"),Ot.pageX>20&&Ot.pageX<window.innerWidth-20)return;Ot.preventDefault()}},touchMove:function(Ot){if(V&&(Rt=Ot.targetTouches[0],!Re&&!Pe)){if(ie&&ie.offsetHeight>xe){var Si=ti.pageX-Rt.pageX;if(Math.abs(Si)<=13)return!1}Te=!0;var Bn,En=Ot.targetTouches[0].clientX,fn=Ot.targetTouches[0].clientY,hs=xi-En,pn=Mi-fn;if(Math.abs(hs)>Math.abs(pn)?(Yt=!1,St=!0):(St=!1,Yt=!0),G=Rt.pageX-ti.pageX,ct=100*G/_e,Z=Rt.pageY-ti.pageY,Ht=100*Z/xe,Yt&&de&&(Bn=1-Math.abs(Z)/xe,en.style.opacity=Bn,I.settings.touchFollowAxis&&(ct=0)),St&&(Bn=1-Math.abs(G)/_e,fe.style.opacity=Bn,I.settings.touchFollowAxis&&(Ht=0)),!de)return v(fe,"translate3d(".concat(ct,"%, 0, 0)"));v(fe,"translate3d(".concat(ct,"%, ").concat(Ht,"%, 0)"))}},touchEnd:function(){if(V){if(Te=!1,Pe||Re)return ot=We,void(It=st);var Ot=Math.abs(parseInt(Ht)),Si=Math.abs(parseInt(ct));if(!(Ot>29&&de))return Ot<29&&Si<25?(d(en,"greset"),en.style.opacity=1,Wt(fe)):void 0;I.close()}},multipointEnd:function(){setTimeout(function(){Re=!1},50)},multipointStart:function(){Re=!0,Ae=Se||1},pinch:function(Ot){if(!de||Te)return!1;Re=!0,de.scaleX=de.scaleY=Ae*Ot.zoom;var Si=Ae*Ot.zoom;if(Pe=!0,Si<=1)return Pe=!1,Si=1,It=null,ot=null,We=null,st=null,void de.setAttribute("style","");Si>4.5&&(Si=4.5),de.style.transform="scale3d(".concat(Si,", ").concat(Si,", 1)"),Se=Si},pressMove:function(Ot){if(Pe&&!Re){var Si=Rt.pageX-ti.pageX,Bn=Rt.pageY-ti.pageY;ot&&(Si+=ot),It&&(Bn+=It),We=Si,st=Bn;var En="translate3d(".concat(Si,"px, ").concat(Bn,"px, 0)");Se&&(En+=" scale3d(".concat(Se,", ").concat(Se,", 1)")),v(de,En)}},swipe:function(Ot){if(!Pe)if(Re)Re=!1;else{if(Ot.direction=="Left"){if(I.index==I.elements.length-1)return Wt(fe);I.nextSlide()}if(Ot.direction=="Right"){if(I.index==0)return Wt(fe);I.prevSlide()}}}});I.events.touch=ri}var He=L(),ge=L()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,se=document.getElementsByTagName("html")[0],re={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},pe=o(function I(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r(this,I),this.customOptions=G,this.settings=l(re,G),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var I=this,G=this.getSelector();G&&(this.baseEvents=h("click",{onElement:G,withCallback:function(Z,ie){Z.preventDefault(),I.open(ie)}})),this.elements=this.getElements()}},{key:"open",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var Z=ee(G)?G:this.settings.startAt;if(q(I)){var ie=I.getAttribute("data-gallery");ie&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,ie)),B(Z)&&(Z=this.getElementIndex(I))<0&&(Z=0)}ee(Z)||(Z=0),this.build(),y(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var me=document.body,_e=window.innerWidth-document.documentElement.clientWidth;if(_e>0){var xe=document.createElement("style");xe.type="text/css",xe.className="gcss-styles",xe.innerText=".gscrollbar-fixer {margin-right: ".concat(_e,"px}"),document.head.appendChild(xe),d(me,"gscrollbar-fixer")}d(me,"glightbox-open"),d(se,"glightbox-open"),He&&(d(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(Z,!0),this.elements.length===1?(d(this.prevButton,"glightbox-button-hidden"),d(this.nextButton,"glightbox-button-hidden")):(f(this.prevButton,"glightbox-button-hidden"),f(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),O(this.settings.onOpen)&&this.settings.onOpen(),ge&&this.settings.touchNavigation&&Qi(this),this.settings.keyboardNavigation&&le(this)}},{key:"openAt",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,I)}},{key:"showSlide",value:function(){var I=this,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];b(this.loader),this.index=parseInt(G);var ie=this.slidesContainer.querySelector(".current");ie&&f(ie,"current"),this.slideAnimateOut();var me=this.slidesContainer.querySelectorAll(".gslide")[G];if(p(me,"loaded"))this.slideAnimateIn(me,Z),x(this.loader);else{b(this.loader);var _e=this.elements[G],xe={index:this.index,slide:me,slideNode:me,slideConfig:_e.slideConfig,slideIndex:this.index,trigger:_e.node,player:null};this.trigger("slide_before_load",xe),_e.instance.setContent(me,function(){x(I.loader),I.resize(),I.slideAnimateIn(me,Z),I.trigger("slide_after_load",xe)})}this.slideDescription=me.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&p(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(G+1),this.preloadSlide(G-1)),this.updateNavigationClasses(),this.activeSlide=me}},{key:"preloadSlide",value:function(I){var G=this;if(I<0||I>this.elements.length-1||B(this.elements[I]))return!1;var Z=this.slidesContainer.querySelectorAll(".gslide")[I];if(p(Z,"loaded"))return!1;var ie=this.elements[I],me=ie.type,_e={index:I,slide:Z,slideNode:Z,slideConfig:ie.slideConfig,slideIndex:I,trigger:ie.node,player:null};this.trigger("slide_before_load",_e),me==="video"||me==="external"?setTimeout(function(){ie.instance.setContent(Z,function(){G.trigger("slide_after_load",_e)})},200):ie.instance.setContent(Z,function(){G.trigger("slide_after_load",_e)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var I=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(I<0||I>this.elements.length-1))return!1;I<0?I=this.elements.length-1:I>=this.elements.length&&(I=0),this.showSlide(I)}},{key:"insertSlide",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;G<0&&(G=this.elements.length);var Z=new ze(I,this,G),ie=Z.getConfig(),me=l({},ie),_e=Z.create(),xe=this.elements.length-1;me.index=G,me.node=!1,me.instance=Z,me.slideConfig=ie,this.elements.splice(G,0,me);var V=null,oe=null;if(this.slidesContainer){if(G>xe)this.slidesContainer.appendChild(_e);else{var fe=this.slidesContainer.querySelectorAll(".gslide")[G];this.slidesContainer.insertBefore(_e,fe)}(this.settings.preload&&this.index==0&&G==0||this.index-1==G||this.index+1==G)&&this.preloadSlide(G),this.index===0&&G===0&&(this.index=1),this.updateNavigationClasses(),V=this.slidesContainer.querySelectorAll(".gslide")[G],oe=this.getSlidePlayerInstance(G),me.slideNode=V}this.trigger("slide_inserted",{index:G,slide:V,slideNode:V,slideConfig:ie,slideIndex:G,trigger:null,player:oe}),O(this.settings.slideInserted)&&this.settings.slideInserted({index:G,slide:V,player:oe})}},{key:"removeSlide",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(I<0||I>this.elements.length-1)return!1;var G=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[I];G&&(this.getActiveSlideIndex()==I&&(I==this.elements.length-1?this.prevSlide():this.nextSlide()),G.parentNode.removeChild(G)),this.elements.splice(I,1),this.trigger("slide_removed",I),O(this.settings.slideRemoved)&&this.settings.slideRemoved(I)}},{key:"slideAnimateIn",value:function(I,G){var Z=this,ie=I.querySelector(".gslide-media"),me=I.querySelector(".gslide-description"),_e={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:B(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:B(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},xe={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(ie.offsetWidth>0&&me&&(x(me),me.style.display=""),f(I,this.effectsClasses),G)y(I,this.settings.cssEfects[this.settings.openEffect].in,function(){Z.settings.autoplayVideos&&Z.slidePlayerPlay(I),Z.trigger("slide_changed",{prev:_e,current:xe}),O(Z.settings.afterSlideChange)&&Z.settings.afterSlideChange.apply(Z,[_e,xe])});else{var V=this.settings.slideEffect,oe=V!=="none"?this.settings.cssEfects[V].in:V;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(oe=this.settings.cssEfects.slideBack.in),y(I,oe,function(){Z.settings.autoplayVideos&&Z.slidePlayerPlay(I),Z.trigger("slide_changed",{prev:_e,current:xe}),O(Z.settings.afterSlideChange)&&Z.settings.afterSlideChange.apply(Z,[_e,xe])})}setTimeout(function(){Z.resize(I)},100),d(I,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var I=this.prevActiveSlide;f(I,this.effectsClasses),d(I,"prev");var G=this.settings.slideEffect,Z=G!=="none"?this.settings.cssEfects[G].out:G;this.slidePlayerPause(I),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:B(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:B(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),O(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Z=this.settings.cssEfects.slideBack.out),y(I,Z,function(){var ie=I.querySelector(".ginner-container"),me=I.querySelector(".gslide-media"),_e=I.querySelector(".gslide-description");ie.style.transform="",me.style.transform="",f(me,"greset"),me.style.opacity="",_e&&(_e.style.opacity=""),f(I,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(I){var G="gvideo"+I,Z=this.getAllPlayers();return!(!W(Z,G)||!Z[G])&&Z[G]}},{key:"stopSlideVideo",value:function(I){if(q(I)){var G=I.querySelector(".gvideo-wrapper");G&&(I=G.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var Z=this.getSlidePlayerInstance(I);Z&&Z.playing&&Z.pause()}},{key:"slidePlayerPause",value:function(I){if(q(I)){var G=I.querySelector(".gvideo-wrapper");G&&(I=G.getAttribute("data-index"))}var Z=this.getSlidePlayerInstance(I);Z&&Z.playing&&Z.pause()}},{key:"playSlideVideo",value:function(I){if(q(I)){var G=I.querySelector(".gvideo-wrapper");G&&(I=G.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var Z=this.getSlidePlayerInstance(I);Z&&!Z.playing&&Z.play()}},{key:"slidePlayerPlay",value:function(I){var G;if(!He||(G=this.settings.plyr.config)!==null&&G!==void 0&&G.muted){if(q(I)){var Z=I.querySelector(".gvideo-wrapper");Z&&(I=Z.getAttribute("data-index"))}var ie=this.getSlidePlayerInstance(I);ie&&!ie.playing&&(ie.play(),this.settings.autofocusVideos&&ie.elements.container.focus())}}},{key:"setElements",value:function(I){var G=this;this.settings.elements=!1;var Z=[];I&&I.length&&u(I,function(ie,me){var _e=new ze(ie,G,me),xe=_e.getConfig(),V=l({},xe);V.slideConfig=xe,V.instance=_e,V.index=me,Z.push(V)}),this.elements=Z,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var ie=w(G.settings.slideHTML);G.slidesContainer.appendChild(ie)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(I){var G=!1;return u(this.elements,function(Z,ie){if(W(Z,"node")&&Z.node==I)return G=ie,!0}),G}},{key:"getElements",value:function(){var I=this,G=[];this.elements=this.elements?this.elements:[],!B(this.settings.elements)&&M(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(ie,me){var _e=new ze(ie,I,me),xe=_e.getConfig(),V=l({},xe);V.node=!1,V.index=me,V.instance=_e,V.slideConfig=xe,G.push(V)});var Z=!1;return this.getSelector()&&(Z=document.querySelectorAll(this.getSelector())),Z&&u(Z,function(ie,me){var _e=new ze(ie,I,me),xe=_e.getConfig(),V=l({},xe);V.node=ie,V.index=me,V.instance=_e,V.slideConfig=xe,V.gallery=ie.getAttribute("data-gallery"),G.push(V)}),G}},{key:"getGalleryElements",value:function(I,G){return I.filter(function(Z){return Z.gallery==G})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var I=[];for(var G in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(G)){var Z=this.settings.cssEfects[G];I.push("g".concat(Z.in)),I.push("g".concat(Z.out))}return I.join(" ")}},{key:"build",value:function(){var I=this;if(this.built)return!1;var G=document.body.childNodes,Z=[];u(G,function(fe){fe.parentNode==document.body&&fe.nodeName.charAt(0)!=="#"&&fe.hasAttribute&&!fe.hasAttribute("aria-hidden")&&(Z.push(fe),fe.setAttribute("aria-hidden","true"))});var ie=W(this.settings.svg,"next")?this.settings.svg.next:"",me=W(this.settings.svg,"prev")?this.settings.svg.prev:"",_e=W(this.settings.svg,"close")?this.settings.svg.close:"",xe=this.settings.lightboxHTML;xe=w(xe=(xe=(xe=xe.replace(/{nextSVG}/g,ie)).replace(/{prevSVG}/g,me)).replace(/{closeSVG}/g,_e)),document.body.appendChild(xe);var V=document.getElementById("glightbox-body");this.modal=V;var oe=V.querySelector(".gclose");this.prevButton=V.querySelector(".gprev"),this.nextButton=V.querySelector(".gnext"),this.overlay=V.querySelector(".goverlay"),this.loader=V.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=Z,this.events={},d(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&oe&&(this.events.close=h("click",{onElement:oe,withCallback:function(fe,de){fe.preventDefault(),I.close()}})),oe&&!this.settings.closeButton&&oe.parentNode.removeChild(oe),this.nextButton&&(this.events.next=h("click",{onElement:this.nextButton,withCallback:function(fe,de){fe.preventDefault(),I.nextSlide()}})),this.prevButton&&(this.events.prev=h("click",{onElement:this.prevButton,withCallback:function(fe,de){fe.preventDefault(),I.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=h("click",{onElement:V,withCallback:function(fe,de){I.preventOutsideClick||p(document.body,"glightbox-mobile")||m(fe.target,".ginner-container")||m(fe.target,".gbtn")||p(fe.target,"gnext")||p(fe.target,"gprev")||I.close()}})),u(this.elements,function(fe,de){I.slidesContainer.appendChild(fe.instance.create()),fe.slideNode=I.slidesContainer.querySelectorAll(".gslide")[de]}),ge&&d(document.body,"glightbox-touch"),this.events.resize=h("resize",{onElement:window,withCallback:function(){I.resize()}}),this.built=!0}},{key:"resize",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((I=I||this.activeSlide)&&!p(I,"zoomed")){var G=C(),Z=I.querySelector(".gvideo-wrapper"),ie=I.querySelector(".gslide-image"),me=this.slideDescription,_e=G.width,xe=G.height;if(_e<=768?d(document.body,"glightbox-mobile"):f(document.body,"glightbox-mobile"),Z||ie){var V=!1;if(me&&(p(me,"description-bottom")||p(me,"description-top"))&&!p(me,"gabsolute")&&(V=!0),ie){if(_e<=768)ie.querySelector("img");else if(V){var oe,fe=me.offsetHeight,de=ie.querySelector("img"),Te=this.elements[this.index].node,Ae=(oe=Te.getAttribute("data-height"))!==null&&oe!==void 0?oe:"100vh";de.setAttribute("style","max-height: calc(".concat(Ae," - ").concat(fe,"px)")),me.setAttribute("style","max-width: ".concat(de.offsetWidth,"px;"))}}if(Z){var Se=W(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!Se){var Re=Z.clientWidth,Pe=Z.clientHeight,We=Re/Pe;Se="".concat(Re/We,":").concat(Pe/We)}var st=Se.split(":"),ot=this.settings.videosWidth,It=this.settings.videosWidth,ct=(It=ee(ot)||ot.indexOf("px")!==-1?parseInt(ot):ot.indexOf("vw")!==-1?_e*parseInt(ot)/100:ot.indexOf("vh")!==-1?xe*parseInt(ot)/100:ot.indexOf("%")!==-1?_e*parseInt(ot)/100:parseInt(Z.clientWidth))/(parseInt(st[0])/parseInt(st[1]));if(ct=Math.floor(ct),V&&(xe-=me.offsetHeight),It>_e||ct>xe||xe<ct&&_e>It){var Ht=Z.offsetWidth,Yt=Z.offsetHeight,St=xe/Yt,ti={width:Ht*St,height:Yt*St};Z.parentNode.setAttribute("style","max-width: ".concat(ti.width,"px")),V&&me.setAttribute("style","max-width: ".concat(ti.width,"px;"))}else Z.parentNode.style.maxWidth="".concat(ot),V&&me.setAttribute("style","max-width: ".concat(ot,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var I=this.loop();f(this.nextButton,"disabled"),f(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(d(this.prevButton,"disabled"),d(this.nextButton,"disabled")):this.index!==0||I?this.index!==this.elements.length-1||I||d(this.nextButton,"disabled"):d(this.prevButton,"disabled")}},{key:"loop",value:function(){var I=W(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return I=W(this.settings,"loop")?this.settings.loop:I,I}},{key:"close",value:function(){var I=this;if(!this.lightboxOpen){if(this.events){for(var G in this.events)this.events.hasOwnProperty(G)&&this.events[G].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(Z){Z.removeAttribute("aria-hidden")}),d(this.modal,"glightbox-closing"),y(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),y(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(I.activeSlide=null,I.prevActiveSlideIndex=null,I.prevActiveSlide=null,I.built=!1,I.events){for(var Z in I.events)I.events.hasOwnProperty(Z)&&I.events[Z].destroy();I.events=null}var ie=document.body;f(se,"glightbox-open"),f(ie,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),I.modal.parentNode.removeChild(I.modal),I.trigger("close"),O(I.settings.onClose)&&I.settings.onClose();var me=document.querySelector(".gcss-styles");me&&me.parentNode.removeChild(me),I.lightboxOpen=!1,I.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(I,G){var Z=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!I||!O(G))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:I,once:Z,callback:G})}},{key:"once",value:function(I,G){this.on(I,G,!0)}},{key:"trigger",value:function(I){var G=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ie=[];u(this.apiEvents,function(me,_e){var xe=me.evt,V=me.once,oe=me.callback;xe==I&&(oe(Z),V&&ie.push(_e))}),ie.length&&u(ie,function(me){return G.apiEvents.splice(me,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.0"}}]);return function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},G=new pe(I);return G.init(),G}})})(G3e);var b3t=G3e.exports;const x3t=Ea(b3t);let oO=[],aO=[];function w3t(i,e,t,n){const s=new DOMParser().parseFromString(i,"text/html"),o=n.shadowRoot||n,a=!!(n.showNav&&n.nav.length);s.querySelectorAll("a").forEach(c=>c.target="_blank"),oO.forEach(c=>c==null?void 0:c.disconnect()),oO=[],aO.forEach(c=>c==null?void 0:c.disconnect()),aO=[],a&&n.nav.forEach(c=>{const h=new IntersectionObserver(d=>{d.forEach(f=>{const p=f.isIntersecting,m=f.target.getAttribute("id");p&&o.querySelectorAll(".navigation li").forEach(y=>{y.classList.contains(`nav-${m}`)?y.classList.add("active"):y.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const d=o.querySelector(`#${c.id}`);d&&(h.observe(d),oO.push(h))},200)}),Object.keys(e).forEach(c=>{const h=e[c];if(VIt.includes(h.mode)&&h.steps){const d=`${h.as}#${h.id}`,f=new IntersectionObserver(p=>{p.forEach(m=>{const y=m.isIntersecting,v=Number(m.target.getAttribute("key"));y&&twe(h,v,d,o)})});setTimeout(()=>{if(!o.querySelector(`#${c}`))return;o.querySelectorAll(`#${c} section-step`).forEach((y,v)=>{y.setAttribute("key",`${v}`),f.observe(y)}),aO.push(f),twe(h,0,d,o)},100)}});function u(){o.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(h){h.getAttribute("data-parallax")==="true"&&(h.style.transform="translateY("+h.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(s.body.childNodes).map(c=>E3t(c,t))}function twe(i,e,t,n){const r=n.querySelector(t);Object.keys(i.steps[e]).forEach(s=>{r[s]=i.steps[e][s]})}function E3t(i,e){if(i.nodeType===Node.ELEMENT_NODE&&i.querySelectorAll("*").forEach(n=>{/^[a-z]+(-[a-z0-9]+)*$/.test(n.tagName.toLowerCase())&&i.classList.contains("section-custom")&&Array.from(n.attributes).forEach(r=>n[r.name]=q6(n,r.name)),setTimeout(()=>e(n),100)}),i.querySelectorAll){const t=x3t({autoplayVideos:!0}),n=[];i.querySelectorAll("img").forEach(s=>{const o=s.getAttribute("mode");s.parentNode.tagName!=="A"&&o!=="hero"&&(s.style.cursor="zoom-in",s.addEventListener("click",()=>{t.open()}),n.push({type:"image",href:s.src}))}),t.setElements(n)}return i}function q6(i,e=void 0){const t=e?i.getAttribute(e):i;return U3e(t)}function U3e(i){let e;try{e=JSON.parse(i)}catch{!isNaN(i)&&i.trim()!==""?e=Number(i):i==="true"?e=!0:i==="false"?e=!1:e=i}return e}function C3t(i,e,t,n){const r=t.getBoundingClientRect(),s=(r.right+r.left)/2,o=25/2,a=e?r.top-o:void 0,l=e?r.top+o:void 0,u=r.bottom-o,c=r.bottom+o,h=s-o,d=s+o,{clientX:f,clientY:p}=i;if(f>=h&&f<=d&&(p>=u||p>=a)&&(p<=c||p<=l)&&n.showEditor!=="closed"){const y=e?p>=a&&p<=l:!1,v=Number(t.getAttribute("data-section"));n.addCustomSectionIndex=y?v-1:v,n.requestUpdate()}}function S3t(i,e,t,n,r){const s=new DOMParser;let o=-1;if(t&&e.length&&i.length){o=0;const a=`
    <div class="navigation">
      <div class="container">
        <ul>
          ${e.map(({id:u,title:c})=>`<li class="nav-${u}"><a href="#${u}">${c}</a></li>`).join("")}
        </ul>
      </div>
    </div>
  `,l=s.parseFromString(a,"text/html").body.firstChild;i[0].classList.contains("hero")&&(o=1),i.splice(o,0,l)}if(i.length){const a=o+1;i[a].classList.add("section-start"),i.slice(a).forEach((l,u)=>{if(l.classList.add("section-item"),l.setAttribute("data-section",`${u+1}`),n!==void 0){const c=l.classList.contains("section-start");l.addEventListener("click",function(h){C3t(h,c,this,r)})}})}return i}const T3t="@eox/storytelling",A3t="1.0.6",R3t="module",k3t={"@eox/eslint-config":"^1.0.0","@typescript-eslint/eslint-plugin":"^7.0.1","@typescript-eslint/parser":"^7.0.1","eslint-plugin-typescript":"^0.14.0",typescript:"^5.2.2",vite:"^5.0.2"},D3t={npm:">=8.0.0",node:">=18.0.0"},L3t=["dist","test"],M3t="./dist/eox-storytelling.js",I3t={build:"vite build",watch:"vite build --watch",format:"prettier --write .",lint:"eslint --ext .js,.ts .","lint:fix":"eslint --ext .js,.ts . --fix",typecheck:"tsc"},O3t={"@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.0.2","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},nA={name:T3t,version:A3t,type:R3t,devDependencies:k3t,engines:D3t,files:L3t,main:M3t,scripts:I3t,dependencies:O3t};function P3t(i,e){(i.shadowRoot||i).querySelectorAll(e).forEach(t=>{t.addEventListener("click",n=>{n.preventDefault(),window.parent.location.hash=n.target.hash.replace("#",""),q3e(i)})})}function q3e(i){const e=window.parent.location.hash,t=e?i.shadowRoot.querySelector(e):null;t&&t.scrollIntoView({behavior:"smooth"})}function F3t(i){return{tagNameCheck:n=>n.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:n=>n.match(new RegExp(i.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function N3t(){const i=document.createElement("style");i.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(i)}function lO(i){const e=i.split("-")[0].split(".").map(Number);let t=0;const n=1e3;for(let r=0;r<e.length;r++)t+=e[r]*Math.pow(n,e.length-r-1);return t}function $3t(i){const e=Number(Object.keys(rO).find(n=>rO[n].length===1)),t=rO[i];if(!i||!t)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${e}).`),e;if(e===i)return i;{const n=[lO(t[0]),lO(t[1])],r=lO(nA.version);return r>=n[0]&&r<=n[1]||console.error(`You are using an older or newer version of ${nA.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${nA.name} package to (>=${t[0]} and <=${t[1]}) or change the markdown syntax version to ${nA.version}`),i}}var V3e={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(self,()=>{return t={7629:(r,s,o)=>{const a=o(375),l=o(8571),u=o(9474),c=o(1687),h=o(8652),d=o(8160),f=o(3292),p=o(6354),m=o(8901),y=o(9708),v=o(6914),b=o(2294),x=o(6133),w=o(1152),C=o(8863),D=o(2036),R={Base:class{constructor(A){this.type=A,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new b.Ids,this._preferences=null,this._refs=new x.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof y.describe=="function","Manifest functionality disabled"),y.describe(this)}allow(...A){return d.verifyFlat(A,"allow"),this._values(A,"_valids")}alter(A){a(A&&typeof A=="object"&&!Array.isArray(A),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const L=this.clone();L.$_terms.alterations=L.$_terms.alterations||[];for(const O in A){const $=A[O];a(typeof $=="function","Alteration adjuster for",O,"must be a function"),L.$_terms.alterations.push({target:O,adjuster:$})}return L.$_temp.ruleset=!1,L}artifact(A){return a(A!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",A)}cast(A){return a(A===!1||typeof A=="string","Invalid to value"),a(A===!1||this._definition.cast[A],"Type",this.type,"does not support casting to",A),this.$_setFlag("cast",A===!1?void 0:A)}default(A,L){return this._default("default",A,L)}description(A){return a(A&&typeof A=="string","Description must be a non-empty string"),this.$_setFlag("description",A)}empty(A){const L=this.clone();return A!==void 0&&(A=L.$_compile(A,{override:!1})),L.$_setFlag("empty",A,{clone:!1})}error(A){return a(A,"Missing error"),a(A instanceof Error||typeof A=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",A)}example(A,L={}){return a(A!==void 0,"Missing example"),d.assertOptions(L,["override"]),this._inner("examples",A,{single:!0,override:L.override})}external(A,L){return typeof A=="object"&&(a(!L,"Cannot combine options with description"),L=A.description,A=A.method),a(typeof A=="function","Method must be a function"),a(L===void 0||L&&typeof L=="string","Description must be a non-empty string"),this._inner("externals",{method:A,description:L},{single:!0})}failover(A,L){return this._default("failover",A,L)}forbidden(){return this.presence("forbidden")}id(A){return A?(a(typeof A=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(A),"id cannot contain period character"),this.$_setFlag("id",A)):this.$_setFlag("id",void 0)}invalid(...A){return this._values(A,"_invalids")}label(A){return a(A&&typeof A=="string","Label name must be a non-empty string"),this.$_setFlag("label",A)}meta(A){return a(A!==void 0,"Meta cannot be undefined"),this._inner("metas",A,{single:!0})}note(...A){a(A.length,"Missing notes");for(const L of A)a(L&&typeof L=="string","Notes must be non-empty strings");return this._inner("notes",A)}only(A=!0){return a(typeof A=="boolean","Invalid mode:",A),this.$_setFlag("only",A)}optional(){return this.presence("optional")}prefs(A){a(A,"Missing preferences"),a(A.context===void 0,"Cannot override context"),a(A.externals===void 0,"Cannot override externals"),a(A.warnings===void 0,"Cannot override warnings"),a(A.debug===void 0,"Cannot override debug"),d.checkPreferences(A);const L=this.clone();return L._preferences=d.preferences(L._preferences,A),L}presence(A){return a(["optional","required","forbidden"].includes(A),"Unknown presence mode",A),this.$_setFlag("presence",A)}raw(A=!0){return this.$_setFlag("result",A?"raw":void 0)}result(A){return a(["raw","strip"].includes(A),"Unknown result mode",A),this.$_setFlag("result",A)}required(){return this.presence("required")}strict(A){const L=this.clone(),O=A!==void 0&&!A;return L._preferences=d.preferences(L._preferences,{convert:O}),L}strip(A=!0){return this.$_setFlag("result",A?"strip":void 0)}tag(...A){a(A.length,"Missing tags");for(const L of A)a(L&&typeof L=="string","Tags must be non-empty strings");return this._inner("tags",A)}unit(A){return a(A&&typeof A=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",A)}valid(...A){d.verifyFlat(A,"valid");const L=this.allow(...A);return L.$_setFlag("only",!!L._valids,{clone:!1}),L}when(A,L){const O=this.clone();O.$_terms.whens||(O.$_terms.whens=[]);const $=f.when(O,A,L);if(!["any","link"].includes(O.type)){const q=$.is?[$]:$.switch;for(const M of q)a(!M.then||M.then.type==="any"||M.then.type===O.type,"Cannot combine",O.type,"with",M.then&&M.then.type),a(!M.otherwise||M.otherwise.type==="any"||M.otherwise.type===O.type,"Cannot combine",O.type,"with",M.otherwise&&M.otherwise.type)}return O.$_terms.whens.push($),O.$_mutateRebuild()}cache(A){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const L=this.clone();return L._cache=A||h.provider.provision(),L.$_temp.ruleset=!1,L}clone(){const A=Object.create(Object.getPrototypeOf(this));return this._assign(A)}concat(A){a(d.isSchema(A),"Invalid schema object"),a(this.type==="any"||A.type==="any"||A.type===this.type,"Cannot merge type",this.type,"with another type:",A.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!A._inRuleset(),"Cannot concatenate a schema with open ruleset");let L=this.clone();if(this.type==="any"&&A.type!=="any"){const O=A.clone();for(const $ of Object.keys(L))$!=="type"&&(O[$]=L[$]);L=O}L._ids.concat(A._ids),L._refs.register(A,x.toSibling),L._preferences=L._preferences?d.preferences(L._preferences,A._preferences):A._preferences,L._valids=D.merge(L._valids,A._valids,A._invalids),L._invalids=D.merge(L._invalids,A._invalids,A._valids);for(const O of A._singleRules.keys())L._singleRules.has(O)&&(L._rules=L._rules.filter($=>$.keep||$.name!==O),L._singleRules.delete(O));for(const O of A._rules)A._definition.rules[O.method].multi||L._singleRules.set(O.name,O),L._rules.push(O);if(L._flags.empty&&A._flags.empty){L._flags.empty=L._flags.empty.concat(A._flags.empty);const O=Object.assign({},A._flags);delete O.empty,c(L._flags,O)}else if(A._flags.empty){L._flags.empty=A._flags.empty;const O=Object.assign({},A._flags);delete O.empty,c(L._flags,O)}else c(L._flags,A._flags);for(const O in A.$_terms){const $=A.$_terms[O];$?L.$_terms[O]?L.$_terms[O]=L.$_terms[O].concat($):L.$_terms[O]=$.slice():L.$_terms[O]||(L.$_terms[O]=$)}return this.$_root._tracer&&this.$_root._tracer._combine(L,[this,A]),L.$_mutateRebuild()}extend(A){return a(!A.base,"Cannot extend type with another base"),m.type(this,A)}extract(A){return A=Array.isArray(A)?A:A.split("."),this._ids.reach(A)}fork(A,L){a(!this._inRuleset(),"Cannot fork inside a ruleset");let O=this;for(let $ of[].concat(A))$=Array.isArray($)?$:$.split("."),O=O._ids.fork($,L,O);return O.$_temp.ruleset=!1,O}rule(A){const L=this._definition;d.assertOptions(A,Object.keys(L.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const O=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(O>=0&&O<this._rules.length,"Cannot apply rules to empty ruleset");const $=this.clone();for(let q=O;q<$._rules.length;++q){const M=$._rules[q],F=l(M);for(const N in A)L.modifiers[N](F,A[N]),a(F.name===M.name,"Cannot change rule name");$._rules[q]=F,$._singleRules.get(F.name)===M&&$._singleRules.set(F.name,F)}return $.$_temp.ruleset=!1,$.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const A=this.clone();return A.$_temp.ruleset=A._rules.length,A}get $(){return this.ruleset}tailor(A){A=[].concat(A),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let L=this;if(this.$_terms.alterations)for(const{target:O,adjuster:$}of this.$_terms.alterations)A.includes(O)&&(L=$(L),a(d.isSchema(L),"Alteration adjuster for",O,"failed to return a schema object"));return L=L.$_modify({each:O=>O.tailor(A),ref:!1}),L.$_temp.ruleset=!1,L.$_mutateRebuild()}tracer(){return w.location?w.location(this):this}validate(A,L){return C.entry(A,this,L)}validateAsync(A,L){return C.entryAsync(A,this,L)}$_addRule(A){typeof A=="string"&&(A={name:A}),a(A&&typeof A=="object","Invalid options"),a(A.name&&typeof A.name=="string","Invalid rule name");for(const M in A)a(M[0]!=="_","Cannot set private rule properties");const L=Object.assign({},A);L._resolve=[],L.method=L.method||L.name;const O=this._definition.rules[L.method],$=L.args;a(O,"Unknown rule",L.method);const q=this.clone();if($){a(Object.keys($).length===1||Object.keys($).length===this._definition.rules[L.name].args.length,"Invalid rule definition for",this.type,L.name);for(const M in $){let F=$[M];if(O.argsByName){const N=O.argsByName.get(M);if(N.ref&&d.isResolvable(F))L._resolve.push(M),q.$_mutateRegister(F);else if(N.normalize&&(F=N.normalize(F),$[M]=F),N.assert){const B=d.validateArg(F,M,N);a(!B,B,"or reference")}}F!==void 0?$[M]=F:delete $[M]}}return O.multi||(q._ruleRemove(L.name,{clone:!1}),q._singleRules.set(L.name,L)),q.$_temp.ruleset===!1&&(q.$_temp.ruleset=null),O.priority?q._rules.unshift(L):q._rules.push(L),q}$_compile(A,L){return f.schema(this.$_root,A,L)}$_createError(A,L,O,$,q,M={}){const F=M.flags!==!1?this._flags:{},N=M.messages?v.merge(this._definition.messages,M.messages):this._definition.messages;return new p.Report(A,L,O,F,N,$,q)}$_getFlag(A){return this._flags[A]}$_getRule(A){return this._singleRules.get(A)}$_mapLabels(A){return A=Array.isArray(A)?A:A.split("."),this._ids.labels(A)}$_match(A,L,O,$){(O=Object.assign({},O)).abortEarly=!0,O._externals=!1,L.snapshot();const q=!C.validate(A,this,L,O,$).errors;return L.restore(),q}$_modify(A){return d.assertOptions(A,["each","once","ref","schema"]),b.schema(this,A)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(A,{source:L,name:O,path:$,key:q})=>{const M=this._definition[L][O]&&this._definition[L][O].register;M!==!1&&this.$_mutateRegister(A,{family:M,key:q})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(A,{family:L,key:O}={}){this._refs.register(A,L),this._ids.register(A,{key:O})}$_property(A){return this._definition.properties[A]}$_reach(A){return this._ids.reach(A)}$_rootReferences(){return this._refs.roots()}$_setFlag(A,L,O={}){a(A[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const $=this._definition.flags[A]||{};if(u(L,$.default)&&(L=void 0),u(L,this._flags[A]))return this;const q=O.clone!==!1?this.clone():this;return L!==void 0?(q._flags[A]=L,q.$_mutateRegister(L)):delete q._flags[A],A[0]!=="_"&&(q.$_temp.ruleset=!1),q}$_parent(A,...L){return this[A][d.symbols.parent].call(this,...L)}$_validate(A,L,O){return C.validate(A,this,L,O)}_assign(A){A.type=this.type,A.$_root=this.$_root,A.$_temp=Object.assign({},this.$_temp),A.$_temp.whens={},A._ids=this._ids.clone(),A._preferences=this._preferences,A._valids=this._valids&&this._valids.clone(),A._invalids=this._invalids&&this._invalids.clone(),A._rules=this._rules.slice(),A._singleRules=l(this._singleRules,{shallow:!0}),A._refs=this._refs.clone(),A._flags=Object.assign({},this._flags),A._cache=null,A.$_terms={};for(const L in this.$_terms)A.$_terms[L]=this.$_terms[L]?this.$_terms[L].slice():null;A.$_super={};for(const L in this.$_super)A.$_super[L]=this._super[L].bind(A);return A}_bare(){const A=this.clone();A._reset();const L=A._definition.terms;for(const O in L){const $=L[O];A.$_terms[O]=$.init}return A.$_mutateRebuild()}_default(A,L,O={}){return d.assertOptions(O,"literal"),a(L!==void 0,"Missing",A,"value"),a(typeof L=="function"||!O.literal,"Only function value supports literal option"),typeof L=="function"&&O.literal&&(L={[d.symbols.literal]:!0,literal:L}),this.$_setFlag(A,L)}_generate(A,L,O){if(!this.$_terms.whens)return{schema:this};const $=[],q=[];for(let N=0;N<this.$_terms.whens.length;++N){const B=this.$_terms.whens[N];if(B.concat){$.push(B.concat),q.push(`${N}.concat`);continue}const W=B.ref?B.ref.resolve(A,L,O):A,K=B.is?[B]:B.switch,ee=q.length;for(let te=0;te<K.length;++te){const{is:le,then:Q,otherwise:z}=K[te],J=`${N}${B.switch?"."+te:""}`;if(le.$_match(W,L.nest(le,`${J}.is`),O)){if(Q){const ye=L.localize([...L.path,`${J}.then`],L.ancestors,L.schemas),{schema:Ne,id:Ge}=Q._generate(A,ye,O);$.push(Ne),q.push(`${J}.then${Ge?`(${Ge})`:""}`);break}}else if(z){const ye=L.localize([...L.path,`${J}.otherwise`],L.ancestors,L.schemas),{schema:Ne,id:Ge}=z._generate(A,ye,O);$.push(Ne),q.push(`${J}.otherwise${Ge?`(${Ge})`:""}`);break}}if(B.break&&q.length>ee)break}const M=q.join(", ");if(L.mainstay.tracer.debug(L,"rule","when",M),!M)return{schema:this};if(!L.mainstay.tracer.active&&this.$_temp.whens[M])return{schema:this.$_temp.whens[M],id:M};let F=this;this._definition.generate&&(F=this._definition.generate(this,A,L,O));for(const N of $)F=F.concat(N);return this.$_root._tracer&&this.$_root._tracer._combine(F,[this,...$]),this.$_temp.whens[M]=F,{schema:F,id:M}}_inner(A,L,O={}){a(!this._inRuleset(),`Cannot set ${A} inside a ruleset`);const $=this.clone();return $.$_terms[A]&&!O.override||($.$_terms[A]=[]),O.single?$.$_terms[A].push(L):$.$_terms[A].push(...L),$.$_temp.ruleset=!1,$}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(A,L={}){if(!this._singleRules.has(A))return this;const O=L.clone!==!1?this.clone():this;O._singleRules.delete(A);const $=[];for(let q=0;q<O._rules.length;++q){const M=O._rules[q];M.name!==A||M.keep?$.push(M):O._inRuleset()&&q<O.$_temp.ruleset&&--O.$_temp.ruleset}return O._rules=$,O}_values(A,L){d.verifyFlat(A,L.slice(1,-1));const O=this.clone(),$=A[0]===d.symbols.override;if($&&(A=A.slice(1)),!O[L]&&A.length?O[L]=new D:$&&(O[L]=A.length?new D:null,O.$_mutateRebuild()),!O[L])return O;$&&O[L].override();for(const q of A){a(q!==void 0,"Cannot call allow/valid/invalid with undefined"),a(q!==d.symbols.override,"Override must be the first value");const M=L==="_invalids"?"_valids":"_invalids";O[M]&&(O[M].remove(q),O[M].length||(a(L==="_valids"||!O._flags.only,"Setting invalid value",q,"leaves schema rejecting all values due to previous valid rule"),O[M]=null)),O[L].add(q,O._refs)}return O}}};R.Base.prototype[d.symbols.any]={version:d.version,compile:f.compile,root:"$_root"},R.Base.prototype.isImmutable=!0,R.Base.prototype.deny=R.Base.prototype.invalid,R.Base.prototype.disallow=R.Base.prototype.invalid,R.Base.prototype.equal=R.Base.prototype.valid,R.Base.prototype.exist=R.Base.prototype.required,R.Base.prototype.not=R.Base.prototype.invalid,R.Base.prototype.options=R.Base.prototype.prefs,R.Base.prototype.preferences=R.Base.prototype.prefs,r.exports=new R.Base},8652:(r,s,o)=>{const a=o(375),l=o(8571),u=o(8160),c={max:1e3,supported:new Set(["undefined","boolean","number","string"])};s.provider={provision:h=>new c.Cache(h)},c.Cache=class{constructor(h={}){u.assertOptions(h,["max"]),a(h.max===void 0||h.max&&h.max>0&&isFinite(h.max),"Invalid max cache size"),this._max=h.max||c.max,this._map=new Map,this._list=new c.List}get length(){return this._map.size}set(h,d){if(h!==null&&!c.supported.has(typeof h))return;let f=this._map.get(h);if(f)return f.value=d,void this._list.first(f);f=this._list.unshift({key:h,value:d}),this._map.set(h,f),this._compact()}get(h){const d=this._map.get(h);if(d)return this._list.first(d),l(d.value)}_compact(){if(this._map.size>this._max){const h=this._list.pop();this._map.delete(h.key)}}},c.List=class{constructor(){this.tail=null,this.head=null}unshift(h){return h.next=null,h.prev=this.head,this.head&&(this.head.next=h),this.head=h,this.tail||(this.tail=h),h}first(h){h!==this.head&&(this._remove(h),this.unshift(h))}pop(){return this._remove(this.tail)}_remove(h){const{next:d,prev:f}=h;return d.prev=f,f&&(f.next=d),h===this.tail&&(this.tail=d),h.prev=null,h.next=null,h}}},8160:(r,s,o)=>{const a=o(375),l=o(7916),u=o(5934);let c,h;const d={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.version=u.version,s.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},s.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},s.assertOptions=function(f,p,m="Options"){a(f&&typeof f=="object"&&!Array.isArray(f),"Options must be of type object");const y=Object.keys(f).filter(v=>!p.includes(v));a(y.length===0,`${m} contain unknown keys: ${y}`)},s.checkPreferences=function(f){h=h||o(3378);const p=h.preferences.validate(f);if(p.error)throw new l([p.error.details[0].message])},s.compare=function(f,p,m){switch(m){case"=":return f===p;case">":return f>p;case"<":return f<p;case">=":return f>=p;case"<=":return f<=p}},s.default=function(f,p){return f===void 0?p:f},s.isIsoDate=function(f){return d.isoDate.test(f)},s.isNumber=function(f){return typeof f=="number"&&!isNaN(f)},s.isResolvable=function(f){return!!f&&(f[s.symbols.ref]||f[s.symbols.template])},s.isSchema=function(f,p={}){const m=f&&f[s.symbols.any];return!!m&&(a(p.legacy||m.version===s.version,"Cannot mix different versions of joi schemas"),!0)},s.isValues=function(f){return f[s.symbols.values]},s.limit=function(f){return Number.isSafeInteger(f)&&f>=0},s.preferences=function(f,p){c=c||o(6914),f=f||{},p=p||{};const m=Object.assign({},f,p);return p.errors&&f.errors&&(m.errors=Object.assign({},f.errors,p.errors),m.errors.wrap=Object.assign({},f.errors.wrap,p.errors.wrap)),p.messages&&(m.messages=c.compile(p.messages,f.messages)),delete m[s.symbols.prefs],m},s.tryWithPath=function(f,p,m={}){try{return f()}catch(y){throw y.path!==void 0?y.path=p+"."+y.path:y.path=p,m.append&&(y.message=`${y.message} (${y.path})`),y}},s.validateArg=function(f,p,{assert:m,message:y}){if(s.isSchema(m)){const v=m.validate(f);return v.error?v.error.message:void 0}if(!m(f))return p?`${p} ${y}`:y},s.verifyFlat=function(f,p){for(const m of f)a(!Array.isArray(m),"Method no longer accepts array arguments:",p)}},3292:(r,s,o)=>{const a=o(375),l=o(8160),u=o(6133),c={};s.schema=function(h,d,f={}){l.assertOptions(f,["appendPath","override"]);try{return c.schema(h,d,f)}catch(p){throw f.appendPath&&p.path!==void 0&&(p.message=`${p.message} (${p.path})`),p}},c.schema=function(h,d,f){a(d!==void 0,"Invalid undefined schema"),Array.isArray(d)&&(a(d.length,"Invalid empty array schema"),d.length===1&&(d=d[0]));const p=(m,...y)=>f.override!==!1?m.valid(h.override,...y):m.valid(...y);if(c.simple(d))return p(h,d);if(typeof d=="function")return h.custom(d);if(a(typeof d=="object","Invalid schema content:",typeof d),l.isResolvable(d))return p(h,d);if(l.isSchema(d))return d;if(Array.isArray(d)){for(const m of d)if(!c.simple(m))return h.alternatives().try(...d);return p(h,...d)}return d instanceof RegExp?h.string().regex(d):d instanceof Date?p(h.date(),d):(a(Object.getPrototypeOf(d)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),h.object().keys(d))},s.ref=function(h,d){return u.isRef(h)?h:u.create(h,d)},s.compile=function(h,d,f={}){l.assertOptions(f,["legacy"]);const p=d&&d[l.symbols.any];if(p)return a(f.legacy||p.version===l.version,"Cannot mix different versions of joi schemas:",p.version,l.version),d;if(typeof d!="object"||!f.legacy)return s.schema(h,d,{appendPath:!0});const m=c.walk(d);return m?m.compile(m.root,d):s.schema(h,d,{appendPath:!0})},c.walk=function(h){if(typeof h!="object")return null;if(Array.isArray(h)){for(const f of h){const p=c.walk(f);if(p)return p}return null}const d=h[l.symbols.any];if(d)return{root:h[d.root],compile:d.compile};a(Object.getPrototypeOf(h)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const f in h){const p=c.walk(h[f]);if(p)return p}return null},c.simple=function(h){return h===null||["boolean","string","number"].includes(typeof h)},s.when=function(h,d,f){if(f===void 0&&(a(d&&typeof d=="object","Missing options"),f=d,d=u.create(".")),Array.isArray(f)&&(f={switch:f}),l.assertOptions(f,["is","not","then","otherwise","switch","break"]),l.isSchema(d))return a(f.is===void 0,'"is" can not be used with a schema condition'),a(f.not===void 0,'"not" can not be used with a schema condition'),a(f.switch===void 0,'"switch" can not be used with a schema condition'),c.condition(h,{is:d,then:f.then,otherwise:f.otherwise,break:f.break});if(a(u.isRef(d)||typeof d=="string","Invalid condition:",d),a(f.not===void 0||f.is===void 0,'Cannot combine "is" with "not"'),f.switch===void 0){let m=f;f.not!==void 0&&(m={is:f.not,then:f.otherwise,otherwise:f.then,break:f.break});let y=m.is!==void 0?h.$_compile(m.is):h.$_root.invalid(null,!1,0,"").required();return a(m.then!==void 0||m.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(m.break===void 0||m.then===void 0||m.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),f.is===void 0||u.isRef(f.is)||l.isSchema(f.is)||(y=y.required()),c.condition(h,{ref:s.ref(d),is:y,then:m.then,otherwise:m.otherwise,break:m.break})}a(Array.isArray(f.switch),'"switch" must be an array'),a(f.is===void 0,'Cannot combine "switch" with "is"'),a(f.not===void 0,'Cannot combine "switch" with "not"'),a(f.then===void 0,'Cannot combine "switch" with "then"');const p={ref:s.ref(d),switch:[],break:f.break};for(let m=0;m<f.switch.length;++m){const y=f.switch[m],v=m===f.switch.length-1;l.assertOptions(y,v?["is","then","otherwise"]:["is","then"]),a(y.is!==void 0,'Switch statement missing "is"'),a(y.then!==void 0,'Switch statement missing "then"');const b={is:h.$_compile(y.is),then:h.$_compile(y.then)};if(u.isRef(y.is)||l.isSchema(y.is)||(b.is=b.is.required()),v){a(f.otherwise===void 0||y.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const x=f.otherwise!==void 0?f.otherwise:y.otherwise;x!==void 0&&(a(p.break===void 0,"Cannot specify both otherwise and break"),b.otherwise=h.$_compile(x))}p.switch.push(b)}return p},c.condition=function(h,d){for(const f of["then","otherwise"])d[f]===void 0?delete d[f]:d[f]=h.$_compile(d[f]);return d}},6354:(r,s,o)=>{const a=o(5688),l=o(8160),u=o(3328);s.Report=class{constructor(c,h,d,f,p,m,y){if(this.code=c,this.flags=f,this.messages=p,this.path=m.path,this.prefs=y,this.state=m,this.value=h,this.message=null,this.template=null,this.local=d||{},this.local.label=s.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const v=this.path[this.path.length-1];typeof v!="object"&&(this.local.key=v)}}_setTemplate(c){if(this.template=c,!this.flags.label&&this.path.length===0){const h=this._template(this.template,"root");h&&(this.local.label=h)}}toString(){if(this.message)return this.message;const c=this.code;if(!this.prefs.errors.render)return this.code;const h=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return h===void 0?`Error code "${c}" is not defined, your custom type is missing the correct messages definition`:(this.message=h.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(c,h){return s.template(this.value,c,h||this.code,this.state,this.prefs)}},s.path=function(c){let h="";for(const d of c)typeof d!="object"&&(typeof d=="string"?(h&&(h+="."),h+=d):h+=`[${d}]`);return h},s.template=function(c,h,d,f,p){if(!h)return;if(u.isTemplate(h))return d!=="root"?h:null;let m=p.errors.language;if(l.isResolvable(m)&&(m=m.resolve(c,f,p)),m&&h[m]){if(h[m][d]!==void 0)return h[m][d];if(h[m]["*"]!==void 0)return h[m]["*"]}return h[d]?h[d]:h["*"]},s.label=function(c,h,d,f){if(!d.errors.label)return"";if(c.label)return c.label;let p=h.path;return d.errors.label==="key"&&h.path.length>1&&(p=h.path.slice(-1)),s.path(p)||s.template(null,d.messages,"root",h,d)||f&&s.template(null,f,"root",h,d)||"value"},s.process=function(c,h,d){if(!c)return null;const{override:f,message:p,details:m}=s.details(c);if(f)return f;if(d.errors.stack)return new s.ValidationError(p,m,h);const y=Error.stackTraceLimit;Error.stackTraceLimit=0;const v=new s.ValidationError(p,m,h);return Error.stackTraceLimit=y,v},s.details=function(c,h={}){let d=[];const f=[];for(const p of c){if(p instanceof Error){if(h.override!==!1)return{override:p};const y=p.toString();d.push(y),f.push({message:y,type:"override",context:{error:p}});continue}const m=p.toString();d.push(m),f.push({message:m,path:p.path.filter(y=>typeof y!="object"),type:p.code,context:p.local})}return d.length>1&&(d=[...new Set(d)]),{message:d.join(". "),details:f}},s.ValidationError=class extends Error{constructor(c,h,d){super(c),this._original=d,this.details=h}static isError(c){return c instanceof s.ValidationError}},s.ValidationError.prototype.isJoi=!0,s.ValidationError.prototype.name="ValidationError",s.ValidationError.prototype.annotate=a.error},8901:(r,s,o)=>{const a=o(375),l=o(8571),u=o(8160),c=o(6914),h={};s.type=function(d,f){const p=Object.getPrototypeOf(d),m=l(p),y=d._assign(Object.create(m)),v=Object.assign({},f);delete v.base,m._definition=v;const b=p._definition||{};v.messages=c.merge(b.messages,v.messages),v.properties=Object.assign({},b.properties,v.properties),y.type=v.type,v.flags=Object.assign({},b.flags,v.flags);const x=Object.assign({},b.terms);if(v.terms)for(const R in v.terms){const A=v.terms[R];a(y.$_terms[R]===void 0,"Invalid term override for",v.type,R),y.$_terms[R]=A.init,x[R]=A}v.terms=x,v.args||(v.args=b.args),v.prepare=h.prepare(v.prepare,b.prepare),v.coerce&&(typeof v.coerce=="function"&&(v.coerce={method:v.coerce}),v.coerce.from&&!Array.isArray(v.coerce.from)&&(v.coerce={method:v.coerce.method,from:[].concat(v.coerce.from)})),v.coerce=h.coerce(v.coerce,b.coerce),v.validate=h.validate(v.validate,b.validate);const w=Object.assign({},b.rules);if(v.rules)for(const R in v.rules){const A=v.rules[R];a(typeof A=="object","Invalid rule definition for",v.type,R);let L=A.method;if(L===void 0&&(L=function(){return this.$_addRule(R)}),L&&(a(!m[R],"Rule conflict in",v.type,R),m[R]=L),a(!w[R],"Rule conflict in",v.type,R),w[R]=A,A.alias){const O=[].concat(A.alias);for(const $ of O)m[$]=A.method}A.args&&(A.argsByName=new Map,A.args=A.args.map(O=>(typeof O=="string"&&(O={name:O}),a(!A.argsByName.has(O.name),"Duplicated argument name",O.name),u.isSchema(O.assert)&&(O.assert=O.assert.strict().label(O.name)),A.argsByName.set(O.name,O),O)))}v.rules=w;const C=Object.assign({},b.modifiers);if(v.modifiers)for(const R in v.modifiers){a(!m[R],"Rule conflict in",v.type,R);const A=v.modifiers[R];a(typeof A=="function","Invalid modifier definition for",v.type,R);const L=function(O){return this.rule({[R]:O})};m[R]=L,C[R]=A}if(v.modifiers=C,v.overrides){m._super=p,y.$_super={};for(const R in v.overrides)a(p[R],"Cannot override missing",R),v.overrides[R][u.symbols.parent]=p[R],y.$_super[R]=p[R].bind(y);Object.assign(m,v.overrides)}v.cast=Object.assign({},b.cast,v.cast);const D=Object.assign({},b.manifest,v.manifest);return D.build=h.build(v.manifest&&v.manifest.build,b.manifest&&b.manifest.build),v.manifest=D,v.rebuild=h.rebuild(v.rebuild,b.rebuild),y},h.build=function(d,f){return d&&f?function(p,m){return f(d(p,m),m)}:d||f},h.coerce=function(d,f){return d&&f?{from:d.from&&f.from?[...new Set([...d.from,...f.from])]:null,method(p,m){let y;if((!f.from||f.from.includes(typeof p))&&(y=f.method(p,m),y)){if(y.errors||y.value===void 0)return y;p=y.value}if(!d.from||d.from.includes(typeof p)){const v=d.method(p,m);if(v)return v}return y}}:d||f},h.prepare=function(d,f){return d&&f?function(p,m){const y=d(p,m);if(y){if(y.errors||y.value===void 0)return y;p=y.value}return f(p,m)||y}:d||f},h.rebuild=function(d,f){return d&&f?function(p){f(p),d(p)}:d||f},h.validate=function(d,f){return d&&f?function(p,m){const y=f(p,m);if(y){if(y.errors&&(!Array.isArray(y.errors)||y.errors.length))return y;p=y.value}return d(p,m)||y}:d||f}},5107:(r,s,o)=>{const a=o(375),l=o(8571),u=o(8652),c=o(8160),h=o(3292),d=o(6354),f=o(8901),p=o(9708),m=o(6133),y=o(3328),v=o(1152);let b;const x={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const w={_types:new Set(Object.keys(x.types))};for(const C of w._types)w[C]=function(...D){return a(!D.length||["alternatives","link","object"].includes(C),"The",C,"type does not allow arguments"),x.generate(this,x.types[C],D)};for(const C of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])w[C]=function(...D){return this.any()[C](...D)};Object.assign(w,x.methods);for(const C in x.aliases){const D=x.aliases[C];w[C]=w[D]}return w.x=w.expression,v.setup&&v.setup(w),w}};x.methods={ValidationError:d.ValidationError,version:c.version,cache:u.provider,assert(w,C,...D){x.assert(w,C,!0,D)},attempt:(w,C,...D)=>x.assert(w,C,!1,D),build(w){return a(typeof p.build=="function","Manifest functionality disabled"),p.build(this,w)},checkPreferences(w){c.checkPreferences(w)},compile(w,C){return h.compile(this,w,C)},defaults(w){a(typeof w=="function","modifier must be a function");const C=Object.assign({},this);for(const D of C._types){const R=w(C[D]());a(c.isSchema(R),"modifier must return a valid schema object"),C[D]=function(...A){return x.generate(this,R,A)}}return C},expression:(...w)=>new y(...w),extend(...w){c.verifyFlat(w,"extend"),b=b||o(3378),a(w.length,"You need to provide at least one extension"),this.assert(w,b.extensions);const C=Object.assign({},this);C._types=new Set(C._types);for(let D of w){typeof D=="function"&&(D=D(C)),this.assert(D,b.extension);const R=x.expandExtension(D,C);for(const A of R){a(C[A.type]===void 0||C._types.has(A.type),"Cannot override name",A.type);const L=A.base||this.any(),O=f.type(L,A);C._types.add(A.type),C[A.type]=function(...$){return x.generate(this,O,$)}}}return C},isError:d.ValidationError.isError,isExpression:y.isTemplate,isRef:m.isRef,isSchema:c.isSchema,in:(...w)=>m.in(...w),override:c.symbols.override,ref:(...w)=>m.create(...w),types(){const w={};for(const C of this._types)w[C]=this[C]();for(const C in x.aliases)w[C]=this[C]();return w}},x.assert=function(w,C,D,R){const A=R[0]instanceof Error||typeof R[0]=="string"?R[0]:null,L=A!==null?R[1]:R[0],O=C.validate(w,c.preferences({errors:{stack:!0}},L||{}));let $=O.error;if(!$)return O.value;if(A instanceof Error)throw A;const q=D&&typeof $.annotate=="function"?$.annotate():$.message;throw $ instanceof d.ValidationError==0&&($=l($)),$.message=A?`${A} ${q}`:q,$},x.generate=function(w,C,D){return a(w,"Must be invoked on a Joi instance."),C.$_root=w,C._definition.args&&D.length?C._definition.args(C,...D):C},x.expandExtension=function(w,C){if(typeof w.type=="string")return[w];const D=[];for(const R of C._types)if(w.type.test(R)){const A=Object.assign({},w);A.type=R,A.base=C[R](),D.push(A)}return D},r.exports=x.root()},6914:(r,s,o)=>{const a=o(375),l=o(8571),u=o(3328);s.compile=function(c,h){if(typeof c=="string")return a(!h,"Cannot set single message string"),new u(c);if(u.isTemplate(c))return a(!h,"Cannot set single message template"),c;a(typeof c=="object"&&!Array.isArray(c),"Invalid message options"),h=h?l(h):{};for(let d in c){const f=c[d];if(d==="root"||u.isTemplate(f)){h[d]=f;continue}if(typeof f=="string"){h[d]=new u(f);continue}a(typeof f=="object"&&!Array.isArray(f),"Invalid message for",d);const p=d;for(d in h[p]=h[p]||{},f){const m=f[d];d==="root"||u.isTemplate(m)?h[p][d]=m:(a(typeof m=="string","Invalid message for",d,"in",p),h[p][d]=new u(m))}}return h},s.decompile=function(c){const h={};for(let d in c){const f=c[d];if(d==="root"){h.root=f;continue}if(u.isTemplate(f)){h[d]=f.describe({compact:!0});continue}const p=d;for(d in h[p]={},f){const m=f[d];d!=="root"?h[p][d]=m.describe({compact:!0}):h[p].root=m}}return h},s.merge=function(c,h){if(!c)return s.compile(h);if(!h)return c;if(typeof h=="string")return new u(h);if(u.isTemplate(h))return h;const d=l(c);for(let f in h){const p=h[f];if(f==="root"||u.isTemplate(p)){d[f]=p;continue}if(typeof p=="string"){d[f]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",f);const m=f;for(f in d[m]=d[m]||{},p){const y=p[f];f==="root"||u.isTemplate(y)?d[m][f]=y:(a(typeof y=="string","Invalid message for",f,"in",m),d[m][f]=new u(y))}}return d}},2294:(r,s,o)=>{const a=o(375),l=o(8160),u=o(6133),c={};s.Ids=c.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const h=new c.Ids;return h._byId=new Map(this._byId),h._byKey=new Map(this._byKey),h._schemaChain=this._schemaChain,h}concat(h){h._schemaChain&&(this._schemaChain=!0);for(const[d,f]of h._byId.entries())a(!this._byKey.has(d),"Schema id conflicts with existing key:",d),this._byId.set(d,f);for(const[d,f]of h._byKey.entries())a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,f)}fork(h,d,f){const p=this._collect(h);p.push({schema:f});const m=p.shift();let y={id:m.id,schema:d(m.schema)};a(l.isSchema(y.schema),"adjuster function failed to return a joi schema type");for(const v of p)y={id:v.id,schema:c.fork(v.schema,y.id,y.schema)};return y.schema}labels(h,d=[]){const f=h[0],p=this._get(f);if(!p)return[...d,...h].join(".");const m=h.slice(1);return d=[...d,p.schema._flags.label||f],m.length?p.schema._ids.labels(m,d):d.join(".")}reach(h,d=[]){const f=h[0],p=this._get(f);a(p,"Schema does not contain path",[...d,...h].join("."));const m=h.slice(1);return m.length?p.schema._ids.reach(m,[...d,f]):p.schema}register(h,{key:d}={}){if(!h||!l.isSchema(h))return;(h.$_property("schemaChain")||h._ids._schemaChain)&&(this._schemaChain=!0);const f=h._flags.id;if(f){const p=this._byId.get(f);a(!p||p.schema===h,"Cannot add different schemas with the same id:",f),a(!this._byKey.has(f),"Schema id conflicts with existing key:",f),this._byId.set(f,{schema:h,id:f})}d&&(a(!this._byKey.has(d),"Schema already contains key:",d),a(!this._byId.has(d),"Schema key conflicts with existing id:",d),this._byKey.set(d,{schema:h,id:d}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(h,d=[],f=[]){const p=h[0],m=this._get(p);a(m,"Schema does not contain path",[...d,...h].join(".")),f=[m,...f];const y=h.slice(1);return y.length?m.schema._ids._collect(y,[...d,p],f):f}_get(h){return this._byId.get(h)||this._byKey.get(h)}},c.fork=function(h,d,f){const p=s.schema(h,{each:(m,{key:y})=>{if(d===(m._flags.id||y))return f},ref:!1});return p?p.$_mutateRebuild():h},s.schema=function(h,d){let f;for(const p in h._flags){if(p[0]==="_")continue;const m=c.scan(h._flags[p],{source:"flags",name:p},d);m!==void 0&&(f=f||h.clone(),f._flags[p]=m)}for(let p=0;p<h._rules.length;++p){const m=h._rules[p],y=c.scan(m.args,{source:"rules",name:m.name},d);if(y!==void 0){f=f||h.clone();const v=Object.assign({},m);v.args=y,f._rules[p]=v,f._singleRules.get(m.name)===m&&f._singleRules.set(m.name,v)}}for(const p in h.$_terms){if(p[0]==="_")continue;const m=c.scan(h.$_terms[p],{source:"terms",name:p},d);m!==void 0&&(f=f||h.clone(),f.$_terms[p]=m)}return f},c.scan=function(h,d,f,p,m){const y=p||[];if(h===null||typeof h!="object")return;let v;if(Array.isArray(h)){for(let b=0;b<h.length;++b){const x=d.source==="terms"&&d.name==="keys"&&h[b].key,w=c.scan(h[b],d,f,[b,...y],x);w!==void 0&&(v=v||h.slice(),v[b]=w)}return v}if(f.schema!==!1&&l.isSchema(h)||f.ref!==!1&&u.isRef(h)){const b=f.each(h,{...d,path:y,key:m});return b===h?void 0:b}for(const b in h){if(b[0]==="_")continue;const x=c.scan(h[b],d,f,[b,...y],m);x!==void 0&&(v=v||Object.assign({},h),v[b]=x)}return v}},6133:(r,s,o)=>{const a=o(375),l=o(8571),u=o(9621),c=o(8160);let h;const d={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};s.create=function(f,p={}){a(typeof f=="string","Invalid reference key:",f),c.assertOptions(p,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!p.prefix||typeof p.prefix=="object","options.prefix must be of type object");const m=Object.assign({},d.defaults,p);delete m.prefix;const y=m.separator,v=d.context(f,y,p.prefix);if(m.type=v.type,f=v.key,m.type==="value")if(v.root&&(a(!y||f[0]!==y,"Cannot specify relative path with root prefix"),m.ancestor="root",f||(f=null)),y&&y===f)f=null,m.ancestor=0;else if(m.ancestor!==void 0)a(!y||!f||f[0]!==y,"Cannot combine prefix with ancestor option");else{const[b,x]=d.ancestor(f,y);x&&(f=f.slice(x))===""&&(f=null),m.ancestor=b}return m.path=y?f===null?[]:f.split(y):[f],new d.Ref(m)},s.in=function(f,p={}){return s.create(f,{...p,in:!0})},s.isRef=function(f){return!!f&&!!f[c.symbols.ref]},d.Ref=class{constructor(f){a(typeof f=="object","Invalid reference construction"),c.assertOptions(f,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(f.separator)||typeof f.separator=="string"&&f.separator.length===1,"Invalid separator"),a(!f.adjust||typeof f.adjust=="function","options.adjust must be a function"),a(!f.map||Array.isArray(f.map),"options.map must be an array"),a(!f.map||!f.adjust,"Cannot set both map and adjust options"),Object.assign(this,d.defaults,f),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(f,p,m,y,v={}){return a(!this.in||v.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(m.context,p,v):this.type==="local"?this._resolve(y,p,v):this.ancestor?this.ancestor==="root"?this._resolve(p.ancestors[p.ancestors.length-1],p,v):(a(this.ancestor<=p.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(p.ancestors[this.ancestor-1],p,v)):this._resolve(f,p,v)}_resolve(f,p,m){let y;if(this.type==="value"&&p.mainstay.shadow&&m.shadow!==!1&&(y=p.mainstay.shadow.get(this.absolute(p))),y===void 0&&(y=u(f,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(y=this.adjust(y)),this.map){const v=this.map.get(y);v!==void 0&&(y=v)}return p.mainstay&&p.mainstay.tracer.resolve(p,this,y),y}toString(){return this.display}absolute(f){return[...f.path.slice(0,-this.ancestor),...this.path]}clone(){return new d.Ref(this)}describe(){const f={path:this.path};this.type!=="value"&&(f.type=this.type),this.separator!=="."&&(f.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(f.ancestor=this.ancestor),this.map&&(f.map=[...this.map]);for(const p of["adjust","iterables","render"])this[p]!==null&&this[p]!==void 0&&(f[p]=this[p]);return this.in!==!1&&(f.in=!0),{ref:f}}updateDisplay(){const f=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${f}`);if(!this.separator)return void(this.display=`ref:${f}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${f}`);if(this.ancestor==="root")return void(this.display=`ref:root:${f}`);if(this.ancestor===1)return void(this.display=`ref:${f||".."}`);const p=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${p}${f||""}`}},d.Ref.prototype[c.symbols.ref]=!0,s.build=function(f){return(f=Object.assign({},d.defaults,f)).type==="value"&&f.ancestor===void 0&&(f.ancestor=1),new d.Ref(f)},d.context=function(f,p,m={}){if(f=f.trim(),m){const y=m.global===void 0?"$":m.global;if(y!==p&&f.startsWith(y))return{key:f.slice(y.length),type:"global"};const v=m.local===void 0?"#":m.local;if(v!==p&&f.startsWith(v))return{key:f.slice(v.length),type:"local"};const b=m.root===void 0?"/":m.root;if(b!==p&&f.startsWith(b))return{key:f.slice(b.length),type:"value",root:!0}}return{key:f,type:"value"}},d.ancestor=function(f,p){if(!p)return[1,0];if(f[0]!==p)return[1,0];if(f[1]!==p)return[0,1];let m=2;for(;f[m]===p;)++m;return[m-1,m]},s.toSibling=0,s.toParent=1,s.Manager=class{constructor(){this.refs=[]}register(f,p){if(f)if(p=p===void 0?s.toParent:p,Array.isArray(f))for(const m of f)this.register(m,p);else if(c.isSchema(f))for(const m of f._refs.refs)m.ancestor-p>=0&&this.refs.push({ancestor:m.ancestor-p,root:m.root});else s.isRef(f)&&f.type==="value"&&f.ancestor-p>=0&&this.refs.push({ancestor:f.ancestor-p,root:f.root}),h=h||o(3328),h.isTemplate(f)&&this.register(f.refs(),p)}get length(){return this.refs.length}clone(){const f=new s.Manager;return f.refs=l(this.refs),f}reset(){this.refs=[]}roots(){return this.refs.filter(f=>!f.ancestor).map(f=>f.root)}}},3378:(r,s,o)=>{const a=o(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),s.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),s.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),s.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),s.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(r,s,o)=>{const a=o(8571),l=o(9621),u=o(8160),c={value:Symbol("value")};r.exports=c.State=class{constructor(h,d,f){this.path=h,this.ancestors=d,this.mainstay=f.mainstay,this.schemas=f.schemas,this.debug=null}localize(h,d=null,f=null){const p=new c.State(h,d,this);return f&&p.schemas&&(p.schemas=[c.schemas(f),...p.schemas]),p}nest(h,d){const f=new c.State(this.path,this.ancestors,this);return f.schemas=f.schemas&&[c.schemas(h),...f.schemas],f.debug=d,f}shadow(h,d){this.mainstay.shadow=this.mainstay.shadow||new c.Shadow,this.mainstay.shadow.set(this.path,h,d)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},c.schemas=function(h){return u.isSchema(h)?{schema:h}:h},c.Shadow=class{constructor(){this._values=null}set(h,d,f){if(!h.length||f==="strip"&&typeof h[h.length-1]=="number")return;this._values=this._values||new Map;let p=this._values;for(let m=0;m<h.length;++m){const y=h[m];let v=p.get(y);v||(v=new Map,p.set(y,v)),p=v}p[c.value]=d}get(h){const d=this.node(h);if(d)return d[c.value]}node(h){if(this._values)return l(this._values,h,{iterables:!0})}override(h,d){if(!this._values)return;const f=h.slice(0,-1),p=h[h.length-1],m=l(this._values,f,{iterables:!0});d?m.set(p,d):m&&m.delete(p)}}},3328:(r,s,o)=>{const a=o(375),l=o(8571),u=o(5277),c=o(1447),h=o(8160),d=o(6354),f=o(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};r.exports=p.Template=class{constructor(m,y){if(a(typeof m=="string","Template source must be a string"),a(!m.includes("\0")&&!m.includes(""),"Template source cannot contain reserved control characters"),this.source=m,this.rendered=m,this._template=null,y){const{functions:v,...b}=y;this._settings=Object.keys(b).length?l(b):void 0,this._functions=v,this._functions&&(a(Object.keys(this._functions).every(x=>typeof x=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(x=>typeof x=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const m=p.encode(this.source),y=p.split(m);let v=!1;const b=[],x=y.shift();x&&b.push(x);for(const w of y){const C=w[0]!=="{",D=C?"}":"}}",R=w.indexOf(D);if(R===-1||w[1]==="{"){b.push(`{${p.decode(w)}`);continue}let A=w.slice(C?0:1,R);const L=A[0]===":";L&&(A=A.slice(1));const O=this._ref(p.decode(A),{raw:C,wrapped:L});b.push(O),typeof O!="string"&&(v=!0);const $=w.slice(R+D.length);$&&b.push(p.decode($))}v?this._template=b:this.rendered=b.join("")}static date(m,y){return p.dateFormat[y.dateFormat].call(m)}describe(m={}){if(!this._settings&&m.compact)return this.source;const y={template:this.source};return this._settings&&(y.options=this._settings),this._functions&&(y.functions=this._functions),y}static build(m){return new p.Template(m.template,m.options||m.functions?{...m.options,functions:m.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(m){return!!m&&!!m[h.symbols.template]}refs(){if(!this._template)return;const m=[];for(const y of this._template)typeof y!="string"&&m.push(...y.refs);return m}resolve(m,y,v,b){return this._template&&this._template.length===1?this._part(this._template[0],m,y,v,b,{}):this.render(m,y,v,b)}_part(m,...y){return m.ref?m.ref.resolve(...y):m.formula.evaluate(y)}render(m,y,v,b,x={}){if(!this.isDynamic())return this.rendered;const w=[];for(const C of this._template)if(typeof C=="string")w.push(C);else{const D=this._part(C,m,y,v,b,x),R=p.stringify(D,m,y,v,b,x);if(R!==void 0){const A=C.raw||(x.errors&&x.errors.escapeHtml)===!1?R:u(R);w.push(p.wrap(A,C.wrapped&&v.errors.wrap.label))}}return w.join("")}_ref(m,{raw:y,wrapped:v}){const b=[],x=C=>{const D=f.create(C,this._settings);return b.push(D),R=>{const A=D.resolve(...R);return A!==void 0?A:null}};try{const C=this._functions?{...p.functions,...this._functions}:p.functions;var w=new c.Parser(m,{reference:x,functions:C,constants:p.constants})}catch(C){throw C.message=`Invalid template variable "${m}" fails due to: ${C.message}`,C}if(w.single){if(w.single.type==="reference"){const C=b[0];return{ref:C,raw:y,refs:b,wrapped:v||C.type==="local"&&C.key==="label"}}return p.stringify(w.single.value)}return{formula:w,raw:y,refs:b}}toString(){return this.source}},p.Template.prototype[h.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(m){return m.replace(/\\(\{+)/g,(y,v)=>p.opens.slice(0,v.length)).replace(/\\(\}+)/g,(y,v)=>p.closes.slice(0,v.length))},p.decode=function(m){return m.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(m){const y=[];let v="";for(let b=0;b<m.length;++b){const x=m[b];if(x==="{"){let w="";for(;b+1<m.length&&m[b+1]==="{";)w+="{",++b;y.push(v),v=w}else v+=x}return y.push(v),y},p.wrap=function(m,y){return y?y.length===1?`${y}${m}${y}`:`${y[0]}${m}${y[1]}`:m},p.stringify=function(m,y,v,b,x,w={}){const C=typeof m,D=b&&b.errors&&b.errors.wrap||{};let R=!1;if(f.isRef(m)&&m.render&&(R=m.in,m=m.resolve(y,v,b,x,{in:m.in,...w})),m===null)return"null";if(C==="string")return p.wrap(m,w.arrayItems&&D.string);if(C==="number"||C==="function"||C==="symbol")return m.toString();if(C!=="object")return JSON.stringify(m);if(m instanceof Date)return p.Template.date(m,b);if(m instanceof Map){const L=[];for(const[O,$]of m.entries())L.push(`${O.toString()} -> ${$.toString()}`);m=L}if(!Array.isArray(m))return m.toString();const A=[];for(const L of m)A.push(p.stringify(L,y,v,b,x,{arrayItems:!0,...w}));return p.wrap(A.join(", "),!R&&D.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(m,y,v)=>m?y:v,length:m=>typeof m=="string"?m.length:m&&typeof m=="object"?Array.isArray(m)?m.length:Object.keys(m).length:null,msg(m){const[y,v,b,x,w]=this,C=w.messages;if(!C)return"";const D=d.template(y,C[0],m,v,b)||d.template(y,C[1],m,v,b);return D?D.render(y,v,b,x,w):""},number:m=>typeof m=="number"?m:typeof m=="string"?parseFloat(m):typeof m=="boolean"?m?1:0:m instanceof Date?m.getTime():null}},4946:(r,s,o)=>{const a=o(375),l=o(1687),u=o(8068),c=o(8160),h=o(3292),d=o(6354),f=o(6133),p={};r.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:f.toSibling}},args:(m,...y)=>y.length===1&&Array.isArray(y[0])?m.try(...y[0]):m.try(...y),validate(m,y){const{schema:v,error:b,state:x,prefs:w}=y;if(v._flags.match){const D=[],R=[];for(let L=0;L<v.$_terms.matches.length;++L){const O=v.$_terms.matches[L],$=x.nest(O.schema,`match.${L}`);$.snapshot();const q=O.schema.$_validate(m,$,w);q.errors?(R.push(q.errors),$.restore()):(D.push(q.value),$.commit())}if(D.length===0)return{errors:b("alternatives.any",{details:R.map(L=>d.details(L,{override:!1}))})};if(v._flags.match==="one")return D.length===1?{value:D[0]}:{errors:b("alternatives.one")};if(D.length!==v.$_terms.matches.length)return{errors:b("alternatives.all",{details:R.map(L=>d.details(L,{override:!1}))})};const A=L=>L.$_terms.matches.some(O=>O.schema.type==="object"||O.schema.type==="alternatives"&&A(O.schema));return A(v)?{value:D.reduce((L,O)=>l(L,O,{mergeArrays:!1}))}:{value:D[D.length-1]}}const C=[];for(let D=0;D<v.$_terms.matches.length;++D){const R=v.$_terms.matches[D];if(R.schema){const O=x.nest(R.schema,`match.${D}`);O.snapshot();const $=R.schema.$_validate(m,O,w);if(!$.errors)return O.commit(),$;O.restore(),C.push({schema:R.schema,reports:$.errors});continue}const A=R.ref?R.ref.resolve(m,x,w):m,L=R.is?[R]:R.switch;for(let O=0;O<L.length;++O){const $=L[O],{is:q,then:M,otherwise:F}=$,N=`match.${D}${R.switch?"."+O:""}`;if(q.$_match(A,x.nest(q,`${N}.is`),w)){if(M)return M.$_validate(m,x.nest(M,`${N}.then`),w)}else if(F)return F.$_validate(m,x.nest(F,`${N}.otherwise`),w)}}return p.errors(C,y)},rules:{conditional:{method(m,y){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(y.break===void 0,"Cannot use break option with alternatives conditional");const v=this.clone(),b=h.when(v,m,y),x=b.is?[b]:b.switch;for(const w of x)if(w.then&&w.otherwise){v.$_setFlag("_endedSwitch",!0,{clone:!1});break}return v.$_terms.matches.push(b),v.$_mutateRebuild()}},match:{method(m){if(a(["any","one","all"].includes(m),"Invalid alternatives match mode",m),m!=="any")for(const y of this.$_terms.matches)a(y.schema,"Cannot combine match mode",m,"with conditional rules");return this.$_setFlag("match",m)}},try:{method(...m){a(m.length,"Missing alternative schemas"),c.verifyFlat(m,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const y=this.clone();for(const v of m)y.$_terms.matches.push({schema:y.$_compile(v)});return y.$_mutateRebuild()}}},overrides:{label(m){return this.$_parent("label",m).$_modify({each:(y,v)=>v.path[0]!=="is"&&typeof y._flags.label!="string"?y.label(m):void 0,ref:!1})}},rebuild(m){m.$_modify({each:y=>{c.isSchema(y)&&y.type==="array"&&m.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(m,y){if(y.matches)for(const v of y.matches){const{schema:b,ref:x,is:w,not:C,then:D,otherwise:R}=v;m=b?m.try(b):x?m.conditional(x,{is:w,then:D,not:C,otherwise:R,switch:v.switch}):m.conditional(w,{then:D,otherwise:R})}return m}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(m,{error:y,state:v}){if(!m.length)return{errors:y("alternatives.any")};if(m.length===1)return{errors:m[0].reports};const b=new Set,x=[];for(const{reports:w,schema:C}of m){if(w.length>1)return p.unmatched(m,y);const D=w[0];if(D instanceof d.Report==0)return p.unmatched(m,y);if(D.state.path.length!==v.path.length){x.push({type:C.type,report:D});continue}if(D.code==="any.only"){for(const L of D.local.valids)b.add(L);continue}const[R,A]=D.code.split(".");A!=="base"?x.push({type:C.type,report:D}):D.code==="object.base"?b.add(D.local.type):b.add(R)}return x.length?x.length===1?{errors:x[0].report}:p.unmatched(m,y):{errors:y("alternatives.types",{types:[...b]})}},p.unmatched=function(m,y){const v=[];for(const b of m)v.push(...b.reports);return{errors:y("alternatives.match",d.details(v,{override:!1}))}}},8068:(r,s,o)=>{const a=o(375),l=o(7629),u=o(8160),c=o(6914);r.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(h,d){return a(typeof h=="function","Method must be a function"),a(d===void 0||d&&typeof d=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:h,description:d}})},validate(h,d,{method:f}){try{return f(h,d)}catch(p){return d.error("any.custom",{error:p})}},args:["method","description"],multi:!0},messages:{method(h){return this.prefs({messages:h})}},shared:{method(h){a(u.isSchema(h)&&h._flags.id,"Schema must be a schema with an id");const d=this.clone();return d.$_terms.shared=d.$_terms.shared||[],d.$_terms.shared.push(h),d.$_mutateRegister(h),d}},warning:{method(h,d){return a(h&&typeof h=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:h,local:d},warn:!0})},validate:(h,d,{code:f,local:p})=>d.error(f,p),args:["code","local"],multi:!0}},modifiers:{keep(h,d=!0){h.keep=d},message(h,d){h.message=c.compile(d)},warn(h,d=!0){h.warn=d}},manifest:{build(h,d){for(const f in d){const p=d[f];if(["examples","externals","metas","notes","tags"].includes(f))for(const m of p)h=h[f.slice(0,-1)](m);else if(f!=="alterations")if(f!=="whens"){if(f==="shared")for(const m of p)h=h.shared(m)}else for(const m of p){const{ref:y,is:v,not:b,then:x,otherwise:w,concat:C}=m;h=C?h.concat(C):y?h.when(y,{is:v,not:b,then:x,otherwise:w,switch:m.switch,break:m.break}):h.when(v,{then:x,otherwise:w,break:m.break})}else{const m={};for(const{target:y,adjuster:v}of p)m[y]=v;h=h.alter(m)}}return h}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(r,s,o)=>{const a=o(375),l=o(9474),u=o(9621),c=o(8068),h=o(8160),d=o(3292),f={};r.exports=c.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(p,{schema:m,state:y,prefs:v}){if(!Array.isArray(p))return;const b=m.$_getRule("sort");return b?f.sort(m,p,b.args.options,y,v):void 0}},validate(p,{schema:m,error:y}){if(!Array.isArray(p)){if(m._flags.single){const v=[p];return v[h.symbols.arraySingle]=!0,{value:v}}return{errors:y("array.base")}}if(m.$_getRule("items")||m.$_terms.externals)return{value:p.slice()}},rules:{has:{method(p){p=this.$_compile(p,{appendPath:!0});const m=this.$_addRule({name:"has",args:{schema:p}});return m.$_mutateRegister(p),m},validate(p,{state:m,prefs:y,error:v},{schema:b}){const x=[p,...m.ancestors];for(let C=0;C<p.length;++C){const D=m.localize([...m.path,C],x,b);if(b.$_match(p[C],D,y))return p}const w=b._flags.label;return w?v("array.hasKnown",{patternLabel:w}):v("array.hasUnknown",null)},multi:!0},items:{method(...p){h.verifyFlat(p,"items");const m=this.$_addRule("items");for(let y=0;y<p.length;++y){const v=h.tryWithPath(()=>this.$_compile(p[y]),y,{append:!0});m.$_terms.items.push(v)}return m.$_mutateRebuild()},validate(p,{schema:m,error:y,state:v,prefs:b,errorsArray:x}){const w=m.$_terms._requireds.slice(),C=m.$_terms.ordered.slice(),D=[...m.$_terms._inclusions,...w],R=!p[h.symbols.arraySingle];delete p[h.symbols.arraySingle];const A=x();let L=p.length;for(let O=0;O<L;++O){const $=p[O];let q=!1,M=!1;const F=R?O:new Number(O),N=[...v.path,F];if(!m._flags.sparse&&$===void 0){if(A.push(y("array.sparse",{key:F,path:N,pos:O,value:void 0},v.localize(N))),b.abortEarly)return A;C.shift();continue}const B=[p,...v.ancestors];for(const te of m.$_terms._exclusions)if(te.$_match($,v.localize(N,B,te),b,{presence:"ignore"})){if(A.push(y("array.excludes",{pos:O,value:$},v.localize(N))),b.abortEarly)return A;q=!0,C.shift();break}if(q)continue;if(m.$_terms.ordered.length){if(C.length){const te=C.shift(),le=te.$_validate($,v.localize(N,B,te),b);if(le.errors){if(A.push(...le.errors),b.abortEarly)return A}else if(te._flags.result==="strip")f.fastSplice(p,O),--O,--L;else{if(!m._flags.sparse&&le.value===void 0){if(A.push(y("array.sparse",{key:F,path:N,pos:O,value:void 0},v.localize(N))),b.abortEarly)return A;continue}p[O]=le.value}continue}if(!m.$_terms.items.length){if(A.push(y("array.orderedLength",{pos:O,limit:m.$_terms.ordered.length})),b.abortEarly)return A;break}}const W=[];let K=w.length;for(let te=0;te<K;++te){const le=v.localize(N,B,w[te]);le.snapshot();const Q=w[te].$_validate($,le,b);if(W[te]=Q,!Q.errors){if(le.commit(),p[O]=Q.value,M=!0,f.fastSplice(w,te),--te,--K,!m._flags.sparse&&Q.value===void 0&&(A.push(y("array.sparse",{key:F,path:N,pos:O,value:void 0},v.localize(N))),b.abortEarly))return A;break}le.restore()}if(M)continue;const ee=b.stripUnknown&&!!b.stripUnknown.arrays||!1;K=D.length;for(const te of D){let le;const Q=w.indexOf(te);if(Q!==-1)le=W[Q];else{const z=v.localize(N,B,te);if(z.snapshot(),le=te.$_validate($,z,b),!le.errors){z.commit(),te._flags.result==="strip"?(f.fastSplice(p,O),--O,--L):m._flags.sparse||le.value!==void 0?p[O]=le.value:(A.push(y("array.sparse",{key:F,path:N,pos:O,value:void 0},v.localize(N))),q=!0),M=!0;break}z.restore()}if(K===1){if(ee){f.fastSplice(p,O),--O,--L,M=!0;break}if(A.push(...le.errors),b.abortEarly)return A;q=!0;break}}if(!q&&(m.$_terms._inclusions.length||m.$_terms._requireds.length)&&!M){if(ee){f.fastSplice(p,O),--O,--L;continue}if(A.push(y("array.includes",{pos:O,value:$},v.localize(N))),b.abortEarly)return A}}return w.length&&f.fillMissedErrors(m,A,w,p,v,b),C.length&&(f.fillOrderedErrors(m,A,C,p,v,b),A.length||f.fillDefault(C,p,v,b)),A.length?A:p},priority:!0,manifest:!1},length:{method(p){return this.$_addRule({name:"length",args:{limit:p},operator:"="})},validate:(p,m,{limit:y},{name:v,operator:b,args:x})=>h.compare(p.length,y,b)?p:m.error("array."+v,{limit:x.limit,value:p}),args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"}]},max:{method(p){return this.$_addRule({name:"max",method:"length",args:{limit:p},operator:"<="})}},min:{method(p){return this.$_addRule({name:"min",method:"length",args:{limit:p},operator:">="})}},ordered:{method(...p){h.verifyFlat(p,"ordered");const m=this.$_addRule("items");for(let y=0;y<p.length;++y){const v=h.tryWithPath(()=>this.$_compile(p[y]),y,{append:!0});f.validateSingle(v,m),m.$_mutateRegister(v),m.$_terms.ordered.push(v)}return m.$_mutateRebuild()}},single:{method(p){const m=p===void 0||!!p;return a(!m||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",m)}},sort:{method(p={}){h.assertOptions(p,["by","order"]);const m={order:p.order||"ascending"};return p.by&&(m.by=d.ref(p.by,{ancestor:0}),a(!m.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:m}})},validate(p,{error:m,state:y,prefs:v,schema:b},{options:x}){const{value:w,errors:C}=f.sort(b,p,x,y,v);if(C)return C;for(let D=0;D<p.length;++D)if(p[D]!==w[D])return m("array.sort",{order:x.order,by:x.by?x.by.key:"value"});return p},convert:!0},sparse:{method(p){const m=p===void 0||!!p;return this._flags.sparse===m?this:(m?this.clone():this.$_addRule("items")).$_setFlag("sparse",m,{clone:!1})}},unique:{method(p,m={}){a(!p||typeof p=="function"||typeof p=="string","comparator must be a function or a string"),h.assertOptions(m,["ignoreUndefined","separator"]);const y={name:"unique",args:{options:m,comparator:p}};if(p)if(typeof p=="string"){const v=h.default(m.separator,".");y.path=v?p.split(v):[p]}else y.comparator=p;return this.$_addRule(y)},validate(p,{state:m,error:y,schema:v},{comparator:b,options:x},{comparator:w,path:C}){const D={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},R=w||l,A=x.ignoreUndefined;for(let L=0;L<p.length;++L){const O=C?u(p[L],C):p[L],$=w?D.custom:D[typeof O];if(a($,"Failed to find unique map container for type",typeof O),$ instanceof Map){const q=$.entries();let M;for(;!(M=q.next()).done;)if(R(M.value[0],O)){const F=m.localize([...m.path,L],[p,...m.ancestors]),N={pos:L,value:p[L],dupePos:M.value[1],dupeValue:p[M.value[1]]};return C&&(N.path=b),y("array.unique",N,F)}$.set(O,L)}else{if((!A||O!==void 0)&&$[O]!==void 0){const q={pos:L,value:p[L],dupePos:$[O],dupeValue:p[$[O]]};return C&&(q.path=b),y("array.unique",q,m.localize([...m.path,L],[p,...m.ancestors]))}$[O]=L}}return p},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(p,m)=>new Set(p)}},rebuild(p){p.$_terms._inclusions=[],p.$_terms._exclusions=[],p.$_terms._requireds=[];for(const m of p.$_terms.items)f.validateSingle(m,p),m._flags.presence==="required"?p.$_terms._requireds.push(m):m._flags.presence==="forbidden"?p.$_terms._exclusions.push(m):p.$_terms._inclusions.push(m);for(const m of p.$_terms.ordered)f.validateSingle(m,p)},manifest:{build:(p,m)=>(m.items&&(p=p.items(...m.items)),m.ordered&&(p=p.ordered(...m.ordered)),p)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),f.fillMissedErrors=function(p,m,y,v,b,x){const w=[];let C=0;for(const D of y){const R=D._flags.label;R?w.push(R):++C}w.length?C?m.push(p.$_createError("array.includesRequiredBoth",v,{knownMisses:w,unknownMisses:C},b,x)):m.push(p.$_createError("array.includesRequiredKnowns",v,{knownMisses:w},b,x)):m.push(p.$_createError("array.includesRequiredUnknowns",v,{unknownMisses:C},b,x))},f.fillOrderedErrors=function(p,m,y,v,b,x){const w=[];for(const C of y)C._flags.presence==="required"&&w.push(C);w.length&&f.fillMissedErrors(p,m,w,v,b,x)},f.fillDefault=function(p,m,y,v){const b=[];let x=!0;for(let w=p.length-1;w>=0;--w){const C=p[w],D=[m,...y.ancestors],R=C.$_validate(void 0,y.localize(y.path,D,C),v).value;if(x){if(R===void 0)continue;x=!1}b.unshift(R)}b.length&&m.push(...b)},f.fastSplice=function(p,m){let y=m;for(;y<p.length;)p[y++]=p[y];--p.length},f.validateSingle=function(p,m){(p.type==="array"||p._flags._arrayItems)&&(a(!m._flags.single,"Cannot specify array item with single rule enabled"),m.$_setFlag("_arrayItems",!0,{clone:!1}))},f.sort=function(p,m,y,v,b){const x=y.order==="ascending"?1:-1,w=-1*x,C=x,D=(R,A)=>{let L=f.compare(R,A,w,C);if(L!==null||(y.by&&(R=y.by.resolve(R,v,b),A=y.by.resolve(A,v,b)),L=f.compare(R,A,w,C),L!==null))return L;const O=typeof R;if(O!==typeof A)throw p.$_createError("array.sort.mismatching",m,null,v,b);if(O!=="number"&&O!=="string")throw p.$_createError("array.sort.unsupported",m,{type:O},v,b);return O==="number"?(R-A)*x:R<A?w:C};try{return{value:m.slice().sort(D)}}catch(R){return{errors:R}}},f.compare=function(p,m,y,v){return p===m?0:p===void 0?1:m===void 0?-1:p===null?v:m===null?y:null}},4937:(r,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(2036),h={isBool:function(d){return typeof d=="boolean"}};r.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(d,{schema:f}){if(typeof d!="boolean"){if(typeof d=="string"){const p=f._flags.sensitive?d:d.toLowerCase();d=p==="true"||p!=="false"&&d}return typeof d!="boolean"&&(d=f.$_terms.truthy&&f.$_terms.truthy.has(d,null,null,!f._flags.sensitive)||(!f.$_terms.falsy||!f.$_terms.falsy.has(d,null,null,!f._flags.sensitive))&&d),{value:d}}},validate(d,{error:f}){if(typeof d!="boolean")return{value:d,errors:f("boolean.base")}},rules:{truthy:{method(...d){u.verifyFlat(d,"truthy");const f=this.clone();f.$_terms.truthy=f.$_terms.truthy||new c;for(let p=0;p<d.length;++p){const m=d[p];a(m!==void 0,"Cannot call truthy with undefined"),f.$_terms.truthy.add(m)}return f}},falsy:{method(...d){u.verifyFlat(d,"falsy");const f=this.clone();f.$_terms.falsy=f.$_terms.falsy||new c;for(let p=0;p<d.length;++p){const m=d[p];a(m!==void 0,"Cannot call falsy with undefined"),f.$_terms.falsy.add(m)}return f}},sensitive:{method(d=!0){return this.$_setFlag("sensitive",d)}}},cast:{number:{from:h.isBool,to:(d,f)=>d?1:0},string:{from:h.isBool,to:(d,f)=>d?"true":"false"}},manifest:{build:(d,f)=>(f.truthy&&(d=d.truthy(...f.truthy)),f.falsy&&(d=d.falsy(...f.falsy)),d)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(r,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(3328),h={isDate:function(d){return d instanceof Date}};r.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(d,{schema:f})=>({value:h.parse(d,f._flags.format)||d})},validate(d,{schema:f,error:p,prefs:m}){if(d instanceof Date&&!isNaN(d.getTime()))return;const y=f._flags.format;return m.convert&&y&&typeof d=="string"?{value:d,errors:p("date.format",{format:y})}:{value:d,errors:p("date.base")}},rules:{compare:{method:!1,validate(d,f,{date:p},{name:m,operator:y,args:v}){const b=p==="now"?Date.now():p.getTime();return u.compare(d.getTime(),b,y)?d:f.error("date."+m,{limit:v.date,value:d})},args:[{name:"date",ref:!0,normalize:d=>d==="now"?d:h.parse(d),assert:d=>d!==null,message:"must have a valid date format"}]},format:{method(d){return a(["iso","javascript","unix"].includes(d),"Unknown date format",d),this.$_setFlag("format",d)}},greater:{method(d){return this.$_addRule({name:"greater",method:"compare",args:{date:d},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(d){return this.$_addRule({name:"less",method:"compare",args:{date:d},operator:"<"})}},max:{method(d){return this.$_addRule({name:"max",method:"compare",args:{date:d},operator:"<="})}},min:{method(d){return this.$_addRule({name:"min",method:"compare",args:{date:d},operator:">="})}},timestamp:{method(d="javascript"){return a(["javascript","unix"].includes(d),'"type" must be one of "javascript, unix"'),this.format(d)}}},cast:{number:{from:h.isDate,to:(d,f)=>d.getTime()},string:{from:h.isDate,to:(d,{prefs:f})=>c.date(d,f)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),h.parse=function(d,f){if(d instanceof Date)return d;if(typeof d!="string"&&(isNaN(d)||!isFinite(d))||/^\s*$/.test(d))return null;if(f==="iso")return u.isIsoDate(d)?h.date(d.toString()):null;const p=d;if(typeof d=="string"&&/^[+-]?\d+(\.\d+)?$/.test(d)&&(d=parseFloat(d)),f){if(f==="javascript")return h.date(1*d);if(f==="unix")return h.date(1e3*d);if(typeof p=="string")return null}return h.date(d)},h.date=function(d){const f=new Date(d);return isNaN(f.getTime())?null:f}},390:(r,s,o)=>{const a=o(375),l=o(7824);r.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,c,{n:h})=>u.length===h?u:c.error("function.arity",{n:h})},class:{method(){return this.$_addRule("class")},validate:(u,c)=>/^\s*class\s/.test(u.toString())?u:c.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,c,{n:h})=>u.length>=h?u:c.error("function.minArity",{n:h})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,c,{n:h})=>u.length<=h?u:c.error("function.maxArity",{n:h})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(r,s,o)=>{const a=o(978),l=o(375),u=o(8571),c=o(3652),h=o(8068),d=o(8160),f=o(3292),p=o(6354),m=o(6133),y=o(3328),v={renameDefaults:{alias:!1,multiple:!1,override:!1}};r.exports=h.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(b,x)=>b.keys(x),validate(b,{schema:x,error:w,state:C,prefs:D}){if(!b||typeof b!==x.$_property("typeof")||Array.isArray(b))return{value:b,errors:w("object.base",{type:x.$_property("typeof")})};if(!(x.$_terms.renames||x.$_terms.dependencies||x.$_terms.keys||x.$_terms.patterns||x.$_terms.externals))return;b=v.clone(b,D);const R=[];if(x.$_terms.renames&&!v.rename(x,b,C,D,R))return{value:b,errors:R};if(!x.$_terms.keys&&!x.$_terms.patterns&&!x.$_terms.dependencies)return{value:b,errors:R};const A=new Set(Object.keys(b));if(x.$_terms.keys){const L=[b,...C.ancestors];for(const O of x.$_terms.keys){const $=O.key,q=b[$];A.delete($);const M=C.localize([...C.path,$],L,O),F=O.schema.$_validate(q,M,D);if(F.errors){if(D.abortEarly)return{value:b,errors:F.errors};F.value!==void 0&&(b[$]=F.value),R.push(...F.errors)}else O.schema._flags.result==="strip"||F.value===void 0&&q!==void 0?delete b[$]:F.value!==void 0&&(b[$]=F.value)}}if(A.size||x._flags._hasPatternMatch){const L=v.unknown(x,b,A,R,C,D);if(L)return L}if(x.$_terms.dependencies)for(const L of x.$_terms.dependencies){if(L.key!==null&&v.isPresent(L.options)(L.key.resolve(b,C,D,null,{shadow:!1}))===!1)continue;const O=v.dependencies[L.rel](x,L,b,C,D);if(O){const $=x.$_createError(O.code,b,O.context,C,D);if(D.abortEarly)return{value:b,errors:$};R.push($)}}return{value:b,errors:R}},rules:{and:{method(...b){return d.verifyFlat(b,"and"),v.dependency(this,"and",null,b)}},append:{method(b){return b==null||Object.keys(b).length===0?this:this.keys(b)}},assert:{method(b,x,w){y.isTemplate(b)||(b=f.ref(b)),l(w===void 0||typeof w=="string","Message must be a string"),x=this.$_compile(x,{appendPath:!0});const C=this.$_addRule({name:"assert",args:{subject:b,schema:x,message:w}});return C.$_mutateRegister(b),C.$_mutateRegister(x),C},validate(b,{error:x,prefs:w,state:C},{subject:D,schema:R,message:A}){const L=D.resolve(b,C,w),O=m.isRef(D)?D.absolute(C):[];return R.$_match(L,C.localize(O,[b,...C.ancestors],R),w)?b:x("object.assert",{subject:D,message:A})},args:["subject","schema","message"],multi:!0},instance:{method(b,x){return l(typeof b=="function","constructor must be a function"),x=x||b.name,this.$_addRule({name:"instance",args:{constructor:b,name:x}})},validate:(b,x,{constructor:w,name:C})=>b instanceof w?b:x.error("object.instance",{type:C,value:b}),args:["constructor","name"]},keys:{method(b){l(b===void 0||typeof b=="object","Object schema must be a valid object"),l(!d.isSchema(b),"Object schema cannot be a joi schema");const x=this.clone();if(b)if(Object.keys(b).length){x.$_terms.keys=x.$_terms.keys?x.$_terms.keys.filter(w=>!b.hasOwnProperty(w.key)):new v.Keys;for(const w in b)d.tryWithPath(()=>x.$_terms.keys.push({key:w,schema:this.$_compile(b[w])}),w)}else x.$_terms.keys=new v.Keys;else x.$_terms.keys=null;return x.$_mutateRebuild()}},length:{method(b){return this.$_addRule({name:"length",args:{limit:b},operator:"="})},validate:(b,x,{limit:w},{name:C,operator:D,args:R})=>d.compare(Object.keys(b).length,w,D)?b:x.error("object."+C,{limit:R.limit,value:b}),args:[{name:"limit",ref:!0,assert:d.limit,message:"must be a positive integer"}]},max:{method(b){return this.$_addRule({name:"max",method:"length",args:{limit:b},operator:"<="})}},min:{method(b){return this.$_addRule({name:"min",method:"length",args:{limit:b},operator:">="})}},nand:{method(...b){return d.verifyFlat(b,"nand"),v.dependency(this,"nand",null,b)}},or:{method(...b){return d.verifyFlat(b,"or"),v.dependency(this,"or",null,b)}},oxor:{method(...b){return v.dependency(this,"oxor",null,b)}},pattern:{method(b,x,w={}){const C=b instanceof RegExp;C||(b=this.$_compile(b,{appendPath:!0})),l(x!==void 0,"Invalid rule"),d.assertOptions(w,["fallthrough","matches"]),C&&l(!b.flags.includes("g")&&!b.flags.includes("y"),"pattern should not use global or sticky mode"),x=this.$_compile(x,{appendPath:!0});const D=this.clone();D.$_terms.patterns=D.$_terms.patterns||[];const R={[C?"regex":"schema"]:b,rule:x};return w.matches&&(R.matches=this.$_compile(w.matches),R.matches.type!=="array"&&(R.matches=R.matches.$_root.array().items(R.matches)),D.$_mutateRegister(R.matches),D.$_setFlag("_hasPatternMatch",!0,{clone:!1})),w.fallthrough&&(R.fallthrough=!0),D.$_terms.patterns.push(R),D.$_mutateRegister(x),D}},ref:{method(){return this.$_addRule("ref")},validate:(b,x)=>m.isRef(b)?b:x.error("object.refType",{value:b})},regex:{method(){return this.$_addRule("regex")},validate:(b,x)=>b instanceof RegExp?b:x.error("object.regex",{value:b})},rename:{method(b,x,w={}){l(typeof b=="string"||b instanceof RegExp,"Rename missing the from argument"),l(typeof x=="string"||x instanceof y,"Invalid rename to argument"),l(x!==b,"Cannot rename key to same name:",b),d.assertOptions(w,["alias","ignoreUndefined","override","multiple"]);const C=this.clone();C.$_terms.renames=C.$_terms.renames||[];for(const D of C.$_terms.renames)l(D.from!==b,"Cannot rename the same key multiple times");return x instanceof y&&C.$_mutateRegister(x),C.$_terms.renames.push({from:b,to:x,options:a(v.renameDefaults,w)}),C}},schema:{method(b="any"){return this.$_addRule({name:"schema",args:{type:b}})},validate:(b,x,{type:w})=>!d.isSchema(b)||w!=="any"&&b.type!==w?x.error("object.schema",{type:w}):b},unknown:{method(b){return this.$_setFlag("unknown",b!==!1)}},with:{method(b,x,w={}){return v.dependency(this,"with",b,x,w)}},without:{method(b,x,w={}){return v.dependency(this,"without",b,x,w)}},xor:{method(...b){return d.verifyFlat(b,"xor"),v.dependency(this,"xor",null,b)}}},overrides:{default(b,x){return b===void 0&&(b=d.symbols.deepDefault),this.$_parent("default",b,x)}},rebuild(b){if(b.$_terms.keys){const x=new c.Sorter;for(const w of b.$_terms.keys)d.tryWithPath(()=>x.add(w,{after:w.schema.$_rootReferences(),group:w.key}),w.key);b.$_terms.keys=new v.Keys(...x.nodes)}},manifest:{build(b,x){if(x.keys&&(b=b.keys(x.keys)),x.dependencies)for(const{rel:w,key:C=null,peers:D,options:R}of x.dependencies)b=v.dependency(b,w,C,D,R);if(x.patterns)for(const{regex:w,schema:C,rule:D,fallthrough:R,matches:A}of x.patterns)b=b.pattern(w||C,D,{fallthrough:R,matches:A});if(x.renames)for(const{from:w,to:C,options:D}of x.renames)b=b.rename(w,C,D);return b}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),v.clone=function(b,x){if(typeof b=="object"){if(x.nonEnumerables)return u(b,{shallow:!0});const C=Object.create(Object.getPrototypeOf(b));return Object.assign(C,b),C}const w=function(...C){return b.apply(this,C)};return w.prototype=u(b.prototype),Object.defineProperty(w,"name",{value:b.name,writable:!1}),Object.defineProperty(w,"length",{value:b.length,writable:!1}),Object.assign(w,b),w},v.dependency=function(b,x,w,C,D){l(w===null||typeof w=="string",x,"key must be a strings"),D||(D=C.length>1&&typeof C[C.length-1]=="object"?C.pop():{}),d.assertOptions(D,["separator","isPresent"]),C=[].concat(C);const R=d.default(D.separator,"."),A=[];for(const O of C)l(typeof O=="string",x,"peers must be strings"),A.push(f.ref(O,{separator:R,ancestor:0,prefix:!1}));w!==null&&(w=f.ref(w,{separator:R,ancestor:0,prefix:!1}));const L=b.clone();return L.$_terms.dependencies=L.$_terms.dependencies||[],L.$_terms.dependencies.push(new v.Dependency(x,w,A,C,D)),L},v.dependencies={and(b,x,w,C,D){const R=[],A=[],L=x.peers.length,O=v.isPresent(x.options);for(const $ of x.peers)O($.resolve(w,C,D,null,{shadow:!1}))===!1?R.push($.key):A.push($.key);if(R.length!==L&&A.length!==L)return{code:"object.and",context:{present:A,presentWithLabels:v.keysToLabels(b,A),missing:R,missingWithLabels:v.keysToLabels(b,R)}}},nand(b,x,w,C,D){const R=[],A=v.isPresent(x.options);for(const $ of x.peers)A($.resolve(w,C,D,null,{shadow:!1}))&&R.push($.key);if(R.length!==x.peers.length)return;const L=x.paths[0],O=x.paths.slice(1);return{code:"object.nand",context:{main:L,mainWithLabel:v.keysToLabels(b,L),peers:O,peersWithLabels:v.keysToLabels(b,O)}}},or(b,x,w,C,D){const R=v.isPresent(x.options);for(const A of x.peers)if(R(A.resolve(w,C,D,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:x.paths,peersWithLabels:v.keysToLabels(b,x.paths)}}},oxor(b,x,w,C,D){const R=[],A=v.isPresent(x.options);for(const O of x.peers)A(O.resolve(w,C,D,null,{shadow:!1}))&&R.push(O.key);if(!R.length||R.length===1)return;const L={peers:x.paths,peersWithLabels:v.keysToLabels(b,x.paths)};return L.present=R,L.presentWithLabels=v.keysToLabels(b,R),{code:"object.oxor",context:L}},with(b,x,w,C,D){const R=v.isPresent(x.options);for(const A of x.peers)if(R(A.resolve(w,C,D,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:x.key.key,mainWithLabel:v.keysToLabels(b,x.key.key),peer:A.key,peerWithLabel:v.keysToLabels(b,A.key)}}},without(b,x,w,C,D){const R=v.isPresent(x.options);for(const A of x.peers)if(R(A.resolve(w,C,D,null,{shadow:!1})))return{code:"object.without",context:{main:x.key.key,mainWithLabel:v.keysToLabels(b,x.key.key),peer:A.key,peerWithLabel:v.keysToLabels(b,A.key)}}},xor(b,x,w,C,D){const R=[],A=v.isPresent(x.options);for(const O of x.peers)A(O.resolve(w,C,D,null,{shadow:!1}))&&R.push(O.key);if(R.length===1)return;const L={peers:x.paths,peersWithLabels:v.keysToLabels(b,x.paths)};return R.length===0?{code:"object.missing",context:L}:(L.present=R,L.presentWithLabels=v.keysToLabels(b,R),{code:"object.xor",context:L})}},v.keysToLabels=function(b,x){return Array.isArray(x)?x.map(w=>b.$_mapLabels(w)):b.$_mapLabels(x)},v.isPresent=function(b){return typeof b.isPresent=="function"?b.isPresent:x=>x!==void 0},v.rename=function(b,x,w,C,D){const R={};for(const A of b.$_terms.renames){const L=[],O=typeof A.from!="string";if(O)for(const $ in x){if(x[$]===void 0&&A.options.ignoreUndefined||$===A.to)continue;const q=A.from.exec($);q&&L.push({from:$,to:A.to,match:q})}else!Object.prototype.hasOwnProperty.call(x,A.from)||x[A.from]===void 0&&A.options.ignoreUndefined||L.push(A);for(const $ of L){const q=$.from;let M=$.to;if(M instanceof y&&(M=M.render(x,w,C,$.match)),q!==M){if(!A.options.multiple&&R[M]&&(D.push(b.$_createError("object.rename.multiple",x,{from:q,to:M,pattern:O},w,C)),C.abortEarly)||Object.prototype.hasOwnProperty.call(x,M)&&!A.options.override&&!R[M]&&(D.push(b.$_createError("object.rename.override",x,{from:q,to:M,pattern:O},w,C)),C.abortEarly))return!1;x[q]===void 0?delete x[M]:x[M]=x[q],R[M]=!0,A.options.alias||delete x[q]}}}return!0},v.unknown=function(b,x,w,C,D,R){if(b.$_terms.patterns){let A=!1;const L=b.$_terms.patterns.map($=>{if($.matches)return A=!0,[]}),O=[x,...D.ancestors];for(const $ of w){const q=x[$],M=[...D.path,$];for(let F=0;F<b.$_terms.patterns.length;++F){const N=b.$_terms.patterns[F];if(N.regex){const K=N.regex.test($);if(D.mainstay.tracer.debug(D,"rule",`pattern.${F}`,K?"pass":"error"),!K)continue}else if(!N.schema.$_match($,D.nest(N.schema,`pattern.${F}`),R))continue;w.delete($);const B=D.localize(M,O,{schema:N.rule,key:$}),W=N.rule.$_validate(q,B,R);if(W.errors){if(R.abortEarly)return{value:x,errors:W.errors};C.push(...W.errors)}if(N.matches&&L[F].push($),x[$]=W.value,!N.fallthrough)break}}if(A)for(let $=0;$<L.length;++$){const q=L[$];if(!q)continue;const M=b.$_terms.patterns[$].matches,F=D.localize(D.path,O,M),N=M.$_validate(q,F,R);if(N.errors){const B=p.details(N.errors,{override:!1});B.matches=q;const W=b.$_createError("object.pattern.match",x,B,D,R);if(R.abortEarly)return{value:x,errors:W};C.push(W)}}}if(w.size&&(b.$_terms.keys||b.$_terms.patterns)){if(R.stripUnknown&&b._flags.unknown===void 0||R.skipFunctions){const A=!(!R.stripUnknown||R.stripUnknown!==!0&&!R.stripUnknown.objects);for(const L of w)A?(delete x[L],w.delete(L)):typeof x[L]=="function"&&w.delete(L)}if(!d.default(b._flags.unknown,R.allowUnknown))for(const A of w){const L=D.localize([...D.path,A],[]),O=b.$_createError("object.unknown",x[A],{child:A},L,R,{flags:!1});if(R.abortEarly)return{value:x,errors:O};C.push(O)}}},v.Dependency=class{constructor(b,x,w,C,D){this.rel=b,this.key=x,this.peers=w,this.paths=C,this.options=D}describe(){const b={rel:this.rel,peers:this.paths};return this.key!==null&&(b.key=this.key.key),this.peers[0].separator!=="."&&(b.options={...b.options,separator:this.peers[0].separator}),this.options.isPresent&&(b.options={...b.options,isPresent:this.options.isPresent}),b}},v.Keys=class extends Array{concat(b){const x=this.slice(),w=new Map;for(let C=0;C<x.length;++C)w.set(x[C].key,C);for(const C of b){const D=C.key,R=w.get(D);R!==void 0?x[R]={key:D,schema:x[R].schema.concat(C.schema)}:x.push(C)}return x}}},8785:(r,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c=o(3292),h=o(6354),d={};r.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(f,p)=>f.ref(p),validate(f,{schema:p,state:m,prefs:y}){a(p.$_terms.link,"Uninitialized link schema");const v=d.generate(p,f,m,y),b=p.$_terms.link[0].ref;return v.$_validate(f,m.nest(v,`link:${b.display}:${v.type}`),y)},generate:(f,p,m,y)=>d.generate(f,p,m,y),rules:{ref:{method(f){a(!this.$_terms.link,"Cannot reinitialize schema"),f=c.ref(f),a(f.type==="value"||f.type==="local","Invalid reference type:",f.type),a(f.type==="local"||f.ancestor==="root"||f.ancestor>0,"Link cannot reference itself");const p=this.clone();return p.$_terms.link=[{ref:f}],p}},relative:{method(f=!0){return this.$_setFlag("relative",f)}}},overrides:{concat(f){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(f),"Invalid schema object"),a(f.type!=="link","Cannot merge type link with another link");const p=this.clone();return p.$_terms.whens||(p.$_terms.whens=[]),p.$_terms.whens.push({concat:f}),p.$_mutateRebuild()}},manifest:{build:(f,p)=>(a(p.link,"Invalid link description missing link"),f.ref(p.link))}}),d.generate=function(f,p,m,y){let v=m.mainstay.links.get(f);if(v)return v._generate(p,m,y).schema;const b=f.$_terms.link[0].ref,{perspective:x,path:w}=d.perspective(b,m);d.assert(x,"which is outside of schema boundaries",b,f,m,y);try{v=w.length?x.$_reach(w):x}catch{d.assert(!1,"to non-existing schema",b,f,m,y)}return d.assert(v.type!=="link","which is another link",b,f,m,y),f._flags.relative||m.mainstay.links.set(f,v),v._generate(p,m,y).schema},d.perspective=function(f,p){if(f.type==="local"){for(const{schema:m,key:y}of p.schemas){if((m._flags.id||y)===f.path[0])return{perspective:m,path:f.path.slice(1)};if(m.$_terms.shared){for(const v of m.$_terms.shared)if(v._flags.id===f.path[0])return{perspective:v,path:f.path.slice(1)}}}return{perspective:null,path:null}}return f.ancestor==="root"?{perspective:p.schemas[p.schemas.length-1].schema,path:f.path}:{perspective:p.schemas[f.ancestor]&&p.schemas[f.ancestor].schema,path:f.path}},d.assert=function(f,p,m,y,v,b){f||a(!1,`"${h.label(y._flags,v,b)}" contains link reference "${m.display}" ${p}`)}},3832:(r,s,o)=>{const a=o(375),l=o(8068),u=o(8160),c={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(h){const d=h.toString(),f=d.indexOf("."),p=d.indexOf("e");return(f<0?0:(p<0?d.length:p)-f-1)+(p<0?0:Math.max(0,-parseInt(d.slice(p+1))))}};r.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(h,{schema:d,error:f}){if(!h.match(c.numberRx))return;h=h.trim();const p={value:parseFloat(h)};if(p.value===0&&(p.value=0),!d._flags.unsafe)if(h.match(/e/i)){if(c.extractSignificantDigits(h)!==c.extractSignificantDigits(String(p.value)))return p.errors=f("number.unsafe"),p}else{const m=p.value.toString();if(m.match(/e/i))return p;if(m!==c.normalizeDecimal(h))return p.errors=f("number.unsafe"),p}return p}},validate(h,{schema:d,error:f,prefs:p}){if(h===1/0||h===-1/0)return{value:h,errors:f("number.infinity")};if(!u.isNumber(h))return{value:h,errors:f("number.base")};const m={value:h};if(p.convert){const y=d.$_getRule("precision");if(y){const v=Math.pow(10,y.args.limit);m.value=Math.round(m.value*v)/v}}return m.value===0&&(m.value=0),!d._flags.unsafe&&(h>Number.MAX_SAFE_INTEGER||h<Number.MIN_SAFE_INTEGER)&&(m.errors=f("number.unsafe")),m},rules:{compare:{method:!1,validate:(h,d,{limit:f},{name:p,operator:m,args:y})=>u.compare(h,f,m)?h:d.error("number."+p,{limit:y.limit,value:h}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(h){return this.$_addRule({name:"greater",method:"compare",args:{limit:h},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(h,d)=>Math.trunc(h)-h==0?h:d.error("number.integer")},less:{method(h){return this.$_addRule({name:"less",method:"compare",args:{limit:h},operator:"<"})}},max:{method(h){return this.$_addRule({name:"max",method:"compare",args:{limit:h},operator:"<="})}},min:{method(h){return this.$_addRule({name:"min",method:"compare",args:{limit:h},operator:">="})}},multiple:{method(h){const d=typeof h=="number"?c.decimalPlaces(h):null,f=Math.pow(10,d);return this.$_addRule({name:"multiple",args:{base:h,baseDecimalPlace:d,pfactor:f}})},validate:(h,d,{base:f,baseDecimalPlace:p,pfactor:m},y)=>c.decimalPlaces(h)>p?d.error("number.multiple",{multiple:y.args.base,value:h}):Math.round(m*h)%Math.round(m*f)==0?h:d.error("number.multiple",{multiple:y.args.base,value:h}),args:[{name:"base",ref:!0,assert:h=>typeof h=="number"&&isFinite(h)&&h>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(h,d)=>Number.isSafeInteger(h)&&h>=0&&h<=65535?h:d.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(h){return a(Number.isSafeInteger(h),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:h}})},validate(h,d,{limit:f}){const p=h.toString().match(c.precisionRx);return Math.max((p[1]?p[1].length:0)-(p[2]?parseInt(p[2],10):0),0)<=f?h:d.error("number.precision",{limit:f,value:h})},convert:!0},sign:{method(h){return a(["negative","positive"].includes(h),"Invalid sign",h),this.$_addRule({name:"sign",args:{sign:h}})},validate:(h,d,{sign:f})=>f==="negative"&&h<0||f==="positive"&&h>0?h:d.error(`number.${f}`)},unsafe:{method(h=!0){return a(typeof h=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",h)}}},cast:{string:{from:h=>typeof h=="number",to:(h,d)=>h.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),c.extractSignificantDigits=function(h){return h.replace(c.exponentialPartRegex,"").replace(c.dotRegex,"").replace(c.trailingZerosRegex,"").replace(c.leadingSignAndZerosRegex,"")},c.normalizeDecimal=function(h){return(h=h.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&h.endsWith("0")&&(h=h.replace(/0+$/,"")),h==="-0"?"0":h}},8966:(r,s,o)=>{const a=o(7824);r.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(r,s,o)=>{const a=o(375),l=o(5380),u=o(1745),c=o(9959),h=o(6064),d=o(9926),f=o(5752),p=o(8068),m=o(8160),y={tlds:d instanceof Set&&{tlds:{allow:d,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:c.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};r.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(v,{schema:b,state:x,prefs:w}){const C=b.$_getRule("normalize");C&&(v=v.normalize(C.args.form));const D=b.$_getRule("case");D&&(v=D.args.direction==="upper"?v.toLocaleUpperCase():v.toLocaleLowerCase());const R=b.$_getRule("trim");if(R&&R.args.enabled&&(v=v.trim()),b.$_terms.replacements)for(const L of b.$_terms.replacements)v=v.replace(L.pattern,L.replacement);const A=b.$_getRule("hex");if(A&&A.args.options.byteAligned&&v.length%2!=0&&(v=`0${v}`),b.$_getRule("isoDate")){const L=y.isoDate(v);L&&(v=L)}if(b._flags.truncate){const L=b.$_getRule("max");if(L){let O=L.args.limit;if(m.isResolvable(O)&&(O=O.resolve(v,x,w),!m.limit(O)))return{value:v,errors:b.$_createError("any.ref",O,{ref:L.args.limit,arg:"limit",reason:"must be a positive integer"},x,w)};v=v.slice(0,O)}}return{value:v}}},validate(v,{schema:b,error:x}){if(typeof v!="string")return{value:v,errors:x("string.base")};if(v===""){const w=b.$_getRule("min");return w&&w.args.limit===0?void 0:{value:v,errors:x("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(v,b)=>/^[a-zA-Z0-9]+$/.test(v)?v:b.error("string.alphanum")},base64:{method(v={}){return m.assertOptions(v,["paddingRequired","urlSafe"]),v={urlSafe:!1,paddingRequired:!0,...v},a(typeof v.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof v.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:v}})},validate:(v,b,{options:x})=>y.base64Regex[x.paddingRequired][x.urlSafe].test(v)?v:b.error("string.base64")},case:{method(v){return a(["lower","upper"].includes(v),"Invalid case:",v),this.$_addRule({name:"case",args:{direction:v}})},validate:(v,b,{direction:x})=>x==="lower"&&v===v.toLocaleLowerCase()||x==="upper"&&v===v.toLocaleUpperCase()?v:b.error(`string.${x}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(v,b){let x=v.length,w=0,C=1;for(;x--;){const D=v.charAt(x)*C;w+=D-9*(D>9),C^=3}return w>0&&w%10==0?v:b.error("string.creditCard")}},dataUri:{method(v={}){return m.assertOptions(v,["paddingRequired"]),v={paddingRequired:!0,...v},a(typeof v.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:v}})},validate(v,b,{options:x}){const w=v.match(y.dataUriRegex);return w&&(!w[2]||w[2]!=="base64"||y.base64Regex[x.paddingRequired].false.test(w[3]))?v:b.error("string.dataUri")}},domain:{method(v){v&&m.assertOptions(v,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const b=y.addressOptions(v);return this.$_addRule({name:"domain",args:{options:v},address:b})},validate:(v,b,x,{address:w})=>l.isValid(v,w)?v:b.error("string.domain")},email:{method(v={}){m.assertOptions(v,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(v.multiple===void 0||typeof v.multiple=="boolean","multiple option must be an boolean");const b=y.addressOptions(v),x=new RegExp(`\\s*[${v.separator?h(v.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:v},regex:x,address:b})},validate(v,b,{options:x},{regex:w,address:C}){const D=x.multiple?v.split(w):[v],R=[];for(const A of D)u.isValid(A,C)||R.push(A);return R.length?b.error("string.email",{value:v,invalids:R}):v}},guid:{alias:"uuid",method(v={}){m.assertOptions(v,["version","separator"]);let b="";if(v.version){const C=[].concat(v.version);a(C.length>=1,"version must have at least 1 valid version specified");const D=new Set;for(let R=0;R<C.length;++R){const A=C[R];a(typeof A=="string","version at position "+R+" must be a string");const L=y.guidVersions[A.toLowerCase()];a(L,"version at position "+R+" must be one of "+Object.keys(y.guidVersions).join(", ")),a(!D.has(L),"version at position "+R+" must not be a duplicate"),b+=L,D.add(L)}}a(y.guidSeparators.has(v.separator),'separator must be one of true, false, "-", or ":"');const x=v.separator===void 0?"[:-]?":v.separator===!0?"[:-]":v.separator===!1?"[]?":`\\${v.separator}`,w=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${x})[0-9A-F]{4}\\2?[${b||"0-9A-F"}][0-9A-F]{3}\\2?[${b?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:v},regex:w})},validate(v,b,x,{regex:w}){const C=w.exec(v);return C?y.guidBrackets[C[1]]!==C[C.length-1]?b.error("string.guid"):v:b.error("string.guid")}},hex:{method(v={}){return m.assertOptions(v,["byteAligned","prefix"]),v={byteAligned:!1,prefix:!1,...v},a(typeof v.byteAligned=="boolean","byteAligned must be boolean"),a(typeof v.prefix=="boolean"||v.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:v}})},validate:(v,b,{options:x})=>(x.prefix==="optional"?y.hexRegex.withOptionalPrefix:x.prefix===!0?y.hexRegex.withPrefix:y.hexRegex.withoutPrefix).test(v)?x.byteAligned&&v.length%2!=0?b.error("string.hexAlign"):v:b.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(v,b)=>l.isValid(v,{minDomainSegments:1})||y.ipRegex.test(v)?v:b.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(v={}){m.assertOptions(v,["cidr","version"]);const{cidr:b,versions:x,regex:w}=c.regex(v),C=v.version?x:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:b,version:C}},regex:w})},validate:(v,b,{options:x},{regex:w})=>w.test(v)?v:x.version?b.error("string.ipVersion",{value:v,cidr:x.cidr,version:x.version}):b.error("string.ip",{value:v,cidr:x.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(v,{error:b})=>y.isoDate(v)?v:b("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(v,b)=>y.isoDurationRegex.test(v)?v:b.error("string.isoDuration")},length:{method(v,b){return y.length(this,"length",v,"=",b)},validate(v,b,{limit:x,encoding:w},{name:C,operator:D,args:R}){const A=!w&&v.length;return m.compare(A,x,D)?v:b.error("string."+C,{limit:R.limit,value:v,encoding:w})},args:[{name:"limit",ref:!0,assert:m.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(v,b){return y.length(this,"max",v,"<=",b)},args:["limit","encoding"]},min:{method(v,b){return y.length(this,"min",v,">=",b)},args:["limit","encoding"]},normalize:{method(v="NFC"){return a(y.normalizationForms.includes(v),"normalization form must be one of "+y.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:v}})},validate:(v,{error:b},{form:x})=>v===v.normalize(x)?v:b("string.normalize",{value:v,form:x}),convert:!0},pattern:{alias:"regex",method(v,b={}){a(v instanceof RegExp,"regex must be a RegExp"),a(!v.flags.includes("g")&&!v.flags.includes("y"),"regex should not use global or sticky mode"),typeof b=="string"&&(b={name:b}),m.assertOptions(b,["invert","name"]);const x=["string.pattern",b.invert?".invert":"",b.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:v,options:b},errorCode:x})},validate:(v,b,{regex:x,options:w},{errorCode:C})=>x.test(v)^w.invert?v:b.error(C,{name:w.name,regex:x,value:v}),args:["regex","options"],multi:!0},replace:{method(v,b){typeof v=="string"&&(v=new RegExp(h(v),"g")),a(v instanceof RegExp,"pattern must be a RegExp"),a(typeof b=="string","replacement must be a String");const x=this.clone();return x.$_terms.replacements||(x.$_terms.replacements=[]),x.$_terms.replacements.push({pattern:v,replacement:b}),x}},token:{method(){return this.$_addRule("token")},validate:(v,b)=>/^\w+$/.test(v)?v:b.error("string.token")},trim:{method(v=!0){return a(typeof v=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:v}})},validate:(v,b,{enabled:x})=>x&&v!==v.trim()?b.error("string.trim"):v,convert:!0},truncate:{method(v=!0){return a(typeof v=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",v)}},uppercase:{method(){return this.case("upper")}},uri:{method(v={}){m.assertOptions(v,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),v.domain&&m.assertOptions(v.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:b,scheme:x}=f.regex(v),w=v.domain?y.addressOptions(v.domain):null;return this.$_addRule({name:"uri",args:{options:v},regex:b,domain:w,scheme:x})},validate(v,b,{options:x},{regex:w,domain:C,scheme:D}){if(["http:/","https:/"].includes(v))return b.error("string.uri");let R=w.exec(v);if(!R&&b.prefs.convert&&x.encodeUri){const A=encodeURI(v);R=w.exec(A),R&&(v=A)}if(R){const A=R[1]||R[2];return!C||x.allowRelative&&!A||l.isValid(A,C)?v:b.error("string.domain",{value:A})}return x.relativeOnly?b.error("string.uriRelativeOnly"):x.scheme?b.error("string.uriCustomScheme",{scheme:D,value:v}):b.error("string.uri")}}},manifest:{build(v,b){if(b.replacements)for(const{pattern:x,replacement:w}of b.replacements)v=v.replace(x,w);return v}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),y.addressOptions=function(v){if(!v)return y.tlds||v;if(a(v.minDomainSegments===void 0||Number.isSafeInteger(v.minDomainSegments)&&v.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(v.maxDomainSegments===void 0||Number.isSafeInteger(v.maxDomainSegments)&&v.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),v.tlds===!1)return v;if(v.tlds===!0||v.tlds===void 0)return a(y.tlds,"Built-in TLD list disabled"),Object.assign({},v,y.tlds);a(typeof v.tlds=="object","tlds must be true, false, or an object");const b=v.tlds.deny;if(b)return Array.isArray(b)&&(v=Object.assign({},v,{tlds:{deny:new Set(b)}})),a(v.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!v.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),y.validateTlds(v.tlds.deny,"tlds.deny"),v;const x=v.tlds.allow;return x?x===!0?(a(y.tlds,"Built-in TLD list disabled"),Object.assign({},v,y.tlds)):(Array.isArray(x)&&(v=Object.assign({},v,{tlds:{allow:new Set(x)}})),a(v.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),y.validateTlds(v.tlds.allow,"tlds.allow"),v):v},y.validateTlds=function(v,b){for(const x of v)a(l.isValid(x,{minDomainSegments:1,maxDomainSegments:1}),`${b} must contain valid top level domain names`)},y.isoDate=function(v){if(!m.isIsoDate(v))return null;/.*T.*[+-]\d\d$/.test(v)&&(v+="00");const b=new Date(v);return isNaN(b.getTime())?null:b.toISOString()},y.length=function(v,b,x,w,C){return a(!C||!1,"Invalid encoding:",C),v.$_addRule({name:b,method:"length",args:{limit:x,encoding:C},operator:w})}},8826:(r,s,o)=>{const a=o(375),l=o(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},r.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(c,{schema:h,error:d}){const f=h.$_terms.map.get(c);return f&&(c=f),h._flags.only&&typeof c!="symbol"?{value:c,errors:d("symbol.map",{map:h.$_terms.map})}:{value:c}}},validate(c,{error:h}){if(typeof c!="symbol")return{value:c,errors:h("symbol.base")}},rules:{map:{method(c){c&&!c[Symbol.iterator]&&typeof c=="object"&&(c=Object.entries(c)),a(c&&c[Symbol.iterator],"Iterable must be an iterable or object");const h=this.clone(),d=[];for(const f of c){a(f&&f[Symbol.iterator],"Entry must be an iterable");const[p,m]=f;a(typeof p!="object"&&typeof p!="function"&&typeof p!="symbol","Key must not be of type object, function, or Symbol"),a(typeof m=="symbol","Value must be a Symbol"),h.$_terms.map.set(p,m),d.push(m)}return h.valid(...d)}}},manifest:{build:(c,h)=>(h.map&&(c=c.map(h.map)),c)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(r,s,o)=>{const a=o(375),l=o(8571),u=o(738),c=o(9621),h=o(8160),d=o(6354),f=o(493),p={result:Symbol("result")};s.entry=function(m,y,v){let b=h.defaults;v&&(a(v.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(v.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),b=h.preferences(h.defaults,v));const x=p.entry(m,y,b);a(!x.mainstay.externals.length,"Schema with external rules must use validateAsync()");const w={value:x.value};return x.error&&(w.error=x.error),x.mainstay.warnings.length&&(w.warning=d.details(x.mainstay.warnings)),x.mainstay.debug&&(w.debug=x.mainstay.debug),x.mainstay.artifacts&&(w.artifacts=x.mainstay.artifacts),w},s.entryAsync=async function(m,y,v){let b=h.defaults;v&&(b=h.preferences(h.defaults,v));const x=p.entry(m,y,b),w=x.mainstay;if(x.error)throw w.debug&&(x.error.debug=w.debug),x.error;if(w.externals.length){let D=x.value;const R=[];for(const A of w.externals){const L=A.state.path,O=A.schema.type==="link"?w.links.get(A.schema):null;let $,q,M=D;const F=L.length?[D]:[],N=L.length?c(m,L):m;if(L.length){$=L[L.length-1];let B=D;for(const W of L.slice(0,-1))B=B[W],F.unshift(B);q=F[0],M=q[$]}try{const B=(K,ee)=>(O||A.schema).$_createError(K,M,ee,A.state,b),W=await A.method(M,{schema:A.schema,linked:O,state:A.state,prefs:v,original:N,error:B,errorsArray:p.errorsArray,warn:(K,ee)=>w.warnings.push((O||A.schema).$_createError(K,M,ee,A.state,b)),message:(K,ee)=>(O||A.schema).$_createError("external",M,ee,A.state,b,{messages:K})});if(W===void 0||W===M)continue;if(W instanceof d.Report){if(w.tracer.log(A.schema,A.state,"rule","external","error"),R.push(W),b.abortEarly)break;continue}if(Array.isArray(W)&&W[h.symbols.errors]){if(w.tracer.log(A.schema,A.state,"rule","external","error"),R.push(...W),b.abortEarly)break;continue}q?(w.tracer.value(A.state,"rule",M,W,"external"),q[$]=W):(w.tracer.value(A.state,"rule",D,W,"external"),D=W)}catch(B){throw b.errors.label&&(B.message+=` (${A.label})`),B}}if(x.value=D,R.length)throw x.error=d.process(R,m,b),w.debug&&(x.error.debug=w.debug),x.error}if(!b.warnings&&!b.debug&&!b.artifacts)return x.value;const C={value:x.value};return w.warnings.length&&(C.warning=d.details(w.warnings)),w.debug&&(C.debug=w.debug),w.artifacts&&(C.artifacts=w.artifacts),C},p.Mainstay=class{constructor(m,y,v){this.externals=[],this.warnings=[],this.tracer=m,this.debug=y,this.links=v,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const m=this._snapshots.pop();this.externals=m.externals,this.warnings=m.warnings}commit(){this._snapshots.pop()}},p.entry=function(m,y,v){const{tracer:b,cleanup:x}=p.tracer(y,v),w=v.debug?[]:null,C=y._ids._schemaChain?new Map:null,D=new p.Mainstay(b,w,C),R=y._ids._schemaChain?[{schema:y}]:null,A=new f([],[],{mainstay:D,schemas:R}),L=s.validate(m,y,A,v);x&&y.$_root.untrace();const O=d.process(L.errors,m,v);return{value:L.value,error:O,mainstay:D}},p.tracer=function(m,y){return m.$_root._tracer?{tracer:m.$_root._tracer._register(m)}:y.debug?(a(m.$_root.trace,"Debug mode not supported"),{tracer:m.$_root.trace()._register(m),cleanup:!0}):{tracer:p.ignore}},s.validate=function(m,y,v,b,x={}){if(y.$_terms.whens&&(y=y._generate(m,v,b).schema),y._preferences&&(b=p.prefs(y,b)),y._cache&&b.cache){const O=y._cache.get(m);if(v.mainstay.tracer.debug(v,"validate","cached",!!O),O)return O}const w=(O,$,q)=>y.$_createError(O,m,$,q||v,b),C={original:m,prefs:b,schema:y,state:v,error:w,errorsArray:p.errorsArray,warn:(O,$,q)=>v.mainstay.warnings.push(w(O,$,q)),message:(O,$)=>y.$_createError("custom",m,$,v,b,{messages:O})};v.mainstay.tracer.entry(y,v);const D=y._definition;if(D.prepare&&m!==void 0&&b.convert){const O=D.prepare(m,C);if(O){if(v.mainstay.tracer.value(v,"prepare",m,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),C);m=O.value}}if(D.coerce&&m!==void 0&&b.convert&&(!D.coerce.from||D.coerce.from.includes(typeof m))){const O=D.coerce.method(m,C);if(O){if(v.mainstay.tracer.value(v,"coerced",m,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),C);m=O.value}}const R=y._flags.empty;R&&R.$_match(p.trim(m,y),v.nest(R),h.defaults)&&(v.mainstay.tracer.value(v,"empty",m,void 0),m=void 0);const A=x.presence||y._flags.presence||(y._flags._endedSwitch?null:b.presence);if(m===void 0){if(A==="forbidden")return p.finalize(m,null,C);if(A==="required")return p.finalize(m,[y.$_createError("any.required",m,null,v,b)],C);if(A==="optional"){if(y._flags.default!==h.symbols.deepDefault)return p.finalize(m,null,C);v.mainstay.tracer.value(v,"default",m,{}),m={}}}else if(A==="forbidden")return p.finalize(m,[y.$_createError("any.unknown",m,null,v,b)],C);const L=[];if(y._valids){const O=y._valids.get(m,v,b,y._flags.insensitive);if(O)return b.convert&&(v.mainstay.tracer.value(v,"valids",m,O.value),m=O.value),v.mainstay.tracer.filter(y,v,"valid",O),p.finalize(m,null,C);if(y._flags.only){const $=y.$_createError("any.only",m,{valids:y._valids.values({display:!0})},v,b);if(b.abortEarly)return p.finalize(m,[$],C);L.push($)}}if(y._invalids){const O=y._invalids.get(m,v,b,y._flags.insensitive);if(O){v.mainstay.tracer.filter(y,v,"invalid",O);const $=y.$_createError("any.invalid",m,{invalids:y._invalids.values({display:!0})},v,b);if(b.abortEarly)return p.finalize(m,[$],C);L.push($)}}if(D.validate){const O=D.validate(m,C);if(O&&(v.mainstay.tracer.value(v,"base",m,O.value),m=O.value,O.errors)){if(!Array.isArray(O.errors))return L.push(O.errors),p.finalize(m,L,C);if(O.errors.length)return L.push(...O.errors),p.finalize(m,L,C)}}return y._rules.length?p.rules(m,L,C):p.finalize(m,L,C)},p.rules=function(m,y,v){const{schema:b,state:x,prefs:w}=v;for(const C of b._rules){const D=b._definition.rules[C.method];if(D.convert&&w.convert){x.mainstay.tracer.log(b,x,"rule",C.name,"full");continue}let R,A=C.args;if(C._resolve.length){A=Object.assign({},A);for(const O of C._resolve){const $=D.argsByName.get(O),q=A[O].resolve(m,x,w),M=$.normalize?$.normalize(q):q,F=h.validateArg(M,null,$);if(F){R=b.$_createError("any.ref",q,{arg:O,ref:A[O],reason:F},x,w);break}A[O]=M}}R=R||D.validate(m,v,A,C);const L=p.rule(R,C);if(L.errors){if(x.mainstay.tracer.log(b,x,"rule",C.name,"error"),C.warn){x.mainstay.warnings.push(...L.errors);continue}if(w.abortEarly)return p.finalize(m,L.errors,v);y.push(...L.errors)}else x.mainstay.tracer.log(b,x,"rule",C.name,"pass"),x.mainstay.tracer.value(x,"rule",m,L.value,C.name),m=L.value}return p.finalize(m,y,v)},p.rule=function(m,y){return m instanceof d.Report?(p.error(m,y),{errors:[m],value:null}):Array.isArray(m)&&m[h.symbols.errors]?(m.forEach(v=>p.error(v,y)),{errors:m,value:null}):{errors:null,value:m}},p.error=function(m,y){return y.message&&m._setTemplate(y.message),m},p.finalize=function(m,y,v){y=y||[];const{schema:b,state:x,prefs:w}=v;if(y.length){const D=p.default("failover",void 0,y,v);D!==void 0&&(x.mainstay.tracer.value(x,"failover",m,D),m=D,y=[])}if(y.length&&b._flags.error)if(typeof b._flags.error=="function"){y=b._flags.error(y),Array.isArray(y)||(y=[y]);for(const D of y)a(D instanceof Error||D instanceof d.Report,"error() must return an Error object")}else y=[b._flags.error];if(m===void 0){const D=p.default("default",m,y,v);x.mainstay.tracer.value(x,"default",m,D),m=D}if(b._flags.cast&&m!==void 0){const D=b._definition.cast[b._flags.cast];if(D.from(m)){const R=D.to(m,v);x.mainstay.tracer.value(x,"cast",m,R,b._flags.cast),m=R}}if(b.$_terms.externals&&w.externals&&w._externals!==!1)for(const{method:D}of b.$_terms.externals)x.mainstay.externals.push({method:D,schema:b,state:x,label:d.label(b._flags,x,w)});const C={value:m,errors:y.length?y:null};return b._flags.result&&(C.value=b._flags.result==="strip"?void 0:v.original,x.mainstay.tracer.value(x,b._flags.result,m,C.value),x.shadow(m,b._flags.result)),b._cache&&w.cache!==!1&&!b._refs.length&&b._cache.set(v.original,C),m===void 0||C.errors||b._flags.artifact===void 0||(x.mainstay.artifacts=x.mainstay.artifacts||new Map,x.mainstay.artifacts.has(b._flags.artifact)||x.mainstay.artifacts.set(b._flags.artifact,[]),x.mainstay.artifacts.get(b._flags.artifact).push(x.path)),C},p.prefs=function(m,y){const v=y===h.defaults;return v&&m._preferences[h.symbols.prefs]?m._preferences[h.symbols.prefs]:(y=h.preferences(y,m._preferences),v&&(m._preferences[h.symbols.prefs]=y),y)},p.default=function(m,y,v,b){const{schema:x,state:w,prefs:C}=b,D=x._flags[m];if(C.noDefaults||D===void 0)return y;if(w.mainstay.tracer.log(x,w,"rule",m,"full"),!D)return D;if(typeof D=="function"){const R=D.length?[l(w.ancestors[0]),b]:[];try{return D(...R)}catch(A){return void v.push(x.$_createError(`any.${m}`,null,{error:A},w,C))}}return typeof D!="object"?D:D[h.symbols.literal]?D.literal:h.isResolvable(D)?D.resolve(y,w,C):l(D)},p.trim=function(m,y){if(typeof m!="string")return m;const v=y.$_getRule("trim");return v&&v.args.enabled?m.trim():m},p.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},p.errorsArray=function(){const m=[];return m[h.symbols.errors]=!0,m}},2036:(r,s,o)=>{const a=o(375),l=o(9474),u=o(8160),c={};r.exports=c.Values=class{constructor(h,d){this._values=new Set(h),this._refs=new Set(d),this._lowercase=c.lowercases(h),this._override=!1}get length(){return this._values.size+this._refs.size}add(h,d){u.isResolvable(h)?this._refs.has(h)||(this._refs.add(h),d&&d.register(h)):this.has(h,null,null,!1)||(this._values.add(h),typeof h=="string"&&this._lowercase.set(h.toLowerCase(),h))}static merge(h,d,f){if(h=h||new c.Values,d){if(d._override)return d.clone();for(const p of[...d._values,...d._refs])h.add(p)}if(f)for(const p of[...f._values,...f._refs])h.remove(p);return h.length?h:null}remove(h){u.isResolvable(h)?this._refs.delete(h):(this._values.delete(h),typeof h=="string"&&this._lowercase.delete(h.toLowerCase()))}has(h,d,f,p){return!!this.get(h,d,f,p)}get(h,d,f,p){if(!this.length)return!1;if(this._values.has(h))return{value:h};if(typeof h=="string"&&h&&p){const m=this._lowercase.get(h.toLowerCase());if(m)return{value:m}}if(!this._refs.size&&typeof h!="object")return!1;if(typeof h=="object"){for(const m of this._values)if(l(m,h))return{value:m}}if(d)for(const m of this._refs){const y=m.resolve(h,d,f,null,{in:!0});if(y===void 0)continue;const v=m.in&&typeof y=="object"?Array.isArray(y)?y:Object.keys(y):[y];for(const b of v)if(typeof b==typeof h){if(p&&h&&typeof h=="string"){if(b.toLowerCase()===h.toLowerCase())return{value:b,ref:m}}else if(l(b,h))return{value:b,ref:m}}}return!1}override(){this._override=!0}values(h){if(h&&h.display){const d=[];for(const f of[...this._values,...this._refs])f!==void 0&&d.push(f);return d}return Array.from([...this._values,...this._refs])}clone(){const h=new c.Values(this._values,this._refs);return h._override=this._override,h}concat(h){a(!h._override,"Cannot concat override set of values");const d=new c.Values([...this._values,...h._values],[...this._refs,...h._refs]);return d._override=this._override,d}describe(){const h=[];this._override&&h.push({override:!0});for(const d of this._values.values())h.push(d&&typeof d=="object"?{value:d}:d);for(const d of this._refs.values())h.push(d.describe());return h}},c.Values.prototype[u.symbols.values]=!0,c.Values.prototype.slice=c.Values.prototype.clone,c.lowercases=function(h){const d=new Map;if(h)for(const f of h)typeof f=="string"&&d.set(f.toLowerCase(),f);return d}},978:(r,s,o)=>{const a=o(375),l=o(8571),u=o(1687),c=o(9621),h={};r.exports=function(d,f,p={}){if(a(d&&typeof d=="object","Invalid defaults value: must be an object"),a(!f||f===!0||typeof f=="object","Invalid source value: must be true, falsy or an object"),a(typeof p=="object","Invalid options: must be an object"),!f)return null;if(p.shallow)return h.applyToDefaultsWithShallow(d,f,p);const m=l(d);if(f===!0)return m;const y=p.nullOverride!==void 0&&p.nullOverride;return u(m,f,{nullOverride:y,mergeArrays:!1})},h.applyToDefaultsWithShallow=function(d,f,p){const m=p.shallow;a(Array.isArray(m),"Invalid keys");const y=new Map,v=f===!0?null:new Set;for(let w of m){w=Array.isArray(w)?w:w.split(".");const C=c(d,w);C&&typeof C=="object"?y.set(C,v&&c(f,w)||C):v&&v.add(w)}const b=l(d,{},y);if(!v)return b;for(const w of v)h.reachCopy(b,f,w);const x=p.nullOverride!==void 0&&p.nullOverride;return u(b,f,{nullOverride:x,mergeArrays:!1})},h.reachCopy=function(d,f,p){for(const v of p){if(!(v in f))return;const b=f[v];if(typeof b!="object"||b===null)return;f=b}const m=f;let y=d;for(let v=0;v<p.length-1;++v){const b=p[v];typeof y[b]!="object"&&(y[b]={}),y=y[b]}y[p[p.length-1]]=m}},375:(r,s,o)=>{const a=o(7916);r.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(r,s,o)=>{const a=o(9621),l=o(4277),u=o(7043),c={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};r.exports=c.clone=function(h,d={},f=null){if(typeof h!="object"||h===null)return h;let p=c.clone,m=f;if(d.shallow){if(d.shallow!==!0)return c.cloneWithShallow(h,d);p=x=>x}else if(m){const x=m.get(h);if(x)return x}else m=new Map;const y=l.getInternalProto(h);if(y===l.buffer)return!1;if(y===l.date)return new Date(h.getTime());if(y===l.regex)return new RegExp(h);const v=c.base(h,y,d);if(v===h)return h;if(m&&m.set(h,v),y===l.set)for(const x of h)v.add(p(x,d,m));else if(y===l.map)for(const[x,w]of h)v.set(x,p(w,d,m));const b=u.keys(h,d);for(const x of b){if(x==="__proto__")continue;if(y===l.array&&x==="length"){v.length=h.length;continue}const w=Object.getOwnPropertyDescriptor(h,x);w?w.get||w.set?Object.defineProperty(v,x,w):w.enumerable?v[x]=p(h[x],d,m):Object.defineProperty(v,x,{enumerable:!1,writable:!0,configurable:!0,value:p(h[x],d,m)}):Object.defineProperty(v,x,{enumerable:!0,writable:!0,configurable:!0,value:p(h[x],d,m)})}return v},c.cloneWithShallow=function(h,d){const f=d.shallow;(d=Object.assign({},d)).shallow=!1;const p=new Map;for(const m of f){const y=a(h,m);typeof y!="object"&&typeof y!="function"||p.set(y,y)}return c.clone(h,d,p)},c.base=function(h,d,f){if(f.prototype===!1)return c.needsProtoHack.has(d)?new d.constructor:d===l.array?[]:{};const p=Object.getPrototypeOf(h);if(p&&p.isImmutable)return h;if(d===l.array){const m=[];return p!==d&&Object.setPrototypeOf(m,p),m}if(c.needsProtoHack.has(d)){const m=new p.constructor;return p!==d&&Object.setPrototypeOf(m,p),m}return Object.create(p)}},9474:(r,s,o)=>{const a=o(4277),l={mismatched:null};r.exports=function(u,c,h){return h=Object.assign({prototype:!0},h),!!l.isDeepEqual(u,c,h,[])},l.isDeepEqual=function(u,c,h,d){if(u===c)return u!==0||1/u==1/c;const f=typeof u;if(f!==typeof c||u===null||c===null)return!1;if(f==="function"){if(!h.deepFunction||u.toString()!==c.toString())return!1}else if(f!=="object")return u!=u&&c!=c;const p=l.getSharedType(u,c,!!h.prototype);switch(p){case a.buffer:return!1;case a.promise:return u===c;case a.regex:return u.toString()===c.toString();case l.mismatched:return!1}for(let m=d.length-1;m>=0;--m)if(d[m].isSame(u,c))return!0;d.push(new l.SeenEntry(u,c));try{return!!l.isDeepEqualObj(p,u,c,h,d)}finally{d.pop()}},l.getSharedType=function(u,c,h){if(h)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(c)?l.mismatched:a.getInternalProto(u);const d=a.getInternalProto(u);return d!==a.getInternalProto(c)?l.mismatched:d},l.valueOf=function(u){const c=u.valueOf;if(c===void 0)return u;try{return c.call(u)}catch(h){return h}},l.hasOwnEnumerableProperty=function(u,c){return Object.prototype.propertyIsEnumerable.call(u,c)},l.isSetSimpleEqual=function(u,c){for(const h of Set.prototype.values.call(u))if(!Set.prototype.has.call(c,h))return!1;return!0},l.isDeepEqualObj=function(u,c,h,d,f){const{isDeepEqual:p,valueOf:m,hasOwnEnumerableProperty:y}=l,{keys:v,getOwnPropertySymbols:b}=Object;if(u===a.array){if(!d.part){if(c.length!==h.length)return!1;for(let R=0;R<c.length;++R)if(!p(c[R],h[R],d,f))return!1;return!0}for(const R of c)for(const A of h)if(p(R,A,d,f))return!0}else if(u===a.set){if(c.size!==h.size)return!1;if(!l.isSetSimpleEqual(c,h)){const R=new Set(Set.prototype.values.call(h));for(const A of Set.prototype.values.call(c)){if(R.delete(A))continue;let L=!1;for(const O of R)if(p(A,O,d,f)){R.delete(O),L=!0;break}if(!L)return!1}}}else if(u===a.map){if(c.size!==h.size)return!1;for(const[R,A]of Map.prototype.entries.call(c))if(A===void 0&&!Map.prototype.has.call(h,R)||!p(A,Map.prototype.get.call(h,R),d,f))return!1}else if(u===a.error&&(c.name!==h.name||c.message!==h.message))return!1;const x=m(c),w=m(h);if((c!==x||h!==w)&&!p(x,w,d,f))return!1;const C=v(c);if(!d.part&&C.length!==v(h).length&&!d.skip)return!1;let D=0;for(const R of C)if(d.skip&&d.skip.includes(R))h[R]===void 0&&++D;else if(!y(h,R)||!p(c[R],h[R],d,f))return!1;if(!d.part&&C.length-D!==v(h).length)return!1;if(d.symbols!==!1){const R=b(c),A=new Set(b(h));for(const L of R){if(!d.skip||!d.skip.includes(L)){if(y(c,L)){if(!y(h,L)||!p(c[L],h[L],d,f))return!1}else if(y(h,L))return!1}A.delete(L)}for(const L of A)if(y(h,L))return!1}return!0},l.SeenEntry=class{constructor(u,c){this.obj=u,this.ref=c}isSame(u,c){return this.obj===u&&this.ref===c}}},7916:(r,s,o)=>{const a=o(8761);r.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s.assert)}}},5277:r=>{const s={};r.exports=function(o){if(!o)return"";let a="";for(let l=0;l<o.length;++l){const u=o.charCodeAt(l);s.isSafe(u)?a+=o[l]:a+=s.escapeHtmlChar(u)}return a},s.escapeHtmlChar=function(o){return s.namedHtml.get(o)||(o>=256?"&#"+o+";":`&#x${o.toString(16).padStart(2,"0")};`)},s.isSafe=function(o){return s.safeCharCodes.has(o)},s.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),s.safeCharCodes=function(){const o=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&o.add(a);return o}()},6064:r=>{r.exports=function(s){return s.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:r=>{r.exports=function(){}},1687:(r,s,o)=>{const a=o(375),l=o(8571),u=o(7043),c={};r.exports=c.merge=function(h,d,f){if(a(h&&typeof h=="object","Invalid target value: must be an object"),a(d==null||typeof d=="object","Invalid source value: must be null, undefined, or an object"),!d)return h;if(f=Object.assign({nullOverride:!0,mergeArrays:!0},f),Array.isArray(d)){a(Array.isArray(h),"Cannot merge array onto an object"),f.mergeArrays||(h.length=0);for(let m=0;m<d.length;++m)h.push(l(d[m],{symbols:f.symbols}));return h}const p=u.keys(d,f);for(let m=0;m<p.length;++m){const y=p[m];if(y==="__proto__"||!Object.prototype.propertyIsEnumerable.call(d,y))continue;const v=d[y];if(v&&typeof v=="object"){if(h[y]===v)continue;!h[y]||typeof h[y]!="object"||Array.isArray(h[y])!==Array.isArray(v)||v instanceof Date||v instanceof RegExp?h[y]=l(v,{symbols:f.symbols}):c.merge(h[y],v,f)}else(v!=null||f.nullOverride)&&(h[y]=v)}return h}},9621:(r,s,o)=>{const a=o(375),l={};r.exports=function(u,c,h){if(c===!1||c==null)return u;typeof(h=h||{})=="string"&&(h={separator:h});const d=Array.isArray(c);a(!d||!h.separator,"Separator option is not valid for array-based chain");const f=d?c:c.split(h.separator||".");let p=u;for(let m=0;m<f.length;++m){let y=f[m];const v=h.iterables&&l.iterables(p);if(Array.isArray(p)||v==="set"){const b=Number(y);Number.isInteger(b)&&(y=b<0?p.length+b:b)}if(!p||typeof p=="function"&&h.functions===!1||!v&&p[y]===void 0){a(!h.strict||m+1===f.length,"Missing segment",y,"in reach path ",c),a(typeof p=="object"||h.functions===!0||typeof p!="function","Invalid segment",y,"in reach path ",c),p=h.default;break}p=v?v==="set"?[...p][y]:p.get(y):p[y]}return p},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:r=>{r.exports=function(...s){try{return JSON.stringify(...s)}catch(o){return"[Cannot display object: "+o.message+"]"}}},4277:(r,s)=>{const o={};s=r.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",s.error],["[object Map]",s.map],["[object Promise]",s.promise],["[object Set]",s.set],["[object WeakMap]",s.weakMap],["[object WeakSet]",s.weakSet]]),s.getInternalProto=function(a){if(Array.isArray(a))return s.array;if(a instanceof Date)return s.date;if(a instanceof RegExp)return s.regex;if(a instanceof Error)return s.error;const l=Object.prototype.toString.call(a);return o.typeMap.get(l)||s.generic}},7043:(r,s)=>{s.keys=function(o,a={}){return a.symbols!==!1?Reflect.ownKeys(o):Object.getOwnPropertyNames(o)}},3652:(r,s,o)=>{const a=o(375),l={};s.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,c){const h=[].concat((c=c||{}).before||[]),d=[].concat(c.after||[]),f=c.group||"?",p=c.sort||0;a(!h.includes(f),`Item cannot come before itself: ${f}`),a(!h.includes("?"),"Item cannot come before unassociated items"),a(!d.includes(f),`Item cannot come after itself: ${f}`),a(!d.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const m of u){const y={seq:this._items.length,sort:p,before:h,after:d,group:f,node:m};this._items.push(y)}if(!c.manual){const m=this._sort();a(m,"item",f!=="?"?`added into group ${f}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const h of u)if(h)for(const d of h._items)this._items.push(Object.assign({},d));this._items.sort(l.mergeSort);for(let h=0;h<this._items.length;++h)this._items[h].seq=h;const c=this._sort();return a(c,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},c=Object.create(null),h=Object.create(null);for(const y of this._items){const v=y.seq,b=y.group;h[b]=h[b]||[],h[b].push(v),u[v]=y.before;for(const x of y.after)c[x]=c[x]||[],c[x].push(v)}for(const y in u){const v=[];for(const b in u[y]){const x=u[y][b];h[x]=h[x]||[],v.push(...h[x])}u[y]=v}for(const y in c)if(h[y])for(const v of h[y])u[v].push(...c[y]);const d={};for(const y in u){const v=u[y];for(const b of v)d[b]=d[b]||[],d[b].push(y)}const f={},p=[];for(let y=0;y<this._items.length;++y){let v=y;if(d[y]){v=null;for(let b=0;b<this._items.length;++b){if(f[b]===!0)continue;d[b]||(d[b]=[]);const x=d[b].length;let w=0;for(let C=0;C<x;++C)f[d[b][C]]&&++w;if(w===x){v=b;break}}}v!==null&&(f[v]=!0,p.push(v))}if(p.length!==this._items.length)return!1;const m={};for(const y of this._items)m[y.seq]=y;this._items=[],this.nodes=[];for(const y of p){const v=m[y];this.nodes.push(v.node),this._items.push(v)}return!0}},l.mergeSort=(u,c)=>u.sort===c.sort?0:u.sort<c.sort?-1:1},5380:(r,s,o)=>{const a=o(443),l=o(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};s.analyze=function(c,h={}){if(!c)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof c!="string")throw new Error("Invalid input: domain must be a string");if(c.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(c)){if(h.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");c=c.normalize("NFC")}if(u.domainControlRx.test(c))return l.code("DOMAIN_INVALID_CHARS");c=u.punycode(c),h.allowFullyQualified&&c[c.length-1]==="."&&(c=c.slice(0,-1));const d=h.minDomainSegments||u.minDomainSegments,f=c.split(".");if(f.length<d)return l.code("DOMAIN_SEGMENTS_COUNT");if(h.maxDomainSegments&&f.length>h.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const p=h.tlds;if(p){const m=f[f.length-1].toLowerCase();if(p.deny&&p.deny.has(m)||p.allow&&!p.allow.has(m))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let m=0;m<f.length;++m){const y=f[m];if(!y.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(y.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(m<f.length-1){if(!u.domainSegmentRx.test(y))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(y))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},s.isValid=function(c,h){return!s.analyze(c,h)},u.punycode=function(c){c.includes("%")&&(c=c.replace(/%/g,"%25"));try{return new u.URL(`http://${c}`).host}catch{return c}}},1745:(r,s,o)=>{const a=o(9848),l=o(5380),u=o(2178),c={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};s.analyze=function(h,d){return c.email(h,d)},s.isValid=function(h,d){return!c.email(h,d)},c.email=function(h,d={}){if(typeof h!="string")throw new Error("Invalid input: email must be a string");if(!h)return u.code("EMPTY_STRING");const f=!c.nonAsciiRx.test(h);if(!f){if(d.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");h=h.normalize("NFC")}const p=h.split("@");if(p.length!==2)return p.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[m,y]=p;if(!m)return u.code("EMPTY_LOCAL");if(!d.ignoreLength){if(h.length>254)return u.code("ADDRESS_TOO_LONG");if(c.encoder.encode(m).length>64)return u.code("LOCAL_TOO_LONG")}return c.local(m,f)||l.analyze(y,d)},c.local=function(h,d){const f=h.split(".");for(const p of f){if(!p.length)return u.code("EMPTY_LOCAL_SEGMENT");if(d){if(!c.atextRx.test(p))return u.code("INVALID_LOCAL_CHARS")}else for(const m of p){if(c.atextRx.test(m))continue;const y=c.binary(m);if(!c.atomRx.test(y))return u.code("INVALID_LOCAL_CHARS")}}},c.binary=function(h){return Array.from(c.encoder.encode(h)).map(d=>String.fromCharCode(d)).join("")},c.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,c.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(r,s)=>{s.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},s.code=function(o){return{code:o,error:s.codes[o]}}},9959:(r,s,o)=>{const a=o(375),l=o(5752);s.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const c=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(c),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let h=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(h)||(h=[h]),a(h.length>=1,"options.version must have at least 1 version specified");for(let p=0;p<h.length;++p)a(typeof h[p]=="string","options.version must only contain strings"),h[p]=h[p].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(h[p]),"options.version contains unknown version "+h[p]+" - must be one of ipv4, ipv6, ipvfuture");h=Array.from(new Set(h));const d=`(?:${h.map(p=>{if(c==="forbidden")return l.ip[p];const m=`\\/${p==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return c==="required"?`${l.ip[p]}${m}`:`${l.ip[p]}(?:${m})?`}).join("|")})`,f=new RegExp(`^${d}$`);return{cidr:c,versions:h,regex:f,raw:d}}},5752:(r,s,o)=>{const a=o(375),l=o(6064),u={generate:function(){const c={},h="\\dA-Fa-f",d="["+h+"]",f="\\w-\\.~",p="!\\$&'\\(\\)\\*\\+,;=",m="%"+h,y=f+m+p+":@",v="["+y+"]",b="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";c.ipv4address="(?:"+b+"\\.){3}"+b;const x=d+"{1,4}",w="(?:"+x+":"+x+"|"+c.ipv4address+")",C="(?:"+x+":){6}"+w,D="::(?:"+x+":){5}"+w,R="(?:"+x+")?::(?:"+x+":){4}"+w,A="(?:(?:"+x+":){0,1}"+x+")?::(?:"+x+":){3}"+w,L="(?:(?:"+x+":){0,2}"+x+")?::(?:"+x+":){2}"+w,O="(?:(?:"+x+":){0,3}"+x+")?::"+x+":"+w,$="(?:(?:"+x+":){0,4}"+x+")?::"+w,q="(?:(?:"+x+":){0,5}"+x+")?::"+x,M="(?:(?:"+x+":){0,6}"+x+")?::";c.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",c.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",c.ipv6address="(?:"+C+"|"+D+"|"+R+"|"+A+"|"+L+"|"+O+"|"+$+"|"+q+"|"+M+")",c.ipvFuture="v"+d+"+\\.["+f+p+":]+",c.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",c.schemeRegex=new RegExp(c.scheme);const F="["+f+m+p+":]*",N="["+f+m+p+"]{1,255}",B="(?:\\[(?:"+c.ipv6address+"|"+c.ipvFuture+")\\]|"+c.ipv4address+"|"+N+")",W="(?:"+F+"@)?"+B+"(?::\\d*)?",K="(?:"+F+"@)?("+B+")(?::\\d*)?",ee=v+"*",te=v+"+",le="(?:\\/"+ee+")*",Q="\\/(?:"+te+le+")?",z=te+le,J="["+f+m+p+"@]+"+le,ye="(?:\\/\\/\\/"+ee+le+")";return c.hierPart="(?:(?:\\/\\/"+W+le+")|"+Q+"|"+z+"|"+ye+")",c.hierPartCapture="(?:(?:\\/\\/"+K+le+")|"+Q+"|"+z+")",c.relativeRef="(?:(?:\\/\\/"+W+le+")|"+Q+"|"+J+"|)",c.relativeRefCapture="(?:(?:\\/\\/"+K+le+")|"+Q+"|"+J+"|)",c.query="["+y+"\\/\\?]*(?=#|$)",c.queryWithSquareBrackets="["+y+"\\[\\]\\/\\?]*(?=#|$)",c.fragment="["+y+"\\/\\?]*",c}};u.rfc3986=u.generate(),s.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(c){const h=u.rfc3986,d="(?:\\?"+(c.allowQuerySquareBrackets?h.queryWithSquareBrackets:h.query)+")?(?:#"+h.fragment+")?",f=c.domain?h.relativeRefCapture:h.relativeRef;if(c.relativeOnly)return u.wrap(f+d);let p="";if(c.scheme){a(c.scheme instanceof RegExp||typeof c.scheme=="string"||Array.isArray(c.scheme),"scheme must be a RegExp, String, or Array");const v=[].concat(c.scheme);a(v.length>=1,"scheme must have at least 1 scheme specified");const b=[];for(let x=0;x<v.length;++x){const w=v[x];a(w instanceof RegExp||typeof w=="string","scheme at position "+x+" must be a RegExp or String"),w instanceof RegExp?b.push(w.source.toString()):(a(h.schemeRegex.test(w),"scheme at position "+x+" must be a valid scheme"),b.push(l(w)))}p=b.join("|")}const m="(?:"+(p?"(?:"+p+")":h.scheme)+":"+(c.domain?h.hierPartCapture:h.hierPart)+")",y=c.allowRelative?"(?:"+m+"|"+f+")":m;return u.wrap(y+d,p)},u.wrap=function(c,h){return{raw:c=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${c}`,regex:new RegExp(`^${c}$`),scheme:h}},u.uriRegex=u.createRegex({}),s.regex=function(c={}){return c.scheme||c.allowRelative||c.relativeOnly||c.allowQuerySquareBrackets||c.domain?u.createRegex(c):u.uriRegex}},1447:(r,s)=>{const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};s.Parser=class{constructor(a,l={}){if(!l[o.settings]&&l.constants)for(const u in l.constants){const c=l.constants[u];if(c!==null&&!["boolean","number","string"].includes(typeof c))throw new Error(`Formula constant ${u} contains invalid ${typeof c} value type`)}this.settings=l[o.settings]?l:Object.assign({[o.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",c=0,h=!1;const d=p=>{if(c)throw new Error("Formula missing closing parenthesis");const m=l.length?l[l.length-1]:null;if(h||u||p){if(m&&m.type==="reference"&&p===")")return m.type="function",m.value=this._subFormula(u,m.value),void(u="");if(p===")"){const y=new s.Parser(u,this.settings);l.push({type:"segment",value:y})}else if(h){if(h==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(o.operatorCharacters.includes(u))m&&m.type==="operator"&&o.operators.includes(m.value+u)?m.value+=u:l.push({type:"operator",value:u});else if(u.match(o.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const p of a)h?p===h?(d(),h=!1):u+=p:c?p==="("?(u+=p,++c):p===")"?(--c,c?u+=p:d(p)):u+=p:p in o.literals?h=o.literals[p]:p==="("?(d(),++c):o.operatorCharacters.includes(p)?(d(),u=p,d()):p!==" "?u+=p:d();d(),l=l.map((p,m)=>p.type!=="operator"||p.value!=="-"||m&&l[m-1].type!=="operator"?p:{type:"operator",value:"n"});let f=!1;for(const p of l){if(p.type==="operator"){if(o.operatorsPrefix.includes(p.value))continue;if(!f)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(p.value))throw new Error(`Formula contains an unknown operator ${p.value}`)}else if(f)throw new Error("Formula missing expected operator");f=!f}if(!f)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(p=>{if(p.type==="operator")return o.operatorsPrefix.includes(p.value)?p:p.value;if(p.type!=="reference")return p.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(p.value))throw new Error(`Formula contains invalid reference ${p.value}`);return this.settings.reference?this.settings.reference(p.value):o.reference(p.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let c=[];if(a){let h="",d=0,f=!1;const p=()=>{if(!h)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);c.push(h),h=""};for(let m=0;m<a.length;++m){const y=a[m];f?(h+=y,y===f&&(f=!1)):y in o.literals&&!d?(h+=y,f=o.literals[y]):y!==","||d?(h+=y,y==="("?++d:y===")"&&--d):p()}p()}return c=c.map(h=>new s.Parser(h,this.settings)),function(h){const d=[];for(const f of c)d.push(f.evaluate(h));return u.call(h,...d)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const c=l[u];if(c&&c.type==="operator"){const h=l[u+1];l.splice(u+1,1);const d=o.evaluate(h,a);l[u]=o.single(c.value,d)}}return o.operatorsOrder.forEach(u=>{for(let c=1;c<l.length-1;)if(u.includes(l[c])){const h=l[c],d=o.evaluate(l[c-1],a),f=o.evaluate(l[c+1],a);l.splice(c,2);const p=o.calculate(h,d,f);l[c-1]=p===0?0:p}else c+=2}),o.evaluate(l[0],a)}},s.Parser.prototype[o.symbol]=!0,o.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},o.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[o.symbol]?a.evaluate(l):a},o.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},o.calculate=function(a,l,u){if(a==="??")return o.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=o.exists(l)?l:"")+(o.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},o.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:r=>{r.exports=JSON.parse('{"version":"17.13.3"}')}},n={},function r(s){var o=n[s];if(o!==void 0)return o.exports;var a=n[s]={exports:{}};return t[s](a,a.exports,r),a.exports}(5107);var t,n})})(V3e);var B3t=V3e.exports;const ur=Ea(B3t),H3e={id:ur.string().required()},iwe={...H3e,as:ur.string().valid("img","video").required(),src:ur.string().uri().required(),position:ur.string().valid("center","left","right"),"data-parallax":ur.boolean().required()},W3e=ur.object({type:ur.string().required(),url:ur.string().when("type",{is:"STAC",then:ur.string().required(),otherwise:ur.string().optional()}),properties:ur.object({id:ur.string().required()}).unknown().required(),source:ur.object({type:ur.string().required()}).unknown().when("type",{is:"STAC",then:ur.optional(),otherwise:ur.required()})}).pattern(ur.string(),ur.any()),j3t=ur.object({type:ur.string().valid("group","Group"),properties:ur.object({id:ur.string().required()}).unknown().required(),layers:W3e}),V6={layers:ur.array().items(ur.object().keys({type:ur.string().required()}).unknown().custom((i,e)=>{const{error:t}=i.type==="Group"?j3t.validate(i):W3e.validate(i);return t?e.message(t.message):i},"Custom validator for map schema.")).optional(),center:ur.array().items(ur.number()).min(2).max(2).optional(),zoom:ur.number().optional()},X3e={config:ur.object({...V6}).unknown().optional()},Y3e={"eox-map":ur.object({...H3e,...V6,...X3e}).unknown()},z3t={hero:{img:ur.object({...iwe}).unknown(),video:ur.object({...iwe}).unknown()},tour:{"eox-map":Y3e["eox-map"],"section-step":ur.object({...V6,...X3e}).unknown()}};function G3t(i,e){var r,s;let t=[];for(const o of Object.keys(i)){const a=i[o];if(a.as){const l=a.mode?(r=z3t[a.mode])==null?void 0:r[a.as]:Y3e[a.as];l&&((s=l.validate(a,{abortEarly:!1}).error)==null||s.details.forEach(c=>{t.push({ref:`#${o}`,message:c.message}),console.error(`#${o}`,c.message)}))}}const n=(e.shadowRoot||e).querySelector("eox-storytelling-editor");setTimeout(()=>n==null?void 0:n.updateErrors(t),300)}var uO={exports:{}};/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */var nwe;function rwe(){return nwe||(nwe=1,function(i,e){(function(t,n){i.exports=n()})(Jr,function(){const{entries:t,setPrototypeOf:n,isFrozen:r,getPrototypeOf:s,getOwnPropertyDescriptor:o}=Object;let{freeze:a,seal:l,create:u}=Object,{apply:c,construct:h}=typeof Reflect<"u"&&Reflect;a||(a=function(pe){return pe}),l||(l=function(pe){return pe}),c||(c=function(pe,I,G){return pe.apply(I,G)}),h||(h=function(pe,I){return new pe(...I)});const d=A(Array.prototype.forEach),f=A(Array.prototype.pop),p=A(Array.prototype.push),m=A(String.prototype.toLowerCase),y=A(String.prototype.toString),v=A(String.prototype.match),b=A(String.prototype.replace),x=A(String.prototype.indexOf),w=A(String.prototype.trim),C=A(Object.prototype.hasOwnProperty),D=A(RegExp.prototype.test),R=L(TypeError);function A(re){return function(pe){for(var I=arguments.length,G=new Array(I>1?I-1:0),Z=1;Z<I;Z++)G[Z-1]=arguments[Z];return c(re,pe,G)}}function L(re){return function(){for(var pe=arguments.length,I=new Array(pe),G=0;G<pe;G++)I[G]=arguments[G];return h(re,I)}}function O(re,pe){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m;n&&n(re,null);let G=pe.length;for(;G--;){let Z=pe[G];if(typeof Z=="string"){const ie=I(Z);ie!==Z&&(r(pe)||(pe[G]=ie),Z=ie)}re[Z]=!0}return re}function $(re){for(let pe=0;pe<re.length;pe++)C(re,pe)||(re[pe]=null);return re}function q(re){const pe=u(null);for(const[I,G]of t(re))C(re,I)&&(Array.isArray(G)?pe[I]=$(G):G&&typeof G=="object"&&G.constructor===Object?pe[I]=q(G):pe[I]=G);return pe}function M(re,pe){for(;re!==null;){const G=o(re,pe);if(G){if(G.get)return A(G.get);if(typeof G.value=="function")return A(G.value)}re=s(re)}function I(){return null}return I}const F=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),N=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),B=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),W=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),K=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ee=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),te=a(["#text"]),le=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Q=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),J=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ye=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ne=l(/<%[\w\W]*|[\w\W]*%>/gm),Ge=l(/\${[\w\W]*}/gm),rt=l(/^data-[\-\w.\u00B7-\uFFFF]/),Be=l(/^aria-[\-\w]+$/),ze=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lt=l(/^(?:\w+script|data):/i),xt=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mt=l(/^html$/i),Ct=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var gi=Object.freeze({__proto__:null,MUSTACHE_EXPR:ye,ERB_EXPR:Ne,TMPLIT_EXPR:Ge,DATA_ATTR:rt,ARIA_ATTR:Be,IS_ALLOWED_URI:ze,IS_SCRIPT_OR_DATA:lt,ATTR_WHITESPACE:xt,DOCTYPE_NAME:Mt,CUSTOM_ELEMENT:Ct});const Wt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Qi=function(){return typeof window>"u"?null:window},He=function(pe,I){if(typeof pe!="object"||typeof pe.createPolicy!="function")return null;let G=null;const Z="data-tt-policy-suffix";I&&I.hasAttribute(Z)&&(G=I.getAttribute(Z));const ie="dompurify"+(G?"#"+G:"");try{return pe.createPolicy(ie,{createHTML(me){return me},createScriptURL(me){return me}})}catch{return console.warn("TrustedTypes policy "+ie+" could not be created."),null}};function ge(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qi();const pe=ae=>ge(ae);if(pe.version="3.1.6",pe.removed=[],!re||!re.document||re.document.nodeType!==Wt.document)return pe.isSupported=!1,pe;let{document:I}=re;const G=I,Z=G.currentScript,{DocumentFragment:ie,HTMLTemplateElement:me,Node:_e,Element:xe,NodeFilter:V,NamedNodeMap:oe=re.NamedNodeMap||re.MozNamedAttrMap,HTMLFormElement:fe,DOMParser:de,trustedTypes:Te}=re,Ae=xe.prototype,Se=M(Ae,"cloneNode"),Re=M(Ae,"remove"),Pe=M(Ae,"nextSibling"),We=M(Ae,"childNodes"),st=M(Ae,"parentNode");if(typeof me=="function"){const ae=I.createElement("template");ae.content&&ae.content.ownerDocument&&(I=ae.content.ownerDocument)}let ot,It="";const{implementation:ct,createNodeIterator:Ht,createDocumentFragment:Yt,getElementsByTagName:St}=I,{importNode:ti}=G;let Rt={};pe.isSupported=typeof t=="function"&&typeof st=="function"&&ct&&ct.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:xi,ERB_EXPR:Mi,TMPLIT_EXPR:on,DATA_ATTR:en,ARIA_ATTR:ri,IS_SCRIPT_OR_DATA:Ot,ATTR_WHITESPACE:Si,CUSTOM_ELEMENT:Bn}=gi;let{IS_ALLOWED_URI:En}=gi,fn=null;const hs=O({},[...F,...N,...B,...K,...te]);let pn=null;const zs=O({},[...le,...Q,...z,...J]);let Ii=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fo=null,ve=null,ke=!0,it=!0,Ke=!1,Et=!0,Qt=!1,Ti=!0,bt=!1,Qe=!1,_i=!1,bi=!1,Bt=!1,zt=!1,jn=!0,Ar=!1;const ci="user-content-";let Xe=!0,yt=!1,cn={},Zn=null;const zn=O({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Kn=null;const Pn=O({},["audio","video","img","source","image","track"]);let jt=null;const Yr=O({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gs="http://www.w3.org/1998/Math/MathML",ms="http://www.w3.org/2000/svg",Js="http://www.w3.org/1999/xhtml";let po=Js,na=!1,Za=null;const ra=O({},[gs,ms,Js],y);let Qs=null;const Ka=["application/xhtml+xml","text/html"],sa="text/html";let Nr=null,oa=null;const Fo=I.createElement("form"),go=function(ne){return ne instanceof RegExp||ne instanceof Function},mo=function(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(oa&&oa===ne)){if((!ne||typeof ne!="object")&&(ne={}),ne=q(ne),Qs=Ka.indexOf(ne.PARSER_MEDIA_TYPE)===-1?sa:ne.PARSER_MEDIA_TYPE,Nr=Qs==="application/xhtml+xml"?y:m,fn=C(ne,"ALLOWED_TAGS")?O({},ne.ALLOWED_TAGS,Nr):hs,pn=C(ne,"ALLOWED_ATTR")?O({},ne.ALLOWED_ATTR,Nr):zs,Za=C(ne,"ALLOWED_NAMESPACES")?O({},ne.ALLOWED_NAMESPACES,y):ra,jt=C(ne,"ADD_URI_SAFE_ATTR")?O(q(Yr),ne.ADD_URI_SAFE_ATTR,Nr):Yr,Kn=C(ne,"ADD_DATA_URI_TAGS")?O(q(Pn),ne.ADD_DATA_URI_TAGS,Nr):Pn,Zn=C(ne,"FORBID_CONTENTS")?O({},ne.FORBID_CONTENTS,Nr):zn,fo=C(ne,"FORBID_TAGS")?O({},ne.FORBID_TAGS,Nr):{},ve=C(ne,"FORBID_ATTR")?O({},ne.FORBID_ATTR,Nr):{},cn=C(ne,"USE_PROFILES")?ne.USE_PROFILES:!1,ke=ne.ALLOW_ARIA_ATTR!==!1,it=ne.ALLOW_DATA_ATTR!==!1,Ke=ne.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qt=ne.SAFE_FOR_TEMPLATES||!1,Ti=ne.SAFE_FOR_XML!==!1,bt=ne.WHOLE_DOCUMENT||!1,bi=ne.RETURN_DOM||!1,Bt=ne.RETURN_DOM_FRAGMENT||!1,zt=ne.RETURN_TRUSTED_TYPE||!1,_i=ne.FORCE_BODY||!1,jn=ne.SANITIZE_DOM!==!1,Ar=ne.SANITIZE_NAMED_PROPS||!1,Xe=ne.KEEP_CONTENT!==!1,yt=ne.IN_PLACE||!1,En=ne.ALLOWED_URI_REGEXP||ze,po=ne.NAMESPACE||Js,Ii=ne.CUSTOM_ELEMENT_HANDLING||{},ne.CUSTOM_ELEMENT_HANDLING&&go(ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ii.tagNameCheck=ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&go(ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ii.attributeNameCheck=ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&typeof ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ii.allowCustomizedBuiltInElements=ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qt&&(it=!1),Bt&&(bi=!0),cn&&(fn=O({},te),pn=[],cn.html===!0&&(O(fn,F),O(pn,le)),cn.svg===!0&&(O(fn,N),O(pn,Q),O(pn,J)),cn.svgFilters===!0&&(O(fn,B),O(pn,Q),O(pn,J)),cn.mathMl===!0&&(O(fn,K),O(pn,z),O(pn,J))),ne.ADD_TAGS&&(fn===hs&&(fn=q(fn)),O(fn,ne.ADD_TAGS,Nr)),ne.ADD_ATTR&&(pn===zs&&(pn=q(pn)),O(pn,ne.ADD_ATTR,Nr)),ne.ADD_URI_SAFE_ATTR&&O(jt,ne.ADD_URI_SAFE_ATTR,Nr),ne.FORBID_CONTENTS&&(Zn===zn&&(Zn=q(Zn)),O(Zn,ne.FORBID_CONTENTS,Nr)),Xe&&(fn["#text"]=!0),bt&&O(fn,["html","head","body"]),fn.table&&(O(fn,["tbody"]),delete fo.tbody),ne.TRUSTED_TYPES_POLICY){if(typeof ne.TRUSTED_TYPES_POLICY.createHTML!="function")throw R('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ne.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw R('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ot=ne.TRUSTED_TYPES_POLICY,It=ot.createHTML("")}else ot===void 0&&(ot=He(Te,Z)),ot!==null&&typeof It=="string"&&(It=ot.createHTML(""));a&&a(ne),oa=ne}},yo=O({},["mi","mo","mn","ms","mtext"]),aa=O({},["foreignobject","annotation-xml"]),Mu=O({},["title","style","font","a","script"]),No=O({},[...N,...B,...W]),eu=O({},[...K,...ee]),gl=function(ne){let Ie=st(ne);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:po,tagName:"template"});const Je=m(ne.tagName),Zt=m(Ie.tagName);return Za[ne.namespaceURI]?ne.namespaceURI===ms?Ie.namespaceURI===Js?Je==="svg":Ie.namespaceURI===gs?Je==="svg"&&(Zt==="annotation-xml"||yo[Zt]):!!No[Je]:ne.namespaceURI===gs?Ie.namespaceURI===Js?Je==="math":Ie.namespaceURI===ms?Je==="math"&&aa[Zt]:!!eu[Je]:ne.namespaceURI===Js?Ie.namespaceURI===ms&&!aa[Zt]||Ie.namespaceURI===gs&&!yo[Zt]?!1:!eu[Je]&&(Mu[Je]||!No[Je]):!!(Qs==="application/xhtml+xml"&&Za[ne.namespaceURI]):!1},Rr=function(ne){p(pe.removed,{element:ne});try{st(ne).removeChild(ne)}catch{Re(ne)}},vo=function(ne,Ie){try{p(pe.removed,{attribute:Ie.getAttributeNode(ne),from:Ie})}catch{p(pe.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(ne),ne==="is"&&!pn[ne])if(bi||Bt)try{Rr(Ie)}catch{}else try{Ie.setAttribute(ne,"")}catch{}},$o=function(ne){let Ie=null,Je=null;if(_i)ne="<remove></remove>"+ne;else{const Oi=v(ne,/^[\r\n\t ]+/);Je=Oi&&Oi[0]}Qs==="application/xhtml+xml"&&po===Js&&(ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ne+"</body></html>");const Zt=ot?ot.createHTML(ne):ne;if(po===Js)try{Ie=new de().parseFromString(Zt,Qs)}catch{}if(!Ie||!Ie.documentElement){Ie=ct.createDocument(po,"template",null);try{Ie.documentElement.innerHTML=na?It:Zt}catch{}}const Xt=Ie.body||Ie.documentElement;return ne&&Je&&Xt.insertBefore(I.createTextNode(Je),Xt.childNodes[0]||null),po===Js?St.call(Ie,bt?"html":"body")[0]:bt?Ie.documentElement:Xt},ml=function(ne){return Ht.call(ne.ownerDocument||ne,ne,V.SHOW_ELEMENT|V.SHOW_COMMENT|V.SHOW_TEXT|V.SHOW_PROCESSING_INSTRUCTION|V.SHOW_CDATA_SECTION,null)},tu=function(ne){return ne instanceof fe&&(typeof ne.nodeName!="string"||typeof ne.textContent!="string"||typeof ne.removeChild!="function"||!(ne.attributes instanceof oe)||typeof ne.removeAttribute!="function"||typeof ne.setAttribute!="function"||typeof ne.namespaceURI!="string"||typeof ne.insertBefore!="function"||typeof ne.hasChildNodes!="function")},Ja=function(ne){return typeof _e=="function"&&ne instanceof _e},eo=function(ne,Ie,Je){Rt[ne]&&d(Rt[ne],Zt=>{Zt.call(pe,Ie,Je,oa)})},la=function(ne){let Ie=null;if(eo("beforeSanitizeElements",ne,null),tu(ne))return Rr(ne),!0;const Je=Nr(ne.nodeName);if(eo("uponSanitizeElement",ne,{tagName:Je,allowedTags:fn}),ne.hasChildNodes()&&!Ja(ne.firstElementChild)&&D(/<[/\w]/g,ne.innerHTML)&&D(/<[/\w]/g,ne.textContent)||ne.nodeType===Wt.progressingInstruction||Ti&&ne.nodeType===Wt.comment&&D(/<[/\w]/g,ne.data))return Rr(ne),!0;if(!fn[Je]||fo[Je]){if(!fo[Je]&&yl(Je)&&(Ii.tagNameCheck instanceof RegExp&&D(Ii.tagNameCheck,Je)||Ii.tagNameCheck instanceof Function&&Ii.tagNameCheck(Je)))return!1;if(Xe&&!Zn[Je]){const Zt=st(ne)||ne.parentNode,Xt=We(ne)||ne.childNodes;if(Xt&&Zt){const Oi=Xt.length;for(let hn=Oi-1;hn>=0;--hn){const Rn=Se(Xt[hn],!0);Rn.__removalCount=(ne.__removalCount||0)+1,Zt.insertBefore(Rn,Pe(ne))}}}return Rr(ne),!0}return ne instanceof xe&&!gl(ne)||(Je==="noscript"||Je==="noembed"||Je==="noframes")&&D(/<\/no(script|embed|frames)/i,ne.innerHTML)?(Rr(ne),!0):(Qt&&ne.nodeType===Wt.text&&(Ie=ne.textContent,d([xi,Mi,on],Zt=>{Ie=b(Ie,Zt," ")}),ne.textContent!==Ie&&(p(pe.removed,{element:ne.cloneNode()}),ne.textContent=Ie)),eo("afterSanitizeElements",ne,null),!1)},ys=function(ne,Ie,Je){if(jn&&(Ie==="id"||Ie==="name")&&(Je in I||Je in Fo))return!1;if(!(it&&!ve[Ie]&&D(en,Ie))){if(!(ke&&D(ri,Ie))){if(!pn[Ie]||ve[Ie]){if(!(yl(ne)&&(Ii.tagNameCheck instanceof RegExp&&D(Ii.tagNameCheck,ne)||Ii.tagNameCheck instanceof Function&&Ii.tagNameCheck(ne))&&(Ii.attributeNameCheck instanceof RegExp&&D(Ii.attributeNameCheck,Ie)||Ii.attributeNameCheck instanceof Function&&Ii.attributeNameCheck(Ie))||Ie==="is"&&Ii.allowCustomizedBuiltInElements&&(Ii.tagNameCheck instanceof RegExp&&D(Ii.tagNameCheck,Je)||Ii.tagNameCheck instanceof Function&&Ii.tagNameCheck(Je))))return!1}else if(!jt[Ie]){if(!D(En,b(Je,Si,""))){if(!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&ne!=="script"&&x(Je,"data:")===0&&Kn[ne])){if(!(Ke&&!D(Ot,b(Je,Si,"")))){if(Je)return!1}}}}}}return!0},yl=function(ne){return ne!=="annotation-xml"&&v(ne,Bn)},iu=function(ne){eo("beforeSanitizeAttributes",ne,null);const{attributes:Ie}=ne;if(!Ie)return;const Je={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pn};let Zt=Ie.length;for(;Zt--;){const Xt=Ie[Zt],{name:Oi,namespaceURI:hn,value:Rn}=Xt,Cn=Nr(Oi);let kn=Oi==="value"?Rn:w(Rn);if(Je.attrName=Cn,Je.attrValue=kn,Je.keepAttr=!0,Je.forceKeepAttr=void 0,eo("uponSanitizeAttribute",ne,Je),kn=Je.attrValue,Ti&&D(/((--!?|])>)|<\/(style|title)/i,kn)){vo(Oi,ne);continue}if(Je.forceKeepAttr||(vo(Oi,ne),!Je.keepAttr))continue;if(!Et&&D(/\/>/i,kn)){vo(Oi,ne);continue}Qt&&d([xi,Mi,on],Sn=>{kn=b(kn,Sn," ")});const vs=Nr(ne.nodeName);if(ys(vs,Cn,kn)){if(Ar&&(Cn==="id"||Cn==="name")&&(vo(Oi,ne),kn=ci+kn),ot&&typeof Te=="object"&&typeof Te.getAttributeType=="function"&&!hn)switch(Te.getAttributeType(vs,Cn)){case"TrustedHTML":{kn=ot.createHTML(kn);break}case"TrustedScriptURL":{kn=ot.createScriptURL(kn);break}}try{hn?ne.setAttributeNS(hn,Oi,kn):ne.setAttribute(Oi,kn),tu(ne)?Rr(ne):f(pe.removed)}catch{}}}eo("afterSanitizeAttributes",ne,null)},_o=function ae(ne){let Ie=null;const Je=ml(ne);for(eo("beforeSanitizeShadowDOM",ne,null);Ie=Je.nextNode();)eo("uponSanitizeShadowNode",Ie,null),!la(Ie)&&(Ie.content instanceof ie&&ae(Ie.content),iu(Ie));eo("afterSanitizeShadowDOM",ne,null)};return pe.sanitize=function(ae){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,Je=null,Zt=null,Xt=null;if(na=!ae,na&&(ae="<!-->"),typeof ae!="string"&&!Ja(ae))if(typeof ae.toString=="function"){if(ae=ae.toString(),typeof ae!="string")throw R("dirty is not a string, aborting")}else throw R("toString is not a function");if(!pe.isSupported)return ae;if(Qe||mo(ne),pe.removed=[],typeof ae=="string"&&(yt=!1),yt){if(ae.nodeName){const Rn=Nr(ae.nodeName);if(!fn[Rn]||fo[Rn])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(ae instanceof _e)Ie=$o("<!---->"),Je=Ie.ownerDocument.importNode(ae,!0),Je.nodeType===Wt.element&&Je.nodeName==="BODY"||Je.nodeName==="HTML"?Ie=Je:Ie.appendChild(Je);else{if(!bi&&!Qt&&!bt&&ae.indexOf("<")===-1)return ot&&zt?ot.createHTML(ae):ae;if(Ie=$o(ae),!Ie)return bi?null:zt?It:""}Ie&&_i&&Rr(Ie.firstChild);const Oi=ml(yt?ae:Ie);for(;Zt=Oi.nextNode();)la(Zt)||(Zt.content instanceof ie&&_o(Zt.content),iu(Zt));if(yt)return ae;if(bi){if(Bt)for(Xt=Yt.call(Ie.ownerDocument);Ie.firstChild;)Xt.appendChild(Ie.firstChild);else Xt=Ie;return(pn.shadowroot||pn.shadowrootmode)&&(Xt=ti.call(G,Xt,!0)),Xt}let hn=bt?Ie.outerHTML:Ie.innerHTML;return bt&&fn["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&D(Mt,Ie.ownerDocument.doctype.name)&&(hn="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+hn),Qt&&d([xi,Mi,on],Rn=>{hn=b(hn,Rn," ")}),ot&&zt?ot.createHTML(hn):hn},pe.setConfig=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mo(ae),Qe=!0},pe.clearConfig=function(){oa=null,Qe=!1},pe.isValidAttribute=function(ae,ne,Ie){oa||mo({});const Je=Nr(ae),Zt=Nr(ne);return ys(Je,Zt,Ie)},pe.addHook=function(ae,ne){typeof ne=="function"&&(Rt[ae]=Rt[ae]||[],p(Rt[ae],ne))},pe.removeHook=function(ae){if(Rt[ae])return f(Rt[ae])},pe.removeHooks=function(ae){Rt[ae]&&(Rt[ae]=[])},pe.removeAllHooks=function(){Rt={}},pe}var se=ge();return se})}(uO)),uO.exports}var U3t=window.DOMPurify||(window.DOMPurify=rwe().default||rwe());const q3t=Ea(U3t);function Z3e(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function V3t(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const H3t=[["ß","ss"],["ẞ","Ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["ъе","ye"],["Ъе","Ye"],["ъЕ","yE"],["ЪЕ","YE"],["Е","E"],["е","e"],["Ё","Yo"],["ё","yo"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["ый","iy"],["Ый","Iy"],["ЫЙ","IY"],["ыЙ","iY"],["Й","Y"],["й","y"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","Kh"],["х","kh"],["Ц","Ts"],["ц","ts"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Sch"],["щ","sch"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","S"],["ç","c"],["Ç","C"],["ğ","g"],["Ğ","G"],["ı","i"],["İ","I"],["ա","a"],["Ա","A"],["բ","b"],["Բ","B"],["գ","g"],["Գ","G"],["դ","d"],["Դ","D"],["ե","ye"],["Ե","Ye"],["զ","z"],["Զ","Z"],["է","e"],["Է","E"],["ը","y"],["Ը","Y"],["թ","t"],["Թ","T"],["ժ","zh"],["Ժ","Zh"],["ի","i"],["Ի","I"],["լ","l"],["Լ","L"],["խ","kh"],["Խ","Kh"],["ծ","ts"],["Ծ","Ts"],["կ","k"],["Կ","K"],["հ","h"],["Հ","H"],["ձ","dz"],["Ձ","Dz"],["ղ","gh"],["Ղ","Gh"],["ճ","tch"],["Ճ","Tch"],["մ","m"],["Մ","M"],["յ","y"],["Յ","Y"],["ն","n"],["Ն","N"],["շ","sh"],["Շ","Sh"],["ո","vo"],["Ո","Vo"],["չ","ch"],["Չ","Ch"],["պ","p"],["Պ","P"],["ջ","j"],["Ջ","J"],["ռ","r"],["Ռ","R"],["ս","s"],["Ս","S"],["վ","v"],["Վ","V"],["տ","t"],["Տ","T"],["ր","r"],["Ր","R"],["ց","c"],["Ց","C"],["ու","u"],["ՈՒ","U"],["Ու","U"],["փ","p"],["Փ","P"],["ք","q"],["Ք","Q"],["օ","o"],["Օ","O"],["ֆ","f"],["Ֆ","F"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","K"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"],["Ĳ","IJ"],["ĳ","ij"],["¢","c"],["¥","Y"],["߿","b"],["৳","t"],["૱","Bo"],["฿","B"],["₠","CE"],["₡","C"],["₢","Cr"],["₣","F"],["₥","m"],["₦","N"],["₧","Pt"],["₨","Rs"],["₩","W"],["₫","s"],["€","E"],["₭","K"],["₮","T"],["₯","Dp"],["₰","S"],["₱","P"],["₲","G"],["₳","A"],["₴","S"],["₵","C"],["₶","tt"],["₷","S"],["₸","T"],["₹","R"],["₺","L"],["₽","P"],["₿","B"],["﹩","$"],["￠","c"],["￥","Y"],["￦","W"],["𝐀","A"],["𝐁","B"],["𝐂","C"],["𝐃","D"],["𝐄","E"],["𝐅","F"],["𝐆","G"],["𝐇","H"],["𝐈","I"],["𝐉","J"],["𝐊","K"],["𝐋","L"],["𝐌","M"],["𝐍","N"],["𝐎","O"],["𝐏","P"],["𝐐","Q"],["𝐑","R"],["𝐒","S"],["𝐓","T"],["𝐔","U"],["𝐕","V"],["𝐖","W"],["𝐗","X"],["𝐘","Y"],["𝐙","Z"],["𝐚","a"],["𝐛","b"],["𝐜","c"],["𝐝","d"],["𝐞","e"],["𝐟","f"],["𝐠","g"],["𝐡","h"],["𝐢","i"],["𝐣","j"],["𝐤","k"],["𝐥","l"],["𝐦","m"],["𝐧","n"],["𝐨","o"],["𝐩","p"],["𝐪","q"],["𝐫","r"],["𝐬","s"],["𝐭","t"],["𝐮","u"],["𝐯","v"],["𝐰","w"],["𝐱","x"],["𝐲","y"],["𝐳","z"],["𝐴","A"],["𝐵","B"],["𝐶","C"],["𝐷","D"],["𝐸","E"],["𝐹","F"],["𝐺","G"],["𝐻","H"],["𝐼","I"],["𝐽","J"],["𝐾","K"],["𝐿","L"],["𝑀","M"],["𝑁","N"],["𝑂","O"],["𝑃","P"],["𝑄","Q"],["𝑅","R"],["𝑆","S"],["𝑇","T"],["𝑈","U"],["𝑉","V"],["𝑊","W"],["𝑋","X"],["𝑌","Y"],["𝑍","Z"],["𝑎","a"],["𝑏","b"],["𝑐","c"],["𝑑","d"],["𝑒","e"],["𝑓","f"],["𝑔","g"],["𝑖","i"],["𝑗","j"],["𝑘","k"],["𝑙","l"],["𝑚","m"],["𝑛","n"],["𝑜","o"],["𝑝","p"],["𝑞","q"],["𝑟","r"],["𝑠","s"],["𝑡","t"],["𝑢","u"],["𝑣","v"],["𝑤","w"],["𝑥","x"],["𝑦","y"],["𝑧","z"],["𝑨","A"],["𝑩","B"],["𝑪","C"],["𝑫","D"],["𝑬","E"],["𝑭","F"],["𝑮","G"],["𝑯","H"],["𝑰","I"],["𝑱","J"],["𝑲","K"],["𝑳","L"],["𝑴","M"],["𝑵","N"],["𝑶","O"],["𝑷","P"],["𝑸","Q"],["𝑹","R"],["𝑺","S"],["𝑻","T"],["𝑼","U"],["𝑽","V"],["𝑾","W"],["𝑿","X"],["𝒀","Y"],["𝒁","Z"],["𝒂","a"],["𝒃","b"],["𝒄","c"],["𝒅","d"],["𝒆","e"],["𝒇","f"],["𝒈","g"],["𝒉","h"],["𝒊","i"],["𝒋","j"],["𝒌","k"],["𝒍","l"],["𝒎","m"],["𝒏","n"],["𝒐","o"],["𝒑","p"],["𝒒","q"],["𝒓","r"],["𝒔","s"],["𝒕","t"],["𝒖","u"],["𝒗","v"],["𝒘","w"],["𝒙","x"],["𝒚","y"],["𝒛","z"],["𝒜","A"],["𝒞","C"],["𝒟","D"],["𝒢","g"],["𝒥","J"],["𝒦","K"],["𝒩","N"],["𝒪","O"],["𝒫","P"],["𝒬","Q"],["𝒮","S"],["𝒯","T"],["𝒰","U"],["𝒱","V"],["𝒲","W"],["𝒳","X"],["𝒴","Y"],["𝒵","Z"],["𝒶","a"],["𝒷","b"],["𝒸","c"],["𝒹","d"],["𝒻","f"],["𝒽","h"],["𝒾","i"],["𝒿","j"],["𝓀","h"],["𝓁","l"],["𝓂","m"],["𝓃","n"],["𝓅","p"],["𝓆","q"],["𝓇","r"],["𝓈","s"],["𝓉","t"],["𝓊","u"],["𝓋","v"],["𝓌","w"],["𝓍","x"],["𝓎","y"],["𝓏","z"],["𝓐","A"],["𝓑","B"],["𝓒","C"],["𝓓","D"],["𝓔","E"],["𝓕","F"],["𝓖","G"],["𝓗","H"],["𝓘","I"],["𝓙","J"],["𝓚","K"],["𝓛","L"],["𝓜","M"],["𝓝","N"],["𝓞","O"],["𝓟","P"],["𝓠","Q"],["𝓡","R"],["𝓢","S"],["𝓣","T"],["𝓤","U"],["𝓥","V"],["𝓦","W"],["𝓧","X"],["𝓨","Y"],["𝓩","Z"],["𝓪","a"],["𝓫","b"],["𝓬","c"],["𝓭","d"],["𝓮","e"],["𝓯","f"],["𝓰","g"],["𝓱","h"],["𝓲","i"],["𝓳","j"],["𝓴","k"],["𝓵","l"],["𝓶","m"],["𝓷","n"],["𝓸","o"],["𝓹","p"],["𝓺","q"],["𝓻","r"],["𝓼","s"],["𝓽","t"],["𝓾","u"],["𝓿","v"],["𝔀","w"],["𝔁","x"],["𝔂","y"],["𝔃","z"],["𝔄","A"],["𝔅","B"],["𝔇","D"],["𝔈","E"],["𝔉","F"],["𝔊","G"],["𝔍","J"],["𝔎","K"],["𝔏","L"],["𝔐","M"],["𝔑","N"],["𝔒","O"],["𝔓","P"],["𝔔","Q"],["𝔖","S"],["𝔗","T"],["𝔘","U"],["𝔙","V"],["𝔚","W"],["𝔛","X"],["𝔜","Y"],["𝔞","a"],["𝔟","b"],["𝔠","c"],["𝔡","d"],["𝔢","e"],["𝔣","f"],["𝔤","g"],["𝔥","h"],["𝔦","i"],["𝔧","j"],["𝔨","k"],["𝔩","l"],["𝔪","m"],["𝔫","n"],["𝔬","o"],["𝔭","p"],["𝔮","q"],["𝔯","r"],["𝔰","s"],["𝔱","t"],["𝔲","u"],["𝔳","v"],["𝔴","w"],["𝔵","x"],["𝔶","y"],["𝔷","z"],["𝔸","A"],["𝔹","B"],["𝔻","D"],["𝔼","E"],["𝔽","F"],["𝔾","G"],["𝕀","I"],["𝕁","J"],["𝕂","K"],["𝕃","L"],["𝕄","M"],["𝕆","N"],["𝕊","S"],["𝕋","T"],["𝕌","U"],["𝕍","V"],["𝕎","W"],["𝕏","X"],["𝕐","Y"],["𝕒","a"],["𝕓","b"],["𝕔","c"],["𝕕","d"],["𝕖","e"],["𝕗","f"],["𝕘","g"],["𝕙","h"],["𝕚","i"],["𝕛","j"],["𝕜","k"],["𝕝","l"],["𝕞","m"],["𝕟","n"],["𝕠","o"],["𝕡","p"],["𝕢","q"],["𝕣","r"],["𝕤","s"],["𝕥","t"],["𝕦","u"],["𝕧","v"],["𝕨","w"],["𝕩","x"],["𝕪","y"],["𝕫","z"],["𝕬","A"],["𝕭","B"],["𝕮","C"],["𝕯","D"],["𝕰","E"],["𝕱","F"],["𝕲","G"],["𝕳","H"],["𝕴","I"],["𝕵","J"],["𝕶","K"],["𝕷","L"],["𝕸","M"],["𝕹","N"],["𝕺","O"],["𝕻","P"],["𝕼","Q"],["𝕽","R"],["𝕾","S"],["𝕿","T"],["𝖀","U"],["𝖁","V"],["𝖂","W"],["𝖃","X"],["𝖄","Y"],["𝖅","Z"],["𝖆","a"],["𝖇","b"],["𝖈","c"],["𝖉","d"],["𝖊","e"],["𝖋","f"],["𝖌","g"],["𝖍","h"],["𝖎","i"],["𝖏","j"],["𝖐","k"],["𝖑","l"],["𝖒","m"],["𝖓","n"],["𝖔","o"],["𝖕","p"],["𝖖","q"],["𝖗","r"],["𝖘","s"],["𝖙","t"],["𝖚","u"],["𝖛","v"],["𝖜","w"],["𝖝","x"],["𝖞","y"],["𝖟","z"],["𝖠","A"],["𝖡","B"],["𝖢","C"],["𝖣","D"],["𝖤","E"],["𝖥","F"],["𝖦","G"],["𝖧","H"],["𝖨","I"],["𝖩","J"],["𝖪","K"],["𝖫","L"],["𝖬","M"],["𝖭","N"],["𝖮","O"],["𝖯","P"],["𝖰","Q"],["𝖱","R"],["𝖲","S"],["𝖳","T"],["𝖴","U"],["𝖵","V"],["𝖶","W"],["𝖷","X"],["𝖸","Y"],["𝖹","Z"],["𝖺","a"],["𝖻","b"],["𝖼","c"],["𝖽","d"],["𝖾","e"],["𝖿","f"],["𝗀","g"],["𝗁","h"],["𝗂","i"],["𝗃","j"],["𝗄","k"],["𝗅","l"],["𝗆","m"],["𝗇","n"],["𝗈","o"],["𝗉","p"],["𝗊","q"],["𝗋","r"],["𝗌","s"],["𝗍","t"],["𝗎","u"],["𝗏","v"],["𝗐","w"],["𝗑","x"],["𝗒","y"],["𝗓","z"],["𝗔","A"],["𝗕","B"],["𝗖","C"],["𝗗","D"],["𝗘","E"],["𝗙","F"],["𝗚","G"],["𝗛","H"],["𝗜","I"],["𝗝","J"],["𝗞","K"],["𝗟","L"],["𝗠","M"],["𝗡","N"],["𝗢","O"],["𝗣","P"],["𝗤","Q"],["𝗥","R"],["𝗦","S"],["𝗧","T"],["𝗨","U"],["𝗩","V"],["𝗪","W"],["𝗫","X"],["𝗬","Y"],["𝗭","Z"],["𝗮","a"],["𝗯","b"],["𝗰","c"],["𝗱","d"],["𝗲","e"],["𝗳","f"],["𝗴","g"],["𝗵","h"],["𝗶","i"],["𝗷","j"],["𝗸","k"],["𝗹","l"],["𝗺","m"],["𝗻","n"],["𝗼","o"],["𝗽","p"],["𝗾","q"],["𝗿","r"],["𝘀","s"],["𝘁","t"],["𝘂","u"],["𝘃","v"],["𝘄","w"],["𝘅","x"],["𝘆","y"],["𝘇","z"],["𝘈","A"],["𝘉","B"],["𝘊","C"],["𝘋","D"],["𝘌","E"],["𝘍","F"],["𝘎","G"],["𝘏","H"],["𝘐","I"],["𝘑","J"],["𝘒","K"],["𝘓","L"],["𝘔","M"],["𝘕","N"],["𝘖","O"],["𝘗","P"],["𝘘","Q"],["𝘙","R"],["𝘚","S"],["𝘛","T"],["𝘜","U"],["𝘝","V"],["𝘞","W"],["𝘟","X"],["𝘠","Y"],["𝘡","Z"],["𝘢","a"],["𝘣","b"],["𝘤","c"],["𝘥","d"],["𝘦","e"],["𝘧","f"],["𝘨","g"],["𝘩","h"],["𝘪","i"],["𝘫","j"],["𝘬","k"],["𝘭","l"],["𝘮","m"],["𝘯","n"],["𝘰","o"],["𝘱","p"],["𝘲","q"],["𝘳","r"],["𝘴","s"],["𝘵","t"],["𝘶","u"],["𝘷","v"],["𝘸","w"],["𝘹","x"],["𝘺","y"],["𝘻","z"],["𝘼","A"],["𝘽","B"],["𝘾","C"],["𝘿","D"],["𝙀","E"],["𝙁","F"],["𝙂","G"],["𝙃","H"],["𝙄","I"],["𝙅","J"],["𝙆","K"],["𝙇","L"],["𝙈","M"],["𝙉","N"],["𝙊","O"],["𝙋","P"],["𝙌","Q"],["𝙍","R"],["𝙎","S"],["𝙏","T"],["𝙐","U"],["𝙑","V"],["𝙒","W"],["𝙓","X"],["𝙔","Y"],["𝙕","Z"],["𝙖","a"],["𝙗","b"],["𝙘","c"],["𝙙","d"],["𝙚","e"],["𝙛","f"],["𝙜","g"],["𝙝","h"],["𝙞","i"],["𝙟","j"],["𝙠","k"],["𝙡","l"],["𝙢","m"],["𝙣","n"],["𝙤","o"],["𝙥","p"],["𝙦","q"],["𝙧","r"],["𝙨","s"],["𝙩","t"],["𝙪","u"],["𝙫","v"],["𝙬","w"],["𝙭","x"],["𝙮","y"],["𝙯","z"],["𝙰","A"],["𝙱","B"],["𝙲","C"],["𝙳","D"],["𝙴","E"],["𝙵","F"],["𝙶","G"],["𝙷","H"],["𝙸","I"],["𝙹","J"],["𝙺","K"],["𝙻","L"],["𝙼","M"],["𝙽","N"],["𝙾","O"],["𝙿","P"],["𝚀","Q"],["𝚁","R"],["𝚂","S"],["𝚃","T"],["𝚄","U"],["𝚅","V"],["𝚆","W"],["𝚇","X"],["𝚈","Y"],["𝚉","Z"],["𝚊","a"],["𝚋","b"],["𝚌","c"],["𝚍","d"],["𝚎","e"],["𝚏","f"],["𝚐","g"],["𝚑","h"],["𝚒","i"],["𝚓","j"],["𝚔","k"],["𝚕","l"],["𝚖","m"],["𝚗","n"],["𝚘","o"],["𝚙","p"],["𝚚","q"],["𝚛","r"],["𝚜","s"],["𝚝","t"],["𝚞","u"],["𝚟","v"],["𝚠","w"],["𝚡","x"],["𝚢","y"],["𝚣","z"],["𝚤","l"],["𝚥","j"],["𝛢","A"],["𝛣","B"],["𝛤","G"],["𝛥","D"],["𝛦","E"],["𝛧","Z"],["𝛨","I"],["𝛩","TH"],["𝛪","I"],["𝛫","K"],["𝛬","L"],["𝛭","M"],["𝛮","N"],["𝛯","KS"],["𝛰","O"],["𝛱","P"],["𝛲","R"],["𝛳","TH"],["𝛴","S"],["𝛵","T"],["𝛶","Y"],["𝛷","F"],["𝛸","x"],["𝛹","PS"],["𝛺","O"],["𝛻","D"],["𝛼","a"],["𝛽","b"],["𝛾","g"],["𝛿","d"],["𝜀","e"],["𝜁","z"],["𝜂","i"],["𝜃","th"],["𝜄","i"],["𝜅","k"],["𝜆","l"],["𝜇","m"],["𝜈","n"],["𝜉","ks"],["𝜊","o"],["𝜋","p"],["𝜌","r"],["𝜍","s"],["𝜎","s"],["𝜏","t"],["𝜐","y"],["𝜑","f"],["𝜒","x"],["𝜓","ps"],["𝜔","o"],["𝜕","d"],["𝜖","E"],["𝜗","TH"],["𝜘","K"],["𝜙","f"],["𝜚","r"],["𝜛","p"],["𝜜","A"],["𝜝","V"],["𝜞","G"],["𝜟","D"],["𝜠","E"],["𝜡","Z"],["𝜢","I"],["𝜣","TH"],["𝜤","I"],["𝜥","K"],["𝜦","L"],["𝜧","M"],["𝜨","N"],["𝜩","KS"],["𝜪","O"],["𝜫","P"],["𝜬","S"],["𝜭","TH"],["𝜮","S"],["𝜯","T"],["𝜰","Y"],["𝜱","F"],["𝜲","X"],["𝜳","PS"],["𝜴","O"],["𝜵","D"],["𝜶","a"],["𝜷","v"],["𝜸","g"],["𝜹","d"],["𝜺","e"],["𝜻","z"],["𝜼","i"],["𝜽","th"],["𝜾","i"],["𝜿","k"],["𝝀","l"],["𝝁","m"],["𝝂","n"],["𝝃","ks"],["𝝄","o"],["𝝅","p"],["𝝆","r"],["𝝇","s"],["𝝈","s"],["𝝉","t"],["𝝊","y"],["𝝋","f"],["𝝌","x"],["𝝍","ps"],["𝝎","o"],["𝝏","a"],["𝝐","e"],["𝝑","i"],["𝝒","k"],["𝝓","f"],["𝝔","r"],["𝝕","p"],["𝝖","A"],["𝝗","B"],["𝝘","G"],["𝝙","D"],["𝝚","E"],["𝝛","Z"],["𝝜","I"],["𝝝","TH"],["𝝞","I"],["𝝟","K"],["𝝠","L"],["𝝡","M"],["𝝢","N"],["𝝣","KS"],["𝝤","O"],["𝝥","P"],["𝝦","R"],["𝝧","TH"],["𝝨","S"],["𝝩","T"],["𝝪","Y"],["𝝫","F"],["𝝬","X"],["𝝭","PS"],["𝝮","O"],["𝝯","D"],["𝝰","a"],["𝝱","v"],["𝝲","g"],["𝝳","d"],["𝝴","e"],["𝝵","z"],["𝝶","i"],["𝝷","th"],["𝝸","i"],["𝝹","k"],["𝝺","l"],["𝝻","m"],["𝝼","n"],["𝝽","ks"],["𝝾","o"],["𝝿","p"],["𝞀","r"],["𝞁","s"],["𝞂","s"],["𝞃","t"],["𝞄","y"],["𝞅","f"],["𝞆","x"],["𝞇","ps"],["𝞈","o"],["𝞉","a"],["𝞊","e"],["𝞋","i"],["𝞌","k"],["𝞍","f"],["𝞎","r"],["𝞏","p"],["𝞐","A"],["𝞑","V"],["𝞒","G"],["𝞓","D"],["𝞔","E"],["𝞕","Z"],["𝞖","I"],["𝞗","TH"],["𝞘","I"],["𝞙","K"],["𝞚","L"],["𝞛","M"],["𝞜","N"],["𝞝","KS"],["𝞞","O"],["𝞟","P"],["𝞠","S"],["𝞡","TH"],["𝞢","S"],["𝞣","T"],["𝞤","Y"],["𝞥","F"],["𝞦","X"],["𝞧","PS"],["𝞨","O"],["𝞩","D"],["𝞪","av"],["𝞫","g"],["𝞬","d"],["𝞭","e"],["𝞮","z"],["𝞯","i"],["𝞰","i"],["𝞱","th"],["𝞲","i"],["𝞳","k"],["𝞴","l"],["𝞵","m"],["𝞶","n"],["𝞷","ks"],["𝞸","o"],["𝞹","p"],["𝞺","r"],["𝞻","s"],["𝞼","s"],["𝞽","t"],["𝞾","y"],["𝞿","f"],["𝟀","x"],["𝟁","ps"],["𝟂","o"],["𝟃","a"],["𝟄","e"],["𝟅","i"],["𝟆","k"],["𝟇","f"],["𝟈","r"],["𝟉","p"],["𝟊","F"],["𝟋","f"],["⒜","(a)"],["⒝","(b)"],["⒞","(c)"],["⒟","(d)"],["⒠","(e)"],["⒡","(f)"],["⒢","(g)"],["⒣","(h)"],["⒤","(i)"],["⒥","(j)"],["⒦","(k)"],["⒧","(l)"],["⒨","(m)"],["⒩","(n)"],["⒪","(o)"],["⒫","(p)"],["⒬","(q)"],["⒭","(r)"],["⒮","(s)"],["⒯","(t)"],["⒰","(u)"],["⒱","(v)"],["⒲","(w)"],["⒳","(x)"],["⒴","(y)"],["⒵","(z)"],["Ⓐ","(A)"],["Ⓑ","(B)"],["Ⓒ","(C)"],["Ⓓ","(D)"],["Ⓔ","(E)"],["Ⓕ","(F)"],["Ⓖ","(G)"],["Ⓗ","(H)"],["Ⓘ","(I)"],["Ⓙ","(J)"],["Ⓚ","(K)"],["Ⓛ","(L)"],["Ⓝ","(N)"],["Ⓞ","(O)"],["Ⓟ","(P)"],["Ⓠ","(Q)"],["Ⓡ","(R)"],["Ⓢ","(S)"],["Ⓣ","(T)"],["Ⓤ","(U)"],["Ⓥ","(V)"],["Ⓦ","(W)"],["Ⓧ","(X)"],["Ⓨ","(Y)"],["Ⓩ","(Z)"],["ⓐ","(a)"],["ⓑ","(b)"],["ⓒ","(b)"],["ⓓ","(c)"],["ⓔ","(e)"],["ⓕ","(f)"],["ⓖ","(g)"],["ⓗ","(h)"],["ⓘ","(i)"],["ⓙ","(j)"],["ⓚ","(k)"],["ⓛ","(l)"],["ⓜ","(m)"],["ⓝ","(n)"],["ⓞ","(o)"],["ⓟ","(p)"],["ⓠ","(q)"],["ⓡ","(r)"],["ⓢ","(s)"],["ⓣ","(t)"],["ⓤ","(u)"],["ⓥ","(v)"],["ⓦ","(w)"],["ⓧ","(x)"],["ⓨ","(y)"],["ⓩ","(z)"],["Ċ","C"],["ċ","c"],["Ġ","G"],["ġ","g"],["Ħ","H"],["ħ","h"],["Ż","Z"],["ż","z"],["𝟎","0"],["𝟏","1"],["𝟐","2"],["𝟑","3"],["𝟒","4"],["𝟓","5"],["𝟔","6"],["𝟕","7"],["𝟖","8"],["𝟗","9"],["𝟘","0"],["𝟙","1"],["𝟚","2"],["𝟛","3"],["𝟜","4"],["𝟝","5"],["𝟞","6"],["𝟟","7"],["𝟠","8"],["𝟡","9"],["𝟢","0"],["𝟣","1"],["𝟤","2"],["𝟥","3"],["𝟦","4"],["𝟧","5"],["𝟨","6"],["𝟩","7"],["𝟪","8"],["𝟫","9"],["𝟬","0"],["𝟭","1"],["𝟮","2"],["𝟯","3"],["𝟰","4"],["𝟱","5"],["𝟲","6"],["𝟳","7"],["𝟴","8"],["𝟵","9"],["𝟶","0"],["𝟷","1"],["𝟸","2"],["𝟹","3"],["𝟺","4"],["𝟻","5"],["𝟼","6"],["𝟽","7"],["𝟾","8"],["𝟿","9"],["①","1"],["②","2"],["③","3"],["④","4"],["⑤","5"],["⑥","6"],["⑦","7"],["⑧","8"],["⑨","9"],["⑩","10"],["⑪","11"],["⑫","12"],["⑬","13"],["⑭","14"],["⑮","15"],["⑯","16"],["⑰","17"],["⑱","18"],["⑲","19"],["⑳","20"],["⑴","1"],["⑵","2"],["⑶","3"],["⑷","4"],["⑸","5"],["⑹","6"],["⑺","7"],["⑻","8"],["⑼","9"],["⑽","10"],["⑾","11"],["⑿","12"],["⒀","13"],["⒁","14"],["⒂","15"],["⒃","16"],["⒄","17"],["⒅","18"],["⒆","19"],["⒇","20"],["⒈","1."],["⒉","2."],["⒊","3."],["⒋","4."],["⒌","5."],["⒍","6."],["⒎","7."],["⒏","8."],["⒐","9."],["⒑","10."],["⒒","11."],["⒓","12."],["⒔","13."],["⒕","14."],["⒖","15."],["⒗","16."],["⒘","17."],["⒙","18."],["⒚","19."],["⒛","20."],["⓪","0"],["⓫","11"],["⓬","12"],["⓭","13"],["⓮","14"],["⓯","15"],["⓰","16"],["⓱","17"],["⓲","18"],["⓳","19"],["⓴","20"],["⓵","1"],["⓶","2"],["⓷","3"],["⓸","4"],["⓹","5"],["⓺","6"],["⓻","7"],["⓼","8"],["⓽","9"],["⓾","10"],["⓿","0"],["🙰","&"],["🙱","&"],["🙲","&"],["🙳","&"],["🙴","&"],["🙵","&"],["🙶",'"'],["🙷",'"'],["🙸",'"'],["‽","?!"],["🙹","?!"],["🙺","?!"],["🙻","?!"],["🙼","/"],["🙽","\\"],["🜇","AR"],["🜈","V"],["🜉","V"],["🜆","VR"],["🜅","VF"],["🜩","2"],["🜪","5"],["🝡","f"],["🝢","W"],["🝣","U"],["🝧","V"],["🝨","T"],["🝪","V"],["🝫","MB"],["🝬","VB"],["🝲","3B"],["🝳","3B"],["💯","100"],["🔙","BACK"],["🔚","END"],["🔛","ON!"],["🔜","SOON"],["🔝","TOP"],["🔞","18"],["🔤","abc"],["🔠","ABCD"],["🔡","abcd"],["🔢","1234"],["🔣","T&@%"],["#️⃣","#"],["*️⃣","*"],["0️⃣","0"],["1️⃣","1"],["2️⃣","2"],["3️⃣","3"],["4️⃣","4"],["5️⃣","5"],["6️⃣","6"],["7️⃣","7"],["8️⃣","8"],["9️⃣","9"],["🔟","10"],["🅰️","A"],["🅱️","B"],["🆎","AB"],["🆑","CL"],["🅾️","O"],["🅿","P"],["🆘","SOS"],["🅲","C"],["🅳","D"],["🅴","E"],["🅵","F"],["🅶","G"],["🅷","H"],["🅸","I"],["🅹","J"],["🅺","K"],["🅻","L"],["🅼","M"],["🅽","N"],["🆀","Q"],["🆁","R"],["🆂","S"],["🆃","T"],["🆄","U"],["🆅","V"],["🆆","W"],["🆇","X"],["🆈","Y"],["🆉","Z"]],W3t=(i,e)=>{for(const[t,n]of e)i=i.replace(new RegExp(V3t(t),"g"),n);return i};function X3t(i,e){if(typeof i!="string")throw new TypeError(`Expected a string, got \`${typeof i}\``);e={customReplacements:[],...e};const t=new Map([...H3t,...e.customReplacements]);return i=i.normalize(),i=W3t(i,t),i=i.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),i}const Y3t=[["&"," and "],["🦄"," unicorn "],["♥"," love "]],Z3t=i=>i.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),K3t=(i,e)=>{const t=Z3e(e);return i.replace(new RegExp(`${t}{2,}`,"g"),e).replace(new RegExp(`^${t}|${t}$`,"g"),"")},J3t=i=>{let e="a-z\\d";if(e+=i.lowercase?"":"A-Z",i.preserveCharacters.length>0)for(const t of i.preserveCharacters){if(t===i.separator)throw new Error(`The separator character \`${i.separator}\` cannot be included in preserved characters: ${i.preserveCharacters}`);e+=Z3e(t)}return new RegExp(`[^${e}]+`,"g")};function Q3t(i,e){if(typeof i!="string")throw new TypeError(`Expected a string, got \`${typeof i}\``);e={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...e};const t=e.preserveLeadingUnderscore&&i.startsWith("_"),n=e.preserveTrailingDash&&i.endsWith("-"),r=new Map([...Y3t,...e.customReplacements]);i=X3t(i,{customReplacements:r}),e.decamelize&&(i=Z3t(i));const s=J3t(e);return e.lowercase&&(i=i.toLowerCase()),i=i.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),i=i.replace(s,e.separator),i=i.replace(/\\/g,""),e.separator&&(i=K3t(i,e.separator)),t&&(i=`_${i}`),n&&(i=`${i}-`),i}function eOt(i){i.core.ruler.push("curly_attributes",tOt)}function tOt(i){i.md.nav=[],i.md.attrs={keys:[],sections:{}},i.md.sections={};const e=i.tokens,t=[];let n;const r={len:0,contents:[],types:{}},s=[];let o=[],a=!1,l=0,u=!1,c=0;for(let h=0;h<e.length;h++){const d=e[h];if(d.tag==="p"){const{shouldContinue:p}=iOt(e,e[h+1]);if(p){h=h+2;continue}}if((K3e(d.type)||N3e[d.type])&&eOe(r,d),d.tag==="h1"||d.tag==="h2"){const p=rOt(h,e,o,a,l,u,c,i,r);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,c=p.sectionStepsIndex}if(d.tag==="h3"){const p=sOt(h,e,o,a,l,u,c,i,r);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,c=p.sectionStepsIndex}if(d.type==="html_block"){const p=d.content.match(F3e);if(!p){d.level=d.level+1,o.push(d);continue}n=Q3e(r,p[1],p[2]),n&&Vv(n,p[3])&&t.unshift(h)}d.type==="inline"&&(o=nOt(d,r,s,o,l,c,u)),d.level=d.level+1,o.push(d);const f=Oc(r.last.attrs,"as");r.last.markup==="#"&&qIt.includes(f)&&(o=oOt(o,i,r),h++)}a&&(J3e(o,l),XF(o,l,i)),u&&XF(o,c,i),lOt(o,i.md),t.forEach(h=>e.splice(h,1)),i.tokens=o,i.md.nav=s||[]}function uf(i,e,t,n,r,s=null){const o=new i.Token(r,e,t);return o.attrs=s,o.nesting=n,o}function K3e(i){return i.match(/_(open|start)$/)||i==="fence"||i==="code_block"}function iOt(i,e){const t=/\r\n|\r|\n/,n=/mode\s*=\s*(['"])fallback\1/g;let r=!1;if(n.test((e==null?void 0:e.content)||""))if(t.test(e.content)){const s=e.content.split(t);s.shift(),e.content=s.join(/\n/),e.children[0].type==="text"&&e.children.shift(),e.children.shift()}else r=!0;return{shouldContinue:r}}function nOt(i,e,t,n,r,s,o){let a;const l=[];if(i.children.forEach((u,c)=>{(K3e(u.type)||N3e[u.type]||u.type==="code_inline")&&eOe(e,u);const h=u.content.match(F3e);if(h){const d=Q3e(e,h[1],h[2]);d&&Vv(d,h[3])&&(l.unshift(c),a&&aOt(a,"content"))}u.type==="text"&&(a=u)}),e.last.tag==="h3"&&o&&s!==-1){const u=n[s];u.section=n[r].id,Vv(u,e.last.attrStr)}if(e.last.tag==="h1"||e.last.tag==="h2"){const u=a&&a.content,c=Oc(e.last.attrs,"id"),h=Oc(e.last.attrs,"as"),d=Oc(e.last.attrs,"mode")||"container",f=Oc(e.last.attrs,"position")||"left",p=Q3t(u||""),m=c||p,y=`section-${m}`;e.last.tag==="h2"&&u&&t.push({title:u,id:y});const v=n[r],b=n[n.length-1],x=`.${d} .${f}`;v.attrs.push(["id",y]),v.id=y,h&&(b.tag=h,b.type="html_open",b.as=h,b.section=y,i.type="html_inline",i.content="",i.children=null,Vv(b,`${a?`title='${a.content}'`:""}${e.last.attrStr} #${m}`),v.mode=d,v.position=f,Vv(v,`#${y} .${v.attrs[0][1]} .section-custom`)),Vv(v,x)}return i.children&&l.forEach(u=>i.children.splice(u,1)),n}function rOt(i,e,t,n,r,s,o,a,l){const u=e[i];if(u.type==="heading_close"&&(u.tag=t[t.length-2].tag,u.type=t[t.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(n){s&&(XF(t,o,a),s=!1,o=-1);const c=t[r].tag;J3e(t,r),t.push(uf(a,c,-1,-1,"html_close")),n=!1,r=-1}n||(t.push(uf(a,"div",0,1,"html_open",[["class","section-wrap"]])),n=!0,r=t.length-1,l.last.as=!!e[i+1].content.includes("as="))}return{sectionStart:n,sectionStartIndex:r,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:t}}function sOt(i,e,t,n,r,s,o,a,l){return e[i].type==="heading_open"&&n&&t[r].mode==="tour"&&(s&&(t.push(uf(a,"section-step",-1,-1,"html_close")),s=!1,o=-1),s||(t.push(uf(a,"section-step",0,1,"html_open")),s=!0,o=t.length-1,l.last.as=!!e[i+1].content.includes("as="))),{sectionStart:n,sectionStartIndex:r,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:t}}function oOt(i,e,t){return i.push(uf(e,t.last.tag,1,-1,"html_close",null)),i.push(uf(e,"h1",1,1,"html_open",null)),i.push(uf(e,"h1",2,0,"html_inline",null)),i[i.length-1].content=Oc(t.last.attrs,"title"),i.push(uf(e,"h1",1,-1,"html_close",null)),i}function J3e(i,e){const t=i[e+1],n=Oc(t.attrs,"as"),r=Oc(t.attrs,"mode");n&&!r&&(i.splice(e+2,1),i.slice(e+3).forEach(s=>{s.level=1}),i.push(i[e+2]),i.splice(e+2,1))}function XF(i,e,t){const n=i[e].tag;i.push(uf(t,n,-1,-1,"html_close"))}function Oc(i,e){var t;return((t=(i||[]).find(n=>n[0]===e))==null?void 0:t[1])||null}function Q3e(i,e,t){if(!e)return i.last;t==="^"?t=1:typeof t=="string"?t=+t.slice(1):t=0;const r=(GIt[e.toLowerCase()]||[e.toLowerCase()]).find(o=>i.types[o]),s=i.types[r];if(s)return s[s.length-1-t]}function Vv(i,e=""){var s,o;let t;for(i.attrStr=e;e.length>0;)if(t=e.match(/^\s*\.([a-zA-Z0-9\-_]+)/))Fp(i,"class",t[1],{append:!0}),e=e.slice(t[0].length);else if(t=e.match(/^\s*#([a-zA-Z0-9\-_]+)/))Fp(i,"id",t[1]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))Fp(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))Fp(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))Fp(i,t[1],t[2]),e=e.slice(t[0].length);else if(t=e.match(/^\s*([a-zA-Z0-9\-_]+)/))Fp(i,t[1],""),e=e.slice(t[0].length);else if(t=e.match(/^\s+/))e=e.slice(t[0].length);else if(t=e.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))Fp(i,"as",t[1]),e=e.slice(t[0].length);else break;const n=Oc(i.attrs,"as"),r=Oc(i.attrs,"mode");return(o=(s=UIt[n])==null?void 0:s[r])==null||o.forEach(a=>{Oc(i.attrs,a[0])||(Fp(i,a[0],a[1]),e=e.slice(a[0].length))}),!0}function Fp(i,e,t,n={}){const r=i.attrIndex(e);e==="class"&&n.append&&r!==-1?i.attrs[r][1].includes(t)||(i.attrs[r][1]+=` ${t}`):r===-1?i.attrPush([e,t]):n.append?i.attrs[r][1]+=` ${t}`:i.attrs[r][1]=t}function eOe(i,e){const t=e.type.replace(/_(open|start)$/,"");i.types[t]||(i.types[t]=[]),i.types[t].push(e),i.last=e}function aOt(i,e){i[e]=i[e].replace(/\s*$/,"")}function lOt(i,e){i.forEach(t=>{const n=t.attrs||[];let r={};if(uOt(t,e),n.forEach(s=>{e.attrs.keys.includes(s[0])||e.attrs.keys.push(s[0]),r={...r,[s[0]]:U3e(s[1])},t.section&&(cOt(t,s,e),hOt(t,s,e))}),n.length&&t.section){const s=t.tag==="section-step",o=s?` ${t.tag} `:"",a=t.section+o,l=Object.keys(e.attrs.sections).filter(h=>!!h.startsWith(a)).length+1,c=a+(s?l:"");e.attrs.sections={...e.attrs.sections,[c]:{...r,...s?{as:t.tag,mode:"tour"}:{}}}}})}function uOt(i,e){var t,n;i.section&&(i.tag==="section-step"&&!e.sections[i.section].steps&&(e.sections[i.section].steps=[]),(i.markup==="#"||i.markup==="##")&&(e.sections[i.section]=e.sections[i.section]||{}),(n=(t=e.sections[i.section])==null?void 0:t.steps)==null||n.push({}))}function cOt(i,e,t){i.markup==="##"&&(t.sections[i.section]={[e[0]]:q6(e[1]),...t.sections[i.section]})}function hOt(i,e,t){if(i.tag==="section-step"){const n=t.sections[i.section].steps,r=n.length-1,s=n[r];n[r]={[e[0]]:q6(e[1]),...s}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function tOe(i){return typeof i>"u"||i===null}function dOt(i){return typeof i=="object"&&i!==null}function fOt(i){return Array.isArray(i)?i:tOe(i)?[]:[i]}function pOt(i,e){var t,n,r,s;if(e)for(s=Object.keys(e),t=0,n=s.length;t<n;t+=1)r=s[t],i[r]=e[r];return i}function gOt(i,e){var t="",n;for(n=0;n<e;n+=1)t+=i;return t}function mOt(i){return i===0&&Number.NEGATIVE_INFINITY===1/i}var yOt=tOe,vOt=dOt,_Ot=fOt,bOt=gOt,xOt=mOt,wOt=pOt,Ao={isNothing:yOt,isObject:vOt,toArray:_Ot,repeat:bOt,isNegativeZero:xOt,extend:wOt};function iOe(i,e){var t="",n=i.reason||"(unknown reason)";return i.mark?(i.mark.name&&(t+='in "'+i.mark.name+'" '),t+="("+(i.mark.line+1)+":"+(i.mark.column+1)+")",!e&&i.mark.snippet&&(t+=`

`+i.mark.snippet),n+" "+t):n}function F2(i,e){Error.call(this),this.name="YAMLException",this.reason=i,this.mark=e,this.message=iOe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}F2.prototype=Object.create(Error.prototype);F2.prototype.constructor=F2;F2.prototype.toString=function(e){return this.name+": "+iOe(this,e)};var ul=F2;function cO(i,e,t,n,r){var s="",o="",a=Math.floor(r/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),t-n>a&&(o=" ...",t=n+a-o.length),{str:s+i.slice(e,t).replace(/\t/g,"→")+o,pos:n-e+s.length}}function hO(i,e){return Ao.repeat(" ",e-i.length)+i}function EOt(i,e){if(e=Object.create(e||null),!i.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],r=[],s,o=-1;s=t.exec(i.buffer);)r.push(s.index),n.push(s.index+s[0].length),i.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",l,u,c=Math.min(i.line+e.linesAfter,r.length).toString().length,h=e.maxLength-(e.indent+c+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=cO(i.buffer,n[o-l],r[o-l],i.position-(n[o]-n[o-l]),h),a=Ao.repeat(" ",e.indent)+hO((i.line-l+1).toString(),c)+" | "+u.str+`
`+a;for(u=cO(i.buffer,n[o],r[o],i.position,h),a+=Ao.repeat(" ",e.indent)+hO((i.line+1).toString(),c)+" | "+u.str+`
`,a+=Ao.repeat("-",e.indent+c+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=r.length);l++)u=cO(i.buffer,n[o+l],r[o+l],i.position-(n[o]-n[o+l]),h),a+=Ao.repeat(" ",e.indent)+hO((i.line+l+1).toString(),c)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var COt=EOt,SOt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],TOt=["scalar","sequence","mapping"];function AOt(i){var e={};return i!==null&&Object.keys(i).forEach(function(t){i[t].forEach(function(n){e[String(n)]=t})}),e}function ROt(i,e){if(e=e||{},Object.keys(e).forEach(function(t){if(SOt.indexOf(t)===-1)throw new ul('Unknown option "'+t+'" is met in definition of "'+i+'" YAML type.')}),this.options=e,this.tag=i,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=AOt(e.styleAliases||null),TOt.indexOf(this.kind)===-1)throw new ul('Unknown kind "'+this.kind+'" is specified for "'+i+'" YAML type.')}var xa=ROt;function swe(i,e){var t=[];return i[e].forEach(function(n){var r=t.length;t.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(r=o)}),t[r]=n}),t}function kOt(){var i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function n(r){r.multi?(i.multi[r.kind].push(r),i.multi.fallback.push(r)):i[r.kind][r.tag]=i.fallback[r.tag]=r}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return i}function YF(i){return this.extend(i)}YF.prototype.extend=function(e){var t=[],n=[];if(e instanceof xa)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new ul("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof xa))throw new ul("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ul("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ul("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof xa))throw new ul("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(YF.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=swe(r,"implicit"),r.compiledExplicit=swe(r,"explicit"),r.compiledTypeMap=kOt(r.compiledImplicit,r.compiledExplicit),r};var nOe=YF,rOe=new xa("tag:yaml.org,2002:str",{kind:"scalar",construct:function(i){return i!==null?i:""}}),sOe=new xa("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(i){return i!==null?i:[]}}),oOe=new xa("tag:yaml.org,2002:map",{kind:"mapping",construct:function(i){return i!==null?i:{}}}),aOe=new nOe({explicit:[rOe,sOe,oOe]});function DOt(i){if(i===null)return!0;var e=i.length;return e===1&&i==="~"||e===4&&(i==="null"||i==="Null"||i==="NULL")}function LOt(){return null}function MOt(i){return i===null}var lOe=new xa("tag:yaml.org,2002:null",{kind:"scalar",resolve:DOt,construct:LOt,predicate:MOt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function IOt(i){if(i===null)return!1;var e=i.length;return e===4&&(i==="true"||i==="True"||i==="TRUE")||e===5&&(i==="false"||i==="False"||i==="FALSE")}function OOt(i){return i==="true"||i==="True"||i==="TRUE"}function POt(i){return Object.prototype.toString.call(i)==="[object Boolean]"}var uOe=new xa("tag:yaml.org,2002:bool",{kind:"scalar",resolve:IOt,construct:OOt,predicate:POt,represent:{lowercase:function(i){return i?"true":"false"},uppercase:function(i){return i?"TRUE":"FALSE"},camelcase:function(i){return i?"True":"False"}},defaultStyle:"lowercase"});function FOt(i){return 48<=i&&i<=57||65<=i&&i<=70||97<=i&&i<=102}function NOt(i){return 48<=i&&i<=55}function $Ot(i){return 48<=i&&i<=57}function BOt(i){if(i===null)return!1;var e=i.length,t=0,n=!1,r;if(!e)return!1;if(r=i[t],(r==="-"||r==="+")&&(r=i[++t]),r==="0"){if(t+1===e)return!0;if(r=i[++t],r==="b"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(!FOt(i.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}if(r==="o"){for(t++;t<e;t++)if(r=i[t],r!=="_"){if(!NOt(i.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}}if(r==="_")return!1;for(;t<e;t++)if(r=i[t],r!=="_"){if(!$Ot(i.charCodeAt(t)))return!1;n=!0}return!(!n||r==="_")}function jOt(i){var e=i,t=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function zOt(i){return Object.prototype.toString.call(i)==="[object Number]"&&i%1===0&&!Ao.isNegativeZero(i)}var cOe=new xa("tag:yaml.org,2002:int",{kind:"scalar",resolve:BOt,construct:jOt,predicate:zOt,represent:{binary:function(i){return i>=0?"0b"+i.toString(2):"-0b"+i.toString(2).slice(1)},octal:function(i){return i>=0?"0o"+i.toString(8):"-0o"+i.toString(8).slice(1)},decimal:function(i){return i.toString(10)},hexadecimal:function(i){return i>=0?"0x"+i.toString(16).toUpperCase():"-0x"+i.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GOt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function UOt(i){return!(i===null||!GOt.test(i)||i[i.length-1]==="_")}function qOt(i){var e,t;return e=i.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var VOt=/^[-+]?[0-9]+e/;function HOt(i,e){var t;if(isNaN(i))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===i)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===i)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ao.isNegativeZero(i))return"-0.0";return t=i.toString(10),VOt.test(t)?t.replace("e",".e"):t}function WOt(i){return Object.prototype.toString.call(i)==="[object Number]"&&(i%1!==0||Ao.isNegativeZero(i))}var hOe=new xa("tag:yaml.org,2002:float",{kind:"scalar",resolve:UOt,construct:qOt,predicate:WOt,represent:HOt,defaultStyle:"lowercase"}),dOe=aOe.extend({implicit:[lOe,uOe,cOe,hOe]}),fOe=dOe,pOe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),gOe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function XOt(i){return i===null?!1:pOe.exec(i)!==null||gOe.exec(i)!==null}function YOt(i){var e,t,n,r,s,o,a,l=0,u=null,c,h,d;if(e=pOe.exec(i),e===null&&(e=gOe.exec(i)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(t,n,r));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(c=+e[10],h=+(e[11]||0),u=(c*60+h)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(t,n,r,s,o,a,l)),u&&d.setTime(d.getTime()-u),d}function ZOt(i){return i.toISOString()}var mOe=new xa("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:XOt,construct:YOt,instanceOf:Date,represent:ZOt});function KOt(i){return i==="<<"||i===null}var yOe=new xa("tag:yaml.org,2002:merge",{kind:"scalar",resolve:KOt}),H6=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function JOt(i){if(i===null)return!1;var e,t,n=0,r=i.length,s=H6;for(t=0;t<r;t++)if(e=s.indexOf(i.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function QOt(i){var e,t,n=i.replace(/[\r\n=]/g,""),r=n.length,s=H6,o=0,a=[];for(e=0;e<r;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(e));return t=r%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}function ePt(i){var e="",t=0,n,r,s=i.length,o=H6;for(n=0;n<s;n++)n%3===0&&n&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+i[n];return r=s%3,r===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):r===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):r===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}function tPt(i){return Object.prototype.toString.call(i)==="[object Uint8Array]"}var vOe=new xa("tag:yaml.org,2002:binary",{kind:"scalar",resolve:JOt,construct:QOt,predicate:tPt,represent:ePt}),iPt=Object.prototype.hasOwnProperty,nPt=Object.prototype.toString;function rPt(i){if(i===null)return!0;var e=[],t,n,r,s,o,a=i;for(t=0,n=a.length;t<n;t+=1){if(r=a[t],o=!1,nPt.call(r)!=="[object Object]")return!1;for(s in r)if(iPt.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function sPt(i){return i!==null?i:[]}var _Oe=new xa("tag:yaml.org,2002:omap",{kind:"sequence",resolve:rPt,construct:sPt}),oPt=Object.prototype.toString;function aPt(i){if(i===null)return!0;var e,t,n,r,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(n=o[e],oPt.call(n)!=="[object Object]"||(r=Object.keys(n),r.length!==1))return!1;s[e]=[r[0],n[r[0]]]}return!0}function lPt(i){if(i===null)return[];var e,t,n,r,s,o=i;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)n=o[e],r=Object.keys(n),s[e]=[r[0],n[r[0]]];return s}var bOe=new xa("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:aPt,construct:lPt}),uPt=Object.prototype.hasOwnProperty;function cPt(i){if(i===null)return!0;var e,t=i;for(e in t)if(uPt.call(t,e)&&t[e]!==null)return!1;return!0}function hPt(i){return i!==null?i:{}}var xOe=new xa("tag:yaml.org,2002:set",{kind:"mapping",resolve:cPt,construct:hPt}),W6=fOe.extend({implicit:[mOe,yOe],explicit:[vOe,_Oe,bOe,xOe]}),jg=Object.prototype.hasOwnProperty,Ok=1,wOe=2,EOe=3,Pk=4,dO=1,dPt=2,owe=3,fPt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,pPt=/[\x85\u2028\u2029]/,gPt=/[,\[\]\{\}]/,COe=/^(?:!|!!|![a-z\-]+!)$/i,SOe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function awe(i){return Object.prototype.toString.call(i)}function Wh(i){return i===10||i===13}function A0(i){return i===9||i===32}function Ul(i){return i===9||i===32||i===10||i===13}function p_(i){return i===44||i===91||i===93||i===123||i===125}function mPt(i){var e;return 48<=i&&i<=57?i-48:(e=i|32,97<=e&&e<=102?e-97+10:-1)}function yPt(i){return i===120?2:i===117?4:i===85?8:0}function vPt(i){return 48<=i&&i<=57?i-48:-1}function lwe(i){return i===48?"\0":i===97?"\x07":i===98?"\b":i===116||i===9?"	":i===110?`
`:i===118?"\v":i===102?"\f":i===114?"\r":i===101?"\x1B":i===32?" ":i===34?'"':i===47?"/":i===92?"\\":i===78?"":i===95?" ":i===76?"\u2028":i===80?"\u2029":""}function _Pt(i){return i<=65535?String.fromCharCode(i):String.fromCharCode((i-65536>>10)+55296,(i-65536&1023)+56320)}var TOe=new Array(256),AOe=new Array(256);for(var Lv=0;Lv<256;Lv++)TOe[Lv]=lwe(Lv)?1:0,AOe[Lv]=lwe(Lv);function bPt(i,e){this.input=i,this.filename=e.filename||null,this.schema=e.schema||W6,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=i.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ROe(i,e){var t={name:i.filename,buffer:i.input.slice(0,-1),position:i.position,line:i.line,column:i.position-i.lineStart};return t.snippet=COt(t),new ul(e,t)}function pi(i,e){throw ROe(i,e)}function Fk(i,e){i.onWarning&&i.onWarning.call(null,ROe(i,e))}var uwe={YAML:function(e,t,n){var r,s,o;e.version!==null&&pi(e,"duplication of %YAML directive"),n.length!==1&&pi(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),r===null&&pi(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&pi(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Fk(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,s;n.length!==2&&pi(e,"TAG directive accepts exactly two arguments"),r=n[0],s=n[1],COe.test(r)||pi(e,"ill-formed tag handle (first argument) of the TAG directive"),jg.call(e.tagMap,r)&&pi(e,'there is a previously declared suffix for "'+r+'" tag handle'),SOe.test(s)||pi(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{pi(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function wg(i,e,t,n){var r,s,o,a;if(e<t){if(a=i.input.slice(e,t),n)for(r=0,s=a.length;r<s;r+=1)o=a.charCodeAt(r),o===9||32<=o&&o<=1114111||pi(i,"expected valid JSON character");else fPt.test(a)&&pi(i,"the stream contains non-printable characters");i.result+=a}}function cwe(i,e,t,n){var r,s,o,a;for(Ao.isObject(t)||pi(i,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(t),o=0,a=r.length;o<a;o+=1)s=r[o],jg.call(e,s)||(e[s]=t[s],n[s]=!0)}function g_(i,e,t,n,r,s,o,a,l){var u,c;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,c=r.length;u<c;u+=1)Array.isArray(r[u])&&pi(i,"nested arrays are not supported inside keys"),typeof r=="object"&&awe(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&awe(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,c=s.length;u<c;u+=1)cwe(i,e,s[u],t);else cwe(i,e,s,t);else!i.json&&!jg.call(t,r)&&jg.call(e,r)&&(i.line=o||i.line,i.lineStart=a||i.lineStart,i.position=l||i.position,pi(i,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete t[r];return e}function X6(i){var e;e=i.input.charCodeAt(i.position),e===10?i.position++:e===13?(i.position++,i.input.charCodeAt(i.position)===10&&i.position++):pi(i,"a line break is expected"),i.line+=1,i.lineStart=i.position,i.firstTabInLine=-1}function co(i,e,t){for(var n=0,r=i.input.charCodeAt(i.position);r!==0;){for(;A0(r);)r===9&&i.firstTabInLine===-1&&(i.firstTabInLine=i.position),r=i.input.charCodeAt(++i.position);if(e&&r===35)do r=i.input.charCodeAt(++i.position);while(r!==10&&r!==13&&r!==0);if(Wh(r))for(X6(i),r=i.input.charCodeAt(i.position),n++,i.lineIndent=0;r===32;)i.lineIndent++,r=i.input.charCodeAt(++i.position);else break}return t!==-1&&n!==0&&i.lineIndent<t&&Fk(i,"deficient indentation"),n}function QL(i){var e=i.position,t;return t=i.input.charCodeAt(e),!!((t===45||t===46)&&t===i.input.charCodeAt(e+1)&&t===i.input.charCodeAt(e+2)&&(e+=3,t=i.input.charCodeAt(e),t===0||Ul(t)))}function Y6(i,e){e===1?i.result+=" ":e>1&&(i.result+=Ao.repeat(`
`,e-1))}function xPt(i,e,t){var n,r,s,o,a,l,u,c,h=i.kind,d=i.result,f;if(f=i.input.charCodeAt(i.position),Ul(f)||p_(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(r=i.input.charCodeAt(i.position+1),Ul(r)||t&&p_(r)))return!1;for(i.kind="scalar",i.result="",s=o=i.position,a=!1;f!==0;){if(f===58){if(r=i.input.charCodeAt(i.position+1),Ul(r)||t&&p_(r))break}else if(f===35){if(n=i.input.charCodeAt(i.position-1),Ul(n))break}else{if(i.position===i.lineStart&&QL(i)||t&&p_(f))break;if(Wh(f))if(l=i.line,u=i.lineStart,c=i.lineIndent,co(i,!1,-1),i.lineIndent>=e){a=!0,f=i.input.charCodeAt(i.position);continue}else{i.position=o,i.line=l,i.lineStart=u,i.lineIndent=c;break}}a&&(wg(i,s,o,!1),Y6(i,i.line-l),s=o=i.position,a=!1),A0(f)||(o=i.position+1),f=i.input.charCodeAt(++i.position)}return wg(i,s,o,!1),i.result?!0:(i.kind=h,i.result=d,!1)}function wPt(i,e){var t,n,r;if(t=i.input.charCodeAt(i.position),t!==39)return!1;for(i.kind="scalar",i.result="",i.position++,n=r=i.position;(t=i.input.charCodeAt(i.position))!==0;)if(t===39)if(wg(i,n,i.position,!0),t=i.input.charCodeAt(++i.position),t===39)n=i.position,i.position++,r=i.position;else return!0;else Wh(t)?(wg(i,n,r,!0),Y6(i,co(i,!1,e)),n=r=i.position):i.position===i.lineStart&&QL(i)?pi(i,"unexpected end of the document within a single quoted scalar"):(i.position++,r=i.position);pi(i,"unexpected end of the stream within a single quoted scalar")}function EPt(i,e){var t,n,r,s,o,a;if(a=i.input.charCodeAt(i.position),a!==34)return!1;for(i.kind="scalar",i.result="",i.position++,t=n=i.position;(a=i.input.charCodeAt(i.position))!==0;){if(a===34)return wg(i,t,i.position,!0),i.position++,!0;if(a===92){if(wg(i,t,i.position,!0),a=i.input.charCodeAt(++i.position),Wh(a))co(i,!1,e);else if(a<256&&TOe[a])i.result+=AOe[a],i.position++;else if((o=yPt(a))>0){for(r=o,s=0;r>0;r--)a=i.input.charCodeAt(++i.position),(o=mPt(a))>=0?s=(s<<4)+o:pi(i,"expected hexadecimal character");i.result+=_Pt(s),i.position++}else pi(i,"unknown escape sequence");t=n=i.position}else Wh(a)?(wg(i,t,n,!0),Y6(i,co(i,!1,e)),t=n=i.position):i.position===i.lineStart&&QL(i)?pi(i,"unexpected end of the document within a double quoted scalar"):(i.position++,n=i.position)}pi(i,"unexpected end of the stream within a double quoted scalar")}function CPt(i,e){var t=!0,n,r,s,o=i.tag,a,l=i.anchor,u,c,h,d,f,p=Object.create(null),m,y,v,b;if(b=i.input.charCodeAt(i.position),b===91)c=93,f=!1,a=[];else if(b===123)c=125,f=!0,a={};else return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=a),b=i.input.charCodeAt(++i.position);b!==0;){if(co(i,!0,e),b=i.input.charCodeAt(i.position),b===c)return i.position++,i.tag=o,i.anchor=l,i.kind=f?"mapping":"sequence",i.result=a,!0;t?b===44&&pi(i,"expected the node content, but found ','"):pi(i,"missed comma between flow collection entries"),y=m=v=null,h=d=!1,b===63&&(u=i.input.charCodeAt(i.position+1),Ul(u)&&(h=d=!0,i.position++,co(i,!0,e))),n=i.line,r=i.lineStart,s=i.position,Ab(i,e,Ok,!1,!0),y=i.tag,m=i.result,co(i,!0,e),b=i.input.charCodeAt(i.position),(d||i.line===n)&&b===58&&(h=!0,b=i.input.charCodeAt(++i.position),co(i,!0,e),Ab(i,e,Ok,!1,!0),v=i.result),f?g_(i,a,p,y,m,v,n,r,s):h?a.push(g_(i,null,p,y,m,v,n,r,s)):a.push(m),co(i,!0,e),b=i.input.charCodeAt(i.position),b===44?(t=!0,b=i.input.charCodeAt(++i.position)):t=!1}pi(i,"unexpected end of the stream within a flow collection")}function SPt(i,e){var t,n,r=dO,s=!1,o=!1,a=e,l=0,u=!1,c,h;if(h=i.input.charCodeAt(i.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(i.kind="scalar",i.result="";h!==0;)if(h=i.input.charCodeAt(++i.position),h===43||h===45)dO===r?r=h===43?owe:dPt:pi(i,"repeat of a chomping mode identifier");else if((c=vPt(h))>=0)c===0?pi(i,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?pi(i,"repeat of an indentation width identifier"):(a=e+c-1,o=!0);else break;if(A0(h)){do h=i.input.charCodeAt(++i.position);while(A0(h));if(h===35)do h=i.input.charCodeAt(++i.position);while(!Wh(h)&&h!==0)}for(;h!==0;){for(X6(i),i.lineIndent=0,h=i.input.charCodeAt(i.position);(!o||i.lineIndent<a)&&h===32;)i.lineIndent++,h=i.input.charCodeAt(++i.position);if(!o&&i.lineIndent>a&&(a=i.lineIndent),Wh(h)){l++;continue}if(i.lineIndent<a){r===owe?i.result+=Ao.repeat(`
`,s?1+l:l):r===dO&&s&&(i.result+=`
`);break}for(n?A0(h)?(u=!0,i.result+=Ao.repeat(`
`,s?1+l:l)):u?(u=!1,i.result+=Ao.repeat(`
`,l+1)):l===0?s&&(i.result+=" "):i.result+=Ao.repeat(`
`,l):i.result+=Ao.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,t=i.position;!Wh(h)&&h!==0;)h=i.input.charCodeAt(++i.position);wg(i,t,i.position,!1)}return!0}function hwe(i,e){var t,n=i.tag,r=i.anchor,s=[],o,a=!1,l;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=s),l=i.input.charCodeAt(i.position);l!==0&&(i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,pi(i,"tab characters must not be used in indentation")),!(l!==45||(o=i.input.charCodeAt(i.position+1),!Ul(o))));){if(a=!0,i.position++,co(i,!0,-1)&&i.lineIndent<=e){s.push(null),l=i.input.charCodeAt(i.position);continue}if(t=i.line,Ab(i,e,EOe,!1,!0),s.push(i.result),co(i,!0,-1),l=i.input.charCodeAt(i.position),(i.line===t||i.lineIndent>e)&&l!==0)pi(i,"bad indentation of a sequence entry");else if(i.lineIndent<e)break}return a?(i.tag=n,i.anchor=r,i.kind="sequence",i.result=s,!0):!1}function TPt(i,e,t){var n,r,s,o,a,l,u=i.tag,c=i.anchor,h={},d=Object.create(null),f=null,p=null,m=null,y=!1,v=!1,b;if(i.firstTabInLine!==-1)return!1;for(i.anchor!==null&&(i.anchorMap[i.anchor]=h),b=i.input.charCodeAt(i.position);b!==0;){if(!y&&i.firstTabInLine!==-1&&(i.position=i.firstTabInLine,pi(i,"tab characters must not be used in indentation")),n=i.input.charCodeAt(i.position+1),s=i.line,(b===63||b===58)&&Ul(n))b===63?(y&&(g_(i,h,d,f,p,null,o,a,l),f=p=m=null),v=!0,y=!0,r=!0):y?(y=!1,r=!0):pi(i,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),i.position+=1,b=n;else{if(o=i.line,a=i.lineStart,l=i.position,!Ab(i,t,wOe,!1,!0))break;if(i.line===s){for(b=i.input.charCodeAt(i.position);A0(b);)b=i.input.charCodeAt(++i.position);if(b===58)b=i.input.charCodeAt(++i.position),Ul(b)||pi(i,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(g_(i,h,d,f,p,null,o,a,l),f=p=m=null),v=!0,y=!1,r=!1,f=i.tag,p=i.result;else if(v)pi(i,"can not read an implicit mapping pair; a colon is missed");else return i.tag=u,i.anchor=c,!0}else if(v)pi(i,"can not read a block mapping entry; a multiline key may not be an implicit key");else return i.tag=u,i.anchor=c,!0}if((i.line===s||i.lineIndent>e)&&(y&&(o=i.line,a=i.lineStart,l=i.position),Ab(i,e,Pk,!0,r)&&(y?p=i.result:m=i.result),y||(g_(i,h,d,f,p,m,o,a,l),f=p=m=null),co(i,!0,-1),b=i.input.charCodeAt(i.position)),(i.line===s||i.lineIndent>e)&&b!==0)pi(i,"bad indentation of a mapping entry");else if(i.lineIndent<e)break}return y&&g_(i,h,d,f,p,null,o,a,l),v&&(i.tag=u,i.anchor=c,i.kind="mapping",i.result=h),v}function APt(i){var e,t=!1,n=!1,r,s,o;if(o=i.input.charCodeAt(i.position),o!==33)return!1;if(i.tag!==null&&pi(i,"duplication of a tag property"),o=i.input.charCodeAt(++i.position),o===60?(t=!0,o=i.input.charCodeAt(++i.position)):o===33?(n=!0,r="!!",o=i.input.charCodeAt(++i.position)):r="!",e=i.position,t){do o=i.input.charCodeAt(++i.position);while(o!==0&&o!==62);i.position<i.length?(s=i.input.slice(e,i.position),o=i.input.charCodeAt(++i.position)):pi(i,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Ul(o);)o===33&&(n?pi(i,"tag suffix cannot contain exclamation marks"):(r=i.input.slice(e-1,i.position+1),COe.test(r)||pi(i,"named tag handle cannot contain such characters"),n=!0,e=i.position+1)),o=i.input.charCodeAt(++i.position);s=i.input.slice(e,i.position),gPt.test(s)&&pi(i,"tag suffix cannot contain flow indicator characters")}s&&!SOe.test(s)&&pi(i,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{pi(i,"tag name is malformed: "+s)}return t?i.tag=s:jg.call(i.tagMap,r)?i.tag=i.tagMap[r]+s:r==="!"?i.tag="!"+s:r==="!!"?i.tag="tag:yaml.org,2002:"+s:pi(i,'undeclared tag handle "'+r+'"'),!0}function RPt(i){var e,t;if(t=i.input.charCodeAt(i.position),t!==38)return!1;for(i.anchor!==null&&pi(i,"duplication of an anchor property"),t=i.input.charCodeAt(++i.position),e=i.position;t!==0&&!Ul(t)&&!p_(t);)t=i.input.charCodeAt(++i.position);return i.position===e&&pi(i,"name of an anchor node must contain at least one character"),i.anchor=i.input.slice(e,i.position),!0}function kPt(i){var e,t,n;if(n=i.input.charCodeAt(i.position),n!==42)return!1;for(n=i.input.charCodeAt(++i.position),e=i.position;n!==0&&!Ul(n)&&!p_(n);)n=i.input.charCodeAt(++i.position);return i.position===e&&pi(i,"name of an alias node must contain at least one character"),t=i.input.slice(e,i.position),jg.call(i.anchorMap,t)||pi(i,'unidentified alias "'+t+'"'),i.result=i.anchorMap[t],co(i,!0,-1),!0}function Ab(i,e,t,n,r){var s,o,a,l=1,u=!1,c=!1,h,d,f,p,m,y;if(i.listener!==null&&i.listener("open",i),i.tag=null,i.anchor=null,i.kind=null,i.result=null,s=o=a=Pk===t||EOe===t,n&&co(i,!0,-1)&&(u=!0,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)),l===1)for(;APt(i)||RPt(i);)co(i,!0,-1)?(u=!0,a=s,i.lineIndent>e?l=1:i.lineIndent===e?l=0:i.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||r),(l===1||Pk===t)&&(Ok===t||wOe===t?m=e:m=e+1,y=i.position-i.lineStart,l===1?a&&(hwe(i,y)||TPt(i,y,m))||CPt(i,m)?c=!0:(o&&SPt(i,m)||wPt(i,m)||EPt(i,m)?c=!0:kPt(i)?(c=!0,(i.tag!==null||i.anchor!==null)&&pi(i,"alias node should not have any properties")):xPt(i,m,Ok===t)&&(c=!0,i.tag===null&&(i.tag="?")),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):l===0&&(c=a&&hwe(i,y))),i.tag===null)i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);else if(i.tag==="?"){for(i.result!==null&&i.kind!=="scalar"&&pi(i,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+i.kind+'"'),h=0,d=i.implicitTypes.length;h<d;h+=1)if(p=i.implicitTypes[h],p.resolve(i.result)){i.result=p.construct(i.result),i.tag=p.tag,i.anchor!==null&&(i.anchorMap[i.anchor]=i.result);break}}else if(i.tag!=="!"){if(jg.call(i.typeMap[i.kind||"fallback"],i.tag))p=i.typeMap[i.kind||"fallback"][i.tag];else for(p=null,f=i.typeMap.multi[i.kind||"fallback"],h=0,d=f.length;h<d;h+=1)if(i.tag.slice(0,f[h].tag.length)===f[h].tag){p=f[h];break}p||pi(i,"unknown tag !<"+i.tag+">"),i.result!==null&&p.kind!==i.kind&&pi(i,"unacceptable node kind for !<"+i.tag+'> tag; it should be "'+p.kind+'", not "'+i.kind+'"'),p.resolve(i.result,i.tag)?(i.result=p.construct(i.result,i.tag),i.anchor!==null&&(i.anchorMap[i.anchor]=i.result)):pi(i,"cannot resolve a node with !<"+i.tag+"> explicit tag")}return i.listener!==null&&i.listener("close",i),i.tag!==null||i.anchor!==null||c}function DPt(i){var e=i.position,t,n,r,s=!1,o;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);(o=i.input.charCodeAt(i.position))!==0&&(co(i,!0,-1),o=i.input.charCodeAt(i.position),!(i.lineIndent>0||o!==37));){for(s=!0,o=i.input.charCodeAt(++i.position),t=i.position;o!==0&&!Ul(o);)o=i.input.charCodeAt(++i.position);for(n=i.input.slice(t,i.position),r=[],n.length<1&&pi(i,"directive name must not be less than one character in length");o!==0;){for(;A0(o);)o=i.input.charCodeAt(++i.position);if(o===35){do o=i.input.charCodeAt(++i.position);while(o!==0&&!Wh(o));break}if(Wh(o))break;for(t=i.position;o!==0&&!Ul(o);)o=i.input.charCodeAt(++i.position);r.push(i.input.slice(t,i.position))}o!==0&&X6(i),jg.call(uwe,n)?uwe[n](i,n,r):Fk(i,'unknown document directive "'+n+'"')}if(co(i,!0,-1),i.lineIndent===0&&i.input.charCodeAt(i.position)===45&&i.input.charCodeAt(i.position+1)===45&&i.input.charCodeAt(i.position+2)===45?(i.position+=3,co(i,!0,-1)):s&&pi(i,"directives end mark is expected"),Ab(i,i.lineIndent-1,Pk,!1,!0),co(i,!0,-1),i.checkLineBreaks&&pPt.test(i.input.slice(e,i.position))&&Fk(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&QL(i)){i.input.charCodeAt(i.position)===46&&(i.position+=3,co(i,!0,-1));return}if(i.position<i.length-1)pi(i,"end of the stream or a document separator is expected");else return}function kOe(i,e){i=String(i),e=e||{},i.length!==0&&(i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i.charCodeAt(0)===65279&&(i=i.slice(1)));var t=new bPt(i,e),n=i.indexOf("\0");for(n!==-1&&(t.position=n,pi(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)DPt(t);return t.documents}function LPt(i,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var n=kOe(i,t);if(typeof e!="function")return n;for(var r=0,s=n.length;r<s;r+=1)e(n[r])}function MPt(i,e){var t=kOe(i,e);if(t.length!==0){if(t.length===1)return t[0];throw new ul("expected a single document in the stream, but found more")}}var IPt=LPt,OPt=MPt,DOe={loadAll:IPt,load:OPt},LOe=Object.prototype.toString,MOe=Object.prototype.hasOwnProperty,Z6=65279,PPt=9,N2=10,FPt=13,NPt=32,$Pt=33,BPt=34,ZF=35,jPt=37,zPt=38,GPt=39,UPt=42,IOe=44,qPt=45,Nk=58,VPt=61,HPt=62,WPt=63,XPt=64,OOe=91,POe=93,YPt=96,FOe=123,ZPt=124,NOe=125,Ya={};Ya[0]="\\0";Ya[7]="\\a";Ya[8]="\\b";Ya[9]="\\t";Ya[10]="\\n";Ya[11]="\\v";Ya[12]="\\f";Ya[13]="\\r";Ya[27]="\\e";Ya[34]='\\"';Ya[92]="\\\\";Ya[133]="\\N";Ya[160]="\\_";Ya[8232]="\\L";Ya[8233]="\\P";var KPt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],JPt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function QPt(i,e){var t,n,r,s,o,a,l;if(e===null)return{};for(t={},n=Object.keys(e),r=0,s=n.length;r<s;r+=1)o=n[r],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=i.compiledTypeMap.fallback[o],l&&MOe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}function eFt(i){var e,t,n;if(e=i.toString(16).toUpperCase(),i<=255)t="x",n=2;else if(i<=65535)t="u",n=4;else if(i<=4294967295)t="U",n=8;else throw new ul("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Ao.repeat("0",n-e.length)+e}var tFt=1,$2=2;function iFt(i){this.schema=i.schema||W6,this.indent=Math.max(1,i.indent||2),this.noArrayIndent=i.noArrayIndent||!1,this.skipInvalid=i.skipInvalid||!1,this.flowLevel=Ao.isNothing(i.flowLevel)?-1:i.flowLevel,this.styleMap=QPt(this.schema,i.styles||null),this.sortKeys=i.sortKeys||!1,this.lineWidth=i.lineWidth||80,this.noRefs=i.noRefs||!1,this.noCompatMode=i.noCompatMode||!1,this.condenseFlow=i.condenseFlow||!1,this.quotingType=i.quotingType==='"'?$2:tFt,this.forceQuotes=i.forceQuotes||!1,this.replacer=typeof i.replacer=="function"?i.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function dwe(i,e){for(var t=Ao.repeat(" ",e),n=0,r=-1,s="",o,a=i.length;n<a;)r=i.indexOf(`
`,n),r===-1?(o=i.slice(n),n=a):(o=i.slice(n,r+1),n=r+1),o.length&&o!==`
`&&(s+=t),s+=o;return s}function KF(i,e){return`
`+Ao.repeat(" ",i.indent*e)}function nFt(i,e){var t,n,r;for(t=0,n=i.implicitTypes.length;t<n;t+=1)if(r=i.implicitTypes[t],r.resolve(e))return!0;return!1}function $k(i){return i===NPt||i===PPt}function B2(i){return 32<=i&&i<=126||161<=i&&i<=55295&&i!==8232&&i!==8233||57344<=i&&i<=65533&&i!==Z6||65536<=i&&i<=1114111}function fwe(i){return B2(i)&&i!==Z6&&i!==FPt&&i!==N2}function pwe(i,e,t){var n=fwe(i),r=n&&!$k(i);return(t?n:n&&i!==IOe&&i!==OOe&&i!==POe&&i!==FOe&&i!==NOe)&&i!==ZF&&!(e===Nk&&!r)||fwe(e)&&!$k(e)&&i===ZF||e===Nk&&r}function rFt(i){return B2(i)&&i!==Z6&&!$k(i)&&i!==qPt&&i!==WPt&&i!==Nk&&i!==IOe&&i!==OOe&&i!==POe&&i!==FOe&&i!==NOe&&i!==ZF&&i!==zPt&&i!==UPt&&i!==$Pt&&i!==ZPt&&i!==VPt&&i!==HPt&&i!==GPt&&i!==BPt&&i!==jPt&&i!==XPt&&i!==YPt}function sFt(i){return!$k(i)&&i!==Nk}function Hw(i,e){var t=i.charCodeAt(e),n;return t>=55296&&t<=56319&&e+1<i.length&&(n=i.charCodeAt(e+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}function $Oe(i){var e=/^\n* /;return e.test(i)}var BOe=1,JF=2,jOe=3,zOe=4,Hv=5;function oFt(i,e,t,n,r,s,o,a){var l,u=0,c=null,h=!1,d=!1,f=n!==-1,p=-1,m=rFt(Hw(i,0))&&sFt(Hw(i,i.length-1));if(e||o)for(l=0;l<i.length;u>=65536?l+=2:l++){if(u=Hw(i,l),!B2(u))return Hv;m=m&&pwe(u,c,a),c=u}else{for(l=0;l<i.length;u>=65536?l+=2:l++){if(u=Hw(i,l),u===N2)h=!0,f&&(d=d||l-p-1>n&&i[p+1]!==" ",p=l);else if(!B2(u))return Hv;m=m&&pwe(u,c,a),c=u}d=d||f&&l-p-1>n&&i[p+1]!==" "}return!h&&!d?m&&!o&&!r(i)?BOe:s===$2?Hv:JF:t>9&&$Oe(i)?Hv:o?s===$2?Hv:JF:d?zOe:jOe}function aFt(i,e,t,n,r){i.dump=function(){if(e.length===0)return i.quotingType===$2?'""':"''";if(!i.noCompatMode&&(KPt.indexOf(e)!==-1||JPt.test(e)))return i.quotingType===$2?'"'+e+'"':"'"+e+"'";var s=i.indent*Math.max(1,t),o=i.lineWidth===-1?-1:Math.max(Math.min(i.lineWidth,40),i.lineWidth-s),a=n||i.flowLevel>-1&&t>=i.flowLevel;function l(u){return nFt(i,u)}switch(oFt(e,a,i.indent,o,l,i.quotingType,i.forceQuotes&&!n,r)){case BOe:return e;case JF:return"'"+e.replace(/'/g,"''")+"'";case jOe:return"|"+gwe(e,i.indent)+mwe(dwe(e,s));case zOe:return">"+gwe(e,i.indent)+mwe(dwe(lFt(e,o),s));case Hv:return'"'+uFt(e)+'"';default:throw new ul("impossible error: invalid scalar style")}}()}function gwe(i,e){var t=$Oe(i)?String(e):"",n=i[i.length-1]===`
`,r=n&&(i[i.length-2]===`
`||i===`
`),s=r?"+":n?"":"-";return t+s+`
`}function mwe(i){return i[i.length-1]===`
`?i.slice(0,-1):i}function lFt(i,e){for(var t=/(\n+)([^\n]*)/g,n=function(){var u=i.indexOf(`
`);return u=u!==-1?u:i.length,t.lastIndex=u,ywe(i.slice(0,u),e)}(),r=i[0]===`
`||i[0]===" ",s,o;o=t.exec(i);){var a=o[1],l=o[2];s=l[0]===" ",n+=a+(!r&&!s&&l!==""?`
`:"")+ywe(l,e),r=s}return n}function ywe(i,e){if(i===""||i[0]===" ")return i;for(var t=/ [^ ]/g,n,r=0,s,o=0,a=0,l="";n=t.exec(i);)a=n.index,a-r>e&&(s=o>r?o:a,l+=`
`+i.slice(r,s),r=s+1),o=a;return l+=`
`,i.length-r>e&&o>r?l+=i.slice(r,o)+`
`+i.slice(o+1):l+=i.slice(r),l.slice(1)}function uFt(i){for(var e="",t=0,n,r=0;r<i.length;t>=65536?r+=2:r++)t=Hw(i,r),n=Ya[t],!n&&B2(t)?(e+=i[r],t>=65536&&(e+=i[r+1])):e+=n||eFt(t);return e}function cFt(i,e,t){var n="",r=i.tag,s,o,a;for(s=0,o=t.length;s<o;s+=1)a=t[s],i.replacer&&(a=i.replacer.call(t,String(s),a)),(kf(i,e,a,!1,!1)||typeof a>"u"&&kf(i,e,null,!1,!1))&&(n!==""&&(n+=","+(i.condenseFlow?"":" ")),n+=i.dump);i.tag=r,i.dump="["+n+"]"}function vwe(i,e,t,n){var r="",s=i.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],i.replacer&&(l=i.replacer.call(t,String(o),l)),(kf(i,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&kf(i,e+1,null,!0,!0,!1,!0))&&((!n||r!=="")&&(r+=KF(i,e)),i.dump&&N2===i.dump.charCodeAt(0)?r+="-":r+="- ",r+=i.dump);i.tag=s,i.dump=r||"[]"}function hFt(i,e,t){var n="",r=i.tag,s=Object.keys(t),o,a,l,u,c;for(o=0,a=s.length;o<a;o+=1)c="",n!==""&&(c+=", "),i.condenseFlow&&(c+='"'),l=s[o],u=t[l],i.replacer&&(u=i.replacer.call(t,l,u)),kf(i,e,l,!1,!1)&&(i.dump.length>1024&&(c+="? "),c+=i.dump+(i.condenseFlow?'"':"")+":"+(i.condenseFlow?"":" "),kf(i,e,u,!1,!1)&&(c+=i.dump,n+=c));i.tag=r,i.dump="{"+n+"}"}function dFt(i,e,t,n){var r="",s=i.tag,o=Object.keys(t),a,l,u,c,h,d;if(i.sortKeys===!0)o.sort();else if(typeof i.sortKeys=="function")o.sort(i.sortKeys);else if(i.sortKeys)throw new ul("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!n||r!=="")&&(d+=KF(i,e)),u=o[a],c=t[u],i.replacer&&(c=i.replacer.call(t,u,c)),kf(i,e+1,u,!0,!0,!0)&&(h=i.tag!==null&&i.tag!=="?"||i.dump&&i.dump.length>1024,h&&(i.dump&&N2===i.dump.charCodeAt(0)?d+="?":d+="? "),d+=i.dump,h&&(d+=KF(i,e)),kf(i,e+1,c,!0,h)&&(i.dump&&N2===i.dump.charCodeAt(0)?d+=":":d+=": ",d+=i.dump,r+=d));i.tag=s,i.dump=r||"{}"}function _we(i,e,t){var n,r,s,o,a,l;for(r=t?i.explicitTypes:i.implicitTypes,s=0,o=r.length;s<o;s+=1)if(a=r[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?i.tag=a.representName(e):i.tag=a.tag:i.tag="?",a.represent){if(l=i.styleMap[a.tag]||a.defaultStyle,LOe.call(a.represent)==="[object Function]")n=a.represent(e,l);else if(MOe.call(a.represent,l))n=a.represent[l](e,l);else throw new ul("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');i.dump=n}return!0}return!1}function kf(i,e,t,n,r,s,o){i.tag=null,i.dump=t,_we(i,t,!1)||_we(i,t,!0);var a=LOe.call(i.dump),l=n,u;n&&(n=i.flowLevel<0||i.flowLevel>e);var c=a==="[object Object]"||a==="[object Array]",h,d;if(c&&(h=i.duplicates.indexOf(t),d=h!==-1),(i.tag!==null&&i.tag!=="?"||d||i.indent!==2&&e>0)&&(r=!1),d&&i.usedDuplicates[h])i.dump="*ref_"+h;else{if(c&&d&&!i.usedDuplicates[h]&&(i.usedDuplicates[h]=!0),a==="[object Object]")n&&Object.keys(i.dump).length!==0?(dFt(i,e,i.dump,r),d&&(i.dump="&ref_"+h+i.dump)):(hFt(i,e,i.dump),d&&(i.dump="&ref_"+h+" "+i.dump));else if(a==="[object Array]")n&&i.dump.length!==0?(i.noArrayIndent&&!o&&e>0?vwe(i,e-1,i.dump,r):vwe(i,e,i.dump,r),d&&(i.dump="&ref_"+h+i.dump)):(cFt(i,e,i.dump),d&&(i.dump="&ref_"+h+" "+i.dump));else if(a==="[object String]")i.tag!=="?"&&aFt(i,i.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(i.skipInvalid)return!1;throw new ul("unacceptable kind of an object to dump "+a)}i.tag!==null&&i.tag!=="?"&&(u=encodeURI(i.tag[0]==="!"?i.tag.slice(1):i.tag).replace(/!/g,"%21"),i.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",i.dump=u+" "+i.dump)}return!0}function fFt(i,e){var t=[],n=[],r,s;for(QF(i,t,n),r=0,s=n.length;r<s;r+=1)e.duplicates.push(t[n[r]]);e.usedDuplicates=new Array(s)}function QF(i,e,t){var n,r,s;if(i!==null&&typeof i=="object")if(r=e.indexOf(i),r!==-1)t.indexOf(r)===-1&&t.push(r);else if(e.push(i),Array.isArray(i))for(r=0,s=i.length;r<s;r+=1)QF(i[r],e,t);else for(n=Object.keys(i),r=0,s=n.length;r<s;r+=1)QF(i[n[r]],e,t)}function pFt(i,e){e=e||{};var t=new iFt(e);t.noRefs||fFt(i,t);var n=i;return t.replacer&&(n=t.replacer.call({"":n},"",n)),kf(t,0,n,!0,!0)?t.dump+`
`:""}var gFt=pFt,mFt={dump:gFt};function K6(i,e){return function(){throw new Error("Function yaml."+i+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var yFt=xa,vFt=nOe,_Ft=aOe,bFt=dOe,xFt=fOe,wFt=W6,EFt=DOe.load,CFt=DOe.loadAll,SFt=mFt.dump,TFt=ul,AFt={binary:vOe,float:hOe,map:oOe,null:lOe,pairs:bOe,set:xOe,timestamp:mOe,bool:uOe,int:cOe,merge:yOe,omap:_Oe,seq:sOe,str:rOe},RFt=K6("safeLoad","load"),kFt=K6("safeLoadAll","loadAll"),DFt=K6("safeDump","dump"),LFt={Type:yFt,Schema:vFt,FAILSAFE_SCHEMA:_Ft,JSON_SCHEMA:bFt,CORE_SCHEMA:xFt,DEFAULT_SCHEMA:wFt,load:EFt,loadAll:CFt,dump:SFt,YAMLException:TFt,types:AFt,safeLoad:RFt,safeLoadAll:kFt,safeDump:DFt};function MFt(i){i.core.ruler.before("normalize","extract-config",e=>{var r;const t=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,n=e.src.match(t);if(i.config={versionCheck:((r=i.config)==null?void 0:r.versionCheck)||!1},n)try{i.config=LFt.load(n[1]),e.src=e.src.replace(n[0],"")}catch(s){return console.error("Error parsing frontmatter:",s),null}i.config.versionCheck||(i.config.version=Number($3t(i.config.version)),i.config.versionCheck=!0)})}const IFt=`
${Q0}
${CD}
${BN}
${jN}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p {
    display: block;
    --font-size: 1.1rem;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var nD,UOe;class GOe extends Yn{constructor(){super();Tn(this,nD);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const t=this.querySelector(".editor-wrapper"),n=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&z3e(this),QIt(this),j3e(this),JIt(t,n,this)}updateErrors(t){const n=this.renderRoot.querySelector(".editor-error");n&&(t.length?(n.style.display="block",n.querySelector("ul").innerHTML=t.map(r=>`<li><strong>${r.ref}</strong>: ${r.message}</li>`).join("")):n.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const t=this.isNavigation?"partial-height":"";return tt`
      <div class="editor-wrapper ${t}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${s3t}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6>⛔ Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${Us(this,nD,UOe)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}nD=new WeakSet,UOe=function(t){const n=this.renderRoot.querySelector(".editor-wrapper"),r=this.storyId?`#${this.storyId}`:"",s=document.querySelector(`eox-storytelling${r}`);t.target.checked?(n.classList.remove("editor-opacity-none"),n.classList.remove("editor-hide"),s.setAttribute("show-editor","open")):(n.classList.add("editor-hide"),s.setAttribute("show-editor","close"))},Ye(GOe,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean}});customElements.define("eox-storytelling-editor",GOe);const e0=oc({html:!0});e0.use(eOt).use(MFt);var Rc,j_,X2,rD,qOe;class OFt extends Yn{constructor(){super();Tn(this,rD);Tn(this,Rc);Tn(this,j_,{});Tn(this,X2,null);da(this,Rc,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(t){if(t.has("markdownURL")&&this.markdownURL&&(this.markdown=await zIt(this.markdownURL)||this.markdown,this.requestUpdate()),t.has("markdown")){const n=e0.render(this.markdown);if(G3t(e0.attrs.sections,this),da(this,j_,e0.config),typeof ki(this,j_).nav=="boolean"&&(this.showNav=ki(this,j_).nav),this.showNav&&(this.nav=e0.nav),da(this,Rc,w3t(q3t.sanitize(n,{CUSTOM_ELEMENT_HANDLING:F3t(e0),ADD_TAGS:HIt}),e0.sections,Us(this,rD,qOe).bind(this),this)),da(this,Rc,S3t(ki(this,Rc),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const s=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),o=s.querySelector("eox-jsonform");this.markdown!==(o==null?void 0:o.value.Story)&&(s.markdown=this.markdown)}this.requestUpdate()}t.has("nav")&&P3t(this,".navigation a")}handleSlotChange(){const t=this.shadowRoot.querySelector("slot");if(t){const n=t.assignedNodes({flatten:!0});this.markdown=n.map(r=>r.textContent?r.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){da(this,X2,Bb(t=>{t.detail&&(this.markdown=t.detail.Story,this.requestUpdate())},1e3)),r3t(this),N3t(),ki(this,Rc)===void 0&&await this.waitForHtmlInitialization(),q3e(this)}async waitForHtmlInitialization(){const t=n=>new Promise(r=>setTimeout(r,n));for(;ki(this,Rc)===void 0;)await t(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const t=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return tt`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&IFt}
        ${!this.unstyled&&xD}
      </style>

      <div class="story-telling ${t}">
        <div>${Hi(ki(this,Rc),()=>tt`${ki(this,Rc)}`)}</div>
        ${Hi(this.showEditor!==void 0,()=>tt`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${ki(this,X2)}
              }
            ></eox-storytelling-editor>
          `)}
      </div>

      ${Hi(this.addCustomSectionIndex>-1,()=>tt`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${Hi(this.selectedCustomElement,()=>tt`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>ewe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${_3t.map(n=>tt`
                    <div class="header">
                      <h4>${n.name}</h4>
                      <p>${n.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${n.elements.map(r=>tt`<div
                          @click=${()=>ewe(this.markdown,this.addCustomSectionIndex,r.markdown,r.fields,!1,this)}
                          class="grid-item"
                        >
                          <icon id="${r.id}"></icon>
                          <p>${r.name}</p>
                          <style>
                            icon#${r.id}::before {
                              content: url("${r.icon}");
                            }
                          </style>
                        </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}Rc=new WeakMap,j_=new WeakMap,X2=new WeakMap,rD=new WeakSet,qOe=function(t){this.dispatchEvent(new CustomEvent("init",{detail:t}))};customElements.define("eox-storytelling",OFt);const PFt=`
:host {
  display: block;
}
`,FFt=`
* {
  font-family: Roboto, sans-serif;
}

${Q0}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-left-drop-circle%3C/title%3E%3Cpath d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M14,7L9,12L14,17V7Z' fill='%23004170' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-right-drop-circle%3C/title%3E%3Cpath d='M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M10,17L15,12L10,7V17Z' fill='%23004170' /%3E%3C/svg%3E");
}
`;var VOe={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Jr,function(){return function(t,n,r){n.prototype.dayOfYear=function(s){var o=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})})(VOe);var NFt=VOe.exports;const $Ft=Ea(NFt);var HOe={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Jr,function(){var t="day";return function(n,r,s){var o=function(u){return u.add(4-u.isoWeekday(),t)},a=r.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),t);var c,h,d,f,p=o(this),m=(c=this.isoWeekYear(),h=this.$u,d=(h?s.utc:s)().year(c).startOf("year"),f=4-d.isoWeekday(),d.isoWeekday()>4&&(f+=7),d.add(f,t));return p.diff(m,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,c){var h=this.$utils(),d=!!h.u(c)||c;return h.p(u)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,c)}}})})(HOe);var BFt=HOe.exports;const jFt=Ea(BFt);var zFt=Object.defineProperty,GFt=Object.getOwnPropertyDescriptor,Po=(i,e,t,n)=>{for(var r=n>1?void 0:n?GFt(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&zFt(e,t,r),r};rf.extend($Ft);rf.extend(jFt);let fl=class extends Yn{constructor(){super(...arguments),this.controlValues=[],this._newStepIndex=0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(i){i?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=i,this.requestUpdate()}setConfig(i){this.layer=i.layer??this.layer,this.controlProperty=i.controlProperty??this.controlProperty,this.controlValues=i.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(i){const e=this.controlValues.findIndex(t=>t===i);e>-1?this._newStepIndex=e:console.error(`Unable to find step "${i}" in available times!`)}_updateStep(i=1){var e;this._newStepIndex=this._newStepIndex+i,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),(e=this._controlSource)==null||e.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]}),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}}))}getFlatLayersArray(i){const e=[];e.push(...i);let t=e.filter(n=>n instanceof b2);for(;t.length;){const n=[];for(let r=0,s=t.length;r<s;r++){const o=t[r].getLayers().getArray();e.push(...o),n.push(...o.filter(a=>a instanceof b2))}t=n}return e}render(){const i=document.querySelector(this.for),e=i.map||i;return e.once("loadend",()=>{if(!this._originalParams){const n=this.getFlatLayersArray(e.getLayers().getArray()).find(r=>r.get("id")===this.layer);this._controlSource=n.getSource(),this._originalParams=this._controlSource.getParams()}}),tt`
      <style>
        ${PFt}
        ${!this.unstyled&&FFt}
      </style>
      <main>
        <div id="controls" part="controls">
          <button
            part="previous"
            class="icon previous"
            @click="${()=>this.previous()}"
          >
            <
          </button>
          <button part="next" class="icon next" @click="${()=>this.next()}">
            >
          </button>
          ${this.disablePlay?In:tt`
                <button
                  part="play"
                  class="icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `}
          ${this.slider?tt`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${t=>this._updateStep(this.controlValues.findIndex(n=>n===t.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    width="300"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}

          <span part="current">${this.controlValues[this._newStepIndex]}</span>
        </div>
      </main>
    `}};Po([$t({attribute:"control-property"})],fl.prototype,"controlProperty",2);Po([$t({attribute:"control-values",type:Array})],fl.prototype,"controlValues",2);Po([$t()],fl.prototype,"for",2);Po([$t()],fl.prototype,"layer",2);Po([$t({type:Boolean})],fl.prototype,"slider",2);Po([$t()],fl.prototype,"_originalParams",2);Po([$t({attribute:"disable-play",type:Boolean})],fl.prototype,"disablePlay",2);Po([$t({attribute:"current-step"})],fl.prototype,"currentStep",1);Po([Ks()],fl.prototype,"_animationInterval",2);Po([Ks()],fl.prototype,"_controlSource",2);Po([Ks()],fl.prototype,"_isAnimationPlaying",2);Po([Ks()],fl.prototype,"_newStepIndex",2);Po([$t({type:Boolean})],fl.prototype,"unstyled",2);fl=Po([ta("eox-timecontrol")],fl);let Rb=class extends Yn{constructor(){super(...arguments),this.width=0,this.steps=[],this.height=6,this.svgWidth=0}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.handleResize()}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}get lines(){const i=this.numLines>this.width/2?this.width/2:this.numLines,e=this.width/(i-1);return Array.from({length:this.numLines},(t,n)=>n*e)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){const i=[];let e=null;return this.lines.forEach((t,n)=>{const s=rf(this.steps[n]).year();(n===0||s!==e)&&i.push({label:s,position:t}),e=s}),i.filter((t,n)=>{const r=i[n+1];return!(r&&r.position-t.position<25)})}isYearLine(i){return this.yearMarks.some(t=>Math.abs(t.position-i)<1)}render(){return tt`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.lines.map((i,e)=>rge`
            <line
              key=${e}
              x1=${i}
              y1="0"
              x2=${i}
              y2=${this.isYearLine(i)?12:6}
              stroke=${this.isYearLine(i)?"#222":"#7596A2"}
              stroke-width=${this.isYearLine(i),1}
            ></line>
          `)}
          ${this.yearMarks.map((i,e)=>rge`
            <text
              key=${`y${e}`}
              x=${i.position}
              y=${this.height-1}
              fill="#555"
              font-size="13"
              font-weight="500"
            >
              ${i.label}
            </text>
          `)}
        </svg>
      </div>
    `}};Po([$t({type:Number})],Rb.prototype,"width",2);Po([$t({type:Array})],Rb.prototype,"steps",2);Po([Ks()],Rb.prototype,"height",2);Po([Ks()],Rb.prototype,"svgWidth",2);Rb=Po([ta("eox-sliderticks")],Rb);const WOe=(i,e)=>{var n;let{privateFields:t=!0}=e;return t||(n=i==null?void 0:i.modules)==null||n.forEach(r=>{var s;(s=r==null?void 0:r.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),MNe(i)};WOe(YNe,{privateFields:!1});const UFt={parameters:{docs:{toc:!0,page:ZNe,source:{transform:(i,e)=>{const t=e.undecoratedStoryFn(e);let n;const r={};return t.strings.map((s,o)=>{var c,h;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(n=`eox-${a}`);const l=(h=(c=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:c[0])==null?void 0:h.replaceAll(" ",""),u=t.values[o];l&&u&&(r[n]||(r[n]={}),r[n][l]=u)}).filter(s=>s),Object.keys(r).forEach(s=>{i=i.replace(`<${s}`,`<${s}
  ${Object.keys(r[s]).map((o,a)=>`.${o}='\${${typeof r[s][o]=="string"?r[s][o]:JSON.stringify(r[s][o])}}'`).join(`
  `)}
  `)}),i}}}}},d4t=Object.freeze(Object.defineProperty({__proto__:null,default:UFt,setCustomElementsManifestWithOptions:WOe},Symbol.toStringTag,{value:"Module"}));export{Y5t as L,Z5t as a,d4t as p};
