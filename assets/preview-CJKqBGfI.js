const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./raw-Dt1HMqYc.js","./basedecoder-DvumDe3Y.js","./lzw-DpvbRwG5.js","./jpeg-CdeCw_eT.js","./deflate-CUkHh1nh.js","./pako.esm-CPws4d4z.js","./packbits-DQnG8s9w.js","./lerc-IkWKEBSN.js","./index-DjTz9BGS.js","./chunk-L4EGOTBX-BALMY2cf.js","./entry-preview-BErytJoa.js","./lit-element-Dh4_iwrW.js","./index-DrFu-skq.js","./index-Dw69Wm5F.js","./index-DSMJWS8l.js","./iframe-GSswln_F.js","./index-DPS9-N-h.js","./directive-DUGPADuw.js","./main-Bts6LUfi.js","./webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var bze=Object.defineProperty;var Fbe=t=>{throw TypeError(t)};var vze=(t,e,n)=>e in t?bze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var tn=(t,e,n)=>vze(t,typeof e!="symbol"?e+"":e,n),rF=(t,e,n)=>e.has(t)||Fbe("Cannot "+n);var Gt=(t,e,n)=>(rF(t,e,"read from private field"),n?n.call(t):e.get(t)),gn=(t,e,n)=>e.has(t)?Fbe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),gs=(t,e,n,r)=>(rF(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),yn=(t,e,n)=>(rF(t,e,"access private method"),n);import{s as xze}from"./chunk-L4EGOTBX-BALMY2cf.js";import{m as d$,p as wze,v as ag,r as uw,M as iF,f as _ze}from"./entry-preview-BErytJoa.js";import{g as aa,j as Cu,c as Zi,b as DAe}from"./index-DjTz9BGS.js";import{useMDXComponents as LAe}from"./index-Dw69Wm5F.js";import{ap as Eze,aq as Cze,ar as Sze,as as Aze,at as kze,au as Tze,av as Dze}from"./index-DSMJWS8l.js";import{r as Zr,x as et,E as ni,T as gb,i as f$,b as Py}from"./lit-element-Dh4_iwrW.js";import{c as Y_,n as Lze,d as Rze,I as fk,R as RAe,r as Fze,g as Oze,h as Mze,j as Ize,C as $ze,k as Pze,m as Obe,u as Mbe,v as h$,w as Ag,x as Y4,y as Ru,z as X4,A as p$,B as Nze,D as Bze,E as zze,F as jze,i as Uze,G as qze,H as Hze,J as Gze,K as Vze,L as Wze,M as Yze,N as m$,O as Xze,p as g$,P as Ibe,Q as FAe,S as y$,T as X_,U as dD,V as s0,W as Zze,X as Kze,Y as Jze,Z as OAe,_ as fD,$ as hD,a0 as Qze,a1 as eje,a2 as tje,a3 as nje,a4 as $be,a5 as rje,a6 as ije,a7 as sje,f as oje,a8 as aje,l as lje,a9 as uje,aa as cje,ab as dje,ac as fje,s as MAe,ad as hje,ae as pje,af as mje,ag as gje,q as yje,t as bje,o as IAe,ah as vje,ai as xje,aj as hk,ak as wje,al as _je,e as oE,a as pD,b as cp}from"./directive-DUGPADuw.js";import{m as Z_,g as Eje,C as Cje,a as ai,b as pk,s as Sje,S as K_,V as b$,d as Pbe,c as __,T as Nbe,F as Z4,R as kg,e as aE,f as Aje,w as kje,h as Tje,i as o0,j as J_,k as v$,l as Pp,n as EA,o as du,p as Qb,P as xc,q as ru,r as mk,t as ks,u as ev,v as yb,L as Pd,I as $Ae,x as Tg,J as Dje,y as Lje,z as Io,A as Rje,B as K4,D as Fje,M as Wv,E as mD,G as lE,H as uE,X as gD,K as kn,N as Rn,O as Rt,Q as x$,U as gk,W as Oje,Y as Mje,Z as Np,_ as yk,$ as PAe,a0 as tr,a1 as Ge,a2 as br,a3 as Ii,a4 as iu,a5 as Yv,a6 as Ep,a7 as Q_,a8 as NAe,a9 as Xt,aa as bk,ab as vk,ac as Ue,ad as Dt,ae as yD,af as Rs,ag as Aa,ah as xk,ai as BAe,aj as lg,ak as Ije,al as w$,am as zAe,an as Mf,ao as Oc,ap as yi,aq as $je,ar as Pje,as as Wp,at as Bbe,au as wc,av as vd,aw as Nje,ax as _$,ay as bD,az as Bje,aA as jAe,aB as zje,aC as jje,aD as Si,aE as UAe,aF as Qo,aG as E$,aH as wk,aI as C$,aJ as Uje,aK as qje,aL as J4,aM as sF,aN as Hje,aO as vD,aP as e2,aQ as Cp,aR as Sp,aS as Yp,aT as xD,aU as S$,aV as oh,aW as A$,aX as qAe,aY as Gje,aZ as Ll,a_ as Ls,a$ as k$,b0 as Ac,b1 as T$,b2 as HAe,b3 as zbe,b4 as a0,b5 as jbe,b6 as ob,b7 as Vje,b8 as Q4,b9 as GAe,ba as Wje,bb as Ube,bc as Yje,bd as D$,be as Xje,bf as VAe,bg as t2,bh as Zje,bi as Kje,bj as Ai,bk as WAe,bl as n2,bm as Rl,bn as Xp,bo as Xv,bp as Jje,bq as dr,br as Qje,bs as eUe,bt as YAe,bu as Zp,bv as tUe,bw as nUe,bx as rUe,by as iUe,bz as L$,bA as sUe,bB as oUe,bC as aUe,bD as XAe,bE as lUe,bF as _k,bG as R$,bH as Ek,bI as ZAe,bJ as vh,bK as cE,bL as dE,bM as F$,bN as O$,bO as r2,bP as uUe,bQ as cUe,bR as dUe,bS as wD,bT as fUe,bU as hUe,bV as pUe,bW as oF,bX as i2,bY as _D,bZ as mUe,b_ as gUe,b$ as qbe,c0 as Hbe,c1 as yUe,c2 as Gbe,c3 as bUe,c4 as vUe,c5 as eM,c6 as KAe,c7 as xUe,c8 as Zv,c9 as JAe,ca as Vbe,cb as Ck,cc as Wbe,cd as I0,ce as M$,cf as wUe,cg as QAe,ch as ED,ci as _Ue,cj as I$,ck as eke,cl as EUe,cm as CUe,cn as SUe,co as AUe,cp as tke,cq as kUe,cr as TUe,cs as DUe,ct as LUe,cu as RUe,cv as nke,cw as FUe,cx as rke,cy as OUe,cz as tM,cA as MUe,cB as IUe,cC as ike,cD as ske,cE as $Ue,cF as PUe}from"./main-Bts6LUfi.js";import{_ as pm}from"./iframe-GSswln_F.js";const Ybe={duration:750},Xbe={type:"FeatureCollection",features:[]};function NUe(t,e){let n=0,r,i=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function BUe(t,e){const n=NUe(t,e);return n&&Math.sqrt(n)}class el{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[r++]=a),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function zUe(t,e){return Array.from(e,n=>t[n])}function jUe(t=Y_){if(t===Y_)return oke;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function oke(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Vg(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function nM(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ake(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?oke:jUe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),c=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*c*(l-c)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*c/l+f)),p=Math.min(r,Math.floor(e+(l-u)*c/l+f));ake(t,e,h,p,i)}const s=t[e];let o=n,a=r;for(cw(t,n,e),i(t[r],s)>0&&cw(t,n,r);o<a;){for(cw(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?cw(t,n,a):(++a,cw(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function cw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function rM(t,e,n){if(t=Float64Array.from(Lze(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return nM(t);if(e>=1)return Vg(t);var r,i=(r-1)*e,s=Math.floor(i),o=Vg(ake(t,s).subarray(0,s+1)),a=nM(t.subarray(s+1));return o+(a-o)*(i-s)}}function lke(t,e,n=Rze){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function UUe(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function uke(t,e){return rM(t,.5,e)}function*qUe(t){for(const e of t)yield*e}function cke(t){return Array.from(qUe(t))}function eu(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function dke(t,e){let n=0;for(let r of t)(r=+r)&&(n+=r);return n}function HUe(t,...e){t=new fk(t),e=e.map(GUe);e:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue e}return t}function GUe(t){return t instanceof fk?t:new fk(t)}function VUe(...t){const e=new fk;for(const n of t)for(const r of n)e.add(r);return e}var fke=-.14861,$$=1.78277,P$=-.29227,CD=-.90649,s2=1.97294,Zbe=s2*CD,Kbe=s2*$$,Jbe=$$*P$-CD*fke;function WUe(t){if(t instanceof Wg)return new Wg(t.h,t.s,t.l,t.opacity);t instanceof RAe||(t=Fze(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Jbe*r+Zbe*e-Kbe*n)/(Jbe+Zbe-Kbe),s=r-i,o=(s2*(n-i)-P$*s)/CD,a=Math.sqrt(o*o+s*s)/(s2*i*(1-i)),l=a?Math.atan2(o,s)*Pze-120:NaN;return new Wg(l<0?l+360:l,a,i,t.opacity)}function iM(t,e,n,r){return arguments.length===1?WUe(t):new Wg(t,e,n,r??1)}function Wg(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Oze(Wg,iM,Mze($ze,{brighter(t){return t=t==null?Obe:Math.pow(Obe,t),new Wg(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mbe:Math.pow(Mbe,t),new Wg(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Ize,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new RAe(255*(e+n*(fke*r+$$*i)),255*(e+n*(P$*r+CD*i)),255*(e+n*(s2*r)),this.opacity)}}));function YUe(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function XUe(t,e){var n=h$(+t,+e);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}var Qbe=180/Math.PI,sM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hke(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Qbe,skewX:Math.atan(l)*Qbe,scaleX:o,scaleY:a}}var nS;function ZUe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?sM:hke(e.a,e.b,e.c,e.d,e.e,e.f)}function KUe(t){return t==null||(nS||(nS=document.createElementNS("http://www.w3.org/2000/svg","g")),nS.setAttribute("transform",t),!(t=nS.transform.baseVal.consolidate()))?sM:(t=t.matrix,hke(t.a,t.b,t.c,t.d,t.e,t.f))}function pke(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,d,c,f,h,p){if(u!==c||d!==f){var g=h.push("translate(",null,e,null,n);p.push({i:g-4,x:Ag(u,c)},{i:g-2,x:Ag(d,f)})}else(c||f)&&h.push("translate("+c+e+f+n)}function o(u,d,c,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Ag(u,d)})):d&&c.push(i(c)+"rotate("+d+r)}function a(u,d,c,f){u!==d?f.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Ag(u,d)}):d&&c.push(i(c)+"skewX("+d+r)}function l(u,d,c,f,h,p){if(u!==c||d!==f){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Ag(u,c)},{i:g-2,x:Ag(d,f)})}else(c!==1||f!==1)&&h.push(i(h)+"scale("+c+","+f+")")}return function(u,d){var c=[],f=[];return u=t(u),d=t(d),s(u.translateX,u.translateY,d.translateX,d.translateY,c,f),o(u.rotate,d.rotate,c,f),a(u.skewX,d.skewX,c,f),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,c,f),u=d=null,function(h){for(var p=-1,g=f.length,b;++p<g;)c[(b=f[p]).i]=b.x(h);return c.join("")}}}var JUe=pke(ZUe,"px, ","px)","deg)"),QUe=pke(KUe,", ",")",")"),eqe=1e-12;function eve(t){return((t=Math.exp(t))+1/t)/2}function tqe(t){return((t=Math.exp(t))-1/t)/2}function nqe(t){return((t=Math.exp(2*t))-1)/(t+1)}const rqe=function t(e,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],d=o[0],c=o[1],f=o[2],h=d-a,p=c-l,g=h*h+p*p,b,y;if(g<eqe)y=Math.log(f/u)/e,b=function(D){return[a+D*h,l+D*p,u*Math.exp(e*D*y)]};else{var v=Math.sqrt(g),w=(f*f-u*u+r*g)/(2*u*n*v),E=(f*f-u*u-r*g)/(2*f*n*v),S=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(E*E+1)-E);y=(T-S)/e,b=function(D){var k=D*y,R=eve(S),O=u/(n*v)*(R*nqe(e*k+S)-tqe(S));return[a+O*h,l+O*p,u*R/eve(e*k+S)]}}return b.duration=y*1e3*e/Math.SQRT2,b}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},i}(Math.SQRT2,2,4);function mke(t){return function(e,n){var r=t((e=Y4(e)).h,(n=Y4(n)).h),i=Ru(e.s,n.s),s=Ru(e.l,n.l),o=Ru(e.opacity,n.opacity);return function(a){return e.h=r(a),e.s=i(a),e.l=s(a),e.opacity=o(a),e+""}}}const iqe=mke(h$);var sqe=mke(Ru);function oqe(t,e){var n=Ru((t=X4(t)).l,(e=X4(e)).l),r=Ru(t.a,e.a),i=Ru(t.b,e.b),s=Ru(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=r(o),t.b=i(o),t.opacity=s(o),t+""}}function gke(t){return function e(n){n=+n;function r(i,s){var o=t((i=iM(i)).h,(s=iM(s)).h),a=Ru(i.s,s.s),l=Ru(i.l,s.l),u=Ru(i.opacity,s.opacity);return function(d){return i.h=o(d),i.s=a(d),i.l=l(Math.pow(d,n)),i.opacity=u(d),i+""}}return r.gamma=e,r}(1)}const aqe=gke(h$);var lqe=gke(Ru);function uqe(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}const cqe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:p$,interpolateArray:Nze,interpolateBasis:Bze,interpolateBasisClosed:zze,interpolateCubehelix:aqe,interpolateCubehelixLong:lqe,interpolateDate:jze,interpolateDiscrete:YUe,interpolateHcl:Uze,interpolateHclLong:qze,interpolateHsl:iqe,interpolateHslLong:sqe,interpolateHue:XUe,interpolateLab:oqe,interpolateNumber:Ag,interpolateNumberArray:Hze,interpolateObject:Gze,interpolateRgb:Vze,interpolateRgbBasis:Wze,interpolateRgbBasisClosed:Yze,interpolateRound:m$,interpolateString:Xze,interpolateTransformCss:JUe,interpolateTransformSvg:QUe,interpolateZoom:rqe,piecewise:g$,quantize:uqe},Symbol.toStringTag,{value:"Module"}));function yke(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ibe),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return yke(t).unknown(e)},t=arguments.length?Array.from(t,Ibe):[0,1],FAe(n)}function bke(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=lke(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[X_(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Y_),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return bke().domain(t).range(e).unknown(r)},y$.apply(s,arguments)}const aF=new Date,lF=new Date;function xo(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},i.filter=s=>xo(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(aF.setTime(+s),lF.setTime(+o),t(aF),t(lF),Math.floor(n(aF,lF))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const tv=xo(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?xo(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):tv);tv.range;const Uf=1e3,Fu=Uf*60,qf=Fu*60,ah=qf*24,N$=ah*7,tve=ah*30,uF=ah*365,Hf=xo(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Uf)},(t,e)=>(e-t)/Uf,t=>t.getUTCSeconds());Hf.range;const SD=xo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uf)},(t,e)=>{t.setTime(+t+e*Fu)},(t,e)=>(e-t)/Fu,t=>t.getMinutes());SD.range;const AD=xo(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fu)},(t,e)=>(e-t)/Fu,t=>t.getUTCMinutes());AD.range;const kD=xo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uf-t.getMinutes()*Fu)},(t,e)=>{t.setTime(+t+e*qf)},(t,e)=>(e-t)/qf,t=>t.getHours());kD.range;const TD=xo(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qf)},(t,e)=>(e-t)/qf,t=>t.getUTCHours());TD.range;const Kf=xo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fu)/ah,t=>t.getDate()-1);Kf.range;const Bp=xo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ah,t=>t.getUTCDate()-1);Bp.range;const vke=xo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ah,t=>Math.floor(t/ah));vke.range;function $0(t){return xo(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fu)/N$)}const Kv=$0(0),Sk=$0(1),dqe=$0(2),fqe=$0(3),nv=$0(4),hqe=$0(5),pqe=$0(6);Kv.range;Sk.range;dqe.range;fqe.range;nv.range;hqe.range;pqe.range;function P0(t){return xo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/N$)}const Jv=P0(0),Ak=P0(1),mqe=P0(2),gqe=P0(3),rv=P0(4),yqe=P0(5),bqe=P0(6);Jv.range;Ak.range;mqe.range;gqe.range;rv.range;yqe.range;bqe.range;const o2=xo(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());o2.range;const a2=xo(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());a2.range;const Nd=xo(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Nd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:xo(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Nd.range;const Bd=xo(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Bd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:xo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Bd.range;function xke(t,e,n,r,i,s){const o=[[Hf,1,Uf],[Hf,5,5*Uf],[Hf,15,15*Uf],[Hf,30,30*Uf],[s,1,Fu],[s,5,5*Fu],[s,15,15*Fu],[s,30,30*Fu],[i,1,qf],[i,3,3*qf],[i,6,6*qf],[i,12,12*qf],[r,1,ah],[r,2,2*ah],[n,1,N$],[e,1,tve],[e,3,3*tve],[t,1,uF]];function a(u,d,c){const f=d<u;f&&([u,d]=[d,u]);const h=c&&typeof c.range=="function"?c:l(u,d,c),p=h?h.range(u,+d+1):[];return f?p.reverse():p}function l(u,d,c){const f=Math.abs(d-u)/c,h=dD(([,,b])=>b).right(o,f);if(h===o.length)return t.every(s0(u/uF,d/uF,c));if(h===0)return tv.every(Math.max(s0(u,d,c),1));const[p,g]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(g)}return[a,l]}const[vqe,xqe]=xke(Bd,a2,Jv,vke,TD,AD),[wqe,_qe]=xke(Nd,o2,Kv,Kf,kD,SD);function cF(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dF(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dw(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wke(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=fw(i),d=hw(i),c=fw(s),f=hw(s),h=fw(o),p=hw(o),g=fw(a),b=hw(a),y=fw(l),v=hw(l),w={a:q,A:Y,b:X,B:te,c:null,d:ave,e:ave,f:Gqe,g:tHe,G:rHe,H:Uqe,I:qqe,j:Hqe,L:_ke,m:Vqe,M:Wqe,p:le,q:ee,Q:cve,s:dve,S:Yqe,u:Xqe,U:Zqe,V:Kqe,w:Jqe,W:Qqe,x:null,X:null,y:eHe,Y:nHe,Z:iHe,"%":uve},E={a:z,A:he,b:fe,B:ze,c:null,d:lve,e:lve,f:lHe,g:bHe,G:xHe,H:sHe,I:oHe,j:aHe,L:Cke,m:uHe,M:cHe,p:He,q:je,Q:cve,s:dve,S:dHe,u:fHe,U:hHe,V:pHe,w:mHe,W:gHe,x:null,X:null,y:yHe,Y:vHe,Z:wHe,"%":uve},S={a:O,A:B,b:K,B:L,c:I,d:sve,e:sve,f:Nqe,g:ive,G:rve,H:ove,I:ove,j:Mqe,L:Pqe,m:Oqe,M:Iqe,p:R,q:Fqe,Q:zqe,s:jqe,S:$qe,u:kqe,U:Tqe,V:Dqe,w:Aqe,W:Lqe,x:$,X:U,y:ive,Y:rve,Z:Rqe,"%":Bqe};w.x=T(n,w),w.X=T(r,w),w.c=T(e,w),E.x=T(n,E),E.X=T(r,E),E.c=T(e,E);function T(we,$e){return function(qe){var Pe=[],St=-1,ht=0,nn=we.length,Vt,Mn,Ze;for(qe instanceof Date||(qe=new Date(+qe));++St<nn;)we.charCodeAt(St)===37&&(Pe.push(we.slice(ht,St)),(Mn=nve[Vt=we.charAt(++St)])!=null?Vt=we.charAt(++St):Mn=Vt==="e"?" ":"0",(Ze=$e[Vt])&&(Vt=Ze(qe,Mn)),Pe.push(Vt),ht=St+1);return Pe.push(we.slice(ht,St)),Pe.join("")}}function D(we,$e){return function(qe){var Pe=dw(1900,void 0,1),St=k(Pe,we,qe+="",0),ht,nn;if(St!=qe.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if($e&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(ht=dF(dw(Pe.y,0,1)),nn=ht.getUTCDay(),ht=nn>4||nn===0?Ak.ceil(ht):Ak(ht),ht=Bp.offset(ht,(Pe.V-1)*7),Pe.y=ht.getUTCFullYear(),Pe.m=ht.getUTCMonth(),Pe.d=ht.getUTCDate()+(Pe.w+6)%7):(ht=cF(dw(Pe.y,0,1)),nn=ht.getDay(),ht=nn>4||nn===0?Sk.ceil(ht):Sk(ht),ht=Kf.offset(ht,(Pe.V-1)*7),Pe.y=ht.getFullYear(),Pe.m=ht.getMonth(),Pe.d=ht.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),nn="Z"in Pe?dF(dw(Pe.y,0,1)).getUTCDay():cF(dw(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(nn+5)%7:Pe.w+Pe.U*7-(nn+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,dF(Pe)):cF(Pe)}}function k(we,$e,qe,Pe){for(var St=0,ht=$e.length,nn=qe.length,Vt,Mn;St<ht;){if(Pe>=nn)return-1;if(Vt=$e.charCodeAt(St++),Vt===37){if(Vt=$e.charAt(St++),Mn=S[Vt in nve?$e.charAt(St++):Vt],!Mn||(Pe=Mn(we,qe,Pe))<0)return-1}else if(Vt!=qe.charCodeAt(Pe++))return-1}return Pe}function R(we,$e,qe){var Pe=u.exec($e.slice(qe));return Pe?(we.p=d.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function O(we,$e,qe){var Pe=h.exec($e.slice(qe));return Pe?(we.w=p.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function B(we,$e,qe){var Pe=c.exec($e.slice(qe));return Pe?(we.w=f.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function K(we,$e,qe){var Pe=y.exec($e.slice(qe));return Pe?(we.m=v.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function L(we,$e,qe){var Pe=g.exec($e.slice(qe));return Pe?(we.m=b.get(Pe[0].toLowerCase()),qe+Pe[0].length):-1}function I(we,$e,qe){return k(we,e,$e,qe)}function $(we,$e,qe){return k(we,n,$e,qe)}function U(we,$e,qe){return k(we,r,$e,qe)}function q(we){return o[we.getDay()]}function Y(we){return s[we.getDay()]}function X(we){return l[we.getMonth()]}function te(we){return a[we.getMonth()]}function le(we){return i[+(we.getHours()>=12)]}function ee(we){return 1+~~(we.getMonth()/3)}function z(we){return o[we.getUTCDay()]}function he(we){return s[we.getUTCDay()]}function fe(we){return l[we.getUTCMonth()]}function ze(we){return a[we.getUTCMonth()]}function He(we){return i[+(we.getUTCHours()>=12)]}function je(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var $e=T(we+="",w);return $e.toString=function(){return we},$e},parse:function(we){var $e=D(we+="",!1);return $e.toString=function(){return we},$e},utcFormat:function(we){var $e=T(we+="",E);return $e.toString=function(){return we},$e},utcParse:function(we){var $e=D(we+="",!0);return $e.toString=function(){return we},$e}}}var nve={"-":"",_:" ",0:"0"},Po=/^\s*\d+/,Eqe=/^%/,Cqe=/[\\^$*+?|[\]().{}]/g;function li(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Sqe(t){return t.replace(Cqe,"\\$&")}function fw(t){return new RegExp("^(?:"+t.map(Sqe).join("|")+")","i")}function hw(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Aqe(t,e,n){var r=Po.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function kqe(t,e,n){var r=Po.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Tqe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Dqe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Lqe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function rve(t,e,n){var r=Po.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ive(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rqe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fqe(t,e,n){var r=Po.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Oqe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sve(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mqe(t,e,n){var r=Po.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ove(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Iqe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function $qe(t,e,n){var r=Po.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Pqe(t,e,n){var r=Po.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Nqe(t,e,n){var r=Po.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bqe(t,e,n){var r=Eqe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function zqe(t,e,n){var r=Po.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function jqe(t,e,n){var r=Po.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ave(t,e){return li(t.getDate(),e,2)}function Uqe(t,e){return li(t.getHours(),e,2)}function qqe(t,e){return li(t.getHours()%12||12,e,2)}function Hqe(t,e){return li(1+Kf.count(Nd(t),t),e,3)}function _ke(t,e){return li(t.getMilliseconds(),e,3)}function Gqe(t,e){return _ke(t,e)+"000"}function Vqe(t,e){return li(t.getMonth()+1,e,2)}function Wqe(t,e){return li(t.getMinutes(),e,2)}function Yqe(t,e){return li(t.getSeconds(),e,2)}function Xqe(t){var e=t.getDay();return e===0?7:e}function Zqe(t,e){return li(Kv.count(Nd(t)-1,t),e,2)}function Eke(t){var e=t.getDay();return e>=4||e===0?nv(t):nv.ceil(t)}function Kqe(t,e){return t=Eke(t),li(nv.count(Nd(t),t)+(Nd(t).getDay()===4),e,2)}function Jqe(t){return t.getDay()}function Qqe(t,e){return li(Sk.count(Nd(t)-1,t),e,2)}function eHe(t,e){return li(t.getFullYear()%100,e,2)}function tHe(t,e){return t=Eke(t),li(t.getFullYear()%100,e,2)}function nHe(t,e){return li(t.getFullYear()%1e4,e,4)}function rHe(t,e){var n=t.getDay();return t=n>=4||n===0?nv(t):nv.ceil(t),li(t.getFullYear()%1e4,e,4)}function iHe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+li(e/60|0,"0",2)+li(e%60,"0",2)}function lve(t,e){return li(t.getUTCDate(),e,2)}function sHe(t,e){return li(t.getUTCHours(),e,2)}function oHe(t,e){return li(t.getUTCHours()%12||12,e,2)}function aHe(t,e){return li(1+Bp.count(Bd(t),t),e,3)}function Cke(t,e){return li(t.getUTCMilliseconds(),e,3)}function lHe(t,e){return Cke(t,e)+"000"}function uHe(t,e){return li(t.getUTCMonth()+1,e,2)}function cHe(t,e){return li(t.getUTCMinutes(),e,2)}function dHe(t,e){return li(t.getUTCSeconds(),e,2)}function fHe(t){var e=t.getUTCDay();return e===0?7:e}function hHe(t,e){return li(Jv.count(Bd(t)-1,t),e,2)}function Ske(t){var e=t.getUTCDay();return e>=4||e===0?rv(t):rv.ceil(t)}function pHe(t,e){return t=Ske(t),li(rv.count(Bd(t),t)+(Bd(t).getUTCDay()===4),e,2)}function mHe(t){return t.getUTCDay()}function gHe(t,e){return li(Ak.count(Bd(t)-1,t),e,2)}function yHe(t,e){return li(t.getUTCFullYear()%100,e,2)}function bHe(t,e){return t=Ske(t),li(t.getUTCFullYear()%100,e,2)}function vHe(t,e){return li(t.getUTCFullYear()%1e4,e,4)}function xHe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?rv(t):rv.ceil(t),li(t.getUTCFullYear()%1e4,e,4)}function wHe(){return"+0000"}function uve(){return"%"}function cve(t){return+t}function dve(t){return Math.floor(+t/1e3)}var Ny,B$,Ake,z$,kke;_He({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _He(t){return Ny=wke(t),B$=Ny.format,Ake=Ny.parse,z$=Ny.utcFormat,kke=Ny.utcParse,Ny}function EHe(t){return new Date(t)}function CHe(t){return t instanceof Date?+t:+new Date(+t)}function j$(t,e,n,r,i,s,o,a,l,u){var d=Zze(),c=d.invert,f=d.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),v=u("%b %d"),w=u("%B"),E=u("%Y");function S(T){return(l(T)<T?h:a(T)<T?p:o(T)<T?g:s(T)<T?b:r(T)<T?i(T)<T?y:v:n(T)<T?w:E)(T)}return d.invert=function(T){return new Date(c(T))},d.domain=function(T){return arguments.length?f(Array.from(T,CHe)):f().map(EHe)},d.ticks=function(T){var D=f();return t(D[0],D[D.length-1],T??10)},d.tickFormat=function(T,D){return D==null?S:u(D)},d.nice=function(T){var D=f();return(!T||typeof T.range!="function")&&(T=e(D[0],D[D.length-1],T??10)),T?f(Kze(D,T)):d},d.copy=function(){return Jze(d,j$(t,e,n,r,i,s,o,a,l,u))},d}function SHe(){return y$.apply(j$(wqe,_qe,Nd,o2,Kv,Kf,kD,SD,Hf,B$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function AHe(){return y$.apply(j$(vqe,xqe,Bd,a2,Jv,Bp,TD,AD,Hf,z$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function DD(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,u=OAe,d,c=!1,f;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-s)*(r*g<r*s?a:l),u(c?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),s=d(e=+e),o=d(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[t,e,n]},h.clamp=function(g){return arguments.length?(c=!!g,h):c},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(b){var y,v,w;return arguments.length?([y,v,w]=b,u=g$(g,[y,v,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(p$),h.rangeRound=p(m$),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return d=g,i=g(t),s=g(e),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Tke(){var t=FAe(DD()(OAe));return t.copy=function(){return fD(t,Tke())},hD.apply(t,arguments)}function Dke(){var t=Qze(DD()).domain([.1,1,10]);return t.copy=function(){return fD(t,Dke()).base(t.base())},hD.apply(t,arguments)}function Lke(){var t=eje(DD());return t.copy=function(){return fD(t,Lke()).constant(t.constant())},hD.apply(t,arguments)}function U$(){var t=tje(DD());return t.copy=function(){return fD(t,U$()).exponent(t.exponent())},hD.apply(t,arguments)}function kHe(){return U$.apply(null,arguments).exponent(.5)}function THe(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],n=t.inversePixelTransform[1],r=Math.sqrt(e*e+n*n),i=t.frameState,s=Z_(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),o=Eje(i.viewState.resolution,r);let a;return new Cje(t.context,r,i.extent,s,i.viewState.rotation,o,a)}function Rke(t,e,n){const r=[];let i=t(0),s=t(1),o=e(i),a=e(s);const l=[s,i],u=[a,o],d=[1,0],c={};let f=1e5,h,p,g,b,y,v;for(;--f>0&&d.length>0;)g=d.pop(),i=l.pop(),o=u.pop(),v=g.toString(),v in c||(r.push(o[0],o[1]),c[v]=!0),b=d.pop(),s=l.pop(),a=u.pop(),y=(g+b)/2,h=t(y),p=e(h),Sje(p[0],p[1],o[0],o[1],a[0],a[1])<n?(r.push(a[0],a[1]),v=b.toString(),c[v]=!0):(d.push(b,y,y,g),u.push(a,p,p,o),l.push(s,h,h,i));return r}function DHe(t,e,n,r,i){const s=ai("EPSG:4326");return Rke(function(o){return[t,e+(n-e)*o]},pk(s,r),i)}function LHe(t,e,n,r,i){const s=ai("EPSG:4326");return Rke(function(o){return[e+(n-e)*o,t]},pk(s,r),i)}const RHe=new K_({color:"rgba(0,0,0,0.2)"}),FHe=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];let OHe=class extends b${constructor(e){e=e||{};const n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,super(n),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=e.targetSize!==void 0?e.targetSize:100,this.maxLines_=e.maxLines!==void 0?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=e.strokeStyle!==void 0?e.strokeStyle:RHe,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,e.showLabels&&(this.lonLabelFormatter_=e.lonLabelFormatter==null?Pbe.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=e.latLabelFormatter==null?Pbe.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=e.lonLabelPosition==null?0:e.lonLabelPosition,this.latLabelPosition_=e.latLabelPosition==null?1:e.latLabelPosition,this.lonLabelStyleBase_=new __({text:e.lonLabelStyle!==void 0?e.lonLabelStyle.clone():new Nbe({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Z4({color:"rgba(0,0,0,1)"}),stroke:new K_({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const i=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new __({text:e.latLabelStyle!==void 0?e.latLabelStyle.clone():new Nbe({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Z4({color:"rgba(0,0,0,1)"}),stroke:new K_({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const i=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(kg.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=e.intervals!==void 0?e.intervals:FHe,this.setSource(new aE({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new Aje,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),this.featurePool_=[],this.lineStyle_=new __({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(e,n){let r=e.slice();return this.projection_&&this.getSource().getWrapX()&&kje(r,this.projection_),this.loadedExtent_&&(Tje(this.loadedExtent_,r,n)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(e,n,r){this.loadedExtent_=e;const i=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=o0(s,e);if(this.renderedExtent_&&J_(this.renderedExtent_,o)&&this.renderedResolution_===n||(this.renderedExtent_=o,this.renderedResolution_=n,v$(o)))return;const a=Pp(o),l=n*n/4;(!this.projection_||!EA(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,n,l);let d=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(d+=this.meridians_.length),this.parallelsLabels_&&(d+=this.parallels_.length);let c;for(;d>this.featurePool_.length;)c=new du,this.featurePool_.push(c);const f=i.getFeaturesCollection();f.clear();let h=0,p,g;for(p=0,g=this.meridians_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.meridians_[p]),c.setStyle(this.lineStyle_),f.push(c);for(p=0,g=this.parallels_.length;p<g;++p)c=this.featurePool_[h++],c.setGeometry(this.parallels_[p]),c.setStyle(this.lineStyle_),f.push(c)}addMeridian_(e,n,r,i,s,o){const a=this.getMeridian_(e,n,r,i,o);if(Qb(a.getExtent(),s)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=l:this.meridiansLabels_[o]={geom:new xc([]),text:l}}this.meridians_[o++]=a}return o}addParallel_(e,n,r,i,s,o){const a=this.getParallel_(e,n,r,i,o);if(Qb(a.getExtent(),s)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=l:this.parallelsLabels_[o]={geom:new xc([]),text:l}}this.parallels_[o++]=a}return o}drawLabels_(e){const n=e.frameState.viewState.rotation,r=e.frameState.viewState.resolution,i=e.frameState.size,s=e.frameState.extent,o=Pp(s);let a=s;if(n){const p=i[0]*r,g=i[1]*r;a=[o[0]-p/2,o[1]-g/2,o[0]+p/2,o[1]+g/2]}let l=0,u=0,d=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),f=ru(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!mk(c,s)){l=Math.floor((s[0]-c[0])/f),u=Math.ceil((s[2]-c[2])/f);const p=Math.abs(n)>Math.PI/2;d=d!==p}const h=THe(e);for(let p=l;p<=u;++p){let g=this.meridians_.length+this.parallels_.length,b,y,v,w;if(this.meridiansLabels_)for(y=0,v=this.meridiansLabels_.length;y<v;++y){const E=this.meridians_[y];if(!n&&p===0)w=this.getMeridianPoint_(E,s,y);else{const S=E.clone();S.translate(p*f,0),S.rotate(-n,o),w=this.getMeridianPoint_(S,a,y),w.rotate(n,o)}b=this.featurePool_[g++],b.setGeometry(w),b.set("graticule_label",this.meridiansLabels_[y].text),h.drawFeature(b,this.lonLabelStyle_(b))}if(this.parallelsLabels_&&(p===l&&d||p===u&&!d))for(y=0,v=this.parallels_.length;y<v;++y){const E=this.parallels_[y];if(!n&&p===0)w=this.getParallelPoint_(E,s,y);else{const S=E.clone();S.translate(p*f,0),S.rotate(-n,o),w=this.getParallelPoint_(S,a,y),w.rotate(n,o)}b=this.featurePool_[g++],b.setGeometry(w),b.set("graticule_label",this.parallelsLabels_[y].text),h.drawFeature(b,this.latLabelStyle_(b))}}}createGraticule_(e,n,r,i){const s=this.getInterval_(r);if(s==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let o=!1;const a=this.projection_.getExtent(),l=ru(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!mk(a,e)&&(ru(e)>=l?(e[0]=a[0],e[2]=a[2]):o=!0);const u=[ks(n[0],this.minX_,this.maxX_),ks(n[1],this.minY_,this.maxY_)],d=this.toLonLatTransform_(u);isNaN(d[1])&&(d[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=ks(d[0],this.minLon_,this.maxLon_),f=ks(d[1],this.minLat_,this.maxLat_);const h=this.maxLines_;let p,g,b,y,v=e;o||(v=[ks(e[0],this.minX_,this.maxX_),ks(e[1],this.minY_,this.maxY_),ks(e[2],this.minX_,this.maxX_),ks(e[3],this.minY_,this.maxY_)]);const w=ev(v,this.toLonLatTransform_,void 0,8);let E=w[3],S=w[2],T=w[1],D=w[0];if(o||(yb(v,this.bottomLeft_)&&(D=this.minLon_,T=this.minLat_),yb(v,this.bottomRight_)&&(S=this.maxLon_,T=this.minLat_),yb(v,this.topLeft_)&&(D=this.minLon_,E=this.maxLat_),yb(v,this.topRight_)&&(S=this.maxLon_,E=this.maxLat_),E=ks(E,f,this.maxLat_),S=ks(S,c,this.maxLon_),T=ks(T,this.minLat_,f),D=ks(D,this.minLon_,c)),c=Math.floor(c/s)*s,y=ks(c,this.minLon_,this.maxLon_),g=this.addMeridian_(y,T,E,i,e,0),p=0,o)for(;(y-=s)>=D&&p++<h;)g=this.addMeridian_(y,T,E,i,e,g);else for(;y!=this.minLon_&&p++<h;)y=Math.max(y-s,this.minLon_),g=this.addMeridian_(y,T,E,i,e,g);if(y=ks(c,this.minLon_,this.maxLon_),p=0,o)for(;(y+=s)<=S&&p++<h;)g=this.addMeridian_(y,T,E,i,e,g);else for(;y!=this.maxLon_&&p++<h;)y=Math.min(y+s,this.maxLon_),g=this.addMeridian_(y,T,E,i,e,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),f=Math.floor(f/s)*s,b=ks(f,this.minLat_,this.maxLat_),g=this.addParallel_(b,D,S,i,e,0),p=0;b!=this.minLat_&&p++<h;)b=Math.max(b-s,this.minLat_),g=this.addParallel_(b,D,S,i,e,g);for(b=ks(f,this.minLat_,this.maxLat_),p=0;b!=this.maxLat_&&p++<h;)b=Math.min(b+s,this.maxLat_),g=this.addParallel_(b,D,S,i,e,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(e){const n=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let i=-1;const s=Math.pow(this.targetSize_*e,2),o=[],a=[];for(let l=0,u=this.intervals_.length;l<u;++l){const d=ks(this.intervals_[l]/2,0,90),c=ks(r,-90+d,90-d);if(o[0]=n-d,o[1]=c-d,a[0]=n+d,a[1]=c+d,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;i=this.intervals_[l]}return i}getMeridian_(e,n,r,i,s){const o=DHe(e,n,r,this.projection_,i);let a=this.meridians_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new Pd(o,"XY"),this.meridians_[s]=a),a}getMeridianPoint_(e,n,r){const i=e.getFlatCoordinates();let s=1,o=i.length-1;i[s]>i[o]&&(s=o,o=1);const a=Math.max(n[1],i[s]),l=Math.min(n[3],i[o]),u=ks(n[1]+Math.abs(n[1]-n[3])*this.lonLabelPosition_,a,l),c=[i[s-1]+(i[o-1]-i[s-1])*(u-i[s])/(i[o]-i[s]),u],f=this.meridiansLabels_[r].geom;return f.setCoordinates(c),f}getMeridians(){return this.meridians_}getParallel_(e,n,r,i,s){const o=LHe(e,n,r,this.projection_,i);let a=this.parallels_[s];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new Pd(o,"XY"),a}getParallelPoint_(e,n,r){const i=e.getFlatCoordinates();let s=0,o=i.length-2;i[s]>i[o]&&(s=o,o=0);const a=Math.max(n[0],i[s]),l=Math.min(n[2],i[o]),u=ks(n[0]+Math.abs(n[0]-n[2])*this.latLabelPosition_,a,l),d=i[s+1]+(i[o+1]-i[s+1])*(u-i[s])/(i[o]-i[s]),c=[u,d],f=this.parallelsLabels_[r].geom;return f.setCoordinates(c),f}getParallels(){return this.parallels_}updateProjectionInfo_(e){const n=ai("EPSG:4326"),r=e.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const i=pk(e,n);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const o=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,u){u=u||2;const d=i(a,l,u);for(let c=0,f=d.length;c<f;c+=u)d[c]<o&&(d[c]+=360);return d}}this.fromLonLatTransform_=pk(n,e);const s=ev([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Pp(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}};class q$ extends $Ae{constructor(e,n,r,i,s){const o=s!==void 0?Tg.IDLE:Tg.LOADED;super(e,n,r,o),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=Tg.ERROR):this.state=Tg.LOADED,this.changed()}load(){this.state==Tg.IDLE&&(this.state=Tg.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const MHe={Point:NHe,LineString:BHe,Polygon:qHe,MultiPoint:jHe,MultiLineString:zHe,MultiPolygon:UHe},IHe={Point:HHe,LineString:GHe,Polygon:VHe,MultiPoint:YHe,MultiLineString:WHe,MultiPolygon:XHe};class $He extends Dje{constructor(e){e=e||{},super(),this.geometryName_=e.geometryName}readFeatureFromObject(e,n,r){const i=e,s=fve(i.geometry,n),o=new du;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),i.attributes){o.setProperties(i.attributes,!0);const a=i.attributes[r];a!==void 0&&o.setId(a)}return o}readFeaturesFromObject(e,n){if(n=n||{},e.features){const r=e,i=[],s=r.features;for(let o=0,a=s.length;o<a;++o)i.push(this.readFeatureFromObject(s[o],n,e.objectIdFieldName));return i}return[this.readFeatureFromObject(e,n)]}readGeometryFromObject(e,n){return fve(e,n)}readProjectionFromObject(e){if(e.spatialReference&&e.spatialReference.wkid!==void 0){const r=e.spatialReference.wkid;return ai("EPSG:"+r)}return null}writeGeometryObject(e,n){return hve(e,this.adaptOptions(n))}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={};if(!e.hasProperties())return r.attributes={},r;const i=e.getProperties(),s=e.getGeometry();if(s){r.geometry=hve(s,n);const o=n&&(n.dataProjection||n.featureProjection);o&&(r.geometry.spatialReference={wkid:Number(ai(o).getCode().split(":").pop())}),delete i[e.getGeometryName()]}return Lje(i)?r.attributes={}:r.attributes=i,r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{features:r}}}function fve(t,e){if(!t)return null;let n;if(typeof t.x=="number"&&typeof t.y=="number")n="Point";else if(t.points)n="MultiPoint";else if(t.paths)t.paths.length===1?n="LineString":n="MultiLineString";else if(t.rings){const i=t,s=Qv(i),o=PHe(i.rings,s);o.length===1?(n="Polygon",t=Object.assign({},t,{rings:o[0]})):(n="MultiPolygon",t=Object.assign({},t,{rings:o}))}const r=MHe[n];return Io(r(t),!1,e)}function PHe(t,e){const n=[],r=[],i=[];let s,o;for(s=0,o=t.length;s<o;++s)n.length=0,Rje(n,0,t[s],e.length),Fje(n,0,n.length,e.length)?r.push([t[s]]):i.push(t[s]);for(;i.length;){const a=i.shift();let l=!1;for(s=r.length-1;s>=0;s--){const u=r[s][0];if(mk(new K4(u).getExtent(),new K4(a).getExtent())){r[s].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function NHe(t){let e;return t.m!==void 0&&t.z!==void 0?e=new xc([t.x,t.y,t.z,t.m],"XYZM"):t.z!==void 0?e=new xc([t.x,t.y,t.z],"XYZ"):t.m!==void 0?e=new xc([t.x,t.y,t.m],"XYM"):e=new xc([t.x,t.y]),e}function BHe(t){const e=Qv(t);return new Pd(t.paths[0],e)}function zHe(t){const e=Qv(t);return new Wv(t.paths,e)}function Qv(t){let e="XY";return t.hasZ===!0&&t.hasM===!0?e="XYZM":t.hasZ===!0?e="XYZ":t.hasM===!0&&(e="XYM"),e}function jHe(t){const e=Qv(t);return new mD(t.points,e)}function UHe(t){const e=Qv(t);return new lE(t.rings,e)}function qHe(t){const e=Qv(t);return new uE(t.rings,e)}function HHe(t,e){const n=t.getCoordinates();let r;const i=t.getLayout();if(i==="XYZ")r={x:n[0],y:n[1],z:n[2]};else if(i==="XYM")r={x:n[0],y:n[1],m:n[2]};else if(i==="XYZM")r={x:n[0],y:n[1],z:n[2],m:n[3]};else if(i==="XY")r={x:n[0],y:n[1]};else throw new Error("Invalid geometry layout");return r}function fE(t){const e=t.getLayout();return{hasZ:e==="XYZ"||e==="XYZM",hasM:e==="XYM"||e==="XYZM"}}function GHe(t,e){const n=fE(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}}function VHe(t,e){const n=fE(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}}function WHe(t,e){const n=fE(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}}function YHe(t,e){const n=fE(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}}function XHe(t,e){const n=fE(t),r=t.getCoordinates(!1),i=[];for(let s=0;s<r.length;s++)for(let o=r[s].length-1;o>=0;o--)i.push(r[s][o]);return{hasZ:n.hasZ,hasM:n.hasM,rings:i}}function hve(t,e){const n=IHe[t.getType()];return n(Io(t,!0,e),e)}const Jf="http://www.opengis.net/gml",ZHe=/^\s*$/;class un extends gD{constructor(e){super(),e=e||{},this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:kn(this.readFeaturesInternal),featureMembers:Rn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,n){const r=e.localName;let i=null;if(r=="FeatureCollection")i=Rt([],this.FEATURE_COLLECTION_PARSERS,e,n,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const s=n[0];let o=s.featureType,a=s.featureNS;const l="p",u="p0";if(!o&&e.childNodes){o=[],a={};for(let f=0,h=e.childNodes.length;f<h;++f){const p=e.childNodes[f];if(p.nodeType===1){const g=p.nodeName.split(":").pop();if(!o.includes(g)){let b="",y=0;const v=p.namespaceURI;for(const w in a){if(a[w]===v){b=w;break}++y}b||(b=l+y,a[b]=v),o.push(b+":"+g)}}}r!="featureMember"&&(s.featureType=o,s.featureNS=a)}if(typeof a=="string"){const f=a;a={},a[u]=f}const d={},c=Array.isArray(o)?o:[o];for(const f in a){const h={};for(let p=0,g=c.length;p<g;++p)(c[p].includes(":")?c[p].split(":")[0]:u)===f&&(h[c[p].split(":").pop()]=r=="featureMembers"?kn(this.readFeatureElement,this):Rn(this.readFeatureElement,this));d[a[f]]=h}r=="featureMember"||r=="member"?i=Rt(void 0,d,e,n):i=Rt([],d,e,n)}return i===null&&(i=[]),i}readGeometryOrExtent(e,n){const r=n[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),Rt(null,this.GEOMETRY_PARSERS,e,n,this)}readExtentElement(e,n){const r=n[0],i=this.readGeometryOrExtent(e,n);return i?x$(i,r):void 0}readGeometryElement(e,n){const r=n[0],i=this.readGeometryOrExtent(e,n);return i?Io(i,!1,r):void 0}readFeatureElementInternal(e,n,r){let i;const s={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let u;const d=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(u=gk(l,!1),ZHe.test(u)&&(u=void 0)):(r&&(u=d==="boundedBy"?this.readExtentElement(l,n):this.readGeometryElement(l,n)),u?d!=="boundedBy"&&(i=d):u=this.readFeatureElementInternal(l,n,!1));const c=l.attributes.length;if(c>0&&!(u instanceof Oje)){u={_content_:u};for(let f=0;f<c;f++){const h=l.attributes[f].name;u[h]=l.attributes[f].value}}s[d]?(s[d]instanceof Array||(s[d]=[s[d]]),s[d].push(u)):s[d]=u}if(!r)return s;const o=new du(s);i&&o.setGeometryName(i);const a=e.getAttribute("fid")||Mje(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,n){return this.readFeatureElementInternal(e,n,!0)}readPoint(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new xc(r,"XYZ")}readMultiPoint(e,n){const r=Rt([],this.MULTIPOINT_PARSERS,e,n,this);if(r)return new mD(r)}readMultiLineString(e,n){const r=Rt([],this.MULTILINESTRING_PARSERS,e,n,this);if(r)return new Wv(r)}readMultiPolygon(e,n){const r=Rt([],this.MULTIPOLYGON_PARSERS,e,n,this);if(r)return new lE(r)}pointMemberParser(e,n){Np(this.POINTMEMBER_PARSERS,e,n,this)}lineStringMemberParser(e,n){Np(this.LINESTRINGMEMBER_PARSERS,e,n,this)}polygonMemberParser(e,n){Np(this.POLYGONMEMBER_PARSERS,e,n,this)}readLineString(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new Pd(r,"XYZ")}readFlatLinearRing(e,n){const r=Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this);if(r)return r}readLinearRing(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new K4(r,"XYZ")}readPolygon(e,n){const r=Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)yk(i,r[o]),s.push(i.length);return new uE(i,"XYZ",s)}}readFlatCoordinatesFromNode(e,n){return Rt(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}readGeometryFromNode(e,n){const r=this.readGeometryElement(e,[this.getReadOptions(e,n||{})]);return r||null}readFeaturesFromNode(e,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,n)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return ai(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}un.prototype.namespace=Jf;un.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};un.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};un.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};un.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};un.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};un.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString)}};un.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing)}};const KHe=Jf+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",JHe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class pr extends un{constructor(e){e=e||{},super(e),this.FEATURE_COLLECTION_PARSERS[Jf].featureMember=kn(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:KHe}readFlatCoordinates(e,n){const r=gk(e,!1).replace(/^\s*|\s*$/g,""),s=n[0].srsName;let o="enu";if(s){const u=ai(s);u&&(o=u.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let u=0,d=a.length;u<d;u++){const c=a[u].split(/,+/),f=parseFloat(c[0]),h=parseFloat(c[1]),p=c.length===3?parseFloat(c[2]):0;o.startsWith("en")?l.push(f,h,p):l.push(h,f,p)}return l}readBox(e,n){const r=Rt([null],this.BOX_PARSERS_,e,n,this);return PAe(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,n){const r=Rt(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(e,n){const r=Rt(void 0,this.RING_PARSERS,e,n,this);if(r){const i=n[n.length-1];i[0]=r}}GEOMETRY_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),tr("http://www.opengis.net/gml",r)}writeFeatureElement(e,n,r){const i=n.getId();i&&e.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const f in c){const h=c[f];h!=null&&(l.push(f),u.push(h),f==a||typeof h.getSimplifiedGeometry=="function"?f in s.serializers[o]||(s.serializers[o][f]=Ge(this.writeGeometryElement,this)):f in s.serializers[o]||(s.serializers[o][f]=Ge(br)))}}const d=Object.assign({},s);d.node=e,Ii(d,s.serializers,iu(void 0,o),u,r,l)}writeCurveOrLineString(e,n,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,n,r)}else if(e.nodeName==="Curve"){const o=tr(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeLineStringOrCurveMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeMultiCurveOrLineString(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&e.setAttribute("srsName",o);const l=n.getLineStrings();Ii({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(e,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=e;let o;Array.isArray(n)?o=x$(n,i):o=Io(n,!0,i),Ii(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(e){const n=tr(e,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=n.getCoordinates(),l=a.length,u=new Array(l);for(let d=0;d<l;++d){const c=a[d];u[d]=this.getCoords_(c,o,s)}br(e,u.join(" "))}writeCurveSegments_(e,n,r){const i=tr(e.namespaceURI,"LineStringSegment");e.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=n.getLinearRings();Ii({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=tr(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),tr(s.namespaceURI,o!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,n,r){const i=tr(e.namespaceURI,"PolygonPatch");e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeRing(e,n,r){const i=tr(e.namespaceURI,"LinearRing");e.appendChild(i),this.writeLinearRing(i,n,r)}getCoords_(e,n,r){let s=(n?ai(n).getAxisOrientation():"enu").startsWith("en")?e[0]+","+e[1]:e[1]+","+e[0];if(r){const o=e[2]||0;s+=","+o}return s}writePoint(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=n.getCoordinates(),u=this.getCoords_(l,o,s);br(a,u)}writeMultiPoint(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;o&&e.setAttribute("srsName",o);const a=n.getPoints();Ii({node:e,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,iu("pointMember"),a,r,void 0,this)}writePointMember(e,n,r){const i=tr(e.namespaceURI,"Point");e.appendChild(i),this.writePoint(i,n,r)}writeLinearRing(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,n,r)}writeMultiSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&e.setAttribute("srsName",o);const l=n.getPolygons();Ii({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writeEnvelope(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Ii({node:e},this.ENVELOPE_SERIALIZERS,Yv,a,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){const i=n[n.length-1].node;return tr("http://www.opengis.net/gml",JHe[i.nodeName])}}pr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Rn(pr.prototype.readFlatCoordinates)}};pr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:pr.prototype.innerBoundaryIsParser,outerBoundaryIs:pr.prototype.outerBoundaryIsParser}};pr.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:kn(pr.prototype.readFlatCoordinates)}};pr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Box:Rn(pr.prototype.readBox)}};pr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(pr.prototype.writeCurveOrLineString),MultiCurve:Ge(pr.prototype.writeMultiCurveOrLineString),Point:Ge(pr.prototype.writePoint),MultiPoint:Ge(pr.prototype.writeMultiPoint),LineString:Ge(pr.prototype.writeCurveOrLineString),MultiLineString:Ge(pr.prototype.writeMultiCurveOrLineString),LinearRing:Ge(pr.prototype.writeLinearRing),Polygon:Ge(pr.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(pr.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(pr.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(pr.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(pr.prototype.writeEnvelope)}};pr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(pr.prototype.writeLineStringOrCurveMember),curveMember:Ge(pr.prototype.writeLineStringOrCurveMember)}};pr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Ge(pr.prototype.writeRing),innerBoundaryIs:Ge(pr.prototype.writeRing)}};pr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(pr.prototype.writePointMember)}};pr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(pr.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(pr.prototype.writeSurfaceOrPolygonMember)}};pr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(br),upperCorner:Ge(br)}};const QHe=Jf+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",eGe={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class vt extends un{constructor(e){e=e||{},super(e),this.surface_=e.surface!==void 0?e.surface:!1,this.curve_=e.curve!==void 0?e.curve:!1,this.multiCurve_=e.multiCurve!==void 0?e.multiCurve:!0,this.multiSurface_=e.multiSurface!==void 0?e.multiSurface:!0,this.schemaLocation=e.schemaLocation?e.schemaLocation:QHe,this.hasZ=e.hasZ!==void 0?e.hasZ:!1}readMultiCurve(e,n){const r=Rt([],this.MULTICURVE_PARSERS,e,n,this);if(r)return new Wv(r)}readFlatCurveRing(e,n){const r=Rt([],this.MULTICURVE_PARSERS,e,n,this),i=[];for(let s=0,o=r.length;s<o;++s)yk(i,r[s].getFlatCoordinates());return i}readMultiSurface(e,n){const r=Rt([],this.MULTISURFACE_PARSERS,e,n,this);if(r)return new lE(r)}curveMemberParser(e,n){Np(this.CURVEMEMBER_PARSERS,e,n,this)}surfaceMemberParser(e,n){Np(this.SURFACEMEMBER_PARSERS,e,n,this)}readPatch(e,n){return Rt([null],this.PATCHES_PARSERS,e,n,this)}readSegment(e,n){return Rt([],this.SEGMENTS_PARSERS,e,n,this)}readPolygonPatch(e,n){return Rt([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this)}readLineStringSegment(e,n){return Rt([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}interiorParser(e,n){const r=Rt(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}exteriorParser(e,n){const r=Rt(void 0,this.RING_PARSERS,e,n,this);if(r){const i=n[n.length-1];i[0]=r}}readSurface(e,n){const r=Rt([null],this.SURFACE_PARSERS,e,n,this);if(r&&r[0]){const i=r[0],s=[i.length];let o,a;for(o=1,a=r.length;o<a;++o)yk(i,r[o]),s.push(i.length);return new uE(i,"XYZ",s)}}readCurve(e,n){const r=Rt([null],this.CURVE_PARSERS,e,n,this);if(r)return new Pd(r,"XYZ")}readEnvelope(e,n){const r=Rt([null],this.ENVELOPE_PARSERS,e,n,this);return PAe(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,n){let r=gk(e,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,s=[];let o;for(;o=i.exec(r);)s.push(parseFloat(o[1])),r=r.substr(o[0].length);if(r!=="")return;const l=n[0].srsName;if((l?ai(l).getAxisOrientation():"enu")==="neu")for(let c=0,f=s.length;c<f;c+=3){const h=s[c],p=s[c+1];s[c]=p,s[c+1]=h}const d=s.length;if(d==2&&s.push(0),d!==0)return s}readFlatPosList(e,n){const r=gk(e,!1).replace(/^\s*|\s*$/g,""),i=n[0],s=i.srsName,o=i.srsDimension,a=s?ai(s).getAxisOrientation():"enu",l=r.split(/\s+/);let u=2;e.getAttribute("srsDimension")?u=Ep(e.getAttribute("srsDimension")):e.getAttribute("dimension")?u=Ep(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?u=Ep(e.parentNode.getAttribute("srsDimension")):o&&(u=Ep(o));const d=a.startsWith("en");let c,f,h;const p=[];for(let g=0,b=l.length;g<b;g+=u)c=parseFloat(l[g]),f=parseFloat(l[g+1]),h=u===3?parseFloat(l[g+2]):0,d?p.push(c,f,h):p.push(f,c,h);return p}writePos_(e,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=i.srsName,l=a?ai(a).getAxisOrientation():"enu",u=n.getCoordinates();let d=l.startsWith("en")?u[0]+" "+u[1]:u[1]+" "+u[0];if(s){const c=u[2]||0;d+=" "+c}br(e,d)}getCoords_(e,n,r){let s=(n?ai(n).getAxisOrientation():"enu").startsWith("en")?e[0]+" "+e[1]:e[1]+" "+e[0];if(r){const o=e[2]||0;s+=" "+o}return s}writePosList_(e,n,r){const i=r[r.length-1],s=i.hasZ,o=s?"3":"2";e.setAttribute("srsDimension",o);const a=i.srsName,l=n.getCoordinates(),u=l.length,d=new Array(u);let c;for(let f=0;f<u;++f)c=l[f],d[f]=this.getCoords_(c,a,s);br(e,d.join(" "))}writePoint(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=tr(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,n,r)}writeEnvelope(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=["lowerCorner","upperCorner"],a=[n[0]+" "+n[1],n[2]+" "+n[3]];Ii({node:e},this.ENVELOPE_SERIALIZERS,Yv,a,r,o,this)}writeLinearRing(e,n,r){const s=r[r.length-1].srsName;s&&e.setAttribute("srsName",s);const o=tr(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,n,r)}RING_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.node,o=i.exteriorWritten;return o===void 0&&(i.exteriorWritten=!0),tr(s.namespaceURI,o!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName;if(e.nodeName!=="PolygonPatch"&&o&&e.setAttribute("srsName",o),e.nodeName==="Polygon"||e.nodeName==="PolygonPatch"){const a=n.getLinearRings();Ii({node:e,hasZ:s,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(e.nodeName==="Surface"){const a=tr(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(e,n,r){const s=r[r.length-1].srsName;if(e.nodeName!=="LineStringSegment"&&s&&e.setAttribute("srsName",s),e.nodeName==="LineString"||e.nodeName==="LineStringSegment"){const o=tr(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,n,r)}else if(e.nodeName==="Curve"){const o=tr(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeMultiSurfaceOrPolygon(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.surface;o&&e.setAttribute("srsName",o);const l=n.getPolygons();Ii({node:e,hasZ:s,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(e,n,r){const i=r[r.length-1],s=i.srsName,o=i.hasZ;s&&e.setAttribute("srsName",s);const a=n.getPoints();Ii({node:e,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,iu("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(e,n,r){const i=r[r.length-1],s=i.hasZ,o=i.srsName,a=i.curve;o&&e.setAttribute("srsName",o);const l=n.getLineStrings();Ii({node:e,hasZ:s,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(e,n,r){const i=tr(e.namespaceURI,"LinearRing");e.appendChild(i),this.writeLinearRing(i,n,r)}writeSurfaceOrPolygonMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r))}writePointMember(e,n,r){const i=tr(e.namespaceURI,"Point");e.appendChild(i),this.writePoint(i,n,r)}writeLineStringOrCurveMember(e,n,r){const i=this.GEOMETRY_NODE_FACTORY_(n,r);i&&(e.appendChild(i),this.writeCurveOrLineString(i,n,r))}writeSurfacePatches_(e,n,r){const i=tr(e.namespaceURI,"PolygonPatch");e.appendChild(i),this.writeSurfaceOrPolygon(i,n,r)}writeCurveSegments_(e,n,r){const i=tr(e.namespaceURI,"LineStringSegment");e.appendChild(i),this.writeCurveOrLineString(i,n,r)}writeGeometryElement(e,n,r){const i=r[r.length-1],s=Object.assign({},i);s.node=e;let o;Array.isArray(n)?o=x$(n,i):o=Io(n,!0,i),Ii(s,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(e,n,r){const i=n.getId();i&&e.setAttribute("fid",i);const s=r[r.length-1],o=s.featureNS,a=n.getGeometryName();s.serializers||(s.serializers={},s.serializers[o]={});const l=[],u=[];if(n.hasProperties()){const c=n.getProperties();for(const f in c){const h=c[f];h!=null&&(l.push(f),u.push(h),f==a||typeof h.getSimplifiedGeometry=="function"?f in s.serializers[o]||(s.serializers[o][f]=Ge(this.writeGeometryElement,this)):f in s.serializers[o]||(s.serializers[o][f]=Ge(br)))}}const d=Object.assign({},s);d.node=e,Ii(d,s.serializers,iu(void 0,o),u,r,l)}writeFeatureMembers_(e,n,r){const i=r[r.length-1],s=i.featureType,o=i.featureNS,a={};a[o]={},a[o][s]=Ge(this.writeFeatureElement,this);const l=Object.assign({},i);l.node=e,Ii(l,a,iu(s,o),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){const i=n[n.length-1].node;return tr(this.namespace,eGe[i.nodeName])}GEOMETRY_NODE_FACTORY_(e,n,r){const i=n[n.length-1],s=i.multiSurface,o=i.surface,a=i.curve,l=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),r==="MultiPolygon"&&s===!0?r="MultiSurface":r==="Polygon"&&o===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),tr(this.namespace,r)}writeGeometryNode(e,n){n=this.adaptOptions(n);const r=tr(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(i,n),this.writeGeometryElement(r,e,[i]),r}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=tr(this.namespace,"featureMembers");r.setAttributeNS(Q_,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(i,n),this.writeFeatureMembers_(r,e,[i]),r}}vt.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(pr.prototype.readFlatCoordinates)}};vt.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};vt.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(vt.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(vt.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(vt.prototype.readEnvelope)}};vt.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:kn(vt.prototype.curveMemberParser),curveMembers:kn(vt.prototype.curveMemberParser)}};vt.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:kn(vt.prototype.surfaceMemberParser),surfaceMembers:kn(vt.prototype.surfaceMemberParser)}};vt.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:kn(un.prototype.readLineString),Curve:kn(vt.prototype.readCurve)}};vt.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:kn(un.prototype.readPolygon),Surface:kn(vt.prototype.readSurface)}};vt.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:Rn(vt.prototype.readPatch)}};vt.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:Rn(vt.prototype.readSegment)}};vt.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:kn(vt.prototype.readFlatPosList),upperCorner:kn(vt.prototype.readFlatPosList)}};vt.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};vt.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:NAe(vt.prototype.readLineStringSegment)}};un.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(vt.prototype.readFlatCurveRing)}};vt.prototype.writeFeatures;vt.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};vt.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Ge(br),upperCorner:Ge(br)}};vt.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};vt.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Ge(vt.prototype.writePointMember)}};vt.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};vt.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(vt.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};const H$=vt;H$.prototype.writeFeatures;H$.prototype.writeFeaturesNode;const ls=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],tGe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",nGe={rte:Fke,trk:Oke,wpt:Mke},rGe=Xt(ls,{rte:kn(Fke),trk:kn(Oke),wpt:kn(Mke)}),iGe=Xt(ls,{text:Ue(Dt,"linkText"),type:Ue(Dt,"linkType")}),sGe=Xt(ls,{name:Ue(Dt),email:FGe,link:hE}),oGe=Xt(ls,{name:Ue(Dt),desc:Ue(Dt),author:Ue(DGe),copyright:Ue(LGe),link:hE,time:Ue(yD),keywords:Ue(Dt),bounds:RGe,extensions:LD}),aGe=Xt(ls,{year:Ue(Rs),license:Ue(Dt)}),lGe=Xt(ls,{rte:Ge($Ge),trk:Ge(PGe),wpt:Ge(BGe)});class uGe extends gD{constructor(e){super(),e=e||{},this.dataProjection=ai("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(bk(e)):vk(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!ls.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(ls.includes(n.namespaceURI)&&n.localName==="metadata")return Rt({},oGe,n,[]);return null}readFeatureFromNode(e,n){if(!ls.includes(e.namespaceURI))return null;const r=nGe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!ls.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=Rt([],rGe,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=tr("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Q_),r.setAttributeNS(Q_,"xsi:schemaLocation",tGe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Ii({node:r},lGe,TGe,e,[n]),r}}const cGe=Xt(ls,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:hE,number:Ue(Rs),extensions:LD,type:Ue(Dt),rtept:OGe}),dGe=Xt(ls,{ele:Ue(Aa),time:Ue(yD)}),fGe=Xt(ls,{name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:hE,number:Ue(Rs),type:Ue(Dt),extensions:LD,trkseg:IGe}),hGe=Xt(ls,{trkpt:MGe}),pGe=Xt(ls,{ele:Ue(Aa),time:Ue(yD)}),mGe=Xt(ls,{ele:Ue(Aa),time:Ue(yD),magvar:Ue(Aa),geoidheight:Ue(Aa),name:Ue(Dt),cmt:Ue(Dt),desc:Ue(Dt),src:Ue(Dt),link:hE,sym:Ue(Dt),type:Ue(Dt),fix:Ue(Dt),sat:Ue(Rs),hdop:Ue(Aa),vdop:Ue(Aa),pdop:Ue(Aa),ageofdgpsdata:Ue(Aa),dgpsid:Ue(Rs),extensions:LD}),gGe=["text","type"],yGe=Xt(ls,{text:Ge(br),type:Ge(br)}),bGe=Xt(ls,["name","cmt","desc","src","link","number","type","rtept"]),vGe=Xt(ls,{name:Ge(br),cmt:Ge(br),desc:Ge(br),src:Ge(br),link:Ge(W$),number:Ge(xk),type:Ge(br),rtept:BAe(Ge(Y$))}),xGe=Xt(ls,["ele","time"]),wGe=Xt(ls,["name","cmt","desc","src","link","number","type","trkseg"]),_Ge=Xt(ls,{name:Ge(br),cmt:Ge(br),desc:Ge(br),src:Ge(br),link:Ge(W$),number:Ge(xk),type:Ge(br),trkseg:BAe(Ge(NGe))}),EGe=iu("trkpt"),CGe=Xt(ls,{trkpt:Ge(Y$)}),SGe=Xt(ls,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),AGe=Xt(ls,{ele:Ge(lg),time:Ge(Ije),magvar:Ge(lg),geoidheight:Ge(lg),name:Ge(br),cmt:Ge(br),desc:Ge(br),src:Ge(br),link:Ge(W$),sym:Ge(br),type:Ge(br),fix:Ge(br),sat:Ge(xk),hdop:Ge(lg),vdop:Ge(lg),pdop:Ge(lg),ageofdgpsdata:Ge(lg),dgpsid:Ge(xk)}),kGe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function TGe(t,e,n){const r=t.getGeometry();if(r){const i=kGe[r.getType()];if(i){const s=e[e.length-1].node;return tr(s.namespaceURI,i)}}}function G$(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function V$(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function DGe(t,e){const n=Rt({},sGe,t,e);if(n)return n}function LGe(t,e){const n=Rt({},aGe,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function RGe(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function FGe(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function hE(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),Np(iGe,t,e)}function LD(t,e){const n=e[e.length-1];n.extensionsNode_=t}function OGe(t,e){const n=Rt({},dGe,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;G$(i,s,t,n)}}function MGe(t,e){const n=Rt({},pGe,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;G$(i,s,t,n)}}function IGe(t,e){const n=e[e.length-1];Np(hGe,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function Fke(t,e){const n=e[0],r=Rt({flatCoordinates:[],layoutOptions:{}},cGe,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=V$(s,i),a=new Pd(i,o);Io(a,!1,n);const l=new du(a);return l.setProperties(r,!0),l}function Oke(t,e){const n=e[0],r=Rt({flatCoordinates:[],ends:[],layoutOptions:{}},fGe,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=V$(o,i,s),l=new Wv(i,a,s);Io(l,!1,n);const u=new du(l);return u.setProperties(r,!0),u}function Mke(t,e){const n=e[0],r=Rt({},mGe,t,e);if(!r)return;const i={},s=G$([],i,t,r),o=V$(i,s),a=new xc(s,o);Io(a,!1,n);const l=new du(a);return l.setProperties(r,!0),l}function W$(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];Ii({node:t},yGe,Yv,s,n,gGe)}function Y$(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=t.nodeName=="rtept"?xGe[s]:SGe[s],u=w$(o,l);Ii({node:t,properties:o},AGe,Yv,u,n,l)}function $Ge(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="LineString"){const d=Io(o,!0,r);s.geometryLayout=d.getLayout(),i.rtept=d.getCoordinates()}const a=n[n.length-1].node,l=bGe[a.namespaceURI],u=w$(i,l);Ii(s,vGe,Yv,u,n,l)}function PGe(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const d=Io(o,!0,r);i.trkseg=d.getLineStrings()}const a=n[n.length-1].node,l=wGe[a.namespaceURI],u=w$(i,l);Ii(s,_Ge,Yv,u,n,l)}function NGe(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},Ii(r,CGe,EGe,e.getCoordinates(),n)}function BGe(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Io(s,!0,r);i.geometryLayout=o.getLayout(),Y$(t,o.getCoordinates(),n)}}class X$ extends zAe{constructor(){super()}getType(){return"text"}readFeature(e,n){return this.readFeatureFromText(rS(e),this.adaptOptions(n))}readFeatureFromText(e,n){return Mf()}readFeatures(e,n){return this.readFeaturesFromText(rS(e),this.adaptOptions(n))}readFeaturesFromText(e,n){return Mf()}readGeometry(e,n){return this.readGeometryFromText(rS(e),this.adaptOptions(n))}readGeometryFromText(e,n){return Mf()}readProjection(e){return this.readProjectionFromText(rS(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,n){return this.writeFeatureText(e,this.adaptOptions(n))}writeFeatureText(e,n){return Mf()}writeFeatures(e,n){return this.writeFeaturesText(e,this.adaptOptions(n))}writeFeaturesText(e,n){return Mf()}writeGeometry(e,n){return this.writeGeometryText(e,this.adaptOptions(n))}writeGeometryText(e,n){return Mf()}}function rS(t){return typeof t=="string"?t:""}const zGe=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,jGe=/^H.([A-Z]{3}).*?:(.*)/,UGe=/^HFDTE(\d{2})(\d{2})(\d{2})/,qGe=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,HGe=/\r\n|\r|\n/;class GGe extends X${constructor(e){super(),e=e||{},this.dataProjection=ai("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(e,n){const r=this.altitudeMode_,i=e.split(HGe),s={},o=[];let a=2e3,l=0,u=1,d=-1,c,f;for(c=0,f=i.length;c<f;++c){const b=i[c];let y;if(b.charAt(0)=="B"){if(y=zGe.exec(b),y){const v=parseInt(y[1],10),w=parseInt(y[2],10),E=parseInt(y[3],10);let S=parseInt(y[4],10)+parseInt(y[5],10)/6e4;this.lad_&&(S+=parseInt(b.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),y[6]=="S"&&(S=-S);let T=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(this.lod_&&(T+=parseInt(b.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),y[9]=="W"&&(T=-T),o.push(T,S),r!="none"){let k;r=="gps"?k=parseInt(y[11],10):r=="barometric"?k=parseInt(y[12],10):k=0,o.push(k)}let D=Date.UTC(a,l,u,v,w,E);D<d&&(D=Date.UTC(a,l,u+1,v,w,E)),o.push(D/1e3),d=D}}else if(b.charAt(0)=="H")y=qGe.exec(b),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=UGe.exec(b),y?(u=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=jGe.exec(b),y&&(s[y[1]]=y[2].trim())));else if(b.charAt(0)=="I"){const v=parseInt(b.slice(1,3),10);for(let w=0;w<v;w++){const E=b.slice(7+w*7,10+w*7);if(E==="LAD"||E==="LOD"){const S=parseInt(b.slice(3+w*7,5+w*7),10)-1,T=parseInt(b.slice(5+w*7,7+w*7),10);E==="LAD"?(this.lad_=!0,this.ladStart_=S,this.ladStop_=T):E==="LOD"&&(this.lod_=!0,this.lodStart_=S,this.lodStop_=T)}}}}if(o.length===0)return null;const h=r=="none"?"XYM":"XYZM",p=new Pd(o,h),g=new du(Io(p,!1,n));return g.setProperties(s,!0),g}readFeaturesFromText(e,n){const r=this.readFeatureFromText(e,n);return r?[r]:[]}}const Js={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},l0={};l0[Js.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};l0[Js.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};l0[Js.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};l0.none={none:{supports:[],formats:[],qualities:[]}};const VGe=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,pve=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,WGe=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function YGe(t){let e=t.getComplianceLevelSupportedFeatures();return e===void 0&&(e=l0[Js.VERSION1].level0),{url:t.imageInfo["@id"]===void 0?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,t.imageInfo.formats===void 0?[]:t.imageInfo.formats],qualities:[...e.qualities,t.imageInfo.qualities===void 0?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:t.imageInfo.tile_width!==void 0?t.imageInfo.tile_height!==void 0?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:t.imageInfo.tile_height!=null?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}}function XGe(t){const e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,r=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],s=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:t.imageInfo.sizes===void 0?void 0:t.imageInfo.sizes.map(function(o){return[o.width,o.height]}),tileSize:t.imageInfo.tiles===void 0?void 0:[t.imageInfo.tiles.map(function(o){return o.width})[0],t.imageInfo.tiles.map(function(o){return o.height===void 0?o.width:o.height})[0]],resolutions:t.imageInfo.tiles===void 0?void 0:t.imageInfo.tiles.map(function(o){return o.scaleFactors})[0],supports:[...e.supports,...r],formats:[...e.formats,...i],qualities:[...e.qualities,...s]}}function ZGe(t){const e=t.getComplianceLevelSupportedFeatures(),n=t.imageInfo.extraFormats===void 0?e.formats:[...e.formats,...t.imageInfo.extraFormats],r=t.imageInfo.preferredFormats!==void 0&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter(function(i){return["jpg","png","gif"].includes(i)}).reduce(function(i,s){return i===void 0&&n.includes(s)?s:i},void 0):void 0;return{url:t.imageInfo.id,sizes:t.imageInfo.sizes===void 0?void 0:t.imageInfo.sizes.map(function(i){return[i.width,i.height]}),tileSize:t.imageInfo.tiles===void 0?void 0:[t.imageInfo.tiles.map(function(i){return i.width})[0],t.imageInfo.tiles.map(function(i){return i.height})[0]],resolutions:t.imageInfo.tiles===void 0?void 0:t.imageInfo.tiles.map(function(i){return i.scaleFactors})[0],supports:t.imageInfo.extraFeatures===void 0?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:n,qualities:t.imageInfo.extraQualities===void 0?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:r}}const RD={};RD[Js.VERSION1]=YGe;RD[Js.VERSION2]=XGe;RD[Js.VERSION3]=ZGe;class KGe{constructor(e){this.setImageInfo(e)}setImageInfo(e){typeof e=="string"?this.imageInfo=JSON.parse(e):this.imageInfo=e}getImageApiVersion(){if(this.imageInfo===void 0)return;let e=this.imageInfo["@context"]||"ol-no-context";typeof e=="string"&&(e=[e]);for(let n=0;n<e.length;n++)switch(e[n]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Js.VERSION1;case"http://iiif.io/api/image/2/context.json":return Js.VERSION2;case"http://iiif.io/api/image/3/context.json":return Js.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Js.VERSION1)&&this.imageInfo.identifier)return Js.VERSION1;break}Oc(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(e){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(e===void 0&&(e=this.getImageApiVersion()),e){case Js.VERSION1:if(VGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Js.VERSION3:if(WGe.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Js.VERSION2:if(typeof this.imageInfo.profile=="string"&&pve.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&pve.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(e){const n=this.getComplianceLevelEntryFromProfile(e);if(n===void 0)return;const r=n.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const e=this.getImageApiVersion(),n=this.getComplianceLevelFromProfile(e);return n===void 0?l0.none.none:l0[e][n]}getTileSourceOptions(e){const n=e||{},r=this.getImageApiVersion();if(r===void 0)return;const i=r===void 0?void 0:RD[r](this);if(i!==void 0)return{url:i.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:n.format!==void 0&&i.formats.includes(n.format)?n.format:i.preferredFormat!==void 0?i.preferredFormat:"jpg",supports:i.supports,quality:n.quality&&i.qualities.includes(n.quality)?n.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort(function(s,o){return o-s}):void 0,tileSize:i.tileSize}}}class Z${read(e){if(!e)return null;if(typeof e=="string"){const n=bk(e);return this.readFromDocument(n)}return vk(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFromNode(n);return null}readFromNode(e){Mf()}}const JGe="http://www.w3.org/1999/xlink";function e1(t){return t.getAttributeNS(JGe,"href")}const Ul=[null,"http://www.opengis.net/ows/1.1"],QGe=Xt(Ul,{ServiceIdentification:Ue(EVe),ServiceProvider:Ue(SVe),OperationsMetadata:Ue(wVe)});class Ike extends Z${constructor(){super()}readFromNode(e){const n=Rt({},QGe,e,[]);return n||null}}const eVe=Xt(Ul,{DeliveryPoint:Ue(Dt),City:Ue(Dt),AdministrativeArea:Ue(Dt),PostalCode:Ue(Dt),Country:Ue(Dt),ElectronicMailAddress:Ue(Dt)}),tVe=Xt(Ul,{Value:yi(AVe)}),nVe=Xt(Ul,{AllowedValues:Ue(pVe)}),rVe=Xt(Ul,{Phone:Ue(_Ve),Address:Ue(hVe)}),iVe=Xt(Ul,{HTTP:Ue(vVe)}),sVe=Xt(Ul,{Get:yi(bVe),Post:void 0}),oVe=Xt(Ul,{DCP:Ue(yVe)}),aVe=Xt(Ul,{Operation:xVe}),lVe=Xt(Ul,{Voice:Ue(Dt),Facsimile:Ue(Dt)}),uVe=Xt(Ul,{Constraint:yi(mVe)}),cVe=Xt(Ul,{IndividualName:Ue(Dt),PositionName:Ue(Dt),ContactInfo:Ue(gVe)}),dVe=Xt(Ul,{Abstract:Ue(Dt),AccessConstraints:Ue(Dt),Fees:Ue(Dt),Title:Ue(Dt),ServiceTypeVersion:Ue(Dt),ServiceType:Ue(Dt)}),fVe=Xt(Ul,{ProviderName:Ue(Dt),ProviderSite:Ue(e1),ServiceContact:Ue(CVe)});function hVe(t,e){return Rt({},eVe,t,e)}function pVe(t,e){return Rt({},tVe,t,e)}function mVe(t,e){const n=t.getAttribute("name");if(n)return Rt({name:n},nVe,t,e)}function gVe(t,e){return Rt({},rVe,t,e)}function yVe(t,e){return Rt({},iVe,t,e)}function bVe(t,e){const n=e1(t);if(n)return Rt({href:n},uVe,t,e)}function vVe(t,e){return Rt({},sVe,t,e)}function xVe(t,e){const n=t.getAttribute("name"),r=Rt({},oVe,t,e);if(!r)return;const i=e[e.length-1];i[n]=r}function wVe(t,e){return Rt({},aVe,t,e)}function _Ve(t,e){return Rt({},lVe,t,e)}function EVe(t,e){return Rt({},dVe,t,e)}function CVe(t,e){return Rt({},cVe,t,e)}function SVe(t,e){return Rt({},fVe,t,e)}function AVe(t,e){return Dt(t)}function mve(t,e,n,r,i,s){i!==void 0?(i=i,s=s!==void 0?s:0):(i=[],s=0);let o=e;for(;o<n;){const a=t[o++];i[s++]=t[o++],i[s++]=a;for(let l=2;l<r;++l)i[s++]=t[o++]}return i.length=s,i}class kVe extends X${constructor(e){super(),e=e||{},this.dataProjection=ai("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,n){const r=this.readGeometryFromText(e,n);return new du(r)}readFeaturesFromText(e,n){return[this.readFeatureFromText(e,n)]}readGeometryFromText(e,n){const r=$je(this.geometryLayout_),i=DVe(e,r,this.factor_);mve(i,0,i.length,r,i);const s=Pje(i,0,i.length,r),o=new Pd(s,this.geometryLayout_);return Io(o,!1,this.adaptOptions(n))}writeFeatureText(e,n){const r=e.getGeometry();if(r)return this.writeGeometryText(r,n);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,n){return this.writeFeatureText(e[0],n)}writeGeometryText(e,n){e=Io(e,!0,this.adaptOptions(n));const r=e.getFlatCoordinates(),i=e.getStride();return mve(r,0,r.length,i,r),TVe(r,i,this.factor_)}}function TVe(t,e,n){n=n||1e5;let r;const i=new Array(e);for(r=0;r<e;++r)i[r]=0;for(let s=0,o=t.length;s<o;)for(r=0;r<e;++r,++s){const a=t[s],l=a-i[r];i[r]=a,t[s]=l}return LVe(t,n)}function DVe(t,e,n){n=n||1e5;let r;const i=new Array(e);for(r=0;r<e;++r)i[r]=0;const s=RVe(t,n);for(let o=0,a=s.length;o<a;)for(r=0;r<e;++r,++o)i[r]+=s[o],s[o]=i[r];return s}function LVe(t,e){e=e||1e5;for(let n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*e);return FVe(t)}function RVe(t,e){e=e||1e5;const n=OVe(t);for(let r=0,i=n.length;r<i;++r)n[r]/=e;return n}function FVe(t){for(let e=0,n=t.length;e<n;++e){const r=t[e];t[e]=r<0?~(r<<1):r<<1}return MVe(t)}function OVe(t){const e=IVe(t);for(let n=0,r=e.length;n<r;++n){const i=e[n];e[n]=i&1?~(i>>1):i>>1}return e}function MVe(t){let e="";for(let n=0,r=t.length;n<r;++n)e+=$Ve(t[n]);return e}function IVe(t){const e=[];let n=0,r=0;for(let i=0,s=t.length;i<s;++i){const o=t.charCodeAt(i)-63;n|=(o&31)<<r,o<32?(e.push(n),n=0,r=0):r+=5}return e}function $Ve(t){let e,n="";for(;t>=32;)e=(32|t&31)+63,n+=String.fromCharCode(e),t>>=5;return e=t+63,n+=String.fromCharCode(e),n}class Xr extends vt{constructor(e){e=e||{},super(e),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,n,r){const i=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(e,n,r)}}Xr.prototype.namespace="http://www.opengis.net/gml/3.2";Xr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Rn(vt.prototype.readFlatPos),posList:Rn(vt.prototype.readFlatPosList),coordinates:Rn(pr.prototype.readFlatCoordinates)}};Xr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:vt.prototype.interiorParser,exterior:vt.prototype.exteriorParser}};Xr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Rn(un.prototype.readPoint),MultiPoint:Rn(un.prototype.readMultiPoint),LineString:Rn(un.prototype.readLineString),MultiLineString:Rn(un.prototype.readMultiLineString),LinearRing:Rn(un.prototype.readLinearRing),Polygon:Rn(un.prototype.readPolygon),MultiPolygon:Rn(un.prototype.readMultiPolygon),Surface:Rn(Xr.prototype.readSurface),MultiSurface:Rn(vt.prototype.readMultiSurface),Curve:Rn(Xr.prototype.readCurve),MultiCurve:Rn(vt.prototype.readMultiCurve),Envelope:Rn(Xr.prototype.readEnvelope)}};Xr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:kn(vt.prototype.curveMemberParser),curveMembers:kn(vt.prototype.curveMemberParser)}};Xr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:kn(vt.prototype.surfaceMemberParser),surfaceMembers:kn(vt.prototype.surfaceMemberParser)}};Xr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString),Curve:kn(vt.prototype.readCurve)}};Xr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon),Surface:kn(vt.prototype.readSurface)}};Xr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:Rn(vt.prototype.readPatch)}};Xr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:Rn(vt.prototype.readSegment)}};Xr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:kn(vt.prototype.readFlatPosList),upperCorner:kn(vt.prototype.readFlatPosList)}};Xr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:Rn(vt.prototype.readPolygonPatch)}};Xr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:NAe(vt.prototype.readLineStringSegment)}};Xr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:kn(un.prototype.pointMemberParser),pointMembers:kn(un.prototype.pointMemberParser)}};Xr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:kn(un.prototype.lineStringMemberParser),lineStringMembers:kn(un.prototype.lineStringMemberParser)}};Xr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:kn(un.prototype.polygonMemberParser),polygonMembers:kn(un.prototype.polygonMemberParser)}};Xr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:kn(un.prototype.readFlatCoordinatesFromNode)}};Xr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:kn(un.prototype.readLineString)}};Xr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:kn(un.prototype.readPolygon)}};Xr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Rn(un.prototype.readFlatLinearRing),Ring:Rn(Xr.prototype.readFlatCurveRing)}};Xr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Ge(vt.prototype.writeRing),interior:Ge(vt.prototype.writeRing)}};Xr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Ge(br),upperCorner:Ge(br)}};Xr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Ge(vt.prototype.writeSurfaceOrPolygonMember),polygonMember:Ge(vt.prototype.writeSurfaceOrPolygonMember)}};Xr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Ge(vt.prototype.writePointMember)}};Xr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Ge(vt.prototype.writeLineStringOrCurveMember),curveMember:Ge(vt.prototype.writeLineStringOrCurveMember)}};Xr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Ge(vt.prototype.writeCurveOrLineString),MultiCurve:Ge(vt.prototype.writeMultiCurveOrLineString),Point:Ge(Xr.prototype.writePoint),MultiPoint:Ge(vt.prototype.writeMultiPoint),LineString:Ge(vt.prototype.writeCurveOrLineString),MultiLineString:Ge(vt.prototype.writeMultiCurveOrLineString),LinearRing:Ge(vt.prototype.writeLinearRing),Polygon:Ge(vt.prototype.writeSurfaceOrPolygon),MultiPolygon:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Surface:Ge(vt.prototype.writeSurfaceOrPolygon),MultiSurface:Ge(vt.prototype.writeMultiSurfaceOrPolygon),Envelope:Ge(vt.prototype.writeEnvelope)}};let $ke=class{constructor(e){this.tagName_=e}getTagName(){return this.tagName_}};class PVe extends $ke{constructor(e,n){super(e),this.conditions=n,Oc(this.conditions.length>=2,"At least 2 conditions are required")}}let NVe=class extends PVe{constructor(e){super("And",Array.prototype.slice.call(arguments))}};class BVe extends $ke{constructor(e,n,r){if(super("BBOX"),this.geometryName=e,this.extent=n,n.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function zVe(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(NVe,e))}function jVe(t,e,n){return new BVe(t,e,n)}const gve={"http://www.opengis.net/gml":{boundedBy:Ue(un.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:kn(un.prototype.readFeaturesInternal)}},UVe={"http://www.opengis.net/wfs":{totalInserted:Ue(Rs),totalUpdated:Ue(Rs),totalDeleted:Ue(Rs)},"http://www.opengis.net/wfs/2.0":{totalInserted:Ue(Rs),totalUpdated:Ue(Rs),totalDeleted:Ue(Rs)}},qVe={"http://www.opengis.net/wfs":{TransactionSummary:Ue(bve,"transactionSummary"),InsertResults:Ue(xve,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:Ue(bve,"transactionSummary"),InsertResults:Ue(xve,"insertIds")}},HVe={"http://www.opengis.net/wfs":{PropertyName:Ge(br)},"http://www.opengis.net/wfs/2.0":{PropertyName:Ge(br)}},Pke={"http://www.opengis.net/wfs":{Insert:Ge(wve),Update:Ge(Eve),Delete:Ge(_ve),Property:Ge(Cve),Native:Ge(Sve)},"http://www.opengis.net/wfs/2.0":{Insert:Ge(wve),Update:Ge(Eve),Delete:Ge(_ve),Property:Ge(Cve),Native:Ge(Sve)}},Nke="feature",K$="http://www.w3.org/2000/xmlns/",J$={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},oM={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Q$={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},yve={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},eP={"2.0.0":Xr,"1.1.0":vt,"1.0.0":pr},GVe="1.1.0";class VVe extends gD{constructor(e){super(),e=e||{},this.version_=e.version?e.version:GVe,this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new eP[this.version_],this.schemaLocation_=e.schemaLocation?e.schemaLocation:yve[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(e){this.featureType_=e}readFeaturesFromNode(e,n){const r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,n||{}));const i=[r];let s;this.version_==="2.0.0"?s=gve:s=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let o=Rt([],s,e,i,this.gmlFormat_);return o||(o=[]),o}readTransactionResponse(e){if(e){if(typeof e=="string"){const n=bk(e);return this.readTransactionResponseFromDocument(n)}return vk(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}readFeatureCollectionMetadata(e){if(e){if(typeof e=="string"){const n=bk(e);return this.readFeatureCollectionMetadataFromDocument(n)}return vk(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}readFeatureCollectionMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(e){const n={},r=Ep(e.getAttribute("numberOfFeatures"));return n.numberOfFeatures=r,Rt(n,gve,e,[],this.gmlFormat_)}readTransactionResponseFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(e){return Rt({},qVe,e,[])}writeGetFeature(e){const n=tr(oM[this.version_],"GetFeature");n.setAttribute("service","WFS"),n.setAttribute("version",this.version_),e.handle&&n.setAttribute("handle",e.handle),e.outputFormat&&n.setAttribute("outputFormat",e.outputFormat),e.maxFeatures!==void 0&&n.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&n.setAttribute("resultType",e.resultType),e.startIndex!==void 0&&n.setAttribute("startIndex",String(e.startIndex)),e.count!==void 0&&n.setAttribute("count",String(e.count)),e.viewParams!==void 0&&n.setAttribute("viewParams",e.viewParams),n.setAttributeNS(Q_,"xsi:schemaLocation",this.schemaLocation_);const r={node:n};if(Object.assign(r,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),Oc(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),typeof e.featureTypes[0]=="string"){let i=e.filter;e.bbox&&(Oc(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,i)),Object.assign(r,{geometryName:e.geometryName,filter:i}),Ive(n,e.featureTypes,[r])}else e.featureTypes.forEach(i=>{const s=this.combineBboxAndFilter(i.geometryName,i.bbox,e.srsName,e.filter);Object.assign(r,{geometryName:i.geometryName,filter:s}),Ive(n,[i.name],[r])});return n}combineBboxAndFilter(e,n,r,i){const s=jVe(e,n,r);return i?zVe(i,s):s}writeTransaction(e,n,r,i){const s=[],o=i.version?i.version:this.version_,a=tr(oM[o],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",o);let l;i&&(l=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle)),a.setAttributeNS(Q_,"xsi:schemaLocation",yve[o]);const u=WVe(a,l,o,i);return e&&iS("Insert",e,s,u),n&&iS("Update",n,s,u),r&&iS("Delete",r,s,u),i.nativeElements&&iS("Native",i.nativeElements,s,u),a}readProjectionFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(!(n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(n,r),ai(r.pop().srsName)}}return null}}function WVe(t,e,n,r){const i=r.featurePrefix?r.featurePrefix:Nke;let s;return n==="1.0.0"?s=2:n==="1.1.0"?s=3:n==="2.0.0"&&(s=3.2),Object.assign({node:t},{version:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:i,gmlVersion:s,hasZ:r.hasZ,srsName:r.srsName},e)}function iS(t,e,n,r){Ii(r,Pke,iu(t),e,n)}function bve(t,e){return Rt({},UVe,t,e)}const YVe={"http://www.opengis.net/ogc":{FeatureId:kn(function(t,e){return t.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:kn(function(t,e){return t.getAttribute("fid")})}};function vve(t,e){Np(YVe,t,e)}const XVe={"http://www.opengis.net/wfs":{Feature:vve},"http://www.opengis.net/wfs/2.0":{Feature:vve}};function xve(t,e){return Rt([],XVe,t,e)}function wve(t,e,n){const r=n[n.length-1],i=r.featureType,s=r.featureNS,o=r.gmlVersion,a=tr(s,i);t.appendChild(a),o===2?pr.prototype.writeFeatureElement(a,e,n):o===3?vt.prototype.writeFeatureElement(a,e,n):Xr.prototype.writeFeatureElement(a,e,n)}function Bke(t,e,n){const i=n[n.length-1].version,s=J$[i],o=tr(s,"Filter"),a=tr(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),t.appendChild(o)}function tP(t,e){t=t||Nke;const n=t+":";return e.startsWith(n)?e:n+e}function _ve(t,e,n){const r=n[n.length-1];Oc(e.getId()!==void 0,"Features must have an id set");const i=r.featureType,s=r.featurePrefix,o=r.featureNS,a=tP(s,i);t.setAttribute("typeName",a),t.setAttributeNS(K$,"xmlns:"+s,o);const l=e.getId();l!==void 0&&Bke(t,l,n)}function Eve(t,e,n){const r=n[n.length-1];Oc(e.getId()!==void 0,"Features must have an id set");const i=r.version,s=r.featureType,o=r.featurePrefix,a=r.featureNS,l=tP(o,s),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(K$,"xmlns:"+o,a);const d=e.getId();if(d!==void 0){const c=e.getKeys(),f=[];for(let h=0,p=c.length;h<p;h++){const g=e.get(c[h]);if(g!==void 0){let b=c[h];g&&typeof g.getSimplifiedGeometry=="function"&&(b=u),f.push({name:b,value:g})}}Ii({version:i,gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},Pke,iu("Property"),f,n),Bke(t,d,n)}}function Cve(t,e,n){const r=n[n.length-1],i=r.version,s=oM[i],a=tr(s,i==="2.0.0"?"ValueReference":"Name"),l=r.gmlVersion;if(t.appendChild(a),br(a,e.name),e.value!==void 0&&e.value!==null){const u=tr(s,"Value");t.appendChild(u),e.value&&typeof e.value.getSimplifiedGeometry=="function"?l===2?pr.prototype.writeGeometryElement(u,e.value,n):l===3?vt.prototype.writeGeometryElement(u,e.value,n):Xr.prototype.writeGeometryElement(u,e.value,n):br(u,e.value)}}function Sve(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),e.safeToIgnore!==void 0&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),e.value!==void 0&&br(t,e.value)}const FD={"http://www.opengis.net/wfs":{Query:Ge(Ave)},"http://www.opengis.net/wfs/2.0":{Query:Ge(Ave)},"http://www.opengis.net/ogc":{During:Ge(Dve),And:Ge(sS),Or:Ge(sS),Not:Ge(Lve),BBOX:Ge(kve),Contains:Ge(op),Intersects:Ge(op),Within:Ge(op),DWithin:Ge(Tve),PropertyIsEqualTo:Ge(wu),PropertyIsNotEqualTo:Ge(wu),PropertyIsLessThan:Ge(wu),PropertyIsLessThanOrEqualTo:Ge(wu),PropertyIsGreaterThan:Ge(wu),PropertyIsGreaterThanOrEqualTo:Ge(wu),PropertyIsNull:Ge(Rve),PropertyIsBetween:Ge(Fve),PropertyIsLike:Ge(Ove)},"http://www.opengis.net/fes/2.0":{During:Ge(Dve),And:Ge(sS),Or:Ge(sS),Not:Ge(Lve),BBOX:Ge(kve),Contains:Ge(op),Disjoint:Ge(op),Intersects:Ge(op),ResourceId:Ge(KVe),Within:Ge(op),DWithin:Ge(Tve),PropertyIsEqualTo:Ge(wu),PropertyIsNotEqualTo:Ge(wu),PropertyIsLessThan:Ge(wu),PropertyIsLessThanOrEqualTo:Ge(wu),PropertyIsGreaterThan:Ge(wu),PropertyIsGreaterThanOrEqualTo:Ge(wu),PropertyIsNull:Ge(Rve),PropertyIsBetween:Ge(Fve),PropertyIsLike:Ge(Ove)}};function Ave(t,e,n){const r=n[n.length-1],i=r.version,s=r.featurePrefix,o=r.featureNS,a=r.propertyNames,l=r.srsName;let u;s?u=tP(s,e):u=e;let d;i==="2.0.0"?d="typeNames":d="typeName",t.setAttribute(d,u),l&&t.setAttribute("srsName",l),o&&t.setAttributeNS(K$,"xmlns:"+s,o);const c=Object.assign({},r);c.node=t,Ii(c,HVe,iu("PropertyName"),a,n);const f=r.filter;if(f){const h=tr(OD(i),"Filter");t.appendChild(h),ZVe(h,f,n)}}function ZVe(t,e,n){const r=n[n.length-1],i={node:t};Object.assign(i,{context:r}),Ii(i,FD,iu(e.getTagName()),[e],n)}function kve(t,e,n){const r=n[n.length-1],s=r.context.version;r.srsName=e.srsName;const o=eP[s];t1(s,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,n)}function KVe(t,e,n){t.setAttribute("rid",e.rid)}function op(t,e,n){const r=n[n.length-1],s=r.context.version;r.srsName=e.srsName;const o=eP[s];t1(s,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,n)}function Tve(t,e,n){const s=n[n.length-1].context.version;op(t,e,n);const o=tr(OD(s),"Distance");br(o,e.distance.toString()),s==="2.0.0"?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),t.appendChild(o)}function Dve(t,e,n){const s=n[n.length-1].context.version;kk(Q$[s],"ValueReference",t,e.propertyName);const o=tr(Jf,"TimePeriod");t.appendChild(o);const a=tr(Jf,"begin");o.appendChild(a),Mve(a,e.begin);const l=tr(Jf,"end");o.appendChild(l),Mve(l,e.end)}function sS(t,e,n){const i=n[n.length-1].context,s={node:t};Object.assign(s,{context:i});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const u=o[a];Ii(s,FD,iu(u.getTagName()),[u],n)}}function Lve(t,e,n){const i=n[n.length-1].context,s={node:t};Object.assign(s,{context:i});const o=e.condition;Ii(s,FD,iu(o.getTagName()),[o],n)}function wu(t,e,n){const s=n[n.length-1].context.version;e.matchCase!==void 0&&t.setAttribute("matchCase",e.matchCase.toString()),t1(s,t,e.propertyName),Tk(s,t,""+e.expression)}function Rve(t,e,n){const s=n[n.length-1].context.version;t1(s,t,e.propertyName)}function Fve(t,e,n){const s=n[n.length-1].context.version,o=OD(s);t1(s,t,e.propertyName);const a=tr(o,"LowerBoundary");t.appendChild(a),Tk(s,a,""+e.lowerBoundary);const l=tr(o,"UpperBoundary");t.appendChild(l),Tk(s,l,""+e.upperBoundary)}function Ove(t,e,n){const s=n[n.length-1].context.version;t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),e.matchCase!==void 0&&t.setAttribute("matchCase",e.matchCase.toString()),t1(s,t,e.propertyName),Tk(s,t,""+e.pattern)}function kk(t,e,n,r){const i=tr(t,e);br(i,r),n.appendChild(i)}function Tk(t,e,n){kk(OD(t),"Literal",e,n)}function t1(t,e,n){t==="2.0.0"?kk(Q$[t],"ValueReference",e,n):kk(J$[t],"PropertyName",e,n)}function Mve(t,e){const n=tr(Jf,"TimeInstant");t.appendChild(n);const r=tr(Jf,"timePosition");n.appendChild(r),br(r,e)}function Ive(t,e,n){const r=n[n.length-1],i=Object.assign({},r);i.node=t,Ii(i,FD,iu("Query"),e,n)}function OD(t){let e;return t==="2.0.0"?e=Q$[t]:e=J$[t],e}const Ei={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class $ve{constructor(e){this.view_=e,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(e){return this.view_.getUint32((this.pos_+=4)-4,e!==void 0?e:this.isLittleEndian_)}readDouble(e){return this.view_.getFloat64((this.pos_+=8)-8,e!==void 0?e:this.isLittleEndian_)}readPoint(){const e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}readLineString(){const e=this.readUint32(),n=[];for(let r=0;r<e;r++)n.push(this.readPoint());return n}readPolygon(){const e=this.readUint32(),n=[];for(let r=0;r<e;r++)n.push(this.readLineString());return n}readWkbHeader(e){const r=this.readUint8()>0,i=this.readUint32(r),s=Math.floor((i&268435455)/1e3),o=!!(i&2147483648)||s===1||s===3,a=!!(i&1073741824)||s===2||s===3,l=!!(i&536870912),u=(i&268435455)%1e3,d=["XY",o?"Z":"",a?"M":""].join(""),c=l?this.readUint32(r):null;if(e!==void 0&&e!==u)throw new Error("Unexpected WKB geometry type "+u);if(this.initialized_){if(this.isLittleEndian_!==r)throw new Error("Inconsistent endian");if(this.layout_!==d)throw new Error("Inconsistent geometry layout");if(c&&this.srid_!==c)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=r,this.hasZ_=o,this.hasM_=a,this.layout_=d,this.srid_=c,this.initialized_=!0;return u}readWkbPayload(e){switch(e){case Ei.POINT:return this.readPoint();case Ei.LINE_STRING:return this.readLineString();case Ei.POLYGON:case Ei.TRIANGLE:return this.readPolygon();case Ei.MULTI_POINT:return this.readMultiPoint();case Ei.MULTI_LINE_STRING:return this.readMultiLineString();case Ei.MULTI_POLYGON:case Ei.POLYHEDRAL_SURFACE:case Ei.TIN:return this.readMultiPolygon();case Ei.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}readWkbBlock(e){return this.readWkbPayload(this.readWkbHeader(e))}readWkbCollection(e,n){const r=this.readUint32(),i=[];for(let s=0;s<r;s++){const o=e.call(this,n);o&&i.push(o)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Ei.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Ei.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Ei.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const e=this.readWkbHeader(),n=this.readWkbPayload(e);switch(e){case Ei.POINT:return new xc(n,this.layout_);case Ei.LINE_STRING:return new Pd(n,this.layout_);case Ei.POLYGON:case Ei.TRIANGLE:return new uE(n,this.layout_);case Ei.MULTI_POINT:return new mD(n,this.layout_);case Ei.MULTI_LINE_STRING:return new Wv(n,this.layout_);case Ei.MULTI_POLYGON:case Ei.POLYHEDRAL_SURFACE:case Ei.TIN:return new lE(n,this.layout_);case Ei.GEOMETRY_COLLECTION:return new Wp(n);default:return null}}getSrid(){return this.srid_}}class JVe{constructor(e){e=e||{},this.layout_=e.layout,this.isLittleEndian_=e.littleEndian!==!1,this.isEWKB_=e.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},e.nodata)}writeUint8(e){this.writeQueue_.push([1,e])}writeUint32(e){this.writeQueue_.push([4,e])}writeDouble(e){this.writeQueue_.push([8,e])}writePoint(e,n){const r=Object.assign.apply(null,n.split("").map((i,s)=>({[i]:e[s]})));for(const i of this.layout_)this.writeDouble(i in r?r[i]:this.nodata_[i])}writeLineString(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writePoint(e[r],n)}writePolygon(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeLineString(e[r],n)}writeWkbHeader(e,n){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(n)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(n)&&this.writeUint32(n)}writeMultiPoint(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],n)}writeMultiLineString(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],n)}writeMultiPolygon(e,n){this.writeUint32(e.length);for(let r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],n)}writeGeometryCollection(e){this.writeUint32(e.length);for(let n=0;n<e.length;n++)this.writeGeometry(e[n])}findMinimumLayout(e,n="XYZM"){const r=(i,s)=>i===s?i:i==="XYZM"?s:s==="XYZM"?i:"XY";if(e instanceof Bbe)return r(e.getLayout(),n);if(e instanceof Wp){const i=e.getGeometriesArray();for(let s=0;s<i.length&&n!=="XY";s++)n=this.findMinimumLayout(i[s],n)}return n}writeGeometry(e,n){const r={Point:Ei.POINT,LineString:Ei.LINE_STRING,Polygon:Ei.POLYGON,MultiPoint:Ei.MULTI_POINT,MultiLineString:Ei.MULTI_LINE_STRING,MultiPolygon:Ei.MULTI_POLYGON,GeometryCollection:Ei.GEOMETRY_COLLECTION},i=e.getType(),s=r[i];if(!s)throw new Error("GeometryType "+i+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(s,n),e instanceof Bbe?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[i].call(this,e.getCoordinates(),e.getLayout()):e instanceof Wp&&this.writeGeometryCollection(e.getGeometriesArray())}getBuffer(){const e=this.writeQueue_.reduce((s,o)=>s+o[0],0),n=new ArrayBuffer(e),r=new DataView(n);let i=0;return this.writeQueue_.forEach(s=>{switch(s[0]){case 1:r.setUint8(i,s[1]);break;case 4:r.setUint32(i,s[1],this.isLittleEndian_);break;case 8:r.setFloat64(i,s[1],this.isLittleEndian_);break}i+=s[0]}),n}}class QVe extends zAe{constructor(e){super(),e=e||{},this.splitCollection=!!e.splitCollection,this.viewCache_=null,this.hex_=e.hex!==!1,this.littleEndian_=e.littleEndian!==!1,this.ewkb_=e.ewkb!==!1,this.layout_=e.geometryLayout,this.nodataZ_=e.nodataZ||0,this.nodataM_=e.nodataM||0,this.srid_=e.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(e,n){return new du({geometry:this.readGeometry(e,n)})}readFeatures(e,n){let r=[];const i=this.readGeometry(e,n);return this.splitCollection&&i instanceof Wp?r=i.getGeometriesArray():r=[i],r.map(s=>new du({geometry:s}))}readGeometry(e,n){const r=Pve(e);if(!r)return null;const s=new $ve(r).readGeometry();return this.viewCache_=r,n=this.getReadOptions(e,n),this.viewCache_=null,Io(s,!1,n)}readProjection(e){const n=this.viewCache_||Pve(e);if(!n)return;const r=new $ve(n);return r.readWkbHeader(),r.getSrid()&&ai("EPSG:"+r.getSrid())||void 0}writeFeature(e,n){return this.writeGeometry(e.getGeometry(),n)}writeFeatures(e,n){return this.writeGeometry(new Wp(e.map(r=>r.getGeometry())),n)}writeGeometry(e,n){n=this.adaptOptions(n);const r=new JVe({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const o=n.dataProjection&&ai(n.dataProjection);if(o){const a=o.getCode();a.startsWith("EPSG:")&&(i=Number(a.substring(5)))}}r.writeGeometry(Io(e,!0,n),i);const s=r.getBuffer();return this.hex_?eWe(s):s}}function eWe(t){const e=new Uint8Array(t);return Array.from(e.values()).map(n=>(n<16?"0":"")+Number(n).toString(16).toUpperCase()).join("")}function tWe(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(n*2,2),16);return new DataView(e.buffer)}function Pve(t){return typeof t=="string"?tWe(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}const nWe={POINT:xc,LINESTRING:Pd,POLYGON:uE,MULTIPOINT:mD,MULTILINESTRING:Wv,MULTIPOLYGON:lE},zke="EMPTY",jke="Z",Uke="M",rWe="ZM",mi={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},iWe={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class sWe{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,n){return n=n!==void 0?n:!1,e>="0"&&e<="9"||e=="."&&!n}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),n=this.index_;let r=e,i;if(e=="(")i=mi.LEFT_PAREN;else if(e==",")i=mi.COMMA;else if(e==")")i=mi.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")i=mi.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))i=mi.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")i=mi.EOF;else throw new Error("Unexpected character: "+e)}return{position:n,value:r,type:i}}readNumber_(){let e;const n=this.index_;let r=!1,i=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(i=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(n,this.index_--))}readText_(){let e;const n=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(n,this.index_--).toUpperCase()}}class oWe{constructor(e){this.lexer_=e,this.token_={position:0,type:mi.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const n=this.isTokenType(e);return n&&this.consume_(),n}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const n=this.token_;if(this.isTokenType(mi.TEXT)){const r=n.value;r===jke?e="XYZ":r===Uke?e="XYM":r===rWe&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(mi.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(mi.COMMA));if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(mi.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(mi.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(mi.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(mi.LEFT_PAREN)){let e;if(this.token_.type==mi.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(mi.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(mi.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(mi.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],n=this.layout_.length;for(let r=0;r<n;++r){const i=this.token_;if(this.match(mi.NUMBER))e.push(i.value);else break}if(e.length==n)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(mi.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(mi.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(mi.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(mi.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(mi.TEXT)&&this.token_.value==zke;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(mi.TEXT)){const n=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(n=="GEOMETRYCOLLECTION"){if(r)return new Wp([]);const o=this.parseGeometryCollectionText_();return new Wp(o)}const i=nWe[n];if(!i)throw new Error("Invalid geometry type: "+n);let s;if(r)n=="POINT"?s=[NaN,NaN]:s=[];else switch(n){case"POINT":{s=this.parsePointText_();break}case"LINESTRING":{s=this.parseLineStringText_();break}case"POLYGON":{s=this.parsePolygonText_();break}case"MULTIPOINT":{s=this.parseMultiPointText_();break}case"MULTILINESTRING":{s=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{s=this.parseMultiPolygonText_();break}}return new i(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class qke extends X${constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const n=new sWe(e);return new oWe(n).parse()}readFeatureFromText(e,n){const r=this.readGeometryFromText(e,n),i=new du;return i.setGeometry(r),i}readFeaturesFromText(e,n){let r=[];const i=this.readGeometryFromText(e,n);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];const s=[];for(let o=0,a=r.length;o<a;++o){const l=new du;l.setGeometry(r[o]),s.push(l)}return s}readGeometryFromText(e,n){const r=this.parse_(e);return Io(r,!1,n)}writeFeatureText(e,n){const r=e.getGeometry();return r?this.writeGeometryText(r,n):""}writeFeaturesText(e,n){if(e.length==1)return this.writeFeatureText(e[0],n);const r=[];for(let s=0,o=e.length;s<o;++s)r.push(e[s].getGeometry());const i=new Wp(r);return this.writeGeometryText(i,n)}writeGeometryText(e,n){return Vke(Io(e,!0,n))}}function Hke(t){const e=t.getCoordinates();return e.length===0?"":e.join(" ")}function aWe(t){const e=[],n=t.getPoints();for(let r=0,i=n.length;r<i;++r)e.push("("+Hke(n[r])+")");return e.join(",")}function lWe(t){const e=[],n=t.getGeometries();for(let r=0,i=n.length;r<i;++r)e.push(Vke(n[r]));return e.join(",")}function nP(t){const e=t.getCoordinates(),n=[];for(let r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(",")}function uWe(t){const e=[],n=t.getLineStrings();for(let r=0,i=n.length;r<i;++r)e.push("("+nP(n[r])+")");return e.join(",")}function Gke(t){const e=[],n=t.getLinearRings();for(let r=0,i=n.length;r<i;++r)e.push("("+nP(n[r])+")");return e.join(",")}function cWe(t){const e=[],n=t.getPolygons();for(let r=0,i=n.length;r<i;++r)e.push("("+Gke(n[r])+")");return e.join(",")}function dWe(t){const e=t.getLayout();let n="";return(e==="XYZ"||e==="XYZM")&&(n+=jke),(e==="XYM"||e==="XYZM")&&(n+=Uke),n}const fWe={Point:Hke,LineString:nP,Polygon:Gke,MultiPoint:aWe,MultiLineString:uWe,MultiPolygon:cWe,GeometryCollection:lWe};function Vke(t){const e=t.getType(),n=fWe[e],r=n(t);let i=iWe[e];if(typeof t.getFlatCoordinates=="function"){const s=dWe(t);s.length>0&&(i+=" "+s)}return r.length===0?i+" "+zke:i+"("+r+")"}const no=[null,"http://www.opengis.net/wms"];function n1(t){return Nje(t[0].version,"1.3")>=0}const hWe=Xt(no,{Service:Ue($We),Capability:Ue(IWe)}),Wke={Request:Ue(GWe),Exception:Ue(zWe),Layer:Ue(jWe)},pWe=Xt(no,{...Wke,UserDefinedSymbolization:Ue(OWe)}),mWe=Xt(no,Wke);class gWe extends Z${constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const n=Rt({version:this.version},hWe,e,[]);return n||null}}const Yke={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(e3e),OnlineResource:Ue(e1),ContactInformation:Ue(PWe),Fees:Ue(Dt),AccessConstraints:Ue(Dt)},yWe=Xt(no,Yke),bWe=Xt(no,{...Yke,LayerLimit:Ue(Rs),MaxWidth:Ue(Rs),MaxHeight:Ue(Rs)}),vWe=Xt(no,{ContactPersonPrimary:Ue(NWe),ContactPosition:Ue(Dt),ContactAddress:Ue(BWe),ContactVoiceTelephone:Ue(Dt),ContactFacsimileTelephone:Ue(Dt),ContactElectronicMailAddress:Ue(Dt)}),xWe=Xt(no,{ContactPerson:Ue(Dt),ContactOrganization:Ue(Dt)}),wWe=Xt(no,{AddressType:Ue(Dt),Address:Ue(Dt),City:Ue(Dt),StateOrProvince:Ue(Dt),PostCode:Ue(Dt),Country:Ue(Dt)}),_We=Xt(no,{Format:kn(Dt)}),Xke={Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),KeywordList:Ue(e3e),BoundingBox:yi(Jke),Dimension:yi(UWe),Attribution:Ue(FWe),AuthorityURL:yi(YWe),Identifier:yi(Dt),MetadataURL:yi(XWe),DataURL:yi(lh),FeatureListURL:yi(lh),Style:yi(ZWe),Layer:yi(MD)},Zke=Xt(no,{...Xke,SRS:yi(Dt),Extent:Ue(qWe),ScaleHint:yi(HWe),LatLonBoundingBox:Ue((t,e)=>Jke(t,e,!1)),Layer:yi(MD)}),Kke=Xt(no,{...Xke,CRS:yi(Dt),EX_GeographicBoundingBox:Ue(MWe),MinScaleDenominator:Ue(Aa),MaxScaleDenominator:Ue(Aa),Layer:yi(MD)}),EWe=Xt(no,{Title:Ue(Dt),OnlineResource:Ue(e1),LogoURL:Ue(Qke)}),CWe=Xt(no,{westBoundLongitude:Ue(Aa),eastBoundLongitude:Ue(Aa),southBoundLatitude:Ue(Aa),northBoundLatitude:Ue(Aa)}),SWe=Xt(no,{GetCapabilities:Ue(fF),GetMap:Ue(fF),GetFeatureInfo:Ue(fF)}),AWe=Xt(no,{Format:yi(Dt),DCPType:yi(VWe)}),kWe=Xt(no,{HTTP:Ue(WWe)}),TWe=Xt(no,{Get:Ue(lh),Post:Ue(lh)}),DWe=Xt(no,{Name:Ue(Dt),Title:Ue(Dt),Abstract:Ue(Dt),LegendURL:yi(Qke),StyleSheetURL:Ue(lh),StyleURL:Ue(lh)}),LWe=Xt(no,{Format:Ue(Dt),OnlineResource:Ue(e1)}),RWe=Xt(no,{Keyword:kn(Dt)});function FWe(t,e){return Rt({},EWe,t,e)}function OWe(t,e){return{SupportSLD:!!wc(t.getAttribute("UserDefinedSymbolization")),UserLayer:!!wc(t.getAttribute("UserLayer")),UserStyle:!!wc(t.getAttribute("UserStyle")),RemoteWFS:!!wc(t.getAttribute("RemoteWFS"))}}function Jke(t,e,n=!0){const r=[vd(t.getAttribute("minx")),vd(t.getAttribute("miny")),vd(t.getAttribute("maxx")),vd(t.getAttribute("maxy"))],i=[vd(t.getAttribute("resx")),vd(t.getAttribute("resy"))],s={extent:r,res:i};return n&&(n1(e)?s.crs=t.getAttribute("CRS"):s.srs=t.getAttribute("SRS")),s}function MWe(t,e){const n=Rt({},CWe,t,e);if(!n)return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(r===void 0||i===void 0||s===void 0||o===void 0))return[r,i,s,o]}function IWe(t,e){return Rt({},n1(e)?mWe:pWe,t,e)}function $We(t,e){return Rt({},n1(e)?bWe:yWe,t,e)}function PWe(t,e){return Rt({},vWe,t,e)}function NWe(t,e){return Rt({},xWe,t,e)}function BWe(t,e){return Rt({},wWe,t,e)}function zWe(t,e){return Rt([],_We,t,e)}function jWe(t,e){const n=Rt({},n1(e)?Kke:Zke,t,e);return n.Layer===void 0?Object.assign(n,MD(t,e)):n}function MD(t,e){const n=n1(e),r=e[e.length-1],i=Rt({},n?Kke:Zke,t,e);if(!i)return;let s=wc(t.getAttribute("queryable"));s===void 0&&(s=r.queryable),i.queryable=s!==void 0?s:!1;let o=Ep(t.getAttribute("cascaded"));o===void 0&&(o=r.cascaded),i.cascaded=o;let a=wc(t.getAttribute("opaque"));a===void 0&&(a=r.opaque),i.opaque=a!==void 0?a:!1;let l=wc(t.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),i.noSubsets=l!==void 0?l:!1;let u=vd(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth),i.fixedWidth=u;let d=vd(t.getAttribute("fixedHeight"));d||(d=r.fixedHeight),i.fixedHeight=d;const c=["Style","AuthorityURL"];n?c.push("CRS"):c.push("SRS","Dimension"),c.forEach(function(h){if(h in r){const p=i[h]||[];i[h]=p.concat(r[h])}});const f=["BoundingBox","Attribution"];return n?f.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):f.push("LatLonBoundingBox","ScaleHint","Extent"),f.forEach(function(h){if(!(h in i)){const p=r[h];i[h]=p}}),i}function UWe(t,e){const n={name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol")};return n1(e)&&Object.assign(n,{default:t.getAttribute("default"),multipleValues:wc(t.getAttribute("multipleValues")),nearestValue:wc(t.getAttribute("nearestValue")),current:wc(t.getAttribute("current")),values:Dt(t)}),n}function qWe(t,e){return{name:t.getAttribute("name"),default:t.getAttribute("default"),nearestValue:wc(t.getAttribute("nearestValue"))}}function HWe(t,e){return{min:vd(t.getAttribute("min")),max:vd(t.getAttribute("max"))}}function lh(t,e){return Rt({},LWe,t,e)}function GWe(t,e){return Rt({},SWe,t,e)}function VWe(t,e){return Rt({},kWe,t,e)}function WWe(t,e){return Rt({},TWe,t,e)}function fF(t,e){return Rt({},AWe,t,e)}function Qke(t,e){const n=lh(t,e);if(n){const r=[Ep(t.getAttribute("width")),Ep(t.getAttribute("height"))];return n.size=r,n}}function YWe(t,e){const n=lh(t,e);if(n)return n.name=t.getAttribute("name"),n}function XWe(t,e){const n=lh(t,e);if(n)return n.type=t.getAttribute("type"),n}function ZWe(t,e){return Rt({},DWe,t,e)}function e3e(t,e){return Rt([],RWe,t,e)}const KWe="_feature",JWe="_layer";class QWe extends gD{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new pr,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,n){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let i=[];if(e.childNodes.length===0)return i;if(r=="msGMLOutput")for(let s=0,o=e.childNodes.length;s<o;s++){const a=e.childNodes[s];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,u=n[0],d=JWe,c=l.localName.replace(d,"");if(this.layers_&&!this.layers_.includes(c))continue;const f=c+KWe;u.featureType=f,u.featureNS=this.featureNS_;const h={};h[f]=kn(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const p=Xt([u.featureNS,null],h);l.setAttribute("namespaceURI",this.featureNS_);const g=Rt([],p,l,n,this.gmlFormat_);g&&yk(i,g)}if(r=="FeatureCollection"){const s=Rt([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);s&&(i=s)}return i}readFeaturesFromNode(e,n){const r={};return n&&Object.assign(r,this.getReadOptions(e,n)),this.readFeatures_(e,[r])}}const Xd=[null,"http://www.opengis.net/wmts/1.0"],r1=[null,"http://www.opengis.net/ows/1.1"],eYe=Xt(Xd,{Contents:Ue(cYe)});let rP=class extends Z${constructor(){super(),this.owsParser_=new Ike}readFromNode(e){let n=e.getAttribute("version");n&&(n=n.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=n,r=Rt(r,eYe,e,[]),r||null):null}};const tYe=Xt(Xd,{Layer:yi(dYe),TileMatrixSet:yi(fYe)}),nYe=Xt(Xd,{Style:yi(hYe),Format:yi(Dt),TileMatrixSetLink:yi(pYe),Dimension:yi(mYe),ResourceURL:yi(gYe)},Xt(r1,{Title:Ue(Dt),Abstract:Ue(Dt),WGS84BoundingBox:Ue(n3e),BoundingBox:yi(yYe),Identifier:Ue(Dt)})),rYe=Xt(Xd,{LegendURL:yi(bYe)},Xt(r1,{Title:Ue(Dt),Identifier:Ue(Dt)})),iYe=Xt(Xd,{TileMatrixSet:Ue(Dt),TileMatrixSetLimits:Ue(xYe)}),sYe=Xt(Xd,{TileMatrixLimits:kn(wYe)}),oYe=Xt(Xd,{TileMatrix:Ue(Dt),MinTileRow:Ue(Rs),MaxTileRow:Ue(Rs),MinTileCol:Ue(Rs),MaxTileCol:Ue(Rs)}),aYe=Xt(Xd,{Default:Ue(Dt),Value:yi(Dt)},Xt(r1,{Identifier:Ue(Dt)})),t3e=Xt(r1,{LowerCorner:kn(aM),UpperCorner:kn(aM)}),lYe=Xt(Xd,{WellKnownScaleSet:Ue(Dt),TileMatrix:yi(vYe)},Xt(r1,{SupportedCRS:Ue(Dt),Identifier:Ue(Dt),BoundingBox:Ue(n3e)})),uYe=Xt(Xd,{TopLeftCorner:Ue(aM),ScaleDenominator:Ue(Aa),TileWidth:Ue(Rs),TileHeight:Ue(Rs),MatrixWidth:Ue(Rs),MatrixHeight:Ue(Rs)},Xt(r1,{Identifier:Ue(Dt)}));function cYe(t,e){return Rt({},tYe,t,e)}function dYe(t,e){return Rt({},nYe,t,e)}function fYe(t,e){return Rt({},lYe,t,e)}function hYe(t,e){const n=Rt({},rYe,t,e);if(!n)return;const r=t.getAttribute("isDefault")==="true";return n.isDefault=r,n}function pYe(t,e){return Rt({},iYe,t,e)}function mYe(t,e){return Rt({},aYe,t,e)}function gYe(t,e){const n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),s={};return n&&(s.format=n),r&&(s.template=r),i&&(s.resourceType=i),s}function n3e(t,e){const n=Rt([],t3e,t,e);if(n.length==2)return _$(n)}function yYe(t,e){const n=t.getAttribute("crs"),r=Rt([],t3e,t,e);if(r.length==2)return{extent:_$(r),crs:n}}function bYe(t,e){const n={};return n.format=t.getAttribute("format"),n.href=e1(t),n}function aM(t,e){const n=Dt(t).split(/\s+/);if(!n||n.length!=2)return;const r=+n[0],i=+n[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function vYe(t,e){return Rt({},uYe,t,e)}function xYe(t,e){return Rt([],sYe,t,e)}function wYe(t,e){return Rt({},oYe,t,e)}const _Ye=Object.freeze(Object.defineProperty({__proto__:null,EsriJSON:$He,GML:H$,GPX:uGe,GeoJSON:bD,IGC:GGe,IIIFInfo:KGe,KML:Bje,MVT:jAe,OWS:Ike,Polyline:kVe,TopoJSON:zje,WFS:VVe,WKB:QVe,WKT:qke,WMSCapabilities:gWe,WMSGetFeatureInfo:QWe,WMTSCapabilities:rP},Symbol.toStringTag,{value:"Module"})),pE=34962,mE=34963,EYe=35040,iP=35044,l2=35048,CYe=5121,SYe=5123,AYe=5125,r3e=5126,Nve=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function kYe(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!jje},e);const n=Nve.length;for(let r=0;r<n;++r)try{const i=t.getContext(Nve[r],e);if(i)return i}catch{}return null}const TYe={STATIC_DRAW:iP,STREAM_DRAW:EYe,DYNAMIC_DRAW:l2};class iv{constructor(e,n){this.array_=null,this.type_=e,Oc(e===pE||e===mE,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:TYe.STATIC_DRAW}ofSize(e){return this.array_=new(oS(this.type_))(e),this}fromArray(e){return this.array_=oS(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(oS(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=oS(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function oS(t){switch(t){case pE:return Float32Array;case mE:return Uint32Array;default:return Float32Array}}const aS={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},DYe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,LYe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Bve{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||DYe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||LYe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=Si(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const md={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Ps={UNSIGNED_BYTE:CYe,UNSIGNED_SHORT:SYe,UNSIGNED_INT:AYe,FLOAT:r3e},Dk={};function zve(t){return"shared/"+t}let jve=0;function RYe(){const t="unique/"+jve;return jve+=1,t}function FYe(t){let e=Dk[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:kYe(n)},Dk[t]=e}return e.users+=1,e.context}function OYe(t){const e=Dk[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete Dk[t]}class MYe extends UAe{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?zve(e.canvasCacheKey):RYe(),this.gl_=FYe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(aS.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(aS.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Qo(),this.offsetScaleMatrix_=Qo(),this.tmpMat4_=E$(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new Bve({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new Bve({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===zve(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}bindBuffer(e){const n=this.gl_,r=Si(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=Si(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(aS.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(aS.RESTORED,this.boundHandleWebGLContextRestored_),OYe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(e,n,r){const i=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-e,a=e*s;r.drawElements(r.TRIANGLES,o,i,a)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(md.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(md.ZOOM,e.viewState.zoom),this.setUniformFloatValue(md.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(md.PIXEL_RATIO,i),this.setUniformFloatVec2(md.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(md.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(md.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(md.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,wk(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=Si(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=Si(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return C$(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}enableAttributeArray_(e,n,r,i,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,n,r,!1,i,s))}enableAttributes(e){const n=IYe(e);let r=0;for(let i=0;i<e.length;i++){const s=e[i];this.enableAttributeArray_(s.name,s.size,s.type||r3e,n,r),r+=s.size*i3e(s.type)}}handleWebGLContextLost(e){Uje(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,u=0,d=s.RGBA,c=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],u,d,c,n):n?s.texImage2D(s.TEXTURE_2D,a,l,d,c,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],u,d,c,null),r}}function IYe(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*i3e(r.type)}return e}function i3e(t){switch(t){case Ps.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ps.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ps.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ps.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class gE extends qje{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Qo(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(J4.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(kg.PRECOMPOSE)){const i=new sF(kg.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(kg.POSTCOMPOSE)){const i=new sF(kg.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof gE)){n=!0;continue}const d=l.getClassName();if((n||d!==i)&&(r+=1,n=!1),i=d,u===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new MYe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){var e;this.clearCache(),this.removeHelper(),(e=this.getLayer())==null||e.removeChangeListener(J4.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){C$(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new sF(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(kg.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(kg.POSTRENDER,e,n)}}const ad=new Uint8Array(4);class s3e{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Hje(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return ad[0]=0,ad[1]=0,ad[2]=0,ad[3]=0,ad;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return ad[0]=this.data_[r*4],ad[1]=this.data_[r*4+1],ad[2]=this.data_[r*4+2],ad[3]=this.data_[r*4+3],ad}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const E_={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"},Uve=.985;function o3e(t,e){e=e||[];const n=256,r=n-1;return e[0]=Math.floor(t/n/n/n)/r,e[1]=Math.floor(t/n/n)%n/r,e[2]=Math.floor(t/n)%n/r,e[3]=t%n/r,e}function a3e(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function l3e(){const t='const t="GENERATE_POLYGON_BUFFERS",e="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function x(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],u=e[2],i=e[3],f=e[4],s=e[5];return t[0]=i/n,t[1]=-o/n,t[2]=-u/n,t[3]=x/n,t[4]=(u*s-i*f)/n,t[5]=-(x*s-o*f)/n,t}function o(t,e,n=2){const r=e&&e.length,x=r?e[0]*n:t.length;let o=u(t,0,x,n,!0);const i=[];if(!o||o.next===o.prev)return i;let s,l,c;if(r&&(o=function(t,e,n,r){const x=[];for(let n=0,o=e.length;n<o;n++){const i=u(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1);i===i.next&&(i.steiner=!0),x.push(g(i))}x.sort(y);for(let t=0;t<x.length;t++)n=h(x[t],n);return n}(t,e,o,n)),t.length>80*n){s=1/0,l=1/0;let e=-1/0,r=-1/0;for(let o=n;o<x;o+=n){const n=t[o],x=t[o+1];n<s&&(s=n),x<l&&(l=x),n>e&&(e=n),x>r&&(r=x)}c=Math.max(e-s,r-l),c=0!==c?32767/c:0}return f(o,i,n,s,l,c,0),i}function u(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,u=n-r;o<n;o+=r)x+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=z(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=z(x/r|0,t[x],t[x+1],o);return o&&M(o,o.next)&&(F(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(F(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function f(t,e,n,r,x,o,u){if(!t)return;!u&&o&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=v(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let u=x,i=0;for(let t=0;t<n&&(i++,u=u.nextZ,u);t++);let f=n;for(;i>0||f>0&&u;)0!==i&&(0===f||!u||x.z<=u.z)?(r=x,x=x.nextZ,i--):(r=u,u=u.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=u}o.nextZ=null,n*=2}while(e>1)}(x)}(t,r,x,o);let y=t;for(;t.prev!==t.next;){const h=t.prev,p=t.next;if(o?l(t,r,x,o):s(t))e.push(h.i,t.i,p.i),F(t),t=p.next,y=p.next;else if((t=p)===y){u?1===u?f(t=c(i(t),e),e,n,r,x,o,2):2===u&&a(t,e,n,r,x,o):f(i(t),e,n,r,x,o,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;const x=e.x,o=n.x,u=r.x,i=e.y,f=n.y,s=r.y,l=x<o?x<u?x:u:o<u?o:u,c=i<f?i<s?i:s:f<s?f:s,a=x>o?x>u?x:u:o>u?o:u,y=i>f?i>s?i:s:f>s?f:s;let h=r.next;for(;h!==e;){if(h.x>=l&&h.x<=a&&h.y>=c&&h.y<=y&&b(x,i,o,f,u,s,h.x,h.y)&&d(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function l(t,e,n,r){const x=t.prev,o=t,u=t.next;if(d(x,o,u)>=0)return!1;const i=x.x,f=o.x,s=u.x,l=x.y,c=o.y,a=u.y,y=i<f?i<s?i:s:f<s?f:s,h=l<c?l<a?l:a:c<a?c:a,p=i>f?i>s?i:s:f>s?f:s,g=l>c?l>a?l:a:c>a?c:a,Z=v(y,h,e,n,r),M=v(p,g,e,n,r);let w=t.prevZ,m=t.nextZ;for(;w&&w.z>=Z&&m&&m.z<=M;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=Z;){if(w.x>=y&&w.x<=p&&w.y>=h&&w.y<=g&&w!==x&&w!==u&&b(i,l,f,c,s,a,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=M;){if(m.x>=y&&m.x<=p&&m.y>=h&&m.y<=g&&m!==x&&m!==u&&b(i,l,f,c,s,a,m.x,m.y)&&d(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e){let n=t;do{const r=n.prev,x=n.next.next;!M(r,x)&&w(r,n,n.next,x)&&E(r,x)&&E(x,r)&&(e.push(r.i,n.i,x.i),F(n),F(n.next),n=t=x),n=n.next}while(n!==t);return i(n)}function a(t,e,n,r,x,o){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&Z(u,t)){let s=I(u,t);return u=i(u,u.next),s=i(s,s.next),f(u,e,n,r,x,o,0),void f(s,e,n,r,x,o,0)}t=t.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,x=t.y;let o,u=-1/0;do{if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>u&&(u=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const i=o,f=o.x,s=o.y;let l=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&b(x<s?r:u,x,f,s,x<s?u:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);E(n,t)&&(e<l||e===l&&(n.x>o.x||n.x===o.x&&p(o,n)))&&(o=n,l=e)}n=n.next}while(n!==i);return o}(t,e);if(!n)return e;const r=I(n,t);return i(r,r.next),i(n,n.next)}function p(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function v(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,x,o,u,i){return(x-u)*(e-i)>=(t-u)*(o-i)&&(t-u)*(r-i)>=(n-u)*(e-i)&&(n-u)*(o-i)>=(x-u)*(r-i)}function Z(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||M(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function M(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){const x=A(d(t,e,n)),o=A(d(t,e,r)),u=A(d(n,r,t)),i=A(d(n,r,e));return x!==o&&u!==i||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==u||!m(n,t,r))||!(0!==i||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function E(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function I(t,e){const n=P(t.i,t.x,t.y),r=P(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function z(t,e,n,r){const x=P(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function F(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}new Array(6);const B=[],N={vertexPosition:0,indexPosition:0};function R(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function S(t,e,n,r,x,o){const u=3+x,i=t[e+0],f=t[e+1],s=B;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/u;return R(n,l,i,f,0),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,1),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,2),s.length&&n.set(s,l+3),l+=u,R(n,l,i,f,3),s.length&&n.set(s,l+3),l+=u,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,N.vertexPosition=l,N.indexPosition=c,N}function T(t,e,n,x,o,u,i,f,s,l,c){const a=10+f.length,y=u.length/a,h=[t[e+0],t[e+1]],p=[t[n],t[n+1]],v=t[e+2],g=t[n+2],b=r(s,[...h]),Z=r(s,[...p]);function d(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],u=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),i=[(n[0]-t[0])/u,(n[1]-t[1])/u],f=0===r||0===u?0:Math.acos((s=i[0]*x[0]+i[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return i[0]*o[0]+i[1]*o[1]>0?f:2*Math.PI-f}let M=-1,w=-1,m=c;const A=null!==o;if(null!==x){M=d(b,Z,r(s,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((M-Math.PI)/2))}if(A){w=d(Z,b,r(s,[...[t[o],t[o+1]]])),Math.cos(w)<=.985&&(m+=Math.tan((Math.PI-w)/2))}function E(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(0,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(1,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(2,c)),u.push(...f),u.push(h[0],h[1],v,p[0],p[1],g,M,w,l,E(3,c)),u.push(...f),i.push(y,y+1,y+2,y+1,y+3,y+2),{length:l+Math.sqrt((Z[0]-b[0])*(Z[0]-b[0])+(Z[1]-b[1])*(Z[1]-b[1])),angle:m}}function _(t,e,n,r,x){const u=2+x;let i=e;const f=t.slice(i,i+x);i+=x;const s=t[i++];let l=0;const c=new Array(s-1);for(let e=0;e<s;e++)l+=t[i++],e<s-1&&(c[e]=l);const a=t.slice(i,i+2*l),y=o(a,c,2);for(let t=0;t<y.length;t++)r.push(y[t]+n.length/u);for(let t=0;t<a.length;t+=2)n.push(a[t],a[t+1],...f);return i+2*l}const O=self;O.onmessage=r=>{const o=r.data;switch(o.type){case e:{const t=3,e=2,n=o.customAttributesSize,r=e+n,x=new Float32Array(o.renderInstructions),u=x.length/r,i=4*u*(n+t),f=new Uint32Array(6*u),s=new Float32Array(i);let l;for(let t=0;t<x.length;t+=r)l=S(x,t,s,f,n,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},o);O.postMessage(c,[s.buffer,f.buffer,x.buffer]);break}case n:{const t=[],e=[],n=o.customAttributesSize,r=3,u=new Float32Array(o.renderInstructions);let i=0;const f=[1,0,0,1,0,0];let s,l;for(x(f,o.renderInstructionsTransform);i<u.length;){l=Array.from(u.slice(i,i+n)),i+=n,s=u[i++];const x=i,o=i+(s-1)*r,c=u[x]===u[o]&&u[x+1]===u[o+1];let a=0,y=0;for(let n=0;n<s-1;n++){let h=null;n>0?h=i+(n-1)*r:c&&(h=o-r);let p=null;n<s-2?p=i+(n+2)*r:c&&(p=x+r);const v=T(u,i+n*r,i+(n+1)*r,h,p,t,e,l,f,a,y);a=v.length,y=v.angle}i+=s*r}const c=Uint32Array.from(e),a=Float32Array.from(t),y=Object.assign({vertexBuffer:a.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},o);O.postMessage(y,[a.buffer,c.buffer,u.buffer]);break}case t:{const t=[],e=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let x=0;for(;x<r.length;)x=_(r,x,t,e,n);const u=Uint32Array.from(e),i=Float32Array.from(t),f=Object.assign({vertexBuffer:i.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},o);O.postMessage(f,[i.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}function u3e(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=i?ru(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}class c3e extends gE{constructor(e,n){const r=n.uniforms||{},i=Qo();r[md.PROJECTION_MATRIX]=i,super(e,{uniforms:r,postProcesses:n.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new iv(pE,l2),this.indicesBuffer_=new iv(mE,l2),this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.program_,this.hitDetectionEnabled_=n.hitDetectionEnabled??!0;const s=n.attributes?n.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:Ps.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Ps.FLOAT},{name:"a_index",size:1,type:Ps.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:Ps.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Ps.FLOAT})),this.attributes.push(...s),this.customAttributes=n.attributes?n.attributes:[],this.previousExtent_=vD(),this.currentTransform_=i,this.renderTransform_=Qo(),this.invertRenderTransform_=Qo(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=l3e(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===E_.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,e2(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[Cp(o,Sp.ADDFEATURE,this.handleSourceFeatureAdded_,this),Cp(o,Sp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Cp(o,Sp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Cp(o,Sp.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[Si(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new s3e(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(e){const n=e.feature;this.featureCache_[Si(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const n=e.feature;this.featureCache_[Si(n)]={feature:n,properties:n.getProperties(),geometry:n.getGeometry()}}handleSourceFeatureDelete_(e){const n=e.feature;delete this.featureCache_[Si(n)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=u3e(e,this.getLayer());return this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),this.helper.getCanvas()}prepareFrameInternal(e){const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[Yp.ANIMATING]&&!e.viewHints[Yp.INTERACTING],o=!J_(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,d=n instanceof xD?n.getRenderBuffer():0,c=S$(e.extent,d*u);r.loadFeatures(c,u,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const n=Qo();this.helper.makeProjectionTransform(e,n);const i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=i*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let d=-1;for(const f in this.featureCache_)if(o=this.featureCache_[f],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],oh(n,l),this.renderInstructions_[++d]=l[0],this.renderInstructions_[++d]=l[1],this.hitDetectionEnabled_){const h=o3e(d+5,u);this.renderInstructions_[++d]=h[0],this.renderInstructions_[++d]=h[1],this.renderInstructions_[++d]=h[2],this.renderInstructions_[++d]=h[3],this.renderInstructions_[++d]=Number(f)}for(let h=0;h<this.customAttributes.length;h++){const p=this.customAttributes[h].callback(o.feature,o.properties);this.renderInstructions_[++d]=p}}const c={id:++this.lastSentId,type:E_.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};c.projectionTransform=n,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,n,r,i,s){if(Oc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=oh(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=a3e(l),d=this.renderInstructions_[u],c=Math.floor(d).toString(),h=this.getLayer().getSource().getFeatureByUid(c);if(h)return i(h,this.getLayer(),null)}renderWorlds(e,n,r,i,s){let o=r;this.helper.useProgram(this.program_,e),n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),A$(this.currentTransform_,o*s,0),Z_(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(n);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<i)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(e){qAe(e)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class $Ye{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}class PYe extends Gje{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(Ll.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Ls.LOADED,this.loaded)this.uploadTile();else{if(e instanceof k$){const n=e.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}e.addEventListener(Ll.CHANGE,this.handleTileChange_)}}uploadTile(){Mf()}setReady(){this.ready=!0,this.dispatchEvent(Ll.CHANGE)}handleTileChange_(){this.tile.getState()===Ls.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Ll.CHANGE,this.handleTileChange_)}}function d3e(t,e,n){const r=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function NYe(t,e,n,r){d3e(t,e,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}function qve(t,e,n,r,i,s){const o=t.getGL();let a,l;n instanceof Float32Array?(a=o.FLOAT,t.getExtension("OES_texture_float"),l=t.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),d3e(o,e,s&&l);const u=n.byteLength/r[1];let d=1;u%8===0?d=8:u%4===0?d=4:u%2===0&&(d=2);let c;switch(i){case 1:{c=o.LUMINANCE;break}case 2:{c=o.LUMINANCE_ALPHA;break}case 3:{c=o.RGB;break}case 4:{c=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}const f=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,d),o.texImage2D(o.TEXTURE_2D,0,c,r[0],r[1],0,c,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,f)}let ab=null;function BYe(){ab=a0(1,1,void 0,{willReadFrequently:!0})}class zYe extends PYe{constructor(e){super(e),this.textures=[],this.renderSize_=Ac(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const n=new iv(pE,iP);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(e.tile)}setHelper(e){var r;const n=(r=this.helper)==null?void 0:r.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)n.deleteTexture(this.textures[i])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){const e=this.helper,n=e.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof k$||r instanceof T$?i=r.getImage():i=r.getData();const s=zbe(i);if(s){const v=n.createTexture();this.textures.push(v),this.bandCount=4,NYe(n,v,s,r.interpolate),this.setReady();return}i=jbe(i);const o=r.getSize(),a=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=i instanceof Float32Array,u=a[0]*a[1],d=l?Float32Array:Uint8Array,c=d.BYTES_PER_ELEMENT,f=i.byteLength/a[1];this.bandCount=Math.floor(f/c/a[0]);const h=Math.ceil(this.bandCount/4);if(h===1){const v=n.createTexture();this.textures.push(v),qve(e,v,i,a,this.bandCount,r.interpolate),this.setReady();return}const p=new Array(h);for(let v=0;v<h;++v){const w=n.createTexture();this.textures.push(w);const E=v<h-1?4:(this.bandCount-1)%4+1;p[v]=new d(u*E)}let g=0,b=0;const y=a[0]*this.bandCount;for(let v=0;v<a[1];++v){for(let w=0;w<y;++w){const E=i[b+w],S=Math.floor(g/this.bandCount),T=w%this.bandCount,D=Math.floor(T/4),k=p[D],R=k.length/u,O=T%4;k[S*R+O]=E,++g}b+=f/c}for(let v=0;v<h;++v){const w=this.textures[v],E=p[v],S=E.length/u;qve(e,w,E,a,S,r.interpolate)}this.setReady()}getImagePixelData_(e,n,r){const i=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1];ab||BYe(),ab.clearRect(0,0,1,1);const a=e.width,l=e.height,u=a-2*i,d=l-2*i,c=i+Math.floor(u*(n/s)),f=i+Math.floor(d*(r/o));let h;try{ab.drawImage(e,c,f,1,1,0,0,1,1),h=ab.getImageData(0,0,1,1).data}catch{return ab=null,null}return h}getArrayPixelData_(e,n,r,i){const s=this.gutter,o=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],d=l+2*s,c=u+2*s,f=s+Math.floor(l*(r/o)),h=s+Math.floor(u*(i/a));if(e instanceof DataView){const g=e.byteLength/(d*c),b=g*(h*d+f),y=e.buffer.slice(b,b+g);return new DataView(y)}const p=this.bandCount*(h*d+f);return e.slice(p,p+this.bandCount)}getPixelData(e,n){if(!this.loaded)return null;if(this.tile instanceof HAe){const r=this.tile.getData(),i=jbe(r);if(i){const s=this.tile.getSize();return this.getArrayPixelData_(i,s,e,n)}return this.getImagePixelData_(zbe(r),e,n)}return this.getImagePixelData_(this.tile.getImage(),e,n)}}const jYe={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function Hve(t){return 1/(t+2)}function UYe(){return{tileIds:new Set,representationsByZ:{}}}function Gve(t,e){return t.tileIds.has(Si(e))}function Vve(t,e,n){const r=t.representationsByZ;n in r||(r[n]=new Set),r[n].add(e),t.tileIds.add(Si(e.tile))}function hF(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=o0(e,VAe(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=o0(e,i))}return e}function lM(t,e){return`${t.getKey()},${t.getRevision()},${ob(e)}`}class qYe extends gE{constructor(e,n){super(e,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Qo(),this.tempMat4=E$(),this.tempTileRange_=new Vje(0,0,0,0),this.tempTileCoord_=Q4(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new GAe(r),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const r=this.getLayer().getRenderSource();return!r||v$(hF(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return Mf()}enqueueTiles(e,n,r,i,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),d=l.getGutterForProjection(o.projection),c=Si(l);c in e.wantedTiles||(e.wantedTiles[c]={});const f=e.wantedTiles[c],h=this.tileRepresentationCache,p=a.getMapInternal(),g=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let b=r;b>=g;--b){const y=u.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),v=u.getResolution(b);for(let w=y.minX;w<=y.maxX;++w)for(let E=y.minY;E<=y.maxY;++E){const S=Q4(b,w,E,this.tempTileCoord_),T=lM(l,S);let D,k;if(h.containsKey(T)&&(D=h.get(T),k=D.tile),(!D||D.tile.key!==l.getKey())&&(k=l.getTile(b,w,E,e.pixelRatio,o.projection),!k)||Gve(i,k))continue;D?D.setTile(k):(D=this.createTileRepresentation({tile:k,grid:u,helper:this.helper,gutter:d}),h.set(T,D)),Vve(i,D,b);const R=k.getKey();f[R]=!0,k.getState()===Ls.IDLE&&(e.tileQueue.isKeyQueued(R)||e.tileQueue.enqueue([k,c,u.getTileCoordCenter(S),v]))}}}beforeTilesRender(e,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,n,r,i,s,o,a,l,u,d,c){}renderTileMask(e,n,r,i){}drawTile_(e,n,r,i,s,o,a){if(!n.ready)return;const u=n.tile.tileCoord,d=ob(u),c=d in o?o[d]:1,f=a.getResolution(r),h=Ac(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),g=a.getTileCoordExtent(u),b=c<1?-1:Hve(r);c<1&&(e.animate=!0);const y=e.viewState,v=y.center[0],w=y.center[1],E=h[0]+2*i,S=h[1]+2*i,T=E/S,D=(v-p[0])/(h[0]*f),k=(p[1]-w)/(h[1]*f),R=y.resolution/f,O=u[1],B=u[2];Wje(this.tileTransform_),Ube(this.tileTransform_,2/(e.size[0]*R/E),-2/(e.size[1]*R/E)),Yje(this.tileTransform_,y.rotation),Ube(this.tileTransform_,1,1/T),A$(this.tileTransform_,(h[0]*(O-D)-i)/E,(h[1]*(B-k)-i)/S),this.renderTile(n,this.tileTransform_,e,s,f,h,p,g,b,i,c)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,e);const r=e.viewState,i=this.getLayer(),s=i.getRenderSource(),o=s.getTileGridForProjection(r.projection),a=s.getGutterForProjection(r.projection),l=hF(e,e.extent),u=o.getZForResolution(r.resolution,s.zDirection),d=UYe(),c=i.getPreload();if(e.nextExtent){const w=o.getZForResolution(r.nextResolution,s.zDirection),E=hF(e,e.nextExtent);this.enqueueTiles(e,E,w,d,c)}this.enqueueTiles(e,l,u,d,0),c>0&&setTimeout(()=>{this.enqueueTiles(e,l,u-1,d,c-1)},0);const f={};let h=!1;const p=d.representationsByZ;if(u in p){const w=Si(this),E=e.time;for(const S of p[u]){const T=S.tile;if((T instanceof T$||T instanceof D$)&&T.getState()===Ls.EMPTY)continue;const D=T.tileCoord;if(S.ready){const O=T.getAlpha(w,E);if(O===1){T.endTransition(w);continue}h=!0;const B=ob(D);f[B]=O}if(this.renderComplete=!1,this.findAltTiles_(o,D,u+1,d))continue;const R=o.getMinZoom();for(let O=u-1;O>=R&&!this.findAltTiles_(o,D,O,d);--O);}}const g=Object.keys(p).map(Number).sort(Xje);if(this.beforeTilesMaskRender(e))for(let w=0,E=g.length;w<E;++w){const S=g[w];for(const T of p[S]){const D=T.tile.tileCoord;if(ob(D)in f)continue;const R=o.getTileCoordExtent(D);this.renderTileMask(T,S,R,Hve(S))}}this.beforeTilesRender(e,h);for(let w=0,E=g.length;w<E;++w){const S=g[w];for(const T of p[S]){const D=T.tile.tileCoord;ob(D)in f||this.drawTile_(e,T,S,a,l,f,o)}}if(u in p)for(const w of p[u]){const E=w.tile.tileCoord;ob(E)in f&&this.drawTile_(e,w,u,a,l,f,o)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const y=this.helper.getCanvas(),v=this.tileRepresentationCache;for(;v.canExpireCache();)v.pop().dispose();return this.postRender(n,e),y}beforeFinalize(e){}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let d=s.minY;d<=s.maxY;++d){const c=lM(l,[r,u,d]);let f=!1;if(a.containsKey(c)){const h=a.get(c);h.ready&&!Gve(i,h.tile)&&(Vve(i,h,r),f=!0)}f||(o=!1)}return o}clearCache(){super.clearCache();const e=this.tileRepresentationCache;e.forEach(n=>n.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const er={...jYe,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},CA={TEXTURE_COORD:"a_textureCoord"},HYe=[{name:CA.TEXTURE_COORD,size:2,type:Ps.FLOAT}];class GYe extends qYe{constructor(e,n){super(e,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new iv(mE,iP),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const e=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(e)}super.removeHelper()}createTileRepresentation(e){return new zYe(e)}beforeTilesRender(e,n){super.beforeTilesRender(e,n),this.helper.useProgram(this.program_,e)}renderTile(e,n,r,i,s,o,a,l,u,d,c){const f=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(HYe);let h=0;for(;h<e.textures.length;){const T=`${er.TILE_TEXTURE_ARRAY}[${h}]`;this.helper.bindTexture(e.textures[h],h,T),++h}for(let T=0;T<this.paletteTextures_.length;++T){const D=this.paletteTextures_[T],k=D.getTexture(f);this.helper.bindTexture(k,h,D.name),++h}const p=r.viewState,g=o[0]+2*d,b=o[1]+2*d,v=e.tile.tileCoord,w=v[1],E=v[2];this.helper.setUniformMatrixValue(er.TILE_TRANSFORM,wk(this.tempMat4,n)),this.helper.setUniformFloatValue(er.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(er.DEPTH,u);let S=i;d>0&&(S=l,o0(S,i,S)),this.helper.setUniformFloatVec4(er.RENDER_EXTENT,S),this.helper.setUniformFloatValue(er.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(er.ZOOM,p.zoom),this.helper.setUniformFloatValue(er.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(er.TEXTURE_PIXEL_HEIGHT,b),this.helper.setUniformFloatValue(er.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(er.TEXTURE_ORIGIN_X,a[0]+w*o[0]*s-d*s),this.helper.setUniformFloatValue(er.TEXTURE_ORIGIN_Y,a[1]-E*o[1]*s+d*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const i=this.getLayer(),s=oh(r.pixelToCoordinateTransform,e.slice()),o=r.viewState,a=i.getExtent();if(a&&!yb(VAe(a,o.projection),s))return null;const l=i.getSources(_$([s]),o.resolution);let u,d,c;for(u=l.length-1;u>=0;--u)if(d=l[u],d.getState()==="ready"){if(c=d.getTileGridForProjection(o.projection),d.getWrapX())break;const h=c.getExtent();if(!h||yb(h,s))break}if(u<0)return null;const f=this.tileRepresentationCache;for(let h=c.getZForResolution(o.resolution);h>=c.getMinZoom();--h){const p=c.getTileCoordForCoordAndZ(s,h),g=lM(d,p);if(!f.containsKey(g))continue;const b=f.get(g),y=b.tile;if((y instanceof T$||y instanceof D$)&&y.getState()===Ls.EMPTY)return null;if(!b.loaded)continue;const v=c.getOrigin(h),w=Ac(c.getTileSize(h)),E=c.getResolution(h),S=(s[0]-v[0])/E-p[1]*w[0],T=(v[1]-s[1])/E-p[2]*w[1];return b.getPixelData(S,T)}return null}disposeInternal(){const e=this.helper;if(e){const n=e.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}function VYe(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function Yg(t){const e=t.toString();return e.includes(".")?e:e+".0"}function sP(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(Yg).join(", ")})`}function SA(t){const e=t2(t),n=e.length>3?e[3]:1;return sP([e[0]/255,e[1]/255,e[2]/255,n])}function WYe(t){const e=Ac(t);return sP(e)}const pF={};let YYe=0;function bb(t){return t in pF||(pF[t]=YYe++),pF[t]}function If(t){return Yg(bb(t))}function oP(t){return"u_var_"+t}function uM(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const mF="getBandValue",f3e="u_paletteTextures",h3e="featureId",p3e="geometryType";function XYe(t,e,n,r){const i=Zje(t,e,n);return aP(i,e,r)}function ii(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=aP(n.args[o],r,e);return t(s,e)}}const ZYe={[dr.Get]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+r},[dr.Id]:t=>(t.featureId=!0,(t.inFragmentShader?"v_":"a_")+h3e),[dr.GeometryType]:t=>(t.geometryType=!0,(t.inFragmentShader?"v_":"a_")+p3e),[dr.LineMetric]:()=>"currentLineMetric",[dr.Var]:(t,e)=>{const r=e.args[0].value;return r in t.variables||(t.variables[r]={name:r,type:e.type}),oP(r)},[dr.Resolution]:()=>"u_resolution",[dr.Zoom]:()=>"u_zoom",[dr.Time]:()=>"u_time",[dr.Any]:ii(t=>`(${t.join(" || ")})`),[dr.All]:ii(t=>`(${t.join(" && ")})`),[dr.Not]:ii(([t])=>`(!${t})`),[dr.Equal]:ii(([t,e])=>`(${t} == ${e})`),[dr.NotEqual]:ii(([t,e])=>`(${t} != ${e})`),[dr.GreaterThan]:ii(([t,e])=>`(${t} > ${e})`),[dr.GreaterThanOrEqualTo]:ii(([t,e])=>`(${t} >= ${e})`),[dr.LessThan]:ii(([t,e])=>`(${t} < ${e})`),[dr.LessThanOrEqualTo]:ii(([t,e])=>`(${t} <= ${e})`),[dr.Multiply]:ii(t=>`(${t.join(" * ")})`),[dr.Divide]:ii(([t,e])=>`(${t} / ${e})`),[dr.Add]:ii(t=>`(${t.join(" + ")})`),[dr.Subtract]:ii(([t,e])=>`(${t} - ${e})`),[dr.Clamp]:ii(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[dr.Mod]:ii(([t,e])=>`mod(${t}, ${e})`),[dr.Pow]:ii(([t,e])=>`pow(${t}, ${e})`),[dr.Abs]:ii(([t])=>`abs(${t})`),[dr.Floor]:ii(([t])=>`floor(${t})`),[dr.Ceil]:ii(([t])=>`ceil(${t})`),[dr.Round]:ii(([t])=>`floor(${t} + 0.5)`),[dr.Sin]:ii(([t])=>`sin(${t})`),[dr.Cos]:ii(([t])=>`cos(${t})`),[dr.Atan]:ii(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[dr.Sqrt]:ii(([t])=>`sqrt(${t})`),[dr.Match]:ii(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],o=t[i+1];r=`(${e} == ${s} ? ${o} : ${r||n})`}return r}),[dr.Between]:ii(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[dr.Interpolate]:ii(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let u;t===Yg(1)?u=`(${e} - ${s}) / (${a} - ${s})`:u=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return r}),[dr.Case]:ii(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[dr.In]:ii(([t,...e],n)=>{const r=VYe("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[dr.Array]:ii(t=>`vec${t.length}(${t.join(", ")})`),[dr.Color]:ii(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[dr.Band]:ii(([t,e,n],r)=>{if(!(mF in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${er.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[mF]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${er.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${er.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${mF}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[dr.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let u=0;u<r.length;u++){const d=r[u].value,c=t2(d),f=u*4;s[f]=c[0],s[f+1]=c[1],s[f+2]=c[2],s[f+3]=c[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${f3e}[${t.paletteTextures.length}]`,a=new $Ye(o,s);t.paletteTextures.push(a);const l=aP(n,Ai,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function aP(t,e,n){if(t instanceof Kje){const r=ZYe[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&Ai)>0)return Yg(t.value);if((t.type&WAe)>0)return t.value.toString();if((t.type&n2)>0)return If(t.value.toString());if((t.type&Rl)>0)return SA(t.value);if((t.type&Xp)>0)return sP(t.value);if((t.type&Xv)>0)return WYe(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Jje(e)})`)}function KYe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const By=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,zy=KYe();class m3e{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Yg(zy["circle-radius"])} + ${Yg(zy["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=SA(zy["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Yg(zy["stroke-width"]),this.strokeColorExpression_=SA(zy["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=If("round"),this.strokeJoinExpression_=If("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=SA(zy["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,n,r){return this.varyings_.push({name:e,type:n,expression:r}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${Uve} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${Uve}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${If("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${If("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${If("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${If("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);

  if (${this.discardExpression_}) { discard; }

  vec4 color = ${this.strokeColorExpression_};
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  color.a *= smoothstep(0.5, -0.5, distance);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${By}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}const oc={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},JYe=["#00f","#0ff","#0f0","#ff0","#f00"];let QYe=class extends xD{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.gradient_=null,this.addChangeListener(oc.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:JYe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weightFunction_=typeof r=="string"?i=>i.get(r):r,this.setRenderOrder(null)}getBlur(){return this.get(oc.BLUR)}getGradient(){return this.get(oc.GRADIENT)}getRadius(){return this.get(oc.RADIUS)}handleGradientChanged_(){this.gradient_=eXe(this.getGradient())}setBlur(e){this.set(oc.BLUR,e)}setGradient(e){this.set(oc.GRADIENT,e)}setRadius(e){this.set(oc.RADIUS,e)}createRenderer(){const e=new m3e().addAttribute("float a_weight").addVarying("v_weight","float","a_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_weight)");return new c3e(this,{className:this.getClassName(),attributes:[{name:"weight",callback:n=>{const r=this.weightFunction_(n);return r!==void 0?ks(r,0,1):1}}],uniforms:{u_size:()=>(this.get(oc.RADIUS)+this.get(oc.BLUR))*2,u_blurSlope:()=>this.get(oc.RADIUS)/Math.max(1,this.get(oc.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}};function eXe(t){const r=a0(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)i.addColorStop(o*s,t[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class tXe extends Qje{constructor(e){super(e),this.vectorRenderer_=new eUe(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=Qo(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const n=oh(this.coordinateToVectorPixelTransform_,oh(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(n)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const n=e.pixelRatio,r=e.viewState,i=r.resolution,s=e.viewHints,o=this.vectorRenderer_;let a=e.extent;this.layerImageRatio_!==1&&(a=a.slice(0),YAe(a,this.layerImageRatio_));const l=ru(a)/i,u=Zp(a)/i;if(!s[Yp.ANIMATING]&&!s[Yp.INTERACTING]&&!v$(a)){o.useContainer(null,null);const d=o.context,c=e.layerStatesArray[e.layerIndex],f=Object.assign({},c,{opacity:1}),h=Object.assign({},e,{extent:a,size:[l,u],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[f],layerIndex:0,declutter:null}),p=this.getLayer().getDeclutter();p&&(h.declutter={[p]:new tUe(9)});let g=!0;const b=new q$(a,i,n,d.canvas,function(y){o.prepareFrame(h)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(h,null)&&(o.renderDeclutter(h),o.renderDeferred(h),g=!1),y())});b.addEventListener(Ll.CHANGE,()=>{if(b.getState()!==Tg.LOADED)return;this.image=g?null:b;const y=b.getPixelRatio(),v=nUe(b.getResolution())*n/y;this.renderedResolution=v,this.coordinateToVectorPixelTransform_=C$(this.coordinateToVectorPixelTransform_,l/2,u/2,1/v,-1/v,0,-r.center[0],-r.center[1])}),b.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,n,r,i,s){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,r,i,s):super.forEachFeatureAtCoordinate(e,n,r,i,s)}}class nXe extends xD{constructor(e){e=e||{};const n=Object.assign({},e);delete n.imageRatio,super(n),this.imageRatio_=e.imageRatio!==void 0?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new tXe(this)}}function Un(t,e,n){const r=iUe();return XYe(e,n,r,t)}function rXe(t){const e=t2(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const iXe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function cM(t){return t===Rl||t===Xv?2:t===Xp?4:1}function lS(t){const e=cM(t);return e>1?`vec${e}`:"float"}function Lk(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function lP(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=Un(n,t[`${r}radius`],Ai);if(`${r}radius2`in t){const s=Un(n,t[`${r}radius2`],Ai);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${Un(n,t[`${r}stroke-width`],Ai)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=Un(n,t[`${r}scale`],Xv);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(Un(n,t[`${r}displacement`],Xp)),`${r}rotation`in t&&e.setSymbolRotationExpression(Un(n,t[`${r}rotation`],Ai)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function g3e(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function uP(t,e,n,r,i){const s=new Image;s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],s.src=t[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${i}_size`);const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,e.addUniform(`sampler2D u_texture${i}`),o}function cP(t,e,n,r,i){let s=Un(n,t[`${e}offset`],Xp);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function sXe(t,e,n,r,i){i.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,lP(t,e,r,"circle-");let s=null;"circle-opacity"in t&&(s=Un(i,t["circle-opacity"],Ai));let o="coordsPx";"circle-scale"in t&&(o=`coordsPx / ${Un(i,t["circle-scale"],Xv)}`);let a=null;"circle-fill-color"in t&&(a=Un(i,t["circle-fill-color"],Rl));let l=null;"circle-stroke-color"in t&&(l=Un(i,t["circle-stroke-color"],Rl));let u=Un(i,t["circle-radius"],Ai),d=null;"circle-stroke-width"in t&&(d=Un(i,t["circle-stroke-width"],Ai),u=`(${u} + ${d} * 0.5)`);const c=`circleDistanceField(${o}, ${u})`,f=g3e(c,a,l,d,s);e.setSymbolColorExpression(f)}function oXe(t,e,n,r,i){i.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,i.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,i.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,lP(t,e,r,"shape-");let s=null;"shape-opacity"in t&&(s=Un(i,t["shape-opacity"],Ai));let o="coordsPx";"shape-scale"in t&&(o=`coordsPx / ${Un(i,t["shape-scale"],Xv)}`);let a=null;"shape-fill-color"in t&&(a=Un(i,t["shape-fill-color"],Rl));let l=null;"shape-stroke-color"in t&&(l=Un(i,t["shape-stroke-color"],Rl));let u=null;"shape-stroke-width"in t&&(u=Un(i,t["shape-stroke-width"],Ai));const d=Un(i,t["shape-points"],Ai);let c="0.";"shape-angle"in t&&(c=Un(i,t["shape-angle"],Ai));let f,h=Un(i,t["shape-radius"],Ai);if(u!==null&&(h=`${h} + ${u} * 0.5`),"shape-radius2"in t){let g=Un(i,t["shape-radius2"],Ai);u!==null&&(g=`${g} + ${u} * 0.5`),f=`starDistanceField(${o}, ${d}, ${h}, ${g}, ${c})`}else f=`regularDistanceField(${o}, ${d}, ${h}, ${c})`;const p=g3e(f,a,l,u,s);e.setSymbolColorExpression(p)}function aXe(t,e,n,r,i){let s="vec4(1.0)";"icon-color"in t&&(s=Un(i,t["icon-color"],Rl)),"icon-opacity"in t&&(s=`${s} * vec4(1.0, 1.0, 1.0, ${Un(i,t["icon-opacity"],Ai)})`);const o=Lk(t["icon-src"]),a=uP(t,e,n,"icon-",o);if(e.setSymbolColorExpression(`${s} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${Un(r,t["icon-width"],Ai)}, ${Un(r,t["icon-height"],Ai)})`),"icon-offset"in t&&"icon-size"in t){const l=Un(r,t["icon-size"],Xp),u=e.getSymbolSizeExpression();e.setSymbolSizeExpression(l);const d=cP(t,"icon-",r,"v_quadSizePx",l);e.setTextureCoordinateExpression(`(vec4((${d}).xyxy) + vec4(0., 0., ${l})) / (${u}).xyxy`)}if(lP(t,e,r,"icon-"),"icon-anchor"in t){const l=Un(r,t["icon-anchor"],Xp);let u="1.0";"icon-scale"in t&&(u=Un(r,t["icon-scale"],Xv));let d;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?d=`${l} * ${u}`:t["icon-anchor-x-units"]==="pixels"?d=`${l} * vec2(vec2(${u}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?d=`${l} * vec2(v_quadSizePx.x, vec2(${u}).x)`:d=`${l} * v_quadSizePx`;let c=`v_quadSizePx * vec2(0.5, -0.5) + ${d} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":c=`v_quadSizePx * -0.5 + ${d}`;break;case"bottom-left":c=`v_quadSizePx * 0.5 - ${d}`;break;case"bottom-right":c=`v_quadSizePx * vec2(-0.5, 0.5) + ${d} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${c}`)}}function lXe(t,e,n,r,i){if("stroke-color"in t&&e.setStrokeColorExpression(Un(i,t["stroke-color"],Rl)),"stroke-pattern-src"in t){const s=Lk(t["stroke-pattern-src"]),o=uP(t,e,n,"stroke-pattern-",s);let a=o,l="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(a=Un(i,t["stroke-pattern-size"],Xp),l=cP(t,"stroke-pattern-",i,o,a));let u="0.";"stroke-pattern-spacing"in t&&(u=Un(i,t["stroke-pattern-spacing"],Ai)),i.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const d=`u_texture${s}`;let c="1.";"stroke-color"in t&&(c=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${c} * sampleStrokePattern(${d}, ${o}, ${l}, ${a}, ${u}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(Un(r,t["stroke-width"],Ai)),"stroke-offset"in t&&e.setStrokeOffsetExpression(Un(r,t["stroke-offset"],Ai)),"stroke-line-cap"in t&&e.setStrokeCapExpression(Un(r,t["stroke-line-cap"],n2)),"stroke-line-join"in t&&e.setStrokeJoinExpression(Un(r,t["stroke-line-join"],n2)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(Un(r,t["stroke-miter-limit"],Ai)),"stroke-line-dash"in t){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${If("square")}) {
    distanceSegment -= v_width * 0.5;
  } else if (capType == ${If("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);
  }
  return distanceSegment;
}`;let s=t["stroke-line-dash"].map(h=>Un(i,h,Ai));s.length%2===1&&(s=[...s,...s]);let o="0.";"stroke-line-dash-offset"in t&&(o=Un(r,t["stroke-line-dash-offset"],Ai));const l=`dashDistanceField_${Lk(t["stroke-line-dash"])}`,u=s.map((h,p)=>`float dashLength${p} = ${h};`),d=s.map((h,p)=>`dashLength${p}`).join(" + ");let c="0.",f=`getSingleDashDistance(distance, radius, ${c}, dashLength0, totalDashLength, capType)`;for(let h=2;h<s.length;h+=2)c=`${c} + dashLength${h-2} + dashLength${h-1}`,f=`min(${f}, getSingleDashDistance(distance, radius, ${c}, dashLength${h}, totalDashLength, capType))`;i.functions[l]=`float ${l}(float distance, float radius, float capType) {
  ${u.join(`
  `)}
  float totalDashLength = ${d};
  return ${f};
}`,e.setStrokeDistanceFieldExpression(`${l}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}function uXe(t,e,n,r,i){if("fill-color"in t&&e.setFillColorExpression(Un(i,t["fill-color"],Rl)),"fill-pattern-src"in t){const s=Lk(t["fill-pattern-src"]),o=uP(t,e,n,"fill-pattern-",s);let a=o,l="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(a=Un(i,t["fill-pattern-size"],Xp),l=cP(t,"fill-pattern-",i,o,a)),i.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const u=`u_texture${s}`;let d="1.";"fill-color"in t&&(d=e.getFillColorExpression()),e.setFillColorExpression(`${d} * sampleFillPattern(${u}, ${o}, ${l}, ${a}, pxOrigin, pxPos)`)}}function y3e(t,e){const n=uM(),r={...uM(),inFragmentShader:!0,variables:n.variables},i=new m3e,s={};if("icon-src"in t?aXe(t,i,s,n,r):"shape-points"in t?oXe(t,i,s,n,r):"circle-radius"in t&&sXe(t,i,s,n,r),lXe(t,i,s,n,r),uXe(t,i,s,n,r),t.filter){const l=Un(r,t.filter,WAe);i.setFragmentDiscardExpression(`!${l}`)}for(const l in r.variables){const u=r.variables[l],d=oP(u.name);let c=lS(u.type);u.type===Rl&&(c="vec4"),i.addUniform(`${c} ${d}`),s[d]=()=>{const f=e[u.name];return typeof f=="number"?f:typeof f=="boolean"?f?1:0:u.type===Rl?t2(f||"#eee"):typeof f=="string"?bb(f):f}}for(const l in r.properties){const u=r.properties[l];n.properties[l]||(n.properties[l]=u);let d=lS(u.type),c=`a_prop_${u.name}`;u.type===Rl&&(d="vec4",c=`unpackColor(${c})`,i.addVertexShaderFunction(iXe)),i.addVarying(`v_prop_${u.name}`,d,c)}for(const l in n.properties){const u=n.properties[l];i.addAttribute(`${lS(u.type)} a_prop_${u.name}`)}for(const l in n.functions)i.addVertexShaderFunction(n.functions[l]);for(const l in r.functions)i.addFragmentShaderFunction(r.functions[l]);const o={};for(const l in n.properties){const u=n.properties[l],d=c=>{const f=c.get(u.name);return u.type===Rl?rXe([...t2(f||"#eee")]):typeof f=="string"?bb(f):typeof f=="boolean"?f?1:0:f};o[`prop_${u.name}`]={size:cM(u.type),callback:d}}function a(l,u,d,c){const f=n[l],h=r[l];if(!f&&!h)return;const p=lS(d),g=cM(d);i.addAttribute(`${p} a_${u}`),h&&i.addVarying(`v_${u}`,p,`a_${u}`),o[u]={size:g,callback:c}}return a("geometryType",p3e,n2,l=>bb(rUe(l.getGeometry()))),a("featureId",h3e,n2|Ai,l=>{const u=l.getId()??null;return typeof u=="string"?bb(u):u}),{builder:i,attributes:o,uniforms:s}}class cXe extends L${constructor(e){const n=Object.assign({},e);super(n),this.styleVariables_=e.variables||{},this.parseResult_=y3e(e.style,this.styleVariables_),this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){const e=Object.keys(this.parseResult_.attributes).map(n=>({name:n,...this.parseResult_.attributes[n]}));return new c3e(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:e})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}function Wve(t,e){const n=`
    attribute vec2 ${CA.TEXTURE_COORD};
    uniform mat4 ${er.TILE_TRANSFORM};
    uniform float ${er.TEXTURE_PIXEL_WIDTH};
    uniform float ${er.TEXTURE_PIXEL_HEIGHT};
    uniform float ${er.TEXTURE_RESOLUTION};
    uniform float ${er.TEXTURE_ORIGIN_X};
    uniform float ${er.TEXTURE_ORIGIN_Y};
    uniform float ${er.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${CA.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${er.TEXTURE_ORIGIN_X} + ${er.TEXTURE_RESOLUTION} * ${er.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${er.TEXTURE_ORIGIN_Y} - ${er.TEXTURE_RESOLUTION} * ${er.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${er.TILE_TRANSFORM} * vec4(${CA.TEXTURE_COORD}, ${er.DEPTH}, 1.0);
    }
  `,r={...uM(),inFragmentShader:!0,bandCount:e},i=[];if(t.color!==void 0){const c=Un(r,t.color,Rl);i.push(`color = ${c};`)}if(t.contrast!==void 0){const c=Un(r,t.contrast,Ai);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb - (${c} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.exposure!==void 0){const c=Un(r,t.exposure,Ai);i.push(`color.rgb = clamp((${c} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.saturation!==void 0){const c=Un(r,t.saturation,Ai);i.push(`
      float saturation = ${c} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(t.gamma!==void 0){const c=Un(r,t.gamma,Ai);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${c}));`)}if(t.brightness!==void 0){const c=Un(r,t.brightness,Ai);i.push(`color.rgb = clamp(color.rgb + ${c}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(r.variables).length;if(o>1&&!t.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<o;++c){const f=r.variables[Object.keys(r.variables)[c]];if(!(f.name in t.variables))throw new Error(`Missing '${f.name}' in style variables`);const h=oP(f.name);s[h]=function(){let p=t.variables[f.name];return typeof p=="string"&&(p=bb(p)),p!==void 0?p:-9999999}}const a=Object.keys(s).map(function(c){return`uniform float ${c};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${er.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${f3e}[${r.paletteTextures.length}];`);const u=Object.keys(r.functions).map(function(c){return r.functions[c]}),d=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${er.RENDER_EXTENT};
    uniform float ${er.TRANSITION_ALPHA};
    uniform float ${er.TEXTURE_PIXEL_WIDTH};
    uniform float ${er.TEXTURE_PIXEL_HEIGHT};
    uniform float ${er.RESOLUTION};
    uniform float ${er.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${er.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${er.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${er.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${er.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${er.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${er.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:d,uniforms:s,paletteTextures:r.paletteTextures}}class Rk extends sUe{constructor(e){e=e?Object.assign({},e):{};const n=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(J4.SOURCE,this.handleSourceUpdate_)}getSources(e,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if(e.getState()==="loading"){const n=()=>{e.getState()==="ready"&&(e.removeEventListener("change",n),this.setStyle(this.style_))};e.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,n=this.getSources([-e,-e,e,e],e);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const e=Wve(this.style_,this.getSourceBandCount_());return new GYe(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,n){const r=this.getRenderer();let i;for(let s=0,o=n.length;s<o;++s)this.renderedSource_=n[s],r.prepareFrame(e)&&(i=r.renderFrame(e));return i}render(e,n){this.rendered=!0;const r=e.viewState,i=this.getSources(e.extent,r.resolution);let s=!0;for(let a=0,l=i.length;a<l;++a){const u=i[a],d=u.getState();if(d=="loading"){const c=()=>{u.getState()=="ready"&&(u.removeEventListener("change",c),this.changed())};u.addEventListener("change",c)}s=s&&d=="ready"}const o=this.renderSources(e,i);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=r.resolution,o;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const n=Wve(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}Rk.prototype.dispose;class dXe{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=Si(e),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(e){const n=Si(e),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(e){const n=Si(e),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(e,n){var i;const r=e.getType();switch(r){case"GeometryCollection":{const s=e.getGeometriesArray();for(const o of s)this.addGeometry_(o,n);break}case"MultiPolygon":{const s=e;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEndss(),n,Si(n),s.getStride());break}case"MultiLineString":{const s=e;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Si(n),s.getStride());break}case"MultiPoint":{const s=e;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Si(n),s.getStride());break}case"Polygon":{const s=e;this.addCoordinates_(r,s.getFlatCoordinates(),s.getEnds(),n,Si(n),s.getStride());break}case"Point":{const s=e;this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Si(n),s.getStride());break}case"LineString":case"LinearRing":{const s=e,o=s.getStride();this.addCoordinates_(r,s.getFlatCoordinates(),null,n,Si(n),o,(i=s.getLayout)==null?void 0:i.call(s));break}}}addCoordinates_(e,n,r,i,s,o,a){let l;switch(e){case"MultiPolygon":{const u=r;for(let d=0,c=u.length;d<c;d++){let f=u[d];const h=d>0?u[d-1]:null,p=h?h[h.length-1]:0,g=f[f.length-1];f=p>0?f.map(b=>b-p):f,this.addCoordinates_("Polygon",n.slice(p,g),f,i,s,o,a)}break}case"MultiLineString":{const u=r;for(let d=0,c=u.length;d<c;d++){const f=d>0?u[d-1]:0;this.addCoordinates_("LineString",n.slice(f,u[d]),null,i,s,o,a)}break}case"MultiPoint":for(let u=0,d=n.length;u<d;u+=o)this.addCoordinates_("Point",n.slice(u,u+2),null,i,s,null,null);break;case"Polygon":{const u=r;if(i instanceof oUe){const f=aUe(n,u);if(f.length>1){this.addCoordinates_("MultiPolygon",n,f,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const d=r.length,c=r.map((f,h,p)=>h>0?(f-p[h-1])/o:f/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=d,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(fXe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(c),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=d;for(let f=0,h=u.length;f<h;f++){const p=f>0?u[f-1]:0;this.addCoordinates_("LinearRing",n.slice(p,u[f]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(hXe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}returnRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e){this.removeFeature(e);const n=e.getGeometry();n&&this.addGeometry_(n,e)}removeFeature(e){let n;n=this.clearFeatureEntryInPointBatch_(e)||n,n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.returnRef_(n.ref,Si(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}}function fXe(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function hXe(t,e,n){return e===3&&n==="XYM"?t:e===4?t.filter((r,i)=>i%e!==2):e===3?t.map((r,i)=>i%e!==2?r:0):new Array(t.length*1.5).fill(0).map((r,i)=>i%3===2?0:t[Math.round(i/1.5)])}function dP(t,e,n,r){let i=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);t[r+i++]=a[0]??a,!(!o.size||o.size===1)&&(t[r+i++]=a[1],!(o.size<3)&&(t[r+i++]=a[2],!(o.size<4)&&(t[r+i++]=a[3])))}return i}function ID(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function pXe(t,e,n,r){const i=(2+ID(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let u=0,d=l.flatCoordss.length;u<d;u++)s[0]=l.flatCoordss[u][0],s[1]=l.flatCoordss[u][1],oh(r,s),e[o++]=s[0],e[o++]=s[1],o+=dP(e,n,l,o)}return e}function mXe(t,e,n,r){const i=3*t.verticesCount+(1+ID(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let u=0,d=l.flatCoordss.length;u<d;u++){s.length=l.flatCoordss[u].length,XAe(l.flatCoordss[u],0,s.length,3,r,s,3),o+=dP(e,n,l,o),e[o++]=s.length/3;for(let c=0,f=s.length;c<f;c+=3)e[o++]=s[c],e[o++]=s[c+1],e[o++]=s[c+2]}}return e}function gXe(t,e,n,r){const i=2*t.verticesCount+(1+ID(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let u=0,d=l.flatCoordss.length;u<d;u++){s.length=l.flatCoordss[u].length,XAe(l.flatCoordss[u],0,s.length,2,r,s),o+=dP(e,n,l,o),e[o++]=l.ringsVerticesCounts[u].length;for(let c=0,f=l.ringsVerticesCounts[u].length;c<f;c++)e[o++]=l.ringsVerticesCounts[u][c];for(let c=0,f=s.length;c<f;c+=2)e[o++]=s[c],e[o++]=s[c+1]}}return e}const yXe=[],gF=l3e();let bXe=0;const ld={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class vXe{constructor(e,n,r,i){this.helper_,this.hitDetectionEnabled_=i;let s=e;if(!("builder"in e)){const u=y3e(e,n);s={builder:u.builder,attributes:u.attributes,uniforms:u.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader());const a=this.hitDetectionEnabled_?{hitColor:{callback(){return o3e(this.ref,yXe)},size:4}}:{};this.customAttributes_=Object.assign({},a,s.attributes),this.uniforms_=s.uniforms;const l=Object.entries(this.customAttributes_).map(([u,d])=>({name:`a_${u}`,size:d.size||1,type:Ps.FLOAT}));this.polygonAttributesDesc_=[{name:ld.POSITION,size:2,type:Ps.FLOAT},...l],this.lineStringAttributesDesc_=[{name:ld.SEGMENT_START,size:2,type:Ps.FLOAT},{name:ld.MEASURE_START,size:1,type:Ps.FLOAT},{name:ld.SEGMENT_END,size:2,type:Ps.FLOAT},{name:ld.MEASURE_END,size:1,type:Ps.FLOAT},{name:ld.JOIN_ANGLES,size:2,type:Ps.FLOAT},{name:ld.DISTANCE,size:1,type:Ps.FLOAT},{name:ld.PARAMETERS,size:1,type:Ps.FLOAT},...l],this.pointAttributesDesc_=[{name:ld.POSITION,size:2,type:Ps.FLOAT},{name:ld.INDEX,size:1,type:Ps.FLOAT},...l],this.setHelper(r)}async generateBuffers(e,n){const r=this.generateRenderInstructions_(e,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=e2(Qo(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,n){const r=this.hasFill_?gXe(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?mXe(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?pXe(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=bXe++;let s;switch(n){case"Polygon":s=E_.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=E_.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=E_.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:ID(this.customAttributes_)};return gF.postMessage(o,[e.buffer]),e=null,new Promise(a=>{const l=u=>{const d=u.data;if(d.id!==i||(gF.removeEventListener("message",l),!this.helper_.getGL()))return;const c=new iv(pE,l2).fromArrayBuffer(d.vertexBuffer),f=new iv(mE,l2).fromArrayBuffer(d.indexBuffer);this.helper_.flushBufferData(c),this.helper_.flushBufferData(f),a([f,c])};gF.addEventListener("message",l)})}render(e,n,r){this.hasFill_&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,n,r),this.hasStroke_&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,n,r),this.hasSymbol_&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,n,r)}renderInternal_(e,n,r,i,s,o){const a=e.getSize();a!==0&&(this.helper_.useProgram(r,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i),o(),this.helper_.drawElements(0,a))}setHelper(e,n=null){this.helper_=e,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1])))}}const jy={...md,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class xXe extends gE{constructor(e,n){const r={[jy.RENDER_EXTENT]:[0,0,0,0],[jy.PATTERN_ORIGIN]:[0,0],[jy.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=vD(),this.currentTransform_=Qo(),this.tmpCoords_=[0,0],this.tmpTransform_=Qo(),this.tmpMat4_=E$(),this.currentFrameStateTransform_=Qo(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(n),this.batch_=new dXe,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Cp(n,Sp.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Cp(n,Sp.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Cp(n,Sp.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Cp(n,Sp.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.styles_=Array.isArray(e.style)?e.style:[e.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(e=>new vXe(e,this.styleVariables_,this.helper,this.hitDetectionEnabled_))}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((e,n)=>e.setHelper(this.helper,this.buffers_[n])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new s3e(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e){const n=e.feature;this.batch_.changeFeature(n)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){lUe(this.tmpTransform_,this.currentFrameStateTransform_),Z_(this.tmpTransform_,e),this.helper.setUniformMatrixValue(jy.PROJECTION_MATRIX,wk(this.tmpMat4_,this.tmpTransform_)),e2(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(jy.SCREEN_TO_WORLD_MATRIX,wk(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,e2(this.tmpTransform_,e),oh(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(jy.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=u3e(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[Yp.ANIMATING]&&!e.viewHints[Yp.INTERACTING],o=!J_(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,u=i.resolution,d=n instanceof xD?n.getRenderBuffer():0,c=S$(e.extent,d*u);r.loadFeatures(c,u,l),this.ready=!1;const f=this.helper.makeProjectionTransform(e,Qo()),h=this.styleRenderers_.map((p,g)=>p.generateBuffers(this.batch_,f).then(b=>{this.buffers_[g]&&this.disposeBuffers(this.buffers_[g]),this.buffers_[g]=b}));Promise.all(h).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),A$(this.currentFrameStateTransform_,o*s,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const u=this.styleRenderers_[a],d=this.buffers_[a];d&&u.render(d,e,()=>{this.applyUniforms_(d.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)})}}while(++o<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(Oc(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const o=oh(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=a3e(l),d=this.batch_.getFeatureFromRef(u);if(d)return i(d,this.getLayer(),null)}disposeBuffers(e){e.pointBuffers&&e.pointBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),e.lineStringBuffers&&e.lineStringBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n)),e.polygonBuffers&&e.polygonBuffers.filter(Boolean).forEach(n=>this.helper.deleteBuffer(n))}disposeInternal(){this.buffers_.forEach(e=>{this.disposeBuffers(e)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){qAe(e)}),this.sourceListenKeys_=null),super.disposeInternal()}}class wXe extends L${constructor(e){const n=Object.assign({},e);super(n),this.styleVariables_=e.variables||{},this.style_=e.style,this.hitDetectionDisabled_=!!e.disableHitDetection}createRenderer(){return new xXe(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}setStyle(e){this.style=e,this.clearRenderer(),this.changed()}}const _Xe=Object.freeze(Object.defineProperty({__proto__:null,Graticule:OHe,Group:_k,Heatmap:QYe,Image:R$,Layer:L$,Tile:Ek,Vector:b$,VectorImage:nXe,VectorTile:ZAe,WebGLPoints:cXe,WebGLTile:Rk,WebGLVector:wXe},Symbol.toStringTag,{value:"Module"}));function EXe(t){const e=t[0],n=new Array(e);let r=1<<e-1,i,s;for(i=0;i<e;++i)s=48,t[1]&r&&(s+=1),t[2]&r&&(s+=2),n[i]=String.fromCharCode(s),r>>=1;return n.join("")}const CXe='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class SXe extends vh{constructor(e){const n=e.hidpi!==void 0?e.hidpi:!1;super({cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:ai("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.hidpi_=n,this.culture_=e.culture!==void 0?e.culture:"en-us",this.maxZoom_=e.maxZoom!==void 0?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,this.placeholderTiles_=e.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(i=>i.json()).then(i=>this.handleImageryMetadataResponse(i))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(e){if(e.statusCode!=200||e.statusDescription!="OK"||e.authenticationResultCode!="ValidCredentials"||e.resourceSets.length!=1||e.resourceSets[0].resources.length!=1){this.setState("error");return}const n=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?n.zoomMax:this.maxZoom_,i=this.getProjection(),s=cE(i),o=this.hidpi_?2:1,a=n.imageWidth==n.imageHeight?n.imageWidth/o:[n.imageWidth/o,n.imageHeight/o],l=dE({extent:s,minZoom:n.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const u=this.culture_,d=this.hidpi_,c=this.placeholderTiles_;if(this.tileUrlFunction=F$(n.imageUrlSubdomains.map(function(f){const h=[0,0,0],p=n.imageUrl.replace("{subdomain}",f).replace("{culture}",u);return function(g,b,y){if(!g)return;Q4(g[0],g[1],g[2],h);const v=new URL(p.replace("{quadkey}",EXe(h))),w=v.searchParams;return d&&(w.set("dpi","d1"),w.set("device","mobile")),c===!0?w.delete("n"):c===!1&&w.set("n","z"),v.toString()}})),n.imageryProviders){const f=O$(ai("EPSG:4326"),this.getProjection());this.setAttributions(h=>{const p=[],g=h.viewState,b=this.getTileGrid(),y=b.getZForResolution(g.resolution,this.zDirection),w=b.getTileCoordForCoordAndZ(g.center,y)[0];return n.imageryProviders.map(function(E){let S=!1;const T=E.coverageAreas;for(let D=0,k=T.length;D<k;++D){const R=T[D];if(w>=R.zoomMin&&w<=R.zoomMax){const O=R.bbox,B=[O[1],O[0],O[3],O[2]],K=ev(B,f);if(Qb(K,h.extent)){S=!0;break}}}S&&p.push(E.attribution)}),p.push(CXe),p})}this.setState("ready")}}class AXe extends r2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:e.maxZoom!==void 0?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(e){Object.assign(this.config_,e),this.initializeMap_()}setConfig(e){this.config_=e||{},this.initializeMap_()}initializeMap_(){const e=JSON.stringify(this.config_);if(this.templateCache_[e]){this.applyTemplate_(this.templateCache_[e]);return}let n="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(n+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,e)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",n),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(e,n){const r=n.target;if(!r.status||r.status>=200&&r.status<300){let i;try{i=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(i),this.templateCache_[e]=i,this.setState("ready")}else this.setState("error")}handleInitError_(e){this.setState("error")}applyTemplate_(e){const n="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(n)}}class kXe extends aE{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(n){const r=n.getGeometry();return Oc(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,n,r){var i;(i=this.source)==null||i.loadFeatures(e,n,r),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(Ll.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(Ll.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,n){const r=e===0?0:Math.min(n,e)/e,i=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=n,this.interpolationRatio=r,i&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=vD(),n=this.distance*this.resolution,r=this.source.getFeatures(),i={};for(let s=0,o=r.length;s<o;s++){const a=r[s];if(!(Si(a)in i)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();uUe(u,e),S$(e,n,e);const d=this.source.getFeaturesInExtent(e).filter(function(c){const f=Si(c);return f in i?!1:(i[f]=!0,!0)});this.features.push(this.createCluster(d,e))}}}}createCluster(e,n){const r=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?cUe(r,l.getCoordinates()):e.splice(a,1)}dUe(r,1/e.length);const i=Pp(n),s=this.interpolationRatio,o=new xc([r[0]*(1-s)+i[0]*s,r[1]*(1-s)+i[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new du({geometry:o,features:e})}}class yE extends wD{constructor(e){const n=e.projection===void 0?"EPSG:3857":e.projection;let r=e.tileGrid;r===void 0&&n&&(r=dE({extent:cE(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:n,tileGrid:r,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Ac(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?Ac(n.getTileSize(e)):[256,256]}getGutterForProjection(e){const n=this.getProjection();return(!n||EA(n,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,n,r,i,s){const o=this.tileGrid||this.getTileGridForProjection(s||i),a=Math.max.apply(null,o.getResolutions().map((h,p)=>{const g=Ac(o.getTileSize(p)),b=this.getTileSize(p);return Math.max(b[0]/g[0],b[1]/g[1])})),l=this.getTileGridForProjection(i),u=[e,n,r],d=this.getTileCoordForTileUrlFunction(u,i),c=Object.assign({sourceProj:s||i,sourceTileGrid:o,targetProj:i,targetTileGrid:l,tileCoord:u,wrappedTileCoord:d,pixelRatio:a,gutter:this.gutter_,getTileFunction:(h,p,g,b)=>this.getTile(h,p,g,b),transformMatrix:this.transformMatrix},this.tileOptions),f=new D$(c);return f.key=this.getKey(),f}getTile(e,n,r,i,s){var w;const o=this.getProjection();if(s&&(o&&!EA(o,s)||this.transformMatrix))return this.getReprojTile_(e,n,r,s,o);const a=this.getTileSize(e),l=this.loader_,u=new AbortController,d={signal:u.signal,crossOrigin:this.crossOrigin_},c=this.getTileCoordForTileUrlFunction([e,n,r]);if(!c)return null;const f=c[0],h=c[1],p=c[2],g=(w=this.getTileGrid())==null?void 0:w.getFullTileRange(f);g&&(d.maxY=g.getHeight()-1);function b(){return pUe(function(){return l(f,h,p,d)})}const y=Object.assign({tileCoord:[e,n,r],loader:b,size:a,controller:u},this.tileOptions),v=new HAe(y);return v.key=this.getKey(),v.addEventListener(Ll.CHANGE,this.handleTileChange_),v}handleTileChange_(e){const n=e.target,r=Si(n),i=n.getState();let s;i==Ls.LOADING?(this.tileLoadingKeys_[r]=!0,s=oF.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ls.ERROR?oF.TILELOADERROR:i==Ls.LOADED?oF.TILELOADEND:void 0),s&&this.dispatchEvent(new fUe(s,n))}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||EA(n,e))&&!this.transformMatrix)return this.tileGrid;const r=Si(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=hUe(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,n){const r=ai(e);if(r){const i=Si(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=n)}}}function la(t){return(e,...n)=>TXe(t,e,n)}function i1(t,e){return la(b3e(t,e).get)}const{apply:TXe,construct:qHt,defineProperty:HHt,get:GHt,getOwnPropertyDescriptor:b3e,getPrototypeOf:fP,has:VHt,ownKeys:DXe,set:WHt,setPrototypeOf:YHt}=Reflect,{iterator:bE,species:XHt,toStringTag:LXe,for:ZHt}=Symbol,RXe=Object,{create:hP,defineProperty:FXe,freeze:KHt,is:JHt}=RXe,OXe=Array,MXe=OXe.prototype,v3e=MXe[bE],IXe=la(v3e),x3e=ArrayBuffer,$Xe=x3e.prototype;i1($Xe,"byteLength");const Yve=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Yve&&i1(Yve.prototype,"byteLength");const w3e=fP(Uint8Array);w3e.from;const sl=w3e.prototype;sl[bE];la(sl.keys);la(sl.values);la(sl.entries);la(sl.set);la(sl.reverse);la(sl.fill);la(sl.copyWithin);la(sl.sort);la(sl.slice);la(sl.subarray);i1(sl,"buffer");i1(sl,"byteOffset");i1(sl,"length");i1(sl,LXe);const PXe=Uint8Array,_3e=Uint16Array,pP=Uint32Array,NXe=Float32Array,u2=fP([][bE]()),E3e=la(u2.next),BXe=la(function*(){}().next),zXe=fP(u2),jXe=DataView.prototype,UXe=la(jXe.getUint16),mP=WeakMap,C3e=mP.prototype,S3e=la(C3e.get),qXe=la(C3e.set),A3e=new mP,HXe=hP(null,{next:{value:function(){const e=S3e(A3e,this);return E3e(e)}},[bE]:{value:function(){return this}}});function GXe(t){if(t[bE]===v3e&&u2.next===E3e)return t;const e=hP(HXe);return qXe(A3e,e,IXe(t)),e}const VXe=new mP,WXe=hP(zXe,{next:{value:function(){const e=S3e(VXe,this);return BXe(e)},writable:!0,configurable:!0}});for(const t of DXe(u2))t!=="next"&&FXe(WXe,t,b3e(u2,t));const k3e=new x3e(4),YXe=new NXe(k3e),XXe=new pP(k3e),ud=new _3e(512),cd=new PXe(512);for(let t=0;t<256;++t){const e=t-127;e<-24?(ud[t]=0,ud[t|256]=32768,cd[t]=24,cd[t|256]=24):e<-14?(ud[t]=1024>>-e-14,ud[t|256]=1024>>-e-14|32768,cd[t]=-e-1,cd[t|256]=-e-1):e<=15?(ud[t]=e+15<<10,ud[t|256]=e+15<<10|32768,cd[t]=13,cd[t|256]=13):e<128?(ud[t]=31744,ud[t|256]=64512,cd[t]=24,cd[t|256]=24):(ud[t]=31744,ud[t|256]=64512,cd[t]=13,cd[t|256]=13)}const gP=new pP(2048);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(e&8388608);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,gP[t]=e|n}for(let t=1024;t<2048;++t)gP[t]=939524096+(t-1024<<13);const s1=new pP(64);for(let t=1;t<31;++t)s1[t]=t<<23;s1[31]=1199570944;s1[32]=2147483648;for(let t=33;t<63;++t)s1[t]=2147483648+(t-32<<23);s1[63]=3347054592;const T3e=new _3e(64);for(let t=1;t<64;++t)t!==32&&(T3e[t]=1024);function ZXe(t){const e=t>>10;return XXe[0]=gP[T3e[e]+(t&1023)]+s1[e],YXe[0]}function D3e(t,e,...n){return ZXe(UXe(t,e,...GXe(n)))}var uS={exports:{}},Xve;function KXe(){if(Xve)return uS.exports;Xve=1;function t(e,n,r){const i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+n+" in "+e);const s=typeof e=="object"?e.outer:e,o=s.slice(0,s.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const u=a[l],d=n+"\\="+u+"([^"+u+"]*)"+u;i&&console.log("[xml-utils] pattern:",d);const f=new RegExp(d).exec(o);if(i&&console.log("[xml-utils] match:",f),f)return f[1]}}return uS.exports=t,uS.exports.default=t,uS.exports}var JXe=KXe();const yF=aa(JXe);var cS={exports:{}},dS={exports:{}},fS={exports:{}},Zve;function QXe(){if(Zve)return fS.exports;Zve=1;function t(e,n,r){const s=new RegExp(n).exec(e.slice(r));return s?r+s.index:-1}return fS.exports=t,fS.exports.default=t,fS.exports}var hS={exports:{}},Kve;function eZe(){if(Kve)return hS.exports;Kve=1;function t(e,n,r){const s=new RegExp(n).exec(e.slice(r));return s?r+s.index+s[0].length-1:-1}return hS.exports=t,hS.exports.default=t,hS.exports}var pS={exports:{}},Jve;function tZe(){if(Jve)return pS.exports;Jve=1;function t(e,n){const r=new RegExp(n,"g"),i=e.match(r);return i?i.length:0}return pS.exports=t,pS.exports.default=t,pS.exports}var Qve;function nZe(){if(Qve)return dS.exports;Qve=1;const t=QXe(),e=eZe(),n=tZe();function r(i,s,o){const a=o&&o.debug||!1,l=!(o&&typeof o.nested===!1),u=o&&o.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",s," and ",o);const d=t(i,`<${s}[ 
>/]`,u);if(a&&console.log("[xml-utils] start:",d),d===-1)return;const c=i.slice(d+s.length);let f=e(c,"^[^<]*[ /]>",0);const h=f!==-1&&c[f-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",h),h===!1)if(l){let y=0,v=1,w=0;for(;(f=e(c,"[ /]"+s+">",y))!==-1;){const E=c.substring(y,f+1);if(v+=n(E,"<"+s+`[ 
	>]`),w+=n(E,"</"+s+">"),w>=v)break;y=f}}else f=e(c,"[ /]"+s+">",0);const p=d+s.length+f+1;if(a&&console.log("[xml-utils] end:",p),p===-1)return;const g=i.slice(d,p);let b;return h?b=null:b=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:b,outer:g,start:d,end:p}}return dS.exports=r,dS.exports.default=r,dS.exports}var e1e;function rZe(){if(e1e)return cS.exports;e1e=1;const t=nZe();function e(n,r,i){const s=[],o=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,u;for(;u=t(n,r,{debug:o,startIndex:l});)a?l=u.start+1+r.length:l=u.end,s.push(u);return o&&console.log("findTagsByName found",s.length,"tags"),s}return cS.exports=e,cS.exports.default=e,cS.exports}var iZe=rZe();const sZe=aa(iZe),C_={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},hd={};for(const t in C_)C_.hasOwnProperty(t)&&(hd[C_[t]]=parseInt(t,10));const oZe=[hd.BitsPerSample,hd.ExtraSamples,hd.SampleFormat,hd.StripByteCounts,hd.StripOffsets,hd.StripRowCounts,hd.TileByteCounts,hd.TileOffsets,hd.SubIFDs],bF={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},fr={};for(const t in bF)bF.hasOwnProperty(t)&&(fr[bF[t]]=parseInt(t,10));const vl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},aZe={Unspecified:0,Assocalpha:1,Unassalpha:2},QHt={Version:0,AddCompression:1},eGt={None:0,Deflate:1,Zstandard:2},lZe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function uZe(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=256-t[o]/e*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function cZe(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=t[o]/e*256,i[a]=s,i[a+1]=s,i[a+2]=s;return i}function dZe(t,e){const{width:n,height:r}=t,i=new Uint8Array(n*r*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<t.length;++a,l+=3){const u=t[a];i[l]=e[u]/65536*256,i[l+1]=e[u+s]/65536*256,i[l+2]=e[u+o]/65536*256}return i}function fZe(t){const{width:e,height:n}=t,r=new Uint8Array(e*n*3);for(let i=0,s=0;i<t.length;i+=4,s+=3){const o=t[i],a=t[i+1],l=t[i+2],u=t[i+3];r[s]=255*((255-o)/256)*((255-u)/256),r[s+1]=255*((255-a)/256)*((255-u)/256),r[s+2]=255*((255-l)/256)*((255-u)/256)}return r}function hZe(t){const{width:e,height:n}=t,r=new Uint8ClampedArray(e*n*3);for(let i=0,s=0;i<t.length;i+=3,s+=3){const o=t[i],a=t[i+1],l=t[i+2];r[s]=o+1.402*(l-128),r[s+1]=o-.34414*(a-128)-.71414*(l-128),r[s+2]=o+1.772*(a-128)}return r}const pZe=.95047,mZe=1,gZe=1.08883;function yZe(t){const{width:e,height:n}=t,r=new Uint8Array(e*n*3);for(let i=0,s=0;i<t.length;i+=3,s+=3){const o=t[i+0],a=t[i+1]<<24>>24,l=t[i+2]<<24>>24;let u=(o+16)/116,d=a/500+u,c=u-l/200,f,h,p;d=pZe*(d*d*d>.008856?d*d*d:(d-16/116)/7.787),u=mZe*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),c=gZe*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),f=d*3.2406+u*-1.5372+c*-.4986,h=d*-.9689+u*1.8758+c*.0415,p=d*.0557+u*-.204+c*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,h=h>.0031308?1.055*h**(1/2.4)-.055:12.92*h,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,r[s]=Math.max(0,Math.min(1,f))*255,r[s+1]=Math.max(0,Math.min(1,h))*255,r[s+2]=Math.max(0,Math.min(1,p))*255}return r}const L3e=new Map;function mm(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>L3e.set(n,e))}async function R3e(t){const e=L3e.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);const n=await e();return new n(t)}mm([void 0,1],()=>pm(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.default));mm(5,()=>pm(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1]),import.meta.url).then(t=>t.default));mm(6,()=>{throw new Error("old style JPEG compression is not supported.")});mm(7,()=>pm(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1]),import.meta.url).then(t=>t.default));mm([8,32946],()=>pm(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(t=>t.default));mm(32773,()=>pm(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1]),import.meta.url).then(t=>t.default));mm(34887,()=>pm(()=>import("./lerc-IkWKEBSN.js"),__vite__mapDeps([7,5,8,1,9,10,11,12,13,14,15,16,17,18]),import.meta.url).then(async t=>(await t.zstd.init(),t)).then(t=>t.default));mm(50001,()=>pm(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([19,1]),import.meta.url).then(t=>t.default));function $D(t,e,n,r=1){return new(Object.getPrototypeOf(t)).constructor(e*n*r)}function bZe(t,e,n,r,i){const s=e/r,o=n/i;return t.map(a=>{const l=$D(a,r,i);for(let u=0;u<i;++u){const d=Math.min(Math.round(o*u),n-1);for(let c=0;c<r;++c){const f=Math.min(Math.round(s*c),e-1),h=a[d*e+f];l[u*r+c]=h}}return l})}function Rb(t,e,n){return(1-n)*t+n*e}function vZe(t,e,n,r,i){const s=e/r,o=n/i;return t.map(a=>{const l=$D(a,r,i);for(let u=0;u<i;++u){const d=o*u,c=Math.floor(d),f=Math.min(Math.ceil(d),n-1);for(let h=0;h<r;++h){const p=s*h,g=p%1,b=Math.floor(p),y=Math.min(Math.ceil(p),e-1),v=a[c*e+b],w=a[c*e+y],E=a[f*e+b],S=a[f*e+y],T=Rb(Rb(v,w,g),Rb(E,S,g),d%1);l[u*r+h]=T}}return l})}function xZe(t,e,n,r,i,s="nearest"){switch(s.toLowerCase()){case"nearest":return bZe(t,e,n,r,i);case"bilinear":case"linear":return vZe(t,e,n,r,i);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function wZe(t,e,n,r,i,s){const o=e/r,a=n/i,l=$D(t,r,i,s);for(let u=0;u<i;++u){const d=Math.min(Math.round(a*u),n-1);for(let c=0;c<r;++c){const f=Math.min(Math.round(o*c),e-1);for(let h=0;h<s;++h){const p=t[d*e*s+f*s+h];l[u*r*s+c*s+h]=p}}}return l}function _Ze(t,e,n,r,i,s){const o=e/r,a=n/i,l=$D(t,r,i,s);for(let u=0;u<i;++u){const d=a*u,c=Math.floor(d),f=Math.min(Math.ceil(d),n-1);for(let h=0;h<r;++h){const p=o*h,g=p%1,b=Math.floor(p),y=Math.min(Math.ceil(p),e-1);for(let v=0;v<s;++v){const w=t[c*e*s+b*s+v],E=t[c*e*s+y*s+v],S=t[f*e*s+b*s+v],T=t[f*e*s+y*s+v],D=Rb(Rb(w,E,g),Rb(S,T,g),d%1);l[u*r*s+h*s+v]=D}}}return l}function EZe(t,e,n,r,i,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return wZe(t,e,n,r,i,s);case"bilinear":case"linear":return _Ze(t,e,n,r,i,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function CZe(t,e,n){let r=0;for(let i=e;i<n;++i)r+=t[i];return r}function dM(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(e===8)return new Int8Array(n);if(e===16)return new Int16Array(n);if(e===32)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function SZe(t,e){return(t===1||t===2)&&e<=32&&e%8===0?!1:!(t===3&&(e===16||e===32||e===64))}function AZe(t,e,n,r,i,s,o){const a=new DataView(t),l=n===2?o*s:o*s*r,u=n===2?1:r,d=dM(e,i,l),c=parseInt("1".repeat(i),2);if(e===1){let f;n===1?f=r*i:f=i;let h=s*f;h&7&&(h=h+7&-8);for(let p=0;p<o;++p){const g=p*h;for(let b=0;b<s;++b){const y=g+b*u*i;for(let v=0;v<u;++v){const w=y+v*i,E=(p*s+b)*u+v,S=Math.floor(w/8),T=w%8;if(T+i<=8)d[E]=a.getUint8(S)>>8-i-T&c;else if(T+i<=16)d[E]=a.getUint16(S)>>16-i-T&c;else if(T+i<=24){const D=a.getUint16(S)<<8|a.getUint8(S+2);d[E]=D>>24-i-T&c}else d[E]=a.getUint32(S)>>32-i-T&c}}}}return d.buffer}class F3e{constructor(e,n,r,i,s,o){this.fileDirectory=e,this.geoKeys=n,this.dataView=r,this.littleEndian=i,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)e+=this.getSampleByteSize(n);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,s){return D3e(this,i,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,n){const r=this.getSampleFormat(e),i=this.getBitsPerSample(e);return dM(r,i,n)}async getTileOrStrip(e,n,r,i,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*o+e:this.planarConfiguration===2&&(l=r*o*a+n*o+e);let d,c;this.isTiled?(d=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(d=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]);const f=(await this.source.fetch([{offset:d,length:c}],s))[0];let h;return u===null||!u[l]?(h=(async()=>{let p=await i.decode(this.fileDirectory,f);const g=this.getSampleFormat(),b=this.getBitsPerSample();return SZe(g,b)&&(p=AZe(p,g,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(n))),p})(),u!==null&&(u[l]=h)):h=u[l],{x:e,y:n,sample:r,data:await h}}async _readRaster(e,n,r,i,s,o,a,l,u){const d=this.getTileWidth(),c=this.getTileHeight(),f=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(e[0]/d),0),g=Math.min(Math.ceil(e[2]/d),Math.ceil(f/d)),b=Math.max(Math.floor(e[1]/c),0),y=Math.min(Math.ceil(e[3]/c),Math.ceil(h/c)),v=e[2]-e[0];let w=this.getBytesPerPixel();const E=[],S=[];for(let k=0;k<n.length;++k)this.planarConfiguration===1?E.push(CZe(this.fileDirectory.BitsPerSample,0,n[k])/8):E.push(0),S.push(this.getReaderForSample(n[k]));const T=[],{littleEndian:D}=this;for(let k=b;k<y;++k)for(let R=p;R<g;++R){let O;this.planarConfiguration===1&&(O=this.getTileOrStrip(R,k,0,s,u));for(let B=0;B<n.length;++B){const K=B,L=n[B];this.planarConfiguration===2&&(w=this.getSampleByteSize(L),O=this.getTileOrStrip(R,k,L,s,u));const I=O.then($=>{const U=$.data,q=new DataView(U),Y=this.getBlockHeight($.y),X=$.y*c,te=$.x*d,le=X+Y,ee=($.x+1)*d,z=S[K],he=Math.min(Y,Y-(le-e[3]),h-X),fe=Math.min(d,d-(ee-e[2]),f-te);for(let ze=Math.max(0,e[1]-X);ze<he;++ze)for(let He=Math.max(0,e[0]-te);He<fe;++He){const je=(ze*d+He)*w,we=z.call(q,je+E[K],D);let $e;i?($e=(ze+X-e[1])*v*n.length+(He+te-e[0])*n.length+K,r[$e]=we):($e=(ze+X-e[1])*v+He+te-e[0],r[K][$e]=we)}});T.push(I)}}if(await Promise.all(T),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let k;return i?k=EZe(r,e[2]-e[0],e[3]-e[1],o,a,n.length,l):k=xZe(r,e[2]-e[0],e[3]-e[1],o,a,l),k.width=o,k.height=a,k}return r.width=o||e[2]-e[0],r.height=a||e[3]-e[1],r}async readRasters({window:e,samples:n=[],interleave:r,pool:i=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const d=e||[0,0,this.getWidth(),this.getHeight()];if(d[0]>d[2]||d[1]>d[3])throw new Error("Invalid subsets");const c=d[2]-d[0],f=d[3]-d[1],h=c*f,p=this.getSamplesPerPixel();if(!n||!n.length)for(let v=0;v<p;++v)n.push(v);else for(let v=0;v<n.length;++v)if(n[v]>=p)return Promise.reject(new RangeError(`Invalid sample index '${n[v]}'.`));let g;if(r){const v=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,w=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=dM(v,w,h*n.length),l&&g.fill(l)}else{g=[];for(let v=0;v<n.length;++v){const w=this.getArrayForSample(n[v],h);Array.isArray(l)&&v<l.length?w.fill(l[v]):l&&!Array.isArray(l)&&w.fill(l),g.push(w)}}const b=i||await R3e(this.fileDirectory);return await this._readRaster(d,n,g,r,b,s,o,a,u)}async readRGB({window:e,interleave:n=!0,pool:r=null,width:i,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const d=this.fileDirectory.PhotometricInterpretation;if(d===vl.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==aZe.Unspecified&&a){y=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)y.push(v)}return this.readRasters({window:e,interleave:n,samples:y,pool:r,width:i,height:s,resampleMethod:o,signal:l})}let c;switch(d){case vl.WhiteIsZero:case vl.BlackIsZero:case vl.Palette:c=[0];break;case vl.CMYK:c=[0,1,2,3];break;case vl.YCbCr:case vl.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const f={window:u,interleave:!0,samples:c,pool:r,width:i,height:s,resampleMethod:o,signal:l},{fileDirectory:h}=this,p=await this.readRasters(f),g=2**this.fileDirectory.BitsPerSample[0];let b;switch(d){case vl.WhiteIsZero:b=uZe(p,g);break;case vl.BlackIsZero:b=cZe(p,g);break;case vl.Palette:b=dZe(p,h.ColorMap);break;case vl.CMYK:b=fZe(p);break;case vl.YCbCr:b=hZe(p);break;case vl.CIELab:b=yZe(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const y=new Uint8Array(b.length/3),v=new Uint8Array(b.length/3),w=new Uint8Array(b.length/3);for(let E=0,S=0;E<b.length;E+=3,++S)y[S]=b[E],v[S]=b[E+1],w[S]=b[E+2];b=[y,v,w]}return b.width=p.width,b.height=p.height,b}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)e.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return e}getGDALMetadata(e=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let i=sZe(r,"Item");e===null?i=i.filter(s=>yF(s,"sample")===void 0):i=i.filter(s=>Number(yF(s,"sample"))===e);for(let s=0;s<i.length;++s){const o=i[s];n[yF(o,"name")]=o.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[i,s,o]=e.getResolution();return[i*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[i,s,o,a,l,u,d,c]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,n],[r,0],[r,n]].map(([b,y])=>[a+i*b+s*y,c+l*b+u*y]),p=h.map(b=>b[0]),g=h.map(b=>b[1]);return[Math.min(...p),Math.min(...g),Math.max(...p),Math.max(...g)]}else{const i=this.getOrigin(),s=this.getResolution(),o=i[0],a=i[1],l=o+s[0]*r,u=a+s[1]*n;return[Math.min(o,l),Math.min(a,u),Math.max(o,l),Math.max(a,u)]}}}class kZe{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,n){const r=this.getUint32(e,n),i=this.getUint32(e+4,n);let s;if(n){if(s=r+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*r+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,n){let r=0;const i=(this._dataView.getUint8(e+(n?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(n?o:7-o));i&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),r+=a*256**o}return i&&(r=-r),r}getUint8(e,n){return this._dataView.getUint8(e,n)}getInt8(e,n){return this._dataView.getInt8(e,n)}getUint16(e,n){return this._dataView.getUint16(e,n)}getInt16(e,n){return this._dataView.getInt16(e,n)}getUint32(e,n){return this._dataView.getUint32(e,n)}getInt32(e,n){return this._dataView.getInt32(e,n)}getFloat16(e,n){return D3e(this._dataView,e,n)}getFloat32(e,n){return this._dataView.getFloat32(e,n)}getFloat64(e,n){return this._dataView.getFloat64(e,n)}}class TZe{constructor(e,n,r,i){this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,n){return this.sliceOffset<=e&&this.sliceTop>=e+n}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const n=this.readUint32(e),r=this.readUint32(e+4);let i;if(this._littleEndian){if(i=n+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*n+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let n=0;const r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let i=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));r&&(i?o!==0&&(o=~(o-1)&255,i=!1):o=~o&255),n+=o*256**s}return r&&(n=-n),n}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const DZe=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class LZe{constructor(e=DZe,n){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{pm(()=>import("./decoder-CaSv2t6h.js"),[],import.meta.url).then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<e;i++)this.workers.push({worker:r(),idle:!0})}))}async decode(e,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?R3e(e).then(r=>r.decode(e,n)):new Promise(r=>{const i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",o))};i.worker.addEventListener("message",o),i.worker.postMessage({fileDirectory:e,buffer:n,id:s},[n])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const t1e=`\r
\r
`;function O3e(t){if(typeof Object.fromEntries<"u")return Object.fromEntries(t);const e={};for(const[n,r]of t)e[n.toLowerCase()]=r;return e}function RZe(t){const e=t.split(`\r
`).map(n=>{const r=n.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return O3e(e)}function FZe(t){const[e,...n]=t.split(";").map(i=>i.trim()),r=n.map(i=>i.split("="));return{type:e,params:O3e(r)}}function fM(t){let e,n,r;return t&&([,e,n,r]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),r=parseInt(r,10)),{start:e,end:n,total:r}}function OZe(t,e){let n=null;const r=new TextDecoder("ascii"),i=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(t,a,s.length))===s&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){const a=r.decode(new Uint8Array(t,n,Math.min(s.length+1024,t.byteLength-n)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(t1e),d=RZe(l.substr(0,u)),{start:c,end:f,total:h}=fM(d["content-range"]),p=n+s.length+u+t1e.length,g=parseInt(f,10)+1-parseInt(c,10);i.push({headers:d,data:t.slice(p,p+g),offset:c,length:g,fileSize:h}),n=p+g+4}return i}class yP{async fetch(e,n=void 0){return Promise.all(e.map(r=>this.fetchSlice(r,n)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class MZe extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,r]of e)this.onEviction(n,r.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const r=n.get(e);return this._getItemValue(e,r)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield e)}for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:n,expiry:i}):this._set(e,{value:n,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-e;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[r,i]of this.entriesAscending())e.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function IZe(t){return new Promise(e=>setTimeout(e,t))}function $Ze(t,e){const n=Array.isArray(t)?t:Array.from(t),r=Array.isArray(e)?e:Array.from(e);return n.map((i,s)=>[i,r[s]])}class sv extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,sv),this.name="AbortError"}}class PZe extends Error{constructor(e,n){super(n),this.errors=e,this.message=n,this.name="AggregateError"}}const NZe=PZe;class BZe{constructor(e,n,r=null){this.offset=e,this.length=n,this.data=r}get top(){return this.offset+this.length}}class n1e{constructor(e,n,r){this.offset=e,this.length=n,this.blockIds=r}}class zZe extends yP{constructor(e,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=n,this.blockCache=new MZe({maxSize:r,onEviction:(i,s)=>{this.evictedBlocks.set(i,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,n){const r=[],i=[],s=[];this.evictedBlocks.clear();for(const{offset:f,length:h}of e){let p=f+h;const{fileSize:g}=this;g!==null&&(p=Math.min(p,g));const b=Math.floor(f/this.blockSize)*this.blockSize;for(let y=b;y<p;y+=this.blockSize){const v=Math.floor(y/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),i.push(v)),this.blockRequests.has(v)&&r.push(this.blockRequests.get(v)),s.push(v)}}await IZe(),this.fetchBlocks(n);const o=[];for(const f of i)this.blockRequests.has(f)&&o.push(this.blockRequests.get(f));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],l=s.filter(f=>this.abortedBlockIds.has(f)||!this.blockCache.has(f));if(l.forEach(f=>this.blockIdsToFetch.add(f)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const f of l){const h=this.blockRequests.get(f);if(!h)throw new Error(`Block ${f} is not in the block requests`);a.push(h)}await Promise.allSettled(a)}if(n&&n.aborted)throw new sv("Request was aborted");const u=s.map(f=>this.blockCache.get(f)||this.evictedBlocks.get(f)),d=u.filter(f=>!f);if(d.length)throw new NZe(d,"Request failed");const c=new Map($Ze(s,u));return this.readSliceData(e,c)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,e);for(let i=0;i<n.length;++i){const s=n[i];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await r)[i],l=o*this.blockSize,u=l-a.offset,d=Math.min(u+this.blockSize,a.data.byteLength),c=a.data.slice(u,d),f=new BZe(l,c.byteLength,c,o);this.blockCache.set(o,f),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const n=Array.from(e).sort((o,a)=>o-a);if(n.length===0)return[];let r=[],i=null;const s=[];for(const o of n)i===null||i+1===o?(r.push(o),i=o):(s.push(new n1e(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[o],i=o);return s.push(new n1e(r[0]*this.blockSize,r.length*this.blockSize,r)),s}readSliceData(e,n){return e.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const s=Math.floor(r.offset/this.blockSize),o=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const d=n.get(u),c=d.offset-r.offset,f=d.top-i;let h=0,p=0,g;c<0?h=-c:c>0&&(p=c),f<0?g=d.length-h:g=i-d.offset-h;const b=new Uint8Array(d.data,h,g);l.set(b,p)}return a})}}class bP{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class vP{constructor(e){this.url=e}async request({headers:e,signal:n}={}){throw new Error("request is not implemented")}}class jZe extends bP{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class UZe extends vP{constructor(e,n){super(e),this.credentials=n}async request({headers:e,signal:n}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:n});return new jZe(r)}}class qZe extends bP{constructor(e,n){super(),this.xhr=e,this.data=n}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class HZe extends vP{constructRequest(e,n){return new Promise((r,i)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;r(new qZe(s,o))},s.onerror=i,s.onabort=()=>i(new sv("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}const vF={};class GZe extends bP{constructor(e,n){super(),this.response=e,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class VZe extends vP{constructor(e){super(e),this.parsedUrl=vF.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",vF)}constructRequest(e,n){return new Promise((r,i)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const u=[];o.on("data",d=>{u.push(d)}),o.on("end",()=>{const d=Buffer.concat(u).buffer;l(d)}),o.on("error",i)});r(new GZe(o,a))});s.on("error",i),n&&(n.aborted&&s.destroy(new sv("Request aborted")),n.addEventListener("abort",()=>s.destroy(new sv("Request aborted"))))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}class xP extends yP{constructor(e,n,r,i){super(),this.client=e,this.headers=n,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(e,n){return this.maxRanges>=e.length?this.fetchSlices(e,n):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,n))))}async fetchSlices(e,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:i,length:s})=>`${i}-${i+s}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:i,params:s}=FZe(r.getHeader("content-type"));if(i==="multipart/byteranges"){const c=OZe(await r.getData(),s.boundary);return this._fileSize=c[0].fileSize||null,c}const o=await r.getData(),{start:a,end:l,total:u}=fM(r.getHeader("content-range"));this._fileSize=u||null;const d=[{data:o,offset:a,length:l-a}];if(e.length>1){const c=await Promise.all(e.slice(1).map(f=>this.fetchSlice(f,n)));return d.concat(c)}return d}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,n){const{offset:r,length:i}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:n});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=fM(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function wP(t,{blockSize:e,cacheSize:n}){return e===null?t:new zZe(t,{blockSize:e,cacheSize:n})}function WZe(t,{headers:e={},credentials:n,maxRanges:r=0,allowFullFile:i=!1,...s}={}){const o=new UZe(t,n),a=new xP(o,e,r,i);return wP(a,s)}function YZe(t,{headers:e={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new HZe(t),o=new xP(s,e,n,r);return wP(o,i)}function XZe(t,{headers:e={},maxRanges:n=0,allowFullFile:r=!1,...i}={}){const s=new VZe(t),o=new xP(s,e,n,r);return wP(o,i)}function hM(t,{forceXHR:e=!1,...n}={}){return typeof fetch=="function"&&!e?WZe(t,n):typeof XMLHttpRequest<"u"?YZe(t,n):XZe(t,n)}class ZZe extends yP{constructor(e){super(),this.file=e}async fetchSlice(e,n){return new Promise((r,i)=>{const s=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=a=>r(a.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(s),n&&n.addEventListener("abort",()=>o.abort())})}}function KZe(t){return new ZZe(t)}function pM(t){switch(t){case fr.BYTE:case fr.ASCII:case fr.SBYTE:case fr.UNDEFINED:return 1;case fr.SHORT:case fr.SSHORT:return 2;case fr.LONG:case fr.SLONG:case fr.FLOAT:case fr.IFD:return 4;case fr.RATIONAL:case fr.SRATIONAL:case fr.DOUBLE:case fr.LONG8:case fr.SLONG8:case fr.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function JZe(t){const e=t.GeoKeyDirectory;if(!e)return null;const n={};for(let r=4;r<=e[3]*4;r+=4){const i=lZe[e[r]],s=e[r+1]?C_[e[r+1]]:null,o=e[r+2],a=e[r+3];let l=null;if(!s)l=a;else{if(l=t[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}n[i]=l}return n}function Uy(t,e,n,r){let i=null,s=null;const o=pM(e);switch(e){case fr.BYTE:case fr.ASCII:case fr.UNDEFINED:i=new Uint8Array(n),s=t.readUint8;break;case fr.SBYTE:i=new Int8Array(n),s=t.readInt8;break;case fr.SHORT:i=new Uint16Array(n),s=t.readUint16;break;case fr.SSHORT:i=new Int16Array(n),s=t.readInt16;break;case fr.LONG:case fr.IFD:i=new Uint32Array(n),s=t.readUint32;break;case fr.SLONG:i=new Int32Array(n),s=t.readInt32;break;case fr.LONG8:case fr.IFD8:i=new Array(n),s=t.readUint64;break;case fr.SLONG8:i=new Array(n),s=t.readInt64;break;case fr.RATIONAL:i=new Uint32Array(n*2),s=t.readUint32;break;case fr.SRATIONAL:i=new Int32Array(n*2),s=t.readInt32;break;case fr.FLOAT:i=new Float32Array(n),s=t.readFloat32;break;case fr.DOUBLE:i=new Float64Array(n),s=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===fr.RATIONAL||e===fr.SRATIONAL)for(let a=0;a<n;a+=2)i[a]=s.call(t,r+a*o),i[a+1]=s.call(t,r+(a*o+4));else for(let a=0;a<n;++a)i[a]=s.call(t,r+a*o);return e===fr.ASCII?new TextDecoder("utf-8").decode(i):i}class QZe{constructor(e,n,r){this.fileDirectory=e,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class mS extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class M3e{async readRasters(e={}){const{window:n,width:r,height:i}=e;let{resX:s,resY:o,bbox:a}=e;const l=await this.getImage();let u=l;const d=await this.getImageCount(),c=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(n){const[p,g]=l.getOrigin(),[b,y]=l.getResolution();a=[p+n[0]*b,g+n[1]*y,p+n[2]*b,g+n[3]*y]}const h=a||c;if(r){if(s)throw new Error("Both width and resX passed");s=(h[2]-h[0])/r}if(i){if(o)throw new Error("Both width and resY passed");o=(h[3]-h[1])/i}}if(s||o){const h=[];for(let p=0;p<d;++p){const g=await this.getImage(p),{SubfileType:b,NewSubfileType:y}=g.fileDirectory;(p===0||b===2||y&1)&&h.push(g)}h.sort((p,g)=>p.getWidth()-g.getWidth());for(let p=0;p<h.length;++p){const g=h[p],b=(c[2]-c[0])/g.getWidth(),y=(c[3]-c[1])/g.getHeight();if(u=g,s&&s>b||o&&o>y)break}}let f=n;if(a){const[h,p]=l.getOrigin(),[g,b]=u.getResolution(l);f=[Math.round((a[0]-h)/g),Math.round((a[1]-p)/b),Math.round((a[2]-h)/g),Math.round((a[3]-p)/b)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return u.readRasters({...e,window:f})}}class ov extends M3e{constructor(e,n,r,i,s={}){super(),this.source=e,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=i,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,n){const r=this.bigTiff?4048:1024;return new TZe((await this.source.fetch([{offset:e,length:typeof n<"u"?n:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let i=await this.getSlice(e);const s=this.bigTiff?i.readUint64(e):i.readUint16(e),o=s*n+(this.bigTiff?16:6);i.covers(e,o)||(i=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let c=0;c<s;l+=n,++c){const f=i.readUint16(l),h=i.readUint16(l+2),p=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let g,b;const y=pM(h),v=l+(this.bigTiff?12:8);if(y*p<=(this.bigTiff?8:4))g=Uy(i,h,p,v);else{const w=i.readOffset(v),E=pM(h)*p;if(i.covers(w,E))g=Uy(i,h,p,w);else{const S=await this.getSlice(w,E);g=Uy(S,h,p,w)}}p===1&&oZe.indexOf(f)===-1&&!(h===fr.RATIONAL||h===fr.SRATIONAL)?b=g[0]:b=g,a[C_[f]]=b}const u=JZe(a),d=i.readOffset(e+r+n*s);return new QZe(a,u,d)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(n){throw n instanceof mS?new mS(e):n}return this.ifdRequests[e]=(async()=>{const n=await this.ifdRequests[e-1];if(n.nextIFDByteOffset===0)throw new mS(e);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const n=await this.requestIFD(e);return new F3e(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,n=!0;for(;n;)try{await this.requestIFD(e),++e}catch(r){if(r instanceof mS)n=!1;else throw r}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let i=await this.getSlice(e,r);if(n===Uy(i,fr.ASCII,n.length,e)){const o=Uy(i,fr.ASCII,r,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>r&&(i=await this.getSlice(e,a));const l=Uy(i,fr.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,d])=>{this.ghostValues[u]=d})}return this.ghostValues}static async fromSource(e,n,r){const i=(await e.fetch([{offset:0,length:1024}],r))[0],s=new kZe(i),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const d=u?s.getUint64(8,a):s.getUint32(4,a);return new ov(e,a,u,d,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class eKe extends M3e{constructor(e,n){super(),this.mainFile=e,this.overviewFiles=n,this.imageFiles=[e].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let i=0;i<this.imageFiles.length;i++){const s=this.imageFiles[i];for(let o=0;o<this.imageCounts[i];o++){if(e===n){const a=await s.requestIFD(r);return new F3e(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function tKe(t,e={},n){return ov.fromSource(hM(t,e),n)}async function nKe(t,e){return ov.fromSource(KZe(t),e)}async function rKe(t,e=[],n={},r){const i=await ov.fromSource(hM(t,n),r),s=await Promise.all(e.map(o=>ov.fromSource(hM(o,n))));return new eKe(i,s)}function iKe(t){return((t.fileDirectory.NewSubfileType||0)&4)===4}function sKe(t,e){if(!t)return!1;if(t===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const n=e.fileDirectory.PhotometricInterpretation,r=vl;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const r1e="STATISTICS_MAXIMUM",i1e="STATISTICS_MINIMUM",xF=256;let wF;function oKe(){return wF||(wF=new LZe),wF}function aKe(t){try{return t.getBoundingBox(!0)}catch{return[0,0,t.getWidth(),t.getHeight()]}}function lKe(t){try{return t.getOrigin().slice(0,2)}catch{return[0,t.getHeight()]}}function uKe(t,e){try{return t.getResolution(e)}catch{return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function cKe(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+e.ProjectedCSTypeGeoKey;let r=ai(n);if(!r){const i=qbe(e.ProjLinearUnitsGeoKey);i&&(r=new Hbe({code:n,units:i}))}return r}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const n="EPSG:"+e.GeographicTypeGeoKey;let r=ai(n);if(!r){const i=qbe(e.GeogAngularUnitsGeoKey);i&&(r=new Hbe({code:n,units:i}))}return r}return null}function dKe(t){return t.getImageCount().then(function(e){const n=new Array(e);for(let r=0;r<e;++r)n[r]=t.getImage(r);return Promise.all(n)})}function fKe(t,e){let n;return t.blob?n=nKe(t.blob):t.overviews?n=rKe(t.url,t.overviews,e):n=tKe(t.url,e),n.then(dKe)}function Uw(t,e,n,r,i){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(r);throw i(o),o}for(let o=0;o<s;++o)Uw(t[o],e[o],n,r,i);return}if(e=e,Math.abs(t-e)>n*t)throw new Error(r)}function hKe(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function pKe(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class _P extends yE{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const n=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const r=this,i=new Array(n);for(let s=0;s<n;++s)i[s]=fKe(this.sourceInfo_[s],this.sourceOptions_);Promise.all(i).then(function(s){r.configure_(s)}).catch(function(s){i2(s),r.error_=s,r.setState("error")})}getError(){return this.error_}determineProjection(e){const n=e[0];for(let r=n.length-1;r>=0;--r){const i=n[r],s=cKe(i);if(s){this.projection=s;break}}}determineTransformMatrix(e){const n=e[0];for(let r=n.length-1;r>=0;--r){const s=n[r].fileDirectory.ModelTransformation;if(s){const[o,a,l,u,d,c,f,h]=s,p=Z_(Z_([1/Math.sqrt(o*o+d*d),0,0,-1/Math.sqrt(a*a+c*c),u,h],[o,d,a,c,0,0]),[1,0,0,1,-u,-h]);this.transformMatrix=p,this.addAlpha_=!0;break}}}configure_(e){let n,r,i,s,o;const a=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let d=0;const c=e.length;for(let b=0;b<c;++b){const y=[],v=[];e[b].forEach(R=>{iKe(R)?v.push(R):y.push(R)});const w=y.length;if(v.length>0&&v.length!==w)throw new Error(`Expected one mask per image found ${v.length} masks and ${w} images`);let E,S;const T=new Array(w),D=new Array(w),k=new Array(w);l[b]=new Array(w),u[b]=new Array(w);for(let R=0;R<w;++R){const O=y[R],B=O.getGDALNoData();u[b][R]=O.getGDALMetadata(0),l[b][R]=B;const K=this.sourceInfo_[b].bands;a[b]=K?K.length:O.getSamplesPerPixel();const L=w-(R+1);E||(E=aKe(O)),S||(S=lKe(O));const I=uKe(O,y[0]);k[L]=I[0];const $=[O.getTileWidth(),O.getTileHeight()];$[0]!==$[1]&&$[1]<xF&&($[0]=xF,$[1]=xF),T[L]=$;const U=I[0]/Math.abs(I[1]);D[L]=[$[0],$[1]/U]}if(n?o0(n,E,n):n=E,!r)r=S;else{const R=`Origin mismatch for source ${b}, got [${S}] but expected [${r}]`;Uw(r,S,0,R,this.viewRejector)}if(!o)o=k,this.resolutionFactors_[b]=1;else{o.length-d>k.length&&(d=o.length-k.length);const R=o[o.length-1]/k[k.length-1];this.resolutionFactors_[b]=R;const O=k.map(K=>K*=R),B=`Resolution mismatch for source ${b}, got [${O}] but expected [${o}]`;Uw(o.slice(d,o.length),O,.02,B,this.viewRejector)}i?Uw(i.slice(d,i.length),D,.01,`Tile size mismatch for source ${b}`,this.viewRejector):i=D,s?Uw(s.slice(d,s.length),T,0,`Tile size mismatch for source ${b}`,this.viewRejector):s=T,this.sourceImagery_[b]=y.reverse(),this.sourceMasks_[b]=v.reverse()}for(let b=0,y=this.sourceImagery_.length;b<y;++b){const v=this.sourceImagery_[b];for(;v.length<o.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let b=0;b<c;++b){if(this.sourceInfo_[b].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}const y=l[b],v=this.sourceInfo_[b].bands;if(v){for(let w=0;w<v.length;++w)if(y[v[w]-1]!==null){this.addAlpha_=!0;break e}continue}for(let w=0;w<y.length;++w)if(y[w]!==null){this.addAlpha_=!0;break e}}let f=this.addAlpha_?1:0;for(let b=0;b<c;++b)f+=a[b];this.bandCount=f;const h=new _D({extent:n,minZoom:d,origin:r,resolutions:o,tileSizes:i});this.tileGrid=h,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const p=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]);let g=n;if(this.transformMatrix){const b=e2(Qo(),this.transformMatrix.slice()),y=yUe(v=>oh(b,v));g=ev(n,y)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:mUe(Pp(g),this.projection),extent:gUe(g,this.projection),zoom:p})}loadTile_(e,n,r,i){const s=this.getTileSize(e),o=this.sourceImagery_.length,a=new Array(o*2),l=this.nodataValues_,u=this.sourceInfo_,d=oKe();for(let c=0;c<o;++c){const f=u[c],h=this.resolutionFactors_[c],p=[Math.round(n*(s[0]*h)),Math.round(r*(s[1]*h)),Math.round((n+1)*(s[0]*h)),Math.round((r+1)*(s[1]*h))],g=this.sourceImagery_[c][e];let b;f.bands&&(b=f.bands.map(function(S){return S-1}));let y;"nodata"in f&&f.nodata!==null?y=f.nodata:b?y=b.map(function(S){return l[c][S]}):y=l[c];const v={window:p,width:s[0],height:s[1],samples:b,fillValue:y,pool:d,interleave:!1,signal:i.signal};sKe(this.convertToRGB_,g)?a[c]=g.readRGB(v):a[c]=g.readRasters(v);const w=o+c,E=this.sourceMasks_[c][e];if(!E){a[w]=Promise.resolve(null);continue}a[w]=E.readRasters({window:p,width:s[0],height:s[1],samples:[0],pool:d,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,s)).catch(function(c){throw i2(c),c})}composeTile_(e,n){const r=this.metadata_,i=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,d=this.addAlpha_,c=e[0]*e[1],f=c*o;let h;u?h=new Uint8Array(f):h=new Float32Array(f);let p=0;for(let g=0;g<c;++g){let b=d;for(let y=0;y<s;++y){const v=i[y];let w=v.min,E=v.max,S,T;if(u){const D=r[y][0];w===void 0&&(D&&i1e in D?w=parseFloat(D[i1e]):w=hKe(n[y][0])),E===void 0&&(D&&r1e in D?E=parseFloat(D[r1e]):E=pKe(n[y][0])),S=255/(E-w),T=-w*S}for(let D=0;D<a[y];++D){const k=n[y][D][g];let R;if(u?R=ks(S*k+T,0,255):R=k,!d)h[p]=R;else{let O=v.nodata;if(O===void 0){let K;v.bands?K=v.bands[D]-1:K=D,O=l[y][K]}const B=isNaN(O);(!B&&k!==O||B&&!isNaN(k))&&(b=!1,h[p]=R)}p++}if(!b){const D=s+y,k=n[D];k&&!k[0][g]&&(b=!0)}}d&&(b||(h[p]=255),p++)}return h}}_P.prototype.getView;const mKe="https://tile.googleapis.com/v1/createSession",gKe="https://tile.googleapis.com/v1/2dtiles",yKe="https://tile.googleapis.com/tile/v1/viewport",bKe=22;class vKe extends vh{constructor(e){const n=!!e.highDpi;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const r={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(r.imageFormat=e.imageFormat),e.scale&&(r.scale=e.scale),n&&(r.highDpi=!0),e.layerTypes&&(r.layerTypes=e.layerTypes),e.styles&&(r.styles=e.styles),e.overlay===!0&&(r.overlay=!0),e.apiOptions&&(r.apiOptions=e.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,n){return fetch(e,n)}async createSession_(){const e=mKe+"?key="+this.apiKey_,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(e,n);if(!r.ok){try{const c=await r.json();this.error_=new Error(c.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const i=await r.json(),s=this.getTilePixelRatio(1),o=[i.tileWidth/s,i.tileHeight/s];this.tileGrid=dE({extent:cE(this.getProjection()),maxZoom:bKe,tileSize:o});const a=i.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(c,f,h){const p=c[0],g=c[1],b=c[2];return`${gKe}/${p}/${g}/${b}?session=${a}&key=${l}`};const u=parseInt(i.expiry,10)*1e3,d=Math.max(u-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),d),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[Yp.ANIMATING]||e.viewHints[Yp.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[n,r]=Gbe(bUe(e.extent),e.viewState.projection),[i,s]=Gbe(vUe(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${r}&east=${i}&west=${n}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const u=this.sessionTokenValue_,d=this.apiKey_,c=`${yKe}?session=${u}&key=${d}&${l}`;return this.previousViewportAttribution_=await fetch(c).then(f=>f.json()).then(f=>f.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let I3e=class extends k${constructor(e,n,r,i,s,o,a){super(n,r,i,s,o,a),this.zoomifyImage_=null,this.tileSize_=e}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const e=super.getImage();if(this.state==Ls.LOADED){const n=this.tileSize_;if(e.width==n[0]&&e.height==n[1])return this.zoomifyImage_=e,e;const r=a0(n[0],n[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e}};class xKe extends vh{constructor(e){const n=e.size,r=e.tierSizeCalculation!==void 0?e.tierSizeCalculation:"default",i=e.tilePixelRatio||1,s=n[0],o=n[1],a=[],l=e.tileSize||eM;let u=l*i;switch(r){case"default":for(;s>u||o>u;)a.push([Math.ceil(s/u),Math.ceil(o/u)]),u+=u;break;case"truncated":let T=s,D=o;for(;T>u||D>u;)a.push([Math.ceil(T/u),Math.ceil(D/u)]),T>>=1,D>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const d=[i],c=[0];for(let T=1,D=a.length;T<D;T++)d.push(i<<T),c.push(a[T-1][0]*a[T-1][1]+c[T-1]);d.reverse();const f=new _D({tileSize:l,extent:e.extent||[0,-o,s,0],resolutions:d});let h=e.url;h&&!h.includes("{TileGroup}")&&!h.includes("{tileIndex}")&&(h+="{TileGroup}/{z}-{x}-{y}.jpg");const p=KAe(h);let g=l*i;function b(T){return function(D,k,R){if(!D)return;const O=D[0],B=D[1],K=D[2],L=B+K*a[O][0],I=(L+c[O])/g|0,$={z:O,x:B,y:K,tileIndex:L,TileGroup:"TileGroup"+I};return T.replace(/\{(\w+?)\}/g,function(U,q){return $[q]})}}const y=F$(p.map(b)),v=I3e.bind(null,Ac(l*i));super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:v,tileGrid:f,tileUrlFunction:y,transition:e.transition}),this.zDirection=e.zDirection;const w=f.getTileCoordForCoordAndResolution(Pp(f.getExtent()),d[d.length-1]),E=y(w,1,null),S=new Image;S.addEventListener("error",()=>{g=l,this.changed()}),S.src=E}}function pw(t){return t.toLocaleString("en",{maximumFractionDigits:10})}class wKe extends vh{constructor(e){const n=e||{};let r=n.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const i=n.version||Js.VERSION2,s=n.sizes||[],o=n.size;Oc(o!=null&&Array.isArray(o)&&o.length==2&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,"Missing or invalid `size`");const a=o[0],l=o[1],u=n.tileSize,d=n.tilePixelRatio||1,c=n.format||"jpg",f=n.quality||(n.version==Js.VERSION1?"native":"default");let h=n.resolutions||[];const p=n.supports||[],g=n.extent||[0,-l,a,0],b=s!=null&&Array.isArray(s)&&s.length>0,y=u!==void 0&&(typeof u=="number"&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),v=p!=null&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"));let w,E,S;if(h.sort(function(R,O){return O-R}),y||v)if(u!=null&&(typeof u=="number"&&Number.isInteger(u)&&u>0?(w=u,E=u):Array.isArray(u)&&u.length>0&&((u.length==1||u[1]==null&&Number.isInteger(u[0]))&&(w=u[0],E=u[0]),u.length==2&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(w=u[0],E=u[1]):u[0]==null&&Number.isInteger(u[1])&&(w=u[1],E=u[1])))),(w===void 0||E===void 0)&&(w=eM,E=eM),h.length==0){S=Math.max(Math.ceil(Math.log(a/w)/Math.LN2),Math.ceil(Math.log(l/E)/Math.LN2));for(let R=S;R>=0;R--)h.push(Math.pow(2,R))}else{const R=Math.max(...h);S=Math.round(Math.log(R)/Math.LN2)}else if(w=a,E=l,h=[],b){s.sort(function(O,B){return O[0]-B[0]}),S=-1;const R=[];for(let O=0;O<s.length;O++){const B=a/s[O][0];if(h.length>0&&h[h.length-1]==B){R.push(O);continue}h.push(B),S++}if(R.length>0)for(let O=0;O<R.length;O++)s.splice(R[O]-O,1)}else h.push(1),s.push([a,l]),S=0;const T=new _D({tileSize:[w,E],extent:g,origin:xUe(g),resolutions:h}),D=function(R,O,B){let K,L;const I=R[0];if(I>S)return;const $=R[1],U=R[2],q=h[I];if(!($===void 0||U===void 0||q===void 0||$<0||Math.ceil(a/q/w)<=$||U<0||Math.ceil(l/q/E)<=U)){if(v||y){const Y=$*w*q,X=U*E*q;let te=w*q,le=E*q,ee=w,z=E;if(Y+te>a&&(te=a-Y),X+le>l&&(le=l-X),Y+w*q>a&&(ee=Math.floor((a-Y+q-1)/q)),X+E*q>l&&(z=Math.floor((l-X+q-1)/q)),Y==0&&te==a&&X==0&&le==l)K="full";else if(!v||p.includes("regionByPx"))K=Y+","+X+","+te+","+le;else if(p.includes("regionByPct")){const he=pw(Y/a*100),fe=pw(X/l*100),ze=pw(te/a*100),He=pw(le/l*100);K="pct:"+he+","+fe+","+ze+","+He}i==Js.VERSION3&&(!v||p.includes("sizeByWh"))?L=ee+","+z:!v||p.includes("sizeByW")?L=ee+",":p.includes("sizeByH")?L=","+z:p.includes("sizeByWh")?L=ee+","+z:p.includes("sizeByPct")&&(L="pct:"+pw(100/q))}else if(K="full",b){const Y=s[I][0],X=s[I][1];i==Js.VERSION3?Y==a&&X==l?L="max":L=Y+","+X:Y==a?L="full":L=Y+","}else L=i==Js.VERSION3?"max":"full";return r+K+"/"+L+"/0/"+f+"."+c}},k=I3e.bind(null,Ac(u||256).map(function(R){return R*d}));super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:k,tileGrid:T,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:D,transition:n.transition}),this.zDirection=n.zDirection}}function $3e(t,e,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[Vbe(ru(e)/a,Wbe),Vbe(Zp(e)/a,Wbe)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Ck(u,s)}function P3e(t){const e=t.load?t.load:Zv,n=ai(t.projection||"EPSG:3857"),r=t.ratio??1.5,i=t.crossOrigin??null;return function(s,o,a){a=t.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,t.params),s=JAe(s,o,a,r);const u=$3e(t.url,s,o,a,n,l),d=new Image;return d.crossOrigin=i,e(d,u).then(c=>{const f=ru(s)/c.width*a;return{image:c,extent:s,resolution:f,pixelRatio:a}})}}class _Ke extends I0{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:M$,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=P3e({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Zv(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}class EKe extends I0{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5}getImageInternal(e,n,r,i){n=this.findNearestResolution(n);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==r&&mk(s.getExtent(),e))return s;e=e.slice(),YAe(e,this.ratio_);const o=ru(e)/n,a=Zp(e)/n,l=[o*r,a*r],u=this.canvasFunction_.call(this,e,n,r,l,i);return u&&(s=new q$(e,n,r,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}}function CKe(t,e,n,r){const i=ru(t),s=Zp(t),o=e[0],a=e[1],l=.0254/r;return a*i>o*s?i*n/(o*l):s*n/(a*l)}function SKe(t,e,n,r,i,s,o){const a=CKe(n,r,s,o),l=Pp(n),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:o,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,e),Ck(t,u)}function N3e(t){const e=t.load||Zv,n=t.useOverlay??!1,r=t.metersPerUnit||1,i=t.displayDpi||96,s=t.ratio??1,o=t.crossOrigin??null;return function(a,l,u){const d=new Image;d.crossOrigin=o,a=JAe(a,l,u,s);const c=ru(a)/l,f=Zp(a)/l,h=[c*u,f*u],p=SKe(t.url,t.params,a,h,n,r,i);return e(d,p).then(g=>({image:g,extent:a,pixelRatio:u}))}}class AKe extends I0{constructor(e){super({interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.displayDpi_=e.displayDpi!==void 0?e.displayDpi:96,this.params_=Object.assign({},e.params),this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:M$,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.metersPerUnit_=e.metersPerUnit!==void 0?e.metersPerUnit:1,this.ratio_=e.ratio!==void 0?e.ratio:1,this.useOverlay_=e.useOverlay!==void 0?e.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=N3e({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Zv(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(e){Object.assign(this.params_,e),this.changed()}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}changed(){this.image=null,super.changed()}}function B3e(t){const e=t.load||Zv,n=t.imageExtent,r=t.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,e(i,t.url).then(s=>{const o=ru(n)/s.width,a=Zp(n)/s.height;return{image:s,extent:n,resolution:o!==a?[o,a]:a,pixelRatio:1}})}}class z3e extends I0{constructor(e){const n=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:M$;super({attributions:e.attributions,interpolate:e.interpolate,projection:ai(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new $Ae(this.imageExtent_,void 0,1,B3e({url:e.url,imageExtent:e.imageExtent,crossOrigin:n,load:(i,s)=>(this.image.setImage(i),r(this.image,s),Zv(i))})),this.image.addEventListener(Ll.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,n,r,i){return Qb(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}const kKe=new Error("Image failed to load");function j3e(t,e,n,r,i){return new Promise((s,o)=>{const a=new Image;a.crossOrigin=i.crossOrigin??null,a.addEventListener("load",()=>s(a)),a.addEventListener("error",()=>o(kKe)),a.src=QAe(t,e,n,r,i.maxY)})}function s1e(t){return function(e,n,r,i){const s=wUe(t,e,n,r);return j3e(s,e,n,r,i)}}function TKe(t){return function(e,n,r,i){const s=t(e,n,r,i);return j3e(s,e,n,r,i)}}function o1e(t){let e;if(Array.isArray(t))e=s1e(t);else if(typeof t=="string"){const n=KAe(t);e=s1e(n)}else if(typeof t=="function")e=TKe(t);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return e}let a1e=0;function l1e(t){return Array.isArray(t)?t.join(`
`):typeof t=="string"?t:(++a1e,"url-function-key-"+a1e)}class U3e extends yE{constructor(e){e=e||{};let n=e.loader,r;e.url&&(n=o1e(e.url),r=l1e(e.url));const i=n?e.state:"loading",s=e.wrapX===void 0?!0:e.wrapX;super({loader:n,key:r,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize,gutter:e.gutter,maxResolution:e.maxResolution,projection:e.projection,tileGrid:e.tileGrid,state:i,wrapX:s,transition:e.transition,interpolate:e.interpolate!==!1,crossOrigin:e.crossOrigin,zDirection:e.zDirection})}setUrl(e){const n=o1e(e);this.setLoader(n),this.setKey(l1e(e)),this.getState()!=="ready"&&this.setState("ready")}}function EP(t,e,n,r){const i=document.createElement("script"),s="olc_"+Si(e);function o(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+"callback="+s;const a=setTimeout(function(){o(),n&&n()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(i)}class DKe extends Error{constructor(e){const n="Unexpected response status: "+e.status;super(n),this.name="ResponseError",this.response=e}}class LKe extends Error{constructor(e){super("Failed to issue request"),this.name="ClientError",this.client=e}}function q3e(t){return new Promise(function(e,n){function r(o){const a=o.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(u){const d="Error parsing response text as JSON: "+u.message;n(new Error(d));return}e(l);return}n(new DKe(a))}function i(o){n(new LKe(o.target))}const s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",i),s.open("GET",t),s.setRequestHeader("Accept","application/json"),s.send()})}function H3e(t,e){return e.includes("://")?e:new URL(e,t).href}const RKe={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},FKe={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function G3e(t,e){if(!e.length)return t;const n=new URL(t,"file:/");if(n.pathname.split("/").includes("collections"))return i2('The "collections" query parameter cannot be added to collection endpoints'),t;const r=e.map(o=>encodeURIComponent(o)).join(",");n.searchParams.append("collections",r);const i=t.split("?")[0],s=decodeURIComponent(n.searchParams.toString());return`${i}?${s}`}function OKe(t,e,n){let r,i;for(let s=0;s<t.length;++s){const o=t[s];if(o.rel==="item"){if(o.type===e){r=o.href;break}(RKe[o.type]||!i&&o.type.startsWith("image/"))&&(i=o.href)}}if(!r)if(i)r=i;else throw new Error('Could not find "item" link');return n&&(r=G3e(r,n)),r}function MKe(t,e,n,r){let i,s;const o={};for(let a=0;a<t.length;++a){const l=t[a];if(o[l.type]=l.href,l.rel==="item"){if(l.type===e){i=l.href;break}FKe[l.type]&&(s=l.href)}}if(!i&&n)for(let a=0;a<n.length;++a){const l=n[a];if(o[l]){i=o[l];break}}if(!i)if(s)i=s;else throw new Error('Could not find "item" link');return r&&(i=G3e(i,r)),i}function u1e(t,e,n,r){let i=t.projection;if(!i&&(typeof e.crs=="string"?i=ai(e.crs):"uri"in e.crs&&(i=ai(e.crs.uri)),!i))throw new Error(`Unsupported CRS: ${JSON.stringify(e.crs)}`);const s=e.orderedAxes,a=!(s?s.slice(0,2).map(T=>T.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):i.getAxisOrientation()).startsWith("en"),l=e.tileMatrices,u={};for(let T=0;T<l.length;++T){const D=l[T];u[D.id]=D}const d={},c=[];if(r)for(let T=0;T<r.length;++T){const D=r[T],k=D.tileMatrix;c.push(k),d[k]=D}else for(let T=0;T<l.length;++T){const D=l[T].id;c.push(D)}const f=c.length,h=new Array(f),p=new Array(f),g=new Array(f),b=new Array(f),y=[-1/0,-1/0,1/0,1/0];for(let T=0;T<f;++T){const D=c[T],k=u[D],R=k.pointOfOrigin;a?h[T]=[R[1],R[0]]:h[T]=R,p[T]=k.cellSize,g[T]=[k.matrixWidth,k.matrixHeight],b[T]=[k.tileWidth,k.tileHeight];const O=d[D];if(O){const B=k.cellSize*k.tileWidth,K=h[T][0]+O.minTileCol*B,L=h[T][0]+(O.maxTileCol+1)*B,I=k.cellSize*k.tileHeight,$=k.cornerOfOrigin==="bottomLeft";let U,q;$?(U=h[T][1]+O.minTileRow*I,q=h[T][1]+(O.maxTileRow+1)*I):(U=h[T][1]-(O.maxTileRow+1)*I,q=h[T][1]-O.minTileRow*I),o0(y,[K,U,L,q],y)}}const v=new _D({origins:h,resolutions:p,sizes:g,tileSizes:b,extent:r?y:void 0}),w=t.context,E=t.url;function S(T,D,k){if(!T)return;const R=c[T[0]],O=u[R],B=O.cornerOfOrigin==="bottomLeft",K={tileMatrix:R,tileCol:T[1],tileRow:B?-T[2]-1:T[2]};if(r){const I=d[O.id];if(K.tileCol<I.minTileCol||K.tileCol>I.maxTileCol||K.tileRow<I.minTileRow||K.tileRow>I.maxTileRow)return}Object.assign(K,w);const L=n.replace(/\{(\w+?)\}/g,function(I,$){return K[$]});return H3e(E,L)}return{grid:v,projection:i,urlTemplate:n,urlFunction:S}}function IKe(t,e){const n=e.tileMatrixSetLimits;let r;if(e.dataType==="map")r=OKe(e.links,t.mediaType,t.collections);else if(e.dataType==="vector")r=MKe(e.links,t.mediaType,t.supportedMediaTypes,t.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(e.tileMatrixSet)return u1e(t,e.tileMatrixSet,r,n);const i=e.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const s=i.href,o=H3e(t.url,s);return q3e(o).then(function(a){return u1e(t,a,r,n)})}function V3e(t){return q3e(t.url).then(function(e){return IKe(t,e)})}class $Ke extends vh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition});const n={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,context:e.context||null,collections:e.collections};V3e(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){i2(e),this.setState("error")}}class PKe extends ED{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"});const n={url:e.url,projection:this.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null,collections:e.collections};V3e(n).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(e){this.tileGrid=e.grid,this.projection=e.projection,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}handleError_(e){i2(e),this.setState("error")}}function W3e(t){return function(e){const n=e.buffers,r=e.meta,i=e.imageOps,s=e.width,o=e.height,a=n.length,l=n[0].byteLength;if(i){const f=new Array(a);for(let p=0;p<a;++p)f[p]=new ImageData(new Uint8ClampedArray(n[p]),s,o);return t(f,r).data.buffer}const u=new Uint8ClampedArray(l),d=new Array(a),c=new Array(a);for(let f=0;f<a;++f)d[f]=new Uint8ClampedArray(n[f]),c[f]=[0,0,0,0];for(let f=0;f<l;f+=4){for(let p=0;p<a;++p){const g=d[p];c[p][0]=g[f],c[p][1]=g[f+1],c[p][2]=g[f+2],c[p][3]=g[f+3]}const h=t(c,r);u[f]=h[0],u[f+1]=h[1],u[f+2]=h[2],u[f+3]=h[3]}return u.buffer}}function NKe(t,e){const r=Object.keys(t.lib||{}).map(function(s){return"const "+s+" = "+t.lib[s].toString()+";"}).concat(["const __minion__ = ("+W3e.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function BKe(t,e){const n=W3e(t.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:n(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class zKe extends UAe{constructor(e){super(),this.imageOps_=!!e.imageOps;let n;e.threads===0?n=0:this.imageOps_?n=1:n=e.threads||1;const r=new Array(n);if(n)for(let i=0;i<n;++i)r[i]=NKe(e,this.onWorkerMessage_.bind(this,i));else r[0]=BKe(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,n,r){this.enqueue_({inputs:e,meta:n,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const n=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(l){return l.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:n,height:r},i);return}const o=e.inputs[0].data.length,a=4*Math.ceil(o/4/s);for(let l=0;l<s;++l){const u=l*a,d=[];for(let c=0,f=i.length;c<f;++c)d.push(i[c].slice(u,u+a));this.workers_[l].postMessage({buffers:d,meta:e.meta,imageOps:this.imageOps_,width:n,height:r},d)}}onWorkerMessage_(e,n){this.disposed||(this.dataLookup_[e]=n.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,n=this.workers_.length;let r,i;if(n===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(n);const o=4*Math.ceil(s/4/n);for(let a=0;a<n;++a){const l=this.dataLookup_[a].buffer,u=a*o;r.set(new Uint8ClampedArray(l),u),i[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const c1e={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class d1e extends eke{constructor(e,n,r){super(e),this.extent=n.extent,this.resolution=n.viewState.resolution/n.pixelRatio,this.data=r}}class Y3e extends I0{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=qKe(e.sources);const n=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(Ll.CHANGE,n);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new _Ue(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Qo(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:UKe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:Qo(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Si(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let o=0,a=e.sources.length;o<a;++o){const l=e.sources[o],u=l instanceof I$?l:l.getSource();if(!u)continue;const d=(s=u.getAttributions())==null?void 0:s(r);typeof d=="string"?i.push(d):d!==void 0&&i.push(...d)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,n){this.processor_&&this.processor_.dispose(),this.processor_=new zKe({operation:e,imageOps:this.operationType_==="image",queue:1,lib:n,threads:this.threads_}),this.changed()}updateFrameState_(e,n,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Pp(e);i.size[0]=Math.ceil(ru(e)/n),i.size[1]=Math.ceil(Zp(e)/n),i.extent=[s[0]-i.size[0]*n/2,s[1]-i.size[1]*n/2,s[0]+i.size[0]*n/2,s[1]+i.size[1]*n/2],i.time=Date.now();const o=i.viewState;return o.center=s,o.projection=r,o.resolution=n,i}allSourcesReady_(){let e=!0,n;for(let r=0,i=this.layers_.length;r<i;++r)if(n=this.layers_[r].getSource(),!n||n.getState()!=="ready"){e=!1;break}return e}getImage(e,n,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),n=this.findNearestResolution(n);const s=this.updateFrameState_(e,n,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(n!==o||!J_(s.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,n=this.layers_.length,r=new Array(n);for(let s=0;s<n;++s){e.layerIndex=s,e.renderTargets={};const o=jKe(this.layers_[s],e);if(o)r[s]=o;else return}const i={};this.dispatchEvent(new d1e(c1e.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,n,r,i){if(n||!r)return;const s=e.extent,o=e.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!J_(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(ru(s)/o),u=Math.round(Zp(s)/o);a=a0(l,u),this.renderedImageCanvas_=new q$(s,o,1,a.canvas)}a.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new d1e(c1e.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let n=super.getResolutions();if(!n)for(let r=0,i=this.layers_.length;r<i&&(n=this.layers_[r].getSource().getResolutions(e),!n);++r);return n}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Y3e.prototype.dispose;let ug=null;function jKe(t,e){const n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=n.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===r&&o.height===i)return o.getContext("2d").getImageData(0,0,r,i)}if(!ug)ug=a0(r,i,void 0,{willReadFrequently:!0});else{const a=ug.canvas;a.width!==r||a.height!==i?ug=a0(r,i,void 0,{willReadFrequently:!0}):ug.clearRect(0,0,r,i)}return ug.drawImage(o,0,0,r,i),ug.getImageData(0,0,r,i)}function UKe(t){return t.map(function(e){return e.getLayerState()})}function qKe(t){const e=t.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=HKe(t[r]);return n}function HKe(t){let e;return t instanceof I$?t instanceof wD?e=new Ek({source:t}):t instanceof I0&&(e=new R$({source:t})):e=t,e}const GKe='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',VKe='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',WKe='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',YKe={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},XKe={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class ZKe extends r2{constructor(e){const n=e.layer.indexOf("-"),r=n==-1?e.layer:e.layer.slice(0,n),i=XKe[r]||{minZoom:0,maxZoom:20,retina:!0},s=YKe[e.layer],o=e.apiKey?"?api_key="+e.apiKey:"",a=i.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+s.extension+o,u=[GKe,VKe,EUe];e.layer.startsWith("stamen_")&&u.splice(1,0,WKe),super({attributions:u,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:i.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:i.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}}class KKe extends vh{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=vD(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s,o){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const u=CUe(SUe(e),a.length);l=a[u]}return $3e(l,r,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(e[0]),i,s,o)}getTilePixelRatio(e){return this.hidpi_?e:1}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&!this.hidpi_&&(n=1);const s=i.getTileCoordExtent(e,this.tmpExtent_);let o=Ac(i.getTileSize(e[0]),this.tmpSize);n!=1&&(o=AUe(o,n,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,s,n,r,a)}}class JKe extends U3e{constructor(e){e=e||{};const n=e.template||"z:{z} x:{x} y:{y}",r=e.source;super({transition:0,wrapX:e.wrapX!==void 0?e.wrapX:r!==void 0?r.getWrapX():void 0});const i=()=>{var o;this.projection=e.projection!==void 0?ai(e.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=e.zDirection!==void 0?e.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof yE&&(this.transformMatrix=((o=r.transformMatrix)==null?void 0:o.slice())||null);const s=this.tileGrid;s&&this.setTileSizes(s.getResolutions().map((a,l)=>Ac(s.getTileSize(l)).map(u=>Math.max(Math.floor(u),1)))),this.setLoader((a,l,u,d)=>{const c=QAe(n,a,l,u,d.maxY),[f,h]=this.getTileSize(a),p=a0(f,h);return p.strokeStyle="grey",p.strokeRect(.5,.5,f+.5,h+.5),p.fillStyle="grey",p.strokeStyle="white",p.textAlign="center",p.textBaseline="middle",p.font="24px sans-serif",p.lineWidth=4,p.strokeText(c,f/2,h/2,f),p.fillText(c,f/2,h/2,f),p.canvas}),this.setState("ready")};if(r===void 0||r.getState()==="ready")i();else{const s=()=>{r.getState()==="ready"&&(r.removeEventListener(Ll.CHANGE,s),i())};r.addEventListener(Ll.CHANGE,s)}}}class X3e extends vh{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:ai("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)EP(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const n=e.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const n=ai("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const u=O$(n,r);i=ev(e.bounds,u)}const s=cE(r),o=e.minzoom||0,a=e.maxzoom||22,l=dE({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=tke(e.tiles,l),e.attribution&&!this.getAttributions()){const u=i!==void 0?i:s;this.setAttributions(function(d){return Qb(u,d.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class QKe extends TUe{constructor(e,n,r,i,s,o){super(e,n),this.src_=r,this.extent_=i,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(e){if(!this.grid_||!this.keys_)return null;const n=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof i!="string")return null;let s=i.charCodeAt(Math.floor(n*i.length));s>=93&&s--,s>=35&&s--,s-=32;let o=null;if(s in this.keys_){const a=this.keys_[s];this.data_&&a in this.data_?o=this.data_[a]:o=a}return o}forDataAtCoordinate(e,n,r){this.state==Ls.EMPTY&&r===!0?(this.state=Ls.IDLE,DUe(this,Ll.CHANGE,i=>{n(this.getData(e))}),this.loadInternal_()):r===!0?setTimeout(()=>{n(this.getData(e))},0):n(this.getData(e))}getKey(){return this.src_}handleError_(){this.state=Ls.ERROR,this.changed()}handleLoad_(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=Ls.LOADED,this.changed()}loadInternal_(){if(this.state==Ls.IDLE)if(this.state=Ls.LOADING,this.jsonp_)EP(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}onXHRLoad_(e){const n=e.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(e){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(Ls.EMPTY)}}class eJe extends wD{constructor(e){if(super({projection:ai("EPSG:3857"),state:"loading",wrapX:e.wrapX!==void 0?e.wrapX:!0,zDirection:e.zDirection}),this.preemptive_=e.preemptive!==void 0?e.preemptive:!0,this.tileUrlFunction_=kUe,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)EP(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const n=new XMLHttpRequest;n.addEventListener("load",this.onXHRLoad_.bind(this)),n.addEventListener("error",this.onXHRError_.bind(this)),n.open("GET",e.url),n.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const n=e.target;if(!n.status||n.status>=200&&n.status<300){let r;try{r=JSON.parse(n.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(e,n,r,i){if(this.tileGrid){const s=this.tileGrid.getZForResolution(n,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,s);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(e,r,i)}else i===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(e){const n=ai("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const d=O$(n,r);i=ev(e.bounds,d)}const s=cE(r),o=e.minzoom||0,a=e.maxzoom||22,l=dE({extent:s,maxZoom:a,minZoom:o});this.tileGrid=l,this.template_=e.template;const u=e.grids;if(!u){this.setState("error");return}if(this.tileUrlFunction_=tke(u,l),e.attribution){const d=i!==void 0?i:s;this.setAttributions(function(c){return Qb(d,c.extent)?[e.attribution]:null})}this.setState("ready")}getTile(e,n,r,i,s){const o=[e,n,r],a=this.getTileCoordForTileUrlFunction(o,s),l=this.tileUrlFunction_(a,i,s);return new QKe(o,l!==void 0?Ls.IDLE:Ls.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_)}}function tJe(t,e){const n=new GAe(32),r=t.getExtent();return function(i,s){n.expireCache(),r&&(i=o0(r,i));const o=t.getZForResolution(s),a=[];return t.forEachTileCoord(i,o,l=>{const u=l.toString();if(!n.containsKey(u)){const d=e(l);n.set(u,d)}a.push(n.get(u))}),a}}const nJe=Object.freeze(Object.defineProperty({__proto__:null,BingMaps:SXe,CartoDB:AXe,Cluster:kXe,DataTile:yE,GeoTIFF:_P,Google:vKe,IIIF:wKe,Image:I0,ImageArcGISRest:_Ke,ImageCanvas:EKe,ImageMapGuide:AKe,ImageStatic:z3e,ImageTile:U3e,ImageWMS:LUe,OGCMapTile:$Ke,OGCVectorTile:PKe,OSM:RUe,Raster:Y3e,Source:I$,StadiaMaps:ZKe,Tile:wD,TileArcGISRest:KKe,TileDebug:JKe,TileImage:vh,TileJSON:X3e,TileWMS:nke,UTFGrid:eJe,UrlTile:FUe,Vector:aE,VectorTile:ED,WMTS:rke,XYZ:r2,Zoomify:xKe,createArcGISRestLoader:P3e,createMapGuideLoader:N3e,createStaticLoader:B3e,createWMSLoader:OUe,sourcesFromTileGrid:tJe},Symbol.toStringTag,{value:"Module"})),rJe="1.0.0",iJe="",sJe=JSON.parse('[{"kind":"javascript-module","path":"elements/chart/src/main.js","declarations":[{"kind":"class","description":"Chart component based on [Vega-Lite](https://vega.github.io/vega-lite/)/[Vega-Embed](https://github.com/vega/vega-embed).\\nPass a valid Vega spec as `spec` property in order to render a chart.\\n\\nThe `eox-chart` provides some default `spec` settings (merged with the provided `spec` property) and helper functionalities on top of Vega-Lite.","name":"EOxChart","members":[{"kind":"field","name":"spec","privacy":"public","type":{"text":"VisualizationSpec"},"description":"[Vega-Lite spec](https://vega.github.io/vega-lite/docs/spec.html)","default":"undefined"},{"kind":"field","name":"dataValues","privacy":"public","type":{"text":"{[dataSourceName: string]: InlineData}"},"description":"Data values passed on runtime. Requires a [named data source](https://vega.github.io/vega-lite/docs/data.html#named) in the provided `spec`","default":"undefined"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-chart","customElement":true}],"exports":[{"kind":"js","name":"EOxChart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}},{"kind":"custom-element-definition","name":"eox-chart","declaration":{"name":"EOxChart","module":"elements/chart/src/main.js"}}]},{"kind":"javascript-module","path":"elements/drawtools/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxDrawTools","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"field","name":"#olMap","privacy":"private","type":{"text":"Map"}},{"kind":"field","name":"#geoJSON","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"#layerId","privacy":"private","type":{"text":"string"}},{"kind":"field","name":"layerId","privacy":"public","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","attribute":"layer-id"},{"kind":"method","name":"startDrawing"},{"kind":"method","name":"discardDrawing"},{"kind":"method","name":"handleFeatureChange","parameters":[{"name":"text","description":"The string representation of the features to be parsed.","type":{"text":"string"}},{"name":"replaceFeatures","default":"false","description":"A boolean flag indicating whether to replace the existing features.","type":{"text":"boolean"}}]},{"kind":"method","name":"handleFilesChange","parameters":[{"name":"evt","description":"The event object from the file input interaction.","type":{"text":"DragEvent | Event"}}]},{"kind":"method","name":"onModifyEnd"},{"kind":"method","name":"updateGeoJSON","description":"Update #geoJSON with stringify feature."},{"kind":"method","name":"emitDrawnFeatures","description":"Triggers different events when the drawing of a shape is completed."},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"allowModify","privacy":"public","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","attribute":"allow-modify"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"currentlyDrawing","privacy":"public","type":{"text":"boolean"},"description":"Whether the user is currently in the process of drawing or not","default":"false"},{"kind":"field","name":"draw","privacy":"public","type":{"text":"Draw | EOxSelectInteraction"},"description":"The current native OpenLayers `draw` interaction","default":"null"},{"kind":"field","name":"drawLayer","privacy":"public","type":{"text":"default"},"description":"The current native OpenLayers draw `layer` (initialized with a `zIndex` of 100)","default":"null"},{"kind":"field","name":"drawnFeatures","privacy":"public","type":{"text":"Array<Feature>"},"description":"The array of drawn native OpenLayers features. Normally includes only one feature, until multiple feature drawing is enabled.","default":"[]"},{"kind":"field","name":"modify","privacy":"public","type":{"text":"Modify"},"description":"The current native OpenLayers `modify` interaction","default":"null"},{"kind":"field","name":"multipleFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","attribute":"multiple-features"},{"kind":"field","name":"importFeatures","privacy":"public","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","attribute":"import-features"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","attribute":"show-editor"},{"kind":"field","name":"showList","privacy":"public","type":{"text":"boolean"},"description":"Show list of features","default":"false","attribute":"show-list"},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","attribute":"projection"},{"kind":"field","name":"type","privacy":"public","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","attribute":"type"},{"kind":"field","name":"selectionEvents","type":{"text":"ReturnType<typeof default>"},"default":"null"},{"kind":"field","name":"format","privacy":"public","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","attribute":"format"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"noShadow"}],"events":[{"name":"drawupdate","type":{"text":"Array<Feature>"},"description":"Fires whenever features are added, modified or discarded, where the event detail\\nis the `drawnFeatures` array"}],"attributes":[{"name":"allow-modify","type":{"text":"boolean"},"description":"Allow modifying the drawn feature(s)","default":"false","fieldName":"allowModify"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer-id","type":{"text":"string"},"description":"The ID of the Vector/Vector Tile Layer that contains features to be selected","default":"\\"\\"","fieldName":"layerId"},{"name":"multiple-features","type":{"text":"boolean"},"description":"Allow adding more than one feature at a time","default":"false","fieldName":"multipleFeatures"},{"name":"import-features","type":{"text":"boolean"},"description":"Allow import features using drag-drop and upload button","default":"false","fieldName":"importFeatures"},{"name":"show-editor","type":{"text":"boolean"},"description":"Show geo-json editor for draw tool","default":"false","fieldName":"showEditor"},{"name":"show-list","type":{"text":"boolean"},"description":"Show list of features","default":"false","fieldName":"showList"},{"name":"projection","type":{"text":"string"},"description":"Projection of the emitted drawn features","default":"\\"EPSG:4326\\"","fieldName":"projection"},{"name":"noShadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"format","type":{"text":"\\"feature\\"| \\"geojson\\" | \\"wkt\\""},"description":"The format in which the drawn features should be emitted","default":"\\"feature\\"","fieldName":"format"},{"name":"type","type":{"text":"\\"Polygon\\" | \\"Point\\" | \\"LineString\\" | \\"Circle\\" | \\"Box\\""},"description":"Type of the drawn feature","default":"\\"Polygon\\"","fieldName":"type"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-drawtools","customElement":true}],"exports":[{"kind":"js","name":"EOxDrawTools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}},{"kind":"custom-element-definition","name":"eox-drawtools","declaration":{"name":"EOxDrawTools","module":"elements/drawtools/src/main.js"}}]},{"kind":"javascript-module","path":"elements/geosearch/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxGeoSearch","members":[{"kind":"field","name":"#eoxMap","privacy":"private","type":{"text":"EOxMap"}},{"kind":"method","name":"onInput","parameters":[{"name":"e"}]},{"kind":"method","name":"onInputBlur"},{"kind":"method","name":"onButtonClick"},{"kind":"method","name":"getFlexDirection"},{"kind":"method","name":"getResultsDirection"},{"kind":"method","name":"getVerticalAlign"},{"kind":"method","name":"getMarginDirection","parameters":[{"name":"direction"}]},{"kind":"method","name":"handleSelect","parameters":[{"name":"event"}]},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"field","name":"_data","privacy":"private","description":"Internal storage of OpenCage API data after a successful API request.","type":{"text":"array"},"default":"[]"},{"kind":"field","name":"_isListVisible","privacy":"private","description":"Whether or not the list dropdown is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_isInputVisible","privacy":"private","description":"Whether or not the input field is visible.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"_query","privacy":"private","description":"The search query, which is bound to the input field.","type":{"text":"string"},"default":"\\"\\""},{"kind":"field","name":"_isLoading","privacy":"private","description":"Returns true if the element is currently loading data from the API.","type":{"text":"boolean"},"default":"false"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"listDirection","type":{"text":"string"},"default":"\\"right\\""},{"kind":"field","name":"resultsDirection","privacy":"public","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","attribute":"results-direction"},{"kind":"field","name":"interval","privacy":"public","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","attribute":"interval"},{"kind":"field","name":"loaderSvg","privacy":"public","type":{"text":"string"},"default":"` <svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 100 100\\" preserveAspectRatio=\\"xMidYMid\\" width=\\"50\\" height=\\"50\\" style=\\"shape-rendering: auto; display: block; background: transparent;\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" > <g> <circle stroke-dasharray=\\"164.93361431346415 56.97787143782138\\" r=\\"35\\" stroke-width=\\"12\\" stroke=\\"#1a467c\\" fill=\\"none\\" cy=\\"50\\" cx=\\"50\\" > <animateTransform keyTimes=\\"0;1\\" values=\\"0 50 50;360 50 50\\" dur=\\"1.2222222222222223s\\" repeatCount=\\"indefinite\\" type=\\"rotate\\" attributeName=\\"transform\\" ></animateTransform> </circle> <g></g> </g> </svg> `","attribute":"loader-svg"},{"kind":"field","name":"fetchDebounced"},{"kind":"field","name":"endpoint","privacy":"public","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","attribute":"endpoint"},{"kind":"field","name":"queryParameter","privacy":"public","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","attribute":"queryParameter"},{"kind":"field","name":"button","privacy":"public","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","attribute":"button"},{"kind":"field","name":"small","privacy":"public","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","attribute":"small"},{"kind":"field","name":"label","privacy":"public","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","attribute":"label"},{"kind":"field","name":"direction","privacy":"public","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","attribute":"list-direction"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"events":[{"name":"geosearchSelect","type":{"text":"CustomEvent"},"description":"The select event, including the details of the selected item"}],"attributes":[{"name":"endpoint","type":{"text":"string"},"description":"The OpenCage API endpoint to use for the search, including the key but without the query parameter.","fieldName":"endpoint"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"queryParameter","type":{"text":"string"},"description":"The name of the query parameter to use for the search query in the endpoint URI.","fieldName":"queryParameter"},{"name":"button","type":{"text":"boolean"},"description":"Whether or not to enable button mode, which hides and shows the input field\\nsimilar to how a modal works.","fieldName":"button"},{"name":"interval","type":{"text":"number"},"description":"Set a custom interval for the debounce function.","default":"800","fieldName":"interval"},{"name":"small","type":{"text":"boolean"},"description":"Enables a smaller version of the button for use in map controls.","fieldName":"small"},{"name":"label","type":{"text":"string"},"description":"Which text to use for the button if it is enabled.","fieldName":"label"},{"name":"list-direction","type":{"text":"string"},"description":"The direction of the search input relative to the button, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","fieldName":"direction"},{"name":"results-direction","type":{"text":"string"},"description":"The direction of the results box relative to the input, with the following options:\\n\\n- `left`\\n- `top`\\n- `right`\\n- `bottom`","default":"\\"down\\"","fieldName":"resultsDirection"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"},{"name":"loader-svg","type":{"text":"string"},"default":"loaderSvg","fieldName":"loaderSvg"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch","customElement":true},{"kind":"class","description":"","name":"EOxGeoSearchItem","members":[{"kind":"field","name":"item","privacy":"public","type":{"text":"object"},"attribute":"item"},{"kind":"field","name":"onClick","privacy":"public","type":{"text":"function"},"attribute":"onClick"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"attribute":"unstyled"}],"attributes":[{"name":"item","type":{"text":"object"},"fieldName":"item"},{"name":"onClick","type":{"text":"function"},"fieldName":"onClick"},{"name":"unstyled","type":{"text":"boolean"},"fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-geosearch-item","customElement":true}],"exports":[{"kind":"custom-element-definition","name":"eox-geosearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}},{"kind":"custom-element-definition","name":"eox-geosearch-item","declaration":{"name":"EOxGeoSearchItem","module":"elements/geosearch/src/main.js"}},{"kind":"js","name":"EOxGeoSearch","declaration":{"name":"EOxGeoSearch","module":"elements/geosearch/src/main.js"}}]},{"kind":"javascript-module","path":"elements/itemfilter/src/main.js","declarations":[{"kind":"class","description":"EOxItemFilter is a custom web component that provides a comprehensive item filtering system.\\nIt includes methods for applying filters, searching, sorting results, and resetting filters.\\nThe component supports both inline and dropdown modes for filter display.","name":"EOxItemFilter","members":[{"kind":"field","name":"#resultAggregation","privacy":"private","type":{"text":"Array<string>"},"default":"[]"},{"kind":"field","name":"#items","privacy":"private","type":{"text":"Array<object>"},"default":"[]"},{"kind":"field","name":"#config","privacy":"private","default":"ELEMENT_CONFIG","type":{"text":"Object"}},{"kind":"method","name":"apply","description":"Applies the filters to the items and updates the result aggregation."},{"kind":"method","name":"searchHandler","description":"Performs a search based on the current configuration and items.\\nRequests an update after the search completes."},{"kind":"method","name":"sortResults","parameters":[{"name":"items","description":"The items to be sorted.","type":{"text":"Array<object>"}}],"description":"Sorts the given items based on the current configuration.","return":{"type":{"text":"Array<object>"}}},{"kind":"method","name":"#createFilter","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the filter element.","type":{"text":"number"}}],"description":"Creates a filter element based on the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"#createReset","privacy":"private","parameters":[{"name":"filterObject","description":"The filter object.","type":{"text":"Object"}},{"name":"tabIndex","description":"The tab index for the reset element.","type":{"text":"number"}}],"description":"Creates a reset element for the given filter object and tab index.","return":{"type":{"text":"import(\\"lit\\")"}}},{"kind":"method","name":"resetFilters","description":"Resets all applied filters."},{"kind":"method","name":"updateResult","parameters":[{"name":"evt","description":"\\"result\\" event triggered by result component","type":{"text":"{detail: Object}"}}],"description":"Updates selected result when result component triggers the \\"result\\" event."},{"kind":"field","name":"items","privacy":"public","type":{"text":"Array<Object>"},"description":"The items to be filtered","default":"null"},{"kind":"field","name":"filters","privacy":"public","type":{"text":"Object"},"description":"The state object containing the applied filters.","default":"{}"},{"kind":"field","name":"results","privacy":"public","type":{"text":"Array<Object>"},"description":"The state object containing the filtered results.","default":"[]"},{"kind":"field","name":"selectedResult","privacy":"public","type":{"text":"Object"},"description":"The currently selected result","default":"null"},{"kind":"field","name":"search","type":{"text":"Function"},"privacy":"private"},{"kind":"field","name":"aggregateResults","privacy":"public","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","attribute":"aggregate-results"},{"kind":"field","name":"autoSpreadSingle","privacy":"public","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","attribute":"auto-spread-single"},{"kind":"field","name":"enableHighlighting","privacy":"public","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","attribute":"enable-highlighting"},{"kind":"field","name":"externalFilter","privacy":"public","type":{"text":"Function"},"description":"Use an external search endpoint instead of fuse search.\\nPassed properties: input string, filters object","default":"null"},{"kind":"field","name":"filterProperties","privacy":"public","type":{"text":"Array<{key?: String, keys?: Array<String>, title: String, type: String, placeholder?: String, format?: String, state?: Object}>"},"description":"The filter properties.","default":"[]"},{"kind":"field","name":"fuseConfig","privacy":"public","type":{"text":"Object"},"description":"Native fuse.js config override","default":"{}"},{"kind":"field","name":"inlineMode","privacy":"public","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","attribute":"inline-mode"},{"kind":"field","name":"matchAllWhenEmpty","privacy":"public","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","attribute":"match-all-when-empty"},{"kind":"field","name":"showResults","privacy":"public","type":{"text":"Boolean"},"description":"Display results list","default":"true","attribute":"show-result"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"subTitleProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","attribute":"sub-title-property"},{"kind":"field","name":"imageProperty","privacy":"public","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","attribute":"image-property"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"expandMultipleFilters","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","attribute":"enable-multiple-filter"},{"kind":"field","name":"expandResults","privacy":"public","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","attribute":"expand-result"},{"kind":"field","name":"expandMultipleResults","privacy":"public","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","attribute":"expand-multiple-results"},{"kind":"field","name":"resultType","privacy":"public","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","attribute":"result-type"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"filter","type":{"text":"CustomEvent"},"description":"Fires when the filters are changed; event detail includes `filters` and `results`"},{"name":"select","type":{"text":"CustomEvent"},"description":"Fires when a result is selected; event detail is `selectedResult`"}],"attributes":[{"name":"aggregate-results","type":{"text":"String"},"description":"Aggregate results by a property key","default":"undefined","fieldName":"aggregateResults"},{"name":"auto-spread-single","type":{"text":"Boolean"},"description":"Automatically spread single item summaries\\nremoving the summary header","default":"false","fieldName":"autoSpreadSingle"},{"name":"enable-highlighting","type":{"text":"Boolean"},"description":"Highlighting of search result character matches","default":"false","fieldName":"enableHighlighting"},{"name":"inline-mode","type":{"text":"Boolean"},"description":"Inline mode, for rendering the itemfilter in a very condensed space.\\nExpects showResults to be false","default":"false","fieldName":"inlineMode"},{"name":"match-all-when-empty","type":{"text":"Boolean"},"description":"Show all result items if nothing is input by the user","default":"true","fieldName":"matchAllWhenEmpty"},{"name":"show-result","type":{"text":"Boolean"},"description":"Display results list","default":"true","fieldName":"showResults"},{"name":"id-property","type":{"text":"String"},"description":"Unique id property of items","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"The property of the result items used for display","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"sub-title-property","type":{"text":"String"},"description":"The property of the result items used for a subtitle","default":"undefined","fieldName":"subTitleProperty"},{"name":"image-property","type":{"text":"String"},"description":"The property of the result items used for an image","default":"undefined","fieldName":"imageProperty"},{"name":"enable-multiple-filter","type":{"text":"Boolean"},"description":"Allow opening multiple filter accordions in parallel","default":"true","fieldName":"expandMultipleFilters"},{"name":"expand-result","type":{"text":"Boolean"},"description":"Initialize result accordions expanded","default":"true","fieldName":"expandResults"},{"name":"expand-multiple-results","type":{"text":"Boolean"},"description":"Allow opening multiple result accordions in parallel","default":"true","fieldName":"expandMultipleResults"},{"name":"result-type","type":{"text":"String"},"description":"Rendering type for results (can be `list`or `cards`)","default":"\\"list\\"","fieldName":"resultType"},{"name":"unstyled","type":{"text":"boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-itemfilter","customElement":true}],"exports":[{"kind":"js","name":"EOxItemFilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}},{"kind":"custom-element-definition","name":"eox-itemfilter","declaration":{"name":"EOxItemFilter","module":"elements/itemfilter/src/main.js"}}]},{"kind":"javascript-module","path":"elements/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/src/main.js","declarations":[{"kind":"class","description":"Display layers and groups of a connected OpenLayers map\\n\\n## Layer properties\\nIn order to be displayed correctly, the OpenLayers map layers need some custom properties (using e.g. `layer.set(property, value)`).\\n\\n#### `id?: string`\\nThe layer id. Not required but recommended. Can also be any other layer property (defined via the `idProperty` property or `id-property`attribute - see API).\\n\\n#### `title?: string`\\nThe title of the layer displayed in the layer control. Not required, but recommended in order to display human-readable layer titles. Can be any other layer property (defined via the `titleProperty` property or `title-property`attribute - see API).\\n\\n#### `layerControlHide?: Boolean`\\nCompletely hide a layer from the layer control.\\n\\n#### `layerControlOptional?: Boolean`\\nInitially hide a layer from the layer control, but make it available as an optional layer. If the layer is selected and added, it will be set to visible and pushed to the top of the layer list or (if originally configured within a layer group) to the top of the layer group.\\n\\n#### `layerControlExclusive?: Boolean`\\nMake layers mutually exclusive. If two or more layers (on the same level, i.e. at root or inside a layer group) have this property, then only one of them can be visualized at a time.\\n\\n#### `layerControlExpand?: Boolean`\\nPre-expand a layer dropdown so that it is always open when the component initializes.\\n\\n#### `layerControlToolsExpand?: Boolean`\\nPre-expand the layer tools so they are visible when the component initializes.\\n\\n#### `layerConfig?: Object`\\nConfiguration options for the layer (displayed in the layer tools\' \\"config\\" tab)\\n\\n#### `layerDateTime?: Object`\\nPartial eox-timecontrol config passed to the \\"datetime\\" tool\\n\\n### `layerLegend`?: Object\\nCreates a dynamic color legend based on range & domain of values. Extenteds partial config of `color-legend-element`","name":"EOxLayerControl","members":[{"kind":"field","name":"#eoxMap","privacy":"private","description":"Instance of `eox-map` which is a wrapper for the OL","type":{"text":"EOxMap"}},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"#handleLayerControlLayerListChange","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent & {target: Element}"}}],"description":"Event handler for changes in the layer list"},{"kind":"method","name":"#handleDatetimeUpdate","privacy":"private","parameters":[{"name":"evt","type":{"text":"CustomEvent"}}],"description":"Dispatches datetime updates from layer datetime to the layercontrol"},{"kind":"field","name":"#styleEOX","privacy":"private","default":"` :host, :root { font-family: Roboto, sans-serif; --padding: 0.5rem; --list-padding: 48px; --layer-input-visibility: flex; --layer-type-visibility: block; --layer-title-visibility: flex; --layer-visibility: block; --layer-tools-button-visibility: flex; display: block; padding: var(--padding) 0; } `"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"idProperty","privacy":"public","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","attribute":"id-property"},{"kind":"field","name":"map","privacy":"public","type":{"text":"Map"},"description":"The native OL map instance","default":"null"},{"kind":"field","name":"titleProperty","privacy":"public","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","attribute":"title-property"},{"kind":"field","name":"showLayerZoomState","privacy":"public","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","attribute":"show-layer-zoom-state"},{"kind":"field","name":"tools","privacy":"public","type":{"text":"Array<String>"},"description":"Layer tools","default":"[\\"info\\", \\"opacity\\", \\"datetime\\", \\"config\\", \\"remove\\", \\"sort\\"]"},{"kind":"field","name":"addExternalLayers","privacy":"public","type":{"text":"Boolean"},"description":"Enable-disable external layer","default":"false"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"styleOverride","privacy":"public","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","attribute":"styleOverride"},{"kind":"field","name":"toolsAsList","privacy":"public","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","attribute":"toolsAsList"}],"events":[{"name":"layerchange","type":{"text":"CustomEvent"},"description":"A generic layer change event; could be a layer visibility, group length updates and others.\\nPasses the changed layer in the `detail`."},{"name":"datetime:updated","type":{"text":"CustomEvent"}}],"attributes":[{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"id-property","type":{"text":"String"},"description":"Layer id property","default":"\\"id\\"","fieldName":"idProperty"},{"name":"title-property","type":{"text":"String"},"description":"Layer title property","default":"\\"title\\"","fieldName":"titleProperty"},{"name":"show-layer-zoom-state","type":{"text":"Boolean"},"description":"Show layer state based on zoom level or not","default":"false","fieldName":"showLayerZoomState"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"styleOverride","type":{"text":"String"},"description":"Overrides elements current CSS.","default":"\\"\\"","fieldName":"styleOverride"},{"name":"toolsAsList","type":{"text":"Boolean"},"description":"If enabled, the tools section will be rendered as list.","default":"false","fieldName":"toolsAsList"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-layercontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxLayerControl","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layercontrol","declaration":{"name":"EOxLayerControl","module":"elements/layercontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layout/src/main.js","declarations":[{"kind":"class","description":"This element allows to quickly set up an app layout using a 12x12 grid. It consists of two elements:\\n- `eox-layout`: the container holding all the items\\n- `eox-layout-item`: the individual items placed on the grid, with a defined x/y coordinate, and a w(idth) and h(eight)","name":"EOxLayout","members":[],"attributes":[{"name":"gap"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout","customElement":true},{"kind":"class","description":"","name":"EOxLayoutItem","members":[],"attributes":[{"name":"x"},{"name":"y"},{"name":"w"},{"name":"h"}],"superclass":{"name":"HTMLElement"},"tagName":"eox-layout-item","customElement":true}],"exports":[{"kind":"js","name":"EOxLayout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"js","name":"EOxLayoutItem","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout","declaration":{"name":"EOxLayout","module":"elements/layout/src/main.js"}},{"kind":"custom-element-definition","name":"eox-layout-item","declaration":{"name":"EOxLayoutItem","module":"elements/layout/src/main.js"}}]},{"kind":"javascript-module","path":"elements/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string | number"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/stacinfo/src/main.js","declarations":[{"kind":"class","description":"### Introduction\\nWorking with STAC catalogs, collections and items often times requires\\nto fetch a JSON file, parse its contents and display some of its fields\\nin some formatted way. To make these steps reusable, the `eox-stacinfo`\\nelement offers a set of functionalities:\\n- **automatically fetch a STAC file** as soon as the element loads\\n- offer a **property whitelist** functionality to choose which properties to display\\n- display the properties in **configurable sections** (header, body, featured, footer)\\n- allow to **override** any property display for application-specific custom needs\\n\\nThe use case for this element is alongside a map which displays STAC files\\nor in a catalog browsing scenario where a quick look at the most important properties\\nis needed.\\n\\n#### Technology\\nUnder the hood, this element uses [stac-fields](https://github.com/stac-utils/stac-fields) for parsing and pre-formatting properties.","name":"EOxStacInfo","members":[{"kind":"field","name":"allowHtml","privacy":"public","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","attribute":"allow-html"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","attribute":"unstyled"},{"kind":"field","name":"for","privacy":"public","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","attribute":"for"},{"kind":"field","name":"header","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the header","default":"[]"},{"kind":"field","name":"tags","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display as tags","default":"[]"},{"kind":"field","name":"body","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display to display in the main body","default":"[]"},{"kind":"field","name":"featured","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the featured section","default":"[]"},{"kind":"field","name":"footer","privacy":"public","type":{"text":"Array<any>"},"description":"Keys of properties to display in the footer","default":"[]"},{"kind":"field","name":"stacInfo","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the fetched STAC information","default":"[]"},{"kind":"field","name":"stacProperties","privacy":"public","type":{"text":"Array<any>"},"description":"The state object containing the parsed STAC properties","default":"[]"}],"attributes":[{"name":"allow-html","type":{"text":"boolean"},"description":"Whether to allow HTML in the property display","default":"false","fieldName":"allowHtml"},{"name":"unstyled","type":{"text":"boolean"},"description":"Whether to use unstyled mode","default":"false","fieldName":"unstyled"},{"name":"for","type":{"text":"string"},"description":"The identifier for the STAC resource to fetch","default":"\\"\\"","fieldName":"for"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-stacinfo","customElement":true}],"exports":[{"kind":"js","name":"EOxStacInfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}},{"kind":"custom-element-definition","name":"eox-stacinfo","declaration":{"name":"EOxStacInfo","module":"elements/stacinfo/src/main.js"}}]},{"kind":"javascript-module","path":"elements/storytelling/src/main.js","declarations":[{"kind":"class","description":"Manage drawn features on a map","name":"EOxStoryTelling","members":[{"kind":"field","name":"#html","privacy":"private","description":"Generated HTML string using markdown","type":{"text":"String"},"default":"undefined"},{"kind":"field","name":"#config","privacy":"private","type":{"text":"Object"},"default":"{}","description":"Basic config"},{"kind":"field","name":"#debounceUpdateMarkdown","privacy":"private","type":{"text":"Object"},"default":"null","description":"Debounce update markdown"},{"kind":"method","name":"#dispatchInitEvent","privacy":"private","parameters":[{"name":"element","description":"Dom element","type":{"text":"Element"}}]},{"kind":"method","name":"handleSlotChange","description":"Handles changes to the slot\'s content, updating the component\'s internal state."},{"kind":"method","name":"waitForHtmlInitialization"},{"kind":"field","name":"markdown","privacy":"public","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","attribute":"markdown"},{"kind":"field","name":"markdownURL","privacy":"public","type":{"text":"String"},"description":"Markdown Content URL","default":"null","attribute":"markdown-url"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"disableAutosave","privacy":"public","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","attribute":"disable-autosave"},{"kind":"field","name":"showEditor","privacy":"public","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","attribute":"show-editor"},{"kind":"field","name":"showNav","privacy":"public","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","attribute":"show-nav"},{"kind":"field","name":"nav","privacy":"public","type":{"text":"Array<Object>"},"description":"List of items in navigation","default":"[]"},{"kind":"field","name":"addCustomSectionIndex","privacy":"public","type":{"text":"Number"},"description":"custom section index","default":"-1","attribute":"addCustomSectionIndex"},{"kind":"field","name":"selectedCustomElement","privacy":"public","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","attribute":"selectedCustomElement"}],"events":[{"name":"init","type":{"text":"CustomEvent"}},{"name":"changed","type":{"text":"CustomEvent"}}],"attributes":[{"name":"markdown","type":{"text":"String"},"description":"Markdown Content","default":"\\"\\"","fieldName":"markdown"},{"name":"markdown-url","type":{"text":"String"},"description":"Markdown Content URL","default":"null","fieldName":"markdownURL"},{"name":"show-nav","type":{"text":"Boolean"},"description":"Enable or disable navigation","default":"false","fieldName":"showNav"},{"name":"show-editor","type":{"text":"String | \\"closed\\" | undefined"},"description":"Enable or disable editor","default":"undefined","fieldName":"showEditor"},{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"disable-autosave","type":{"text":"Boolean"},"description":"Disable auto save","default":"false","fieldName":"disableAutosave"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"},{"name":"addCustomSectionIndex","type":{"text":"Number"},"description":"custom section index","default":"-1","fieldName":"addCustomSectionIndex"},{"name":"selectedCustomElement","type":{"text":"Object | null"},"description":"Selected custom element object","default":"null","fieldName":"selectedCustomElement"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-storytelling","customElement":true}],"exports":[{"kind":"js","name":"EOxStoryTelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}},{"kind":"custom-element-definition","name":"eox-storytelling","declaration":{"name":"EOxStoryTelling","module":"elements/storytelling/src/main.js"}}]},{"kind":"javascript-module","path":"elements/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"displayFormat","privacy":"public","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","attribute":"display-format"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"display-format","type":{"text":"string"},"description":"Date format string for displaying the current step\\nusing [dayjs format token strings](https://day.js.org/docs/en/display/format)","default":"undefined","fieldName":"displayFormat"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/timecontrol/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxJSONForm","members":[{"kind":"field","name":"#editor","privacy":"private","type":{"text":"{[key: string]: any}"},"default":"null","description":"editor instance generated through - JSONEditor"},{"kind":"field","name":"editor","description":"Getter for the JSONEditor instance","readonly":true},{"kind":"field","name":"schema","privacy":"public","type":{"text":"JsonSchema"},"description":"Schema for the form editor","return":{"type":{"text":"JsonSchema | String"}},"parameters":[{"name":"newSchema","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"field","name":"value","privacy":"public","type":{"text":"JsonSchema"},"description":"Default values for the form editor","parameters":[{"name":"newVal","type":{"text":"JsonSchema"}}],"default":"null"},{"kind":"method","name":"#emitValue","privacy":"private","description":"Value object has been changed"},{"kind":"method","name":"#dispatchEvent","privacy":"private","description":"Dispatch same function for multiple event type"},{"kind":"field","name":"options","privacy":"public","type":{"text":"object"},"description":"Default values for the form editor","default":"{ show_opt_in: false, disable_collapse: true, disable_edit_json: true, disable_properties: true, disable_array_delete_all_rows: true, disable_array_delete_last_row: true, array_controls_top: true, }"},{"kind":"field","name":"noShadow","privacy":"public","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","attribute":"no-shadow"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","attribute":"unstyled"}],"events":[{"name":"change","type":{"text":"CustomEvent"}}],"attributes":[{"name":"no-shadow","type":{"text":"Boolean"},"description":"Renders the element without a shadow root","default":"false","fieldName":"noShadow"},{"name":"unstyled","type":{"text":"Boolean"},"description":"Render the element without additional styles","default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-jsonform","customElement":true}],"exports":[{"kind":"js","name":"EOxJSONForm","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}},{"kind":"custom-element-definition","name":"eox-jsonform","declaration":{"name":"EOxJSONForm","module":"elements/layercontrol/node_modules/@eox/jsonform/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/map/src/main.js","declarations":[{"kind":"class","description":"The `eox-map` is a wrapper for the library [OpenLayers](https://openlayers.org/) with additional features and helper functions.\\n\\nBasic usage:\\n\\n```\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\n\\nSome basic layers, sources and formats are included in the default bundle, for advanced usage it is\\nrequired to import the `advancedLayersAndSources` plugin.\\n\\nIncluded in the base bundle:\\n- Formats: `GeoJSON`, `MVT`\\n- Layers: `Group`, `Image`, `Tile`, `Vector`, `VectorTile`\\n- Sources: `ImageWMS`, `OSM`, `Tile`, `TileWMS`, `Vector`, `VectorTile`, `WMTS`, `XYZ`\\n\\nIn order to use the rest of the layers and sources provided by OpenLayers, import the plugin as well:\\n\\n```\\nimport \\"@eox/map/src/plugins/advancedLayersAndSources\\"\\nimport \\"@eox/map\\"\\n\\n<eox-map [...]></eox-map>\\n```\\nIncluded in the advanced plugin bundle:\\n- Layers:\\n  - All OpenLayers layer types\\n  - [`STAC`](https://github.com/m-mohr/ol-stac)\\n- Sources:\\n  - All OpenLayers source types\\n  - [`WMTSCapabilities`](https://github.com/EOX-A/EOxElements/tree/main/elements/map/src/custom/sources/WMTSCapabilities.ts)\\n- Reprojection through [proj4](https://github.com/proj4js/proj4js)","name":"EOxMap","members":[{"kind":"field","name":"#zoomExtent","privacy":"private","description":"The current zoom extent of the map.\\nThis is used to define the maximum and minimum zoom levels.","type":{"text":"Extent"}},{"kind":"field","name":"#controls","privacy":"private","description":"Stores the controls applied to the map, such as zoom and navigation tools.","type":{"text":"ControlDictionary"}},{"kind":"field","name":"#layers","privacy":"private","description":"The array of layers currently added to the map.","type":{"text":"Array<EoxLayer>"}},{"kind":"field","name":"#preventScroll","privacy":"private","description":"Indicates whether the map\'s scroll interactions (zooming, panning) are prevented.","type":{"text":"Boolean"}},{"kind":"field","name":"#config","privacy":"private","description":"Holds the configuration object for initializing and managing the map\'s settings.","type":{"text":"ConfigObject"}},{"kind":"field","name":"#animationOptions","privacy":"private","description":"Options for animating changes to the map\'s view, such as panning or zooming.","type":{"text":"EOxAnimationOptions"}},{"kind":"field","name":"#sync","privacy":"private","description":"Represents the sync state of the map with another map instance.","type":{"text":"String"}},{"kind":"field","name":"#center","privacy":"private","type":{"text":"Array<number>"},"default":"[0, 0]","description":"The current center coordinates of the map.\\nStored as an array of two numbers representing the x and y coordinates."},{"kind":"field","name":"#zoom","privacy":"private","type":{"text":"number"},"default":"0","description":"The current zoom level of the map."},{"kind":"field","name":"#projection","privacy":"private","type":{"text":"ProjectionLike"},"default":"\\"EPSG:3857\\"","description":"The map\'s projection system, specifying how coordinates are mapped on the globe.\\nDefaults to \\"EPSG:3857\\"."},{"kind":"field","name":"center","privacy":"public","type":{"text":"array"},"description":"Gets the current center coordinates of the map.","parameters":[{"description":"The new center coordinates [x, y].","name":"center","type":{"text":"Array<number>"}}],"return":{"type":{"text":"Array<number>"}}},{"kind":"field","name":"lonLatCenter","description":"Gets the current center of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"lonLatExtent","description":"Gets the current extent of the map in longitude and latitude.","return":{"type":{"text":"Array<number>"}},"readonly":true},{"kind":"field","name":"zoom","description":"Gets the current zoom level of the map.","parameters":[{"description":"The new zoom level.","name":"zoom","type":{"text":"number"}}],"return":{"type":{"text":"number"}}},{"kind":"field","name":"zoomExtent","description":"Sets the zoom extent of the map.","parameters":[{"description":"The new zoom extent.","name":"extent","type":{"text":"Extent"}}]},{"kind":"field","name":"controls","description":"Gets the current map controls.","parameters":[{"description":"An array of control configurations.","name":"controls","type":{"text":"ControlDictionary"}}],"return":{"type":{"text":"Object"}}},{"kind":"field","name":"layers","privacy":"public","type":{"text":"array"},"description":"Gets the current layers of the map.","parameters":[{"description":"An array of layer configurations.","name":"layers","type":{"text":"Array<EoxLayer>"}}],"return":{"type":{"text":"Array<EoxLayer>"}}},{"kind":"field","name":"preventScroll","privacy":"public","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"attribute":"prevent-scroll"},{"kind":"field","name":"config","privacy":"public","type":{"text":"object"},"description":"Gets the current configuration of the map.","parameters":[{"description":"The configuration object.","name":"config","type":{"text":"ConfigObject"}}],"return":{"type":{"text":"ConfigObject"}}},{"kind":"field","name":"animationOptions","description":"Gets the current animation options.","parameters":[{"description":"The animation options.","name":"animationOptions","type":{"text":"EOxAnimationOptions"}}],"return":{"type":{"text":"EOxAnimationOptions"}}},{"kind":"field","name":"projection","privacy":"public","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"attribute":"projection"},{"kind":"field","name":"sync","privacy":"public","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"attribute":"sync"},{"kind":"method","name":"addOrUpdateLayer","parameters":[{"name":"json","description":"The layer configuration in JSON format.","type":{"text":"EoxLayer"}}],"description":"Adds or updates a layer on the map.","return":{"type":{"text":"Object"}}},{"kind":"method","name":"removeInteraction","parameters":[{"name":"id","description":"The ID of the interaction to remove.","type":{"text":"string | number"}}],"description":"Removes an interaction from the map by its ID."},{"kind":"method","name":"removeSelect","parameters":[{"name":"id","description":"The ID of the select interaction to remove.","type":{"text":"string"}}],"description":"Removes a select interaction from the map by its ID."},{"kind":"method","name":"removeControl","parameters":[{"name":"id","description":"The ID of the control to remove.","type":{"text":"string"}}],"description":"Removes a control from the map by its ID."},{"kind":"method","name":"getLayerById","parameters":[{"name":"layerId","description":"The ID of the layer to retrieve.","type":{"text":"string"}}],"description":"Retrieves a layer from the map by its ID.","return":{"type":{"text":"AnyLayerWithSource"}}},{"kind":"field","name":"parseFeature","default":"parseFeature","description":"Parses a feature from the input data.","type":{"text":"Function"}},{"kind":"field","name":"parseTextToFeature","default":"parseTextToFeature","description":"Parses text into a feature."},{"kind":"field","name":"registerProjectionFromCode","default":"registerProjectionFromCode","description":"Registers a projection from an EPSG code."},{"kind":"field","name":"registerProjection","default":"registerProjection","description":"Registers a custom projection."},{"kind":"field","name":"getFlatLayersArray","default":"getFlatLayersArray","description":"Retrieves all layers in a flat array."},{"kind":"field","name":"transform","default":"transform","description":"Transforms coordinates between different projections."},{"kind":"field","name":"transformExtent","default":"transformExtent","description":"Transforms the extent between different projections."},{"kind":"field","name":"buffer","default":"buffer","description":"Applies a buffer around an extent."},{"kind":"field","name":"map","privacy":"public","description":"The OpenLayers map instance.","type":{"text":"default"},"default":"new Map({ controls: [], layers: [], view: new View({ center: [0, 0], zoom: 0, projection: this.projection, }), })"},{"kind":"field","name":"interactions","type":{"text":"Object.<string, default>"},"description":"Object to store various map interactions (e.g., drag, zoom).","default":"{}"},{"kind":"field","name":"selectInteractions","privacy":"public","type":{"text":"Object.<string, EOxSelectInteraction>"},"description":"Object to store selection interactions for the map.","default":"{}"},{"kind":"field","name":"mapControls","privacy":"public","type":{"text":"Object.<string, default>"},"description":"Object to store map controls (e.g., custom buttons, geolocation).","default":"{}"},{"kind":"field","name":"intersections","privacy":"public","type":{"text":"object"}}],"attributes":[{"name":"prevent-scroll","type":{"text":"boolean"},"description":"Gets the current scroll interaction state.","parameters":[{"description":"Whether to prevent scroll interactions.","name":"preventScroll","type":{"text":"Boolean"}}],"return":{"type":{"text":"Boolean"}},"fieldName":"preventScroll"},{"name":"sync","type":{"text":"string"},"description":"Gets the current sync state of the map.","parameters":[{"description":"The ID of the map to sync with.","name":"sync","type":{"text":"string"}}],"return":{"type":{"text":"string"}},"fieldName":"sync"},{"name":"projection","type":{"text":"string"},"description":"Gets the current map projection.","parameters":[{"description":"The projection code (e.g., \\"EPSG:3857\\").","name":"projection","type":{"text":"ProjectionLike"}}],"return":{"type":{"text":"ProjectionLike"}},"fieldName":"projection"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-map","customElement":true}],"exports":[{"kind":"js","name":"EOxMap","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}},{"kind":"custom-element-definition","name":"eox-map","declaration":{"name":"EOxMap","module":"elements/layercontrol/node_modules/@eox/map/src/main.js"}}]},{"kind":"javascript-module","path":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js","declarations":[{"kind":"class","description":"","name":"EOxTimeControl","members":[{"kind":"method","name":"next","description":"Go to next step"},{"kind":"method","name":"previous","description":"Go to previous step"},{"kind":"method","name":"playAnimation","parameters":[{"name":"on","description":"animation on/off","type":{"text":"boolean"}}],"description":"Toggle play animation"},{"kind":"method","name":"setConfig","parameters":[{"name":"config","type":{"text":"@param {string} [config.layer]\\n   * @param {string} [config.controlProperty]\\n   * @param {Array<string>} [config.controlValues]"}}],"description":"Set the config at a later point"},{"kind":"field","name":"currentStep","privacy":"public","type":{"text":"string"},"description":"The currently selected step","attribute":"current-step"},{"kind":"method","name":"updateMap"},{"kind":"field","name":"eoxMap"},{"kind":"method","name":"_updateStep","parameters":[{"name":"step","default":"1","optional":true,"type":{"text":"number"}}],"privacy":"private"},{"kind":"method","name":"getFlatLayersArray","parameters":[{"name":"layers","type":{"text":"default[]"}}],"description":"TEMP / TO-DO, this is a copy of the function defined in the eox-map:\\nhttps://github.com/EOX-A/EOxElements/blob/main/elements/map/src/layer.ts#L25\\nConsider a way to properly export that function and use it here\\nSee also:\\nhttps://github.com/EOX-A/EOxElements/issues/974","return":{"type":{"text":"default[]"}}},{"kind":"field","name":"controlValues","privacy":"public","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","attribute":"control-values"},{"kind":"field","name":"_newStepIndex","privacy":"public","type":{"text":"number"},"default":"0","attribute":"_newStepIndex"},{"kind":"field","name":"unstyled","privacy":"public","type":{"text":"boolean"},"default":"false","attribute":"unstyled"},{"kind":"field","name":"disablePlay","privacy":"public","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","attribute":"disable-play"},{"kind":"field","name":"slider","privacy":"public","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","attribute":"slider"},{"kind":"field","name":"for","privacy":"public","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","attribute":"for"},{"kind":"field","name":"layer","privacy":"public","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","attribute":"layer"},{"kind":"field","name":"controlProperty","privacy":"public","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","attribute":"control-property"},{"kind":"field","name":"_eoxMap","privacy":"public","type":{"text":"HTMLElement |undefined"},"default":"undefined","attribute":"_eoxMap"},{"kind":"field","name":"_width","privacy":"public","type":{"text":"number"},"default":"300","attribute":"_width"},{"kind":"field","name":"_originalParams","privacy":"public","type":{"text":"object"},"description":"Original params of layer source","attribute":"_originalParams"},{"kind":"field","name":"_animationInterval","privacy":"public","attribute":"_animationInterval"},{"kind":"field","name":"_controlSource","privacy":"public","attribute":"_controlSource"},{"kind":"field","name":"_isAnimationPlaying","privacy":"public","attribute":"_isAnimationPlaying"}],"events":[{"name":"stepchange","type":{"text":"CustomEvent"},"description":"Triggers when *currentStep* is updated.\\n`event.detail.currentStep` returns the new *currentStep* value."}],"attributes":[{"name":"control-property","type":{"text":"string | undefined"},"description":"The WMS parameter to update","default":"undefined","fieldName":"controlProperty"},{"name":"control-values","type":{"text":"string[]"},"description":"The list of available values for the animation property","default":"[]","fieldName":"controlValues"},{"name":"for","type":{"text":"String|HTMLElement"},"description":"Query selector of an `eox-map` (`String`, passed as an attribute or property)\\nor an `eox-map` DOM element (`HTMLElement`, passed as property)","default":"\\"eox-map\\"","fieldName":"for"},{"name":"layer","type":{"text":"string"},"description":"The layerid of the animated layer","default":"\\"\\"","fieldName":"layer"},{"name":"slider","type":{"text":"boolean"},"description":"Display a slider for the values","default":"false","fieldName":"slider"},{"name":"_originalParams","type":{"text":"object"},"description":"Original params of layer source","fieldName":"_originalParams"},{"name":"disable-play","type":{"text":"boolean"},"description":"Hides the play button if set","default":"false","fieldName":"disablePlay"},{"name":"current-step","type":{"text":"string"},"description":"The currently selected step","fieldName":"currentStep"},{"name":"_animationInterval","fieldName":"_animationInterval"},{"name":"_controlSource","fieldName":"_controlSource"},{"name":"_isAnimationPlaying","fieldName":"_isAnimationPlaying"},{"name":"_newStepIndex","type":{"text":"number"},"default":"0","fieldName":"_newStepIndex"},{"name":"_eoxMap","type":{"text":"HTMLElement |undefined"},"default":"undefined","fieldName":"_eoxMap"},{"name":"_width","type":{"text":"number"},"default":"300","fieldName":"_width"},{"name":"unstyled","type":{"text":"boolean"},"default":"false","fieldName":"unstyled"}],"superclass":{"name":"LitElement","package":"lit"},"tagName":"eox-timecontrol","customElement":true}],"exports":[{"kind":"js","name":"EOxTimeControl","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}},{"kind":"custom-element-definition","name":"eox-timecontrol","declaration":{"name":"EOxTimeControl","module":"elements/layercontrol/node_modules/@eox/timecontrol/src/main.js"}}]}]'),oJe={schemaVersion:rJe,readme:iJe,modules:sJe};function f1e(t){const e={h3:"h3",...LAe(),...t.components};return Cu.jsxs(Cu.Fragment,{children:[`
`,`
`,Cu.jsx(Eze,{isTemplate:!0}),`
`,Cu.jsx(Cze,{}),`
`,Cu.jsx(Sze,{}),`
`,Cu.jsx(Aze,{}),`
`,Cu.jsx(kze,{}),`
`,Cu.jsx(e.h3,{id:"api",children:"API"}),`
`,Cu.jsx(Tze,{}),`
`,Cu.jsx(Dze,{includePrimary:!1})]})}function aJe(t={}){const{wrapper:e}={...LAe(),...t.components};return e?Cu.jsx(e,{...t,children:Cu.jsx(f1e,{...t})}):f1e(t)}const lJe=`
  :root, :host, eox-chart {
    display: block;
  }
  #vis {
    width: 100%;
    height: 100%;
  }
`,uJe=`
  eox-chart {
    font-family: Roboto, sans-serif;
  }
`,cJe=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`,dJe=/("(?:[^\\"]|\\.)*")|[:,]/g;function _F(t,e={}){const n=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=n===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(o,a,l){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const u=JSON.stringify(o,i);if(u===void 0)return u;const d=r-a.length-l;if(u.length<=d){const c=u.replace(dJe,(f,h)=>h||`${f} `);if(c.length<=d)return c}if(i!=null&&(o=JSON.parse(u),i=void 0),typeof o=="object"&&o!==null){const c=a+n,f=[];let h=0,p,g;if(Array.isArray(o)){p="[",g="]";const{length:b}=o;for(;h<b;h++)f.push(s(o[h],c,h===b-1?0:1)||"null")}else{p="{",g="}";const b=Object.keys(o),{length:y}=b;for(;h<y;h++){const v=b[h],w=`${JSON.stringify(v)}: `,E=s(o[v],c,w.length+(h===y-1?0:1));E!==void 0&&f.push(w+E)}}if(f.length>0)return[p,n+f.join(`,
${c}`),g].join(`
${a}`)}return u}(t,"",0)}function ql(t,e,n){return t.fields=e||[],t.fname=n,t}function Os(t){return t==null?null:t.fname}function La(t){return t==null?null:t.fields}function Z3e(t){return t.length===1?fJe(t[0]):hJe(t)}const fJe=t=>function(e){return e[t]},hJe=t=>{const e=t.length;return function(n){for(let r=0;r<e;++r)n=n[t[r]];return n}};function ot(t){throw Error(t)}function Zd(t){const e=[],n=t.length;let r=null,i=0,s="",o,a,l;t=t+"";function u(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=t[a],l==="\\")s+=t.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||ot("Access path missing open bracket: "+t),i>0&&u(),i=0,o=a+1)}return i&&ot("Access path missing closing bracket: "+t),r&&ot("Access path missing closing quote: "+t),a>o&&(a++,u()),e}function Bu(t,e,n){const r=Zd(t);return t=r.length===1?r[0]:t,ql((n&&n.get||Z3e)(r),[t],e||t)}const vE=Bu("id"),Ma=ql(t=>t,[],"identity"),vp=ql(()=>0,[],"zero"),o1=ql(()=>1,[],"one"),zu=ql(()=>!0,[],"true"),ap=ql(()=>!1,[],"false");function pJe(t,e,n){const r=[e].concat([].slice.call(n));console[t].apply(console,r)}const K3e=0,CP=1,SP=2,J3e=3,Q3e=4;function AP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pJe,r=t||K3e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=CP&&n(e||"error","ERROR",arguments),this},warn(){return r>=SP&&n(e||"warn","WARN",arguments),this},info(){return r>=J3e&&n(e||"log","INFO",arguments),this},debug(){return r>=Q3e&&n(e||"log","DEBUG",arguments),this}}}var at=Array.isArray;function It(t){return t===Object(t)}const h1e=t=>t!=="__proto__";function a1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=mJe(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;l1(r,s,i[s],o)}return r},{})}function l1(t,e,n,r){if(!h1e(e))return;let i,s;if(It(n)&&!at(n)){s=It(t[e])?t[e]:t[e]={};for(i in n)r&&(r===!0||r[i])?l1(s,i,n[i]):h1e(i)&&(s[i]=n[i])}else t[e]=n}function mJe(t,e){if(t==null)return e;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return e.forEach(i),t.forEach(i),r}function Hr(t){return t[t.length-1]}function Ta(t){return t==null||t===""?null:+t}const eTe=t=>e=>t*Math.exp(e),tTe=t=>e=>Math.log(t*e),nTe=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),rTe=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Fk=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function PD(t,e,n,r){const i=n(t[0]),s=n(Hr(t)),o=(s-i)*e;return[r(i-o),r(s-o)]}function iTe(t,e){return PD(t,e,Ta,Ma)}function sTe(t,e){var n=Math.sign(t[0]);return PD(t,e,tTe(n),eTe(n))}function oTe(t,e,n){return PD(t,e,Fk(n),Fk(1/n))}function aTe(t,e,n){return PD(t,e,nTe(n),rTe(n))}function ND(t,e,n,r,i){const s=r(t[0]),o=r(Hr(t)),a=e!=null?r(e):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function kP(t,e,n){return ND(t,e,n,Ta,Ma)}function TP(t,e,n){const r=Math.sign(t[0]);return ND(t,e,n,tTe(r),eTe(r))}function Ok(t,e,n,r){return ND(t,e,n,Fk(r),Fk(1/r))}function DP(t,e,n,r){return ND(t,e,n,nTe(r),rTe(r))}function lTe(t){return 1+~~(new Date(t).getMonth()/3)}function uTe(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Pt(t){return t!=null?at(t)?t:[t]:[]}function cTe(t,e,n){let r=t[0],i=t[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-s),r+s]}function sr(t){return typeof t=="function"}const gJe="descending";function LP(t,e,n){n=n||{},e=Pt(e)||[];const r=[],i=[],s={},o=n.comparator||yJe;return Pt(t).forEach((a,l)=>{a!=null&&(r.push(e[l]===gJe?-1:1),i.push(a=sr(a)?a:Bu(a,null,n)),(La(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:ql(o(i,r),Object.keys(s))}const BD=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),yJe=(t,e)=>t.length===1?bJe(t[0],e[0]):vJe(t,e,t.length),bJe=(t,e)=>function(n,r){return BD(t(n),t(r))*e},vJe=(t,e,n)=>(e.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=t[a],o=BD(s(r),s(i));return o*e[a]});function Ia(t){return sr(t)?t:()=>t}function RP(t,e){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(e(r),n=null),t)}}function ir(t){for(let e,n,r=1,i=arguments.length;r<i;++r){e=arguments[r];for(n in e)t[n]=e[n]}return t}function zd(t,e){let n=0,r,i,s,o;if(t&&(r=t.length))if(e==null){for(i=t[n];n<r&&(i==null||i!==i);i=t[++n]);for(s=o=i;n<r;++n)i=t[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=e(t[n]);n<r&&(i==null||i!==i);i=e(t[++n]));for(s=o=i;n<r;++n)i=e(t[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function dTe(t,e){const n=t.length;let r=-1,i,s,o,a,l;if(e==null){for(;++r<n;)if(s=t[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=e(t[r],r,t),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e(t[r],r,t),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const xJe=Object.prototype.hasOwnProperty;function Yt(t,e){return xJe.call(t,e)}const gS={};function u1(t){let e={},n;function r(s){return Yt(e,s)&&e[s]!==gS}const i={size:0,empty:0,object:e,has:r,get(s){return r(s)?e[s]:void 0},set(s,o){return r(s)||(++i.size,e[s]===gS&&--i.empty),e[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,e[s]=gS),this},clear(){i.size=i.empty=0,i.object=e={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in e){const l=e[a];l!==gS&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=e=s}};return t&&Object.keys(t).forEach(s=>{i.set(s,t[s])}),i}function fTe(t,e,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=t[0],l=Hr(t),u;l<a&&(u=a,a=l,l=u),u=Math.abs(e-a);const d=Math.abs(l-e);return u<d&&u<=o?r:d<=o?i:s}function Lt(t,e,n){const r=t.prototype=Object.create(e.prototype);return Object.defineProperty(r,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),ir(r,n)}function vb(t,e,n,r){let i=e[0],s=e[e.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=t:i<t)&&(r?t<=s:t<s)}function gm(t){return typeof t=="boolean"}function zp(t){return Object.prototype.toString.call(t)==="[object Date]"}function hTe(t){return t&&sr(t[Symbol.iterator])}function ui(t){return typeof t=="number"}function pTe(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Nt(t){return typeof t=="string"}function FP(t,e,n){t&&(t=e?Pt(t).map(a=>a.replace(/\\(.)/g,"$1")):Pt(t));const r=t&&t.length,i=n&&n.get||Z3e,s=a=>i(e?[a]:Zd(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(t[0]);o=function(l){return""+a(l)}}else{const a=t.map(s);o=function(l){let u=""+a[0](l),d=0;for(;++d<r;)u+="|"+a[d](l);return u}}return ql(o,t,"key")}function mTe(t,e){const n=t[0],r=Hr(t),i=+e;return i?i===1?r:n+i*(r-n):n}const wJe=1e4;function gTe(t){t=+t||wJe;let e,n,r;const i=()=>{e={},n={},r=0},s=(o,a)=>(++r>t&&(n=e,e={},r=1),e[o]=a);return i(),{clear:i,has:o=>Yt(e,o)||Yt(n,o),get:o=>Yt(e,o)?e[o]:Yt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Yt(e,o)?e[o]=a:s(o,a)}}function yTe(t,e,n,r){const i=e.length,s=n.length;if(!s)return e;if(!i)return n;const o=r||new e.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<i;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}function qw(t,e){let n="";for(;--e>=0;)n+=t;return n}function bTe(t,e,n,r){const i=n||" ",s=t+"",o=e-s.length;return o<=0?s:r==="left"?qw(i,o)+s:r==="center"?qw(i,~~(o/2))+s+qw(i,Math.ceil(o/2)):s+qw(i,o)}function xE(t){return t&&Hr(t)-t[0]||0}function Tt(t){return at(t)?"["+t.map(Tt)+"]":It(t)||Nt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function OP(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const _Je=t=>ui(t)||zp(t)?t:Date.parse(t);function MP(t,e){return e=e||_Je,t==null||t===""?null:e(t)}function IP(t){return t==null||t===""?null:t+""}function Mc(t){const e={},n=t.length;for(let r=0;r<n;++r)e[t[r]]=!0;return e}function vTe(t,e,n,r){const i=r??"",s=t+"",o=s.length,a=Math.max(0,e-i.length);return o<=e?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function dp(t,e,n){if(t)if(e){const r=t.length;for(let i=0;i<r;++i){const s=e(t[i]);s&&n(s,i,t)}}else t.forEach(n)}var p1e={},EF={},CF=34,mw=10,SF=13;function xTe(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function EJe(t,e){var n=xTe(t);return function(r,i){return e(n(r),i,t)}}function m1e(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function xl(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function CJe(t){return t<0?"-"+xl(-t,6):t>9999?"+"+xl(t,6):xl(t,4)}function SJe(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":CJe(t.getUTCFullYear())+"-"+xl(t.getUTCMonth()+1,2)+"-"+xl(t.getUTCDate(),2)+(i?"T"+xl(e,2)+":"+xl(n,2)+":"+xl(r,2)+"."+xl(i,3)+"Z":r?"T"+xl(e,2)+":"+xl(n,2)+":"+xl(r,2)+"Z":n||e?"T"+xl(e,2)+":"+xl(n,2)+"Z":"")}function AJe(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(c,f){var h,p,g=i(c,function(b,y){if(h)return h(b,y-1);p=b,h=f?EJe(b,f):xTe(b)});return g.columns=p||[],g}function i(c,f){var h=[],p=c.length,g=0,b=0,y,v=p<=0,w=!1;c.charCodeAt(p-1)===mw&&--p,c.charCodeAt(p-1)===SF&&--p;function E(){if(v)return EF;if(w)return w=!1,p1e;var T,D=g,k;if(c.charCodeAt(D)===CF){for(;g++<p&&c.charCodeAt(g)!==CF||c.charCodeAt(++g)===CF;);return(T=g)>=p?v=!0:(k=c.charCodeAt(g++))===mw?w=!0:k===SF&&(w=!0,c.charCodeAt(g)===mw&&++g),c.slice(D+1,T-1).replace(/""/g,'"')}for(;g<p;){if((k=c.charCodeAt(T=g++))===mw)w=!0;else if(k===SF)w=!0,c.charCodeAt(g)===mw&&++g;else if(k!==n)continue;return c.slice(D,T)}return v=!0,c.slice(D,p)}for(;(y=E())!==EF;){for(var S=[];y!==p1e&&y!==EF;)S.push(y),y=E();f&&(S=f(S,b++))==null||h.push(S)}return h}function s(c,f){return c.map(function(h){return f.map(function(p){return d(h[p])}).join(t)})}function o(c,f){return f==null&&(f=m1e(c)),[f.map(d).join(t)].concat(s(c,f)).join(`
`)}function a(c,f){return f==null&&(f=m1e(c)),s(c,f).join(`
`)}function l(c){return c.map(u).join(`
`)}function u(c){return c.map(d).join(t)}function d(c){return c==null?"":c instanceof Date?SJe(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:d}}function kJe(t){return t}function TJe(t){if(t==null)return kJe;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var u=2,d=a.length,c=new Array(d);for(c[0]=(e+=a[0])*r+s,c[1]=(n+=a[1])*i+o;u<d;)c[u]=a[u],++u;return c}}function DJe(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function LJe(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return g1e(t,n)})}:g1e(t,e)}function g1e(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=wTe(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function wTe(t,e){var n=TJe(t.transform),r=t.arcs;function i(d,c){c.length&&c.pop();for(var f=r[d<0?~d:d],h=0,p=f.length;h<p;++h)c.push(n(f[h],h));d<0&&DJe(c,p)}function s(d){return n(d)}function o(d){for(var c=[],f=0,h=d.length;f<h;++f)i(d[f],c);return c.length<2&&c.push(c[0]),c}function a(d){for(var c=o(d);c.length<4;)c.push(c[0]);return c}function l(d){return d.map(a)}function u(d){var c=d.type,f;switch(c){case"GeometryCollection":return{type:c,geometries:d.geometries.map(u)};case"Point":f=s(d.coordinates);break;case"MultiPoint":f=d.coordinates.map(s);break;case"LineString":f=o(d.arcs);break;case"MultiLineString":f=d.arcs.map(o);break;case"Polygon":f=l(d.arcs);break;case"MultiPolygon":f=d.arcs.map(l);break;default:return null}return{type:c,coordinates:f}}return u(e)}function RJe(t,e){var n={},r={},i={},s=[],o=-1;e.forEach(function(u,d){var c=t.arcs[u<0?~u:u],f;c.length<3&&!c[1][0]&&!c[1][1]&&(f=e[++o],e[o]=u,e[d]=f)}),e.forEach(function(u){var d=a(u),c=d[0],f=d[1],h,p;if(h=i[c])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=c,p=i[c]){delete i[p.end];var b=p===h?h:p.concat(h);r[b.start=p.start]=i[b.end=h.end]=b}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=c]=i[h.end=f]=h});function a(u){var d=t.arcs[u<0?~u:u],c=d[0],f;return t.transform?(f=[0,0],d.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=d[d.length-1],u<0?[f,c]:[c,f]}function l(u,d){for(var c in u){var f=u[c];delete d[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),e.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function FJe(t){return wTe(t,OJe.apply(this,arguments))}function OJe(t,e,n){var r,i,s;if(arguments.length>1)r=MJe(t,e,n);else for(i=0,r=new Array(s=t.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:RJe(t,r)}}function MJe(t,e,n){var r=[],i=[],s;function o(c){var f=c<0?~c:c;(i[f]||(i[f]=[])).push({i:c,g:s})}function a(c){c.forEach(o)}function l(c){c.forEach(a)}function u(c){c.forEach(l)}function d(c){switch(s=c,c.type){case"GeometryCollection":c.geometries.forEach(d);break;case"LineString":a(c.arcs);break;case"MultiLineString":case"Polygon":l(c.arcs);break;case"MultiPolygon":u(c.arcs);break}}return d(e),i.forEach(n==null?function(c){r.push(c[0].i)}:function(c){n(c[0].g,c[c.length-1].g)&&r.push(c[0].i)}),r}const na="year",Il="quarter",Ra="month",yo="week",$l="date",ka="day",jd="dayofyear",fu="hours",hu="minutes",ju="seconds",Ic="milliseconds",$P=[na,Il,Ra,yo,$l,ka,jd,fu,hu,ju,Ic],AF=$P.reduce((t,e,n)=>(t[e]=1+n,t),{});function PP(t){const e=Pt(t).slice(),n={};return e.length||ot("Missing time unit."),e.forEach(i=>{Yt(AF,i)?n[i]=1:ot(`Invalid time unit: ${i}.`)}),(n[yo]||n[ka]?1:0)+(n[Il]||n[Ra]||n[$l]?1:0)+(n[jd]?1:0)>1&&ot(`Incompatible time units: ${t}`),e.sort((i,s)=>AF[i]-AF[s]),e}const IJe={[na]:"%Y ",[Il]:"Q%q ",[Ra]:"%b ",[$l]:"%d ",[yo]:"W%U ",[ka]:"%a ",[jd]:"%j ",[fu]:"%H:00",[hu]:"00:%M",[ju]:":%S",[Ic]:".%L",[`${na}-${Ra}`]:"%Y-%m ",[`${na}-${Ra}-${$l}`]:"%Y-%m-%d ",[`${fu}-${hu}`]:"%H:%M"};function _Te(t,e){const n=ir({},IJe,e),r=PP(t),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const Ig=new Date;function NP(t){return Ig.setFullYear(t),Ig.setMonth(0),Ig.setDate(1),Ig.setHours(0,0,0,0),Ig}function ETe(t){return STe(new Date(t))}function CTe(t){return mM(new Date(t))}function STe(t){return Kf.count(NP(t.getFullYear())-1,t)}function mM(t){return Kv.count(NP(t.getFullYear())-1,t)}function gM(t){return NP(t).getDay()}function $Je(t,e,n,r,i,s,o){if(0<=t&&t<100){const a=new Date(-1,e,n,r,i,s,o);return a.setFullYear(t),a}return new Date(t,e,n,r,i,s,o)}function ATe(t){return TTe(new Date(t))}function kTe(t){return yM(new Date(t))}function TTe(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Bp.count(e-1,t)}function yM(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Jv.count(e-1,t)}function bM(t){return Ig.setTime(Date.UTC(t,0,1)),Ig.getUTCDay()}function PJe(t,e,n,r,i,s,o){if(0<=t&&t<100){const a=new Date(Date.UTC(-1,e,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(t,e,n,r,i,s,o))}function DTe(t,e,n,r,i){const s=e||1,o=Hr(t),a=(y,v,w)=>(w=w||y,NJe(n[w],r[w],y===o&&s,v)),l=new Date,u=Mc(t),d=u[na]?a(na):Ia(2012),c=u[Ra]?a(Ra):u[Il]?a(Il):vp,f=u[yo]&&u[ka]?a(ka,1,yo+ka):u[yo]?a(yo,1):u[ka]?a(ka,1):u[$l]?a($l,1):u[jd]?a(jd,1):o1,h=u[fu]?a(fu):vp,p=u[hu]?a(hu):vp,g=u[ju]?a(ju):vp,b=u[Ic]?a(Ic):vp;return function(y){l.setTime(+y);const v=d(l);return i(v,c(l),f(l,v),h(l),p(l),g(l),b(l))}}function NJe(t,e,n,r){const i=n<=1?t:r?(s,o)=>r+n*Math.floor((t(s,o)-r)/n):(s,o)=>n*Math.floor(t(s,o)/n);return e?(s,o)=>e(i(s,o),o):i}function av(t,e,n){return e+t*7-(n+6)%7}const BJe={[na]:t=>t.getFullYear(),[Il]:t=>Math.floor(t.getMonth()/3),[Ra]:t=>t.getMonth(),[$l]:t=>t.getDate(),[fu]:t=>t.getHours(),[hu]:t=>t.getMinutes(),[ju]:t=>t.getSeconds(),[Ic]:t=>t.getMilliseconds(),[jd]:t=>STe(t),[yo]:t=>mM(t),[yo+ka]:(t,e)=>av(mM(t),t.getDay(),gM(e)),[ka]:(t,e)=>av(1,t.getDay(),gM(e))},zJe={[Il]:t=>3*t,[yo]:(t,e)=>av(t,0,gM(e))};function LTe(t,e){return DTe(t,e||1,BJe,zJe,$Je)}const jJe={[na]:t=>t.getUTCFullYear(),[Il]:t=>Math.floor(t.getUTCMonth()/3),[Ra]:t=>t.getUTCMonth(),[$l]:t=>t.getUTCDate(),[fu]:t=>t.getUTCHours(),[hu]:t=>t.getUTCMinutes(),[ju]:t=>t.getUTCSeconds(),[Ic]:t=>t.getUTCMilliseconds(),[jd]:t=>TTe(t),[yo]:t=>yM(t),[ka]:(t,e)=>av(1,t.getUTCDay(),bM(e)),[yo+ka]:(t,e)=>av(yM(t),t.getUTCDay(),bM(e))},UJe={[Il]:t=>3*t,[yo]:(t,e)=>av(t,0,bM(e))};function RTe(t,e){return DTe(t,e||1,jJe,UJe,PJe)}const qJe={[na]:Nd,[Il]:o2.every(3),[Ra]:o2,[yo]:Kv,[$l]:Kf,[ka]:Kf,[jd]:Kf,[fu]:kD,[hu]:SD,[ju]:Hf,[Ic]:tv},HJe={[na]:Bd,[Il]:a2.every(3),[Ra]:a2,[yo]:Jv,[$l]:Bp,[ka]:Bp,[jd]:Bp,[fu]:TD,[hu]:AD,[ju]:Hf,[Ic]:tv};function c1(t){return qJe[t]}function d1(t){return HJe[t]}function FTe(t,e,n){return t?t.offset(e,n):void 0}function OTe(t,e,n){return FTe(c1(t),e,n)}function MTe(t,e,n){return FTe(d1(t),e,n)}function ITe(t,e,n,r){return t?t.range(e,n,r):void 0}function $Te(t,e,n,r){return ITe(c1(t),e,n,r)}function PTe(t,e,n,r){return ITe(d1(t),e,n,r)}const Hw=1e3,Gw=Hw*60,Vw=Gw*60,zD=Vw*24,GJe=zD*7,y1e=zD*30,vM=zD*365,NTe=[na,Ra,$l,fu,hu,ju,Ic],Ww=NTe.slice(0,-1),Yw=Ww.slice(0,-1),Xw=Yw.slice(0,-1),VJe=Xw.slice(0,-1),WJe=[na,yo],b1e=[na,Ra],BTe=[na],gw=[[Ww,1,Hw],[Ww,5,5*Hw],[Ww,15,15*Hw],[Ww,30,30*Hw],[Yw,1,Gw],[Yw,5,5*Gw],[Yw,15,15*Gw],[Yw,30,30*Gw],[Xw,1,Vw],[Xw,3,3*Vw],[Xw,6,6*Vw],[Xw,12,12*Vw],[VJe,1,zD],[WJe,1,GJe],[b1e,1,y1e],[b1e,3,3*y1e],[BTe,1,vM]];function zTe(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(xE(e))/n;let i=dD(a=>a[2]).right(gw,r),s,o;return i===gw.length?(s=BTe,o=s0(e[0]/vM,e[1]/vM,n)):i?(i=gw[r/gw[i-1][2]<gw[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=NTe,o=Math.max(s0(e[0],e[1],n),1)),{units:s,step:o}}function Zw(t){const e={};return n=>e[n]||(e[n]=t(n))}function YJe(t,e){return n=>{const r=t(n),i=r.indexOf(e);if(i<0)return r;let s=XJe(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function XJe(t,e){let n=t.lastIndexOf("e"),r;if(n>0)return n;for(n=t.length;--n>e;)if(r=t.charCodeAt(n),r>=48&&r<=57)return n+1}function jTe(t){const e=Zw(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(r){const i=$be(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return YJe(e(i),e(".1f")(1)[1])}else return e(i)},formatSpan(r,i,s,o){o=$be(o??",f");const a=s0(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=sje(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=ije(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=rje(a))||(o.precision=u-(o.type==="%")*2);break}}return e(o)}}}let xM;UTe();function UTe(){return xM=jTe({format:oje,formatPrefix:aje})}function qTe(t){return jTe(nje(t))}function Mk(t){return arguments.length?xM=qTe(t):xM}function v1e(t,e,n){n=n||{},It(n)||ot(`Invalid time multi-format specifier: ${n}`);const r=e(ju),i=e(hu),s=e(fu),o=e($l),a=e(yo),l=e(Ra),u=e(Il),d=e(na),c=t(n[Ic]||".%L"),f=t(n[ju]||":%S"),h=t(n[hu]||"%I:%M"),p=t(n[fu]||"%I %p"),g=t(n[$l]||n[ka]||"%a %d"),b=t(n[yo]||"%b %d"),y=t(n[Ra]||"%B"),v=t(n[Il]||"%B"),w=t(n[na]||"%Y");return E=>(r(E)<E?c:i(E)<E?f:s(E)<E?h:o(E)<E?p:l(E)<E?a(E)<E?g:b:d(E)<E?u(E)<E?y:v:w)(E)}function HTe(t){const e=Zw(t.format),n=Zw(t.utcFormat);return{timeFormat:r=>Nt(r)?e(r):v1e(e,c1,r),utcFormat:r=>Nt(r)?n(r):v1e(n,d1,r),timeParse:Zw(t.parse),utcParse:Zw(t.utcParse)}}let wM;GTe();function GTe(){return wM=HTe({format:B$,parse:Ake,utcFormat:z$,utcParse:kke})}function VTe(t){return HTe(wke(t))}function c2(t){return arguments.length?wM=VTe(t):wM}const _M=(t,e)=>ir({},t,e);function WTe(t,e){const n=t?qTe(t):Mk(),r=e?VTe(e):c2();return _M(n,r)}function BP(t,e){const n=arguments.length;return n&&n!==2&&ot("defaultLocale expects either zero or two arguments."),n?_M(Mk(t),c2(e)):_M(Mk(),c2())}function ZJe(){return UTe(),GTe(),BP()}const KJe=/^(data:|([A-Za-z]+:)?\/\/)/,JJe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,QJe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,x1e="file://";function eQe(t,e){return n=>({options:n||{},sanitize:nQe,load:tQe,fileAccess:!!e,file:rQe(e),http:sQe(t)})}async function tQe(t,e){const n=await this.sanitize(t,e),r=n.href;return n.localFile?this.file(r):this.http(r,e)}async function nQe(t,e){e=ir({},this.options,e);const n=this.fileAccess,r={href:null};let i,s,o;const a=JJe.test(t.replace(QJe,""));(t==null||typeof t!="string"||!a)&&ot("Sanitize failure, invalid URI: "+Tt(t));const l=KJe.test(t);return(o=e.baseURL)&&!l&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),s=(i=t.startsWith(x1e))||e.mode==="file"||e.mode!=="http"&&!l&&n,i?t=t.slice(x1e.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(r,"localFile",{value:!!s}),r.href=t,e.target&&(r.target=e.target+""),e.rel&&(r.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(r.crossOrigin=e.crossOrigin+""),r}function rQe(t){return t?e=>new Promise((n,r)=>{t.readFile(e,(i,s)=>{i?r(i):n(s)})}):iQe}async function iQe(){ot("No file system access.")}function sQe(t){return t?async function(e,n){const r=ir({},this.options.http,n),i=n&&n.response,s=await t(e,r);return s.ok?sr(s[i])?s[i]():s.text():ot(s.status+""+s.statusText)}:oQe}async function oQe(){ot("No HTTP fetch method available.")}const aQe=t=>t!=null&&t===t,lQe=t=>t==="true"||t==="false"||t===!0||t===!1,uQe=t=>!Number.isNaN(Date.parse(t)),YTe=t=>!Number.isNaN(+t)&&!(t instanceof Date),cQe=t=>YTe(t)&&Number.isInteger(+t),EM={boolean:OP,integer:Ta,number:Ta,date:MP,string:IP,unknown:Ma},yS=[lQe,cQe,YTe,uQe],dQe=["boolean","integer","number","date"];function XTe(t,e){if(!t||!t.length)return"unknown";const n=t.length,r=yS.length,i=yS.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=e?t[s][e]:t[s],a=0;a<r;++a)if(i[a]&&aQe(l)&&!yS[a](l)&&(i[a]=0,++o,o===yS.length))return"string";return dQe[i.reduce((s,o)=>s===0?o:s,0)-1]}function ZTe(t,e){return e.reduce((n,r)=>(n[r]=XTe(t,r),n),{})}function w1e(t){const e=function(n,r){const i={delimiter:t};return zP(n,r?ir(r,i):i)};return e.responseType="text",e}function zP(t,e){return e.header&&(t=e.header.map(Tt).join(e.delimiter)+`
`+t),AJe(e.delimiter).parse(t+"")}zP.responseType="text";function fQe(t){return typeof Buffer=="function"&&sr(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function jP(t,e){const n=e&&e.property?Bu(e.property):Ma;return It(t)&&!fQe(t)?hQe(n(t),e):n(JSON.parse(t))}jP.responseType="json";function hQe(t,e){return!at(t)&&hTe(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const pQe={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function KTe(t,e){let n,r,i,s;return t=jP(t,e),e&&e.feature?(n=LJe,i=e.feature):e&&e.mesh?(n=FJe,i=e.mesh,s=pQe[e.filter]):ot("Missing TopoJSON feature or mesh parameter."),r=(r=t.objects[i])?n(t,r,s):ot("Invalid TopoJSON object: "+i),r&&r.features||[r]}KTe.responseType="json";const AA={dsv:zP,csv:w1e(","),tsv:w1e("	"),json:jP,topojson:KTe};function UP(t,e){return arguments.length>1?(AA[t]=e,this):Yt(AA,t)?AA[t]:null}function JTe(t){const e=UP(t);return e&&e.responseType||"text"}function QTe(t,e,n,r){e=e||{};const i=UP(e.type||"json");return i||ot("Unknown data format type: "+e.type),t=i(t,e),e.parse&&mQe(t,e.parse,n,r),Yt(t,"columns")&&delete t.columns,t}function mQe(t,e,n,r){if(!t.length)return;const i=c2();n=n||i.timeParse,r=r||i.utcParse;let s=t.columns||Object.keys(t[0]),o,a,l,u,d,c;e==="auto"&&(e=ZTe(t,s)),s=Object.keys(e);const f=s.map(h=>{const p=e[h];let g,b;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),b=g[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(g[0]==="utc"?r:n)(b);if(!EM[p])throw Error("Illegal format pattern: "+h+":"+p);return EM[p]});for(l=0,d=t.length,c=s.length;l<d;++l)for(o=t[l],u=0;u<c;++u)a=s[u],o[a]=f[u](o[a])}const jD=eQe(typeof fetch<"u"&&fetch,null);function UD(t){const e=t||Ma,n=[],r={};return n.add=i=>{const s=e(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=e(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function kA(t,e){try{await e(t)}catch(n){t.error(n)}}const eDe=Symbol("vega_id");let gQe=1;function qD(t){return!!(t&&wn(t))}function wn(t){return t[eDe]}function tDe(t,e){return t[eDe]=e,t}function vi(t){const e=t===Object(t)?t:{data:t};return wn(e)?e:tDe(e,gQe++)}function qP(t){return HD(t,vi({}))}function HD(t,e){for(const n in t)e[n]=t[n];return e}function nDe(t,e){return tDe(e,wn(t))}function N0(t,e){return t?e?(n,r)=>t(n,r)||wn(e(n))-wn(e(r)):(n,r)=>t(n,r)||wn(n)-wn(r):null}function rDe(t){return t&&t.constructor===B0}function B0(){const t=[],e=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:B0,insert(a){const l=Pt(a),u=l.length;for(let d=0;d<u;++d)t.push(l[d]);return this},remove(a){const l=sr(a)?r:e,u=Pt(a),d=u.length;for(let c=0;c<d;++c)l.push(u[c]);return this},modify(a,l,u){const d={field:l,value:Ia(u)};return sr(a)?(d.filter=a,i.push(d)):(d.tuple=a,n.push(d)),this},encode(a,l){return sr(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},d={};let c,f,h,p,g,b;for(c=0,f=l.length;c<f;++c)u[wn(l[c])]=1;for(c=0,f=e.length;c<f;++c)g=e[c],u[wn(g)]=-1;for(c=0,f=r.length;c<f;++c)p=r[c],l.forEach(v=>{p(v)&&(u[wn(v)]=-1)});for(c=0,f=t.length;c<f;++c)g=t[c],b=wn(g),u[b]?u[b]=1:a.add.push(vi(t[c]));for(c=0,f=l.length;c<f;++c)g=l[c],u[wn(g)]<0&&a.rem.push(g);function y(v,w,E){E?v[w]=E(v):a.encode=w,o||(d[wn(v)]=v)}for(c=0,f=n.length;c<f;++c)h=n[c],g=h.tuple,p=h.field,b=u[wn(g)],b>0&&(y(g,p,h.value),a.modifies(p));for(c=0,f=i.length;c<f;++c)h=i[c],p=h.filter,l.forEach(v=>{p(v)&&u[wn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=e.length||r.length?l.filter(v=>u[wn(v)]>0):l.slice();else for(b in d)a.mod.push(d[b]);return(s||s==null&&(e.length||r.length))&&a.clean(!0),a}}}const TA="_:mod:_";function GD(){Object.defineProperty(this,TA,{writable:!0,value:{}})}GD.prototype={set(t,e,n,r){const i=this,s=i[t],o=i[TA];return e!=null&&e>=0?(s[e]!==n||r)&&(s[e]=n,o[e+":"+t]=-1,o[t]=-1):(s!==n||r)&&(i[t]=n,o[t]=at(n)?1+n.length:-1),i},modified(t,e){const n=this[TA];if(arguments.length){if(at(t)){for(let r=0;r<t.length;++r)if(n[t[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[TA]={},this}};let yQe=0;const bQe="pulse",vQe=new GD,xQe=1,wQe=2;function Hi(t,e,n,r){this.id=++yQe,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function _1e(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Hi.prototype={targets(){return this._targets||(this._targets=UD(vE))},set(t){return this.value!==t?(this.value=t,1):0},skip:_1e(xQe),modified:_1e(wQe),parameters(t,e,n){e=e!==!1;const r=this._argval=this._argval||new GD,i=this._argops=this._argops||[],s=[];let o,a,l,u;const d=(c,f,h)=>{h instanceof Hi?(h!==this&&(e&&h.targets().add(this),s.push(h)),i.push({op:h,name:c,index:f})):r.set(c,f,h)};for(o in t)if(a=t[o],o===bQe)Pt(a).forEach(c=>{c instanceof Hi?c!==this&&(c.targets().add(this),s.push(c)):ot("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)d(o,u,a[u]);else d(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(t){const e=this._argval||vQe,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===t,e.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,r,i;if(t)for(e=0,n=t.length;e<n;++e)r=t[e],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function _Qe(t,e,n,r){let i=1,s;return t instanceof Hi?s=t:t&&t.prototype instanceof Hi?s=new t:sr(t)?s=new Hi(null,t):(i=0,s=new Hi(t,e)),this.rank(s),i&&(r=n,n=e),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function EQe(t,e){const n=t.rank,r=e.length;for(let i=0;i<r;++i)if(n<e[i].rank){this.rerank(t);return}}let CQe=0;function VD(t,e,n){this.id=++CQe,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function lp(t,e,n){return new VD(t,e,n)}VD.prototype={_filter:zu,_apply:Ma,targets(){return this._targets||(this._targets=UD(vE))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=lp(t);return this.targets().add(e),e},apply(t){const e=lp(null,t);return this.targets().add(e),e},merge(){const t=lp();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=lp();return this.targets().add(lp(null,null,RP(t,n=>{const r=n.dataflow;e.receive(n),r&&r.run&&r.run()}))),e},between(t,e){let n=!1;return t.targets().add(lp(null,null,()=>n=!0)),e.targets().add(lp(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=zu,this._targets=null}};function SQe(t,e,n,r){const i=this,s=lp(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(d){i.error(d)}finally{i.run()}};let a;typeof t=="string"&&typeof document<"u"?a=document.querySelectorAll(t):a=Pt(t);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,o);return s}function AQe(t,e){const n=this.locale();return QTe(t,e,n.timeParse,n.utcParse)}function kQe(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function TQe(t,e){const n=this;let r=0,i;try{i=await n.loader().load(t,{context:"dataflow",response:JTe(e&&e.type)});try{i=n.parse(i,e)}catch(s){r=-2,n.warn("Data ingestion failed",t,s)}}catch(s){r=-1,n.warn("Loading failed",t,s)}return{data:i,status:r}}async function DQe(t,e,n){const r=this,i=r._pending||LQe(r);i.requests+=1;const s=await r.request(e,n);return r.pulse(t,r.changeset().remove(zu).insert(s.data||[])),i.done(),s}function LQe(t){let e;const n=new Promise(r=>e=r);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}const RQe={skip:!0};function FQe(t,e,n,r,i){return(t instanceof Hi?MQe:OQe)(this,t,e,n,r,i),this}function OQe(t,e,n,r,i,s){const o=ir({},s,RQe);let a,l;sr(n)||(n=Ia(n)),r===void 0?a=u=>t.touch(n(u)):sr(r)?(l=new Hi(null,r,i,!1),a=u=>{l.evaluate(u);const d=n(u),c=l.value;rDe(c)?t.pulse(d,c,s):t.update(d,c,o)}):a=u=>t.update(n(u),r,o),e.apply(a)}function MQe(t,e,n,r,i,s){if(r===void 0)e.targets().add(n);else{const o=s||{},a=new Hi(null,IQe(n,r),i,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),t.connect(n,[a]))}}function IQe(t,e){return e=sr(e)?e:Ia(e),t?function(n,r){const i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}function $Qe(t){t.rank=++this._rank}function PQe(t){const e=[t];let n,r,i;for(;e.length;)if(this.rank(n=e.pop()),r=n._targets)for(i=r.length;--i>=0;)e.push(n=r[i]),n===t&&ot("Cycle detected in dataflow graph.")}const Ik={},yd=1,fp=2,Of=4,NQe=yd|fp,E1e=yd|Of,qy=yd|fp|Of,C1e=8,yw=16,S1e=32,A1e=64;function jp(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function kF(t,e){const n=[];return dp(t,e,r=>n.push(r)),n}function k1e(t,e){const n={};return t.visit(e,r=>{n[wn(r)]=1}),r=>n[wn(r)]?null:r}function bS(t,e){return t?(n,r)=>t(n,r)&&e(n,r):e}jp.prototype={StopPropagation:Ik,ADD:yd,REM:fp,MOD:Of,ADD_REM:NQe,ADD_MOD:E1e,ALL:qy,REFLOW:C1e,SOURCE:yw,NO_SOURCE:S1e,NO_FIELDS:A1e,fork(t){return new jp(this.dataflow).init(this,t)},clone(){const t=this.fork(qy);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(qy|yw)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new jp(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&A1e)&&(n.fields=t.fields),e&yd?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&fp?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&Of?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&S1e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||qy;return e&yd&&this.add.length||e&fp&&this.rem.length||e&Of&&this.mod.length},reflow(t){if(t)return this.fork(qy).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(Of,k1e(this,yd))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return at(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?at(t)?t.some(r=>n[r]):n[t]:!!n:!1},filter(t,e){const n=this;return t&yd&&(n.addF=bS(n.addF,e)),t&fp&&(n.remF=bS(n.remF,e)),t&Of&&(n.modF=bS(n.modF,e)),t&yw&&(n.srcF=bS(n.srcF,e)),n},materialize(t){t=t||qy;const e=this;return t&yd&&e.addF&&(e.add=kF(e.add,e.addF),e.addF=null),t&fp&&e.remF&&(e.rem=kF(e.rem,e.remF),e.remF=null),t&Of&&e.modF&&(e.mod=kF(e.mod,e.modF),e.modF=null),t&yw&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,r=e;if(t&yw)return dp(n.source,n.srcF,r),n;t&yd&&dp(n.add,n.addF,r),t&fp&&dp(n.rem,n.remF,r),t&Of&&dp(n.mod,n.modF,r);const i=n.source;if(t&C1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?dp(i,k1e(n,E1e),r):dp(i,n.srcF,r))}return n}};function HP(t,e,n,r){const i=this;let s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===e){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Lt(HP,jp,{fork(t){const e=new jp(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?at(t)?t.some(r=>n[r]):n[t]:0},filter(){ot("MultiPulse does not support filtering.")},materialize(){ot("MultiPulse does not support materialization.")},visit(t,e){const n=this,r=n.pulses,i=r.length;let s=0;if(t&n.SOURCE)for(;s<i;++s)r[s].visit(t,e);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(t,e);return n}});async function BQe(t,e,n){const r=this,i=[];if(r._pulse)return iDe(r);if(r._pending&&await r._pending,e&&await kA(r,e),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new jp(r,s,t),r._touched.forEach(d=>r._enqueue(d,!0)),r._touched=UD(vE);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,t)),l.then?l=await l:l.async&&(i.push(l.async),l=Ik),l!==Ik&&a._targets&&a._targets.forEach(d=>r._enqueue(d)),++o}}catch(d){r._heap.clear(),u=d}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const d=r._postrun.sort((c,f)=>f.priority-c.priority);r._postrun=[];for(let c=0;c<d.length;++c)await kA(r,d[c].callback)}return n&&await kA(r,n),i.length&&Promise.all(i).then(d=>r.runAsync(null,()=>{d.forEach(c=>{try{c(r)}catch(f){r.error(f)}})})),r}async function zQe(t,e,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(r,r),this._running}function jQe(t,e,n){return this._pulse?iDe(this):(this.evaluate(t,e,n),this)}function UQe(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}}function iDe(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function qQe(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function HQe(t,e){const n=t.source,r=this._clock;return n&&at(n)?new HP(this,r,n.map(i=>i.pulse),e):this._input[t.id]||GQe(this._pulse,n&&n.pulse)}function GQe(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==Ik&&(t.source=e.source),t)}const GP={skip:!1,force:!1};function VQe(t,e){const n=e||GP;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function WQe(t,e,n){const r=n||GP;return(t.set(e)||r.force)&&this.touch(t,r),this}function YQe(t,e,n){this.touch(t,n||GP);const r=new jp(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this}function XQe(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),sDe(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let r;return e.length?(r=e[0],e[0]=n,ZQe(e,0,t)):r=n,r}}}function sDe(t,e,n,r){let i,s;const o=t[n];for(;n>e;){if(s=n-1>>1,i=t[s],r(o,i)<0){t[n]=i,n=s;continue}break}return t[n]=o}function ZQe(t,e,n){const r=e,i=t.length,s=t[e];let o=(e<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(t[o],t[a])>=0&&(o=a),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=s,sDe(t,r,e,n)}function Fb(){this.logger(AP()),this.logLevel(CP),this._clock=0,this._rank=0,this._locale=BP();try{this._loader=jD()}catch{}this._touched=UD(vE),this._input={},this._pulse=null,this._heap=XQe((t,e)=>t.qrank-e.qrank),this._postrun=[]}function bw(t){return function(){return this._log[t].apply(this,arguments)}}Fb.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:bw("error"),warn:bw("warn"),info:bw("info"),debug:bw("debug"),logLevel:bw("level"),cleanThreshold:1e4,add:_Qe,connect:EQe,rank:$Qe,rerank:PQe,pulse:YQe,touch:VQe,update:WQe,changeset:B0,ingest:kQe,parse:AQe,preload:DQe,request:TQe,events:SQe,on:FQe,evaluate:BQe,run:jQe,runAsync:zQe,runAfter:UQe,_enqueue:qQe,_getPulse:HQe};function rt(t,e){Hi.call(this,t,null,e)}Lt(rt,Hi,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const lv={};function oDe(t){const e=aDe(t);return e&&e.Definition||null}function aDe(t){return t=t&&t.toLowerCase(),Yt(lv,t)?lv[t]:null}function*lDe(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)r=e(r,++n,t),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function VP(t,e,n){const r=Float64Array.from(lDe(t,n));return r.sort(Y_),e.map(i=>lke(r,i))}function WP(t,e){return VP(t,[.25,.5,.75],e)}function YP(t,e){const n=t.length,r=BUe(t,e),i=WP(t,e),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function uDe(t){const e=t.maxbins||20,n=t.base||10,r=Math.log(n),i=t.divide||[5,2];let s=t.extent[0],o=t.extent[1],a,l,u,d,c,f;const h=t.span||o-s||Math.abs(s)||1;if(t.step)a=t.step;else if(t.steps){for(d=h/e,c=0,f=t.steps.length;c<f&&t.steps[c]<d;++c);a=t.steps[Math.max(0,c-1)]}else{for(l=Math.ceil(Math.log(e)/r),u=t.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>e;)a*=n;for(c=0,f=i.length;c<f;++c)d=a/i[c],d>=u&&h/d<=e&&(a=d)}d=Math.log(a);const p=d>=0?0:~~(-d/r)+1,g=Math.pow(n,-p-1);return(t.nice||t.nice===void 0)&&(d=Math.floor(s/a+g)*a,s=s<d?d-a:d,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Uu=Math.random;function KQe(t){Uu=t}function cDe(t,e,n,r){if(!t.length)return[void 0,void 0];const i=Float64Array.from(lDe(t,r)),s=i.length,o=e;let a,l,u,d;for(u=0,d=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(Uu()*s)];d[u]=a/s}return d.sort(Y_),[rM(d,n/2),rM(d,1-n/2)]}function dDe(t,e,n,r){r=r||(f=>f);const i=t.length,s=new Float64Array(i);let o=0,a=1,l=r(t[0]),u=l,d=l+e,c;for(;a<i;++a){if(c=r(t[a]),c>=d){for(u=(l+u)/2;o<a;++o)s[o]=u;d=c+e,l=c}u=c}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?JQe(s,e+e/4):s}function JQe(t,e){const n=t.length;let r=0,i=1,s,o;for(;t[r]===t[i];)++i;for(;i<n;){for(s=i+1;t[i]===t[s];)++s;if(t[i]-t[i-1]<e){for(o=i+(r+s-i-i>>1);o<i;)t[o++]=t[i];for(;o>i;)t[o--]=t[r]}r=i,i=s}return t}function QQe(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function eet(t,e){e==null&&(e=t,t=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Uu())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(t).max(e)}const fDe=Math.sqrt(2*Math.PI),tet=Math.SQRT2;let vw=NaN;function WD(t,e){t=t||0,e=e??1;let n=0,r=0,i,s;if(vw===vw)n=vw,vw=NaN;else{do n=Uu()*2-1,r=Uu()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,vw=r*s}return t+n*e}function XP(t,e,n){n=n??1;const r=(t-(e||0))/n;return Math.exp(-.5*r*r)/(n*fDe)}function YD(t,e,n){e=e||0,n=n??1;const r=(t-e)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function XD(t,e,n){return t<0||t>1?NaN:(e||0)+(n??1)*tet*net(2*t-1)}function net(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function ZP(t,e){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>WD(n,r),pdf:s=>XP(s,n,r),cdf:s=>YD(s,n,r),icdf:s=>XD(s,n,r)};return i.mean(t).stdev(e)}function KP(t,e){const n=ZP();let r=0;const i={data(s){return arguments.length?(t=s,r=s?s.length:0,i.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=YP(t)),i):e},sample(){return t[~~(Uu()*r)]+e*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-t[a])/e);return o/e/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-t[a])/e);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(t)}function JP(t,e){return t=t||0,e=e??1,Math.exp(t+WD()*e)}function QP(t,e,n){if(t<=0)return 0;e=e||0,n=n??1;const r=(Math.log(t)-e)/n;return Math.exp(-.5*r*r)/(n*fDe*t)}function e8(t,e,n){return YD(Math.log(t),e,n)}function t8(t,e,n){return Math.exp(XD(t,e,n))}function hDe(t,e){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>JP(n,r),pdf:s=>QP(s,n,r),cdf:s=>e8(s,n,r),icdf:s=>t8(s,n,r)};return i.mean(t).stdev(e)}function pDe(t,e){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(e=o||[]),s):e},distributions(o){return arguments.length?(o?(n=o.length,t=o):(n=0,t=[]),s.weights(e)):t},sample(){const o=Uu();let a=t[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=t[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*t[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*t[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function n8(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*Uu()}function r8(t,e,n){return n==null&&(n=e??1,e=0),t>=e&&t<=n?1/(n-e):0}function i8(t,e,n){return n==null&&(n=e??1,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function s8(t,e,n){return n==null&&(n=e??1,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function mDe(t,e){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>n8(n,r),pdf:s=>r8(s,n,r),cdf:s=>i8(s,n,r),icdf:s=>s8(s,n,r)};return e==null&&(e=t??1,t=0),i.min(t).max(e)}function o8(t,e,n){let r=0,i=0;for(const s of t){const o=n(s);e(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function wE(t,e,n,r){const i=r-t*t,s=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-s*t,s]}function ZD(t,e,n,r){t=t.filter(h=>{let p=e(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&t.sort((h,p)=>e(h)-e(p));const i=t.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,d,c,f;for(f of t)s[a]=d=+e(f),o[a]=c=+n(f),++a,l+=(d-l)/a,u+=(c-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function _E(t,e,n,r){let i=-1,s,o;for(const a of t)s=e(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function f1(t,e,n,r,i){let s=0,o=0;return _E(t,e,n,(a,l)=>{const u=l-i(a),d=l-r;s+=u*u,o+=d*d}),1-s/o}function a8(t,e,n){let r=0,i=0,s=0,o=0,a=0;_E(t,e,n,(d,c)=>{++a,r+=(d-r)/a,i+=(c-i)/a,s+=(d*c-s)/a,o+=(d*d-o)/a});const l=wE(r,i,s,o),u=d=>l[0]+l[1]*d;return{coef:l,predict:u,rSquared:f1(t,e,n,i,u)}}function gDe(t,e,n){let r=0,i=0,s=0,o=0,a=0;_E(t,e,n,(d,c)=>{++a,d=Math.log(d),r+=(d-r)/a,i+=(c-i)/a,s+=(d*c-s)/a,o+=(d*d-o)/a});const l=wE(r,i,s,o),u=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:u,rSquared:f1(t,e,n,i,u)}}function yDe(t,e,n){const[r,i,s,o]=ZD(t,e,n);let a=0,l=0,u=0,d=0,c=0,f,h,p;_E(t,e,n,(v,w)=>{f=r[c++],h=Math.log(w),p=f*w,a+=(w*h-a)/c,l+=(p-l)/c,u+=(p*h-u)/c,d+=(f*p-d)/c});const[g,b]=wE(l/o,a/o,u/o,d/o),y=v=>Math.exp(g+b*(v-s));return{coef:[Math.exp(g-b*s),b],predict:y,rSquared:f1(t,e,n,o,y)}}function bDe(t,e,n){let r=0,i=0,s=0,o=0,a=0,l=0;_E(t,e,n,(c,f)=>{const h=Math.log(c),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=wE(r,i,s,o),d=c=>u[0]*Math.pow(c,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:d,rSquared:f1(t,e,n,a,d)}}function l8(t,e,n){const[r,i,s,o]=ZD(t,e,n),a=r.length;let l=0,u=0,d=0,c=0,f=0,h,p,g,b;for(h=0;h<a;)p=r[h],g=i[h++],b=p*p,l+=(b-l)/h,u+=(b*p-u)/h,d+=(b*b-d)/h,c+=(p*g-c)/h,f+=(b*g-f)/h;const y=d-l*l,v=l*y-u*u,w=(f*l-c*u)/v,E=(c*y-f*u)/v,S=-w*l,T=D=>(D=D-s,w*D*D+E*D+S+o);return{coef:[S-E*s+w*s*s+o,E-2*w*s,w],predict:T,rSquared:f1(t,e,n,o,T)}}function vDe(t,e,n,r){if(r===0)return o8(t,e,n);if(r===1)return a8(t,e,n);if(r===2)return l8(t,e,n);const[i,s,o,a]=ZD(t,e,n),l=i.length,u=[],d=[],c=r+1;let f,h,p,g,b;for(f=0;f<c;++f){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],f)*s[p];for(u.push(g),b=new Float64Array(c),h=0;h<c;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],f+h);b[h]=g}d.push(b)}d.push(u);const y=iet(d),v=w=>{w-=o;let E=a+y[0]+y[1]*w+y[2]*w*w;for(f=3;f<c;++f)E+=y[f]*Math.pow(w,f);return E};return{coef:ret(c,y,-o,a),predict:v,rSquared:f1(t,e,n,a,v)}}function ret(t,e,n,r){const i=Array(t);let s,o,a,l;for(s=0;s<t;++s)i[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function iet(t){const e=t.length-1,n=[];let r,i,s,o,a;for(r=0;r<e;++r){for(o=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(s=r;s<e+1;++s)a=t[s][r],t[s][r]=t[s][o],t[s][o]=a;for(i=r+1;i<e;++i)for(s=e;s>=r;s--)t[s][i]-=t[s][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(a=0,s=i+1;s<e;++s)a+=t[s][i]*n[s];n[i]=(t[e][i]-a)/t[i][i]}return n}const T1e=2,D1e=1e-12;function xDe(t,e,n,r){const[i,s,o,a]=ZD(t,e,n,!0),l=i.length,u=Math.max(2,~~(r*l)),d=new Float64Array(l),c=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=T1e;){const p=[0,u-1];for(let b=0;b<l;++b){const y=i[b],v=p[0],w=p[1],E=y-i[v]>i[w]-y?v:w;let S=0,T=0,D=0,k=0,R=0;const O=1/Math.abs(i[E]-y||1);for(let L=v;L<=w;++L){const I=i[L],$=s[L],U=set(Math.abs(y-I)*O)*f[L],q=I*U;S+=U,T+=q,D+=$*U,k+=$*q,R+=I*q}const[B,K]=wE(T/S,D/S,k/S,R/S);d[b]=B+K*y,c[b]=Math.abs(s[b]-d[b]),oet(i,b+1,p)}if(h===T1e)break;const g=uke(c);if(Math.abs(g)<D1e)break;for(let b=0,y,v;b<l;++b)y=c[b]/(6*g),f[b]=y>=1?D1e:(v=1-y*y)*v}return aet(i,d,o,a)}function set(t){return(t=1-t*t*t)*t*t}function oet(t,e,n){const r=t[e];let i=n[0],s=n[1]+1;if(!(s>=t.length))for(;e>i&&t[s]-r<=r-t[i];)n[0]=++i,n[1]=s,++s}function aet(t,e,n,r){const i=t.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=t[o]+n,l[0]===u?l[1]+=(e[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,e[o]],s.push(l));return l[1]+=r,s}const uet=.5*Math.PI/180;function KD(t,e,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,t(g)],s=e[0],o=e[1],a=o-s,l=a/r,u=[i(s)],d=[];if(n===r){for(let g=1;g<r;++g)u.push(i(s+g/n*a));return u.push(i(o)),u}else{d.push(i(o));for(let g=n;--g>0;)d.push(i(s+g/n*a))}let c=u[0],f=d[d.length-1];const h=1/a,p=cet(c[1],d);for(;f;){const g=i((c[0]+f[0])/2);g[0]-c[0]>=l&&det(c,g,f,h,p)>uet?d.push(g):(c=f,u.push(f),d.pop()),f=d[d.length-1]}return u}function cet(t,e){let n=t,r=t;const i=e.length;for(let s=0;s<i;++s){const o=e[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function det(t,e,n,r,i){const s=Math.atan2(i*(n[1]-t[1]),r*(n[0]-t[0])),o=Math.atan2(i*(e[1]-t[1]),r*(e[0]-t[0]));return Math.abs(s-o)}function fet(t){return e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}}function CM(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:fet(t)}function wDe(t,e,n){return n||t+(e?"_"+e:"")}const TF=()=>{},het={init:TF,add:TF,rem:TF,idx:0},d2={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.valid?t.sum:void 0,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(t,e)=>{t.exp=0,t.exp_r=e},value:t=>t.valid?t.exp*(1-t.exp_r)/(1-t.exp_r**t.valid):void 0,add:(t,e)=>t.exp=t.exp_r*t.exp+e,rem:(t,e)=>t.exp=(t.exp-e/t.exp_r**(t.valid-1))/t.exp_r},exponentialb:{value:t=>t.valid?t.exp*(1-t.exp_r):void 0,req:["exponential"],idx:1}},EE=Object.keys(d2).filter(t=>t!=="__count__");function pet(t,e){return(n,r)=>ir({name:t,aggregate_param:r,out:n||t},het,e)}[...EE,"__count__"].forEach(t=>{d2[t]=pet(t,d2[t])});function _De(t,e,n){return d2[t](n,e)}function EDe(t,e){return t.idx-e.idx}function met(t){const e={};t.forEach(r=>e[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{e[i]||n(e[i]=d2[i]())})};return t.forEach(n),Object.values(e).sort(EDe)}function get(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.aggregate_param==null?t.init(this):t.init(this,t.aggregate_param))}function yet(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function bet(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function vet(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function CDe(t,e){const n=e||Ma,r=met(t),i=t.slice().sort(EDe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=get,s.prototype.add=yet,s.prototype.rem=bet,s.prototype.set=vet,s.prototype.get=n,s.fields=t.map(o=>o.out),s}function u8(t){this._key=t?Bu(t):wn,this.reset()}const ua=u8.prototype;ua.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ua.add=function(t){this._add.push(t)};ua.rem=function(t){this._rem.push(t)};ua.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,r=t.length,i=e.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(e[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=t[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};ua.distinct=function(t){const e=this.values(),n={};let r=e.length,i=0,s;for(;--r>=0;)s=t(e[r])+"",Yt(n,s)||(n[s]=1,++i);return i};ua.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=dTe(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};ua.argmin=function(t){return this.extent(t)[0]||{}};ua.argmax=function(t){return this.extent(t)[1]||{}};ua.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};ua.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};ua.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=WP(this.values(),t),this._get=t),this._q};ua.q1=function(t){return this.quartile(t)[0]};ua.q2=function(t){return this.quartile(t)[1]};ua.q3=function(t){return this.quartile(t)[2]};ua.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=cDe(this.values(),1e3,.05,t),this._get=t),this._ci};ua.ci0=function(t){return this.ci(t)[0]};ua.ci1=function(t){return this.ci(t)[1]};function Kp(t){rt.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Kp.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:EE},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Lt(Kp,rt,{transform(t,e){const n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):Object.create(null),e.visit(e.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const t=this,e=t.value,n=t._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,d,c;for(l in a)for(d=a[l].tuple,u=0;u<i;++u)r[u][c=d[n[u]]]=c}s(t._prev),s(e);function o(a,l,u){const d=n[u],c=r[u++];for(const f in c){const h=a?a+"|"+f:f;l[d]=c[f],u<i?o(h,l,u):e[h]||t.cell(h,l)}}o("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],r={};function i(v){const w=Pt(La(v)),E=w.length;let S=0,T;for(;S<E;++S)r[T=w[S]]||(r[T]=1,e.push(T))}this._dims=Pt(t.groupby),this._dnames=this._dims.map(v=>{const w=Os(v);return i(v),n.push(w),w}),this.cellkey=t.key?t.key:CM(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=t.fields||[null],o=t.ops||["count"],a=t.aggregate_params||[null],l=t.as||[],u=s.length,d={};let c,f,h,p,g,b,y;for(u!==o.length&&ot("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(c=s[y],f=o[y],h=a[y]||null,c==null&&f!=="count"&&ot("Null aggregate field specified."),g=Os(c),b=wDe(f,g,l[y]),n.push(b),f==="count"){this._counts.push(b);continue}p=d[g],p||(i(c),p=d[g]=[],p.field=c,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(_De(f,h,b))}return this._measures=this._measures.map(v=>CDe(v,v.field)),Object.create(null)},cellkey:CM(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new u8),n},newtuple(t,e){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](t);return e?nDe(e.tuple,s):vi(s)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let r=0,i=n.length;r<i;++r)e[n[r]]=t.num;if(!this._countOnly){const r=t.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(e)}return e},changes(t){const e=this._adds,n=this._mods,r=this._prev,i=this._drop,s=t.add,o=t.rem,a=t.mod;let l,u,d,c;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(d=0,c=this._alen;d<c;++d)s.push(this.celltuple(e[d])),e[d]=null;for(d=0,c=this._mlen;d<c;++d)l=n[d],(l.num===0&&i?o:a).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,t}});const xet=1e-14;function c8(t){rt.call(this,null,t)}c8.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Lt(c8,rt,{transform(t,e){const n=t.interval!==!1,r=this._bins(t),i=r.start,s=r.step,o=t.as||["bin0","bin1"],a=o[0],l=o[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(La(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?d=>{const c=r(d);d[a]=c,d[l]=c==null?null:i+s*(1+(c-i)/s)}:d=>d[a]=r(d)),e.modifies(n?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=uDe(t),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=t.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let d=Ta(e(u));return d==null?null:d<i?-1/0:d>s?1/0:(d=Math.max(i,Math.min(d,s-r)),i+r*Math.floor(xet+(d-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=ql(l,La(e),t.name||"bin_"+Os(e))}});function SDe(t,e,n){const r=t;let i=e||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(d=>!o[r(d)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?yTe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function d8(t){rt.call(this,[],t)}d8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Lt(d8,rt,{transform(t,e){const n=e.fork(e.ALL),r=SDe(wn,this.value,n.materialize(n.ADD).add),i=t.sort,s=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(N0(i),s),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function ADe(t){Hi.call(this,null,wet,t)}Lt(ADe,Hi);function wet(t){return this.value&&!t.modified()?this.value:LP(t.fields,t.orders)}function f8(t){rt.call(this,null,t)}f8.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function _et(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}Lt(f8,rt,{transform(t,e){const n=c=>f=>{for(var h=_et(a(f),t.case,s)||[],p,g=0,b=h.length;g<b;++g)o.test(p=h[g])||c(p)},r=this._parameterCheck(t,e),i=this._counts,s=this._match,o=this._stop,a=t.field,l=t.as||["text","count"],u=n(c=>i[c]=1+(i[c]||0)),d=n(c=>i[c]-=1);return r?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,d)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,r=this._tuples||(this._tuples={}),i=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=vi({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(e)}});function h8(t){rt.call(this,null,t)}h8.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Lt(h8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.as||["a","b"],i=r[0],s=r[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=e.materialize(e.SOURCE).source,n.add=this.value=Eet(a,i,s,t.filter||zu)):n.mod=a,n.source=this.value,n.modifies(r)}});function Eet(t,e,n,r){for(var i=[],s={},o=t.length,a=0,l,u;a<o;++a)for(s[e]=u=t[a],l=0;l<o;++l)s[n]=t[l],r(s)&&(i.push(vi(s)),s={},s[e]=u);return i}const L1e={kde:KP,mixture:pDe,normal:ZP,lognormal:hDe,uniform:mDe},Cet="distributions",R1e="function",Aet="field";function kDe(t,e){const n=t[R1e];Yt(L1e,n)||ot("Unknown distribution function: "+n);const r=L1e[n]();for(const i in t)i===Aet?r.data((t.from||e()).map(t[i])):i===Cet?r[i](t[i].map(s=>kDe(s,e))):typeof r[i]===R1e&&r[i](t[i]);return r}function p8(t){rt.call(this,null,t)}const TDe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ket={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:TDe},{name:"weights",type:"number",array:!0}]};p8.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:TDe.concat(ket)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(p8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=kDe(t.distribution,Tet(e)),i=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200;let o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&ot("Invalid density method: "+o),!t.extent&&!r.data&&ot("Missing density extent parameter."),o=r[o];const a=t.as||["value","density"],l=t.extent||zd(r.data()),u=KD(o,l,i,s).map(d=>{const c={};return c[a[0]]=d[0],c[a[1]]=d[1],vi(c)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Tet(t){return()=>t.materialize(t.SOURCE).source}function DDe(t,e){return t?t.map((n,r)=>e[r]||Os(n)):null}function m8(t,e,n){const r=[],i=c=>c(l);let s,o,a,l,u,d;if(e==null)r.push(t.map(n));else for(s={},o=0,a=t.length;o<a;++o)l=t[o],u=e.map(i),d=s[u],d||(s[u]=d=[],d.dims=u,r.push(d)),d.push(n(l));return r}const LDe="bin";function g8(t){rt.call(this,null,t)}g8.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:LDe}]};const Det=(t,e)=>xE(zd(t,e))/30;Lt(g8,rt,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,r=m8(e.source,t.groupby,Ma),i=t.smooth||!1,s=t.field,o=t.step||Det(n,s),a=N0((p,g)=>s(p)-s(g)),l=t.as||LDe,u=r.length;let d=1/0,c=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const g of dDe(p,o,i,s))g<d&&(d=g),g>c&&(c=g),p[++h][l]=g}return this.value={start:d,stop:c,step:o},e.reflow(!0).modifies(l)}});function RDe(t){Hi.call(this,null,Let,t),this.modified(!0)}Lt(RDe,Hi);function Let(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:ql(n=>e(n,t),La(e),Os(e))}function y8(t){rt.call(this,[void 0,void 0],t)}y8.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Lt(y8,rt,{transform(t,e){const n=this.value,r=t.field,i=e.changed()||e.modified(r.fields)||t.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),e.visit(i?e.SOURCE:e.ADD,a=>{const l=Ta(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Os(r);a&&(a=` for field "${a}"`),e.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function b8(t,e){Hi.call(this,t),this.parent=e,this.count=0}Lt(b8,Hi,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function JD(t){rt.call(this,{},t),this._keys=u1();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let r=0,i=e.active;r<i;++r)n(e[r],r,e)}}Lt(JD,rt,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,r){const i=this.value;let s=Yt(i,t)&&i[t],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,o=n.dataflow,s=new b8(n.fork(n.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),i[t]=s,this.activate(s)),s},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const r=t[n].detachSubflow;r&&r(),delete t[n],++e}if(e){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,r=t?t.length:0;let i=0;for(;i<r;++i)e[i]=t[i];for(;i<n&&e[i]!=null;++i)e[i]=null;e.active=r},transform(t,e){const n=e.dataflow,r=t.key,i=t.subflow,s=this._keys,o=t.modified("key"),a=l=>this.subflow(l,i,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,l=>{const u=wn(l),d=s.get(u);d!==void 0&&(s.delete(u),a(d).rem(l))}),e.visit(e.ADD,l=>{const u=r(l);s.set(wn(l),u),a(u).add(l)}),o||e.modified(r.fields)?e.visit(e.MOD,l=>{const u=wn(l),d=s.get(u),c=r(l);d===c?a(c).mod(l):(s.set(u,c),a(d).rem(l),a(c).add(l))}):e.changed(e.MOD)&&e.visit(e.MOD,l=>{a(s.get(wn(l))).mod(l)}),o&&e.visit(e.REFLOW,l=>{const u=wn(l),d=s.get(u),c=r(l);d!==c&&(s.set(u,c),a(d).rem(l),a(c).add(l))}),e.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),e}});function FDe(t){Hi.call(this,null,Ret,t)}Lt(FDe,Hi);function Ret(t){return this.value&&!t.modified()?this.value:at(t.name)?Pt(t.name).map(e=>Bu(e)):Bu(t.name,t.as)}function v8(t){rt.call(this,u1(),t)}v8.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Lt(v8,rt,{transform(t,e){const n=e.dataflow,r=this.value,i=e.fork(),s=i.add,o=i.rem,a=i.mod,l=t.expr;let u=!0;e.visit(e.REM,c=>{const f=wn(c);r.has(f)?r.delete(f):o.push(c)}),e.visit(e.ADD,c=>{l(c,t)?s.push(c):r.set(wn(c),1)});function d(c){const f=wn(c),h=l(c,t),p=r.get(f);h&&p?(r.delete(f),s.push(c)):!h&&!p?(r.set(f,1),o.push(c)):u&&h&&!p&&a.push(c)}return e.visit(e.MOD,d),t.modified()&&(u=!1,e.visit(e.REFLOW,d)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function x8(t){rt.call(this,[],t)}x8.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Lt(x8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=DDe(r,t.as||[]),s=t.index||null,o=i.length;return n.rem=this.value,e.visit(e.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let d=0,c,f,h;for(;d<u;++d){for(f=qP(a),c=0;c<o;++c)f[i[c]]=(h=l[c][d])==null?null:h;s&&(f[s]=d),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function w8(t){rt.call(this,[],t)}w8.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Lt(w8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(Os),s=t.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let d=0,c;d<l;++d)c=qP(u),c[o]=i[d],c[a]=r[d](u),n.add.push(c)}),this.value=n.source=n.add,n.modifies(s)}});function _8(t){rt.call(this,null,t)}_8.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Lt(_8,rt,{transform(t,e){const n=t.expr,r=t.as,i=t.modified(),s=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)||e.modified(r)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(s,o=>o[r]=n(o,t))}});function ODe(t){rt.call(this,[],t)}Lt(ODe,rt,{transform(t,e){const n=e.fork(e.ALL),r=t.generator;let i=this.value,s=t.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=vi(r(t))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const vS={value:"value",median:uke,mean:UUe,min:nM,max:Vg},Fet=[];function E8(t){rt.call(this,[],t)}E8.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Oet(t){var e=t.method||vS.value,n;if(vS[e]==null)ot("Unrecognized imputation method: "+e);else return e===vS.value?(n=t.value!==void 0?t.value:0,()=>n):vS[e]}function Met(t){const e=t.field;return n=>n?e(n):NaN}Lt(E8,rt,{transform(t,e){var n=e.fork(e.ALL),r=Oet(t),i=Met(t),s=Os(t.field),o=Os(t.key),a=(t.groupby||[]).map(Os),l=Iet(e.source,t.groupby,t.key,t.keyvals),u=[],d=this.value,c=l.domain.length,f,h,p,g,b,y,v,w,E,S;for(b=0,w=l.length;b<w;++b)for(f=l[b],p=f.values,h=NaN,v=0;v<c;++v)if(f[v]==null){for(g=l.domain[v],S={_impute:!0},y=0,E=p.length;y<E;++y)S[a[y]]=p[y];S[o]=g,S[s]=Number.isNaN(h)?h=r(f,i):h,u.push(vi(S))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=u,n}});function Iet(t,e,n,r){var i=y=>y(b),s=[],o=r?r.slice():[],a={},l={},u,d,c,f,h,p,g,b;for(o.forEach((y,v)=>a[y]=v+1),f=0,g=t.length;f<g;++f)b=t[f],p=n(b),h=a[p]||(a[p]=o.push(p)),d=(u=e?e.map(i):Fet)+"",(c=l[d])||(c=l[d]=[],s.push(c),c.values=u),c[h-1]=b;return s.domain=o,s}function C8(t){Kp.call(this,t)}C8.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:EE},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Lt(C8,Kp,{transform(t,e){const n=this,r=t.modified();let i;return n.value&&(r||e.modified(n._inputs,!0))?(i=n.value=r?n.init(t):{},e.visit(e.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),n.changes(),e.visit(e.SOURCE,s=>{ir(s,i[n.cellkey(s)].tuple)}),e.reflow(r).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(t[n]),t[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function S8(t){rt.call(this,null,t)}S8.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Lt(S8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=m8(r,t.groupby,t.field),s=(t.groupby||[]).map(Os),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[];let d=t.extent,c=t.steps||t.minsteps||25,f=t.steps||t.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ot("Invalid density method: "+a),t.resolve==="shared"&&(d||(d=zd(r,t.field)),c=f=t.steps||f),i.forEach(h=>{const p=KP(h,o)[a],g=t.counts?h.length:1,b=d||zd(h);KD(p,b,c,f).forEach(y=>{const v={};for(let w=0;w<s.length;++w)v[s[w]]=h.dims[w];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(vi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function MDe(t){Hi.call(this,null,$et,t)}Lt(MDe,Hi);function $et(t){return this.value&&!t.modified()?this.value:FP(t.fields,t.flat)}function IDe(t){rt.call(this,[],t),this._pending=null}Lt(IDe,rt,{transform(t,e){const n=e.dataflow;return this._pending?DF(this,e,this._pending):Pet(t)?e.StopPropagation:t.values?DF(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(i=>(this._pending=Pt(i.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(r=>DF(this,e,Pt(r.data)))}});function Pet(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function DF(t,e,n){n.forEach(vi);const r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.source=r.add=n,t._pending=null,r.rem.length&&r.clean(!0),r}function A8(t){rt.call(this,{},t)}A8.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Lt(A8,rt,{transform(t,e){const n=t.fields,r=t.index,i=t.values,s=t.default==null?null:t.default,o=t.modified(),a=n.length;let l=o?e.SOURCE:e.ADD,u=e,d=t.as,c,f,h;return i?(f=i.length,a>1&&!d&&ot('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==a*f&&ot('The "as" parameter has too few output field names.'),d=d||i.map(Os),c=function(p){for(var g=0,b=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<f;++y,++b)p[d[b]]=s;else for(y=0;y<f;++y,++b)p[d[b]]=i[y](v)}):(d||ot("Missing output field names."),c=function(p){for(var g=0,b;g<a;++g)b=r.get(n[g](p)),p[d[g]]=b??s}),o?u=e.reflow(!0):(h=n.some(p=>e.modified(p.fields)),l|=h?e.MOD:0),e.visit(l,c),u.modifies(d)}});function $De(t){Hi.call(this,null,Net,t)}Lt($De,Hi);function Net(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=e[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function PDe(t){Hi.call(this,null,Bet,t)}Lt(PDe,Hi);function Bet(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function NDe(t){rt.call(this,null,t)}Lt(NDe,rt,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function k8(t){Kp.call(this,t)}k8.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:EE,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Lt(k8,Kp,{_transform:Kp.prototype.transform,transform(t,e){return this._transform(zet(t,e),e)}});function zet(t,e){const n=t.field,r=t.value,i=(t.op==="count"?"__count__":t.op)||"sum",s=La(n).concat(La(r)),o=Uet(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>i),fields:o.map(a=>jet(a,n,r,s)),as:o.map(a=>a+""),modified:t.modified.bind(t)}}function jet(t,e,n,r){return ql(i=>e(i)===t?n(i):NaN,r,t+"")}function Uet(t,e,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=t(s);r[o]||(r[o]=1,i.push(o))}),i.sort(BD),e?i.slice(0,e):i}function BDe(t){JD.call(this,t)}Lt(BDe,JD,{transform(t,e){const n=t.subflow,r=t.field,i=s=>this.subflow(wn(s),n,e,s);return(t.modified("field")||r&&e.modified(La(r)))&&ot("PreFacet does not support field modification."),this.initTargets(),r?(e.visit(e.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),e.visit(e.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(vi(a)))}),e.visit(e.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(e.visit(e.MOD,s=>i(s).mod(s)),e.visit(e.ADD,s=>i(s).add(s)),e.visit(e.REM,s=>i(s).rem(s))),e.clean()&&e.runAfter(()=>this.clean()),e}});function T8(t){rt.call(this,null,t)}T8.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Lt(T8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.fields,i=DDe(t.fields,t.as||[]),s=r?(a,l)=>qet(a,l,r,i):HD;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,a=>{const l=wn(a);n.rem.push(o[l]),o[l]=null}),e.visit(e.ADD,a=>{const l=s(a,vi({}));o[wn(a)]=l,n.add.push(l)}),e.visit(e.MOD,a=>{n.mod.push(s(a,o[wn(a)]))}),n}});function qet(t,e,n,r){for(let i=0,s=n.length;i<s;++i)e[r[i]]=n[i](t);return e}function zDe(t){rt.call(this,null,t)}Lt(zDe,rt,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function D8(t){rt.call(this,null,t)}D8.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Het=1e-14;Lt(D8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const i=e.materialize(e.SOURCE).source,s=m8(i,t.groupby,t.field),o=(t.groupby||[]).map(Os),a=[],l=t.step||.01,u=t.probs||eu(l/2,1-Het,l),d=u.length;return s.forEach(c=>{const f=VP(c,u);for(let h=0;h<d;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=c.dims[g];p[r[0]]=u[h],p[r[1]]=f[h],a.push(vi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function jDe(t){rt.call(this,null,t)}Lt(jDe,rt,{transform(t,e){let n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,i=>{const s=wn(i);n.rem.push(r[s]),r[s]=null}),e.visit(e.ADD,i=>{const s=qP(i);r[wn(i)]=s,n.add.push(s)}),e.visit(e.MOD,i=>{const s=r[wn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function L8(t){rt.call(this,[],t),this.count=0}L8.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Lt(L8,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,s=this.value.reduce((d,c)=>(d[wn(c)]=1,d),{});let o=this.value,a=this.count,l=0;function u(d){let c,f;o.length<i?o.push(d):(f=~~((a+1)*Uu()),f<o.length&&f>=l&&(c=o[f],s[wn(c)]&&n.rem.push(c),o[f]=d)),++a}if(e.rem.length&&(e.visit(e.REM,d=>{const c=wn(d);s[c]&&(s[c]=-1,n.rem.push(d)),--a}),o=o.filter(d=>s[wn(d)]!==-1)),(e.rem.length||r)&&o.length<i&&e.source&&(l=a=o.length,e.visit(e.SOURCE,d=>{s[wn(d)]||u(d)}),l=-1),r&&o.length>i){const d=o.length-i;for(let c=0;c<d;++c)s[wn(o[c])]=-1,n.rem.push(o[c]);o=o.slice(d)}return e.mod.length&&e.visit(e.MOD,d=>{s[wn(d)]&&n.mod.push(d)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(n.add=o.filter(d=>!s[wn(d)])),this.count=a,this.value=n.source=o,n}});function R8(t){rt.call(this,null,t)}R8.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Lt(R8,rt,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=eu(t.start,t.stop,t.step||1).map(i=>{const s={};return s[r]=i,vi(s)}),n.add=e.add.concat(this.value),n}});function UDe(t){rt.call(this,null,t),this.modified(!0)}Lt(UDe,rt,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function F8(t){rt.call(this,null,t)}const qDe=["unit0","unit1"];F8.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:$P,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:qDe}]};Lt(F8,rt,{transform(t,e){const n=t.field,r=t.interval!==!1,i=t.timezone==="utc",s=this._floor(t,e),o=(i?d1:c1)(s.unit).offset,a=t.as||qDe,l=a[0],u=a[1],d=s.step;let c=s.start||1/0,f=s.stop||-1/0,h=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(La(n)))&&(e=e.reflow(!0),h=e.SOURCE,c=1/0,f=-1/0),e.visit(h,p=>{const g=n(p);let b,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=b=y=s(g),r&&(p[u]=y=o(b,d)),b<c&&(c=b),y>f&&(f=y))}),s.start=c,s.stop=f,e.modifies(r?a:l)},_floor(t,e){const n=t.timezone==="utc",{units:r,step:i}=t.units?{units:t.units,step:t.step||1}:zTe({extent:t.extent||zd(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=PP(r),o=this.value||{},a=(n?RTe:LTe)(s,i);return a.unit=Hr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function HDe(t){rt.call(this,u1(),t)}Lt(HDe,rt,{transform(t,e){const n=e.dataflow,r=t.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,a=>i.delete(r(a))),e.visit(e.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()}});function GDe(t){rt.call(this,null,t)}Lt(GDe,rt,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(N0(t.sort)):e.source).map(t.field))}});function Get(t,e,n,r){const i=f2[t](e,n);return{init:i.init||vp,update:function(s,o){o[r]=i.next(s)}}}const f2={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){const t=f2.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,r=e.compare;let i=e.index;if(t<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;t=i}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||ot("ntile num must be greater than zero.");const n=f2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(e*r(i))}},lag:function(t,e){return e=+e||1,{next:n=>{const r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||ot("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const r=t(n.data[n.index]);return r!=null?e=r:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:r=>{const i=r.data;return r.index<=n?e:(n=Vet(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};function Vet(t,e,n){for(let r=e.length;n<r;++n)if(t(e[n])!=null)return n;return-1}const Wet=Object.keys(f2);function VDe(t){const e=Pt(t.ops),n=Pt(t.fields),r=Pt(t.params),i=Pt(t.aggregate_params),s=Pt(t.as),o=this.outputs=[],a=this.windows=[],l={},u={},d=[],c=[];let f=!0;function h(p){Pt(La(p)).forEach(g=>l[g]=1)}h(t.sort),e.forEach((p,g)=>{const b=n[g],y=r[g],v=i[g]||null,w=Os(b),E=wDe(p,w,s[g]);if(h(b),o.push(E),Yt(f2,p))a.push(Get(p,b,y,E));else{if(b==null&&p!=="count"&&ot("Null aggregate field specified."),p==="count"){d.push(E);return}f=!1;let S=u[w];S||(S=u[w]=[],S.field=b,c.push(S)),S.push(_De(p,v,E))}}),(d.length||c.length)&&(this.cell=Yet(c,d,f)),this.inputs=Object.keys(l)}const WDe=VDe.prototype;WDe.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};WDe.update=function(t,e){const n=this.cell,r=this.windows,i=t.data,s=r&&r.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(i[o]);for(o=t.p1;o<t.i1;++o)n.add(i[o]);n.set(e)}for(o=0;o<s;++o)r[o].update(t,e)};function Yet(t,e,n){t=t.map(l=>CDe(l,l.field));const r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new t[o](r);if(r.store)var a=r.data=new u8;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,d;for(a&&a.values(),u=0,d=e.length;u<d;++u)l[e[u]]=r.num;if(!n)for(u=0,d=s.length;u<d;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function O8(t){rt.call(this,{},t),this._mlen=0,this._mods=[]}O8.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wet.concat(EE)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Lt(O8,rt,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),r=N0(t.sort),i=CM(t.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new VDe(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,a=>s(a).add(a))):(e.visit(e.REM,a=>s(a).remove(a)),e.visit(e.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)Xet(this._mods[a],o,r,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=SDe(wn),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function Xet(t,e,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=t.data(n),l=a.length,u=s?dD(i):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ia(-1)};e.init();for(let c=0;c<l;++c)Zet(d,o,c,l),s&&Ket(d,u),e.update(d,a[c])}function Zet(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Ket(t,e){const n=t.i0,r=t.i1-1,i=t.compare,s=t.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(t.i0=e.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(t.i1=e.right(s,s[r]))}const Jet=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Kp,bin:c8,collect:d8,compare:ADe,countpattern:f8,cross:h8,density:p8,dotbin:g8,expression:RDe,extent:y8,facet:JD,field:FDe,filter:v8,flatten:x8,fold:w8,formula:_8,generate:ODe,impute:E8,joinaggregate:C8,kde:S8,key:MDe,load:IDe,lookup:A8,multiextent:$De,multivalues:PDe,params:NDe,pivot:k8,prefacet:BDe,project:T8,proxy:zDe,quantile:D8,relay:jDe,sample:L8,sequence:R8,sieve:UDe,subflow:b8,timeunit:F8,tupleindex:HDe,values:GDe,window:O8},Symbol.toStringTag,{value:"Module"}));function Ci(t){return function(){return t}}const F1e=Math.abs,ba=Math.atan2,cg=Math.cos,Qet=Math.max,LF=Math.min,dd=Math.sin,Ug=Math.sqrt,_a=1e-12,uv=Math.PI,$k=uv/2,YDe=2*uv;function ett(t){return t>1?0:t<-1?uv:Math.acos(t)}function O1e(t){return t>=1?$k:t<=-1?-$k:Math.asin(t)}const SM=Math.PI,AM=2*SM,Dg=1e-6,ttt=AM-Dg;function XDe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ntt(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return XDe;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let M8=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?XDe:ntt(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,u=i-n,d=o-e,c=a-n,f=d*d+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Dg)if(!(Math.abs(c*l-u*d)>Dg)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+u*u,b=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(f),w=s*Math.tan((SM-Math.acos((g+f-b)/(2*y*v)))/2),E=w/v,S=w/y;Math.abs(E-1)>Dg&&this._append`L${e+E*d},${n+E*c}`,this._append`A${s},${s},0,0,${+(c*h>d*p)},${this._x1=e+S*l},${this._y1=n+S*u}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=e+a,d=n+l,c=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Dg||Math.abs(this._y1-d)>Dg)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%AM+AM),f>ttt?this._append`A${r},${r},0,1,${c},${e-a},${n-l}A${r},${r},0,1,${c},${this._x1=u},${this._y1=d}`:f>Dg&&this._append`A${r},${r},0,${+(f>=SM)},${c},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function QD(){return new M8}QD.prototype=M8.prototype;function eL(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new M8(e)}function rtt(t){return t.innerRadius}function itt(t){return t.outerRadius}function stt(t){return t.startAngle}function ott(t){return t.endAngle}function att(t){return t&&t.padAngle}function ltt(t,e,n,r,i,s,o,a){var l=n-t,u=r-e,d=o-i,c=a-s,f=c*l-d*u;if(!(f*f<_a))return f=(d*(e-s)-c*(t-i))/f,[t+f*l,e+f*u]}function xS(t,e,n,r,i,s,o){var a=t-n,l=e-r,u=(o?s:-s)/Ug(a*a+l*l),d=u*l,c=-u*a,f=t+d,h=e+c,p=n+d,g=r+c,b=(f+p)/2,y=(h+g)/2,v=p-f,w=g-h,E=v*v+w*w,S=i-s,T=f*g-p*h,D=(w<0?-1:1)*Ug(Qet(0,S*S*E-T*T)),k=(T*w-v*D)/E,R=(-T*v-w*D)/E,O=(T*w+v*D)/E,B=(-T*v+w*D)/E,K=k-b,L=R-y,I=O-b,$=B-y;return K*K+L*L>I*I+$*$&&(k=O,R=B),{cx:k,cy:R,x01:-d,y01:-c,x11:k*(i/S-1),y11:R*(i/S-1)}}function utt(){var t=rtt,e=itt,n=Ci(0),r=null,i=stt,s=ott,o=att,a=null,l=eL(u);function u(){var d,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-$k,g=s.apply(this,arguments)-$k,b=F1e(g-p),y=g>p;if(a||(a=d=l()),h<f&&(c=h,h=f,f=c),!(h>_a))a.moveTo(0,0);else if(b>YDe-_a)a.moveTo(h*cg(p),h*dd(p)),a.arc(0,0,h,p,g,!y),f>_a&&(a.moveTo(f*cg(g),f*dd(g)),a.arc(0,0,f,g,p,y));else{var v=p,w=g,E=p,S=g,T=b,D=b,k=o.apply(this,arguments)/2,R=k>_a&&(r?+r.apply(this,arguments):Ug(f*f+h*h)),O=LF(F1e(h-f)/2,+n.apply(this,arguments)),B=O,K=O,L,I;if(R>_a){var $=O1e(R/f*dd(k)),U=O1e(R/h*dd(k));(T-=$*2)>_a?($*=y?1:-1,E+=$,S-=$):(T=0,E=S=(p+g)/2),(D-=U*2)>_a?(U*=y?1:-1,v+=U,w-=U):(D=0,v=w=(p+g)/2)}var q=h*cg(v),Y=h*dd(v),X=f*cg(S),te=f*dd(S);if(O>_a){var le=h*cg(w),ee=h*dd(w),z=f*cg(E),he=f*dd(E),fe;if(b<uv)if(fe=ltt(q,Y,z,he,le,ee,X,te)){var ze=q-fe[0],He=Y-fe[1],je=le-fe[0],we=ee-fe[1],$e=1/dd(ett((ze*je+He*we)/(Ug(ze*ze+He*He)*Ug(je*je+we*we)))/2),qe=Ug(fe[0]*fe[0]+fe[1]*fe[1]);B=LF(O,(f-qe)/($e-1)),K=LF(O,(h-qe)/($e+1))}else B=K=0}D>_a?K>_a?(L=xS(z,he,q,Y,h,K,y),I=xS(le,ee,X,te,h,K,y),a.moveTo(L.cx+L.x01,L.cy+L.y01),K<O?a.arc(L.cx,L.cy,K,ba(L.y01,L.x01),ba(I.y01,I.x01),!y):(a.arc(L.cx,L.cy,K,ba(L.y01,L.x01),ba(L.y11,L.x11),!y),a.arc(0,0,h,ba(L.cy+L.y11,L.cx+L.x11),ba(I.cy+I.y11,I.cx+I.x11),!y),a.arc(I.cx,I.cy,K,ba(I.y11,I.x11),ba(I.y01,I.x01),!y))):(a.moveTo(q,Y),a.arc(0,0,h,v,w,!y)):a.moveTo(q,Y),!(f>_a)||!(T>_a)?a.lineTo(X,te):B>_a?(L=xS(X,te,le,ee,f,-B,y),I=xS(q,Y,z,he,f,-B,y),a.lineTo(L.cx+L.x01,L.cy+L.y01),B<O?a.arc(L.cx,L.cy,B,ba(L.y01,L.x01),ba(I.y01,I.x01),!y):(a.arc(L.cx,L.cy,B,ba(L.y01,L.x01),ba(L.y11,L.x11),!y),a.arc(0,0,f,ba(L.cy+L.y11,L.cx+L.x11),ba(I.cy+I.y11,I.cx+I.x11),y),a.arc(I.cx,I.cy,B,ba(I.y11,I.x11),ba(I.y01,I.x01),!y))):a.arc(0,0,f,S,E,y)}if(a.closePath(),d)return a=null,d+""||null}return u.centroid=function(){var d=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-uv/2;return[cg(c)*d,dd(c)*d]},u.innerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:Ci(+d),u):t},u.outerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:Ci(+d),u):e},u.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:Ci(+d),u):n},u.padRadius=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Ci(+d),u):r},u.startAngle=function(d){return arguments.length?(i=typeof d=="function"?d:Ci(+d),u):i},u.endAngle=function(d){return arguments.length?(s=typeof d=="function"?d:Ci(+d),u):s},u.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:Ci(+d),u):o},u.context=function(d){return arguments.length?(a=d??null,u):a},u}function ZDe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function KDe(t){this._context=t}KDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function I8(t){return new KDe(t)}function JDe(t){return t[0]}function QDe(t){return t[1]}function eLe(t,e){var n=Ci(!0),r=null,i=I8,s=null,o=eL(a);t=typeof t=="function"?t:t===void 0?JDe:Ci(t),e=typeof e=="function"?e:e===void 0?QDe:Ci(e);function a(l){var u,d=(l=ZDe(l)).length,c,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=d;++u)!(u<d&&n(c=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(c,u,l),+e(c,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ci(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ci(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Ci(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function tLe(t,e,n){var r=null,i=Ci(!0),s=null,o=I8,a=null,l=eL(u);t=typeof t=="function"?t:t===void 0?JDe:Ci(+t),e=typeof e=="function"?e:Ci(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?QDe:Ci(+n);function u(c){var f,h,p,g=(c=ZDe(c)).length,b,y=!1,v,w=new Array(g),E=new Array(g);for(s==null&&(a=o(v=l())),f=0;f<=g;++f){if(!(f<g&&i(b=c[f],f,c))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(w[f]=+t(b,f,c),E[f]=+e(b,f,c),a.point(r?+r(b,f,c):w[f],n?+n(b,f,c):E[f]))}if(v)return a=null,v+""||null}function d(){return eLe().defined(i).curve(o).context(s)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ci(+c),r=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Ci(+c),u):t},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Ci(+c),u):r},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ci(+c),n=null,u):e},u.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Ci(+c),u):e},u.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Ci(+c),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:Ci(!!c),u):i},u.curve=function(c){return arguments.length?(o=c,s!=null&&(a=o(s)),u):o},u.context=function(c){return arguments.length?(c==null?s=a=null:a=o(s=c),u):s},u}const ctt={draw(t,e){const n=Ug(e/uv);t.moveTo(n,0),t.arc(0,0,n,0,YDe)}};function dtt(t,e){let n=null,r=eL(i);t=typeof t=="function"?t:Ci(t||ctt),e=typeof e=="function"?e:Ci(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ci(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ci(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Jp(){}function Pk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function tL(t){this._context=t}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ftt(t){return new tL(t)}function nLe(t){this._context=t}nLe.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function htt(t){return new nLe(t)}function rLe(t){this._context=t}rLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Pk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ptt(t){return new rLe(t)}function iLe(t,e){this._basis=new tL(t),this._beta=e}iLe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const mtt=function t(e){function n(r){return e===1?new tL(r):new iLe(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Nk(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function $8(t,e){this._context=t,this._k=(1-e)/6}$8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Nk(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Nk(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gtt=function t(e){function n(r){return new $8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function P8(t,e){this._context=t,this._k=(1-e)/6}P8.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Nk(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ytt=function t(e){function n(r){return new P8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function N8(t,e){this._context=t,this._k=(1-e)/6}N8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nk(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const btt=function t(e){function n(r){return new N8(r,e)}return n.tension=function(r){return t(+r)},n}(0);function B8(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>_a){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>_a){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/d,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function sLe(t,e){this._context=t,this._alpha=e}sLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:B8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vtt=function t(e){function n(r){return e?new sLe(r,e):new $8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function oLe(t,e){this._context=t,this._alpha=e}oLe.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:B8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const xtt=function t(e){function n(r){return e?new oLe(r,e):new P8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function aLe(t,e){this._context=t,this._alpha=e}aLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:B8(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const wtt=function t(e){function n(r){return e?new aLe(r,e):new N8(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function lLe(t){this._context=t}lLe.prototype={areaStart:Jp,areaEnd:Jp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function _tt(t){return new lLe(t)}function M1e(t){return t<0?-1:1}function I1e(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(M1e(s)+M1e(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function $1e(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function RF(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function Bk(t){this._context=t}Bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RF(this,this._t0,$1e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,RF(this,$1e(this,n=I1e(this,t,e)),n);break;default:RF(this,this._t0,n=I1e(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function uLe(t){this._context=new cLe(t)}(uLe.prototype=Object.create(Bk.prototype)).point=function(t,e){Bk.prototype.point.call(this,e,t)};function cLe(t){this._context=t}cLe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Ett(t){return new Bk(t)}function Ctt(t){return new uLe(t)}function dLe(t){this._context=t}dLe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=P1e(t),i=P1e(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function P1e(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Stt(t){return new dLe(t)}function nL(t,e){this._context=t,this._t=e}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Att(t){return new nL(t,.5)}function ktt(t){return new nL(t,0)}function Ttt(t){return new nL(t,1)}function Up(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const Dtt=()=>typeof Image<"u"?Image:null;function Kd(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Ltt=Kd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Rtt=Kd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ftt=Kd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ott=Kd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Mtt=Kd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Itt=Kd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),$tt=Kd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ptt=Kd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ntt=Kd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Btt=Kd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function z8(t,e,n){const r=t-e+n*2;return t?r>0?r:1:0}const ztt="identity",cv="linear",uh="log",CE="pow",SE="sqrt",rL="symlog",u0="time",c0="utc",Ld="sequential",h1="diverging",dv="quantile",iL="quantize",sL="threshold",j8="ordinal",kM="point",fLe="band",U8="bin-ordinal",wo="continuous",AE="discrete",kE="discretizing",Wu="interpolating",q8="temporal";function jtt(t){return function(e){let n=e[0],r=e[1],i;return r<n&&(i=n,n=r,r=i),[t.invert(n),t.invert(r)]}}function Utt(t){return function(e){const n=t.range();let r=e[0],i=e[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=t.invertExtent(n[s]),i=t.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function H8(){const t=IAe().unknown(void 0),e=t.domain,n=t.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete t.unknown;function d(){const c=e().length,f=r[1]<r[0],h=r[1-f],p=z8(c,a,l);let g=r[f-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(c-a))*u,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const b=eu(c).map(y=>g+i*y);return n(f?b.reverse():b)}return t.domain=function(c){return arguments.length?(e(c),d()):e()},t.range=function(c){return arguments.length?(r=[+c[0],+c[1]],d()):r.slice()},t.rangeRound=function(c){return r=[+c[0],+c[1]],o=!0,d()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(c){return arguments.length?(o=!!c,d()):o},t.padding=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),a=l,d()):a},t.paddingInner=function(c){return arguments.length?(a=Math.max(0,Math.min(1,c)),d()):a},t.paddingOuter=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),d()):l},t.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),d()):u},t.invertRange=function(c){if(c[0]==null||c[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let g=+c[0],b=+c[1],y,v,w;if(!(g!==g||b!==b)&&(b<g&&(w=g,g=b,b=w),!(b<h[0]||g>r[1-f])))return y=Math.max(0,X_(h,g)-1),v=g===b?y:X_(h,b)-1,g-h[y]>s+1e-10&&++y,f&&(w=y,y=p-v,v=p-w),y>v?void 0:e().slice(y,v+1)},t.invert=function(c){const f=t.invertRange([c,c]);return f&&f[0]},t.copy=function(){return H8().domain(e()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},d()}function hLe(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return hLe(e())},t}function qtt(){return hLe(H8().paddingInner(1))}var Htt=Array.prototype.map;function Gtt(t){return Htt.call(t,Ta)}const Vtt=Array.prototype.slice;function pLe(){let t=[],e=[];function n(r){return r==null||r!==r?void 0:e[(X_(t,r)-1)%e.length]}return n.domain=function(r){return arguments.length?(t=Gtt(r),n):t.slice()},n.range=function(r){return arguments.length?(e=Vtt.call(r),n):e.slice()},n.tickFormat=function(r,i){return vje(t[0],Hr(t),r??10,i)},n.copy=function(){return pLe().domain(n.domain()).range(n.range())},n}const zk=new Map,mLe=Symbol("vega_scale");function gLe(t){return t[mLe]=!0,t}function Wtt(t){return t&&t[mLe]===!0}function Ytt(t,e,n){const r=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?jtt(s):s.invertExtent?Utt(s):void 0),s.type=t,gLe(s)};return r.metadata=Mc(Pt(n)),r}function ci(t,e,n){return arguments.length>1?(zk.set(t,Ytt(t,e,n)),this):yLe(t)?zk.get(t):void 0}ci(ztt,yke);ci(cv,lje,wo);ci(uh,uje,[wo,uh]);ci(CE,cje,wo);ci(SE,dje,wo);ci(rL,fje,wo);ci(u0,SHe,[wo,q8]);ci(c0,AHe,[wo,q8]);ci(Ld,MAe,[wo,Wu]);ci(`${Ld}-${cv}`,MAe,[wo,Wu]);ci(`${Ld}-${uh}`,hje,[wo,Wu,uh]);ci(`${Ld}-${CE}`,pje,[wo,Wu]);ci(`${Ld}-${SE}`,mje,[wo,Wu]);ci(`${Ld}-${rL}`,gje,[wo,Wu]);ci(`${h1}-${cv}`,Tke,[wo,Wu]);ci(`${h1}-${uh}`,Dke,[wo,Wu,uh]);ci(`${h1}-${CE}`,U$,[wo,Wu]);ci(`${h1}-${SE}`,kHe,[wo,Wu]);ci(`${h1}-${rL}`,Lke,[wo,Wu]);ci(dv,bke,[kE,dv]);ci(iL,yje,kE);ci(sL,bje,kE);ci(U8,pLe,[AE,kE]);ci(j8,IAe,AE);ci(fLe,H8,AE);ci(kM,qtt,AE);function yLe(t){return zk.has(t)}function z0(t,e){const n=zk.get(t);return n&&n.metadata[e]}function G8(t){return z0(t,wo)}function fv(t){return z0(t,AE)}function TM(t){return z0(t,kE)}function bLe(t){return z0(t,uh)}function Xtt(t){return z0(t,q8)}function vLe(t){return z0(t,Wu)}function xLe(t){return z0(t,dv)}const Ztt=["clamp","base","constant","exponent"];function wLe(t,e){const n=e[0],r=Hr(e)-n;return function(i){return t(n+i*r)}}function oL(t,e,n){return g$(V8(e||"rgb",n),t)}function _Le(t,e){const n=new Array(e),r=e+1;for(let i=0;i<e;)n[i]=t(++i/r);return n}function ELe(t,e,n){const r=n-e;let i,s,o;return!r||!Number.isFinite(r)?Ia(.5):(i=(s=t.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ci(s)().domain([e,n]).range([0,1]),Ztt.forEach(a=>t[a]?o[a](t[a]()):0),o)}function V8(t,e){const n=cqe[Ktt(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function Ktt(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Jtt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Qtt={accent:Rtt,category10:Ltt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ftt,observable10:Ott,paired:Mtt,pastel1:Itt,pastel2:$tt,set1:Ptt,set2:Ntt,set3:Btt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function CLe(t){if(at(t))return t;const e=t.length/6|0,n=new Array(e);for(let r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}function SLe(t,e){for(const n in t)W8(n,e(t[n]))}const N1e={};SLe(Qtt,CLe);SLe(Jtt,t=>oL(CLe(t)));function W8(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(N1e[t]=e,this):N1e[t]}const DA="symbol",ent="discrete",tnt="gradient",nnt=t=>at(t)?t.map(e=>String(e)):String(t),rnt=(t,e)=>t[1]-e[1],int=(t,e)=>e[1]-t[1];function Y8(t,e,n){let r;return ui(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(xE(t.domain())/n||1)+1))),It(e)&&(r=e.step,e=e.interval),Nt(e)&&(e=t.type===u0?c1(e):t.type==c0?d1(e):ot("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function ALe(t,e,n){let r=t.range(),i=r[0],s=Hr(r),o=rnt;if(i>s&&(r=s,s=i,i=r,o=int),i=Math.floor(i),s=Math.ceil(s),e=e.map(a=>[a,t(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&e.length>1){const a=[e[0],Hr(e)];for(;e.length>n&&e.length>=3;)e=e.filter((l,u)=>!(u%2));e.length<3&&(e=a)}return e}function X8(t,e){return t.bins?ALe(t,t.bins,e):t.ticks?t.ticks(e):t.domain()}function kLe(t,e,n,r,i,s){const o=e.type;let a=nnt;if(o===u0||i===u0)a=t.timeFormat(r);else if(o===c0||i===c0)a=t.utcFormat(r);else if(bLe(o)){const l=t.formatFloat(r);if(s||e.bins)a=l;else{const u=TLe(e,n,!1);a=d=>u(d)?l(d):""}}else if(e.tickFormat){const l=e.domain();a=t.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=t.format(r));return a}function TLe(t,e,n){const r=X8(t,e),i=t.base(),s=Math.log(i),o=Math.max(1,i*e/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const DM={[dv]:"quantiles",[iL]:"thresholds",[sL]:"domain"},DLe={[dv]:"quantiles",[iL]:"domain"};function LLe(t,e){return t.bins?ant(t.bins):t.type===uh?TLe(t,e,!0):DM[t.type]?ont(t[DM[t.type]]()):X8(t,e)}function snt(t,e,n){const r=e[DLe[e.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return t.formatSpan(0,s,3*10,n)}function ont(t){const e=[-1/0].concat(t);return e.max=1/0,e}function ant(t){const e=t.slice(0,-1);return e.max=Hr(t),e}const lnt=t=>DM[t.type]||t.bins;function RLe(t,e,n,r,i,s,o){const a=DLe[e.type]&&s!==u0&&s!==c0?snt(t,e,i):kLe(t,e,n,i,s,o);return r===DA&&lnt(e)?unt(a):r===ent?cnt(a):dnt(a)}const unt=t=>(e,n,r)=>{const i=B1e(r[n+1],B1e(r.max,1/0)),s=z1e(e,t),o=z1e(i,t);return s&&o?s+"  "+o:o?"< "+o:" "+s},B1e=(t,e)=>t??e,cnt=t=>(e,n)=>n?t(e):null,dnt=t=>e=>t(e),z1e=(t,e)=>Number.isFinite(t)?e(t):null;function fnt(t){const e=t.domain(),n=e.length-1;let r=+e[0],i=+Hr(e),s=i-r;if(t.type===sL){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function hnt(t,e,n,r){const i=r||e.type;return Nt(n)&&Xtt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===u0?t.timeFormat("%A, %d %B %Y, %X"):!n&&i===c0?t.utcFormat("%A, %d %B %Y, %X UTC"):RLe(t,e,5,null,n,r,!0)}function FLe(t,e,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=hnt(t,e,n.format,n.formatType);if(TM(e.type)){const s=LLe(e).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(fv(e.type)){const s=e.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=e.domain();return`values from ${i(s[0])} to ${i(Hr(s))}`}}let OLe=0;function pnt(){OLe=0}const jk="p_";function Z8(t){return t&&t.gradient}function MLe(t,e,n){const r=t.gradient;let i=t.id,s=r==="radial"?jk:"";return i||(i=t.id="gradient_"+OLe++,r==="radial"?(t.x1=fd(t.x1,.5),t.y1=fd(t.y1,.5),t.r1=fd(t.r1,0),t.x2=fd(t.x2,.5),t.y2=fd(t.y2,.5),t.r2=fd(t.r2,.5),s=jk):(t.x1=fd(t.x1,0),t.y1=fd(t.y1,0),t.x2=fd(t.x2,1),t.y2=fd(t.y2,0))),e[i]=t,"url("+(n||"")+"#"+s+i+")"}function fd(t,e){return t??e}function ILe(t,e){var n=[],r;return r={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const j1e={basis:{curve:ftt},"basis-closed":{curve:htt},"basis-open":{curve:ptt},bundle:{curve:mtt,tension:"beta",value:.85},cardinal:{curve:gtt,tension:"tension",value:0},"cardinal-open":{curve:btt,tension:"tension",value:0},"cardinal-closed":{curve:ytt,tension:"tension",value:0},"catmull-rom":{curve:vtt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:xtt,tension:"alpha",value:.5},"catmull-rom-open":{curve:wtt,tension:"alpha",value:.5},linear:{curve:I8},"linear-closed":{curve:_tt},monotone:{horizontal:Ctt,vertical:Ett},natural:{curve:Stt},step:{curve:Att},"step-after":{curve:Ttt},"step-before":{curve:ktt}};function K8(t,e,n){var r=Yt(j1e,t)&&j1e[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const mnt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},gnt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,ynt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,bnt=/^((\s+,?\s*)|(,\s*))/,vnt=/^[01]/;function hv(t){const e=[];return(t.match(gnt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=mnt[s],a=xnt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)e.push([i,...a.slice(u,u+o)])}}),e}function xnt(t,e,n){const r=[];for(let i=0;e&&i<n.length;)for(let s=0;s<e;++s){const o=t==="a"&&(s===3||s===4)?vnt:ynt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(bnt);l!==null&&(i+=l[0].length)}return r}const Qp=Math.PI/180,wnt=1e-14,$g=Math.PI/2,wd=Math.PI*2,Hy=Math.sqrt(3)/2;var FF={},OF={},$Le=[].join;function _nt(t,e,n,r,i,s,o,a,l){const u=$Le.call(arguments);if(FF[u])return FF[u];const d=o*Qp,c=Math.sin(d),f=Math.cos(d);n=Math.abs(n),r=Math.abs(r);const h=f*(a-t)*.5+c*(l-e)*.5,p=f*(l-e)*.5-c*(a-t)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const b=f/n,y=c/n,v=-c/r,w=f/r,E=b*a+y*l,S=v*a+w*l,T=b*t+y*e,D=v*t+w*e;let R=1/((T-E)*(T-E)+(D-S)*(D-S))-.25;R<0&&(R=0);let O=Math.sqrt(R);s==i&&(O=-O);const B=.5*(E+T)-O*(D-S),K=.5*(S+D)+O*(T-E),L=Math.atan2(S-K,E-B);let $=Math.atan2(D-K,T-B)-L;$<0&&s===1?$+=wd:$>0&&s===0&&($-=wd);const U=Math.ceil(Math.abs($/($g+.001))),q=[];for(let Y=0;Y<U;++Y){const X=L+Y*$/U,te=L+(Y+1)*$/U;q[Y]=[B,K,X,te,n,r,c,f]}return FF[u]=q}function Ent(t){const e=$Le.call(t);if(OF[e])return OF[e];var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7];const d=u*o,c=-l*a,f=l*o,h=u*a,p=Math.cos(i),g=Math.sin(i),b=Math.cos(s),y=Math.sin(s),v=.5*(s-i),w=Math.sin(v*.5),E=8/3*w*w/Math.sin(v),S=n+p-E*g,T=r+g+E*p,D=n+b,k=r+y,R=D+E*y,O=k-E*b;return OF[e]=[d*S+c*T,f*S+h*T,d*R+c*O,f*R+h*O,d*D+c*k,f*D+h*k]}const _u=["l",0,0,0,0,0,0,0];function Cnt(t,e,n){const r=_u[0]=t[0];if(r==="a"||r==="A")_u[1]=e*t[1],_u[2]=n*t[2],_u[3]=t[3],_u[4]=t[4],_u[5]=t[5],_u[6]=e*t[6],_u[7]=n*t[7];else if(r==="h"||r==="H")_u[1]=e*t[1];else if(r==="v"||r==="V")_u[1]=n*t[1];else for(var i=1,s=t.length;i<s;++i)_u[i]=(i%2==1?e:n)*t[i];return _u}function h2(t,e,n,r,i,s){var o,a=null,l=0,u=0,d=0,c=0,f,h,p,g,b=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),t.beginPath&&t.beginPath();for(var v=0,w=e.length;v<w;++v){switch(o=e[v],(i!==1||s!==1)&&(o=Cnt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],t.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],t.lineTo(l+n,u+r);break;case"h":l+=o[1],t.lineTo(l+n,u+r);break;case"H":l=o[1],t.lineTo(l+n,u+r);break;case"v":u+=o[1],t.lineTo(l+n,u+r);break;case"V":u=o[1],t.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],b=l,y=u,t.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],b=l,y=u,t.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],d=l+o[3],c=u+o[4],t.bezierCurveTo(l+o[1]+n,u+o[2]+r,d+n,c+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],d=o[3],c=o[4],t.bezierCurveTo(o[1]+n,o[2]+r,d+n,c+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],d=2*l-d,c=2*u-c,t.bezierCurveTo(d+n,c+r,l+o[1]+n,u+o[2]+r,f+n,h+r),d=l+o[1],c=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],d=2*l-d,c=2*u-c,t.bezierCurveTo(d+n,c+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,d=o[1],c=o[2];break;case"q":f=l+o[3],h=u+o[4],d=l+o[1],c=u+o[2],t.quadraticCurveTo(d+n,c+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],t.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,d=o[1],c=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(d=l,c=u):a[0]==="t"?(d=2*l-p,c=2*u-g):a[0]==="q"&&(d=2*l-d,c=2*u-c),p=d,g=c,t.quadraticCurveTo(d+n,c+r,f+n,h+r),l=f,u=h,d=l+o[1],c=u+o[2];break;case"T":f=o[1],h=o[2],d=2*l-d,c=2*u-c,t.quadraticCurveTo(d+n,c+r,f+n,h+r),l=f,u=h;break;case"a":U1e(t,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":U1e(t,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=b,u=y,t.closePath();break}a=o}}function U1e(t,e,n,r){const i=_nt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n);for(let s=0;s<i.length;++s){const o=Ent(i[s]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const q1e=.5773502691896257,H1e={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,wd)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,s=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-s),t.lineTo(i,-s),t.lineTo(0,-n),t.lineTo(-i,-s),t.lineTo(-r,-s),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n,i=r-n*q1e,s=n/4;t.moveTo(0,-r-i),t.lineTo(-s,r-i),t.lineTo(s,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n,i=r-n*q1e;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hy*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function PLe(t){return Yt(H1e,t)?H1e[t]:Snt(t)}var MF={};function Snt(t){if(!Yt(MF,t)){const e=hv(t);MF[t]={draw:function(n,r){h2(n,e,0,0,Math.sqrt(r)/2)}}}return MF[t]}const ip=.448084975506;function Ant(t){return t.x}function knt(t){return t.y}function Tnt(t){return t.width}function Dnt(t){return t.height}function Tf(t){return typeof t=="function"?t:()=>+t}function wS(t,e,n){return Math.max(e,Math.min(t,n))}function NLe(){var t=Ant,e=knt,n=Tnt,r=Dnt,i=Tf(0),s=i,o=i,a=i,l=null;function u(d,c,f){var h,p=c??+t.call(this,d),g=f??+e.call(this,d),b=+n.call(this,d),y=+r.call(this,d),v=Math.min(b,y)/2,w=wS(+i.call(this,d),0,v),E=wS(+s.call(this,d),0,v),S=wS(+o.call(this,d),0,v),T=wS(+a.call(this,d),0,v);if(l||(l=h=QD()),w<=0&&E<=0&&S<=0&&T<=0)l.rect(p,g,b,y);else{var D=p+b,k=g+y;l.moveTo(p+w,g),l.lineTo(D-E,g),l.bezierCurveTo(D-ip*E,g,D,g+ip*E,D,g+E),l.lineTo(D,k-T),l.bezierCurveTo(D,k-ip*T,D-ip*T,k,D-T,k),l.lineTo(p+S,k),l.bezierCurveTo(p+ip*S,k,p,k-ip*S,p,k-S),l.lineTo(p,g+w),l.bezierCurveTo(p,g+ip*w,p+ip*w,g,p+w,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(d){return arguments.length?(t=Tf(d),u):t},u.y=function(d){return arguments.length?(e=Tf(d),u):e},u.width=function(d){return arguments.length?(n=Tf(d),u):n},u.height=function(d){return arguments.length?(r=Tf(d),u):r},u.cornerRadius=function(d,c,f,h){return arguments.length?(i=Tf(d),s=c!=null?Tf(c):i,a=f!=null?Tf(f):i,o=h!=null?Tf(h):s,u):i},u.context=function(d){return arguments.length?(l=d??null,u):l},u}function BLe(){var t,e,n,r,i=null,s,o,a,l;function u(c,f,h){const p=h/2;if(s){var g=a-f,b=c-o;if(g||b){var y=Math.hypot(g,b),v=(g/=y)*l,w=(b/=y)*l,E=Math.atan2(b,g);i.moveTo(o-v,a-w),i.lineTo(c-g*p,f-b*p),i.arc(c,f,p,E-Math.PI,E),i.lineTo(o+v,a+w),i.arc(o,a,l,E,E+Math.PI)}else i.arc(c,f,p,0,wd);i.closePath()}else s=1;o=c,a=f,l=p}function d(c){var f,h=c.length,p,g=!1,b;for(i==null&&(i=b=QD()),f=0;f<=h;++f)!(f<h&&r(p=c[f],f,c))===g&&(g=!g)&&(s=0),g&&u(+t(p,f,c),+e(p,f,c),+n(p,f,c));if(b)return i=null,b+""||null}return d.x=function(c){return arguments.length?(t=c,d):t},d.y=function(c){return arguments.length?(e=c,d):e},d.size=function(c){return arguments.length?(n=c,d):n},d.defined=function(c){return arguments.length?(r=c,d):r},d.context=function(c){return arguments.length?(c==null?i=null:i=c,d):i},d}function TE(t,e){return t??e}const DE=t=>t.x||0,LE=t=>t.y||0,Lnt=t=>t.width||0,Rnt=t=>t.height||0,Fnt=t=>(t.x||0)+(t.width||0),Ont=t=>(t.y||0)+(t.height||0),Mnt=t=>t.startAngle||0,Int=t=>t.endAngle||0,$nt=t=>t.padAngle||0,Pnt=t=>t.innerRadius||0,Nnt=t=>t.outerRadius||0,Bnt=t=>t.cornerRadius||0,znt=t=>TE(t.cornerRadiusTopLeft,t.cornerRadius)||0,jnt=t=>TE(t.cornerRadiusTopRight,t.cornerRadius)||0,Unt=t=>TE(t.cornerRadiusBottomRight,t.cornerRadius)||0,qnt=t=>TE(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Hnt=t=>TE(t.size,64),Gnt=t=>t.size||1,aL=t=>t.defined!==!1,Vnt=t=>PLe(t.shape||"circle"),Wnt=utt().startAngle(Mnt).endAngle(Int).padAngle($nt).innerRadius(Pnt).outerRadius(Nnt).cornerRadius(Bnt),Ynt=tLe().x(DE).y1(LE).y0(Ont).defined(aL),Xnt=tLe().y(LE).x1(DE).x0(Fnt).defined(aL),Znt=eLe().x(DE).y(LE).defined(aL),Knt=NLe().x(DE).y(LE).width(Lnt).height(Rnt).cornerRadius(znt,jnt,Unt,qnt),Jnt=dtt().type(Vnt).size(Hnt),Qnt=BLe().x(DE).y(LE).defined(aL).size(Gnt);function J8(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function ert(t,e){return Wnt.context(t)(e)}function trt(t,e){const n=e[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Xnt:Ynt).curve(K8(r,n.orient,n.tension)).context(t)(e)}function nrt(t,e){const n=e[0],r=n.interpolate||"linear";return Znt.curve(K8(r,n.orient,n.tension)).context(t)(e)}function p1(t,e,n,r){return Knt.context(t)(e,n,r)}function rrt(t,e){return(e.mark.shape||e.shape).context(t)(e)}function irt(t,e){return Jnt.context(t)(e)}function srt(t,e){return Qnt.context(t)(e)}var zLe=1;function jLe(){zLe=1}function Q8(t,e,n){var r=e.clip,i=t._defs,s=e.clip_id||(e.clip_id="clip"+zLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return sr(r)?o.path=r(null):J8(n)?o.path=p1(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function to(t){this.clear(),t&&this.union(t)}to.prototype={clone(){return new to(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(t,e,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,d=n-e*l-n*a;return[a*r-l*i+u,l*r+a*i+d,a*r-l*o+u,l*r+a*o+d,a*s-l*i+u,l*s+a*i+d,a*s-l*o+u,l*s+a*o+d]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lL(t){this.mark=t,this.bounds=this.bounds||new to}function uL(t){lL.call(this,t),this.items=this.items||[]}Lt(uL,lL);class ULe{constructor(e){this._pending=0,this._loader=e||jD()}pending(){return this._pending}sanitizeURL(e){const n=this;return G1e(n),n._loader.sanitize(e,{context:"href"}).then(r=>(xw(n),r)).catch(()=>(xw(n),null))}loadImage(e){const n=this,r=Dtt();return G1e(n),n._loader.sanitize(e,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Yt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>xw(n),o.onerror=()=>xw(n),o.src=s,o}).catch(i=>(xw(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const e=this;return new Promise(n=>{function r(i){e.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function G1e(t){t._pending+=1}function xw(t){t._pending-=1}function xh(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const r=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(r+(n?ort(e,r):0))}return t}function ort(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const art=wd-1e-8;let cL,LA,RA,qg,LM,FA,RM,FM;const Ap=(t,e)=>cL.add(t,e),OA=(t,e)=>Ap(LA=t,RA=e),V1e=t=>Ap(t,cL.y1),W1e=t=>Ap(cL.x1,t),Pg=(t,e)=>LM*t+RM*e,Ng=(t,e)=>FA*t+FM*e,IF=(t,e)=>Ap(Pg(t,e),Ng(t,e)),$F=(t,e)=>OA(Pg(t,e),Ng(t,e));function RE(t,e){return cL=t,e?(qg=e*Qp,LM=FM=Math.cos(qg),FA=Math.sin(qg),RM=-FA):(LM=FM=1,qg=FA=RM=0),lrt}const lrt={beginPath(){},closePath(){},moveTo:$F,lineTo:$F,rect(t,e,n,r){qg?(IF(t+n,e),IF(t+n,e+r),IF(t,e+r),$F(t,e)):(Ap(t+n,e+r),OA(t,e))},quadraticCurveTo(t,e,n,r){const i=Pg(t,e),s=Ng(t,e),o=Pg(n,r),a=Ng(n,r);Y1e(LA,i,o,V1e),Y1e(RA,s,a,W1e),OA(o,a)},bezierCurveTo(t,e,n,r,i,s){const o=Pg(t,e),a=Ng(t,e),l=Pg(n,r),u=Ng(n,r),d=Pg(i,s),c=Ng(i,s);X1e(LA,o,l,d,V1e),X1e(RA,a,u,c,W1e),OA(d,c)},arc(t,e,n,r,i,s){if(r+=qg,i+=qg,LA=n*Math.cos(i)+t,RA=n*Math.sin(i)+e,Math.abs(i-r)>art)Ap(t-n,e-n),Ap(t+n,e+n);else{const o=u=>Ap(n*Math.cos(u)+t,n*Math.sin(u)+e);let a,l;if(o(r),o(i),i!==r)if(r=r%wd,r<0&&(r+=wd),i=i%wd,i<0&&(i+=wd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=wd,a=r-r%$g,l=0;l<4&&a>i;++l,a-=$g)o(a);else for(a=r-r%$g+$g,l=0;l<4&&a<i;++l,a=a+$g)o(a)}}};function Y1e(t,e,n,r){const i=(t-e)/(t+n-2*e);0<i&&i<1&&r(t+(e-t)*i)}function X1e(t,e,n,r,i){const s=r-t+3*e-3*n,o=t+n-2*e,a=t-e;let l=0,u=0,d;Math.abs(s)>wnt?(d=o*o+a*s,d>=0&&(d=Math.sqrt(d),l=(-o+d)/s,u=(-o-d)/s)):l=.5*a/o,0<l&&l<1&&i(Z1e(l,t,e,n,r)),0<u&&u<1&&i(Z1e(u,t,e,n,r))}function Z1e(t,e,n,r,i){const s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*n+3*s*a*r+a*t*i}var qp=(qp=Up(1,1))?qp.getContext("2d"):null;const OM=new to;function eN(t){return function(e,n){if(!qp)return!0;t(qp,e),OM.clear().union(e.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=OM;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(qp.isPointInPath(l,a))return!0;return!1}}function tN(t,e){return e.contains(t.x||0,t.y||0)}function qLe(t,e){const n=t.x||0,r=t.y||0,i=t.width||0,s=t.height||0;return e.intersects(OM.set(n,r,n+i,r+s))}function HLe(t,e){const n=t.x||0,r=t.y||0,i=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:r;return xb(e,n,r,i,s)}function xb(t,e,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=t,u=r-e,d=i-n;let c=0,f=1,h,p,g,b;for(b=0;b<4;++b){if(b===0&&(h=-u,p=-(s-e)),b===1&&(h=u,p=a-e),b===2&&(h=-d,p=-(o-n)),b===3&&(h=d,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>f)return!1;g>c&&(c=g)}else if(h>0){if(g<c)return!1;g<f&&(f=g)}}return!0}function pv(t,e){t.globalCompositeOperation=e.blend||"source-over"}function dc(t,e){return t??e}function K1e(t,e){const n=e.length;for(let r=0;r<n;++r)t.addColorStop(e[r].offset,e[r].color);return t}function urt(t,e,n){const r=n.width(),i=n.height();let s;if(e.gradient==="radial")s=t.createRadialGradient(n.x1+dc(e.x1,.5)*r,n.y1+dc(e.y1,.5)*i,Math.max(r,i)*dc(e.r1,0),n.x1+dc(e.x2,.5)*r,n.y1+dc(e.y2,.5)*i,Math.max(r,i)*dc(e.r2,.5));else{const o=dc(e.x1,0),a=dc(e.y1,0),l=dc(e.x2,1),u=dc(e.y2,0);if(o===l||a===u||r===i)s=t.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const d=Up(Math.ceil(r),Math.ceil(i)),c=d.getContext("2d");return c.scale(r,i),c.fillStyle=K1e(c.createLinearGradient(o,a,l,u),e.stops),c.fillRect(0,0,r,i),t.createPattern(d,"no-repeat")}}return K1e(s,e.stops)}function GLe(t,e,n){return Z8(n)?urt(t,n,e.bounds):n}function Uk(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=GLe(t,e,e.fill),!0):!1}var crt=[];function mv(t,e,n){var r=(r=e.strokeWidth)!=null?r:1;return r<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=GLe(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||crt),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function drt(t,e){return t.zindex-e.zindex||t.index-e.index}function nN(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],r,i,s;for(i=0,s=e.length;i<s;++i)r=e[i],r.index=i,r.zindex&&n.push(r);return t.zdirty=!1,t.zitems=n.sort(drt)}function $c(t,e){var n=t.items,r,i;if(!n||!n.length)return;const s=nN(t);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||e(n[r]);n=s}for(r=0,i=n.length;r<i;++r)e(n[r])}function qk(t,e){var n=t.items,r,i;if(!n||!n.length)return null;const s=nN(t);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=e(n[i]))return r;if(n===s){for(n=t.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=e(n[i])))return r}return null}function rN(t){return function(e,n,r){$c(n,i=>{(!r||r.intersects(i.bounds))&&VLe(t,e,i,i)})}}function frt(t){return function(e,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&VLe(t,e,n.items[0],n.items)}}function VLe(t,e,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(t(e,r)||(pv(e,n),n.fill&&Uk(e,n,i)&&e.fill(),n.stroke&&mv(e,n,i)&&e.stroke()))}function dL(t){return t=t||zu,function(e,n,r,i,s,o){return r*=e.pixelRatio,i*=e.pixelRatio,qk(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&t(e,a,r,i,s,o))return a})}}function FE(t,e){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=e??o.fill,l=o.stroke&&n.isPointInStroke,u,d;return l&&(u=o.strokeWidth,d=o.strokeCap,n.lineWidth=u??1,n.lineCap=d??"butt"),t(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function iN(t){return dL(FE(t))}function Xg(t,e){return"translate("+t+","+e+")"}function sN(t){return"rotate("+t+")"}function hrt(t,e){return"scale("+t+","+e+")"}function WLe(t){return Xg(t.x||0,t.y||0)}function prt(t){return Xg(t.x||0,t.y||0)+(t.angle?" "+sN(t.angle):"")}function mrt(t){return Xg(t.x||0,t.y||0)+(t.angle?" "+sN(t.angle):"")+(t.scaleX||t.scaleY?" "+hrt(t.scaleX||1,t.scaleY||1):"")}function oN(t,e,n){function r(o,a){o("transform",prt(a)),o("d",e(null,a))}function i(o,a){return e(RE(o,a.angle),a),xh(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,d=a.angle||0;o.translate(l,u),d&&o.rotate(d*=Qp),o.beginPath(),e(o,a),d&&o.rotate(-d),o.translate(-l,-u)}return{type:t,tag:"path",nested:!1,attr:r,bound:i,draw:rN(s),pick:iN(s),isect:n||eN(s)}}var grt=oN("arc",ert);function yrt(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],r=t[0].orient==="horizontal"?"y":"x",i=t.length,s=1/0,o,a;--i>=0;)t[i].defined!==!1&&(a=Math.abs(t[i][r]-n),a<s&&(s=a,o=t[i]));return o}function brt(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),r=t.length,i,s,o;--r>=0;)if(t[r].defined!==!1&&(i=t[r].x-e[0],s=t[r].y-e[1],o=i*i+s*s,o<n))return t[r];return null}function vrt(t,e){for(var n=t.length,r,i,s;--n>=0;)if(t[n].defined!==!1&&(r=t[n].x-e[0],i=t[n].y-e[1],s=r*r+i*i,r=t[n].size||1,s<r*r))return t[n];return null}function aN(t,e,n){function r(l,u){var d=u.mark.items;d.length&&l("d",e(null,d))}function i(l,u){var d=u.items;return d.length===0?l:(e(RE(l),d),xh(l,d[0]))}function s(l,u){l.beginPath(),e(l,u)}const o=FE(s);function a(l,u,d,c,f,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(f,h)?null:(d*=l.pixelRatio,c*=l.pixelRatio,o(l,p,d,c)?p[0]:null)}return{type:t,tag:"path",nested:!0,attr:r,bound:i,draw:frt(s),pick:a,isect:tN,tip:n}}var xrt=aN("area",trt,yrt);function wrt(t,e){var n=e.clip;t.save(),sr(n)?(t.beginPath(),n(t),t.clip()):YLe(t,e.group)}function YLe(t,e){t.beginPath(),J8(e)?p1(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function XLe(t){const e=dc(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function _rt(t,e){t("transform",WLe(e))}function ZLe(t,e){const n=XLe(e);t("d",p1(null,e,n,n))}function Ert(t,e){t("class","background"),t("aria-hidden",!0),ZLe(t,e)}function Crt(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?ZLe(t,e):t("d","")}function Srt(t,e,n){const r=e.clip?Q8(n,e,e):null;t("clip-path",r)}function Art(t,e){if(!e.clip&&e.items){const n=e.items,r=n.length;for(let i=0;i<r;++i)t.union(n[i].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),xh(t,e),t.translate(e.x||0,e.y||0)}function p2(t,e,n,r){const i=XLe(e);t.beginPath(),p1(t,e,(n||0)+i,(r||0)+i)}const krt=FE(p2),Trt=FE(p2,!1),Drt=FE(p2,!0);function Lrt(t,e,n,r){$c(e,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(p2(t,i,s,o),pv(t,i),i.fill&&Uk(t,i,l)&&t.fill(),i.stroke&&!a&&mv(t,i,l)&&t.stroke()),t.save(),t.translate(s,o),i.clip&&YLe(t,i),n&&n.translate(-s,-o),$c(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(t,u,n,r)}),n&&n.translate(s,o),t.restore(),a&&i.stroke&&l&&(p2(t,i,s,o),pv(t,i),mv(t,i,l)&&t.stroke())})}function Rrt(t,e,n,r,i,s){if(e.bounds&&!e.bounds.contains(i,s)||!e.items)return null;const o=n*t.pixelRatio,a=r*t.pixelRatio;return qk(e,l=>{let u,d,c;const f=l.bounds;if(f&&!f.contains(i,s))return;d=l.x||0,c=l.y||0;const h=d+(l.width||0),p=c+(l.height||0),g=l.clip;if(g&&(i<d||i>h||s<c||s>p))return;if(t.save(),t.translate(d,c),d=i-d,c=s-c,g&&J8(l)&&!Drt(t,l,o,a))return t.restore(),null;const b=l.strokeForeground,y=e.interactive!==!1;return y&&b&&l.stroke&&Trt(t,l,o,a)?(t.restore(),l):(u=qk(l,v=>Frt(v,d,c)?this.pick(v,n,r,d,c):null),!u&&y&&(l.fill||!b&&l.stroke)&&krt(t,l,o,a)&&(u=l),t.restore(),u||null)})}function Frt(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var Ort={type:"group",tag:"g",nested:!1,attr:_rt,bound:Art,draw:Lrt,pick:Rrt,isect:qLe,content:Srt,background:Ert,foreground:Crt},m2={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function lN(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(r=>{t.image=r,t.image.url=t.url})),n}function uN(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function cN(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function fL(t,e){return t==="center"?e/2:t==="right"?e:0}function hL(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function Mrt(t,e,n){const r=lN(e,n),i=uN(e,r),s=cN(e,r),o=(e.x||0)-fL(e.align,i),a=(e.y||0)-hL(e.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";t("href",l,m2["xmlns:xlink"],"xlink:href"),t("transform",Xg(o,a)),t("width",i),t("height",s),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function Irt(t,e){const n=e.image,r=uN(e,n),i=cN(e,n),s=(e.x||0)-fL(e.align,r),o=(e.y||0)-hL(e.baseline,i);return t.set(s,o,s+r,o+i)}function $rt(t,e,n){$c(e,r=>{if(n&&!n.intersects(r.bounds))return;const i=lN(r,this);let s=uN(r,i),o=cN(r,i);if(s===0||o===0)return;let a=(r.x||0)-fL(r.align,s),l=(r.y||0)-hL(r.baseline,o),u,d,c,f;r.aspect!==!1&&(d=i.width/i.height,c=r.width/r.height,d===d&&c===c&&d!==c&&(c<d?(f=s/d,l+=(o-f)/2,o=f):(f=o*d,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(pv(t,r),t.globalAlpha=(u=r.opacity)!=null?u:1,t.imageSmoothingEnabled=r.smooth!==!1,t.drawImage(i,a,l,s,o))})}var Prt={type:"image",tag:"image",nested:!1,attr:Mrt,bound:Irt,draw:$rt,pick:dL(),isect:zu,get:lN,xOffset:fL,yOffset:hL},Nrt=aN("line",nrt,brt);function Brt(t,e){var n=e.scaleX||1,r=e.scaleY||1;(n!==1||r!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",mrt(e)),t("d",e.path)}function MA(t,e){var n=e.path;if(n==null)return!0;var r=e.x||0,i=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*Qp,l=e.pathCache;(!l||l.path!==n)&&((e.pathCache=l=hv(n)).path=n),a&&t.rotate&&t.translate?(t.translate(r,i),t.rotate(a),h2(t,l,0,0,s,o),t.rotate(-a),t.translate(-r,-i)):h2(t,l,r,i,s,o)}function zrt(t,e){return MA(RE(t,e.angle),e)?t.set(0,0,0,0):xh(t,e,!0)}var jrt={type:"path",tag:"path",nested:!1,attr:Brt,bound:zrt,draw:rN(MA),pick:iN(MA),isect:eN(MA)};function Urt(t,e){t("d",p1(null,e))}function qrt(t,e){var n,r;return xh(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function J1e(t,e){t.beginPath(),p1(t,e)}var Hrt={type:"rect",tag:"path",nested:!1,attr:Urt,bound:qrt,draw:rN(J1e),pick:iN(J1e),isect:qLe};function Grt(t,e){t("transform",WLe(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Vrt(t,e){var n,r;return xh(t.set(n=e.x||0,r=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:r),e)}function KLe(t,e,n){var r,i,s,o;return e.stroke&&mv(t,e,n)?(r=e.x||0,i=e.y||0,s=e.x2!=null?e.x2:r,o=e.y2!=null?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(s,o),!0):!1}function Wrt(t,e,n){$c(e,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&KLe(t,r,i)&&(pv(t,r),t.stroke())}})}function Yrt(t,e,n,r){return t.isPointInStroke?KLe(t,e,1)&&t.isPointInStroke(n,r):!1}var Xrt={type:"rule",tag:"line",nested:!1,attr:Grt,bound:Vrt,draw:Wrt,pick:dL(Yrt),isect:HLe},Zrt=oN("shape",rrt),Krt=oN("symbol",irt,tN);const Q1e=gTe();var su={height:Jd,measureWidth:dN,estimateWidth:Hk,width:Hk,canvas:JLe};JLe(!0);function JLe(t){su.width=t&&qp?dN:Hk}function Hk(t,e){return QLe(tm(t,e),Jd(t))}function QLe(t,e){return~~(.8*t.length*e)}function dN(t,e){return Jd(t)<=0||!(e=tm(t,e))?0:eRe(e,pL(t))}function eRe(t,e){const n=`(${e}) ${t}`;let r=Q1e.get(n);return r===void 0&&(qp.font=e,r=qp.measureText(t).width,Q1e.set(n,r)),r}function Jd(t){return t.fontSize!=null?+t.fontSize||0:11}function em(t){return t.lineHeight!=null?t.lineHeight:Jd(t)+2}function Jrt(t){return at(t)?t.length>1?t:t[0]:t}function OE(t){return Jrt(t.lineBreak&&t.text&&!at(t.text)?t.text.split(t.lineBreak):t.text)}function fN(t){const e=OE(t);return(at(e)?e.length-1:0)*em(t)}function tm(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?eit(t,n):n}function Qrt(t){if(su.width===dN){const e=pL(t);return n=>eRe(n,e)}else if(su.width===Hk){const e=Jd(t);return n=>QLe(n,e)}else return e=>su.width(t,e)}function eit(t,e){var n=+t.limit,r=Qrt(t);if(r(e)<n)return e;var i=t.ellipsis||"",s=t.dir==="rtl",o=0,a=e.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(e.slice(l))>n?o=l+1:a=l;return i+e.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(e.slice(0,l))<n?o=l:a=l-1;return e.slice(0,o)+i}}function ME(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function pL(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Jd(t)+"px "+ME(t,e)}function hN(t){var e=t.baseline,n=Jd(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*em(t):e==="line-bottom"?.29*n-.5*em(t):0)}const tit={left:"start",center:"middle",right:"end"},S_=new to;function mL(t){var e=t.x||0,n=t.y||0,r=t.radius||0,i;return r&&(i=(t.theta||0)-$g,e+=r*Math.cos(i),n+=r*Math.sin(i)),S_.x1=e,S_.y1=n,S_}function nit(t,e){var n=e.dx||0,r=(e.dy||0)+hN(e),i=mL(e),s=i.x1,o=i.y1,a=e.angle||0,l;t("text-anchor",tit[e.align]||"start"),a?(l=Xg(s,o)+" "+sN(a),(n||r)&&(l+=" "+Xg(n,r))):l=Xg(s+n,o+r),t("transform",l)}function pN(t,e,n){var r=su.height(e),i=e.align,s=mL(e),o=s.x1,a=s.y1,l=e.dx||0,u=(e.dy||0)+hN(e)-Math.round(.8*r),d=OE(e),c;if(at(d)?(r+=em(e)*(d.length-1),c=d.reduce((f,h)=>Math.max(f,su.width(e,h)),0)):c=su.width(e,d),i==="center"?l-=c/2:i==="right"&&(l-=c),t.set(l+=o,u+=a,l+c,u+r),e.angle&&!n)t.rotate(e.angle*Qp,o,a);else if(n===2)return t.rotatedPoints(e.angle*Qp,o,a);return t}function rit(t,e,n){$c(e,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,d,c;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(t.font=pL(r),t.textAlign=r.align||"left",s=mL(r),o=s.x1,a=s.y1,r.angle&&(t.save(),t.translate(o,a),t.rotate(r.angle*Qp),o=a=0),o+=r.dx||0,a+=(r.dy||0)+hN(r),d=OE(r),pv(t,r),at(d))for(u=em(r),l=0;l<d.length;++l)c=tm(r,d[l]),r.fill&&Uk(t,r,i)&&t.fillText(c,o,a),r.stroke&&mv(t,r,i)&&t.strokeText(c,o,a),a+=u;else c=tm(r,d),r.fill&&Uk(t,r,i)&&t.fillText(c,o,a),r.stroke&&mv(t,r,i)&&t.strokeText(c,o,a);r.angle&&t.restore()}})}function iit(t,e,n,r,i,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=mL(e),a=o.x1,l=o.y1,u=pN(S_,e,1),d=-e.angle*Qp,c=Math.cos(d),f=Math.sin(d),h=c*i-f*s+(a-c*a+f*l),p=f*i+c*s+(l-f*a-c*l);return u.contains(h,p)}function sit(t,e){const n=pN(S_,t,2);return xb(e,n[0],n[1],n[2],n[3])||xb(e,n[0],n[1],n[4],n[5])||xb(e,n[4],n[5],n[6],n[7])||xb(e,n[2],n[3],n[6],n[7])}var oit={type:"text",tag:"text",nested:!1,attr:nit,bound:pN,draw:rit,pick:dL(iit),isect:sit},ait=aN("trail",srt,vrt),pu={arc:grt,area:xrt,group:Ort,image:Prt,line:Nrt,path:jrt,rect:Hrt,rule:Xrt,shape:Zrt,symbol:Krt,text:oit,trail:ait};function MM(t,e,n){var r=pu[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new to),t,n)}var exe={mark:null};function tRe(t,e,n){var r=pu[t.marktype],i=r.bound,s=t.items,o=s&&s.length,a,l,u,d;if(r.nested)return o?u=s[0]:(exe.mark=t,u=exe),d=MM(u,i,n),e=e&&e.union(d)||d,e;if(e=e||t.bounds&&t.bounds.clear()||new to,o)for(a=0,l=s.length;a<l;++a)e.union(MM(s[a],i,n));return t.bounds=e}const lit=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function nRe(t,e){return JSON.stringify(t,lit,e)}function rRe(t){const e=typeof t=="string"?JSON.parse(t):t;return iRe(e)}function iRe(t){var e=t.marktype,n=t.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=e?"mark":"group",n[i][r]=t,n[i].zindex&&(n[i][r].zdirty=!0),(e||r)==="group"&&iRe(n[i]);return e&&tRe(t),t}class sRe{constructor(e){arguments.length?this.root=rRe(e):(this.root=txe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new uL(this.root)])}toJSON(e){return nRe(this.root,e||0)}mark(e,n,r){n=n||this.root.items[0];const i=txe(e,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function txe(t,e){const n={bounds:new to,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function kp(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function mN(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function mo(t,e,n,r){var i=t.childNodes[e],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=kp(t.ownerDocument,n,r),t.insertBefore(i,s)),i}function Tu(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function oRe(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function gL(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function uit(t,e,n,r){var i=t&&t.mark,s,o;if(i&&(s=pu[i.marktype]).tip){for(o=gL(e,n),o[0]-=r[0],o[1]-=r[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=s.tip(i.items,o)}return t}let gN=class{constructor(e,n){this._active=null,this._handlers={},this._loader=e||jD(),this._tooltip=n||cit}initialize(e,n,r){return this._el=e,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,n,r){for(let i=e?e.length:0;--i>=0;)if(e[i].type===n&&(!r||e[i].handler===r))return i;return-1}handlers(e){const n=this._handlers,r=[];if(e)r.push(...n[this.eventName(e)]);else for(const i in n)r.push(...n[i]);return r}eventName(e){const n=e.indexOf(".");return n<0?e:e.slice(0,n)}handleHref(e,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(e.type,e),o=kp(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(e,n,r){if(n&&n.tooltip!=null){n=uit(n,e,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,e,n,i)}}getItemBoundingClientRect(e){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=e.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;e.mark&&(e=e.mark.group);)l+=e.x||0,u+=e.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function cit(t,e,n,r){t.element().setAttribute("title",r||"")}let IE=class{constructor(e){this._el=null,this._bgcolor=null,this._loader=new ULe(e)}initialize(e,n,r,i,s){return this._el=e,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)}resize(e,n,r,i){return this._width=e,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(e,n){const r=this;return r._call=function(){r._render(e,n)},r._call(),r._call=null,r}_render(){}renderAsync(e,n){const r=this.render(e,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(e,n){var r=this,i=r._loader[e](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}};const dit="keydown",fit="keypress",hit="keyup",aRe="dragenter",IA="dragleave",lRe="dragover",IM="pointerdown",pit="pointerup",Gk="pointermove",$A="pointerout",uRe="pointerover",$M="mousedown",mit="mouseup",cRe="mousemove",Vk="mouseout",dRe="mouseover",Wk="click",git="dblclick",yit="wheel",fRe="mousewheel",Yk="touchstart",Xk="touchmove",Zk="touchend",bit=[dit,fit,hit,aRe,IA,lRe,IM,pit,Gk,$A,uRe,$M,mit,cRe,Vk,dRe,Wk,git,yit,fRe,Yk,Xk,Zk],PM=Gk,A_=Vk,NM=Wk;class $E extends gN{constructor(e,n){super(e,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=bit,this.pointermove=rxe([Gk,cRe],[uRe,dRe],[$A,Vk]),this.dragover=rxe([lRe],[aRe],[IA]),this.pointerout=ixe([$A,Vk]),this.dragleave=ixe([IA])}initialize(e,n,r){return this._canvas=e&&mN(e,"canvas"),[Wk,$M,IM,Gk,$A,IA].forEach(i=>nxe(this,i)),super.initialize(e,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(fRe,e)}pointerdown(e){this._down=this._active,this.fire(IM,e)}mousedown(e){this._down=this._active,this.fire($M,e)}click(e){this._down===this._active&&(this.fire(Wk,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Yk,e,!0)}touchmove(e){this.fire(Xk,e,!0)}touchend(e){this.fire(Zk,e,!0),this._touch=null}fire(e,n,r){const i=r?this._touch:this._active,s=this._handlers[e];if(n.vegaType=e,e===NM&&i&&i.href?this.handleHref(n,i,i.href):(e===PM||e===A_)&&this.handleTooltip(n,i,e!==A_),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(e,n){const r=this.eventName(e),i=this._handlers;return this._handlerIndex(i[r],e,n)<0&&(nxe(this,e),(i[r]||(i[r]=[])).push({type:e,handler:n})),this}off(e,n){const r=this.eventName(e),i=this._handlers[r],s=this._handlerIndex(i,e,n);return s>=0&&i.splice(s,1),this}pickEvent(e){const n=gL(e,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(e,n,r,i,s){const o=this.context();return pu[e.marktype].pick.call(this,o,e,n,r,i,s)}}const vit=t=>t===Yk||t===Xk||t===Zk?[Yk,Xk,Zk]:[t];function nxe(t,e){vit(e).forEach(n=>xit(t,n))}function xit(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?r=>t[e](r):r=>t.fire(e,r)))}function Kw(t,e,n){e.forEach(r=>t.fire(r,n))}function rxe(t,e,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?Kw(this,t,r):((!i||!i.exit)&&Kw(this,n,r),this._active=s,Kw(this,e,r),Kw(this,t,r))}}function ixe(t){return function(e){Kw(this,t,e),this._active=null}}function wit(){return typeof window<"u"&&window.devicePixelRatio||1}function _it(t,e,n,r,i,s){const o=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),l=o?wit():i;t.width=e*l,t.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),t}class Kk extends IE{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new to,this._tempb=new to}initialize(e,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Up(1,1,this._options.type),e&&this._canvas&&(Tu(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,n,r,i,s)}resize(e,n,r,i){if(super.resize(e,n,r,i),this._canvas)_it(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ot("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){const n=this._tempb.clear().union(e.bounds);let r=e.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(e,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=Eit(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):Cit(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,e,u,n),r.restore(),a.clear(),this}draw(e,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=pu[n.marktype];n.clip&&wrt(e,n),s.draw.call(this,e,n,r,i),n.clip&&e.restore()}clear(e,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(e,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,n,r,i))}}const Eit=(t,e,n)=>new to().set(0,0,e,n).translate(-t[0],-t[1]);function Cit(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}class hRe extends gN{constructor(e,n){super(e,n);const r=this;r._hrefHandler=PF(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=PF(r,(i,s)=>{r.handleTooltip(i,s,i.type!==A_)})}initialize(e,n,r){let i=this._svg;return i&&(i.removeEventListener(NM,this._hrefHandler),i.removeEventListener(PM,this._tooltipHandler),i.removeEventListener(A_,this._tooltipHandler)),this._svg=i=e&&mN(e,"svg"),i&&(i.addEventListener(NM,this._hrefHandler),i.addEventListener(PM,this._tooltipHandler),i.addEventListener(A_,this._tooltipHandler)),super.initialize(e,n,r)}canvas(){return this._svg}on(e,n){const r=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[r],e,n)<0){const o={type:e,handler:n,listener:PF(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(e,n){const r=this.eventName(e),i=this._handlers[r],s=this._handlerIndex(i,e,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const PF=(t,e)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,e.call(t._obj,n,r)},pRe="aria-hidden",yN="aria-label",bN="role",vN="aria-roledescription",mRe="graphics-object",xN="graphics-symbol",gRe=(t,e,n)=>({[bN]:t,[vN]:e,[yN]:n||void 0}),Sit=Mc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),sxe={axis:{desc:"axis",caption:Tit},legend:{desc:"legend",caption:Dit},"title-text":{desc:"title",caption:t=>`Title text '${axe(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${axe(t)}'`}},oxe={ariaRole:bN,ariaRoleDescription:vN,description:yN};function yRe(t,e){const n=e.aria===!1;if(t(pRe,n||void 0),n||e.description==null)for(const r in oxe)t(oxe[r],void 0);else{const r=e.mark.marktype;t(yN,e.description),t(bN,e.ariaRole||(r==="group"?mRe:xN)),t(vN,e.ariaRoleDescription||`${r} mark`)}}function bRe(t){return t.aria===!1?{[pRe]:!0}:Sit[t.role]?null:sxe[t.role]?kit(t,sxe[t.role]):Ait(t)}function Ait(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(r=>r.description!=null&&r.aria!==!1);return gRe(n?mRe:xN,`${e} mark container`,t.description)}function kit(t,e){try{const n=t.items[0],r=e.caption||(()=>"");return gRe(e.role||xN,e.desc,n.description||r(n))}catch{return null}}function axe(t){return Pt(t.text).join(" ")}function Tit(t){const e=t.datum,n=t.orient,r=e.title?vRe(t):null,i=t.context,s=i.scales[e.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${fv(a)?"discrete":a} scale with ${FLe(o,s,t)}`}function Dit(t){const e=t.datum,n=e.title?vRe(t):null,r=`${e.type||""} legend`.trim(),i=e.scales,s=Object.keys(i),o=t.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return Rit(r)+(n?` titled '${n}'`:"")+` for ${Lit(s)} with ${FLe(l,a,t)}`}function vRe(t){try{return Pt(Hr(t.items).items[0].text).join(" ")}catch{return null}}function Lit(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Hr(t)}function Rit(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const xRe=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fit=t=>xRe(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function wN(){let t="",e="",n="";const r=[],i=()=>e=n="",s=l=>{e&&(t+=`${e}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(e+=` ${l}="${Fit(u)}"`),a),a={open(l){s(l),e="<"+l;for(var u=arguments.length,d=new Array(u>1?u-1:0),c=1;c<u;c++)d[c-1]=arguments[c];for(const f of d)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return e?t+=e+(n?`>${n}</${l}>`:"/>"):t+=`</${l}>`,i(),a},attr:o,text:l=>(n+=xRe(l),a),toString:()=>t};return a}const wRe=t=>_Re(wN(),t)+"";function _Re(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,r=n.length;for(let i=0;i<r;++i)t.attr(n[i].name,n[i].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const r of n)r.nodeType===3?t.text(r.nodeValue):_Re(t,r)}return t.close()}const Jk={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Qk={blend:"mix-blend-mode"},ERe={fill:"none","stroke-miterlimit":10},ww=0,lxe="http://www.w3.org/2000/xmlns/",po=m2.xmlns;class _N extends IE{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,n,r,i,s){return this._defs={},this._clearDefs(),e&&(this._svg=mo(e,0,"svg",po),this._svg.setAttributeNS(lxe,"xmlns",po),this._svg.setAttributeNS(lxe,"xmlns:xlink",m2["xmlns:xlink"]),this._svg.setAttribute("version",m2.version),this._svg.setAttribute("class","marks"),Tu(e,1),this._root=mo(this._svg,ww,"g",po),Tp(this._root,ERe),Tu(this._svg,ww+1)),this.background(this._bgcolor),super.initialize(e,n,r,i,s)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,n,r,i){return super.resize(e,n,r,i),this._svg&&(Tp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const e=this._svg,n=this._bgcolor;if(!e)return null;let r;n&&(e.removeAttribute("style"),r=mo(e,ww,"rect",po),Tp(r,{width:this._width,height:this._height,fill:n}));const i=wRe(e);return n&&(e.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(e,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,n),Tu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=e.length;a<l;++a)if(r=e[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=pu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,uxe(r,n),i.items.forEach(d=>{d.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,uxe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(e,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=pu[o],l=n.interactive===!1?"none":null,u=a.tag==="g",d=cxe(n,e,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Tu(d,0),n._svg;d.setAttribute("class",oRe(n));const c=bRe(n);for(const g in c)Ha(d,g,c[g]);u||Ha(d,"pointer-events",l),Ha(d,"clip-path",n.clip?Q8(this,n,n.group):null);let f=null,h=0;const p=g=>{const b=this.isDirty(g),y=cxe(g,d,f,a.tag,s);b&&(this._update(a,y,g),u&&Iit(this,y,g,i)),f=y,++h};return a.nested?n.items.length&&p(n.items[0]):$c(n,p),Tu(d,h),d}_update(e,n,r){Gf=n,Sa=n.__values__,yRe(k_,r),e.attr(k_,r,this);const i=Pit[e.type];i&&i.call(this,e,n,r),Gf&&this.style(Gf,r)}style(e,n){if(n!=null){for(const r in Jk){let i=r==="font"?ME(n):n[r];if(i===Sa[r])continue;const s=Jk[r];i==null?e.removeAttribute(s):(Z8(i)&&(i=MLe(i,this._defs.gradient,CRe())),e.setAttribute(s,i+"")),Sa[r]=i}for(const r in Qk)PA(e,Qk[r],n[r])}}defs(){const e=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=mo(e,ww+1,"defs",po)),i=Oit(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=mo(e,ww+1,"defs",po)),i=Mit(r,n.clipping[s],i);r&&(i===0?(e.removeChild(r),n.el=null):Tu(r,i))}_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}}function uxe(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function Oit(t,e,n){let r,i,s;if(e.gradient==="radial"){let o=mo(t,n++,"pattern",po);Tp(o,{id:jk+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=mo(o,0,"rect",po),Tp(o,{width:1,height:1,fill:`url(${CRe()}#${e.id})`}),t=mo(t,n++,"radialGradient",po),Tp(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=mo(t,n++,"linearGradient",po),Tp(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(r=0,i=e.stops.length;r<i;++r)s=mo(t,r,"stop",po),s.setAttribute("offset",e.stops[r].offset),s.setAttribute("stop-color",e.stops[r].color);return Tu(t,r),n}function Mit(t,e,n){let r;return t=mo(t,n,"clipPath",po),t.setAttribute("id",e.id),e.path?(r=mo(t,0,"path",po),r.setAttribute("d",e.path)):(r=mo(t,0,"rect",po),Tp(r,{x:0,y:0,width:e.width,height:e.height})),Tu(t,1),n+1}function Iit(t,e,n,r){e=e.lastChild.previousSibling;let i,s=0;$c(n,o=>{i=t.mark(e,o,i,r),++s}),Tu(e,1+s)}function cxe(t,e,n,r,i){let s=t._svg,o;if(!s&&(o=e.ownerDocument,s=kp(o,r,po),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},r==="g"))){const a=kp(o,"path",po);s.appendChild(a),a.__data__=t;const l=kp(o,"g",po);s.appendChild(l),l.__data__=t;const u=kp(o,"path",po);s.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||$it(s,n))&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}function $it(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let Gf=null,Sa=null;const Pit={group(t,e,n){const r=Gf=e.childNodes[2];Sa=r.__values__,t.foreground(k_,n,this),Sa=e.__values__,Gf=e.childNodes[1],t.content(k_,n,this);const i=Gf=e.childNodes[0];t.background(k_,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Sa.events&&(Ha(r,"pointer-events",s),Ha(i,"pointer-events",s),Sa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ha(r,"display",null),this.style(i,n),Ha(i,"stroke",null),o&&(n.fill=null),Sa=r.__values__,this.style(r,n),o&&(n.fill=o),Gf=null}else Ha(r,"display","none")},image(t,e,n){n.smooth===!1?(PA(e,"image-rendering","optimizeSpeed"),PA(e,"image-rendering","pixelated")):PA(e,"image-rendering",null)},text(t,e,n){const r=OE(n);let i,s,o,a;at(r)?(s=r.map(l=>tm(n,l)),i=s.join(`
`),i!==Sa.text&&(Tu(e,0),o=e.ownerDocument,a=em(n),s.forEach((l,u)=>{const d=kp(o,"tspan",po);d.__data__=n,d.textContent=l,u&&(d.setAttribute("x",0),d.setAttribute("dy",a)),e.appendChild(d)}),Sa.text=i)):(s=tm(n,r),s!==Sa.text&&(e.textContent=s,Sa.text=s)),Ha(e,"font-family",ME(n)),Ha(e,"font-size",Jd(n)+"px"),Ha(e,"font-style",n.fontStyle),Ha(e,"font-variant",n.fontVariant),Ha(e,"font-weight",n.fontWeight)}};function k_(t,e,n){e!==Sa[t]&&(n?Nit(Gf,t,e,n):Ha(Gf,t,e),Sa[t]=e)}function PA(t,e,n){n!==Sa[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Sa[e]=n)}function Tp(t,e){for(const n in e)Ha(t,n,e[n])}function Ha(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function Nit(t,e,n,r){n!=null?t.setAttributeNS(r,e,n):t.removeAttributeNS(r,e)}function CRe(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}class SRe extends IE{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){const n=wN();n.open("svg",ir({},m2,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ERe,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this}mark(e,n){const r=pu[n.marktype],i=r.tag,s=[yRe,r.attr];e.open("g",{class:oRe(n),"clip-path":n.clip?Q8(this,n,n.group):null},bRe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&e.open("a",l),e.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=OE(a);if(at(u)){const d={x:0,dy:em(a)};for(let c=0;c<u.length;++c)e.open("tspan",c?d:null).text(tm(a,u[c])).close()}else e.text(tm(a,u))}else if(i==="g"){const u=a.strokeForeground,d=a.fill,c=a.stroke;u&&c&&(a.stroke=null),e.open("path",this.attr(n,a,r.background,"bgrect")).close(),e.open("g",this.attr(n,a,r.content)),$c(a,f=>this.mark(e,f)),e.close(),u&&c?(d&&(a.fill=null),a.stroke=c,e.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),d&&(a.fill=d)):e.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}e.close(),l&&e.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):$c(n,o),e.close()}href(e){const n=e.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(e,n,r,i){const s={},o=(a,l,u,d)=>{s[d||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&Bit(s,n,e,i,this._defs),s}defs(e){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){e.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:jk+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),e.close(),e.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)e.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();e.close()}for(const s in r){const o=r[s];e.open("clipPath",{id:s}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}}function Bit(t,e,n,r,i){let s;if(e==null||(r==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;r==="image"&&e.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(t["font-family"]=ME(e),t["font-size"]=Jd(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const o in Jk){let a=e[o];const l=Jk[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Z8(a)&&(a=MLe(a,i.gradient,"")),t[l]=a)}for(const o in Qk){const a=e[o];a!=null&&(s=s||[],s.push(`${Qk[o]}: ${a};`))}return s&&(t.style=s.join(" ")),t}const pc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function zit(t){pc.svgMarkTypes=t.svgMarkTypes??["text"],pc.svgOnTop=t.svgOnTop??!0,pc.debug=t.debug??!1}class BM extends IE{constructor(e){super(e),this._svgRenderer=new _N(e),this._canvasRenderer=new Kk(e)}initialize(e,n,r,i,s){this._root_el=mo(e,0,"div");const o=mo(this._root_el,0,"div"),a=mo(this._root_el,1,"div");return this._root_el.style.position="relative",pc.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=pc.svgOnTop?a:o,this._canvasEl=pc.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(e,n,r,i,s)}dirty(e){return pc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!pc.svgMarkTypes.includes(s));this._svgRenderer.render(e,pc.svgMarkTypes),this._canvasRenderer.render(e,i)}resize(e,n,r,i){return super.resize(e,n,r,i),this._svgRenderer.resize(e,n,r,i),this._canvasRenderer.resize(e,n,r,i),this}background(e){return pc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}class ARe extends $E{constructor(e,n){super(e,n)}initialize(e,n,r){const i=mo(mo(e,0,"div"),pc.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const kRe="canvas",TRe="hybrid",DRe="png",LRe="svg",RRe="none",Dp={Canvas:kRe,PNG:DRe,SVG:LRe,Hybrid:TRe,None:RRe},d0={};d0[kRe]=d0[DRe]={renderer:Kk,headless:Kk,handler:$E};d0[LRe]={renderer:_N,headless:SRe,handler:hRe};d0[TRe]={renderer:BM,headless:BM,handler:ARe};d0[RRe]={};function yL(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(d0[t]=e,this):d0[t]}function FRe(t,e,n){const r=[],i=new to().union(e),s=t.marktype;return s?ORe(t,i,n,r):s==="group"?MRe(t,i,n,r):ot("Intersect scene must be mark node or group item.")}function ORe(t,e,n,r){if(jit(t,e,n)){const i=t.items,s=t.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)MRe(i[a],e,n,r);else for(const l=pu[s].isect;a<o;++a){const u=i[a];IRe(u,e,l)&&r.push(u)}}return r}function jit(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function MRe(t,e,n,r){n&&n(t.mark)&&IRe(t,e,pu.group.isect)&&r.push(t);const i=t.items,s=i&&i.length;if(s){const o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let l=0;l<s;++l)ORe(i[l],e,n,r);e.translate(o,a)}return r}function IRe(t,e,n){const r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}const NF=new to;function $Re(t){const e=t.clip;if(sr(e))e(RE(NF.clear()));else if(e)NF.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(NF)}const Uit=1e-9;function EN(t,e,n){return t===e?!0:n==="path"?PRe(t,e):t instanceof Date&&e instanceof Date?+t==+e:ui(t)&&ui(e)?Math.abs(t-e)<=Uit:!t||!e||!It(t)&&!It(e)?t==e:qit(t,e)}function PRe(t,e){return EN(hv(t),hv(e))}function qit(t,e){var n=Object.keys(t),r=Object.keys(e),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!EN(t[i],e[i],i))return!1;return typeof t==typeof e}function Hit(){jLe(),pnt()}const gv="top",vc="left",_c="right",nm="bottom",Git="top-left",Vit="top-right",Wit="bottom-left",Yit="bottom-right",CN="start",zM="middle",Ga="end",Xit="x",Zit="y",bL="group",SN="axis",AN="title",Kit="frame",Jit="scope",kN="legend",NRe="row-header",BRe="row-footer",zRe="row-title",jRe="column-header",URe="column-footer",qRe="column-title",Qit="padding",est="symbol",HRe="fit",GRe="fit-x",VRe="fit-y",tst="pad",TN="none",_S="all",jM="each",DN="flush",Lp="column",Rp="row";function WRe(t){rt.call(this,null,t)}Lt(WRe,rt,{transform(t,e){const n=e.dataflow,r=t.mark,i=r.marktype,s=pu[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=ES(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===bL||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(ES(u,o))),r.role){case SN:case kN:case AN:e.reflow()}else l=e.changed(e.REM),e.visit(e.ADD,u=>{a.union(ES(u,o))}),e.visit(e.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(ES(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return $Re(r),e.modifies("bounds")}});function ES(t,e,n){return e(t.bounds.clear(),t,n)}const dxe=":vega_identifier:";function LN(t){rt.call(this,0,t)}LN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Lt(LN,rt,{transform(t,e){const n=nst(e.dataflow),r=t.as;let i=n.value;return e.visit(e.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),e}});function nst(t){return t._signals[dxe]||(t._signals[dxe]=t.add(0))}function YRe(t){rt.call(this,null,t)}Lt(YRe,rt,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,rst(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const r=n.marktype===bL?uL:lL;return e.visit(e.ADD,i=>r.call(i,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function rst(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function XRe(t){rt.call(this,null,t)}const fxe={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((r,i)=>!i||!ZRe(n.bounds,r.bounds,e)?(n=r,1):r.opacity=0)}},ZRe=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),hxe=(t,e)=>{for(var n=1,r=t.length,i=t[0].bounds,s;n<r;i=s,++n)if(ZRe(i,s=t[n].bounds,e))return!0},ist=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},sst=(t,e,n)=>{var r=t.range(),i=new to;return e===gv||e===nm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},pxe=t=>(t.forEach(e=>e.opacity=1),t),mxe=(t,e)=>t.reflow(e.modified()).modifies("opacity");Lt(XRe,rt,{transform(t,e){const n=fxe[t.method]||fxe.parity,r=t.separation||0;let i=e.materialize(e.SOURCE).source,s,o;if(!i||!i.length)return;if(!t.method)return t.modified("method")&&(pxe(i),e=mxe(e,t)),e;if(i=i.filter(ist),!i.length)return;if(t.sort&&(i=i.slice().sort(t.sort)),s=pxe(i),e=mxe(e,t),s.length>=3&&hxe(s,r)){do s=n(s,r);while(s.length>=3&&hxe(s,r));s.length<3&&!Hr(i).opacity&&(s.length>1&&(Hr(s).opacity=0),Hr(i).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=sst(t.boundScale,t.boundOrient,+t.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),e}});function KRe(t){rt.call(this,null,t)}Lt(KRe,rt,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,r=>n.dirty(r)),e.fields&&e.fields.zindex){const r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}}});const Ea=new to;function wb(t,e,n){return t[e]===n?0:(t[e]=n,1)}function ost(t){var e=t.items[0].orient;return e===vc||e===_c}function ast(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function lst(t,e,n,r){var i=e.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=ast(s),u=i.range,d=i.offset,c=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,b=i.bounds,y=p&&fN(p),v=0,w=0,E,S;switch(Ea.clear().union(b),b.clear(),(E=l[0])>-1&&b.union(i.items[E].bounds),(E=l[1])>-1&&b.union(i.items[E].bounds),a){case gv:v=c||0,w=-d,S=Math.max(f,Math.min(h,-b.y1)),b.add(0,-S).add(u,0),p&&CS(t,p,S,g,y,0,-1,b);break;case vc:v=-d,w=c||0,S=Math.max(f,Math.min(h,-b.x1)),b.add(-S,0).add(0,u),p&&CS(t,p,S,g,y,1,-1,b);break;case _c:v=n+d,w=c||0,S=Math.max(f,Math.min(h,b.x2)),b.add(0,0).add(S,u),p&&CS(t,p,S,g,y,1,1,b);break;case nm:v=c||0,w=r+d,S=Math.max(f,Math.min(h,b.y2)),b.add(0,0).add(u,S),p&&CS(t,p,S,g,0,0,1,b);break;default:v=i.x,w=i.y}return xh(b.translate(v,w),i),wb(i,"x",v+o)|wb(i,"y",w+o)&&(i.bounds=Ea,t.dirty(i),i.bounds=b,t.dirty(i)),i.mark.bounds.clear().union(b)}function CS(t,e,n,r,i,s,o,a){const l=e.bounds;if(e.auto){const u=o*(n+i+r);let d=0,c=0;t.dirty(e),s?d=(e.x||0)-(e.x=u):c=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(l.translate(-d,-c)),t.dirty(e)}a.union(l)}const gxe=(t,e)=>Math.floor(Math.min(t,e)),yxe=(t,e)=>Math.ceil(Math.max(t,e));function ust(t){var e=t.items,n=e.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=e[r],s=i.items,i.marktype===bL)switch(i.role){case SN:case kN:case AN:break;case NRe:o.rowheaders.push(...s);break;case BRe:o.rowfooters.push(...s);break;case jRe:o.colheaders.push(...s);break;case URe:o.colfooters.push(...s);break;case zRe:o.rowtitle=s[0];break;case qRe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function cst(t){return new to().set(0,0,t.width||0,t.height||0)}function dst(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function cs(t,e,n){const r=It(t)?t[e]:t;return r??(n!==void 0?n:0)}function bxe(t){return t<0?Math.ceil(-t):0}function JRe(t,e,n){var r=!n.nodirty,i=n.bounds===DN?cst:dst,s=Ea.set(0,0,0,0),o=cs(n.align,Lp),a=cs(n.align,Rp),l=cs(n.padding,Lp),u=cs(n.padding,Rp),d=n.columns||e.length,c=d<=0?1:Math.ceil(e.length/d),f=e.length,h=Array(f),p=Array(d),g=0,b=Array(f),y=Array(c),v=0,w=Array(f),E=Array(f),S=Array(f),T,D,k,R,O,B,K,L,I,$,U;for(D=0;D<d;++D)p[D]=0;for(D=0;D<c;++D)y[D]=0;for(D=0;D<f;++D)B=e[D],O=S[D]=i(B),B.x=B.x||0,w[D]=0,B.y=B.y||0,E[D]=0,k=D%d,R=~~(D/d),g=Math.max(g,K=Math.ceil(O.x2)),v=Math.max(v,L=Math.ceil(O.y2)),p[k]=Math.max(p[k],K),y[R]=Math.max(y[R],L),h[D]=l+bxe(O.x1),b[D]=u+bxe(O.y1),r&&t.dirty(e[D]);for(D=0;D<f;++D)D%d===0&&(h[D]=0),D<d&&(b[D]=0);if(o===jM)for(k=1;k<d;++k){for(U=0,D=k;D<f;D+=d)U<h[D]&&(U=h[D]);for(D=k;D<f;D+=d)h[D]=U+p[k-1]}else if(o===_S){for(U=0,D=0;D<f;++D)D%d&&U<h[D]&&(U=h[D]);for(D=0;D<f;++D)D%d&&(h[D]=U+g)}else for(o=!1,k=1;k<d;++k)for(D=k;D<f;D+=d)h[D]+=p[k-1];if(a===jM)for(R=1;R<c;++R){for(U=0,D=R*d,T=D+d;D<T;++D)U<b[D]&&(U=b[D]);for(D=R*d;D<T;++D)b[D]=U+y[R-1]}else if(a===_S){for(U=0,D=d;D<f;++D)U<b[D]&&(U=b[D]);for(D=d;D<f;++D)b[D]=U+v}else for(a=!1,R=1;R<c;++R)for(D=R*d,T=D+d;D<T;++D)b[D]+=y[R-1];for(I=0,D=0;D<f;++D)I=h[D]+(D%d?I:0),w[D]+=I-e[D].x;for(k=0;k<d;++k)for($=0,D=k;D<f;D+=d)$+=b[D],E[D]+=$-e[D].y;if(o&&cs(n.center,Lp)&&c>1)for(D=0;D<f;++D)O=o===_S?g:p[D%d],I=O-S[D].x2-e[D].x-w[D],I>0&&(w[D]+=I/2);if(a&&cs(n.center,Rp)&&d!==1)for(D=0;D<f;++D)O=a===_S?v:y[~~(D/d)],$=O-S[D].y2-e[D].y-E[D],$>0&&(E[D]+=$/2);for(D=0;D<f;++D)s.union(S[D].translate(w[D],E[D]));switch(I=cs(n.anchor,Xit),$=cs(n.anchor,Zit),cs(n.anchor,Lp)){case Ga:I-=s.width();break;case zM:I-=s.width()/2}switch(cs(n.anchor,Rp)){case Ga:$-=s.height();break;case zM:$-=s.height()/2}for(I=Math.round(I),$=Math.round($),s.clear(),D=0;D<f;++D)e[D].mark.bounds.clear();for(D=0;D<f;++D)B=e[D],B.x+=w[D]+=I,B.y+=E[D]+=$,s.union(B.mark.bounds.union(B.bounds.translate(w[D],E[D]))),r&&t.dirty(B);return s}function fst(t,e,n){var r=ust(e),i=r.marks,s=n.bounds===DN?hst:pst,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,d,c,f,h,p,g,b;const y=JRe(t,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=cs(n.headerBand,Rp,null),d=SS(t,r.rowheaders,i,a,l,-cs(o,"rowHeader"),gxe,0,s,"x1",0,a,1,g)),r.colheaders&&(g=cs(n.headerBand,Lp,null),c=SS(t,r.colheaders,i,a,a,-cs(o,"columnHeader"),gxe,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=cs(n.footerBand,Rp,null),f=SS(t,r.rowfooters,i,a,l,cs(o,"rowFooter"),yxe,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=cs(n.footerBand,Lp,null),h=SS(t,r.colfooters,i,a,a,cs(o,"columnFooter"),yxe,1,s,"y2",u-a,1,a,g)),r.rowtitle&&(p=cs(n.titleAnchor,Rp),b=cs(o,"rowTitle"),b=p===Ga?f+b:d-b,g=cs(n.titleBand,Rp,.5),vxe(t,r.rowtitle,b,0,y,g)),r.coltitle&&(p=cs(n.titleAnchor,Lp),b=cs(o,"columnTitle"),b=p===Ga?h+b:c-b,g=cs(n.titleBand,Lp,.5),vxe(t,r.coltitle,b,1,y,g))}function hst(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function pst(t,e){return t.bounds[e]}function SS(t,e,n,r,i,s,o,a,l,u,d,c,f,h){var p=n.length,g=0,b=0,y,v,w,E,S,T,D,k,R;if(!p)return g;for(y=d;y<p;y+=c)n[y]&&(g=o(g,l(n[y],u)));if(!e.length)return g;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),g+=s,v=0,E=e.length;v<E;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(y=d,v=0,E=e.length;v<E;++v,y+=c){for(T=e[v],S=T.mark.bounds,w=y;w>=0&&(D=n[w])==null;w-=f);a?(k=h==null?D.x:Math.round(D.bounds.x1+h*D.bounds.width()),R=g):(k=g,R=h==null?D.y:Math.round(D.bounds.y1+h*D.bounds.height())),S.union(T.bounds.translate(k-(T.x||0),R-(T.y||0))),T.x=k,T.y=R,t.dirty(T),b=o(b,S[u])}return b}function vxe(t,e,n,r,i,s){if(e){t.dirty(e);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function mst(t,e){const n=t[e]||{};return(r,i)=>n[r]!=null?n[r]:t[r]!=null?t[r]:i}function gst(t,e){let n=-1/0;return t.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:e}function yst(t,e,n,r,i,s,o){const a=mst(n,e),l=gst(t,a("offset",0)),u=a("anchor",CN),d=u===Ga?1:u===zM?.5:0,c={align:jM,bounds:a("bounds",DN),columns:a("direction")==="vertical"?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case vc:c.anchor={x:Math.floor(r.x1)-l,column:Ga,y:d*(o||r.height()+2*r.y1),row:u};break;case _c:c.anchor={x:Math.ceil(r.x2)+l,y:d*(o||r.height()+2*r.y1),row:u};break;case gv:c.anchor={y:Math.floor(i.y1)-l,row:Ga,x:d*(s||i.width()+2*i.x1),column:u};break;case nm:c.anchor={y:Math.ceil(i.y2)+l,x:d*(s||i.width()+2*i.x1),column:u};break;case Git:c.anchor={x:l,y:l};break;case Vit:c.anchor={x:s-l,y:l,column:Ga};break;case Wit:c.anchor={x:l,y:o-l,row:Ga};break;case Yit:c.anchor={x:s-l,y:o-l,column:Ga,row:Ga};break}return c}function bst(t,e){var n=e.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),xst(t,n,n.items[0].items[0]),s=vst(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===est&&wst(n.items[0].items[0].items[0].items),i!==TN&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,xh(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function vst(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function xst(t,e,n){var r=e.padding,i=r-n.x,s=r-n.y;if(!e.datum.title)(i||s)&&_w(t,n,i,s);else{var o=e.items[1].items[0],a=o.anchor,l=e.titlePadding||0,u=r-o.x,d=r-o.y;switch(o.orient){case vc:i+=Math.ceil(o.bounds.width())+l;break;case _c:case nm:break;default:s+=o.bounds.height()+l}switch((i||s)&&_w(t,n,i,s),o.orient){case vc:d+=Gy(e,n,o,a,1,1);break;case _c:u+=Gy(e,n,o,Ga,0,0)+l,d+=Gy(e,n,o,a,1,1);break;case nm:u+=Gy(e,n,o,a,0,0),d+=Gy(e,n,o,Ga,-1,0,1)+l;break;default:u+=Gy(e,n,o,a,0,0)}(u||d)&&_w(t,o,u,d),(u=Math.round(o.bounds.x1-r))<0&&(_w(t,n,-u,0),_w(t,o,-u,0))}}function Gy(t,e,n,r,i,s,o){const a=t.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?e.items[0]:e,d=u.bounds[i?"y2":"x2"]-t.padding,c=l&&s?d:0,f=l&&s?0:d,h=i<=0?0:fN(n);return Math.round(r===CN?c:r===Ga?f-h:.5*(d-h))}function _w(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function wst(t){const e=t.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function _st(t,e,n,r,i){var s=e.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,d=s.padding,c=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===vc||a===_c?r:n,p=0,g=0,b=0,y=0,v=0,w;if(o!==bL?a===vc?(p=i.y2,h=i.y1):a===_c?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===vc&&(p=r,h=0),w=l===CN?p:l===Ga?h:(p+h)/2,f&&f.text){switch(a){case gv:case nm:v=c.bounds.height()+d;break;case vc:y=c.bounds.width()+d;break;case _c:y=-c.bounds.width()-d;break}Ea.clear().union(f.bounds),Ea.translate(y-(f.x||0),v-(f.y||0)),wb(f,"x",y)|wb(f,"y",v)&&(t.dirty(f),f.bounds.clear().union(Ea),f.mark.bounds.clear().union(Ea),t.dirty(f)),Ea.clear().union(f.bounds)}else Ea.clear();switch(Ea.union(c.bounds),a){case gv:g=w,b=i.y1-Ea.height()-u;break;case vc:g=i.x1-Ea.width()-u,b=w;break;case _c:g=i.x2+Ea.width()+u,b=w;break;case nm:g=w,b=i.y2+u;break;default:g=s.x,b=s.y}return wb(s,"x",g)|wb(s,"y",b)&&(Ea.translate(g,b),t.dirty(s),s.bounds.clear().union(Ea),e.bounds.clear().union(Ea),t.dirty(s)),s.bounds}function QRe(t){rt.call(this,null,t)}Lt(QRe,rt,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(r=>{t.layout&&fst(n,r,t.layout),Cst(n,r,t)}),Est(t.mark.group)?e.reflow():e}});function Est(t){return t&&t.mark.role!=="legend-entry"}function Cst(t,e,n){var r=e.items,i=Math.max(0,e.width||0),s=Math.max(0,e.height||0),o=new to().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],d,c,f,h,p,g;for(p=0,g=r.length;p<g;++p)switch(c=r[p],c.role){case SN:h=ost(c)?a:l,h.union(lst(t,c,i,s));break;case AN:d=c;break;case kN:u.push(bst(t,c));break;case Kit:case Jit:case NRe:case BRe:case zRe:case jRe:case URe:case qRe:a.union(c.bounds),l.union(c.bounds);break;default:o.union(c.bounds)}if(u.length){const b={};u.forEach(y=>{f=y.orient||_c,f!==TN&&(b[f]||(b[f]=[])).push(y)});for(const y in b){const v=b[y];JRe(t,v,yst(v,y,n.legends,a,l,i,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,t.dirty(y),y.bounds=v,t.dirty(y)),n.autosize&&(n.autosize.type===HRe||n.autosize.type===GRe||n.autosize.type===VRe))switch(y.orient){case vc:case _c:o.add(v.x1,0).add(v.x2,0);break;case gv:case nm:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),d&&o.union(_st(t,d,i,s,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),Sst(t,e,o,n)}function Sst(t,e,n,r){const i=r.autosize||{},s=i.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,e.height||0),c=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-d));if(i.contains===Qit){const p=t.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===TN?(u=0,c=0,l=o,d=a):s===HRe?(l=Math.max(0,o-u-f),d=Math.max(0,a-c-h)):s===GRe?(l=Math.max(0,o-u-f),a=d+c+h):s===VRe?(o=l+u+f,d=Math.max(0,a-c-h)):s===tst&&(o=l+u+f,a=d+c+h),t._resizeView(o,a,l,d,[u,c],i.resize)}const Ast=Object.freeze(Object.defineProperty({__proto__:null,bound:WRe,identifier:LN,mark:YRe,overlap:XRe,render:KRe,viewlayout:QRe},Symbol.toStringTag,{value:"Module"}));function eFe(t){rt.call(this,null,t)}Lt(eFe,rt,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,s=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,a=Y8(s,o,t.minstep),l=t.format||kLe(n,s,a,t.formatSpecifier,t.formatType,!!t.values),u=t.values?ALe(s,t.values,a):X8(s,a);return i&&(r.rem=i),i=u.map((d,c)=>vi({index:c/(u.length-1||1),value:d,label:l(d)})),t.extra&&i.length&&i.push(vi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function tFe(t){rt.call(this,null,t)}function kst(){return vi({})}function Tst(t){const e=u1().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}Lt(tFe,rt,{transform(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||kst,s=t.key||wn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(s))&&ot("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=Tst(s)),e.visit(e.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),e.visit(e.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),e.visit(e.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function nFe(t){rt.call(this,null,t)}Lt(nFe,rt,{transform(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,s=e.encode;if(at(s))if(n.changed()||s.every(c=>i[c]))s=s[0],n.encode=null;else return e.StopPropagation;var o=s==="enter",a=i.update||ap,l=i.enter||ap,u=i.exit||ap,d=(s&&!o?i[s]:a)||ap;if(e.changed(e.ADD)&&(e.visit(e.ADD,c=>{l(c,t),a(c,t)}),n.modifies(l.output),n.modifies(a.output),d!==ap&&d!==a&&(e.visit(e.ADD,c=>{d(c,t)}),n.modifies(d.output))),e.changed(e.REM)&&u!==ap&&(e.visit(e.REM,c=>{u(c,t)}),n.modifies(u.output)),o||d!==ap){const c=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(c,f=>{const h=l(f,t)||r;(d(f,t)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):e.visit(c,f=>{(d(f,t)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:e.StopPropagation}});function rFe(t){rt.call(this,[],t)}Lt(rFe,rt,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=this.value,s=t.type||DA,o=t.scale,a=+t.limit,l=Y8(o,t.count==null?5:t.count,t.minstep),u=!!t.values||s===DA,d=t.format||RLe(n,o,l,s,t.formatSpecifier,t.formatType,u),c=t.values||LLe(o,l),f,h,p,g,b;return i&&(r.rem=i),s===DA?(a&&c.length>a?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=c.slice(0,a-1),b=!0):i=c,sr(p=t.size)?(!t.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,t)),0)):p=Ia(g=p||8),i=i.map((y,v)=>vi({index:v,label:d(y,v,i),value:y,offset:g,size:p(y,t)})),b&&(b=c[i.length],i.push(vi({index:i.length,label:`${c.length-i.length} entries`,value:b,offset:g,size:p(b,t)})))):s===tnt?(f=o.domain(),h=ELe(o,f[0],Hr(f)),c.length<3&&!t.values&&f[0]!==Hr(f)&&(c=[f[0],Hr(f)]),i=c.map((y,v)=>vi({index:v,label:d(y,v,c),value:y,perc:h(y)}))):(p=c.length-1,h=fnt(o),i=c.map((y,v)=>vi({index:v,label:d(y,v,c),value:y,perc:v?h(y):0,perc2:v===p?1:h(c[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Dst=t=>t.source.x,Lst=t=>t.source.y,Rst=t=>t.target.x,Fst=t=>t.target.y;function RN(t){rt.call(this,{},t)}RN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Lt(RN,rt,{transform(t,e){var n=t.sourceX||Dst,r=t.sourceY||Lst,i=t.targetX||Rst,s=t.targetY||Fst,o=t.as||"path",a=t.orient||"vertical",l=t.shape||"line",u=xxe.get(l+"-"+a)||xxe.get(l);return u||ot("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,d=>{d[o]=u(n(d),r(d),i(d),s(d))}),e.reflow(t.modified()).modifies(o)}});const iFe=(t,e,n,r)=>"M"+t+","+e+"L"+n+","+r,Ost=(t,e,n,r)=>iFe(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),sFe=(t,e,n,r)=>{var i=n-t,s=r-e,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Mst=(t,e,n,r)=>sFe(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),oFe=(t,e,n,r)=>{const i=n-t,s=r-e,o=.2*(i+s),a=.2*(s-i);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Ist=(t,e,n,r)=>oFe(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n)),$st=(t,e,n,r)=>"M"+t+","+e+"V"+r+"H"+n,Pst=(t,e,n,r)=>"M"+t+","+e+"H"+n+"V"+r,Nst=(t,e,n,r)=>{const i=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*s+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*o+","+e*a+"L"+r*o+","+r*a},Bst=(t,e,n,r)=>{const i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},zst=(t,e,n,r)=>{const i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},jst=(t,e,n,r)=>{const i=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=(e+r)/2;return"M"+e*i+","+e*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},xxe=u1({line:iFe,"line-radial":Ost,arc:sFe,"arc-radial":Mst,curve:oFe,"curve-radial":Ist,"orthogonal-horizontal":$st,"orthogonal-vertical":Pst,"orthogonal-radial":Nst,"diagonal-horizontal":Bst,"diagonal-vertical":zst,"diagonal-radial":jst});function FN(t){rt.call(this,null,t)}FN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Lt(FN,rt,{transform(t,e){var n=t.as||["startAngle","endAngle"],r=n[0],i=n[1],s=t.field||o1,o=t.startAngle||0,a=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,u=l.map(s),d=u.length,c=o,f=(a-o)/dke(u),h=eu(d),p,g,b;for(t.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<d;++p)b=u[h[p]],g=l[h[p]],g[r]=c,g[i]=c+=b*f;return this.value=u,e.reflow(t.modified()).modifies(n)}});const Ust=5;function qst(t){const e=t.type;return!t.bins&&(e===cv||e===CE||e===SE)}function aFe(t){return G8(t)&&t!==Ld}const Hst=Mc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lFe(t){rt.call(this,null,t),this.modified(!0)}Lt(lFe,rt,{transform(t,e){var n=e.dataflow,r=this.value,i=Gst(t);(!r||i!==r.type)&&(this.value=r=ci(i)());for(i in t)if(!Hst[i]){if(i==="padding"&&aFe(r.type))continue;sr(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return Kst(r,t,Zst(r,t,Wst(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Gst(t){var e=t.type,n="",r;return e===Ld?Ld+"-"+cv:(Vst(t)&&(r=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=r===2?Ld+"-":r===3?h1+"-":""),(n+e||cv).toLowerCase())}function Vst(t){const e=t.type;return G8(e)&&e!==u0&&e!==c0&&(t.scheme||t.range&&t.range.length&&t.range.every(Nt))}function Wst(t,e,n){const r=Yst(t,e.domainRaw,n);if(r>-1)return r;var i=e.domain,s=t.type,o=e.zero||e.zero===void 0&&qst(t),a,l;if(!i)return 0;if((o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),e.domainMin!=null&&(i[0]=e.domainMin),e.domainMax!=null&&(i[a]=e.domainMax),e.domainMid!=null)){l=e.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return aFe(s)&&e.padding&&i[0]!==Hr(i)&&(i=Xst(s,i,e.range,e.padding,e.exponent,e.constant)),t.domain(uFe(s,i,n)),s===j8&&t.unknown(e.domainImplicit?xje:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&Y8(t,e.nice)||null),i.length}function Yst(t,e,n){return e?(t.domain(uFe(t.type,e,n)),e.length):-1}function Xst(t,e,n,r,i,s){var o=Math.abs(Hr(n)-n[0]),a=o/(o-2*r),l=t===uh?TP(e,null,a):t===SE?Ok(e,null,a,.5):t===CE?Ok(e,null,a,i||1):t===rL?DP(e,null,a,s||1):kP(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function uFe(t,e,n){if(bLe(t)){var r=Math.abs(e.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==e.length&&n.warn("Log scale domain includes zero: "+Tt(e))}return e}function Zst(t,e,n){let r=e.bins;if(r&&!at(r)){const i=t.domain(),s=i[0],o=Hr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||ot("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=eu(l,u+a/2,a)}return r?t.bins=r:t.bins&&delete t.bins,t.type===U8&&(r?!e.domain&&!e.domainRaw&&(t.domain(r),n=r.length):t.bins=t.domain()),n}function Kst(t,e,n){var r=t.type,i=e.round||!1,s=e.range;if(e.rangeStep!=null)s=Jst(r,e,n);else if(e.scheme&&(s=Qst(r,e,n),sr(s))){if(t.interpolator)return t.interpolator(s);ot(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&vLe(r))return t.interpolator(oL(UM(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(V8(e.interpolate,e.interpolateGamma)):sr(t.round)?t.round(i):sr(t.rangeRound)&&t.interpolate(i?m$:p$),s&&t.range(UM(s,e.reverse))}function Jst(t,e,n){t!==fLe&&t!==kM&&ot("Only band and point scales support rangeStep.");var r=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,i=t===kM?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*z8(n,i,r)]}function Qst(t,e,n){var r=e.schemeExtent,i,s;return at(e.scheme)?s=oL(e.scheme,e.interpolate,e.interpolateGamma):(i=e.scheme.toLowerCase(),s=W8(i),s||ot(`Unrecognized scheme name: ${e.scheme}`)),n=t===sL?n+1:t===U8?n-1:t===dv||t===iL?+e.schemeCount||Ust:n,vLe(t)?wxe(s,r,e.reverse):sr(s)?_Le(wxe(s,r),n):t===j8?s:s.slice(0,n)}function wxe(t,e,n){return sr(t)&&(e||n)?wLe(t,UM(e||[0,1],n)):t}function UM(t,e){return e?t.slice().reverse():t}function cFe(t){rt.call(this,null,t)}Lt(cFe,rt,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(N0(t.sort)),this.modified(n),e}});const _xe="zero",dFe="center",fFe="normalize",hFe=["y0","y1"];function ON(t){rt.call(this,null,t)}ON.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:_xe,values:[_xe,dFe,fFe]},{name:"as",type:"string",array:!0,length:2,default:hFe}]};Lt(ON,rt,{transform(t,e){var n=t.as||hFe,r=n[0],i=n[1],s=N0(t.sort),o=t.field||o1,a=t.offset===dFe?eot:t.offset===fFe?tot:not,l,u,d,c;for(l=rot(e.source,t.groupby,s,o),u=0,d=l.length,c=l.max;u<d;++u)a(l[u],c,o,r,i);return e.reflow(t.modified()).modifies(n)}});function eot(t,e,n,r,i){for(var s=(e-t.sum)/2,o=t.length,a=0,l;a<o;++a)l=t[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function tot(t,e,n,r,i){for(var s=1/t.sum,o=0,a=t.length,l=0,u=0,d;l<a;++l)d=t[l],d[r]=o,d[i]=o=s*(u+=Math.abs(n(d)))}function not(t,e,n,r,i){for(var s=0,o=0,a=t.length,l=0,u,d;l<a;++l)d=t[l],u=+n(d),u<0?(d[r]=o,d[i]=o+=u):(d[r]=s,d[i]=s+=u)}function rot(t,e,n,r){var i=[],s=g=>g(d),o,a,l,u,d,c,f,h,p;if(e==null)i.push(t.slice());else for(o={},a=0,l=t.length;a<l;++a)d=t[a],c=e.map(s),f=o[c],f||(o[c]=f=[],i.push(f)),f.push(d);for(c=0,p=0,u=i.length;c<u;++c){for(f=i[c],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const iot=Object.freeze(Object.defineProperty({__proto__:null,axisticks:eFe,datajoin:tFe,encode:nFe,legendentries:rFe,linkpath:RN,pie:FN,scale:lFe,sortitems:cFe,stack:ON},Symbol.toStringTag,{value:"Module"}));var An=1e-6,e3=1e-12,_r=Math.PI,Fs=_r/2,t3=_r/4,nl=_r*2,Ns=180/_r,yr=_r/180,qr=Math.abs,m1=Math.atan,qu=Math.atan2,Dn=Math.cos,AS=Math.ceil,pFe=Math.exp,qM=Math.hypot,n3=Math.log,BF=Math.pow,En=Math.sin,Ou=Math.sign||function(t){return t>0?1:t<0?-1:0},rl=Math.sqrt,MN=Math.tan;function mFe(t){return t>1?0:t<-1?_r:Math.acos(t)}function Pl(t){return t>1?Fs:t<-1?-Fs:Math.asin(t)}function ea(){}function r3(t,e){t&&Cxe.hasOwnProperty(t.type)&&Cxe[t.type](t,e)}var Exe={Feature:function(t,e){r3(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)r3(n[r].geometry,e)}},Cxe={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){HM(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)HM(n[r],e,0)},Polygon:function(t,e){Sxe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Sxe(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)r3(n[r],e)}};function HM(t,e,n){var r=-1,i=t.length-n,s;for(e.lineStart();++r<i;)s=t[r],e.point(s[0],s[1],s[2]);e.lineEnd()}function Sxe(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)HM(t[n],e,1);e.polygonEnd()}function zf(t,e){t&&Exe.hasOwnProperty(t.type)?Exe[t.type](t,e):r3(t,e)}var i3=new el,s3=new el,gFe,yFe,GM,VM,WM,Ud={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){i3=new el,Ud.lineStart=sot,Ud.lineEnd=oot},polygonEnd:function(){var t=+i3;s3.add(t<0?nl+t:t),this.lineStart=this.lineEnd=this.point=ea},sphere:function(){s3.add(nl)}};function sot(){Ud.point=aot}function oot(){bFe(gFe,yFe)}function aot(t,e){Ud.point=bFe,gFe=t,yFe=e,t*=yr,e*=yr,GM=t,VM=Dn(e=e/2+t3),WM=En(e)}function bFe(t,e){t*=yr,e*=yr,e=e/2+t3;var n=t-GM,r=n>=0?1:-1,i=r*n,s=Dn(e),o=En(e),a=WM*o,l=VM*s+a*Dn(i),u=a*r*En(i);i3.add(qu(u,l)),GM=t,VM=s,WM=o}function lot(t){return s3=new el,zf(t,Ud),s3*2}function o3(t){return[qu(t[1],t[0]),Pl(t[2])]}function f0(t){var e=t[0],n=t[1],r=Dn(n);return[r*Dn(e),r*En(e),En(n)]}function kS(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yv(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zF(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function TS(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function a3(t){var e=rl(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var bs,Al,Ts,Zl,Lg,vFe,xFe,Ob,T_,hp,ch,$f={point:YM,lineStart:Axe,lineEnd:kxe,polygonStart:function(){$f.point=_Fe,$f.lineStart=uot,$f.lineEnd=cot,T_=new el,Ud.polygonStart()},polygonEnd:function(){Ud.polygonEnd(),$f.point=YM,$f.lineStart=Axe,$f.lineEnd=kxe,i3<0?(bs=-(Ts=180),Al=-(Zl=90)):T_>An?Zl=90:T_<-An&&(Al=-90),ch[0]=bs,ch[1]=Ts},sphere:function(){bs=-(Ts=180),Al=-(Zl=90)}};function YM(t,e){hp.push(ch=[bs=t,Ts=t]),e<Al&&(Al=e),e>Zl&&(Zl=e)}function wFe(t,e){var n=f0([t*yr,e*yr]);if(Ob){var r=yv(Ob,n),i=[r[1],-r[0],0],s=yv(i,r);a3(s),s=o3(s);var o=t-Lg,a=o>0?1:-1,l=s[0]*Ns*a,u,d=qr(o)>180;d^(a*Lg<l&&l<a*t)?(u=s[1]*Ns,u>Zl&&(Zl=u)):(l=(l+360)%360-180,d^(a*Lg<l&&l<a*t)?(u=-s[1]*Ns,u<Al&&(Al=u)):(e<Al&&(Al=e),e>Zl&&(Zl=e))),d?t<Lg?Yl(bs,t)>Yl(bs,Ts)&&(Ts=t):Yl(t,Ts)>Yl(bs,Ts)&&(bs=t):Ts>=bs?(t<bs&&(bs=t),t>Ts&&(Ts=t)):t>Lg?Yl(bs,t)>Yl(bs,Ts)&&(Ts=t):Yl(t,Ts)>Yl(bs,Ts)&&(bs=t)}else hp.push(ch=[bs=t,Ts=t]);e<Al&&(Al=e),e>Zl&&(Zl=e),Ob=n,Lg=t}function Axe(){$f.point=wFe}function kxe(){ch[0]=bs,ch[1]=Ts,$f.point=YM,Ob=null}function _Fe(t,e){if(Ob){var n=t-Lg;T_.add(qr(n)>180?n+(n>0?360:-360):n)}else vFe=t,xFe=e;Ud.point(t,e),wFe(t,e)}function uot(){Ud.lineStart()}function cot(){_Fe(vFe,xFe),Ud.lineEnd(),qr(T_)>An&&(bs=-(Ts=180)),ch[0]=bs,ch[1]=Ts,Ob=null}function Yl(t,e){return(e-=t)<0?e+360:e}function dot(t,e){return t[0]-e[0]}function Txe(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function fot(t){var e,n,r,i,s,o,a;if(Zl=Ts=-(bs=Al=1/0),hp=[],zf(t,$f),n=hp.length){for(hp.sort(dot),e=1,r=hp[0],s=[r];e<n;++e)i=hp[e],Txe(r,i[0])||Txe(r,i[1])?(Yl(r[0],i[1])>Yl(r[0],r[1])&&(r[1]=i[1]),Yl(i[0],r[1])>Yl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,e=0,r=s[n];e<=n;r=i,++e)i=s[e],(a=Yl(r[1],i[0]))>o&&(o=a,bs=i[0],Ts=r[1])}return hp=ch=null,bs===1/0||Al===1/0?[[NaN,NaN],[NaN,NaN]]:[[bs,Al],[Ts,Zl]]}var Jw,l3,u3,c3,d3,f3,h3,p3,XM,ZM,KM,EFe,CFe,Va,Wa,Ya,Ec={sphere:ea,point:IN,lineStart:Dxe,lineEnd:Lxe,polygonStart:function(){Ec.lineStart=mot,Ec.lineEnd=got},polygonEnd:function(){Ec.lineStart=Dxe,Ec.lineEnd=Lxe}};function IN(t,e){t*=yr,e*=yr;var n=Dn(e);PE(n*Dn(t),n*En(t),En(e))}function PE(t,e,n){++Jw,u3+=(t-u3)/Jw,c3+=(e-c3)/Jw,d3+=(n-d3)/Jw}function Dxe(){Ec.point=hot}function hot(t,e){t*=yr,e*=yr;var n=Dn(e);Va=n*Dn(t),Wa=n*En(t),Ya=En(e),Ec.point=pot,PE(Va,Wa,Ya)}function pot(t,e){t*=yr,e*=yr;var n=Dn(e),r=n*Dn(t),i=n*En(t),s=En(e),o=qu(rl((o=Wa*s-Ya*i)*o+(o=Ya*r-Va*s)*o+(o=Va*i-Wa*r)*o),Va*r+Wa*i+Ya*s);l3+=o,f3+=o*(Va+(Va=r)),h3+=o*(Wa+(Wa=i)),p3+=o*(Ya+(Ya=s)),PE(Va,Wa,Ya)}function Lxe(){Ec.point=IN}function mot(){Ec.point=yot}function got(){SFe(EFe,CFe),Ec.point=IN}function yot(t,e){EFe=t,CFe=e,t*=yr,e*=yr,Ec.point=SFe;var n=Dn(e);Va=n*Dn(t),Wa=n*En(t),Ya=En(e),PE(Va,Wa,Ya)}function SFe(t,e){t*=yr,e*=yr;var n=Dn(e),r=n*Dn(t),i=n*En(t),s=En(e),o=Wa*s-Ya*i,a=Ya*r-Va*s,l=Va*i-Wa*r,u=qM(o,a,l),d=Pl(u),c=u&&-d/u;XM.add(c*o),ZM.add(c*a),KM.add(c*l),l3+=d,f3+=d*(Va+(Va=r)),h3+=d*(Wa+(Wa=i)),p3+=d*(Ya+(Ya=s)),PE(Va,Wa,Ya)}function bot(t){Jw=l3=u3=c3=d3=f3=h3=p3=0,XM=new el,ZM=new el,KM=new el,zf(t,Ec);var e=+XM,n=+ZM,r=+KM,i=qM(e,n,r);return i<e3&&(e=f3,n=h3,r=p3,l3<An&&(e=u3,n=c3,r=d3),i=qM(e,n,r),i<e3)?[NaN,NaN]:[qu(n,e)*Ns,Pl(r/i)*Ns]}function JM(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function QM(t,e){return qr(t)>_r&&(t-=Math.round(t/nl)*nl),[t,e]}QM.invert=QM;function AFe(t,e,n){return(t%=nl)?e||n?JM(Fxe(t),Oxe(e,n)):Fxe(t):e||n?Oxe(e,n):QM}function Rxe(t){return function(e,n){return e+=t,qr(e)>_r&&(e-=Math.round(e/nl)*nl),[e,n]}}function Fxe(t){var e=Rxe(t);return e.invert=Rxe(-t),e}function Oxe(t,e){var n=Dn(t),r=En(t),i=Dn(e),s=En(e);function o(a,l){var u=Dn(l),d=Dn(a)*u,c=En(a)*u,f=En(l),h=f*n+d*r;return[qu(c*i-h*s,d*n-f*r),Pl(h*i+c*s)]}return o.invert=function(a,l){var u=Dn(l),d=Dn(a)*u,c=En(a)*u,f=En(l),h=f*i-c*s;return[qu(c*i+f*s,d*n+h*r),Pl(h*n-d*r)]},o}function vot(t){t=AFe(t[0]*yr,t[1]*yr,t.length>2?t[2]*yr:0);function e(n){return n=t(n[0]*yr,n[1]*yr),n[0]*=Ns,n[1]*=Ns,n}return e.invert=function(n){return n=t.invert(n[0]*yr,n[1]*yr),n[0]*=Ns,n[1]*=Ns,n},e}function xot(t,e,n,r,i,s){if(n){var o=Dn(e),a=En(e),l=r*n;i==null?(i=e+r*nl,s=e-l/2):(i=Mxe(o,i),s=Mxe(o,s),(r>0?i<s:i>s)&&(i+=r*nl));for(var u,d=i;r>0?d>s:d<s;d-=l)u=o3([o,-a*Dn(d),-a*En(d)]),t.point(u[0],u[1])}}function Mxe(t,e){e=f0(e),e[0]-=t,a3(e);var n=mFe(-e[1]);return((-e[2]<0?-n:n)+nl-An)%nl}function kFe(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:ea,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function NA(t,e){return qr(t[0]-e[0])<An&&qr(t[1]-e[1])<An}function DS(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TFe(t,e,n,r,i){var s=[],o=[],a,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,b=p[0],y=p[g],v;if(NA(b,y)){if(!b[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((b=p[a])[0],b[1]);i.lineEnd();return}y[0]+=2*An}s.push(v=new DS(b,p,null,!0)),o.push(v.o=new DS(b,null,v,!1)),s.push(v=new DS(y,p,null,!1)),o.push(v.o=new DS(y,null,v,!0))}}),!!s.length){for(o.sort(e),Ixe(s),Ixe(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],d,c;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;d=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=d.length;a<l;++a)i.point((c=d[a])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(d=f.p.z,a=d.length-1;a>=0;--a)i.point((c=d[a])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,d=f.z,h=!h}while(!f.v);i.lineEnd()}}}function Ixe(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function jF(t){return qr(t[0])<=_r?t[0]:Ou(t[0])*((qr(t[0])+_r)%nl-_r)}function wot(t,e){var n=jF(e),r=e[1],i=En(r),s=[En(n),-Dn(n),0],o=0,a=0,l=new el;i===1?r=Fs+An:i===-1&&(r=-Fs-An);for(var u=0,d=t.length;u<d;++u)if(f=(c=t[u]).length)for(var c,f,h=c[f-1],p=jF(h),g=h[1]/2+t3,b=En(g),y=Dn(g),v=0;v<f;++v,p=E,b=T,y=D,h=w){var w=c[v],E=jF(w),S=w[1]/2+t3,T=En(S),D=Dn(S),k=E-p,R=k>=0?1:-1,O=R*k,B=O>_r,K=b*T;if(l.add(qu(K*R*En(O),y*D+K*Dn(O))),o+=B?k+R*nl:k,B^p>=n^E>=n){var L=yv(f0(h),f0(w));a3(L);var I=yv(s,L);a3(I);var $=(B^k>=0?-1:1)*Pl(I[2]);(r>$||r===$&&(L[0]||L[1]))&&(a+=B^k>=0?1:-1)}}return(o<-An||o<An&&l<-e3)^a&1}function DFe(t,e,n,r){return function(i){var s=e(i),o=kFe(),a=e(o),l=!1,u,d,c,f={point:h,lineStart:g,lineEnd:b,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=w,d=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=b,d=cke(d);var E=wot(u,r);d.length?(l||(i.polygonStart(),l=!0),TFe(d,Eot,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),d=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,S){t(E,S)&&i.point(E,S)}function p(E,S){s.point(E,S)}function g(){f.point=p,s.lineStart()}function b(){f.point=h,s.lineEnd()}function y(E,S){c.push([E,S]),a.point(E,S)}function v(){a.lineStart(),c=[]}function w(){y(c[0][0],c[0][1]),a.lineEnd();var E=a.clean(),S=o.result(),T,D=S.length,k,R,O;if(c.pop(),u.push(c),c=null,!!D){if(E&1){if(R=S[0],(k=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),T=0;T<k;++T)i.point((O=R[T])[0],O[1]);i.lineEnd()}return}D>1&&E&2&&S.push(S.pop().concat(S.shift())),d.push(S.filter(_ot))}}return f}}function _ot(t){return t.length>1}function Eot(t,e){return((t=t.x)[0]<0?t[1]-Fs-An:Fs-t[1])-((e=e.x)[0]<0?e[1]-Fs-An:Fs-e[1])}const $xe=DFe(function(){return!0},Cot,Aot,[-_r,-Fs]);function Cot(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(s,o){var a=s>0?_r:-_r,l=qr(s-e);qr(l-_r)<An?(t.point(e,n=(n+o)/2>0?Fs:-Fs),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),i=0):r!==a&&l>=_r&&(qr(e-r)<An&&(e-=r*An),qr(s-a)<An&&(s-=a*An),n=Sot(e,n,s,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),i=0),t.point(e=s,n=o),r=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Sot(t,e,n,r){var i,s,o=En(t-n);return qr(o)>An?m1((En(e)*(s=Dn(r))*En(n)-En(r)*(i=Dn(e))*En(t))/(i*s*o)):(e+r)/2}function Aot(t,e,n,r){var i;if(t==null)i=n*Fs,r.point(-_r,i),r.point(0,i),r.point(_r,i),r.point(_r,0),r.point(_r,-i),r.point(0,-i),r.point(-_r,-i),r.point(-_r,0),r.point(-_r,i);else if(qr(t[0]-e[0])>An){var s=t[0]<e[0]?_r:-_r;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(e[0],e[1])}function kot(t){var e=Dn(t),n=2*yr,r=e>0,i=qr(e)>An;function s(d,c,f,h){xot(h,t,n,f,d,c)}function o(d,c){return Dn(d)*Dn(c)>e}function a(d){var c,f,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(b,y){var v=[b,y],w,E=o(b,y),S=r?E?0:u(b,y):E?u(b+(b<0?_r:-_r),y):0;if(!c&&(p=h=E)&&d.lineStart(),E!==h&&(w=l(c,v),(!w||NA(c,w)||NA(v,w))&&(v[2]=1)),E!==h)g=0,E?(d.lineStart(),w=l(v,c),d.point(w[0],w[1])):(w=l(c,v),d.point(w[0],w[1],2),d.lineEnd()),c=w;else if(i&&c&&r^E){var T;!(S&f)&&(T=l(v,c,!0))&&(g=0,r?(d.lineStart(),d.point(T[0][0],T[0][1]),d.point(T[1][0],T[1][1]),d.lineEnd()):(d.point(T[1][0],T[1][1]),d.lineEnd(),d.lineStart(),d.point(T[0][0],T[0][1],3)))}E&&(!c||!NA(c,v))&&d.point(v[0],v[1]),c=v,h=E,f=S},lineEnd:function(){h&&d.lineEnd(),c=null},clean:function(){return g|(p&&h)<<1}}}function l(d,c,f){var h=f0(d),p=f0(c),g=[1,0,0],b=yv(h,p),y=kS(b,b),v=b[0],w=y-v*v;if(!w)return!f&&d;var E=e*y/w,S=-e*v/w,T=yv(g,b),D=TS(g,E),k=TS(b,S);zF(D,k);var R=T,O=kS(D,R),B=kS(R,R),K=O*O-B*(kS(D,D)-1);if(!(K<0)){var L=rl(K),I=TS(R,(-O-L)/B);if(zF(I,D),I=o3(I),!f)return I;var $=d[0],U=c[0],q=d[1],Y=c[1],X;U<$&&(X=$,$=U,U=X);var te=U-$,le=qr(te-_r)<An,ee=le||te<An;if(!le&&Y<q&&(X=q,q=Y,Y=X),ee?le?q+Y>0^I[1]<(qr(I[0]-$)<An?q:Y):q<=I[1]&&I[1]<=Y:te>_r^($<=I[0]&&I[0]<=U)){var z=TS(R,(-O+L)/B);return zF(z,D),[I,o3(z)]}}}function u(d,c){var f=r?t:_r-t,h=0;return d<-f?h|=1:d>f&&(h|=2),c<-f?h|=4:c>f&&(h|=8),h}return DFe(o,a,s,r?[0,-t]:[-_r,t-_r])}function Tot(t,e,n,r,i,s){var o=t[0],a=t[1],l=e[0],u=e[1],d=0,c=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<d)return;p<c&&(c=p)}else if(f>0){if(p>c)return;p>d&&(d=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>c)return;p>d&&(d=p)}else if(f>0){if(p<d)return;p<c&&(c=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<d)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>d&&(d=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>d&&(d=p)}else if(h>0){if(p<d)return;p<c&&(c=p)}return d>0&&(t[0]=o+d*f,t[1]=a+d*h),c<1&&(e[0]=o+c*f,e[1]=a+c*h),!0}}}}}var Qw=1e9,LS=-Qw;function LFe(t,e,n,r){function i(u,d){return t<=u&&u<=n&&e<=d&&d<=r}function s(u,d,c,f){var h=0,p=0;if(u==null||(h=o(u,c))!==(p=o(d,c))||l(u,d)<0^c>0)do f.point(h===0||h===3?t:n,h>1?r:e);while((h=(h+c+4)%4)!==p);else f.point(d[0],d[1])}function o(u,d){return qr(u[0]-t)<An?d>0?0:3:qr(u[0]-n)<An?d>0?2:1:qr(u[1]-e)<An?d>0?1:0:d>0?3:2}function a(u,d){return l(u.x,d.x)}function l(u,d){var c=o(u,1),f=o(d,1);return c!==f?c-f:c===0?d[1]-u[1]:c===1?u[0]-d[0]:c===2?u[1]-d[1]:d[0]-u[0]}return function(u){var d=u,c=kFe(),f,h,p,g,b,y,v,w,E,S,T,D={point:k,lineStart:K,lineEnd:L,polygonStart:O,polygonEnd:B};function k($,U){i($,U)&&d.point($,U)}function R(){for(var $=0,U=0,q=h.length;U<q;++U)for(var Y=h[U],X=1,te=Y.length,le=Y[0],ee,z,he=le[0],fe=le[1];X<te;++X)ee=he,z=fe,le=Y[X],he=le[0],fe=le[1],z<=r?fe>r&&(he-ee)*(r-z)>(fe-z)*(t-ee)&&++$:fe<=r&&(he-ee)*(r-z)<(fe-z)*(t-ee)&&--$;return $}function O(){d=c,f=[],h=[],T=!0}function B(){var $=R(),U=T&&$,q=(f=cke(f)).length;(U||q)&&(u.polygonStart(),U&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),q&&TFe(f,a,$,s,u),u.polygonEnd()),d=u,f=h=p=null}function K(){D.point=I,h&&h.push(p=[]),S=!0,E=!1,v=w=NaN}function L(){f&&(I(g,b),y&&E&&c.rejoin(),f.push(c.result())),D.point=k,E&&d.lineEnd()}function I($,U){var q=i($,U);if(h&&p.push([$,U]),S)g=$,b=U,y=q,S=!1,q&&(d.lineStart(),d.point($,U));else if(q&&E)d.point($,U);else{var Y=[v=Math.max(LS,Math.min(Qw,v)),w=Math.max(LS,Math.min(Qw,w))],X=[$=Math.max(LS,Math.min(Qw,$)),U=Math.max(LS,Math.min(Qw,U))];Tot(Y,X,t,e,n,r)?(E||(d.lineStart(),d.point(Y[0],Y[1])),d.point(X[0],X[1]),q||d.lineEnd(),T=!1):q&&(d.lineStart(),d.point($,U),T=!1)}v=$,w=U,E=q}return D}}function Pxe(t,e,n){var r=eu(t,e-An,n).concat(e);return function(i){return r.map(function(s){return[i,s]})}}function Nxe(t,e,n){var r=eu(t,e-An,n).concat(e);return function(i){return r.map(function(s){return[s,i]})}}function Dot(){var t,e,n,r,i,s,o,a,l=10,u=l,d=90,c=360,f,h,p,g,b=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return eu(AS(r/d)*d,n,d).map(p).concat(eu(AS(a/c)*c,o,c).map(g)).concat(eu(AS(e/l)*l,t,l).filter(function(w){return qr(w%d)>An}).map(f)).concat(eu(AS(s/u)*u,i,u).filter(function(w){return qr(w%c)>An}).map(h))}return y.lines=function(){return v().map(function(w){return{type:"LineString",coordinates:w}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(w){return arguments.length?y.extentMajor(w).extentMinor(w):y.extentMinor()},y.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),y.precision(b)):[[r,a],[n,o]]},y.extentMinor=function(w){return arguments.length?(e=+w[0][0],t=+w[1][0],s=+w[0][1],i=+w[1][1],e>t&&(w=e,e=t,t=w),s>i&&(w=s,s=i,i=w),y.precision(b)):[[e,s],[t,i]]},y.step=function(w){return arguments.length?y.stepMajor(w).stepMinor(w):y.stepMinor()},y.stepMajor=function(w){return arguments.length?(d=+w[0],c=+w[1],y):[d,c]},y.stepMinor=function(w){return arguments.length?(l=+w[0],u=+w[1],y):[l,u]},y.precision=function(w){return arguments.length?(b=+w,f=Pxe(s,i,90),h=Nxe(e,t,b),p=Pxe(a,o,90),g=Nxe(r,n,b),y):b},y.extentMajor([[-180,-90+An],[180,90-An]]).extentMinor([[-180,-80-An],[180,80+An]])}const g2=t=>t;var UF=new el,eI=new el,RFe,FFe,tI,nI,jf={point:ea,lineStart:ea,lineEnd:ea,polygonStart:function(){jf.lineStart=Lot,jf.lineEnd=Fot},polygonEnd:function(){jf.lineStart=jf.lineEnd=jf.point=ea,UF.add(qr(eI)),eI=new el},result:function(){var t=UF/2;return UF=new el,t}};function Lot(){jf.point=Rot}function Rot(t,e){jf.point=OFe,RFe=tI=t,FFe=nI=e}function OFe(t,e){eI.add(nI*t-tI*e),tI=t,nI=e}function Fot(){OFe(RFe,FFe)}var bv=1/0,m3=bv,y2=-bv,g3=y2,y3={point:Oot,lineStart:ea,lineEnd:ea,polygonStart:ea,polygonEnd:ea,result:function(){var t=[[bv,m3],[y2,g3]];return y2=g3=-(m3=bv=1/0),t}};function Oot(t,e){t<bv&&(bv=t),t>y2&&(y2=t),e<m3&&(m3=e),e>g3&&(g3=e)}var rI=0,iI=0,e_=0,b3=0,v3=0,_b=0,sI=0,oI=0,t_=0,MFe,IFe,_d,Ed,Du={point:h0,lineStart:Bxe,lineEnd:zxe,polygonStart:function(){Du.lineStart=$ot,Du.lineEnd=Pot},polygonEnd:function(){Du.point=h0,Du.lineStart=Bxe,Du.lineEnd=zxe},result:function(){var t=t_?[sI/t_,oI/t_]:_b?[b3/_b,v3/_b]:e_?[rI/e_,iI/e_]:[NaN,NaN];return rI=iI=e_=b3=v3=_b=sI=oI=t_=0,t}};function h0(t,e){rI+=t,iI+=e,++e_}function Bxe(){Du.point=Mot}function Mot(t,e){Du.point=Iot,h0(_d=t,Ed=e)}function Iot(t,e){var n=t-_d,r=e-Ed,i=rl(n*n+r*r);b3+=i*(_d+t)/2,v3+=i*(Ed+e)/2,_b+=i,h0(_d=t,Ed=e)}function zxe(){Du.point=h0}function $ot(){Du.point=Not}function Pot(){$Fe(MFe,IFe)}function Not(t,e){Du.point=$Fe,h0(MFe=_d=t,IFe=Ed=e)}function $Fe(t,e){var n=t-_d,r=e-Ed,i=rl(n*n+r*r);b3+=i*(_d+t)/2,v3+=i*(Ed+e)/2,_b+=i,i=Ed*t-_d*e,sI+=i*(_d+t),oI+=i*(Ed+e),t_+=i*3,h0(_d=t,Ed=e)}function PFe(t){this._context=t}PFe.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,nl);break}}},result:ea};var aI=new el,qF,NFe,BFe,n_,r_,b2={point:ea,lineStart:function(){b2.point=Bot},lineEnd:function(){qF&&zFe(NFe,BFe),b2.point=ea},polygonStart:function(){qF=!0},polygonEnd:function(){qF=null},result:function(){var t=+aI;return aI=new el,t}};function Bot(t,e){b2.point=zFe,NFe=n_=t,BFe=r_=e}function zFe(t,e){n_-=t,r_-=e,aI.add(rl(n_*n_+r_*r_)),n_=t,r_=e}let jxe,x3,Uxe,qxe;class Hxe{constructor(e){this._append=e==null?jFe:zot(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Uxe||this._append!==x3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Uxe=r,x3=this._append,qxe=this._,this._=i}this._+=qxe;break}}}result(){const e=this._;return this._="",e.length?e:null}}function jFe(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function zot(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return jFe;if(e!==jxe){const n=10**e;jxe=e,x3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return x3}function UFe(t,e){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),zf(a,i(s))),s.result()}return o.area=function(a){return zf(a,i(jf)),jf.result()},o.measure=function(a){return zf(a,i(b2)),b2.result()},o.bounds=function(a){return zf(a,i(y3)),y3.result()},o.centroid=function(a){return zf(a,i(Du)),Du.result()},o.projection=function(a){return arguments.length?(i=a==null?(t=null,g2):(t=a).stream,o):t},o.context=function(a){return arguments.length?(s=a==null?(e=null,new Hxe(n)):new PFe(e=a),typeof r!="function"&&s.pointRadius(r),o):e},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(s=new Hxe(n)),o},o.projection(t).digits(n).context(e)}function vL(t){return function(e){var n=new lI;for(var r in t)n[r]=t[r];return n.stream=e,n}}function lI(){}lI.prototype={constructor:lI,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $N(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),zf(n,t.stream(y3)),e(y3.result()),r!=null&&t.clipExtent(r),t}function xL(t,e,n){return $N(t,function(r){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(s-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function PN(t,e,n){return xL(t,[[0,0],e],n)}function NN(t,e,n){return $N(t,function(r){var i=+e,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];t.scale(150*s).translate([o,a])},n)}function BN(t,e,n){return $N(t,function(r){var i=+e,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var Gxe=16,jot=Dn(30*yr);function Vxe(t,e){return+e?qot(t,e):Uot(t)}function Uot(t){return vL({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function qot(t,e){function n(r,i,s,o,a,l,u,d,c,f,h,p,g,b){var y=u-r,v=d-i,w=y*y+v*v;if(w>4*e&&g--){var E=o+f,S=a+h,T=l+p,D=rl(E*E+S*S+T*T),k=Pl(T/=D),R=qr(qr(T)-1)<An||qr(s-c)<An?(s+c)/2:qu(S,E),O=t(R,k),B=O[0],K=O[1],L=B-r,I=K-i,$=v*L-y*I;($*$/w>e||qr((y*L+v*I)/w-.5)>.3||o*f+a*h+l*p<jot)&&(n(r,i,s,o,a,l,B,K,R,E/=D,S/=D,T,g,b),b.point(B,K),n(B,K,R,E,S,T,u,d,c,f,h,p,g,b))}}return function(r){var i,s,o,a,l,u,d,c,f,h,p,g,b={point:y,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),b.lineStart=S},polygonEnd:function(){r.polygonEnd(),b.lineStart=v}};function y(k,R){k=t(k,R),r.point(k[0],k[1])}function v(){c=NaN,b.point=w,r.lineStart()}function w(k,R){var O=f0([k,R]),B=t(k,R);n(c,f,d,h,p,g,c=B[0],f=B[1],d=k,h=O[0],p=O[1],g=O[2],Gxe,r),r.point(c,f)}function E(){b.point=y,r.lineEnd()}function S(){v(),b.point=T,b.lineEnd=D}function T(k,R){w(i=k,R),s=c,o=f,a=h,l=p,u=g,b.point=w}function D(){n(c,f,d,h,p,g,s,o,i,a,l,u,Gxe,r),b.lineEnd=E,E()}return b}}var Hot=vL({point:function(t,e){this.stream.point(t*yr,e*yr)}});function Got(t){return vL({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Vot(t,e,n,r,i){function s(o,a){return o*=r,a*=i,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},s}function Wxe(t,e,n,r,i,s){if(!s)return Vot(t,e,n,r,i);var o=Dn(s),a=En(s),l=o*t,u=a*t,d=o/t,c=a/t,f=(a*n-o*e)/t,h=(a*e+o*n)/t;function p(g,b){return g*=r,b*=i,[l*g-u*b+e,n-u*g-l*b]}return p.invert=function(g,b){return[r*(d*g-c*b+f),i*(h-c*g-d*b)]},p}function Qd(t){return qFe(function(){return t})()}function qFe(t){var e,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,d,c=0,f=1,h=1,p=null,g=$xe,b=null,y,v,w,E=g2,S=.5,T,D,k,R,O;function B($){return k($[0]*yr,$[1]*yr)}function K($){return $=k.invert($[0],$[1]),$&&[$[0]*Ns,$[1]*Ns]}B.stream=function($){return R&&O===$?R:R=Hot(Got(d)(g(T(E(O=$)))))},B.preclip=function($){return arguments.length?(g=$,p=void 0,I()):g},B.postclip=function($){return arguments.length?(E=$,b=y=v=w=null,I()):E},B.clipAngle=function($){return arguments.length?(g=+$?kot(p=$*yr):(p=null,$xe),I()):p*Ns},B.clipExtent=function($){return arguments.length?(E=$==null?(b=y=v=w=null,g2):LFe(b=+$[0][0],y=+$[0][1],v=+$[1][0],w=+$[1][1]),I()):b==null?null:[[b,y],[v,w]]},B.scale=function($){return arguments.length?(n=+$,L()):n},B.translate=function($){return arguments.length?(r=+$[0],i=+$[1],L()):[r,i]},B.center=function($){return arguments.length?(s=$[0]%360*yr,o=$[1]%360*yr,L()):[s*Ns,o*Ns]},B.rotate=function($){return arguments.length?(a=$[0]%360*yr,l=$[1]%360*yr,u=$.length>2?$[2]%360*yr:0,L()):[a*Ns,l*Ns,u*Ns]},B.angle=function($){return arguments.length?(c=$%360*yr,L()):c*Ns},B.reflectX=function($){return arguments.length?(f=$?-1:1,L()):f<0},B.reflectY=function($){return arguments.length?(h=$?-1:1,L()):h<0},B.precision=function($){return arguments.length?(T=Vxe(D,S=$*$),I()):rl(S)},B.fitExtent=function($,U){return xL(B,$,U)},B.fitSize=function($,U){return PN(B,$,U)},B.fitWidth=function($,U){return NN(B,$,U)},B.fitHeight=function($,U){return BN(B,$,U)};function L(){var $=Wxe(n,0,0,f,h,c).apply(null,e(s,o)),U=Wxe(n,r-$[0],i-$[1],f,h,c);return d=AFe(a,l,u),D=JM(e,U),k=JM(d,D),T=Vxe(D,S),I()}function I(){return R=O=null,B}return function(){return e=t.apply(this,arguments),B.invert=e.invert&&K,L()}}function zN(t){var e=0,n=_r/3,r=qFe(t),i=r(e,n);return i.parallels=function(s){return arguments.length?r(e=s[0]*yr,n=s[1]*yr):[e*Ns,n*Ns]},i}function Wot(t){var e=Dn(t);function n(r,i){return[r*e,En(i)/e]}return n.invert=function(r,i){return[r/e,Pl(i*e)]},n}function Yot(t,e){var n=En(t),r=(n+En(e))/2;if(qr(r)<An)return Wot(t);var i=1+n*(2*r-n),s=rl(i)/r;function o(a,l){var u=rl(i-2*r*En(l))/r;return[u*En(a*=r),s-u*Dn(a)]}return o.invert=function(a,l){var u=s-l,d=qu(a,qr(u))*Ou(u);return u*r<0&&(d-=_r*Ou(a)*Ou(u)),[d/r,Pl((i-(a*a+u*u)*r*r)/(2*r))]},o}function w3(){return zN(Yot).scale(155.424).center([0,33.6442])}function HFe(){return w3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Xot(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Zot(){var t,e,n=HFe(),r,i=w3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=w3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function d(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}d.invert=function(f){var h=n.scale(),p=n.translate(),g=(f[0]-p[0])/h,b=(f[1]-p[1])/h;return(b>=.12&&b<.234&&g>=-.425&&g<-.214?i:b>=.166&&b<.234&&g>=-.214&&g<-.115?o:n).invert(f)},d.stream=function(f){return t&&e===f?t:t=Xot([n.stream(e=f),i.stream(f),o.stream(f)])},d.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),c()):n.precision()},d.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),d.translate(n.translate())):n.scale()},d.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],g=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+An,g+.12*h+An],[p-.214*h-An,g+.234*h-An]]).stream(u),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+An,g+.166*h+An],[p-.115*h-An,g+.234*h-An]]).stream(u),c()},d.fitExtent=function(f,h){return xL(d,f,h)},d.fitSize=function(f,h){return PN(d,f,h)},d.fitWidth=function(f,h){return NN(d,f,h)},d.fitHeight=function(f,h){return BN(d,f,h)};function c(){return t=e=null,d}return d.scale(1070)}function GFe(t){return function(e,n){var r=Dn(e),i=Dn(n),s=t(r*i);return s===1/0?[2,0]:[s*i*En(e),s*En(n)]}}function NE(t){return function(e,n){var r=rl(e*e+n*n),i=t(r),s=En(i),o=Dn(i);return[qu(e*s,r*o),Pl(r&&n*s/r)]}}var VFe=GFe(function(t){return rl(2/(1+t))});VFe.invert=NE(function(t){return 2*Pl(t/2)});function Kot(){return Qd(VFe).scale(124.75).clipAngle(180-.001)}var WFe=GFe(function(t){return(t=mFe(t))&&t/En(t)});WFe.invert=NE(function(t){return t});function Jot(){return Qd(WFe).scale(79.4188).clipAngle(180-.001)}function wL(t,e){return[t,n3(MN((Fs+e)/2))]}wL.invert=function(t,e){return[t,2*m1(pFe(e))-Fs]};function Qot(){return YFe(wL).scale(961/nl)}function YFe(t){var e=Qd(t),n=e.center,r=e.scale,i=e.translate,s=e.clipExtent,o=null,a,l,u;e.scale=function(c){return arguments.length?(r(c),d()):r()},e.translate=function(c){return arguments.length?(i(c),d()):i()},e.center=function(c){return arguments.length?(n(c),d()):n()},e.clipExtent=function(c){return arguments.length?(c==null?o=a=l=u=null:(o=+c[0][0],a=+c[0][1],l=+c[1][0],u=+c[1][1]),d()):o==null?null:[[o,a],[l,u]]};function d(){var c=_r*r(),f=e(vot(e.rotate()).invert([0,0]));return s(o==null?[[f[0]-c,f[1]-c],[f[0]+c,f[1]+c]]:t===wL?[[Math.max(f[0]-c,o),a],[Math.min(f[0]+c,l),u]]:[[o,Math.max(f[1]-c,a)],[l,Math.min(f[1]+c,u)]])}return d()}function RS(t){return MN((Fs+t)/2)}function eat(t,e){var n=Dn(t),r=t===e?En(t):n3(n/Dn(e))/n3(RS(e)/RS(t)),i=n*BF(RS(t),r)/r;if(!r)return wL;function s(o,a){i>0?a<-Fs+An&&(a=-Fs+An):a>Fs-An&&(a=Fs-An);var l=i/BF(RS(a),r);return[l*En(r*o),i-l*Dn(r*o)]}return s.invert=function(o,a){var l=i-a,u=Ou(r)*rl(o*o+l*l),d=qu(o,qr(l))*Ou(l);return l*r<0&&(d-=_r*Ou(o)*Ou(l)),[d/r,2*m1(BF(i/u,1/r))-Fs]},s}function tat(){return zN(eat).scale(109.5).parallels([30,30])}function _3(t,e){return[t,e]}_3.invert=_3;function nat(){return Qd(_3).scale(152.63)}function rat(t,e){var n=Dn(t),r=t===e?En(t):(n-Dn(e))/(e-t),i=n/r+t;if(qr(r)<An)return _3;function s(o,a){var l=i-a,u=r*o;return[l*En(u),i-l*Dn(u)]}return s.invert=function(o,a){var l=i-a,u=qu(o,qr(l))*Ou(l);return l*r<0&&(u-=_r*Ou(o)*Ou(l)),[u/r,i-Ou(r)*rl(o*o+l*l)]},s}function iat(){return zN(rat).scale(131.154).center([0,13.9389])}var D_=1.340264,L_=-.081106,R_=893e-6,F_=.003796,E3=rl(3)/2,sat=12;function XFe(t,e){var n=Pl(E3*En(e)),r=n*n,i=r*r*r;return[t*Dn(n)/(E3*(D_+3*L_*r+i*(7*R_+9*F_*r))),n*(D_+L_*r+i*(R_+F_*r))]}XFe.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,s=0,o,a,l;s<sat&&(a=n*(D_+L_*r+i*(R_+F_*r))-e,l=D_+3*L_*r+i*(7*R_+9*F_*r),n-=o=a/l,r=n*n,i=r*r*r,!(qr(o)<e3));++s);return[E3*t*(D_+3*L_*r+i*(7*R_+9*F_*r))/Dn(n),Pl(En(n)/E3)]};function oat(){return Qd(XFe).scale(177.158)}function ZFe(t,e){var n=Dn(e),r=Dn(t)*n;return[n*En(t)/r,En(e)/r]}ZFe.invert=NE(m1);function aat(){return Qd(ZFe).scale(144.049).clipAngle(60)}function lat(){var t=1,e=0,n=0,r=1,i=1,s=0,o,a,l=null,u,d,c,f=1,h=1,p=vL({point:function(E,S){var T=w([E,S]);this.stream.point(T[0],T[1])}}),g=g2,b,y;function v(){return f=t*r,h=t*i,b=y=null,w}function w(E){var S=E[0]*f,T=E[1]*h;if(s){var D=T*o-S*a;S=S*o+T*a,T=D}return[S+e,T+n]}return w.invert=function(E){var S=E[0]-e,T=E[1]-n;if(s){var D=T*o+S*a;S=S*o-T*a,T=D}return[S/f,T/h]},w.stream=function(E){return b&&y===E?b:b=p(g(y=E))},w.postclip=function(E){return arguments.length?(g=E,l=u=d=c=null,v()):g},w.clipExtent=function(E){return arguments.length?(g=E==null?(l=u=d=c=null,g2):LFe(l=+E[0][0],u=+E[0][1],d=+E[1][0],c=+E[1][1]),v()):l==null?null:[[l,u],[d,c]]},w.scale=function(E){return arguments.length?(t=+E,v()):t},w.translate=function(E){return arguments.length?(e=+E[0],n=+E[1],v()):[e,n]},w.angle=function(E){return arguments.length?(s=E%360*yr,a=En(s),o=Dn(s),v()):s*Ns},w.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},w.fitExtent=function(E,S){return xL(w,E,S)},w.fitSize=function(E,S){return PN(w,E,S)},w.fitWidth=function(E,S){return NN(w,E,S)},w.fitHeight=function(E,S){return BN(w,E,S)},w}function KFe(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}KFe.invert=function(t,e){var n=e,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(qr(i)>An&&--r>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function uat(){return Qd(KFe).scale(175.295)}function JFe(t,e){return[Dn(e)*En(t),En(e)]}JFe.invert=NE(Pl);function cat(){return Qd(JFe).scale(249.5).clipAngle(90+An)}function QFe(t,e){var n=Dn(e),r=1+Dn(t)*n;return[n*En(t)/r,En(e)/r]}QFe.invert=NE(function(t){return 2*m1(t)});function dat(){return Qd(QFe).scale(250).clipAngle(142)}function eOe(t,e){return[n3(MN((Fs+e)/2)),-t]}eOe.invert=function(t,e){return[-e,2*m1(pFe(t))-Fs]};function fat(){var t=YFe(eOe),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var hat=Math.abs,uI=Math.cos,C3=Math.sin,pat=1e-6,tOe=Math.PI,cI=tOe/2,Yxe=mat(2);function Xxe(t){return t>1?cI:t<-1?-cI:Math.asin(t)}function mat(t){return t>0?Math.sqrt(t):0}function gat(t,e){var n=t*C3(e),r=30,i;do e-=i=(e+C3(e)-n)/(1+uI(e));while(hat(i)>pat&&--r>0);return e/2}function yat(t,e,n){function r(i,s){return[t*i*uI(s=gat(n,s)),e*C3(s)]}return r.invert=function(i,s){return s=Xxe(s/e),[i/(t*uI(s)),Xxe((2*s+C3(2*s))/n)]},r}var bat=yat(Yxe/cI,Yxe,tOe);function vat(){return Qd(bat).scale(169.529)}const xat=UFe(),dI=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function wat(t,e){return function n(){const r=e();return r.type=t,r.path=UFe().projection(r),r.copy=r.copy||function(){const i=n();return dI.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},gLe(r)}}function jN(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(S3[t]=wat(t,e),this):S3[t]||null}function nOe(t){return t&&t.path||xat}const S3={albers:HFe,albersusa:Zot,azimuthalequalarea:Kot,azimuthalequidistant:Jot,conicconformal:tat,conicequalarea:w3,conicequidistant:iat,equalEarth:oat,equirectangular:nat,gnomonic:aat,identity:lat,mercator:Qot,mollweide:vat,naturalEarth1:uat,orthographic:cat,stereographic:dat,transversemercator:fat};for(const t in S3)jN(t,S3[t]);function _at(){}const Df=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function rOe(){var t=1,e=1,n=a;function r(l,u){return u.map(d=>i(l,d))}function i(l,u){var d=[],c=[];return s(l,u,f=>{n(f,l,u),Eat(f)>0?d.push([f]):c.push(f)}),c.forEach(f=>{for(var h=0,p=d.length,g;h<p;++h)if(Cat((g=d[h])[0],f)!==-1){g.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:d}}function s(l,u,d){var c=[],f=[],h,p,g,b,y,v;for(h=p=-1,b=l[0]>=u,Df[b<<1].forEach(w);++h<t-1;)g=b,b=l[h+1]>=u,Df[g|b<<1].forEach(w);for(Df[b<<0].forEach(w);++p<e-1;){for(h=-1,b=l[p*t+t]>=u,y=l[p*t]>=u,Df[b<<1|y<<2].forEach(w);++h<t-1;)g=b,b=l[p*t+t+h+1]>=u,v=y,y=l[p*t+h+1]>=u,Df[g|b<<1|y<<2|v<<3].forEach(w);Df[b|y<<3].forEach(w)}for(h=-1,y=l[p*t]>=u,Df[y<<2].forEach(w);++h<t-1;)v=y,y=l[p*t+h+1]>=u,Df[y<<2|v<<3].forEach(w);Df[y<<3].forEach(w);function w(E){var S=[E[0][0]+h,E[0][1]+p],T=[E[1][0]+h,E[1][1]+p],D=o(S),k=o(T),R,O;(R=f[D])?(O=c[k])?(delete f[R.end],delete c[O.start],R===O?(R.ring.push(T),d(R.ring)):c[R.start]=f[O.end]={start:R.start,end:O.end,ring:R.ring.concat(O.ring)}):(delete f[R.end],R.ring.push(T),f[R.end=k]=R):(R=c[k])?(O=f[D])?(delete c[R.start],delete f[O.end],R===O?(R.ring.push(T),d(R.ring)):c[O.start]=f[R.end]={start:O.start,end:R.end,ring:O.ring.concat(R.ring)}):(delete c[R.start],R.ring.unshift(S),c[R.start=D]=R):c[D]=f[k]={start:D,end:k,ring:[S,T]}}}function o(l){return l[0]*2+l[1]*(t+1)*4}function a(l,u,d){l.forEach(c=>{var f=c[0],h=c[1],p=f|0,g=h|0,b,y=u[g*t+p];f>0&&f<t&&p===f&&(b=u[g*t+p-1],c[0]=f+(d-b)/(y-b)-.5),h>0&&h<e&&g===h&&(b=u[(g-1)*t+p],c[1]=h+(d-b)/(y-b)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[t,e];var u=Math.floor(l[0]),d=Math.floor(l[1]);return u>=0&&d>=0||ot("invalid size"),t=u,e=d,r},r.smooth=function(l){return arguments.length?(n=l?a:_at,r):n===a},r}function Eat(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function Cat(t,e){for(var n=-1,r=e.length,i;++n<r;)if(i=Sat(t,e[n]))return i;return 0}function Sat(t,e){for(var n=e[0],r=e[1],i=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],d=l[1],c=t[a],f=c[0],h=c[1];if(Aat(l,c,e))return 0;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(i=-i)}return i}function Aat(t,e,n){var r;return kat(t,e,n)&&Tat(t[r=+(t[0]===e[0])],n[r],e[r])}function kat(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Tat(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function iOe(t,e,n){return function(r){var i=zd(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=e?s0(s,o,t):a/(t+1);return eu(s+l,o,l)}}function UN(t){rt.call(this,null,t)}UN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Lt(UN,rt,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=t.field||Ma,s=rOe().smooth(t.smooth!==!1),o=t.thresholds||Dat(r,i,t),a=t.as===null?null:t.as||"contour",l=[];return r.forEach(u=>{const d=i(u),c=s.size([d.width,d.height])(d.values,at(o)?o:o(d.values));Lat(c,d,u,t),c.forEach(f=>{l.push(HD(u,vi(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Dat(t,e,n){const r=iOe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(t.map(i=>Vg(e(i).values)))}function Lat(t,e,n,r){let i=r.scale||e.scale,s=r.translate||e.translate;if(sr(i)&&(i=i(n,r)),sr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ui(i)?i:i[0])||1,a=(ui(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;t.forEach(sOe(e,o,a,l,u))}function sOe(t,e,n,r,i){const s=t.x1||0,o=t.y1||0,a=e*n<0;function l(c){c.forEach(u)}function u(c){a&&c.reverse(),c.forEach(d)}function d(c){c[0]=(c[0]-s)*e+r,c[1]=(c[1]-o)*n+i}return function(c){return c.coordinates.forEach(l),c}}function Zxe(t,e,n){const r=t>=0?t:YP(e,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function HF(t){return sr(t)?t:Ia(+t)}function oOe(){var t=l=>l[0],e=l=>l[1],n=o1,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const d=Zxe(r[0],l,t)>>o,c=Zxe(r[1],l,e)>>o,f=d?d+2:0,h=c?c+2:0,p=2*f+(i>>o),g=2*h+(s>>o),b=new Float32Array(p*g),y=new Float32Array(p*g);let v=b;l.forEach(E=>{const S=f+(+t(E)>>o),T=h+(+e(E)>>o);S>=0&&S<p&&T>=0&&T<g&&(b[S+T*p]+=+n(E))}),d>0&&c>0?(Vy(p,g,b,y,d),Wy(p,g,y,b,c),Vy(p,g,b,y,d),Wy(p,g,y,b,c),Vy(p,g,b,y,d),Wy(p,g,y,b,c)):d>0?(Vy(p,g,b,y,d),Vy(p,g,y,b,d),Vy(p,g,b,y,d),v=y):c>0&&(Wy(p,g,b,y,c),Wy(p,g,y,b,c),Wy(p,g,b,y,c),v=y);const w=u?Math.pow(2,-2*o):1/dke(v);for(let E=0,S=p*g;E<S;++E)v[E]*=w;return{values:v,scale:1<<o,width:p,height:g,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(t=HF(l),a):t},a.y=function(l){return arguments.length?(e=HF(l),a):e},a.weight=function(l){return arguments.length?(n=HF(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],d=+l[1];return u>=0&&d>=0||ot("invalid size"),i=u,s=d,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||ot("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=Pt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ot("invalid bandwidth"),r=l,a):r},a}function Vy(t,e,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[a+o*t]),a>=i&&(a>=s&&(l-=n[a-s+o*t]),r[a-i+o*t]=l/Math.min(a+1,t-1+s-a,s))}function Wy(t,e,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[o+a*t]),a>=i&&(a>=s&&(l-=n[o+(a-s)*t]),r[o+(a-i)*t]=l/Math.min(a+1,e-1+s-a,s))}function qN(t){rt.call(this,null,t)}qN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Rat=["x","y","weight","size","cellSize","bandwidth"];function aOe(t,e){return Rat.forEach(n=>e[n]!=null?t[n](e[n]):0),t}Lt(qN,rt,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=e.materialize(e.SOURCE).source,i=Fat(r,t.groupby),s=(t.groupby||[]).map(Os),o=aOe(oOe(),t),a=t.as||"grid",l=[];function u(d,c){for(let f=0;f<s.length;++f)d[s[f]]=c[f];return d}return l=i.map(d=>vi(u({[a]:o(d,t.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Fat(t,e){var n=[],r=d=>d(a),i,s,o,a,l,u;if(e==null)n.push(t);else for(i={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function HN(t){rt.call(this,null,t)}HN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Lt(HN,rt,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=rOe().smooth(t.smooth!==!1),i=t.values,s=t.thresholds||iOe(t.count||10,t.nice,!!i),o=t.size,a,l;return i||(i=e.materialize(e.SOURCE).source,a=aOe(oOe(),t)(i,!0),l=sOe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(vi),n}});const fI="Feature",GN="FeatureCollection",Oat="MultiPoint";function VN(t){rt.call(this,null,t)}VN.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Lt(VN,rt,{transform(t,e){var n=this._features,r=this._points,i=t.fields,s=i&&i[0],o=i&&i[1],a=t.geojson||!i&&Ma,l=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(La(a))||s&&e.modified(La(s))||o&&e.modified(La(o)),(!this.value||u)&&(l=e.SOURCE,this._features=n=[],this._points=r=[]),a&&e.visit(l,d=>n.push(a(d))),s&&o&&(e.visit(l,d=>{var c=s(d),f=o(d);c!=null&&f!=null&&(c=+c)===c&&(f=+f)===f&&r.push([c,f])}),n=n.concat({type:fI,geometry:{type:Oat,coordinates:r}})),this.value={type:GN,features:n}}});function WN(t){rt.call(this,null,t)}WN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Lt(WN,rt,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Ma,s=t.as||"path",o=n.SOURCE;!r||t.modified()?(this.value=r=nOe(t.projection),n.materialize().reflow()):o=i===Ma||e.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Mat(r,t.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function Mat(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function YN(t){rt.call(this,null,t)}YN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Lt(YN,rt,{transform(t,e){var n=t.projection,r=t.fields[0],i=t.fields[1],s=t.as||["x","y"],o=s[0],a=s[1],l;function u(d){const c=n([r(d),i(d)]);c?(d[o]=c[0],d[a]=c[1]):(d[o]=void 0,d[a]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(l=e.modified(r.fields)||e.modified(i.fields),e.visit(l?e.ADD_MOD:e.ADD,u)),e.modifies(s)}});function XN(t){rt.call(this,null,t)}XN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Lt(XN,rt,{transform(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",s=n.ADD;return(!r||t.modified())&&(this.value=r=Iat(nOe(t.projection),t.field||Bu("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Iat(t,e,n){const r=n==null?i=>t(e(i)):i=>{var s=t.pointRadius(),o=t.pointRadius(n)(e(i));return t.pointRadius(s),o};return r.context=i=>(t.context(i),r),r}function ZN(t){rt.call(this,[],t),this.generator=Dot()}ZN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Lt(ZN,rt,{transform(t,e){var n=this.value,r=this.generator,i;if(!n.length||t.modified())for(const s in t)sr(r[s])&&r[s](t[s]);return i=r(),n.length?e.mod.push(nDe(n[0],i)):e.add.push(vi(i)),n[0]=i,e}});function KN(t){rt.call(this,null,t)}KN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Lt(KN,rt,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,r=t.resolve==="shared",i=t.field||Ma,s=Pat(t.opacity,t),o=$at(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:r?Vg(n.map(u=>Vg(i(u).values))):0};return n.forEach(u=>{const d=i(u),c=ir({},u,l);r||(c.$max=Vg(d.values||[])),u[a]=Nat(d,c,o.dep?o:Ia(o(c)),s.dep?s:Ia(s(c)))}),e.reflow(!0).modifies(a)}});function $at(t,e){let n;return sr(t)?(n=r=>hk(t(r,e)),n.dep=lOe(t)):n=Ia(hk(t||"#888")),n}function Pat(t,e){let n;return sr(t)?(n=r=>t(r,e),n.dep=lOe(t)):t?n=Ia(t):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function lOe(t){if(!sr(t))return!1;const e=Mc(La(t));return e.$x||e.$y||e.$value||e.$max}function Nat(t,e,n,r){const i=t.width,s=t.height,o=t.x1||0,a=t.y1||0,l=t.x2||i,u=t.y2||s,d=t.values,c=d?b=>d[b]:vp,f=Up(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),g=p.data;for(let b=a,y=0;b<u;++b){e.$y=b-a;for(let v=o,w=b*i;v<l;++v,y+=4){e.$x=v-o,e.$value=c(v+w);const E=n(e);g[y+0]=E.r,g[y+1]=E.g,g[y+2]=E.b,g[y+3]=~~(255*r(e))}}return h.putImageData(p,0,0),f}function uOe(t){rt.call(this,null,t),this.modified(!0)}Lt(uOe,rt,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=zat(t.type),dI.forEach(r=>{t[r]!=null&&Kxe(n,r,t[r])})):dI.forEach(r=>{t.modified(r)&&Kxe(n,r,t[r])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Bat(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Bat(t,e){const n=jat(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function zat(t){const e=jN((t||"mercator").toLowerCase());return e||ot("Unrecognized projection type: "+t),e()}function Kxe(t,e,n){sr(t[e])&&t[e](n)}function jat(t){return t=Pt(t),t.length===1?t[0]:{type:GN,features:t.reduce((e,n)=>e.concat(Uat(n)),[])}}function Uat(t){return t.type===GN?t.features:Pt(t).filter(e=>e!=null).map(e=>e.type===fI?e:{type:fI,geometry:e})}const qat=Object.freeze(Object.defineProperty({__proto__:null,contour:HN,geojson:VN,geopath:WN,geopoint:YN,geoshape:XN,graticule:ZN,heatmap:KN,isocontour:UN,kde2d:qN,projection:uOe},Symbol.toStringTag,{value:"Module"}));function Hat(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-t)*r,u=(u/o-e)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Gat(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return cOe(this.cover(e,n),e,n,t)}function cOe(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,o={data:r},a=t._x0,l=t._y0,u=t._x1,d=t._y1,c,f,h,p,g,b,y,v;if(!s)return t._root=o,t;for(;s.length;)if((g=e>=(c=(a+u)/2))?a=c:u=c,(b=n>=(f=(l+d)/2))?l=f:d=f,i=s,!(s=s[y=b<<1|g]))return i[y]=o,t;if(h=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===h&&n===p)return o.next=s,i?i[y]=o:t._root=o,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(g=e>=(c=(a+u)/2))?a=c:u=c,(b=n>=(f=(l+d)/2))?l=f:d=f;while((y=b<<1|g)===(v=(p>=f)<<1|h>=c));return i[v]=s,i[y]=o,t}function Vat(t){var e,n,r=t.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,d=-1/0,c=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=i,a[n]=s,i<l&&(l=i),i>d&&(d=i),s<u&&(u=s),s>c&&(c=s));if(l>d||u>c)return this;for(this.cover(l,u).cover(d,c),n=0;n<r;++n)cOe(this,o[n],a[n],t[n]);return this}function Wat(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o=i-n||1,a=this._root,l,u;n>t||t>=i||r>e||e>=s;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Yat(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Xat(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Xa(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Zat(t,e,n){var r,i=this._x0,s=this._y0,o,a,l,u,d=this._x1,c=this._y1,f=[],h=this._root,p,g;for(h&&f.push(new Xa(h,i,s,d,c)),n==null?n=1/0:(i=t-n,s=e-n,d=t+n,c=e+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>d||(a=p.y0)>c||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var b=(o+l)/2,y=(a+u)/2;f.push(new Xa(h[3],b,y,l,u),new Xa(h[2],o,y,b,u),new Xa(h[1],b,a,l,y),new Xa(h[0],o,a,b,y)),(g=(e>=y)<<1|t>=b)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=p)}else{var v=t-+this._x.call(null,h.data),w=e-+this._y.call(null,h.data),E=v*v+w*w;if(E<n){var S=Math.sqrt(n=E);i=t-S,s=e-S,d=t+S,c=e+S,r=h.data}}return r}function Kat(t){if(isNaN(d=+this._x.call(null,t))||isNaN(c=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,d,c,f,h,p,g,b,y;if(!n)return this;if(n.length)for(;;){if((p=d>=(f=(o+l)/2))?o=f:l=f,(g=c>=(h=(a+u)/2))?a=h:u=h,e=n,!(n=n[b=g<<1|p]))return this;if(!n.length)break;(e[b+1&3]||e[b+2&3]||e[b+3&3])&&(r=e,y=b)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[b]=s:delete e[b],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Jat(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Qat(){return this._root}function elt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tlt(t){var e=[],n,r=this._root,i,s,o,a,l;for(r&&e.push(new Xa(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,d=(o+l)/2;(i=r[3])&&e.push(new Xa(i,u,d,a,l)),(i=r[2])&&e.push(new Xa(i,s,d,u,l)),(i=r[1])&&e.push(new Xa(i,u,o,a,d)),(i=r[0])&&e.push(new Xa(i,s,o,u,d))}return this}function nlt(t){var e=[],n=[],r;for(this._root&&e.push(new Xa(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,d=(o+l)/2,c=(a+u)/2;(s=i[0])&&e.push(new Xa(s,o,a,d,c)),(s=i[1])&&e.push(new Xa(s,d,a,l,c)),(s=i[2])&&e.push(new Xa(s,o,c,d,u)),(s=i[3])&&e.push(new Xa(s,d,c,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function rlt(t){return t[0]}function ilt(t){return arguments.length?(this._x=t,this):this._x}function slt(t){return t[1]}function olt(t){return arguments.length?(this._y=t,this):this._y}function JN(t,e,n){var r=new QN(e??rlt,n??slt,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function QN(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Jxe(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ol=JN.prototype=QN.prototype;ol.copy=function(){var t=new QN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Jxe(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Jxe(r));return t};ol.add=Gat;ol.addAll=Vat;ol.cover=Wat;ol.data=Yat;ol.extent=Xat;ol.find=Zat;ol.remove=Kat;ol.removeAll=Jat;ol.root=Qat;ol.size=elt;ol.visit=tlt;ol.visitAfter=nlt;ol.x=ilt;ol.y=olt;function Ja(t){return function(){return t}}function Fp(t){return(t()-.5)*1e-6}function alt(t){return t.x+t.vx}function llt(t){return t.y+t.vy}function ult(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=Ja(t==null?1:+t));function o(){for(var u,d=e.length,c,f,h,p,g,b,y=0;y<s;++y)for(c=JN(e,alt,llt).visitAfter(a),u=0;u<d;++u)f=e[u],g=n[f.index],b=g*g,h=f.x+f.vx,p=f.y+f.vy,c.visit(v);function v(w,E,S,T,D){var k=w.data,R=w.r,O=g+R;if(k){if(k.index>f.index){var B=h-k.x-k.vx,K=p-k.y-k.vy,L=B*B+K*K;L<O*O&&(B===0&&(B=Fp(r),L+=B*B),K===0&&(K=Fp(r),L+=K*K),L=(O-(L=Math.sqrt(L)))/L*i,f.vx+=(B*=L)*(O=(R*=R)/(b+R)),f.vy+=(K*=L)*O,k.vx-=B*(O=1-O),k.vy-=K*O)}return}return E>h+O||T<h-O||S>p+O||D<p-O}}function a(u){if(u.data)return u.r=n[u.data.index];for(var d=u.r=0;d<4;++d)u[d]&&u[d].r>u.r&&(u.r=u[d].r)}function l(){if(e){var u,d=e.length,c;for(n=new Array(d),u=0;u<d;++u)c=e[u],n[c.index]=+t(c,u,e)}}return o.initialize=function(u,d){e=u,r=d,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Ja(+u),l(),o):t},o}function clt(t){return t.index}function Qxe(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function dlt(t){var e=clt,n=c,r,i=Ja(30),s,o,a,l,u,d=1;t==null&&(t=[]);function c(b){return 1/Math.min(a[b.source.index],a[b.target.index])}function f(b){for(var y=0,v=t.length;y<d;++y)for(var w=0,E,S,T,D,k,R,O;w<v;++w)E=t[w],S=E.source,T=E.target,D=T.x+T.vx-S.x-S.vx||Fp(u),k=T.y+T.vy-S.y-S.vy||Fp(u),R=Math.sqrt(D*D+k*k),R=(R-s[w])/R*b*r[w],D*=R,k*=R,T.vx-=D*(O=l[w]),T.vy-=k*O,S.vx+=D*(O=1-O),S.vy+=k*O}function h(){if(o){var b,y=o.length,v=t.length,w=new Map(o.map((S,T)=>[e(S,T,o),S])),E;for(b=0,a=new Array(y);b<v;++b)E=t[b],E.index=b,typeof E.source!="object"&&(E.source=Qxe(w,E.source)),typeof E.target!="object"&&(E.target=Qxe(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(b=0,l=new Array(v);b<v;++b)E=t[b],l[b]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),s=new Array(v),g()}}function p(){if(o)for(var b=0,y=t.length;b<y;++b)r[b]=+n(t[b],b,t)}function g(){if(o)for(var b=0,y=t.length;b<y;++b)s[b]=+i(t[b],b,t)}return f.initialize=function(b,y){o=b,u=y,h()},f.links=function(b){return arguments.length?(t=b,h(),f):t},f.id=function(b){return arguments.length?(e=b,f):e},f.iterations=function(b){return arguments.length?(d=+b,f):d},f.strength=function(b){return arguments.length?(n=typeof b=="function"?b:Ja(+b),p(),f):n},f.distance=function(b){return arguments.length?(i=typeof b=="function"?b:Ja(+b),g(),f):i},f}var flt={value:()=>{}};function dOe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new BA(n)}function BA(t){this._=t}function hlt(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}BA.prototype=dOe.prototype={constructor:BA,on:function(t,e){var n=this._,r=hlt(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=plt(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=ewe(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ewe(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new BA(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function plt(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ewe(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=flt,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var vv=0,i_=0,Ew=0,fOe=1e3,A3,s_,k3=0,p0=0,_L=0,v2=typeof performance=="object"&&performance.now?performance:Date,hOe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function e9(){return p0||(hOe(mlt),p0=v2.now()+_L)}function mlt(){p0=0}function T3(){this._call=this._time=this._next=null}T3.prototype=pOe.prototype={constructor:T3,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?e9():+n)+(e==null?0:+e),!this._next&&s_!==this&&(s_?s_._next=this:A3=this,s_=this),this._call=t,this._time=n,hI()},stop:function(){this._call&&(this._call=null,this._time=1/0,hI())}};function pOe(t,e,n){var r=new T3;return r.restart(t,e,n),r}function glt(){e9(),++vv;for(var t=A3,e;t;)(e=p0-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vv}function twe(){p0=(k3=v2.now())+_L,vv=i_=0;try{glt()}finally{vv=0,blt(),p0=0}}function ylt(){var t=v2.now(),e=t-k3;e>fOe&&(_L-=e,k3=t)}function blt(){for(var t,e=A3,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:A3=n);s_=t,hI(r)}function hI(t){if(!vv){i_&&(i_=clearTimeout(i_));var e=t-p0;e>24?(t<1/0&&(i_=setTimeout(twe,t-v2.now()-_L)),Ew&&(Ew=clearInterval(Ew))):(Ew||(k3=v2.now(),Ew=setInterval(ylt,fOe)),vv=1,hOe(twe))}}function vlt(t,e,n){var r=new T3,i=e;return e==null?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?e9():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(t,e,n),r)}const xlt=1664525,wlt=1013904223,nwe=4294967296;function _lt(){let t=1;return()=>(t=(xlt*t+wlt)%nwe)/nwe}function Elt(t){return t.x}function Clt(t){return t.y}var Slt=10,Alt=Math.PI*(3-Math.sqrt(5));function klt(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=pOe(c),u=dOe("tick","end"),d=_lt();t==null&&(t=[]);function c(){f(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function f(g){var b,y=t.length,v;g===void 0&&(g=1);for(var w=0;w<g;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),b=0;b<y;++b)v=t[b],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return e}function h(){for(var g=0,b=t.length,y;g<b;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Slt*Math.sqrt(.5+g),w=g*Alt;y.x=v*Math.cos(w),y.y=v*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(t,d),g}return h(),e={tick:f,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,h(),a.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(r=+g,e):r},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(d=g,a.forEach(p),e):d},force:function(g,b){return arguments.length>1?(b==null?a.delete(g):a.set(g,p(b)),e):a.get(g)},find:function(g,b,y){var v=0,w=t.length,E,S,T,D,k;for(y==null?y=1/0:y*=y,v=0;v<w;++v)D=t[v],E=g-D.x,S=b-D.y,T=E*E+S*S,T<y&&(k=D,y=T);return k},on:function(g,b){return arguments.length>1?(u.on(g,b),e):u.on(g)}}}function Tlt(){var t,e,n,r,i=Ja(-30),s,o=1,a=1/0,l=.81;function u(h){var p,g=t.length,b=JN(t,Elt,Clt).visitAfter(c);for(r=h,p=0;p<g;++p)e=t[p],b.visit(f)}function d(){if(t){var h,p=t.length,g;for(s=new Array(p),h=0;h<p;++h)g=t[h],s[g.index]=+i(g,h,t)}}function c(h){var p=0,g,b,y=0,v,w,E;if(h.length){for(v=w=E=0;E<4;++E)(g=h[E])&&(b=Math.abs(g.value))&&(p+=g.value,y+=b,v+=b*g.x,w+=b*g.y);h.x=v/y,h.y=w/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function f(h,p,g,b){if(!h.value)return!0;var y=h.x-e.x,v=h.y-e.y,w=b-p,E=y*y+v*v;if(w*w/l<E)return E<a&&(y===0&&(y=Fp(n),E+=y*y),v===0&&(v=Fp(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)),e.vx+=y*h.value*r/E,e.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==e||h.next)&&(y===0&&(y=Fp(n),E+=y*y),v===0&&(v=Fp(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)));do h.data!==e&&(w=s[h.data.index]*r/E,e.vx+=y*w,e.vy+=v*w);while(h=h.next)}return u.initialize=function(h,p){t=h,n=p,d()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ja(+h),d(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function Dlt(t){var e=Ja(.1),n,r,i;typeof t!="function"&&(t=Ja(t==null?0:+t));function s(a){for(var l=0,u=n.length,d;l<u;++l)d=n[l],d.vx+=(i[l]-d.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Ja(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:Ja(+a),o(),s):t},s}function Llt(t){var e=Ja(.1),n,r,i;typeof t!="function"&&(t=Ja(t==null?0:+t));function s(a){for(var l=0,u=n.length,d;l<u;++l)d=n[l],d.vy+=(i[l]-d.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Ja(+a),o(),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:Ja(+a),o(),s):t},s}const rwe={center:Hat,collide:ult,nbody:Tlt,link:dlt,x:Dlt,y:Llt},o_="forces",pI=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Rlt=["static","iterations"],mOe=["x","y","vx","vy"];function t9(t){rt.call(this,null,t)}t9.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:mOe}]};Lt(t9,rt,{transform(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(pI),s=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),(i||e.changed(e.MOD))&&gOe(n,t,0,e)):(this.value=n=Olt(e.source,t),n.on("tick",Flt(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(Rlt)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let a=this._argops,l=0,u=a.length,d;l<u;++l)if(d=a[l],!(d.name!==o_||d.op._argval.force!=="link")){for(var r=d.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(mOe)}});function Flt(t,e){return()=>t.touch(e).run()}function Olt(t,e){const n=klt(t),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),gOe(n,e,!0).on("end",()=>s=!0)}function gOe(t,e,n,r){var i=Pt(e.forces),s,o,a,l;for(s=0,o=pI.length;s<o;++s)a=pI[s],a!==o_&&e.modified(a)&&t[a](e[a]);for(s=0,o=i.length;s<o;++s)l=o_+s,a=n||e.modified(o_,s)?Ilt(i[s]):r&&Mlt(i[s],r)?t.force(l):null,a&&t.force(l,a);for(o=t.numForces||0;s<o;++s)t.force(o_+s,null);return t.numForces=i.length,t}function Mlt(t,e){var n,r;for(n in t)if(sr(r=t[n])&&e.modified(La(r)))return 1;return 0}function Ilt(t){var e,n;Yt(rwe,t.force)||ot("Unrecognized force: "+t.force),e=rwe[t.force]();for(n in t)sr(e[n])&&$lt(e[n],t[n],t);return e}function $lt(t,e,n){t(sr(e)?r=>e(r,n):e)}const Plt=Object.freeze(Object.defineProperty({__proto__:null,force:t9},Symbol.toStringTag,{value:"Module"}));function Nlt(t,e){return t.parent===e.parent?1:2}function Blt(t){return t.reduce(zlt,0)/t.length}function zlt(t,e){return t+e.x}function jlt(t){return 1+t.reduce(Ult,0)}function Ult(t,e){return Math.max(t,e.y)}function qlt(t){for(var e;e=t.children;)t=e[0];return t}function Hlt(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Glt(){var t=Nlt,e=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Blt(h),f.y=jlt(h)):(f.x=o?a+=t(f,o):0,f.y=0,o=f)});var l=qlt(s),u=Hlt(s),d=l.x-t(l,u)/2,c=u.x+t(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*e,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-d)/(c-d)*e,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],i):r?null:[e,n]},i.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],i):r?[e,n]:null},i}function Vlt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Wlt(){return this.eachAfter(Vlt)}function Ylt(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Xlt(t,e){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Zlt(t,e){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Klt(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Jlt(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Qlt(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function eut(t){for(var e=this,n=tut(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function tut(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function nut(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function rut(){return Array.from(this)}function iut(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function sut(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*out(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function n9(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=uut)):e===void 0&&(e=lut);for(var n=new xv(t),r,i=[n],s,o,a,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new xv(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(yOe)}function aut(){return n9(this).eachBefore(cut)}function lut(t){return t.children}function uut(t){return Array.isArray(t)?t[1]:null}function cut(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function yOe(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function xv(t){this.data=t,this.depth=this.height=0,this.parent=null}xv.prototype=n9.prototype={constructor:xv,count:Wlt,each:Ylt,eachAfter:Zlt,eachBefore:Xlt,find:Klt,sum:Jlt,sort:Qlt,path:eut,ancestors:nut,descendants:rut,leaves:iut,links:sut,copy:aut,[Symbol.iterator]:out};function zA(t){return t==null?null:bOe(t)}function bOe(t){if(typeof t!="function")throw new Error;return t}function Bg(){return 0}function lb(t){return function(){return t}}const dut=1664525,fut=1013904223,iwe=4294967296;function hut(){let t=1;return()=>(t=(dut*t+fut)%iwe)/iwe}function put(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mut(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function gut(t,e){for(var n=0,r=(t=mut(Array.from(t),e)).length,i=[],s,o;n<r;)s=t[n],o&&vOe(o,s)?++n:(o=but(i=yut(i,s)),n=0);return o}function yut(t,e){var n,r;if(GF(e,t))return[e];for(n=0;n<t.length;++n)if(FS(e,t[n])&&GF(a_(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(FS(a_(t[n],t[r]),e)&&FS(a_(t[n],e),t[r])&&FS(a_(t[r],e),t[n])&&GF(xOe(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function FS(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function vOe(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function GF(t,e){for(var n=0;n<e.length;++n)if(!vOe(t,e[n]))return!1;return!0}function but(t){switch(t.length){case 1:return vut(t[0]);case 2:return a_(t[0],t[1]);case 3:return xOe(t[0],t[1],t[2])}}function vut(t){return{x:t.x,y:t.y,r:t.r}}function a_(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,o=e.y,a=e.r,l=s-n,u=o-r,d=a-i,c=Math.sqrt(l*l+u*u);return{x:(n+s+l/c*d)/2,y:(r+o+u/c*d)/2,r:(c+i+a)/2}}function xOe(t,e,n){var r=t.x,i=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=n.x,d=n.y,c=n.r,f=r-o,h=r-u,p=i-a,g=i-d,b=l-s,y=c-s,v=r*r+i*i-s*s,w=v-o*o-a*a+l*l,E=v-u*u-d*d+c*c,S=h*p-f*g,T=(p*E-g*w)/(S*2)-r,D=(g*b-p*y)/S,k=(h*w-f*E)/(S*2)-i,R=(f*y-h*b)/S,O=D*D+R*R-1,B=2*(s+T*D+k*R),K=T*T+k*k-s*s,L=-(Math.abs(O)>1e-6?(B+Math.sqrt(B*B-4*O*K))/(2*O):K/B);return{x:r+T+D*L,y:i+k+R*L,r:L}}function swe(t,e,n){var r=t.x-e.x,i,s,o=t.y-e.y,a,l,u=r*r+o*o;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-a*o,n.y=t.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=e.x+i*r-a*o,n.y=e.y+i*o+a*r)):(n.x=e.x+n.r,n.y=e.y)}function owe(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function awe(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function OS(t){this._=t,this.next=null,this.previous=null}function xut(t,e){if(!(s=(t=put(t)).length))return 0;var n,r,i,s,o,a,l,u,d,c,f;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;swe(r,n,i=t[2]),n=new OS(n),r=new OS(r),i=new OS(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){swe(n._,r._,i=t[l]),i=new OS(i),u=r.next,d=n.previous,c=r._.r,f=n._.r;do if(c<=f){if(owe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}c+=u._.r,u=u.next}else{if(owe(d._,i._)){n=d,n.next=r,r.previous=n,--l;continue e}f+=d._.r,d=d.previous}while(u!==d.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=awe(n);(i=i.next)!==r;)(a=awe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=gut(n,e),l=0;l<s;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function wut(t){return Math.sqrt(t.value)}function _ut(){var t=null,e=1,n=1,r=Bg;function i(s){const o=hut();return s.x=e/2,s.y=n/2,t?s.eachBefore(lwe(t)).eachAfter(VF(r,.5,o)).eachBefore(uwe(1)):s.eachBefore(lwe(wut)).eachAfter(VF(Bg,1,o)).eachAfter(VF(r,s.r/Math.min(e,n),o)).eachBefore(uwe(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=zA(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:lb(+s),i):r},i}function lwe(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function VF(t,e,n){return function(r){if(i=r.children){var i,s,o=i.length,a=t(r)*e||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=xut(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function uwe(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function wOe(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function BE(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(r-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function Eut(){var t=1,e=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),r&&o.eachBefore(wOe),o}function s(o,a){return function(l){l.children&&BE(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,d=l.y0,c=l.x1-n,f=l.y1-n;c<u&&(u=c=(u+c)/2),f<d&&(d=f=(d+f)/2),l.x0=u,l.y0=d,l.x1=c,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Cut={depth:-1},cwe={},WF={};function Sut(t){return t.id}function Aut(t){return t.parentId}function dwe(){var t=Sut,e=Aut,n;function r(i){var s=Array.from(i),o=t,a=e,l,u,d,c,f,h,p,g,b=new Map;if(n!=null){const y=s.map((E,S)=>kut(n(E,S,i))),v=y.map(fwe),w=new Set(y).add("");for(const E of v)w.has(E)||(w.add(E),y.push(E),v.push(fwe(E)),s.push(WF));o=(E,S)=>y[S],a=(E,S)=>v[S]}for(d=0,l=s.length;d<l;++d)u=s[d],h=s[d]=new xv(u),(p=o(u,d,i))!=null&&(p+="")&&(g=h.id=p,b.set(g,b.has(g)?cwe:h)),(p=a(u,d,i))!=null&&(p+="")&&(h.parent=p);for(d=0;d<l;++d)if(h=s[d],p=h.parent){if(f=b.get(p),!f)throw new Error("missing: "+p);if(f===cwe)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(c)throw new Error("multiple roots");c=h}if(!c)throw new Error("no root");if(n!=null){for(;c.data===WF&&c.children.length===1;)c=c.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===WF);--y)h.data=null}if(c.parent=Cut,c.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(yOe),c.parent=null,l>0)throw new Error("cycle");return c}return r.id=function(i){return arguments.length?(t=zA(i),r):t},r.parentId=function(i){return arguments.length?(e=zA(i),r):e},r.path=function(i){return arguments.length?(n=zA(i),r):n},r}function kut(t){t=`${t}`;let e=t.length;return mI(t,e-1)&&!mI(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function fwe(t){let e=t.length;if(e<2)return"";for(;--e>1&&!mI(t,e););return t.slice(0,e)}function mI(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function Tut(t,e){return t.parent===e.parent?1:2}function YF(t){var e=t.children;return e?e[0]:t.t}function XF(t){var e=t.children;return e?e[e.length-1]:t.t}function Dut(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Lut(t){for(var e=0,n=0,r=t.children,i=r.length,s;--i>=0;)s=r[i],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function Rut(t,e,n){return t.a.parent===e.parent?t.a:n}function jA(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}jA.prototype=Object.create(xv.prototype);function Fut(t){for(var e=new jA(t,0),n,r=[e],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new jA(s[o],o)),i.parent=n;return(e.parent=new jA(null,0)).children=[e],e}function Out(){var t=Tut,e=1,n=1,r=null;function i(u){var d=Fut(u);if(d.eachAfter(s),d.parent.m=-d.z,d.eachBefore(o),r)u.eachBefore(l);else{var c=u,f=u,h=u;u.eachBefore(function(v){v.x<c.x&&(c=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=c===f?1:t(c,f)/2,g=p-c.x,b=e/(f.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*b,v.y=v.depth*y})}return u}function s(u){var d=u.children,c=u.parent.children,f=u.i?c[u.i-1]:null;if(d){Lut(u);var h=(d[0].z+d[d.length-1].z)/2;f?(u.z=f.z+t(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+t(u._,f._));u.parent.A=a(u,f,u.parent.A||c[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,d,c){if(d){for(var f=u,h=u,p=d,g=f.parent.children[0],b=f.m,y=h.m,v=p.m,w=g.m,E;p=XF(p),f=YF(f),p&&f;)g=YF(g),h=XF(h),h.a=u,E=p.z+v-f.z-b+t(p._,f._),E>0&&(Dut(Rut(p,u,c),u,E),b+=E,y+=E),v+=p.m,b+=f.m,w+=g.m,y+=h.m;p&&!XF(h)&&(h.t=p,h.m+=v-y),f&&!YF(g)&&(g.t=f,g.m+=b-w,c=u)}return c}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function EL(t,e,n,r,i){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(i-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var _Oe=(1+Math.sqrt(5))/2;function EOe(t,e,n,r,i,s){for(var o=[],a=e.children,l,u,d=0,c=0,f=a.length,h,p,g=e.value,b,y,v,w,E,S,T;d<f;){h=i-n,p=s-r;do b=a[c++].value;while(!b&&c<f);for(y=v=b,S=Math.max(p/h,h/p)/(g*t),T=b*b*S,E=Math.max(v/T,T/y);c<f;++c){if(b+=u=a[c].value,u<y&&(y=u),u>v&&(v=u),T=b*b*S,w=Math.max(v/T,T/y),w>E){b-=u;break}E=w}o.push(l={value:b,dice:h<p,children:a.slice(d,c)}),l.dice?BE(l,n,r,i,g?r+=p*b/g:s):EL(l,n,r,g?n+=h*b/g:i,s),g-=b,d=c}return o}const COe=function t(e){function n(r,i,s,o,a){EOe(e,r,i,s,o,a)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(_Oe);function Mut(){var t=COe,e=!1,n=1,r=1,i=[0],s=Bg,o=Bg,a=Bg,l=Bg,u=Bg;function d(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(c),i=[0],e&&f.eachBefore(wOe),f}function c(f){var h=i[f.depth],p=f.x0+h,g=f.y0+h,b=f.x1-h,y=f.y1-h;b<p&&(p=b=(p+b)/2),y<g&&(g=y=(g+y)/2),f.x0=p,f.y0=g,f.x1=b,f.y1=y,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,g+=o(f)-h,b-=a(f)-h,y-=l(f)-h,b<p&&(p=b=(p+b)/2),y<g&&(g=y=(g+y)/2),t(f,p,g,b,y))}return d.round=function(f){return arguments.length?(e=!!f,d):e},d.size=function(f){return arguments.length?(n=+f[0],r=+f[1],d):[n,r]},d.tile=function(f){return arguments.length?(t=bOe(f),d):t},d.padding=function(f){return arguments.length?d.paddingInner(f).paddingOuter(f):d.paddingInner()},d.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:lb(+f),d):s},d.paddingOuter=function(f){return arguments.length?d.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):d.paddingTop()},d.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:lb(+f),d):o},d.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:lb(+f),d):a},d.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:lb(+f),d):l},d.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:lb(+f),d):u},d}function Iut(t,e,n,r,i){var s=t.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;d(0,a,t.value,e,n,r,i);function d(c,f,h,p,g,b,y){if(c>=f-1){var v=s[c];v.x0=p,v.y0=g,v.x1=b,v.y1=y;return}for(var w=u[c],E=h/2+w,S=c+1,T=f-1;S<T;){var D=S+T>>>1;u[D]<E?S=D+1:T=D}E-u[S-1]<u[S]-E&&c+1<S&&--S;var k=u[S]-w,R=h-k;if(b-p>y-g){var O=h?(p*R+b*k)/h:b;d(c,S,k,p,g,O,y),d(S,f,R,O,g,b,y)}else{var B=h?(g*R+y*k)/h:y;d(c,S,k,p,g,b,B),d(S,f,R,p,B,b,y)}}}function $ut(t,e,n,r,i){(t.depth&1?EL:BE)(t,e,n,r,i)}const Put=function t(e){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===e)for(var l,u,d,c,f=-1,h,p=l.length,g=r.value;++f<p;){for(u=l[f],d=u.children,c=u.value=0,h=d.length;c<h;++c)u.value+=d[c].value;u.dice?BE(u,i,s,o,g?s+=(a-s)*u.value/g:a):EL(u,i,s,g?i+=(o-i)*u.value/g:o,a),g-=u.value}else r._squarify=l=EOe(e,r,i,s,o,a),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(_Oe);function gI(t,e,n){const r={};return t.each(i=>{const s=i.data;n(s)&&(r[e(s)]=i)}),t.lookup=r,t}function r9(t){rt.call(this,null,t)}r9.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Nut=t=>t.values;Lt(r9,rt,{transform(t,e){e.source||ot("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),s=this.value;return(!s||r||e.changed())&&(s&&s.each(o=>{o.children&&qD(o.data)&&i.rem.push(o.data)}),this.value=s=n9({values:Pt(t.keys).reduce((o,a)=>(o.key(a),o),But()).entries(i.source)},Nut),n&&s.each(o=>{o.children&&(o=vi(o.data),i.add.push(o),i.source.push(o))}),gI(s,wn,wn)),i.source.root=s,i}});function But(){const t=[],e={entries:i=>r(n(i,0),0),key:i=>(t.push(i),e)};function n(i,s){if(s>=t.length)return i;const o=i.length,a=t[s++],l={},u={};let d=-1,c,f,h;for(;++d<o;)c=a(f=i[d])+"",(h=l[c])?h.push(f):l[c]=[f];for(c in l)u[c]=n(l[c],s);return u}function r(i,s){if(++s>t.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return e}function wh(t){rt.call(this,null,t)}const zut=(t,e)=>t.parent===e.parent?1:2;Lt(wh,rt,{transform(t,e){(!e.source||!e.source.root)&&ot(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),r=this.fields,i=e.source.root,s=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(N0(t.sort,o=>o.data)),jut(n,this.params,t),n.separation&&n.separation(t.separation!==!1?zut:o1);try{this.value=n(i)}catch(o){ot(o)}return i.each(o=>Uut(o,r,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});function jut(t,e,n){for(let r,i=0,s=e.length;i<s;++i)r=e[i],r in n&&t[r](n[r])}function Uut(t,e,n){const r=t.data,i=e.length-1;for(let s=0;s<i;++s)r[n[s]]=t[e[s]];r[n[i]]=t.children?t.children.length:0}const yI=["x","y","r","depth","children"];function i9(t){wh.call(this,t)}i9.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yI.length,default:yI}]};Lt(i9,wh,{layout:_ut,params:["radius","size","padding"],fields:yI});const bI=["x0","y0","x1","y1","depth","children"];function s9(t){wh.call(this,t)}s9.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bI.length,default:bI}]};Lt(s9,wh,{layout:Eut,params:["size","round","padding"],fields:bI});function o9(t){rt.call(this,null,t)}o9.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Lt(o9,rt,{transform(t,e){e.source||ot("Stratify transform requires an upstream data source.");let n=this.value;const r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),s=!n||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?gI(dwe().id(t.key).parentId(t.parentKey)(i.source),t.key,zu):gI(dwe()([{}]),t.key,t.key)),i.source.root=this.value=n,i}});const hwe={tidy:Out,cluster:Glt},vI=["x","y","depth","children"];function a9(t){wh.call(this,t)}a9.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:vI.length,default:vI}]};Lt(a9,wh,{layout(t){const e=t||"tidy";if(Yt(hwe,e))return hwe[e]();ot("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:vI});function l9(t){rt.call(this,[],t)}l9.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Lt(l9,rt,{transform(t,e){const n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),s={};return r||ot("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,o=>s[wn(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[wn(a)]&&s[wn(l)]&&i.add.push(vi({source:l,target:a}))}),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>s[wn(o)]=1),n.forEach(o=>{(s[wn(o.source)]||s[wn(o.target)])&&i.mod.push(o)})),i}});const pwe={binary:Iut,dice:BE,slice:EL,slicedice:$ut,squarify:COe,resquarify:Put},xI=["x0","y0","x1","y1","depth","children"];function u9(t){wh.call(this,t)}u9.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xI.length,default:xI}]};Lt(u9,wh,{layout(){const t=Mut();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{Yt(pwe,e)?t.tile(pwe[e]):ot("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:xI});const qut=Object.freeze(Object.defineProperty({__proto__:null,nest:r9,pack:i9,partition:s9,stratify:o9,tree:a9,treelinks:l9,treemap:u9},Symbol.toStringTag,{value:"Module"})),ZF=4278190080;function Hut(t,e){const n=t.bitmap();return(e||[]).forEach(r=>n.set(t(r.boundary[0]),t(r.boundary[3]))),[n,void 0]}function Gut(t,e,n,r,i){const s=t.width,o=t.height,a=r||i,l=Up(s,o).getContext("2d"),u=Up(s,o).getContext("2d"),d=a&&Up(s,o).getContext("2d");n.forEach(k=>UA(l,k,!1)),UA(u,e,!1),a&&UA(d,e,!0);const c=KF(l,s,o),f=KF(u,s,o),h=a&&KF(d,s,o),p=t.bitmap(),g=a&&t.bitmap();let b,y,v,w,E,S,T,D;for(y=0;y<o;++y)for(b=0;b<s;++b)E=y*s+b,S=c[E]&ZF,D=f[E]&ZF,T=a&&h[E]&ZF,(S||T||D)&&(v=t(b),w=t(y),!i&&(S||D)&&p.set(v,w),a&&(S||T)&&g.set(v,w));return[p,g]}function KF(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function UA(t,e,n){if(!e.length)return;const r=e[0].mark.marktype;r==="group"?e.forEach(i=>{i.items.forEach(s=>UA(t,s.items,n))}):pu[r].draw(t,{items:n?e.map(Vut):e})}function Vut(t){const e=HD(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const Lf=5,za=31,x2=32,pp=new Uint32Array(x2+1),bc=new Uint32Array(x2+1);bc[0]=0;pp[0]=~bc[0];for(let t=1;t<=x2;++t)bc[t]=bc[t-1]<<1|1,pp[t]=~bc[t];function Wut(t,e){const n=new Uint32Array(~~((t*e+x2)/x2));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*t+s;return n[a>>>Lf]&1<<(a&za)},set:(s,o)=>{const a=o*t+s;r(a>>>Lf,1<<(a&za))},clear:(s,o)=>{const a=o*t+s;i(a>>>Lf,~(1<<(a&za)))},getRange:(s,o,a,l)=>{let u=l,d,c,f,h;for(;u>=o;--u)if(d=u*t+s,c=u*t+a,f=d>>>Lf,h=c>>>Lf,f===h){if(n[f]&pp[d&za]&bc[(c&za)+1])return!0}else{if(n[f]&pp[d&za]||n[h]&bc[(c&za)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,d,c,f,h;for(;o<=l;++o)if(u=o*t+s,d=o*t+a,c=u>>>Lf,f=d>>>Lf,c===f)r(c,pp[u&za]&bc[(d&za)+1]);else for(r(c,pp[u&za]),r(f,bc[(d&za)+1]),h=c+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,d,c,f,h;for(;o<=l;++o)if(u=o*t+s,d=o*t+a,c=u>>>Lf,f=d>>>Lf,c===f)i(c,bc[u&za]|pp[(d&za)+1]);else for(i(c,bc[u&za]),i(f,pp[(d&za)+1]),h=c+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=e||a>=t}}function Yut(t,e,n){const r=Math.max(1,Math.sqrt(t*e/1e6)),i=~~((t+2*n+r)/r),s=~~((e+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Wut(i,s),o.ratio=r,o.padding=n,o.width=t,o.height=e,o}function Xut(t,e,n,r){const i=t.width,s=t.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,d=su.width(o.datum,o.datum.text);let c=0,f,h,p,g,b,y,v;for(let w=0;w<l;++w)f=a[w].x,p=a[w].y,h=a[w].x2===void 0?f:a[w].x2,g=a[w].y2===void 0?p:a[w].y2,b=(f+h)/2,y=(p+g)/2,v=Math.abs(h-f+g-p),v>=c&&(c=v,o.x=b,o.y=y);return b=d/2,y=u/2,f=o.x-b,h=o.x+b,p=o.y-y,g=o.y+y,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function D3(t,e,n,r,i,s){let o=n/2;return t-o<0||t+o>i||e-(o=r/2)<0||e+o>s}function Op(t,e,n,r,i,s,o,a){const l=i*s/(r*2),u=t(e-l),d=t(e+l),c=t(n-(s=s/2)),f=t(n+s);return o.outOfBounds(u,c,d,f)||o.getRange(u,c,d,f)||a&&a.getRange(u,c,d,f)}function Zut(t,e,n,r){const i=t.width,s=t.height,o=e[0],a=e[1];function l(u,d,c,f,h){const p=t.invert(u),g=t.invert(d);let b=c,y=s,v;if(!D3(p,g,f,h,i,s)&&!Op(t,p,g,h,f,b,o,a)&&!Op(t,p,g,h,f,h,o,null)){for(;y-b>=1;)v=(b+y)/2,Op(t,p,g,h,f,v,o,a)?y=v:b=v;if(b>c)return[p,g,b,!0]}}return function(u){const d=u.datum.datum.items[r].items,c=d.length,f=u.datum.fontSize,h=su.width(u.datum,u.datum.text);let p=n?f:0,g=!1,b=!1,y=0,v,w,E,S,T,D,k,R,O,B,K,L,I,$,U,q,Y;for(let X=0;X<c;++X){for(v=d[X].x,E=d[X].y,w=d[X].x2===void 0?v:d[X].x2,S=d[X].y2===void 0?E:d[X].y2,v>w&&(Y=v,v=w,w=Y),E>S&&(Y=E,E=S,S=Y),O=t(v),K=t(w),B=~~((O+K)/2),L=t(E),$=t(S),I=~~((L+$)/2),k=B;k>=O;--k)for(R=I;R>=L;--R)q=l(k,R,p,h,f),q&&([u.x,u.y,p,g]=q);for(k=B;k<=K;++k)for(R=I;R<=$;++R)q=l(k,R,p,h,f),q&&([u.x,u.y,p,g]=q);!g&&!n&&(U=Math.abs(w-v+S-E),T=(v+w)/2,D=(E+S)/2,U>=y&&!D3(T,D,h,f,i,s)&&!Op(t,T,D,f,h,f,o,null)&&(y=U,u.x=T,u.y=D,b=!0))}return g||b?(T=h/2,D=f/2,o.setRange(t(u.x-T),t(u.y-D),t(u.x+T),t(u.y+D)),u.align="center",u.baseline="middle",!0):!1}}const Kut=[-1,-1,1,1],Jut=[-1,1,-1,1];function Qut(t,e,n,r){const i=t.width,s=t.height,o=e[0],a=e[1],l=t.bitmap();return function(u){const d=u.datum.datum.items[r].items,c=d.length,f=u.datum.fontSize,h=su.width(u.datum,u.datum.text),p=[];let g=n?f:0,b=!1,y=!1,v=0,w,E,S,T,D,k,R,O,B,K,L,I;for(let $=0;$<c;++$){for(w=d[$].x,S=d[$].y,E=d[$].x2===void 0?w:d[$].x2,T=d[$].y2===void 0?S:d[$].y2,p.push([t((w+E)/2),t((S+T)/2)]);p.length;)if([R,O]=p.pop(),!(o.get(R,O)||a.get(R,O)||l.get(R,O))){l.set(R,O);for(let U=0;U<4;++U)D=R+Kut[U],k=O+Jut[U],l.outOfBounds(D,k,D,k)||p.push([D,k]);if(D=t.invert(R),k=t.invert(O),B=g,K=s,!D3(D,k,h,f,i,s)&&!Op(t,D,k,f,h,B,o,a)&&!Op(t,D,k,f,h,f,o,null)){for(;K-B>=1;)L=(B+K)/2,Op(t,D,k,f,h,L,o,a)?K=L:B=L;B>g&&(u.x=D,u.y=k,g=B,b=!0)}}!b&&!n&&(I=Math.abs(E-w+T-S),D=(w+E)/2,k=(S+T)/2,I>=v&&!D3(D,k,h,f,i,s)&&!Op(t,D,k,f,h,f,o,null)&&(v=I,u.x=D,u.y=k,y=!0))}return b||y?(D=h/2,k=f/2,o.setRange(t(u.x-D),t(u.y-k),t(u.x+D),t(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const ect=["right","center","left"],tct=["bottom","middle","top"];function nct(t,e,n,r){const i=t.width,s=t.height,o=e[0],a=e[1],l=r.length;return function(u){const d=u.boundary,c=u.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>i||d[3]>s)return!1;let f=u.textWidth??0,h,p,g,b,y,v,w,E,S,T,D,k,R,O,B;for(let K=0;K<l;++K){if(h=(n[K]&3)-1,p=(n[K]>>>2&3)-1,g=h===0&&p===0||r[K]<0,b=h&&p?Math.SQRT1_2:1,y=r[K]<0?-1:1,v=d[1+h]+r[K]*h*b,D=d[4+p]+y*c*p/2+r[K]*p*b,E=D-c/2,S=D+c/2,k=t(v),O=t(E),B=t(S),!f)if(mwe(k,k,O,B,o,a,v,v,E,S,d,g))f=su.width(u.datum,u.datum.text);else continue;if(T=v+y*f*h/2,v=T-f/2,w=T+f/2,k=t(v),R=t(w),mwe(k,R,O,B,o,a,v,w,E,S,d,g))return u.x=h?h*y<0?w:v:T,u.y=p?p*y<0?S:E:D,u.align=ect[h*y+1],u.baseline=tct[p*y+1],o.setRange(k,O,R,B),!0}return!1}}function mwe(t,e,n,r,i,s,o,a,l,u,d,c){return!(i.outOfBounds(t,n,e,r)||(c&&s||i).getRange(t,n,e,r))}const JF=0,QF=4,eO=8,tO=0,nO=1,rO=2,rct={"top-left":JF+tO,top:JF+nO,"top-right":JF+rO,left:QF+tO,middle:QF+nO,right:QF+rO,"bottom-left":eO+tO,bottom:eO+nO,"bottom-right":eO+rO},ict={naive:Xut,"reduced-search":Zut,floodfill:Qut};function sct(t,e,n,r,i,s,o,a,l,u,d){if(!t.length)return t;const c=Math.max(r.length,i.length),f=oct(r,c),h=act(i,c),p=lct(t[0].datum),g=p==="group"&&t[0].datum.items[l].marktype,b=g==="area",y=uct(p,g,a,l),v=u===null||u===1/0,w=b&&d==="naive";let E=-1,S=-1;const T=t.map(O=>{const B=v?su.width(O,O.text):void 0;return E=Math.max(E,B),S=Math.max(S,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(O),textWidth:B}});u=u===null||u===1/0?Math.max(E,S)+Math.max(...r):u;const D=Yut(e[0],e[1],u);let k;if(!w){n&&T.sort((K,L)=>n(K.datum,L.datum));let O=!1;for(let K=0;K<h.length&&!O;++K)O=h[K]===5||f[K]<0;const B=(p&&o||b)&&t.map(K=>K.datum);k=s.length||B?Gut(D,B||[],s,O,b):Hut(D,o&&T)}const R=b?ict[d](D,k,o,l):nct(D,k,h,f);return T.forEach(O=>O.opacity=+R(O)),T}function oct(t,e){const n=new Float64Array(e),r=t.length;for(let i=0;i<r;++i)n[i]=t[i]||0;for(let i=r;i<e;++i)n[i]=n[r-1];return n}function act(t,e){const n=new Int8Array(e),r=t.length;for(let i=0;i<r;++i)n[i]|=rct[t[i]];for(let i=r;i<e;++i)n[i]=n[r-1];return n}function lct(t){return t&&t.mark&&t.mark.marktype}function uct(t,e,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>i(s.datum):e==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const wI=["x","y","opacity","align","baseline"],SOe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function c9(t){rt.call(this,null,t)}c9.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:SOe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:wI.length,default:wI}]};Lt(c9,rt,{transform(t,e){function n(s){const o=t[s];return sr(o)&&e.modified(o.fields)}const r=t.modified();if(!(r||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&ot("Size parameter should be specified as a [width, height] array.");const i=t.as||wI;return sct(e.materialize(e.SOURCE).source||[],t.size,t.sort,Pt(t.offset==null?1:t.offset),Pt(t.anchor||SOe),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),e.reflow(r).modifies(i)}});const cct=Object.freeze(Object.defineProperty({__proto__:null,label:c9},Symbol.toStringTag,{value:"Module"}));function AOe(t,e){var n=[],r=function(d){return d(a)},i,s,o,a,l,u;if(e==null)n.push(t);else for(i={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function d9(t){rt.call(this,null,t)}d9.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Lt(d9,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=AOe(r,t.groupby),s=(t.groupby||[]).map(Os),o=s.length,a=t.as||[Os(t.x),Os(t.y)],l=[];i.forEach(u=>{xDe(u,t.x,t.y,t.bandwidth||.3).forEach(d=>{const c={};for(let f=0;f<o;++f)c[s[f]]=u.dims[f];c[a[0]]=d[0],c[a[1]]=d[1],l.push(vi(c))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const _I={constant:o8,linear:a8,log:gDe,exp:yDe,pow:bDe,quad:l8,poly:vDe},dct=(t,e)=>t==="poly"?e:t==="quad"?2:1;function f9(t){rt.call(this,null,t)}f9.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(_I)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Lt(f9,rt,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const r=e.materialize(e.SOURCE).source,i=AOe(r,t.groupby),s=(t.groupby||[]).map(Os),o=t.method||"linear",a=t.order==null?3:t.order,l=dct(o,a),u=t.as||[Os(t.x),Os(t.y)],d=_I[o],c=[];let f=t.extent;Yt(_I,o)||ot("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=d(h,t.x,t.y,a);if(t.params){c.push(vi({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const b=f||zd(h,t.x),y=v=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[u[0]]=v[0],w[u[1]]=v[1],c.push(vi(w))};o==="linear"||o==="constant"?b.forEach(v=>y([v,g.predict(v)])):KD(g.predict,b,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const fct=Object.freeze(Object.defineProperty({__proto__:null,loess:d9,regression:f9},Symbol.toStringTag,{value:"Module"})),Qf=11102230246251565e-32,va=134217729,hct=(3+8*Qf)*Qf;function iO(t,e,n,r,i){let s,o,a,l,u=e[0],d=r[0],c=0,f=0;d>u==d>-u?(s=u,u=e[++c]):(s=d,d=r[++f]);let h=0;if(c<t&&f<n)for(d>u==d>-u?(o=u+s,a=s-(o-u),u=e[++c]):(o=d+s,a=s-(o-d),d=r[++f]),s=o,a!==0&&(i[h++]=a);c<t&&f<n;)d>u==d>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++c]):(o=s+d,l=o-s,a=s-(o-l)+(d-l),d=r[++f]),s=o,a!==0&&(i[h++]=a);for(;c<t;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++c],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+d,l=o-s,a=s-(o-l)+(d-l),d=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function pct(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function zE(t){return new Float64Array(t)}const mct=(3+16*Qf)*Qf,gct=(2+12*Qf)*Qf,yct=(9+64*Qf)*Qf*Qf,Yy=zE(4),gwe=zE(8),ywe=zE(12),bwe=zE(16),ja=zE(4);function bct(t,e,n,r,i,s,o){let a,l,u,d,c,f,h,p,g,b,y,v,w,E,S,T,D,k;const R=t-i,O=n-i,B=e-s,K=r-s;E=R*K,f=va*R,h=f-(f-R),p=R-h,f=va*K,g=f-(f-K),b=K-g,S=p*b-(E-h*g-p*g-h*b),T=B*O,f=va*B,h=f-(f-B),p=B-h,f=va*O,g=f-(f-O),b=O-g,D=p*b-(T-h*g-p*g-h*b),y=S-D,c=S-y,Yy[0]=S-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,Yy[1]=w-(y+c)+(c-T),k=v+y,c=k-v,Yy[2]=v-(k-c)+(y-c),Yy[3]=k;let L=pct(4,Yy),I=gct*o;if(L>=I||-L>=I||(c=t-R,a=t-(R+c)+(c-i),c=n-O,u=n-(O+c)+(c-i),c=e-B,l=e-(B+c)+(c-s),c=r-K,d=r-(K+c)+(c-s),a===0&&l===0&&u===0&&d===0)||(I=yct*o+hct*Math.abs(L),L+=R*d+K*a-(B*u+O*l),L>=I||-L>=I))return L;E=a*K,f=va*a,h=f-(f-a),p=a-h,f=va*K,g=f-(f-K),b=K-g,S=p*b-(E-h*g-p*g-h*b),T=l*O,f=va*l,h=f-(f-l),p=l-h,f=va*O,g=f-(f-O),b=O-g,D=p*b-(T-h*g-p*g-h*b),y=S-D,c=S-y,ja[0]=S-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,ja[1]=w-(y+c)+(c-T),k=v+y,c=k-v,ja[2]=v-(k-c)+(y-c),ja[3]=k;const $=iO(4,Yy,4,ja,gwe);E=R*d,f=va*R,h=f-(f-R),p=R-h,f=va*d,g=f-(f-d),b=d-g,S=p*b-(E-h*g-p*g-h*b),T=B*u,f=va*B,h=f-(f-B),p=B-h,f=va*u,g=f-(f-u),b=u-g,D=p*b-(T-h*g-p*g-h*b),y=S-D,c=S-y,ja[0]=S-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,ja[1]=w-(y+c)+(c-T),k=v+y,c=k-v,ja[2]=v-(k-c)+(y-c),ja[3]=k;const U=iO($,gwe,4,ja,ywe);E=a*d,f=va*a,h=f-(f-a),p=a-h,f=va*d,g=f-(f-d),b=d-g,S=p*b-(E-h*g-p*g-h*b),T=l*u,f=va*l,h=f-(f-l),p=l-h,f=va*u,g=f-(f-u),b=u-g,D=p*b-(T-h*g-p*g-h*b),y=S-D,c=S-y,ja[0]=S-(y+c)+(c-D),v=E+y,c=v-E,w=E-(v-c)+(y-c),y=w-T,c=w-y,ja[1]=w-(y+c)+(c-T),k=v+y,c=k-v,ja[2]=v-(k-c)+(y-c),ja[3]=k;const q=iO(U,ywe,4,ja,bwe);return bwe[q-1]}function MS(t,e,n,r,i,s){const o=(e-s)*(n-i),a=(t-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=mct*u?l:-bct(t,e,n,r,i,s,u)}const vwe=Math.pow(2,-52),IS=new Uint32Array(512);class L3{static from(e,n=Ect,r=Cct){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=e[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new L3(s)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,d=-1/0;for(let R=0;R<o;R++){const O=e[2*R],B=e[2*R+1];O<a&&(a=O),B<l&&(l=B),O>u&&(u=O),B>d&&(d=B),this._ids[R]=R}const c=(a+u)/2,f=(l+d)/2;let h,p,g;for(let R=0,O=1/0;R<o;R++){const B=sO(c,f,e[2*R],e[2*R+1]);B<O&&(h=R,O=B)}const b=e[2*h],y=e[2*h+1];for(let R=0,O=1/0;R<o;R++){if(R===h)continue;const B=sO(b,y,e[2*R],e[2*R+1]);B<O&&B>0&&(p=R,O=B)}let v=e[2*p],w=e[2*p+1],E=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const O=wct(b,y,v,w,e[2*R],e[2*R+1]);O<E&&(g=R,E=O)}let S=e[2*g],T=e[2*g+1];if(E===1/0){for(let B=0;B<o;B++)this._dists[B]=e[2*B]-e[0]||e[2*B+1]-e[1];Eb(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let O=0;for(let B=0,K=-1/0;B<o;B++){const L=this._ids[B],I=this._dists[L];I>K&&(R[O++]=L,K=I)}this.hull=R.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(MS(b,y,v,w,S,T)<0){const R=p,O=v,B=w;p=g,v=S,w=T,g=R,S=O,T=B}const D=_ct(b,y,v,w,S,T);this._cx=D.x,this._cy=D.y;for(let R=0;R<o;R++)this._dists[R]=sO(e[2*R],e[2*R+1],D.x,D.y);Eb(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(b,y)]=h,s[this._hashKey(v,w)]=p,s[this._hashKey(S,T)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let R=0,O,B;R<this._ids.length;R++){const K=this._ids[R],L=e[2*K],I=e[2*K+1];if(R>0&&Math.abs(L-O)<=vwe&&Math.abs(I-B)<=vwe||(O=L,B=I,K===h||K===p||K===g))continue;let $=0;for(let te=0,le=this._hashKey(L,I);te<this._hashSize&&($=s[(le+te)%this._hashSize],!($!==-1&&$!==r[$]));te++);$=n[$];let U=$,q;for(;q=r[U],MS(L,I,e[2*U],e[2*U+1],e[2*q],e[2*q+1])>=0;)if(U=q,U===$){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,K,r[U],-1,-1,i[U]);i[K]=this._legalize(Y+2),i[U]=Y,k++;let X=r[U];for(;q=r[X],MS(L,I,e[2*X],e[2*X+1],e[2*q],e[2*q+1])<0;)Y=this._addTriangle(X,K,q,i[K],-1,i[X]),i[K]=this._legalize(Y+2),r[X]=X,k--,X=q;if(U===$)for(;q=n[U],MS(L,I,e[2*q],e[2*q+1],e[2*U],e[2*U+1])<0;)Y=this._addTriangle(q,K,U,-1,i[U],i[q]),this._legalize(Y+2),i[q]=Y,r[U]=U,k--,U=q;this._hullStart=n[K]=U,r[U]=n[X]=K,r[K]=X,s[this._hashKey(L,I)]=K,s[this._hashKey(e[2*U],e[2*U+1])]=U}this.hull=new Uint32Array(k);for(let R=0,O=this._hullStart;R<k;R++)this.hull[R]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(vct(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=IS[--s];continue}const u=a-a%3,d=l+(e+1)%3,c=u+(a+2)%3,f=n[o],h=n[e],p=n[d],g=n[c];if(xct(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[e]=g,n[a]=f;const y=r[c];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===c){this._hullTri[w]=e;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(e,y),this._link(a,r[o]),this._link(o,c);const v=u+(a+1)%3;s<IS.length&&(IS[s++]=v)}else{if(s===0)break;e=IS[--s]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function vct(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function sO(t,e,n,r){const i=t-n,s=e-r;return i*i+s*s}function xct(t,e,n,r,i,s,o,a){const l=t-o,u=e-a,d=n-o,c=r-a,f=i-o,h=s-a,p=l*l+u*u,g=d*d+c*c,b=f*f+h*h;return l*(c*b-g*h)-u*(d*b-g*f)+p*(d*h-c*f)<0}function wct(t,e,n,r,i,s){const o=n-t,a=r-e,l=i-t,u=s-e,d=o*o+a*a,c=l*l+u*u,f=.5/(o*u-a*l),h=(u*d-a*c)*f,p=(o*c-l*d)*f;return h*h+p*p}function _ct(t,e,n,r,i,s){const o=n-t,a=r-e,l=i-t,u=s-e,d=o*o+a*a,c=l*l+u*u,f=.5/(o*u-a*l),h=t+(u*d-a*c)*f,p=e+(o*c-l*d)*f;return{x:h,y:p}}function Eb(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=t[i],o=e[s];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Cw(t,i,s),e[t[n]]>e[t[r]]&&Cw(t,n,r),e[t[s]]>e[t[r]]&&Cw(t,s,r),e[t[n]]>e[t[s]]&&Cw(t,n,s);const a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;Cw(t,s,o)}t[n+1]=t[o],t[o]=a,r-s+1>=o-n?(Eb(t,e,s,r),Eb(t,e,n,o-1)):(Eb(t,e,n,o-1),Eb(t,e,s,r))}}function Cw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ect(t){return t[0]}function Cct(t){return t[1]}const xwe=1e-6;class Hg{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>xwe||Math.abs(this._y1-s)>xwe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class EI{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}let Sct=class{constructor(e,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,b=0,y=r.length,v,w;g<y;g+=3,b+=2){const E=r[g]*2,S=r[g+1]*2,T=r[g+2]*2,D=e[E],k=e[E+1],R=e[S],O=e[S+1],B=e[T],K=e[T+1],L=R-D,I=O-k,$=B-D,U=K-k,q=(L*U-I*$)*2;if(Math.abs(q)<1e-9){if(s===void 0){s=o=0;for(const X of n)s+=e[X*2],o+=e[X*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-D)*U-(o-k)*$);v=(D+B)/2-Y*U,w=(k+K)/2+Y*$}else{const Y=1/q,X=L*L+I*I,te=$*$+U*U;v=D+(U*X-I*te)*Y,w=k+(L*te-$*X)*Y}a[b]=v,a[b+1]=w}let l=n[n.length-1],u,d=l*4,c,f=e[2*l],h,p=e[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=d,c=f,h=p,d=l*4,f=e[2*l],p=e[2*l+1],i[u+2]=i[d]=h-p,i[u+3]=i[d+1]=f-c}render(e){const n=e==null?e=new Hg:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let d=0,c=r.length;d<c;++d){const f=r[d];if(f<d)continue;const h=Math.floor(d/3)*2,p=Math.floor(f/3)*2,g=o[h],b=o[h+1],y=o[p],v=o[p+1];this._renderSegment(g,b,y,v,e)}let l,u=s[s.length-1];for(let d=0;d<s.length;++d){l=u,u=s[d];const c=Math.floor(i[u]/3)*2,f=o[c],h=o[c+1],p=l*4,g=this._project(f,h,a[p+2],a[p+3]);g&&this._renderSegment(f,h,g[0],g[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new Hg:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new Hg:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new EI;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,s){let o;const a=this._regioncode(e,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(e,n),s.lineTo(r,i)):(o=this._clipSegment(e,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n))}_clipFinite(e,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,d=this._regioncode(a,l),c,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=d,d=this._regioncode(a,l),u===0&&d===0)c=f,f=0,i?i.push(a,l):i=[a,l];else{let p,g,b,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,d))===null)continue;[g,b,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,d,u))===null)continue;[y,v,g,b]=p,c=f,f=this._edgecode(g,b),c&&f&&this._edge(e,c,f,i,i.length),i?i.push(g,b):i=[g,b]}c=f,f=this._edgecode(y,v),c&&f&&this._edge(e,c,f,i,i.length),i?i.push(y,v):i=[y,v]}if(i)c=f,f=this._edgecode(i[0],i[1]),c&&f&&this._edge(e,c,f,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,s,o){const a=s<o;for(a&&([e,n,r,i,s,o]=[r,i,e,n,o,s]);;){if(s===0&&o===0)return a?[r,i,e,n]:[e,n,r,i];if(s&o)return null;let l,u,d=s||o;d&8?(l=e+(r-e)*(this.ymax-n)/(i-n),u=this.ymax):d&4?(l=e+(r-e)*(this.ymin-n)/(i-n),u=this.ymin):d&2?(u=n+(i-n)*(this.xmax-e)/(r-e),l=this.xmax):(u=n+(i-n)*(this.xmin-e)/(r-e),l=this.xmin),s?(e=l,n=u,s=this._regioncode(e,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,d=a.length,c,f=this._edgecode(a[d-2],a[d-1]);u<d;u+=2)c=f,f=this._edgecode(a[u],a[u+1]),c&&f&&(u=this._edge(e,c,f,a,u),d=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(e,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(e,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=e+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=e+(s=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const r=(n+2)%e.length,i=(n+4)%e.length;(e[n]===e[r]&&e[r]===e[i]||e[n+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),n-=2)}e.length||(e=null)}return e}};const Act=2*Math.PI,Xy=Math.pow;function kct(t){return t[0]}function Tct(t){return t[1]}function Dct(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],s=2*e[r+1],o=2*e[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Lct(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class h9{static from(e,n=kct,r=Tct,i){return new h9("length"in e?Rct(e,n,r,i):Float64Array.from(Fct(e,n,r,i)))}constructor(e){this._delaunator=new L3(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&Dct(e)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],c=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let f=0,h=n.length/2;f<h;++f){const p=Lct(n[2*f],n[2*f+1],c);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new L3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const d=s[l%3===2?l-2:l+1];(r[l]===-1||o[d]===-1)&&(o[d]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new Sct(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const c=a.indexOf(e);c>0&&(yield a[c-1]),c<a.length-1&&(yield a[c+1]);return}const l=n[e];if(l===-1)return;let u=l,d=-1;do{if(yield d=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const c=r[(i[e]+1)%r.length];c!==d&&(yield c);return}}while(u!==l)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,e,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(e,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let d=e,c=Xy(n-u[e*2],2)+Xy(r-u[e*2+1],2);const f=i[e];let h=f;do{let p=l[h];const g=Xy(n-u[p*2],2)+Xy(r-u[p*2+1],2);if(g<c&&(c=g,d=p),h=h%3===2?h-2:h+1,l[h]!==e)break;if(h=a[h],h===-1){if(h=s[(o[e]+1)%s.length],h!==p&&Xy(n-u[h*2],2)+Xy(r-u[h*2+1],2)<c)return h;break}}while(h!==f);return d}render(e){const n=e==null?e=new Hg:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,d=s[l]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[d],r[d+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const r=e==null?e=new Hg:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];e.moveTo(a+n,l),e.arc(a,l,n,0,Act)}return r&&r.value()}renderHull(e){const n=e==null?e=new Hg:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;e.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];e.lineTo(i[l],i[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new EI;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new Hg:void 0,{points:i,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new EI;return this.renderTriangle(e,n),n.value()}}function Rct(t,e,n,r){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=t[o];s[o*2]=e.call(r,a,o,t),s[o*2+1]=n.call(r,a,o,t)}return s}function*Fct(t,e,n,r){let i=0;for(const s of t)yield e.call(r,s,i,t),yield n.call(r,s,i,t),++i}function p9(t){rt.call(this,null,t)}p9.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Oct=[-1e5,-1e5,1e5,1e5];Lt(p9,rt,{transform(t,e){const n=t.as||"path",r=e.source;if(!r||!r.length)return e;let i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Oct;const s=this.value=h9.from(r,t.x,t.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!Ict(l)?Mct(l):null}return e.reflow(t.modified()).modifies(n)}});function Mct(t){const e=t[0][0],n=t[0][1];let r=t.length-1;for(;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}function Ict(t){return t.length===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]}const $ct=Object.freeze(Object.defineProperty({__proto__:null,voronoi:p9},Symbol.toStringTag,{value:"Module"}));var oO=Math.PI/180,l_=64,qA=2048;function Pct(){var t=[256,256],e,n,r,i,s,o,a,l=kOe,u=[],d=Math.random,c={};c.layout=function(){for(var p=f(Up()),g=qct((t[0]>>5)*t[1]),b=null,y=u.length,v=-1,w=[],E=u.map(T=>({text:e(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,D)=>D.size-T.size);++v<y;){var S=E[v];S.x=t[0]*(d()+.5)>>1,S.y=t[1]*(d()+.5)>>1,Nct(p,S,E,v),S.hasText&&h(g,S,b)&&(w.push(S),b?zct(b,S):b=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=t[0]>>1,S.y-=t[1]>>1)}return w};function f(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(l_<<5)/g,p.height=qA/g;var b=p.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:g}}function h(p,g,b){for(var y=g.x,v=g.y,w=Math.hypot(t[0],t[1]),E=l(t),S=d()<.5?1:-1,T=-S,D,k,R;(D=E(T+=S))&&(k=~~D[0],R=~~D[1],!(Math.min(Math.abs(k),Math.abs(R))>=w));)if(g.x=y+k,g.y=v+R,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!b||!Bct(g,p,t[0]))&&(!b||jct(g,b))){for(var O=g.sprite,B=g.width>>5,K=t[0]>>5,L=g.x-(B<<4),I=L&127,$=32-I,U=g.y1-g.y0,q=(g.y+g.y0)*K+(L>>5),Y,X=0;X<U;X++){Y=0;for(var te=0;te<=B;te++)p[q+te]|=Y<<$|(te<B?(Y=O[X*B+te])>>>I:0);q+=K}return g.sprite=null,!0}return!1}return c.words=function(p){return arguments.length?(u=p,c):u},c.size=function(p){return arguments.length?(t=[+p[0],+p[1]],c):t},c.font=function(p){return arguments.length?(n=dg(p),c):n},c.fontStyle=function(p){return arguments.length?(i=dg(p),c):i},c.fontWeight=function(p){return arguments.length?(s=dg(p),c):s},c.rotate=function(p){return arguments.length?(o=dg(p),c):o},c.text=function(p){return arguments.length?(e=dg(p),c):e},c.spiral=function(p){return arguments.length?(l=Hct[p]||p,c):l},c.fontSize=function(p){return arguments.length?(r=dg(p),c):r},c.padding=function(p){return arguments.length?(a=dg(p),c):a},c.random=function(p){return arguments.length?(d=p,c):d},c}function Nct(t,e,n,r){if(!e.sprite){var i=t.context,s=t.ratio;i.clearRect(0,0,(l_<<5)/s,qA/s);var o=0,a=0,l=0,u=n.length,d,c,f,h,p;for(--r;++r<u;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,d=i.measureText(e.text+"m").width*s,f=e.size<<1,e.rotate){var g=Math.sin(e.rotate*oO),b=Math.cos(e.rotate*oO),y=d*b,v=d*g,w=f*b,E=f*g;d=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,f=~~Math.max(Math.abs(v+w),Math.abs(v-w))}else d=d+31>>5<<5;if(f>l&&(l=f),o+d>=l_<<5&&(o=0,a+=l,l=0),a+f>=qA)break;i.translate((o+(d>>1))/s,(a+(f>>1))/s),e.rotate&&i.rotate(e.rotate*oO),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=d,e.height=f,e.xoff=o,e.yoff=a,e.x1=d>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=d}for(var S=i.getImageData(0,0,(l_<<5)/s,qA/s).data,T=[];--r>=0;)if(e=n[r],!!e.hasText){for(d=e.width,c=d>>5,f=e.y1-e.y0,h=0;h<f*c;h++)T[h]=0;if(o=e.xoff,o==null)return;a=e.yoff;var D=0,k=-1;for(p=0;p<f;p++){for(h=0;h<d;h++){var R=c*p+(h>>5),O=S[(a+p)*(l_<<5)+(o+h)<<2]?1<<31-h%32:0;T[R]|=O,D|=O}D?k=p:(e.y0++,f--,p--,a++)}e.y1=e.y0+k,e.sprite=T.slice(0,(e.y1-e.y0)*c)}}}function Bct(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,s=t.x-(i<<4),o=s&127,a=32-o,l=t.y1-t.y0,u=(t.y+t.y0)*n+(s>>5),d,c=0;c<l;c++){d=0;for(var f=0;f<=i;f++)if((d<<a|(f<i?(d=r[c*i+f])>>>o:0))&e[u+f])return!0;u+=n}return!1}function zct(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function jct(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function kOe(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Uct(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function qct(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function dg(t){return typeof t=="function"?t:function(){return t}}var Hct={archimedean:kOe,rectangular:Uct};const TOe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Gct=["text","font","rotate","fontSize","fontStyle","fontWeight"];function m9(t){rt.call(this,Pct(),t)}m9.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:TOe}]};Lt(m9,rt,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&ot("Wordcloud size dimensions must be non-zero.");function n(p){const g=t[p];return sr(g)&&e.modified(g.fields)}const r=t.modified();if(!(r||e.changed(e.ADD_REM)||Gct.some(n)))return;const i=e.materialize(e.SOURCE).source,s=this.value,o=t.as||TOe;let a=t.fontSize||14,l;if(sr(a)?l=t.fontSizeRange:a=Ia(a),l){const p=a,g=ci("sqrt")().domain(zd(i,p)).range(l);a=b=>g(p(b))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(Uu).layout(),d=s.size(),c=d[0]>>1,f=d[1]>>1,h=u.length;for(let p=0,g,b;p<h;++p)g=u[p],b=g.datum,b[o[0]]=g.x+c,b[o[1]]=g.y+f,b[o[2]]=g.font,b[o[3]]=g.size,b[o[4]]=g.style,b[o[5]]=g.weight,b[o[6]]=g.rotate;return e.reflow(r).modifies(o)}});const Vct=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:m9},Symbol.toStringTag,{value:"Module"})),Wct=t=>new Uint8Array(t),Yct=t=>new Uint16Array(t),O_=t=>new Uint32Array(t);function Xct(){let t=8,e=[],n=O_(0),r=$S(0,t),i=$S(0,t);return{data:()=>e,seen:()=>n=Zct(n,e.length),add(s){for(let o=0,a=e.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,e.push(u)},remove(s,o){const a=e.length,l=Array(a-s),u=e;let d,c,f;for(c=0;!o[c]&&c<a;++c)l[c]=e[c],u[c]=c;for(f=c;c<a;++c)d=e[c],o[c]?u[c]=-1:(u[c]=f,r[f]=r[c],i[f]=i[c],l[f]=d,d._index=f++),r[c]=0;return e=l,u},size:()=>e.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>t)&&(t=Math.max(o,t),r=$S(s,t,r),i=$S(s,t))}}}function Zct(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function $S(t,e,n){const r=(e<257?Wct:e<65537?Yct:O_)(t);return n&&r.set(n),r}function wwe(t,e,n){const r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],d=a[1],c=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=d;f<c;++f)s[l[f]]|=r;return o}}}function _we(){let t=O_(0),e=[],n=0;function r(a,l,u){if(!l.length)return[];const d=n,c=l.length,f=O_(c);let h=Array(c),p,g,b;for(b=0;b<c;++b)h[b]=a(l[b]),f[b]=b;if(h=Kct(h,f),d)p=e,g=t,e=Array(d+c),t=O_(d+c),Jct(u,p,g,d,h,f,c,e,t);else{if(u>0)for(b=0;b<c;++b)f[b]+=u;e=h,t=f}return n=d+c,{index:f,value:h}}function i(a,l){const u=n;let d,c,f;for(c=0;!l[t[c]]&&c<u;++c);for(f=c;c<u;++c)l[d=t[c]]||(t[f]=d,e[f]=e[c],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)t[l]=a[t[l]]}function o(a,l){let u;return l?u=l.length:(l=e,u=n),[wje(l,a[0],0,u),X_(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>t,size:()=>n}}function Kct(t,e){return t.sort.call(e,(n,r)=>{const i=t[n],s=t[r];return i<s?-1:i>s?1:0}),zUe(t,e)}function Jct(t,e,n,r,i,s,o,a,l){let u=0,d=0,c;for(c=0;u<r&&d<o;++c)e[u]<i[d]?(a[c]=e[u],l[c]=n[u++]):(a[c]=i[d],l[c]=s[d++]+t);for(;u<r;++u,++c)a[c]=e[u],l[c]=n[u];for(;d<o;++d,++c)a[c]=i[d],l[c]=s[d]+t}function g9(t){rt.call(this,Xct(),t),this._indices=null,this._dims=null}g9.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Lt(g9,rt,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(r=>e.modified(r.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,r=t.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=_we()),s.push(wwe(u,a,r[a]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),r=t.fields,i=t.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),d=a.all(),c=n.rem=n.add,f=n.mod,h=i.length,p={};let g,b,y,v,w,E,S,T,D;if(u.set(l),e.rem.length&&(w=this.remove(t,e,n)),e.add.length&&a.add(e.add),e.mod.length)for(E={},v=e.mod,S=0,T=v.length;S<T;++S)E[v[S]._index]=1;for(S=0;S<h;++S)D=r[S],(!o[S]||t.modified("fields",S)||e.modified(D.fields))&&(y=D.fname,(g=p[y])||(s[y]=b=_we(),p[y]=g=b.insert(D,e.source,0)),o[S]=wwe(b,S,i[S]).onAdd(g,l));for(S=0,T=a.data().length;S<T;++S)w[S]||(u[S]!==l[S]?c.push(S):E[S]&&l[S]!==d&&f.push(S));return a.mask=(1<<h)-1,n},eval(t,e){const n=e.materialize().fork(),r=this._dims.length;let i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},insert(t,e,n){const r=e.add,i=this.value,s=this._dims,o=this._indices,a=t.fields,l={},u=n.add,d=i.size()+r.length,c=s.length;let f=i.size(),h,p,g;i.resize(d,c),i.add(r);const b=i.curr(),y=i.prev(),v=i.all();for(h=0;h<c;++h)p=a[h].fname,g=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(g,b);for(;f<d;++f)y[f]=v,b[f]!==v&&u.push(f)},modify(t,e){const n=e.mod,r=this.value,i=r.curr(),s=r.all(),o=t.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(t,e,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,d=e.rem;let c,f,h,p;for(c=0,f=d.length;c<f;++c)h=d[c]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(e,f,l),l},reindex(t,e,n){const r=this._indices,i=this.value;t.runAfter(()=>{const s=i.remove(e,n);for(const o in r)r[o].reindex(s)})},update(t,e,n){const r=this._dims,i=t.query,s=e.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)t.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)t.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(t,e,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=t.index(),u=t.bisect(t.range),d=t.bisect(e),c=d[0],f=d[1],h=u[0],p=u[1],g=t.one;let b,y,v;if(c<h)for(b=c,y=Math.min(h,f);b<y;++b)v=l[b],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;else if(c>h)for(b=h,y=Math.min(c,p);b<y;++b)v=l[b],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;if(f>p)for(b=Math.max(c,p),y=f;b<y;++b)v=l[b],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;else if(f<p)for(b=Math.max(h,f),y=p;b<y;++b)v=l[b],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;t.range=e.slice()},incrementOne(t,e,n,r){const i=this.value,s=i.curr(),o=t.index(),a=t.bisect(t.range),l=t.bisect(e),u=l[0],d=l[1],c=a[0],f=a[1],h=t.one;let p,g,b;if(u<c)for(p=u,g=Math.min(c,d);p<g;++p)b=o[p],s[b]^=h,n.push(b);else if(u>c)for(p=c,g=Math.min(u,f);p<g;++p)b=o[p],s[b]^=h,r.push(b);if(d>f)for(p=Math.max(u,f),g=d;p<g;++p)b=o[p],s[b]^=h,n.push(b);else if(d<f)for(p=Math.max(c,d),g=f;p<g;++p)b=o[p],s[b]^=h,r.push(b);t.range=e.slice()}});function y9(t){rt.call(this,null,t)}y9.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Lt(y9,rt,{transform(t,e){const n=~(t.ignore||0),r=t.filter,i=r.mask;if(!(i&n))return e.StopPropagation;const s=e.fork(e.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=d=>a[d]&n?null:o[d];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,d=>{const c=a[d]&n;return!c&&c^l[d]&n?o[d]:null}),s.filter(s.REM,d=>{const c=a[d]&n;return c&&!(c^(c^l[d]&n))?o[d]:null})):(s.filter(s.ADD,u),s.filter(s.REM,d=>(a[d]&n)===i?o[d]:null)),s.filter(s.SOURCE,d=>u(d._index))}});const Qct=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:g9,resolvefilter:y9},Symbol.toStringTag,{value:"Module"})),edt="RawCode",m0="Literal",tdt="Property",ndt="Identifier",rdt="ArrayExpression",idt="BinaryExpression",DOe="CallExpression",sdt="ConditionalExpression",odt="LogicalExpression",adt="MemberExpression",ldt="ObjectExpression",udt="UnaryExpression";function qc(t){this.type=t}qc.prototype.visit=function(t){let e,n,r;if(t(this))return 1;for(e=cdt(this),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};function cdt(t){switch(t.type){case rdt:return t.elements;case idt:case odt:return[t.left,t.right];case DOe:return[t.callee].concat(t.arguments);case sdt:return[t.test,t.consequent,t.alternate];case adt:return[t.object,t.property];case ldt:return t.properties;case tdt:return[t.key,t.value];case udt:return[t.argument];case ndt:case m0:case edt:default:return[]}}var ef,ln,st,Fa,Li,CL=1,jE=2,g0=3,ym=4,SL=5,j0=6,Cl=7,UE=8,ddt=9;ef={};ef[CL]="Boolean";ef[jE]="<end>";ef[g0]="Identifier";ef[ym]="Keyword";ef[SL]="Null";ef[j0]="Numeric";ef[Cl]="Punctuator";ef[UE]="String";ef[ddt]="RegularExpression";var fdt="ArrayExpression",hdt="BinaryExpression",pdt="CallExpression",mdt="ConditionalExpression",LOe="Identifier",gdt="Literal",ydt="LogicalExpression",bdt="MemberExpression",vdt="ObjectExpression",xdt="Property",wdt="UnaryExpression",Ro="Unexpected token %0",_dt="Unexpected number",Edt="Unexpected string",Cdt="Unexpected identifier",Sdt="Unexpected reserved word",Adt="Unexpected end of input",CI="Invalid regular expression",aO="Invalid regular expression: missing /",ROe="Octal literals are not allowed in strict mode.",kdt="Duplicate data property in object literal not allowed in strict mode",ta="ILLEGAL",w2="Disabled.",Tdt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ddt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function AL(t,e){if(!t)throw new Error("ASSERT: "+e)}function Pf(t){return t>=48&&t<=57}function b9(t){return"0123456789abcdefABCDEF".includes(t)}function M_(t){return"01234567".includes(t)}function Ldt(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function _2(t){return t===10||t===13||t===8232||t===8233}function qE(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Tdt.test(String.fromCharCode(t))}function R3(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Ddt.test(String.fromCharCode(t))}const Rdt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function FOe(){for(;st<Fa;){const t=ln.charCodeAt(st);if(Ldt(t)||_2(t))++st;else break}}function SI(t){var e,n,r,i=0;for(n=t==="u"?4:2,e=0;e<n;++e)st<Fa&&b9(ln[st])?(r=ln[st++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):si({},Ro,ta);return String.fromCharCode(i)}function Fdt(){var t,e,n,r;for(t=ln[st],e=0,t==="}"&&si({},Ro,ta);st<Fa&&(t=ln[st++],!!b9(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&si({},Ro,ta),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,r=(e-65536&1023)+56320,String.fromCharCode(n,r))}function OOe(){var t,e;for(t=ln.charCodeAt(st++),e=String.fromCharCode(t),t===92&&(ln.charCodeAt(st)!==117&&si({},Ro,ta),++st,t=SI("u"),(!t||t==="\\"||!qE(t.charCodeAt(0)))&&si({},Ro,ta),e=t);st<Fa&&(t=ln.charCodeAt(st),!!R3(t));)++st,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),ln.charCodeAt(st)!==117&&si({},Ro,ta),++st,t=SI("u"),(!t||t==="\\"||!R3(t.charCodeAt(0)))&&si({},Ro,ta),e+=t);return e}function Odt(){var t,e;for(t=st++;st<Fa;){if(e=ln.charCodeAt(st),e===92)return st=t,OOe();if(R3(e))++st;else break}return ln.slice(t,st)}function Mdt(){var t,e,n;return t=st,e=ln.charCodeAt(st)===92?OOe():Odt(),e.length===1?n=g0:Rdt.hasOwnProperty(e)?n=ym:e==="null"?n=SL:e==="true"||e==="false"?n=CL:n=g0,{type:n,value:e,start:t,end:st}}function lO(){var t=st,e=ln.charCodeAt(st),n,r=ln[st],i,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++st,{type:Cl,value:String.fromCharCode(e),start:t,end:st};default:if(n=ln.charCodeAt(st+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return st+=2,{type:Cl,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:st};case 33:case 61:return st+=2,ln.charCodeAt(st)===61&&++st,{type:Cl,value:ln.slice(t,st),start:t,end:st}}}if(o=ln.substr(st,4),o===">>>=")return st+=4,{type:Cl,value:o,start:t,end:st};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return st+=3,{type:Cl,value:s,start:t,end:st};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return st+=2,{type:Cl,value:i,start:t,end:st};if(i==="//"&&si({},Ro,ta),"<>=!+-*%&|^/".includes(r))return++st,{type:Cl,value:r,start:t,end:st};si({},Ro,ta)}function Idt(t){let e="";for(;st<Fa&&b9(ln[st]);)e+=ln[st++];return e.length===0&&si({},Ro,ta),qE(ln.charCodeAt(st))&&si({},Ro,ta),{type:j0,value:parseInt("0x"+e,16),start:t,end:st}}function $dt(t){let e="0"+ln[st++];for(;st<Fa&&M_(ln[st]);)e+=ln[st++];return(qE(ln.charCodeAt(st))||Pf(ln.charCodeAt(st)))&&si({},Ro,ta),{type:j0,value:parseInt(e,8),octal:!0,start:t,end:st}}function Ewe(){var t,e,n;if(n=ln[st],AL(Pf(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=st,t="",n!=="."){if(t=ln[st++],n=ln[st],t==="0"){if(n==="x"||n==="X")return++st,Idt(e);if(M_(n))return $dt(e);n&&Pf(n.charCodeAt(0))&&si({},Ro,ta)}for(;Pf(ln.charCodeAt(st));)t+=ln[st++];n=ln[st]}if(n==="."){for(t+=ln[st++];Pf(ln.charCodeAt(st));)t+=ln[st++];n=ln[st]}if(n==="e"||n==="E")if(t+=ln[st++],n=ln[st],(n==="+"||n==="-")&&(t+=ln[st++]),Pf(ln.charCodeAt(st)))for(;Pf(ln.charCodeAt(st));)t+=ln[st++];else si({},Ro,ta);return qE(ln.charCodeAt(st))&&si({},Ro,ta),{type:j0,value:parseFloat(t),start:e,end:st}}function Pdt(){var t="",e,n,r,i,s=!1;for(e=ln[st],AL(e==="'"||e==='"',"String literal must starts with a quote"),n=st,++st;st<Fa;)if(r=ln[st++],r===e){e="";break}else if(r==="\\")if(r=ln[st++],!r||!_2(r.charCodeAt(0)))switch(r){case"u":case"x":ln[st]==="{"?(++st,t+=Fdt()):t+=SI(r);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:M_(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),st<Fa&&M_(ln[st])&&(s=!0,i=i*8+"01234567".indexOf(ln[st++]),"0123".includes(r)&&st<Fa&&M_(ln[st])&&(i=i*8+"01234567".indexOf(ln[st++]))),t+=String.fromCharCode(i)):t+=r;break}else r==="\r"&&ln[st]===`
`&&++st;else{if(_2(r.charCodeAt(0)))break;t+=r}return e!==""&&si({},Ro,ta),{type:UE,value:t,octal:s,start:n,end:st}}function Ndt(t,e){let n=t;e.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";si({},CI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{si({},CI)}try{return new RegExp(t,e)}catch{return null}}function Bdt(){var t,e,n,r,i;for(t=ln[st],AL(t==="/","Regular expression literal must start with a slash"),e=ln[st++],n=!1,r=!1;st<Fa;)if(t=ln[st++],e+=t,t==="\\")t=ln[st++],_2(t.charCodeAt(0))&&si({},aO),e+=t;else if(_2(t.charCodeAt(0)))si({},aO);else if(n)t==="]"&&(n=!1);else if(t==="/"){r=!0;break}else t==="["&&(n=!0);return r||si({},aO),i=e.substr(1,e.length-2),{value:i,literal:e}}function zdt(){var t,e,n;for(e="",n="";st<Fa&&(t=ln[st],!!R3(t.charCodeAt(0)));)++st,t==="\\"&&st<Fa?si({},Ro,ta):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&si({},CI,n),{value:n,literal:e}}function jdt(){var t,e,n,r;return Li=null,FOe(),t=st,e=Bdt(),n=zdt(),r=Ndt(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:st}}function Udt(t){return t.type===g0||t.type===ym||t.type===CL||t.type===SL}function MOe(){if(FOe(),st>=Fa)return{type:jE,start:st,end:st};const t=ln.charCodeAt(st);return qE(t)?Mdt():t===40||t===41||t===59?lO():t===39||t===34?Pdt():t===46?Pf(ln.charCodeAt(st+1))?Ewe():lO():Pf(t)?Ewe():lO()}function kl(){const t=Li;return st=t.end,Li=MOe(),st=t.end,t}function IOe(){const t=st;Li=MOe(),st=t}function qdt(t){const e=new qc(fdt);return e.elements=t,e}function Cwe(t,e,n){const r=new qc(t==="||"||t==="&&"?ydt:hdt);return r.operator=t,r.left=e,r.right=n,r}function Hdt(t,e){const n=new qc(pdt);return n.callee=t,n.arguments=e,n}function Gdt(t,e,n){const r=new qc(mdt);return r.test=t,r.consequent=e,r.alternate=n,r}function v9(t){const e=new qc(LOe);return e.name=t,e}function u_(t){const e=new qc(gdt);return e.value=t.value,e.raw=ln.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function Swe(t,e,n){const r=new qc(bdt);return r.computed=t==="[",r.object=e,r.property=n,r.computed||(n.member=!0),r}function Vdt(t){const e=new qc(vdt);return e.properties=t,e}function Awe(t,e,n){const r=new qc(xdt);return r.key=e,r.value=n,r.kind=t,r}function Wdt(t,e){const n=new qc(wdt);return n.operator=t,n.argument=e,n.prefix=!0,n}function si(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(s,o)=>(AL(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=st,n.description=i,n}function kL(t){t.type===jE&&si(t,Adt),t.type===j0&&si(t,_dt),t.type===UE&&si(t,Edt),t.type===g0&&si(t,Cdt),t.type===ym&&si(t,Sdt),si(t,Ro,t.value)}function Oa(t){const e=kl();(e.type!==Cl||e.value!==t)&&kL(e)}function os(t){return Li.type===Cl&&Li.value===t}function uO(t){return Li.type===ym&&Li.value===t}function Ydt(){const t=[];for(st=Li.start,Oa("[");!os("]");)os(",")?(kl(),t.push(null)):(t.push(y0()),os("]")||Oa(","));return kl(),qdt(t)}function kwe(){st=Li.start;const t=kl();return t.type===UE||t.type===j0?(t.octal&&si(t,ROe),u_(t)):v9(t.value)}function Xdt(){var t,e,n,r;if(st=Li.start,t=Li,t.type===g0)return n=kwe(),Oa(":"),r=y0(),Awe("init",n,r);if(t.type===jE||t.type===Cl)kL(t);else return e=kwe(),Oa(":"),r=y0(),Awe("init",e,r)}function Zdt(){var t=[],e,n,r,i={},s=String;for(st=Li.start,Oa("{");!os("}");)e=Xdt(),e.key.type===LOe?n=e.key.name:n=s(e.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?si({},kdt):i[r]=!0,t.push(e),os("}")||Oa(",");return Oa("}"),Vdt(t)}function Kdt(){Oa("(");const t=x9();return Oa(")"),t}const Jdt={if:1};function Qdt(){var t,e,n;if(os("("))return Kdt();if(os("["))return Ydt();if(os("{"))return Zdt();if(t=Li.type,st=Li.start,t===g0||Jdt[Li.value])n=v9(kl().value);else if(t===UE||t===j0)Li.octal&&si(Li,ROe),n=u_(kl());else{if(t===ym)throw new Error(w2);t===CL?(e=kl(),e.value=e.value==="true",n=u_(e)):t===SL?(e=kl(),e.value=null,n=u_(e)):os("/")||os("/=")?(n=u_(jdt()),IOe()):kL(kl())}return n}function eft(){const t=[];if(Oa("("),!os(")"))for(;st<Fa&&(t.push(y0()),!os(")"));)Oa(",");return Oa(")"),t}function tft(){st=Li.start;const t=kl();return Udt(t)||kL(t),v9(t.value)}function nft(){return Oa("."),tft()}function rft(){Oa("[");const t=x9();return Oa("]"),t}function ift(){var t,e,n;for(t=Qdt();;)if(os("."))n=nft(),t=Swe(".",t,n);else if(os("("))e=eft(),t=Hdt(t,e);else if(os("["))n=rft(),t=Swe("[",t,n);else break;return t}function Twe(){const t=ift();if(Li.type===Cl&&(os("++")||os("--")))throw new Error(w2);return t}function HA(){var t,e;if(Li.type!==Cl&&Li.type!==ym)e=Twe();else{if(os("++")||os("--"))throw new Error(w2);if(os("+")||os("-")||os("~")||os("!"))t=kl(),e=HA(),e=Wdt(t.value,e);else{if(uO("delete")||uO("void")||uO("typeof"))throw new Error(w2);e=Twe()}}return e}function Dwe(t){let e=0;if(t.type!==Cl&&t.type!==ym)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function sft(){var t,e,n,r,i,s,o,a,l,u;if(t=Li,l=HA(),r=Li,i=Dwe(r),i===0)return l;for(r.prec=i,kl(),e=[t,Li],o=HA(),s=[l,r,o];(i=Dwe(Li))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=Cwe(a,l,o),s.push(n);r=kl(),r.prec=i,s.push(r),e.push(Li),n=HA(),s.push(n)}for(u=s.length-1,n=s[u],e.pop();u>1;)e.pop(),n=Cwe(s[u-1].value,s[u-2],n),u-=2;return n}function y0(){var t,e,n;return t=sft(),os("?")&&(kl(),e=y0(),Oa(":"),n=y0(),t=Gdt(t,e,n)),t}function x9(){const t=y0();if(os(","))throw new Error(w2);return t}function w9(t){ln=t,st=0,Fa=ln.length,Li=null,IOe();const e=x9();if(Li.type!==jE)throw new Error("Unexpect token after expression.");return e}var $Oe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function POe(t){function e(o,a,l,u){let d=t(a[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(t).join(",")+")")}function n(o,a,l){return u=>e(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ot("Missing arguments to clamp function."),o.length>3&&ot("Too many arguments to clamp function.");const a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ot("Missing arguments to if function."),o.length>3&&ot("Too many arguments to if function.");const a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function oft(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function NOe(t){t=t||{};const e=t.allowed?Mc(t.allowed):{},n=t.forbidden?Mc(t.forbidden):{},r=t.constants||$Oe,i=(t.functions||POe)(c),s=t.globalvar,o=t.fieldvar,a=sr(s)?s:p=>`${s}["${p}"]`;let l={},u={},d=0;function c(p){if(Nt(p))return p;const g=f[p.type];return g==null&&ot("Unsupported type: "+p.type),g(p)}const f={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return d>0?g:Yt(n,g)?ot("Illegal identifier: "+g):Yt(r,g)?r[g]:Yt(e,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,b=c(p.object);g&&(d+=1);const y=c(p.property);return b===o&&(u[oft(y)]=1),g&&(d-=1),b+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ot("Illegal callee type: "+p.callee.type);const g=p.callee.name,b=p.arguments,y=Yt(i,g)&&i[g];return y||ot("Unrecognized function: "+g),sr(y)?y(b):y+"("+b.map(c).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(c).join(",")+"]",BinaryExpression:p=>"("+c(p.left)+" "+p.operator+" "+c(p.right)+")",UnaryExpression:p=>"("+p.operator+c(p.argument)+")",ConditionalExpression:p=>"("+c(p.test)+"?"+c(p.consequent)+":"+c(p.alternate)+")",LogicalExpression:p=>"("+c(p.left)+p.operator+c(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(c).join(",")+"}",Property:p=>{d+=1;const g=c(p.key);return d-=1,g+":"+c(p.value)}};function h(p){const g={code:c(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const Lwe=Symbol("vega_selection_getter");function BOe(t){return(!t.getter||!t.getter[Lwe])&&(t.getter=Bu(t.field),t.getter[Lwe]=!0),t.getter}const _9="intersect",Rwe="union",aft="vlMulti",lft="vlPoint",Fwe="or",uft="and",xd="_vgsid_",E2=Bu(xd),cft="E",dft="R",fft="R-E",hft="R-LE",pft="R-RE",F3="index:unit";function Owe(t,e){for(var n=e.fields,r=e.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=BOe(a)(t),zp(o)&&(o=Ta(o)),zp(r[s])&&(r[s]=Ta(r[s])),at(r[s])&&zp(r[s][0])&&(r[s]=r[s].map(Ta)),a.type===cft){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===dft){if(!vb(o,r[s]))return!1}else if(a.type===pft){if(!vb(o,r[s],!0,!1))return!1}else if(a.type===fft){if(!vb(o,r[s],!1,!1))return!1}else if(a.type===hft&&!vb(o,r[s],!1,!0))return!1;return!0}function mft(t,e,n){for(var r=this.context.data[t],i=r?r.values.value:[],s=r?r[F3]&&r[F3].value:void 0,o=n===_9,a=i.length,l=0,u,d,c,f,h;l<a;++l)if(u=i[l],s&&o){if(d=d||{},c=d[f=u.unit]||0,c===-1)continue;if(h=Owe(e,u),d[f]=h?-1:++c,h&&s.size===1)return!0;if(!h&&c===s.get(f).count)return!1}else if(h=Owe(e,u),o^h)return h;return a&&o}const zOe=dD(E2),gft=zOe.left,yft=zOe.right;function bft(t,e,n){const r=this.context.data[t],i=r?r.values.value:[],s=r?r[F3]&&r[F3].value:void 0,o=n===_9,a=E2(e),l=gft(i,a);if(l===i.length||E2(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(yft(i,a)-l<s.size)return!1}return!0}function vft(t,e){return t.map(n=>ir(e.fields?{values:e.fields.map(r=>BOe(r)(n.datum))}:{[xd]:E2(n.datum)},e))}function xft(t,e,n,r){for(var i=this.context.data[t],s=i?i.values.value:[],o={},a={},l={},u,d,c,f,h,p,g,b,y,v,w=s.length,E=0,S,T;E<w;++E)if(u=s[E],f=u.unit,d=u.fields,c=u.values,d&&c){for(S=0,T=d.length;S<T;++S)h=d[S],g=o[h.field]||(o[h.field]={}),b=g[f]||(g[f]=[]),l[h.field]=y=h.type.charAt(0),v=cO[`${y}_union`],g[f]=v(b,Pt(c[S]));n&&(b=a[f]||(a[f]=[]),b.push(Pt(c).reduce((D,k,R)=>(D[d[R].field]=k,D),{})))}else h=xd,p=E2(u),g=o[h]||(o[h]={}),b=g[f]||(g[f]=[]),b.push(p),n&&(b=a[f]||(a[f]=[]),b.push({[xd]:p}));if(e=e||Rwe,o[xd]?o[xd]=cO[`${xd}_${e}`](...Object.values(o[xd])):Object.keys(o).forEach(D=>{o[D]=Object.keys(o[D]).map(k=>o[D][k]).reduce((k,R)=>k===void 0?R:cO[`${l[D]}_${e}`](k,R))}),s=Object.keys(a),n&&s.length){const D=r?lft:aft;o[D]=e===Rwe?{[Fwe]:s.reduce((k,R)=>(k.push(...a[R]),k),[])}:{[uft]:s.map(k=>({[Fwe]:a[k]}))}}return o}var cO={[`${xd}_union`]:VUe,[`${xd}_intersect`]:HUe,E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=Ta(e[0]),r=Ta(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Ta(e[0]),r=Ta(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}};const wft=":",_ft="@";function E9(t,e,n,r){e[0].type!==m0&&ot("First argument to selection functions must be a string literal.");const i=e[0].value,s=e.length>=2&&Hr(e).value,o="unit",a=_ft+o,l=wft+i;s===_9&&!Yt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Yt(r,l)||(r[l]=n.getData(i).tuplesRef())}function jOe(t){const e=this.context.data[t];return e?e.values.value:[]}function Eft(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i&&i.count}function Cft(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(zu).insert(e)),1}function Sft(t,e,n){if(t){const r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return n!==void 0?n:t}const HE=t=>function(e,n){const r=this.context.dataflow.locale();return e===null?"null":r[t](n)(e)},Aft=HE("format"),UOe=HE("timeFormat"),kft=HE("utcFormat"),Tft=HE("timeParse"),Dft=HE("utcParse"),PS=new Date(2e3,0,1);function TL(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(PS.setYear(2e3),PS.setMonth(t),PS.setDate(e),UOe.call(this,PS,n))}function Lft(t){return TL.call(this,t,1,"%B")}function Rft(t){return TL.call(this,t,1,"%b")}function Fft(t){return TL.call(this,0,2+t,"%A")}function Oft(t){return TL.call(this,0,2+t,"%a")}const Mft=":",Ift="@",AI="%",qOe="$";function C9(t,e,n,r){e[0].type!==m0&&ot("First argument to data functions must be a string literal.");const i=e[0].value,s=Mft+i;if(!Yt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function $ft(t,e,n,r){e[0].type!==m0&&ot("First argument to indata must be a string literal."),e[1].type!==m0&&ot("Second argument to indata must be a string literal.");const i=e[0].value,s=e[1].value,o=Ift+s;Yt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function tl(t,e,n,r){if(e[0].type===m0)Mwe(n,r,e[0].value);else for(t in n.scales)Mwe(n,r,t)}function Mwe(t,e,n){const r=AI+n;if(!Yt(e,r))try{e[r]=t.scaleRef(n)}catch{}}function tf(t,e){if(sr(t))return t;if(Nt(t)){const n=e.scales[t];return n&&Wtt(n.value)?n.value:void 0}}function Pft(t,e,n){e.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=tl,n._range=tl,n._scale=tl;const r=i=>"_["+(i.type===m0?Tt(AI+i.value):Tt(AI)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${t(i[1])})`}}function S9(t,e){return function(n,r,i){if(n){const s=tf(n,(i||this).context);return s&&s.path[t](r)}else return e(r)}}const Nft=S9("area",lot),Bft=S9("bounds",fot),zft=S9("centroid",bot);function jft(t,e){const n=tf(t,(e||this).context);return n&&n.scale()}function Uft(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function A9(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function qft(){return A9(this.context.dataflow,"warn",arguments)}function Hft(){return A9(this.context.dataflow,"info",arguments)}function Gft(){return A9(this.context.dataflow,"debug",arguments)}function dO(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kI(t){const e=hk(t),n=dO(e.r),r=dO(e.g),i=dO(e.b);return .2126*n+.7152*r+.0722*i}function Vft(t,e){const n=kI(t),r=kI(e),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Wft(){const t=[].slice.call(arguments);return t.unshift({}),ir(...t)}function HOe(t,e){return t===e||t!==t&&e!==e?!0:at(t)?at(e)&&t.length===e.length?Yft(t,e):!1:It(t)&&It(e)?GOe(t,e):!1}function Yft(t,e){for(let n=0,r=t.length;n<r;++n)if(!HOe(t[n],e[n]))return!1;return!0}function GOe(t,e){for(const n in t)if(!HOe(t[n],e[n]))return!1;return!0}function Iwe(t){return e=>GOe(t,e)}function Xft(t,e,n,r,i,s){const o=this.context.dataflow,a=this.context.data[t],l=a.input,u=o.stamp();let d=a.changes,c,f;if(o._trigger===!1||!(l.value.length||e||r))return 0;if((!d||d.stamp<u)&&(a.changes=d=o.changeset(),d.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,d).run()},!0,1)),n&&(c=n===!0?zu:at(n)||qD(n)?n:Iwe(n),d.remove(c)),e&&d.insert(e),r&&(c=Iwe(r),l.value.some(c)?d.remove(c):d.insert(r)),i)for(f in s)d.modify(i,f,s[f]);return 1}function Zft(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.hypot(n,r)}function Kft(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const $we={};function Jft(t,e){const n=$we[e]||($we[e]=Bu(e));return at(t)?t.map(n):n(t)}function k9(t){return at(t)||ArrayBuffer.isView(t)?t:null}function T9(t){return k9(t)||(Nt(t)?t:null)}function Qft(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return k9(t).join(...n)}function eht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return T9(t).indexOf(...n)}function tht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return T9(t).lastIndexOf(...n)}function nht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return T9(t).slice(...n)}function rht(t,e,n){return sr(n)&&ot("Function argument passed to replace."),String(t).replace(e,n)}function iht(t){return k9(t).slice().reverse()}function sht(t,e,n){return z8(t||0,e||0,n||0)}function oht(t,e){const n=tf(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function aht(t,e){const n=tf(t,(e||this).context);return n?n.copy():void 0}function lht(t,e){const n=tf(t,(e||this).context);return n?n.domain():[]}function uht(t,e,n){const r=tf(t,(n||this).context);return r?at(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function cht(t,e){const n=tf(t,(e||this).context);return n&&n.range?n.range():[]}function dht(t,e,n){const r=tf(t,(n||this).context);return r?r(e):void 0}function fht(t,e,n,r,i){t=tf(t,(i||this).context);const s=ILe(e,n);let o=t.domain(),a=o[0],l=Hr(o),u=Ma;return l-a?u=ELe(t,a,l):t=(t.interpolator?ci("sequential")().interpolator(t.interpolator()):ci("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(o=t.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==Hr(o)&&o.push(l)),o.forEach(d=>s.stop(u(d),t(d))),s}function hht(t,e,n){const r=tf(t,(n||this).context);return function(i){return r?r.path.context(i)(e):""}}function pht(t){let e=null;return function(n){return n?h2(n,e=e||hv(t)):t}}const VOe=t=>t.data;function WOe(t,e){const n=jOe.call(e,t);return n.root&&n.root.lookup||{}}function mht(t,e,n){const r=WOe(t,this),i=r[e],s=r[n];return i&&s?i.path(s).map(VOe):void 0}function ght(t,e){const n=WOe(t,this)[e];return n?n.ancestors().map(VOe):void 0}const YOe=()=>typeof window<"u"&&window||null;function yht(){const t=YOe();return t?t.screen:{}}function bht(){const t=YOe();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function vht(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function XOe(t,e,n){if(!t)return[];const[r,i]=t,s=new to().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return FRe(o,s,xht(e))}function xht(t){let e=null;if(t){const n=Pt(t.marktype),r=Pt(t.markname);e=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return e}function wht(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=Pt(t);const i=t[t.length-1];return i===void 0||Math.hypot(i[0]-e,i[1]-n)>r?[...t,[e,n]]:t}function _ht(t){return Pt(t).reduce((e,n,r)=>{let[i,s]=n;return e+=r==0?`M ${i},${s} `:r===t.length-1?" Z":`L ${i},${s} `},"")}function Eht(t,e,n){const{x:r,y:i,mark:s}=n,o=new to().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of e)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),XOe([[o.x1,o.y1],[o.x2,o.y2]],t,s).filter(l=>Cht(l.x,l.y,e))}function Cht(t,e,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>e!=a>e&&t<(o-l)*(e-u)/(a-u)+l&&r++}return r&1}const C2={random(){return Uu()},cumulativeNormal:YD,cumulativeLogNormal:e8,cumulativeUniform:i8,densityNormal:XP,densityLogNormal:QP,densityUniform:r8,quantileNormal:XD,quantileLogNormal:t8,quantileUniform:s8,sampleNormal:WD,sampleLogNormal:JP,sampleUniform:n8,isArray:at,isBoolean:gm,isDate:zp,isDefined(t){return t!==void 0},isNumber:ui,isObject:It,isRegExp:pTe,isString:Nt,isTuple:qD,isValid(t){return t!=null&&t===t},toBoolean:OP,toDate(t){return MP(t)},toNumber:Ta,toString:IP,indexof:eht,join:Qft,lastindexof:tht,replace:rht,reverse:iht,slice:nht,flush:fTe,lerp:mTe,merge:Wft,pad:bTe,peek:Hr,pluck:Jft,span:xE,inrange:vb,truncate:vTe,rgb:hk,lab:X4,hcl:_je,hsl:Y4,luminance:kI,contrast:Vft,sequence:eu,format:Aft,utcFormat:kft,utcParse:Dft,utcOffset:MTe,utcSequence:PTe,timeFormat:UOe,timeParse:Tft,timeOffset:OTe,timeSequence:$Te,timeUnitSpecifier:_Te,monthFormat:Lft,monthAbbrevFormat:Rft,dayFormat:Fft,dayAbbrevFormat:Oft,quarter:lTe,utcquarter:uTe,week:CTe,utcweek:kTe,dayofyear:ETe,utcdayofyear:ATe,warn:qft,info:Hft,debug:Gft,extent(t){return zd(t)},inScope:Uft,intersect:XOe,clampRange:cTe,pinchDistance:Zft,pinchAngle:Kft,screen:yht,containerSize:vht,windowSize:bht,bandspace:sht,setdata:Cft,pathShape:pht,panLinear:iTe,panLog:sTe,panPow:oTe,panSymlog:aTe,zoomLinear:kP,zoomLog:TP,zoomPow:Ok,zoomSymlog:DP,encode:Sft,modify:Xft,lassoAppend:wht,lassoPath:_ht,intersectLasso:Eht},Sht=["view","item","group","xy","x","y"],Aht="event.vega.",ZOe="this.",D9={},KOe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${Tt(qOe+t)}]`,functions:kht,constants:$Oe,visitors:D9},TI=NOe(KOe);function kht(t){const e=POe(t);Sht.forEach(n=>e[n]=Aht+n);for(const n in C2)e[n]=ZOe+n;return ir(e,Pft(t,C2,D9)),e}function Us(t,e,n){return arguments.length===1?C2[t]:(C2[t]=e,n&&(D9[t]=n),TI&&(TI.functions[t]=ZOe+t),this)}Us("bandwidth",oht,tl);Us("copy",aht,tl);Us("domain",lht,tl);Us("range",cht,tl);Us("invert",uht,tl);Us("scale",dht,tl);Us("gradient",fht,tl);Us("geoArea",Nft,tl);Us("geoBounds",Bft,tl);Us("geoCentroid",zft,tl);Us("geoShape",hht,tl);Us("geoScale",jft,tl);Us("indata",Eft,$ft);Us("data",jOe,C9);Us("treePath",mht,C9);Us("treeAncestors",ght,C9);Us("vlSelectionTest",mft,E9);Us("vlSelectionIdTest",bft,E9);Us("vlSelectionResolve",xft,E9);Us("vlSelectionTuples",vft);function qd(t,e){const n={};let r;try{t=Nt(t)?t:Tt(t)+"",r=w9(t)}catch{ot("Expression parse error: "+t)}r.visit(s=>{if(s.type!==DOe)return;const o=s.callee.name,a=KOe.visitors[o];a&&a(o,s.arguments,e,n)});const i=TI(r);return i.globals.forEach(s=>{const o=qOe+s;!Yt(n,o)&&e.getSignal(s)&&(n[o]=e.signalRef(s))}),{$expr:ir({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Tht(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(r=>e.parseOperator(r)),n.forEach(r=>e.parseOperatorParameters(r)),(t.streams||[]).forEach(r=>e.parseStream(r)),(t.updates||[]).forEach(r=>e.parseUpdate(r)),e.resolve()}const Dht=Mc(["rule"]),Pwe=Mc(["group","image","rect"]);function Lht(t,e){let n="";return Dht[e]||(t.x2&&(t.x?(Pwe[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(Pwe[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function L9(t){return(t+"").toLowerCase()}function Rht(t){return L9(t)==="operator"}function Fht(t){return L9(t)==="collect"}function Sw(t,e,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...e.concat(n));return t&&t.functions?r.bind(t.functions):r}function Oht(t,e,n,r){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Mht={operator:(t,e)=>Sw(t,["_"],e.code),parameter:(t,e)=>Sw(t,["datum","_"],e.code),event:(t,e)=>Sw(t,["event"],e.code),handler:(t,e)=>{const n=`var datum=event.item&&event.item.datum;return ${e.code};`;return Sw(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:r}=e;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Tt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Lht(r,n),i+="return m;",Sw(t,["item","_"],i)},codegen:{get(t){const e=`[${t.map(Tt).join("][")}]`,n=Function("_",`return _${e};`);return n.path=e,n},comparator(t,e){let n;const r=(s,o)=>{const a=e[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),Oht(l,u,-a,a)},i=Function("a","b","var u, v; return "+t.map(r).join("")+"0;");return n?i.bind(n):i}}};function Iht(t){const e=this;Rht(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function $ht(t){const e=this;if(t.params){const n=e.get(t.id);n||ot("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function Pht(t,e){e=e||{};const n=this;for(const r in t){const i=t[r];e[r]=at(i)?i.map(s=>Nwe(s,n,e)):Nwe(i,n,e)}return e}function Nwe(t,e,n){if(!t||!It(t))return t;for(let r=0,i=Bwe.length,s;r<i;++r)if(s=Bwe[r],Yt(t,s.key))return s.parse(t,e,n);return t}var Bwe=[{key:"$ref",parse:Nht},{key:"$key",parse:zht},{key:"$expr",parse:Bht},{key:"$field",parse:jht},{key:"$encode",parse:qht},{key:"$compare",parse:Uht},{key:"$context",parse:Hht},{key:"$subflow",parse:Ght},{key:"$tupleid",parse:Vht}];function Nht(t,e){return e.get(t.$ref)||ot("Operator not defined: "+t.$ref)}function Bht(t,e,n){t.$params&&e.parseParameters(t.$params,n);const r="e:"+t.$expr.code;return e.fn[r]||(e.fn[r]=ql(e.parameterExpression(t.$expr),t.$fields))}function zht(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=FP(t.$key,t.$flat,e.expr.codegen))}function jht(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Bu(t.$field,t.$name,e.expr.codegen))}function Uht(t,e){const n="c:"+t.$compare+"_"+t.$order,r=Pt(t.$compare).map(i=>i&&i.$tupleid?wn:i);return e.fn[n]||(e.fn[n]=LP(r,t.$order,e.expr.codegen))}function qht(t,e){const n=t.$encode,r={};for(const i in n){const s=n[i];r[i]=ql(e.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Hht(t,e){return e}function Ght(t,e){const n=t.$subflow;return function(r,i,s){const o=e.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>e.detach(o),a}}function Vht(){return wn}function Wht(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,r=t.stream!=null?e.get(t.stream):void 0,i;t.source?r=e.events(t.source,t.type,n):t.merge&&(i=t.merge.map(s=>e.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),t.between&&(i=t.between.map(s=>e.get(s)),r=r.between(i[0],i[1])),t.filter&&(r=r.filter(n)),t.throttle!=null&&(r=r.throttle(+t.throttle)),t.debounce!=null&&(r=r.debounce(+t.debounce)),r==null&&ot("Invalid stream definition: "+JSON.stringify(t)),t.consume&&r.consume(!0),e.stream(t,r)}function Yht(t){var e=this,n=It(n=t.source)?n.$ref:n,r=e.get(n),i=null,s=t.update,o=void 0;r||ot("Source not defined: "+t.source),i=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),s&&s.$expr&&(s.$params&&(o=e.parseParameters(s.$params)),s=e.handlerExpression(s.$expr)),e.update(t,r,i,s,o)}const Xht={skip:!0};function Zht(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(s=>{const o=e.signals[s];t.signals(s,o)&&(r[s]=o.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(s=>{const o=e.data[s];t.data(s,o)&&(i[s]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(s=>s.getState(t))),n}function Kht(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(s=>{n.update(e.signals[s],i[s],Xht)}),Object.keys(r||{}).forEach(s=>{n.pulse(e.data[s].input,n.changeset().remove(zu).insert(r[s]))}),(t.subcontext||[]).forEach((s,o)=>{const a=e.subcontext[o];a&&a.setState(s)})}function JOe(t,e,n,r){return new QOe(t,e,n,r)}function QOe(t,e,n,r){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=r||Mht,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function zwe(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}QOe.prototype=zwe.prototype={fork(){const t=new zwe(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,r=n.dataflow,i=t.value;if(n.set(t.id,e),Fht(t.type)&&i&&(i.$ingest?r.ingest(e,i.$ingest,i.$format):i.$request?r.preload(e,i.$request,i.$format):r.pulse(e,r.changeset().insert(i))),t.root&&(n.root=e),t.parent){let s=n.get(t.parent.$ref);s?(r.connect(s,[e]),e.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),r.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const s in t.data){const o=n.data[s]||(n.data[s]={});t.data[s].forEach(a=>o[a]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[L9(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:Tht,parseOperator:Iht,parseOperatorParameters:$ht,parseParameters:Pht,parseStream:Wht,parseUpdate:Yht,getState:Zht,setState:Kht};function Jht(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),e5e(e,t.description()))}function e5e(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function Qht(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const fO="default";function ept(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:fO,item:null}));t.on(t.events("view","pointermove"),e,(n,r)=>{const i=e.value,s=i?Nt(i)?i:i.user:fO,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),t.add(null,function(n){let r=n.cursor,i=this.value;return Nt(r)||(i=r.item,r=r.user),DI(t,r&&r!==fO?r:i||r),i},{cursor:e})}function DI(t,e){const n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function O3(t,e){var n=t._runtime.data;return Yt(n,e)||ot("Unrecognized data set: "+e),n[e]}function tpt(t,e){return arguments.length<2?O3(this,t).values.value:DL.call(this,t,B0().remove(zu).insert(e))}function DL(t,e){rDe(e)||ot("Second argument to changes must be a changeset.");const n=O3(this,t);return n.modified=!0,this.pulse(n.input,e)}function npt(t,e){return DL.call(this,t,B0().insert(e))}function rpt(t,e){return DL.call(this,t,B0().remove(e))}function t5e(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function n5e(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function LL(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function ipt(t){var e=LL(t),n=t5e(t),r=n5e(t);t._renderer.background(t.background()),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){t.error(s)}})}function spt(t,e,n){var r=t._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=LL(t),o=e.changedTouches?e.changedTouches[0]:e,s=gL(o,i),s[0]-=a[0],s[1]-=a[1]),e.dataflow=t,e.item=n,e.vega=opt(t,n,s),e}function opt(t,e,n){const r=e?e.mark.marktype==="group"?e:e.mark.group:null;function i(o){var a=r,l;if(o){for(l=e;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Nt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ia(t),item:Ia(e||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const jwe="view",apt="timer",lpt="window",upt={trap:!1};function cpt(t){const e=ir({defaults:{}},t),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=Mc(r[s]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function r5e(t,e,n,r){t._eventListeners.push({type:n,sources:Pt(e),handler:r})}function dpt(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[e]:i?!i[e]:t.preventDefault()}function NS(t,e,n){const r=t._eventConfig&&t._eventConfig[e];return r===!1||It(r)&&!r[n]?(t.warn(`Blocked ${e} ${n} event listener.`),!1):!0}function fpt(t,e,n){var r=this,i=new VD(n),s=function(u,d){r.runAsync(null,()=>{t===jwe&&dpt(r,e)&&u.preventDefault(),i.receive(spt(r,u,d))})},o;if(t===apt)NS(r,"timer",e)&&r.timer(s,e);else if(t===jwe)NS(r,"view",e)&&r.addEventListener(e,s,upt);else if(t===lpt?NS(r,"window",e)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&NS(r,"selector",e)&&(o=Array.from(document.querySelectorAll(t))),!o)r.warn("Can not resolve event source: "+t);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(e,s);r5e(r,o,e,s)}return i}function Uwe(t){return t.item}function qwe(t){return t.item.mark.source}function Hwe(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function hpt(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","pointerover",Uwe),qwe,Hwe(t)),this.on(this.events("view","pointerout",Uwe),qwe,Hwe(e)),this}function ppt(){var t=this._tooltip,e=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=e.length;--i>=0;)e[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(t&&t.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function ou(t,e,n){const r=document.createElement(t);for(const i in e)r.setAttribute(i,e[i]);return n!=null&&(r.textContent=n),r}const mpt="vega-bind",gpt="vega-bind-name",ypt="vega-bind-radio";function bpt(t,e,n){if(!e)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(r.signal)&&t.runAsync(null,()=>{i.source=!0,t.signal(r.signal,o)})}},r.debounce&&(i.update=RP(r.debounce,i.update))),(r.input==null&&r.element?vpt:wpt)(i,e,r,t),i.active||(t.on(t._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}function vpt(t,e,n,r){const i=n.event||"input",s=()=>t.update(e.value);r.signal(n.signal,e.value),e.addEventListener(i,s),r5e(r,e,i,s),t.set=o=>{e.value=o,e.dispatchEvent(xpt(i))}}function xpt(t){return typeof Event<"u"?new Event(t):{type:t}}function wpt(t,e,n,r){const i=r.signal(n.signal),s=ou("div",{class:mpt}),o=n.input==="radio"?s:s.appendChild(ou("label"));o.appendChild(ou("span",{class:gpt},n.name||n.signal)),e.appendChild(s);let a=_pt;switch(n.input){case"checkbox":a=Ept;break;case"select":a=Cpt;break;case"radio":a=Spt;break;case"range":a=Apt;break}a(t,o,n,i)}function _pt(t,e,n,r){const i=ou("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",()=>t.update(i.value)),t.elements=[i],t.set=s=>i.value=s}function Ept(t,e,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=ou("input",i);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=o=>s.checked=!!o||null}function Cpt(t,e,n,r){const i=ou("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};M3(o,r)&&(l.selected=!0),i.appendChild(ou("option",l,(s[a]||o)+""))}),e.appendChild(i),i.addEventListener("change",()=>{t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(M3(n.options[a],o)){i.selectedIndex=a;return}}}function Spt(t,e,n,r){const i=ou("span",{class:ypt}),s=n.labels||[];e.appendChild(i),t.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};M3(o,r)&&(l.checked=!0);const u=ou("input",l);u.addEventListener("change",()=>t.update(o));const d=ou("label",{},(s[a]||o)+"");return d.prepend(u),i.appendChild(d),u}),t.set=o=>{const a=t.elements,l=a.length;for(let u=0;u<l;++u)M3(a[u].value,o)&&(a[u].checked=!0)}}function Apt(t,e,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||s0(s,i,100),a=ou("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=ou("span",{},+r);e.appendChild(a),e.appendChild(l);const u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=d=>{a.value=d,l.textContent=d}}function M3(t,e){return t===e||t+""==e+""}function i5e(t,e,n,r,i,s){return e=e||new r(t.loader()),e.initialize(n,t5e(t),n5e(t),LL(t),i,s).background(t.background())}function R9(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function kpt(t,e,n,r){const i=new r(t.loader(),R9(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,LL(t),t);return e&&e.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Tpt(t,e){const n=this,r=n._renderType,i=n._eventConfig.bind,s=yL(r);t=n._el=t?hO(n,t,!0):null,Jht(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||$E,a=t?s.renderer:s.headless;return n._renderer=a?i5e(n,n._renderer,t,a):null,n._handler=kpt(n,n._handler,t,o),n._redraw=!0,t&&i!=="none"&&(e=e?n._elBind=hO(n,e,!0):t.appendChild(ou("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=hO(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{bpt(n,l.element||e,l)})),n}function hO(t,e,n){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(r){e=null,t.error(r)}return e}const Aw=t=>+t||0,Dpt=t=>({top:t,bottom:t,left:t,right:t});function Gwe(t){return It(t)?{top:Aw(t.top),bottom:Aw(t.bottom),left:Aw(t.left),right:Aw(t.right)}:Dpt(Aw(t))}async function F9(t,e,n,r){const i=yL(e),s=i&&i.headless;return s||ot("Unrecognized renderer type: "+e),await t.runAsync(),i5e(t,null,null,s,n,r).renderAsync(t._scenegraph.root)}async function Lpt(t,e){t!==Dp.Canvas&&t!==Dp.SVG&&t!==Dp.PNG&&ot("Unrecognized image type: "+t);const n=await F9(this,t,e);return t===Dp.SVG?Rpt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Rpt(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function Fpt(t,e){return(await F9(this,Dp.Canvas,t,e)).canvas()}async function Opt(t){return(await F9(this,Dp.SVG,t)).svg()}function Mpt(t,e,n){return JOe(t,lv,C2,n).parse(e)}function Ipt(t){var e=this._runtime.scales;return Yt(e,t)||ot("Unrecognized scale or projection: "+t),e[t].value}var s5e="width",o5e="height",O9="padding",Vwe={skip:!0};function a5e(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===O9?r.left+r.right:0)}function l5e(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===O9?r.top+r.bottom:0)}function $pt(t){var e=t._signals,n=e[s5e],r=e[o5e],i=e[O9];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,a=>{t._width=a.size,t._viewWidth=a5e(t,a.size),s()},{size:n}),t._resizeHeight=t.add(null,a=>{t._height=a.size,t._viewHeight=l5e(t,a.size),s()},{size:r});const o=t.add(null,s,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Ppt(t,e,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(s5e,n,Vwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(o5e,r,Vwe),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Npt(t){return this._runtime.getState(t||{data:Bpt,signals:zpt,recurse:!0})}function Bpt(t,e){return e.modified&&at(e.input.value)&&!t.startsWith("_:vega:_")}function zpt(t,e){return!(t==="parent"||e instanceof lv.proxy)}function jpt(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function Upt(t,e){function n(r){t({timestamp:Date.now(),elapsed:r})}this._timers.push(vlt(n,e))}function qpt(t,e,n,r){const i=t.element();i&&i.setAttribute("title",Hpt(r))}function Hpt(t){return t==null?"":at(t)?u5e(t):It(t)&&!zp(t)?Gpt(t):t+""}function Gpt(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(at(n)?u5e(n):c5e(n))}).join(`
`)}function u5e(t){return"["+t.map(c5e).join(", ")+"]"}function c5e(t){return at(t)?"[]":It(t)&&!zp(t)?"{}":t}function Vpt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let t=null;const e=()=>{t!=null&&t();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",e),t=()=>{n.removeEventListener("change",e)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};e()}}function d5e(t,e){const n=this;if(e=e||{},Fb.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const s=ir({},t.locale,e.locale);n.locale(WTe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||Dp.Canvas,n._scenegraph=new sRe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||qpt,n._redraw=!0,n._handler=new $E().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=cpt(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Mpt(n,t,e.expr);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:ir({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=a5e(n,n._width),n._viewHeight=l5e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,$pt(n),Qht(n),ept(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind),e.watchPixelRatio&&n._watchPixelRatio()}function BS(t,e){return Yt(t._signals,e)?t._signals[e]:ot("Unrecognized signal name: "+Tt(e))}function f5e(t,e){const n=(t._targets||[]).filter(r=>r._update&&r._update.handler===e);return n.length?n[0]:null}function Wwe(t,e,n,r){let i=f5e(n,r);return i||(i=R9(t,()=>r(e,n.value)),i.handler=r,t.on(n,null,i)),t}function Ywe(t,e,n){const r=f5e(e,n);return r&&e._targets.remove(r),t}Lt(d5e,Fb,{async evaluate(t,e,n){if(await Fb.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ipt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&kA(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&e5e(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const r=BS(this,t);return arguments.length===1?r.value:this.update(r,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",Gwe(t)):Gwe(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(yL(t)||ot("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Fb.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(BS(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Ppt,addEventListener(t,e,n){let r=e;return n&&n.trap===!1||(r=R9(this,e),r.raw=e),this._handler.on(t,r),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,t===s&&(e===i||e===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.includes(t)||e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return Wwe(this,t,BS(this,t),e)},removeSignalListener(t,e){return Ywe(this,BS(this,t),e)},addDataListener(t,e){return Wwe(this,t,O3(this,t).values,e)},removeDataListener(t,e){return Ywe(this,O3(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=DI(this,null);this._globalCursor=!!t,e&&DI(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Upt,events:fpt,finalize:ppt,hover:hpt,data:tpt,change:DL,insert:npt,remove:rpt,scale:Ipt,initialize:Tpt,toImageURL:Lpt,toCanvas:Fpt,toSVG:Opt,getState:Npt,setState:jpt,_watchPixelRatio:Vpt});const Wpt="view",I3="[",$3="]",h5e="{",p5e="}",Ypt=":",m5e=",",Xpt="@",Zpt=">",Kpt=/[[\]{}]/,Jpt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let g5e,y5e;function bm(t,e,n){return g5e=e||Wpt,y5e=n||Jpt,b5e(t.trim()).map(LI)}function Qpt(t){return y5e[t]}function I_(t,e,n,r,i){const s=t.length;let o=0,a;for(;e<s;++e){if(a=t[e],!o&&a===n)return e;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function b5e(t){const e=[],n=t.length;let r=0,i=0;for(;i<n;)i=I_(t,i,m5e,I3+h5e,$3+p5e),e.push(t.substring(r,i).trim()),r=++i;if(e.length===0)throw"Empty event selector: "+t;return e}function LI(t){return t[0]==="["?emt(t):tmt(t)}function emt(t){const e=t.length;let n=1,r;if(n=I_(t,n,$3,I3,$3),n===e)throw"Empty between selector: "+t;if(r=b5e(t.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Zpt)throw"Expected '>' after between selector: "+t;r=r.map(LI);const i=LI(t.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function tmt(t){const e={source:g5e},n=[];let r=[0,0],i=0,s=0,o=t.length,a=0,l,u;if(t[o-1]===p5e){if(a=t.lastIndexOf(h5e),a>=0){try{r=nmt(t.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,a).trim(),o=t.length}else throw"Unmatched right brace: "+t;a=0}if(!o)throw t;if(t[0]===Xpt&&(i=++a),l=I_(t,a,Ypt),l<o&&(n.push(t.substring(s,l).trim()),s=a=++l),a=I_(t,a,I3),a===o)n.push(t.substring(s,o).trim());else if(n.push(t.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+t;for(;a<o;){if(a=I_(t,a,$3),a===o)throw"Unmatched left bracket: "+t;if(u.push(t.substring(s,a).trim()),a<o-1&&t[++a]!==I3)throw"Expected left bracket: "+t;s=++a}if(!(o=n.length)||Kpt.test(n[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=n[1],i?e.markname=n[0].slice(1):Qpt(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),r[0]&&(e.throttle=r[0]),r[1]&&(e.debounce=r[1]),e}function nmt(t){const e=t.split(m5e);if(!t.length||e.length>2)throw t;return e.map(n=>{const r=+n;if(r!==r)throw t;return r})}function rmt(t){return It(t)?t:{type:t||"pad"}}const kw=t=>+t||0,imt=t=>({top:t,bottom:t,left:t,right:t});function smt(t){return It(t)?t.signal?t:{top:kw(t.top),bottom:kw(t.bottom),left:kw(t.left),right:kw(t.right)}:imt(kw(t))}const Fo=t=>It(t)&&!at(t)?ir({},t):{value:t};function Xwe(t,e,n,r){return n!=null?(It(n)&&!at(n)||at(n)&&n.length&&It(n[0])?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function oa(t,e,n){for(const r in e)Xwe(t,r,e[r]);for(const r in n)Xwe(t,r,n[r],"update")}function g1(t,e,n){for(const r in e)n&&Yt(n,r)||(t[r]=ir(t[r]||{},e[r]));return t}function ub(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const M9="mark",I9="frame",$9="scope",omt="axis",amt="axis-domain",lmt="axis-grid",umt="axis-label",cmt="axis-tick",dmt="axis-title",fmt="legend",hmt="legend-band",pmt="legend-entry",mmt="legend-gradient",v5e="legend-label",gmt="legend-symbol",ymt="legend-title",bmt="title",vmt="title-text",xmt="title-subtitle";function wmt(t,e,n,r,i){const s={},o={};let a,l,u,d;l="lineBreak",e==="text"&&i[l]!=null&&!ub(l,t)&&pO(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===I9?i.group:n===M9?ir({},i.mark,i[e]):null;for(l in d)u=ub(l,t)||(l==="fill"||l==="stroke")&&(ub("fill",t)||ub("stroke",t)),u||pO(s,l,d[l]);Pt(r).forEach(c=>{const f=i.style&&i.style[c];for(const h in f)ub(h,t)||pO(s,h,f[h])}),t=ir({},t);for(l in s)d=s[l],d.signal?(a=a||{})[l]=d:o[l]=d;return t.enter=ir(o,t.enter),a&&(t.update=ir(a,t.update)),t}function pO(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const x5e=t=>Nt(t)?Tt(t):t.signal?`(${t.signal})`:w5e(t);function RL(t){if(t.gradient!=null)return Emt(t);let e=t.signal?`(${t.signal})`:t.color?_mt(t.color):t.field!=null?w5e(t.field):t.value!==void 0?Tt(t.value):void 0;return t.scale!=null&&(e=Cmt(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${GA(t.exponent)})`),t.mult!=null&&(e+=`*${GA(t.mult)}`),t.offset!=null&&(e+=`+${GA(t.offset)}`),t.round&&(e=`round(${e})`),e}const zS=(t,e,n,r)=>`(${t}(${[e,n,r].map(RL).join(",")})+'')`;function _mt(t){return t.c?zS("hcl",t.h,t.c,t.l):t.h||t.s?zS("hsl",t.h,t.s,t.l):t.l||t.a?zS("lab",t.l,t.a,t.b):t.r||t.g||t.b?zS("rgb",t.r,t.g,t.b):null}function Emt(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Tt(n));for(;e.length&&Hr(e)==null;)e.pop();return e.unshift(x5e(t.gradient)),`gradient(${e.join(",")})`}function GA(t){return It(t)?"("+RL(t)+")":t}function w5e(t){return _5e(It(t)?t:{datum:t})}function _5e(t){let e,n,r;if(t.signal)e="datum",r=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(r=t.parent,e+=".datum"):r=t.group}else t.datum?(e="datum",r=t.datum):ot("Invalid field reference: "+Tt(t));return t.signal||(r=Nt(r)?Zd(r).map(Tt).join("]["):_5e(r)),e+"["+r+"]"}function Cmt(t,e){const n=x5e(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+GA(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function Smt(t){let e="";return t.forEach(n=>{const r=RL(n);e+=n.test?`(${n.test})?${r}:`:r}),Hr(e)===":"&&(e+="null"),e}function E5e(t,e,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},t=wmt(t,e,n,r,i.config);for(const a in t)o[a]=Amt(t[a],e,s,i);return s}function Amt(t,e,n,r){const i={},s={};for(const o in t)t[o]!=null&&(i[o]=Tmt(kmt(t[o]),r,n,s));return{$expr:{marktype:e,channels:i},$fields:Object.keys(s),$output:Object.keys(t)}}function kmt(t){return at(t)?Smt(t):RL(t)}function Tmt(t,e,n,r){const i=qd(t,e);return i.$fields.forEach(s=>r[s]=1),ir(n,i.$params),i.$expr}const Dmt="outer",Lmt=["value","update","init","react","bind"];function Zwe(t,e){ot(t+' for "outer" push: '+Tt(e))}function C5e(t,e){const n=t.name;if(t.push===Dmt)e.signals[n]||Zwe("No prior signal definition",n),Lmt.forEach(r=>{t[r]!==void 0&&Zwe("Invalid property ",r)});else{const r=e.addSignal(n,t.value);t.react===!1&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}function RI(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function FL(t,e,n,r){return new RI(t,e,n,r)}function P3(t,e){return FL("operator",t,e)}function xn(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function S2(t,e){return e?{$field:t,$name:e}:{$field:t}}const FI=S2("key");function Kwe(t,e){return{$compare:t,$order:e}}function Rmt(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const Fmt="ascending",Omt="descending";function Mmt(t){return It(t)?(t.order===Omt?"-":"+")+OL(t.op,t.field):""}function OL(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const P9="scope",OI="view";function vo(t){return t&&t.signal}function Imt(t){return t&&t.expr}function VA(t){if(vo(t))return!0;if(It(t)){for(const e in t)if(VA(t[e]))return!0}return!1}function mc(t,e){return t??e}function Zg(t){return t&&t.signal||t}const Jwe="timer";function A2(t,e){return(t.merge?Pmt:t.stream?Nmt:t.type?Bmt:ot("Invalid stream specification: "+Tt(t)))(t,e)}function $mt(t){return t===P9?OI:t||OI}function Pmt(t,e){const n=t.merge.map(i=>A2(i,e)),r=N9({merge:n},t,e);return e.addStream(r).id}function Nmt(t,e){const n=A2(t.stream,e),r=N9({stream:n},t,e);return e.addStream(r).id}function Bmt(t,e){let n;t.type===Jwe?(n=e.event(Jwe,t.throttle),t={between:t.between,filter:t.filter}):n=e.event($mt(t.source),t.type);const r=N9({stream:n},t,e);return Object.keys(r).length===1?n:e.addStream(r).id}function N9(t,e,n){let r=e.between;return r&&(r.length!==2&&ot('Stream "between" parameter must have 2 entries: '+Tt(e)),t.between=[A2(r[0],n),A2(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(zmt(e.marktype,e.markname,e.markrole)),e.source===P9&&r.push("inScope(event.item)"),r.length&&(t.filter=qd("("+r.join(")&&(")+")",n).$expr),(r=e.throttle)!=null&&(t.throttle=+r),(r=e.debounce)!=null&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function zmt(t,e,n){const r="event.item";return r+(t&&t!=="*"?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}const jmt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Umt(t,e,n){const r=t.encode,i={target:n};let s=t.events,o=t.update,a=[];s||ot("Signal update missing events specification."),Nt(s)&&(s=bm(s,e.isSubscope()?P9:OI)),s=Pt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Hmt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ot("Signal encode and update are mutually exclusive."),o="encode(item(),"+Tt(r)+")"),i.update=Nt(o)?qd(o,e):o.expr!=null?qd(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:jmt,$params:{$value:e.signalRef(o.signal)}}:ot("Invalid signal update specification."),t.force&&(i.options={force:!0}),a.forEach(l=>e.addUpdate(ir(qmt(l,e),i)))}function qmt(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):A2(t,e)}}function Hmt(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function Gmt(t,e){const n=e.getSignal(t.name);let r=t.update;t.init&&(r?ot("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=qd(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach(i=>Umt(i,e,n.id))}const Bi=t=>(e,n,r)=>FL(t,n,e||void 0,r),S5e=Bi("aggregate"),Vmt=Bi("axisticks"),A5e=Bi("bound"),Hc=Bi("collect"),Qwe=Bi("compare"),Wmt=Bi("datajoin"),k5e=Bi("encode"),Ymt=Bi("expression"),Xmt=Bi("facet"),Zmt=Bi("field"),Kmt=Bi("key"),Jmt=Bi("legendentries"),Qmt=Bi("load"),egt=Bi("mark"),tgt=Bi("multiextent"),ngt=Bi("multivalues"),rgt=Bi("overlap"),igt=Bi("params"),T5e=Bi("prefacet"),sgt=Bi("projection"),ogt=Bi("proxy"),agt=Bi("relay"),D5e=Bi("render"),lgt=Bi("scale"),U0=Bi("sieve"),ugt=Bi("sortitems"),L5e=Bi("viewlayout"),cgt=Bi("values");let dgt=0;const R5e={min:"min",max:"max",count:"sum"};function fgt(t,e){const n=t.type||"linear";yLe(n)||ot("Unrecognized scale type: "+Tt(n)),e.addScale(t.name,{type:n,domain:void 0})}function hgt(t,e){const n=e.getScale(t.name).params;let r;n.domain=F5e(t.domain,t,e),t.range!=null&&(n.range=M5e(t,e,n)),t.interpolate!=null&&Egt(t.interpolate,n),t.nice!=null&&(n.nice=_gt(t.nice,e)),t.bins!=null&&(n.bins=wgt(t.bins,e));for(r in t)Yt(n,r)||r==="name"||(n[r]=Mu(t[r],e))}function Mu(t,e){return It(t)?t.signal?e.signalRef(t.signal):ot("Unsupported object: "+Tt(t)):t}function WA(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>Mu(n,e))}function ML(t){ot("Can not find data set: "+Tt(t))}function F5e(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&ot("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(at(t)?pgt:t.fields?ggt:mgt)(t,e,n)}function pgt(t,e,n){return t.map(r=>Mu(r,n))}function mgt(t,e,n){const r=n.getData(t.data);return r||ML(t.data),fv(e.type)?r.valuesRef(n,t.field,O5e(t.sort,!1)):xLe(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function ggt(t,e,n){const r=t.data,i=t.fields.reduce((s,o)=>(o=Nt(o)?{data:r,field:o}:at(o)||o.signal?ygt(o,n):o,s.push(o),s),[]);return(fv(e.type)?bgt:xLe(e.type)?vgt:xgt)(t,n,i)}function ygt(t,e){const n="_:vega:_"+dgt++,r=Hc({});if(at(t))r.value={$ingest:t};else if(t.signal){const i="setdata("+Tt(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,U0({})]),{data:n,field:"data"}}function bgt(t,e,n){const r=O5e(t.sort,!0);let i,s;const o=n.map(u=>{const d=e.getData(u.data);return d||ML(u.data),d.countsRef(e,u.field,r)}),a={groupby:FI,pulse:o};r&&(i=r.op||"count",s=r.field?OL(i,r.field):"count",a.ops=[R5e[i]],a.fields=[e.fieldRef(s)],a.as=[s]),i=e.add(S5e(a));const l=e.add(Hc({pulse:xn(i)}));return s=e.add(cgt({field:FI,sort:e.sortRef(r),pulse:xn(l)})),xn(s)}function O5e(t,e){return t&&(!t.field&&!t.op?It(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?ot("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!R5e[t.op]&&ot("Multiple domain scales can not be sorted using "+t.op)),t}function vgt(t,e,n){const r=n.map(i=>{const s=e.getData(i.data);return s||ML(i.data),s.domainRef(e,i.field)});return xn(e.add(ngt({values:r})))}function xgt(t,e,n){const r=n.map(i=>{const s=e.getData(i.data);return s||ML(i.data),s.extentRef(e,i.field)});return xn(e.add(tgt({extents:r})))}function wgt(t,e){return t.signal||at(t)?WA(t,e):e.objectProperty(t)}function _gt(t,e){return t.signal?e.signalRef(t.signal):It(t)?{interval:Mu(t.interval),step:Mu(t.step)}:Mu(t)}function Egt(t,e){e.interpolate=Mu(t.type||t),t.gamma!=null&&(e.interpolateGamma=Mu(t.gamma))}function M5e(t,e,n){const r=e.config.range;let i=t.range;if(i.signal)return e.signalRef(i.signal);if(Nt(i)){if(r&&Yt(r,i))return t=ir({},t,{range:r[i]}),M5e(t,e,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=fv(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ot("Unrecognized scale range value: "+Tt(i))}else if(i.scheme){n.scheme=at(i.scheme)?WA(i.scheme,e):Mu(i.scheme,e),i.extent&&(n.schemeExtent=WA(i.extent,e)),i.count&&(n.schemeCount=Mu(i.count,e));return}else if(i.step){n.rangeStep=Mu(i.step,e);return}else{if(fv(t.type)&&!at(i))return F5e(i,t,e);at(i)||ot("Unsupported range type: "+Tt(i))}return i.map(s=>(at(s)?WA:Mu)(s,e))}function Cgt(t,e){const n=e.config.projection||{},r={};for(const i in t)i!=="name"&&(r[i]=MI(t[i],i,e));for(const i in n)r[i]==null&&(r[i]=MI(n[i],i,e));e.addProjection(t.name,r)}function MI(t,e,n){return at(t)?t.map(r=>MI(r,e,n)):It(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:ot("Unsupported parameter object: "+Tt(t)):t}const Gc="top",y1="left",b1="right",rm="bottom",I5e="center",Sgt="vertical",Agt="start",kgt="middle",Tgt="end",II="index",B9="label",Dgt="offset",wv="perc",Lgt="perc2",$u="value",GE="guide-label",z9="guide-title",Rgt="group-title",Fgt="group-subtitle",e_e="symbol",YA="gradient",$I="discrete",PI="size",Ogt="shape",Mgt="fill",Igt="stroke",$gt="strokeWidth",Pgt="strokeDash",Ngt="opacity",j9=[PI,Ogt,Mgt,Igt,$gt,Pgt,Ngt],VE={name:1,style:1,interactive:1},Yr={value:0},Pu={value:1},IL="group",$5e="rect",U9="rule",Bgt="symbol",q0="text";function k2(t){return t.type=IL,t.interactive=t.interactive||!1,t}function Hl(t,e){const n=(r,i)=>mc(t[r],mc(e[r],i));return n.isVertical=r=>Sgt===mc(t.direction,e.direction||(r?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>mc(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>mc(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>mc(t.columns,mc(e.columns,+n.isVertical(!0))),n}function P5e(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function zgt(t,e,n){const r=e.config.style[n];return r&&r[t]}function $L(t,e,n){return`item.anchor === '${Agt}' ? ${t} : item.anchor === '${Tgt}' ? ${e} : ${n}`}const q9=$L(Tt(y1),Tt(b1),Tt(I5e));function jgt(t){const e=t("tickBand");let n=t("tickOffset"),r,i;return e?e.signal?(r={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${e.signal}) === 'extent'`},It(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=t("bandPosition"),i=t("tickExtra")),{extra:i,band:r,offset:n}}function N5e(t,e){return e?t?It(t)?Object.assign({},t,{offset:N5e(t.offset,e)}):{value:t,offset:e}:e:t}function mu(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=g1(t.encode,e,VE)):t.interactive=!1,t}function Ugt(t,e,n,r){const i=Hl(t,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,d,c,f;s?(u=[0,1],d=[0,0],c=o,f=a):(u=[0,0],d=[1,0],c=a,f=o);const h={enter:l={opacity:Yr,x:Yr,y:Yr,width:Fo(c),height:Fo(f)},update:ir({},l,{opacity:Pu,fill:{gradient:e,start:u,stop:d}}),exit:{opacity:Yr}};return oa(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),mu({type:$5e,role:mmt,encode:h},r)}function qgt(t,e,n,r,i){const s=Hl(t,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,d,c,f,h="";o?(u="y",c="y2",d="x",f="width",h="1-"):(u="x",c="x2",d="y",f="height");const p={opacity:Yr,fill:{scale:e,field:$u}};p[u]={signal:h+"datum."+wv,mult:l},p[d]=Yr,p[c]={signal:h+"datum."+Lgt,mult:l},p[f]=Fo(a);const g={enter:p,update:ir({},p,{opacity:Pu}),exit:{opacity:Yr}};return oa(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),mu({type:$5e,role:hmt,key:$u,from:i,encode:g},r)}const Hgt=`datum.${wv}<=0?"${y1}":datum.${wv}>=1?"${b1}":"${I5e}"`,Ggt=`datum.${wv}<=0?"${rm}":datum.${wv}>=1?"${Gc}":"${kgt}"`;function t_e(t,e,n,r){const i=Hl(t,e),s=i.isVertical(),o=Fo(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,d,c,f,h="";const p={enter:u={opacity:Yr},update:d={opacity:Pu,text:{field:B9}},exit:{opacity:Yr}};return oa(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:mc(t.labelLimit,e.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=d.baseline={signal:Ggt},c="y",f="x",h="1-"):(u.align=d.align={signal:Hgt},u.baseline={value:"top"},c="x",f="y"),u[c]=d[c]={signal:h+"datum."+wv,mult:a},u[f]=d[f]=o,o.offset=mc(t.labelOffset,e.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+II}:void 0,mu({type:q0,role:v5e,style:GE,key:$u,from:r,encode:p,overlap:l},n)}function Vgt(t,e,n,r,i){const s=Hl(t,e),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),d=s("symbolOffset"),c={data:"value"},f=`(${i}) ? datum.${Dgt} : datum.${PI}`,h=u?Fo(u):{field:PI},p=`datum.${II}`,g=`max(1, ${i})`;let b,y,v,w,E;h.mult=.5,b={enter:y={opacity:Yr,x:{signal:f,mult:.5,offset:d},y:h},update:v={opacity:Pu,x:y.x,y:y.y},exit:{opacity:Yr}};let S=null,T=null;t.fill||(S=e.symbolBaseFillColor,T=e.symbolBaseStrokeColor),oa(b,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),j9.forEach(O=>{t[O]&&(v[O]=y[O]={scale:t[O],field:$u})});const D=mu({type:Bgt,role:gmt,key:$u,from:c,clip:u?!0:void 0,encode:b},n.symbols),k=Fo(d);k.offset=s("labelOffset"),b={enter:y={opacity:Yr,x:{signal:f,offset:k},y:h},update:v={opacity:Pu,text:{field:B9},x:y.x,y:y.y},exit:{opacity:Yr}},oa(b,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=mu({type:q0,role:v5e,style:GE,key:$u,from:c,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:Yr,height:u?Fo(u):Yr,opacity:Yr},exit:{opacity:Yr},update:v={opacity:Pu,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${w}`,v.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:II}},k2({role:$9,from:r,encode:g1(b,o,VE),marks:[D,R],name:l,interactive:a,sort:E})}function Wgt(t,e){const n=Hl(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const H9='item.orient === "left"',G9='item.orient === "right"',PL=`(${H9} || ${G9})`,Ygt=`datum.vgrad && ${PL}`,Xgt=$L('"top"','"bottom"','"middle"'),Zgt=$L('"right"','"left"','"center"'),Kgt=`datum.vgrad && ${G9} ? (${Zgt}) : (${PL} && !(datum.vgrad && ${H9})) ? "left" : ${q9}`,Jgt=`item._anchor || (${PL} ? "middle" : "start")`,Qgt=`${Ygt} ? (${H9} ? -90 : 90) : 0`,e0t=`${PL} ? (datum.vgrad ? (${G9} ? "bottom" : "top") : ${Xgt}) : "top"`;function t0t(t,e,n,r){const i=Hl(t,e),s={enter:{opacity:Yr},update:{opacity:Pu,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Yr}};return oa(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Jgt},angle:{signal:Qgt},align:{signal:Kgt},baseline:{signal:e0t},text:t.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),mu({type:q0,role:ymt,style:z9,from:r,encode:s},n)}function n0t(t,e){let n;return It(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+n_e(t.path)+")":t.sphere&&(n="geoShape("+n_e(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function n_e(t){return It(t)&&t.signal?t.signal:Tt(t)}function B5e(t){const e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===IL?$9:e||M9}function r0t(t){return{marktype:t.type,name:t.name||void 0,role:t.role||B5e(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function i0t(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function V9(t,e){const n=oDe(t.type);n||ot("Unrecognized transform type: "+Tt(t.type));const r=FL(n.type.toLowerCase(),null,z5e(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function z5e(t,e,n){const r={},i=t.params.length;for(let s=0;s<i;++s){const o=t.params[s];r[o.name]=s0t(o,e,n)}return r}function s0t(t,e,n){const r=t.type,i=e[t.name];if(r==="index")return o0t(t,e,n);if(i===void 0){t.required&&ot("Missing required "+Tt(e.type)+" parameter: "+Tt(t.name));return}else{if(r==="param")return a0t(t,e,n);if(r==="projection")return n.projectionRef(e[t.name])}return t.array&&!vo(i)?i.map(s=>r_e(t,s,n)):r_e(t,i,n)}function r_e(t,e,n){const r=t.type;if(vo(e))return s_e(r)?ot("Expression references can not be signals."):mO(r)?n.fieldRef(e):o_e(r)?n.compareRef(e):n.signalRef(e.signal);{const i=t.expr||mO(r);return i&&l0t(e)?n.exprRef(e.expr,e.as):i&&u0t(e)?S2(e.field,e.as):s_e(r)?qd(e,n):c0t(r)?xn(n.getData(e).values):mO(r)?S2(e):o_e(r)?n.compareRef(e):e}}function o0t(t,e,n){return Nt(e.from)||ot('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function a0t(t,e,n){const r=e[t.name];return t.array?(at(r)||ot("Expected an array of sub-parameters. Instead: "+Tt(r)),r.map(i=>i_e(t,i,n))):i_e(t,r,n)}function i_e(t,e,n){const r=t.params.length;let i;for(let o=0;o<r;++o){i=t.params[o];for(const a in i.key)if(i.key[a]!==e[a]){i=null;break}if(i)break}i||ot("Unsupported parameter: "+Tt(e));const s=ir(z5e(i,e,n),i.key);return xn(n.add(igt(s)))}const l0t=t=>t&&t.expr,u0t=t=>t&&t.field,c0t=t=>t==="data",s_e=t=>t==="expr",mO=t=>t==="field",o_e=t=>t==="compare";function d0t(t,e,n){let r,i,s,o,a;return t?(r=t.facet)&&(e||ot("Only group marks can be faceted."),r.field!=null?o=a=XA(r,n):(t.data?a=xn(n.getData(t.data).aggregate):(s=V9(ir({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=XA(r,n),o=a=xn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=xn(n.add(Hc(null,[{}]))),o||(o=XA(t,n)),{key:i,pulse:o,parent:a}}function XA(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:xn(e.getData(t.data).output)}function b0(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}b0.fromEntries=function(t,e){const n=e.length,r=e[n-1],i=e[n-2];let s=e[0],o=null,a=1;for(s&&s.type==="load"&&(s=e[1]),t.add(e[0]);a<n;++a)e[a].params.pulse=xn(e[a-1]),t.add(e[a]),e[a].type==="aggregate"&&(o=e[a]);return new b0(t,s,i,r,o)};function j5e(t){return Nt(t)?t:null}function a_e(t,e,n){const r=OL(n.op,n.field);let i;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===r)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((i=n.op.signal)?t.signalRef(i):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(r))}function Tw(t,e,n,r,i,s,o){const a=e[n]||(e[n]={}),l=Mmt(s);let u=j5e(i),d,c;if(u!=null&&(t=e.scope,u=u+(l?"|"+l:""),d=a[u]),!d){const f=s?{field:FI,pulse:e.countsRef(t,i,s)}:{field:t.fieldRef(i),pulse:xn(e.output)};l&&(f.sort=t.sortRef(s)),c=t.add(FL(r,void 0,f)),o&&(e.index[i]=c),d=xn(c),u!=null&&(a[u]=d)}return d}b0.prototype={countsRef(t,e,n){const r=this,i=r.counts||(r.counts={}),s=j5e(e);let o,a,l;return s!=null&&(t=r.scope,o=i[s]),o?n&&n.field&&a_e(t,o.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:xn(r.output)},n&&n.field&&a_e(t,l,n),a=t.add(S5e(l)),o=t.add(Hc({pulse:xn(a)})),o={agg:a,ref:xn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return xn(this.values)},extentRef(t,e){return Tw(t,this,"extent","extent",e,!1)},domainRef(t,e){return Tw(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return Tw(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return Tw(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Tw(t,this,"indata","tupleindex",e,!0,!0)}};function f0t(t,e,n){const r=t.from.facet,i=r.name,s=XA(r,e);let o;r.name||ot("Facet must have a name: "+Tt(r)),r.data||ot("Facet must reference a data set: "+Tt(r)),r.field?o=e.add(T5e({field:e.fieldRef(r.field),pulse:s})):r.groupby?o=e.add(Xmt({key:e.keyRef(r.groupby),group:xn(e.proxy(n.parent)),pulse:s})):ot("Facet must specify groupby or field: "+Tt(r));const a=e.fork(),l=a.add(Hc()),u=a.add(U0({pulse:xn(l)}));a.addData(i,new b0(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}function h0t(t,e,n){const r=e.add(T5e({pulse:n.pulse})),i=e.fork();i.add(U0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(t).toRuntime()}}function U5e(t,e,n){const r=t.remove,i=t.insert,s=t.toggle,o=t.modify,a=t.values,l=e.add(P3()),u="if("+t.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(c=>c??"null").join(",")+"),0)",d=qd(u,e);l.update=d.$expr,l.params=d.$params}function NL(t,e){const n=B5e(t),r=t.type===IL,i=t.from&&t.from.facet,s=t.overlap;let o=t.layout||n===$9||n===I9,a,l,u,d,c,f,h;const p=n===M9||o||i,g=d0t(t.from,r,e);l=e.add(Wmt({key:g.key||(t.key?S2(t.key):void 0),pulse:g.pulse,clean:!r}));const b=xn(l);l=u=e.add(Hc({pulse:b})),l=e.add(egt({markdef:r0t(t),interactive:i0t(t.interactive,e),clip:n0t(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:xn(l)}));const y=xn(l);l=d=e.add(k5e(E5e(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),l.params.parent=e.encode(),t.transform&&t.transform.forEach(T=>{const D=V9(T,e),k=D.metadata;(k.generates||k.changes)&&ot("Mark transforms should not generate new data."),k.nomod||(d.params.mod=!0),D.params.pulse=xn(l),e.add(l=D)}),t.sort&&(l=e.add(ugt({sort:e.compareRef(t.sort),pulse:xn(l)})));const v=xn(l);(i||o)&&(o=e.add(L5e({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:v})),f=xn(o));const w=e.add(A5e({mark:y,pulse:f||v}));h=xn(w),r&&(p&&(a=e.operators,a.pop(),o&&a.pop()),e.pushState(v,f||h,b),i?f0t(t,e,g):p?h0t(t,e,g):e.parse(t),e.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=p0t(s,h,e));const E=e.add(D5e({pulse:h})),S=e.add(U0({pulse:xn(E)},void 0,e.parent()));t.name!=null&&(c=t.name,e.addData(c,new b0(e,u,E,S)),t.on&&t.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&ot("Marks only support modify triggers."),U5e(T,e,c)}))}function p0t(t,e,n){const r=t.method,i=t.bound,s=t.separation,o={separation:vo(s)?n.signalRef(s.signal):s,method:vo(r)?n.signalRef(r.signal):r,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),i){const a=i.tolerance;o.boundTolerance=vo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return xn(n.add(rgt(o)))}function m0t(t,e){const n=e.config.legend,r=t.encode||{},i=Hl(t,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let d=0,c,f,h;j9.forEach(w=>t[w]?(u[w]=t[w],d=d||t[w]):0),d||ot("Missing valid scale for legend.");const p=g0t(t,e.scaleType(d)),g={title:t.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},b=xn(e.add(Hc(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=xn(e.add(Jmt(f={type:p,scale:e.scaleRef(d),count:e.objectProperty(i("tickCount")),limit:e.property(i("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===YA?(h=[Ugt(t,d,n,r.gradient),t_e(t,n,r.labels,v)],f.count=f.count||e.signalRef(`max(2,2*floor((${Zg(i.gradientLength())})/100))`)):p===$I?h=[qgt(t,d,n,r.gradient,v),t_e(t,n,r.labels,v)]:(c=Wgt(t,n),h=[Vgt(t,n,r,v,Zg(c.columns))],f.size=v0t(t,e,h[0].marks)),h=[k2({role:pmt,from:b,encode:y,marks:h,layout:c,interactive:a})],g.title&&h.push(t0t(t,n,r.title,b)),NL(k2({role:fmt,from:b,encode:g1(b0t(i,t,n),s,VE),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),e)}function g0t(t,e){let n=t.type||e_e;return!t.type&&y0t(t)===1&&(t.fill||t.stroke)&&(n=G8(e)?YA:TM(e)?$I:e_e),n!==YA?n:TM(e)?$I:YA}function y0t(t){return j9.reduce((e,n)=>e+(t[n]?1:0),0)}function b0t(t,e,n){const r={enter:{},update:{}};return oa(r,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),r}function v0t(t,e,n){const r=Zg(l_e("size",t,n)),i=Zg(l_e("strokeWidth",t,n)),s=Zg(x0t(n[1].encode,e,GE));return qd(`max(ceil(sqrt(${r})+${i}),${s})`,e)}function l_e(t,e,n){return e[t]?`scale("${e[t]}",datum)`:P5e(t,n[0].encode)}function x0t(t,e,n){return P5e("fontSize",t)||zgt("fontSize",e,n)}const w0t=`item.orient==="${y1}"?-90:item.orient==="${b1}"?90:0`;function _0t(t,e){t=Nt(t)?{text:t}:t;const n=Hl(t,e.config.title),r=t.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},d=xn(e.add(Hc(null,[u])));return l.push(S0t(t,n,E0t(t),d)),t.subtitle&&l.push(A0t(t,n,r.subtitle,d)),NL(k2({role:bmt,from:d,encode:C0t(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),e)}function E0t(t){const e=t.encode;return e&&e.title||ir({name:t.name,interactive:t.interactive,style:t.style},e)}function C0t(t,e){const n={enter:{},update:{}};return oa(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:q9},angle:{signal:w0t},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),g1(n,e,VE)}function S0t(t,e,n,r){const i={value:0},s=t.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return oa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),mu({type:q0,role:vmt,style:Rgt,from:r,encode:o},n)}function A0t(t,e,n,r){const i={value:0},s=t.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return oa(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),mu({type:q0,role:xmt,style:Fgt,from:r,encode:o},n)}function k0t(t,e){const n=[];t.transform&&t.transform.forEach(r=>{n.push(V9(r,e))}),t.on&&t.on.forEach(r=>{U5e(r,e,t.name)}),e.addDataPipeline(t.name,T0t(t,e,n))}function T0t(t,e,n){const r=[];let i=null,s=!1,o=!1,a,l,u,d,c;for(t.values?vo(t.values)||VA(t.format)?(r.push(u_e(e,t)),r.push(i=fg())):r.push(i=fg({$ingest:t.values,$format:t.format})):t.url?VA(t.url)||VA(t.format)?(r.push(u_e(e,t)),r.push(i=fg())):r.push(i=fg({$request:t.url,$format:t.format})):t.source&&(i=a=Pt(t.source).map(f=>xn(e.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)d=n[l],c=d.metadata,!i&&!c.source&&r.push(i=fg()),r.push(d),c.generates&&(o=!0),c.modifies&&!o&&(s=!0),c.source?i=d:c.changes&&(i=null);return a&&(u=a.length-1,r[0]=agt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,fg())),i||r.push(fg()),r.push(U0({})),r}function fg(t){const e=Hc({},t);return e.metadata={source:!0},e}function u_e(t,e){return Qmt({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const q5e=t=>t===rm||t===Gc,BL=(t,e,n)=>vo(t)?F0t(t.signal,e,n):t===y1||t===Gc?e:n,Oo=(t,e,n)=>vo(t)?L0t(t.signal,e,n):q5e(t)?e:n,kc=(t,e,n)=>vo(t)?R0t(t.signal,e,n):q5e(t)?n:e,H5e=(t,e,n)=>vo(t)?O0t(t.signal,e,n):t===Gc?{value:e}:{value:n},D0t=(t,e,n)=>vo(t)?M0t(t.signal,e,n):t===b1?{value:e}:{value:n},L0t=(t,e,n)=>G5e(`${t} === '${Gc}' || ${t} === '${rm}'`,e,n),R0t=(t,e,n)=>G5e(`${t} !== '${Gc}' && ${t} !== '${rm}'`,e,n),F0t=(t,e,n)=>W9(`${t} === '${y1}' || ${t} === '${Gc}'`,e,n),O0t=(t,e,n)=>W9(`${t} === '${Gc}'`,e,n),M0t=(t,e,n)=>W9(`${t} === '${b1}'`,e,n),G5e=(t,e,n)=>(e=e!=null?Fo(e):e,n=n!=null?Fo(n):n,c_e(e)&&c_e(n)?(e=e?e.signal||Tt(e.value):null,n=n?n.signal||Tt(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[ir({test:t},e)].concat(n||[])),c_e=t=>t==null||Object.keys(t).length===1,W9=(t,e,n)=>({signal:`${t} ? (${Cb(e)}) : (${Cb(n)})`}),I0t=(t,e,n,r,i)=>({signal:(r!=null?`${t} === '${y1}' ? (${Cb(r)}) : `:"")+(n!=null?`${t} === '${rm}' ? (${Cb(n)}) : `:"")+(i!=null?`${t} === '${b1}' ? (${Cb(i)}) : `:"")+(e!=null?`${t} === '${Gc}' ? (${Cb(e)}) : `:"")+"(null)"}),Cb=t=>vo(t)?t.signal:t==null?null:Tt(t),$0t=(t,e)=>e===0?0:vo(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Mb=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function Zy(t,e,n,r){let i;if(e&&Yt(e,t))return e[t];if(Yt(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=t[5].toLowerCase()+t.slice(6)}return r[z9][i]}else if(t.startsWith("label")){switch(t){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=t[5].toLowerCase()+t.slice(6)}return r[GE][i]}return null}function d_e(t){const e={};for(const n of t)if(n)for(const r in n)e[r]=1;return Object.keys(e)}function P0t(t,e){var n=e.config,r=n.style,i=n.axis,s=e.scaleType(t.scale)==="band"&&n.axisBand,o=t.orient,a,l,u;if(vo(o)){const c=d_e([n.axisX,n.axisY]),f=d_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of c)a[u]=Oo(o,Zy(u,n.axisX,i,r),Zy(u,n.axisY,i,r));l={};for(u of f)l[u]=I0t(o.signal,Zy(u,n.axisTop,i,r),Zy(u,n.axisBottom,i,r),Zy(u,n.axisLeft,i,r),Zy(u,n.axisRight,i,r))}else a=o===Gc||o===rm?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?ir({},i,a,l,s):i}function N0t(t,e,n,r){const i=Hl(t,e),s=t.orient;let o,a;const l={enter:o={opacity:Yr},update:a={opacity:Pu},exit:{opacity:Yr}};oa(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=f_e(t,0),d=f_e(t,1);return o.x=a.x=Oo(s,u,Yr),o.x2=a.x2=Oo(s,d),o.y=a.y=kc(s,u,Yr),o.y2=a.y2=kc(s,d),mu({type:U9,role:amt,from:r,encode:l},n)}function f_e(t,e){return{scale:t.scale,range:e}}function B0t(t,e,n,r,i){const s=Hl(t,e),o=t.orient,a=t.gridScale,l=BL(o,1,-1),u=z0t(t.offset,l);let d,c,f;const h={enter:d={opacity:Yr},update:f={opacity:Pu},exit:c={opacity:Yr}};oa(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:t.scale,field:$u,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Oo(o,{signal:"height"},{signal:"width"}),b=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:ir(g,{mult:l,offset:u});return d.x=f.x=Oo(o,p,b),d.y=f.y=kc(o,p,b),d.x2=f.x2=kc(o,y),d.y2=f.y2=Oo(o,y),c.x=Oo(o,p),c.y=kc(o,p),mu({type:U9,role:lmt,key:$u,from:r,encode:h},n)}function z0t(t,e){if(e!==1)if(!It(t))t=vo(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=ir({},t);for(;n.mult!=null;)if(It(n.mult))n=n.mult=ir({},n.mult);else return n.mult=vo(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function j0t(t,e,n,r,i,s){const o=Hl(t,e),a=t.orient,l=BL(a,-1,1);let u,d,c;const f={enter:u={opacity:Yr},update:c={opacity:Pu},exit:d={opacity:Yr}};oa(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Fo(i);h.mult=l;const p={scale:t.scale,field:$u,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return c.y=u.y=Oo(a,Yr,p),c.y2=u.y2=Oo(a,h),d.x=Oo(a,p),c.x=u.x=kc(a,Yr,p),c.x2=u.x2=kc(a,h),d.y=kc(a,p),mu({type:U9,role:cmt,key:$u,from:r,encode:f},n)}function gO(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}function U0t(t,e,n,r,i,s){const o=Hl(t,e),a=t.orient,l=t.scale,u=BL(a,-1,1),d=Zg(o("labelFlush")),c=Zg(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=d===0||!!d,g;const b=Fo(i);b.mult=u,b.offset=Fo(o("labelPadding")||0),b.offset.mult=u;const y={scale:l,field:$u,band:.5,offset:N5e(s.offset,o("labelOffset"))},v=Oo(a,p?gO(l,d,'"left"','"right"','"center"'):{value:"center"},D0t(a,"left","right")),w=Oo(a,H5e(a,"bottom","top"),p?gO(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),E=gO(l,d,`-(${c})`,c,0);p=p&&c;const S={opacity:Yr,x:Oo(a,y,b),y:kc(a,y,b)},T={enter:S,update:g={opacity:Pu,text:{field:B9},x:S.x,y:S.y,align:v,baseline:w},exit:{opacity:Yr,x:S.x,y:S.y}};oa(T,{dx:!f&&p?Oo(a,E):null,dy:!h&&p?kc(a,E):null}),oa(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const D=o("labelBound");let k=o("labelOverlap");return k=k||D?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:D?{scale:l,orient:a,tolerance:D}:null}:void 0,g.align!==v&&(g.align=Mb(g.align,v)),g.baseline!==w&&(g.baseline=Mb(g.baseline,w)),mu({type:q0,role:umt,style:GE,key:$u,from:r,encode:T,overlap:k},n)}function q0t(t,e,n,r){const i=Hl(t,e),s=t.orient,o=BL(s,-1,1);let a,l;const u={enter:a={opacity:Yr,anchor:Fo(i("titleAnchor",null)),align:{signal:q9}},update:l=ir({},a,{opacity:Pu,text:Fo(t.title)}),exit:{opacity:Yr}},d={signal:`lerp(range("${t.scale}"), ${$L(0,1,.5)})`};return l.x=Oo(s,d),l.y=kc(s,d),a.angle=Oo(s,Yr,$0t(o,90)),a.baseline=Oo(s,H5e(s,rm,Gc),{value:rm}),l.angle=a.angle,l.baseline=a.baseline,oa(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),H0t(i,s,u,n),u.update.align=Mb(u.update.align,a.align),u.update.angle=Mb(u.update.angle,a.angle),u.update.baseline=Mb(u.update.baseline,a.baseline),mu({type:q0,role:dmt,style:z9,from:r,encode:u},n)}function H0t(t,e,n,r){const i=(a,l)=>a!=null?(n.update[l]=Mb(Fo(a),n.update[l]),!1):!ub(l,r),s=i(t("titleX"),"x"),o=i(t("titleY"),"y");n.enter.auto=o===s?Fo(o):Oo(e,Fo(o),Fo(s))}function G0t(t,e){const n=P0t(t,e),r=t.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=Hl(t,n),u=jgt(l),d={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:t.title!=null},c=xn(e.add(Hc({},[d]))),f=xn(e.add(Vmt({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),h=[];let p;return d.grid&&h.push(B0t(t,n,r.grid,f,u)),d.ticks&&(p=l("tickSize"),h.push(j0t(t,n,r.ticks,f,p,u))),d.labels&&(p=d.ticks?p:0,h.push(U0t(t,n,r.labels,f,p,u))),d.domain&&h.push(N0t(t,n,r.domain,c)),d.title&&h.push(q0t(t,n,r.title,c)),NL(k2({role:omt,from:c,encode:g1(V0t(l,t),i,VE),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),e)}function V0t(t,e){const n={enter:{},update:{}};return oa(n,{orient:t("orient"),offset:t("offset")||0,position:mc(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function V5e(t,e,n){const r=Pt(t.signals),i=Pt(t.scales);return n||r.forEach(s=>C5e(s,e)),Pt(t.projections).forEach(s=>Cgt(s,e)),i.forEach(s=>fgt(s,e)),Pt(t.data).forEach(s=>k0t(s,e)),i.forEach(s=>hgt(s,e)),(n||r).forEach(s=>Gmt(s,e)),Pt(t.axes).forEach(s=>G0t(s,e)),Pt(t.marks).forEach(s=>NL(s,e)),Pt(t.legends).forEach(s=>m0t(s,e)),t.title&&_0t(t.title,e),e.parseLambdas(),e}const W0t=t=>g1({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function Y0t(t,e){const n=e.config,r=xn(e.root=e.add(P3())),i=X0t(t,n);i.forEach(u=>C5e(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const s=e.add(Hc()),o=e.add(k5e(E5e(W0t(t.encode),IL,I9,t.style,e,{pulse:xn(s)}))),a=e.add(L5e({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:r,pulse:xn(o)}));e.operators.pop(),e.pushState(xn(o),xn(a),null),V5e(t,e,i),e.operators.push(a);let l=e.add(A5e({mark:r,pulse:xn(a)}));return l=e.add(D5e({pulse:xn(l)})),l=e.add(U0({pulse:xn(l)})),e.addData("root",new b0(e,s,s,l)),e}function Dw(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function X0t(t,e){const n=o=>mc(t[o],e[o]),r=[Dw("background",n("background")),Dw("autosize",rmt(n("autosize"))),Dw("padding",smt(n("padding"))),Dw("width",n("width")||0),Dw("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Pt(t.signals).forEach(o=>{Yt(i,o.name)?o=ir(i[o.name],o):r.push(o),s[o.name]=o}),Pt(e.signals).forEach(o=>{!Yt(s,o.name)&&!Yt(i,o.name)&&r.push(o)}),r}function W5e(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function h_e(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}W5e.prototype=h_e.prototype={parse(t){return V5e(t,this)},fork(){return new h_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof RI?xn(t):t;return this.add(ogt({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const r in e.index)n(e.index[r],t,"index:"+r)}return this},pushState(t,e,n){this._encode.push(xn(this.add(U0({pulse:t})))),this._parent.push(e),this._lookup.push(n?xn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Hr(this._parent)},encode(){return Hr(this._encode)},lookup(){return Hr(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(Nt(t))return S2(t,e);t.signal||ot("Unsupported field reference: "+Tt(t));const n=t.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};e&&(i.as=e),this.field[n]=r=xn(this.add(Zmt(i)))}return r},compareRef(t){let e=!1;const n=s=>vo(s)?(e=!0,this.signalRef(s.signal)):Imt(s)?(e=!0,this.exprRef(s.expr)):s,r=Pt(t.field).map(n),i=Pt(t.order).map(n);return e?xn(this.add(Qwe({fields:r,orders:i}))):Kwe(r,i)},keyRef(t,e){let n=!1;const r=s=>vo(s)?(n=!0,xn(i[s.signal])):s,i=this.signals;return t=Pt(t).map(r),n?xn(this.add(Kmt({fields:t,flat:e}))):Rmt(t,e)},sortRef(t){if(!t)return t;const e=OL(t.op,t.field),n=t.order||Fmt;return n.signal?xn(this.add(Qwe({fields:e,orders:this.signalRef(n.signal)}))):Kwe(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},hasOwnSignal(t){return Yt(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&ot("Duplicate signal name: "+Tt(t));const n=e instanceof RI?e:this.add(P3(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||ot("Unrecognized signal name: "+Tt(t)),this.signals[t]},signalRef(t){return this.signals[t]?xn(this.signals[t]):(Yt(this.lambdas,t)||(this.lambdas[t]=this.add(P3(null))),xn(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const r=t[e],i=qd(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!It(t)?t:this.signalRef(t.signal||Y9(t))},exprRef(t,e){const n={expr:qd(t,this)};return e&&(n.expr.$name=e),xn(this.add(Ymt(n)))},addBinding(t,e){this.bindings||ot("Nested signals do not support binding: "+Tt(t)),this.bindings.push(ir({signal:t},e))},addScaleProj(t,e){Yt(this.scales,t)&&ot("Duplicate scale or projection name: "+Tt(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,lgt(e))},addProjection(t,e){this.addScaleProj(t,sgt(e))},getScale(t){return this.scales[t]||ot("Unrecognized scale name: "+Tt(t)),this.scales[t]},scaleRef(t){return xn(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return Yt(this.data,t)&&ot("Duplicate data set name: "+Tt(t)),this.data[t]=e},getData(t){return this.data[t]||ot("Undefined data set name: "+Tt(t)),this.data[t]},addDataPipeline(t,e){return Yt(this.data,t)&&ot("Duplicate data set name: "+Tt(t)),this.addData(t,b0.fromEntries(this,e))}};function Y9(t){return(at(t)?Z0t:K0t)(t)}function Z0t(t){const e=t.length;let n="[";for(let r=0;r<e;++r){const i=t[r];n+=(r>0?",":"")+(It(i)?i.signal||Y9(i):Tt(i))}return n+"]"}function K0t(t){let e="{",n=0,r,i;for(r in t)i=t[r],e+=(++n>1?",":"")+Tt(r)+":"+(It(i)?i.signal||Y9(i):Tt(i));return e+"}"}function J0t(){const t="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:t,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:t,fontSize:10},"guide-title":{fill:i,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Q0t(t,e,n){return It(t)||ot("Input Vega specification must be an object."),e=a1(J0t(),e,t.config),Y0t(t,new W5e(e,n)).toRuntime()}var eyt="5.30.0";ir(lv,Jet,Ast,iot,qat,Plt,cct,qut,fct,$ct,Vct,Qct);const tyt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:to,CanvasHandler:$E,CanvasRenderer:Kk,DATE:$l,DAY:ka,DAYOFYEAR:jd,Dataflow:Fb,Debug:Q3e,Error:CP,EventStream:VD,Gradient:ILe,GroupItem:uL,HOURS:fu,Handler:gN,HybridHandler:ARe,HybridRenderer:BM,Info:J3e,Item:lL,MILLISECONDS:Ic,MINUTES:hu,MONTH:Ra,Marks:pu,MultiPulse:HP,None:K3e,Operator:Hi,Parameters:GD,Pulse:jp,QUARTER:Il,RenderType:Dp,Renderer:IE,ResourceLoader:ULe,SECONDS:ju,SVGHandler:hRe,SVGRenderer:_N,SVGStringRenderer:SRe,Scenegraph:sRe,TIME_UNITS:$P,Transform:rt,View:d5e,WEEK:yo,Warn:SP,YEAR:na,accessor:ql,accessorFields:La,accessorName:Os,array:Pt,ascending:BD,bandwidthNRD:YP,bin:uDe,bootstrapCI:cDe,boundClip:$Re,boundContext:RE,boundItem:MM,boundMark:tRe,boundStroke:xh,changeset:B0,clampRange:cTe,codegenExpression:NOe,compare:LP,constant:Ia,cumulativeLogNormal:e8,cumulativeNormal:YD,cumulativeUniform:i8,dayofyear:ETe,debounce:RP,defaultLocale:BP,definition:oDe,densityLogNormal:QP,densityNormal:XP,densityUniform:r8,domChild:mo,domClear:Tu,domCreate:kp,domFind:mN,dotbin:dDe,error:ot,expressionFunction:Us,extend:ir,extent:zd,extentIndex:dTe,falsy:ap,fastmap:u1,field:Bu,flush:fTe,font:pL,fontFamily:ME,fontSize:Jd,format:AA,formatLocale:Mk,formats:UP,hasOwnProperty:Yt,id:vE,identity:Ma,inferType:XTe,inferTypes:ZTe,ingest:vi,inherits:Lt,inrange:vb,interpolate:V8,interpolateColors:oL,interpolateRange:wLe,intersect:FRe,intersectBoxLine:xb,intersectPath:eN,intersectPoint:tN,intersectRule:HLe,isArray:at,isBoolean:gm,isDate:zp,isFunction:sr,isIterable:hTe,isNumber:ui,isObject:It,isRegExp:pTe,isString:Nt,isTuple:qD,key:FP,lerp:mTe,lineHeight:em,loader:jD,locale:WTe,logger:AP,lruCache:gTe,markup:wN,merge:yTe,mergeConfig:a1,multiLineOffset:fN,one:o1,pad:bTe,panLinear:iTe,panLog:sTe,panPow:oTe,panSymlog:aTe,parse:Q0t,parseExpression:w9,parseSelector:bm,path:QD,pathCurves:K8,pathEqual:PRe,pathParse:hv,pathRectangle:NLe,pathRender:h2,pathSymbols:PLe,pathTrail:BLe,peek:Hr,point:gL,projection:jN,quantileLogNormal:t8,quantileNormal:XD,quantileUniform:s8,quantiles:VP,quantizeInterpolator:_Le,quarter:lTe,quartiles:WP,get random(){return Uu},randomInteger:eet,randomKDE:KP,randomLCG:QQe,randomLogNormal:hDe,randomMixture:pDe,randomNormal:ZP,randomUniform:mDe,read:QTe,regressionConstant:o8,regressionExp:yDe,regressionLinear:a8,regressionLoess:xDe,regressionLog:gDe,regressionPoly:vDe,regressionPow:bDe,regressionQuad:l8,renderModule:yL,repeat:qw,resetDefaultLocale:ZJe,resetSVGClipId:jLe,resetSVGDefIds:Hit,responseType:JTe,runtimeContext:JOe,sampleCurve:KD,sampleLogNormal:JP,sampleNormal:WD,sampleUniform:n8,scale:ci,sceneEqual:EN,sceneFromJSON:rRe,scenePickVisit:qk,sceneToJSON:nRe,sceneVisit:$c,sceneZOrder:nN,scheme:W8,serializeXML:wRe,setHybridRendererOptions:zit,setRandom:KQe,span:xE,splitAccessPath:Zd,stringValue:Tt,textMetrics:su,timeBin:zTe,timeFloor:LTe,timeFormatLocale:c2,timeInterval:c1,timeOffset:OTe,timeSequence:$Te,timeUnitSpecifier:_Te,timeUnits:PP,toBoolean:OP,toDate:MP,toNumber:Ta,toSet:Mc,toString:IP,transform:aDe,transforms:lv,truncate:vTe,truthy:zu,tupleid:wn,typeParsers:EM,utcFloor:RTe,utcInterval:d1,utcOffset:MTe,utcSequence:PTe,utcdayofyear:ATe,utcquarter:uTe,utcweek:kTe,version:eyt,visitArray:dp,week:CTe,writeConfig:l1,zero:vp,zoomLinear:kP,zoomLog:TP,zoomPow:Ok,zoomSymlog:DP},Symbol.toStringTag,{value:"Module"}));function nyt(t,e,n){let r;e.x2&&(e.x?(n&&t.x>t.x2&&(r=t.x,t.x=t.x2,t.x2=r),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(r=t.y,t.y=t.y2,t.y2=r),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var ryt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},iyt={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},syt={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const oyt=Array.prototype.slice,hg=(t,e,n)=>{const r=n?n(e[0]):e[0];return r[t].apply(r,oyt.call(e,1))},ayt=(t,e,n,r,i,s,o)=>new Date(t,e||0,n??1,r||0,i||0,s||0,o||0);var lyt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:ayt,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return hg("join",arguments)},indexof:function(){return hg("indexOf",arguments)},lastindexof:function(){return hg("lastIndexOf",arguments)},slice:function(){return hg("slice",arguments)},reverse:t=>t.slice().reverse(),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return hg("substring",arguments,String)},split:function(){return hg("split",arguments,String)},replace:function(){return hg("replace",arguments,String)},trim:t=>String(t).trim(),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const uyt=["view","item","group","xy","x","y"],NI=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&NI.add(setImmediate);const cyt={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:ryt[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,r=t(e.object);n&&(t.memberDepth+=1);const i=t(e.property);if(n&&(t.memberDepth-=1),NI.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(t,e)=>{const n=e.arguments;let r=e.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[r]||lyt[r]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>iyt[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>syt[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,r)=>{t.memberDepth+=1;const i=t(r.key);return t.memberDepth-=1,NI.has(t(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=t(r.value),n},{})};function Lw(t,e,n,r,i,s){const o=a=>cyt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(e),o.params=n,o.datum=r,o.event=i,o.item=s,uyt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(t)}var dyt={operator(t,e){const n=e.ast,r=t.functions;return i=>Lw(n,r,i)},parameter(t,e){const n=e.ast,r=t.functions;return(i,s)=>Lw(n,r,s,i)},event(t,e){const n=e.ast,r=t.functions;return i=>Lw(n,r,void 0,void 0,i)},handler(t,e){const n=e.ast,r=t.functions;return(i,s)=>{const o=s.item&&s.item.datum;return Lw(n,r,i,o,s)}},encode(t,e){const{marktype:n,channels:r}=e,i=t.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,d;for(const c in r)d=Lw(r[c].ast,i,a,l,void 0,o),o[c]!==d&&(o[c]=d,u=1);return n!=="rule"&&nyt(o,r,s),u}}};const fyt="vega-lite",hyt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',pyt="5.23.0",myt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],gyt="https://vega.github.io/vega-lite/",yyt="Vega-Lite is a concise high-level language for interactive visualization.",byt=["vega","chart","visualization"],vyt="build/vega-lite.js",xyt="build/vega-lite.min.js",wyt="build/vega-lite.min.js",_yt="build/src/index",Eyt="build/src/index.d.ts",Cyt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Syt=["bin","build","src","vega-lite*","tsconfig.json"],Ayt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},kyt={type:"git",url:"https://github.com/vega/vega-lite.git"},Tyt="BSD-3-Clause",Dyt={url:"https://github.com/vega/vega-lite/issues"},Lyt={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},Ryt={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},Fyt={vega:"^5.24.0"},Oyt={node:">=18"},Myt="yarn@1.22.22",Iyt={name:fyt,author:hyt,version:pyt,collaborators:myt,homepage:gyt,description:yyt,keywords:byt,main:vyt,unpkg:xyt,jsdelivr:wyt,module:_yt,types:Eyt,bin:Cyt,files:Syt,scripts:Ayt,repository:kyt,license:Tyt,bugs:Dyt,devDependencies:Lyt,dependencies:Ryt,peerDependencies:Fyt,engines:Oyt,packageManager:Myt};function X9(t){return Ct(t,"or")}function Z9(t){return Ct(t,"and")}function K9(t){return Ct(t,"not")}function ZA(t,e){if(K9(t))ZA(t.not,e);else if(Z9(t))for(const n of t.and)ZA(n,e);else if(X9(t))for(const n of t.or)ZA(n,e);else e(t)}function Ib(t,e){return K9(t)?{not:Ib(t.not,e)}:Z9(t)?{and:t.and.map(n=>Ib(n,e))}:X9(t)?{or:t.or.map(n=>Ib(n,e))}:e(t)}const Vn=structuredClone;function Y5e(t){throw new Error(t)}function _v(t,e){const n={};for(const r of e)Yt(t,r)&&(n[r]=t[r]);return n}function Ol(t,e){const n={...t};for(const r of e)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>Ni(t)).join(",")})`};function Mr(t){if(ui(t))return t;const e=Nt(t)?t:Ni(t);if(e.length<250)return e;let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function BI(t){return t===!1||t===null}function Er(t,e){return t.includes(e)}function Ev(t,e){let n=0;for(const[r,i]of t.entries())if(e(i,r,n++))return!0;return!1}function J9(t,e){let n=0;for(const[r,i]of t.entries())if(!e(i,r,n++))return!1;return!0}function X5e(t,...e){for(const n of e)$yt(t,n??{});return t}function $yt(t,e){for(const n of _t(e))l1(t,n,e[n],!0)}function Sd(t,e){const n=[],r={};let i;for(const s of t)i=e(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Pyt(t,e){const n=_t(t),r=_t(e);if(n.length!==r.length)return!1;for(const i of n)if(t[i]!==e[i])return!1;return!0}function Z5e(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Q9(t,e){for(const n of t)if(e.has(n))return!0;return!1}function zI(t){const e=new Set;for(const n of t){const i=Zd(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)e.add(o)}return e}function eB(t,e){return t===void 0||e===void 0?!0:Q9(zI(t),zI(e))}function Pi(t){return _t(t).length===0}const _t=Object.keys,ra=Object.values,im=Object.entries;function T2(t){return t===!0||t===!1}function ds(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function $_(t,e){return K9(t)?`!(${$_(t.not,e)})`:Z9(t)?`(${t.and.map(n=>$_(n,e)).join(") && (")})`:X9(t)?`(${t.or.map(n=>$_(n,e)).join(") || (")})`:e(t)}function N3(t,e){if(e.length===0)return!0;const n=e.shift();return n in t&&N3(t[n],e)&&delete t[n],Pi(t)}function WE(t){return t.charAt(0).toUpperCase()+t.substr(1)}function tB(t,e="datum"){const n=Zd(t),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Tt).join("][")}]`;r.push(`${e}${s}`)}return r.join(" && ")}function K5e(t,e="datum"){return`${e}[${Tt(Zd(t).join("."))}]`}function Di(t){return`datum['${t.replaceAll("'","\\'")}']`}function Nyt(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Hu(t){return`${Zd(t).map(Nyt).join("\\.")}`}function v0(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function v1(t){return`${Zd(t).join(".")}`}function Cv(t){return t?Zd(t).length:0}function zs(...t){return t.find(e=>e!==void 0)}let J5e=42;function Q5e(t){const e=++J5e;return t?String(t)+e:e}function Byt(){J5e=42}function e4e(t){return t4e(t)?t:`__${t}`}function t4e(t){return t.startsWith("__")}function D2(t){if(t!==void 0)return(t%360+360)%360}function zL(t){return ui(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}const p_e=Object.getPrototypeOf(structuredClone({}));function tu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor.name!==e.constructor.name)return!1;let n,r;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!tu(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const s of t.entries())if(!e.has(s[0]))return!1;for(const s of t.entries())if(!tu(s[1],e.get(s[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const s of t.entries())if(!e.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&t.valueOf!==p_e.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&t.toString!==p_e.toString)return t.toString()===e.toString();const i=Object.keys(t);if(n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!tu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Ni(t){const e=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(e.includes(r))throw new TypeError("Converting circular structure to JSON");const o=e.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return e.splice(o,1),`{${s}}`}(t)}function Ct(t,e){return It(t)&&Yt(t,e)&&t[e]!==void 0}const eh="row",th="column",jL="facet",fs="x",No="y",Vc="x2",nf="y2",vm="xOffset",x1="yOffset",Wc="radius",_h="radius2",Yu="theta",Eh="theta2",Yc="latitude",Xc="longitude",Zc="latitude2",Gu="longitude2",xm="time",Nl="color",rf="fill",sf="stroke",Bl="shape",Ch="size",H0="angle",Sh="opacity",wm="fillOpacity",_m="strokeOpacity",Em="strokeWidth",Cm="strokeDash",YE="text",Sv="order",XE="detail",UL="key",x0="tooltip",qL="href",HL="url",GL="description",zyt={x:1,y:1,x2:1,y2:1},n4e={theta:1,theta2:1,radius:1,radius2:1};function r4e(t){return Yt(n4e,t)}const nB={longitude:1,longitude2:1,latitude:1,latitude2:1};function i4e(t){switch(t){case Yc:return"y";case Zc:return"y2";case Xc:return"x";case Gu:return"x2"}}function s4e(t){return Yt(nB,t)}const jyt=_t(nB),rB={...zyt,...n4e,...nB,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function $b(t){return t===Nl||t===rf||t===sf}const o4e={row:1,column:1,facet:1},Iu=_t(o4e),iB={...rB,...o4e},Uyt=_t(iB),{order:oGt,detail:aGt,tooltip:lGt,...qyt}=iB,{row:uGt,column:cGt,facet:dGt,...Hyt}=qyt;function Gyt(t){return Yt(Hyt,t)}function a4e(t){return Yt(iB,t)}const Vyt=[Vc,nf,Zc,Gu,Eh,_h];function l4e(t){return G0(t)!==t}function G0(t){switch(t){case Vc:return fs;case nf:return No;case Zc:return Yc;case Gu:return Xc;case Eh:return Yu;case _h:return Wc}return t}function sm(t){if(r4e(t))switch(t){case Yu:return"startAngle";case Eh:return"endAngle";case Wc:return"outerRadius";case _h:return"innerRadius"}return t}function of(t){switch(t){case fs:return Vc;case No:return nf;case Yc:return Zc;case Xc:return Gu;case Yu:return Eh;case Wc:return _h}}function zl(t){switch(t){case fs:case Vc:return"width";case No:case nf:return"height"}}function u4e(t){switch(t){case fs:return"xOffset";case No:return"yOffset";case Vc:return"x2Offset";case nf:return"y2Offset";case Yu:return"thetaOffset";case Wc:return"radiusOffset";case Eh:return"theta2Offset";case _h:return"radius2Offset"}}function sB(t){switch(t){case fs:return"xOffset";case No:return"yOffset"}}function Wyt(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const Yyt=_t(rB),{x:fGt,y:hGt,x2:pGt,y2:mGt,xOffset:gGt,yOffset:yGt,latitude:bGt,longitude:vGt,latitude2:xGt,longitude2:wGt,theta:_Gt,theta2:EGt,radius:CGt,radius2:SGt,...oB}=rB,Xyt=_t(oB),aB={x:1,y:1},Ah=_t(aB);function js(t){return Yt(aB,t)}const lB={theta:1,radius:1},Zyt=_t(lB);function VL(t){return t==="width"?fs:No}const c4e={xOffset:1,yOffset:1};function ZE(t){return Yt(c4e,t)}const Kyt={time:1};function yO(t){return t in Kyt}const{text:AGt,tooltip:kGt,href:TGt,url:DGt,description:LGt,detail:RGt,key:FGt,order:OGt,...d4e}=oB,Jyt=_t(d4e);function Qyt(t){return Yt(oB,t)}function ebt(t){switch(t){case Nl:case rf:case sf:case Ch:case Bl:case Sh:case Em:case Cm:return!0;case wm:case _m:case H0:case xm:return!1}}const f4e={...aB,...lB,...c4e,...d4e},uB=_t(f4e);function af(t){return Yt(f4e,t)}function tbt(t,e){return rbt(t)[e]}const h4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:MGt,...nbt}=h4e;function rbt(t){switch(t){case Nl:case rf:case sf:case GL:case XE:case UL:case x0:case qL:case Sv:case Sh:case wm:case _m:case Em:case jL:case eh:case th:return h4e;case fs:case No:case vm:case x1:case Yc:case Xc:case xm:return nbt;case Vc:case nf:case Zc:case Gu:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ch:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Cm:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Bl:return{point:"always",geoshape:"always"};case YE:return{text:"always"};case H0:return{point:"always",square:"always",text:"always"};case HL:return{image:"always"};case Yu:return{text:"always",arc:"always"};case Wc:return{text:"always",arc:"always"};case Eh:case _h:return{arc:"always"}}}function bO(t){switch(t){case fs:case No:case Yu:case Wc:case vm:case x1:case Ch:case H0:case Em:case Sh:case wm:case _m:case xm:case Vc:case nf:case Eh:case _h:return;case jL:case eh:case th:case Bl:case Cm:case YE:case x0:case qL:case HL:case GL:return"discrete";case Nl:case rf:case sf:return"flexible";case Yc:case Xc:case Zc:case Gu:case XE:case UL:case Sv:return}}const ibt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},sbt={count:1,min:1,max:1};function dh(t){return Ct(t,"argmin")}function Sm(t){return Ct(t,"argmax")}function cB(t){return Nt(t)&&Yt(ibt,t)}const obt=new Set(["count","valid","missing","distinct"]);function WL(t){return Nt(t)&&obt.has(t)}function abt(t){return Nt(t)&&Er(["min","max"],t)}const lbt=new Set(["count","sum","distinct","valid","missing"]),ubt=new Set(["mean","average","median","q1","q3","min","max"]);function p4e(t){return gm(t)&&(t=sR(t,void 0)),"bin"+_t(t).map(e=>YL(t[e])?ds(`_${e}_${im(t[e])}`):ds(`_${e}_${t[e]}`)).join("")}function Ji(t){return t===!0||V0(t)&&!t.binned}function Xo(t){return t==="binned"||V0(t)&&t.binned===!0}function V0(t){return It(t)}function YL(t){return Ct(t,"param")}function m_e(t){switch(t){case eh:case th:case Ch:case Nl:case rf:case sf:case Em:case Sh:case wm:case _m:case Bl:return 6;case Cm:return 4;default:return 10}}function KE(t){return Ct(t,"expr")}function Zo(t,{level:e}={level:0}){const n=_t(t||{}),r={};for(const i of n)r[i]=e===0?Jl(t[i]):Zo(t[i],{level:e-1});return r}function m4e(t){const{anchor:e,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:d,subtitleFontStyle:c,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...g}=t,b={...g,...a?{fill:a}:{}},y={...e?{anchor:e}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...d?{subtitleFontSize:d}:{},...c?{subtitleFontStyle:c}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=_v(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:w,nonMarkTitleProperties:y,subtitle:v}}function mp(t){return Nt(t)||at(t)&&Nt(t[0])}function cn(t){return Ct(t,"signal")}function W0(t){return Ct(t,"step")}function cbt(t){return at(t)?!1:Ct(t,"fields")&&!Ct(t,"data")}function dbt(t){return at(t)?!1:Ct(t,"fields")&&Ct(t,"data")}function Vf(t){return at(t)?!1:Ct(t,"field")&&Ct(t,"data")}const fbt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},hbt=_t(fbt),pbt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jI=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function g4e(t){const e=at(t.condition)?t.condition.map(g_e):g_e(t.condition);return{...Jl(t),condition:e}}function Jl(t){if(KE(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function g_e(t){if(KE(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function as(t){if(KE(t)){const{expr:e,...n}=t;return{signal:e,...n}}return cn(t)?t:t!==void 0?{value:t}:void 0}function mbt(t){return cn(t)?t.signal:Tt(t)}function y_e(t){return cn(t)?t.signal:Tt(t.value)}function Cc(t){return cn(t)?t.signal:t==null?null:Tt(t)}function gbt(t,e,n){for(const r of n){const i=Hd(r,e.markDef,e.config);i!==void 0&&(t[r]=as(i))}return t}function y4e(t){return[].concat(t.type,t.style??[])}function $i(t,e,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Ct(e,i)?e[i]:e[t]!==void 0?e[t]:s&&(!i||i===t)?void 0:Hd(t,e,n,r)}function Hd(t,e,n,{vgChannel:r}={}){const i=UI(t,e,n.style);return zs(r?i:void 0,i,r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function UI(t,e,n){return b4e(t,y4e(e),n)}function b4e(t,e,n){e=Pt(e);let r;for(const i of e){const s=n[i];Ct(s,t)&&(r=s[t])}return r}function v4e(t,e){return Pt(t).reduce((n,r)=>(n.field.push(Ft(r,e)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function x4e(t,e){const n=[...t];return e.forEach(r=>{for(const i of n)if(tu(i,r))return;n.push(r)}),n}function w4e(t,e){return tu(t,e)||!e?t:t?[...Pt(t),...Pt(e)].join(", "):e}function _4e(t,e){const n=t.value,r=e.value;if(n==null||r===null)return{explicit:t.explicit,value:null};if((mp(n)||cn(n))&&(mp(r)||cn(r)))return{explicit:t.explicit,value:w4e(n,r)};if(mp(n)||cn(n))return{explicit:t.explicit,value:n};if(mp(r)||cn(r))return{explicit:t.explicit,value:r};if(!mp(n)&&!cn(n)&&!mp(r)&&!cn(r))return{explicit:t.explicit,value:x4e(n,r)};throw new Error("It should never reach here")}function dB(t){return`Invalid specification ${Ni(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const ybt='Autosize "fit" only works for single views and layered views.';function b_e(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function v_e(t){const e=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function x_e(t){return t?`Dropping "fit-${t}" because spec has discrete ${zl(t)}.`:'Dropping "fit" because spec has discrete size.'}function fB(t){return`Unknown field for ${t}. Cannot calculate view size.`}function w_e(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function bbt(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function vbt(t){return`The "nearest" transform is not supported for ${t} marks.`}function E4e(t){return`Selection not supported for ${t} yet.`}function xbt(t){return`Cannot find a selection named "${t}".`}const wbt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_bt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Ebt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Cbt(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function Sbt(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const Abt="The same selection must be used to override scale domains in a layered view.",kbt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Tbt(t){return`Unknown repeated value "${t}".`}function __e(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const Dbt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",hB="Animation involving facet, layer, or concat is currently unsupported.";function Lbt(t){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Tt(t)}.`}function Rbt(t,e,n,r){return(t.length?"Multiple ":"No ")+`matching ${Tt(e)} encoding found for selection ${Tt(n.param)}. Using "field": ${Tt(r)}.`}const Fbt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Obt(t){return`Unrecognized parse "${t}".`}function E_e(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const Mbt="Attempt to add the same child twice.";function Ibt(t){return`Ignoring an invalid transform: ${Ni(t)}.`}const $bt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function C_e(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function Pbt(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${Ni(e)} is overridden by a child projection ${Ni(n)}.`}const Nbt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Bbt(t){return`${t}Offset dropped because ${t} is continuous`}function zbt(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${Ni(n)}}.`}function C4e(t){return`Invalid field type "${t}".`}function jbt(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function Ubt(t){return`Invalid aggregation operator "${t}".`}function S4e(t,e){const{fill:n,stroke:r}=e;return`Dropping color ${t} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function qbt(t){return`Position range does not support relative band size for ${t}.`}function qI(t,e){return`Dropping ${Ni(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const Hbt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function XL(t,e,n){return`${t} dropped as it is incompatible with "${e}".`}function Gbt(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function Vbt(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Wbt(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Ybt(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function vO(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function Xbt(t){return`The ${t} for range marks cannot be an expression`}function Zbt(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Kbt(t,e){return`Specified orient "${t}" overridden with "${e}".`}function Jbt(t){return`Cannot use the scale property "${t}" with non-color channel.`}function Qbt(t){return`Cannot use the relative band size with ${t} scale.`}function evt(t){return`Using unaggregated domain with raw field has no effect (${Ni(t)}).`}function tvt(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function nvt(t){return`Unaggregated domain is currently unsupported for log scale (${Ni(t)}).`}function rvt(t){return`Cannot apply size to non-oriented mark "${t}".`}function ivt(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function svt(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function A4e(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function k4e(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function ovt(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ni(n)} and ${Ni(r)}). Using ${Ni(n)}.`}function avt(t,e,n,r){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ni(n)} and ${Ni(r)}). Using the union of the two domains.`}function lvt(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function uvt(t){return`Dropping sort property ${Ni(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const S_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cvt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",dvt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fvt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function hvt(t){return`Cannot stack "${t}" if there is already "${t}2".`}function pvt(t){return`Stack is applied to a non-linear scale (${t}).`}function mvt(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function B3(t,e){return`Invalid ${t}: ${Ni(e)}.`}function gvt(t){return`Dropping day from datetime ${Ni(t)} as day cannot be combined with other units.`}function yvt(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function bvt(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function vvt(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function A_e(t){return`1D error band does not support ${t}.`}function T4e(t){return`Channel ${t} is required for "binned" bin.`}function xvt(t){return`Channel ${t} should not be used with "binned" bin.`}function wvt(t){return`Domain for ${t} is required for threshold scale.`}const D4e=AP(SP);let w0=D4e;function _vt(t){return w0=t,w0}function Evt(){return w0=D4e,w0}function pB(...t){w0.error(...t)}function At(...t){w0.warn(...t)}function Cvt(...t){w0.debug(...t)}function Y0(t){if(t&&It(t)){for(const e of gB)if(Ct(t,e))return!0}return!1}const L4e=["january","february","march","april","may","june","july","august","september","october","november","december"],Svt=L4e.map(t=>t.substr(0,3)),R4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Avt=R4e.map(t=>t.substr(0,3));function kvt(t){if(zL(t)&&(t=+t),ui(t))return t>4&&At(B3("quarter",t)),t-1;throw new Error(B3("quarter",t))}function Tvt(t){if(zL(t)&&(t=+t),ui(t))return t-1;{const e=t.toLowerCase(),n=L4e.indexOf(e);if(n!==-1)return n;const r=e.substr(0,3),i=Svt.indexOf(r);if(i!==-1)return i;throw new Error(B3("month",t))}}function Dvt(t){if(zL(t)&&(t=+t),ui(t))return t%7;{const e=t.toLowerCase(),n=R4e.indexOf(e);if(n!==-1)return n;const r=e.substr(0,3),i=Avt.indexOf(r);if(i!==-1)return i;throw new Error(B3("day",t))}}function mB(t,e){const n=[];if(e&&t.day!==void 0&&_t(t).length>1&&(At(gvt(t)),t=Vn(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){const r=e?Tvt(t.month):t.month;n.push(r)}else if(t.quarter!==void 0){const r=e?kvt(t.quarter):t.quarter;n.push(ui(r)?r*3:`${r}*3`)}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){const r=e?Dvt(t.day):t.day;n.push(ui(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=t[r];n.push(typeof i>"u"?0:i)}return n}function _0(t){const n=mB(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function Lvt(t){const n=mB(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function Rvt(t){const e=mB(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const F4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},gB=_t(F4e);function Fvt(t){return Yt(F4e,t)}function X0(t){return It(t)?t.binned:O4e(t)}function O4e(t){return t&&t.startsWith("binned")}function yB(t){return t.startsWith("utc")}function Ovt(t){return t.substring(3)}const Mvt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ZL(t){return gB.filter(e=>I4e(t,e))}function M4e(t){const e=ZL(t);return e[e.length-1]}function I4e(t,e){const n=t.indexOf(e);return!(n<0||n>0&&e==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&e==="day"&&t.charAt(n+3)==="o"||n>0&&e==="year"&&t.charAt(n-1)==="f")}function Ivt(t,e,{end:n}={end:!1}){const r=tB(e),i=yB(t)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of gB)I4e(t,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),Lvt(a)}function $4e(t){if(!t)return;const e=ZL(t);return`timeUnitSpecifier(${Ni(e)}, ${Ni(Mvt)})`}function $vt(t,e,n){if(!t)return;const r=$4e(t);return`${n||yB(t)?"utc":"time"}Format(${e}, ${r})`}function Mo(t){if(!t)return;let e;return Nt(t)?O4e(t)?e={unit:t.substring(6),binned:!0}:e={unit:t}:It(t)&&(e={...t,...t.unit?{unit:t.unit}:{}}),yB(e.unit)&&(e.utc=!0,e.unit=Ovt(e.unit)),e}function Pvt(t){const{utc:e,...n}=Mo(t);return n.unit?(e?"utc":"")+_t(n).map(r=>ds(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(e?"utc":"")+"timeunit"+_t(n).map(r=>ds(`_${r}_${n[r]}`)).join("")}function P4e(t,e=n=>n){const n=Mo(t),r=M4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=N4e(r,n.step),a={...i,[o]:+i[o]+s};return`${e(_0(a))} - ${e(_0(i))}`}}const Nvt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Bvt(t){return Yt(Nvt,t)}function N4e(t,e=1){if(Bvt(t))return{part:t,step:e};switch(t){case"day":case"dayofyear":return{part:"date",step:e};case"quarter":return{part:"month",step:e*3};case"week":return{part:"date",step:e*7}}}function zvt(t){return Ct(t,"param")}function bB(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function vB(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function xB(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function wB(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function _B(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function EB(t){if(t!=null&&t.field){if(at(t.range)&&t.range.length===2)return!0;if(cn(t.range))return!0}return!1}function CB(t){return!!(t!=null&&t.field)&&(at(t.oneOf)||at(t.in))}function jvt(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function B4e(t){return CB(t)||bB(t)||EB(t)||vB(t)||wB(t)||xB(t)||_B(t)}function pd(t,e){return oR(t,{timeUnit:e,wrapTime:!0})}function Uvt(t,e){return t.map(n=>pd(n,e))}function z4e(t,e=!0){const{field:n}=t,r=Mo(t.timeUnit),{unit:i,binned:s}=r||{},o=Ft(t,{expr:"datum"}),a=i?`time(${s?o:Ivt(i,n)})`:o;if(bB(t))return`${a}===${pd(t.equal,i)}`;if(vB(t)){const l=t.lt;return`${a}<${pd(l,i)}`}else if(wB(t)){const l=t.gt;return`${a}>${pd(l,i)}`}else if(xB(t)){const l=t.lte;return`${a}<=${pd(l,i)}`}else if(_B(t)){const l=t.gte;return`${a}>=${pd(l,i)}`}else{if(CB(t))return`indexof([${Uvt(t.oneOf,i).join(",")}], ${a}) !== -1`;if(jvt(t))return KL(a,t.valid);if(EB(t)){const{range:l}=Zo(t),u=cn(l)?{signal:`${l.signal}[0]`}:l[0],d=cn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&d!==null&&e)return"inrange("+a+", ["+pd(u,i)+", "+pd(d,i)+"])";const c=[];return u!==null&&c.push(`${a} >= ${pd(u,i)}`),d!==null&&c.push(`${a} <= ${pd(d,i)}`),c.length>0?c.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ni(t)}`)}function KL(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function qvt(t){return B4e(t)&&t.timeUnit?{...t,timeUnit:Mo(t.timeUnit)}:t}const JE={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Hvt(t){return t==="quantitative"||t==="temporal"}function j4e(t){return t==="ordinal"||t==="nominal"}const E0=JE.quantitative,SB=JE.ordinal,Av=JE.temporal,AB=JE.nominal,w1=JE.geojson;function Gvt(t){if(t)switch(t=t.toLowerCase(),t){case"q":case E0:return"quantitative";case"t":case Av:return"temporal";case"o":case SB:return"ordinal";case"n":case AB:return"nominal";case w1:return"geojson"}}const Ko={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},HI={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Vvt(t,e){const n=HI[t],r=HI[e];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Wvt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function k_e(t){return Wvt[t]}const U4e=new Set(["linear","log","pow","sqrt","symlog"]),q4e=new Set([...U4e,"time","utc"]);function H4e(t){return U4e.has(t)}const G4e=new Set(["quantile","quantize","threshold"]),Yvt=new Set([...q4e,...G4e,"sequential","identity"]),Xvt=new Set(["ordinal","bin-ordinal","point","band"]);function $o(t){return Xvt.has(t)}function Pc(t){return Yvt.has(t)}function Ad(t){return q4e.has(t)}function kv(t){return G4e.has(t)}const Zvt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Kvt(t){return!Nt(t)&&Ct(t,"name")}function V4e(t){return Ct(t,"param")}function Jvt(t){return Ct(t,"unionWith")}function Qvt(t){return It(t)&&"field"in t}const e1t={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:IGt,domain:$Gt,range:PGt,rangeMax:NGt,rangeMin:BGt,scheme:zGt,...t1t}=e1t,n1t=_t(t1t);function GI(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Ad(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return Ad(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ad(t);case"nice":return Ad(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return Pc(t)&&!Er(["log","time","utc","threshold","quantile"],t)}}function W4e(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return $b(t)?void 0:Jbt(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function r1t(t,e){return Er([SB,AB],e)?t===void 0||$o(t):e===Av?Er([Ko.TIME,Ko.UTC,void 0],t):e===E0?H4e(t)||kv(t)||t===void 0:!0}function i1t(t,e,n=!1){if(!af(t))return!1;switch(t){case fs:case No:case vm:case x1:case Yu:case Wc:return Ad(e)||e==="band"?!0:e==="point"?!n:!1;case xm:return Er(["linear","band"],e);case Ch:case Em:case Sh:case wm:case _m:case H0:return Ad(e)||kv(e)||Er(["band","point","ordinal"],e);case Nl:case rf:case sf:return e!=="band";case Cm:case Bl:return e==="ordinal"||kv(e)}}function s1t(t){return It(t)&&"value"in t}const al={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Y4e=al.arc,JL=al.area,QL=al.bar,o1t=al.image,eR=al.line,tR=al.point,a1t=al.rect,z3=al.rule,X4e=al.text,kB=al.tick,l1t=al.trail,TB=al.circle,DB=al.square,Z4e=al.geoshape;function Am(t){return["line","area","trail"].includes(t)}function L2(t){return["rect","bar","image","arc","tick"].includes(t)}const u1t=new Set(_t(al));function Gd(t){return Ct(t,"type")}const c1t=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],d1t=["fill","fillOpacity"],f1t=[...c1t,...d1t],h1t={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},T_e=_t(h1t),xO=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],p1t={area:["line","point"],bar:xO,rect:xO,line:["point"],tick:["bandSize","thickness",...xO]},m1t={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},g1t={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},K4e=_t(g1t);function C0(t){return Ct(t,"band")}const y1t={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},b1t=5,LB={binSpacing:0,continuousBandSize:b1t,minBandSize:.25,timeUnitBandPosition:.5},v1t={...LB,binSpacing:1},x1t={...LB,thickness:1};function w1t(t){return Gd(t)?t.type:t}function J4e(t,{isPath:e}){return t===void 0||t==="break-paths-show-path-domains"?e?"break-paths-show-domains":"filter":t===null?"show":t}function RB({markDef:t,config:e,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Pc(r)||i)return"always-valid";const s=J4e($i("invalid",t,e),{isPath:Am(t.type)});return((l=(a=e.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function _1t(t){return t==="break-paths-filter-domains"||t==="break-paths-show-domains"}function Q4e({scaleName:t,scale:e,mode:n}){const r=`domain('${t}')`;if(!e||!t)return;const i=`${r}[0]`,s=`peek(${r})`,o=e.domainHasZero();return o==="definitely"?{scale:t,value:0}:o==="maybe"?{signal:`scale('${t}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${t}', ${n==="zeroOrMin"?i:s})`}}function eMe({scaleChannel:t,channelDef:e,scale:n,scaleName:r,markDef:i,config:s}){var d;const o=n==null?void 0:n.get("type"),a=Bc(e),l=WL(a==null?void 0:a.aggregate),u=RB({scaleChannel:t,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const c=((d=s.scale.invalid)==null?void 0:d[t])??"zero-or-min";return{test:KL(Ft(a,{expr:"datum"}),!1),...E1t(c,n,r)}}}function E1t(t,e,n){if(s1t(t)){const{value:r}=t;return cn(r)?{signal:r.signal}:{value:r}}return Q4e({scale:e,scaleName:n,mode:"zeroOrMin"})}function FB(t){const{channel:e,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=t,a=G0(e),l=OB(t),u=eMe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function C1t(t){const{datum:e}=t;return Y0(e)?_0(e):`${Ni(e)}`}function Kg(t,e,n,r){const i={};if(e&&(i.scale=e),lf(t)){const{datum:s}=t;Y0(s)?i.signal=_0(s):cn(s)?i.signal=s.signal:KE(s)?i.signal=s.expr:i.value=s}else i.field=Ft(t,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function j3({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!cn(o)&&0<o&&o<1?"datum":void 0,l=Ft(e,{expr:a,suffix:i}),u=n!==void 0?Ft(n,{expr:a}):Ft(e,{suffix:s,expr:a}),d={};if(o===0||o===1){d.scale=t;const c=o===0?l:u;d.field=c}else{const c=cn(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;d.signal=`scale("${t}", ${c})`}return r&&(d.offset=r),d}function S1t({scaleName:t,fieldDef:e}){const n=Ft(e,{expr:"datum"}),r=Ft(e,{expr:"datum",suffix:"end"});return`abs(scale("${t}", ${r}) - scale("${t}", ${n}))`}function OB({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:d}){if(e){if(Yn(e)){const c=o==null?void 0:o.get("type");if(il(e)){d??(d=om({fieldDef:e,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=e;if(Ji(f)||d&&h&&p===Av)return a!=null&&a.impute?Kg(e,s,{binSuffix:"mid"},{offset:l}):d&&!$o(c)?j3({scaleName:s,fieldOrDatumDef:e,bandPosition:d,offset:l}):Kg(e,s,rC(e,t)?{binSuffix:"range"}:{},{offset:l});if(Xo(f)){if(kt(n))return j3({scaleName:s,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:d,offset:l});At(T4e(t===fs?Vc:nf))}}return Kg(e,s,$o(c)?{binSuffix:"range"}:{},{offset:l,band:c==="band"?d??e.bandPosition??.5:void 0})}else if(Nc(e)){const c=e.value,f=l?{offset:l}:{};return{...P_(t,c),...f}}}return sr(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function P_(t,e){return Er(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:Er(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:as(e)}function S0(t){return t&&t!=="number"&&t!=="time"}function tMe(t,e,n){return`${t}(${e}${n?`, ${Ni(n)}`:""})`}const A1t="  ";function MB({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(S0(n))return Sc({fieldOrDatumDef:t,format:e,formatType:n,expr:r,config:s});const o=nMe(t,r,i),a=Tv(t);if(e===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Sc({fieldOrDatumDef:t,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Sc({fieldOrDatumDef:t,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&kt(t)&&t.timeUnit===void 0)return Sc({fieldOrDatumDef:t,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Lv(t)){const d=T1t({field:o,timeUnit:kt(t)?(l=Mo(t.timeUnit))==null?void 0:l.unit:void 0,format:e,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Z0(t)&&((u=t.scale)==null?void 0:u.type)===Ko.UTC});return d?{signal:d}:void 0}if(e=VI({type:a,specifiedFormat:e,config:s,normalizeStack:i}),kt(t)&&Ji(t.bin)){const d=Ft(t,{expr:r,binSuffix:"end"});return{signal:QE(o,d,e,n,s)}}else return e||Tv(t)==="quantitative"?{signal:`${sMe(o,e)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function nMe(t,e,n){return kt(t)?n?`${Ft(t,{expr:e,suffix:"end"})}-${Ft(t,{expr:e,suffix:"start"})}`:Ft(t,{expr:e}):C1t(t)}function Sc({fieldOrDatumDef:t,format:e,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=nMe(t,r,i)),o!=="datum.value"&&kt(t)&&Ji(t.bin)){const a=Ft(t,{expr:r,binSuffix:"end"});return{signal:QE(o,a,e,n,s)}}return{signal:tMe(n,o,e)}}function rMe(t,e,n,r,i,s){var o;if(!(Nt(r)&&S0(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Tv(t)==="quantitative"&&(i.normalizedNumberFormatType&&Dv(t)&&t.stack==="normalize"||i.numberFormatType))){if(Dv(t)&&t.stack==="normalize"&&i.normalizedNumberFormat)return VI({type:"quantitative",config:i,normalizeStack:!0});if(Lv(t)){const a=kt(t)?(o=Mo(t.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:k1t({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return VI({type:e,specifiedFormat:n,config:i})}}function iMe(t,e,n){var r;if(t&&(cn(t)||t==="number"||t==="time"))return t;if(Lv(e)&&n!=="time"&&n!=="utc")return kt(e)&&((r=Mo(e==null?void 0:e.timeUnit))!=null&&r.utc)?"utc":"time"}function VI({type:t,specifiedFormat:e,config:n,normalizeStack:r}){if(Nt(e))return e;if(t===E0)return r?n.normalizedNumberFormat:n.numberFormat}function k1t({specifiedFormat:t,timeUnit:e,config:n,omitTimeFormatConfig:r}){return t||(e?{signal:$4e(e)}:r?void 0:n.timeFormat)}function sMe(t,e){return`format(${t}, "${e||""}")`}function D_e(t,e,n,r){return S0(n)?tMe(n,t,e):sMe(t,(Nt(e)?e:void 0)??r.numberFormat)}function QE(t,e,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return QE(t,e,i.numberFormat,i.numberFormatType,i);const s=D_e(t,n,r,i),o=D_e(e,n,r,i);return`${KL(t,!1)} ? "null" : ${s} + "${A1t}" + ${o}`}function T1t({field:t,timeUnit:e,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!e||n?!e&&r?`${r}(${t}, '${n}')`:(n=Nt(n)?n:i,`${s?"utc":"time"}Format(${t}, '${n}')`):$vt(e,t,s)}const nR="min",D1t={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function L_e(t){return Yt(D1t,t)}function L1t(t){return Ct(t,"encoding")}function nh(t){return t&&(t.op==="count"||Ct(t,"field"))}function oMe(t){return t&&at(t)}function eC(t){return Ct(t,"row")||Ct(t,"column")}function IB(t){return Ct(t,"header")}function rR(t){return Ct(t,"facet")}function R1t(t){return Ct(t,"param")}function F1t(t){return!Nt(t)&&Ct(t,"repeat")}function R_e(t){const{field:e,timeUnit:n,bin:r,aggregate:i}=t;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:e}}function $B(t){return Ct(t,"sort")}function om({fieldDef:t,fieldDef2:e,markDef:n,config:r}){if(Yn(t)&&t.bandPosition!==void 0)return t.bandPosition;if(kt(t)){const{timeUnit:i,bin:s}=t;if(i&&!e)return Hd("timeUnitBandPosition",n,r);if(Ji(s))return .5}}function aMe({channel:t,fieldDef:e,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,d,c;const a=zl(t),l=$i(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(kt(e)){const{timeUnit:f,bin:h}=e;if(f&&!n)return{band:Hd("timeUnitBandSize",r,i)};if(Ji(h)&&!$o(s))return{band:1}}if(L2(r.type))return s?$o(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(d=i[r.type])==null?void 0:d.continuousBandSize:(c=i[r.type])==null?void 0:c.discreteBandSize}function lMe(t,e,n,r){return Ji(t.bin)||t.timeUnit&&il(t)&&t.type==="temporal"?om({fieldDef:t,fieldDef2:e,markDef:n,config:r})!==void 0:!1}function uMe(t){return Ct(t,"sort")&&!Ct(t,"field")}function tC(t){return Ct(t,"condition")}function iR(t){const e=t==null?void 0:t.condition;return!!e&&!at(e)&&kt(e)}function nC(t){const e=t==null?void 0:t.condition;return!!e&&!at(e)&&Yn(e)}function O1t(t){const e=t==null?void 0:t.condition;return!!e&&(at(e)||Nc(e))}function kt(t){return Ct(t,"field")||(t==null?void 0:t.aggregate)==="count"}function Tv(t){return t==null?void 0:t.type}function lf(t){return Ct(t,"datum")}function Mp(t){return il(t)&&!q3(t)||U3(t)}function F_e(t){return il(t)&&t.type==="quantitative"&&!t.bin||U3(t)}function U3(t){return lf(t)&&ui(t.datum)}function Yn(t){return kt(t)||lf(t)}function il(t){return t&&(Ct(t,"field")||t.aggregate==="count")&&Ct(t,"type")}function Nc(t){return Ct(t,"value")}function Z0(t){return Ct(t,"scale")||Ct(t,"sort")}function Dv(t){return Ct(t,"axis")||Ct(t,"stack")||Ct(t,"impute")}function cMe(t){return Ct(t,"legend")}function dMe(t){return Ct(t,"format")||Ct(t,"formatType")}function M1t(t){return Ol(t,["legend","axis","header","scale"])}function I1t(t){return Ct(t,"op")}function Ft(t,e={}){let n=t.field;const r=e.prefix;let i=e.suffix,s="";if(P1t(t))n=e4e("count");else{let o;if(!e.nofn)if(I1t(t))o=t.op;else{const{bin:a,aggregate:l,timeUnit:u}=t;Ji(a)?(o=p4e(a),i=(e.binSuffix??"")+(e.suffix??"")):l?Sm(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):dh(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!X0(u)&&(o=Pvt(u),i=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(e.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),e.forAs?v1(n):e.expr?K5e(n,e.expr)+s:Hu(n)+s}function q3(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return kt(t)&&!!t.bin;case"temporal":return!1}throw new Error(C4e(t.type))}function $1t(t){var e;return Z0(t)&&kv((e=t.scale)==null?void 0:e.type)}function P1t(t){return t.aggregate==="count"}function N1t(t,e){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=t;if(s==="count")return e.countTitle;if(Ji(r))return`${n} (binned)`;if(i&&!X0(i)){const a=(o=Mo(i))==null?void 0:o.unit;if(a)return`${n} (${ZL(a).join("-")})`}else if(s)return Sm(s)?`${n} for max ${s.argmax}`:dh(s)?`${n} for min ${s.argmin}`:`${WE(s)} of ${n}`;return n}function B1t(t){const{aggregate:e,bin:n,timeUnit:r,field:i}=t;if(Sm(e))return`${i} for argmax(${e.argmax})`;if(dh(e))return`${i} for argmin(${e.argmin})`;const s=r&&!X0(r)?Mo(r):void 0,o=e||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Ji(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const fMe=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return B1t(t);default:return N1t(t,e)}};let hMe=fMe;function pMe(t){hMe=t}function z1t(){pMe(fMe)}function Pb(t,e,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=PB(t))==null?void 0:a.title;if(!kt(t))return i??t.title;const s=t,o=r?NB(s,e):void 0;return n?zs(i,s.title,o):i??s.title??o}function PB(t){if(Dv(t)&&t.axis)return t.axis;if(cMe(t)&&t.legend)return t.legend;if(IB(t)&&t.header)return t.header}function NB(t,e){return hMe(t,e)}function H3(t){if(dMe(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}else{const e=PB(t)??{},{format:n,formatType:r}=e;return{format:n,formatType:r}}}function j1t(t,e){var s;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if($B(t)&&at(t.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=t;if(i)return"temporal";if(r||n&&!Sm(n)&&!dh(n))return"quantitative";if(Z0(t)&&((s=t.scale)!=null&&s.type))switch(HI[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Bc(t){if(kt(t))return t;if(iR(t))return t.condition}function bo(t){if(Yn(t))return t;if(nC(t))return t.condition}function mMe(t,e,n,r={}){if(Nt(t)||ui(t)||gm(t)){const i=Nt(t)?"string":ui(t)?"number":"boolean";return At(zbt(e,i,t)),{value:t}}return Yn(t)?G3(t,e,n,r):nC(t)?{...t,condition:G3(t.condition,e,n,r)}:t}function G3(t,e,n,r){if(dMe(t)){const{format:i,formatType:s,...o}=t;if(S0(s)&&!n.customFormatTypes)return At(C_e(e)),G3(o,e,n,r)}else{const i=Dv(t)?"axis":cMe(t)?"legend":IB(t)?"header":null;if(i&&t[i]){const{format:s,formatType:o,...a}=t[i];if(S0(o)&&!n.customFormatTypes)return At(C_e(e)),G3({...t,[i]:a},e,n,r)}}return kt(t)?BB(t,e,r):U1t(t)}function U1t(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=ui(n)?"quantitative":Nt(n)?"nominal":Y0(n)?"temporal":void 0,{...t,type:e}}function BB(t,e,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=t,a={...t};if(!n&&r&&!cB(r)&&!Sm(r)&&!dh(r)&&(At(Ubt(r)),delete a.aggregate),i&&(a.timeUnit=Mo(i)),o&&(a.field=`${o}`),Ji(s)&&(a.bin=sR(s,e)),Xo(s)&&!js(e)&&At(xvt(e)),il(a)){const{type:l}=a,u=Gvt(l);l!==u&&(a.type=u),l!=="quantitative"&&WL(r)&&(At(jbt(l,r)),a.type="quantitative")}else if(!l4e(e)){const l=j1t(a,e);a.type=l}if(il(a)){const{compatible:l,warning:u}=q1t(a,e)||{};l===!1&&At(u)}if($B(a)&&Nt(a.sort)){const{sort:l}=a;if(L_e(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&L_e(u))return{...a,sort:{encoding:u,order:"descending"}}}if(IB(a)){const{header:l}=a;if(l){const{orient:u,...d}=l;if(u)return{...a,header:{...d,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function sR(t,e){return gm(t)?{maxbins:m_e(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?{...t,maxbins:m_e(e)}:t}const Ky={compatible:!0};function q1t(t,e){const n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case eh:case th:case jL:return q3(t)?Ky:{compatible:!1,warning:Vbt(e)};case fs:case No:case vm:case x1:case Nl:case rf:case sf:case YE:case XE:case UL:case x0:case qL:case HL:case H0:case Yu:case Wc:case GL:return Ky;case Xc:case Gu:case Yc:case Zc:return n!==E0?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:Ky;case Sh:case wm:case _m:case Em:case Ch:case Eh:case _h:case Vc:case nf:case xm:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:Ky;case Bl:case Cm:return!q3(t)&&!$1t(t)?{compatible:!1,warning:Wbt(e)}:Ky;case Sv:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ky}}function Lv(t){const{formatType:e}=H3(t);return e==="time"||!e&&H1t(t)}function H1t(t){return t&&(t.type==="temporal"||kt(t)&&!!t.timeUnit)}function oR(t,{timeUnit:e,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=e&&((l=Mo(e))==null?void 0:l.unit);let o=s||n==="temporal",a;return KE(t)?a=t.expr:cn(t)?a=t.signal:Y0(t)?(o=!0,a=_0(t)):(Nt(t)||ui(t))&&o&&(a=`datetime(${Ni(t)})`,Fvt(s)&&(ui(t)&&t<1e4||Nt(t)&&isNaN(Date.parse(t)))&&(a=_0({[s]:t}))),a?r&&o?`time(${a})`:a:i?void 0:Ni(t)}function gMe(t,e){const{type:n}=t;return e.map(r=>{const i=kt(t)&&!X0(t.timeUnit)?t.timeUnit:void 0,s=oR(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function rC(t,e){return Ji(t.bin)?af(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const O_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function iC(t){return t==null?void 0:t.condition}const yMe=["domain","grid","labels","ticks","title"],G1t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},bMe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},V1t={...bMe,style:1,labelExpr:1,encoding:1};function M_e(t){return Yt(V1t,t)}const W1t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},vMe=_t(W1t);function kh(t){return Ct(t,"mark")}class aR{constructor(e,n){this.name=e,this.run=n}hasMatchingType(e){return kh(e)?w1t(e.mark)===this.name:!1}}function Jg(t,e){const n=t&&t[e];return n?at(n)?Ev(n,r=>!!r.field):kt(n)||iR(n):!1}function xMe(t,e){const n=t&&t[e];return n?at(n)?Ev(n,r=>!!r.field):kt(n)||lf(n)||nC(n):!1}function wMe(t,e){if(js(e)){const n=t[e];if((kt(n)||lf(n))&&(j4e(n.type)||kt(n)&&n.timeUnit)){const r=sB(e);return xMe(t,r)}}return!1}function _Me(t){return Ev(Uyt,e=>{if(Jg(t,e)){const n=t[e];if(at(n))return Ev(n,r=>!!r.aggregate);{const r=Bc(n);return r&&!!r.aggregate}}return!1})}function EMe(t,e){const n=[],r=[],i=[],s=[],o={};return zB(t,(a,l)=>{if(kt(a)){const{field:u,aggregate:d,bin:c,timeUnit:f,...h}=a;if(d||f||c){const p=PB(a),g=p==null?void 0:p.title;let b=Ft(a,{forAs:!0});const y={...g?[]:{title:Pb(a,e,{allowDisabling:!0})},...h,field:b};if(d){let v;if(Sm(d)?(v="argmax",b=Ft({op:"argmax",field:d.argmax},{forAs:!0}),y.field=`${b}.${u}`):dh(d)?(v="argmin",b=Ft({op:"argmin",field:d.argmin},{forAs:!0}),y.field=`${b}.${u}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(v=d),v){const w={op:v,as:b};u&&(w.field=u),s.push(w)}}else if(n.push(b),il(a)&&Ji(c)){if(r.push({bin:c,field:u,as:b}),n.push(Ft(a,{binSuffix:"end"})),rC(a,l)&&n.push(Ft(a,{binSuffix:"range"})),js(l)){const v={field:`${b}_end`};o[`${l}2`]=v}y.bin="binned",l4e(l)||(y.type=E0)}else if(f&&!X0(f)){i.push({timeUnit:f,field:u,as:b});const v=il(a)&&a.type!==Av&&"time";v&&(l===YE||l===x0?y.formatType=v:Qyt(l)?y.legend={formatType:v,...y.legend}:js(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=t[l]}else o[l]=t[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Y1t(t,e,n){const r=tbt(e,n);if(r){if(r==="binned"){const i=t[e===Vc?fs:No];return!!(kt(i)&&kt(t[e])&&Xo(i.bin))}}else return!1;return!0}function X1t(t,e,n,r){const i={};for(const s of _t(t))a4e(s)||At(Gbt(s));for(let s of Yyt){if(!t[s])continue;const o=t[s];if(ZE(s)){const a=Wyt(s),l=i[a];if(kt(l)&&Hvt(l.type)&&kt(o)&&!l.timeUnit){At(Bbt(a));continue}}if(s==="angle"&&e==="arc"&&!t.theta&&(At(Nbt),s=Yu),!Y1t(t,s,e)){At(XL(s,e));continue}if(s===Ch&&e==="line"){const a=Bc(t[s]);if(a!=null&&a.aggregate){At(Hbt);continue}}if(s===Nl&&(n?"fill"in t:"stroke"in t)){At(S4e("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(s===XE||s===Sv&&!at(o)&&!Nc(o)||s===x0&&at(o)){if(o){if(s===Sv){const a=t[s];if(uMe(a)){i[s]=a;continue}}i[s]=Pt(o).reduce((a,l)=>(kt(l)?a.push(BB(l,s)):At(qI(l,s)),a),[])}}else{if(s===x0&&o===null)i[s]=null;else if(!kt(o)&&!lf(o)&&!Nc(o)&&!tC(o)&&!cn(o)){At(qI(o,s));continue}i[s]=mMe(o,s,r)}}return i}function lR(t,e){const n={};for(const r of _t(t)){const i=mMe(t[r],r,e,{compositeMark:!0});n[r]=i}return n}function Z1t(t){const e=[];for(const n of _t(t))if(Jg(t,n)){const r=t[n],i=Pt(r);for(const s of i)kt(s)?e.push(s):iR(s)&&e.push(s.condition)}return e}function zB(t,e,n){if(t)for(const r of _t(t)){const i=t[r];if(at(i))for(const s of i)e.call(n,s,r);else e.call(n,i,r)}}function K1t(t,e,n,r){return t?_t(t).reduce((i,s)=>{const o=t[s];return at(o)?o.reduce((a,l)=>e.call(r,a,l,s),i):e.call(r,i,o,s)},n):n}function CMe(t,e){return _t(e).reduce((n,r)=>{switch(r){case fs:case No:case qL:case GL:case HL:case Vc:case nf:case vm:case x1:case Yu:case Eh:case Wc:case _h:case xm:case Yc:case Xc:case Zc:case Gu:case YE:case Bl:case H0:case x0:return n;case Sv:if(t==="line"||t==="trail")return n;case XE:case UL:{const i=e[r];if(at(i)||kt(i))for(const s of Pt(i))s.aggregate||n.push(Ft(s,{}));return n}case Ch:if(t==="trail")return n;case Nl:case rf:case sf:case Sh:case wm:case _m:case Cm:case Em:{const i=Bc(e[r]);return i&&!i.aggregate&&n.push(Ft(i,{})),n}}},[])}function J1t(t){const{tooltip:e,...n}=t;if(!e)return{filteredEncoding:n};let r,i;if(at(e)){for(const s of e)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else e.aggregate?n.tooltip=e:i=e;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function WI(t,e,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=t.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${jB(e)}`:"";return{field:o+e.field,type:e.type,title:cn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=Z1t(n).map(M1t);return{tooltip:[...i,...Sd(s,Mr)]}}function jB(t){const{title:e,field:n}=t;return zs(e,n)}function UB(t,e,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:d=void 0,extraEncoding:c={}})=>{const f=jB(n);return SMe(t,a,i,{mark:l,encoding:{[e]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Nt(d)?{[`${e}2`]:{field:`${d}_${n.field}`}}:{},...r,...c}})}}function SMe(t,e,n,r){const{clip:i,color:s,opacity:o}=t,a=t.type;return t[e]||t[e]===void 0&&n[e]?[{...r,mark:{...n[e],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Gd(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(e)}`,...gm(t[e])?{}:t[e]}}]:[]}function AMe(t,e,n){const{encoding:r}=t,i=e==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:jS(s,n),continuousAxisChannelDef2:jS(o,n),continuousAxisChannelDefError:jS(a,n),continuousAxisChannelDefError2:jS(l,n),continuousAxis:i}}function jS(t,e){if(t!=null&&t.aggregate){const{aggregate:n,...r}=t;return n!==e&&At(vvt(n,e)),r}else return t}function kMe(t,e){const{mark:n,encoding:r}=t,{x:i,y:s}=r;if(Gd(n)&&n.orient)return n.orient;if(Mp(i)){if(Mp(s)){const o=kt(i)&&i.aggregate,a=kt(s)&&s.aggregate;if(!o&&a===e)return"vertical";if(!a&&o===e)return"horizontal";if(o===e&&a===e)throw new Error("Both x and y cannot have aggregate");return Lv(s)&&!Lv(i)?"horizontal":"vertical"}return"horizontal"}else{if(Mp(s))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}const V3="boxplot",Q1t=["box","median","outliers","rule","ticks"],ext=new aR(V3,DMe);function TMe(t){return ui(t)?"tukey":t}function DMe(t,{config:e}){t={...t,encoding:lR(t.encoding,e)};const{mark:n,encoding:r,params:i,projection:s,...o}=t,a=Gd(n)?n:{type:n};i&&At(E4e("boxplot"));const l=a.extent??e.boxplot.extent,u=$i("size",a,e),d=a.invalid,c=TMe(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:b,groupby:y,aggregate:v,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:S,customTooltipWithoutAggregatedField:T}=txt(t,l,e),D=v1(g.field),{color:k,size:R,...O}=w,B=Ze=>UB(a,b,g,Ze,e.boxplot),K=B(O),L=B(w),I=(It(e.boxplot.box)?e.boxplot.box.color:e.mark.color)||"#4c78a8",$=B({...O,...R?{size:R}:{},color:{condition:{test:`${Di(`lower_box_${g.field}`)} >= ${Di(`upper_box_${g.field}`)}`,...k||{value:I}}}}),U=WI([{fieldPrefix:c==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:c==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,w),q={type:"tick",color:"black",opacity:1,orient:E,invalid:d,aria:!1},Y=c==="min-max"?U:WI([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,w),X=[...K({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...K({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:Y}),...K({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:Y})],te=[...c!=="tukey"?X:[],...L({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:S,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...$({partName:"median",mark:{type:"tick",invalid:d,...It(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},...u?{size:u}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(c==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:te};const le=Di(`lower_box_${g.field}`),ee=Di(`upper_box_${g.field}`),z=`(${ee} - ${le})`,he=`${le} - ${l} * ${z}`,fe=`${ee} + ${l} * ${z}`,ze=Di(g.field),He={joinaggregate:LMe(g.field),groupby:y},je={transform:[{filter:`(${he} <= ${ze}) && (${ze} <= ${fe})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${D}`},{op:"max",field:g.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${D}`},...v],groupby:y}],layer:X},{tooltip:we,...$e}=O,{scale:qe,axis:Pe}=g,St=jB(g),ht=Ol(Pe,["title"]),nn=SMe(a,"outliers",e.boxplot,{transform:[{filter:`(${ze} < ${he}) || (${ze} > ${fe})`}],mark:"point",encoding:{[b]:{field:g.field,type:g.type,...St!==void 0?{title:St}:{},...qe!==void 0?{scale:qe}:{},...Pi(ht)?{}:{axis:ht}},...$e,...k?{color:k}:{},...T?{tooltip:T}:{}}})[0];let Vt;const Mn=[...f,...h,He];return nn?Vt={transform:Mn,layer:[nn,je]}:(Vt=je,Vt.transform.unshift(...Mn)),{...o,layer:[Vt,{transform:p,layer:te}]}}function LMe(t){const e=v1(t);return[{op:"q1",field:t,as:`lower_box_${e}`},{op:"q3",field:t,as:`upper_box_${e}`}]}function txt(t,e,n){const r=kMe(t,V3),{continuousAxisChannelDef:i,continuousAxis:s}=AMe(t,r,V3),o=i.field,a=v1(o),l=TMe(e),u=[...LMe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${Di(`upper_box_${a}`)} - ${Di(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Di(`upper_box_${a}`)} + ${Di(`iqr_${a}`)} * ${e}, ${Di(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Di(`lower_box_${a}`)} - ${Di(`iqr_${a}`)} * ${e}, ${Di(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:c,...f}=t.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=J1t(f),{bins:g,timeUnits:b,aggregate:y,groupby:v,encoding:w}=EMe(p,n),E=r==="vertical"?"horizontal":"vertical",S=r,T=[...g,...b,{aggregate:[...y,...u],groupby:v},...d];return{bins:g,timeUnits:b,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:S,customTooltipWithoutAggregatedField:h}}const qB="errorbar",nxt=["ticks","rule"],rxt=new aR(qB,RMe);function RMe(t,{config:e}){t={...t,encoding:lR(t.encoding,e)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=FMe(t,qB,e);delete s.size;const d=UB(a,i,r,s,e.errorbar),c=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...c!==void 0?{thickness:c}:{},...f!==void 0?{size:f}:{}},p=[...d({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...d({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...c!==void 0?{size:c}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function ixt(t,e){const{encoding:n}=t;if(sxt(n))return{orient:kMe(t,e),inputType:"raw"};const r=oxt(n),i=axt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Yn(a)&&Yn(l))throw new Error(`${e} cannot have both x2 and y2`);if(Yn(a)){if(Mp(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(Yn(l)){if(Mp(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,d=n.yError2;if(Yn(l)&&!Yn(a))throw new Error(`${e} cannot have xError2 without xError`);if(Yn(d)&&!Yn(u))throw new Error(`${e} cannot have yError2 without yError`);if(Yn(a)&&Yn(u))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(Yn(a)){if(Mp(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Yn(u)){if(Mp(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function sxt(t){return(Yn(t.x)||Yn(t.y))&&!Yn(t.x2)&&!Yn(t.y2)&&!Yn(t.xError)&&!Yn(t.xError2)&&!Yn(t.yError)&&!Yn(t.yError2)}function oxt(t){return Yn(t.x2)||Yn(t.y2)}function axt(t){return Yn(t.xError)||Yn(t.xError2)||Yn(t.yError)||Yn(t.yError2)}function FMe(t,e,n){const{mark:r,encoding:i,params:s,projection:o,...a}=t,l=Gd(r)?r:{type:r};s&&At(E4e(e));const{orient:u,inputType:d}=ixt(t,e),{continuousAxisChannelDef:c,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=AMe(t,u,e),{errorBarSpecificAggregate:b,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:w}=lxt(l,c,f,h,p,d,e,n),{[g]:E,[g==="x"?"x2":"y2"]:S,[g==="x"?"xError":"yError"]:T,[g==="x"?"xError2":"yError2"]:D,...k}=i,{bins:R,timeUnits:O,aggregate:B,groupby:K,encoding:L}=EMe(k,n),I=[...B,...b],$=d!=="raw"?[]:K,U=WI(v,c,L,w);return{transform:[...a.transform??[],...R,...O,...I.length===0?[]:[{aggregate:I,groupby:$}],...y],groupby:$,continuousAxisChannelDef:c,continuousAxis:g,encodingWithoutContinuousAxis:L,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:U}}function lxt(t,e,n,r,i,s,o,a){let l=[],u=[];const d=e.field;let c,f=!1;if(s==="raw"){const h=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":a.errorbar.center,p=t.extent?t.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&At(bvt(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:d,as:`extent_${d}`},{op:h,field:d,as:`center_${d}`}],u=[{calculate:`${Di(`center_${d}`)} + ${Di(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${Di(`center_${d}`)} - ${Di(`extent_${d}`)}`,as:`lower_${d}`}],c=[{fieldPrefix:"center_",titlePrefix:WE(h)},{fieldPrefix:"upper_",titlePrefix:I_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:I_e(h,p,"-")}],f=!0;else{let g,b,y;p==="ci"?(g="mean",b="ci0",y="ci1"):(g="median",b="q1",y="q3"),l=[{op:b,field:d,as:`lower_${d}`},{op:y,field:d,as:`upper_${d}`},{op:g,field:d,as:`center_${d}`}],c=[{fieldPrefix:"upper_",titlePrefix:Pb({field:d,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Pb({field:d,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Pb({field:d,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&At(yvt(t.center,t.extent)),s==="aggregated-upper-lower"?(c=[],u=[{calculate:Di(n.field),as:`upper_${d}`},{calculate:Di(d),as:`lower_${d}`}]):s==="aggregated-error"&&(c=[{fieldPrefix:"",titlePrefix:d}],u=[{calculate:`${Di(d)} + ${Di(r.field)}`,as:`upper_${d}`}],i?u.push({calculate:`${Di(d)} + ${Di(i.field)}`,as:`lower_${d}`}):u.push({calculate:`${Di(d)} - ${Di(r.field)}`,as:`lower_${d}`}));for(const h of u)c.push({fieldPrefix:h.as.substring(0,6),titlePrefix:v0(v0(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:c,tooltipTitleWithFieldName:f}}function I_e(t,e,n){return`${WE(t)} ${n} ${e}`}const HB="errorband",uxt=["band","borders"],cxt=new aR(HB,OMe);function OMe(t,{config:e}){t={...t,encoding:lR(t.encoding,e)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=FMe(t,HB,e),u=o,d=UB(u,i,r,s,e.errorband),c=t.encoding.x!==void 0&&t.encoding.y!==void 0;let f={type:c?"area":"rect"},h={type:c?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return c?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?At(A_e("interpolate")):u.tension&&At(A_e("tension")),{...a,transform:n,layer:[...d({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const MMe={};function GB(t,e,n){const r=new aR(t,e);MMe[t]={normalizer:r,parts:n}}function dxt(){return _t(MMe)}GB(V3,DMe,Q1t);GB(qB,RMe,nxt);GB(HB,OMe,uxt);const fxt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],IMe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},$Me={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hxt=_t(IMe),pxt=_t($Me),mxt={header:1,headerRow:1,headerColumn:1,headerFacet:1},PMe=_t(mxt),NMe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],gxt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},yxt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},zc="_vgsid_",bxt={point:{on:"click",fields:[zc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function VB(t){return t==="legend"||!!(t!=null&&t.legend)}function wO(t){return VB(t)&&It(t)}function WB(t){return!!(t!=null&&t.select)}function BMe(t){const e=[];for(const n of t||[]){if(WB(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};e.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};e.push(o)}}return e}function vxt(t){return uR(t)||XB(t)||YB(t)}function YB(t){return Ct(t,"concat")}function uR(t){return Ct(t,"vconcat")}function XB(t){return Ct(t,"hconcat")}function zMe({step:t,offsetIsDiscrete:e}){return e?t.for??"offset":"position"}function Vd(t){return Ct(t,"step")}function $_e(t){return Ct(t,"view")||Ct(t,"width")||Ct(t,"height")}const P_e=20,xxt={align:1,bounds:1,center:1,columns:1,spacing:1},wxt=_t(xxt);function _xt(t,e,n){const r=n[e],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(rR(t)&&!eC(t.facet)||YB(t))&&(i.columns=o),uR(t)&&(i.columns=1);for(const a of wxt)if(t[a]!==void 0)if(a==="spacing"){const l=t[a];i[a]=ui(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=t[a];return i}function YI(t,e){return t[e]??t[e==="width"?"continuousWidth":"continuousHeight"]}function XI(t,e){const n=W3(t,e);return Vd(n)?n.step:jMe}function W3(t,e){const n=t[e]??t[e==="width"?"discreteWidth":"discreteHeight"];return zs(n,{step:t.step})}const jMe=20,Ext={continuousWidth:200,continuousHeight:200,step:jMe},Cxt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Ext,mark:m1t,arc:{},area:{},bar:v1t,circle:{},geoshape:{},image:{},line:{},point:{},rect:LB,rule:{color:"black"},square:{},text:{color:"black"},tick:x1t,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Zvt,projection:{},legend:gxt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:bxt,style:{},title:{},facet:{spacing:P_e},concat:{spacing:P_e},normalizedNumberFormat:".0%"},Rf=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],N_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},B_e={blue:Rf[0],orange:Rf[1],red:Rf[2],teal:Rf[3],green:Rf[4],yellow:Rf[5],purple:Rf[6],pink:Rf[7],brown:Rf[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Sxt(t={}){return{signals:[{name:"color",value:It(t)?{...B_e,...t}:B_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Axt(t){return{signals:[{name:"fontSize",value:It(t)?{...N_e,...t}:N_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function kxt(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function UMe(t){const e=_t(t||{}),n={};for(const r of e){const i=t[r];n[r]=iC(i)?g4e(i):Jl(i)}return n}function Txt(t){const e=_t(t),n={};for(const r of e)n[r]=UMe(t[r]);return n}const Dxt=[...K4e,...vMe,...PMe,"background","padding","legend","lineBreak","scale","style","title","view"];function qMe(t={}){const{color:e,font:n,fontSize:r,selection:i,...s}=t,o=a1({},Vn(Cxt),n?kxt(n):{},e?Sxt(e):{},r?Axt(r):{},s||{});i&&l1(o,"selection",i,!0);const a=Ol(o,Dxt);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Jl(o[l]));for(const l of K4e)o[l]&&(a[l]=Zo(o[l]));for(const l of vMe)o[l]&&(a[l]=UMe(o[l]));for(const l of PMe)o[l]&&(a[l]=Zo(o[l]));if(o.legend&&(a.legend=Zo(o.legend)),o.scale){const{invalid:l,...u}=o.scale,d=Zo(l,{level:1});a.scale={...Zo(u),..._t(d).length>0?{invalid:d}:{}}}return o.style&&(a.style=Txt(o.style)),o.title&&(a.title=Zo(o.title)),o.view&&(a.view=Zo(o.view)),a}const Lxt=new Set(["view",...u1t]),Rxt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Fxt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...p1t};function Oxt(t){t=Vn(t);for(const e of Rxt)delete t[e];if(t.axis)for(const e in t.axis)iC(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of fxt)delete t.legend[e];if(t.mark){for(const e of T_e)delete t.mark[e];t.mark.tooltip&&It(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(BMe(t.params)),delete t.params);for(const e of Lxt){for(const r of T_e)delete t[e][r];const n=Fxt[e];if(n)for(const r of n)delete t[e][r];Ixt(t,e)}for(const e of dxt())delete t[e];Mxt(t);for(const e in t)It(t[e])&&Pi(t[e])&&delete t[e];return Pi(t)?void 0:t}function Mxt(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:r}=m4e(t.title);Pi(e)||(t.style["group-title"]={...t.style["group-title"],...e}),Pi(n)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...n}),Pi(r)?delete t.title:t.title=r}function Ixt(t,e,n,r){const i=t[e];e==="view"&&(n="cell");const s={...i,...t.style[n??e]};Pi(s)||(t.style[n??e]=s),delete t[e]}function cR(t){return Ct(t,"layer")}function $xt(t){return Ct(t,"repeat")}function Pxt(t){return!at(t.repeat)&&Ct(t.repeat,"layer")}class ZB{map(e,n){return rR(e)?this.mapFacet(e,n):$xt(e)?this.mapRepeat(e,n):XB(e)?this.mapHConcat(e,n):uR(e)?this.mapVConcat(e,n):YB(e)?this.mapConcat(e,n):this.mapLayerOrUnit(e,n)}mapLayerOrUnit(e,n){if(cR(e))return this.mapLayer(e,n);if(kh(e))return this.mapUnit(e,n);throw new Error(dB(e))}mapLayer(e,n){return{...e,layer:e.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(e,n){return{...e,hconcat:e.hconcat.map(r=>this.map(r,n))}}mapVConcat(e,n){return{...e,vconcat:e.vconcat.map(r=>this.map(r,n))}}mapConcat(e,n){const{concat:r,...i}=e;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(e,n){return{...e,spec:this.map(e.spec,n)}}mapRepeat(e,n){return{...e,spec:this.map(e.spec,n)}}}const Nxt={zero:1,center:1,normalize:1};function Bxt(t){return Yt(Nxt,t)}const zxt=new Set([Y4e,QL,JL,z3,tR,TB,DB,eR,X4e,kB]),jxt=new Set([QL,JL,Y4e]);function Jy(t){return kt(t)&&Tv(t)==="quantitative"&&!t.bin}function z_e(t,e,{orient:n,type:r}){const i=e==="x"?"y":"radius",s=e==="x"&&["bar","area"].includes(r),o=t[e],a=t[i];if(kt(o)&&kt(a))if(Jy(o)&&Jy(a)){if(o.stack)return e;if(a.stack)return i;const l=kt(o)&&!!o.aggregate,u=kt(a)&&!!a.aggregate;if(l!==u)return l?e:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return e}}else{if(Jy(o))return e;if(Jy(a))return i}else{if(Jy(o))return s&&n==="vertical"?void 0:e;if(Jy(a))return s&&n==="horizontal"?void 0:i}}function Uxt(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function HMe(t,e){var g,b;const n=Gd(t)?t:{type:t},r=n.type;if(!zxt.has(r))return null;const i=z_e(e,"x",n)||z_e(e,"theta",n);if(!i)return null;const s=e[i],o=kt(s)?Ft(s,{}):void 0,a=Uxt(i),l=[],u=new Set;if(e[a]){const y=e[a],v=kt(y)?Ft(y,{}):void 0;v&&v!==o&&(l.push(a),u.add(v))}const d=a==="x"?"xOffset":"yOffset",c=e[d],f=kt(c)?Ft(c,{}):void 0;f&&f!==o&&(l.push(d),u.add(f));const h=Xyt.reduce((y,v)=>{if(v!=="tooltip"&&Jg(e,v)){const w=e[v];for(const E of Pt(w)){const S=Bc(E);if(S.aggregate)continue;const T=Ft(S,{});(!T||!u.has(T))&&y.push({channel:v,fieldDef:S})}}return y},[]);let p;return s.stack!==void 0?gm(s.stack)?p=s.stack?"zero":null:p=s.stack:jxt.has(r)&&(p="zero"),!p||!Bxt(p)||_Me(e)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((b=s==null?void 0:s.scale)==null?void 0:b.type)!==Ko.LINEAR&&s!=null&&s.stack&&At(pvt(s.scale.type)),Yn(e[of(i)])?(s.stack!==void 0&&At(hvt(i)),null):(kt(s)&&s.aggregate&&!lbt.has(s.aggregate)&&At(mvt(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:Am(r),stackBy:h,offset:p}))}function GMe(t,e,n){const r=Zo(t),i=$i("orient",r,n);if(r.orient=Vxt(r.type,e,i),i!==void 0&&i!==r.orient&&At(Kbt(r.orient,i)),r.type==="bar"&&r.orient){const l=$i("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&e.x2||r.orient==="vertical"&&e.y2?["cornerRadius"]:y1t[r.orient];for(const d of u)r[d]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=$i("opacity",r,n),o=$i("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Hxt(r.type,e)),$i("cursor",r,n)===void 0&&(r.cursor=qxt(r,e,n)),r}function qxt(t,e,n){return e.href||t.href||$i("href",t,n)?"pointer":t.cursor}function Hxt(t,e){if(Er([tR,kB,TB,DB],t)&&!_Me(e))return .7}function Gxt(t,e,{graticule:n}){if(n)return!1;const r=Hd("filled",t,e),i=t.type;return zs(r,i!==tR&&i!==eR&&i!==z3)}function Vxt(t,e,n){switch(t){case tR:case TB:case DB:case X4e:case a1t:case o1t:return}const{x:r,y:i,x2:s,y2:o}=e;switch(t){case QL:if(kt(r)&&(Xo(r.bin)||kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(kt(i)&&(Xo(i.bin)||kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(kt(r)&&r.type===E0&&!Ji(r.bin)||U3(r))&&kt(i)&&Xo(i.bin)?"horizontal":"vertical";if(!o)return(kt(i)&&i.type===E0&&!Ji(i.bin)||U3(i))&&kt(r)&&Xo(r.bin)?"vertical":"horizontal"}case z3:if(s&&!(kt(r)&&Xo(r.bin))&&o&&!(kt(i)&&Xo(i.bin)))return;case JL:if(o)return kt(i)&&Xo(i.bin)?"horizontal":"vertical";if(s)return kt(r)&&Xo(r.bin)?"vertical":"horizontal";if(t===z3){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case eR:case kB:{const a=F_e(r),l=F_e(i);if(n)return n;if(a&&!l)return t!=="tick"?"horizontal":"vertical";if(!a&&l)return t!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=il(r)&&r.type===Av,d=il(i)&&i.type===Av;if(u&&!d)return"vertical";if(!u&&d)return"horizontal"}return}}return"vertical"}function Wxt(t){const{point:e,line:n,...r}=t;return _t(r).length>1?r:r.type}function Yxt(t){for(const e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:Ol(t[e],["point","line"])});return t}function _O(t,e={},n){return t.point==="transparent"?{opacity:0}:t.point?It(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?It(e.point)?e.point:{}:void 0}function j_e(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class Xxt{constructor(){this.name="path-overlay"}hasMatchingType(e,n){if(kh(e)){const{mark:r,encoding:i}=e,s=Gd(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!_O(s,n[s.type],i);case"area":return!!_O(s,n[s.type],i)||!!j_e(s,n[s.type])}}return!1}run(e,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...d}=e,c=lR(u,i),f=Gd(a)?a:{type:a},h=_O(f,i[f.type],c),p=f.type==="area"&&j_e(f,i[f.type]),g=[{name:l,...s?{params:s}:{},mark:Wxt({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:Ol(c,["shape"])}],b=HMe(GMe(f,c,i),c);let y=c;if(b){const{fieldChannel:v,offset:w}=b;y={...c,[v]:{...c[v],...w?{stack:w}:{}}}}return y=Ol(y,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",..._v(f,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,..._v(f,["clip","tooltip"]),...h},encoding:y}),r({...d,layer:g},{...n,config:Yxt(i)})}}function Zxt(t,e){return e?eC(t)?WMe(t,e):VMe(t,e):t}function EO(t,e){return e?WMe(t,e):t}function ZI(t,e,n){const r=e[t];if(F1t(r)){if(r.repeat in n)return{...e,[t]:n[r.repeat]};At(Tbt(r.repeat));return}return e}function VMe(t,e){if(t=ZI("field",t,e),t!==void 0){if(t===null)return null;if($B(t)&&nh(t.sort)){const n=ZI("field",t.sort,e);t={...t,...n?{sort:n}:{}}}return t}}function U_e(t,e){if(kt(t))return VMe(t,e);{const n=ZI("datum",t,e);return n!==t&&!n.type&&(n.type="nominal"),n}}function q_e(t,e){if(Yn(t)){const n=U_e(t,e);if(n)return n;if(tC(t))return{condition:t.condition}}else{if(nC(t)){const n=U_e(t.condition,e);if(n)return{...t,condition:n};{const{condition:r,...i}=t;return i}}return t}}function WMe(t,e){const n={};for(const r in t)if(Ct(t,r)){const i=t[r];if(at(i))n[r]=i.map(s=>q_e(s,e)).filter(s=>s);else{const s=q_e(i,e);s!==void 0&&(n[r]=s)}}return n}class Kxt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(kh(e)){const{encoding:n,mark:r}=e;if(r==="line"||Gd(r)&&r.type==="line")for(const i of Vyt){const s=G0(i),o=n[s];if(n[i]&&(kt(o)&&!Xo(o.bin)||lf(o)))return!0}}return!1}run(e,n,r){const{encoding:i,mark:s}=e;return At(Zbt(!!i.x2,!!i.y2)),r({...e,mark:It(s)?{...s,type:"rule"}:"rule"},n)}}class Jxt extends ZB{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ext,rxt,cxt,new Xxt,new Kxt]}map(e,n){if(kh(e)){const r=Jg(e.encoding,eh),i=Jg(e.encoding,th),s=Jg(e.encoding,jL);if(r||i||s)return this.mapFacetedUnit(e,n)}return super.map(e,n)}mapUnit(e,n){const{parentEncoding:r,parentProjection:i}=n,s=EO(e.encoding,n.repeater),o={...e,...e.name?{name:[n.repeaterPrefix,e.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(e,n){return Pxt(e)?this.mapLayerRepeat(e,n):this.mapNonLayerRepeat(e,n)}mapLayerRepeat(e,n){const{repeat:r,spec:i,...s}=e,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:d=""}=n;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(c=>{const f={...u,layer:c},h=`${(i.name?`${i.name}_`:"")+d}child__layer_${ds(c)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(e,n){const{repeat:r,spec:i,data:s,...o}=e;!at(r)&&e.columns&&(e=Ol(e,["columns"]),At(__e("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,d=!at(r)&&r.row||[l?l.row:null],c=!at(r)&&r.column||[l?l.column:null],f=at(r)&&r||[l?l.repeat:null];for(const p of f)for(const g of d)for(const b of c){const y={repeat:p,row:g,column:b,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(at(r)?`${ds(p)}`:(r.row?`row_${ds(g)}`:"")+(r.column?`column_${ds(b)}`:"")),w=this.map(i,{...n,repeater:y,repeaterPrefix:v});w.name=v,a.push(Ol(w,["data"]))}const h=at(r)?e.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(e,n){const{facet:r}=e;return eC(r)&&e.columns&&(e=Ol(e,["columns"]),At(__e("facet"))),super.mapFacet(e,n)}mapUnitWithParentEncodingOrProjection(e,n){const{encoding:r,projection:i}=e,{parentEncoding:s,parentProjection:o,config:a}=n,l=G_e({parentProjection:o,projection:i}),u=H_e({parentEncoding:s,encoding:EO(r,n.repeater)});return this.mapUnit({...e,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,n){const{row:r,column:i,facet:s,...o}=e.encoding,{mark:a,width:l,projection:u,height:d,view:c,params:f,encoding:h,...p}=e,{facetMapping:g,layout:b}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=EO(o,n.repeater);return this.mapFacet({...p,...b,facet:g,spec:{...l?{width:l}:{},...d?{height:d}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:y,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(e,n){const{row:r,column:i,facet:s}=e;if(r||i){s&&At(Ybt([...r?[eh]:[],...i?[th]:[]]));const o={},a={};for(const l of[eh,th]){const u=e[l];if(u){const{align:d,center:c,spacing:f,columns:h,...p}=u;o[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...d}=s;return{facetMapping:Zxt(d,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(e,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=e,l={...i,parentEncoding:H_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:G_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...e.name?{name:[l.repeaterPrefix,e.name].filter(u=>u).join("_")}:{}},l)}}function H_e({parentEncoding:t,encoding:e={},layer:n}){let r={};if(t){const i=new Set([..._t(t),..._t(e)]);for(const s of i){const o=e[s],a=t[s];if(Yn(o)){const l={...a,...o};r[s]=l}else nC(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Nc(a)||cn(a)||Yn(a)||at(a))&&(r[s]=a)}}else r=e;return!r||Pi(r)?void 0:r}function G_e(t){const{parentProjection:e,projection:n}=t;return e&&n&&At(Pbt({parentProjection:e,projection:n})),n??e}function KB(t){return Ct(t,"filter")}function Qxt(t){return Ct(t,"stop")}function YMe(t){return Ct(t,"lookup")}function ewt(t){return Ct(t,"data")}function twt(t){return Ct(t,"param")}function nwt(t){return Ct(t,"pivot")}function rwt(t){return Ct(t,"density")}function iwt(t){return Ct(t,"quantile")}function swt(t){return Ct(t,"regression")}function owt(t){return Ct(t,"loess")}function awt(t){return Ct(t,"sample")}function lwt(t){return Ct(t,"window")}function uwt(t){return Ct(t,"joinaggregate")}function cwt(t){return Ct(t,"flatten")}function dwt(t){return Ct(t,"calculate")}function XMe(t){return Ct(t,"bin")}function fwt(t){return Ct(t,"impute")}function hwt(t){return Ct(t,"timeUnit")}function pwt(t){return Ct(t,"aggregate")}function mwt(t){return Ct(t,"stack")}function gwt(t){return Ct(t,"fold")}function ywt(t){return Ct(t,"extent")&&!Ct(t,"density")&&!Ct(t,"regression")}function bwt(t){return t.map(e=>KB(e)?{filter:Ib(e.filter,qvt)}:e)}class vwt extends ZB{map(e,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),e=V_e(e,n),super.map(e,n)}mapLayerOrUnit(e,n){if(e=V_e(e,n),e.encoding){const r={};for(const[i,s]of im(e.encoding))r[i]=ZMe(s,n);e={...e,encoding:r}}return super.mapLayerOrUnit(e,n)}mapUnit(e,n){const{selection:r,...i}=e;return r?{...i,params:im(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[s]=u!=="none";for(const c of ra(n.selectionPredicates[s]??{}))c.empty=u!=="none";return{name:s,value:a,select:d,bind:l}})}:e}}function V_e(t,e){const{transform:n,...r}=t;if(n){const i=n.map(s=>{if(KB(s))return{filter:KI(s,e)};if(XMe(s)&&V0(s.bin))return{...s,bin:KMe(s.bin)};if(YMe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return t}function ZMe(t,e){var r,i;const n=Vn(t);if(kt(n)&&V0(n.bin)&&(n.bin=KMe(n.bin)),Z0(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(tC(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:KI(s,e)}});else{const{selection:s,param:o,test:a,...l}=ZMe(n.condition,e);n.condition=o?n.condition:{...l,test:KI(n.condition,e)}}return n}function KMe(t){const e=t.extent;if(e!=null&&e.selection){const{selection:n,...r}=e;return{...t,extent:{...r,param:n}}}return t}function KI(t,e){const n=r=>Ib(r,i=>{var s;const o=e.emptySelections[i]??!0,a={param:i,empty:o};return(s=e.selectionPredicates)[i]??(s[i]=[]),e.selectionPredicates[i].push(a),a});return t.selection?n(t.selection):Ib(t.test||t.filter,r=>r.selection?n(r.selection):r)}class JI extends ZB{map(e,n){const r=n.selections??[];if(e.params&&!kh(e)){const i=[];for(const s of e.params)WB(s)?r.push(s):i.push(s);e.params=i}return n.selections=r,super.map(e,n)}mapUnit(e,n){const r=n.selections;if(!r||!r.length)return e;const i=(n.path??[]).concat(e.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Nt(a)&&(a===e.name||i.includes(a))||at(a)&&a.map(l=>i.indexOf(l)).every((l,u,d)=>l!==-1&&(u===0||l>d[u-1])))&&s.push(o);return s.length&&(e.params=s),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=JI.prototype[t];JI.prototype[t]=function(n,r){return e.call(this,n,xwt(n,r))}}function xwt(t,e){return t.name?{...e,path:(e.path??[]).concat(t.name)}:e}function JMe(t,e){e===void 0&&(e=qMe(t.config));const n=Cwt(t,e),{width:r,height:i}=t,s=Swt(n,{width:r,height:i,autosize:t.autosize},e);return{...n,...s?{autosize:s}:{}}}const wwt=new Jxt,_wt=new vwt,Ewt=new JI;function Cwt(t,e={}){const n={config:e};return Ewt.map(wwt.map(_wt.map(t,n),n),n)}function W_e(t){return Nt(t)?{type:t}:t??{}}function Swt(t,e,n){let{width:r,height:i}=e;const s=kh(t)||cR(t),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(At(b_e("width")),r=void 0),i=="container"&&(At(b_e("height")),i=void 0));const a={type:"pad",...o,...n?W_e(n.autosize):{},...W_e(t.autosize)};if(a.type==="fit"&&!s&&(At(ybt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&At(v_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&At(v_e("height")),!tu(a,{type:"pad"}))return a}function Awt(t){return["fit","fit-x","fit-y"].includes(t)}function kwt(t){return t?`fit-${VL(t)}`:"fit"}const Twt=["background","padding"];function Y_e(t,e){const n={};for(const r of Twt)t&&t[r]!==void 0&&(n[r]=Jl(t[r]));return e&&(n.params=t.params),n}class Th{constructor(e={},n={}){this.explicit=e,this.implicit=n}clone(){return new Th(Vn(this.explicit),Vn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return zs(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:n,explicit:r}){n!==void 0&&this.set(e,n,r)}set(e,n,r){return delete this[r?"implicit":"explicit"][e],this[r?"explicit":"implicit"][e]=n,this}copyKeyFromSplit(e,{explicit:n,implicit:r}){n[e]!==void 0?this.set(e,n[e],!0):r[e]!==void 0&&this.set(e,r[e],!1)}copyKeyFromObject(e,n){n[e]!==void 0&&this.set(e,n[e],!0)}copyAll(e){for(const n of _t(e.combine())){const r=e.getWithExplicit(n);this.setWithExplicit(n,r)}}}function bd(t){return{explicit:!0,value:t}}function Vl(t){return{explicit:!1,value:t}}function QMe(t){return(e,n,r,i)=>{const s=t(e.value,n.value);return s>0?e:s<0?n:dR(e,n,r,i)}}function dR(t,e,n,r){return t.explicit&&e.explicit&&At(ovt(n,r,t.value,e.value)),t}function am(t,e,n,r,i=dR){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:tu(t.value,e.value)?t:i(t,e,n,r)}class Dwt extends Th{constructor(e={},n={},r=!1){super(e,n),this.explicit=e,this.implicit=n,this.parseNothing=r}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function Rv(t){return Ct(t,"url")}function R2(t){return Ct(t,"values")}function eIe(t){return Ct(t,"name")&&!Rv(t)&&!R2(t)&&!Hp(t)}function Hp(t){return t&&(tIe(t)||nIe(t)||JB(t))}function tIe(t){return Ct(t,"sequence")}function nIe(t){return Ct(t,"sphere")}function JB(t){return Ct(t,"graticule")}var xs;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup",t[t.PreFilterInvalid=5]="PreFilterInvalid",t[t.PostFilterInvalid=6]="PostFilterInvalid"})(xs||(xs={}));function rIe({invalid:t,isPath:e}){switch(J4e(t,{isPath:e})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Lwt(t){const{marks:e,scales:n}=rIe(t);return e===n?xs.Main:n==="include-invalid-values"?xs.PreFilterInvalid:xs.PostFilterInvalid}class Ri{constructor(e,n){this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,n){if(this._children.includes(e)){At(Mbt);return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)}removeChild(e){const n=this._children.indexOf(e);return this._children.splice(n,1),n}remove(){let e=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,e++)}insertAsParentOf(e){const n=e.parent;n.removeChild(this),this.parent=n,e.parent=this}swapWithParent(){const e=this._parent,n=e.parent;for(const i of this._children)i.parent=e;this._children=[],e.removeChild(this);const r=e.parent.removeChild(e);this._parent=n,n.addChild(this,r),e.parent=this}}class Ml extends Ri{clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,n,r,i){super(e,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Q5e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}function CO(t){return t.as!==void 0}function X_e(t){return`${t}_end`}class Rd extends Ri{clone(){return new Rd(null,Vn(this.timeUnits))}constructor(e,n){super(e),this.timeUnits=n}static makeFromEncoding(e,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(X0(l)){if(vs(n)){const{mark:d,markDef:c,config:f}=n,h=om({fieldDef:s,markDef:c,config:f});(L2(d)||h)&&(u={timeUnit:Mo(l),field:a})}}else u={as:Ft(s,{forAs:!0}),field:a,timeUnit:l};if(vs(n)){const{mark:d,markDef:c,config:f}=n,h=om({fieldDef:s,markDef:c,config:f});L2(d)&&js(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Mr(u)]=u)}return i},{});return Pi(r)?null:new Rd(e,r)}static makeFromTransform(e,n){const{timeUnit:r,...i}={...n},s=Mo(r),o={...i,timeUnit:s};return new Rd(e,{[Mr(o)]:o})}merge(e){this.timeUnits={...this.timeUnits};for(const n in e.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=e.timeUnits[n]);for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}removeFormulas(e){const n={};for(const[r,i]of im(this.timeUnits)){const s=CO(i)?i.as:`${i.field}_end`;e.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ra(this.timeUnits).map(e=>CO(e)?e.as:X_e(e.field)))}dependentFields(){return new Set(ra(this.timeUnits).map(e=>e.field))}hash(){return`TimeUnit ${Mr(this.timeUnits)}`}assemble(){const e=[];for(const n of ra(this.timeUnits)){const{rectBandPosition:r}=n,i=Mo(n.timeUnit);if(CO(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,d=[o,`${o}_end`];e.push({field:Hu(s),type:"timeunit",...a?{units:ZL(a)}:{},...l?{timezone:"utc"}:{},...u,as:d}),e.push(...Z_e(d,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=iIe({timeUnit:i,field:o}),l=X_e(o);e.push({type:"formula",expr:a,as:l}),e.push(...Z_e([o,l],r,i))}}return e}}const fR="offsetted_rect_start",hR="offsetted_rect_end";function iIe({timeUnit:t,field:e,reverse:n}){const{unit:r,utc:i}=t,s=M4e(r),{part:o,step:a}=N4e(s,t.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${Di(e)}, ${n?-a:a})`}function Z_e([t,e],n,r){if(n!==void 0&&n!==.5){const i=Di(t),s=Di(e);return[{type:"formula",expr:K_e([iIe({timeUnit:r,field:t,reverse:!0}),i],n+.5),as:`${t}_${fR}`},{type:"formula",expr:K_e([i,s],n+.5),as:`${t}_${hR}`}]}return[]}function K_e([t,e],n){return`${1-n} * ${t} + ${n} * ${e}`}const sC="_tuple_fields";class Rwt{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Fwt={defined:()=>!0,parse:(t,e,n)=>{const r=e.name,i=e.project??(e.project=new Rwt),s={},o={},a=new Set,l=(p,g)=>{const b=g==="visual"?p.channel:p.field;let y=ds(`${r}_${b}`);for(let v=1;a.has(y);v++)y=ds(`${r}_${b}_${v}`);return a.add(y),{[g]:y}},u=e.type,d=t.config.selection[u],c=n.value!==void 0?Pt(n.value):null;let{fields:f,encodings:h}=It(n.select)?n.select:{};if(!f&&!h&&c){for(const p of c)if(It(p))for(const g of _t(p))Gyt(g)?(h||(h=[])).push(g):u==="interval"?(At(kbt),h=d.encodings):(f??(f=[])).push(g)}!f&&!h&&(h=d.encodings,"fields"in d&&(f=d.fields));for(const p of h??[]){const g=t.fieldDef(p);if(g){let b=g.field;if(g.aggregate){At(bbt(p,g.aggregate));continue}else if(!b){At(w_e(p));continue}if(g.timeUnit&&!X0(g.timeUnit)){b=t.vgField(p);const y={timeUnit:g.timeUnit,as:b,field:g.field};o[Mr(y)]=y}if(!s[b]){const y=u==="interval"&&af(p)&&Pc(t.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:b,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[b]=v),i.hasField[b]=s[b],i.hasSelectionId=i.hasSelectionId||b===zc,s4e(p)?(v.geoChannel=p,v.channel=i4e(p),i.hasChannel[v.channel]=s[b]):i.hasChannel[p]=s[b]}}else At(w_e(p))}for(const p of f??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===zc}c&&(e.init=c.map(p=>i.items.map(g=>It(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),Pi(o)||(i.timeUnit=new Rd(null,o))},signals:(t,e,n)=>{const r=e.name+sC;return n.filter(s=>s.name===r).length>0||e.project.hasSelectionId?n:n.concat({name:r,value:e.project.items.map(lIe)})}},sIe="_curr",KA="anim_value",cb="anim_clock",QI="eased_anim_clock",oIe="min_extent",aIe="max_range_extent",SO="last_tick_at",AO="is_playing",Owt=1/60*1e3,Mwt=(t,e)=>[{name:QI,update:cb},{name:`${t}_domain`,init:`domain('${e}')`},{name:oIe,init:`extent(${t}_domain)[0]`},{name:aIe,init:`extent(range('${e}'))[1]`},{name:KA,update:`invert('${e}', ${QI})`}],Iwt={defined:t=>t.type==="point",topLevelSignals:(t,e,n)=>(Fd(e)&&(n=n.concat([{name:cb,init:"0",on:[{events:{type:"timer",throttle:Owt},update:`${AO} ? (${cb} + (now() - ${SO}) > ${aIe} ? 0 : ${cb} + (now() - ${SO})) : ${cb}`}]},{name:SO,init:"now()",on:[{events:[{signal:cb},{signal:AO}],update:"now()"}]},{name:AO,init:"true"}])),n),signals:(t,e,n)=>{const r=e.name,i=r+sC,s=e.project,o="(item().isVoronoi ? datum.datum : datum)",a=ra(t.component.selection??{}).reduce((d,c)=>c.type==="interval"?d.concat(c.name+Nb):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Qg(t)}, `;if(e.project.hasSelectionId)u+=`${zc}: ${o}[${Tt(zc)}]`;else if(Fd(e))u+=`fields: ${i}, values: [${KA} ? ${KA} : ${oIe}]`;else{const d=s.items.map(c=>{const f=t.fieldDef(c.channel);return f!=null&&f.bin?`[${o}[${Tt(t.vgField(c.channel,{}))}], ${o}[${Tt(t.vgField(c.channel,{binSuffix:"end"}))}]]`:`${o}[${Tt(c.field)}]`}).join(", ");u+=`fields: ${i}, values: [${d}]`}if(Fd(e))return n.concat(Mwt(e.name,t.scaleName(xm)),[{name:r+hh,on:[{events:[{signal:QI},{signal:KA}],update:`{${u}}`,force:!0}]}]);{const d=e.events;return n.concat([{name:r+hh,on:d?[{events:d,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function lIe(t){const{signals:e,hasLegend:n,index:r,...i}=t;return i.field=Hu(i.field),i}function A0(t,e=!0,n=Ma){if(at(t)){const r=t.map(i=>A0(i,e,n));return e?`[${r.join(", ")}]`:r}else if(Y0(t))return n(e?_0(t):Rvt(t));return e?n(Ni(t)):t}function $wt(t,e){for(const n of ra(t.component.selection??{})){const r=n.name;let i=`${r}${hh}, ${n.resolve==="global"?"true":`{unit: ${Qg(t)}}`}`;for(const s of mR)s.defined(n)&&(s.signals&&(e=s.signals(t,n,e)),s.modifyExpr&&(i=s.modifyExpr(t,n,i)));e.push({name:r+u_t,on:[{events:{signal:n.name+hh},update:`modify(${Tt(n.name+k0)}, ${i})`}]})}return QB(e)}function Pwt(t,e){if(t.component.selection&&_t(t.component.selection).length){const n=Tt(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:bm("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return QB(e)}function Nwt(t,e){let n=!1;for(const r of ra(t.component.selection??{})){const i=r.name,s=Tt(i+k0);if(e.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";e.push({name:r.name,update:`${SIe}(${s}, ${Tt(a)}${l}`})}n=!0;for(const a of mR)a.defined(r)&&a.topLevelSignals&&(e=a.topLevelSignals(t,r,e))}return n&&e.filter(i=>i.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),QB(e)}function Bwt(t,e){const n=[],r=[],i=Qg(t,{escape:!1});for(const s of ra(t.component.selection??{})){const o={name:s.name+k0};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:zc}}]),s.init){const l=s.project.items.map(lIe);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:i,[zc]:A0(u,!1)[0]})):s.init.map(u=>({unit:i,fields:l,values:A0(u,!1)}))}if([...n,...e].filter(l=>l.name===s.name+k0).length||n.push(o),Fd(s)&&e.length){const l=t.lookupDataSource(t.getDataName(xs.Main)),u=e.find(c=>c.name===l),d=u.transform.find(c=>c.type==="filter"&&c.expr.includes("vlSelectionTest"));if(d){u.transform=u.transform.filter(f=>f!==d);const c={name:u.name+sIe,source:u.name,transform:[d]};r.push(c)}}}return n.concat(e,r)}function uIe(t,e){for(const n of ra(t.component.selection??{}))for(const r of mR)r.defined(n)&&r.marks&&(e=r.marks(t,n,e));return e}function zwt(t,e){for(const n of t.children)vs(n)&&(e=uIe(n,e));return e}function jwt(t,e,n,r){const i=LIe(t,e.param,e);return{signal:Pc(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function QB(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}const rh={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const n=e.scales=[];for(const r of e.project.items){const i=r.channel;if(!af(i))continue;const s=t.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&At(_bt),!s||!Pc(o)){At(wbt);continue}s.set("selectionExtent",{param:e.name,field:r.field},!0),n.push(r)}},topLevelSignals:(t,e,n)=>{const r=e.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!t.parent||t6(t)||r.length===0)return n;const i=n.find(o=>o.name===e.name);let s=i.update;if(s.includes(SIe))i.update=`{${r.map(o=>`${Tt(Hu(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Tt(Hu(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!t6(t))for(const r of e.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function e6(t,e){return`domain(${Tt(t.scaleName(e))})`}function t6(t){return t.parent&&A1(t.parent)&&(!t.parent.parent||t6(t.parent.parent))}const Nb="_brush",cIe="_scale_trigger",Rw="geo_interval_init_tick",dIe="_init",Uwt="_center",qwt={defined:t=>t.type==="interval",parse:(t,e,n)=>{var r;if(t.hasProjection){const i={...It(n.select)?n.select:{}};i.fields=[zc],i.encodings||(i.encodings=n.value?_t(n.value):[Xc,Yc]),n.select={type:"interval",...i}}if(e.translate&&!rh.defined(e)){const i=`!event.item || event.item.mark.name !== ${Tt(e.name+Nb)}`;for(const s of e.events){if(!s.between){At(`${s} is not an ordered event stream for interval selections.`);continue}const o=Pt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(t,e,n)=>{const r=e.name,i=r+hh,s=ra(e.project.hasChannel).filter(a=>a.channel===fs||a.channel===No),o=e.init?e.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(Hwt(t,e,l,o&&o[l.index])),[])),t.hasProjection){const a=Tt(t.projectionName()),l=t.projectionName()+Uwt,{x:u,y:d}=e.project.hasChannel,c=u&&u.signals.visual,f=d&&d.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=d?o&&o[d.index]:`${l}[1]`,g=S=>t.getSizeSignalRef(S).signal,b=`[[${c?c+"[0]":"0"}, ${f?f+"[0]":"0"}],[${c?c+"[1]":g("width")}, ${f?f+"[1]":g("height")}]]`;o&&(n.unshift({name:r+dIe,init:`[scale(${a}, [${u?h[0]:h}, ${d?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${d?p[1]:p}])]`}),(!u||!d)&&(n.find(T=>T.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${b}, {markname: ${Tt(t.getName("marks"))}}, unit.mark)`,v=`{unit: ${Qg(t)}}`,w=`vlSelectionTuples(${y}, ${v})`,E=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:Rw}]:[]],update:w}]})}else{if(!rh.defined(e)){const u=r+cIe,d=s.map(c=>{const f=c.channel,{data:h,visual:p}=c.signals,g=Tt(t.scaleName(f)),b=t.getScaleComponent(f).get("type"),y=Pc(b)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});d.length&&n.push({name:u,value:{},on:[{events:s.map(c=>({scale:t.scaleName(c.channel)})),update:d.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Qg(t)}, fields: ${r+sC}, values`;return n.concat({name:i,...o?{init:`{${l}: ${A0(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(t,e,n)=>(vs(t)&&t.hasProjection&&e.init&&(n.filter(i=>i.name===Rw).length||n.unshift({name:Rw,value:null,on:[{events:"timer{1}",update:`${Rw} === null ? {} : ${Rw}`}]})),n),marks:(t,e,n)=>{const r=e.name,{x:i,y:s}=e.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${Tt(e.name+k0)})`;if(rh.defined(e)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const b of _t(u))u[b]=[{test:`${l}.length && ${l}[0].unit === ${Qg(t)}`,...u[b]},{value:0}];const{fill:d,fillOpacity:c,cursor:f,...h}=e.mark,p=_t(h).reduce((b,y)=>(b[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],b),{}),g=f??(e.translate?"move":null);return[{name:`${r+Nb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:c}},update:u}},...n,{name:r+Nb,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function Hwt(t,e,n,r){const i=!t.hasProjection,s=n.channel,o=n.signals.visual,a=Tt(i?t.scaleName(s):t.projectionName()),l=f=>`scale(${a}, ${f})`,u=t.getSizeSignalRef(s===fs?"width":"height").signal,d=`${s}(unit)`,c=e.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${d}, ${d}]`},{events:h,update:`[${o}[0], clamp(${d}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=rh.defined(e),p=t.getScaleComponent(s),g=p?p.get("type"):void 0,b=r?{init:A0(r,!0,l)}:{value:[]};return c.push({events:{signal:e.name+cIe},update:Pc(g)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...b,on:c},{name:f,...r?{init:A0(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===fs?0:1,h=e.name+dIe,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:c}]}}function _1({model:t,channelDef:e,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=tC(e)&&e.condition;let o=[];s&&(o=Pt(s).map(u=>{const d=i(u);if(R1t(u)){const{param:c,empty:f}=u;return{test:DIe(t,{param:c,empty:f}),...d}}else return{test:Z3(t,u.test),...d}})),r!==void 0&&o.push(r);const a=i(e);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function e7(t,e="text"){const n=t.encoding[e];return _1({model:t,channelDef:n,vgChannel:e,mainRefFn:r=>pR(r,t.config),invalidValueRef:void 0})}function pR(t,e,n="datum"){if(t){if(Nc(t))return as(t.value);if(Yn(t)){const{format:r,formatType:i}=H3(t);return MB({fieldOrDatumDef:t,format:r,formatType:i,expr:n,config:e})}}}function fIe(t,e={}){const{encoding:n,markDef:r,config:i,stack:s}=t,o=n.tooltip;if(at(o))return{tooltip:J_e({tooltip:o},s,i,e)};{const a=e.reactiveGeom?"datum.datum":"datum";return _1({model:t,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const d=pR(u,i,a);if(d)return d;if(u===null)return;let c=$i("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Nt(c))return{value:c};if(It(c))return cn(c)?c:c.content==="encoding"?J_e(n,s,i,e):{signal:a}},invalidValueRef:void 0})}}function hIe(t,e,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(d,c){const f=G0(c),h=il(d)?d:{...d,type:t[f].type},p=h.title||NB(h,i),g=Pt(p).join(", ").replaceAll(/"/g,'\\"');let b;if(js(c)){const y=c==="x"?"x2":"y2",v=Bc(t[y]);if(Xo(h.bin)&&v){const w=Ft(h,{expr:o}),E=Ft(v,{expr:o}),{format:S,formatType:T}=H3(h);b=QE(w,E,S,T,i),s.add(y)}}if((js(c)||c===Yu||c===Wc)&&e&&e.fieldChannel===c&&e.offset==="normalize"){const{format:y,formatType:v}=H3(h);b=MB({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}b??(b=pR(h,i,o).signal),a.push({channel:c,key:g,value:b})}zB(t,(d,c)=>{kt(d)?l(d,c):iR(d)&&l(d.condition,c)});const u={};for(const{channel:d,key:c,value:f}of a)!s.has(d)&&!u[c]&&(u[c]=f);return u}function J_e(t,e,n,{reactiveGeom:r}={}){const i=hIe(t,e,n,{reactiveGeom:r}),s=im(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Gwt(t){const{markDef:e,config:n}=t,r=$i("aria",e,n);return r===!1?{}:{...r?{aria:r}:{},...Vwt(t),...Wwt(t)}}function Vwt(t){const{mark:e,markDef:n,config:r}=t;if(r.aria===!1)return{};const i=$i("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Yt(pbt,e)?{}:{ariaRoleDescription:{value:e}}}function Wwt(t){const{encoding:e,markDef:n,config:r,stack:i}=t,s=e.description;if(s)return _1({model:t,channelDef:s,vgChannel:"description",mainRefFn:l=>pR(l,t.config),invalidValueRef:void 0});const o=$i("description",n,r);if(o!=null)return{description:as(o)};if(r.aria===!1)return{};const a=hIe(e,i,r);if(!Pi(a))return{description:{signal:im(a).map(([l,u],d)=>`"${d>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Jo(t,e,n={}){const{markDef:r,encoding:i,config:s}=e,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[t];a===void 0&&(l??(l=$i(t,r,s,{vgChannel:o,ignoreVgConfig:!tC(u)})),l!==void 0&&(a=as(l)));const d={markDef:r,config:s,scaleName:e.scaleName(t),scale:e.getScaleComponent(t)},c=eMe({...d,scaleChannel:t,channelDef:u});return _1({model:e,channelDef:u,vgChannel:o??t,invalidValueRef:c,mainRefFn:h=>OB({...d,channel:t,channelDef:h,stack:null,defaultRef:a})})}function pIe(t,e={filled:void 0}){const{markDef:n,encoding:r,config:i}=t,{type:s}=n,o=e.filled??$i("filled",n,i),a=Er(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=$i(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=$i(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],d=o?"fill":"stroke",c={...l?{fill:as(l)}:{},...u?{stroke:as(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&At(S4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...c,...Jo("color",t,{vgChannel:d,defaultValue:o?l:u}),...Jo("fill",t,{defaultValue:r.fill?l:void 0}),...Jo("stroke",t,{defaultValue:r.stroke?u:void 0})}}function Ywt(t){const{encoding:e,mark:n}=t,r=e.order;return!Am(n)&&Nc(r)?_1({model:t,channelDef:r,vgChannel:"zindex",mainRefFn:i=>as(i.value),invalidValueRef:void 0}):{}}function Fv({channel:t,markDef:e,encoding:n={},model:r,bandPosition:i}){const s=`${t}Offset`,o=e[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:OB({channel:s,channelDef:a,markDef:e,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:as(o),bandPosition:i})};const l=e[s];return l?{offsetType:"visual",offset:l}:{}}function Qa(t,e,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=e,l=i[t],u=i[of(t)],d=e.scaleName(t),c=e.getScaleComponent(t),{offset:f,offsetType:h}=Fv({channel:t,markDef:s,encoding:i,model:e,bandPosition:.5}),p=t7({model:e,defaultPos:n,channel:t,scaleName:d,scale:c}),g=!l&&js(t)&&(i.latitude||i.longitude)?{field:e.getName(t)}:Xwt({channel:t,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:d,scale:c,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||t]:g}:void 0}function Xwt(t){const{channel:e,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=t;if(Yn(n)&&i&&e===i.fieldChannel){if(kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(e==="radius"||e==="theta")&&(a=.5),a!==void 0)return j3({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Kg(n,r,{suffix:"end"},{offset:s})}return FB(t)}function t7({model:t,defaultPos:e,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=t;return()=>{const a=G0(n),l=sm(n),u=$i(n,s,o,{vgChannel:l});if(u!==void 0)return P_(n,u);switch(e){case"zeroOrMin":return Q_e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Q_e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:t.width.signal,heightSignal:t.height.signal}},mainChannel:a,config:o});case"mid":return{...t[zl(n)],mult:.5}}}}function Q_e({mainChannel:t,config:e,...n}){const r=Q4e(n),{mode:i}=n;if(r)return r;switch(t){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Zwt={left:"x",center:"xc",right:"x2"},Kwt={top:"y",middle:"yc",bottom:"y2"};function mIe(t,e,n,r="middle"){if(t==="radius"||t==="theta")return sm(t);const i=t==="x"?"align":"baseline",s=$i(i,e,n);let o;return cn(s)?(At(Xbt(i)),o=void 0):o=s,t==="x"?Zwt[o||(r==="top"?"left":"center")]:Kwt[o||r]}function Y3(t,e,{defaultPos:n,defaultPos2:r,range:i}){return i?gIe(t,e,{defaultPos:n,defaultPos2:r}):Qa(t,e,{defaultPos:n})}function gIe(t,e,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=e,o=of(t),a=zl(t),l=Jwt(e,r,o),u=l[a]?mIe(t,i,s):sm(t);return{...Qa(t,e,{defaultPos:n,vgChannel:u}),...l}}function Jwt(t,e,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=t,l=G0(n),u=zl(n),d=sm(n),c=r[l],f=t.scaleName(l),h=t.getScaleComponent(l),{offset:p}=n in r||n in s?Fv({channel:n,markDef:s,encoding:r,model:t}):Fv({channel:l,markDef:s,encoding:r,model:t});if(!c&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const b=zl(n),y=t.markDef[b];return y!=null?{[b]:{value:y}}:{[d]:{field:t.getName(n)}}}const g=Qwt({channel:n,channelDef:c,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[d]:g}:US(n,s)||US(n,{[n]:UI(n,s,a.style),[u]:UI(u,s,a.style)})||US(n,a[i])||US(n,a.mark)||{[d]:t7({model:t,defaultPos:e,channel:n,scaleName:f,scale:h})()}}function Qwt({channel:t,channelDef:e,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return Yn(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?Kg(e,s,{suffix:"start"},{offset:l}):FB({channel:t,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function US(t,e){const n=zl(t),r=sm(t);if(e[r]!==void 0)return{[r]:P_(t,e[r])};if(e[t]!==void 0)return{[r]:P_(t,e[t])};if(e[n]){const i=e[n];if(C0(i))At(qbt(n));else return{[n]:P_(t,i)}}}function fh(t,e){const{config:n,encoding:r,markDef:i}=t,s=i.type,o=of(e),a=zl(e),l=r[e],u=r[o],d=t.getScaleComponent(e),c=d?d.get("type"):void 0,f=i.orient,h=r[a]??r.size??$i("size",i,n,{vgChannel:a}),p=u4e(e),g=s==="bar"&&(e==="x"?f==="vertical":f==="horizontal")||s==="tick"&&(e==="y"?f==="vertical":f==="horizontal");return kt(l)&&(Ji(l.bin)||Xo(l.bin)||l.timeUnit&&!u)&&!(h&&!C0(h))&&!r[p]&&!$o(c)?n_t({fieldDef:l,fieldDef2:u,channel:e,model:t}):(Yn(l)&&$o(c)||g)&&!u?t_t(l,e,t):gIe(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function e_t(t,e,n,r,i,s,o){if(C0(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${e}')`;i.band!==1&&(u=`${i.band} * ${u}`);const d=Hd("minBandSize",{type:o},r);return{signal:d?`max(${Cc(d)}, ${u})`:u}}else i.band!==1&&(At(Qbt(l)),i=void 0)}else return{mult:i.band,field:{group:t}};else{if(cn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(W0(l)&&ui(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:d,tickBandPaddingInner:c}=r.scale,f=zs(l,o==="tick"?c:o==="bar"?u:d);if(cn(f))return{signal:`(1 - (${f.signal})) * ${t}`};if(ui(f))return{signal:`${1-f} * ${t}`}}return{value:XI(r.view,t)-2}}function t_t(t,e,n){var R,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(e),u=n.getScaleComponent(e),d=zl(e),c=of(e),f=u4e(e),h=n.scaleName(f),p=n.getScaleComponent(sB(e)),g=r.type==="tick"||a==="horizontal"&&e==="y"||a==="vertical"&&e==="x";let b;(i.size||r.size)&&(g?b=Jo("size",n,{vgChannel:d,defaultRef:as(r.size)}):At(rvt(r.type)));const y=!!b,v=aMe({channel:e,fieldDef:t,markDef:r,config:s,scaleType:(R=u||p)==null?void 0:R.get("type"),useVlSizeChannel:g});b=b||{[d]:e_t(d,h||l,p||u,s,v,!!t,r.type)};const w=((O=u||p)==null?void 0:O.get("type"))==="band"&&C0(v)&&!y?"top":"middle",E=mIe(e,r,s,w),S=E==="xc"||E==="yc",{offset:T,offsetType:D}=Fv({channel:e,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),k=FB({channel:e,channelDef:t,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:T,defaultRef:t7({model:n,defaultPos:"mid",channel:e,scaleName:l,scale:u}),bandPosition:S?D==="encoding"?0:.5:cn(v)?{signal:`(1-${v})/2`}:C0(v)?(1-v.band)/2:0});if(d)return{[E]:k,...b};{const B=sm(c),K=b[d],L=T?{...K,offset:T}:K;return{[E]:k,[B]:at(k)?[k[0],{...k[1],offset:L}]:{...k,offset:L}}}}function e2e(t,e,n,r,i,s,o){if(r4e(t))return 0;const a=t==="x"||t==="y2",l=a?-e/2:e/2;if(cn(n)||cn(i)||cn(r)||s){const u=Cc(n),d=Cc(i),c=Cc(r),f=Cc(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,g=c?`${c} + `:"",b=u?`(${u} ? -1 : 1) * `:"",y=d?`(${d} + ${p})`:p;return{signal:g+b+y}}else return i=i||0,r+(n?-i-l:+i+l)}function n_t({fieldDef:t,fieldDef2:e,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,d=a.get("reverse"),c=aMe({channel:n,fieldDef:t,markDef:s,config:i,scaleType:u}),f=(O=r.component.axes[n])==null?void 0:O[0],h=(f==null?void 0:f.get("translate"))??.5,p=js(n)?$i("binSpacing",s,i)??0:0,g=of(n),b=sm(n),y=sm(g),v=Hd("minBandSize",s,i),{offset:w}=Fv({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=Fv({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),S=S1t({fieldDef:t,scaleName:l}),T=e2e(n,p,d,h,w,v,S),D=e2e(g,p,d,h,E??w,v,S),k=cn(c)?{signal:`(1-${c.signal})/2`}:C0(c)?(1-c.band)/2:.5,R=om({fieldDef:t,fieldDef2:e,markDef:s,config:i});if(Ji(t.bin)||t.timeUnit){const B=t.timeUnit&&R!==.5;return{[y]:t2e({fieldDef:t,scaleName:l,bandPosition:k,offset:D,useRectOffsetField:B}),[b]:t2e({fieldDef:t,scaleName:l,bandPosition:cn(k)?{signal:`1-${k.signal}`}:1-k,offset:T,useRectOffsetField:B})}}else if(Xo(t.bin)){const B=Kg(t,l,{},{offset:D});if(kt(e))return{[y]:B,[b]:Kg(e,l,{},{offset:T})};if(V0(t.bin)&&t.bin.step)return{[y]:B,[b]:{signal:`scale("${l}", ${Ft(t,{expr:"datum"})} + ${t.bin.step})`,offset:T}}}At(T4e(g))}function t2e({fieldDef:t,scaleName:e,bandPosition:n,offset:r,useRectOffsetField:i}){return j3({scaleName:e,fieldOrDatumDef:t,bandPosition:n,offset:r,...i?{startSuffix:fR,endSuffix:hR}:{}})}const r_t=new Set(["aria","width","height"]);function Xu(t,e){const{fill:n=void 0,stroke:r=void 0}=e.color==="include"?pIe(t):{};return{...i_t(t.markDef,e),...n2e("fill",n),...n2e("stroke",r),...Jo("opacity",t),...Jo("fillOpacity",t),...Jo("strokeOpacity",t),...Jo("strokeWidth",t),...Jo("strokeDash",t),...Ywt(t),...fIe(t),...e7(t,"href"),...Gwt(t)}}function n2e(t,e){return e?{[t]:e}:{}}function i_t(t,e){return hbt.reduce((n,r)=>(!r_t.has(r)&&Ct(t,r)&&e[r]!=="ignore"&&(n[r]=as(t[r])),n),{})}function n7(t){const{config:e,markDef:n}=t,r=new Set;if(t.forEachFieldDef((i,s)=>{var u;let o;if(!af(s)||!(o=t.getScaleType(s)))return;const a=WL(i.aggregate),l=RB({scaleChannel:s,markDef:n,config:e,scaleType:o,isCountAggregate:a});if(_1t(l)){const d=t.vgField(s,{expr:"datum",binSuffix:(u=t.stack)!=null&&u.impute?"mid":void 0});d&&r.add(d)}}),r.size>0)return{defined:{signal:[...r].map(s=>KL(s,!0)).join(" && ")}}}function r2e(t,e){if(e!==void 0)return{[t]:as(e)}}const kO="voronoi",yIe={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(kO)},marks:(t,e,n)=>{const{x:r,y:i}=e.project.hasChannel,s=t.mark;if(Am(s))return At(vbt(s)),n;const o={name:t.getName(kO),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...fIe(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,d)=>{const c=u.name??"";c===t.component.mark[0].name?a=d:c.includes(kO)&&(l=!0)}),l||n.splice(a+1,0,o),n}},bIe={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!VB(t.bind),parse:(t,e,n)=>AIe(e,n),topLevelSignals:(t,e,n)=>{const r=e.name,i=e.project,s=e.bind,o=e.init&&e.init[0],a=yIe.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const d=ds(`${r}_${l.field}`);n.filter(f=>f.name===d).length||n.unshift({name:d,...o?{init:A0(o[u])}:{value:null},on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Tt(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(t,e,n)=>{const r=e.name,i=e.project,s=n.find(u=>u.name===r+hh),o=r+sC,a=i.items.map(u=>ds(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},X3="_toggle",vIe={defined:t=>t.type==="point"&&!Fd(t)&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+X3,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+hh,r=e.name+X3;return`${r} ? null : ${n}, `+(e.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Qg(t)}}, `)+`${r} ? ${n} : null`}},s_t={defined:t=>t.clear!==void 0&&t.clear!==!1&&!Fd(t),parse:(t,e)=>{e.clear&&(e.clear=Nt(e.clear)?bm(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(bIe.defined(e))for(const r of e.project.items){const i=n.findIndex(s=>s.name===ds(`${e.name}_${r.field}`));i!==-1&&n[i].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:e.clear,update:s})}if(e.type==="interval")for(const i of e.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===e.name+hh);r(i,"null"),vIe.defined(e)&&(i=n.findIndex(s=>s.name===e.name+X3),r(i,"false"))}return n}},xIe={defined:t=>{const e=t.resolve==="global"&&t.bind&&VB(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==zc;return e&&!n&&At(Ebt),e&&n},parse:(t,e,n)=>{const r=Vn(n);if(r.select=Nt(r.select)?{type:r.select,toggle:e.toggle}:{...r.select,toggle:e.toggle},AIe(e,r),It(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of e.events)a.filter=Pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=wO(e.bind)?e.bind.legend:"click",s=Nt(i)?bm(i,"view"):Pt(i);e.bind={legend:{merge:s}}},topLevelSignals:(t,e,n)=>{const r=e.name,i=wO(e.bind)&&e.bind.legend,s=o=>a=>{const l=Vn(a);return l.markname=o,l};for(const o of e.project.items){if(!o.hasLegend)continue;const a=`${ds(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(d=>d.name===l).length===0){const d=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...e.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(t,e,n)=>{const r=e.name,i=e.project,s=n.find(f=>f.name===r+hh),o=r+sC,a=i.items.filter(f=>f.hasLegend).map(f=>ds(`${r}_${ds(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const d=n.find(f=>f.name===r+X3),c=wO(e.bind)&&e.bind.legend;return d&&(e.events?d.on.push({...d.on[0],events:c}):d.on[0].events=c),n}};function o_t(t,e,n){var i;const r=(i=t.fieldDef(e))==null?void 0:i.field;for(const s of ra(t.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[e];if(o&&xIe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const wIe="_translate_anchor",_Ie="_translate_delta",a_t={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,n)=>{const r=e.name,i=rh.defined(e),s=r+wIe,{x:o,y:a}=e.project.hasChannel;let l=bm(e.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Nb,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?e6(t,fs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?e6(t,No):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+_Ie,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&i2e(t,e,o,"width",n),a!==void 0&&i2e(t,e,a,"height",n),n}};function i2e(t,e,n,r,i){const s=e.name,o=s+wIe,a=s+_Ie,l=n.channel,u=rh.defined(e),d=i.find(S=>S.name===n.signals[u?"data":"visual"]),c=t.getSizeSignalRef(r).signal,f=t.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),g=u?l===fs?p?"":"-":p?"-":"":"",b=`${o}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${c}`:`span(${b})`}`,v=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",E=`${v}(${b}, ${y}${w})`;d.on.push({events:{signal:a},update:u?E:`clampRange(${E}, 0, ${c})`})}const EIe="_zoom_anchor",CIe="_zoom_delta",l_t={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,n)=>{const r=e.name,i=rh.defined(e),s=r+CIe,{x:o,y:a}=e.project.hasChannel,l=Tt(t.scaleName(fs)),u=Tt(t.scaleName(No));let d=bm(e.zoom,"scope");return i||(d=d.map(c=>(c.markname=r+Nb,c))),n.push({name:r+EIe,on:[{events:d,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(c=>c).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&s2e(t,e,o,"width",n),a!==void 0&&s2e(t,e,a,"height",n),n}};function s2e(t,e,n,r,i){const s=e.name,o=n.channel,a=rh.defined(e),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=t.getSizeSignalRef(r).signal,d=t.getScaleComponent(o),c=d&&d.get("type"),f=a?e6(t,o):l.name,h=s+CIe,p=`${s}${EIe}.${o}`,g=!a||!d?"zoomLinear":c==="log"?"zoomLog":c==="symlog"?"zoomSymlog":c==="pow"?"zoomPow":"zoomLinear",b=a?c==="pow"?`, ${d.get("exponent")??1}`:c==="symlog"?`, ${d.get("constant")??1}`:"":"",y=`${g}(${f}, ${p}, ${h}${b})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const k0="_store",hh="_tuple",u_t="_modify",SIe="vlSelectionResolve",mR=[Iwt,qwt,Fwt,vIe,bIe,rh,xIe,s_t,a_t,l_t,yIe];function c_t(t){let e=t.parent;for(;e&&!au(e);)e=e.parent;return e}function Qg(t,{escape:e}={escape:!0}){let n=e?Tt(t.name):t.name;const r=c_t(t);if(r){const{facet:i}=r;for(const s of Iu)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Tt(r.vgField(s))}])`)}return n}function r7(t){return ra(t.component.selection??{}).reduce((e,n)=>e||n.project.hasSelectionId,!1)}function AIe(t,e){(Nt(e.select)||!e.select.on)&&delete t.events,(Nt(e.select)||!e.select.clear)&&delete t.clear,(Nt(e.select)||!e.select.toggle)&&delete t.toggle}function Fd(t){var e;return(e=t.events)==null?void 0:e.find(n=>"type"in n&&n.type==="timer")}function n6(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...n6(t.object)),e.push(...n6(t.property))),e)}function kIe(t){return t.object.type==="MemberExpression"?kIe(t.object):t.object.name==="datum"}function TIe(t){const e=w9(t),n=new Set;return e.visit(r=>{r.type==="MemberExpression"&&kIe(r)&&n.add(n6(r).slice(1).join("."))}),n}class E1 extends Ri{clone(){return new E1(null,this.model,Vn(this.filter))}constructor(e,n,r){super(e),this.model=n,this.filter=r,this.expr=Z3(this.model,this.filter,this),this._dependentFields=TIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function d_t(t,e){const n={},r=t.config.selection;if(!e||!e.length)return n;let i=0;for(const s of e){const o=ds(s.name),a=s.select,l=Nt(a)?a:a.type,u=It(a)?Vn(a):{type:l},d=r[l];for(const h in d)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...d.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=Vn(d[h]??u[h])));const c=n[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:Nt(u.on)?bm(u.on,"scope"):Pt(Vn(u.on))};if(Fd(c)&&(i++,i>1)){delete n[o];continue}const f=Vn(s);for(const h of mR)h.defined(c)&&h.parse&&h.parse(t,c,f)}return i>1&&At(Dbt),n}function DIe(t,e,n,r="datum"){const i=Nt(e)?e:e.param,s=ds(i),o=Tt(s+k0);let a;try{a=t.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??t.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Tt(a.resolve)})`,d=`${l}${o}, ${r}${u}`,c=`length(data(${o}))`;return e.empty===!1?`${c} && ${d}`:`!${c} || ${d}`}function LIe(t,e,n){const r=ds(e),i=n.encoding;let s=n.field,o;try{o=t.getSelectionComponent(r,e)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&At(Lbt(s));else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,At(Rbt(a,i,n,s))):s=a[0].field}return`${o.name}[${Tt(Hu(s))}]`}function f_t(t,e){for(const[n,r]of im(t.component.selection??{})){const i=t.getName(`lookup_${n}`);t.component.data.outputNodes[i]=r.materialized=new Ml(new E1(e,t,{param:n}),i,xs.Lookup,t.component.data.outputNodeRefCounts)}}function Z3(t,e,n){return $_(e,r=>Nt(r)?r:zvt(r)?DIe(t,r,n):z4e(r))}function h_t(t,e){if(t)return at(t)&&!mp(t)?t.map(n=>NB(n,e)).join(", "):t}function TO(t,e,n,r){var i,s;t.encode??(t.encode={}),(i=t.encode)[e]??(i[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[n]=r}function c_(t,e,n,r={header:!1}){var c,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...d}=t.combine();if(!i){for(const h in d){const p=h,g=G1t[p],b=d[p];if(g&&g!==e&&g!=="both")delete d[p];else if(iC(b)){const{condition:y,...v}=b,w=Pt(y),E=O_e[p];if(E){const{vgProp:S,part:T}=E,D=[...w.map(k=>{const{test:R,...O}=k;return{test:Z3(null,R),...O}}),v];TO(d,T,S,D),delete d[p]}else if(E===null){const S={signal:w.map(T=>{const{test:D,...k}=T;return`${Z3(null,D)} ? ${y_e(k)} : `}).join("")+y_e(v)};d[p]=S}}else if(cn(b)){const y=O_e[p];if(y){const{vgProp:v,part:w}=y;TO(d,w,v,b),delete d[p]}}Er(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(e==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},Pi(d.encode)&&delete d.encode}return{scale:o,orient:s,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zs(u,0)}}else{if(!r.header&&t.mainExtracted)return;if(a!==void 0){let p=a;(f=(c=d.encode)==null?void 0:c.labels)!=null&&f.update&&cn(d.encode.labels.update.text)&&(p=v0(a,"datum.label",d.encode.labels.update.text.signal)),TO(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of yMe)t.hasAxisPart(p)||delete d.encode[p];Pi(d.encode)&&delete d.encode}const h=h_t(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:zs(u,0)}}}}function RIe(t){const{axes:e}=t.component,n=[];for(const r of Ah)if(e[r]){for(const i of e[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=t.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function p_t(t,e){const{x:n=[],y:r=[]}=t;return[...n.map(i=>c_(i,"grid",e)),...r.map(i=>c_(i,"grid",e)),...n.map(i=>c_(i,"main",e)),...r.map(i=>c_(i,"main",e))].filter(i=>i)}function o2e(t,e,n,r){return Object.assign.apply(null,[{},...t.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=e[n==="x"?"axisBottom":"axisLeft"]||{},a=e[n==="x"?"axisTop":"axisRight"]||{},l=new Set([..._t(o),..._t(a)]),u={};for(const d of l.values())u[d]={signal:`${r.signal} === "${s}" ? ${Cc(o[d])} : ${Cc(a[d])}`};return u}return e[i]})])}function m_t(t,e,n,r){const i=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:H4e(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],s=t==="x"?"axisX":"axisY",o=cn(n)?"axisOrient":`axis${WE(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:o2e(a,r,t,n),vgAxisConfig:o2e(l,r,t,n),axisConfigStyle:g_t([...l,...a],r)}}function g_t(t,e){var r;const n=[{}];for(const i of t){let s=(r=e[i])==null?void 0:r.style;if(s){s=Pt(s);for(const o of s)n.push(e.style[o])}}return Object.assign.apply(null,n)}function r6(t,e,n,r={}){var s;const i=b4e(t,n,e);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[t])!==void 0)return{configFrom:o,configValue:r[o][t]};return{}}const a2e={scale:({model:t,channel:e})=>t.scaleName(e),format:({format:t})=>t,formatType:({formatType:t})=>t,grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>e.grid??y_t(n,t),gridScale:({model:t,channel:e})=>b_t(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelAlign||OIe(e,n,r),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:r})=>t.labelBaseline||FIe(e,n,r),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>t.labelFlush??x_t(e.type,n),labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>t.labelOverlap??w_t(e.type,n,kt(e)&&!!e.timeUnit,kt(e)?e.sort:void 0),orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=t==="x"?"width":t==="y"?"height":void 0,o=s?e.getSizeSignalRef(s):void 0;return n.tickCount??E_t({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:C_t,title:({axis:t,model:e,channel:n})=>{if(t.title!==void 0)return t.title;const r=MIe(e,n);if(r!==void 0)return r;const i=e.typedFieldDef(n),s=n==="x"?"x2":"y2",o=e.fieldDef(s);return x4e(i?[R_e(i)]:[],kt(o)?[R_e(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>S_t(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>t.zindex??A_t(n,e)};function y_t(t,e){return!$o(t)&&kt(e)&&!Ji(e==null?void 0:e.bin)&&!Xo(e==null?void 0:e.bin)}function b_t(t,e){const n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function v_t(t,e,n,r,i){const s=e==null?void 0:e.labelAngle;if(s!==void 0)return cn(s)?s:D2(s);{const{configValue:o}=r6("labelAngle",r,e==null?void 0:e.style,i);return o!==void 0?D2(o):n===fs&&Er([AB,SB],t.type)&&!(kt(t)&&t.timeUnit)?270:void 0}}function i6(t){return`(((${t.signal} % 360) + 360) % 360)`}function FIe(t,e,n,r){if(t!==void 0)if(n==="x"){if(cn(t)){const i=i6(t),s=cn(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(cn(e)){const i=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${i} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(cn(t)){const i=i6(t),s=cn(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return r?"middle":null;if(cn(e)){const i=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function OIe(t,e,n){if(t===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(cn(t)){const o=i6(t),a=cn(e)?`(${e.signal} === "${s}")`:e===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((t+i)%180===0)return r?null:"center";if(cn(e)){const o=i<t&&t<180+i?"===":"!==";return{signal:`${`${e.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<t&&t<180+i)==(e===s)?"left":"right"}function x_t(t,e){if(e==="x"&&Er(["quantitative","temporal"],t))return!0}function w_t(t,e,n,r){if(n&&!It(r)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function __t(t){return t==="x"?"bottom":"left"}function E_t({fieldOrDatumDef:t,scaleType:e,size:n,values:r}){var i;if(!r&&!$o(e)&&e!=="log"){if(kt(t)){if(Ji(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&Er(["month","hours","day","quarter"],(i=Mo(t.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function C_t({format:t,fieldOrDatumDef:e}){if(t==="d")return 1;if(kt(e)){const{timeUnit:n}=e;if(n){const r=P4e(n);if(r)return{signal:r}}}}function MIe(t,e){const n=e==="x"?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return w4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function S_t(t,e){const n=t.values;if(at(n))return gMe(e,n);if(cn(n))return n}function A_t(t,e){return t==="rect"&&q3(e)?1:0}class Ov extends Ri{clone(){return new Ov(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this._dependentFields=TIe(this.transform.calculate)}static parseAllForSortIndex(e,n){return n.forEachFieldDef((r,i)=>{if(Z0(r)&&oMe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,d)=>`${z4e({field:s,timeUnit:o,equal:u})} ? ${d} : `).join("")+a.length;e=new Ov(e,{calculate:l,as:Mv(r,i,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mr(this.transform)}`}}function Mv(t,e,n){return Ft(t,{prefix:e,suffix:"sort_index",...n})}function gR(t,e){return Er(["top","bottom"],e)?"column":Er(["left","right"],e)||t==="row"?"row":"column"}function Iv(t,e,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return zs((e||{})[t],i[t],n.header[t])}function yR(t,e,n,r){const i={};for(const s of t){const o=Iv(s,e||{},n,r);o!==void 0&&(i[s]=o)}return i}const i7=["row","column"],s7=["header","footer"];function k_t(t,e){const n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=yR(["titleAnchor","titleAngle","titleOrient"],i.header,r,e),l=gR(e,a),u=D2(o);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:{text:n,...e==="row"?{orient:"left"}:{},style:"guide-title",...$Ie(u,l),...IIe(l,u,s),...PIe(r,i,e,hxt,IMe)}}}function IIe(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=OIe(e,t==="row"?"left":"top",t==="row"?"y":"x");return r?{align:r}:{}}function $Ie(t,e){const n=FIe(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return n?{baseline:n}:{}}function T_t(t,e){const n=t.component.layoutHeaders[e],r=[];for(const i of s7)if(n[i])for(const s of n[i]){const o=L_t(t,e,i,n,s);o!=null&&r.push(o)}return r}function D_t(t,e){const{sort:n}=t;return nh(n)?{field:Ft(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:Mv(t,e,{expr:"datum"}),order:"ascending"}:{field:Ft(t,{expr:"datum"}),order:n??"ascending"}}function s6(t,e,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=yR(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=MB({fieldOrDatumDef:t,format:r,formatType:i,expr:"parent",config:n}).signal,d=gR(e,a);return{text:{signal:l?v0(v0(l,"datum.label",u),"datum.value",Ft(t,{expr:"parent"})):u},...e==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...$Ie(s,d),...IIe(d,s,o),...PIe(n,t,e,pxt,$Me)}}function L_t(t,e,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=t.config?t.config:void 0;if(o&&i.labels){const{labelOrient:c}=yR(["labelOrient"],o.header,a,e);(e==="row"&&!Er(["top","bottom"],c)||e==="column"&&!Er(["left","right"],c))&&(s=s6(o,e,a))}const l=au(t)&&!eC(t.facet),u=i.axes,d=(u==null?void 0:u.length)>0;if(s||d){const c=e==="row"?"height":"width";return{name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`,...r.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:D_t(o,e)}:{},...d&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[c]:i.sizeSignal}}}:{},...d?{axes:u}:{}}}}return null}const R_t={column:{start:0,end:1},row:{start:1,end:0}};function F_t(t,e){return R_t[e][t]}function O_t(t,e){const n={};for(const r of Iu){const i=t[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=yR(["titleAnchor","titleOrient"],i.facetFieldDef.header,e,r),a=gR(r,o),l=F_t(s,a);l!==void 0&&(n[a]=l)}}return Pi(n)?void 0:n}function PIe(t,e,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Iv(o,e==null?void 0:e.header,t,n);a!==void 0&&(s[i[o]]=a)}return s}function o7(t){return[...qS(t,"width"),...qS(t,"height"),...qS(t,"childWidth"),...qS(t,"childHeight")]}function qS(t,e){const n=e==="width"?"x":"y",r=t.component.layoutSize.get(e);if(!r||r==="merged")return[];const i=t.getSizeSignalRef(e).signal;if(r==="step"){const s=t.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if($o(o)&&W0(a)){const l=t.scaleName(n);return au(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[l2e(l,a)]:[l2e(l,a),{name:i,update:NIe(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=YI(t.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function l2e(t,e){const n=`${t}_step`;return cn(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function NIe(t,e,n){const r=e.get("type"),i=e.get("padding"),s=zs(e.get("paddingOuter"),i);let o=e.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Cc(o)}, ${Cc(s)}) * ${t}_step`}function BIe(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function zIe(t,e){return _t(t).reduce((n,r)=>({...n,..._1({model:e,channelDef:t[r],vgChannel:r,mainRefFn:i=>as(i.value),invalidValueRef:void 0})}),{})}function jIe(t,e){if(au(e))return t==="theta"?"independent":"shared";if(A1(e))return"shared";if(h7(e))return js(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function a7(t,e){const n=t.scale[e],r=js(e)?"axis":"legend";return n==="independent"?(t[r][e]==="shared"&&At(lvt(e)),"independent"):t[r][e]||"shared"}const M_t={...yxt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},UIe=_t(M_t);class I_t extends Th{}const u2e={symbols:$_t,gradient:P_t,labels:N_t,entries:B_t};function $_t(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,d=o.filled&&u!=="trail";let c={...gbt({},n,f1t),...pIe(n,{filled:d})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=f===void 0?qIe(a.opacity)??o.opacity:void 0;if(c.fill){if(r==="fill"||d&&r===Nl)delete c.fill;else if(Ct(c.fill,"field"))h?delete c.fill:(c.fill=as(l.legend.symbolBaseFillColor??"black"),c.fillOpacity=as(g??1));else if(at(c.fill)){const b=o6(a.fill??a.color)??o.fill??(d&&o.color);b&&(c.fill=as(b))}}if(c.stroke){if(r==="stroke"||!d&&r===Nl)delete c.stroke;else if(Ct(c.stroke,"field")||p)delete c.stroke;else if(at(c.stroke)){const b=zs(o6(a.stroke||a.color),o.stroke,d?o.color:void 0);b&&(c.stroke={value:b})}}if(r!==Sh){const b=kt(e)&&GIe(n,i,e);b?c.opacity=[{test:b,...as(g??1)},as(l.legend.unselectedOpacity)]:g&&(c.opacity=as(g))}return c={...c,...t},Pi(c)?void 0:c}function P_t(t,{model:e,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=e;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?qIe(o.opacity)||s.opacity:void 0;return u&&(a.opacity=as(u)),a={...a,...t},Pi(a)?void 0:a}function N_t(t,{fieldOrDatumDef:e,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=kt(e)?GIe(n,i,e):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:d}=s;let c;S0(d)?c=Sc({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:d,config:o}):u===void 0&&d===void 0&&o.customFormatTypes&&(e.type==="quantitative"&&o.numberFormatType?c=Sc({fieldOrDatumDef:e,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):e.type==="temporal"&&o.timeFormatType&&kt(e)&&e.timeUnit===void 0&&(c=Sc({fieldOrDatumDef:e,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...c?{text:c}:{},...t};return Pi(f)?void 0:f}function B_t(t,{legendCmpt:e}){const n=e.get("selections");return n!=null&&n.length?{...t,fill:{value:"transparent"}}:t}function qIe(t){return HIe(t,(e,n)=>Math.max(e,n.value))}function o6(t){return HIe(t,(e,n)=>zs(e,n.value))}function HIe(t,e){if(O1t(t))return Pt(t.condition).reduce(e,t.value);if(Nc(t))return t.value}function GIe(t,e,n){const r=e.get("selections");if(!(r!=null&&r.length))return;const i=Tt(n.field);return r.map(s=>`(!length(data(${Tt(ds(s)+k0)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const c2e={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:r,formatType:i}=e;return rMe(t,t.type,r,i,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:r}=t;return iMe(r,e,n)},gradientLength:t=>{const{legend:e,legendConfig:n}=t;return e.gradientLength??n.gradientLength??V_t(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>t.labelOverlap??e.labelOverlap??W_t(n),symbolType:({legend:t,markDef:e,channel:n,encoding:r})=>t.symbolType??j_t(e.type,n,r.shape,e.shape),title:({fieldOrDatumDef:t,config:e})=>Pb(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if($b(n)&&Ad(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>z_t(e,t)};function z_t(t,e){const n=t.values;if(at(n))return gMe(e,n);if(cn(n))return n}function j_t(t,e,n,r){if(e!=="shape"){const i=o6(n)??r;if(i)return i}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function U_t(t){const{legend:e}=t;return zs(e.type,q_t(t))}function q_t({channel:t,timeUnit:e,scaleType:n}){if($b(t)){if(Er(["quarter","month","day"],e))return"symbol";if(Ad(n))return"gradient"}return"symbol"}function H_t({legendConfig:t,legendType:e,orient:n,legend:r}){return r.direction??t[e?"gradientDirection":"symbolDirection"]??G_t(n,e)}function G_t(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function V_t({legendConfig:t,model:e,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=t;if(Ad(i))return n==="horizontal"?r==="top"||r==="bottom"?d2e(e,"width",o,s):o:d2e(e,"height",l,a)}function d2e(t,e,n,r){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${r})`}}function W_t(t){if(Er(["quantile","threshold","log","symlog"],t))return"greedy"}function VIe(t){const e=vs(t)?Y_t(t):J_t(t);return t.component.legends=e,e}function Y_t(t){const{encoding:e}=t,n={};for(const r of[Nl,...NMe]){const i=bo(e[r]);!i||!t.getScaleComponent(r)||r===Bl&&kt(i)&&i.type===w1||(n[r]=K_t(t,r))}return n}function X_t(t,e){const n=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:n};if(e==="size")return{strokeWidth:n}}return e==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function Z_t(t,e,n,r){switch(e){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(e==="title"&&t===(r==null?void 0:r.title))return!0}return t===(n||{})[e]}function K_t(t,e){var E;let n=t.legend(e);const{markDef:r,encoding:i,config:s}=t,o=s.legend,a=new I_t({},X_t(t,e));o_t(t,e,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=t.getScaleComponent(e).get("type"),d=bo(i[e]),c=kt(d)?(E=Mo(d.timeUnit))==null?void 0:E.unit:void 0,f=n.orient||s.legend.orient||"right",h=U_t({legend:n,channel:e,timeUnit:c,scaleType:u}),p=H_t({legend:n,legendType:h,orient:f,legendConfig:o}),g={legend:n,channel:e,model:t,markDef:r,encoding:i,fieldOrDatumDef:d,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const S of UIe){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const T=S in c2e?c2e[S](g):n[S];if(T!==void 0){const D=Z_t(T,S,n,t.fieldDef(e));(D||s.legend[S]===void 0)&&a.set(S,T,D)}}const b=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},w={fieldOrDatumDef:d,model:t,channel:e,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const T=zIe(b[S]??{},t),D=S in u2e?u2e[S](T,w):T;D!==void 0&&!Pi(D)&&(v[S]={...y!=null&&y.length&&kt(d)?{name:`${ds(d.field)}_legend_${S}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:D})}return Pi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function J_t(t){const{legends:e,resolve:n}=t.component;for(const r of t.children){VIe(r);for(const i of _t(r.component.legends))n.legend[i]=a7(t.component.resolve,i),n.legend[i]==="shared"&&(e[i]=WIe(e[i],r.component.legends[i]),e[i]||(n.legend[i]="independent",delete e[i]))}for(const r of _t(e))for(const i of t.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return e}function WIe(t,e){var s,o,a,l;if(!t)return e.clone();const n=t.getWithExplicit("orient"),r=e.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of UIe){const d=am(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(c,f)=>{switch(u){case"symbolType":return Q_t(c,f);case"title":return _4e(c,f);case"type":return i=!0,Vl("symbol")}return dR(c,f,u,"legend")});t.setWithExplicit(u,d)}return i&&((o=(s=t.implicit)==null?void 0:s.encode)!=null&&o.gradient&&N3(t.implicit,["encode","gradient"]),(l=(a=t.explicit)==null?void 0:a.encode)!=null&&l.gradient&&N3(t.explicit,["encode","gradient"])),t}function Q_t(t,e){return e.value==="circle"?e:t}function e2t(t,e,n,r){var i,s;t.encode??(t.encode={}),(i=t.encode)[e]??(i[e]={}),(s=t.encode[e]).update??(s.update={}),t.encode[e].update[n]=r}function YIe(t){const e=t.component.legends,n={};for(const i of _t(e)){const s=t.getScaleComponent(i),o=Ni(s.get("domains"));if(n[o])for(const a of n[o])WIe(a,e[i])||n[o].push(e[i]);else n[o]=[e[i].clone()]}return ra(n).flat().map(i=>t2t(i,t.config)).filter(i=>i!==void 0)}function t2t(t,e){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=t.combine();if(!n){if(e.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const d of NMe)s[d]&&delete u[d]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&cn(s.encode.labels.update.text)&&(u=v0(r,"datum.label",s.encode.labels.update.text.signal)),e2t(s,"labels","text",{signal:u})}return s}}function n2t(t){return A1(t)||h7(t)?r2t(t):XIe(t)}function r2t(t){return t.children.reduce((e,n)=>e.concat(n.assembleProjections()),XIe(t))}function XIe(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:r}=n;if(e.data){const i={signal:`[${e.size.map(o=>o.signal).join(", ")}]`},s=e.data.reduce((o,a)=>{const l=cn(a)?a.signal:`data('${t.lookupDataSource(a)}')`;return Er(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const i2t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ZIe extends Th{constructor(e,n,r,i){super({...n},{name:e}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function KIe(t){t.component.projection=vs(t)?s2t(t):l2t(t)}function s2t(t){if(t.hasProjection){const e=Zo(t.specifiedProjection),n=!(e&&(e.scale!=null||e.translate!=null)),r=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,i=n?o2t(t):void 0,s=new ZIe(t.projectionName(!0),{...Zo(t.config.projection),...e},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function o2t(t){const e=[],{encoding:n}=t;for(const r of[[Xc,Yc],[Gu,Zc]])(bo(n[r[0]])||bo(n[r[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Bl)&&t.typedFieldDef(Bl).type===w1&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(xs.Main)),e}function a2t(t,e){const n=J9(i2t,i=>!!(!Yt(t.explicit,i)&&!Yt(e.explicit,i)||Yt(t.explicit,i)&&Yt(e.explicit,i)&&tu(t.get(i),e.get(i))));if(tu(t.size,e.size)){if(n)return t;if(tu(t.explicit,{}))return e;if(tu(e.explicit,{}))return t}return null}function l2t(t){if(t.children.length===0)return;let e;for(const r of t.children)KIe(r);const n=J9(t.children,r=>{const i=r.component.projection;if(i)if(e){const s=a2t(e,i);return s&&(e=s),!!s}else return e=i,!0;else return!0});if(e&&n){const r=t.projectionName(!0),i=new ZIe(r,e.specifiedProjection,e.size,Vn(e.data));for(const s of t.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function u2t(t,e,n,r){if(rC(e,n)){const i=vs(t)?t.axis(n)??t.legend(n)??{}:{},s=Ft(e,{expr:"datum"}),o=Ft(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Ft(e,{binSuffix:"range",forAs:!0}),formula:QE(s,o,i.format,i.formatType,r)}}return{}}function JIe(t,e){return`${p4e(t)}_${e}`}function c2t(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function l7(t,e,n){const r=sR(n,void 0)??{},i=JIe(r,e);return t.getName(`${i}_bins`)}function d2t(t){return"as"in t}function f2e(t,e,n){let r,i;d2t(t)?r=Nt(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:r=[Ft(t,{forAs:!0}),Ft(t,{binSuffix:"end",forAs:!0})];const s={...sR(e,void 0)},o=JIe(s,t.field),{signal:a,extentSignal:l}=c2t(n,o);if(YL(s.extent)){const d=s.extent;i=LIe(n,d.param,d),delete s.extent}const u={bin:s,field:t.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class Od extends Ri{clone(){return new Od(null,Vn(this.bins))}constructor(e,n){super(e),this.bins=n}static makeFromEncoding(e,n){const r=n.reduceFieldDef((i,s,o)=>{if(il(s)&&Ji(s.bin)){const{key:a,binComponent:l}=f2e(s,s.bin,n);i[a]={...l,...i[a],...u2t(n,s,o,n.config)}}return i},{});return Pi(r)?null:new Od(e,r)}static makeFromTransform(e,n,r){const{key:i,binComponent:s}=f2e(n,n.bin,r);return new Od(e,{[i]:s})}merge(e,n){for(const r of _t(e.bins))r in this.bins?(n(e.bins[r].signal,this.bins[r].signal),this.bins[r].as=Sd([...this.bins[r].as,...e.bins[r].as],Mr)):this.bins[r]=e.bins[r];for(const r of e.children)e.removeChild(r),r.parent=this;e.remove()}producedFields(){return new Set(ra(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(ra(this.bins).map(e=>e.field))}hash(){return`Bin ${Mr(this.bins)}`}assemble(){return ra(this.bins).flatMap(e=>{const n=[],[r,...i]=e.as,{extent:s,...o}=e.bin,a={type:"bin",field:Hu(e.field),as:r,signal:e.signal,...YL(s)?{extent:null}:{extent:s},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!s&&e.extentSignal&&(n.push({type:"extent",field:Hu(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ft({field:r[u]},{expr:"datum"}),as:l[u]});return e.formula&&n.push({type:"formula",expr:e.formula,as:e.formulaAs}),n})}}function f2t(t,e,n,r){var s;const i=vs(r)?r.encoding[of(e)]:void 0;if(il(n)&&vs(r)&&lMe(n,i,r.markDef,r.config)){t.add(Ft(n,{})),t.add(Ft(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=om({fieldDef:n,markDef:a,config:l});L2(o)&&u!==.5&&js(e)&&(t.add(Ft(n,{suffix:fR})),t.add(Ft(n,{suffix:hR}))),n.bin&&rC(n,e)&&t.add(Ft(n,{binSuffix:"range"}))}else if(s4e(e)){const o=i4e(e);t.add(r.getName(o))}else t.add(Ft(n));return Z0(n)&&Qvt((s=n.scale)==null?void 0:s.range)&&t.add(n.scale.range.field),t}function h2t(t,e){for(const n of _t(e)){const r=e[n];for(const i of _t(r))n in t?t[n][i]=new Set([...t[n][i]??[],...r[i]]):t[n]={[i]:r[i]}}}class Tc extends Ri{clone(){return new Tc(null,new Set(this.dimensions),Vn(this.measures))}constructor(e,n,r){super(e),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(e,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ft(o,{forAs:!0})]);else{if(dh(l)||Sm(l)){const d=dh(l)?"argmin":"argmax",c=l[d];i[c]??(i[c]={}),i[c][d]=new Set([Ft({op:d,field:c},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([Ft(o,{forAs:!0})]);af(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([Ft({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([Ft({field:u,aggregate:"max"},{forAs:!0})]))}else f2t(s,a,o,n)}),s.size+_t(i).length===0)?null:new Tc(e,s,i)}static makeFromTransform(e,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||Ft(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||Ft(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+_t(s).length===0?null:new Tc(e,i,s)}merge(e){return Z5e(this.dimensions,e.dimensions)?(h2t(this.measures,e.measures),!0):(Cvt("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._t(this.measures)])}producedFields(){const e=new Set;for(const n of _t(this.measures))for(const r of _t(this.measures[n])){const i=this.measures[n][r];i.size===0?e.add(`${r}_${n}`):i.forEach(e.add,e)}return e}hash(){return`Aggregate ${Mr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],n=[],r=[];for(const s of _t(this.measures))for(const o of _t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),e.push(o),n.push(s==="*"?null:Hu(s));return{type:"aggregate",groupby:[...this.dimensions].map(Hu),ops:e,fields:n,as:r}}}class C1 extends Ri{constructor(e,n,r,i){super(e),this.model=n,this.name=r,this.data=i;for(const s of Iu){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Ft(o),...Ji(a)?[Ft(o,{binSuffix:"end"})]:[]],...nh(l)?{sortField:l}:at(l)?{sortIndexField:Mv(o,s)}:{}}}}this.childModel=n.child}hash(){let e="Facet";for(const n of Iu)this[n]&&(e+=` ${n.charAt(0)}:${Mr(this[n])}`);return e}get fields(){var n;const e=[];for(const r of Iu)(n=this[r])!=null&&n.fields&&e.push(...this[r].fields);return e}dependentFields(){const e=new Set(this.fields);for(const n of Iu)this[n]&&(this[n].sortField&&e.add(this[n].sortField.field),this[n].sortIndexField&&e.add(this[n].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const n of Ah){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if($o(i)&&W0(s)){const o=bR(this.childModel,n),a=f7(o);a?e[n]=a:At(fB(n))}}}return e}assembleRowColumnHeaderData(e,n,r){const i={row:"y",column:"x",facet:void 0}[e],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[e];if(l){const{op:d=nR,field:c}=l;s.push(c),o.push(d),a.push(Ft(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of i7){for(const d of s7){const c=(r[u]&&r[u][d])??[];for(const f of c)if(((l=f.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const d=`length(data("${this.facet.name}"))`,c=u==="row"?n?{signal:`ceil(${d} / ${n})`}:1:n?{signal:`min(${d}, ${n})`}:{signal:d};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,e)),i}assemble(){const e=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");e.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[th,eh])this[a]&&e.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&e.push(...a)}return e}}function h2e(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function p2t(t,e){const n=tB(t);if(e==="number")return`toNumber(${n})`;if(e==="boolean")return`toBoolean(${n})`;if(e==="string")return`toString(${n})`;if(e==="date")return`toDate(${n})`;if(e==="flatten")return n;if(e.startsWith("date:")){const r=h2e(e.slice(5,e.length));return`timeParse(${n},'${r}')`}else if(e.startsWith("utc:")){const r=h2e(e.slice(4,e.length));return`utcParse(${n},'${r}')`}else return At(Obt(e)),null}function m2t(t){const e={};return ZA(t.filter,n=>{if(B4e(n)){let r=null;bB(n)?r=Jl(n.equal):xB(n)?r=Jl(n.lte):vB(n)?r=Jl(n.lt):wB(n)?r=Jl(n.gt):_B(n)?r=Jl(n.gte):EB(n)?r=n.range[0]:CB(n)&&(r=(n.oneOf??n.in)[0]),r&&(Y0(r)?e[n.field]="date":ui(r)?e[n.field]="number":Nt(r)&&(e[n.field]="string")),n.timeUnit&&(e[n.field]="date")}}),e}function g2t(t){const e={};function n(r){Lv(r)?e[r.field]="date":r.type==="quantitative"&&abt(r.aggregate)?e[r.field]="number":Cv(r.field)>1?r.field in e||(e[r.field]="flatten"):Z0(r)&&nh(r.sort)&&Cv(r.sort.field)>1&&(r.sort.field in e||(e[r.sort.field]="flatten"))}if((vs(t)||au(t))&&t.forEachFieldDef((r,i)=>{if(il(r))n(r);else{const s=G0(i),o=t.fieldDef(s);n({...r,type:o.type})}}),vs(t)){const{mark:r,markDef:i,encoding:s}=t;if(Am(r)&&!t.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];kt(a)&&a.type==="quantitative"&&!(a.field in e)&&(e[a.field]="number")}}return e}function y2t(t){const e={};if(vs(t)&&t.component.selection)for(const n of _t(t.component.selection)){const r=t.component.selection[n];for(const i of r.project.items)!i.channel&&Cv(i.field)>1&&(e[i.field]="flatten")}return e}class Da extends Ri{clone(){return new Da(null,Vn(this._parse))}constructor(e,n){super(e),this._parse=n}hash(){return`Parse ${Mr(this._parse)}`}static makeExplicit(e,n,r){var o;let i={};const s=n.data;return!Hp(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(e,i,{},r)}static makeWithAncestors(e,n,r,i){for(const a of _t(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:At(E_e(a,r[a],l.value)))}for(const a of _t(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:At(E_e(a,n[a],l)))}const s=new Th(n,r);i.copyAll(s);const o={};for(const a of _t(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return _t(o).length===0||i.parseNothing?null:new Da(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const n of _t(this._parse)){const r=this._parse[n];Cv(n)===1&&(e[n]=r)}return e}producedFields(){return new Set(_t(this._parse))}dependentFields(){return new Set(_t(this._parse))}assembleTransforms(e=!1){return _t(this._parse).filter(n=>e?Cv(n)>1:!0).map(n=>{const r=p2t(n,this._parse[n]);return r?{type:"formula",expr:r,as:v1(n)}:null}).filter(n=>n!==null)}}class lm extends Ri{clone(){return new lm(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([zc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:zc}}}class oC extends Ri{clone(){return new oC(null,this.params)}constructor(e,n){super(e),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class aC extends Ri{clone(){return new aC(null,this.params)}constructor(e,n){super(e),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class T0 extends Ri{constructor(e){super(null),e??(e={name:"source"});let n;if(Hp(e)||(n=e.format?{...Ol(e.format,["parse"])}:{}),R2(e))this._data={values:e.values};else if(Rv(e)){if(this._data={url:e.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(e.url)[1];Er(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else nIe(e)?this._data={values:[{type:"Sphere"}]}:(eIe(e)||Hp(e))&&(this._data={});this._generator=Hp(e),e.name&&(this._name=e.name),n&&!Pi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var p2e=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},b2t=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},d_;function u7(t){return t instanceof T0||t instanceof oC||t instanceof aC}class c7{constructor(){d_.set(this,void 0),p2e(this,d_,!1,"f")}setModified(){p2e(this,d_,!0,"f")}get modifiedFlag(){return b2t(this,d_,"f")}}d_=new WeakMap;class K0 extends c7{getNodeDepths(e,n,r){r.set(e,n);for(const i of e.children)this.getNodeDepths(i,n+1,r);return r}optimize(e){const r=[...this.getNodeDepths(e,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class d7 extends c7{optimize(e){this.run(e);for(const n of e.children)this.optimize(n);return this.modifiedFlag}}class v2t extends d7{mergeNodes(e,n){const r=n.shift();for(const i of n)e.removeChild(i),i.parent=r,i.remove()}run(e){const n=e.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[e.children[i]]:r[n[i]].push(e.children[i]);for(const i of _t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(e,r[i]))}}class x2t extends d7{constructor(e){super(),this.requiresSelectionId=e&&r7(e)}run(e){e instanceof lm&&(this.requiresSelectionId&&(u7(e.parent)||e.parent instanceof Tc||e.parent instanceof Da)||(this.setModified(),e.remove()))}}class w2t extends c7{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,n){let r=new Set;e instanceof Rd&&(r=e.producedFields(),Q9(r,n)&&(this.setModified(),e.removeFormulas(n),e.producedFields.length===0&&e.remove()));for(const i of e.children)this.run(i,new Set([...n,...r]))}}class _2t extends d7{constructor(){super()}run(e){e instanceof Ml&&!e.isRequired()&&(this.setModified(),e.remove())}}class E2t extends K0{run(e){if(!u7(e)&&!(e.numChildren()>1)){for(const n of e.children)if(n instanceof Da)if(e instanceof Da)this.setModified(),e.merge(n);else{if(eB(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class C2t extends K0{run(e){const n=[...e.children],r=e.children.filter(i=>i instanceof Da);if(e.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of _t(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Pi(i)){this.setModified();const o=new Da(e,i);for(const a of n){if(a instanceof Da)for(const l of _t(i))delete a.parse[l];e.removeChild(a),a.parent=o,a instanceof Da&&_t(a.parse).length===0&&a.remove()}}}}}class S2t extends K0{run(e){e instanceof Ml||e.numChildren()>0||e instanceof C1||e instanceof T0||(this.setModified(),e.remove())}}class A2t extends K0{run(e){const n=e.children.filter(i=>i instanceof Rd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class k2t extends K0{run(e){const n=e.children.filter(i=>i instanceof Tc),r={};for(const i of n){const s=Mr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of _t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(e.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class T2t extends K0{constructor(e){super(),this.model=e}run(e){const n=!(u7(e)||e instanceof E1||e instanceof Da||e instanceof lm),r=[],i=[];for(const s of e.children)s instanceof Od&&(n&&!eB(e.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof Od?e.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class D2t extends K0{run(e){const n=[...e.children];if(!Ev(n,o=>o instanceof Ml)||e.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ml){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Ml)a=l;else break}i.push(...a.children),s?(e.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class J0 extends Ri{clone(){return new J0(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Sd(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??Ft(e)}hash(){return`JoinAggregateTransform ${Mr(this.transform)}`}assemble(){const e=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),e.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:e,...i!==void 0?{groupby:i}:{}}}}class $v extends Ri{clone(){return new $v(null,{...this.filter})}constructor(e,n){super(e),this.filter=n}static make(e,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,d,c)=>{const f=af(c)&&n.getScaleComponent(c);if(f){const h=f.get("type"),{aggregate:p}=d,g=RB({scaleChannel:c,markDef:s,config:i,scaleType:h,isCountAggregate:WL(p)});g!=="show"&&g!=="always-valid"&&(u[d.field]=d)}return u},{});return _t(l).length?new $v(e,l):null}dependentFields(){return new Set(_t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mr(this.filter)}`}assemble(){const e=_t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ft(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${a6(s)}))`):i.type==="quantitative"&&n.push(a6(s))),n},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}function a6(t){return`isValid(${t}) && isFinite(+${t})`}function L2t(t){return t.stack.stackBy.reduce((e,n)=>{const r=n.fieldDef,i=Ft(r);return i&&e.push(i),e},[])}function R2t(t){return at(t)&&t.every(e=>Nt(e))&&t.length>1}class ih extends Ri{clone(){return new ih(null,Vn(this._stack))}constructor(e,n){super(e),this._stack=n}static makeFromTransform(e,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const c of n.sort)a.push(c.field),l.push(zs(c.order,"ascending"));const u={field:a,order:l};let d;return R2t(s)?d=s:Nt(s)?d=[s,`${s}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new ih(e,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:d})}static makeFromEncoding(e,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return Bc(p)}).filter(h=>!!h),d=L2t(n),c=n.encoding.order;let f;if(at(c)||kt(c))f=v4e(c);else{const h=uMe(c)?c.sort:o==="y"?"descending":"ascending";f=d.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new ih(e,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:d,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:n,groupby:r}=this._stack;return e.length>0?e.map(i=>i.bin?n?[Ft(i,{binSuffix:"mid"})]:[Ft(i,{}),Ft(i,{binSuffix:"end"})]:[Ft(i)]).flat():r??[]}assemble(){const e=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const d of r){const{bandPosition:c=.5,bin:f}=d;if(f){const h=Ft(d,{expr:"datum"}),p=Ft(d,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${a6(h)} ? ${c}*${h}+${1-c}*${p} : ${h}`,as:Ft(d,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:i,groupby:[...s,...n],key:Ft(d,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),e}}class S1 extends Ri{clone(){return new S1(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Sd(this.transform.groupby.concat(e),n=>n)}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach(n=>e.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??Ft(e)}hash(){return`WindowTransform ${Mr(this.transform)}`}assemble(){const e=[],n=[],r=[],i=[];for(const c of this.transform.window)n.push(c.op),r.push(this.getDefaultName(c)),i.push(c.param===void 0?null:c.param),e.push(c.field===void 0?null:c.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(c=>cB(c)))return{type:"joinaggregate",as:r,ops:n,fields:e,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const c of this.transform.sort)a.push(c.field),l.push(c.order??"ascending");const u={field:a,order:l},d=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:e,sort:u,...d!==void 0?{ignorePeers:d}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function F2t(t){function e(n){if(!(n instanceof C1)){const r=n.clone();if(r instanceof Ml){const i=u6+r.getSource();r.setSource(i),t.model.component.data.outputNodes[i]=r}else(r instanceof Tc||r instanceof ih||r instanceof S1||r instanceof J0)&&r.addDimensions(t.fields);for(const i of n.children.flatMap(e))i.parent=r;return[r]}return n.children.flatMap(e)}return e}function l6(t){if(t instanceof C1)if(t.numChildren()===1&&!(t.children[0]instanceof Ml)){const e=t.children[0];(e instanceof Tc||e instanceof ih||e instanceof S1||e instanceof J0)&&e.addDimensions(t.fields),e.swapWithParent(),l6(t)}else{const e=t.model.component.data.main;QIe(e);const n=F2t(t),r=t.children.map(n).flat();for(const i of r)i.parent=e}else t.children.map(l6)}function QIe(t){if(t instanceof Ml&&t.type===xs.Main&&t.numChildren()===1){const e=t.children[0];e instanceof C1||(e.swapWithParent(),QIe(t))}}const u6="scale_",HS=5;function c6(t){for(const e of t){for(const n of e.children)if(n.parent!==e)return!1;if(!c6(e.children))return!1}return!0}function ac(t,e){let n=!1;for(const r of e)n=t.optimize(r)||n;return n}function m2e(t,e,n){let r=t.sources,i=!1;return i=ac(new _2t,r)||i,i=ac(new x2t(e),r)||i,r=r.filter(s=>s.numChildren()>0),i=ac(new S2t,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=ac(new E2t,r)||i,i=ac(new T2t(e),r)||i,i=ac(new w2t,r)||i,i=ac(new C2t,r)||i,i=ac(new k2t,r)||i,i=ac(new A2t,r)||i,i=ac(new v2t,r)||i,i=ac(new D2t,r)||i),t.sources=r,i}function O2t(t,e){c6(t.sources);let n=0,r=0;for(let i=0;i<HS&&m2e(t,e,!0);i++)n++;t.sources.map(l6);for(let i=0;i<HS&&m2e(t,e,!1);i++)r++;c6(t.sources),Math.max(n,r)===HS&&At(`Maximum optimization runs(${HS}) reached.`)}class Do{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,n){return new Do(()=>e(n))}}function e6e(t){vs(t)?M2t(t):I2t(t)}function M2t(t){const e=t.component.scales;for(const n of _t(e)){const r=P2t(t,n);if(e[n].setWithExplicit("domains",r),B2t(t,n),t.component.data.isFaceted){let s=t;for(;!au(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Vf(a)&&(a.data=u6+a.data.replace(u6,""))}}}function I2t(t){for(const n of t.children)e6e(n);const e=t.component.scales;for(const n of _t(e)){let r,i=null;for(const s of t.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=am(r,o.getWithExplicit("domains"),"domains","scale",d6);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&At(Abt),i=a}}e[n].setWithExplicit("domains",r),i&&e[n].set("selectionExtent",i,!0)}}function $2t(t,e,n,r){if(t==="unaggregated"){const{valid:i,reason:s}=g2e(e,n);if(!i){At(s);return}}else if(t===void 0&&r.useUnaggregatedDomain){const{valid:i}=g2e(e,n);if(i)return"unaggregated"}return t}function P2t(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:r}=t,i=$2t(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return i!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:i}),e==="x"&&bo(r.x2)?bo(r.x)?am(up(n,i,t,"x"),up(n,i,t,"x2"),"domain","scale",d6):up(n,i,t,"x2"):e==="y"&&bo(r.y2)?bo(r.y)?am(up(n,i,t,"y"),up(n,i,t,"y2"),"domain","scale",d6):up(n,i,t,"y2"):up(n,i,t,e)}function N2t(t,e,n){return t.map(r=>({signal:`{data: ${oR(r,{timeUnit:n,type:e})}}`}))}function DO(t,e,n){var i;const r=(i=Mo(n))==null?void 0:i.unit;return e==="temporal"||r?N2t(t,e,r):[t]}function up(t,e,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=bo(i[r]),{type:d}=u,c=u.timeUnit,f=Lwt({invalid:Hd("invalid",s,a),isPath:Am(o)});if(Jvt(e)){const g=up(t,void 0,n,r),b=DO(e.unionWith,d,c);return bd([...b,...g.value])}else{if(cn(e))return bd([e]);if(e&&e!=="unaggregated"&&!V4e(e))return bd(DO(e,d,c))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Vl([[0,1]]);const g=n.requestDataName(f);return Vl([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=af(r)&&kt(u)?z2t(n,r,t):void 0;if(lf(u)){const g=DO([u.datum],d,c);return Vl(g)}const p=u;if(e==="unaggregated"){const{field:g}=u;return Vl([{data:n.requestDataName(f),field:Ft({field:g,aggregate:"min"})},{data:n.requestDataName(f),field:Ft({field:g,aggregate:"max"})}])}else if(Ji(p.bin)){if($o(t))return Vl(t==="bin-ordinal"?[]:[{data:T2(h)?n.requestDataName(f):n.requestDataName(xs.Raw),field:n.vgField(r,rC(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!It(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Ji(g)){const b=l7(n,p.field,g);return Vl([new Do(()=>{const y=n.getSignalName(b);return`[${y}.start, ${y}.stop]`})])}else return Vl([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Er(["time","utc"],t)){const g=i[of(r)];if(lMe(p,g,s,a)){const b=n.requestDataName(f),y=om({fieldDef:p,fieldDef2:g,markDef:s,config:a}),v=L2(o)&&y!==.5&&js(r);return Vl([{data:b,field:n.vgField(r,v?{suffix:fR}:{})},{data:b,field:n.vgField(r,{suffix:v?hR:"end"})}])}}return Vl(h?[{data:T2(h)?n.requestDataName(f):n.requestDataName(xs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function LO(t,e){const{op:n,field:r,order:i}=t;return{op:n??(e?"sum":nR),...r?{field:Hu(r)}:{},...i?{order:i}:{}}}function B2t(t,e){var a;const n=t.component.scales[e],r=t.specifiedScales[e].domain,i=(a=t.fieldDef(e))==null?void 0:a.bin,s=V4e(r)?r:void 0,o=V0(i)&&YL(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function z2t(t,e,n){if(!$o(n))return;const r=t.fieldDef(e),i=r.sort;if(oMe(i))return{op:"min",field:Mv(r,e),order:"ascending"};const{stack:s}=t,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(nh(i)){const a=s&&!o.has(i.field);return LO(i,a)}else if(L1t(i)){const{encoding:a,order:l}=i,u=t.fieldDef(a),{aggregate:d,field:c}=u,f=s&&!o.has(c);if(dh(d)||Sm(d))return LO({field:Ft(u),order:l},f);if(cB(d)||!d)return LO({op:d,field:c,order:l},f)}else{if(i==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(Er(["ascending",void 0],i))return!0}}function g2e(t,e){const{aggregate:n,type:r}=t;return n?Nt(n)&&!ubt.has(n)?{valid:!1,reason:tvt(n)}:r==="quantitative"&&e==="log"?{valid:!1,reason:nvt(t)}:{valid:!0}:{valid:!1,reason:evt(t)}}function d6(t,e,n,r){return t.explicit&&e.explicit&&At(avt(n,r,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function j2t(t){const e=Sd(t.map(o=>{if(Vf(o)){const{sort:a,...l}=o;return l}return o}),Mr),n=Sd(t.map(o=>{if(Vf(o)){const a=o.sort;return a!==void 0&&!T2(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Mr);if(e.length===0)return;if(e.length===1){const o=t[0];if(Vf(o)&&n.length>0){let a=n[0];if(n.length>1){At(S_e);const l=n.filter(u=>It(u)&&"op"in u&&u.op!=="min");n.every(u=>It(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(It(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Sd(n.map(o=>T2(o)||!("op"in o)||Nt(o.op)&&Yt(sbt,o.op)?o:(At(uvt(o)),!0)),Mr);let i;r.length===1?i=r[0]:r.length>1&&(At(S_e),i=!0);const s=Sd(t.map(o=>Vf(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:e.map(a=>a.field),...i?{sort:i}:{}}:{fields:e,...i?{sort:i}:{}}}function f7(t){if(Vf(t)&&Nt(t.field))return t.field;if(cbt(t)){let e;for(const n of t.fields)if(Vf(n)&&Nt(n.field)){if(!e)e=n.field;else if(e!==n.field)return At(cvt),e}return At(dvt),e}else if(dbt(t)){At(fvt);const e=t.fields[0];return Nt(e)?e:void 0}}function bR(t,e){const r=t.component.scales[e].get("domains").map(i=>(Vf(i)&&(i.data=t.lookupDataSource(i.data)),i));return j2t(r)}function t6e(t){return A1(t)||h7(t)?t.children.reduce((e,n)=>e.concat(t6e(n)),y2e(t)):y2e(t)}function y2e(t){return _t(t.component.scales).reduce((e,n)=>{const r=t.component.scales[n];if(r.merged)return e;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:d,...c}=i,f=U2t(i.range,s,n,t),h=bR(t,n),p=a?jwt(t,a,r,h):null;return e.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...d!==void 0?{reverse:d}:{},...c}),e},[])}function U2t(t,e,n,r){if(js(n)){if(W0(t))return{step:{signal:`${e}_step`}}}else if(It(t)&&Vf(t))return{...t,data:r.lookupDataSource(t.data)};return t}class n6e extends Th{constructor(e,n){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const e=this.get("type");if(Er([Ko.LOG,Ko.TIME,Ko.UTC],e))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Er([Ko.LINEAR,Ko.SQRT,Ko.POW],e))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(at(a)){const l=a[0],u=a[a.length-1];if(ui(l)&&ui(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const q2t=["range","scheme"];function H2t(t){const e=t.component.scales;for(const n of uB){const r=e[n];if(!r)continue;const i=G2t(n,t);r.setWithExplicit("range",i)}}function b2e(t,e){const n=t.fieldDef(e);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=zl(e),o=t.getName(s);if(It(r)&&r.binned&&r.step!==void 0)return new Do(()=>{const a=t.scaleName(e),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${t.getSignalName(o)} / (${l})`});if(Ji(r)){const a=l7(t,i,r);return new Do(()=>{const l=t.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${t.getSignalName(o)} / (${u})`})}}}function G2t(t,e){const n=e.specifiedScales[t],{size:r}=e,s=e.getScaleComponent(t).get("type");for(const c of q2t)if(n[c]!==void 0){const f=GI(s,c),h=W4e(t,c);if(!f)At(A4e(s,c,t));else if(h)At(h);else switch(c){case"range":{const p=n.range;if(at(p)){if(js(t))return bd(p.map(g=>{if(g==="width"||g==="height"){const b=e.getName(g),y=e.getSignalName.bind(e);return Do.fromName(y,b)}return g}))}else if(It(p))return bd({data:e.requestDataName(xs.Main),field:p.field,sort:{op:"min",field:e.vgField(t)}});return bd(p)}case"scheme":return bd(V2t(n[c]))}}const o=t===fs||t==="xOffset"?"width":"height",a=r[o];if(Vd(a)){if(js(t))if($o(s)){const c=i6e(a,e,t);if(c)return bd({step:c})}else At(k4e(o));else if(ZE(t)){const c=t===vm?"x":"y";if(e.getScaleComponent(c).get("type")==="band"){const p=s6e(a,s);if(p)return bd(p)}}}const{rangeMin:l,rangeMax:u}=n,d=W2t(t,e);return(l!==void 0||u!==void 0)&&GI(s,"rangeMin")&&at(d)&&d.length===2?bd([l??d[0],u??d[1]]):Vl(d)}function V2t(t){return Kvt(t)?{scheme:t.name,...Ol(t,["name"])}:{scheme:t}}function r6e(t,e,n,{center:r}={}){const i=zl(t),s=e.getName(i),o=e.getSignalName.bind(e);return t===No&&Pc(n)?r?[Do.fromName(a=>`${o(a)}/2`,s),Do.fromName(a=>`-${o(a)}/2`,s)]:[Do.fromName(o,s),0]:r?[Do.fromName(a=>`-${o(a)}/2`,s),Do.fromName(a=>`${o(a)}/2`,s)]:[0,Do.fromName(o,s)]}function W2t(t,e){const{size:n,config:r,mark:i,encoding:s}=e,{type:o}=bo(s[t]),l=e.getScaleComponent(t).get("type"),{domain:u,domainMid:d}=e.specifiedScales[t];switch(t){case fs:case No:{if(Er(["point","band"],l)){const c=o6e(t,n,r.view);if(Vd(c))return{step:i6e(c,e,t)}}return r6e(t,e,l)}case vm:case x1:return Y2t(t,e,l);case Ch:{const c=K2t(i,r),f=J2t(i,n,e,r);return kv(l)?Z2t(c,f,X2t(l,r,u,t)):[c,f]}case Yu:return[0,Math.PI*2];case H0:return[0,360];case Wc:return[0,new Do(()=>{const c=e.getSignalName(au(e.parent)?"child_width":"width"),f=e.getSignalName(au(e.parent)?"child_height":"height");return`min(${c},${f})/2`})];case xm:return{step:1e3/r.scale.framesPerSecond};case Em:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Cm:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Bl:return"symbol";case Nl:case rf:case sf:return l==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Sh:case wm:case _m:return[r.scale.minOpacity,r.scale.maxOpacity]}}function i6e(t,e,n){const{encoding:r}=e,i=e.getScaleComponent(n),s=sB(n),o=r[s];if(zMe({step:t,offsetIsDiscrete:Yn(o)&&j4e(o.type)})==="offset"&&xMe(r,s)){const l=e.getScaleComponent(s);let d=`domain('${e.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${f}, ${h})`}const c=i.get("paddingInner")??i.get("padding");return{signal:`${t.step} * ${d} / (1-${mbt(c)})`}}else return t.step}function s6e(t,e){if(zMe({step:t,offsetIsDiscrete:$o(e)})==="offset")return{step:t.step}}function Y2t(t,e,n){const r=t===vm?"x":"y",i=e.getScaleComponent(r);if(!i)return r6e(r,e,n,{center:!0});const s=i.get("type"),o=e.scaleName(r),{markDef:a,config:l}=e;if(s==="band"){const u=o6e(r,e.size,e.config.view);if(Vd(u)){const d=s6e(u,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const u=e.encoding[r];if(kt(u)&&u.timeUnit){const d=P4e(u.timeUnit,p=>`scale('${o}', ${p})`),c=e.config.scale.bandWithNestedOffsetPaddingInner,f=om({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(c){const p=cn(c)?`${c.signal}/2`+h:`${c/2+f}`,g=cn(c)?`(1 - ${c.signal}/2)`+h:`${1-c/2+f}`;return[{signal:`${p} * (${d})`},{signal:`${g} * (${d})`}]}return[0,{signal:d}]}return Y5e(`Cannot use ${t} scale if ${r} scale is not discrete.`)}}function o6e(t,e,n){const r=t===fs?"width":"height",i=e[r];return i||W3(n,r)}function X2t(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(At(wvt(r)),3)}}function Z2t(t,e,n){const r=()=>{const i=Cc(e),s=Cc(t),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return cn(e)?new Do(r):{signal:r()}}function K2t(t,e){switch(t){case"bar":case"tick":return e.scale.minBandSize;case"line":case"trail":case"rule":return e.scale.minStrokeWidth;case"text":return e.scale.minFontSize;case"point":case"square":case"circle":return e.scale.minSize}throw new Error(XL("size",t))}const v2e=.95;function J2t(t,e,n,r){const i={x:b2e(n,"x"),y:b2e(n,"y")};switch(t){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=x2e(e,i,r.view);return ui(s)?s-1:new Do(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=x2e(e,i,r.view);return ui(s)?Math.pow(v2e*s,2):new Do(()=>`pow(${v2e} * ${s.signal}, 2)`)}}throw new Error(XL("size",t))}function x2e(t,e,n){const r=Vd(t.width)?t.width.step:XI(n,"width"),i=Vd(t.height)?t.height.step:XI(n,"height");return e.x||e.y?new Do(()=>`min(${[e.x?e.x.signal:r,e.y?e.y.signal:i].join(", ")})`):Math.min(r,i)}function a6e(t,e){vs(t)?Q2t(t,e):u6e(t,e)}function Q2t(t,e){const n=t.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=t;for(const a of _t(n)){const l=o[a],u=n[a],d=t.getScaleComponent(a),c=bo(i[a]),f=l[e],h=d.get("type"),p=d.get("padding"),g=d.get("paddingInner"),b=GI(h,e),y=W4e(a,e);if(f!==void 0&&(b?y&&At(y):At(A4e(h,e,a))),b&&y===void 0)if(f!==void 0){const v=c.timeUnit,w=c.type;switch(e){case"domainMax":case"domainMin":Y0(l[e])||w==="temporal"||v?u.set(e,{signal:oR(l[e],{type:w,timeUnit:v})},!0):u.set(e,l[e],!0);break;default:u.copyKeyFromObject(e,l)}}else{const v=Ct(w2e,e)?w2e[e]({model:t,channel:a,fieldOrDatumDef:c,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:wMe(i,a),hasSecondaryRangeChannel:!!i[of(a)]}):r.scale[e];v!==void 0&&u.set(e,v,!1)}}}const w2e={bins:({model:t,fieldOrDatumDef:e})=>kt(e)?eEt(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>tEt(t,e.type),nice:({scaleType:t,channel:e,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>nEt(t,e,n,r,i,s),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:r,config:i})=>rEt(t,e,i.scale,n,r,i.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>iEt(t,e,n.type,r,i.scale,s),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>sEt(t,e,n,r,i.scale,s),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:r})=>{const i=kt(t)?t.sort:void 0;return oEt(e,i,n,r.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>aEt(t,e,n,r,i,s.scale,o)};function l6e(t){vs(t)?H2t(t):u6e(t,"range")}function u6e(t,e){const n=t.component.scales;for(const r of t.children)e==="range"?l6e(r):a6e(r,e);for(const r of _t(n)){let i;for(const s of t.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(e);i=am(i,a,e,"scale",QMe((l,u)=>{switch(e){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(e,i)}}function eEt(t,e){const n=e.bin;if(Ji(n)){const r=l7(t,e.field,n);return new Do(()=>t.getSignalName(r))}else if(Xo(n)&&V0(n)&&n.step!==void 0)return{step:n.step}}function tEt(t,e){if(Er([Nl,rf,sf],t)&&e!=="nominal")return"hcl"}function nEt(t,e,n,r,i,s){var o;if(!((o=Bc(s))!=null&&o.bin||at(n)||i!=null||r!=null||Er([Ko.TIME,Ko.UTC],t)))return js(e)?!0:void 0}function rEt(t,e,n,r,i,s){if(js(t)){if(Ad(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&t==="x"||a==="horizontal"&&t==="y"))return s.continuousBandSize}if(e===Ko.POINT)return n.pointPadding}}function iEt(t,e,n,r,i,s=!1){if(t===void 0){if(js(e)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:d}=i;return s?d:zs(o,n==="bar"?a:n==="tick"?u:l)}else if(ZE(e)&&r===Ko.BAND)return i.offsetBandPaddingInner}}function sEt(t,e,n,r,i,s=!1){if(t===void 0){if(js(e)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Ko.BAND)return zs(o,cn(r)?{signal:`${r.signal}/2`}:r/2)}else if(ZE(e)){if(n===Ko.POINT)return .5;if(n===Ko.BAND)return i.offsetBandPaddingOuter}}}function oEt(t,e,n,r){if(n==="x"&&r.xReverse!==void 0)return Pc(t)&&e==="descending"?cn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Pc(t)&&e==="descending")return!0}function aEt(t,e,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Pc(i)){if(at(n)){const l=n[0],u=n[n.length-1];if(ui(l)&&l<=0&&ui(u)&&u>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!kv(i))return!0;if(!(kt(e)&&e.bin)&&Er([...Ah,...Zyt],t)){const{orient:l,type:u}=r;return Er(["bar","area","line","trail"],u)&&(l==="horizontal"&&t==="y"||l==="vertical"&&t==="x")?!1:Er(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function lEt(t,e,n,r,i=!1){const s=uEt(e,n,r,i),{type:o}=t;return af(e)?o!==void 0?i1t(e,o)?kt(n)&&!r1t(o,n.type)?(At(svt(o,s)),s):o:(At(ivt(e,o,s)),s):s:null}function uEt(t,e,n,r){var i;switch(e.type){case"nominal":case"ordinal":{if($b(t)||bO(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&At(vO(t,"ordinal")),"ordinal";if(yO(t))return"band";if(js(t)||ZE(t)){if(Er(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&t in lB)return"band";const s=n[zl(t)];return C0(s)||Dv(e)&&((i=e.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return $b(t)?"time":bO(t)==="discrete"?(At(vO(t,"temporal")),"ordinal"):kt(e)&&e.timeUnit&&Mo(e.timeUnit).utc?"utc":yO(t)?"band":"time";case"quantitative":return $b(t)?kt(e)&&Ji(e.bin)?"bin-ordinal":"linear":bO(t)==="discrete"?(At(vO(t,"quantitative")),"ordinal"):yO(t)?"band":"linear";case"geojson":return}throw new Error(C4e(e.type))}function cEt(t,{ignoreRange:e}={}){c6e(t),e6e(t);for(const n of n1t)a6e(t,n);e||l6e(t)}function c6e(t){vs(t)?t.component.scales=dEt(t):t.component.scales=hEt(t)}function dEt(t){const{encoding:e,mark:n,markDef:r}=t,i={};for(const s of uB){const o=bo(e[s]);if(o&&n===Z4e&&s===Bl&&o.type===w1)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=wMe(e,s),u=lEt(a,s,o,r,l);i[s]=new n6e(t.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const fEt=QMe((t,e)=>k_e(t)-k_e(e));function hEt(t){var e;const n=t.component.scales={},r={},i=t.component.resolve;for(const s of t.children){c6e(s);for(const o of _t(s.component.scales))if((e=i.scale)[o]??(e[o]=jIe(o,t)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?Vvt(a.value,l.value)?r[o]=am(a,l,"type","scale",fEt):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of _t(r)){const o=t.scaleName(s,!0),a=r[s];n[s]=new n6e(o,a);for(const l of t.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class RO{constructor(){this.nameMap={}}rename(e,n){this.nameMap[e]=n}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function vs(t){return(t==null?void 0:t.type)==="unit"}function au(t){return(t==null?void 0:t.type)==="facet"}function h7(t){return(t==null?void 0:t.type)==="concat"}function A1(t){return(t==null?void 0:t.type)==="layer"}class p7{constructor(e,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=Zo(a),this.name=e.name??i,this.title=mp(e.title)?{text:e.title}:e.title?Zo(e.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new RO,this.projectionNameMap=r?r.projectionNameMap:new RO,this.signalNameMap=r?r.signalNameMap:new RO,this.data=e.data,this.description=e.description,this.transforms=bwt(e.transform??[]),this.layout=n==="layer"||n==="unit"?{}:_xt(e,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:rR(e)||(r==null?void 0:r.component.data.isFaceted)&&e.data===void 0},layoutSize:new Th,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Vn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){cEt(this)}parseProjection(){KIe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){VIe(this)}assembleEncodeFromView(e){const{style:n,...r}=e,i={};for(const s of _t(r)){const o=r[s];o!==void 0&&(i[s]=as(o))}return i}assembleGroupEncodeEntry(e){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(n.description=as(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Pi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:e,...n}=this.layout,{component:r,config:i}=this,s=O_t(r.layoutHeaders,i);return{padding:e,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let n=[];for(const r of Iu)e[r].title&&n.push(k_t(this,r));for(const r of i7)n=n.concat(T_t(this,r));return n}assembleAxes(){return p_t(this.component.axes,this.config)}assembleLegends(){return YIe(this)}assembleProjections(){return n2t(this)}assembleTitle(){const{encoding:e,...n}=this.title??{},r={...m4e(this.config.title).nonMarkTitleProperties,...n,...e?{encode:{update:e}}:{}};if(r.text)return Er(["unit","layer"],this.type)?Er(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Pi(r)?void 0:r}assembleGroup(e=[]){const n={};e=e.concat(this.assembleSignals()),e.length>0&&(n.signals=e);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||au(this.parent)?t6e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(e){return ds((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(xs[e].toLowerCase())}requestDataName(e){const n=this.getDataName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(e){if(au(this.parent)){const n=BIe(e),r=VL(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if($o(s)&&W0(o)){const a=i.get("name"),l=bR(this,r),u=f7(l);if(u){const d=Ft({aggregate:"distinct",field:u},{expr:"datum"});return{signal:NIe(a,i,d)}}else return At(fB(r)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const n=this.component.data.outputNodes[e];return n?n.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,n){this.signalNameMap.rename(e,n)}renameScale(e,n){this.scaleNameMap.rename(e,n)}renameProjection(e,n){this.projectionNameMap.rename(e,n)}scaleName(e,n){if(n)return this.getName(e);if(a4e(e)&&af(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0}getScaleType(e){const n=this.getScaleComponent(e);return n?n.get("type"):void 0}getSelectionComponent(e,n){let r=this.component.selection[e];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(e,n)),!r)throw new Error(xbt(n));return r}hasAxisOrientSignalRef(){var e,n;return((e=this.component.axes.x)==null?void 0:e.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class d6e extends p7{vgField(e,n={}){const r=this.fieldDef(e);if(r)return Ft(r,n)}reduceFieldDef(e,n){return K1t(this.getMapping(),(r,i,s)=>{const o=Bc(i);return o?e(r,o,s):r},n)}forEachFieldDef(e,n){zB(this.getMapping(),(r,i)=>{const s=Bc(r);s&&e(s,i)},n)}}class vR extends Ri{clone(){return new vR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mr(this.transform)}`}assemble(){const{density:e,...n}=this.transform,r={type:"kde",field:e,...n};return r.resolve=this.transform.resolve,r}}class xR extends Ri{clone(){return new xR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mr(this.transform)}`}assemble(){const{extent:e,param:n}=this.transform;return{type:"extent",field:e,signal:n}}}class wR extends Ri{clone(){return new wR(this.parent,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mr(this.transform)}`}assemble(){const{flatten:e,as:n}=this.transform;return{type:"flatten",fields:e,as:n}}}class _R extends Ri{clone(){return new _R(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mr(this.transform)}`}assemble(){const{fold:e,as:n}=this.transform;return{type:"fold",fields:e,as:n}}}class Bb extends Ri{clone(){return new Bb(null,Vn(this.fields),this.geojson,this.signal)}static parseAll(e,n){if(n.component.projection&&!n.component.projection.isFit)return e;let r=0;for(const i of[[Xc,Yc],[Gu,Zc]]){const s=i.map(o=>{const a=bo(n.encoding[o]);return kt(a)?a.field:lf(a)?{expr:`${a.datum}`}:Nc(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(e=new Bb(e,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Bl)){const i=n.typedFieldDef(Bl);i.type===w1&&(e=new Bb(e,null,i.field,n.getName(`geojson_${r++}`)))}return e}constructor(e,n,r,i){super(e),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const e=(this.fields??[]).filter(Nt);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class F2 extends Ri{clone(){return new F2(null,this.projection,Vn(this.fields),Vn(this.as))}constructor(e,n,r,i){super(e),this.projection=n,this.fields=r,this.as=i}static parseAll(e,n){if(!n.projectionName())return e;for(const r of[[Xc,Yc],[Gu,Zc]]){const i=r.map(o=>{const a=bo(n.encoding[o]);return kt(a)?a.field:lf(a)?{expr:`${a.datum}`}:Nc(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Gu?"2":"";(i[0]||i[1])&&(e=new F2(e,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return e}dependentFields(){return new Set(this.fields.filter(Nt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mr(this.fields)} ${Mr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class e0 extends Ri{clone(){return new e0(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:n=0,stop:r,step:i}=e;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(e,n){return new e0(e,n)}static makeFromEncoding(e,n){const r=n.encoding,i=r.x,s=r.y;if(kt(i)&&kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:d,keyvals:c}=o.impute,f=CMe(n.mark,r);return new e0(e,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...d?{frame:d}:{},...c!==void 0?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${Mr(this.transform)}`}assemble(){const{impute:e,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:e,key:n,...r?{keyvals:Qxt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${e}_value`],ops:[i],fields:[e],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},d={type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e};return[l,u,d]}else return[l]}}class ER extends Ri{clone(){return new ER(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mr(this.transform)}`}assemble(){const{loess:e,on:n,...r}=this.transform;return{type:"loess",x:n,y:e,...r}}}class O2 extends Ri{clone(){return new O2(null,Vn(this.transform),this.secondary)}constructor(e,n,r){super(e),this.transform=n,this.secondary=r}static make(e,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(ewt(o)){let l=p6e(o.data,s);l||(l=new T0(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new Ml(l,u,xs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(twt(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(ds(l),l)}catch{throw new Error(Cbt(l))}if(a=u.materialized,!a)throw new Error(Sbt(l))}return new O2(e,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mr({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Nt(n)||(At($bt),n="_lookup"),e={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class CR extends Ri{clone(){return new CR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mr(this.transform)}`}assemble(){const{quantile:e,...n}=this.transform;return{type:"quantile",field:e,...n}}}class SR extends Ri{clone(){return new SR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mr(this.transform)}`}assemble(){const{regression:e,on:n,...r}=this.transform;return{type:"regression",x:n,y:e,...r}}}class AR extends Ri{clone(){return new AR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n}addDimensions(e){this.transform.groupby=Sd((this.transform.groupby??[]).concat(e),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mr(this.transform)}`}assemble(){const{pivot:e,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:e,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class kR extends Ri{clone(){return new kR(null,Vn(this.transform))}constructor(e,n){super(e),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function f6e(t){let e=0;function n(r,i){if(r instanceof T0&&!r.isGenerator&&!Rv(r.data)&&(t.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Da&&(r.parent instanceof T0&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof C1){i.name||(i.name=`data_${e++}`),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,t.push(...r.assemble());return}switch((r instanceof oC||r instanceof aC||r instanceof $v||r instanceof E1||r instanceof Ov||r instanceof F2||r instanceof Tc||r instanceof O2||r instanceof S1||r instanceof J0||r instanceof _R||r instanceof wR||r instanceof vR||r instanceof ER||r instanceof CR||r instanceof SR||r instanceof lm||r instanceof kR||r instanceof AR||r instanceof xR)&&i.transform.push(r.assemble()),(r instanceof Od||r instanceof Rd||r instanceof e0||r instanceof ih||r instanceof Bb)&&i.transform.push(...r.assemble()),r instanceof Ml&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ml?r.setSource(i.name):(i.name||(i.name=`data_${e++}`),r.setSource(i.name),r.numChildren()===1&&(t.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ml&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${e++}`);let s=i.name;!i.source||i.transform.length>0?t.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function pEt(t){const e=[],n=f6e(e);for(const r of t.children)n(r,{source:t.name,name:null,transform:[]});return e}function mEt(t,e){const n=[],r=f6e(n);let i=0;for(const o of t.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=t.outputNodes[a.from].getSource());for(const o of n)o.name in e&&(o.values=e[o.name]);return n}function gEt(t){return t==="top"||t==="left"||cn(t)?"header":"footer"}function yEt(t){for(const e of Iu)bEt(t,e);_2e(t,"x"),_2e(t,"y")}function bEt(t,e){var o;const{facet:n,config:r,child:i,component:s}=t;if(t.channelHasField(e)){const a=n[e],l=Iv("title",null,r,e);let u=Pb(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[e].title&&(u=at(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[e].title}`,i.component.layoutHeaders[e].title=null);const d=Iv("labelOrient",a.header,r,e),c=a.header!==null?zs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=Er(["bottom","right"],d)?"footer":"header";s.layoutHeaders[e]={title:a.header!==null?u:null,facetFieldDef:a,[f]:e==="facet"?[]:[h6e(t,e,c)]}}}function h6e(t,e,n){const r=e==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function _2e(t,e){const{child:n}=t;if(n.component.axes[e]){const{layoutHeaders:r,resolve:i}=t.component;if(i.axis[e]=a7(i,e),i.axis[e]==="shared"){const s=e==="x"?"column":"row",o=r[s];for(const a of n.component.axes[e]){const l=gEt(a.get("orient"));o[l]??(o[l]=[h6e(t,s,!1)]);const u=c_(a,"main",t.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function vEt(t){m7(t),K3(t,"width"),K3(t,"height")}function xEt(t){m7(t);const e=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";K3(t,e),K3(t,n)}function m7(t){for(const e of t.children)e.parseLayoutSize()}function K3(t,e){const n=BIe(e),r=VL(n),i=t.component.resolve,s=t.component.layoutSize;let o;for(const a of t.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??jIe(r,t);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=am(o,l,n,"")}else o=l}if(o){for(const a of t.children)t.renameSignal(a.getName(n),t.getName(e)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(e,o)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function wEt(t){const{size:e,component:n}=t;for(const r of Ah){const i=zl(r);if(e[i]){const s=e[i];n.layoutSize.set(i,Vd(s)?"step":s,!0)}else{const s=_Et(t,i);n.layoutSize.set(i,s,!1)}}}function _Et(t,e){const n=e==="width"?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if($o(s)){const a=W3(r.view,e);return W0(o)||Vd(a)?"step":a}else return YI(r.view,e)}else{if(t.hasProjection||t.mark==="arc")return YI(r.view,e);{const s=W3(r.view,e);return Vd(s)?s.step:s}}}function f6(t,e,n){return Ft(e,{suffix:`by_${Ft(t)}`,...n})}class N_ extends d6e{constructor(e,n,r,i){super(e,"facet",n,r,i,e.resolve),this.child=x7(e.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!eC(e))return{facet:this.initFacetFieldDef(e,"facet")};const n=_t(e),r={};for(const i of n){if(![eh,th].includes(i)){At(XL(i,"facet"));break}const s=e[i];if(s.field===void 0){At(qI(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(e,n){const r=BB(e,n);return r.header?r.header=Zo(r.header):r.header===null&&(r.header=null),r}channelHasField(e){return Ct(this.facet,e)}fieldDef(e){return this.facet[e]}parseData(){this.component.data=TR(this),this.child.parseData()}parseLayoutSize(){m7(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(e=>Fd(e))&&pB(hB)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),yEt(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const n of Iu)for(const r of s7){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Iv("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=gR(n,a);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(e[l]??(e[l]={}),e[l][n]=.5),i.title&&(e.offset??(e.offset={}),e.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:n}=this.facet,r=e?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!e&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof N_))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof N_?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ft(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],n=[],r=[];if(this.child instanceof N_){if(this.child.channelHasField("column")){const i=Ft(this.child.facet.column);e.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Ah){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if($o(o)&&W0(a)){const l=bR(this.child,i),u=f7(l);u?(e.push(u),n.push("distinct"),r.push(`distinct_${u}`)):At(fB(i))}}}return{fields:e,ops:n,as:r}}assembleFacet(){const{name:e,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const d of Iu){const c=this.facet[d];if(c){l.push(Ft(c));const{bin:f,sort:h}=c;if(Ji(f)&&l.push(Ft(c,{binSuffix:"end"})),nh(h)){const{field:p,op:g=nR}=h,b=f6(c,h);r&&i?(s.push(b),o.push("max"),a.push(b)):(s.push(p),o.push(g),a.push(b))}else if(at(h)){const p=Mv(c,d);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:e,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:n}=this,r=n[e];return r?nh(r.sort)?[f6(r,r.sort,{expr:"datum"})]:at(r.sort)?[Mv(r,e,{expr:"datum"})]:[Ft(r,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:n}=this,r=n[e];if(r){const{sort:i}=r;return[(nh(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:e,config:n}=this;if(e.facet)return s6(e.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of i7)if(e[s]){const o=Iv("labelOrient",(i=e[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return s6(e[s],s,n)}}assembleMarks(){const{child:e}=this,n=this.component.data.facetRoot,r=pEt(n),i=e.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||e.assembleTitle(),o=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Iu.map(l=>this.facetSortFields(l)).flat(),order:Iu.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...e.assembleGroup(Pwt(this,[]))}]}getMapping(){return this.facet}}function EEt(t,e){const{row:n,column:r}=e;if(n&&r){let i=null;for(const s of[n,r])if(nh(s.sort)){const{field:o,op:a=nR}=s.sort;t=i=new J0(t,{joinaggregate:[{op:a,field:o,as:f6(s,s.sort,{forAs:!0})}],groupby:[Ft(s)]})}return i}return null}function p6e(t,e){var n,r,i,s;for(const o of e){const a=o.data;if(t.name&&o.hasName()&&t.name!==o.dataName)continue;const l=(n=t.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const d=(i=t.format)==null?void 0:i.feature;if((d||u)&&d!==u)continue;const c=(s=a.format)==null?void 0:s.mesh;if(!((l||c)&&l!==c)){if(R2(t)&&R2(a)){if(tu(t.values,a.values))return o}else if(Rv(t)&&Rv(a)){if(t.url===a.url)return o}else if(eIe(t)&&t.name===o.dataName)return o}}return null}function CEt(t,e){if(t.data||!t.parent){if(t.data===null){const r=new T0({values:[]});return e.push(r),r}const n=p6e(t.data,e);if(n)return Hp(t.data)||(n.data.format=X5e({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const r=new T0(t.data);return e.push(r),r}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function SEt(t,e,n){let r=0;for(const i of e.transforms){let s,o;if(dwt(i))o=t=new Ov(t,i),s="derived";else if(KB(i)){const a=m2t(i);o=t=Da.makeWithAncestors(t,{},a,n)??t,t=new E1(t,e,i.filter)}else if(XMe(i))o=t=Od.makeFromTransform(t,i,e),s="number";else if(hwt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(t=new Da(t,{[i.field]:s}),n.set(i.field,s,!1)),o=t=Rd.makeFromTransform(t,i);else if(pwt(i))o=t=Tc.makeFromTransform(t,i),s="number",r7(e)&&(t=new lm(t));else if(YMe(i))o=t=O2.make(t,e,i,r++),s="derived";else if(lwt(i))o=t=new S1(t,i),s="number";else if(uwt(i))o=t=new J0(t,i),s="number";else if(mwt(i))o=t=ih.makeFromTransform(t,i),s="derived";else if(gwt(i))o=t=new _R(t,i),s="derived";else if(ywt(i))o=t=new xR(t,i),s="derived";else if(cwt(i))o=t=new wR(t,i),s="derived";else if(nwt(i))o=t=new AR(t,i),s="derived";else if(awt(i))t=new kR(t,i);else if(fwt(i))o=t=e0.makeFromTransform(t,i),s="derived";else if(rwt(i))o=t=new vR(t,i),s="derived";else if(iwt(i))o=t=new CR(t,i),s="derived";else if(swt(i))o=t=new SR(t,i),s="derived";else if(owt(i))o=t=new ER(t,i),s="derived";else{At(Ibt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return t}function TR(t){var b;let e=CEt(t,t.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=t.component.data,i=t.data,o=!(i&&(Hp(i)||Rv(i)||R2(i)))&&t.parent?t.parent.component.data.ancestorParse.clone():new Dwt;Hp(i)?(tIe(i)?e=new aC(e,i.sequence):JB(i)&&(e=new oC(e,i.graticule)),o.parseNothing=!0):((b=i==null?void 0:i.format)==null?void 0:b.parse)===null&&(o.parseNothing=!0),e=Da.makeExplicit(e,t,o)??e,e=new lm(e);const a=t.parent&&A1(t.parent);(vs(t)||au(t))&&a&&(e=Od.makeFromEncoding(e,t)??e),t.transforms.length>0&&(e=SEt(e,t,o));const l=y2t(t),u=g2t(t);e=Da.makeWithAncestors(e,{},{...l,...u},o)??e,vs(t)&&(e=Bb.parseAll(e,t),e=F2.parseAll(e,t)),(vs(t)||au(t))&&(a||(e=Od.makeFromEncoding(e,t)??e),e=Rd.makeFromEncoding(e,t)??e,e=Ov.parseAllForSortIndex(e,t));const d=e=GS(xs.Raw,t,e);if(vs(t)){const y=Tc.makeFromEncoding(e,t);y&&(e=y,r7(t)&&(e=new lm(e))),e=e0.makeFromEncoding(e,t)??e,e=ih.makeFromEncoding(e,t)??e}let c,f;if(vs(t)){const{markDef:y,mark:v,config:w}=t,E=$i("invalid",y,w),{marks:S,scales:T}=f=rIe({invalid:E,isPath:Am(v)});S!==T&&T==="include-invalid-values"&&(c=e=GS(xs.PreFilterInvalid,t,e)),S==="exclude-invalid-values"&&(e=$v.make(e,t,f)??e)}const h=e=GS(xs.Main,t,e);let p;if(vs(t)&&f){const{marks:y,scales:v}=f;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(e=$v.make(e,t,f)??e,p=e=GS(xs.PostFilterInvalid,t,e))}vs(t)&&f_t(t,h);let g=null;if(au(t)){const y=t.getName("facet");e=EEt(e,t.facet)??e,g=new C1(e,t,y,h.getSource()),n[y]=g}return{...t.component.data,outputNodes:n,outputNodeRefCounts:r,raw:d,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:c,postFilterInvalid:p}}function GS(t,e,n){const{outputNodes:r,outputNodeRefCounts:i}=e.component.data,s=e.getDataName(t),o=new Ml(n,s,t,i);return r[s]=o,o}class AEt extends p7{constructor(e,n,r,i){var s,o,a,l;super(e,"concat",n,r,i,e.resolve),(((o=(s=e.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=e.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&At(Fbt),this.children=this.getChildren(e).map((u,d)=>x7(u,this,this.getName(`concat_${d}`),void 0,i))}parseData(){this.component.data=TR(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of _t(e.component.selection))this.component.selection[n]=e.component.selection[n]}Object.values(this.component.selection).some(e=>Fd(e))&&pB(hB)}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return uR(e)?e.vconcat:XB(e)?e.hconcat:e.concat}parseLayoutSize(){xEt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=o7(this);for(const n of this.children)e.push(...n.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((n,r)=>r.assembleSelectionData(n),e)}assembleMarks(){return this.children.map(e=>{const n=e.assembleTitle(),r=e.assembleGroupStyle(),i=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...e.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return{...e!=null?{columns:e}:{},bounds:"full",align:"each"}}}function kEt(t){return t===!1||t===null}const TEt={disable:1,gridScale:1,scale:1,...bMe,labelExpr:1,encode:1},m6e=_t(TEt);class g7 extends Th{constructor(e={},n={},r=!1){super(),this.explicit=e,this.implicit=n,this.mainExtracted=r}clone(){return new g7(Vn(this.explicit),Vn(this.implicit),this.mainExtracted)}hasAxisPart(e){return e==="axis"?!0:e==="grid"||e==="title"?!!this.get(e):!kEt(this.get(e))}hasOrientSignalRef(){return cn(this.explicit.orient)}}function DEt(t,e,n){const{encoding:r,config:i}=t,s=bo(r[e])??bo(r[of(e)]),o=t.axis(e)||{},{format:a,formatType:l}=o;if(S0(l))return{text:Sc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Tv(s)==="quantitative"){if(Dv(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Sc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Sc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Tv(s)==="temporal"&&i.timeFormatType&&kt(s)&&!s.timeUnit)return{text:Sc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function LEt(t){return Ah.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[PEt(n,t)]),e),{})}const REt={bottom:"top",top:"bottom",left:"right",right:"left"};function FEt(t){const{axes:e,resolve:n}=t.component,r={top:0,bottom:0,right:0,left:0};for(const i of t.children){i.parseAxesAndHeaders();for(const s of _t(i.component.axes))n.axis[s]=a7(t.component.resolve,s),n.axis[s]==="shared"&&(e[s]=OEt(e[s],i.component.axes[s]),e[s]||(n.axis[s]="independent",delete e[s]))}for(const i of Ah){for(const s of t.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){e[i]=(e[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!cn(a)){if(r[a]>0&&!l){const u=REt[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&e[i]&&e[i].length>1)for(const[s,o]of(e[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function OEt(t,e){if(t){if(t.length!==e.length)return;const n=t.length;for(let r=0;r<n;r++){const i=t[r],s=e[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;t[r]=MEt(i,s)}}}else return e.map(n=>n.clone());return t}function MEt(t,e){for(const n of m6e){const r=am(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return _4e(i,s);case"gridScale":return{explicit:i.explicit,value:zs(i.value,s.value)}}return dR(i,s,n,"axis")});t.setWithExplicit(n,r)}return t}function IEt(t,e,n,r,i){if(e==="disable")return n!==void 0;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(cn(n.labelAngle)?n.labelAngle:D2(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===MIe(r,i))return!0}return t===n[e]}const $Et=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function PEt(t,e){var y,v;let n=e.axis(t);const r=new g7,i=bo(e.encoding[t]),{mark:s,config:o}=e,a=(n==null?void 0:n.orient)||((y=o[t==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||__t(t),l=e.getScaleComponent(t).get("type"),u=m_t(t,l,a,e.config),d=n!==void 0?!n:r6("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",d,n!==void 0),d)return r;n=n||{};const c=v_t(i,n,t,o.style,u),f=iMe(n.formatType,i,l),h=rMe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:t,model:e,scaleType:l,orient:a,labelAngle:c,format:h,formatType:f,mark:s,config:o};for(const w of m6e){const E=w in a2e?a2e[w](p):M_e(w)?n[w]:void 0,S=E!==void 0,T=IEt(E,w,n,e,t);if(S&&T)r.set(w,E,T);else{const{configValue:D=void 0,configFrom:k=void 0}=M_e(w)&&w!=="values"?r6(w,o.style,n.style,u):{},R=D!==void 0;S&&!R?r.set(w,E,T):(k!=="vgAxisConfig"||$Et.has(w)&&R||iC(D)||cn(D))&&r.set(w,D,!1)}}const g=n.encoding??{},b=yMe.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const S=zIe(g[E]??{},e),T=E==="labels"?DEt(e,t,S):S;return T!==void 0&&!Pi(T)&&(w[E]={update:T}),w},{});return Pi(b)||r.set("encode",b,!!n.encoding||n.labelAngle!==void 0),r}function NEt({encoding:t,size:e}){for(const n of Ah){const r=zl(n);Vd(e[r])&&Mp(t[n])&&(delete e[r],At(k4e(r)))}return e}const BEt={vgMark:"arc",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Qa("x",t,{defaultPos:"mid"}),...Qa("y",t,{defaultPos:"mid"}),...fh(t,"radius"),...fh(t,"theta")})},zEt={vgMark:"area",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Y3("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"}),...Y3("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"}),...n7(t)})},jEt={vgMark:"rect",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fh(t,"x"),...fh(t,"y")})},UEt={vgMark:"shape",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[{type:"geoshape",projection:t.projectionName(),...n&&kt(n)&&n.type===w1?{field:Ft(n,{expr:"datum"})}:{}}]}},qEt={vgMark:"image",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fh(t,"x"),...fh(t,"y"),...e7(t,"url")})},HEt={vgMark:"line",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Qa("x",t,{defaultPos:"mid"}),...Qa("y",t,{defaultPos:"mid"}),...Jo("size",t,{vgChannel:"strokeWidth"}),...n7(t)})},GEt={vgMark:"trail",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Qa("x",t,{defaultPos:"mid"}),...Qa("y",t,{defaultPos:"mid"}),...Jo("size",t),...n7(t)})};function y7(t,e){const{config:n}=t;return{...Xu(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Qa("x",t,{defaultPos:"mid"}),...Qa("y",t,{defaultPos:"mid"}),...Jo("size",t),...Jo("angle",t),...VEt(t,n,e)}}function VEt(t,e,n){return n?{shape:{value:n}}:Jo("shape",t)}const WEt={vgMark:"symbol",encodeEntry:t=>y7(t)},YEt={vgMark:"symbol",encodeEntry:t=>y7(t,"circle")},XEt={vgMark:"symbol",encodeEntry:t=>y7(t,"square")},ZEt={vgMark:"rect",encodeEntry:t=>({...Xu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fh(t,"x"),...fh(t,"y")})},KEt={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:{...Xu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Y3("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Y3("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Jo("size",t,{vgChannel:"strokeWidth"})}}},JEt={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return{...Xu(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Qa("x",t,{defaultPos:"mid"}),...Qa("y",t,{defaultPos:"mid"}),...e7(t),...Jo("size",t,{vgChannel:"fontSize"}),...Jo("angle",t),...r2e("align",QEt(t.markDef,n,e)),...r2e("baseline",eCt(t.markDef,n,e)),...Qa("radius",t,{defaultPos:null}),...Qa("theta",t,{defaultPos:null})}}};function QEt(t,e,n){if($i("align",t,n)===void 0)return"center"}function eCt(t,e,n){if($i("baseline",t,n)===void 0)return"middle"}const tCt={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Xu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fh(t,i),...Qa(s,t,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:as($i("thickness",n,e))}}},VS={arc:BEt,area:zEt,bar:jEt,circle:YEt,geoshape:UEt,image:qEt,line:HEt,point:WEt,rect:ZEt,rule:KEt,square:XEt,text:JEt,tick:tCt,trail:GEt};function nCt(t){if(Er([eR,JL,l1t],t.mark)){const e=CMe(t.mark,t.encoding);if(e.length>0)return rCt(t,e)}else if(t.mark===QL){const e=jI.some(n=>$i(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return iCt(t)}return b7(t)}const E2e="faceted_path_";function rCt(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:E2e+t.requestDataName(xs.Main),data:t.requestDataName(xs.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:b7(t,{fromPrefix:E2e})}]}const C2e="stack_group_";function iCt(t){var u;const[e]=b7(t,{fromPrefix:C2e}),n=t.scaleName(t.stack.fieldChannel),r=(d={})=>t.vgField(t.stack.fieldChannel,d),i=(d,c)=>{const f=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${d}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;t.stack.fieldChannel==="x"?(s={..._v(e.encode.update,["y","yc","y2","height",...jI]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...Ol(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={..._v(e.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...Ol(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of jI){const c=Hd(d,t.markDef,t.config);e.encode.update[d]?(s[d]=e.encode.update[d],delete e.encode.update[d]):c&&(s[d]=as(c)),c&&(e.encode.update[d]={value:0})}const a=[];if(((u=t.stack.groupbyChannels)==null?void 0:u.length)>0)for(const d of t.stack.groupbyChannels){const c=t.fieldDef(d),f=Ft(c);f&&a.push(f),(c!=null&&c.bin||c!=null&&c.timeUnit)&&a.push(Ft(c,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,c)=>{if(e.encode.update[c])return{...d,[c]:e.encode.update[c]};{const f=Hd(c,t.markDef,t.config);return f!==void 0?{...d,[c]:as(f)}:d}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(xs.Main),name:C2e+t.requestDataName(xs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}function sCt(t){const{encoding:e,stack:n,mark:r,markDef:i,config:s}=t,o=e.order;if(!(!at(o)&&Nc(o)&&BI(o.value)||!o&&BI($i("order",i,s)))){if((at(o)||kt(o))&&!n)return v4e(o,{expr:"datum"});if(Am(r)){const a=i.orient==="horizontal"?"y":"x",l=e[a];if(kt(l))return{field:a}}}}function b7(t,e={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=t,o=zs(r.clip,oCt(t),aCt(t)),a=y4e(r),l=i.key,u=sCt(t),d=lCt(t),c=$i("aria",r,s),f=VS[n].postEncodingTransform?VS[n].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:VS[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...d||{},...c===!1?{aria:c}:{},from:{data:e.fromPrefix+t.requestDataName(xs.Main)},encode:{update:VS[n].encodeEntry(t)},...f?{transform:f}:{}}]}function oCt(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return e!=null&&e.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function aCt(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function lCt(t){if(!t.component.selection)return null;const e=_t(t.component.selection).length;let n=e,r=t.parent;for(;r&&n===0;)n=_t(r.component.selection).length,r=r.parent;return n?{interactive:e>0||t.mark==="geoshape"||!!t.encoding.tooltip||!!t.markDef.tooltip}:null}class g6e extends d6e{constructor(e,n,r,i={},s){super(e,"unit",n,r,s,void 0,$_e(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>{var d,c,f;return(d=u.from)!=null&&d.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+sIe)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u};const o=Gd(e.mark)?{...e.mark}:{type:e.mark},a=o.type;o.filled===void 0&&(o.filled=Gxt(o,s,{graticule:e.data&&JB(e.data)}));const l=this.encoding=X1t(e.encoding||{},a,o.filled,s);this.markDef=GMe(o,l,s),this.size=NEt({encoding:l,size:$_e(e)?{...i,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:i}),this.stack=HMe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter(u=>WB(u))}get hasProjection(){const{encoding:e}=this,n=this.mark===Z4e,r=e&&jyt.some(i=>Yn(e[i]));return n||r}scaleDomain(e){const n=this.specifiedScales[e];return n?n.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,n){return uB.reduce((r,i)=>{const s=bo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(e){const{domain:n,range:r}=e,i=Zo(e);return at(n)&&(i.domain=n.map(Jl)),at(r)&&(i.range=r.map(Jl)),i}initAxes(e){return Ah.reduce((n,r)=>{const i=e[r];if(Yn(i)||r===fs&&Yn(e.x2)||r===No&&Yn(e.y2)){const s=Yn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(e){const n=_t(e),r={};for(const i of n){const s=e[i];r[i]=iC(s)?g4e(s):Jl(s)}return r}initLegends(e){return Jyt.reduce((n,r)=>{const i=bo(e[r]);if(i&&ebt(r)){const s=i.legend;n[r]=s&&Zo(s)}return n},{})}parseData(){this.component.data=TR(this)}parseLayoutSize(){wEt(this)}parseSelections(){this.component.selection=d_t(this,this.selection)}parseMarkGroup(){this.component.mark=nCt(this)}parseAxesAndHeaders(){this.component.axes=LEt(this)}assembleSelectionTopLevelSignals(e){return Nwt(this,e)}assembleSignals(){return[...RIe(this),...$wt(this,[])]}assembleSelectionData(e){return Bwt(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return o7(this)}assembleMarks(){let e=this.component.mark??[];return(!this.parent||!A1(this.parent))&&(e=uIe(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return e!==void 0?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Jg(this.encoding,e)}fieldDef(e){const n=this.encoding[e];return Bc(n)}typedFieldDef(e){const n=this.fieldDef(e);return il(n)?n:null}}class v7 extends p7{constructor(e,n,r,i,s){super(e,"layer",n,r,s,e.resolve,e.view);const o={...i,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map((a,l)=>{if(cR(a))return new v7(a,this,this.getName(`layer_${l}`),o,s);if(kh(a))return new g6e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(dB(a))})}parseData(){this.component.data=TR(this);for(const e of this.children)e.parseData()}parseLayoutSize(){vEt(this)}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const n of _t(e.component.selection))this.component.selection[n]=e.component.selection[n]}Object.values(this.component.selection).some(e=>Fd(e))&&pB(hB)}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){FEt(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),e)}assembleSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleSignals()),RIe(this))}assembleLayoutSignals(){return this.children.reduce((e,n)=>e.concat(n.assembleLayoutSignals()),o7(this))}assembleSelectionData(e){return this.children.reduce((n,r)=>r.assembleSelectionData(n),e)}assembleGroupStyle(){const e=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))e.add(i);const n=Array.from(e);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const n of this.children)if(e=n.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return zwt(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,n)=>e.concat(n.assembleLegends()),YIe(this))}}function x7(t,e,n,r,i){if(rR(t))return new N_(t,e,n,i);if(cR(t))return new v7(t,e,n,r,i);if(kh(t))return new g6e(t,e,n,r,i);if(vxt(t))return new AEt(t,e,n,i);throw new Error(dB(t))}function uCt(t,e={}){e.logger&&_vt(e.logger),e.fieldTitle&&pMe(e.fieldTitle);try{const n=qMe(a1(e.config,t.config)),r=JMe(t,n),i=x7(r,null,"",void 0,n);return i.parse(),O2t(i.component.data,i),{spec:dCt(i,cCt(t,r.autosize,n,i),t.datasets,t.usermeta),normalized:r}}finally{e.logger&&Evt(),e.fieldTitle&&z1t()}}function cCt(t,e,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},r.hasAxisOrientSignalRef()&&(e.resize=!0)):Nt(e)&&(e={type:e}),i&&s&&Awt(e.type)){if(i==="step"&&s==="step")At(x_e()),e.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";At(x_e(VL(o)));const a=o==="width"?"height":"width";e.type=kwt(a)}}return{..._t(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e},...Y_e(n,!1),...Y_e(t,!0)}}function dCt(t,e,n={},r){const i=t.config?Oxt(t.config):void 0,s=mEt(t.component.data,n),o=t.assembleSelectionData(s),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),d=t.assembleGroupEncodeEntry(!0);let c=t.assembleLayoutSignals();c=c.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(e[p.name]=+p.value,!1):!0);const{params:f,...h}=e;return{$schema:"https://vega.github.io/schema/vega/v5.json",...t.description?{description:t.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...d?{encode:{update:d}}:{},data:o,...a.length>0?{projections:a}:{},...t.assembleGroup([...c,...t.assembleSelectionTopLevelSignals([]),...BMe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const fCt=Iyt.version,hCt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Cv,accessPathWithDatum:tB,accessWithDatumToUnescapedPath:Di,compile:uCt,contains:Er,deepEqual:tu,deleteNestedProperty:N3,duplicate:Vn,entries:im,every:J9,fieldIntersection:eB,flatAccessWithDatum:K5e,getFirstDefined:zs,hasIntersection:Q9,hasProperty:Ct,hash:Mr,internalField:e4e,isBoolean:T2,isEmpty:Pi,isEqual:Pyt,isInternalField:t4e,isNullOrFalse:BI,isNumeric:zL,keys:_t,logicalExpr:$_,mergeDeep:X5e,never:Y5e,normalize:JMe,normalizeAngle:D2,omit:Ol,pick:_v,prefixGenerator:zI,removePathFromField:v1,replaceAll:v0,replacePathInField:Hu,resetIdCounter:Byt,setEqual:Z5e,some:Ev,stringify:Ni,titleCase:WE,unique:Sd,uniqueId:Q5e,vals:ra,varName:ds,version:fCt},Symbol.toStringTag,{value:"Module"}));function y6e(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}var pCt="vega-themes",mCt="2.15.0",gCt="Themes for stylized Vega and Vega-Lite visualizations.",yCt=["vega","vega-lite","themes","style"],bCt="BSD-3-Clause",vCt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},xCt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],wCt="build/vega-themes.js",_Ct="build/vega-themes.module.js",ECt="build/vega-themes.min.js",CCt="build/vega-themes.min.js",SCt="build/vega-themes.module.d.ts",ACt={type:"git",url:"https://github.com/vega/vega-themes.git"},kCt=["src","build"],TCt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},DCt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},LCt={vega:"*","vega-lite":"*"},RCt={},FCt={name:pCt,version:mCt,description:gCt,keywords:yCt,license:bCt,author:vCt,contributors:xCt,main:wCt,module:_Ct,unpkg:ECt,jsdelivr:CCt,types:SCt,repository:ACt,files:kCt,scripts:TCt,devDependencies:DCt,peerDependencies:LCt,dependencies:RCt};const Qy="#fff",S2e="#888",OCt={background:"#333",view:{stroke:S2e},title:{color:Qy,subtitleColor:Qy},style:{"guide-label":{fill:Qy},"guide-title":{fill:Qy}},axis:{domainColor:Qy,gridColor:S2e,tickColor:Qy}},pg="#4572a7",MCt={background:"#fff",arc:{fill:pg},area:{fill:pg},line:{stroke:pg,strokeWidth:2},path:{stroke:pg},rect:{fill:pg},shape:{stroke:pg},symbol:{fill:pg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},mg="#30a2da",FO="#cbcbcb",ICt="#999",$Ct="#333",A2e="#f0f0f0",k2e="#333",PCt={arc:{fill:mg},area:{fill:mg},axis:{domainColor:FO,grid:!0,gridColor:FO,gridWidth:1,labelColor:ICt,labelFontSize:10,titleColor:$Ct,tickColor:FO,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:A2e,group:{fill:A2e},legend:{labelColor:k2e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:k2e,titleFontSize:14,titlePadding:10},line:{stroke:mg,strokeWidth:2},path:{stroke:mg,strokeWidth:.5},rect:{fill:mg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:mg},bar:{binSpacing:2,fill:mg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},gg="#000",NCt={group:{fill:"#e5e5e5"},arc:{fill:gg},area:{fill:gg},line:{stroke:gg},path:{stroke:gg},rect:{fill:gg},shape:{stroke:gg},symbol:{fill:gg,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},BCt=22,zCt="normal",T2e="Benton Gothic, sans-serif",D2e=11.5,jCt="normal",yg="#82c6df",OO="Benton Gothic Bold, sans-serif",L2e="normal",R2e=13,Fw={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},UCt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:OO,fontSize:BCt,fontWeight:zCt},arc:{fill:yg},area:{fill:yg},line:{stroke:yg,strokeWidth:2},path:{stroke:yg},rect:{fill:yg},shape:{stroke:yg},symbol:{fill:yg,size:30},axis:{labelFont:T2e,labelFontSize:D2e,labelFontWeight:jCt,titleFont:OO,titleFontSize:R2e,titleFontWeight:L2e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:T2e,labelFontSize:D2e,symbolType:"square",titleFont:OO,titleFontSize:R2e,titleFontWeight:L2e},range:{category:Fw["category-6"],diverging:Fw["fireandice-6"],heatmap:Fw["fire-7"],ordinal:Fw["fire-7"],ramp:Fw["fire-7"]}},bg="#ab5787",WS="#979797",qCt={background:"#f9f9f9",arc:{fill:bg},area:{fill:bg},line:{stroke:bg},path:{stroke:bg},rect:{fill:bg},shape:{stroke:bg},symbol:{fill:bg,size:30},axis:{domainColor:WS,domainWidth:.5,gridWidth:.2,labelColor:WS,tickColor:WS,tickWidth:.2,titleColor:WS},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},vg="#3e5c69",HCt={background:"#fff",arc:{fill:vg},area:{fill:vg},line:{stroke:vg},path:{stroke:vg},rect:{fill:vg},shape:{stroke:vg},symbol:{fill:vg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Eu="#1696d2",F2e="#000000",GCt="#FFFFFF",YS="Lato",MO="Lato",VCt="Lato",WCt="#DEDDDD",YCt=18,Ow={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},XCt={background:GCt,title:{anchor:"start",fontSize:YCt,font:YS},axisX:{domain:!0,domainColor:F2e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:MO,labelAngle:0,tickColor:F2e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:YS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:WCt,gridWidth:1,labelFontSize:12,labelFont:MO,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:YS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:MO,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:YS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Ow["six-groups-cat-1"],diverging:Ow["diverging-colors"],heatmap:Ow["diverging-colors"],ordinal:Ow["six-groups-seq"],ramp:Ow["shades-blue"]},area:{fill:Eu},rect:{fill:Eu},line:{color:Eu,stroke:Eu,strokeWidth:5},trail:{color:Eu,stroke:Eu,strokeWidth:0,size:1},path:{stroke:Eu,strokeWidth:.5},point:{filled:!0},text:{font:VCt,color:Eu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Eu,stroke:null}},arc:{fill:Eu},shape:{stroke:Eu},symbol:{fill:Eu,size:30}},xg="#3366CC",O2e="#ccc",XS="Arial, sans-serif",ZCt={arc:{fill:xg},area:{fill:xg},path:{stroke:xg},rect:{fill:xg},shape:{stroke:xg},symbol:{stroke:xg},circle:{fill:xg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:XS,fontSize:12},"guide-title":{font:XS,fontSize:12},"group-title":{font:XS,fontSize:12}},title:{font:XS,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:O2e,tickColor:O2e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},w7=t=>t*(1/3+1),M2e=w7(9),I2e=w7(10),$2e=w7(12),Mw="Segoe UI",P2e="wf_standard-font, helvetica, arial, sans-serif",N2e="#252423",Iw="#605E5C",B2e="transparent",KCt="#C8C6C4",fc="#118DFF",JCt="#12239E",QCt="#E66C37",eSt="#6B007B",tSt="#E044A7",nSt="#744EC2",rSt="#D9B300",iSt="#D64550",b6e=fc,v6e="#DEEFFF",z2e=[v6e,b6e],sSt=[v6e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",b6e],oSt={view:{stroke:B2e},background:B2e,font:Mw,header:{titleFont:P2e,titleFontSize:$2e,titleColor:N2e,labelFont:Mw,labelFontSize:I2e,labelColor:Iw},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Iw,labelFontSize:M2e,titleFont:P2e,titleColor:N2e,titleFontSize:$2e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:KCt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:fc},line:{stroke:fc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Mw,fontSize:M2e,fill:Iw},arc:{fill:fc},area:{fill:fc,line:!0,opacity:.6},path:{stroke:fc},rect:{fill:fc},point:{fill:fc,filled:!0,size:75},shape:{stroke:fc},symbol:{fill:fc,strokeWidth:1.5,size:50},legend:{titleFont:Mw,titleFontWeight:"bold",titleColor:Iw,labelFont:Mw,labelFontSize:I2e,labelColor:Iw,symbolType:"circle",symbolSize:75},range:{category:[fc,JCt,QCt,eSt,tSt,nSt,rSt,iSt],diverging:z2e,heatmap:z2e,ordinal:sSt}},IO='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',aSt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$O=400,ZS={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},lSt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],uSt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function DR({theme:t,background:e}){const n=["white","g10"].includes(t)?"light":"dark",r=ZS.gridBg[t],i=ZS.textPrimary[t],s=ZS.textSecondary[t],o=n==="dark"?lSt:uSt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:e,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:IO,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:aSt,labelFontWeight:$O,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:ZS.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:IO,fill:s,fontWeight:$O},"guide-title":{font:IO,fill:s,fontWeight:$O}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const cSt=DR({theme:"white",background:"#ffffff"}),dSt=DR({theme:"g10",background:"#f4f4f4"}),fSt=DR({theme:"g90",background:"#262626"}),hSt=DR({theme:"g100",background:"#161616"}),pSt=FCt.version,mSt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:dSt,carbong100:hSt,carbong90:fSt,carbonwhite:cSt,dark:OCt,excel:MCt,fivethirtyeight:PCt,ggplot2:NCt,googlecharts:ZCt,latimes:UCt,powerbi:oSt,quartz:qCt,urbaninstitute:XCt,version:pSt,vox:HCt},Symbol.toStringTag,{value:"Module"}));function gSt(t,e,n,r){if(at(t))return`[${t.map(i=>e(Nt(i)?i:j2e(i,n))).join(", ")}]`;if(It(t)){let i="";const{title:s,image:o,...a}=t;s&&(i+=`<h2>${e(s)}</h2>`),o&&(i+=`<img src="${new URL(e(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let d=a[u];d!==void 0&&(It(d)&&(d=j2e(d,n)),i+=`<tr><td class="key">${e(u)}</td><td class="value">${e(d)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}function ySt(t){const e=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}function j2e(t,e){return JSON.stringify(t,ySt(e))}var bSt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const x6e="vg-tooltip-element",vSt={offsetX:10,offsetY:10,id:x6e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:xSt,maxDepth:2,formatTooltip:gSt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function xSt(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function wSt(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return bSt.toString().replace(x6e,t)}function w6e(t,e,{offsetX:n,offsetY:r}){const i=_6e({x1:t.clientX,x2:t.clientX,y1:t.clientY,y2:t.clientY},e,n,r),s=["bottom-right","bottom-left","top-right","top-left"];for(const o of s)if(E6e(i[o],e))return i[o];return i["top-left"]}function _St(t,e,n,r,i){const{position:s,offsetX:o,offsetY:a}=i,l=t._el.getBoundingClientRect(),u=t._origin,d=ESt(l,u,n),c=_6e(d,r,o,a),f=Array.isArray(s)?s:[s];for(const h of f)if(E6e(c[h],r)&&!CSt(e,c[h],r))return c[h];return w6e(e,r,i)}function ESt(t,e,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=t.left+e[0]+r.x1,s=t.top+e[1]+r.y1,o=n;for(;o.mark.group;)o=o.mark.group,i+=o.x??0,s+=o.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:s,y2:s+l}}function _6e(t,e,n,r){const i=(t.x1+t.x2)/2,s=(t.y1+t.y2)/2,o=t.x1-e.width-n,a=i-e.width/2,l=t.x2+n,u=t.y1-e.height-r,d=s-e.height/2,c=t.y2+r;return{top:{x:a,y:u},bottom:{x:a,y:c},left:{x:o,y:d},right:{x:l,y:d},"top-left":{x:o,y:u},"top-right":{x:l,y:u},"bottom-left":{x:o,y:c},"bottom-right":{x:l,y:c}}}function E6e(t,e){return t.x>=0&&t.y>=0&&t.x+e.width<=window.innerWidth&&t.y+e.height<=window.innerHeight}function CSt(t,e,n){return t.clientX>=e.x&&t.clientX<=e.x+n.width&&t.clientY>=e.y&&t.clientY<=e.y+n.height}class SSt{constructor(e){this.options={...vSt,...e};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=wSt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(e,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=this.options.anchor==="mark"?_St(e,n,r,this.el.getBoundingClientRect(),this.options):w6e(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var PO={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ASt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kSt=Object.prototype.hasOwnProperty;function h6(t,e){return kSt.call(t,e)}function p6(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var i in t)h6(t,i)&&r.push(i);return r}function nu(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function m6(t){for(var e=0,n=t.length,r;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Rg(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function C6e(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function g6(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(g6(t[e]))return!0}else if(typeof t=="object"){for(var r=p6(t),i=r.length,s=0;s<i;s++)if(g6(t[r[s]]))return!0}}return!1}function U2e(t,e){var n=[t];for(var r in e){var i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var S6e=function(t){ASt(e,t);function e(n,r,i,s,o){var a=this.constructor,l=t.call(this,U2e(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=U2e(n,{name:r,index:i,operation:s,tree:o}),l}return e}(Error),Ds=S6e,TSt=nu,Sb={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=J3(n,this.path);r&&(r=nu(r));var i=t0(n,{op:"remove",path:this.from}).removed;return t0(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=J3(n,this.from);return t0(n,{op:"add",path:this.path,value:nu(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:M2(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},DSt={add:function(t,e,n){return m6(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Sb.move,copy:Sb.copy,test:Sb.test,_get:Sb._get};function J3(t,e){if(e=="")return t;var n={op:"_get",path:e};return t0(t,n),n.value}function t0(t,e,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(e,0,t,e.path):Q3(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=J3(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=M2(t,e.value),o.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(n)throw new Ds("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return o}}else{r||(t=nu(t));var a=e.path||"",l=a.split("/"),u=t,d=1,c=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Q3;;){if(h=l[d],h&&h.indexOf("~")!=-1&&(h=C6e(h)),i&&(h=="__proto__"||h=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,d).join("/"):d==c-1&&(f=e.path),f!==void 0&&p(e,0,t,f)),d++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!m6(h))throw new Ds("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);m6(h)&&(h=~~h)}if(d>=c){if(n&&e.op==="add"&&h>u.length)throw new Ds("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);var o=DSt[e.op].call(e,u,h,t);if(o.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}}else if(d>=c){var o=Sb[e.op].call(e,u,h,t);if(o.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}if(u=u[h],n&&d<c&&(!u||typeof u!="object"))throw new Ds("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function LR(t,e,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(e))throw new Ds("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=nu(t));for(var s=new Array(e.length),o=0,a=e.length;o<a;o++)s[o]=t0(t,e[o],n,!0,i,o),t=s[o].newDocument;return s.newDocument=t,s}function LSt(t,e,n){var r=t0(t,e);if(r.test===!1)throw new Ds("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Q3(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Ds("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Sb[t.op]){if(typeof t.path!="string")throw new Ds("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Ds('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Ds("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Ds("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&g6(t.value))throw new Ds("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ds("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Ds("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},a=A6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ds("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Ds("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function A6e(t,e,n){try{if(!Array.isArray(t))throw new Ds("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)LR(nu(e),nu(t),n||!0);else{n=n||Q3;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof Ds)return i;throw i}}function M2(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,s,o;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!M2(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(t);if(s=a.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!M2(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var RSt=Object.freeze({__proto__:null,JsonPatchError:Ds,_areEquals:M2,applyOperation:t0,applyPatch:LR,applyReducer:LSt,deepClone:TSt,getValueByPointer:J3,validate:A6e,validator:Q3});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var _7=new WeakMap,FSt=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),OSt=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function MSt(t){return _7.get(t)}function ISt(t,e){return t.observers.get(e)}function $St(t,e){t.observers.delete(e.callback)}function PSt(t,e){e.unobserve()}function NSt(t,e){var n=[],r,i=MSt(t);if(!i)i=new FSt(t),_7.set(t,i);else{var s=ISt(i,e);r=s&&s.observer}if(r)return r;if(r={},i.value=nu(t),e){r.callback=e,r.next=null;var o=function(){y6(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=t,r.unobserve=function(){y6(r),clearTimeout(r.next),$St(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(e,new OSt(e,r)),r}function y6(t,e){e===void 0&&(e=!1);var n=_7.get(t.object);E7(n.value,t.object,t.patches,"",e),t.patches.length&&LR(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function E7(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=p6(e),o=p6(t),a=!1,l=o.length-1;l>=0;l--){var u=o[l],d=t[u];if(h6(e,u)&&!(e[u]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var c=e[u];typeof d=="object"&&d!=null&&typeof c=="object"&&c!=null&&Array.isArray(d)===Array.isArray(c)?E7(d,c,n,r+"/"+Rg(u),i):d!==c&&(i&&n.push({op:"test",path:r+"/"+Rg(u),value:nu(d)}),n.push({op:"replace",path:r+"/"+Rg(u),value:nu(c)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+Rg(u),value:nu(d)}),n.push({op:"remove",path:r+"/"+Rg(u)}),a=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!h6(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+Rg(u),value:nu(e[u])})}}}function BSt(t,e,n){n===void 0&&(n=!1);var r=[];return E7(t,e,r,"",n),r}var zSt=Object.freeze({__proto__:null,compare:BSt,generate:y6,observe:NSt,unobserve:PSt});Object.assign({},RSt,zSt,{JsonPatchError:S6e,deepClone:nu,escapePathComponent:Rg,unescapePathComponent:C6e});function jSt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var NO,q2e;function USt(){if(q2e)return NO;q2e=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return NO=t,NO}var BO,H2e;function C7(){if(H2e)return BO;H2e=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return BO=r=>r?typeof r!="object"?t:r:e,BO}var KS={exports:{}},zO,G2e;function S7(){if(G2e)return zO;G2e=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=e-6;return zO={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},zO}var jO,V2e;function RR(){return V2e||(V2e=1,jO=typeof process=="object"&&PO&&PO.NODE_DEBUG&&/\bsemver\b/i.test(PO.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),jO}var W2e;function A7(){return W2e||(W2e=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=S7(),s=RR();e=t.exports={};const o=e.re=[],a=e.safeRe=[],l=e.src=[],u=e.t={};let d=0;const c="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[c,r]],h=g=>{for(const[b,y]of f)g=g.split(`${b}*`).join(`${b}{0,${y}}`).split(`${b}+`).join(`${b}{1,${y}}`);return g},p=(g,b,y)=>{const v=h(b),w=d++;s(g,w,b),u[g]=w,l[w]=b,o[w]=new RegExp(b,y?"g":void 0),a[w]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${c}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(KS,KS.exports)),KS.exports}var UO,Y2e;function qSt(){if(Y2e)return UO;Y2e=1;const t=/^[0-9]+$/,e=(r,i)=>{const s=t.test(r),o=t.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return UO={compareIdentifiers:e,rcompareIdentifiers:(r,i)=>e(i,r)},UO}var qO,X2e;function k7(){if(X2e)return qO;X2e=1;const t=RR(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=S7(),{safeRe:r,t:i}=A7(),s=C7(),{compareIdentifiers:o}=qSt();class a{constructor(u,d){if(d=s(d),u instanceof a){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const c=u.trim().match(d.loose?r[i.LOOSE]:r[i.FULL]);if(!c)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const h=+f;if(h>=0&&h<n)return h}return f}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(t("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const c=this.prerelease[d],f=u.prerelease[d];if(t("prerelease compare",d,c,f),c===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(c===void 0)return-1;if(c===f)continue;return o(c,f)}while(++d)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let d=0;do{const c=this.build[d],f=u.build[d];if(t("build compare",d,c,f),c===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(c===void 0)return-1;if(c===f)continue;return o(c,f)}while(++d)}inc(u,d,c){switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,c),this.inc("pre",d,c);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,c),this.inc("pre",d,c);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(c)?1:0;if(!d&&c===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[f];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(d===this.prerelease.join(".")&&c===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(d){let h=[d,f];c===!1&&(h=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return qO=a,qO}var HO,Z2e;function k1(){if(Z2e)return HO;Z2e=1;const t=k7();return HO=(n,r,i)=>new t(n,i).compare(new t(r,i)),HO}var GO,K2e;function HSt(){if(K2e)return GO;K2e=1;const t=k1();return GO=(n,r,i)=>t(n,r,i)===0,GO}var VO,J2e;function GSt(){if(J2e)return VO;J2e=1;const t=k1();return VO=(n,r,i)=>t(n,r,i)!==0,VO}var WO,Q2e;function VSt(){if(Q2e)return WO;Q2e=1;const t=k1();return WO=(n,r,i)=>t(n,r,i)>0,WO}var YO,eEe;function WSt(){if(eEe)return YO;eEe=1;const t=k1();return YO=(n,r,i)=>t(n,r,i)>=0,YO}var XO,tEe;function YSt(){if(tEe)return XO;tEe=1;const t=k1();return XO=(n,r,i)=>t(n,r,i)<0,XO}var ZO,nEe;function XSt(){if(nEe)return ZO;nEe=1;const t=k1();return ZO=(n,r,i)=>t(n,r,i)<=0,ZO}var KO,rEe;function ZSt(){if(rEe)return KO;rEe=1;const t=HSt(),e=GSt(),n=VSt(),r=WSt(),i=YSt(),s=XSt();return KO=(a,l,u,d)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return t(a,u,d);case"!=":return e(a,u,d);case">":return n(a,u,d);case">=":return r(a,u,d);case"<":return i(a,u,d);case"<=":return s(a,u,d);default:throw new TypeError(`Invalid operator: ${l}`)}},KO}var JO,iEe;function KSt(){if(iEe)return JO;iEe=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,c){if(c=n(c),d instanceof e){if(d.loose===!!c.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,c),this.options=c,this.loose=!!c.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const c=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=d.match(c);if(!f)throw new TypeError(`Invalid comparator: ${d}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new a(d,this.options)}catch{return!1}return s(d,this.operator,this.semver,this.options)}intersects(d,c){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,c).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,c).test(d.semver):(c=n(c),c.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!c.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||s(this.semver,"<",d.semver,c)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||s(this.semver,">",d.semver,c)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}JO=e;const n=C7(),{safeRe:r,t:i}=A7(),s=ZSt(),o=RR(),a=k7(),l=k6e();return JO}var QO,sEe;function k6e(){if(sEe)return QO;sEe=1;const t=/\s+/g;class e{constructor($,U){if(U=i(U),$ instanceof e)return $.loose===!!U.loose&&$.includePrerelease===!!U.includePrerelease?$:new e($.raw,U);if($ instanceof s)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=$.trim().replace(t," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(Y=>!g(Y[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&b(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const U=this.set[$];for(let q=0;q<U.length;q++)q>0&&(this.formatted+=" "),this.formatted+=U[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const q=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+$,Y=r.get(q);if(Y)return Y;const X=this.options.loose,te=X?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];$=$.replace(te,K(this.options.includePrerelease)),o("hyphen replace",$),$=$.replace(l[u.COMPARATORTRIM],d),o("comparator trim",$),$=$.replace(l[u.TILDETRIM],c),o("tilde trim",$),$=$.replace(l[u.CARETTRIM],f),o("caret trim",$);let le=$.split(" ").map(fe=>v(fe,this.options)).join(" ").split(/\s+/).map(fe=>B(fe,this.options));X&&(le=le.filter(fe=>(o("loose invalid filter",fe,this.options),!!fe.match(l[u.COMPARATORLOOSE])))),o("range list",le);const ee=new Map,z=le.map(fe=>new s(fe,this.options));for(const fe of z){if(g(fe))return[fe];ee.set(fe.value,fe)}ee.size>1&&ee.has("")&&ee.delete("");const he=[...ee.values()];return r.set(q,he),he}intersects($,U){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(q=>y(q,U)&&$.set.some(Y=>y(Y,U)&&q.every(X=>Y.every(te=>X.intersects(te,U)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new a($,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(L(this.set[U],$,this.options))return!0;return!1}}QO=e;const n=USt(),r=new n,i=C7(),s=KSt(),o=RR(),a=k7(),{safeRe:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:c,caretTrimReplace:f}=A7(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=S7(),g=I=>I.value==="<0.0.0-0",b=I=>I.value==="",y=(I,$)=>{let U=!0;const q=I.slice();let Y=q.pop();for(;U&&q.length;)U=q.every(X=>Y.intersects(X,$)),Y=q.pop();return U},v=(I,$)=>(o("comp",I,$),I=T(I,$),o("caret",I),I=E(I,$),o("tildes",I),I=k(I,$),o("xrange",I),I=O(I,$),o("stars",I),I),w=I=>!I||I.toLowerCase()==="x"||I==="*",E=(I,$)=>I.trim().split(/\s+/).map(U=>S(U,$)).join(" "),S=(I,$)=>{const U=$.loose?l[u.TILDELOOSE]:l[u.TILDE];return I.replace(U,(q,Y,X,te,le)=>{o("tilde",I,q,Y,X,te,le);let ee;return w(Y)?ee="":w(X)?ee=`>=${Y}.0.0 <${+Y+1}.0.0-0`:w(te)?ee=`>=${Y}.${X}.0 <${Y}.${+X+1}.0-0`:le?(o("replaceTilde pr",le),ee=`>=${Y}.${X}.${te}-${le} <${Y}.${+X+1}.0-0`):ee=`>=${Y}.${X}.${te} <${Y}.${+X+1}.0-0`,o("tilde return",ee),ee})},T=(I,$)=>I.trim().split(/\s+/).map(U=>D(U,$)).join(" "),D=(I,$)=>{o("caret",I,$);const U=$.loose?l[u.CARETLOOSE]:l[u.CARET],q=$.includePrerelease?"-0":"";return I.replace(U,(Y,X,te,le,ee)=>{o("caret",I,Y,X,te,le,ee);let z;return w(X)?z="":w(te)?z=`>=${X}.0.0${q} <${+X+1}.0.0-0`:w(le)?X==="0"?z=`>=${X}.${te}.0${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.0${q} <${+X+1}.0.0-0`:ee?(o("replaceCaret pr",ee),X==="0"?te==="0"?z=`>=${X}.${te}.${le}-${ee} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}-${ee} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le}-${ee} <${+X+1}.0.0-0`):(o("no pr"),X==="0"?te==="0"?z=`>=${X}.${te}.${le}${q} <${X}.${te}.${+le+1}-0`:z=`>=${X}.${te}.${le}${q} <${X}.${+te+1}.0-0`:z=`>=${X}.${te}.${le} <${+X+1}.0.0-0`),o("caret return",z),z})},k=(I,$)=>(o("replaceXRanges",I,$),I.split(/\s+/).map(U=>R(U,$)).join(" ")),R=(I,$)=>{I=I.trim();const U=$.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return I.replace(U,(q,Y,X,te,le,ee)=>{o("xRange",I,q,Y,X,te,le,ee);const z=w(X),he=z||w(te),fe=he||w(le),ze=fe;return Y==="="&&ze&&(Y=""),ee=$.includePrerelease?"-0":"",z?Y===">"||Y==="<"?q="<0.0.0-0":q="*":Y&&ze?(he&&(te=0),le=0,Y===">"?(Y=">=",he?(X=+X+1,te=0,le=0):(te=+te+1,le=0)):Y==="<="&&(Y="<",he?X=+X+1:te=+te+1),Y==="<"&&(ee="-0"),q=`${Y+X}.${te}.${le}${ee}`):he?q=`>=${X}.0.0${ee} <${+X+1}.0.0-0`:fe&&(q=`>=${X}.${te}.0${ee} <${X}.${+te+1}.0-0`),o("xRange return",q),q})},O=(I,$)=>(o("replaceStars",I,$),I.trim().replace(l[u.STAR],"")),B=(I,$)=>(o("replaceGTE0",I,$),I.trim().replace(l[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),K=I=>($,U,q,Y,X,te,le,ee,z,he,fe,ze)=>(w(q)?U="":w(Y)?U=`>=${q}.0.0${I?"-0":""}`:w(X)?U=`>=${q}.${Y}.0${I?"-0":""}`:te?U=`>=${U}`:U=`>=${U}${I?"-0":""}`,w(z)?ee="":w(he)?ee=`<${+z+1}.0.0-0`:w(fe)?ee=`<${z}.${+he+1}.0-0`:ze?ee=`<=${z}.${he}.${fe}-${ze}`:I?ee=`<${z}.${he}.${+fe+1}-0`:ee=`<=${ee}`,`${U} ${ee}`.trim()),L=(I,$,U)=>{for(let q=0;q<I.length;q++)if(!I[q].test($))return!1;if($.prerelease.length&&!U.includePrerelease){for(let q=0;q<I.length;q++)if(o(I[q].semver),I[q].semver!==s.ANY&&I[q].semver.prerelease.length>0){const Y=I[q].semver;if(Y.major===$.major&&Y.minor===$.minor&&Y.patch===$.patch)return!0}return!1}return!0};return QO}var e5,oEe;function JSt(){if(oEe)return e5;oEe=1;const t=k6e();return e5=(n,r,i)=>{try{r=new t(r,i)}catch{return!1}return r.test(n)},e5}var QSt=JSt(),T6e=jSt(QSt);function eAt(t,e,n){const r=t.open(e),i=1e4,s=250,{origin:o}=new URL(e);let a=~~(i/s);function l(d){d.source===r&&(a=0,t.removeEventListener("message",l,!1))}t.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var tAt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function D6e(t,...e){for(const n of e)nAt(t,n);return t}function nAt(t,e){for(const n of Object.keys(e))l1(t,n,e[n],!0)}const gd=tyt;let I2=hCt;const JS=typeof window<"u"?window:void 0;var TAe;I2===void 0&&((TAe=JS==null?void 0:JS.vl)!=null&&TAe.compile)&&(I2=JS.vl);const rAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},iAt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},f_={vega:"Vega","vega-lite":"Vega-Lite"},eT={vega:gd.version,"vega-lite":I2?I2.version:"not available"},sAt={vega:t=>t,"vega-lite":(t,e)=>I2.compile(t,{config:e}).spec},oAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,aAt="chart-wrapper";function lAt(t){return typeof t=="function"}function aEe(t,e,n,r){const i=`<html><head>${e}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+t+s),o.document.title=`${f_[r]} JSON Source`}function uAt(t,e){if(t.$schema){const n=y6e(t.$schema);e&&e!==n.library&&console.warn(`The given visualization spec is written in ${f_[n.library]}, but mode argument sets ${f_[e]??e}.`);const r=n.library;return T6e(eT[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${f_[r]} ${n.version}, but the current version of ${f_[r]} is v${eT[r]}.`),r}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function L6e(t){return!!(t&&"load"in t)}function lEe(t){return L6e(t)?t:gd.loader(t)}function cAt(t){var n;const e=((n=t.usermeta)==null?void 0:n.embedOptions)??{};return Nt(e.defaultStyle)&&(e.defaultStyle=!1),e}async function dAt(t,e,n={}){let r,i;Nt(e)?(i=lEe(n.loader),r=JSON.parse(await i.load(e))):r=e;const s=cAt(r),o=s.loader;(!i||o)&&(i=lEe(n.loader??o));const a=await uEe(s,i),l=await uEe(n,i),u={...D6e(l,a),config:a1(l.config??{},a.config??{})};return await hAt(t,r,u,i)}async function uEe(t,e){const n=Nt(t.config)?JSON.parse(await e.load(t.config)):t.config??{},r=Nt(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return{...t,...r?{patch:r}:{},...n?{config:n}:{}}}function fAt(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function hAt(t,e,n={},r){const i=n.theme?a1(mSt[n.theme],n.config??{}):n.config,s=gm(n.actions)?n.actions:D6e({},rAt,n.actions??{}),o={...iAt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??gd.Warn,u=n.downloadFileName??"visualization",d=typeof t=="string"?document.querySelector(t):t;if(!d)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:T,rootContainer:D}=fAt(d);if(!T.getElementById(S)){const k=document.createElement("style");k.id=S,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?tAt.toString():n.defaultStyle,D.appendChild(k)}}const c=uAt(e,n.mode);let f=sAt[c](e,i);if(c==="vega-lite"&&f.$schema){const S=y6e(f.$schema);T6e(eT.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${eT.vega}.`)}d.classList.add("vega-embed"),s&&d.classList.add("has-actions"),d.innerHTML="";let h=d;if(s){const S=document.createElement("div");S.classList.add(aAt),d.appendChild(S),h=S}const p=n.patch;if(p&&(f=p instanceof Function?p(f):LR(f,p,!0,!1).newDocument),n.formatLocale&&gd.formatLocale(n.formatLocale),n.timeFormatLocale&&gd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const T=n.expressionFunctions[S];"fn"in T?gd.expressionFunction(S,T.fn,T.visitor):T instanceof Function&&gd.expressionFunction(S,T)}const{ast:g}=n,b=gd.parse(f,c==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||gd.View)(b,{loader:r,logLevel:l,renderer:a,...g?{expr:gd.expressionInterpreter??n.expr??dyt}:{}});if(y.addSignalListener("autosize",(S,T)=>{const{type:D}=T;D=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):D=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):D=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:T}=n,D=S&&!L6e(S)?S==null?void 0:S.baseURL:void 0,k=lAt(T)?T:new SSt({baseURL:D,...T===!0?{}:T}).call;y.tooltip(k)}let{hover:v}=n;if(v===void 0&&(v=c==="vega"),v){const{hoverSet:S,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(S,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let w;if(s!==!1){let S=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const D=document.createElement("details");D.title=o.CLICK_TO_VIEW_ACTIONS,d.append(D),S=D;const k=document.createElement("summary");k.innerHTML=oAt,D.append(k),w=R=>{D.contains(R.target)||D.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(S.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const D of["svg","png"])if(s===!0||s.export===!0||s.export[D]){const k=o[`${D.toUpperCase()}_ACTION`],R=document.createElement("a"),O=It(n.scaleFactor)?n.scaleFactor[D]:n.scaleFactor;R.text=k,R.href="#",R.target="_blank",R.download=`${u}.${D}`,R.addEventListener("mousedown",async function(B){B.preventDefault();const K=await y.toImageURL(D,O);this.href=K}),T.append(R)}}if(s===!0||s.source!==!1){const D=document.createElement("a");D.text=o.SOURCE_ACTION,D.href="#",D.addEventListener("click",function(k){aEe(_F(e),n.sourceHeader??"",n.sourceFooter??"",c),k.preventDefault()}),T.append(D)}if(c==="vega-lite"&&(s===!0||s.compiled!==!1)){const D=document.createElement("a");D.text=o.COMPILED_ACTION,D.href="#",D.addEventListener("click",function(k){aEe(_F(f),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),T.append(D)}if(s===!0||s.editor!==!1){const D=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(R){eAt(window,D,{config:i,mode:p?"vega":c,renderer:a,spec:_F(p?f:e)}),R.preventDefault()}),T.append(k)}}function E(){w&&document.removeEventListener("click",w),y.finalize()}return{view:y,spec:e,vgSpec:f,finalize:E,embedOptions:n}}const km={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};km.defaultMerge;function pAt(t,e){return e}function mAt(t,e){return t.filter(n=>n!==void 0)}var cEe;(function(t){t[t.NOT=0]="NOT",t[t.RECORD=1]="RECORD",t[t.ARRAY=2]="ARRAY",t[t.SET=3]="SET",t[t.MAP=4]="MAP",t[t.OTHER=5]="OTHER"})(cEe||(cEe={}));function dEe(t){return typeof t!="object"||t===null?0:Array.isArray(t)?2:bAt(t)?1:t instanceof Set?3:t instanceof Map?4:5}function gAt(t){const e=new Set;for(const n of t)for(const r of[...Object.keys(n),...Object.getOwnPropertySymbols(n)])e.add(r);return e}function yAt(t,e){return typeof t=="object"&&Object.prototype.propertyIsEnumerable.call(t,e)}function R6e(t){var r;let e=0,n=(r=t[0])==null?void 0:r[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var i;do{if(n===void 0)return{done:!0,value:void 0};const s=n.next();if(s.done===!0){e+=1,n=(i=t[e])==null?void 0:i[Symbol.iterator]();continue}return{done:!1,value:s.value}}while(!0)}}}}}const fEe=["[object Object]","[object Module]"];function bAt(t){if(!fEe.includes(Object.prototype.toString.call(t)))return!1;const{constructor:e}=t;if(e===void 0)return!0;const n=e.prototype;return!(n===null||typeof n!="object"||!fEe.includes(Object.prototype.toString.call(n))||!n.hasOwnProperty("isPrototypeOf"))}function vAt(t,e,n){const r={};for(const i of gAt(t)){const s=[];for(const l of t)yAt(l,i)&&s.push(l[i]);if(s.length===0)continue;const o=e.metaDataUpdater(n,{key:i,parents:t}),a=F6e(s,e,o);a!==km.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:a,configurable:!0,enumerable:!0,writable:!0}):r[i]=a)}return r}function xAt(t){return t.flat()}function wAt(t){return new Set(R6e(t))}function _At(t){return new Map(R6e(t))}function EAt(t){return t.at(-1)}const QS={mergeRecords:vAt,mergeArrays:xAt,mergeSets:wAt,mergeMaps:_At,mergeOthers:EAt};function CAt(...t){return SAt({})(...t)}function SAt(t,e){const n=AAt(t,r);function r(...i){return F6e(i,n,e)}return r}function AAt(t,e){return{defaultMergeFunctions:QS,mergeFunctions:{...QS,...Object.fromEntries(Object.entries(t).filter(([n,r])=>Object.hasOwn(QS,n)).map(([n,r])=>r===!1?[n,QS.mergeOthers]:[n,r]))},metaDataUpdater:t.metaDataUpdater??pAt,deepmerge:e,useImplicitDefaultMerging:t.enableImplicitDefaultMerging??!1,filterValues:t.filterValues===!1?void 0:t.filterValues??mAt,actions:km}}function F6e(t,e,n){var s;const r=((s=e.filterValues)==null?void 0:s.call(e,t,n))??t;if(r.length===0)return;if(r.length===1)return t5(r,e,n);const i=dEe(r[0]);if(i!==0&&i!==5){for(let o=1;o<r.length;o++)if(dEe(r[o])!==i)return t5(r,e,n)}switch(i){case 1:return kAt(r,e,n);case 2:return TAt(r,e,n);case 3:return DAt(r,e,n);case 4:return LAt(r,e,n);default:return t5(r,e,n)}}function kAt(t,e,n){const r=e.mergeFunctions.mergeRecords(t,e,n);return r===km.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeRecords!==e.defaultMergeFunctions.mergeRecords?e.defaultMergeFunctions.mergeRecords(t,e,n):r}function TAt(t,e,n){const r=e.mergeFunctions.mergeArrays(t,e,n);return r===km.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeArrays!==e.defaultMergeFunctions.mergeArrays?e.defaultMergeFunctions.mergeArrays(t):r}function DAt(t,e,n){const r=e.mergeFunctions.mergeSets(t,e,n);return r===km.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeSets!==e.defaultMergeFunctions.mergeSets?e.defaultMergeFunctions.mergeSets(t):r}function LAt(t,e,n){const r=e.mergeFunctions.mergeMaps(t,e,n);return r===km.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeMaps!==e.defaultMergeFunctions.mergeMaps?e.defaultMergeFunctions.mergeMaps(t):r}function t5(t,e,n){const r=e.mergeFunctions.mergeOthers(t,e,n);return r===km.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(t):r}const RAt={width:"container",height:"container",autosize:"fit",resize:!0},FAt=(t,e,n)=>{const r=CAt(RAt,e);dAt(t.renderRoot.querySelector("#vis"),r).then(i=>{n&&(Object.keys(n).forEach(s=>{i.view.insert(s,n[s])}),i.view.run())})};class O6e extends Zr{constructor(){super(),this.spec=void 0,this.dataValues=void 0,this.noShadow=!1,this.unstyled=!1}async updated(e){(e.has("spec")||e.has("dataValues"))&&FAt(this,this.spec,this.dataValues)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return et`
      <style>
        ${lJe}
        ${!this.unstyled&&cJe}
        ${!this.unstyled&&uJe}
      </style>
      <div id="vis"></div>
    `}}tn(O6e,"properties",{dataValues:{attribute:!1,type:Object},spec:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-chart",O6e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const OAt=oE(class extends pD{constructor(){super(...arguments),this.key=ni}render(t,e){return this.key=t,e}update(t,[e,n]){return e!==this.key&&(d$(t),this.key=e),n}}),MAt=t=>{t.hoverInteraction=t.eoxMap.selectInteractions.selectHover,t.clickInteraction=t.eoxMap.selectInteractions.selectClick;const e=()=>{t.requestUpdate()};t.hoverInteraction.selectStyleLayer.on("change",e),t.clickInteraction.selectStyleLayer.on("change",e)},IAt=(t,e,n)=>{if(t.clickId===e)return;const r=n?[]:[e];t.hoverInteraction.highlightById(r)},$At=(t,e)=>{t.stopPropagation();const n=Number(t.target.getAttribute("index")),r=e.drawnFeatures[n];e.drawLayer.getSource().removeFeature(r),e.drawnFeatures.splice(n,1),e.requestUpdate()},PAt=(t,e)=>{const n=t.getId(),{clickId:r,drawLayer:i,olMap:s,clickInteraction:o}=e,a=r===n,l=t.getGeometry();if(a){const u=i.getSource().getExtent();s.getView().fit(u,Ybe),o.highlightById([])}else{const u=l.getExtent();o.highlightById([n]),s.getView().fit(u,Ybe)}e.requestUpdate()},NAt="ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}";class M6e extends Zr{constructor(){super();tn(this,"hoverInteraction");tn(this,"clickInteraction");tn(this,"hoverId");tn(this,"clickId");this.eoxMap=null,this.olMap=null,this.draw=null,this.drawLayer=null,this.drawnFeatures=[],this.modify=null,this.unstyled=!1}_handleDelete(n){$At(n,this),this.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))}_handleFeatureSelectAndDeselect(n){PAt(n,this)}_handleHoverFeature(n,r=!1){IAt(this,n,r)}firstUpdated(){MAt(this)}createRenderRoot(){return this}render(){var n,r;return this.hoverId=(n=this.hoverInteraction)==null?void 0:n.selectedFids[0],this.clickId=(r=this.clickInteraction)==null?void 0:r.selectedFids[0],et`
      <style>
        ${!this.unstyled&&NAt}
      </style>
      <ul class="list-wrap">
        ${this.drawnFeatures.map((i,s)=>{const o=s+1,a=i.getId(),l=this.hoverId===a,u=this.clickId===a;return OAt(o,et`
              <li
                class="${l||u?"selected":ni}"
                @mouseover=${()=>this._handleHoverFeature(a)}
                @mouseout=${()=>this._handleHoverFeature(a,!0)}
              >
                <div
                  class="list"
                  @click="${()=>this._handleFeatureSelectAndDeselect(i)}"
                >
                  <span class="title">Feature #${o}</span>
                  <button
                    index=${s}
                    class="icon smallest discard"
                    @click="${this._handleDelete}"
                  >
                    x
                  </button>
                </div>
              </li>
            `)})}
      </ul>
    `}}tn(M6e,"properties",{eoxMap:{attribute:!1,state:!0},olMap:{attribute:!1,state:!0},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},unstyled:{type:Boolean}});customElements.define("eox-drawtools-list",M6e);const BAt=t=>{const{multipleFeatures:e,drawnFeatures:n,currentlyDrawing:r}=t,i=!e&&(n==null?void 0:n.length)>0||r,s=!(n!=null&&n.length)&&!r;return{drawDisabled:i,discardDisabled:s}},zAt='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',jAt='textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}';function UAt(t){navigator.clipboard.writeText(t).then(function(){},function(e){console.error("Could not copy text: ",e)})}const qAt=(t,e)=>new bD().writeFeaturesObject(t,e),HAt=(t,e)=>new qke().writeFeatures(t,e);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function qn(t,e,n){return t?e(t):n==null?void 0:n(t)}var J2,Q2;class I6e extends Zr{constructor(){super();gn(this,J2,!0);gn(this,Q2,!0);this.multipleFeatures=!1,this.drawnFeatures=[],this.importFeatures=!1,this.showEditor=!1,this.currentlyDrawing=!1,this.drawFunc=null,this.geoJSON="",this.unstyled=!1,this.select=!1}updateButtonStates(){const{drawDisabled:n,discardDisabled:r}=BAt(this);gs(this,J2,n),gs(this,Q2,r)}createRenderRoot(){return this}render(){this.updateButtonStates();const n=this.currentlyDrawing?"drawing":"draw";return et`
      <style>
        ${!this.unstyled&&zAt}
        ${!this.unstyled&&jAt}
      </style>
      <div class="wrap-btn">
        <slot></slot>
        <div>
          <!-- Draw Button -->
          <button
            data-cy="drawBtn"
            class="${this.select?"pointer":"polygon"} icon"
            ?disabled="${Gt(this,J2)||ni}"
            @click="${()=>this.drawFunc.start()}"
          >
            ${n}
          </button>

          <!-- Discard Button -->
          <button
            data-cy="discardBtn"
            class="discard icon"
            ?disabled="${Gt(this,Q2)||ni}"
            @click="${()=>this.drawFunc.discard()}"
          >
            discard
          </button>
        </div>

        <!-- Import Button -->
        ${qn(this.importFeatures,()=>et`
            <!-- Import Input Field : Hidden -->
            <input
              type="file"
              id="import-file"
              style="display: none;"
              @change=${this.drawFunc.import}
            />

            <!-- Main Import Button -->
            <button
              data-cy="importBtn"
              class="import icon"
              @click=${()=>this.querySelector("#import-file").click()}
            >
              import
            </button>
          `)}
      </div>

      <!-- Geo JSON Wrapper -->
      ${qn(this.showEditor,()=>et`
          <div class="json-wrapper">
            <!-- Geo JSON Editor -->
            <textarea
              @drop=${this.drawFunc.import}
              @input=${this.drawFunc.editor}
              .value=${this.geoJSON}
            ></textarea>

            <!-- Geo JSON Copy Button -->
            <button
              data-cy="copyBtn"
              class="icon-copy"
              @click=${()=>UAt(this.geoJSON)}
            >
              ${this.unstyled?"copy":ni}
            </button>
          </div>
        `)}
    `}}J2=new WeakMap,Q2=new WeakMap,tn(I6e,"properties",{multipleFeatures:{attribute:!1,type:Boolean},drawnFeatures:{attribute:!1,state:!0,type:Array},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},drawFunc:{attribute:!1,type:Object},select:{type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},geoJSON:{attribute:"geo-json",type:String},unstyled:{type:Boolean}});customElements.define("eox-drawtools-controller",I6e);const GAt=`
  button.discard:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FF5252' viewBox='0 0 24 24'%3E%3Ctitle%3Etrash-can-outline%3C/title%3E%3Cpath d='M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z' /%3E%3C/svg%3E")
  }
  button.pointer:before {
    content:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Ecursor-default-click%3C/title%3E%3Cpath d='M10.76,8.69A0.76,0.76 0 0,0 10,9.45V20.9C10,21.32 10.34,21.66 10.76,21.66C10.95,21.66 11.11,21.6 11.24,21.5L13.15,19.95L14.81,23.57C14.94,23.84 15.21,24 15.5,24C15.61,24 15.72,24 15.83,23.92L18.59,22.64C18.97,22.46 19.15,22 18.95,21.63L17.28,18L19.69,17.55C19.85,17.5 20,17.43 20.12,17.29C20.39,16.97 20.35,16.5 20,16.21L11.26,8.86L11.25,8.87C11.12,8.76 10.95,8.69 10.76,8.69M15,10V8H20V10H15M13.83,4.76L16.66,1.93L18.07,3.34L15.24,6.17L13.83,4.76M10,0H12V5H10V0M3.93,14.66L6.76,11.83L8.17,13.24L5.34,16.07L3.93,14.66M3.93,3.34L5.34,1.93L8.17,4.76L6.76,6.17L3.93,3.34M7,10H2V8H7V10' /%3E%3C/svg%3E");
  }
  button.polygon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-polygon-plus%3C/title%3E%3Cpath d='M17,15.7V13H19V17L10,21L3,14L7,5H11V7H8.3L5.4,13.6L10.4,18.6L17,15.7M22,5V7H19V10H17V7H14V5H17V2H19V5H22Z' /%3E%3C/svg%3E");
  }
  button.import:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eupload%3C/title%3E%3Cpath fill='%23004170' d='M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z' /%3E%3C/svg%3E");
  }
  .wrap-btn {
    display: flex;
    justify-content: space-between;
  }
  eox-drawtools-list {
    width: 100%;
  }
  .json-wrapper {
    margin: 0.4rem 0rem;
    padding: 0.75rem;
    background: var(--secondary-color-hover);
    position: relative;
  }
  .json-wrapper textarea {
    height: 200px;
  }
  .icon-copy {
    position: absolute;
    bottom: 26px;
    right: 26px;
    border-radius: 4px;
    height: 26px;
    padding: 4px 6px;
  }
  .icon-copy:before {
    width: 14px;
    min-width: 14px;
    height: 14px;
    display: flex margin-right: 6px;
    color: white;
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' fill='white' /%3E%3C/svg%3E")
   }
`,VAt=t=>{(()=>{t.emitDrawnFeatures(),t.multipleFeatures||(t.draw.setActive(!1),t.selectionEvents.removeSelectionEvent(),t.currentlyDrawing=!1)})(),t.requestUpdate()},WAt=t=>{const e=()=>{t.drawLayer.set("isDrawingEnabled",!0),t.draw.setActive(!0),t.selectionEvents.addSelectionEvent()},n=()=>{t.currentlyDrawing=!0,t.requestUpdate()};e(),n()},YAt=t=>{let e;return typeof t=="string"?e=document.querySelector(t):e=t,e},hEe=(t,e)=>{var s;const r=YAt(t.for),i=r.map;return t.drawLayer=r.addOrUpdateLayer({zIndex:100,type:"Vector",properties:{id:"drawLayer",layerControlHide:!0,isDrawingEnabled:!1,multipleFeatures:e},source:{type:"Vector"},interactions:[{type:"draw",options:{active:!1,id:"drawInteraction",type:t.type,modify:t.allowModify,stopClick:!0}},{type:"select",options:{id:"selectHover",condition:"pointermove",style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5},tooltip:!1}},{type:"select",options:{id:"selectClick",condition:"click",panIn:!0,style:{"fill-color":"rgba(51, 153, 204,0.5)","stroke-color":"#3399CC","stroke-width":2.5}}}]}),t.draw=r.interactions.drawInteraction,t.modify=r.interactions.drawInteractionmodify,b6(t,r,t.layerId),(s=t.modify)==null||s.on("modifyend",()=>t.onModifyEnd()),r.addEventListener("addfeatures",()=>VAt(t)),{EoxMap:r,OlMap:i}},XAt=t=>{const e=()=>{t.drawnFeatures=[],t.draw.setActive(!1),t.selectionEvents.removeSelectionEvent(),t.drawLayer.getSource().clear(),t.geoJSON=null},n=()=>{t.emitDrawnFeatures(),t.currentlyDrawing=!1,t.requestUpdate()};e(),n()},ZAt=(t,e)=>{setTimeout(()=>{const r=t.drawLayer.getSource().getFeatures(),i=t.eoxMap.projection||"EPSG:3857",s=t.projection;t.drawnFeatures=s?r.map(a=>{a=a.clone();const l=a.getGeometry().transform(i,s);return a.setGeometry(l),a}):r;let o;switch(t.format){case"geojson":o=qAt(t.drawnFeatures);break;case"wkt":o=HAt(t.drawnFeatures);break;case"feature":o=t.drawnFeatures;break;default:o=t.drawnFeatures;break}t.updateGeoJSON(),t.requestUpdate(),e(o)},0)},KAt=t=>{const e=i=>{(i==null?void 0:i.detail.id)!=="SelectLayerClickInteraction"||!i.detail.feature||(t.drawLayer.getSource().addFeature(i.detail.feature),t.eoxMap.dispatchEvent(new CustomEvent("addfeatures",{detail:i.detail})))};return{addSelectionEvent:()=>{t.layerId&&(t.eoxMap.selectInteractions.SelectLayerHoverInteraction.setActive(!0),t.eoxMap.addEventListener("select",e))},removeSelectionEvent:()=>{var s;const i=(s=t.eoxMap.selectInteractions)==null?void 0:s.SelectLayerHoverInteraction;i&&(i.selectedFids=[],i.setActive(!1)),t.eoxMap.removeEventListener("select",e)}}},b6=(t,e,n)=>{if(!n||!e)return;const r=JSON.parse(JSON.stringify(e.getLayerById(n).get("_jsonDefinition")))||null;if(!r){console.error(`Layer with id ${n} not found`);return}const i={type:"select",active:!1,options:{id:"SelectLayerHoverInteraction",condition:"pointermove",active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"#3399CC","stroke-width":2.5}}},s={type:"select",options:{id:"SelectLayerClickInteraction",condition:"click",multi:t.multipleFeatures,modify:t.allowModify,active:!1,style:{"fill-color":"rgba(0, 0, 0,0.0)","stroke-color":"rgba(0, 0, 0,0.0)"}}};r.interactions=[i,s],e.addOrUpdateLayer(r);const o=t.draw;t.draw=e.selectInteractions.SelectLayerClickInteraction,o.setActive(!1),e.selectInteractions.SelectLayerClickInteraction.setActive(!1),e.selectInteractions.SelectLayerHoverInteraction.setActive(!1)},JAt=(t,e,n,r)=>{if(e){if(n){r&&n!==r&&pEe(t,e),b6(t,e,n);return}if(!n&&r){pEe(t,e);return}}};function pEe(t,e){e&&(t.discardDrawing(),t.selectionEvents.removeSelectionEvent(),t.draw=e.interactions.drawInteraction,e.selectInteractions.SelectLayerClickInteraction.remove(),e.selectInteractions.SelectLayerHoverInteraction.remove())}const QAt=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';function ekt(t,e){function n(s){s.preventDefault(),s.stopPropagation()}function r(s){s.srcElement.style.opacity="0.4"}function i(s){s.srcElement.style.opacity="1"}["dragenter","dragover","dragleave","drop"].forEach(s=>{e.addEventListener(s,n,!1),["dragenter","dragover"].includes(s)?e.addEventListener(s,r,!1):e.addEventListener(s,i,!1)}),e.addEventListener("drop",s=>$6e(s,t),!1)}function tkt(t){t.preventDefault(),t.stopPropagation()}function $6e(t,e){tkt(t);const n=t.dataTransfer?t.dataTransfer.files:t.target.files;Array.from(n).forEach(r=>nkt(r,e))}function nkt(t,e){const n=new FileReader;n.readAsText(t),n.onloadend=function(){typeof n.result=="string"&&e.handleFeatureChange(n.result)}}var Vb,Wb,eE,Yb;class rkt extends Zr{constructor(){super();gn(this,Vb);gn(this,Wb);gn(this,eE);gn(this,Yb);this.allowModify=!1,this.for="eox-map",this.currentlyDrawing=!1,this.draw=null,this.drawLayer=null,this.layerId="",this.drawnFeatures=[],this.modify=null,this.multipleFeatures=!1,this.importFeatures=!1,this.showEditor=!1,this.showList=!1,this.projection="EPSG:4326",this.type="Polygon",this.selectionEvents=null,this.format="feature",this.unstyled=!1,this.noShadow=!1}static get properties(){return{allowModify:{attribute:"allow-modify",type:Boolean},for:{type:String},currentlyDrawing:{attribute:!1,state:!0,type:Boolean},draw:{attribute:!1,state:!0},drawLayer:{attribute:!1,state:!0},layerId:{attribute:"layer-id",type:String},drawnFeatures:{attribute:!1,state:!0,type:Array},modify:{attribute:!1,state:!0},multipleFeatures:{attribute:"multiple-features",type:Boolean},importFeatures:{attribute:"import-features",type:Boolean},showEditor:{attribute:"show-editor",type:Boolean},showList:{attribute:"show-list",type:Boolean},projection:{type:String},noShadow:{type:Boolean},format:{type:String},type:{type:String},unstyled:{type:Boolean}}}set layerId(n){JAt(this,this.eoxMap,n,Gt(this,Yb)),gs(this,Yb,n)}get layerId(){return Gt(this,Yb)}startDrawing(){WAt(this)}discardDrawing(){XAt(this)}handleFeatureChange(n,r=!1){this.eoxMap.parseTextToFeature(n||JSON.stringify(Xbe),this.drawLayer,this.eoxMap,r)}handleFilesChange(n){$6e(n,this)}onModifyEnd(){this.emitDrawnFeatures()}updateGeoJSON(){gs(this,eE,JSON.stringify(this.eoxMap.parseFeature(this.drawnFeatures)||Xbe,void 0,2))}emitDrawnFeatures(){ZAt(this,r=>{this.dispatchEvent(new CustomEvent("drawupdate",{detail:r}))})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){const{EoxMap:n,OlMap:r}=hEe(this,this.multipleFeatures);this.eoxMap=n,gs(this,Wb,r),this.selectionEvents=KAt(this),this.importFeatures&&ekt(this,this.eoxMap),this.updateGeoJSON(),this.requestUpdate()}updated(n){if(n.has("for")){const{EoxMap:r,OlMap:i}=hEe(this,this.multipleFeatures);this.eoxMap=r,gs(this,Wb,i)}}get eoxMap(){return Gt(this,Vb)}set eoxMap(n){const r=Gt(this,Vb);gs(this,Vb,n),this.requestUpdate("eoxMap",r)}disconnectedCallback(){var n;(n=this.eoxMap)==null||n.map.removeLayer(this.drawLayer),super.disconnectedCallback()}render(){var n;return et`
      <style>
        :host { display: block; }
        ${!this.unstyled&&QAt}
        ${!this.unstyled&&GAt}
      </style>

      <!-- Controller Component -->
      <eox-drawtools-controller
        .drawFunc=${{start:()=>this.startDrawing(),discard:()=>this.discardDrawing(),editor:r=>this.handleFeatureChange(r.target.value,!0),import:r=>this.handleFilesChange(r)}}
        ?select=${!!this.layerId}
        .unstyled=${this.unstyled}
        .drawnFeatures=${this.drawnFeatures}
        .currentlyDrawing=${this.currentlyDrawing}
        .multipleFeatures=${this.multipleFeatures}
        .importFeatures=${this.importFeatures}
        .showEditor=${this.showEditor}
        .geoJSON=${Gt(this,eE)}
      ></eox-drawtools-controller>

      <!-- List Component -->
      ${this.showList&&((n=this.drawnFeatures)!=null&&n.length)?et`<eox-drawtools-list
            .eoxMap=${this.eoxMap}
            .olMap=${Gt(this,Wb)}
            .draw=${this.draw}
            .drawLayer=${this.drawLayer}
            .drawnFeatures=${this.drawnFeatures}
            .modify=${this.modify}
            .unstyled=${this.unstyled}
            @changed=${()=>{this.updateGeoJSON(),this.requestUpdate()}}
          ></eox-drawtools-list>`:ni}
    `}}Vb=new WeakMap,Wb=new WeakMap,eE=new WeakMap,Yb=new WeakMap;customElements.define("eox-drawtools",rkt);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let tT=class extends pD{constructor(e){if(super(e),this.it=ni,e.type!==cp.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===ni||e==null)return this._t=void 0,this.it=e;if(e===gb)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const n=[e];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}};tT.directiveName="unsafeHTML",tT.resultType=1;const Dc=oE(tT);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class v6 extends tT{}v6.directiveName="unsafeSVG",v6.resultType=2;const ikt=oE(v6);var n5,mEe;function skt(){if(mEe)return n5;mEe=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,u=typeof self=="object"&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),c=Object.prototype,f=c.toString,h=Math.max,p=Math.min,g=function(){return d.Date.now()};function b(S,T,D){var k,R,O,B,K,L,I=0,$=!1,U=!1,q=!0;if(typeof S!="function")throw new TypeError(t);T=E(T)||0,y(D)&&($=!!D.leading,U="maxWait"in D,O=U?h(E(D.maxWait)||0,T):O,q="trailing"in D?!!D.trailing:q);function Y(He){var je=k,we=R;return k=R=void 0,I=He,B=S.apply(we,je),B}function X(He){return I=He,K=setTimeout(ee,T),$?Y(He):B}function te(He){var je=He-L,we=He-I,$e=T-je;return U?p($e,O-we):$e}function le(He){var je=He-L,we=He-I;return L===void 0||je>=T||je<0||U&&we>=O}function ee(){var He=g();if(le(He))return z(He);K=setTimeout(ee,te(He))}function z(He){return K=void 0,q&&k?Y(He):(k=R=void 0,B)}function he(){K!==void 0&&clearTimeout(K),I=0,k=L=R=K=void 0}function fe(){return K===void 0?B:z(g())}function ze(){var He=g(),je=le(He);if(k=arguments,R=this,L=He,je){if(K===void 0)return X(L);if(U)return K=setTimeout(ee,T),Y(L)}return K===void 0&&(K=setTimeout(ee,T)),B}return ze.cancel=he,ze.flush=fe,ze}function y(S){var T=typeof S;return!!S&&(T=="object"||T=="function")}function v(S){return!!S&&typeof S=="object"}function w(S){return typeof S=="symbol"||v(S)&&f.call(S)==n}function E(S){if(typeof S=="number")return S;if(w(S))return e;if(y(S)){var T=typeof S.valueOf=="function"?S.valueOf():S;S=y(T)?T+"":T}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var D=s.test(S);return D||o.test(S)?a(S.slice(2),D?2:8):i.test(S)?e:+S}return n5=b,n5}var okt=skt();const Q0=aa(okt),P6e=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}',akt='button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}',N6e=f$`
  .geosearch {
    display: flex;
    flex-direction: row;
    align-items: start;
  }

  .search-container {
    display: flex;
    flex-direction: column;
    align-items: start;
  }
  .hidden {
    display: none;
    pointer-events: none;
  }
  .results-container {
    min-height: 100px;
    width: 332px;
    background: var(--results-bg, #eaf1f5);
    overflow: hidden;
    border-radius: 6px;
    box-shadow:
      0px 3px 5px -2px rgba(0, 0, 0, 0.08),
      0px 2px 2px 0px rgba(0, 0, 0, 0.08),
      0px 1px 5px 0px rgba(0, 0, 0, 0.08);
    padding: 0;
    margin: 0;
  }
  .results-container.too-short {
    height: 64px;
  }

  .results-container.too-short span {
    color: #00f;
    width: 100%;
    text-align: center;
  }

  input {
    background: var(--input-bg, #c6d4dd);
    color: var(--input-fg, #333);
    height: 48px;
    border-radius: 6px;
    padding: 0 16px;
    min-width: 300px;
    border: none;
    box-shadow:
      0px 3px 1px -2px rgba(0, 0, 0, 0.05),
      0px 2px 2px 0px rgba(0, 0, 0, 0.05),
      0px 1px 5px 0px rgba(0, 0, 0, 0.05);
  }
  input::before {
    background: url("_data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' color='%23999999' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
    width: 48px;
    height: 48px;
    display: inline-block;
  }
  button {
    height: auto;
    background: var(--button-bg, #fff);
  }

  .geosearch.small button {
    height: var(--button-size, 32px);
    width: var(--button-size, 32px);
    padding: calc((var(--button-size, 32px) - 20px) / 2);
  }

  .geosearch.small button .icon {
    width: 20px;
    height: 20px;
    transform: translateX(1px);
    fill: var(--button-fg, #fff);
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' /%3E%3C/svg%3E");
  }

  .geosearch.small button .chevron {
    display: none;
  }

  .geosearch input {
    background: #fff;
  }

  .chevron {
    width: 24px;
    height: 24px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-left%3C/title%3E%3Cpath d='M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z' /%3E%3C/svg%3E");
    margin-right: 9px;
  }

  .chevron.right {
    transform: rotate(180deg);
    margin-left: 9px;
  }

  .chevron.top {
    transform: rotate(90deg);
    margin-bottom: 9px;
  }

  .chevron.bottom {
    transform: rotate(-90deg);
    margin-top: 9px;
  }

  .chevron.right.active {
    transform: rotate(180deg);
  }

  .search-result {
    padding: 10px;
    border-bottom: 1px solid var(--results-border-color, #aaa);
    color: var(--results-fg, #000);
    cursor: pointer;
    font-size: 0.9rem;
    list-style: none;
  }

  .search-result:hover {
    background: #0001;
  }

  .hint {
    display: flex;
    color: #0008;
    height: 40px;
    width: 100%;
    margin: 30px 0;
    text-align: center;
    justify-content: center;
    flex-direction: row;
    align-items: center;
  }
`,lkt=t=>{let e;return typeof t=="string"?e=document.querySelector(t):e=t,e},ukt=`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    preserveAspectRatio="xMidYMid"
    width="50"
    height="50"
    style="shape-rendering: auto; display: block; background: transparent;"
    xmlns:xlink="http://www.w3.org/1999/xlink"
  >
    <g>
      <circle
        stroke-dasharray="164.93361431346415 56.97787143782138"
        r="35"
        stroke-width="12"
        stroke="#1a467c"
        fill="none"
        cy="50"
        cx="50"
      >
        <animateTransform
          keyTimes="0;1"
          values="0 50 50;360 50 50"
          dur="1.2222222222222223s"
          repeatCount="indefinite"
          type="rotate"
          attributeName="transform"
        ></animateTransform>
      </circle>
      <g></g>
    </g>
  </svg>
`;var Xb;class ckt extends Zr{constructor(){super();gn(this,Xb);this._data=[],this._isListVisible=!1,this._isInputVisible=!1,this._query="",this._isLoading=!1,this.for="eox-map",this.listDirection="right",this.resultsDirection="down",this.interval=800,this.loaderSvg=ukt,this.fetchDebounced=Q0(async()=>{if(!(this._query.length<2)){this._isLoading=!0;try{const n=`${this.endpoint}${this.endpoint.includes("?")?"&":"?"}${this.queryParameter??"q"}=${this._query}`,i=await(await fetch(encodeURI(n))).json();this._data=i.results,this._isLoading=!1}catch{console.log("Error setting up or requesting from geosearch endpoint")}}},this.interval)}static get properties(){return{_data:{attribute:!1},_isListVisible:{attribute:!1},_isInputVisible:{attribute:!1},_query:{attribute:!1},_isLoading:{attribute:!1},endpoint:{type:String},for:{type:String},queryParameter:{type:String,default:"q"},button:{type:Boolean},interval:{type:Number,default:800},small:{type:Boolean},label:{type:String},direction:{type:String,attribute:"list-direction"},resultsDirection:{type:String,attribute:"results-direction"},unstyled:{type:Boolean},loaderSvg:{type:String,attribute:"loader-svg"}}}async onInput(n){if(this._query=n.target.value,this._query.length==0){this._isListVisible=!1;return}else this._query.length>=2&&(this._isLoading=!0),this._isListVisible=!0;this.fetchDebounced()}onInputBlur(){this._isInputVisible=!1,this._isListVisible=!1,this._query=""}onButtonClick(){this._isInputVisible=!this._isInputVisible,this._isInputVisible&&setTimeout(()=>this.renderRoot.querySelector("#gazetteer").focus())}getFlexDirection(){return this.direction==="up"?"column-reverse":this.direction==="left"?"row-reverse":this.direction==="down"?"column":(this.direction==="right","row")}getResultsDirection(){return this.resultsDirection==="up"?"column-reverse":this.resultsDirection==="left"?"row-reverse":this.resultsDirection==="down"?"column":(this.resultsDirection==="right","row")}getVerticalAlign(){return this.resultsDirection==="up"?"end":"start"}getMarginDirection(n){return n==="up"?"top":n==="left"?"left":n==="down"?"bottom":n==="right"?"right":"row"}handleSelect(n){this._isInputVisible=!1,this._isListVisible=!1,this._query="";const r=this.eoxMap.map.getView().getProjection().getCode();let i=tM("EPSG:4326",r,[n.bounds.southwest.lng,n.bounds.southwest.lat]),s=tM("EPSG:4326",r,[n.bounds.northeast.lng,n.bounds.northeast.lat]);const o=[i[0],i[1],s[0],s[1]];this.eoxMap.zoomExtent=o,this.dispatchEvent(new CustomEvent("geosearchSelect",n))}updateMap(){const n=lkt(this.for);if(n){const r=n;this.eoxMap=r}}firstUpdated(){this.updateMap()}updated(n){n.has("for")&&this.updateMap()}get eoxMap(){return Gt(this,Xb)}set eoxMap(n){const r=Gt(this,Xb);gs(this,Xb,n),this.requestUpdate("eoxMap",r)}render(){return et`
      <style>
        .hidden {
          display: none;
        }
        ${!this.unstyled&&P6e}
          ${!this.unstyled&&akt}
          ${!this.unstyled&&N6e}
          .fill {
          width: 100%;
          height: 100%;
          min-height: 100px;
          display: flex;
          justify-content: center;
          align-items: center;
        }
      </style>
      <div
        class="geosearch ${this.small?"small":""}"
        style="
            flex-direction: ${this.getFlexDirection()};
            align-items: ${this.getVerticalAlign()};
        "
      >
        <button
          class="${this.button?"":"hidden"} ${this._isInputVisible?"active":""}"
          style="
            margin-${this.getMarginDirection(this.direction)}: 12px;
            flex-direction: ${this.getFlexDirection()};
          "
          @click="${this.onButtonClick}"
        >
          <span class="icon"></span>
          <span
            class="chevron ${this.direction??"right"} ${this._isInputVisible?"active":""}"
          ></span>
          <span
            style="display: ${this.small&&!this.unstyled?"none":"flex"}"
            >${(this.label||this.unstyled)??"Search"}</span
          >
        </button>
        <div
          class="search-container ${this.button?this._isInputVisible?"":"hidden":""}"
          style="flex-direction: ${this.getResultsDirection()};"
        >
          <input
            id="gazetteer"
            type="text"
            placeholder="Type to search"
            .value="${this._query}"
            style="margin-${this.getMarginDirection(this.resultsDirection)}: ${this._isListVisible?12:0}px"
            @input="${this.onInput}"
          />
          <ul class="results-container ${this._isListVisible?"":"hidden"}">
            ${this._isLoading?et`<div class="fill">${ikt(this.loaderSvg)}</div>`:this._query.length<2?et`<span class="hint"
                    >Enter at least two characters to search</span
                  >`:this._data.map(n=>et`
                      <eox-geosearch-item
                        .item="${n}"
                        .onClick="${r=>{this.handleSelect(r)}}"
                        .unstyled=${this.unstyled}
                      />
                    `)}
          </ul>
        </div>
      </div>
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}}Xb=new WeakMap;class dkt extends Zr{static get properties(){return{item:{type:Object},onClick:{type:Function},unstyled:{type:Boolean}}}constructor(){super()}render(){return et`
      <style>
        ${!this.unstyled&&P6e}
        ${!this.unstyled&&N6e}
      </style>
      <li class="search-result" @click="${()=>this.onClick(this.item)}">
        <span class="name">${this.item.formatted}</span>
      </li>
    `}}customElements.define("eox-geosearch",ckt);customElements.define("eox-geosearch-item",dkt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*lu(t,e){if(t!==void 0){let n=0;for(const r of t)yield e(r,n++)}}const fkt=`
:host {
  display: flex;
  box-sizing: border-box;
  height: 100%;
  line-height: 1;
}
*,
*:before,
*:after {
  box-sizing: inherit;
}
form#itemfilter {
  height: 100%;
  width: 100%;
  max-width: 100%;
  display: flex;
  flex-direction: column;
}
form#itemfilter:not(.inline) {
  overflow-y: auto;
}
details {
  width: 100%;
}
`,lC=`
:host, :root {
  --item-color: color-mix(
    in srgb,
    var(--primary-color) 10%,
    transparent
  );
  --item-hover-color: color-mix(
    in srgb,
    var(--secondary-color) 30%,
    transparent
  );
  --item-select-color: var(--primary-color);
  --inline-bg-color: color-mix(
    in srgb,
    var(--secondary-color) 10%,
    transparent
  );
  --border-color: color-mix(
    in srgb,
    #000000 20%,
    transparent
  );
  --background-color: #fff;
  --padding: 0.5rem;
  --text-transform: capitalize;
  --form-flex-direction: column;
  --filter-display: block;
}
* {
  font-family: Roboto, sans-serif;
}
form#itemfilter {
  flex-direction: var(--form-flex-direction);
}
eox-itemfilter-container {
  min-width: 200px;
  display: var(--filter-display);
}
eox-itemfilter-results {
  flex-grow: 1;
}
ul {
  padding-left: 0;
  margin-top: 0;
}
li {
  list-style: none;
}
li span {
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
}
.cards li span {
  display: block;
}
li label {
  display: flex;
  align-items: center;
}
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem var(--padding);
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: 13px;
  align-items: center;
  text-transform: var(--text-transform);
}
.cards .title {
  font-size: 16px;
  font-weight: 600;
  text-wrap: auto;
  line-height: 19px;
}
.subtitle {
  font-size: 11px;
  opacity: .7;
  margin-top: 6px;
}
.cards .subtitle {
  font-size: 14px;
  color: #757575;
  text-wrap: auto;
  line-height: 19px;
}
.image {
  width: 24px;
  height: 24px;
  object-fit: cover;
  overflow: hidden;
  margin-right: 8px;
}
.cards .image {
  width: 100%;
  height: 190px;
  margin-bottom: 8px;
}
.title-container {
  display: flex;
  flex-direction: column;
}
h6.main-heading {
  font-size: 1rem;
  margin-block-start: 1.33em;
  margin-block-end: 1.33em;
  margin-top: var(--padding);
  padding: 0 var(--padding);
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details.details-filter summary::after,
details.details-results summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details.details-filter summary::after {
  margin-left: auto;
  transform: rotate(90deg);
}
details[open] summary::before {
  transform: rotate(90deg);
}
details[open] summary::after {
  transform: rotate(270deg);
}
eox-itemfilter-expandcontainer {
  max-height: 200px;
}
eox-itemfilter-expandcontainer > [data-type=filter] {
  display: block;
  height: calc(100% - 32px);
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 var(--padding);
}
[data-type=filter] .title,
details summary {
  text-transform: var(--text-transform);
}
li,
label,
details,
input[type="checkbox"],
input[type="radio"] {
  cursor: pointer;
}
input[type="checkbox"],
input[type="radio"] {
  margin: 0;
}
input[type="text"] {
  box-sizing: border-box;
  width: 100%;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 5px 7px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
}
section:not(section:last-of-type) {
  margin-bottom: 1rem;
}
#section-results {
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
}
ul:not(#filters) > li {
  padding: 5px 0;
}
ul#results li {
  padding: 5px var(--padding);
}
ul#results ul.cards {
  display: flex;
  flex-wrap: wrap;
  width: 100%;
  gap: 40px;
  margin: 20px 0;
  cursor: initial;
}
ul#results ul.cards li {
  flex-basis: calc(33.3% - 77px);
  min-width: 0;
  align-self: flex-start;
}
@media screen and (max-width: 768px) {
  ul#results ul.cards li {
    flex-basis: calc(50% - 70px);
  }
}
@media screen and (max-width: 480px) {
  ul#results ul.cards li {
    flex-basis: 100%;
  }
}
section {
  position: relative;
  background-color: var(--background-color);
}
button#filter-reset {
  position: absolute;
  top: 0;
  right: var(--padding);
  padding: 2px 10px;
}
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--secondary-color);
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: var(--primary-color);
  font-weight: 500;
  margin-left: 9px;
}
eox-itemfilter-range,
tc-range-slider {
  align-items: center;
  display: block;
}
tc-range-slider {
  width: calc(100% - 16px);
  margin-left: 8px;
  margin-right: 8px;
  --width: 100%;
}
.range-before,
.range-after {
  font-size: small;
}
.range-before,
.range-after {
  margin: 1rem 0px;
}

button.reset-icon:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
eox-itemfilter-expandcontainer button.reset-icon {
  margin-left: 4px;
  margin-top: -5px;
  height: 14px;
  width: 14px;
}
eox-itemfilter-expandcontainer button.reset-icon:before {
  height: 14px;
  width: 14px;
}
.inline-content {
  border: 1.5px solid var(--secondary-color);
  border-radius: 4px;
  max-height: 300px;
  overflow-y: auto;
  background: var(--inline-bg-color);
  margin-top: 4px;
  padding: 8px;
}
.inline-container {
  position: relative;
  align-items: center;
}
.inline-container-wrapper {
  width: 100%;
  position: relative;
}
.inline-container {
  position: relative;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  height: 24px;
  padding: 8px;
  flex: 1;
  justify-content: space-between;
  cursor: text;
  transition: all 0.2s ease-in-out;
  display: flex;
}
.inline-container:hover {
  border: 1px solid var(--primary-color);
}
[popover] {
  position: fixed;
  top: 0;
  left: 0;
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  border: none;
}
.input-container {
  display: flex;
  flex: 1;
  align-items: center;
}
.input-container input,
.input-container input:focus {
  height: 100%;
  border: none;
  outline: none;
  border: 0;
  min-width: 25%;
}
.button-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 1px;
  top: 5px;
  height: calc(100% - 10px);
  width: 34px;
  background: white;
}
button.icon {
  color: #004170;
  height: 24px;
  font-size: large;
  width: unset;
}
.inline-container::-webkit-scrollbar {
  height: 2px;
}
.inline-container::-webkit-scrollbar-thumb {
  background: lightgrey;
  border-radius: 2px;
}
.hidden {
  height: 0;
  padding: 0;
  border: none;
}
.hidden:hover {
  border: none;
}
.chip-title {
  pointer-events: none;
  text-transform: var(--text-transform);
}
.chip {
  display: flex;
  align-items: center;
  background: var(--item-color);
  border-radius: 30px;
  margin-right: 4px;
  padding: 5px 10px;
  font-size: small;
  cursor: default;
  white-space: nowrap;
}
.chip.highlighted {
  background: var(--primary-color);
  color: white;
}
.chip-close {
  cursor: pointer;
  font-weight: 600;
  position: absolute;
  right: -25px;
  background: white;
  top: 0;
  height: 100%;
  display: flex;
  align-items: center;
  height: 24px;
  width: 24px;
}
.chip-close:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
  height: 24px;
  width: 24px;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eclose%3C/title%3E%3Cpath d='M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z' /%3E%3C/svg%3E");
}
.chip-container {
  position: relative;
  max-width: 75%;
}
.autocomplete-container,
.text-container {
  position: relative;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  justify-content: space-between;
  cursor: text;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  background: white;
}
.autocomplete-container-wrapper,
.text-container-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  flex: 1;
  overflow-x: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.autocomplete-container-wrapper::-webkit-scrollbar {
  display: none;
}
.chip-wrapper {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.chip-wrapper::-webkit-scrollbar {
  display: none;
  width: 0;
  background: transparent;
}
.autocomplete-input,
.text-input {
  flex: 1;
  border: 1px solid var(--border-color);
  outline: none;
  box-sizing: border-box;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  min-width: 150px;
}
input[type="text"].text-input,
input[type="text"].autocomplete-input {
  padding: 9px 6px !important;
  border-radius: 4px;
}
.text-input:hover,
.autocomplete-input:hover {
  border: 1px solid var(--primary-color);
}
.text-input:invalid {
  border: 1px solid red;
}
.selected-items {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
}
.select li:hover,
.multiselect li:hover,
eox-itemfilter-results li:hover {
  background: var(--item-hover-color);
}
eox-itemfilter-results li.highlighted {
  color: var(--background-color);
  background: var(--item-select-color);
}
.selected-item span {
  margin-right: 8px;
}
.selected-item button {
  background: none;
  border: none;
  color: #fff;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.multiselect-container,
.select-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.multiselect-container label,
.select-container label {
  display: flex;
  align-items: center;
  cursor: pointer;
}
.multiselect-container input,
.select-container input {
  margin-right: 8px;
}
.select-overflow {
  max-height: 185px;
  overflow-y: auto;
}
.chip-title strong {
  font-weight: 500;
}
.chip-wrapper {
  max-width: 100%;
  overflow-x: scroll;
}
.chip-container {
  display: flex;
  flex: 0;
}
.input-container.dirty-filter-input {
  margin-left: 25px;
}
.error-validation {
  position: relative;
  color: red;
  font-size: x-small;
  top: -8px;
}
`,hkt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var PT,B6e;class pkt extends Zr{constructor(){super();gn(this,PT);this.filterObject={},this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},unstyled:{type:Boolean}}}render(){return et`
      <style>
        ${!this.unstyled&&lC}
      </style>

      ${qn(this.filterObject.featured,()=>et`<slot name="filter"></slot>`,()=>et`<details
            @toggle="${yn(this,PT,B6e)}"
            class="details-filter"
            ?open=${this.filterObject.expanded||ni}
          >
            <summary>
              <span
                class="title"
                style="${!this.filterObject.title&&"text-transform: var(--text-transform)"}"
              >
                ${this.filterObject.title||this.filterObject.key||"Filter"}
                <slot name="reset-button"></slot>
              </span>
            </summary>
            <div>
              <slot name="filter"></slot>
            </div>
          </details>`)}
    `}}PT=new WeakSet,B6e=function(n){this.dispatchEvent(new CustomEvent("details-toggled",{detail:n,bubbles:!0,composed:!0}))};customElements.define("eox-itemfilter-expandcontainer",pkt);function ph(t){return Array.isArray?Array.isArray(t):U6e(t)==="[object Array]"}const mkt=1/0;function gkt(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-mkt?"-0":e}function ykt(t){return t==null?"":gkt(t)}function kd(t){return typeof t=="string"}function z6e(t){return typeof t=="number"}function bkt(t){return t===!0||t===!1||vkt(t)&&U6e(t)=="[object Boolean]"}function j6e(t){return typeof t=="object"}function vkt(t){return j6e(t)&&t!==null}function Kl(t){return t!=null}function r5(t){return!t.trim().length}function U6e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const xkt="Incorrect 'index' type",wkt=t=>`Invalid value for key ${t}`,_kt=t=>`Pattern length exceeds max of ${t}.`,Ekt=t=>`Missing ${t} property in key`,Ckt=t=>`Property 'weight' in key '${t}' must be a positive integer`,gEe=Object.prototype.hasOwnProperty;class Skt{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=q6e(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function q6e(t){let e=null,n=null,r=null,i=1,s=null;if(kd(t)||ph(t))r=t,e=yEe(t),n=x6(t);else{if(!gEe.call(t,"name"))throw new Error(Ekt("name"));const o=t.name;if(r=o,gEe.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Ckt(o));e=yEe(o),n=x6(o),s=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:s}}function yEe(t){return ph(t)?t:t.split(".")}function x6(t){return ph(t)?t.join("."):t}function Akt(t,e){let n=[],r=!1;const i=(s,o,a)=>{if(Kl(s))if(!o[a])n.push(s);else{let l=o[a];const u=s[l];if(!Kl(u))return;if(a===o.length-1&&(kd(u)||z6e(u)||bkt(u)))n.push(ykt(u));else if(ph(u)){r=!0;for(let d=0,c=u.length;d<c;d+=1)i(u[d],o,a+1)}else o.length&&i(u,o,a+1)}};return i(t,kd(e)?e.split("."):e,0),r?n:n[0]}const kkt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Tkt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Dkt={location:0,threshold:.6,distance:100},Lkt={useExtendedSearch:!1,getFn:Akt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Xn={...Tkt,...kkt,...Dkt,...Lkt};const Rkt=/[^ ]+/g;function Fkt(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(Rkt).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class T7{constructor({getFn:e=Xn.getFn,fieldNormWeight:n=Xn.fieldNormWeight}={}){this.norm=Fkt(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,kd(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();kd(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Kl(e)||r5(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Kl(o)){if(ph(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:d}=l.pop();if(Kl(d))if(kd(d)&&!r5(d)){let c={v:d,i:u,n:this.norm.get(d)};a.push(c)}else ph(d)&&d.forEach((c,f)=>{l.push({nestedArrIndex:f,value:c})})}r.$[s]=a}else if(kd(o)&&!r5(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function H6e(t,e,{getFn:n=Xn.getFn,fieldNormWeight:r=Xn.fieldNormWeight}={}){const i=new T7({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(q6e)),i.setSources(e),i.create(),i}function Okt(t,{getFn:e=Xn.getFn,fieldNormWeight:n=Xn.fieldNormWeight}={}){const{keys:r,records:i}=t,s=new T7({getFn:e,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function eA(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Xn.distance,ignoreLocation:s=Xn.ignoreLocation}={}){const o=e/t.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function Mkt(t=[],e=Xn.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let a=t[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[s-1]&&s-r>=e&&n.push([r,s-1]),n}const zg=32;function Ikt(t,e,n,{location:r=Xn.location,distance:i=Xn.distance,threshold:s=Xn.threshold,findAllMatches:o=Xn.findAllMatches,minMatchCharLength:a=Xn.minMatchCharLength,includeMatches:l=Xn.includeMatches,ignoreLocation:u=Xn.ignoreLocation}={}){if(e.length>zg)throw new Error(_kt(zg));const d=e.length,c=t.length,f=Math.max(0,Math.min(r,c));let h=s,p=f;const g=a>1||l,b=g?Array(c):[];let y;for(;(y=t.indexOf(e,p))>-1;){let D=eA(e,{currentLocation:y,expectedLocation:f,distance:i,ignoreLocation:u});if(h=Math.min(D,h),p=y+d,g){let k=0;for(;k<d;)b[y+k]=1,k+=1}}p=-1;let v=[],w=1,E=d+c;const S=1<<d-1;for(let D=0;D<d;D+=1){let k=0,R=E;for(;k<R;)eA(e,{errors:D,currentLocation:f+R,expectedLocation:f,distance:i,ignoreLocation:u})<=h?k=R:E=R,R=Math.floor((E-k)/2+k);E=R;let O=Math.max(1,f-R+1),B=o?c:Math.min(f+R,c)+d,K=Array(B+2);K[B+1]=(1<<D)-1;for(let I=B;I>=O;I-=1){let $=I-1,U=n[t.charAt($)];if(g&&(b[$]=+!!U),K[I]=(K[I+1]<<1|1)&U,D&&(K[I]|=(v[I+1]|v[I])<<1|1|v[I+1]),K[I]&S&&(w=eA(e,{errors:D,currentLocation:$,expectedLocation:f,distance:i,ignoreLocation:u}),w<=h)){if(h=w,p=$,p<=f)break;O=Math.max(1,2*f-p)}}if(eA(e,{errors:D+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:u})>h)break;v=K}const T={isMatch:p>=0,score:Math.max(.001,w)};if(g){const D=Mkt(b,a);D.length?l&&(T.indices=D):T.isMatch=!1}return T}function $kt(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class G6e{constructor(e,{location:n=Xn.location,threshold:r=Xn.threshold,distance:i=Xn.distance,includeMatches:s=Xn.includeMatches,findAllMatches:o=Xn.findAllMatches,minMatchCharLength:a=Xn.minMatchCharLength,isCaseSensitive:l=Xn.isCaseSensitive,ignoreLocation:u=Xn.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(f,h)=>{this.chunks.push({pattern:f,alphabet:$kt(f),startIndex:h})},c=this.pattern.length;if(c>zg){let f=0;const h=c%zg,p=c-h;for(;f<p;)d(this.pattern.substr(f,zg),f),f+=zg;if(h){const g=c-zg;d(this.pattern.substr(g),g)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,e.length-1]]),p}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let d=[],c=0,f=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:b})=>{const{isMatch:y,score:v,indices:w}=Ikt(e,p,g,{location:i+b,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});y&&(f=!0),c+=v,y&&w&&(d=[...d,...w])});let h={isMatch:f,score:f?c/this.chunks.length:1};return f&&r&&(h.indices=d),h}}class Tm{constructor(e){this.pattern=e}static isMultiMatch(e){return bEe(e,this.multiRegex)}static isSingleMatch(e){return bEe(e,this.singleRegex)}search(){}}function bEe(t,e){const n=t.match(e);return n?n[1]:null}class Pkt extends Tm{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Nkt extends Tm{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Bkt extends Tm{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class zkt extends Tm{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class jkt extends Tm{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ukt extends Tm{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class V6e extends Tm{constructor(e,{location:n=Xn.location,threshold:r=Xn.threshold,distance:i=Xn.distance,includeMatches:s=Xn.includeMatches,findAllMatches:o=Xn.findAllMatches,minMatchCharLength:a=Xn.minMatchCharLength,isCaseSensitive:l=Xn.isCaseSensitive,ignoreLocation:u=Xn.ignoreLocation}={}){super(e),this._bitapSearch=new G6e(e,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class W6e extends Tm{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const w6=[Pkt,W6e,Bkt,zkt,Ukt,jkt,Nkt,V6e],vEe=w6.length,qkt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Hkt="|";function Gkt(t,e={}){return t.split(Hkt).map(n=>{let r=n.trim().split(qkt).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,u=-1;for(;!l&&++u<vEe;){const d=w6[u];let c=d.isMultiMatch(a);c&&(i.push(new d(c,e)),l=!0)}if(!l)for(u=-1;++u<vEe;){const d=w6[u];let c=d.isSingleMatch(a);if(c){i.push(new d(c,e));break}}}return i})}const Vkt=new Set([V6e.type,W6e.type]);class Wkt{constructor(e,{isCaseSensitive:n=Xn.isCaseSensitive,includeMatches:r=Xn.includeMatches,minMatchCharLength:i=Xn.minMatchCharLength,ignoreLocation:s=Xn.ignoreLocation,findAllMatches:o=Xn.findAllMatches,location:a=Xn.location,threshold:l=Xn.threshold,distance:u=Xn.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=n?e:e.toLowerCase(),this.query=Gkt(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const d=n[l];o.length=0,s=0;for(let c=0,f=d.length;c<f;c+=1){const h=d[c],{isMatch:p,indices:g,score:b}=h.search(e);if(p){if(s+=1,a+=b,r){const y=h.constructor.type;Vkt.has(y)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let c={isMatch:!0,score:a/s};return r&&(c.indices=o),c}}return{isMatch:!1,score:1}}}const _6=[];function Ykt(...t){_6.push(...t)}function E6(t,e){for(let n=0,r=_6.length;n<r;n+=1){let i=_6[n];if(i.condition(t,e))return new i(t,e)}return new G6e(t,e)}const nT={AND:"$and",OR:"$or"},C6={PATH:"$path",PATTERN:"$val"},S6=t=>!!(t[nT.AND]||t[nT.OR]),Xkt=t=>!!t[C6.PATH],Zkt=t=>!ph(t)&&j6e(t)&&!S6(t),xEe=t=>({[nT.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Y6e(t,e,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=Xkt(i);if(!o&&s.length>1&&!S6(i))return r(xEe(i));if(Zkt(i)){const l=o?i[C6.PATH]:s[0],u=o?i[C6.PATTERN]:i[l];if(!kd(u))throw new Error(wkt(l));const d={keyId:x6(l),pattern:u};return n&&(d.searcher=E6(u,e)),d}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];ph(u)&&u.forEach(d=>{a.children.push(r(d))})}),a};return S6(t)||(t=xEe(t)),r(t)}function Kkt(t,{ignoreFieldNorm:e=Xn.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:s))}),n.score=r})}function Jkt(t,e){const n=t.matches;e.matches=[],Kl(n)&&n.forEach(r=>{if(!Kl(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function Qkt(t,e){e.score=t.score}function e3t(t,e,{includeMatches:n=Xn.includeMatches,includeScore:r=Xn.includeScore}={}){const i=[];return n&&i.push(Jkt),r&&i.push(Qkt),t.map(s=>{const{idx:o}=s,a={item:e[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class Dm{constructor(e,n={},r){this.options={...Xn,...n},this.options.useExtendedSearch,this._keyStore=new Skt(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof T7))throw new Error(xkt);this._myIndex=n||H6e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Kl(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=kd(e)?kd(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Kkt(l,{ignoreFieldNorm:a}),s&&l.sort(o),z6e(n)&&n>-1&&(l=l.slice(0,n)),e3t(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=E6(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!Kl(s))return;const{isMatch:l,score:u,indices:d}=n.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:d}]})}),i}_searchLogical(e){const n=Y6e(e,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:c,searcher:f}=a,h=this._findMatches({key:this._keyStore.get(c),value:this._myIndex.getValueForItemAtKeyId(l,c),searcher:f});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const d=[];for(let c=0,f=a.children.length;c<f;c+=1){const h=a.children[c],p=r(h,l,u);if(p.length)d.push(...p);else if(a.operator===nT.AND)return[]}return d},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Kl(a)){let u=r(n,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:d})=>{s[l].matches.push(...d)}))}}),o}_searchObjectList(e){const n=E6(e,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Kl(o))return;let l=[];r.forEach((u,d)=>{l.push(...this._findMatches({key:u,value:o[d],searcher:n}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:e,value:n,searcher:r}){if(!Kl(n))return[];let i=[];if(ph(n))n.forEach(({v:s,i:o,n:a})=>{if(!Kl(s))return;const{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:e,value:s,idx:o,norm:a,indices:d})});else{const{v:s,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(s);a&&i.push({score:l,key:e,value:s,norm:o,indices:u})}return i}}Dm.version="7.0.0";Dm.createIndex=H6e;Dm.parseIndex=Okt;Dm.config=Xn;Dm.parseQuery=Y6e;Ykt(Wkt);function X6e(t,e){const n=new Dm(e.filterProperties,{keys:["title"]}),r=t.target.value,s=n.search(r).map(o=>o.item.key||o.item.keys.join("|"));Object.keys(e.filters).forEach(o=>{e.querySelector(`[data-details="${o}"]`).parentElement.style.display=s.includes(o)||!r?"":"none"})}function t3t(t,e){const n=t.target.getAttribute("data-close").replace("|","-");e.querySelector(`#filter-${n}`).reset(),e.dispatchEvent(new CustomEvent("filter")),e.requestUpdate()}const A6=Math.min,zb=Math.max,rT=Math.round,tA=Math.floor,Md=t=>({x:t,y:t});function Z6e(t){return t.split("-")[0]}function n3t(t){return t.split("-")[1]}function r3t(t){return t==="x"?"y":"x"}function i3t(t){return t==="y"?"height":"width"}function K6e(t){return["top","bottom"].includes(Z6e(t))?"y":"x"}function s3t(t){return r3t(K6e(t))}function J6e(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function wEe(t,e,n){let{reference:r,floating:i}=t;const s=K6e(e),o=s3t(e),a=i3t(o),l=Z6e(e),u=s==="y",d=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:d,y:r.y-i.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-i.width,y:c};break;default:h={x:r.x,y:r.y}}switch(n3t(e)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const o3t=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:c}=wEe(u,r,l),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:b,fn:y}=a[g],{x:v,y:w,data:E,reset:S}=await y({x:d,y:c,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:t,floating:e}});d=v??d,c=w??c,h={...h,[b]:{...h[b],...E}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:d,y:c}=wEe(u,f,l)),g=-1)}return{x:d,y:c,placement:f,strategy:i,middlewareData:h}};function FR(){return typeof window<"u"}function T1(t){return Q6e(t)?(t.nodeName||"").toLowerCase():"#document"}function uu(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function uf(t){var e;return(e=(Q6e(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Q6e(t){return FR()?t instanceof Node||t instanceof uu(t).Node:!1}function jc(t){return FR()?t instanceof Element||t instanceof uu(t).Element:!1}function Wd(t){return FR()?t instanceof HTMLElement||t instanceof uu(t).HTMLElement:!1}function _Ee(t){return!FR()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof uu(t).ShadowRoot}function uC(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Uc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function a3t(t){return["table","td","th"].includes(T1(t))}function OR(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function D7(t){const e=L7(),n=jc(t)?Uc(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function l3t(t){let e=um(t);for(;Wd(e)&&!Pv(e);){if(D7(e))return e;if(OR(e))return null;e=um(e)}return null}function L7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pv(t){return["html","body","#document"].includes(T1(t))}function Uc(t){return uu(t).getComputedStyle(t)}function MR(t){return jc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function um(t){if(T1(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_Ee(t)&&t.host||uf(t);return _Ee(e)?e.host:e}function e$e(t){const e=um(t);return Pv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wd(e)&&uC(e)?e:e$e(e)}function $2(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=e$e(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=uu(i);if(s){const a=k6(o);return e.concat(o,o.visualViewport||[],uC(i)?i:[],a&&n?$2(a):[])}return e.concat(i,$2(i,[],n))}function k6(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function t$e(t){const e=Uc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Wd(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=rT(n)!==s||rT(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function R7(t){return jc(t)?t:t.contextElement}function jb(t){const e=R7(t);if(!Wd(e))return Md(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=t$e(e);let o=(s?rT(n.width):n.width)/r,a=(s?rT(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const u3t=Md(0);function n$e(t){const e=uu(t);return!L7()||!e.visualViewport?u3t:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function c3t(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==uu(t)?!1:e}function D0(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=R7(t);let o=Md(1);e&&(r?jc(r)&&(o=jb(r)):o=jb(t));const a=c3t(s,n,r)?n$e(s):Md(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,d=i.width/o.x,c=i.height/o.y;if(s){const f=uu(s),h=r&&jc(r)?uu(r):r;let p=f,g=k6(p);for(;g&&r&&h!==p;){const b=jb(g),y=g.getBoundingClientRect(),v=Uc(g),w=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*b.x,E=y.top+(g.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,c*=b.y,l+=w,u+=E,p=uu(g),g=k6(p)}}return J6e({width:d,height:c,x:l,y:u})}function F7(t,e){const n=MR(t).scrollLeft;return e?e.left+n:D0(uf(t)).left+n}function r$e(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:F7(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function d3t(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=uf(r),a=e?OR(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Md(1);const d=Md(0),c=Wd(r);if((c||!c&&!s)&&((T1(r)!=="body"||uC(o))&&(l=MR(r)),Wd(r))){const h=D0(r);u=jb(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const f=o&&!c&&!s?r$e(o,l,!0):Md(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-l.scrollTop*u.y+d.y+f.y}}function f3t(t){return Array.from(t.getClientRects())}function h3t(t){const e=uf(t),n=MR(t),r=t.ownerDocument.body,i=zb(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=zb(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+F7(t);const a=-n.scrollTop;return Uc(r).direction==="rtl"&&(o+=zb(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function p3t(t,e){const n=uu(t),r=uf(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=L7();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function m3t(t,e){const n=D0(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Wd(t)?jb(t):Md(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function EEe(t,e,n){let r;if(e==="viewport")r=p3t(t,n);else if(e==="document")r=h3t(uf(t));else if(jc(e))r=m3t(e,n);else{const i=n$e(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return J6e(r)}function i$e(t,e){const n=um(t);return n===e||!jc(n)||Pv(n)?!1:Uc(n).position==="fixed"||i$e(n,e)}function g3t(t,e){const n=e.get(t);if(n)return n;let r=$2(t,[],!1).filter(a=>jc(a)&&T1(a)!=="body"),i=null;const s=Uc(t).position==="fixed";let o=s?um(t):t;for(;jc(o)&&!Pv(o);){const a=Uc(o),l=D7(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uC(o)&&!l&&i$e(t,o))?r=r.filter(d=>d!==o):i=a,o=um(o)}return e.set(t,r),r}function y3t(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?OR(e)?[]:g3t(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const c=EEe(e,d,i);return u.top=zb(c.top,u.top),u.right=A6(c.right,u.right),u.bottom=A6(c.bottom,u.bottom),u.left=zb(c.left,u.left),u},EEe(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function b3t(t){const{width:e,height:n}=t$e(t);return{width:e,height:n}}function v3t(t,e,n){const r=Wd(e),i=uf(e),s=n==="fixed",o=D0(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Md(0);if(r||!r&&!s)if((T1(e)!=="body"||uC(i))&&(a=MR(e)),r){const f=D0(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=F7(i));const u=i&&!r&&!s?r$e(i,a):Md(0),d=o.left+a.scrollLeft-l.x-u.x,c=o.top+a.scrollTop-l.y-u.y;return{x:d,y:c,width:o.width,height:o.height}}function i5(t){return Uc(t).position==="static"}function CEe(t,e){if(!Wd(t)||Uc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return uf(t)===n&&(n=n.ownerDocument.body),n}function s$e(t,e){const n=uu(t);if(OR(t))return n;if(!Wd(t)){let i=um(t);for(;i&&!Pv(i);){if(jc(i)&&!i5(i))return i;i=um(i)}return n}let r=CEe(t,e);for(;r&&a3t(r)&&i5(r);)r=CEe(r,e);return r&&Pv(r)&&i5(r)&&!D7(r)?n:r||l3t(t)||n}const x3t=async function(t){const e=this.getOffsetParent||s$e,n=this.getDimensions,r=await n(t.floating);return{reference:v3t(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function w3t(t){return Uc(t).direction==="rtl"}const _3t={convertOffsetParentRelativeRectToViewportRelativeRect:d3t,getDocumentElement:uf,getClippingRect:y3t,getOffsetParent:s$e,getElementRects:x3t,getClientRects:f3t,getDimensions:b3t,getScale:jb,isElement:jc,isRTL:w3t};function E3t(t,e){let n=null,r;const i=uf(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:d,width:c,height:f}=t.getBoundingClientRect();if(a||e(),!c||!f)return;const h=tA(d),p=tA(i.clientWidth-(u+c)),g=tA(i.clientHeight-(d+f)),b=tA(u),v={rootMargin:-h+"px "+-p+"px "+-g+"px "+-b+"px",threshold:zb(0,A6(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(t)}return o(!0),s}function C3t(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=R7(t),d=i||s?[...u?$2(u):[],...$2(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const c=u&&a?E3t(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),u&&!l&&h.observe(u),h.observe(e));let p,g=l?D0(t):null;l&&b();function b(){const y=D0(t);g&&(y.x!==g.x||y.y!==g.y||y.width!==g.width||y.height!==g.height)&&n(),g=y,p=requestAnimationFrame(b)}return n(),()=>{var y;d.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),c==null||c(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const S3t=(t,e,n)=>{const r=new Map,i={platform:_3t,...n},s={...i.platform,_c:r};return o3t(t,e,{...i,platform:s})};function A3t(t){const e=t.renderRoot.querySelector(".inline-container-wrapper"),n=t.renderRoot.querySelector("[popover]");return C3t(e,n,()=>{n.matches(":popover-open")&&S3t(e,n,{strategy:"fixed"}).then(({x:i,y:s})=>{Object.assign(n.style,{left:`${i}px`,top:`${s}px`,width:`${e.getBoundingClientRect().width}px`})})},{animationFrame:!0})}function o$e(t){t.renderRoot.querySelector("#eox-itemfilter-input-search").value="",X6e({target:{value:""}},t)}function k3t(t,e){e.inlineMode&&t.stopPropagation()}function T3t(t){t.inlineMode&&(t.showDropdown=!0)}function D3t(t,e){e.inlineMode&&(t.stopPropagation(),e.showDropdown=!0)}function L3t(t,e){e.inlineMode&&t.key==="Escape"&&e.showDropdown&&(o$e(e),e.showDropdown=!1)}function R3t(t,e){e.inlineMode&&t.target.tagName!=="DROPDOWN-FORM"&&t.target.tagName!=="EOX-ITEMFILTER"&&e.showDropdown&&(o$e(e),e.showDropdown=!1)}function F3t(t,e){var n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,d=null,c=null,f=t[0],h=t[1],p=e.length;for(n;n<p;n++){r=0;var g=e[n].length-1,b=e[n];if(d=b[0],d[0]!==b[g][0]&&d[1]!==b[g][1])throw new Error("First and last coordinates in a ring must be the same");for(o=d[0]-f,a=d[1]-h,r;r<g;r++){if(c=b[r+1],u=c[1]-h,a<0&&u<0||a>0&&u>0){d=c,a=u,o=d[0]-f;continue}if(l=c[0]-t[0],u>0&&a<=0){if(s=o*u-l*a,s>0)i=i+1;else if(s===0)return 0}else if(a>0&&u<=0){if(s=o*u-l*a,s<0)i=i+1;else if(s===0)return 0}else if(u===0&&a<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u<0){if(s=o*u-l*a,s===0)return 0}else if(a===0&&u===0){if(l<=0&&o>=0)return 0;if(o<=0&&l>=0)return 0}d=c,a=u,o=l}}return i%2!==0}function L0(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function O3t(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!SEe(t[0])||!SEe(t[1]))throw new Error("coordinates must contain numbers");return L0({type:"Point",coordinates:t},e,n)}function M3t(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return L0({type:"LineString",coordinates:t},e,n)}function T6(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function I3t(t,e,n={}){return L0({type:"MultiLineString",coordinates:t},e,n)}function SEe(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function a$e(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $3t(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Nv(t){return t.type==="Feature"?t.geometry:t}function Nu(t,e,n={}){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");const r=a$e(t),i=Nv(e),s=i.type,o=e.bbox;let a=i.coordinates;if(o&&P3t(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const d=F3t(r,a[u]);if(d===0)return!n.ignoreBoundary;d&&(l=!0)}return l}function P3t(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}class l$e{constructor(e=[],n=N3t){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,i=n[e];for(;e>0;){const s=e-1>>1,o=n[s];if(r(i,o)>=0)break;n[e]=o,e=s}n[e]=i}_down(e){const{data:n,compare:r}=this,i=this.length>>1,s=n[e];for(;e<i;){let o=(e<<1)+1,a=n[o];const l=o+1;if(l<this.length&&r(n[l],a)<0&&(o=l,a=n[l]),r(a,s)>=0)break;n[e]=a,e=o}n[e]=s}}function N3t(t,e){return t<e?-1:t>e?1:0}function u$e(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function B3t(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}let AEe=class{constructor(e,n,r,i){this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function z3t(t,e){if(t.type==="FeatureCollection"){const n=t.features;for(let r=0;r<n.length;r++)kEe(n[r],e)}else kEe(t,e)}let nA=0,rA=0,iA=0;function kEe(t,e){const n=t.type==="Feature"?t.geometry:t;let r=n.coordinates;(n.type==="Polygon"||n.type==="MultiLineString")&&(r=[r]),n.type==="LineString"&&(r=[[r]]);for(let i=0;i<r.length;i++)for(let s=0;s<r[i].length;s++){let o=r[i][s][0],a=null;rA=rA+1;for(let l=0;l<r[i][s].length-1;l++){a=r[i][s][l+1];const u=new AEe(o,nA,rA,iA),d=new AEe(a,nA,rA,iA+1);u.otherEvent=d,d.otherEvent=u,u$e(u,d)>0?(d.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,d.isLeftEndpoint=!1),e.push(u),e.push(d),o=a,iA=iA+1}}nA=nA+1}class j3t{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function U3t(t,e){if(t===null||e===null||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,i=t.rightSweepEvent.p.x,s=t.rightSweepEvent.p.y,o=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,u=e.rightSweepEvent.p.y,d=(u-a)*(i-n)-(l-o)*(s-r),c=(l-o)*(r-a)-(u-a)*(n-o),f=(i-n)*(r-a)-(s-r)*(n-o);if(d===0)return!1;const h=c/d,p=f/d;if(h>=0&&h<=1&&p>=0&&p<=1){const g=n+h*(i-n),b=r+h*(s-r);return[g,b]}return!1}function q3t(t,e){e=e||!1;const n=[],r=new l$e([],B3t);for(;t.length;){const i=t.pop();if(i.isLeftEndpoint){const s=new j3t(i);for(let o=0;o<r.data.length;o++){const a=r.data[o];if(e&&a.leftSweepEvent.featureId===i.featureId)continue;const l=U3t(s,a);l!==!1&&n.push(l)}r.push(s)}else i.isLeftEndpoint===!1&&r.pop()}return n}function H3t(t,e){const n=new l$e([],u$e);return z3t(t,n),q3t(n,e)}var G3t=H3t;function O7(t,e,n={}){const{removeDuplicates:r=!0,ignoreSelfIntersections:i=!1}=n;let s=[];t.type==="FeatureCollection"?s=s.concat(t.features):t.type==="Feature"?s.push(t):(t.type==="LineString"||t.type==="Polygon"||t.type==="MultiLineString"||t.type==="MultiPolygon")&&s.push(L0(t)),e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(L0(e));const o=G3t(T6(s),i);let a=[];if(r){const l={};o.forEach(u=>{const d=u.join(",");l[d]||(l[d]=!0,a.push(u))})}else a=o;return T6(a.map(l=>O3t(l)))}function c$e(t,e,n){if(t!==null)for(var r,i,s,o,a,l,u,d=0,c=0,f,h=t.type,p=h==="FeatureCollection",g=h==="Feature",b=p?t.features.length:1,y=0;y<b;y++){u=p?t.features[y].geometry:g?t.geometry:t,f=u?u.type==="GeometryCollection":!1,a=f?u.geometries.length:1;for(var v=0;v<a;v++){var w=0,E=0;if(o=f?u.geometries[v]:u,o!==null){l=o.coordinates;var S=o.type;switch(d=0,S){case null:break;case"Point":if(e(l,c,y,w,E)===!1)return!1;c++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],c,y,w,E)===!1)return!1;c++,S==="MultiPoint"&&w++}S==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],c,y,w,E)===!1)return!1;c++}S==="MultiLineString"&&w++,S==="Polygon"&&E++}S==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(E=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],c,y,w,E)===!1)return!1;c++}E++}w++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(c$e(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function V3t(t,e){var n,r,i,s,o,a,l,u,d,c,f=0,h=t.type==="FeatureCollection",p=t.type==="Feature",g=h?t.features.length:1;for(n=0;n<g;n++){for(a=h?t.features[n].geometry:p?t.geometry:t,u=h?t.features[n].properties:p?t.properties:{},d=h?t.features[n].bbox:p?t.bbox:void 0,c=h?t.features[n].id:p?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,f,u,d,c)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,f,u,d,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],f,u,d,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function iT(t,e){V3t(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(L0(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var d=n.coordinates[u],c={type:l,coordinates:d};if(e(L0(c,i),r,u)===!1)return!1}})}function D6(t,e={}){const n=Nv(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),n.type){case"Polygon":return W3t(n,e);case"MultiPolygon":return Y3t(n,e);default:throw new Error("invalid poly")}}function W3t(t,e={}){const r=Nv(t).coordinates,i=e.properties?e.properties:t.type==="Feature"?t.properties:{};return d$e(r,i)}function Y3t(t,e={}){const r=Nv(t).coordinates,i=e.properties?e.properties:t.type==="Feature"?t.properties:{},s=[];return r.forEach(o=>{s.push(d$e(o,i))}),T6(s)}function d$e(t,e){return t.length>1?I3t(t,e):M3t(t[0],e)}function X3t(t,e,n={}){var r;const i=(r=n.ignoreSelfIntersections)!=null?r:!1;let s=!0;return iT(t,o=>{iT(e,a=>{if(s===!1)return!1;s=Z3t(o.geometry,a.geometry,i)})}),s}function Z3t(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return!eTt(t.coordinates,e.coordinates);case"LineString":return!TEe(e,t);case"Polygon":return!Nu(t,e)}break;case"LineString":switch(e.type){case"Point":return!TEe(t,e);case"LineString":return!K3t(t,e,n);case"Polygon":return!DEe(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!Nu(e,t);case"LineString":return!DEe(t,e,n);case"Polygon":return!J3t(e,t,n)}}return!1}function TEe(t,e){for(let n=0;n<t.coordinates.length-1;n++)if(Q3t(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function K3t(t,e,n){return O7(t,e,{ignoreSelfIntersections:n}).features.length>0}function DEe(t,e,n){for(const i of e.coordinates)if(Nu(i,t))return!0;return O7(e,D6(t),{ignoreSelfIntersections:n}).features.length>0}function J3t(t,e,n){for(const i of t.coordinates[0])if(Nu(i,e))return!0;for(const i of e.coordinates[0])if(Nu(i,t))return!0;return O7(D6(t),D6(e),{ignoreSelfIntersections:n}).features.length>0}function Q3t(t,e,n){const r=n[0]-t[0],i=n[1]-t[1],s=e[0]-t[0],o=e[1]-t[1];return r*o-i*s!==0?!1:Math.abs(s)>=Math.abs(o)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]}function eTt(t,e){return t[0]===e[0]&&t[1]===e[1]}function tTt(t,e,n={}){var r;const i=(r=n.ignoreSelfIntersections)!=null?r:!1;let s=!1;return iT(t,o=>{iT(e,a=>{if(s===!0)return!0;s=!X3t(o.geometry,a.geometry,{ignoreSelfIntersections:i})})}),s}var nTt=tTt;function sT(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return c$e(t,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}function oT(t,e,n={}){const r=a$e(t),i=$3t(e);for(let s=0;s<i.length-1;s++){let o=!1;if(n.ignoreEndVertices&&(s===0&&(o="start"),s===i.length-2&&(o="end"),s===0&&s+1===i.length-1&&(o="both")),rTt(i[s],i[s+1],r,o,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function rTt(t,e,n,r,i){const s=n[0],o=n[1],a=t[0],l=t[1],u=e[0],d=e[1],c=n[0]-a,f=n[1]-l,h=u-a,p=d-l,g=c*p-f*h;if(i!==null){if(Math.abs(g)>i)return!1}else if(g!==0)return!1;if(r){if(r==="start")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<=u:u<=s&&s<a:p>0?l<o&&o<=d:d<=o&&o<l;if(r==="end")return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<u:u<s&&s<=a:p>0?l<=o&&o<d:d<o&&o<=l;if(r==="both")return Math.abs(h)>=Math.abs(p)?h>0?a<s&&s<u:u<s&&s<a:p>0?l<o&&o<d:d<o&&o<l}else return Math.abs(h)>=Math.abs(p)?h>0?a<=s&&s<=u:u<=s&&s<=a:p>0?l<=o&&o<=d:d<=o&&o<=l;return!1}function iTt(t,e){var n=Nv(t),r=Nv(e),i=n.type,s=r.type;switch(i){case"Point":switch(s){case"MultiPoint":return sTt(n,r);case"LineString":return oT(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Nu(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+s+" geometry not supported")}case"MultiPoint":switch(s){case"MultiPoint":return oTt(n,r);case"LineString":return aTt(n,r);case"Polygon":case"MultiPolygon":return lTt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"LineString":return uTt(n,r);case"Polygon":case"MultiPolygon":return cTt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"Polygon":case"MultiPolygon":return dTt(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function sTt(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(h$e(e.coordinates[n],t.coordinates)){r=!0;break}return r}function oTt(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)h$e(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function aTt(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!oT(t.coordinates[r],e))return!1;n||(n=oT(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}function lTt(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(r=Nu(t.coordinates[i],e),!r){n=!1;break}r=Nu(t.coordinates[i],e,{ignoreBoundary:!0})}return n&&r}function uTt(t,e){for(var n=0;n<t.coordinates.length;n++)if(!oT(t.coordinates[n],e))return!1;return!0}function cTt(t,e){var n=sT(e),r=sT(t);if(!f$e(n,r))return!1;for(var i=!1,s=0;s<t.coordinates.length;s++){if(!Nu(t.coordinates[s],e))return!1;if(i||(i=Nu(t.coordinates[s],e,{ignoreBoundary:!0})),!i&&s<t.coordinates.length-1){var o=fTt(t.coordinates[s],t.coordinates[s+1]);i=Nu(o,e,{ignoreBoundary:!0})}}return i}function dTt(t,e){var n=sT(t),r=sT(e);if(!f$e(r,n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Nu(t.coordinates[0][i],e))return!1;return!0}function f$e(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function h$e(t,e){return t[0]===e[0]&&t[1]===e[1]}function fTt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var hTt=iTt;const pTt=(t,e)=>e?nTt(t,e):!0,mTt=(t,e)=>e?hTt(t,e):!0;function gTt(t,e="highlight",n="title"){const r=(s,o,a)=>{const l=o.split(".");let u;for(u=0;u<l.length-1;u++)s=s[l[u]];s[l[u]]=a},i=(s,o=[])=>{let a="",l=0;return o.forEach(u=>{const d=u[1]+1;a+=[s.substring(l,u[0]),`<mark class="${e}">`,s.substring(u[0],d),"</mark>"].join(""),l=d}),a+=s.substring(l),a};return t.filter(({matches:s})=>s&&s.length).map(({item:s,matches:o})=>{const a={...s};return o.forEach(l=>{l.key===n&&r(a,l.key,i(l.value,l.indices))}),a})}var JA={exports:{}},yTt=JA.exports,LEe;function bTt(){return LEe||(LEe=1,function(t,e){(function(n,r){t.exports=r()})(yTt,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",d="week",c="month",f="quarter",h="year",p="date",g="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var $=["th","st","nd","rd"],U=I%100;return"["+I+($[(U-20)%10]||$[U]||$[0])+"]"}},w=function(I,$,U){var q=String(I);return!q||q.length>=$?I:""+Array($+1-q.length).join(U)+I},E={s:w,z:function(I){var $=-I.utcOffset(),U=Math.abs($),q=Math.floor(U/60),Y=U%60;return($<=0?"+":"-")+w(q,2,"0")+":"+w(Y,2,"0")},m:function I($,U){if($.date()<U.date())return-I(U,$);var q=12*(U.year()-$.year())+(U.month()-$.month()),Y=$.clone().add(q,c),X=U-Y<0,te=$.clone().add(q+(X?-1:1),c);return+(-(q+(U-Y)/(X?Y-te:te-Y))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:c,y:h,w:d,d:u,D:p,h:l,m:a,s:o,ms:s,Q:f}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},S="en",T={};T[S]=v;var D="$isDayjsObject",k=function(I){return I instanceof K||!(!I||!I[D])},R=function I($,U,q){var Y;if(!$)return S;if(typeof $=="string"){var X=$.toLowerCase();T[X]&&(Y=X),U&&(T[X]=U,Y=X);var te=$.split("-");if(!Y&&te.length>1)return I(te[0])}else{var le=$.name;T[le]=$,Y=le}return!q&&Y&&(S=Y),Y||!q&&S},O=function(I,$){if(k(I))return I.clone();var U=typeof $=="object"?$:{};return U.date=I,U.args=arguments,new K(U)},B=E;B.l=R,B.i=k,B.w=function(I,$){return O(I,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var K=function(){function I(U){this.$L=R(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[D]=!0}var $=I.prototype;return $.parse=function(U){this.$d=function(q){var Y=q.date,X=q.utc;if(Y===null)return new Date(NaN);if(B.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var te=Y.match(b);if(te){var le=te[2]-1||0,ee=(te[7]||"0").substring(0,3);return X?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,ee)}}return new Date(Y)}(U),this.init()},$.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},$.$utils=function(){return B},$.isValid=function(){return this.$d.toString()!==g},$.isSame=function(U,q){var Y=O(U);return this.startOf(q)<=Y&&Y<=this.endOf(q)},$.isAfter=function(U,q){return O(U)<this.startOf(q)},$.isBefore=function(U,q){return this.endOf(q)<O(U)},$.$g=function(U,q,Y){return B.u(U)?this[q]:this.set(Y,U)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(U,q){var Y=this,X=!!B.u(q)||q,te=B.p(U),le=function(we,$e){var qe=B.w(Y.$u?Date.UTC(Y.$y,$e,we):new Date(Y.$y,$e,we),Y);return X?qe:qe.endOf(u)},ee=function(we,$e){return B.w(Y.toDate()[we].apply(Y.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice($e)),Y)},z=this.$W,he=this.$M,fe=this.$D,ze="set"+(this.$u?"UTC":"");switch(te){case h:return X?le(1,0):le(31,11);case c:return X?le(1,he):le(0,he+1);case d:var He=this.$locale().weekStart||0,je=(z<He?z+7:z)-He;return le(X?fe-je:fe+(6-je),he);case u:case p:return ee(ze+"Hours",0);case l:return ee(ze+"Minutes",1);case a:return ee(ze+"Seconds",2);case o:return ee(ze+"Milliseconds",3);default:return this.clone()}},$.endOf=function(U){return this.startOf(U,!1)},$.$set=function(U,q){var Y,X=B.p(U),te="set"+(this.$u?"UTC":""),le=(Y={},Y[u]=te+"Date",Y[p]=te+"Date",Y[c]=te+"Month",Y[h]=te+"FullYear",Y[l]=te+"Hours",Y[a]=te+"Minutes",Y[o]=te+"Seconds",Y[s]=te+"Milliseconds",Y)[X],ee=X===u?this.$D+(q-this.$W):q;if(X===c||X===h){var z=this.clone().set(p,1);z.$d[le](ee),z.init(),this.$d=z.set(p,Math.min(this.$D,z.daysInMonth())).$d}else le&&this.$d[le](ee);return this.init(),this},$.set=function(U,q){return this.clone().$set(U,q)},$.get=function(U){return this[B.p(U)]()},$.add=function(U,q){var Y,X=this;U=Number(U);var te=B.p(q),le=function(he){var fe=O(X);return B.w(fe.date(fe.date()+Math.round(he*U)),X)};if(te===c)return this.set(c,this.$M+U);if(te===h)return this.set(h,this.$y+U);if(te===u)return le(1);if(te===d)return le(7);var ee=(Y={},Y[a]=r,Y[l]=i,Y[o]=n,Y)[te]||1,z=this.$d.getTime()+U*ee;return B.w(z,this)},$.subtract=function(U,q){return this.add(-1*U,q)},$.format=function(U){var q=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||g;var X=U||"YYYY-MM-DDTHH:mm:ssZ",te=B.z(this),le=this.$H,ee=this.$m,z=this.$M,he=Y.weekdays,fe=Y.months,ze=Y.meridiem,He=function($e,qe,Pe,St){return $e&&($e[qe]||$e(q,X))||Pe[qe].slice(0,St)},je=function($e){return B.s(le%12||12,$e,"0")},we=ze||function($e,qe,Pe){var St=$e<12?"AM":"PM";return Pe?St.toLowerCase():St};return X.replace(y,function($e,qe){return qe||function(Pe){switch(Pe){case"YY":return String(q.$y).slice(-2);case"YYYY":return B.s(q.$y,4,"0");case"M":return z+1;case"MM":return B.s(z+1,2,"0");case"MMM":return He(Y.monthsShort,z,fe,3);case"MMMM":return He(fe,z);case"D":return q.$D;case"DD":return B.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return He(Y.weekdaysMin,q.$W,he,2);case"ddd":return He(Y.weekdaysShort,q.$W,he,3);case"dddd":return he[q.$W];case"H":return String(le);case"HH":return B.s(le,2,"0");case"h":return je(1);case"hh":return je(2);case"a":return we(le,ee,!0);case"A":return we(le,ee,!1);case"m":return String(ee);case"mm":return B.s(ee,2,"0");case"s":return String(q.$s);case"ss":return B.s(q.$s,2,"0");case"SSS":return B.s(q.$ms,3,"0");case"Z":return te}return null}($e)||te.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(U,q,Y){var X,te=this,le=B.p(q),ee=O(U),z=(ee.utcOffset()-this.utcOffset())*r,he=this-ee,fe=function(){return B.m(te,ee)};switch(le){case h:X=fe()/12;break;case c:X=fe();break;case f:X=fe()/3;break;case d:X=(he-z)/6048e5;break;case u:X=(he-z)/864e5;break;case l:X=he/i;break;case a:X=he/r;break;case o:X=he/n;break;default:X=he}return Y?X:B.a(X)},$.daysInMonth=function(){return this.endOf(c).$D},$.$locale=function(){return T[this.$L]},$.locale=function(U,q){if(!U)return this.$L;var Y=this.clone(),X=R(U,q,!0);return X&&(Y.$L=X),Y},$.clone=function(){return B.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},I}(),L=K.prototype;return O.prototype=L,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",c],["$y",h],["$D",p]].forEach(function(I){L[I[1]]=function($){return this.$g($,I[0],I[1])}}),O.extend=function(I,$){return I.$i||(I($,K,O),I.$i=!0),O},O.locale=R,O.isDayjs=k,O.unix=function(I){return O(1e3*I)},O.en=T[S],O.Ls=T,O.p={},O})}(JA)),JA.exports}var vTt=bTt();const Lc=aa(vTt);let p$e;const xTt=(t,e)=>{p$e=new Dm(t,{threshold:.4,distance:50,includeMatches:!0,useExtendedSearch:!0,...e})},wTt=async(t,e,n)=>{const r=Object.entries(e).filter(([,a])=>a.type==="text"||a.type==="select"||a.type==="multiselect").reduce((a,[l,u])=>{const d="$or",c=[],f=(h,p)=>{const g={};u.type==="text"?g[h]=`${p}`:g[l]=`="${h}"`,c.push(g)};return Object.entries(u.state).filter(([,h])=>h).forEach(([h,p])=>f(h,p)),c.length>0&&a.push({[d]:c}),a},[]);let i;if(!(r.length>0)&&n.matchAllWhenEmpty!==!1)i=t;else{const a={$and:[...r]},l=p$e.search(a);i=n.enableHighlighting?gTt(l,"highlight",n.titleProperty):l.map(u=>u.item)}const s=Object.entries(e).filter(([,a])=>a.type==="range").reduce((a,[l,u])=>(a[l]={min:u.state.min,max:u.state.max,format:u.format},a),{});if(Object.keys(s).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const[d,c]of Object.entries(s)){const f=p=>c.format==="date"?Lc(p).unix():p,h=P2(d,i[l]);h?Array.isArray(h)?u[d]=s[d].min<=f(h[1])&&f(h[0])<=s[d].max:f(h)>=s[d].min&&f(h)<=s[d].max?u[d]=!0:u[d]=!1:u[d]=!0}Object.values(u).every(d=>!!d)&&a.push(i[l])}i=[...a]}const o=Object.entries(e).filter(([,a])=>a.type==="spatial").reduce((a,[l,u])=>(a[l]={geometry:u.state.geometry,mode:u.state.mode},a),{});if(Object.values(o).map(a=>a.geometry).filter(a=>!!a).length>0){const a=[];for(let l=0;l<i.length;l++){const u={};for(const d of Object.keys(o)){const c=P2(d,i[l]),f=o[d].mode||"within";c&&(f==="within"?mTt(c,o[d].geometry):pTt(c,o[d].geometry))?u[d]=!0:u[d]=!1}Object.values(u).every(d=>!!d)&&a.push(i[l])}i=[...a]}return i};function _Tt(t,e){return[{type:"Vector",properties:{id:"draw"},source:{type:"Vector",...t&&{format:"GeoJSON"},...t&&{url:e}},zIndex:1,interactions:[{type:"draw",options:{id:"drawInteraction",type:"Box",modify:!0}}]},{type:"Tile",source:{type:"XYZ",url:"https://tiles.maps.eox.at/wmts/1.0.0/osm_3857/default/g/{z}/{y}/{x}.jpg",attribution:"{ OSM: Data &copy; OpenStreetMap contributors and others, Rendering &copy; EOX }"}}]}function IR(t){if(!t.dirty)return null;switch(t.type){case"multiselect":for(const n in t.state)t.state.hasOwnProperty(n)&&(t.state[n]=!1);break;case"range":t.state.min=t.min,t.state.max=t.max;break;case"select":for(const n in t.state)t.state.hasOwnProperty(n)&&(t.state[n]=!1);break;case"spatial":t.state.geometry=void 0;break;case"text":t.keys.forEach(n=>{t.state[n]=void 0});break}return delete t.stringifiedState,delete t.dirty,t}function REe(t,e){return t*2+e}function ETt(t){return Object.keys(t).map(e=>({title:et`${t[e].title||t[e].key}:
        <strong>${t[e].stringifiedState}</strong>`,key:e})).filter(e=>t[e.key].dirty)}function L6(t){return Object.values(t).map(e=>e.dirty).filter(e=>e).length>0}async function CTt(t,e,n){return await(await fetch(`${n.externalFilter(t,e)}`)).json()}function m$e(t,e,n){let r;if(t.detail?r=t.detail.target:r=t.target,r!=null&&r.classList.contains("details-filter")){if(!r.open||e!=null&&e.expandMultipleFilters)return;n.shadowRoot.querySelectorAll("eox-itemfilter-expandcontainer").forEach(i=>{const s=i.shadowRoot.querySelector(".details-filter");s&&s!==r&&s.removeAttribute("open")})}else{if(!(r!=null&&r.open)||e!=null&&e.expandMultipleResults)return;n.querySelectorAll("details").forEach(i=>{i!==r&&i.removeAttribute("open")})}}function P2(t,e){return t!=null&&t.includes(".")?t.split(".").reduce((n,r)=>n&&n[r],e):e[t]}var Gi,g$e,R6,F6,y$e,O6,M6,b$e,I6,v$e,x$e;class STt extends Zr{constructor(){super();gn(this,Gi);this.filterProperties={},this.unstyled=!1,this.inlineMode=!1,this.filters={},this._handleClickOutside=yn(this,Gi,y$e).bind(this),this._handleKeyDown=yn(this,Gi,O6).bind(this)}static get properties(){return{filterProperties:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},unstyled:{type:Boolean},filters:{state:!0,type:Object}}}set showDropdown(n){this.renderRoot.querySelector("[popover]").togglePopover(n)}get showDropdown(){var n;return(n=this.renderRoot.querySelector("[popover]"))==null?void 0:n.matches(":popover-open")}connectedCallback(){super.connectedCallback(),this.inlineMode&&yn(this,Gi,R6).call(this)}disconnectedCallback(){this.inlineMode&&yn(this,Gi,F6).call(this),super.disconnectedCallback()}_overlayCleanup(){}updateInline(){this.inlineMode&&this.requestUpdate()}updated(n){n.has("inlineMode")&&(this.inlineMode?yn(this,Gi,R6).call(this):yn(this,Gi,F6).call(this))}render(){return et`
      <style>
        ${!this.unstyled&&lC}
      </style>
      ${this.inlineMode?et`
            <div
              class="inline-container-wrapper"
              @click="${yn(this,Gi,M6)}"
            >
              <div class="inline-container" part="container">
                <div class="chip-container">
                  <div class="chip-wrapper">
                    <eox-itemfilter-chips
                      .items=${ETt(this.filters)}
                      .controller=${{remove:n=>yn(this,Gi,v$e).call(this,n)}}
                    >
                    </eox-itemfilter-chips>
                  </div>

                  ${qn(L6(this.filters),()=>et`
                      <span
                        class="chip-close"
                        @click=${()=>this.dispatchEvent(new CustomEvent("reset"))}
                      ></span>
                    `)}
                </div>
                <div
                  class="input-container ${L6(this.filters)?"dirty-filter-input":""}"
                >
                  <input
                    autocomplete="off"
                    id="eox-itemfilter-input-search"
                    type="text"
                    @click="${yn(this,Gi,M6)}"
                    @focus="${yn(this,Gi,b$e)}"
                    @input="${yn(this,Gi,x$e)}"
                    placeholder="Search and add filter"
                    aria-haspopup="true"
                    aria-expanded="${this.showDropdown}"
                  />
                </div>
              </div>
              <div popover="manual">
                <div
                  class="inline-content"
                  slot="content"
                  @keydown="${yn(this,Gi,O6)}"
                  @click="${yn(this,Gi,I6)}"
                  @focus="${yn(this,Gi,I6)}"
                >
                  <slot name="section"></slot>
                </div>
              </div>
            </div>
          `:et`<slot name="section"></slot>`}
    `}}Gi=new WeakSet,g$e=function(){setTimeout(()=>this._overlayCleanup=A3t(this))},R6=function(){document.addEventListener("click",this._handleClickOutside),document.addEventListener("focusout",this._handleClickOutside),document.addEventListener("keydown",this._handleKeyDown),yn(this,Gi,g$e).call(this)},F6=function(){document.removeEventListener("click",this._handleClickOutside),document.removeEventListener("focusout",this._handleClickOutside),document.removeEventListener("keydown",this._handleKeyDown),this._overlayCleanup()},y$e=function(n){R3t(n,this)},O6=function(n){L3t(n,this)},M6=function(n){D3t(n,this)},b$e=function(){T3t(this)},I6=function(n){k3t(n,this)},v$e=function(n){t3t(n,this)},x$e=function(n){X6e(n,this)};customElements.define("eox-itemfilter-container",STt);function ATt(t){const e=t.renderRoot.querySelector("input[type='text']");e.value="",IR(t.filterObject),t.requestUpdate()}function kTt(t){const e=t.renderRoot.querySelector("input[type='text']");t.isValid=e.checkValidity(),t.filterObject.keys.forEach(n=>{t.filterObject.state[n]=e.value}),t.filterObject.dirty=!0,t.filterObject.stringifiedState=e.value,t.dispatchEvent(new CustomEvent("filter")),e.value===""&&t.reset()}const $6="ddd, D MMM YYYY HH:mm:ss";function TTt(t){if(t.filterObject=IR(t.filterObject),t.filterObject){const e=t.querySelector("tc-range-slider"),n=t.filterObject.min,r=t.filterObject.max;e.value1!==n&&(e.value1=n),e.value2!==r&&(e.value2=r)}t.requestUpdate()}function DTt(t,e){const[n,r]=t.detail.values;(n!==e.filterObject.state.min||r!==e.filterObject.state.max)&&([e.filterObject.state.min,e.filterObject.state.max]=[n,r],e.filterObject.dirty=!0),e.filterObject.dirty&&(e.filterObject.stringifiedState=e.filterObject.format==="date"?`${Lc.unix(n).format($6)} - ${Lc.unix(r).format($6)}`:`${n} - ${r}`),e.dispatchEvent(new CustomEvent("filter")),n===e.filterObject.min&&r===e.filterObject.max?e.reset():e.requestUpdate()}function LTt(t,e,n){const r=n.filterObject.format==="date",i=n.filterObject.state[t],s=r?Lc.unix(i).format($6):i;return et`<div class="range-${e}">${s}</div>`}function RTt(t){FTt(-1,t),IR(t.filterObject),t.requestUpdate()}function FTt(t,e){e.selectedItems=[],M7(e),_$e(e)}function w$e(t,e){const n=e.selectedItems.indexOf(t);n>=0?e.selectedItems=e.selectedItems.filter((r,i)=>i!==n):e.type==="multiselect"?e.selectedItems=[...e.selectedItems,t]:(e.selectedItems=[t],e.showSuggestions=!1),M7(e),_$e(e)}function OTt(t,e){e.query=t.target.value,e.showSuggestions=!0}function MTt(t,e){switch(t.key){case"ArrowDown":e.highlightedIndex=Math.min(e.highlightedIndex+1,e.filteredSuggestions.length-1);break;case"ArrowUp":e.highlightedIndex=Math.max(e.highlightedIndex-1,0);break;case"Enter":e.highlightedIndex>=0&&w$e(e.filteredSuggestions[e.highlightedIndex],e);break;case"Escape":e.showSuggestions=!1;break}}function ITt(t,e){(t.has("suggestions")||t.has("query"))&&M7(e)}function $Tt(t,e){var r;const n=((r=t.filterObject)==null?void 0:r.sort)||((i,s)=>i.localeCompare(s));return e.sort(n).map(i=>i)}function M7(t){var n,r,i;let e;t.query&&(e=new Dm(t.suggestions,{threshold:.4}).search(t.query).map(o=>o.item)),t.filteredSuggestions=$Tt(t,e||t.suggestions),(n=t.filterObject)!=null&&n.filterKeys&&(t.filteredSuggestions=(r=t.filterObject)==null?void 0:r.filterKeys.map(s=>`${s}`),t.filterObject.state=(i=t.filterObject)==null?void 0:i.filterKeys.map(s=>`${s}`).reduce((s,o)=>(o in s||(s[o]=void 0),s),t.filterObject.state)),t.highlightedIndex=-1}function _$e(t){Object.keys(t.filterObject.state).forEach(e=>{t.filterObject.state[e]=t.selectedItems.includes(e)}),t.filterObject.stringifiedState=Object.keys(t.filterObject.state).filter(e=>t.filterObject.state[e]).join(", ")||"",t.filterObject.dirty=t.filterObject.stringifiedState.length>0,t.dispatchEvent(new CustomEvent("filter")),t.requestUpdate()}function PTt(t){IR(t.filterObject),t.renderRoot.querySelector("eox-itemfilter-spatial-filter").reset(),t.requestUpdate()}function NTt(t){t.renderRoot.querySelector("#eox-map").innerHTML="",E$e(t)}function BTt(t,e){e.filterObject.state.mode=t;const n=new CustomEvent("filter",{detail:{[e.filterObject.key]:{}}});e.dispatchEvent(n)}function E$e(t){const e=t.renderRoot.querySelector("#eox-map");e.innerHTML===""&&(e.innerHTML='<eox-map part="map" style="height: 400px"></eox-map>');const n=t.geometry&&zTt(t.geometry),r=_Tt(t.geometry,n);t.eoxMap=t.renderRoot.querySelector("eox-map"),setTimeout(()=>{t.eoxMap.layers=r;const i=s=>{const o=new CustomEvent("filter",{detail:{geometry:{type:"Polygon",coordinates:s.getGeometry().clone().transform("EPSG:3857","EPSG:4326").getCoordinates()}}});t.dispatchEvent(o)};t.eoxMap.interactions.drawInteraction.on("drawend",s=>{i(s.feature),t.eoxMap.removeInteraction("drawInteraction")}),t.eoxMap.interactions.drawInteraction_modify.on("modifyend",s=>{i(s.features.getArray()[0])})},1e3)}function zTt(t){return`data:text/json,${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",properties:null,geometry:t}]}))}`}var NT;class jTt extends Zr{constructor(){super();gn(this,NT,()=>{kTt(this)});tn(this,"debouncedInputHandler",Q0(Gt(this,NT),500,{leading:!0}));this.filterObject={},this.unstyled=!1,this.tabIndex=0,this.unstyled=!1}static get properties(){return{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number},unstyled:{type:Boolean},isValid:{state:!0,type:Boolean}}}reset(){ATt(this)}createRenderRoot(){return this}render(){return qn(this.filterObject,()=>{var n;return et`
        <style></style>
        <div class="text-container">
          <div class="text-container-wrapper">
            <input
              type="text"
              placeholder=${this.filterObject.placeholder}
              data-cy="search"
              class="text-input"
              part="input-search"
              value="${Object.values(this.filterObject.state)[0]}"
              tabindex=${this.tabIndex}
              pattern="${((n=this.filterObject.validation)==null?void 0:n.pattern)||".*"}"
              @input="${this.debouncedInputHandler}"
              @click=${r=>r.stopPropagation()}
            />
          </div>
        </div>
        <small class="error-validation"
          >${this.filterObject.validation&&this.isValid===!1?this.filterObject.validation.message:""}</small
        >
      `})}}NT=new WeakMap;customElements.define("eox-itemfilter-text",jTt);function UTt(t,e,n){return t.filter(r=>{const i=r[n.config.aggregateResults];let s;return n.filters[n.config.aggregateResults]&&(s=Object.keys(n.filters[n.config.aggregateResults]).filter(a=>n.filters[n.config.aggregateResults].state[a])),(s!=null&&s.length?s.includes(e):!0)&&Array.isArray(i)?i.includes(e):i===e})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const FEe=(t,e,n)=>{const r=new Map;for(let i=e;i<=n;i++)r.set(t[i],i);return r},C$e=oE(class extends pD{constructor(t){if(super(t),t.type!==cp.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,n){let r;n===void 0?n=e:e!==void 0&&(r=e);const i=[],s=[];let o=0;for(const a of t)i[o]=r?r(a,o):o,s[o]=n(a,o),o++;return{values:s,keys:i}}render(t,e,n){return this.dt(t,e,n).values}update(t,[e,n,r]){const i=wze(t),{values:s,keys:o}=this.dt(e,n,r);if(!Array.isArray(i))return this.ut=o,s;const a=this.ut??(this.ut=[]),l=[];let u,d,c=0,f=i.length-1,h=0,p=s.length-1;for(;c<=f&&h<=p;)if(i[c]===null)c++;else if(i[f]===null)f--;else if(a[c]===o[h])l[h]=ag(i[c],s[h]),c++,h++;else if(a[f]===o[p])l[p]=ag(i[f],s[p]),f--,p--;else if(a[c]===o[p])l[p]=ag(i[c],s[p]),uw(t,l[p+1],i[c]),c++,p--;else if(a[f]===o[h])l[h]=ag(i[f],s[h]),uw(t,i[c],i[f]),f--,h++;else if(u===void 0&&(u=FEe(o,h,p),d=FEe(a,c,f)),u.has(a[c]))if(u.has(a[f])){const g=d.get(o[h]),b=g!==void 0?i[g]:null;if(b===null){const y=uw(t,i[c]);ag(y,s[h]),l[h]=y}else l[h]=ag(b,s[h]),uw(t,i[c],b),i[g]=null;h++}else iF(i[f]),f--;else iF(i[c]),c++;for(;h<=p;){const g=uw(t,l[p+1]);ag(g,s[h]),l[h++]=g}for(;c<=f;){const g=i[c++];g!==null&&iF(g)}return this.ut=o,d$(t,l),gb}});function qTt(t,e){return et`
    <details
      class="details-results"
      @toggle=${e.handleAccordion}
      ?open=${e.config.expandResults||ni}
    >
      <summary>
        <span class="title">
          ${t}
          <span class="count"
            >${e.aggregateResults(e.results,t).length}</span
          >
        </span>
      </summary>
      <div>
        ${S$e(t,e)}
      </div>
    </details>
  `}function S$e(t,e){const n=e.results,r=t?e.aggregateResults(n,t):n,i=e.config,s=o=>{var a;return((a=e.selectedResult)==null?void 0:a[i.idProperty])===o[i.idProperty]?"highlighted":ni};return et`
    <ul class=${e.resultType}>
      ${C$e(r,o=>o.id,o=>et`
          <li
            class=${s(o)}
            @click=${()=>{e.selectedResult===o?e.selectedResult=null:e.selectedResult=o,e.dispatchEvent(new CustomEvent("result",{detail:e.selectedResult}))}}
          >
            <span id="${o.id}">
              ${qn(i.subTitleProperty||i.imageProperty,()=>et`
                  ${P2(i.imageProperty,o)?et`
                        <img
                          class="image"
                          src="${P2(i.imageProperty,o)}"
                        />
                      `:ni}
                  <div class="title-container">
                    <span class="title"
                      >${Dc(o[i.titleProperty])}</span
                    >
                    <span class="subtitle"
                      >${Dc(o[i.subTitleProperty])}</span
                    >
                  </div>
                `,()=>et`
                  <span class="title"
                    >${Dc(o[i.titleProperty])}</span
                  >
                `)}
            </span>
          </li>
        `)}
    </ul>
  `}var F0,P6,A$e;class HTt extends Zr{constructor(){super();gn(this,F0);this.config=null,this.filters={},this.resultAggregation=[],this.selectedResult=null,this.resultType="list"}static get properties(){return{config:{attribute:!1,type:Object},results:{state:!0,type:Object},filters:{state:!0,type:Object},resultAggregation:{attribute:!1,type:Array},selectedResult:{state:!0,type:Object},resultType:{attribute:"result-type",type:String}}}aggregateResults(n,r){return UTt(n,r,this)}createRenderRoot(){return this}handleAccordion(n){m$e(n,this.config,this)}render(){return et`
      <section id="section-results">
        <div slot="resultstitle"></div>
        <div id="container-results" class="scroll">
          ${qn(this.results.length<1,()=>et`<small class="no-results">No matching items</small>`,()=>ni)}
          <ul id="results" part="results">
            ${qn(this.config.aggregateResults,()=>lu(this.resultAggregation.filter(n=>this.aggregateResults(this.results,n).length),n=>et`${qn(this.aggregateResults(this.results,n).length===1&&this.config.autoSpreadSingle,()=>et`<div style="margin-left: -8px">
                          ${yn(this,F0,P6).call(this,n)}
                        </div>`,()=>yn(this,F0,A$e).call(this,n))}`),()=>yn(this,F0,P6).call(this))}
          </ul>
        </div>
      </section>
    `}}F0=new WeakSet,P6=function(n){return S$e(n,this)},A$e=function(n){return qTt(n,this)};customElements.define("eox-itemfilter-results",HTt);const GTt=`input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}`,VTt=`input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}`;var hm,T$e,D$e,L$e;class k$e extends Zr{constructor(){super();gn(this,hm);tn(this,"debouncedInputHandler",Q0(yn(this,hm,L$e),500,{leading:!0}));this.filterObject={},this.suggestions=[],this.selectedItems=[],this.query="",this.showSuggestions=!1,this.highlightedIndex=-1,this.filteredSuggestions=[],this.type="select",this.unstyled=!1,this.tabIndex=0,this.inlineMode=!1}updated(n){ITt(n,this)}reset(){RTt(this)}firstUpdated(){this.filterObject.state&&(this.selectedItems=Object.keys(this.filterObject.state).map(n=>this.filterObject.state[n]?n:null).filter(n=>!!n),this.filterObject.stringifiedState=this.selectedItems.join(", ")||"",this.requestUpdate())}render(){const n=this.type.includes("multi")?"checkbox":"radio",r=this.filteredSuggestions.length>5?"select-overflow":ni;return et`
      <style>
        ${!this.unstyled&&lC}
        ${!this.unstyled&&GTt}
        ${!this.unstyled&&VTt}
      </style>
      ${qn(this.suggestions.length>10,()=>et`<div class="autocomplete-container">
            <div class="autocomplete-container-wrapper">
              <input
                autocomplete="off"
                tabindex=${this.tabIndex}
                class="autocomplete-input"
                type="text"
                .value=${this.query}
                placeholder="${this.filterObject.placeholder||""}"
                @input=${yn(this,hm,T$e)}
                @keydown=${yn(this,hm,D$e)}
                @blur=${()=>this.showSuggestions=!1}
                @focus=${()=>this.showSuggestions=!0}
              />
            </div>
          </div>`)}
      <div class="select-container ${r}">
        <ul class="${this.type}">
          ${this.filteredSuggestions.map(i=>et`
              <li
                data-identifier="${i.toString().toLowerCase()}"
                data-title="${i}"
              >
                <label>
                  <input
                    type="${n}"
                    name=${i}
                    .checked=${this.selectedItems.includes(i)}
                    @change=${()=>this.debouncedInputHandler(i)}
                    @keydown=${s=>{s.key===" "&&this.inlineMode&&this.debouncedInputHandler(i)}}
                    tabindex=${this.tabIndex+1}
                  />
                  <span class="title">${i}</span>
                </label>
              </li>
            `)}
        </ul>
      </div>
    `}}hm=new WeakSet,T$e=function(n){OTt(n,this)},D$e=function(n){MTt(n,this)},L$e=function(n){w$e(n,this)},tn(k$e,"properties",{filterObject:{attribute:!1,type:Object},suggestions:{attribute:!1,type:Array},selectedItems:{state:!0,type:Array},query:{state:!0,type:String},showSuggestions:{state:!0,type:Boolean},highlightedIndex:{state:!0,type:Number},filteredSuggestions:{state:!0,type:Array},type:{attribute:!0,type:String},unstyled:{type:Boolean},tabIndex:{attribute:!1,type:Number},inlineMode:{attribute:"inline-mode",type:Boolean}});customElements.define("eox-itemfilter-select",k$e);(()=>{var t=Object.defineProperty,e=Math.pow,n=(ge,Le,it)=>Le in ge?t(ge,Le,{enumerable:!0,configurable:!0,writable:!0,value:it}):ge[Le]=it,r=(ge,Le,it)=>(n(ge,typeof Le!="symbol"?Le+"":Le,it),it),i=(ge,Le)=>` ${Le&&Le.length>0?Le.map(it=>`<link rel="stylesheet" href="${it}" />`).join(""):""} <style> ${ge} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,s=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",o="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",u="range-dragging",d="data",c="min",f="max",h="step",p="round",g="type",b="theme",y="rtl",v="btt",w="disabled",E="keyboard-disabled",S="mousewheel-disabled",T="slider-width",D="slider-height",k="slider-radius",R="slider-bg",O="slider-bg-hover",B="slider-bg-fill",K="pointer-width",L="pointer-height",I="pointer-radius",$="pointer-bg",U="pointer-bg-hover",q="pointer-bg-focus",Y="pointer-shadow",X="pointer-shadow-hover",te="pointer-shadow-focus",le="pointer-border",ee="pointer-border-hover",z="pointer-border-focus",he="animate-onclick",fe="css-links",ze="vertical",He="horizontal",je=(ge,Le,it,Ke,Et)=>{let an=Le-ge;return an===0?it:(Ke-it)*(Et-ge)/an+it},we=ge=>!isNaN(parseFloat(ge))&&isFinite(ge),$e=(ge,Le)=>we(ge)?Number(ge):Le,qe=(ge,Le)=>Le===0?0:Math.round(ge/Le)*Le,Pe=(ge,Le=1/0)=>{if(Le===1/0)return ge;let it=e(10,Le);return Math.round(ge*it)/it},St=ge=>ge==null?!1:typeof ge=="boolean"?ge:ge.trim().toLowerCase()==="true",ht=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:Le}}))},nn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:Le}}))},Vt=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:Le}}))},Mn=(ge,Le)=>{ge.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:Le}}))},Ze=(ge,Le)=>{if(!Le||Le.length<=0)return;let it=Le.map(Et=>we(Et)?$e(Et,Et):Et),Ke={values:it||[]};Ke.value=it[0],Ke.value0=it[0],Ke.value1=it[0];for(let Et=1;Et<it.length;Et++)Ke[`value${Et+1}`]=it[Et];ge.dispatchEvent(new CustomEvent("change",{detail:Ke}))},pe=(ge,Le,it)=>{let Ke=0,Et,an,en,wt,Qe=!1,hn=(pt,Zn,ri,Ar,Fr,rr)=>{let qt=Ke;ri!==void 0&&pt>ri&&(pt=ri),Zn!==void 0&&pt<Zn&&(pt=Zn),Ke=pt;let xi=Ke;return(Ar===ze&&rr||Ar===He&&Fr)&&(xi=100-xi),Ar===ze?Le.style.top=`${xi}%`:Le.style.left=`${xi}%`,qt!==Ke},Sn=pt=>pt===Le||Le.contains(pt),zt=(pt,Zn,ri,Ar)=>{Et=pt,an=Zn,en=ri,wt=Ar},jt=pt=>{Qe=pt,Le.classList.toggle("disabled",Qe),Qe?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Sr=(pt,Zn)=>{Zn==null?Le.removeAttribute(pt):Le.setAttribute(pt,Zn)},di=pt=>Le.getAttribute(pt),Zt=pt=>{if(!Qe){switch(pt.key){case"ArrowLeft":{pt.preventDefault(),typeof Et=="function"&&Et(it);break}case"ArrowRight":{pt.preventDefault(),typeof an=="function"&&an(it);break}case"ArrowUp":{pt.preventDefault(),typeof en=="function"&&en(it);break}case"ArrowDown":{pt.preventDefault(),typeof wt=="function"&&wt(it);break}}Mn(ge,pt)}},Xe=()=>{Qe||ht(ge,Le)};return Le.className=`pointer pointer-${it}`,Le.addEventListener("keydown",Zt),Le.addEventListener("click",Xe),{$pointer:Le,get percent(){return Ke},get disabled(){return Qe},set disabled(pt){jt(pt)},updatePosition:hn,isClicked:Sn,setCallbacks:zt,setAttr:Sr,getAttr:di,destroy:()=>{Le.removeEventListener("keydown",Zt),Le.removeEventListener("click",Xe),Le.remove()}}},ie=ge=>{if(ge==null)return;if(Array.isArray(ge))return ge;if(ge.trim()==="")return;let Le=ge.split(","),it=[],Ke=!0;for(let Et=0;Et<Le.length;Et++){let an=Le[Et].trim();an!==""&&(it.push(an),we(an)||(Ke=!1))}return Ke?it.map(Et=>Number(Et)):it},oe=(ge,Le)=>Le?Le.findIndex(it=>it===ge||it.toString().trim()===ge.toString().trim()):-1,ve=ge=>({updatePosition:(Le,it,Ke,Et)=>{if(it.length<=0)return;let an=it.length===1,en=it[0],wt=it[it.length-1];Le===ze?(ge.style.removeProperty("width"),ge.style.removeProperty("right"),ge.style.removeProperty("left"),an?ge.style.height=`${en}%`:ge.style.height=`${Math.abs(en-wt)}%`,Et?(ge.style.bottom="0%",an?ge.style.top="auto":ge.style.top=`${Math.min(100-wt,100-en)}%`):(ge.style.bottom="auto",an?ge.style.top="0%":ge.style.top=`${Math.min(en,wt)}%`)):(ge.style.removeProperty("height"),ge.style.removeProperty("top"),ge.style.removeProperty("bottom"),an?ge.style.width=`${en}%`:ge.style.width=`${Math.abs(en-wt)}%`,Ke?(ge.style.right="0%",an?ge.style.left="auto":ge.style.left=`${Math.min(100-wt,100-en)}%`):(ge.style.right="auto",an?ge.style.left="0%":ge.style.left=`${Math.min(en,wt)}%`))}}),F="--animate-onclick",H="--width",J="--height",re="--panel-bg-border-radius",ye="--panel-bg",xe="--panel-bg-hover",Re="--panel-bg-fill",P="--pointer-width",Q="--pointer-height",se="--pointer-border-radius",ae="--pointer-bg",ke="--pointer-bg-hover",Ae="--pointer-bg-focus",Ee="--pointer-shadow",De="--pointer-shadow-hover",Oe="--pointer-shadow-focus",We="--pointer-border",tt="--pointer-border-hover",ft="--pointer-border-focus",Kt=(ge,Le,it)=>{let Ke=new Map;for(let Et of ge.attributes){let an=Et.nodeName.trim().toLowerCase();if(!Le.test(an))continue;let en=an.replace(/\D/g,"").trim(),wt=en===""||en==="0"||en==="1"?0:$e(en,0)-1,Qe=it&&typeof it=="function"?it(Et.value):Et.value;Ke.set(wt,Qe)}return Ke},xt=ge=>{if(!ge)return null;let Le=ge.getAttribute(fe);if(!Le)return null;let it=Le.split(";"),Ke=[];for(let Et of it)Et.trim()!==""&&Ke.push(Et.trim());return Ke},Qt=[[H,T,"sliderWidth",null],[J,D,"sliderHeight",null],[re,k,"sliderRadius",null],[ye,R,"sliderBg",null],[xe,O,"sliderBgHover",null],[Re,B,"sliderBgFill",null],[P,K,"pointer#Width",/^pointer([0-9]*)-width$/],[Q,L,"pointer#Height",/^pointer([0-9]*)-height$/],[se,I,"pointer#Radius",/^pointer([0-9]*)-radius$/],[ae,$,"pointer#Bg",/^pointer([0-9]*)-bg$/],[ke,U,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Ae,q,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Ee,Y,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[De,X,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[Oe,te,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[We,le,"pointer#Border",/^pointer([0-9]*)-border$/],[tt,ee,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ft,z,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],rn=(ge,Le,it)=>{let Ke=null,Et=[],an=new Map,en=(Zt,Xe=Le)=>{let pt=[...Xe.classList];for(let Zn of pt)Zn.startsWith(Zt)&&Le.classList.remove(Zn)},wt=()=>{en("shape");let Zt=Le.querySelectorAll(".pointer");for(let Xe of Zt)en("shape",Xe)},Qe=Zt=>{Ke=Zt,en("theme-"),typeof Zt=="string"&&Le.classList.add(`theme-${Zt}`)},hn=()=>{if(wt(),!(Et.length<=0)){Le.classList.add("shape",`shape-${Et[0]}`);for(let Zt=1;Zt<Et.length;Zt++){let Xe=Et[Zt];if(!Xe)continue;let pt=Le.querySelector(`.pointer-${Zt}`);!pt||pt.classList.add("shape",`shape-${Xe}`)}}},Sn=(Zt,Xe)=>{Et[Zt]=Xe,hn()},zt=()=>{wt();let Zt=Kt(ge,/^pointer([0-9]*)-shape$/);if(!(Zt.size<=0)){for(let Xe of Zt){let pt=Xe[0];Et[pt]=Xe[1]}hn()}},jt=(Zt,Xe)=>`${Zt}-${Xe}`,Sr=(Zt,Xe,pt)=>{let Zn=it[pt];if(!Zn)return;let ri=pt===0?Le:Zn.$pointer;if(Xe==null){an.has(jt(Zt,pt))&&an.delete(jt(Zt,pt)),ri.style.removeProperty(Zt);return}an.set(jt(Zt,pt),Xe),ri.style.setProperty(Zt,Xe)},di=(Zt,Xe)=>an.get(jt(Zt,Xe));return(()=>{for(let Zt of Qt){let[Xe,pt,Zn,ri]=Zt;if(ri){let Fr=Kt(ge,ri);for(let rr of Fr){let qt=rr[0],xi=rr[1];Sr(Xe,xi,qt)}}else{let Fr=ge.getAttribute(pt);Sr(Xe,Fr,0)}let Ar=[];if(Zn.indexOf("#")===-1)Ar.push([Zn,0]);else{Ar.push([Zn.replace("#",""),0]),Ar.push([Zn.replace("#","0"),0]),Ar.push([Zn.replace("#","1"),0]);for(let Fr=1;Fr<it.length;Fr++)Ar.push([Zn.replace("#",(Fr+1).toString()),Fr])}for(let Fr of Ar)try{let rr=Fr[0],qt=Fr[1];Object.prototype.hasOwnProperty.call(ge,rr)||Object.defineProperty(ge,rr,{get(){return di(Xe,qt)},set:xi=>{Sr(Xe,xi,qt)}})}catch(rr){console.error(rr)}}Qe(ge.getAttribute(b)),zt()})(),{setStyle:Sr,getStyle:di,get theme(){return Ke},set theme(Zt){Qe(Zt)},get pointerShapes(){return Et},setPointerShape:Sn}},sn="animate-on-click",on="range-dragging",Tn=(ge,Le,it,Ke)=>{let Et=[],an=Sn=>{for(let zt of Et)zt.update&&typeof zt.update=="function"&&zt.update(Sn)},en=()=>{for(let Sn of Et)Sn.destroy&&typeof Sn.destroy=="function"&&Sn.destroy()},wt=(Sn,zt)=>{for(let jt of Et)jt.onAttrChange&&typeof jt.onAttrChange=="function"&&jt.onAttrChange(Sn,zt)},Qe=Sn=>{if(Sn.gettersAndSetters){for(let zt of Sn.gettersAndSetters)if(!(!zt.name||!zt.attributes))try{Object.prototype.hasOwnProperty.call(ge,zt.name)||Object.defineProperty(ge,zt.name,zt.attributes)}catch(jt){console.error("defineSettersGetters error:",jt)}}},hn=Sn=>{var zt;if(!Sn.css)return;let jt=(zt=ge.shadowRoot)==null?void 0:zt.querySelector("style");!jt||(jt.innerHTML+=Sn.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let Sn of window.tcRangeSliderPlugins){let zt=Sn();Et.push(zt),zt.init&&typeof zt.init=="function"&&(zt.init(ge,Le,it,Ke),Qe(zt),hn(zt))}},update:an,onAttrChange:wt,destroy:en}},Cr=10,Qi=20,hs=(ge,Le)=>{let it=new Map,Ke=/^value([0-9]*)$/;for(let wt of ge.attributes){let Qe=wt.nodeName.trim().toLowerCase();if(!Ke.test(Qe))continue;let hn=Qe.replace("value","").trim(),Sn=hn===""||hn==="0"||hn==="1"?0:$e(hn,0)-1,zt=we(wt.value)?$e(wt.value,0):wt.value;it.set(Sn,zt)}let Et=Math.max(...Array.from(it.keys())),an=[];an.push([pe(ge,Le,0),it.get(0)]);let en=Le;for(let wt=1;wt<=Et;wt++){let Qe=Le.cloneNode(!0);en.after(Qe),en=Qe,an.push([pe(ge,Qe,wt),it.get(wt)])}return an},Vi=(ge,Le,it,Ke,Et,an,en)=>{try{Object.defineProperty(ge,Ke,{configurable:!0,get(){if(!Le)return;let wt=Le.pointers[it];if(!wt)return;let Qe=Le.getTextValue(wt.percent);return we(Qe)?$e(Qe,Qe):Qe},set:wt=>{Le.pointers[it]?Le==null||Le.setValue(wt,it):Le==null||Le.addPointer(wt)}}),Object.defineProperty(ge,Et,{configurable:!0,get(){var wt,Qe;return(Qe=(wt=Le==null?void 0:Le.pointers[it])==null?void 0:wt.getAttr("aria-label"))!=null?Qe:void 0},set:wt=>{!Le||Le.setAriaLabel(it,wt)}}),Object.defineProperty(ge,an,{configurable:!0,get(){var wt,Qe;return(Qe=(wt=Le==null?void 0:Le.styles)==null?void 0:wt.pointerShapes[it])!=null?Qe:null},set:wt=>{!Le||!Le.styles||Le.styles.setPointerShape(it,wt)}}),Object.defineProperty(ge,en,{configurable:!0,get(){var wt;return(wt=Le==null?void 0:Le.pointers[it].disabled)!=null?wt:!1},set:wt=>{if(!Le)return;let Qe=Le==null?void 0:Le.pointers[it];!Qe||(Qe.disabled=wt)}})}catch(wt){console.error(wt)}},zo=(ge,Le)=>{let it=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ke=2;Ke<Cr;Ke++)it.push([`value${Ke}`,`ariaLabel${Ke}`,`pointer${Ke}Shape`,`pointer${Ke}Disabled`,Ke-1]);for(let Ke of it)Vi(ge,Le,Ke[4],Ke[0],Ke[1],Ke[2],Ke[3])},Hn=(ge,Le,it)=>{var Ke;let Et=(Ke=it.shadowRoot)==null?void 0:Ke.querySelector(".container");if(Et)for(let an of ge)Le?Et.prepend(an.$pointer):Et.append(an.$pointer)},Ir=(ge,Le)=>{if(!(!Le||ge.length<=1)){for(let it of ge)it.$pointer.style.zIndex=Qi.toString();Le.$pointer.style.zIndex=(Qi*2).toString()}},Rr=0,mn=100,Kr=2,or="0.3s",zi=(ge,Le,it)=>{let Ke=it.map(Te=>Te[0]),Et=null,an=null,en=null,wt=null,Qe=Rr,hn=mn,Sn,zt,jt=He,Sr=Kr,di=!1,Zt=!1,Xe=!1,pt=0,Zn=1/0,ri=!1,Ar,Fr,rr=!1,qt=!1,xi=!1,es=or,wi=[],qs=Te=>{rr||(Te.preventDefault&&Te.preventDefault(),ws(Te),window.addEventListener("mousemove",ws),window.addEventListener("mouseup",_o),nn(ge,Te))},_o=Te=>{rr||(Ar=void 0,Fr=void 0,window.removeEventListener("mousemove",ws),window.removeEventListener("mouseup",_o),es&&Le.classList.add(sn),Vt(ge,Te))},io=(Te,ut)=>{if(Ke.length<=0)return;if(Ke.length===1)return Ke[0].isClicked(Te)&&es&&Le.classList.remove(sn),Ke[0];let Wt=ts(Te);if(ri){let Nn=ut,qi=Wi(Nn);qi!==void 0&&(Nn=qe(Nn,qi)),Wt?(Ar=Nn,Fr=0,es&&Le.classList.remove(sn)):Ar!==void 0&&(Fr=Nn-Ar,Ar=Nn)}if(!kr(Te)&&!Wt){for(let Nn of Ke)if(!(!Nn.isClicked(Te)||Nn.disabled))return es&&Le.classList.remove(sn),Nn;for(let Nn of Ke)if(Et===Nn)return Nn}let Wn=1/0,gr=null;for(let Nn of Ke){if(Nn.disabled)continue;let qi=Math.abs(ut-Nn.percent);qi<Wn&&(Wn=qi,gr=Nn)}return gr},jo=()=>Ke.findIndex(Te=>Et===Te&&!Te.disabled),ws=Te=>{let ut;if(jt===ze){let{height:Wn,top:gr}=Le.getBoundingClientRect(),Nn=Te.type.indexOf("mouse")!==-1?Te.clientY:Te.touches[0].clientY;ut=Math.min(Math.max(0,Nn-gr),Wn)*100/Wn}else{let{width:Wn,left:gr}=Le.getBoundingClientRect(),Nn=Te.type.indexOf("mouse")!==-1?Te.clientX:Te.touches[0].clientX;ut=Math.min(Math.max(0,Nn-gr),Wn)*100/Wn}if((di||Zt)&&(ut=100-ut),Et=io(Te.target,ut),Et&&Ir(Ke,Et),ri&&Ke.length>1&&Fr!==void 0){let Wn=Ke[0],gr=Ke[Ke.length-1],Nn=Wn.percent+Fr<0,qi=gr.percent+Fr>100;if(Nn||qi)return;for(let Na=0;Na<Ke.length;Na++)ar(Na,Ke[Na].percent+Fr);return}let Wt=jo();Wt!==-1&&(ar(Wt,ut),Et==null||Et.$pointer.focus())},Ms=Te=>{if(rr||document.activeElement!==ge||Et!=null&&Et.disabled)return;Te.stopPropagation(),Te.preventDefault();let ut=Te.deltaY<0,Wt=di||Zt,Wn=ut?!Wt:Wt,gr=jo();gr!==-1&&(Wn?so(gr,Ke[gr].percent):Is(gr,Ke[gr].percent))},Uo=Te=>{rr||qt||(jt===ze?Zt?ar(Te,100):ar(Te,0):di?Is(Te,Ke[Te].percent):so(Te,Ke[Te].percent))},ps=Te=>{rr||qt||(jt===ze?Zt?ar(Te,0):ar(Te,100):di?so(Te,Ke[Te].percent):Is(Te,Ke[Te].percent))},ll=Te=>{rr||qt||(jt===ze?Zt?Is(Te,Ke[Te].percent):so(Te,Ke[Te].percent):di?ar(Te,100):ar(Te,0))},ul=Te=>{rr||qt||(jt===ze?Zt?so(Te,Ke[Te].percent):Is(Te,Ke[Te].percent):di?ar(Te,0):ar(Te,100))},kr=Te=>Te.classList.contains("panel"),ts=Te=>Te.classList.contains("panel-fill"),so=(Te,ut)=>{if(ut===void 0)return;let Wt=Wi(ut);Wt==null&&(Wt=1),ut-=Wt,ut<0&&(ut=0),ar(Te,ut)},Is=(Te,ut)=>{if(ut===void 0)return;let Wt=Wi(ut);Wt==null&&(Wt=1),ut+=Wt,ut>100&&(ut=100),ar(Te,ut)},Hs=()=>{!wt||wt.update({percents:Pa(),values:ao(),$pointers:Xi(),min:lo(),max:dl(),data:Ht(),step:qo(),round:me(),type:Z(),textMin:oo(),textMax:ms(),rightToLeft:$t(),bottomToTop:Pn(),pointersOverlap:ki(),pointersMinDistance:Be(),pointersMaxDistance:yt(),rangeDragging:Jr(),disabled:hr(),keyboardDisabled:Tr(),mousewheelDisabled:Ln()})},pa=()=>{Hs()},Gs=Te=>{if(!(Xe||Ke.length<=1||hn===Qe))if(Te===0){let ut=Zn*100/(hn-Qe);return Math.max(0,Ke[Te+1].percent-ut)}else{let ut=pt*100/(hn-Qe);return Math.min(Ke[Te-1].percent+ut,100)}},cl=Te=>{if(!(Xe||Ke.length<=1||hn===Qe))if(Te===Ke.length-1){let ut=Zn*100/(hn-Qe);return Math.min(Ke[Te-1].percent+ut,100)}else{let ut=pt*100/(hn-Qe);return Math.max(0,Ke[Te+1].percent-ut)}},Wi=Te=>{let ut;if(typeof Sn=="function"){let Wt=je(0,100,Qe,hn,Te);ut=Sn(Wt,Te)}else ut=Sn;if(we(ut)){let Wt=hn-Qe;return ut=Wt===0?0:ut*100/Wt,ut}},Yi=Te=>{if(Te===void 0)return;let ut=je(0,100,Qe,hn,Te);return zt!==void 0?zt[Math.round(ut)]:Pe(ut,Sr)},oo=()=>zt!==void 0?zt[Qe]:Qe,ms=()=>zt!==void 0?zt[hn]:hn,qo=()=>Sn,Vs=Te=>{var ut;return Te<=0||Xe?oo():(ut=Yi(Ke[Te-1].percent))!=null?ut:""},fi=Te=>{var ut;return Ke.length<=1||Te>=Ke.length-1||Xe?ms():(ut=Yi(Ke[Te+1].percent))!=null?ut:""},Pa=()=>Ke.map(Te=>Te.percent),ao=()=>Ke.map(Te=>Yi(Te.percent)),Xi=()=>Ke.map(Te=>Te.$pointer),lo=()=>Qe,dl=()=>hn,Ht=()=>zt,Z=()=>jt,me=()=>Sr,Be=()=>pt,yt=()=>Zn,pn=Te=>wi[Te],$t=()=>di,Pn=()=>Zt,hr=()=>rr,Tr=()=>qt,Ln=()=>xi,ki=()=>Xe,Jr=()=>ri,ar=(Te,ut)=>{if(ut===void 0)return;let Wt=Wi(ut);Wt!==void 0&&(ut=qe(ut,Wt));let Wn=Ke[Te];if(!Wn)return;let gr=Wn.updatePosition(ut,Gs(Te),cl(Te),jt,di,Zt);an==null||an.updatePosition(jt,Ke.map(Nn=>Nn.percent),di,Zt),Hs();for(let Nn of Ke){let qi=Yi(Nn.percent);qi!==void 0&&(Nn.setAttr("aria-valuenow",qi.toString()),Nn.setAttr("aria-valuetext",qi.toString()))}Ws(),gr&&Ze(ge,Ke.map(Nn=>Yi(Nn.percent)))},hi=()=>{for(let Te=0;Te<Ke.length;Te++)ar(Te,Ke[Te].percent)},_s=(Te,ut)=>{Qe=zt!==void 0?0:$e(Te,Rr),hn=zt!==void 0?zt.length-1:$e(ut,mn),ji(Qe),Ui(hn)},Ws=()=>{var Te,ut;for(let Wt=0;Wt<Ke.length;Wt++){let Wn=Ke[Wt];Wn.setAttr("aria-valuemin",((Te=Vs(Wt))!=null?Te:"").toString()),Wn.setAttr("aria-valuemax",((ut=fi(Wt))!=null?ut:"").toString())}},ji=Te=>{Qe=$e(Te,Rr),Qe>hn&&(hn=Qe+mn),hi()},Ui=Te=>{hn=$e(Te,mn),hn<Qe&&(hn=Qe+mn),hi()},Eo=Te=>{Xe=!0;for(let ut=0;ut<Te.length;ut++)Gr(Te[ut],ut);Xe=!1;for(let ut=0;ut<Te.length;ut++)Gr(Te[ut],ut)},Gr=(Te,ut)=>{let Wt;zt!==void 0?(Wt=Te==null?0:oe(Te,zt),Wt===-1&&(Wt=0)):(Wt=$e(Te,Qe),Wt<Qe&&(Wt=Qe),Wt>hn&&(Wt=hn));let Wn=je(Qe,hn,0,100,Wt);ar(ut,Wn)},ma=Te=>{if(Te==null){Sn=void 0;return}if(typeof Te=="function"){Sn=Te,hi();return}if(we(Te)){Sn=$e(Te,1);let ut=Math.abs(hn-Qe);Sn>ut&&(Sn=void 0),hi();return}Sn=void 0},Zu=Te=>{Xe=Te,hi()},fl=Te=>{(!we(Te)||Te<0)&&(Te=0),pt=Te},hl=Te=>{(!we(Te)||Te<0)&&(Te=1/0),Zn=Te},Jc=Te=>{rr=Te,Le.classList.toggle("disabled",rr),rr?Le.setAttribute("aria-disabled","true"):Le.hasAttribute("aria-disabled")&&Le.removeAttribute("aria-disabled")},Ku=Te=>{qt=Te},ne=Te=>{xi=Te,xi?document.removeEventListener("wheel",Ms):document.addEventListener("wheel",Ms,{passive:!1})},_e=Te=>{if(Te==null){zt=void 0;return}if(zt=ie(Te),zt===void 0||zt.length<=0){zt=void 0;return}ji(0),Ui(zt.length-1),Sn===void 0&&ma(1)},Ye=Te=>{var ut;typeof Te=="string"?jt=Te.trim().toLowerCase()===ze?ze:He:jt=He;let Wt=(ut=ge.shadowRoot)==null?void 0:ut.querySelector(".range-slider-box");if(!Wt)return;Wt.className=`range-slider-box type-${jt}`,hi();let Wn=jt===ze?"vertical":"horizontal";for(let gr of Ke)gr.setAttr("aria-orientation",Wn)},bt=Te=>{di=Te,Ke.length>1&&Hn(Ke,di,ge),hi(),Hs()},Jt=Te=>{Zt=Te,Ke.length>1&&Hn(Ke,Zt,ge),hi(),Hs()},Ut=Te=>{Sr=$e(Te,Kr),Sr<0&&(Sr=Kr),Hs()},Cn=Te=>{Te==null||Te.toString().trim().toLowerCase()==="false"?(es=void 0,Le.style.removeProperty(F),Le.classList.remove(sn)):(es=Te.toString(),Le.style.setProperty(F,es),Le.classList.add(sn))},mr=(Te,ut)=>{let Wt=Ke[Te];!Wt||(Wt.setAttr("aria-label",ut),wi[Te]=ut)},Pr=Te=>{if(Ar=void 0,Ke.length<=1){ri=!1,Le.classList.remove(on);return}ri=Te,Le.classList.toggle(on,ri)},ns=()=>{Jc(St(ge.getAttribute(w))),qt=St(ge.getAttribute(E)),xi=St(ge.getAttribute(S));let Te=Kt(ge,/^pointer([0-9]*)-disabled$/,ut=>St(ut));for(let ut of Te){let Wt=ut[0];!Ke[Wt]||(Ke[Wt].disabled=ut[1])}},Es=()=>{let Te=Kt(ge,/^aria-label([0-9]*)$/);for(let ut of Te){let Wt=ut[0];mr(Wt,ut[1])}},_i=Te=>{let ut=Ke.length,Wt=Ke[ut-1].$pointer,Wn=Wt.cloneNode(!0);Wt.after(Wn);let gr=pe(ge,Wn,ut);return gr.setCallbacks(Uo,ps,ll,ul),Ke.push(gr),Gr(Te,ut),hi(),Hs(),ut},Fi=()=>{let Te=Ke.length,ut=Ke[Te-1];return ut?(ut.destroy(),Ke.pop(),Ke.length<=1&&Pr(!1),hi(),Hs(),Te-1):-1};return(()=>{var Te,ut;for(let Wn of Ke)Wn.setCallbacks(Uo,ps,ll,ul);let Wt=(Te=ge.shadowRoot)==null?void 0:Te.querySelector(".panel-fill");Wt&&(an=ve(Wt)),Ye(ge.getAttribute(g)),bt(St(ge.getAttribute(y))),Jt(St(ge.getAttribute(v))),_s(ge.getAttribute(c),ge.getAttribute(f)),ma(ge.getAttribute(h)),_e(ge.getAttribute(d)),Eo(it.map(Wn=>Wn[1])),Zu(St(ge.getAttribute(o))),fl($e(ge.getAttribute(a),0)),hl($e(ge.getAttribute(l),1/0)),Pr(St(ge.getAttribute(u))),Ut($e(ge.getAttribute(p),Kr)),ns(),Es(),en=rn(ge,Le,Ke),Cn((ut=ge.getAttribute(he))!=null?ut:or),Le.addEventListener("mousedown",qs),Le.addEventListener("mouseup",_o),Le.addEventListener("touchmove",ws),Le.addEventListener("touchstart",ws),xi||document.addEventListener("wheel",Ms,{passive:!1}),wt=Tn(ge,pa,{setValues:Eo,setMin:ji,setMax:Ui,setStep:ma,setPointersOverlap:Zu,setPointersMinDistance:fl,setPointersMaxDistance:hl,setDisabled:Jc,setType:Ye,setRightToLeft:bt,setBottomToTop:Jt,setRound:Ut,setKeyboardDisabled:Ku,setMousewheelDisabled:ne,setRangeDragging:Pr,setData:_e},{getPercents:Pa,getValues:ao,getPointerElements:Xi,getMin:lo,getMax:dl,getStep:qo,getData:Ht,getType:Z,getRound:me,getTextMin:oo,getTextMax:ms,isRightToLeft:$t,isBottomToTop:Pn,isDisabled:hr,isKeyboardDisabled:Tr,isMousewheelDisabled:Ln,isPointersOverlap:ki,isRangeDraggingEnabled:Jr,getPointersMinDistance:Be,getPointersMaxDistance:yt}),wt.init()})(),{get pointers(){return Ke},get styles(){return en},get pluginsManager(){return wt},get min(){return oo()},get max(){return ms()},get step(){return qo()},get pointersOverlap(){return ki()},set pointersOverlap(Te){Zu(Te)},get pointersMinDistance(){return Be()},set pointersMinDistance(Te){fl(Te)},get pointersMaxDistance(){return yt()},set pointersMaxDistance(Te){hl(Te)},get disabled(){return hr()},set disabled(Te){Jc(Te)},get data(){return Ht()},get type(){return Z()},set type(Te){Ye(Te)},get rightToLeft(){return $t()},set rightToLeft(Te){bt(Te)},get bottomToTop(){return Pn()},set bottomToTop(Te){Jt(Te)},get round(){return me()},set round(Te){Ut(Te)},get animateOnClick(){return es},set animateOnClick(Te){Cn(Te)},get keyboardDisabled(){return Tr()},set keyboardDisabled(Te){Ku(Te)},get mousewheelDisabled(){return Ln()},set mousewheelDisabled(Te){ne(Te)},get rangeDragging(){return Jr()},set rangeDragging(Te){Pr(Te)},setMin:ji,setMax:Ui,setValue:Gr,setStep:ma,setData:_e,getTextValue:Yi,setAriaLabel:mr,getAriaLabel:pn,addPointer:_i,removePointer:Fi,destroy:()=>{Le.removeEventListener("mousedown",qs),Le.removeEventListener("mouseup",_o),Le.removeEventListener("touchmove",ws),Le.removeEventListener("touchstart",ws),document.removeEventListener("wheel",Ms);for(let Te of Ke)Te.destroy();wt==null||wt.destroy()}}},nr=(ge,Le,it)=>{let Ke=Qt.find(([wt,Qe,hn,Sn])=>Qe.replace("#","")===Le.replace(/\d+/g,""));if(Ke&&ge.styles){let[wt,Qe,hn,Sn]=Ke,zt=Le.replace(/\D/g,"").trim(),jt=zt===""||zt==="0"||zt==="1"?0:$e(zt,0)-1;ge.styles.setStyle(wt,it,jt);return}switch(ge&&ge.pluginsManager&&ge.pluginsManager.onAttrChange(Le,it),Le){case c:{ge.setMin(it);break}case f:{ge.setMax(it);break}case h:{ge.setStep(it);break}case o:{ge.pointersOverlap=St(it);break}case a:{ge.pointersMinDistance=$e(it,0);break}case u:{ge.rangeDragging=St(it);break}case l:{ge.pointersMaxDistance=$e(it,1/0);break}case w:{ge.disabled=St(it);break}case E:{ge.keyboardDisabled=St(it);break}case S:{ge.mousewheelDisabled=St(it);break}case d:{ge.setData(it);break}case g:{ge.type=it;break}case y:{ge.rightToLeft=St(it);break}case v:{ge.bottomToTop=St(it);break}case p:{ge.round=$e(it,Kr);break}case b:{ge.styles&&(ge.styles.theme=it);break}case he:{ge.animateOnClick=it;break}}let Et=null;if(/^value([0-9]*)$/.test(Le)&&(Et="value"),/^pointer([0-9]*)-disabled$/.test(Le)&&(Et="pointer-disabled"),/^aria-label([0-9]*)$/.test(Le)&&(Et="aria-label"),/^pointer([0-9]*)-shape$/.test(Le)&&(Et="pointer-shape"),!Et)return;let an=Le.replace(/\D/g,"").trim(),en=an===""||an==="0"||an==="1"?0:$e(an,0)-1;switch(Et){case"value":{ge.setValue(it,en);break}case"pointer-disabled":{let wt=ge==null?void 0:ge.pointers[en];if(!wt)return;wt.disabled=St(it);break}case"aria-label":{ge.setAriaLabel(en,it);break}case"pointer-shape":{ge.styles&&ge.styles.setPointerShape(en,it);break}}},$r=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ge){this.slider&&this.slider.setStep(ge)}get step(){var ge;return(ge=this.slider)==null?void 0:ge.step}set disabled(ge){this.slider&&(this.slider.disabled=ge)}get disabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.disabled)!=null?Le:!1}set data(ge){var Le;(Le=this.slider)==null||Le.setData(ge)}get data(){var ge;return(ge=this.slider)==null?void 0:ge.data}set min(ge){var Le;(Le=this.slider)==null||Le.setMin(ge)}get min(){var ge;return(ge=this.slider)==null?void 0:ge.min}set max(ge){var Le;(Le=this.slider)==null||Le.setMax(ge)}get max(){var ge;return(ge=this.slider)==null?void 0:ge.max}set round(ge){!this.slider||(this.slider.round=ge)}get round(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.round)!=null?Le:Kr}set type(ge){!this.slider||(this.slider.type=ge??He)}get type(){var ge;return((ge=this.slider)==null?void 0:ge.type)||He}set pointersOverlap(ge){!this.slider||(this.slider.pointersOverlap=ge)}get pointersOverlap(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersOverlap)!=null?Le:!1}set pointersMinDistance(ge){!this.slider||(this.slider.pointersMinDistance=ge)}get pointersMinDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMinDistance)!=null?Le:0}set pointersMaxDistance(ge){!this.slider||(this.slider.pointersMaxDistance=ge)}get pointersMaxDistance(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.pointersMaxDistance)!=null?Le:1/0}set theme(ge){!this.slider||!this.slider.styles||(this.slider.styles.theme=ge)}get theme(){var ge,Le,it;return(it=(Le=(ge=this.slider)==null?void 0:ge.styles)==null?void 0:Le.theme)!=null?it:null}set rtl(ge){!this.slider||(this.slider.rightToLeft=ge)}get rtl(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rightToLeft)!=null?Le:!1}set btt(ge){!this.slider||(this.slider.bottomToTop=ge)}get btt(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.bottomToTop)!=null?Le:!1}set keyboardDisabled(ge){!this.slider||(this.slider.keyboardDisabled=ge)}get keyboardDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.keyboardDisabled)!=null?Le:!1}set mousewheelDisabled(ge){!this.slider||(this.slider.mousewheelDisabled=ge)}get mousewheelDisabled(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.mousewheelDisabled)!=null?Le:!1}set animateOnClick(ge){!this.slider||(this.slider.animateOnClick=ge)}get animateOnClick(){var ge;return(ge=this.slider)==null?void 0:ge.animateOnClick}get rangeDragging(){var ge,Le;return(Le=(ge=this.slider)==null?void 0:ge.rangeDragging)!=null?Le:!1}set rangeDragging(ge){this.slider&&(this.slider.rangeDragging=St(ge))}get externalCSSList(){return this._externalCSSList}addPointer(ge){var Le,it;if(!this.slider)return;let Ke=(it=(Le=this.slider)==null?void 0:Le.addPointer(ge))!=null?it:0;Vi(this,this.slider,Ke,`value${Ke+1}`,`ariaLabel${Ke+1}`,`pointerShape${Ke+1}`,`pointer${Ke+1}Disabled`)}removePointer(){var ge;!this.slider||(ge=this.slider)==null||ge.removePointer()}addCSS(ge){if(!this.shadowRoot)return;let Le=document.createElement("style");Le.textContent=ge,this.shadowRoot.appendChild(Le)}connectedCallback(){var ge,Le;if(!this.shadowRoot)return;this._externalCSSList=xt(this),this.shadowRoot.innerHTML=i(s,this._externalCSSList);let it=(ge=this.shadowRoot)==null?void 0:ge.querySelector(".pointer");if(!it)return;let Ke=(Le=this.shadowRoot)==null?void 0:Le.getElementById("range-slider");if(!Ke)return;let Et=hs(this,it);this.slider=zi(this,Ke,Et),zo(this,this.slider),this._observer=new MutationObserver(an=>{an.forEach(en=>{var wt;if(!this.slider||en.type!=="attributes")return;let Qe=en.attributeName;!Qe||nr(this.slider,Qe,(wt=this.getAttribute(Qe))!=null?wt:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},ro=$r;window.tcRangeSlider=ro,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",ro),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends ro{})})();var O0,F$e,N6;class R$e extends Zr{constructor(){super();gn(this,O0);this.filterObject={},this.tabIndex=0,this.inputHandler=yn(this,O0,F$e).bind(this),this.debouncedInputHandler=Q0(this.inputHandler,500,{leading:!1})}reset(){TTt(this)}createRenderRoot(){return this}render(){return qn(this.filterObject,()=>et`
        ${yn(this,O0,N6).call(this,"min","before")}
        <tc-range-slider
          min="${this.filterObject.min}"
          max="${this.filterObject.max}"
          value1="${this.filterObject.state.min||this.filterObject.min}"
          value2="${this.filterObject.state.max||this.filterObject.max}"
          step="${this.filterObject.step||1}"
          @change=${this.debouncedInputHandler}
        ></tc-range-slider>
        ${yn(this,O0,N6).call(this,"max","after")}
      `)}}O0=new WeakSet,F$e=function(n){DTt(n,this)},N6=function(n,r){return LTt(n,r,this)},tn(R$e,"properties",{filterObject:{attribute:!1,type:Object},tabIndex:{attribute:!1,type:Number}});customElements.define("eox-itemfilter-range",R$e);var BT,O$e;class WTt extends Zr{constructor(){super();gn(this,BT);this.filterObject={},this.tabIndex=0}static get properties(){return{filterObject:{type:Object},tabIndex:{attribute:!1,type:Number}}}reset(){PTt(this)}createRenderRoot(){return this}render(){return qn(this.filterObject,()=>{var n;return et`
        <form style="display: inline">
          ${lu(["intersects","within"],r=>et`
              <label>
                <input
                  tabindex=${this.tabIndex}
                  type="radio"
                  name="mode"
                  .checked="${(this.filterObject.state.mode||"")===r||ni}"
                  value="${r}"
                  @click=${()=>yn(this,BT,O$e).call(this,r)}
                />
                <small>${r} filter geometry</small>
              </label>
            `)}
        </form>
        <eox-itemfilter-spatial-filter
          exportparts="map: spatial-filter-map"
          .geometry="${(n=this.filterObject.state)==null?void 0:n.geometry}"
          @filter="${r=>{this.filterObject.state.geometry=r.detail.geometry,this.filterObject.dirty=!0,this.filterObject.stringifiedState="Polygon",this.dispatchEvent(new CustomEvent("filter"))}}"
        ></eox-itemfilter-spatial>
      `})}}BT=new WeakSet,O$e=function(n){BTt(n,this)};customElements.define("eox-itemfilter-spatial",WTt);var zT,M$e;class YTt extends Zr{constructor(){super();gn(this,zT);this.geometry=null,this.eoxMap=null}static get properties(){return{geometry:{type:Object},eoxMap:{type:Object}}}firstUpdated(){yn(this,zT,M$e).call(this)}reset(){NTt(this)}render(){return et`<div id="eox-map"></div>`}}zT=new WeakSet,M$e=function(){E$e(this)};customElements.define("eox-itemfilter-spatial-filter",YTt);function XTt(t,e){e.renderRoot.querySelectorAll(".chip").forEach(n=>{n.classList.remove("highlighted")}),t.target.classList.add("highlighted"),e.requestUpdate()}function ZTt(t,e){const{code:n,target:r}=t;r.id==="eox-itemfilter-input-search"&&(e.parentElement.classList.contains("hidden")&&["ArrowLeft","ArrowRight","Backspace"].includes(n)||(n==="Space"&&t.preventDefault(),["Escape","Space","Enter"].includes(n)||t.stopPropagation(),["ArrowLeft","ArrowRight","Escape","Backspace"].includes(n)&&KTt(n,t.target.value??"",e)))}function KTt(t,e,n){const r=n.renderRoot.querySelector(".chip.highlighted");if((t==="Escape"||e)&&r&&r.classList.remove("highlighted"),t==="Backspace"&&!e){if(n.items.length){r&&(r.querySelector(".chip-item-close").click(),n.items.splice(Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(r),1));const i=n.renderRoot.querySelectorAll(".chip")[n.renderRoot.querySelectorAll(".chip").length-1];i.classList.contains("highlighted")||i.classList.add("highlighted"),n.requestUpdate()}n._dispatchEvent()}if((t==="ArrowLeft"||t==="ArrowRight")&&!e){if(n.renderRoot.querySelectorAll(".chip").length<1)return;let i=0;const s=n.renderRoot.querySelector(".chip.highlighted");s&&(i=Array.from(n.renderRoot.querySelectorAll(".chip")).indexOf(s),s.classList.remove("highlighted")),i=i+(t==="ArrowLeft"?-1:1),t==="ArrowLeft"&&i<0&&(i=n.renderRoot.querySelectorAll(".chip").length-1),t==="ArrowRight"&&i>n.renderRoot.querySelectorAll(".chip").length-1&&(i=0),Array.from(n.renderRoot.querySelectorAll(".chip"))[i].classList.add("highlighted")}}var M0,B6,I$e;class JTt extends Zr{constructor(){super();gn(this,M0);this.items={},this.controller={}}static get properties(){return{items:{attribute:!1,type:Object},controller:{attribute:!1,type:Object}}}connectedCallback(){super.connectedCallback(),this.getRootNode().addEventListener("keydown",yn(this,M0,B6).bind(this))}disconnectedCallback(){super.disconnectedCallback(),this.getRootNode().removeEventListener("keydown",yn(this,M0,B6).bind(this))}_dispatchEvent(){this.dispatchEvent(new CustomEvent("items-selected",{detail:this.items}))}render(){return et`
      <style>
        ${lC}
      </style>
      <span class="chip-container">
        ${lu(this.items,n=>et`
            <span class="chip" @click=${yn(this,M0,I$e).bind(this)}>
              <span class="chip-title">${n.title}</span>
                <span
                  class="chip-item-close hidden"
                  data-close=${n.key}
                  @click=${r=>{r.stopPropagation(),this.controller.remove(r),this.requestUpdate()}}
                ></span>
            </span>
            </span>
          `)}
      </span>
    `}}M0=new WeakSet,B6=function(n){ZTt(n,this)},I$e=function(n){XTt(n,this)};customElements.define("eox-itemfilter-chips",JTt);const QTt=Object.freeze({aggregateResults:void 0,autoSpreadSingle:!1,enableHighlighting:!1,externalFilter:()=>{},filterProperties:[],fuseConfig:{},inlineMode:!1,matchAllWhenEmpty:!0,showResults:!0,idProperty:"id",titleProperty:"title",subTitleProperty:void 0,imageProperty:void 0,expandMultipleFilters:!0,expandResults:!0,expandMultipleResults:!0}),OEe=["aggregateResults","autoSpreadSingle","enableHighlighting","externalFilter","filterProperties","fuseConfig","inlineMode","matchAllWhenEmpty","showResults","titleProperty","subTitleProperty","imageProperty","idProperty","expandMultipleFilters","expandResults","expandMultipleResults","items"];var s5,MEe;function eDt(){if(MEe)return s5;MEe=1;var t=200,e="__lodash_hash_undefined__",n=1/0,r="[object Function]",i="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,l=typeof self=="object"&&self&&self.Object===Object&&self,u=a||l||Function("return this")();function d(P,Q){var se=P?P.length:0;return!!se&&f(P,Q,0)>-1}function c(P,Q,se,ae){for(var ke=P.length,Ae=se+-1;++Ae<ke;)if(Q(P[Ae],Ae,P))return Ae;return-1}function f(P,Q,se){if(Q!==Q)return c(P,h,se);for(var ae=se-1,ke=P.length;++ae<ke;)if(P[ae]===Q)return ae;return-1}function h(P){return P!==P}function p(P,Q){return P.has(Q)}function g(P,Q){return P==null?void 0:P[Q]}function b(P){var Q=!1;if(P!=null&&typeof P.toString!="function")try{Q=!!(P+"")}catch{}return Q}function y(P){var Q=-1,se=Array(P.size);return P.forEach(function(ae){se[++Q]=ae}),se}var v=Array.prototype,w=Function.prototype,E=Object.prototype,S=u["__core-js_shared__"],T=function(){var P=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),D=w.toString,k=E.hasOwnProperty,R=E.toString,O=RegExp("^"+D.call(k).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=v.splice,K=oe(u,"Map"),L=oe(u,"Set"),I=oe(Object,"create");function $(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function U(){this.__data__=I?I(null):{}}function q(P){return this.has(P)&&delete this.__data__[P]}function Y(P){var Q=this.__data__;if(I){var se=Q[P];return se===e?void 0:se}return k.call(Q,P)?Q[P]:void 0}function X(P){var Q=this.__data__;return I?Q[P]!==void 0:k.call(Q,P)}function te(P,Q){var se=this.__data__;return se[P]=I&&Q===void 0?e:Q,this}$.prototype.clear=U,$.prototype.delete=q,$.prototype.get=Y,$.prototype.has=X,$.prototype.set=te;function le(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function ee(){this.__data__=[]}function z(P){var Q=this.__data__,se=Vt(Q,P);if(se<0)return!1;var ae=Q.length-1;return se==ae?Q.pop():B.call(Q,se,1),!0}function he(P){var Q=this.__data__,se=Vt(Q,P);return se<0?void 0:Q[se][1]}function fe(P){return Vt(this.__data__,P)>-1}function ze(P,Q){var se=this.__data__,ae=Vt(se,P);return ae<0?se.push([P,Q]):se[ae][1]=Q,this}le.prototype.clear=ee,le.prototype.delete=z,le.prototype.get=he,le.prototype.has=fe,le.prototype.set=ze;function He(P){var Q=-1,se=P?P.length:0;for(this.clear();++Q<se;){var ae=P[Q];this.set(ae[0],ae[1])}}function je(){this.__data__={hash:new $,map:new(K||le),string:new $}}function we(P){return ie(this,P).delete(P)}function $e(P){return ie(this,P).get(P)}function qe(P){return ie(this,P).has(P)}function Pe(P,Q){return ie(this,P).set(P,Q),this}He.prototype.clear=je,He.prototype.delete=we,He.prototype.get=$e,He.prototype.has=qe,He.prototype.set=Pe;function St(P){var Q=-1,se=P?P.length:0;for(this.__data__=new He;++Q<se;)this.add(P[Q])}function ht(P){return this.__data__.set(P,e),this}function nn(P){return this.__data__.has(P)}St.prototype.add=St.prototype.push=ht,St.prototype.has=nn;function Vt(P,Q){for(var se=P.length;se--;)if(re(P[se][0],Q))return se;return-1}function Mn(P){if(!xe(P)||F(P))return!1;var Q=ye(P)||b(P)?O:o;return Q.test(H(P))}function Ze(P,Q,se){var ae=-1,ke=d,Ae=P.length,Ee=!0,De=[],Oe=De;if(Ae>=t){var We=pe(P);if(We)return y(We);Ee=!1,ke=p,Oe=new St}else Oe=De;e:for(;++ae<Ae;){var tt=P[ae],ft=tt;if(tt=tt!==0?tt:0,Ee&&ft===ft){for(var Kt=Oe.length;Kt--;)if(Oe[Kt]===ft)continue e;De.push(tt)}else ke(Oe,ft,se)||(Oe!==De&&Oe.push(ft),De.push(tt))}return De}var pe=L&&1/y(new L([,-0]))[1]==n?function(P){return new L(P)}:Re;function ie(P,Q){var se=P.__data__;return ve(Q)?se[typeof Q=="string"?"string":"hash"]:se.map}function oe(P,Q){var se=g(P,Q);return Mn(se)?se:void 0}function ve(P){var Q=typeof P;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?P!=="__proto__":P===null}function F(P){return!!T&&T in P}function H(P){if(P!=null){try{return D.call(P)}catch{}try{return P+""}catch{}}return""}function J(P){return P&&P.length?Ze(P):[]}function re(P,Q){return P===Q||P!==P&&Q!==Q}function ye(P){var Q=xe(P)?R.call(P):"";return Q==r||Q==i}function xe(P){var Q=typeof P;return!!P&&(Q=="object"||Q=="function")}function Re(){}return s5=J,s5}var tDt=eDt();const $$e=aa(tDt);var h_={exports:{}};h_.exports;var IEe;function nDt(){return IEe||(IEe=1,function(t,e){var n=200,r="Expected a function",i="__lodash_hash_undefined__",s=1,o=2,a=1/0,l=9007199254740991,u="[object Arguments]",d="[object Array]",c="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",b="[object Map]",y="[object Number]",v="[object Object]",w="[object Promise]",E="[object RegExp]",S="[object Set]",T="[object String]",D="[object Symbol]",k="[object WeakMap]",R="[object ArrayBuffer]",O="[object DataView]",B="[object Float32Array]",K="[object Float64Array]",L="[object Int8Array]",I="[object Int16Array]",$="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",Y="[object Uint16Array]",X="[object Uint32Array]",te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/,ee=/^\./,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,he=/[\\^$.*+?()[\]{}|]/g,fe=/\\(\\)?/g,ze=/^\[object .+?Constructor\]$/,He=/^(?:0|[1-9]\d*)$/,je={};je[B]=je[K]=je[L]=je[I]=je[$]=je[U]=je[q]=je[Y]=je[X]=!0,je[u]=je[d]=je[R]=je[c]=je[O]=je[f]=je[h]=je[p]=je[b]=je[y]=je[v]=je[E]=je[S]=je[T]=je[k]=!1;var we=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,$e=typeof self=="object"&&self&&self.Object===Object&&self,qe=we||$e||Function("return this")(),Pe=e&&!e.nodeType&&e,St=Pe&&!0&&t&&!t.nodeType&&t,ht=St&&St.exports===Pe,nn=ht&&we.process,Vt=function(){try{return nn&&nn.binding("util")}catch{}}(),Mn=Vt&&Vt.isTypedArray;function Ze(ne,_e){for(var Ye=-1,bt=ne?ne.length:0,Jt=Array(bt);++Ye<bt;)Jt[Ye]=_e(ne[Ye],Ye,ne);return Jt}function pe(ne,_e){for(var Ye=-1,bt=_e.length,Jt=ne.length;++Ye<bt;)ne[Jt+Ye]=_e[Ye];return ne}function ie(ne,_e){for(var Ye=-1,bt=ne?ne.length:0;++Ye<bt;)if(_e(ne[Ye],Ye,ne))return!0;return!1}function oe(ne){return function(_e){return _e==null?void 0:_e[ne]}}function ve(ne,_e){for(var Ye=-1,bt=Array(ne);++Ye<ne;)bt[Ye]=_e(Ye);return bt}function F(ne){return function(_e){return ne(_e)}}function H(ne,_e){return ne==null?void 0:ne[_e]}function J(ne){var _e=!1;if(ne!=null&&typeof ne.toString!="function")try{_e=!!(ne+"")}catch{}return _e}function re(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(bt,Jt){Ye[++_e]=[Jt,bt]}),Ye}function ye(ne,_e){return function(Ye){return ne(_e(Ye))}}function xe(ne){var _e=-1,Ye=Array(ne.size);return ne.forEach(function(bt){Ye[++_e]=bt}),Ye}var Re=Array.prototype,P=Function.prototype,Q=Object.prototype,se=qe["__core-js_shared__"],ae=function(){var ne=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),ke=P.toString,Ae=Q.hasOwnProperty,Ee=Q.toString,De=RegExp("^"+ke.call(Ae).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=qe.Symbol,We=qe.Uint8Array,tt=Q.propertyIsEnumerable,ft=Re.splice,Kt=Oe?Oe.isConcatSpreadable:void 0,xt=ye(Object.keys,Object),Qt=Vs(qe,"DataView"),rn=Vs(qe,"Map"),sn=Vs(qe,"Promise"),on=Vs(qe,"Set"),Tn=Vs(qe,"WeakMap"),Cr=Vs(Object,"create"),Qi=$t(Qt),hs=$t(rn),Vi=$t(sn),zo=$t(on),Hn=$t(Tn),Ir=Oe?Oe.prototype:void 0,Rr=Ir?Ir.valueOf:void 0,mn=Ir?Ir.toString:void 0;function Kr(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function or(){this.__data__=Cr?Cr(null):{}}function zi(ne){return this.has(ne)&&delete this.__data__[ne]}function nr(ne){var _e=this.__data__;if(Cr){var Ye=_e[ne];return Ye===i?void 0:Ye}return Ae.call(_e,ne)?_e[ne]:void 0}function $r(ne){var _e=this.__data__;return Cr?_e[ne]!==void 0:Ae.call(_e,ne)}function ro(ne,_e){var Ye=this.__data__;return Ye[ne]=Cr&&_e===void 0?i:_e,this}Kr.prototype.clear=or,Kr.prototype.delete=zi,Kr.prototype.get=nr,Kr.prototype.has=$r,Kr.prototype.set=ro;function ge(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function Le(){this.__data__=[]}function it(ne){var _e=this.__data__,Ye=rr(_e,ne);if(Ye<0)return!1;var bt=_e.length-1;return Ye==bt?_e.pop():ft.call(_e,Ye,1),!0}function Ke(ne){var _e=this.__data__,Ye=rr(_e,ne);return Ye<0?void 0:_e[Ye][1]}function Et(ne){return rr(this.__data__,ne)>-1}function an(ne,_e){var Ye=this.__data__,bt=rr(Ye,ne);return bt<0?Ye.push([ne,_e]):Ye[bt][1]=_e,this}ge.prototype.clear=Le,ge.prototype.delete=it,ge.prototype.get=Ke,ge.prototype.has=Et,ge.prototype.set=an;function en(ne){var _e=-1,Ye=ne?ne.length:0;for(this.clear();++_e<Ye;){var bt=ne[_e];this.set(bt[0],bt[1])}}function wt(){this.__data__={hash:new Kr,map:new(rn||ge),string:new Kr}}function Qe(ne){return ms(this,ne).delete(ne)}function hn(ne){return ms(this,ne).get(ne)}function Sn(ne){return ms(this,ne).has(ne)}function zt(ne,_e){return ms(this,ne).set(ne,_e),this}en.prototype.clear=wt,en.prototype.delete=Qe,en.prototype.get=hn,en.prototype.has=Sn,en.prototype.set=zt;function jt(ne){var _e=-1,Ye=ne?ne.length:0;for(this.__data__=new en;++_e<Ye;)this.add(ne[_e])}function Sr(ne){return this.__data__.set(ne,i),this}function di(ne){return this.__data__.has(ne)}jt.prototype.add=jt.prototype.push=Sr,jt.prototype.has=di;function Zt(ne){this.__data__=new ge(ne)}function Xe(){this.__data__=new ge}function pt(ne){return this.__data__.delete(ne)}function Zn(ne){return this.__data__.get(ne)}function ri(ne){return this.__data__.has(ne)}function Ar(ne,_e){var Ye=this.__data__;if(Ye instanceof ge){var bt=Ye.__data__;if(!rn||bt.length<n-1)return bt.push([ne,_e]),this;Ye=this.__data__=new en(bt)}return Ye.set(ne,_e),this}Zt.prototype.clear=Xe,Zt.prototype.delete=pt,Zt.prototype.get=Zn,Zt.prototype.has=ri,Zt.prototype.set=Ar;function Fr(ne,_e){var Ye=Jr(ne)||ki(ne)?ve(ne.length,String):[],bt=Ye.length,Jt=!!bt;for(var Ut in ne)Ae.call(ne,Ut)&&!(Jt&&(Ut=="length"||Xi(Ut,bt)))&&Ye.push(Ut);return Ye}function rr(ne,_e){for(var Ye=ne.length;Ye--;)if(Ln(ne[Ye][0],_e))return Ye;return-1}var qt=Gs(wi);function xi(ne,_e,Ye,bt,Jt){var Ut=-1,Cn=ne.length;for(Ye||(Ye=ao),Jt||(Jt=[]);++Ut<Cn;){var mr=ne[Ut];Ye(mr)?pe(Jt,mr):Jt[Jt.length]=mr}return Jt}var es=cl();function wi(ne,_e){return ne&&es(ne,_e,hl)}function qs(ne,_e){_e=lo(_e,ne)?[_e]:pa(_e);for(var Ye=0,bt=_e.length;ne!=null&&Ye<bt;)ne=ne[pn(_e[Ye++])];return Ye&&Ye==bt?ne:void 0}function _o(ne){return Ee.call(ne)}function io(ne,_e){return ne!=null&&_e in Object(ne)}function jo(ne,_e,Ye,bt,Jt){return ne===_e?!0:ne==null||_e==null||!ji(ne)&&!Ui(_e)?ne!==ne&&_e!==_e:ws(ne,_e,jo,Ye,bt,Jt)}function ws(ne,_e,Ye,bt,Jt,Ut){var Cn=Jr(ne),mr=Jr(_e),Pr=d,ns=d;Cn||(Pr=fi(ne),Pr=Pr==u?v:Pr),mr||(ns=fi(_e),ns=ns==u?v:ns);var Es=Pr==v&&!J(ne),_i=ns==v&&!J(_e),Fi=Pr==ns;if(Fi&&!Es)return Ut||(Ut=new Zt),Cn||Gr(ne)?Wi(ne,_e,Ye,bt,Jt,Ut):Yi(ne,_e,Pr,Ye,bt,Jt,Ut);if(!(Jt&o)){var Te=Es&&Ae.call(ne,"__wrapped__"),ut=_i&&Ae.call(_e,"__wrapped__");if(Te||ut){var Wt=Te?ne.value():ne,Wn=ut?_e.value():_e;return Ut||(Ut=new Zt),Ye(Wt,Wn,bt,Jt,Ut)}}return Fi?(Ut||(Ut=new Zt),oo(ne,_e,Ye,bt,Jt,Ut)):!1}function Ms(ne,_e,Ye,bt){var Jt=Ye.length,Ut=Jt;if(ne==null)return!Ut;for(ne=Object(ne);Jt--;){var Cn=Ye[Jt];if(Cn[2]?Cn[1]!==ne[Cn[0]]:!(Cn[0]in ne))return!1}for(;++Jt<Ut;){Cn=Ye[Jt];var mr=Cn[0],Pr=ne[mr],ns=Cn[1];if(Cn[2]){if(Pr===void 0&&!(mr in ne))return!1}else{var Es=new Zt,_i;if(!(_i===void 0?jo(ns,Pr,bt,s|o,Es):_i))return!1}}return!0}function Uo(ne){if(!ji(ne)||Ht(ne))return!1;var _e=_s(ne)||J(ne)?De:ze;return _e.test($t(ne))}function ps(ne){return Ui(ne)&&Ws(ne.length)&&!!je[Ee.call(ne)]}function ll(ne){return typeof ne=="function"?ne:ne==null?Jc:typeof ne=="object"?Jr(ne)?so(ne[0],ne[1]):ts(ne):Ku(ne)}function ul(ne){if(!Z(ne))return xt(ne);var _e=[];for(var Ye in Object(ne))Ae.call(ne,Ye)&&Ye!="constructor"&&_e.push(Ye);return _e}function kr(ne,_e){var Ye=-1,bt=ar(ne)?Array(ne.length):[];return qt(ne,function(Jt,Ut,Cn){bt[++Ye]=_e(Jt,Ut,Cn)}),bt}function ts(ne){var _e=qo(ne);return _e.length==1&&_e[0][2]?Be(_e[0][0],_e[0][1]):function(Ye){return Ye===ne||Ms(Ye,ne,_e)}}function so(ne,_e){return lo(ne)&&me(_e)?Be(pn(ne),_e):function(Ye){var bt=Zu(Ye,ne);return bt===void 0&&bt===_e?fl(Ye,ne):jo(_e,bt,void 0,s|o)}}function Is(ne){return function(_e){return qs(_e,ne)}}function Hs(ne){if(typeof ne=="string")return ne;if(Eo(ne))return mn?mn.call(ne):"";var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function pa(ne){return Jr(ne)?ne:yt(ne)}function Gs(ne,_e){return function(Ye,bt){if(Ye==null)return Ye;if(!ar(Ye))return ne(Ye,bt);for(var Jt=Ye.length,Ut=-1,Cn=Object(Ye);++Ut<Jt&&bt(Cn[Ut],Ut,Cn)!==!1;);return Ye}}function cl(ne){return function(_e,Ye,bt){for(var Jt=-1,Ut=Object(_e),Cn=bt(_e),mr=Cn.length;mr--;){var Pr=Cn[++Jt];if(Ye(Ut[Pr],Pr,Ut)===!1)break}return _e}}function Wi(ne,_e,Ye,bt,Jt,Ut){var Cn=Jt&o,mr=ne.length,Pr=_e.length;if(mr!=Pr&&!(Cn&&Pr>mr))return!1;var ns=Ut.get(ne);if(ns&&Ut.get(_e))return ns==_e;var Es=-1,_i=!0,Fi=Jt&s?new jt:void 0;for(Ut.set(ne,_e),Ut.set(_e,ne);++Es<mr;){var Te=ne[Es],ut=_e[Es];if(bt)var Wt=Cn?bt(ut,Te,Es,_e,ne,Ut):bt(Te,ut,Es,ne,_e,Ut);if(Wt!==void 0){if(Wt)continue;_i=!1;break}if(Fi){if(!ie(_e,function(Wn,gr){if(!Fi.has(gr)&&(Te===Wn||Ye(Te,Wn,bt,Jt,Ut)))return Fi.add(gr)})){_i=!1;break}}else if(!(Te===ut||Ye(Te,ut,bt,Jt,Ut))){_i=!1;break}}return Ut.delete(ne),Ut.delete(_e),_i}function Yi(ne,_e,Ye,bt,Jt,Ut,Cn){switch(Ye){case O:if(ne.byteLength!=_e.byteLength||ne.byteOffset!=_e.byteOffset)return!1;ne=ne.buffer,_e=_e.buffer;case R:return!(ne.byteLength!=_e.byteLength||!bt(new We(ne),new We(_e)));case c:case f:case y:return Ln(+ne,+_e);case h:return ne.name==_e.name&&ne.message==_e.message;case E:case T:return ne==_e+"";case b:var mr=re;case S:var Pr=Ut&o;if(mr||(mr=xe),ne.size!=_e.size&&!Pr)return!1;var ns=Cn.get(ne);if(ns)return ns==_e;Ut|=s,Cn.set(ne,_e);var Es=Wi(mr(ne),mr(_e),bt,Jt,Ut,Cn);return Cn.delete(ne),Es;case D:if(Rr)return Rr.call(ne)==Rr.call(_e)}return!1}function oo(ne,_e,Ye,bt,Jt,Ut){var Cn=Jt&o,mr=hl(ne),Pr=mr.length,ns=hl(_e),Es=ns.length;if(Pr!=Es&&!Cn)return!1;for(var _i=Pr;_i--;){var Fi=mr[_i];if(!(Cn?Fi in _e:Ae.call(_e,Fi)))return!1}var Te=Ut.get(ne);if(Te&&Ut.get(_e))return Te==_e;var ut=!0;Ut.set(ne,_e),Ut.set(_e,ne);for(var Wt=Cn;++_i<Pr;){Fi=mr[_i];var Wn=ne[Fi],gr=_e[Fi];if(bt)var Nn=Cn?bt(gr,Wn,Fi,_e,ne,Ut):bt(Wn,gr,Fi,ne,_e,Ut);if(!(Nn===void 0?Wn===gr||Ye(Wn,gr,bt,Jt,Ut):Nn)){ut=!1;break}Wt||(Wt=Fi=="constructor")}if(ut&&!Wt){var qi=ne.constructor,Na=_e.constructor;qi!=Na&&"constructor"in ne&&"constructor"in _e&&!(typeof qi=="function"&&qi instanceof qi&&typeof Na=="function"&&Na instanceof Na)&&(ut=!1)}return Ut.delete(ne),Ut.delete(_e),ut}function ms(ne,_e){var Ye=ne.__data__;return dl(_e)?Ye[typeof _e=="string"?"string":"hash"]:Ye.map}function qo(ne){for(var _e=hl(ne),Ye=_e.length;Ye--;){var bt=_e[Ye],Jt=ne[bt];_e[Ye]=[bt,Jt,me(Jt)]}return _e}function Vs(ne,_e){var Ye=H(ne,_e);return Uo(Ye)?Ye:void 0}var fi=_o;(Qt&&fi(new Qt(new ArrayBuffer(1)))!=O||rn&&fi(new rn)!=b||sn&&fi(sn.resolve())!=w||on&&fi(new on)!=S||Tn&&fi(new Tn)!=k)&&(fi=function(ne){var _e=Ee.call(ne),Ye=_e==v?ne.constructor:void 0,bt=Ye?$t(Ye):void 0;if(bt)switch(bt){case Qi:return O;case hs:return b;case Vi:return w;case zo:return S;case Hn:return k}return _e});function Pa(ne,_e,Ye){_e=lo(_e,ne)?[_e]:pa(_e);for(var bt,Jt=-1,Cn=_e.length;++Jt<Cn;){var Ut=pn(_e[Jt]);if(!(bt=ne!=null&&Ye(ne,Ut)))break;ne=ne[Ut]}if(bt)return bt;var Cn=ne?ne.length:0;return!!Cn&&Ws(Cn)&&Xi(Ut,Cn)&&(Jr(ne)||ki(ne))}function ao(ne){return Jr(ne)||ki(ne)||!!(Kt&&ne&&ne[Kt])}function Xi(ne,_e){return _e=_e??l,!!_e&&(typeof ne=="number"||He.test(ne))&&ne>-1&&ne%1==0&&ne<_e}function lo(ne,_e){if(Jr(ne))return!1;var Ye=typeof ne;return Ye=="number"||Ye=="symbol"||Ye=="boolean"||ne==null||Eo(ne)?!0:le.test(ne)||!te.test(ne)||_e!=null&&ne in Object(_e)}function dl(ne){var _e=typeof ne;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ne!=="__proto__":ne===null}function Ht(ne){return!!ae&&ae in ne}function Z(ne){var _e=ne&&ne.constructor,Ye=typeof _e=="function"&&_e.prototype||Q;return ne===Ye}function me(ne){return ne===ne&&!ji(ne)}function Be(ne,_e){return function(Ye){return Ye==null?!1:Ye[ne]===_e&&(_e!==void 0||ne in Object(Ye))}}var yt=Tr(function(ne){ne=ma(ne);var _e=[];return ee.test(ne)&&_e.push(""),ne.replace(z,function(Ye,bt,Jt,Ut){_e.push(Jt?Ut.replace(fe,"$1"):bt||Ye)}),_e});function pn(ne){if(typeof ne=="string"||Eo(ne))return ne;var _e=ne+"";return _e=="0"&&1/ne==-a?"-0":_e}function $t(ne){if(ne!=null){try{return ke.call(ne)}catch{}try{return ne+""}catch{}}return""}function Pn(ne,_e){return xi(hr(ne,_e))}function hr(ne,_e){var Ye=Jr(ne)?Ze:kr;return Ye(ne,ll(_e))}function Tr(ne,_e){if(typeof ne!="function"||_e&&typeof _e!="function")throw new TypeError(r);var Ye=function(){var bt=arguments,Jt=_e?_e.apply(this,bt):bt[0],Ut=Ye.cache;if(Ut.has(Jt))return Ut.get(Jt);var Cn=ne.apply(this,bt);return Ye.cache=Ut.set(Jt,Cn),Cn};return Ye.cache=new(Tr.Cache||en),Ye}Tr.Cache=en;function Ln(ne,_e){return ne===_e||ne!==ne&&_e!==_e}function ki(ne){return hi(ne)&&Ae.call(ne,"callee")&&(!tt.call(ne,"callee")||Ee.call(ne)==u)}var Jr=Array.isArray;function ar(ne){return ne!=null&&Ws(ne.length)&&!_s(ne)}function hi(ne){return Ui(ne)&&ar(ne)}function _s(ne){var _e=ji(ne)?Ee.call(ne):"";return _e==p||_e==g}function Ws(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=l}function ji(ne){var _e=typeof ne;return!!ne&&(_e=="object"||_e=="function")}function Ui(ne){return!!ne&&typeof ne=="object"}function Eo(ne){return typeof ne=="symbol"||Ui(ne)&&Ee.call(ne)==D}var Gr=Mn?F(Mn):ps;function ma(ne){return ne==null?"":Hs(ne)}function Zu(ne,_e,Ye){var bt=ne==null?void 0:qs(ne,_e);return bt===void 0?Ye:bt}function fl(ne,_e){return ne!=null&&Pa(ne,_e,io)}function hl(ne){return ar(ne)?Fr(ne):ul(ne)}function Jc(ne){return ne}function Ku(ne){return lo(ne)?oe(pn(ne)):Is(ne)}t.exports=Pn}(h_,h_.exports)),h_.exports}var rDt=nDt();const P$e=aa(rDt);function iDt(t,e,n){let r=[];t.filterProperties.length&&t.filterProperties.forEach(s=>{const o={},a=u=>s.format==="date"?Lc(u).unix():parseFloat(u);e.forEach(u=>{var d,c;if(s.type==="range"){const f=P2(s.key,u);if(Array.isArray(f)){const h=[a(f[0]),a(f[1])];o.min=o.min!==void 0?Math.min(o.min,h[0]):h[0],o.max=o.max!==void 0?Math.max(o.max,h[1]):h[1]}else{const h=a(f);o.min=o.min!==void 0?Math.min(o.min,h):h,o.max=o.max!==void 0?Math.max(o.max,h):h}return}Array.isArray(u[s.key])?u[s.key].forEach(f=>{o[f]=void 0}):s.type==="spatial"?(o.geometry=((d=s==null?void 0:s.state)==null?void 0:d.geometry)||void 0,o.geometry&&(s.stringifiedState=o.geometry.type),o.mode=s.mode||"intersects"):(c=s.key)!=null&&c.includes(".")?$$e(P$e(n.items,s.key)).filter(f=>f).forEach(f=>{o[f]=void 0}):o[u[s.key]]=void 0});const l=s.key||s.keys.join("|");n.filters[l]=Object.assign({type:s.type||"multiselect",dirty:s.state?Object.values(s.state).some(u=>u):void 0,key:l},s.type==="range"?{min:o.min,max:o.max,format:s.format}:{},s),n.filters[l].state=Object.assign({},o,s.state)}),t.matchAllWhenEmpty!==!1&&(n.results=n.sortResults(e),n.requestUpdate()),t.aggregateResults&&(r=Array.from(new Set(e.reduce((s,o)=>s.concat(o[t.aggregateResults]),[]))).sort((s,o)=>s.localeCompare(o)));const i=[];return Object.values(n.filters).forEach(s=>{s.type==="text"?s.keys.forEach(o=>{i.includes(o)||i.push(o)}):(s.type==="select"||s.type==="multiselect")&&(i.includes(s.key)||i.push(s.key))}),xTt(e,Object.assign({keys:i},t.fuseConfig)),r}async function sDt(t,e,n){let r;n.externalFilter?r=await CTt(e,n.filters,t):r=await wTt(e,n.filters,t),n.results=n.sortResults(r)}function oDt(t,e,n){const r=`filter-${t.key}`.replace("|","-");switch(t.type){case"text":return et`<eox-itemfilter-text
        data-type="filter"
        data-cy="text-filter"
        slot="filter"
        id="${r}"
        .tabIndex=${e}
        .filterObject=${t}
        .unstyled=${n.unstyled}
        @filter=${()=>n.search()}
      ></eox-itemfilter-text>`;case"multiselect":case"select":return et`
        <eox-itemfilter-select
          .inlineMode=${n.inlineMode||!1}
          data-type="filter"
          id="${r}"
          .tabIndex=${e}
          .filterObject=${t}
          slot="filter"
          .suggestions="${$$e(P$e(n.items,t.key)).filter(i=>i)}"
          type="${t.type}"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-select>
      `;case"range":return et`
        <eox-itemfilter-range
          id="${r}"
          data-type="filter"
          .tabIndex=${e}
          .filterObject=${t}
          slot="filter"
          .unstyled=${n.unstyled}
          @filter=${()=>n.search()}
        ></eox-itemfilter-range>
      `;case"spatial":return et`
        <eox-itemfilter-spatial
          id="${r}"
          data-type="filter"
          .tabIndex=${e}
          .filterObject=${t}
          slot="filter"
          @filter=${()=>n.search()}
        ></eox-itemfilter-spatial>
      `;default:return et``}}function aDt(t,e){return[...t].sort((n,r)=>n[e.titleProperty].localeCompare(r[e.titleProperty]))}function lDt(t,e,n){return et`
    ${qn(t.dirty,()=>et`
        <button
          type="button"
          tabindex=${e}
          slot="reset-button"
          class="reset-icon icon"
          @click=${r=>{const i=r.target.parentElement.querySelector("[slot=filter]");i&&typeof i.reset=="function"&&i.reset(),n.search(),n.requestUpdate()}}
        >
          ${n.unstyled?"Reset":ni}
        </button>
      `)}
  `}function uDt(t){t.renderRoot.querySelectorAll("[data-type='filter']").forEach(e=>{typeof e.reset=="function"&&e.reset()}),t.search()}var tE,Zb,ku,Hv,N$e,B$e;class cDt extends Zr{constructor(){super();gn(this,Hv);gn(this,tE,[]);gn(this,Zb,[]);gn(this,ku,QTt);this.items=null,this.filters={},this.results=[],this.selectedResult=null,this.search=Q0(this.searchHandler,100,{leading:!0}),this.aggregateResults=void 0,this.autoSpreadSingle=!1,this.enableHighlighting=!1,this.externalFilter=null,this.filterProperties=[],this.fuseConfig={},this.inlineMode=!1,this.matchAllWhenEmpty=!0,this.showResults=!0,this.titleProperty="title",this.subTitleProperty=void 0,this.imageProperty=void 0,this.idProperty="id",this.expandMultipleFilters=!0,this.expandResults=!0,this.expandMultipleResults=!0,this.resultType="list",this.unstyled=!1}static get properties(){return{items:{attribute:!1,type:Object},results:{state:!0,attribute:!1,type:Object},filters:{state:!0,attribute:!1,type:Object},selectedResult:{attribute:!1,type:Object},aggregateResults:{attribute:"aggregate-results",type:String},autoSpreadSingle:{attribute:"auto-spread-single",type:Boolean},enableHighlighting:{attribute:"enable-highlighting",type:Boolean},filterProperties:{attribute:!1,type:Array},fuseConfig:{attribute:!1,type:Object},inlineMode:{attribute:"inline-mode",type:Boolean},matchAllWhenEmpty:{attribute:"match-all-when-empty",type:Boolean},showResults:{attribute:"show-result",type:Boolean},idProperty:{attribute:"id-property",type:String},titleProperty:{attribute:"title-property",type:String},subTitleProperty:{attribute:"sub-title-property",type:String},imageProperty:{attribute:"image-property",type:String},expandMultipleFilters:{attribute:"enable-multiple-filter",type:Boolean},expandResults:{attribute:"expand-result",type:Boolean},expandMultipleResults:{attribute:"expand-multiple-results",type:Boolean},externalFilter:{attribute:!1,type:Function},resultType:{attribute:"result-type",type:String},unstyled:{type:Boolean}}}apply(){gs(this,tE,iDt(Gt(this,ku),Gt(this,Zb),this)),this.search()}async searchHandler(){await sDt(Gt(this,ku),Gt(this,Zb),this),this.dispatchEvent(new CustomEvent("filter",{detail:{results:this.results,filters:this.filters},bubbles:!0,composed:!0})),this.inlineMode&&this.renderRoot.querySelector("eox-itemfilter-container").updateInline(),this.requestUpdate()}sortResults(n){return aDt(n,Gt(this,ku))}resetFilters(){uDt(this)}firstUpdated(n){var i;let r={};OEe.map(s=>{r={...r,[s]:this[s]}}),gs(this,ku,r),gs(this,Zb,((i=this.items)==null?void 0:i.map((s,o)=>Object.assign({id:s[this.idProperty]||`item-${o}`},s)))||[]),this.apply()}updated(n){OEe.map(r=>{if(n.has(r))return this.firstUpdated(),!0})}updateResult(n){this.selectedResult=n.detail,this.dispatchEvent(new CustomEvent("select",{detail:this.selectedResult,bubbles:!0,composed:!0})),this.requestUpdate()}render(){var n;return et`
      <style>
        ${fkt}
        ${!this.unstyled&&lC}
        ${!this.unstyled&&hkt}
        ${this.styleOverride}
      </style>
      <form
        id="itemfilter"
        class=${this.inlineMode?"inline":ni}
        @submit="${r=>r.preventDefault()}"
      >
        ${qn(this.filterProperties,()=>et`
            <eox-itemfilter-container
              .filters=${this.filters}
              .filterProperties=${this.filterProperties}
              .inlineMode=${this.inlineMode||!1}
              @reset=${()=>this.resetFilters()}
              @filter=${()=>this.search()}
            >
              <section slot="section">
                ${qn(!this.inlineMode,()=>et`
                    <slot name="filterstitle"
                      ><h6 class="main-heading">Filters</h6></slot
                    >
                  `)}
                <ul id="filters">
                  ${lu(Object.values(this.filters),(r,i)=>et` <li>
                        <eox-itemfilter-expandcontainer
                          .filterObject=${r}
                          @details-toggled=${s=>m$e(s,Gt(this,ku),this)}
                          data-details="${r.key}"
                        >
                          ${yn(this,Hv,B$e).call(this,r,REe(i,1))}
                          ${yn(this,Hv,N$e).call(this,r,REe(i,2))}
                        </eox-itemfilter-expandcontainer>
                      </li>`)}
                </ul>
                ${qn(!this.inlineMode&&Gt(this,ku).filterProperties&&!this.inlineMode&&Gt(this,ku).filterProperties&&L6(this.filters),()=>et`
                    <button
                      type="button"
                      id="filter-reset"
                      class="outline small icon-text reset-icon"
                      data-cy="filter-reset"
                      @click=${()=>this.resetFilters()}
                    >
                      Reset all
                    </a>
                  `)}
              </section>
            </eox-itemfilter-container>
          `)}
        ${qn(((n=Gt(this,ku))==null?void 0:n.showResults)&&this.results,()=>et`
            <eox-itemfilter-results
              .config=${Gt(this,ku)}
              .results=${this.results}
              .filters=${this.filters}
              .resultAggregation=${Gt(this,tE)}
              .selectedResult=${this.selectedResult}
              .resultType=${this.resultType}
              @result=${this.updateResult}
            >
              <slot name="resultstitle"
                ><h6 class="main-heading">Results</h6></slot
              >
            </eox-itemfilter-results>
          `)}
      </form>
    `}}tE=new WeakMap,Zb=new WeakMap,ku=new WeakMap,Hv=new WeakSet,N$e=function(n,r){return oDt(n,r,this)},B$e=function(n,r){return lDt(n,r,this)};customElements.define("eox-itemfilter",cDt);const dDt=t=>typeof t.type!="string"&&"multiple",fDt=t=>typeof t.type=="string"&&"string",hDt=t=>!t.type&&t.properties&&"object",pDt=t=>typeof t.type=="string"&&["string","number","integer","boolean","null","array","object"].includes(t.type)&&t.type,mDt=t=>t.type==="string"&&t.format==="signature"&&"signature",gDt=t=>{if(t.type==="boolean")return t.format==="checkbox"||t.options&&t.options.checkbox?"checkbox":t.format==="select2"?"select2":t.format==="selectize"?"selectize":t.format==="choices"?"choices":"select"},yDt=t=>t.type==="any"&&"multiple",bDt=t=>t.type==="string"&&t.media&&t.media.binaryEncoding==="base64"&&"base64",vDt=t=>t.type==="string"&&t.format==="url"&&window.FileReader&&t.options&&t.options.upload===Object(t.options.upload)&&"upload",xDt=t=>t.type==="array"&&t.format==="table"&&"table",wDt=t=>{if(t.enumSource)return t.format==="radio"?"radio":t.format==="select2"?"select2":t.format==="selectize"?"selectize":t.format==="choices"?"choices":"select"},_Dt=t=>{if(t.enum){if(t.type==="array"||t.type==="object")return"enum";if(t.type==="number"||t.type==="integer"||t.type==="string")return t.format==="radio"?"radio":t.format==="select2"?"select2":t.format==="selectize"?"selectize":t.format==="choices"?"choices":"select"}},EDt=(t,e)=>{if(t.items&&(t.items=e.expandSchema(t.items)),t.type==="array"&&t.items&&!Array.isArray(t.items)&&["string","number","integer"].includes(t.items.type)){if(t.format==="choices")return"arrayChoices";if(t.uniqueItems){if(t.format==="selectize")return"arraySelectize";if(t.format==="select2")return"arraySelect2";if(t.items.enum)return"multiselect"}}},CDt=t=>{var e;return(t.oneOf||t.anyOf)&&(((e=t.options)==null?void 0:e.switcher)??!0)===!0&&"multiple"},SDt=t=>t.if&&"multiple",ADt=t=>["string","integer"].includes(t.type)&&["date","time","datetime-local"].includes(t.format)&&"datetime",kDt=t=>["string","integer"].includes(t.type)&&["starrating","rating"].includes(t.format)&&"starrating",TDt=t=>{if(t.links){for(let e=0;e<t.links.length;e++)if(t.links[e].rel&&t.links[e].rel.toLowerCase()==="describedby")return"describedBy"}},DDt=t=>{if((t.type==="integer"||t.type==="number")&&t.format==="stepper")return"stepper"},LDt=t=>t.format==="button"&&"button",RDt=t=>t.format==="info"&&"info",FDt=t=>t.type==="string"&&t.format==="uuid"&&"uuid",ODt=t=>t.type==="string"&&t.format==="autocomplete"&&"autocomplete",MDt=t=>t.type==="string"&&t.format==="jodit"&&"jodit",IDt=t=>t.type==="string"&&t.format==="markdown"&&"simplemde",$Dt=t=>t.type==="string"&&["xhtml","bbcode"].includes(t.format)&&"sceditor",PDt=["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","prql","r","ruby","rust","sass","scala","scss","sh","smarty","sql","sqlserver","stylus","svg","typescript","twig","vbscript","xml","yaml","zig"],NDt=t=>t.type==="string"&&PDt.includes(t.format)&&"ace",BDt=t=>t.type==="string"&&["ip","ipv4","ipv6","hostname"].includes(t.format)&&"ip",zDt=t=>t.type==="string"&&t.format==="color"&&"colorpicker",jDt=[zDt,BDt,NDt,$Dt,IDt,MDt,ODt,FDt,RDt,LDt,DDt,TDt,kDt,ADt,CDt,SDt,EDt,_Dt,wDt,xDt,vDt,bDt,yDt,gDt,mDt,pDt,hDt,dDt,fDt];function z$e(t){return!(t===null||typeof t!="object"||t.nodeType||t===t.window||t.constructor&&!cu(t.constructor.prototype,"isPrototypeOf"))}function j$e(t){return z$e(t)?$n({},t):Array.isArray(t)?t.map(j$e):t}function $n(t,...e){return e.forEach(n=>{n&&Object.keys(n).forEach(r=>{n[r]&&z$e(n[r])?(cu(t,r)||(t[r]={}),$n(t[r],n[r])):Array.isArray(n[r])?t[r]=j$e(n[r]):t[r]=n[r]})}),t}function Rc(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function U$e(t){return t&&(t.toString()==="[object ShadowRoot]"?t:U$e(t.parentNode))}function cu(t,e){return t&&Object.prototype.hasOwnProperty.call(t,e)}const UDt=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function qDt(t){if(typeof t>"u"||t===null)return!1;const e=t.match(UDt),n=parseFloat(t);return e!==null&&!isNaN(n)&&isFinite(n)}const HDt=/^\s*(-|\+)?(\d+)\s*$/;function GDt(t){if(typeof t>"u"||t===null)return!1;const e=t.match(HDt),n=parseInt(t);return e!==null&&!isNaN(n)&&isFinite(n)}function N2(){let t=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(e==="x"?n:n&3|8).toString(16)})}function o5(t){return t&&typeof t=="object"&&!Array.isArray(t)}function aT(t,...e){if(!e.length)return t;const n=e.shift();if(o5(t)&&o5(n))for(const r in n)o5(n[r])?(t[r]||Object.assign(t,{[r]:{}}),aT(t[r],n[r])):Object.assign(t,{[r]:n[r]});return aT(t,...e)}function VDt(t,e){return Object.keys(e).forEach(function(n){n in t&&(t[n]=e[n])}),t}class ca{constructor(e,n){this.defaults=n,this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=$n({},this.options||{},this.schema.options||{},e.schema.options||{},e),this.enforceConstEnabled=this.options.enforce_const??this.jsoneditor.options.enforce_const,this.formname=this.jsoneditor.options.form_name_root||"root",!e.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=e.path||this.formname,this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=e.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,this.optInWidget=this.options.opt_in_widget??this.jsoneditor.options.opt_in_widget,e.container&&this.setContainer(e.container),this.registerDependencies()}onChildEditorChange(e,n){this.onChange(!0,!1,n)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(e){this.parent?this.parent.onChildEditorChange(this,e):this.jsoneditor&&this.jsoneditor.onChange(e)}onChange(e,n,r){this.notify(),n||this.watch_listener&&this.watch_listener(),e&&this.change(r)}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const e=this.getTitle()||this.formname;this.input.setAttribute("aria-label",e)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const e=this.options.dependencies;e&&Object.keys(e).forEach(n=>{let r;n.startsWith(this.jsoneditor.root.path)?r=n:(r=this.path.split("."),r[r.length-1]=n,r=r.join(".")),this.jsoneditor.watch(r,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const e=this.container||this.control;if(!e||this.jsoneditor===null)return;const n=this.options.dependencies;if(!n)return;const r=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(n).forEach(s=>{let o;s.startsWith(this.jsoneditor.root.path)?o=s:(o=this.path.split("."),o[o.length-1]=s,o=o.join("."));const l=n[s];this.checkDependency(o,l)}),this.dependenciesFulfilled!==r&&this.notify();let i=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(i="none"),e.tagName==="TD"?Object.keys(e.childNodes).forEach(s=>e.childNodes[s].style.display=i):e.style.display=i}checkDependency(e,n){if(this.path===e||this.jsoneditor===null)return;const r=this.jsoneditor.getEditor(e),i=r?r.getValue():void 0;!r||!r.dependenciesFulfilled||!i?this.dependenciesFulfilled=!1:Array.isArray(n)?this.dependenciesFulfilled=n.some(s=>{if(JSON.stringify(i)===JSON.stringify(s))return!0}):typeof n=="object"?typeof i!="object"?this.dependenciesFulfilled=n===i:Object.keys(n).some(s=>{if(!cu(n,s))return!1;if(!cu(i,s)||n[s]!==i[s])return this.dependenciesFulfilled=!1,!0}):typeof n=="string"||typeof n=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&i===n:typeof n=="boolean"&&(n?this.dependenciesFulfilled=this.dependenciesFulfilled&&(i||i.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!i||i.length===0))}setContainer(e){this.container=e,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(){let e;this.optInWidget==="switch"?e=this.theme.getOptInSwitch(this.formname):e=this.theme.getOptInCheckbox(this.formname),this.optInCheckbox=e.checkbox,this.optInContainer=e.container,this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const n=this.jsoneditor.options.show_opt_in,r=typeof this.parent.options.show_opt_in<"u",i=r&&this.parent.options.show_opt_in===!0,s=r&&this.parent.options.show_opt_in===!1;(i||!s&&n||!r&&n)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.insertBefore(this.optInContainer,this.header.firstChild),this.optInAppended=!0)}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConstEnabled&&this.schema.const&&this.disable()}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},cu(this.schema,"watch")){let e,n,r,i,s;const o=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(a=>{if(e=this.schema.watch[a],Array.isArray(e)){if(e.length<2)return;n=[e[0]].concat(e[1].split("."))}else n=e.split("."),this.theme.closest(this.container,`[data-schemaid="${n[0]}"]`)||n.unshift("#");if(r=n.shift(),r==="#"&&(r=this.jsoneditor.schema.id||this.jsoneditor.root.formname),i=this.theme.closest(this.container,`[data-schemaid="${r}"]`),!i)throw new Error(`Could not find ancestor node with id ${r}`);s=`${i.getAttribute("data-schemapath")}.${n.join(".")}`,o.startsWith(s)&&(this.watchLoop=!0),this.jsoneditor.watch(s,this.watch_listener),this.watched[a]=s})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))}onMove(){}getButton(e,n,r,i=[]){const s=`json-editor-btn-${n}`;this.iconlib?n=this.iconlib.getIcon(n):n=null,e=this.translate(e,i),r=this.translate(r,i),!n&&r&&(e=r,r=null);const o=this.theme.getButton(e,n,r);return o.classList.add(s),o}setButtonText(e,n,r,i,s=[]){return this.iconlib?r=this.iconlib.getIcon(r):r=null,n=this.translate(n,s),i=this.translate(i,s),!r&&i&&(n=i,i=null),this.theme.setButtonText(e,n,r,i)}addLink(e){this.link_holder&&this.link_holder.appendChild(e)}getLink(e){let n,r;const s=(e.mediaType||"application/javascript").split("/")[0],o=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=this.jsoneditor.compileTemplate(e.rel?e.rel:e.href,this.template_engine);let l=null;if(e.download&&(l=e.download),l&&l!==!0&&(l=this.jsoneditor.compileTemplate(l,this.template_engine)),s==="image"){n=this.theme.getBlockLinkHolder(),r=document.createElement("a"),r.setAttribute("target","_blank");const u=document.createElement("img");this.theme.createImageLink(n,r,u),this.link_watchers.push(d=>{const c=o(d),f=a(d);r.setAttribute("href",c),r.setAttribute("title",f||c),u.setAttribute("src",c)})}else if(["audio","video"].includes(s)){n=this.theme.getBlockLinkHolder(),r=this.theme.getBlockLink(),r.setAttribute("target","_blank");const u=document.createElement(s);u.setAttribute("controls","controls"),this.theme.createMediaLink(n,r,u),this.link_watchers.push(d=>{const c=o(d),f=a(d);r.setAttribute("href",c),r.textContent=f||c,u.setAttribute("src",c)})}else r=n=this.theme.getBlockLink(),n.setAttribute("target","_blank"),n.textContent=e.rel,n.style.display="none",this.link_watchers.push(u=>{const d=o(u),c=a(u);d&&(n.style.display=""),n.setAttribute("href",d),n.textContent=c||d});return l&&r&&(l===!0?r.setAttribute("download",""):this.link_watchers.push(u=>{r.setAttribute("download",l(u))})),e.class&&e.class.split(" ").forEach(d=>{r.classList.add(d)}),n}refreshWatchedFieldValues(){if(!this.watched_values)return;const e={};let n=!1;return this.watched&&Object.keys(this.watched).forEach(r=>{const i=this.jsoneditor.getEditor(this.watched[r]),s=i?i.getValue():null;this.watched_values[r]!==s&&(n=!0),e[r]=s}),e.self=this.getValue(),this.watched_values.self!==e.self&&(n=!0),this.watched_values=e,n}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const e=this.getHeaderText();if(this.header.children.length){for(let n=0;n<this.header.childNodes.length;n++)if(this.header.childNodes[n].nodeType===3){this.header.childNodes[n].nodeValue=this.cleanText(e);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(e):this.header.textContent=this.cleanText(e)}}getHeaderText(e){return this.header_text?this.header_text:e?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(e){const n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText}onWatchedFieldChange(){let e;if(this.header_template){e=$n(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(e.properties={},Object.keys(this.editors).forEach(r=>{const i=this.editors[r];if(i.schema&&i.schema.enum&&i.schema.options&&i.schema.options.enum_titles){const s=i.schema.enum.indexOf(i.value),o=i.options.enum_titles[s];e.properties[r]={enumTitle:o}}}));const n=this.header_template(e);n!==this.header_text&&(this.header_text=n,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(let n=0;n<this.link_watchers.length;n++)this.link_watchers[n](e)}}setValue(e){e=this.applyConstFilter(e),this.value=e}applyConstFilter(e){return this.enforceConstEnabled&&typeof this.schema.const<"u"&&(e=this.schema.const),e}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(e=>this.jsoneditor.unwatch(e,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(this.enforceConstEnabled&&this.schema.const)return this.schema.const;if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&typeof e=="object"&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),typeof e=="string"){if(e==="number")return this.isDefaultRequired()?0:void 0;if(e==="boolean")return this.isDefaultRequired()?!1:void 0;if(e==="integer")return this.isDefaultRequired()?0:void 0;if(e==="string")return this.isDefaultRequired()?"":void 0;if(e==="null")return null;if(e==="object")return{};if(e==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(e){const n=[],r={};e.forEach(s=>{s.title&&(r[s.title]=r[s.title]||0,r[s.title]++),s.description&&(r[s.description]=r[s.description]||0,r[s.description]++),s.format&&(r[s.format]=r[s.format]||0,r[s.format]++),s.type&&(r[s.type]=r[s.type]||0,r[s.type]++)}),e.forEach(s=>{let o;typeof s=="string"?o=s:s.title&&r[s.title]<=1?o=s.title:s.format&&r[s.format]<=1?o=s.format:s.type&&r[s.type]<=1?o=s.type:s.description&&r[s.description]<=1?o=s.description:s.title?o=s.title:s.format?o=s.format:s.type?o=s.type:s.description?o=s.description:JSON.stringify(s).length<500?o=JSON.stringify(s):o="type",n.push(o)});const i={};return n.forEach((s,o)=>{i[s]=i[s]||0,i[s]++,r[s]>1&&(n[o]=`${s} ${i[s]}`)}),n}getValidId(e){return e=e===void 0?"":e.toString(),e.replace(/\s+/g,"-")}setInputAttributes(e,n){if(this.schema.options&&this.schema.options.inputAttributes){const r=this.schema.options.inputAttributes,i=["name","type"].concat(e),s=n||this.input;Object.keys(r).forEach(o=>{i.includes(o.toLowerCase())||s.setAttribute(o,r[o])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const e=this.schema.options.containerAttributes,n=["data-schemapath","data-schematype","data-schemaid"];Object.keys(e).forEach(r=>{n.includes(r.toLowerCase())||this.container.setAttribute(r,e[r])})}}expandCallbacks(e,n){const r=this.defaults.callbacks[e];return Object.entries(n).forEach(([i,s])=>{s===Object(s)?n[i]=this.expandCallbacks(e,s):typeof s=="string"&&typeof r=="object"&&typeof r[s]=="function"&&(n[i]=r[s].bind(null,this))}),n}showValidationErrors(e){}}class yu extends ca{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}setValue(e,n,r){if(e=this.applyConstFilter(e),this.template&&!r||(!this.shouldBeUnset()&&(e===null||typeof e>"u")?e="":typeof e=="object"?e=JSON.stringify(e):!this.shouldBeUnset()&&typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const i=this.sanitize(e);if(this.input.value===i)return;if(this.setValueToInputField(i),this.format==="range"){const o=this.control.querySelector("output");o&&(o.value=i)}const s=r||this.getValue()!==e;return this.refreshValue(),n?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),s&&this.onChange(!0,r),{changed:s,value:i}}setValueToInputField(e){this.input.value=e===void 0?"":e}getNumColumns(){const e=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);let n;return this.input_type==="textarea"?n=6:["text","email"].includes(this.input_type)?n=4:n=2,Math.min(12,Math.max(e,n))}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";let i=this.schema.minimum||0,s=this.schema.maximum||Math.max(100,i+1),o=1;this.schema.multipleOf&&(i%this.schema.multipleOf&&(i=Math.ceil(i/this.schema.multipleOf)*this.schema.multipleOf),s%this.schema.multipleOf&&(s=Math.floor(s/this.schema.multipleOf)*this.schema.multipleOf),o=this.schema.multipleOf),this.input=this.theme.getRangeInput(i,s,o,this.description,this.formname),this.input.setAttribute("id",this.formname)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].includes(this.format)&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength<"u"&&this.input.setAttribute("maxlength",this.schema.maxLength),typeof this.schema.pattern<"u"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength<"u"&&this.input.setAttribute("pattern",`.{${this.schema.minLength},}`),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",i=>{if(i.preventDefault(),i.stopPropagation(),this.schema.template){i.currentTarget.value=this.value;return}const s=i.currentTarget.value,o=this.sanitize(s);s!==o&&(i.currentTarget.value=o),this.is_dirty=!0,this.refreshValue(),this.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=i=>{if(!i)return;let s,o=i.offsetHeight;if(i.offsetHeight<i.scrollHeight)for(s=0;i.offsetHeight<i.scrollHeight+3&&!(s>100);)s++,o++,i.style.height=`${o}px`;else{for(s=0;i.offsetHeight>=i.scrollHeight+3&&!(s>100);)s++,o--,i.style.height=`${o}px`;i.style.height=`${o+1}px`}},this.input.addEventListener("keyup",i=>{this.adjust_height(i.currentTarget)}),this.input.addEventListener("change",i=>{this.adjust_height(i.currentTarget)}),this.adjust_height());const e=this.options.prompt_paste_max_length_reached??this.jsoneditor.options.prompt_paste_max_length_reached,n=typeof this.schema.maxLength<"u";e&&n&&this.input.addEventListener("paste",i=>{(i.clipboardData||window.clipboardData).getData("text").length+this.input.value.length>this.schema.maxLength&&alert(this.translate("paste_max_length_reached",[this.schema.maxLength]))}),this.format&&this.input.setAttribute("data-schemaformat",this.format);let{input:r}=this;if(this.format==="range"&&(r=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,r,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{if(this.input.parentNode&&this.afterInputReady(),this.adjust_height&&this.adjust_height(this.input),this.format==="range"){const i=this.control.querySelector("output");i.value=this.input.value}}),this.schema.template){const i=this.expandCallbacks("template",{template:this.schema.template});typeof i.template=="function"?this.template=i.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}setupCleave(e){const n=this.expandCallbacks("cleave",$n({},this.defaults.options.cleave||{},this.options.cleave||{}));typeof n=="object"&&Object.keys(n).length>0&&(this.cleave_instance=new window.Cleave(e,n))}setupImask(e){const n=this.expandCallbacks("imask",$n({},this.defaults.options.imask||{},this.options.imask||{}));typeof n=="object"&&Object.keys(n).length>0&&(this.imask_instance=window.IMask(e,this.ajustIMaskOptions(n)))}ajustIMaskOptions(e){return Object.keys(e).forEach(n=>{if(e[n]===Object(e[n]))e[n]=this.ajustIMaskOptions(e[n]);else if(n==="mask")if(e[n].substr(0,6)==="regex:"){const r=e[n].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(r!==null)try{e[n]=new RegExp(r[1],r[2])}catch{}}else e[n]=this.getGlobalPropertyFromString(e[n])}),e}getGlobalPropertyFromString(e){if(e.includes(".")){const n=e.split("."),r=n[0],i=n[1];if(typeof window[r]<"u"&&typeof window[r][i]<"u")return window[r][i]}else if(typeof window[e]<"u")return window[e];return e}shouldBeUnset(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}getValue(){const e=!!(this.input&&this.input.value);if(!(this.shouldBeUnset()&&!e))return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:super.getValue()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}afterInputReady(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}refreshValue(){this.input&&(this.value=this.input.value,typeof this.value!="string"&&!this.shouldBeUnset()&&(this.value=""),this.serialized=this.value)}destroy(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}showValidationErrors(e){if(this.jsoneditor.options.show_errors!=="always"){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return}this.previous_error_setting=this.jsoneditor.options.show_errors;const n=(i,s)=>(s.path===this.path&&i.push(s.message),i),r=e.reduce(n,[]);r.length?this.theme.addInputError(this.input,`${r.join(". ")}.`):this.theme.removeInputError(this.input)}}class WDt extends yu{setValue(e,n,r){e=this.applyConstFilter(e);const i=super.setValue(e,n,r);i!==void 0&&i.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(i.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;if(window.ace){let n=this.input_type;(n==="cpp"||n==="c++"||n==="c")&&(n="c_cpp"),e=this.expandCallbacks("ace",$n({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:`ace/mode/${n}`})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,e),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",()=>{this.input.value=this.ace_editor_instance.getValue(),this.refreshValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),super.enable()}disable(e){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),super.disable(e)}destroy(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),super.destroy()}}const YDt={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};class I7 extends ca{askConfirmation(){return!(this.jsoneditor.options.prompt_before_delete===!0&&window.confirm(this.translate("button_delete_node_warning"))===!1)}register(){super.register(),this.rows&&this.rows.forEach(e=>e.register())}unregister(){super.unregister(),this.rows&&this.rows.forEach(e=>e.unregister())}getNumColumns(){const e=this.getItemInfo(0);return this.tabs_holder&&this.schema.format!=="tabs-top"?Math.max(Math.min(12,e.width+2),4):e.width}enable(){this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach(e=>{e.enable(),this.setAvailability(e,!1)}),super.enable())}disable(e){e&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach(n=>{n.disable(e),this.setAvailability(n,!0)}),super.disable()}setAvailability(e,n){e.add_row_button&&(e.add_row_button.disabled=n),e.remove_all_rows_button&&(e.remove_all_rows_button.disabled=n),e.delete_last_row_button&&(e.delete_last_row_button.disabled=n),e.copy_button&&(e.copy_button.disabled=n),e.delete_button&&(e.delete_button.disabled=n),e.moveup_button&&(e.moveup_button.disabled=n),e.movedown_button&&(e.movedown_button.disabled=n)}preBuild(){super.preBuild(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top}build(){this.options.compact?(this.title=this.theme.getHeader("",this.getPathDepth()),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs-top"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()}postBuild(){super.postBuild(),(this.schema.readOnly||this.schema.readonly)&&this.disable()}onChildEditorChange(e,n){this.refreshValue(),this.refreshTabs(!0),this.is_dirty=!0,super.onChildEditorChange(e,n)}getItemTitle(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){const e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=this.translateProperty(e.title)||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)}getItemSchema(e){if(Array.isArray(this.schema.items))if(e>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return $n({},this.schema.additionalItems)}else return $n({},this.schema.items[e]);else return this.schema.items?$n({},this.schema.items):{}}getItemInfo(e){let n=this.getItemSchema(e);this.item_info=this.item_info||{};const r=JSON.stringify(n);return typeof this.item_info[r]<"u"?this.item_info[r]:(n=this.jsoneditor.expandRefs(n),this.item_info[r]={title:this.translateProperty(n.title)||this.translate("default_array_item_title"),default:n.default,width:12,child_editors:n.properties||n.items},this.item_info[r])}getElementEditor(e){const n=this.getItemInfo(e);let r=this.getItemSchema(e);r=this.jsoneditor.expandRefs(r),r.title=`${n.title} ${e+1}`;const i=this.jsoneditor.getEditorClass(r);let s;this.tabs_holder?(this.schema.format==="tabs-top"?s=this.theme.getTopTabContent():s=this.theme.getTabContent(),s.id=`${this.path}.${e}`):n.child_editors?s=this.theme.getChildEditorHolder():s=this.theme.getIndentedPanel(),this.row_holder.appendChild(s);const o=this.jsoneditor.createEditor(i,{jsoneditor:this.jsoneditor,schema:r,container:s,path:`${this.path}.${e}`,parent:this,required:!0});return o.preBuild(),o.build(),o.postBuild(),o.title_controls||(o.array_controls=this.theme.getButtonHolder(),s.appendChild(o.array_controls)),o}checkParent(e){return e&&e.parentNode}destroy(){this.empty(!0),this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.controls)&&this.controls.parentNode.removeChild(this.controls),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,super.destroy()}empty(e){if(this.rows!==null){if(this.rows.forEach((n,r)=>{e&&(this.checkParent(n.tab)&&n.tab.parentNode.removeChild(n.tab),this.destroyRow(n,!0),this.row_cache[r]=null),this.rows[r]=null}),e)for(let n=this.rows.length;n<this.row_cache.length;n++)this.destroyRow(this.row_cache[n],!0),this.row_cache[n]=null;this.rows=[],e&&(this.row_cache=[])}}destroyRow(e,n){const r=e.container;n?(e.destroy(),r.parentNode&&r.parentNode.removeChild(r),this.checkParent(e.tab)&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),r.style.display="none",e.unregister())}getMax(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}refreshTabs(e){this.rows.forEach(n=>{n.tab&&(e?n.tab_text.textContent=n.getHeaderText():n.tab===this.active_tab?this.theme.markTabActive(n):this.theme.markTabInactive(n))})}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length).default);return this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax())),e}setValue(e=[],n){if(e=this.applyConstFilter(e),e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized){n&&this.refreshValue(n);return}e.forEach((o,a)=>{if(this.rows[a])this.rows[a].setValue(o,n);else if(this.row_cache[a])this.rows[a]=this.row_cache[a],this.rows[a].setValue(o,n),this.rows[a].container.style.display="",this.rows[a].tab&&(this.rows[a].tab.style.display=""),this.rows[a].register(),this.jsoneditor.trigger("addRow",this.rows[a]);else{const l=this.addRow(o,n);this.jsoneditor.trigger("addRow",l)}});for(let o=e.length;o<this.rows.length;o++)this.destroyRow(this.rows[o]),this.rows[o]=null;this.rows=this.rows.slice(0,e.length);const i=this.rows.find(o=>o.tab===this.active_tab);let s=typeof i<"u"?i.tab:null;!s&&this.rows.length&&(s=this.rows[0].tab),this.active_tab=s,this.refreshValue(n),this.refreshTabs(!0),this.refreshTabs(),this.onChange()}setButtonState(e,n){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:e.style.display=n?"":"none";break;case 2:e.disabled=!n;break;default:e.style.display=n?"":"none"}}setupButtons(e){const n=[];if(!this.value.length)this.setButtonState(this.delete_last_row_button,!1),this.setButtonState(this.remove_all_rows_button,!1);else if(this.value.length===1){this.setButtonState(this.remove_all_rows_button,!1);const i=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,i),n.push(i)}else{const i=!(e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,i),n.push(i);const s=!(e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,s),n.push(s)}const r=!(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button);return this.setButtonState(this.add_row_button,r),n.push(r),n.some(i=>i)}refreshValue(e){const n=this.value?this.value.length:0;if(this.value=this.rows.map(r=>r.getValue()),n!==this.value.length||e){const r=this.schema.minItems&&this.schema.minItems>=this.rows.length;this.rows.forEach((i,s)=>{if(i.movedown_button){const o=s!==this.rows.length-1;this.setButtonState(i.movedown_button,o)}i.delete_button&&this.setButtonState(i.delete_button,!r),this.value[s]=i.getValue()}),this.setupButtons(r)&&!this.collapsed?this.controls.style.display="inline-block":this.controls.style.display="none"}this.serialized=JSON.stringify(this.value)}addRow(e,n){const r=this.rows.length;this.rows[r]=this.getElementEditor(r),this.row_cache[r]=this.rows[r],this.tabs_holder?(this.rows[r].tab_text=document.createElement("span"),this.rows[r].tab_text.textContent=this.rows[r].getHeaderText(),this.schema.format==="tabs-top"?(this.rows[r].tab=this.theme.getTopTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTopTab(this.tabs_holder,this.rows[r].tab)):(this.rows[r].tab=this.theme.getTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTab(this.tabs_holder,this.rows[r].tab)),this.rows[r].tab.addEventListener("click",s=>{this.active_tab=this.rows[r].tab,this.refreshTabs(),s.preventDefault(),s.stopPropagation()}),this._supportDragDrop(this.rows[r].tab)):this._supportDragDrop(this.rows[r].container,!0);const i=this.rows[r].title_controls||this.rows[r].array_controls;return this.hide_delete_buttons||(this.rows[r].delete_button=this._createDeleteButton(r,i)),this.show_copy_button&&(this.rows[r].copy_button=this._createCopyButton(r,i)),r&&!this.hide_move_buttons&&(this.rows[r].moveup_button=this._createMoveUpButton(r,i)),this.hide_move_buttons||(this.rows[r].movedown_button=this._createMoveDownButton(r,i)),typeof e<"u"&&this.rows[r].setValue(e,n),this.refreshTabs(),this.rows[r]}_createDeleteButton(e,n){const r=this.getButton(this.getItemTitle(),"delete","button_delete_row_title",[this.getItemTitle()]);return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{if(i.preventDefault(),i.stopPropagation(),!this.askConfirmation())return!1;const s=i.currentTarget.getAttribute("data-i")*1,o=this.getValue().filter((d,c)=>c!==s);let a=null;const u=this.rows[s].getValue();this.setValue(o),this.rows[s]?a=this.rows[s].tab:this.rows[s-1]&&(a=this.rows[s-1].tab),a&&(this.active_tab=a,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",u)}),n&&n.appendChild(r),r}_createCopyButton(e,n){const r=this.getButton(this.getItemTitle(),"copy","button_copy_row_title",[this.getItemTitle()]),i=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{const o=this.getValue();s.preventDefault(),s.stopPropagation();const a=s.currentTarget.getAttribute("data-i")*1;o.forEach((l,u)=>{if(u===a){if(i.items.type==="string"&&i.items.format==="uuid")l=N2();else if(i.items.type==="object"&&i.items.properties)for(const d of Object.keys(l))i.items.properties&&i.items.properties[d]&&i.items.properties[d].format==="uuid"&&(l[d]=N2());o.push(l)}}),this.setValue(o),this.refreshValue(!0),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[a-1])}),n.appendChild(r),r}_createMoveUpButton(e,n){const r=this.getButton("",this.schema.format==="tabs-top"?"moveleft":"moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const s=i.currentTarget.getAttribute("data-i")*1;if(s<=0)return;const o=this.getValue(),a=o[s-1];o[s-1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s-1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),n&&n.appendChild(r),r}_createMoveDownButton(e,n){const r=this.getButton("",this.schema.format==="tabs-top"?"moveright":"movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const s=i.currentTarget.getAttribute("data-i")*1,o=this.getValue();if(s>=o.length-1)return;const a=o[s+1];o[s+1]=o[s],o[s]=a,this.setValue(o),this.active_tab=this.rows[s+1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),n&&n.appendChild(r),r}_supportDragDrop(e,n){q$e(e,(r,i)=>{const s=this.getValue(),o=s[r];s.splice(r,1),s.splice(i,0,o),this.setValue(s),this.active_tab=this.rows[i].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[i])},{useTrigger:n})}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.options.collapsed&&Rc(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton(),this.tabs&&(this.add_row_button.classList.add("je-array-control-btn"),this.delete_last_row_button.classList.add("je-array-control-btn"),this.remove_all_rows_button.classList.add("je-array-control-btn"))}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");e.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(e,this.title.childNodes[0]);const n=this.row_holder.style.display,r=this.controls.style.display;return e.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.panel&&this.setButtonState(this.panel,this.collapsed),this.tabs_holder&&this.setButtonState(this.tabs_holder,this.collapsed),this.collapsed?(this.collapsed=!1,this.row_holder.style.display=n,this.controls.style.display=r,this.setButtonText(i.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.row_holder.style.display="none",this.controls.style.display="none",this.setButtonText(i.currentTarget,"","expand","button_expand"))}),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const r=this.rows.length;let i;this.row_cache[r]?(i=this.rows[r]=this.row_cache[r],this.rows[r].setValue(this.rows[r].getDefault(),!0),typeof this.rows[r].deactivateNonRequiredProperties=="function"&&this.rows[r].deactivateNonRequiredProperties(!0),this.rows[r].container.style.display="",this.rows[r].tab&&(this.rows[r].tab.style.display=""),this.rows[r].register()):i=this.addRow(),this.active_tab=this.rows[r].tab,this.refreshTabs(),this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",i)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();let i=null;const s=r.pop();this.setValue(r),this.rows[this.rows.length-1]&&(i=this.rows[this.rows.length-1].tab),i&&(this.active_tab=i,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",s)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.empty(!0),this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}showValidationErrors(e){const n=[],r=[];e.forEach(i=>{i.path===this.path?n.push(i):r.push(i)}),this.error_holder&&(n.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n.forEach(i=>{this.error_holder.appendChild(this.theme.getErrorMessage(i.message))})):this.error_holder.style.display="none"),this.rows.forEach(i=>i.showValidationErrors(r))}}I7.rules=YDt;function q$e(t,e,n={}){n.useTrigger?t.addEventListener("mousedown",r=>{if(r.ctrlKey){t.draggable=!0;const i=s=>{t.draggable=!1,document.removeEventListener("dragend",i),document.removeEventListener("mouseup",i)};document.addEventListener("dragend",i),document.addEventListener("mouseup",i)}}):t.draggable=!0,t.addEventListener("dragstart",r=>{window.curDrag=t}),t.addEventListener("dragover",r=>{window.curDrag===null||window.curDrag===t||window.curDrag.parentElement!==t.parentElement?r.dataTransfer.dropEffect="none":r.dataTransfer.dropEffect="move",r.preventDefault()}),t.addEventListener("drop",r=>{if(r.preventDefault(),r.stopPropagation(),window.curDrag===null||window.curDrag===t||window.curDrag.parentElement!==t.parentElement)return;const i=a=>{let l=0,u=a.parentElement.firstElementChild;for(;u!==a&&u!==null;)u=u.nextSibling,++l;return l},s=i(window.curDrag),o=i(t);e(s,o,window.curDrag,t),window.curDrag=null})}class $R extends ca{onInputChange(){this.value=this.input.value,this.onChange(!0)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){let e=this.getTitle().length;return Object.keys(this.select_values).forEach(n=>e=Math.max(e,`${this.select_values[n]}`.length+4)),Math.min(12,Math.max(e/7,2))}preBuild(){super.preBuild(),this.select_options={},this.select_values={},this.option_titles=[],this.option_keys=[],this.option_enum=[];let e;const n=this.jsoneditor.expandRefs(this.schema.items||{}),r=n.enum||[],i=n.options?n.options.enum||[]:[],s=n.options?n.options.enum_titles||[]:[];for(e=0;e<r.length;e++){if(this.sanitize(r[e])!==r[e])continue;const o=i[e]||{};"title"in o||(o.title=`${s[e]||r[e]}`),this.option_keys.push(`${r[e]}`),this.option_enum.push(o),this.select_values[`${r[e]}`]=r[e]}}build(){let e;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){const n=this.formname+e.toString();this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.inputs[this.option_keys[e]].id=n,this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];const r=this.theme.getCheckboxLabel(this.option_enum[e].title);if(r.htmlFor=n,this.option_enum[e].infoText){const i=this.theme.getInfoButton(this.translateProperty(this.option_enum[e].infoText));r.appendChild(i)}this.controls["_"+this.option_keys[e]]=this.theme.getFormControl(r,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_enum.map(n=>n.title)),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=n=>{const r=[];for(e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]&&(this.select_options[this.option_keys[e]].selected||this.select_options[this.option_keys[e]].checked)&&r.push(this.select_values[this.option_keys[e]]);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame(()=>{this.afterInputReady()})}postBuild(){super.postBuild()}afterInputReady(){this.theme.afterInputReady(this.input||this.inputs)}setValue(e,n){e=this.applyConstFilter(e),e=e||[],Array.isArray(e)||(e=[e]),e=e.map(r=>`${r}`),Object.keys(this.select_options).forEach(r=>{this.select_options[r][this.input_type==="select"?"selected":"checked"]=e.includes(r)}),this.updateValue(e),this.onChange(!0)}removeValue(e){e=[].concat(e),this.setValue(this.getValue().filter(n=>!e.includes(n)))}addValue(e){this.setValue(this.getValue().concat(e))}updateValue(e){let n=!1;const r=[];for(let i=0;i<e.length;i++){if(!this.select_options[`${e[i]}`]){n=!0;continue}const s=this.sanitize(this.select_values[e[i]]);r.push(s),s!==e[i]&&(n=!0)}return this.value=r,n}sanitize(e){return this.schema.items.type==="boolean"?!!e:this.schema.items.type==="number"?1*e||0:this.schema.items.type==="integer"?Math.floor(e*1||0):`${e}`}enable(){this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach(e=>this.inputs[e].disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach(n=>this.inputs[n].disabled=!0),super.disable()}destroy(){super.destroy()}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}showValidationErrors(e){const n=new RegExp(`^${this.escapeRegExp(this.path)}(\\.\\d+)?$`),r=(s,o)=>(o.path.match(n)&&s.push(o.message),s),i=e.reduce(r,[]);i.length?this.theme.addInputError(this.input||this.inputs,`${i.join(". ")}.`):this.theme.removeInputError(this.input||this.inputs)}}class XDt extends $R{setValue(e,n){this.choices_instance?(e=this.applyConstFilter(e),e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):super.setValue(e,n)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",$n({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1}));this.newEnumAllowed=!1,this.choices_instance=new window.Choices(this.input,e),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=n=>{const r=this.choices_instance.getValue(!0);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}super.afterInputReady()}updateValue(e){e=[].concat(e);let n=!1;const r=[];for(let i=0;i<e.length;i++){if(!this.select_values[`${e[i]}`])if(n=!0,this.newEnumAllowed){if(!this.addNewOption(e[i]))continue}else continue;const s=this.sanitize(this.select_values[e[i]]);r.push(s),s!==e[i]&&(n=!0)}return this.value=r,n}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e),this.choices_instance.setChoices([{value:`${e}`,label:`${e}`}],"value","label",!1),!0}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}class ZDt extends $R{setValue(e,n){e=this.applyConstFilter(e),this.select2_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):super.setValue(e,n)}afterInputReady(){let e;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(e=this.expandCallbacks("select2",$n({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=e.tags=!!e.tags&&this.schema.items&&this.schema.items.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=cu(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const n=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(n),this.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),super.afterInputReady()}updateValue(e){e=[].concat(e);let n=!1;const r=[];for(let i=0;i<e.length;i++){if(!this.select_values[`${e[i]}`])if(n=!0,this.newEnumAllowed){if(!this.addNewOption(e[i]))continue}else continue;const s=this.sanitize(this.select_values[e[i]]);r.push(s),s!==e[i]&&(n=!0)}return this.value=r,n}addNewOption(e){this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.schema.items.enum.push(e);const n=this.input.querySelector(`option[value="${e}"]`);return n?n.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(e,e,!1,!1)).trigger("change"),!0}enable(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable()}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class KDt extends $R{setValue(e,n){e=this.applyConstFilter(e),this.selectize_instance?(e=[].concat(e).map(r=>`${r}`),this.updateValue(e),this.selectize_instance.setValue(this.value),this.onChange(!0)):super.setValue(e,n)}afterInputReady(){let e;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){e=this.expandCallbacks("selectize",$n({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=e.create=!!e.create&&this.schema.items&&this.schema.items.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=i=>{const s=this.selectize_instance.getValue();this.updateValue(s),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler);const n=this.theme.getHiddenLabel(this.formname);this.input.setAttribute("id",this.formname+"-hidden-input"),n.setAttribute("for",this.formname+"-hidden-input"),this.input.parentNode.insertBefore(n,this.input);const r=this.selectize_instance.$control[0];if(r){const i=this.theme.getHiddenLabel(this.formname);i.setAttribute("for",this.formname+"-selectized"),r.appendChild(i)}}super.afterInputReady()}updateValue(e){e=[].concat(e);let n=!1;const r=[];for(let i=0;i<e.length;i++){if(!this.select_values[`${e[i]}`])if(n=!0,this.newEnumAllowed){if(!this.addNewOption(e[i]))continue}else continue;const s=this.sanitize(this.select_values[e[i]]);r.push(s),s!==e[i]&&(n=!0)}return this.value=r,n}addNewOption(e){return this.option_keys.push(`${e}`),this.option_titles.push(`${e}`),this.select_values[`${e}`]=e,this.selectize_instance.addOption({text:e,value:e}),!0}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class JDt extends yu{postBuild(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),super.postBuild()}afterInputReady(){let e;window.Autocomplete&&!this.autocomplete_instance&&(e=this.expandCallbacks("autocomplete",$n({},{search:n=>(console.log(`No "search" callback defined for autocomplete in property "${n.key}"`),[]),onSubmit:()=>{this.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(e.baseClass),this.autocomplete_dropdown.classList.add(`${e.baseClass}-result-list`),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,e)),super.afterInputReady()}destroy(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),super.destroy()}}class QDt extends ca{getNumColumns(){return 4}setFileReaderListener(e){e.addEventListener("load",n=>{if(this.count===this.current_item_index)this.value[this.count][this.key]=n.target.result;else{const r={};for(const i in this.parent.schema.properties)r[i]="";r[this.key]=n.target.result,this.value.splice(this.count,0,r)}this.count+=1,this.count===this.total+this.current_item_index&&this.arrayEditor.setValue(this.value)})}build(){if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",n=>{if(n.preventDefault(),n.stopPropagation(),n.currentTarget.files&&n.currentTarget.files.length)if(n.currentTarget.files.length>1&&this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"){this.arrayEditor=this.jsoneditor.getEditor(this.parent.parent.path),this.value=this.arrayEditor.getValue(),this.total=n.currentTarget.files.length,this.current_item_index=parseInt(this.parent.key),this.count=this.current_item_index;for(let r=0;r<this.total;r++){const i=new FileReader;this.setFileReaderListener(i),i.readAsDataURL(n.currentTarget.files[r])}}else{let r=new FileReader;r.onload=i=>{this.value=i.target.result,this.refreshPreview(),this.onChange(!0),r=null},r.readAsDataURL(n.currentTarget.files[0])}})}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control);const e=this.getButton("button_upload","upload","button_upload");e.addEventListener("click",()=>{this.uploader.click()}),this.control.appendChild(e),this.setInputAttributes(["multiple"],e)}refreshPreview(){if(this.last_preview===this.value||(this.last_preview=this.value,this.preview.innerHTML="",!this.value))return;let e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),!e)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML=`<strong>Type:</strong> ${e}, <strong>Size:</strong> ${Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)} bytes`,e.substr(0,5)==="image"){this.preview.innerHTML+="<br>";const n=document.createElement("img");n.style.maxWidth="100%",n.style.maxHeight="100px",n.src=this.value,this.preview.appendChild(n)}}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){e=this.applyConstFilter(e),this.value!==e&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(e)?this.value=this.schema.enum[0]:this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())}destroy(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),super.destroy()}}class H$e extends ca{constructor(e,n){super(e,n),this.active=!1,this.isUiOnly=!0,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key)||this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])}build(){this.options.compact=!0;const e=this.expandCallbacks("button",$n({},{icon:"",validated:!1,align:"left",action:(r,i)=>{window.alert(`No button action defined for "${r.path}"`)}},this.defaults.options.button||{},this.options.button||{})),n=this.translateProperty(e.text||this.schema.title)||this.key;this.input=this.getButton(n,e.icon,n),typeof e.action!="function"?window.alert(`No button action defined for "${this.path}"`):this.input.addEventListener("click",e.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(e.align),this.control.appendChild(this.input),this.container.appendChild(this.control),this.changeHandler=()=>{this.jsoneditor.validate(this.jsoneditor.getValue()).length>0?this.disable():this.enable()},e.validated&&this.jsoneditor.on("change",this.changeHandler)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}getNumColumns(){return 2}activate(){this.active=!1,this.enable()}deactivate(){this.isRequired()||(this.active=!1,this.disable())}destroy(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,super.destroy()}}class eLt extends ca{setValue(e,n){e=this.applyConstFilter(e),e=!!e;const r=this.getValue()!==e;this.value=e,this.input.checked=this.value,n||(this.is_dirty=!0),this.onChange(r)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){return Math.min(12,Math.max(this.getTitle().length/7,2))}setOptInCheckbox(){super.setOptInCheckbox(),this.optInAppended&&(this.container.insertBefore(this.optInContainer,this.container.firstChild),this.optInContainer.style.verticalAlign="top",this.control.style.marginTop="0")}build(){this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),this.control.style.display="inline-block",(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.value=e.currentTarget.checked,this.is_dirty=!0,this.onChange(!0)}),this.container.appendChild(this.control)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const n=this.jsoneditor.options.show_errors,r=n==="change"||n==="interaction";if(n==="never"&&!this.is_dirty||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);this.input.controlgroup=this.control,o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}class cC extends ca{setValue(e,n){e=this.applyConstFilter(e);let r=this.typecast(e);const i=this.enum_options.length>0&&this.enum_values.includes(r),s=!!this.jsoneditor.options.use_default_values||typeof this.schema.default<"u";if(!this.hasPlaceholderOption&&(!i||n&&!this.isRequired()&&!s)&&(r=this.enum_values[0]),this.value===r)return;const o=this.enum_values.indexOf(r);i&&o!==-1?this.input.value=this.enum_options[o]:this.hasPlaceholderOption?this.input.value="_placeholder_":this.input.value=r,this.value=r,n||(this.is_dirty=!0),this.onChange(),this.change()}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){if(!this.enum_options)return 3;let e=this.getTitle().length;for(let n=0;n<this.enum_options.length;n++)e=Math.max(e,this.enum_options[n].length+4);return Math.min(12,Math.max(e/7,2))}typecast(e){return this.schema.type==="boolean"?e==="undefined"||e===void 0?void 0:!!e:this.schema.type==="number"?1*e||0:this.schema.type==="integer"?Math.floor(e*1||0):this.schema.enum&&e===void 0?void 0:`${e}`}getValue(){if(this.dependenciesFulfilled)return this.typecast(this.value)}preBuild(){var r,i,s,o;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];let e,n;if(this.hasPlaceholderOption=((i=(r=this.schema)==null?void 0:r.options)==null?void 0:i.has_placeholder_option)||!1,this.placeholderOptionText=((o=(s=this.schema)==null?void 0:s.options)==null?void 0:o.placeholder_option_text)||" ",this.enforceConst&&this.schema.const){const a=this.schema.const;this.enum_options=[`${a}`],this.enum_display=[`${this.translateProperty(a)||a}`],this.enum_values=[this.typecast(a)]}else if(this.schema.enum){const a=this.schema.options&&this.schema.options.enum_titles||[];this.schema.enum.forEach((l,u)=>{this.enum_options[u]=`${l}`,this.enum_display[u]=`${this.translateProperty(a[u])||l}`,this.enum_values[u]=this.typecast(l)})}else if(this.schema.type==="boolean")this.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];else for(e=0;e<this.schema.enumSource.length;e++)typeof this.schema.enumSource[e]=="string"?this.enumSource[e]={source:this.schema.enumSource[e]}:Array.isArray(this.schema.enumSource[e])?this.enumSource[e]=this.schema.enumSource[e]:this.enumSource[e]=$n({},this.schema.enumSource[e]);for(e=0;e<this.enumSource.length;e++)this.enumSource[e].value&&(n=this.expandCallbacks("template",{template:this.enumSource[e].value}),typeof n.template=="function"?this.enumSource[e].value=n.template:this.enumSource[e].value=this.jsoneditor.compileTemplate(this.enumSource[e].value,this.template_engine)),this.enumSource[e].title&&(n=this.expandCallbacks("template",{template:this.enumSource[e].title}),typeof n.template=="function"?this.enumSource[e].title=n.template:this.enumSource[e].title=this.jsoneditor.compileTemplate(this.enumSource[e].title,this.template_engine)),this.enumSource[e].filter&&this.enumSource[e].value&&(n=this.expandCallbacks("template",{template:this.enumSource[e].filter}),typeof n.template=="function"?this.enumSource[e].filter=n.template:this.enumSource[e].filter=this.jsoneditor.compileTemplate(this.enumSource[e].filter,this.template_engine))}else throw new Error("'select' editor requires the enum property to be set.")}build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display,this.hasPlaceholderOption,this.placeholderOptionText),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",e=>{e.preventDefault(),e.stopPropagation(),this.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}afterInputReady(){this.theme.afterInputReady(this.input)}onInputChange(){const e=this.typecast(this.input.value);let n;this.enum_values.includes(e)?n=this.enum_values[this.enum_values.indexOf(e)]:n=this.enum_values[0],n!==this.value&&(this.is_dirty=!0,this.value=n,this.onChange(!0))}onWatchedFieldChange(){let e,n,r=[],i=[];if(this.enumSource){e=this.getWatchedFieldValues();for(let o=0;o<this.enumSource.length;o++)if(Array.isArray(this.enumSource[o]))r=r.concat(this.enumSource[o]),i=i.concat(this.enumSource[o]);else{let a=[];if(Array.isArray(this.enumSource[o].source)?a=this.enumSource[o].source:a=e[this.enumSource[o].source],a){if(this.enumSource[o].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[o].slice)),this.enumSource[o].filter){const d=[];for(n=0;n<a.length;n++)this.enumSource[o].filter({i:n,item:a[n],watched:e})&&d.push(a[n]);a=d}const l=[],u=[];for(n=0;n<a.length;n++){const d=a[n];this.enumSource[o].value?u[n]=this.typecast(this.enumSource[o].value({i:n,item:d})):u[n]=a[n],this.enumSource[o].title?l[n]=this.enumSource[o].title({i:n,item:d}):l[n]=u[n]}this.enumSource[o].sort&&((d,c,f)=>{d.map((h,p)=>({v:h,t:c[p]})).sort((h,p)=>h.v<p.v?-f:h.v===p.v?0:f).forEach((h,p)=>{d[p]=h.v,c[p]=h.t})}).bind(null,u,l,this.enumSource[o].sort==="desc"?1:-1)(),r=r.concat(u),i=i.concat(l)}}const s=this.value;this.theme.setSelectOptions(this.input,r,i),this.enum_options=r,this.enum_display=i,this.enum_values=r,r.includes(s)||this.jsoneditor.options.enum_source_value_auto_select!==!1?(this.input.value=s,this.value=s):(this.input.value=r[0],this.value=this.typecast(r[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}super.onWatchedFieldChange()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.input.disabled=!0,super.disable(e)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(e){const n=this.jsoneditor.options.show_errors,r=n==="change"||n==="interaction";if(n==="never"&&!this.is_dirty||r&&!this.is_dirty)return;const s=(a,l)=>(l.path===this.path&&a.push(l.message),a),o=e.reduce(s,[]);o.length?this.theme.addInputError(this.input,`${o.join(". ")}.`):this.theme.removeInputError(this.input)}}const tLt={".choices > *":"box-sizing:border-box"};class G$e extends cC{setValue(e,n){if(e=this.applyConstFilter(e),this.choices_instance){let r=this.typecast(e||"");if(this.enum_values.includes(r)||(r=this.enum_values[0]),this.value===r)return;n?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(r)],this.choices_instance.setChoiceByValue(this.input.value),this.value=r,this.onChange()}else super.setValue(e,n)}afterInputReady(){if(window.Choices&&!this.choices_instance){const e=this.expandCallbacks("choices",$n({},this.defaults.options.choices||{},this.options.choices||{}));this.choices_instance=new window.Choices(this.input,e)}super.afterInputReady()}onWatchedFieldChange(){if(super.onWatchedFieldChange(),this.choices_instance){const e=this.enum_options.map((n,r)=>({value:n,label:this.enum_display[r]}));this.choices_instance.setChoices(e,"value","label",!0),this.choices_instance.setChoiceByValue(`${this.value}`)}}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(e){this.choices_instance&&this.choices_instance.disable(),super.disable(e)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}G$e.rules=tLt;class nLt extends yu{build(){if(super.build(),!!this.input&&(this.schema.max&&typeof this.schema.max=="string"&&this.input.setAttribute("max",this.schema.max),this.schema.min&&typeof this.schema.max=="string"&&this.input.setAttribute("min",this.schema.min),window.flatpickr&&typeof this.options.flatpickr=="object")){this.options.flatpickr.enableTime=this.schema.format!=="date",this.options.flatpickr.noCalendar=this.schema.format==="time",this.schema.type==="integer"&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");let{input:e}=this;if(this.options.flatpickr.wrap===!0){const n=[];if(this.options.flatpickr.showToggleButton!==!1){const o=this.getButton("",this.schema.format==="time"?"time":"calendar","flatpickr_toggle_button");o.setAttribute("data-toggle",""),n.push(o)}if(this.options.flatpickr.showClearButton!==!1){const o=this.getButton("","clear","flatpickr_clear_button");o.setAttribute("data-clear",""),n.push(o)}const{parentNode:r}=this.input,{nextSibling:i}=this.input,s=this.theme.getInputGroup(this.input,n);s!==void 0?(this.options.flatpickr.inline=!1,r.insertBefore(s,i),e=s):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(e,this.options.flatpickr),this.options.flatpickr.inline===!0&&this.options.flatpickr.inlineHideInput===!0&&this.input.setAttribute("type","hidden")}}getValue(){if(!this.dependenciesFulfilled)return;if(this.schema.type==="string")return this.value;if(this.value===""||this.value===void 0)return;const e=this.schema.format==="time"?`1970-01-01 ${this.value}`:this.value;return parseInt(new Date(e).getTime()/1e3)}setValue(e,n,r){if(e=this.applyConstFilter(e),this.schema.type==="string")super.setValue(e,n,r),this.flatpickr&&this.flatpickr.setDate(e);else if(e>0){const i=new Date(e*1e3),s=i.getFullYear(),o=this.zeroPad(i.getMonth()+1),a=this.zeroPad(i.getDate()),l=this.zeroPad(i.getHours()),u=this.zeroPad(i.getMinutes()),d=this.zeroPad(i.getSeconds()),c=[s,o,a].join("-"),f=[l,u,d].join(":");let h=`${c}T${f}`;this.schema.format==="date"?h=c:this.schema.format==="time"&&(h=f),this.input.value=h,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(h)}}destroy(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,super.destroy()}zeroPad(e){return`0${e}`.slice(-2)}}class rLt extends ca{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}enable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();super.enable()}disable(){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();super.disable()}switchEditor(){const e=this.getWatchedFieldValues();if(!e)return;const n=document.location.origin+document.location.pathname+this.template(e);this.editors[this.refs[n]]||this.buildChildEditor(n),this.currentEditor=this.refs[n],this.register(),this.editors.forEach((r,i)=>{r&&(this.currentEditor===i?r.container.style.display="":r.container.style.display="none")}),this.refreshValue(),this.onChange(!0)}buildChildEditor(e){this.refs[e]=this.editors.length;const n=this.theme.getChildEditorHolder();this.editor_holder.appendChild(n);const r=$n({},this.schema,this.jsoneditor.refs[e]),i=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.jsoneditor.createEditor(i,{jsoneditor:this.jsoneditor,schema:r,container:n,path:this.path,parent:this,required:!0});this.editors.push(s),s.preBuild(),s.build(),s.postBuild()}preBuild(){this.refs={},this.editors=[],this.currentEditor="";let e;for(e=0;e<this.schema.links.length;e++)if(this.schema.links[e].rel.toLowerCase()==="describedby"){this.template=this.jsoneditor.compileTemplate(this.schema.links[e].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,e).concat(this.schema.links.slice(e+1)),this.schema.links.length===0&&delete this.schema.links,this.baseSchema=$n({},this.schema)}build(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()}onWatchedFieldChange(){this.switchEditor()}onChildEditorChange(e,n){this.editors[this.currentEditor]&&this.refreshValue(),super.onChildEditorChange(e,n)}refreshValue(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}setValue(e,n){e=this.applyConstFilter(e),this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(e,n),this.refreshValue(),this.onChange())}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),super.destroy()}showValidationErrors(e){this.editors.forEach(n=>{n&&n.showValidationErrors(e)})}}class iLt extends ca{getNumColumns(){return 4}build(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enforceConstEnabled&&this.schema.const?this.enum=[this.schema.const]:this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(let e=0;e<this.enum.length;e++)this.select_options[e]=this.options.enum_titles[e]||`Value ${e+1}`,this.html_values[e]=this.getHTML(this.enum[e]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",e=>{this.selected=this.select_options.indexOf(e.currentTarget.value),this.value=this.enum[this.selected],this.refreshValue(),this.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),this.enum.length===1&&(this.switcher.style.display="none")}refreshValue(){if(!this.enum)return;this.selected=-1;const e=JSON.stringify(this.value);if(this.enum.forEach((n,r)=>{if(e===JSON.stringify(n))return this.selected=r,!1}),this.selected<0){this.setValue(this.enum[0]);return}this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]}enable(){this.always_disabled||(this.switcher.disabled=!1,super.enable())}disable(e){e&&(this.always_disabled=!0),this.switcher.disabled=!0,super.disable()}getHTML(e){const n=(r,i)=>{Array.isArray(r)||typeof r.length=="number"&&r.length>0&&r.length-1 in r?Array.from(r).forEach((s,o)=>i(o,s)):Object.entries(r).forEach(([s,o])=>i(s,o))};if(e===null)return"<em>null</em>";if(typeof e=="object"){let r="";return n(e,(s,o)=>{let a=this.getHTML(o);Array.isArray(e)||(a=`<div><em>${s}</em>: ${a}</div>`),r+=`<li>${a}</li>`}),Array.isArray(e)?r=`<ol>${r}</ol>`:r=`<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>${r}</ul>`,r}else{if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return e}setValue(e){e=this.applyConstFilter(e),this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())}destroy(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}}class sLt extends ca{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}setValue(e,n,r){if(e=this.applyConstFilter(e),this.template&&!r||(e===null||typeof e>"u"?e="":typeof e=="object"?e=JSON.stringify(e):typeof e!="string"&&(e=`${e}`),e===this.serialized))return;const i=this.sanitize(e);if(this.input.value===i)return;this.input.value=i;const s=r||this.getValue()!==e;this.refreshValue(),n?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}getNumColumns(){return 2}enable(){super.enable()}disable(){super.disable()}refreshValue(){this.value=this.input.value,typeof this.value!="string"&&(this.value=""),this.serialized=this.value}destroy(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(e){return e}onWatchedFieldChange(){let e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),super.onWatchedFieldChange()}build(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){const e=this.expandCallbacks("template",{template:this.schema.template});typeof e.template=="function"?this.template=e.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}class oLt extends H$e{build(){this.options.compact=!1,this.header=this.label=this.theme.getLabelLike(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)}getTitle(){return this.translateProperty(this.schema.title)}getNumColumns(){return 12}disable(){return!1}enable(){return!1}}class V$e extends yu{build(){if(super.build(),typeof this.schema.minimum<"u"){let{minimum:e}=this.schema;typeof this.schema.exclusiveMinimum<"u"&&(e+=1),this.input.setAttribute("min",e)}if(typeof this.schema.maximum<"u"){let{maximum:e}=this.schema;typeof this.schema.exclusiveMaximum<"u"&&(e-=1),this.input.setAttribute("max",e)}if(typeof this.schema.step<"u"){const e=this.schema.step||1;this.input.setAttribute("step",e)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset()){this.input.value="";return}}else return qDt(this.value)?parseFloat(this.value):this.value}}class W$e extends V$e{getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset())return}else return GDt(this.value)?parseInt(this.value):this.value}}class aLt extends yu{preBuild(){if(super.preBuild(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0};break}this.options=$n(this.options,this.schema.options||{})}}class lLt extends yu{setValue(e,n,r){e=this.applyConstFilter(e);const i=super.setValue(e,n,r);i!==void 0&&i.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(i.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.Jodit?(e=this.expandCallbacks("jodit",$n({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",()=>{this.value=this.jodit_instance.getEditorValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),super.enable()}disable(e){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),super.disable(e)}destroy(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),super.destroy()}}const uLt=t=>{const e=t.split(".");if(e.length!==4)throw new Error("error_ipv4");e.forEach(n=>{if(isNaN(+n)||+n<0||+n>255)throw new Error("error_ipv4")})},cLt=t=>{if(!t.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")},dLt=t=>{if(!t.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")};function fLt(t,e,n,r){try{switch(t.format){case"ipv4":uLt(e);break;case"ipv6":cLt(e);break;case"hostname":dLt(e);break}return[]}catch(i){return[{path:n,property:"format",message:r(i.message)}]}}class Y$e{constructor(e,n,r,i){this.jsoneditor=e,this.schema=n||this.jsoneditor.schema,this.options=r||{},this.translate=this.jsoneditor.translate||i.translate,this.translateProperty=this.jsoneditor.translateProperty||i.translateProperty,this.defaults=i,this._validateSubSchema={dependentRequired(s,o,a){const l=[];if(typeof s.dependentRequired<"u"){let u=[];Object.keys(s.dependentRequired).forEach(c=>{typeof o[c]<"u"&&(u=s.dependentRequired[c].filter(h=>!cu(o,h)))}),u.length>0&&l.push({message:"Must have the required properties: "+u.join(", "),path:a})}return l},dependentSchemas(s,o,a){let l=[];return Object.keys(s.dependentSchemas).forEach(u=>{if(typeof o[u]<"u"){const d=s.dependentSchemas[u],c=this._validateSchema(d,o,a);l=[...l,...c]}}),l},contains(s,o,a){const l=[];let u=0;o.forEach(c=>{this._validateSchema(s.contains,c,a).length===0&&u++});const d=u===0;return typeof s.minContains<"u"?u<s.minContains&&l.push({message:this.translate("error_minContains",[u,s.minContains],s),path:a}):d&&l.push({message:this.translate("error_contains",null,s),path:a}),typeof s.maxContains<"u"&&u>s.maxContains&&l.push({message:this.translate("error_maxContains",[u,s.maxContains],s),path:a}),l},if(s,o,a){if(typeof s.then>"u"&&typeof s.else>"u")return[];const l=this._validateSchema(s.if,o,a);let u=[],d=[];return typeof s.then<"u"&&(u=this._validateSchema(s.then,o,a)),typeof s.else<"u"&&(d=this._validateSchema(s.else,o,a)),s.if===!0?u:s.if===!1?d:l.length===0?u:l.length>0?d:[]},const(s,o,a){return JSON.stringify(s.const)===JSON.stringify(o)?[]:[{path:a,property:"const",message:this.translate("error_const",null,s)}]},enum(s,o,a){const l=JSON.stringify(o);return s.enum.some(d=>l===JSON.stringify(d))?[]:[{path:a,property:"enum",message:this.translate("error_enum",null,s)}]},extends(s,o,a){const l=(u,d)=>(u.push(...this._validateSchema(d,o,a)),u);return s.extends.reduce(l,[])},allOf(s,o,a){const l=(u,d)=>(u.push(...this._validateSchema(d,o,a)),u);return s.allOf.reduce(l,[])},anyOf(s,o,a){return s.anyOf.some(u=>!this._validateSchema(u,o,a).length)?[]:[{path:a,property:"anyOf",message:this.translate("error_anyOf",null,s)}]},oneOf(s,o,a){let l=0;const u=[];s.oneOf.forEach((c,f)=>{const h=this._validateSchema(c,o,a);h.length||l++,h.forEach(p=>{p.path=`${a}.oneOf[${f}]${p.path.substr(a.length)}`}),u.push(...h)});const d=[];return l!==1&&(d.push({path:a,property:"oneOf",message:this.translate("error_oneOf",[l],s)}),d.push(...u)),d},not(s,o,a){return this._validateSchema(s.not,o,a).length?[]:[{path:a,property:"not",message:this.translate("error_not",null,s)}]},type(s,o,a){if(Array.isArray(s.type)){if(!s.type.some(u=>this._checkType(u,o)))return[{path:a,property:"type",message:this.translate("error_type_union",null,s)}]}else if(["date","time","datetime-local"].includes(s.format)&&s.type==="integer"){if(!this._checkType("string",`${o}`))return[{path:a,property:"type",message:this.translate("error_type",[s.format],s)}]}else if(!this._checkType(s.type,o))return[{path:a,property:"type",message:this.translate("error_type",[s.type],s)}];return[]},disallow(s,o,a){if(Array.isArray(s.disallow)){if(s.disallow.some(u=>this._checkType(u,o)))return[{path:a,property:"disallow",message:this.translate("error_disallow_union",null,s)}]}else if(this._checkType(s.disallow,o))return[{path:a,property:"disallow",message:this.translate("error_disallow",[s.disallow],s)}];return[]}},this._validateNumberSubSchema={multipleOf(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},divisibleBy(s,o,a){return this._validateNumberSubSchemaMultipleDivisible(s,o,a)},maximum(s,o,a){let l=s.exclusiveMaximum?o<s.maximum:o<=s.maximum;return window.math?l=window.math[s.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(o),window.math.bignumber(s.maximum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMaximum?"lt":"lte"](new window.Decimal(s.maximum))),l?[]:[{path:a,property:"maximum",message:this.translate(s.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[s.maximum],s)}]},minimum(s,o,a){let l=s.exclusiveMinimum?o>s.minimum:o>=s.minimum;return window.math?l=window.math[s.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(o),window.math.bignumber(s.minimum)):window.Decimal&&(l=new window.Decimal(o)[s.exclusiveMinimum?"gt":"gte"](new window.Decimal(s.minimum))),l?[]:[{path:a,property:"minimum",message:this.translate(s.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[s.minimum],s)}]}},this._validateStringSubSchema={maxLength(s,o,a){const l=[];return`${o}`.length>s.maxLength&&l.push({path:a,property:"maxLength",message:this.translate("error_maxLength",[s.maxLength],s)}),l},minLength(s,o,a){return`${o}`.length<s.minLength?[{path:a,property:"minLength",message:this.translate(s.minLength===1?"error_notempty":"error_minLength",[s.minLength],s)}]:[]},pattern(s,o,a){return new RegExp(s.pattern).test(o)?[]:[{path:a,property:"pattern",message:s.options&&s.options.patternmessage?s.options.patternmessage:this.translate("error_pattern",[s.pattern],s)}]}},this._validateArraySubSchema={items(s,o,a){const l=[];if(Array.isArray(s.items))for(let u=0;u<o.length;u++)if(s.items[u])l.push(...this._validateSchema(s.items[u],o[u],`${a}.${u}`));else{if(s.additionalItems===!0)break;if(s.additionalItems)l.push(...this._validateSchema(s.additionalItems,o[u],`${a}.${u}`));else if(s.additionalItems===!1){l.push({path:a,property:"additionalItems",message:this.translate("error_additionalItems",null,s)});break}else break}else o.forEach((u,d)=>{l.push(...this._validateSchema(s.items,u,`${a}.${d}`))});return l},maxItems(s,o,a){return o.length>s.maxItems?[{path:a,property:"maxItems",message:this.translate("error_maxItems",[s.maxItems],s)}]:[]},minItems(s,o,a){return o.length<s.minItems?[{path:a,property:"minItems",message:this.translate("error_minItems",[s.minItems],s)}]:[]},uniqueItems(s,o,a){const l={};for(let u=0;u<o.length;u++){const d=JSON.stringify(o[u]);if(l[d])return[{path:a,property:"uniqueItems",message:this.translate("error_uniqueItems",null,s)}];l[d]=!0}return[]}},this._validateObjectSubSchema={maxProperties(s,o,a){return Object.keys(o).length>s.maxProperties?[{path:a,property:"maxProperties",message:this.translate("error_maxProperties",[s.maxProperties],s)}]:[]},minProperties(s,o,a){return Object.keys(o).length<s.minProperties?[{path:a,property:"minProperties",message:this.translate("error_minProperties",[s.minProperties],s)}]:[]},required(s,o,a){const l=[];return Array.isArray(s.required)&&s.required.forEach(u=>{if(typeof o[u]<"u")return;const d=this.jsoneditor.getEditor(`${a}.${u}`);d&&d.dependenciesFulfilled===!1||d&&["button","info"].includes(d.schema.format||d.schema.type)||l.push({path:a,property:"required",message:this.translate("error_required",[s&&s.properties&&s.properties[u]&&s.properties[u].title?s.properties[u].title:u],s)})}),l},properties(s,o,a,l){const u=[];return Object.entries(s.properties).forEach(([d,c])=>{l[d]=!0,u.push(...this._validateSchema(c,o[d],`${a}.${d}`))}),u},patternProperties(s,o,a,l){const u=[];return Object.entries(s.patternProperties).forEach(([d,c])=>{const f=new RegExp(d);Object.entries(o).forEach(([h,p])=>{f.test(h)&&(l[h]=!0,u.push(...this._validateSchema(c,p,`${a}.${h}`)))})}),u}},this._validateObjectSubSchema2={propertyNames(s,o,a,l){const u=[],d=Object.keys(o);let c=null;for(let f=0;f<d.length;f++){let h="",p=!1;if(c=d[f],typeof s.propertyNames=="boolean"){if(s.propertyNames===!0)continue;u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_false",[c],s)});break}if(p=Object.entries(s.propertyNames).every(([g,b])=>{let y=!1,v=null;switch(g){case"maxLength":if(typeof b!="number"){h="error_property_names_maxlength";break}if(c.length>b){h="error_property_names_exceeds_maxlength";break}return!0;case"const":if(b!==c){h="error_property_names_const_mismatch";break}return!0;case"enum":if(!Array.isArray(b)){h="error_property_names_enum";break}if(b.forEach(w=>{w===c&&(y=!0)}),!y){h="error_property_names_enum_mismatch";break}return!0;case"pattern":if(typeof b!="string"){h="error_property_names_pattern";break}if(v=new RegExp(b),!v.test(c)){h="error_property_names_pattern_mismatch";break}return!0;default:return u.push({path:a,property:"propertyNames",message:this.translate("error_property_names_unsupported",[g],s)}),!1}return u.push({path:a,property:"propertyNames",message:this.translate(h,[c],s)}),!1}),!p)break}return u},additionalProperties(s,o,a,l){const u=[],d=Object.keys(o);for(let c=0;c<d.length;c++){const f=d[c];if(!l[f])if(s.additionalProperties){if(s.additionalProperties===!0)break;u.push(...this._validateSchema(s.additionalProperties,o[f],`${a}.${f}`))}else{u.push({path:a,property:"additionalProperties",message:this.translate("error_additional_properties",[f],s)});break}}return u},dependencies(s,o,a){const l=[];return Object.entries(s.dependencies).forEach(([u,d])=>{typeof o[u]>"u"||(Array.isArray(d)?d.forEach(c=>{typeof o[c]>"u"&&l.push({path:a,property:"dependencies",message:this.translate("error_dependency",[c],s)})}):l.push(...this._validateSchema(d,o,a)))}),l}}}fitTest(e,n,r=1e7){const i={match:0,extra:0};if(typeof e=="object"&&e!==null){const s=this._getSchema(n);if(s.anyOf){let o={...i};for(const a of s.anyOf){const l=this.fitTest(e,a,r);(l.match>o.match||l.match===o.match&&l.extra<o.extra)&&(o=l)}return o}else{const o=this._getSchema(n).properties;for(const a in o){if(!cu(o,a)){i.extra+=r;continue}if(typeof e[a]=="object"&&typeof o[a]=="object"&&typeof o[a].properties=="object"){const l=this.fitTest(e[a],o[a],r/100);i.match+=l.match,i.extra+=l.extra}typeof e[a]<"u"&&(i.match+=r)}}}return i}_getSchema(e){return typeof e>"u"?$n({},this.jsoneditor.expandRefs(this.schema)):e}validate(e){return this._validateSchema(this.schema,e)}_validateSchema(e,n,r){const i=[];return r=r||this.jsoneditor.root.formname,e=$n({},this.jsoneditor.expandRefs(e)),typeof n>"u"?this._validateV3Required(e,n,r):(Object.keys(e).forEach(s=>{this._validateSubSchema[s]&&i.push(...this._validateSubSchema[s].call(this,e,n,r))}),i.push(...this._validateByValueType(e,n,r)),e.links&&e.links.forEach((s,o)=>{s.rel&&s.rel.toLowerCase()==="describedby"&&(e=this._expandSchemaLink(e,o),i.push(...this._validateSchema(e,n,r,this.translate)))}),["date","time","datetime-local"].includes(e.format)&&i.push(...this._validateDateTimeSubSchema(e,n,r)),["uuid"].includes(e.format)&&i.push(...this._validateUUIDSchema(e,n,r)),i.push(...this._validateCustomValidator(e,n,r)),this._removeDuplicateErrors(i))}_expandSchemaLink(e,n){const r=e.links[n].href,i=this.jsoneditor.root.getValue(),s=this.jsoneditor.compileTemplate(r,this.jsoneditor.template),o=document.location.origin+document.location.pathname+s(i);return e.links=e.links.slice(0,n).concat(e.links.slice(n+1)),$n({},e,this.jsoneditor.refs[o])}_validateV3Required(e,n,r){return(typeof e.required<"u"&&e.required===!0||typeof e.required>"u"&&this.jsoneditor.options.required_by_default===!0)&&e.type!=="info"?[{path:r,property:"required",message:this.translate("error_notset",null,e)}]:[]}_validateByValueType(e,n,r){const i=[];if(n===null)return i;if(typeof n=="number")Object.keys(e).forEach(s=>{this._validateNumberSubSchema[s]&&i.push(...this._validateNumberSubSchema[s].call(this,e,n,r))});else if(typeof n=="string")Object.keys(e).forEach(s=>{this._validateStringSubSchema[s]&&i.push(...this._validateStringSubSchema[s].call(this,e,n,r))});else if(Array.isArray(n))Object.keys(e).forEach(s=>{this._validateArraySubSchema[s]&&i.push(...this._validateArraySubSchema[s].call(this,e,n,r))});else if(typeof n=="object"){const s={};Object.keys(e).forEach(o=>{this._validateObjectSubSchema[o]&&i.push(...this._validateObjectSubSchema[o].call(this,e,n,r,s))}),typeof e.additionalProperties>"u"&&this.jsoneditor.options.no_additional_properties&&!e.oneOf&&!e.anyOf&&!e.allOf&&(e.additionalProperties=!1),Object.keys(e).forEach(o=>{typeof this._validateObjectSubSchema2[o]<"u"&&i.push(...this._validateObjectSubSchema2[o].call(this,e,n,r,s))})}return i}_validateUUIDSchema(e,n,r){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)?[]:[{path:r,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],e)}]}_validateNumberSubSchemaMultipleDivisible(e,n,r){const i=e.multipleOf||e.divisibleBy;let s=n/i===Math.floor(n/i);return window.math?s=window.math.mod(window.math.bignumber(n),window.math.bignumber(i)).equals(0):window.Decimal&&(s=new window.Decimal(n).mod(new window.Decimal(i)).equals(0)),s?[]:[{path:r,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[i],e)}]}_validateDateTimeSubSchema(e,n,r){const i=(d,c,f)=>c*1<1?[{path:f,property:"format",message:this.translate("error_invalid_epoch",null,d)}]:c!==Math.abs(parseInt(c))?[{path:f,property:"format",message:this.translate(`error_${d.format.replace(/-/g,"_")}`,[u],d)}]:[],s=(d,c,f,h)=>{if(c!==""){let p;if(h.flatpickr.config.mode!=="single"){const g=h.flatpickr.config.mode==="range"?h.flatpickr.l10n.rangeSeparator:", ";p=h.flatpickr.selectedDates.map(y=>h.flatpickr.formatDate(y,h.flatpickr.config.dateFormat)).join(g)}try{if(p){if(p!==c)throw new Error(`${h.flatpickr.config.mode} mismatch`)}else if(h.flatpickr.formatDate(h.flatpickr.parseDate(c,h.flatpickr.config.dateFormat),h.flatpickr.config.dateFormat)!==c)throw new Error("mismatch")}catch{const b=h.flatpickr.config.errorDateFormat!==void 0?h.flatpickr.config.errorDateFormat:h.flatpickr.config.dateFormat;return[{path:f,property:"format",message:this.translate(`error_${h.format.replace(/-/g,"_")}`,[b],d)}]}}return[]},o={date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/},a={date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'},l=this.jsoneditor.getEditor(r),u=l&&l.flatpickr?l.flatpickr.config.dateFormat:a[e.format];if(e.type==="integer")return i(e,n,r);if(!l||!l.flatpickr){if(!o[e.format].test(n))return[{path:r,property:"format",message:this.translate(`error_${e.format.replace(/-/g,"_")}`,[u],e)}]}else if(l)return s(e,n,r,l);return[]}_validateCustomValidator(e,n,r){const i=[];i.push(...fLt.call(this,e,n,r,this.translate));const s=o=>{i.push(...o.call(this,e,n,r))};return this.defaults.custom_validators.forEach(s),this.options.custom_validators&&this.options.custom_validators.forEach(s),i}_removeDuplicateErrors(e){return e.reduce((n,r)=>{let i=!0;return n||(n=[]),n.forEach(s=>{s.message===r.message&&s.path===r.path&&s.property===r.property&&(s.errorcount++,i=!1)}),i&&(r.errorcount=1,n.push(r)),n},[])}_checkType(e,n){const r={string:i=>typeof i=="string",number:i=>typeof i=="number",integer:i=>typeof i=="number"&&i===Math.floor(i),boolean:i=>typeof i=="boolean",array:i=>Array.isArray(i),object:i=>i!==null&&!Array.isArray(i)&&typeof i=="object",null:i=>i===null};return typeof e=="string"?r[e]?r[e](n):!0:!this._validateSchema(e,n).length}}class hLt extends ca{register(){if(this.editors){for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()}getNumColumns(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4}enable(){if(!this.always_disabled){if(this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,super.enable()}}disable(e){if(e&&(this.always_disabled=!0),this.editors)for(let n=0;n<this.editors.length;n++)this.editors[n]&&this.editors[n].disable(e);this.switcher.disabled=!0,super.disable()}switchEditor(e){this.lastType=this.type,this.editors[e]||this.buildChildEditor(e);let n=this.getValue();this.type=e,this.register(),this.editors.forEach((r,i)=>{r&&(this.type===i?(this.keep_only_existing_values&&(n=VDt(r.getValue(),n)),(this.keep_values||this.if)&&r.setValue(n,!0),r.container.style.display=""):r.container.style.display="none")}),this.onChange(!0,!1,{event:"switch",data:{type:this.lastType,path:this.editors[e].path}}),this.refreshValue(),this.refreshHeaderText()}buildChildEditor(e){var o;const n=this.types[e],r=this.theme.getChildEditorHolder();this.editor_holder.appendChild(r);let i;typeof n=="string"?(i=$n({},this.schema),i.type=n):(i=$n({},this.schema,n),i=this.jsoneditor.expandRefs(i),n&&n.required&&Array.isArray(n.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(i.required=this.schema.required.concat(n.required))),(o=i==null?void 0:i.options)!=null&&o.dependencies&&delete i.options.dependencies;const s=this.jsoneditor.getEditorClass(i);this.editors[e]=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:i,container:r,path:this.path,parent:this,required:!0}),this.editors[e].preBuild(),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].header&&this.theme.visuallyHidden(this.editors[e].header),this.editors[e].option=this.switcher_options[e],r.addEventListener("change_header_text",()=>{this.refreshHeaderText()}),e!==this.type&&(r.style.display="none")}preBuild(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,typeof this.jsoneditor.options.keep_oneof_values<"u"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),typeof this.options.keep_oneof_values<"u"&&(this.keep_values=this.options.keep_oneof_values),this.keep_only_existing_values=!1,typeof this.jsoneditor.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.jsoneditor.options.keep_only_existing_values),typeof this.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.options.keep_only_existing_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else if(this.schema.if)this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:"then"},this.elseSchema={title:"else"},this.types=[],this.schema.then&&aT(this.thenSchema,this.schema,this.schema.then),this.schema.else&&aT(this.elseSchema,this.schema,this.schema.else),this.types.push(this.thenSchema),this.types.push(this.elseSchema),this.types.forEach(e=>{delete e.if,delete e.then,delete e.else}),delete this.schema.if;else{if(!this.schema.type||this.schema.type==="any"){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){let{disallow:e}=this.schema;(typeof e!="object"||!Array.isArray(e))&&(e=[e]);const n=[];this.types.forEach(r=>{e.includes(r)||n.push(r)}),this.types=n}}else Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)}build(){const{container:e}=this;this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired()),this.switcher=this.theme.getSwitcher(this.display_text),this.switcher.setAttribute("id",this.formname+"switcher"),this.switcherLabel=this.theme.getHiddenLabel(this.formname+" switcher"),this.switcherLabel.setAttribute("for",this.formname+"switcher"),this.if||(this.container.appendChild(this.header),e.appendChild(this.switcherLabel),e.appendChild(this.switcher)),this.switcher.addEventListener("change",r=>{r.preventDefault(),r.stopPropagation(),this.switchEditor(this.display_text.indexOf(r.currentTarget.value)),this.onChange(!0)}),this.editor_holder=document.createElement("div"),e.appendChild(this.editor_holder);const n={};this.jsoneditor.options.custom_validators&&(n.custom_validators=this.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),this.types.forEach((r,i)=>{this.editors[i]=!1;let s;typeof r=="string"?(s=$n({},this.schema),s.type=r):(s=$n({},this.schema,r),r.required&&Array.isArray(r.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(s.required=this.schema.required.concat(r.required))),this.validators[i]=new Y$e(this.jsoneditor,s,n,this.defaults)}),this.jsoneditor.on("change",()=>{this.switchIf()}),this.switchEditor(0)}onChildEditorChange(e,n){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),super.onChildEditorChange(e,n)}refreshHeaderText(){const e=this.getDisplayText(this.types);Array.from(this.switcher_options).forEach((n,r)=>{n.textContent=e[r]})}refreshValue(){this.editors[this.type]&&(this.value=this.editors[this.type].getValue())}switchIf(){if(this.ifSchema&&this.value){const e=this.getIfType(this.value);this.lastType!==e&&(this.switchEditor(e),this.editors[this.type].setValue(this.value,!0)),this.switcher.value=this.display_text[this.type]}}getIfType(e){return this.jsoneditor.validator._validateSchema(this.ifSchema,e).length===0?0:1}setValue(e,n){e=this.applyConstFilter(e);const r=this.type;let i={match:0,extra:0,i:this.type};const s={match:0,i:null};this.validators.forEach((l,u)=>{let d=null;typeof this.anyOf<"u"&&this.anyOf&&(d=l.fitTest(e),(i.match<d.match||i.match===d.match&&i.extra>d.extra)&&(i=d,i.i=u)),!l.validate(e).length&&s.i===null?(s.i=u,d!==null&&(s.match=d.match)):i=s});let o=s.i;typeof this.anyOf<"u"&&this.anyOf&&s.match<i.match&&(o=i.i),this.if&&(o=this.getIfType(e)),o===null&&(o=this.type),this.type=o,this.switcher.value=this.display_text[o];const a=this.type!==r;a&&(this.switchEditor(this.type),this.editors[this.type].setValue(e,n)),typeof e<"u"&&this.editors[this.type].setValue(e,n),this.refreshValue(),this.onChange(a)}destroy(){this.editors.forEach(e=>{e&&e.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}showValidationErrors(e){if(this.oneOf||this.anyOf){const n=this.oneOf?"oneOf":"anyOf";this.editors.forEach((r,i)=>{if(!r)return;const s=`${this.path}.${n}[${i}]`,o=(a,l)=>{if(l.path.startsWith(s)||l.path===s.substr(0,l.path.length)){const u=$n({},l);l.path.startsWith(s)&&(u.path=this.path+u.path.substr(s.length)),a.push(u)}return a};r.showValidationErrors(e.reduce(o,[]))})}else this.editors.forEach(n=>{n&&n.showValidationErrors(e)})}addLinks(){}}class pLt extends ca{getValue(){if(this.dependenciesFulfilled)return null}setValue(){this.onChange()}getNumColumns(){return 2}}const mLt={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block"};class X$e extends ca{constructor(e,n,r){super(e,n),this.currentDepth=r}getChildEditors(){return this.editors}register(){super.register(),this.editors&&Object.values(this.editors).forEach(e=>e.register())}unregister(){super.unregister(),this.editors&&Object.values(this.editors).forEach(e=>e.unregister())}getNumColumns(){return Math.max(Math.min(12,this.maxwidth),3)}enable(){this.always_disabled||(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),super.enable(),this.editors&&Object.values(this.editors).forEach(e=>{(e.isActive()||e.isUiOnly)&&e.enable(),e.optInCheckbox&&(e.optInCheckbox.disabled=!1)}))}disable(e){e&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),super.disable(),this.editors&&Object.values(this.editors).forEach(n=>{(n.isActive()||n.isUiOnly)&&n.disable(e),n.optInCheckbox.disabled=!0})}layoutEditors(){let e,n;if(!this.row_container)return;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((u,d)=>{let c=this.editors[u].schema.propertyOrder,f=this.editors[d].schema.propertyOrder;return typeof c!="number"&&(c=1e3),typeof f!="number"&&(f=1e3),c-f});let r;const i=this.format==="categories",s=[];let o=null,a=null,l;if(this.format==="grid-strict"){let u=0;if(l=[],this.property_order.forEach(d=>{const c=this.editors[d];if(c.property_removed)return;const f=c.options.hidden?0:c.options.grid_columns||c.getNumColumns(),h=c.options.hidden?0:c.options.grid_offset||0,p=c.options.hidden?!1:c.options.grid_break||!1,g=c.options.hidden?0:c.container.offsetHeight,b={key:d,width:f,offset:h,height:g};l.push(b),s[u]=l,p&&(u++,l=[])}),this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),n=0;n<s[e].length;n++)o=s[e][n].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e][n].width,s[e][n].offset),l.appendChild(a.container)}else if(this.format==="grid"){for(this.property_order.forEach(u=>{const d=this.editors[u];if(d.property_removed)return;let c=!1;const f=d.options.hidden?0:d.options.grid_columns||d.getNumColumns(),h=d.options.hidden?0:d.container.offsetHeight;for(let p=0;p<s.length;p++)s[p].width+f<=12&&(!h||s[p].minh*.5<h&&s[p].maxh*2>h)&&(c=p);c===!1&&(s.push({width:0,minh:999999,maxh:0,editors:[]}),c=s.length-1),s[c].editors.push({key:u,width:f,height:h}),s[c].width+=f,s[c].minh=Math.min(s[c].minh,h),s[c].maxh=Math.max(s[c].maxh,h)}),e=0;e<s.length;e++)if(s[e].width<12){let u=!1,d=0;for(n=0;n<s[e].editors.length;n++)(u===!1||s[e].editors[n].width>s[e].editors[u].width)&&(u=n),s[e].editors[n].width*=12/s[e].width,s[e].editors[n].width=Math.floor(s[e].editors[n].width),d+=s[e].editors[n].width;d<12&&(s[e].editors[u].width+=12-d),s[e].width=12}if(this.layout===JSON.stringify(s))return!1;for(this.layout=JSON.stringify(s),r=document.createElement("div"),e=0;e<s.length;e++)for(l=this.theme.getGridRow(),r.appendChild(l),n=0;n<s[e].editors.length;n++)o=s[e].editors[n].key,a=this.editors[o],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,s[e].editors[n].width),l.appendChild(a.container)}else{if(r=document.createElement("div"),i){const u=document.createElement("div"),d=this.theme.getTopTabHolder(this.translateProperty(this.schema.title)),c=this.theme.getTopTabContentHolder(d);for(this.property_order.forEach(p=>{const g=this.editors[p];if(g.property_removed)return;const b=this.theme.getTabContent(),y=g.schema&&(g.schema.type==="object"||g.schema.type==="array");b.isObjOrArray=y;const v=this.theme.getGridRow();g.tab||(typeof this.basicPane>"u"?this.addRow(g,d,b):this.addRow(g,d,this.basicPane)),b.id=this.getValidId(g.tab_text.textContent),y?(b.appendChild(v),c.appendChild(b),this.theme.addTopTab(d,g.tab)):(u.appendChild(v),c.childElementCount>0?c.firstChild.isObjOrArray&&(b.appendChild(u),c.insertBefore(b,c.firstChild),this.theme.insertBasicTopTab(g.tab,d),g.basicPane=b):(b.appendChild(u),c.appendChild(b),this.theme.addTopTab(d,g.tab),g.basicPane=b)),g.options.hidden?g.container.style.display="none":this.theme.setGridColumnSize(g.container,12),v.appendChild(g.container),g.rowPane=b});this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);const f=this.tabs_holder.parentNode;f.removeChild(f.firstChild),f.appendChild(d),this.tabPanesContainer=c,this.tabs_holder=d;const h=this.theme.getFirstTab(this.tabs_holder);h&&Rc(h,"click");return}this.property_order.forEach(u=>{const d=this.editors[u];d.property_removed||(l=this.theme.getGridRow(),r.appendChild(l),d.options.hidden?d.container.style.display="none":this.theme.setGridColumnSize(d.container,12),l.appendChild(d.container))})}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(r)}getPropertySchema(e){let n=this.schema.properties[e]||{};n=$n({},n);let r=!!this.schema.properties[e];return this.schema.patternProperties&&Object.keys(this.schema.patternProperties).forEach(i=>{new RegExp(i).test(e)&&(n.allOf=n.allOf||[],n.allOf.push(this.schema.patternProperties[i]),r=!0)}),!r&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(n=$n({},this.schema.additionalProperties)),n}preBuild(){if(super.preBuild(),this.editors={},this.cached_editors={},this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)Object.entries(this.schema.properties).forEach(([e,n])=>{const r=this.jsoneditor.getEditorClass(n);this.editors[e]=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,path:`${this.path}.${e}`,parent:this,compact:!0,required:!0},this.currentDepth+1),this.editors[e].preBuild();const i=this.editors[e].options.hidden?0:this.editors[e].options.grid_columns||this.editors[e].getNumColumns();this.minwidth+=i,this.maxwidth+=i}),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?this.schema.defaultProperties=Object.keys(this.schema.properties).filter(e=>this.isRequiredObject({key:e,schema:this.schema.properties[e]})):this.schema.defaultProperties=Object.keys(this.schema.properties)),this.maxwidth+=1,Array.isArray(this.schema.defaultProperties)&&this.schema.defaultProperties.forEach(e=>{this.addObjectProperty(e,!0),this.editors[e]&&(this.minwidth=Math.max(this.minwidth,this.editors[e].options.grid_columns||this.editors[e].getNumColumns()),this.maxwidth+=this.editors[e].options.grid_columns||this.editors[e].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((e,n)=>{let r=this.editors[e].schema.propertyOrder,i=this.editors[n].schema.propertyOrder;return typeof r!="number"&&(r=1e3),typeof i!="number"&&(i=1e3),r-i})}addTab(e){const n=this.rows[e].schema&&(this.rows[e].schema.type==="object"||this.rows[e].schema.type==="array");this.tabs_holder&&(this.rows[e].tab_text=document.createElement("span"),n?this.rows[e].tab_text.textContent=this.rows[e].getHeaderText():this.rows[e].tab_text.textContent=typeof this.schema.basicCategoryTitle>"u"?"Basic":this.schema.basicCategoryTitle,this.rows[e].tab=this.theme.getTopTab(this.rows[e].tab_text,this.getValidId(this.rows[e].tab_text.textContent)),this.rows[e].tab.addEventListener("click",r=>{this.active_tab=this.rows[e].tab,this.refreshTabs(),r.preventDefault(),r.stopPropagation()}))}addRow(e,n,r){const i=this.rows.length,s=e.schema.type==="object"||e.schema.type==="array";this.rows[i]=e,this.rows[i].rowPane=r,s?(this.addTab(i),this.theme.addTopTab(n,this.rows[i].tab)):typeof this.basicTab>"u"?(this.addTab(i),this.basicTab=i,this.basicPane=r,this.theme.addTopTab(n,this.rows[i].tab)):(this.rows[i].tab=this.rows[this.basicTab].tab,this.rows[i].tab_text=this.rows[this.basicTab].tab_text,this.rows[i].rowPane=this.rows[this.basicTab].rowPane)}refreshTabs(e){const n=typeof this.basicTab<"u";let r=!1;this.rows.forEach(i=>{!i.tab||!i.rowPane||!i.rowPane.parentNode||n&&i.tab===this.rows[this.basicTab].tab&&r||(e?i.tab_text.textContent=i.getHeaderText():(n&&i.tab===this.rows[this.basicTab].tab&&(r=!0),i.tab===this.active_tab?this.theme.markTabActive(i):this.theme.markTabInactive(i)))})}build(){const e=this.format==="categories";if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,Object.entries(this.editors).forEach(([n,r])=>{const i=this.theme.getTableCell();this.editor_holder.appendChild(i),r.setContainer(i),r.build(),r.postBuild(),r.setOptInCheckbox(r.header),r.setValue(r.getDefault(),!0),this.editors[n].options.hidden&&(i.style.display="none"),this.editors[n].options.input_width&&(i.style.width=this.editors[n].options.input_width)});else{if(this.options.table)throw new Error("Not supported yet");{this.header="",this.options.compact||(this.header=document.createElement("span"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.title.classList.add("je-object__title"),this.controls=this.theme.getButtonHolder(),this.controls.classList.add("je-object__controls"),this.container.appendChild(this.title),this.container.appendChild(this.controls),this.container.classList.add("je-object__container"),this.editjson_holder=this.theme.getModal(),this.editjson_textarea_label=this.theme.getHiddenLabel(this.translate("button_edit_json")),this.editjson_textarea_label.setAttribute("for",this.path+"-edit-json-textarea"),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.setAttribute("id",this.path+"-edit-json-textarea"),this.editjson_textarea.setAttribute("aria-labelledby",this.path+"-edit-json-textarea"),this.editjson_textarea.classList.add("je-edit-json--textarea"),this.editjson_save=this.getButton("button_save","save","button_save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.saveJSON()}),this.editjson_copy=this.getButton("button_copy","copy","button_copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.copyJSON()}),this.editjson_cancel=this.getButton("button_cancel","cancel","button_cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea_label),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.classList.add("property-selector"),this.addproperty_add=this.getButton("button_add","add","button_add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input_label=this.theme.getHiddenLabel(this.translate("button_properties")),this.addproperty_input_label.setAttribute("for",this.path+"-property-selector"),this.addproperty_input.classList.add("property-selector-input"),this.addproperty_input.setAttribute("id",this.path+"-property-selector"),this.addproperty_input.setAttribute("aria-labelledby",this.path+"-property-selector"),this.addproperty_add.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),this.addproperty_input.value){if(this.editors[this.addproperty_input.value]){window.alert("there is already a property with that name");return}this.addObjectProperty(this.addproperty_input.value),this.editors[this.addproperty_input.value]&&this.editors[this.addproperty_input.value].disable();const i=this.editors[this.addproperty_input.value].key,s=this.editors[this.addproperty_input.value].type,o=this.editors[this.addproperty_input.value].path;this.onChange(!0,!1,{event:"add",data:{key:i,type:s,path:o}})}}),this.addproperty_input.addEventListener("input",r=>{r.target.previousSibling.previousSibling.childNodes.forEach(i=>{let s=i.innerText,o=r.target.value;this.options.case_sensitive_property_search||this.jsoneditor.options.case_sensitive_property_search||(s=s.toLowerCase(),o=o.toLowerCase()),s.includes(o)?i.style.display="":i.style.display="none"})}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input_label),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);const n=document.createElement("div");n.style.clear="both",this.addproperty_holder.appendChild(n),this.onOutsideModalClickListener=this.onOutsideModalClick.bind(this),document.addEventListener("click",this.onOutsideModalClickListener,!0),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),e?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),Object.values(this.editors).forEach(r=>{const i=this.theme.getTabContent(),s=this.theme.getGridColumn(),o=!!(r.schema&&(r.schema.type==="object"||r.schema.type==="array"));if(i.isObjOrArray=o,e){if(o){const a=this.theme.getGridContainer();a.appendChild(s),i.appendChild(a),this.tabPanesContainer.appendChild(i),this.row_container=a}else typeof this.row_container_basic>"u"&&(this.row_container_basic=this.theme.getGridContainer(),i.appendChild(this.row_container_basic),this.tabPanesContainer.childElementCount===0?this.tabPanesContainer.appendChild(i):this.tabPanesContainer.insertBefore(i,this.tabPanesContainer.childNodes[1])),this.row_container_basic.appendChild(s);this.addRow(r,this.tabs_holder,i),i.id=this.getValidId(r.schema.title)}else this.row_container.appendChild(s);r.setContainer(s),r.build(),r.postBuild(),r.setOptInCheckbox(r.header)}),this.rows[0]&&Rc(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse","button_collapse"),this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.collapsed?(this.editor_holder.style.display="",this.collapsed=!1,this.setButtonText(this.collapse_control,"","collapse","button_collapse")):(this.editor_holder.style.display="none",this.collapsed=!0,this.setButtonText(this.collapse_control,"","expand","button_expand"))}),this.options.collapsed&&Rc(this.collapse_control,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","button_edit_json"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleEditJSON()}),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[0]),this.schema.options&&typeof this.schema.options.disable_edit_json<"u"?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("properties","edit_properties","button_object_properties"),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleAddProperty()}),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties(!1)}}this.options.table_row?(this.editor_holder=this.container,this.property_order.forEach(n=>{this.editor_holder.appendChild(this.editors[n].container)})):(this.layoutEditors(),this.layoutEditors()),(this.schema.readOnly||this.schema.readonly)&&this.disable()}deactivateNonRequiredProperties(e){const n=this.jsoneditor.options.show_opt_in,r=typeof this.options.show_opt_in<"u",i=r&&this.options.show_opt_in===!0,s=r&&this.options.show_opt_in===!1;(i||!s&&n||!r&&n)&&Object.entries(this.editors).forEach(([o,a])=>{this.isRequiredObject(a)||this.editors[o].deactivate(),e&&typeof this.editors[o].deactivateNonRequiredProperties=="function"&&this.editors[o].deactivateNonRequiredProperties(e)})}showEditJSON(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=`${this.editjson_control.offsetLeft}px`,this.editjson_holder.style.top=`${this.editjson_control.offsetTop+this.editjson_control.offsetHeight}px`,this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)}hideEditJSON(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)}copyJSON(){this.editjson_holder&&navigator.clipboard.writeText(this.editjson_textarea.value).catch(e=>window.alert(e))}saveJSON(){if(this.editjson_holder)try{const e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON(),this.onChange(!0)}catch(e){throw window.alert("invalid JSON"),e}}toggleEditJSON(){this.editing_json?this.hideEditJSON():this.showEditJSON()}insertPropertyControlUsingPropertyOrder(e,n,r){let i;this.schema.properties[e]&&(i=this.schema.properties[e].propertyOrder),typeof i!="number"&&(i=1e3),n.propertyOrder=i;for(let s=0;s<r.childNodes.length;s++){const o=r.childNodes[s];if(n.propertyOrder<o.propertyOrder){this.addproperty_list.insertBefore(n,o),n=null;break}}n&&this.addproperty_list.appendChild(n)}addPropertyCheckbox(e){let n;const r=this.theme.getCheckbox();this.schema.properties[e]&&this.schema.properties[e].title?n=this.schema.properties[e].title:n=e;const i=this.theme.getCheckboxLabel(n),s=this.theme.getFormControl(i,r,null,null,this.path+"-"+e);return s.style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),r.checked=e in this.editors,r.addEventListener("change",()=>{r.checked?this.addObjectProperty(e):this.removeObjectProperty(e),this.onChange(!0)}),this.addproperty_checkboxes[e]=r,r}showAddProperty(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=`${this.addproperty_button.offsetLeft}px`,this.addproperty_holder.style.top=`${this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight}px`,this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())}hideAddProperty(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)}toggleAddProperty(){this.adding_property?this.hideAddProperty():this.showAddProperty()}removeObjectProperty(e){var n,r;if(this.editors[e]){if((r=(n=this.editors[e].schema)==null?void 0:n.options)!=null&&r.dependencies)return;this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors()}}getSchemaOnMaxDepth(e){return Object.keys(e).reduce((n,r)=>{switch(r){case"$ref":return n;case"properties":case"items":return{...n,[r]:{}};case"additionalProperties":case"propertyNames":return{...n,[r]:!0};default:return{...n,[r]:e[r]}}},{})}addObjectProperty(e,n){if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],n)return;this.editors[e].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[e])&&(!this.schema.patternProperties||!Object.keys(this.schema.patternProperties).find(o=>new RegExp(o).test(e))))return;const r=this.getPropertySchema(e);typeof r.propertyOrder!="number"&&(r.propertyOrder=Object.keys(this.editors).length+1e3);const i=this.jsoneditor.getEditorClass(r),{max_depth:s}=this.jsoneditor.options;if(this.editors[e]=this.jsoneditor.createEditor(i,{jsoneditor:this.jsoneditor,schema:s&&this.currentDepth>=s?this.getSchemaOnMaxDepth(r):r,path:`${this.path}.${e}`,parent:this},this.currentDepth+1),this.editors[e].preBuild(),!n){const o=this.theme.getChildEditorHolder();this.editor_holder.appendChild(o),this.editors[e].setContainer(o),this.editors[e].build(),this.editors[e].postBuild(),this.editors[e].setOptInCheckbox(i.header),this.editors[e].activate()}this.cached_editors[e]=this.editors[e]}n||(this.refreshValue(),this.layoutEditors())}}onOutsideModalClick(e){const n=e.path||e.composedPath&&e.composedPath();this.addproperty_holder&&!this.addproperty_holder.contains(n[0])&&this.adding_property&&(e.preventDefault(),e.stopPropagation(),this.toggleAddProperty())}onChildEditorChange(e,n){this.refreshValue(),super.onChildEditorChange(e,n)}canHaveAdditionalProperties(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:typeof this.schema.additionalProperties=="object"&&this.schema.additionalProperties!==null?!0:typeof this.options.no_additional_properties=="boolean"?!this.options.no_additional_properties:typeof this.jsoneditor.options.no_additional_properties=="boolean"?!this.jsoneditor.options.no_additional_properties:!0}destroy(){Object.values(this.cached_editors).forEach(e=>e.destroy()),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClickListener,!0),super.destroy()}getValue(){if(!this.dependenciesFulfilled)return;const e=super.getValue(),n=r=>typeof r>"u"||r===""||r===Object(r)&&Object.keys(r).length===0&&r.constructor===Object;return e&&(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)&&Object.keys(e).forEach(r=>{n(e[r])&&delete e[r]}),e&&(this.jsoneditor.options.remove_false_properties||this.options.remove_false_properties)&&Object.keys(e).forEach(r=>{e[r]===!1&&delete e[r]}),e}refreshValue(){this.value={},this.editors&&(Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&(this.editors[e].refreshValue(),this.value[e]=this.editors[e].getValue())}),Object.keys(this.editors).forEach(e=>{this.editors[e].isActive()&&this.activateDependentRequired(this.editors[e].key)}),this.adding_property&&this.refreshAddProperties())}activateDependentRequired(e){this.getDependentRequired(e).forEach(r=>{let i;Object.entries(this.cached_editors).forEach(([s,o])=>{o.key===r&&(i=o)}),i&&!i.isActive()&&i.activate()})}getDependentRequired(e){return this.schema.dependentRequired&&cu(this.schema.dependentRequired,e)?this.schema.dependentRequired[e]:[]}refreshAddProperties(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_button.style.display="none";return}let e=!1,n=0,r=!1;Object.keys(this.editors).forEach(i=>n++),e=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties<"u"&&n>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},Object.keys(this.cached_editors).forEach(i=>{this.addPropertyCheckbox(i),this.isRequiredObject(this.cached_editors[i])&&i in this.editors&&(this.addproperty_checkboxes[i].disabled=!0),typeof this.schema.minProperties<"u"&&n<=this.schema.minProperties?(this.addproperty_checkboxes[i].disabled=this.addproperty_checkboxes[i].checked,this.addproperty_checkboxes[i].checked||(r=!0)):i in this.editors?r=!0:!e&&!cu(this.schema.properties,i)?this.addproperty_checkboxes[i].disabled=!0:(this.addproperty_checkboxes[i].disabled=!1,r=!0)}),this.canHaveAdditionalProperties()&&(r=!0),Object.keys(this.schema.properties).forEach(i=>{this.cached_editors[i]||(r=!0,this.addPropertyCheckbox(i))}),r?this.canHaveAdditionalProperties()?e?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}isRequiredObject(e){if(e)return typeof e.schema.required=="boolean"?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.includes(e.key):!!this.jsoneditor.options.required_by_default}setValue(e,n){e=this.applyConstFilter(e),e=e||{},(typeof e!="object"||Array.isArray(e))&&(e={}),Object.entries(this.cached_editors).forEach(([r,i])=>{typeof e[r]<"u"?(this.addObjectProperty(r),i.setValue(e[r],n),i.activate(),this.disabled&&i.disable()):!n&&!this.isRequiredObject(i)?this.jsoneditor.options.show_opt_in||this.options.show_opt_in?i.deactivate():this.removeObjectProperty(r):i.setValue(i.getDefault(),n)}),Object.entries(e).forEach(([r,i])=>{this.cached_editors[r]||(this.addObjectProperty(r),this.editors[r]&&this.editors[r].setValue(i,n,!!this.editors[r].template))}),this.refreshValue(),this.layoutEditors(),this.onChange()}showValidationErrors(e){const n=[],r=[];e.forEach(i=>{i.path===this.path?n.push(i):r.push(i)}),this.error_holder&&(n.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n.forEach(i=>{i.errorcount&&i.errorcount>1&&(i.message+=` (${i.errorcount} errors)`),this.error_holder.appendChild(this.theme.getErrorMessage(i.message))})):this.error_holder.style.display="none"),this.options.table_row&&(n.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),Object.values(this.editors).forEach(i=>{i.showValidationErrors(r)})}}X$e.rules=mLt;class gLt extends cC{preBuild(){super.preBuild()}build(){this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];const e=r=>{this.setValue(r.currentTarget.value),this.onChange(!0),this.radioGroup.forEach(i=>{i.checked=i.value===this.getValue()})};for(let r=0;r<this.enum_values.length;r++){const i={id:`${this.formname}[${r}]`,value:this.enum_values[r]};this.jsoneditor.options.use_name_attributes&&(i.name=this.formname),this.input=this.theme.getFormRadio(i),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",e,!1),this.radioGroup.push(this.input);const s=this.theme.getFormRadioLabel(this.enum_display[r]);s.htmlFor=this.input.id;const o=this.theme.getFormRadioControl(s,this.input,!!(this.options.layout==="horizontal"||this.options.compact));this.radioContainer.appendChild(o)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.radioContainer.classList.add("readonly")}const n=this.theme.getContainer();n.appendChild(this.radioContainer),n.dataset.containerFor="radio",this.input=n,this.control=this.theme.getFormControl(this.label,n,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.radioContainer.classList.remove("readonly"),super.enable()}}disable(e){e&&(this.always_disabled=!0);for(let n=0;n<this.radioGroup.length;n++)this.radioGroup[n].disabled=!0;this.radioContainer.classList.add("readonly"),super.disable()}destroy(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}setValue(e){e=this.applyConstFilter(e),typeof e!="string"&&(e=String(e));for(let n=0;n<this.radioGroup.length;n++)if(this.radioGroup[n].value===e){this.radioGroup[n].checked=!0;break}else this.radioGroup[n].checked=!1;this.value=e,this.onChange()}}class yLt extends yu{setValue(e,n,r){e=this.applyConstFilter(e);const i=super.setValue(e,n,r);i!==void 0&&i.changed&&this.sceditor_instance&&this.sceditor_instance.val(i.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){if(window.sceditor){const e=this.expandCallbacks("sceditor",$n({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),n=window.sceditor.instance(this.input);n===void 0&&window.sceditor.create(this.input,e),this.sceditor_instance=n||window.sceditor.instance(this.input),this.sceditor_instance.blur(()=>{this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),super.enable()}disable(e){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),super.disable(e)}destroy(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),super.destroy()}}class bLt extends cC{setValue(e,n){if(e=this.applyConstFilter(e),this.select2_instance){n?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.select2v4?this.select2_instance.val(r).trigger("change"):this.select2_instance.select2("val",r),this.onChange(!0)}else super.setValue(e,n)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){const e=this.expandCallbacks("select2",$n({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=e.tags=!!e.tags&&this.schema.type==="string",this.select2_instance=window.jQuery(this.input).select2(e),this.select2v4=cu(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const n=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(n),this.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}super.afterInputReady()}updateValue(e){let n=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?n=e:this.newEnumAllowed&&(n=this.addNewOption(e)?e:n),this.value=n,n}addNewOption(e){const n=this.typecast(e);let r=!1,i;return!this.enum_values.includes(n)&&n!==""&&(this.enum_options.push(`${n}`),this.enum_display.push(`${n}`),this.enum_values.push(n),this.schema.enum.push(n),i=this.input.querySelector(`option[value="${n}"]`),i?i.removeAttribute("data-select2-tag"):this.select2_instance.append(new Option(n,n,!1,!1)).trigger("change"),r=!0),r}enable(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(e){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable(e)}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class vLt extends cC{setValue(e,n){if(e=this.applyConstFilter(e),this.selectize_instance){n?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(e);this.input.value=r,this.selectize_instance.clear(!0),this.selectize_instance.setValue(r),this.onChange(!0)}else super.setValue(e,n)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){const e=this.expandCallbacks("selectize",$n({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=e.create=!!e.create&&this.schema.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(e)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=n=>{this.updateValue(n),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}super.afterInputReady()}updateValue(e){let n=this.enum_values[0];return e=this.typecast(e||""),this.enum_values.includes(e)?n=e:this.newEnumAllowed&&(n=this.addNewOption(e)?e:n),this.value=n,n}addNewOption(e){const n=this.typecast(e);let r=!1;return!this.enum_values.includes(n)&&n!==""&&(this.enum_options.push(`${n}`),this.enum_display.push(`${n}`),this.enum_values.push(n),this.schema.enum.push(n),this.selectize_instance.addItem(n),this.selectize_instance.refreshOptions(!1),r=!0),r}onWatchedFieldChange(){super.onWatchedFieldChange(),this.selectize_instance&&(this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((e,n)=>{this.selectize_instance.addOption({value:e,text:this.enum_display[n]})}),this.selectize_instance.addItem(`${this.value}`,!0))}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(e){this.selectize_instance&&this.selectize_instance.lock(),super.disable(e)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class xLt extends yu{build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)));const e=this.formname.replace(/\W/g,"");if(typeof SignaturePad=="function"){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);const n=document.createElement("div");n.classList.add("signature-container");const r=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&r.setAttribute("name",e),r.classList.add("signature"),n.appendChild(r),this.signaturePad=new window.SignaturePad(r),this.signaturePad.onEnd=()=>{this.signaturePad.isEmpty()?this.input.value="":this.input.value=this.signaturePad.toDataURL(),this.is_dirty=!0,this.refreshValue(),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()};const i=document.createElement("div"),s=document.createElement("button");s.classList.add("tiny","button"),s.innerHTML="Clear signature",i.appendChild(s),n.appendChild(i),this.options.compact&&this.container.setAttribute("class",`${this.container.getAttribute("class")} compact`),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach(o=>{r.setAttribute("readOnly","readOnly"),o.disabled=!0})),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),this.signaturePad.clear(),this.signaturePad.strokeEnd()}),this.control=this.theme.getFormControl(this.label,n,this.description),this.container.appendChild(this.control),this.refreshValue(),r.width=n.offsetWidth,this.options&&this.options.canvas_height?r.height=this.options.canvas_height:r.height="300"}else{const n=document.createElement("p");n.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(n)}}setValue(e){if(e=this.applyConstFilter(e),typeof SignaturePad=="function"){const n=this.sanitize(e);return this.value===n?void 0:(this.value=n,this.input.value=this.value,this.signaturePad.clear(),e&&e!==""&&this.signaturePad.fromDataURL(e),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1)}}destroy(){this.signaturePad.off(),delete this.signaturePad}}class Z$e extends yu{setValue(e,n,r){e=this.applyConstFilter(e);const i=super.setValue(e,n,r);i!==void 0&&i.changed&&this.simplemde_instance&&this.simplemde_instance.value(i.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let e;window.SimpleMDE?(e=this.expandCallbacks("simplemde",$n({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(e),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",()=>{this.value=this.simplemde_instance.value(),this.is_dirty=!0,this.onChange(!0)}),e.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),super.enable()}disable(e){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),super.disable(e)}destroy(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),super.destroy()}startListening(e,n){const r=()=>{e.display.wrapper.offsetHeight?(this.stopListening(e,n),e.display.lastWrapHeight!==e.display.wrapper.clientHeight&&e.refresh()):n.timeout=window.setTimeout(r,n.delay)};n.timeout=window.setTimeout(r,n.delay),n.hurry=()=>{window.clearTimeout(n.timeout),n.timeout=window.setTimeout(r,50)},e.on(window,"mouseup",n.hurry),e.on(window,"keyup",n.hurry)}stopListening(e,n){window.clearTimeout(n.timeout),e.off(window,"mouseup",n.hurry),e.off(window,"keyup",n.hurry)}}const wLt={".starrating":"direction:rtl;display:inline-block;white-space:nowrap",".starrating > input":"display:none",".starrating > label:before":"content:'%5C2606';margin:1px;font-size:18px;font-style:normal;font-weight:400;line-height:1;font-family:'Arial';display:inline-block",".starrating > label":"color:%23888;cursor:pointer;margin:8px%200%202px%200",".starrating > label.starrating-display-enabled":"margin:1px%200%200%200",".starrating > input:checked ~ label":"color:%23ffca08",".starrating:not(.readonly) > input:hover ~ label":"color:%23ffca08",".starrating > input:checked ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating:not(.readonly) > input:hover ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating .starrating-display":"position:relative;direction:rtl;text-align:center;font-size:10px;line-height:0px"};class K$e extends yu{build(){if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.schema.enum===void 0){let r=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&r--,this.enum_values=[];for(let i=0;i<r;i++)this.enum_values.push(i+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];const e=r=>{r.preventDefault(),r.stopPropagation(),this.setValue(r.currentTarget.value),this.onChange(!0)};for(let r=this.enum_values.length-1;r>-1;r--){const i=this.formname+(r+1),s=this.theme.getFormInputField("radio");s.name=`${this.formname}[starrating]`,s.value=this.enum_values[r],s.id=i,s.addEventListener("change",e,!1),this.radioGroup.push(s);const o=document.createElement("label");o.htmlFor=i,o.title=this.enum_values[r],this.options.displayValue&&o.classList.add("starrating-display-enabled");const a=this.theme.getHiddenText("label");a.textContent=r,o.appendChild(a),this.ratingContainer.appendChild(s),this.ratingContainer.appendChild(o)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.ratingContainer.classList.add("readonly")}const n=this.theme.getContainer();n.appendChild(this.ratingContainer),this.input=n,this.control=this.theme.getFormControl(this.label,n,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()}enable(){if(!this.always_disabled){for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!1;this.ratingContainer.classList.remove("readonly"),this.disabled=!1}}disable(e){e&&(this.always_disabled=!0);for(let n=0;n<this.radioGroup.length;n++)this.radioGroup[n].disabled=!0;this.ratingContainer.classList.add("readonly"),this.disabled=!0}destroy(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)return this.schema.type==="integer"?this.value===""?0:parseInt(this.value):this.value}setValue(e){e=this.applyConstFilter(e),this.value=e;for(let n=0;n<this.radioGroup.length;n++)if(this.radioGroup[n].value===`${e}`){this.radioGroup[n].checked=!0,this.value=e,this.options.displayValue&&(this.displayRating.innerHTML=this.value);break}super.setValue(this.value)}}K$e.rules=wLt;class _Lt extends W$e{build(){super.build(),this.input.setAttribute("type","number"),this.input.getAttribute("step")||this.input.setAttribute("step","1");const e=this.theme.getStepperButtons(this.input);this.control.appendChild(e),this.stepperDown=this.control.querySelector(".stepper-down"),this.stepperUp=this.control.querySelector(".stepper-up")}enable(){super.enable(),this.stepperDown.removeAttribute("disabled"),this.stepperUp.removeAttribute("disabled")}disable(){super.disable(),this.stepperDown.setAttribute("disabled",!0),this.stepperUp.setAttribute("disabled",!0)}}class ELt extends I7{register(){if(super.register(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].register()}unregister(){if(super.unregister(),this.rows)for(let e=0;e<this.rows.length;e++)this.rows[e].unregister()}getNumColumns(){return Math.max(Math.min(12,this.width),3)}preBuild(){const e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e.default||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top,super.preBuild()}build(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.tableContainer.appendChild(this.table),this.container.appendChild(this.tableContainer),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);const e=this.getElementEditor(0,!0);if(this.item_default=e.getDefault(),this.width=e.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.tableContainer),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls),this.item_has_child_editors){const n=e.getChildEditors(),r=e.property_order||Object.keys(n);for(let i=0;i<r.length;i++){const s=this.theme.getTableHeaderCell(n[r[i]].getTitle());n[r[i]].options.hidden&&(s.style.display="none"),this.header_row.appendChild(s)}}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));e.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.header_row.appendChild(this.controls_header_cell),this.addControls()}onChildEditorChange(e,n){this.refreshValue(),super.onChildEditorChange(e,n)}getItemDefault(){return $n({},{default:this.item_default}).default}getItemTitle(){return this.item_title}getElementEditor(e,n){const r=$n({},this.schema.items),i=this.jsoneditor.getEditorClass(r,this.jsoneditor),s=this.row_holder.appendChild(this.theme.getTableRow());let o=s;this.item_has_child_editors||(o=this.theme.getTableCell(),s.appendChild(o));const a=this.jsoneditor.createEditor(i,{jsoneditor:this.jsoneditor,schema:r,container:o,path:`${this.path}.${e}`,parent:this,compact:!0,table_row:!0});return a.preBuild(),n||(a.build(),a.postBuild(),a.controls_cell=s.appendChild(this.theme.getTableCell()),a.row=s,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a}destroy(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,super.destroy()}ensureArraySize(e){if(Array.isArray(e)||(e=[e]),this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());return this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems)),e}setValue(e=[],n){if(e=this.applyConstFilter(e),e=this.ensureArraySize(e),JSON.stringify(e)===this.serialized)return;let i=!1;e.forEach((s,o)=>{this.rows[o]?this.rows[o].setValue(s):(this.addRow(s),i=!0)});for(let s=e.length;s<this.rows.length;s++){const o=this.rows[s].container;this.item_has_child_editors||this.rows[s].row.parentNode.removeChild(this.rows[s].row),this.rows[s].destroy(),o.parentNode&&o.parentNode.removeChild(o),this.rows[s]=null,i=!0}this.rows=this.rows.slice(0,e.length),this.refreshValue(),(i||n)&&this.refreshRowButtons(),this.onChange()}refreshRowButtons(){const e=this.schema.minItems&&this.schema.minItems>=this.rows.length,n=this.schema.maxItems&&this.schema.maxItems<=this.rows.length,r=[];this.rows.forEach((u,d)=>{if(u.delete_button){const c=!e;this.setButtonState(u.delete_button,c),r.push(c)}if(u.copy_button){const c=!n;this.setButtonState(u.copy_button,c),r.push(c)}if(u.moveup_button){const c=d!==0;this.setButtonState(u.moveup_button,c),r.push(c)}if(u.movedown_button){const c=d!==this.rows.length-1;this.setButtonState(u.movedown_button,c),r.push(c)}});const i=r.some(u=>u);this.rows.forEach(u=>this.setButtonState(u.controls_cell,i)),this.setButtonState(this.controls_header_cell,i),this.setButtonState(this.table,this.value.length);const s=!(n||this.hide_add_button);this.setButtonState(this.add_row_button,s);const o=!(!this.value.length||e||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,o);const a=!(this.value.length<=1||e||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,a);const l=s||o||a;this.setButtonState(this.controls,l)}refreshValue(){this.value=[],this.rows.forEach((e,n)=>{this.value[n]=e.getValue()}),this.serialized=JSON.stringify(this.value)}addRow(e){const n=this.rows.length;this.rows[n]=this.getElementEditor(n);const r=this.rows[n].table_controls;return this.hide_delete_buttons||(this.rows[n].delete_button=this._createDeleteButton(n,r)),this.show_copy_button&&(this.rows[n].copy_button=this._createCopyButton(n,r)),this.hide_move_buttons||(this.rows[n].moveup_button=this._createMoveUpButton(n,r)),this.hide_move_buttons||(this.rows[n].movedown_button=this._createMoveDownButton(n,r)),this._supportDragDrop(this.rows[n].row),typeof e<"u"&&this.rows[n].setValue(e),this.rows[n]}_createDeleteButton(e,n){const r=this.getButton("","delete","button_delete_row_title_short");return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{if(i.preventDefault(),i.stopPropagation(),!this.askConfirmation())return!1;const s=i.currentTarget.getAttribute("data-i")*1,o=this.getValue(),l=this.getValue()[s];o.splice(s,1),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("deleteRow",l)}),n.appendChild(r),r}_createCopyButton(e,n){const r=this.getButton("","copy","button_copy_row_title_short"),i=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",e),r.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation();const o=s.currentTarget.getAttribute("data-i")*1,a=this.getValue();let l=a[o];i.items.type==="string"&&i.items.format==="uuid"?l=N2():i.items.type==="object"&&i.items.properties&&a.forEach((u,d)=>{if(o===d)for(const c of Object.keys(u))i.items.properties&&i.items.properties[c]&&i.items.properties[c].format==="uuid"&&(l=Object.assign({},a[o]),l[c]=N2())}),a.splice(o+1,0,l),this.setValue(a),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[o+1])}),n.appendChild(r),r}_createMoveUpButton(e,n){const r=this.getButton("","moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const s=i.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s-1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s-1])}),n.appendChild(r),r}_createMoveDownButton(e,n){const r=this.getButton("","movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",e),r.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation();const s=i.currentTarget.getAttribute("data-i")*1,o=this.getValue();o.splice(s+1,0,o.splice(s,1)[0]),this.setValue(o),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[s+1])}),n.appendChild(r),r}_supportDragDrop(e){q$e(e,(n,r)=>{const i=this.getValue(),s=i[n];i.splice(n,1),i.splice(r,0,s),this.setValue(i),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[r])},{useTrigger:!0})}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.setButtonState(this.panel,this.collapsed),this.collapsed?(this.collapsed=!1,this.setButtonText(e.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.setButtonText(e.currentTarget,"","expand","button_expand"))}),this.options.collapsed&&Rc(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton()}_createToggleButton(){const e=this.getButton("","collapse","button_collapse");return e.classList.add("json-editor-btntype-toggle"),e}_createAddRowButton(){const e=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-add"),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const r=this.addRow();this.refreshValue(),this.refreshRowButtons(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}),this.controls.appendChild(e),e}_createDeleteLastRowButton(){const e=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return e.classList.add("json-editor-btntype-deletelast"),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue(),i=r.pop();this.setValue(r),this.onChange(!0),this.jsoneditor.trigger("deleteRow",i)}),this.controls.appendChild(e),e}_createRemoveAllRowsButton(){const e=this.getButton("button_delete_all","delete","button_delete_all_title");return e.classList.add("json-editor-btntype-deleteall"),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(e),e}}class CLt extends ca{getNumColumns(){return 4}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",$n({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:(r,i,s,o)=>{window.alert(`No upload_handler defined for "${r.path}". You must create your own handler to enable upload to server`)}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(typeof this.options.upload_handler!="function")throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),this.options.enable_drag_drop===!0&&this.options.hide_input===!0||(this.clickHandler=r=>{this.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),this.options.enable_drag_drop===!0){if(this.options.alt_drop_zone!=="")if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),this.altDropZone)this.dropZone=this.altDropZone;else throw new Error(`Error: alt_drop_zone selector "${this.options.alt_drop_zone}" not found!`);else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=r=>{r.preventDefault(),r.stopPropagation();const i=r.target.files||r.dataTransfer.files;if(i&&i.length)if(this.options.max_upload_size!==0&&i[0].size>this.options.max_upload_size)this.theme.addInputError(this.uploader,`${this.translate("upload_max_size")} ${this.options.max_upload_size}`);else if(this.options.mime_type.length!==0&&!this.isValidMimeType(i[0].type,this.options.mime_type))this.theme.addInputError(this.uploader,`${this.translate("upload_wrong_file_format")} ${this.options.mime_type.toString()}`);else{this.fileDisplay&&(this.fileDisplay.value=i[0].name);let s=new window.FileReader;s.onload=o=>{this.preview_value=o.target.result,this.refreshPreview(i),this.onChange(!0),s=null},s.readAsDataURL(i[0])}},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=r=>{const i=r.dataTransfer.items||r.dataTransfer.files,s=i&&i.length&&(this.options.mime_type.length===0||this.isValidMimeType(i[0].type,this.options.mime_type)),o=r.currentTarget.classList&&r.currentTarget.classList.contains("upload-dropzone")&&s;switch((r.currentTarget===window?"w_":"e_")+r.type){case"w_drop":case"w_dragover":o||(r.dataTransfer.dropEffect="none");break;case"e_dragenter":{o?(this.dropZone.classList.add("valid-dropzone"),r.dataTransfer.dropEffect="copy"):this.dropZone.classList.add("invalid-dropzone");break}case"e_dragover":{o&&(r.dataTransfer.dropEffect="copy");break}case"e_dragleave":this.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":{this.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),o&&this.uploadHandler(r);break}}o||r.preventDefault()},this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(r=>{window.addEventListener(r,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(r=>{this.dropZone.addEventListener(r,this.dragHandler,!0)}))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);const e=this.uploader||this.input,n=document.createElement("div");this.dropZone&&!this.altDropZone&&this.options.drop_zone_top===!0&&n.appendChild(this.dropZone),this.fileUploadGroup&&n.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&this.options.drop_zone_top!==!0&&n.appendChild(this.dropZone),n.appendChild(this.preview),e.parentNode.insertBefore(n,e.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.afterInputReady()})}afterInputReady(){if(this.value){const e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.onload=n=>{this.preview.appendChild(e)},e.onerror=n=>{console.error("upload error",n,n.currentTarget)},e.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}refreshPreview(e){if(this.last_preview===this.preview_value||(this.last_preview=this.preview_value,this.preview.innerHTML="",!this.preview_value))return;const n=e[0],r=this.preview_value.match(/^data:([^;,]+)[;,]/);if(n.mimeType=r?r[1]:"unknown",n.size>0){const s=Math.floor(Math.log(n.size)/Math.log(1024));n.formattedSize=`${parseFloat((n.size/1024**s).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}else n.formattedSize="0 Bytes";const i=this.getButton("button_upload","upload","button_upload");i.addEventListener("click",s=>{s.preventDefault(),i.setAttribute("disabled","disabled"),this.theme.removeInputError(this.uploader),this.theme.getProgressBar&&(this.progressBar=this.theme.getProgressBar(),this.preview.appendChild(this.progressBar)),this.options.upload_handler(this.path,n,{success:o=>{this.setValue(o),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.progressBar&&this.preview.removeChild(this.progressBar),i.removeAttribute("disabled")},failure:o=>{this.theme.addInputError(this.uploader,o),this.progressBar&&this.preview.removeChild(this.progressBar),i.removeAttribute("disabled")},updateProgress:o=>{this.progressBar&&(o?this.theme.updateProgressBar(this.progressBar,o):this.theme.updateProgressBarUnknown(this.progressBar))}})}),this.preview.appendChild(this.theme.getUploadPreview(n,i,this.preview_value)),this.options.auto_upload&&(i.dispatchEvent(new window.MouseEvent("click")),i.parentNode.removeChild(i))}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(e){e&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(e){e=this.applyConstFilter(e),this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())}destroy(){this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(e=>{window.removeEventListener(e,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.removeEventListener(e,this.dragHandler,!0)}),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}isValidMimeType(e,n){return n.reduce((r,i)=>r||new RegExp(i.replace(/\*/g,".*"),"gi").test(e),!1)}}class SLt extends yu{preBuild(){super.preBuild(),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}build(){super.build(),this.disable(!0),this.input.setAttribute("readonly","true")}sanitize(e){return this.testUuid(e)||(e=this.uuid),e}setValue(e,n,r){e=this.applyConstFilter(e),this.testUuid(e)||(e=this.uuid),this.uuid=e,super.setValue(e,n,r)}getUuid(){return N2()}testUuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class ALt extends yu{postBuild(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}setValue(e,n,r){e=this.applyConstFilter(e);const i=super.setValue(e,n,r);return this.picker_instance&&this.picker_instance.domElement&&i&&i.changed&&this.picker_instance.setColor(i.value,!0),i}getNumColumns(){return 2}afterInputReady(){super.afterInputReady(),this.createPicker(!0)}disable(){if(super.disable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";const e=this.picker_instance.domElement.querySelectorAll("button");for(let n=0;n<e.length;n++)e[n].disabled=!0}}enable(){if(super.enable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";const e=this.picker_instance.domElement.querySelectorAll("button");for(let n=0;n<e.length;n++)e[n].disabled=!1}}destroy(){this.createPicker(!1),super.destroy()}createPicker(e){if(e){if(window.Picker&&!this.picker_instance){const n=this.expandCallbacks("colorpicker",$n({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),r=i=>{const s=this.picker_instance.settings.editorFormat,o=this.picker_instance.settings.alpha;this.setValue(s==="hex"?o?i.hex:i.hex.slice(0,7):i[`${s+(o?"a":"")}String`])};!n.popup&&typeof n.onChange!="function"?n.onChange=r:n.popup&&typeof n.onDone!="function"&&(n.onDone=r),this.picker_instance=new window.Picker(n),n.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}const lT={ace:WDt,array:I7,arrayChoices:XDt,arraySelect2:ZDt,arraySelectize:KDt,autocomplete:JDt,base64:QDt,button:H$e,checkbox:eLt,choices:G$e,datetime:nLt,describedBy:rLt,enum:iLt,hidden:sLt,info:oLt,integer:W$e,ip:aLt,jodit:lLt,multiple:hLt,multiselect:$R,null:pLt,number:V$e,object:X$e,radio:gLt,sceditor:yLt,select:cC,select2:bLt,selectize:vLt,signature:xLt,simplemde:Z$e,starrating:K$e,stepper:_Lt,string:yu,table:ELt,upload:CLt,uuid:SLt,colorpicker:ALt},kLt="html",TLt="default",DLt={},LLt={},RLt={},FLt={},J$e={},OLt=[],$7="en",MLt=$7;J$e.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls",paste_max_length_reached:"Pasted text exceeded maximum length of {{0}} and will be clipped."};Object.entries(lT).forEach(([t,e])=>{lT[t].options=e.options||{}});function ILt(t,e,n){console.log("Upload handler required for upload editor")}function $Lt(t,e,n){let r={};n&&n.options&&n.options.error_messages&&n.options.error_messages[Fg.language]&&(r=n.options.error_messages[Fg.language]);const i=Fg.languages[Fg.language];if(!i)throw new Error(`Unknown language ${Fg.language}`);let s=r[t]||i[t]||Fg.languages[$7][t]||t;if(e)for(let o=0;o<e.length;o++)s=s.replace(new RegExp(`\\{\\{${o}}}`,"g"),e[o]);return s}function PLt(t,e){return t}const NLt={upload:ILt,use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction",prompt_paste_max_length_reached:!1,remove_false_properties:!1,enforce_const:!1,opt_in_widget:"checkbox"},Fg={options:NLt,theme:kLt,template:TLt,themes:LLt,callbacks:DLt,templates:RLt,iconlibs:FLt,editors:lT,languages:J$e,resolvers:jDt,custom_validators:OLt,default_language:$7,language:MLt,translate:$Lt,translateProperty:PLt};class BLt{constructor(e){this.options=e||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type(n){typeof n.type=="object"&&(n.type=this._expandSubSchema(n.type))},disallow(n){typeof n.disallow=="object"&&(n.disallow=this._expandSubSchema(n.disallow))},anyOf(n){Object.entries(n.anyOf).forEach(([r,i])=>{n.anyOf[r]=this.expandSchema(i)})},dependencies(n){Object.entries(n.dependencies).forEach(([r,i])=>{typeof i=="object"&&!Array.isArray(i)&&(n.dependencies[r]=this.expandSchema(i))})},not(n){n.not=this.expandSchema(n.not)}},this._subSchema2={allOf(n,r){let i=$n({},r);return Object.entries(n.allOf).forEach(([s,o])=>{n.allOf[s]=this.expandRefs(o,!0),i=this.extendSchemas(i,this.expandSchema(o))}),delete i.allOf,i},extends(n,r){let i;return Array.isArray(n.extends)?i=n.extends.reduce((s,o,a)=>this.extendSchemas(s,this.expandSchema(o)),r):i=this.extendSchemas(r,this.expandSchema(n.extends)),delete i.extends,i},oneOf(n,r){const i=$n({},r);return delete i.oneOf,n.oneOf.reduce((s,o,a)=>(s.oneOf[a]=this.extendSchemas(this.expandSchema(o),i),s),r),r}}}async load(e,n,r){return this.schema=e,await this._asyncloadExternalRefs(e,n,this._getFileBase(r),!0),this.expandRefs(e)}expandRefs(e,n){const r=$n({},e);if(!r.$ref)return r;const i=r.$ref.split("#");if(i.length===2&&!this.refs_with_info[r.$ref]){const l=this.expandRecursivePointer(this.schema,i[1]),u=this.extendSchemas(r,this.expandSchema(l));return delete u.$ref,u}const s=i.length>2?this.refs_with_info["#"+i[1]]:this.refs_with_info[r.$ref];delete r.$ref;const o=s.$ref.startsWith("#")?s.fetchUrl:"",a=this._getRef(o,s);if(!this.refs[a])console.warn(`reference:'${a}' not found!`);else if(n&&cu(this.refs[a],"allOf")){const l=this.refs[a].allOf;Object.keys(l).forEach(u=>{l[u]=this.expandRefs(l[u],!0)})}return i.length>2?this.extendSchemas(r,this.expandSchema(this.expandRecursivePointer(this.refs[a],i[2]))):this.extendSchemas(r,this.expandSchema(this.refs[a]))}expandRecursivePointer(e,n){let r=e;return n.split("/").slice(1).forEach(i=>{r[i]&&(r=r[i])}),r.$refs&&r.$refs.startsWith("#")?this.expandRecursivePointer(e,r.$refs):r}expandSchema(e){Object.entries(this._subSchema1).forEach(([r,i])=>{e[r]&&i.call(this,e)});let n=$n({},e);return Object.entries(this._subSchema2).forEach(([r,i])=>{e[r]&&(n=i.call(this,e,n))}),this.expandRefs(n)}_getRef(e,n){const r=e+n;return this.refs[r]?r:e+decodeURIComponent(n.$ref)}_expandSubSchema(e){return Array.isArray(e)?e.map(n=>typeof n=="object"?this.expandSchema(n):n):this.expandSchema(e)}_manageRecursivePointer(e,n){Object.keys(e).forEach(r=>{e[r]!==null&&e[r].$ref&&e[r].$ref.indexOf("#")===0&&(e[r].$ref=n+e[r].$ref)})}_getExternalRefs(e,n,r=!1){r||this._manageRecursivePointer(e,n);const i={},s=o=>Object.keys(o).forEach(a=>{i[a]=!0});if(e.$ref&&typeof e.$ref!="object"&&!(e.$ref.indexOf("#")===0&&r)){let o=e.$ref,a="";o.indexOf("#")>0&&(o=o.substr(0,o.indexOf("#"))),o!==e.$ref&&(a=e.$ref.substr(e.$ref.indexOf("#")));const l=this.refs_prefix+this.refs_counter++,u=l+a;e.$ref.substr(0,1)!=="#"&&!this.refs[e.$ref]&&(i[o]=!0),this.refs_with_info[l]={fetchUrl:n,$ref:o},e.$ref=u}return Object.values(e).forEach(o=>{!o||typeof o!="object"||(Array.isArray(o)?Object.values(o).forEach(a=>{a&&typeof a=="object"&&s(this._getExternalRefs(a,n,r))}):(!o.$ref||!(typeof o.$ref=="string"&&o.$ref.startsWith("#")))&&s(this._getExternalRefs(o,n,r)))}),e.id&&typeof e.id=="string"&&e.id.substr(0,4)==="urn:"?this.refs[e.id]=e:e.$id&&typeof e.$id=="string"&&e.$id.substr(0,4)==="urn:"&&(this.refs[e.$id]=e),i}_getFileBase(e){if(!e)return"/";const{ajaxBase:n}=this.options;return typeof n>"u"?this._getFileBaseFromFileLocation(e):n}_getFileBaseFromFileLocation(e){const n=e.split("/");return n.pop(),`${n.join("/")}/`}_joinUrl(e,n){let r=e;return e.substr(0,7)!=="http://"&&e.substr(0,8)!=="https://"&&e.substr(0,5)!=="blob:"&&e.substr(0,5)!=="data:"&&e.substr(0,1)!=="#"&&e.substr(0,1)!=="/"&&(r=n+e),r.indexOf("#")>0&&(r=r.substr(0,r.indexOf("#"))),r}_isUniformResourceName(e){return e.substr(0,4)==="urn:"}async _asyncloadExternalRefs(e,n,r,i=!1){const s=this._getExternalRefs(e,n,i);let o=0;for(const a of Object.keys(s)){if(typeof a>"u"||this.refs[a])continue;if(this._isUniformResourceName(a)){this.refs[a]="loading",o++;const c=this.options.urn_resolver;let f=a;if(typeof c!="function")throw console.log(`No "urn_resolver" callback defined to resolve "${f}"`),new Error(`Must set urn_resolver option to a callback to resolve ${f}`);f.indexOf("#")>0&&(f=f.substr(0,f.indexOf("#")));let h;try{let p;h=await c(f);try{p=JSON.parse(h)}catch(g){throw console.log(g),new Error(`Failed to parse external ref ${f}`)}if(!(typeof p=="boolean"||typeof p=="object")||p===null||Array.isArray(p))throw new Error(`External ref does not contain a valid schema - ${f}`);this.refs[a]=p,await this._asyncloadExternalRefs(p,a,r)}catch(p){throw console.log(p),new Error(`Failed to parse external ref ${f}`)}if(typeof h=="boolean")throw new Error(`External ref does not contain a valid schema - ${f}`);continue}if(!this.options.ajax)throw new Error(`Must set ajax option to true to load external ref ${a}`);o++;let l=this._joinUrl(a,r),u;if(this.options.ajax_cache_responses){const c=this.cacheGet(l);c&&(u=c)}if(!u){const c=await new Promise(f=>{const h=new XMLHttpRequest;this.options.ajaxCredentials&&(h.withCredentials=this.options.ajaxCredentials),h.overrideMimeType("application/json"),h.open("GET",l,!0),h.onload=()=>{f(h)},h.onerror=p=>{f(void 0)},h.send()});if(typeof c>"u")throw new Error(`Failed to fetch ref via ajax - ${a}`);try{u=JSON.parse(c.responseText),this.onSchemaLoaded({schema:u,schemaUrl:l}),this.options.ajax_cache_responses&&this.cacheSet(l,u)}catch(f){throw console.log(f),new Error(`Failed to parse external ref ${l}`)}}if(!(typeof u=="boolean"||typeof u=="object")||u===null||Array.isArray(u))throw new Error(`External ref does not contain a valid schema - ${l}`);this.refs[a]=u;const d=this._getFileBaseFromFileLocation(l);if(l!==a){const c=l.split("/");l=(a.substr(0,1)==="/"?"/":"")+c.pop()}await this._asyncloadExternalRefs(u,l,d)}if(!o)return!0;this.onAllSchemasLoaded()}onSchemaLoaded(e){}onAllSchemasLoaded(){}extendSchemas(e,n){e=$n({},e),n=$n({},n);const r={},i=(a,l)=>(a==="required"||a==="defaultProperties")&&typeof l=="object"&&Array.isArray(l),s=(a,l)=>{i(a,l)?r[a]=l.concat(n[a]).reduce((u,d)=>(u.includes(d)||u.push(d),u),[]):a==="type"&&(typeof l=="string"||Array.isArray(l))?o(l):typeof l=="object"&&!Array.isArray(l)&&l!==null?r[a]=this.extendSchemas(l,n[a]):r[a]=l},o=a=>{typeof a=="string"&&(a=[a]),typeof n.type=="string"&&(n.type=[n.type]),!n.type||!n.type.length?r.type=a:r.type=a.filter(l=>n.type.includes(l)),r.type.length===1&&typeof r.type[0]=="string"?r.type=r.type[0]:r.type.length===0&&delete r.type};return Object.entries(e).forEach(([a,l])=>{typeof n[a]<"u"?s(a,l):r[a]=l}),Object.entries(n).forEach(([a,l])=>{typeof e[a]>"u"&&(r[a]=l)}),r}getCacheKey(e){return["je-cache",e].join("::")}getCacheBuster(){return this.options.ajax_cache_buster||new Date().toISOString().slice(0,10)}cacheSet(e,n){try{window.localStorage.setItem(this.getCacheKey(e),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:n}))}catch(r){console.error(r)}}cacheGet(e){try{const n=window.localStorage.getItem(this.getCacheKey(e));if(n){const r=JSON.parse(n);if(r.cacheBuster&&r.schema&&r.cacheBuster===this.getCacheBuster())return r.schema;this.cacheDelete(e)}}catch(n){console.error(n)}}cacheDelete(e){window.localStorage.removeItem(this.getCacheKey(e))}}const zLt=()=>({compile(t){const e=t.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),n=e&&e.length;if(!n)return()=>t;const r=[],i=s=>{let o=e[s].replace(/[{}]+/g,"").trim().split(".");const a=o.length;let l;if(a>1){let u;l=d=>{for(u=d,s=0;s<a&&(u=u[o[s]],!!u);s++);return u}}else o=o[0],l=u=>u[o];r.push({s:e[s],r:l})};for(let s=0;s<n;s++)i(s);return s=>{let o=`${t}`,a;for(let l=0;l<n;l++)a=r[l],o=o.replace(a.s,a.r(s));return o}}}),jLt=()=>window.EJS?{compile(t){const e=new window.EJS({text:t});return n=>e.render(n)}}:!1,ULt=()=>window.Handlebars,qLt=()=>window.Hogan?{compile(t){const e=window.Hogan.compile(t);return n=>e.render(n)}}:!1,HLt=()=>window._?{compile(t){return e=>window._.template(t)(e)}}:!1,GLt=()=>!window.Mark||!window.Mark.up?!1:{compile(t){return e=>window.Mark.up(t,e)}},VLt=()=>window.Mustache?{compile(t){return e=>window.Mustache.render(t,e)}}:!1,WLt=()=>window.swig,YLt=()=>window._?{compile(t){return e=>window._.template(t)(e)}}:!1,XLt={default:zLt,ejs:jLt,handlebars:ULt,hogan:qLt,lodash:HLt,markup:GLt,mustache:VLt,swig:WLt,underscore:YLt},ZLt={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""};class Dh{constructor(e="",n=ZLt){this.mapping=n,this.icon_prefix=e}getIconClass(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:this.icon_prefix+e}getIcon(e){const n=this.getIconClass(e);if(!n)return null;const r=document.createElement("i");return r.classList.add(...n.split(" ")),r}}const KLt="glyphicon glyphicon-",JLt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class QLt extends Dh{constructor(){super(KLt,JLt)}}const eRt="icon-",tRt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class nRt extends Dh{constructor(){super(eRt,tRt)}}const rRt="fa fa-",iRt={collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"files-o",clear:"times-circle-o",time:"clock-o",calendar:"calendar",edit_properties:"list"};class sRt extends Dh{constructor(){super(rRt,iRt)}}const oRt="fas fa-",aRt={collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"};class lRt extends Dh{constructor(){super(oRt,aRt)}}const uRt="ui-icon ui-icon-",cRt={collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",subtract:"minusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",moveright:"arrowthick-1-e",movedown:"arrowthick-1-s",moveleft:"arrowthick-1-w",copy:"copy",clear:"circle-close",time:"time",calendar:"calendar",edit_properties:"note"};class dRt extends Dh{constructor(){super(uRt,cRt)}}const fRt="oi oi-",hRt={collapse:"collapse-down",expand:"expand-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"file",moveup:"arrow-thick-top",moveright:"arrow-thick-right",movedown:"arrow-thick-bottom",moveleft:"arrow-thick-left",copy:"clipboard",clear:"circle-x",time:"clock",calendar:"calendar",edit_properties:"list"};class pRt extends Dh{constructor(){super(fRt,hRt)}}const mRt="icon icon-",gRt={collapse:"arrow-down",expand:"arrow-right",delete:"delete",edit:"edit",add:"plus",subtract:"minus",cancel:"cross",save:"check",moveup:"upward",moveright:"forward",movedown:"downward",moveleft:"back",copy:"copy",clear:"close",time:"time",calendar:"bookmark",edit_properties:"menu"};class yRt extends Dh{constructor(){super(mRt,gRt)}}const bRt="bi bi-",vRt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"dash",cancel:"x-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"clipboard",clear:"x-circle",time:"clock",calendar:"calendar",edit_properties:"list-ul"};class xRt extends Dh{constructor(){super(bRt,vRt)}}const wRt={bootstrap:xRt,bootstrap3:QLt,fontawesome3:nRt,fontawesome4:sRt,fontawesome5:lRt,jqueryui:dRt,openiconic:pRt,spectre:yRt},$Ee=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(t=>t in document.documentElement);class Lh{constructor(e,n={disable_theme_rules:!1}){this.jsoneditor=e,Object.keys(n).forEach(r=>{typeof e.options[r]<"u"&&(n[r]=e.options[r])}),this.options=n}getContainer(){return document.createElement("div")}getOptInCheckbox(e){const n=document.createElement("span"),r=this.getHiddenLabel(e+" opt-in");r.setAttribute("for",e+"-opt-in"),r.textContent=e+"-opt-in";const i=document.createElement("input");return i.setAttribute("type","checkbox"),i.setAttribute("style","margin: 0 10px 0 0;"),i.setAttribute("id",e+"-opt-in"),i.classList.add("json-editor-opt-in"),n.appendChild(i),n.appendChild(r),{label:r,checkbox:i,container:n}}getOptInSwitch(e){return this.getOptInCheckbox()}getFloatRightLinkHolder(){const e=document.createElement("div");return e.classList.add("je-float-right-linkholder"),e}getModal(){const e=document.createElement("div");return e.style.display="none",e.classList.add("je-modal"),e}getGridContainer(){return document.createElement("div")}getGridRow(){const e=document.createElement("div");return e.classList.add("row"),e}getGridColumn(){return document.createElement("div")}setGridColumnSize(e,n){}getLink(e){const n=document.createElement("a");return n.setAttribute("href","#"),n.appendChild(document.createTextNode(e)),n}disableHeader(e){e.style.color="#ccc"}disableLabel(e){e.style.color="#ccc"}enableHeader(e){e.style.color=""}enableLabel(e){e.style.color=""}getInfoButton(e){const n=document.createElement("span");n.innerText="",n.classList.add("je-infobutton-icon");const r=document.createElement("span");return r.classList.add("je-infobutton-tooltip"),r.innerText=e,n.onmouseover=()=>{r.style.visibility="visible"},n.onmouseleave=()=>{r.style.visibility="hidden"},n.appendChild(r),n}getFormInputLabel(e,n){const r=document.createElement("label");return r.appendChild(document.createTextNode(e)),n&&r.classList.add("required"),r}getLabelLike(e,n){const r=document.createElement("b");return r.appendChild(document.createTextNode(e)),n&&r.classList.add("required"),r}getHeader(e,n){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.classList.add("je-header"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("je-checkbox"),e}getCheckboxLabel(e,n){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),n&&r.classList.add("required"),r}getMultiCheckboxHolder(e,n,r,i){const s=document.createElement("div");return s.classList.add("control-group"),n&&(n.style.display="block",s.appendChild(n),i&&n.appendChild(i)),Object.values(e).forEach(o=>{o.style.display="inline-block",o.style.marginRight="20px",s.appendChild(o)}),r&&s.appendChild(r),s}getFormCheckboxControl(e,n,r){const i=document.createElement("div");return i.appendChild(e),n.style.width="auto",e.insertBefore(n,e.firstChild),r&&i.classList.add("je-checkbox-control--compact"),i}getFormRadio(e){const n=this.getFormInputField("radio");return Object.keys(e).forEach(r=>n.setAttribute(r,e[r])),n.classList.add("je-radio"),n}getFormRadioLabel(e,n){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${e}`)),n&&r.classList.add("required"),r}getFormRadioControl(e,n,r,i){const s=document.createElement("div");return s.appendChild(e),n.style.width="auto",e.insertBefore(n,e.firstChild),r&&s.classList.add("je-radio-control--compact"),n.tagName.toLowerCase()!=="div"&&i&&e&&n&&(n.setAttribute("id",i),n.setAttribute("aria-labelledby",i),e.setAttribute("for",i)),s}getSelectInput(e,n,r=!1){const i=document.createElement("select");return e&&this.setSelectOptions(i,e,[],r),i}getSwitcher(e){const n=this.getSelectInput(e,!1);return n.classList.add("je-switcher"),n}getSwitcherOptions(e){return e.getElementsByTagName("option")}setSwitcherOptions(e,n,r){this.setSelectOptions(e,n,r)}setSelectOptions(e,n,r=[],i=!1,s=" "){if(e.innerHTML="",i){const o=document.createElement("option");o.setAttribute("value","_placeholder_"),o.textContent=s,o.setAttribute("disabled",""),o.setAttribute("hidden",""),e.appendChild(o)}for(let o=0;o<n.length;o++){const a=document.createElement("option");a.setAttribute("value",n[o]),a.textContent=r[o]||n[o],e.appendChild(a)}}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("je-textarea"),e}getHiddenLabel(e){const n=document.createElement("label");return n.textContent=e,n.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),n}visuallyHidden(e){e&&e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}getHiddenText(e){const n=document.createElement("span");return n.textContent=e,n.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),n}getRangeInput(e,n,r,i,s){const o=this.getFormInputField("range");return o.setAttribute("min",e),o.setAttribute("max",n),o.setAttribute("step",r),i&&(i.setAttribute("id",s+"-description"),o.setAttribute("aria-describedby",s+"-description")),o}getStepperButtons(e){const n=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-down");const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),i.setAttribute("disabled",!0)),r.textContent="-",i.textContent="+";const o=(u,d)=>{d?u.value=Number(d):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Rc(e,"change")}),i.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Rc(e,"change")}),n.appendChild(r),n.appendChild(i),n}getRangeOutput(e){const n=document.createElement("output"),r=i=>{n.value=i.currentTarget.value};return e.addEventListener("change",r,!1),e.addEventListener("input",r,!1),n}getRangeControl(e,n){const r=document.createElement("div");return r.classList.add("je-range-control"),n&&r.appendChild(n),r.appendChild(e),r}getFormInputField(e){const n=document.createElement("input");return n.setAttribute("type",e),n}afterInputReady(e){}getFormControl(e,n,r,i,s){const o=document.createElement("div");return o.classList.add("form-control"),e&&(o.appendChild(e),s&&e.setAttribute("for",s)),(n.type==="checkbox"||n.type==="radio")&&e?(n.style.width="auto",e.insertBefore(n,e.firstChild),i&&e.appendChild(i)):(i&&e&&e.appendChild(i),o.appendChild(n)),n.tagName.toLowerCase()!=="div"&&n&&e&&s&&(e.setAttribute("for",s),n.setAttribute("id",s)),n.tagName.toLowerCase()!=="div"&&n&&r&&(r.setAttribute("id",s+"-description"),n.setAttribute("aria-describedby",s+"-description")),r&&o.appendChild(r),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-indented-panel--top"),e}getChildEditorHolder(){return document.createElement("div")}getDescription(e){const n=document.createElement("p");return window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getCheckboxDescription(e){return this.getDescription(e)}getFormInputDescription(e){return this.getDescription(e)}getButtonHolder(){return document.createElement("span")}getHeaderButtonHolder(){return this.getButtonHolder()}getFormButtonHolder(e){return this.getButtonHolder()}getButton(e,n,r){const i=document.createElement("button");return i.type="button",this.setButtonText(i,e,n,r),i}getFormButton(e,n,r){return this.getButton(e,n,r)}setButtonText(e,n,r,i){for(;e.firstChild;)e.removeChild(e.firstChild);if(r&&(e.appendChild(r),n=` ${n}`),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!r){const s=document.createElement("span");s.appendChild(document.createTextNode(n)),e.appendChild(s)}i&&e.setAttribute("title",i)}getTableContainer(){return document.createElement("div")}getTable(){return document.createElement("table")}getTableRow(){return document.createElement("tr")}getTableHead(){return document.createElement("thead")}getTableBody(){return document.createElement("tbody")}getTableHeaderCell(e){const n=document.createElement("th");return n.textContent=e,n}getTableCell(){return document.createElement("td")}getErrorMessage(e){const n=document.createElement("p");return n.style=n.style||{},n.style.color="red",n.appendChild(document.createTextNode(e)),n}addInputError(e,n){e.errmsg.setAttribute("role","alert")}removeInputError(e){}addTableRowError(e){}removeTableRowError(e){}getTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='je-tabholder tabs'></div><div class='content' id='${n}'></div><div class='je-tabholder--clear'></div>`,r}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='${n}'></div>`,r}applyStyles(e,n){Object.keys(n).forEach(r=>e.style[r]=n[r])}closest(e,n){for(;e&&e!==document;)if(e[$Ee]){if(e[$Ee](n))return e;e=e.parentNode}else return!1;return!1}insertBasicTopTab(e,n){n.firstChild.insertBefore(e,n.firstChild.firstChild)}getTab(e,n){const r=document.createElement("div");return r.appendChild(e),r.id=n,r.classList.add("je-tab"),r}getTopTab(e,n){const r=document.createElement("div");return r.appendChild(e),r.id=n,r.classList.add("je-tab--top"),r}getTabContentHolder(e){return e.children[1]}getTopTabContentHolder(e){return e.children[1]}getTabContent(){return this.getIndentedPanel()}getTopTabContent(){return this.getTopIndentedPanel()}markTabActive(e){this.applyStyles(e.tab,{opacity:1,background:"white"}),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){this.applyStyles(e.tab,{opacity:.5,background:""}),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}addTab(e,n){e.children[0].appendChild(n)}addTopTab(e,n){e.children[0].appendChild(n)}getBlockLink(){const e=document.createElement("a");return e.classList.add("je-block-link"),e}getBlockLinkHolder(){return document.createElement("div")}getLinksHolder(){return document.createElement("div")}createMediaLink(e,n,r){e.appendChild(n),r.classList.add("je-media"),e.appendChild(r)}createImageLink(e,n,r){e.appendChild(n),n.appendChild(r)}getFirstTab(e){return e.firstChild.firstChild}getInputGroup(e,n){}cleanText(e){const n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText}getDropZone(e){const n=document.createElement("div");return n.setAttribute("data-text",e),n.classList.add("je-dropzone"),n}getUploadPreview(e,n,r){const i=document.createElement("div");if(i.classList.add("je-upload-preview"),e.mimeType.substr(0,5)==="image"){const a=document.createElement("img");a.src=r,i.appendChild(a)}const s=document.createElement("div");s.innerHTML+=`<strong>Name:</strong> ${e.name}<br><strong>Type:</strong> ${e.type}<br><strong>Size:</strong> ${e.formattedSize}`,i.appendChild(s),i.appendChild(n);const o=document.createElement("div");return o.style.clear="left",i.appendChild(o),i}getProgressBar(){const r=document.createElement("progress");return r.setAttribute("max",100),r.setAttribute("value",0),r}updateProgressBar(e,n){e&&e.setAttribute("value",n)}updateProgressBarUnknown(e){e&&e.removeAttribute("value")}}const _Rt={".je-form-input-label":"display:block;margin-bottom:3px;font-weight:bold",".je-form-input-description":"display:inline-block;margin:0;font-size:0.8em;font-style:italic",".je-indented-panel":"padding:5px;margin:10px;border-radius:3px;border:1px%20solid%20%23ddd",".je-child-editor-holder":"margin-bottom:8px",".je-header-button-holder":"display:inline-block;margin-left:10px;font-size:0.8em;vertical-align:middle",".je-table":"margin-bottom:5px;border-bottom:1px%20solid%20%23ccc",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class Q$e extends Lh{getFormInputLabel(e,n){const r=super.getFormInputLabel(e,n);return r.classList.add("je-form-input-label"),r}getFormInputDescription(e){const n=super.getFormInputDescription(e);return n.classList.add("je-form-input-label"),n}getIndentedPanel(){const e=super.getIndentedPanel();return e.classList.add("je-indented-panel"),e}getTopIndentedPanel(){return this.getIndentedPanel()}getChildEditorHolder(){const e=super.getChildEditorHolder();return e.classList.add("je-child-editor-holder"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("je-header-button-holder"),e}getTable(){const e=super.getTable();return e.classList.add("je-table"),e}addInputError(e,n){const r=this.closest(e,".form-control")||e.controlgroup;e.errmsg?e.errmsg.style.display="block":(e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",r.appendChild(e.errmsg)),e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(n)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}Q$e.rules=_Rt;const ERt={".switch":"position:relative;display:inline-block;width:28px;height:16px;margin-right:10px",".switch input":"opacity:0;width:0;height:0",".switch-slider":"position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:%23ccc;transition:.1s;border-radius:34px",".switch-slider:before":"position:absolute;content:%22%22;height:12px;width:12px;left:1px;top:2px;background-color:white;transition:.1s;border-radius:50%25","input:checked + .switch-slider":"background-color:%232196F3","input:focus + .switch-slider":"box-shadow:0%200%201px%20%232196F3","input:checked + .switch-slider:before":"transform:translateX(12px)","input:disabled + .switch-slider":"opacity:0.5"};class ePe extends Lh{getOptInSwitch(e){const n=this.getHiddenLabel(e+" opt-in");n.setAttribute("for",e+"-opt-in");const r=document.createElement("label");r.classList.add("switch");const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("id",e+"-opt-in"),i.classList.add("json-editor-opt-in");const s=document.createElement("span");s.classList.add("switch-slider");const o=document.createElement("span");return o.classList.add("sr-only"),o.textContent=e+"-opt-in",r.appendChild(o),r.appendChild(i),r.appendChild(s),{label:n,checkbox:i,container:r}}getSelectInput(e,n){const r=super.getSelectInput(e);return r.classList.add("form-control"),r}setGridColumnSize(e,n,r){e.classList.add(`col-md-${n}`),r&&e.classList.add(`col-md-offset-${r}`)}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),e}getRangeInput(e,n,r,i,s){return super.getRangeInput(e,n,r,i,s)}getFormInputField(e){const n=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&n.classList.add("form-control"),n}getHiddenLabel(e){const n=document.createElement("label");return n.textContent=e,n.classList.add("sr-only"),n}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const n=document.createElement("span");return n.textContent=e,n.classList.add("sr-only"),n}getFormControl(e,n,r,i,s){const o=document.createElement("div");return e&&(n.type==="checkbox"||n.type==="radio")?(o.classList.add(n.type),i&&e.appendChild(i),e.insertBefore(n,e.firstChild),o.appendChild(e)):(o.classList.add("form-group"),e&&(e.classList.add("control-label"),o.appendChild(e),i&&e.appendChild(i)),o.appendChild(n)),r&&o.appendChild(r),n.tagName.toLowerCase()!=="div"&&n&&e&&s&&(e.setAttribute("for",s),n.setAttribute("id",s)),n.tagName.toLowerCase()!=="div"&&n&&r&&(r.setAttribute("id",s+"-description"),n.setAttribute("aria-describedby",s+"-description")),o}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("well","well-sm"),e.style.paddingBottom=0,e}getInfoButton(e){const n=document.createElement("span");n.classList.add("glyphicon","glyphicon-info-sign","pull-right"),n.style.padding=".25rem",n.style.position="relative",n.style.display="inline-block";const r=document.createElement("span");return r.style["font-family"]="sans-serif",r.style.visibility="hidden",r.style["background-color"]="rgba(50, 50, 50, .75)",r.style.margin="0 .25rem",r.style.color="#FAFAFA",r.style.padding=".5rem 1rem",r.style["border-radius"]=".25rem",r.style.width="25rem",r.style.position="absolute",r.innerText=e,n.onmouseover=()=>{r.style.visibility="visible"},n.onmouseleave=()=>{r.style.visibility="hidden"},n.appendChild(r),n}getFormInputDescription(e){const n=document.createElement("p");return n.classList.add("help-block"),window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getHeaderContainer(){return document.createElement("div")}getHeader(e,n){const r=document.createElement("span");return r.classList.add("h3"),typeof e=="string"?r.textContent=e:r.appendChild(e),r}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getButton(e,n,r){const i=super.getButton(e,n,r);return i.classList.add("btn","btn-default"),i}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-bordered"),e.style.width="auto",e.style.maxWidth="none",e}addInputError(e,n){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("help-block","errormsg"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=n,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='col-md-2 nav nav-pills nav-stacked' id='${n}' role='tablist'></ul><div class='col-md-10 tab-content active well well-small'  id='${n}'></div>`,r}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav nav-tabs' id='${n}' role='tablist'></ul><div class='tab-content active well well-small'  id='${n}'></div>`,r}getTab(e,n){const r=document.createElement("li");r.setAttribute("role","presentation");const i=document.createElement("a");return i.setAttribute("href",`#${n}`),i.appendChild(e),i.setAttribute("aria-controls",n),i.setAttribute("role","tab"),i.setAttribute("data-toggle","tab"),r.appendChild(i),r}getTopTab(e,n){const r=document.createElement("li");r.setAttribute("role","presentation");const i=document.createElement("a");return i.setAttribute("href",`#${n}`),i.appendChild(e),i.setAttribute("aria-controls",n),i.setAttribute("role","tab"),i.setAttribute("data-toggle","tab"),r.appendChild(i),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}getProgressBar(){const i=document.createElement("div");i.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",i.appendChild(s),i}updateProgressBar(e,n){if(!e)return;const r=e.firstChild,i=`${n}%`;r.setAttribute("aria-valuenow",n),r.style.width=i,r.innerHTML=i}updateProgressBarUnknown(e){if(!e)return;const n=e.firstChild;e.classList.add("progress","progress-striped","active"),n.removeAttribute("aria-valuenow"),n.style.width="100%",n.innerHTML=""}getInputGroup(e,n){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const i=document.createElement("div");i.classList.add("input-group-btn"),r.appendChild(i);for(let s=0;s<n.length;s++)i.appendChild(n[s]);return r}}ePe.rules=ERt;const CRt={".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},SRt={disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class tPe extends Lh{constructor(e){super(e,SRt)}getSelectInput(e,n){const r=super.getSelectInput(e);return r.classList.add("form-control"),this.options.custom_forms===!1?(this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg")):(r.classList.remove("form-control"),r.classList.add("custom-select"),this.options.input_size==="small"&&r.classList.add("custom-select-sm"),this.options.input_size==="large"&&r.classList.add("custom-select-lg")),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}getOptInSwitch(e){const n=this.getHiddenLabel(e+" opt-in");n.setAttribute("for",e+"-opt-in");const r=document.createElement("div");r.classList.add("custom-control","custom-switch","d-inline-block","fs-6");const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("id",e+"-opt-in"),i.classList.add("custom-control-input","json-editor-opt-in");const s=document.createElement("label");s.setAttribute("for",e+"-opt-in"),s.classList.add("custom-control-label");const o=document.createElement("span");return o.classList.add("sr-only"),o.textContent=e+"-opt-in",s.appendChild(o),r.appendChild(i),r.appendChild(s),{label:n,checkbox:i,container:r}}setGridColumnSize(e,n,r){e.classList.add(`col-md-${n}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const n=e.name;e.id=n;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.htmlFor=n),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,n,r,i,s){const o=super.getRangeInput(e,n,r,i,s);return this.options.custom_forms===!0&&(o.classList.remove("form-control"),o.classList.add("custom-range")),o}getStepperButtons(e){const n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("button");s.setAttribute("type","button");const o=document.createElement("button");o.setAttribute("type","button"),n.appendChild(r),n.appendChild(e),n.appendChild(i),r.appendChild(s),i.appendChild(o),n.classList.add("input-group"),r.classList.add("input-group-prepend"),i.classList.add("input-group-append"),s.classList.add("btn"),s.classList.add("btn-secondary"),s.classList.add("stepper-down"),o.classList.add("btn"),o.classList.add("btn-secondary"),o.classList.add("stepper-up"),e.getAttribute("readonly")&&(s.setAttribute("disabled",!0),o.setAttribute("disabled",!0)),s.textContent="-",o.textContent="+";const l=(c,f)=>{f?c.value=Number(f):c.value=Number(c.value),c.setAttribute("initialized","1")},u=e.getAttribute("min"),d=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),s.addEventListener("click",()=>{e.getAttribute("initialized")?u?Number(e.value)>Number(u)&&e.stepDown():e.stepDown():l(e,u),Rc(e,"change")}),o.addEventListener("click",()=>{e.getAttribute("initialized")?d?Number(e.value)<Number(d)&&e.stepUp():e.stepUp():l(e,u),Rc(e,"change")}),n}getFormInputField(e){const n=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&e!=="file"&&(n.classList.add("form-control"),this.options.input_size==="small"&&n.classList.add("form-control-sm"),this.options.input_size==="large"&&n.classList.add("form-control-lg")),e==="file"&&n.classList.add("form-control-file"),n}getHiddenLabel(e){const n=document.createElement("label");return n.textContent=e,n.classList.add("sr-only"),n}visuallyHidden(e){e&&e.classList.add("sr-only")}getHiddenText(e){const n=document.createElement("span");return n.textContent=e,n.classList.add("sr-only"),n}getFormControl(e,n,r,i,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(n.type==="checkbox"||n.type==="radio")){const a=document.createElement("div");this.options.custom_forms===!1?(a.classList.add("form-check"),n.classList.add("form-check-input"),e.classList.add("form-check-label")):(a.classList.add("custom-control"),n.classList.add("custom-control-input"),e.classList.add("custom-control-label"),n.type==="checkbox"?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(n),a.appendChild(e),i&&a.appendChild(i),o.appendChild(a)}else e&&(o.appendChild(e),i&&o.appendChild(i)),o.appendChild(n);return r&&o.appendChild(r),n.tagName.toLowerCase()!=="div"&&n&&e&&s&&(e.setAttribute("for",s),n.setAttribute("id",s)),n.tagName.toLowerCase()!=="div"&&n&&r&&(r.setAttribute("id",s+"-description"),n.setAttribute("aria-describedby",s+"-description")),o}getInfoButton(e){const n=document.createElement("button");n.type="button",n.classList.add("ml-3","jsoneditor-twbs4-text-button"),n.setAttribute("data-toggle","tooltip"),n.setAttribute("data-placement","auto"),n.title=e;const r=document.createTextNode("");return n.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(n).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&n.classList.add("je-tooltip"),n}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,n,r,i){const s=document.createElement("div");s.classList.add("form-group"),n&&(s.appendChild(n),i&&n.appendChild(i));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const n=this.getFormInputField("radio");for(const r in e)n.setAttribute(r,e[r]);return this.options.custom_forms===!1?n.classList.add("form-check-input"):n.classList.add("custom-control-input"),n}getFormRadioLabel(e,n){const r=document.createElement("label");return this.options.custom_forms===!1?r.classList.add("form-check-label"):r.classList.add("custom-control-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,n,r){const i=document.createElement("div");return this.options.custom_forms===!1?i.classList.add("form-check"):i.classList.add("custom-control","custom-radio"),i.appendChild(n),i.appendChild(e),r&&(this.options.custom_forms===!1?i.classList.add("form-check-inline"):i.classList.add("custom-control-inline")),i}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","mb-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const n=document.createElement("small");return n.classList.add("form-text"),window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getHeader(e,n){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+n),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const n=this.getButtonHolder();return n.classList.add("d-block"),e==="center"?n.classList.add("text-center"):e==="right"&&n.classList.add("text-right"),n}getButton(e,n,r){const i=super.getButton(e,n,r);return i.classList.add("btn","btn-secondary","btn-sm"),i}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const n=document.createElement("div");return n.classList.add("alert","alert-danger"),n.setAttribute("role","alert"),n.appendChild(document.createTextNode(e)),n}addInputError(e,n){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=n,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const n=document.createElement("div"),r=typeof e>"u"?"":e;return n.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,n.classList.add("row"),n}addTab(e,n){e.children[0].children[0].appendChild(n)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${n}'></ul></div><div class='card-body'><div class='tab-content' id='${n}'></div></div>`,r}getTab(e,n){const r=document.createElement("li");r.classList.add("nav-item");const i=document.createElement("a");return i.classList.add("nav-link"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTopTab(e,n){const r=document.createElement("li");r.classList.add("nav-item");const i=document.createElement("a");return i.classList.add("nav-link"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,n){n.children[0].children[0].insertBefore(e,n.children[0].children[0].firstChild)}addTopTab(e,n){e.children[0].children[0].appendChild(n)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const i=document.createElement("div");i.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",i.appendChild(s),i}updateProgressBar(e,n){if(!e)return;const r=e.firstChild,i=`${n}%`;r.setAttribute("aria-valuenow",n),r.style.width=i,r.innerHTML=i}updateProgressBarUnknown(e){if(!e)return;const n=e.firstChild;e.classList.add("progress","progress-striped","active"),n.removeAttribute("aria-valuenow"),n.style.width="100%",n.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,n){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);const i=document.createElement("div");i.classList.add("input-group-append"),r.appendChild(i);for(let s=0;s<n.length;s++)n[s].classList.remove("mr-2","btn-secondary"),n[s].classList.add("btn-outline-secondary"),i.appendChild(n[s]);return r}}tPe.rules=CRt;const ARt={".form-group":"margin-bottom:1rem",".form-text":"display:block",".jsoneditor-twbs5-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},kRt={disable_theme_rules:!1,input_size:"normal",object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class nPe extends Lh{constructor(e){super(e,kRt)}getSelectInput(e,n){const r=super.getSelectInput(e);return r.classList.add("form-control"),r.classList.add("form-select"),this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg"),r}getContainer(){const e=document.createElement("div");return this.options.object_indent||e.classList.add("je-noindent"),e}getOptInSwitch(e){const n=this.getHiddenLabel(e+" opt-in");n.setAttribute("for",e+"-opt-in");const r=document.createElement("div");r.classList.add("form-check","form-switch","d-inline-block","fs-6");const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("role","switch"),i.setAttribute("id",e+"-opt-in"),i.classList.add("form-check-input","json-editor-opt-in");const s=document.createElement("label");s.setAttribute("for",e+"-opt-in"),s.classList.add("form-check-label");const o=document.createElement("span");return o.classList.add("visually-hidden"),o.textContent=e+"-opt-in",s.appendChild(o),r.appendChild(i),r.appendChild(s),{label:n,checkbox:i,container:r}}setGridColumnSize(e,n,r){e.classList.add(`col-md-${n}`),r&&e.classList.add(`offset-md-${r}`)}afterInputReady(e){if(e.controlgroup)return;const n=e.name;e.id=n;const r=e.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.classList.add("form-label"),r.htmlFor=n),e.controlgroup=this.closest(e,".form-group")}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg"),e}getRangeInput(e,n,r,i,s){const o=super.getRangeInput(e,n,r,i,s);return o.classList.remove("form-control"),o.classList.add("form-range"),o}getStepperButtons(e){const n=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button");const i=document.createElement("button");i.setAttribute("type","button"),n.appendChild(r),n.appendChild(e),n.appendChild(i),n.classList.add("input-group"),r.classList.add("btn"),r.classList.add("btn-secondary"),r.classList.add("stepper-down"),i.classList.add("btn"),i.classList.add("btn-secondary"),i.classList.add("stepper-up"),e.getAttribute("readonly")&&(r.setAttribute("disabled",!0),i.setAttribute("disabled",!0)),r.textContent="-",i.textContent="+";const o=(u,d)=>{d?u.value=Number(d):u.value=Number(u.value),u.setAttribute("initialized","1")},a=e.getAttribute("min"),l=e.getAttribute("max");return e.addEventListener("change",()=>{e.getAttribute("initialized")||e.setAttribute("initialized","1")}),r.addEventListener("click",()=>{e.getAttribute("initialized")?a?Number(e.value)>Number(a)&&e.stepDown():e.stepDown():o(e,a),Rc(e,"change")}),i.addEventListener("click",()=>{e.getAttribute("initialized")?l?Number(e.value)<Number(l)&&e.stepUp():e.stepUp():o(e,a),Rc(e,"change")}),n}getFormInputField(e){const n=super.getFormInputField(e);return e!=="checkbox"&&e!=="radio"&&(n.classList.add("form-control"),this.options.input_size==="small"&&n.classList.add("form-control-sm"),this.options.input_size==="large"&&n.classList.add("form-control-lg")),n}getFormControl(e,n,r,i,s){const o=document.createElement("div");if(o.classList.add("form-group"),e&&(n.type==="checkbox"||n.type==="radio")){const a=document.createElement("div");a.classList.add("form-check"),n.classList.add("form-check-input"),e.classList.add("form-check-label"),n.tagName.toLowerCase()!=="div"&&n&&e&&s&&(e.setAttribute("for",s),n.setAttribute("id",s)),n.tagName.toLowerCase()!=="div"&&n&&r&&(r.setAttribute("id",s+"-description"),n.setAttribute("aria-describedby",s+"-description")),a.appendChild(n),a.appendChild(e),i&&a.appendChild(i),o.appendChild(a)}else e&&(e.classList.add("form-label"),o.appendChild(e),i&&o.appendChild(i)),o.appendChild(n);return r&&o.appendChild(r),o}getHiddenLabel(e){const n=document.createElement("label");return n.textContent=e,n.classList.add("visually-hidden"),n}visuallyHidden(e){e&&e.classList.add("visually-hidden")}getHiddenText(e){const n=document.createElement("span");return n.textContent=e,n.classList.add("sr-only"),n}getInfoButton(e){const n=document.createElement("button");n.type="button",n.classList.add("ms-3","jsoneditor-twbs5-text-button"),n.setAttribute("data-toggle","tooltip"),n.setAttribute("data-placement","auto"),n.title=e;const r=document.createTextNode("");return n.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(n).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&n.classList.add("je-tooltip"),n}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(e,n,r,i){const s=document.createElement("div");s.classList.add("form-group"),n&&(s.appendChild(n),i&&n.appendChild(i));const o=document.createElement("div");return Object.values(e).forEach(a=>{const l=a.firstChild;o.appendChild(l)}),s.appendChild(o),r&&s.appendChild(r),s}getFormRadio(e){const n=this.getFormInputField("radio");for(const r in e)n.setAttribute(r,e[r]);return n.classList.add("form-check-input"),n}getFormRadioLabel(e,n){const r=document.createElement("label");return r.classList.add("form-check-label"),r.appendChild(document.createTextNode(e)),r}getFormRadioControl(e,n,r){const i=document.createElement("div");return i.classList.add("form-check"),i.appendChild(n),i.appendChild(e),r&&i.classList.add("form-check-inline"),i}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("card","card-body","my-3"),this.options.object_background&&e.classList.add(this.options.object_background),this.options.object_text&&e.classList.add(this.options.object_text),e}getFormInputDescription(e){const n=document.createElement("small");return n.classList.add("form-text"),n.classList.add("d-block"),window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getHeader(e,n){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+n),typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=document.createElement("span");return e.classList.add("btn-group"),e}getFormButtonHolder(e){const n=this.getButtonHolder();return n.classList.add("d-block"),e==="center"?n.classList.add("text-center"):e==="right"&&n.classList.add("text-end"),n}getButton(e,n,r){const i=super.getButton(e,n,r);return i.classList.add("btn","btn-secondary","btn-sm"),i}getTableContainer(){const e=super.getTableContainer();return e.classList.add("table-responsive"),e}getTable(){const e=document.createElement("table");return e.classList.add("table","table-sm"),this.options.table_border&&e.classList.add("table-bordered"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getErrorMessage(e){const n=document.createElement("div");return n.classList.add("alert","alert-danger"),n.setAttribute("role","alert"),n.appendChild(document.createTextNode(e)),n}addInputError(e,n){e.controlgroup&&(e.controlgroup.classList.add("is-invalid"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("invalid-feedback"),e.controlgroup.appendChild(e.errmsg),e.errmsg.style.display="block"),e.errmsg.style.display="block",e.errmsg.textContent=n,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("is-invalid"))}getTabHolder(e){const n=document.createElement("div"),r=typeof e>"u"?"":e;return n.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,n.classList.add("row"),n}addTab(e,n){e.children[0].children[0].appendChild(n)}getTabContentHolder(e){return e.children[1].children[0]}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${n}'></ul></div><div class='card-body'><div class='tab-content' id='${n}'></div></div>`,r}getTab(e,n){const r=document.createElement("li");r.classList.add("nav-item");const i=document.createElement("a");return i.classList.add("nav-link"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTopTab(e,n){const r=document.createElement("li");r.classList.add("nav-item");const i=document.createElement("a");return i.classList.add("nav-link"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.classList.add("tab-pane"),e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.classList.add("active"):e.container.classList.add("active")}markTabInactive(e){e.tab.firstChild.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.classList.remove("active"):e.container.classList.remove("active")}insertBasicTopTab(e,n){n.children[0].children[0].insertBefore(e,n.children[0].children[0].firstChild)}addTopTab(e,n){e.children[0].children[0].appendChild(n)}getTopTabContentHolder(e){return e.children[1].children[0]}getFirstTab(e){return e.firstChild.firstChild.firstChild}getProgressBar(){const i=document.createElement("div");i.classList.add("progress");const s=document.createElement("div");return s.classList.add("progress-bar"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",i.appendChild(s),i}updateProgressBar(e,n){if(!e)return;const r=e.firstChild,i=`${n}%`;r.setAttribute("aria-valuenow",n),r.style.width=i,r.innerHTML=i}updateProgressBarUnknown(e){if(!e)return;const n=e.firstChild;e.classList.add("progress","progress-striped","active"),n.removeAttribute("aria-valuenow"),n.style.width="100%",n.innerHTML=""}getBlockLink(){const e=document.createElement("a");return e.classList.add("mb-3","d-inline-block"),e}getLinksHolder(){return document.createElement("div")}getInputGroup(e,n){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let i=0;i<n.length;i++)n[i].classList.remove("me-2","btn-secondary"),n[i].classList.add("btn-outline-secondary"),r.appendChild(n[i]);return r}}nPe.rules=ARt;class rPe extends Lh{getTable(){const e=super.getTable();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e}getTableHeaderCell(e){const n=super.getTableHeaderCell(e);return n.classList.add("ui-state-active"),n.style.fontWeight="bold",n}getTableCell(){const e=super.getTableCell();return e.classList.add("ui-widget-content"),e}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e}getFormInputDescription(e){const n=this.getDescription(e);return n.style.marginLeft="10px",n.style.display="inline-block",n}getFormControl(e,n,r,i){const s=super.getFormControl(e,n,r,i);return n.type==="checkbox"?(s.style.lineHeight="25px",s.style.padding="3px 0"):s.style.padding="4px 0 8px 0",s}getDescription(e){const n=document.createElement("span");return n.style.fontSize=".8em",n.style.fontStyle="italic",window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getButtonHolder(){const e=document.createElement("div");return e.classList.add("ui-buttonset"),e.style.fontSize=".7em",e}getFormInputLabel(e,n){const r=document.createElement("label");return r.style.fontWeight="bold",r.style.display="block",r.textContent=e,n&&r.classList.add("required"),r}getButton(e,n,r){const i=document.createElement("button");i.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),n&&!e?(i.classList.add("ui-button-icon-only"),n.classList.add("ui-button-icon-primary","ui-icon-primary"),i.appendChild(n)):n?(i.classList.add("ui-button-text-icon-primary"),n.classList.add("ui-button-icon-primary","ui-icon-primary"),i.appendChild(n)):i.classList.add("ui-button-text-only");const s=document.createElement("span");return s.classList.add("ui-button-text"),s.textContent=e||r||".",i.appendChild(s),i.setAttribute("title",r),i}setButtonText(e,n,r,i){e.innerHTML="",e.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),r&&!n?(e.classList.add("ui-button-icon-only"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):r?(e.classList.add("ui-button-text-icon-primary"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),e.appendChild(r)):e.classList.add("ui-button-text-only");const s=document.createElement("span");s.classList.add("ui-button-text"),s.textContent=n||i||".",e.appendChild(s),e.setAttribute("title",i)}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("ui-widget-content","ui-corner-all"),e.style.padding="1em 1.4em",e.style.marginBottom="20px",e}afterInputReady(e){if(!e.controls&&(e.controls=this.closest(e,".form-control"),this.queuedInputErrorText)){const n=this.queuedInputErrorText;delete this.queuedInputErrorText,this.addInputError(e,n)}}addInputError(e,n){if(!e.controls){this.queuedInputErrorText=n;return}e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.classList.add("ui-state-error"),e.controls.appendChild(e.errmsg)),e.errmsg.textContent=n}removeInputError(e){e.controls||delete this.queuedInputErrorText,e.errmsg&&(e.errmsg.style.display="none")}markTabActive(e){e.tab.classList.remove("ui-widget-header"),e.tab.classList.add("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.add("ui-widget-header"),e.tab.classList.remove("ui-state-active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}}rPe.rules={'div[data-schemaid="root"]:after':'position:relative;color:red;margin:10px 0;font-weight:600;display:block;width:100%;text-align:center;content:"This is an old JSON-Editor 1.x Theme and might not display elements correctly when used with the 2.x version"'};const TRt={".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class iPe extends Lh{addInputError(e,n){if(e.errmsg)e.errmsg.style.display="block";else{const r=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),r.nodeName&&r.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(n)),e.errmsg.setAttribute("role","alert")}removeInputError(e){e.style&&(e.style.borderColor=""),e.errmsg&&(e.errmsg.style.display="none")}}iPe.rules=TRt;const DRt={"*":"--primary-color:%235755d9;--gray-color:%23bcc3ce;--light-color:%23fff",".slider:focus":"box-shadow:none","h4 > label + .btn-group":"margin-left:1rem",".text-right > button":"margin-right:0%20!important",".text-left > button":"margin-left:0%20!important",".property-selector":"font-size:0.7rem;font-weight:normal;max-height:260px%20!important;width:395px%20!important",".property-selector .form-checkbox":"margin:0",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"border-collapse:collapse",".table td":"padding:0.4rem%200.4rem",".mr-5":"margin-right:1rem%20!important","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23eee",".je-table-border td":"border:0.05rem%20solid%20%23dadee4%20!important",".btn-info":"font-size:0.5rem;font-weight:bold;height:0.8rem;padding:0.15rem%200;line-height:0.8;margin:0.3rem%200%200.3rem%200.1rem",".je-label + select":"min-width:5rem",".je-label":"font-weight:600",".btn-action.btn-info":"width:0.8rem",".je-border":"border:0.05rem%20solid%20%23dadee4",".je-panel":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit",".je-align-bottom":"margin-top:auto",".je-desc":"font-size:smaller;margin:0.2rem%200",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem;border:3px%20solid%20white;box-shadow:0px%200px%208px%20rgba(0%2C%200%2C%200%2C%200.3);box-sizing:border-box",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".columns .container.je-noindent":"padding-left:0;padding-right:0",".selectize-control.multi .item":"background:var(--primary-color)%20!important",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"display:none",".select2-container--default .select2-selection--single":"border:none",".select2-container .select2-selection--single .select2-selection__rendered":"padding:0",".select2-container .select2-search--inline .select2-search__field":"margin-top:0",".select2-container--default.select2-container--focus   .select2-selection--multiple":"border:0.05rem%20solid%20var(--gray-color)",".select2-container--default   .select2-selection--multiple   .select2-selection__choice":"margin:0.4rem%200.2rem%200.2rem%200;padding:2px%205px;background-color:var(--primary-color);color:var(--light-color)",".select2-container--default .select2-search--inline .select2-search__field":"line-height:normal",".choices":"margin-bottom:auto",".choices__list--multiple .choices__item":"border:none;background-color:var(--primary-color);color:var(--light-color)",".choices[data-type*='select-multiple'] .choices__button":"border-left:0.05rem%20solid%20%232826a6",".choices__inner":"font-size:inherit;min-height:20px;padding:4px%207.5px%204px%203.75px",".choices[data-type*='select-one'] .choices__inner":"padding-bottom:4px",".choices__list--dropdown .choices__item":"font-size:inherit"},LRt={disable_theme_rules:!1,label_bold:!0,align_bottom:!1,object_indent:!1,object_border:!1,table_border:!1,table_zebrastyle:!1,input_size:"normal"};class sPe extends Lh{constructor(e){super(e,LRt)}getOptInSwitch(e){const n=document.createElement("span");n.classList.add("form-group");const r=document.createElement("label");r.classList.add("form-switch","d-inline-block");const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("id",e+"-opt-in"),i.classList.add("json-editor-opt-in");const s=document.createElement("i");s.classList.add("form-icon");const o=document.createElement("span");return o.classList.add("sr-only"),o.textContent=e+"-opt-in",r.appendChild(o),r.appendChild(i),r.appendChild(s),n.appendChild(r),{label:r,checkbox:i,container:n}}setGridColumnSize(e,n,r){e.classList.add(`col-${n}`),r&&e.classList.add("col-mx-auto")}getGridContainer(){const e=document.createElement("div");return e.classList.add("container"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("columns"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("column"),this.options.align_bottom&&e.classList.add("je-align-bottom"),e}getIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return e.classList.add("je-panel-top"),this.options.object_border&&e.classList.add("je-border"),e}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const e=super.getButtonHolder();return e.classList.add("btn-group"),e}getFormButtonHolder(e){const n=super.getFormButtonHolder();return n.classList.remove("btn-group"),n.classList.add("d-block"),e==="center"?n.classList.add("text-center"):e==="right"?n.classList.add("text-right"):n.classList.add("text-left"),n}getFormButton(e,n,r){const i=super.getFormButton(e,n,r);return i.classList.add("btn","btn-primary","mx-2","my-1"),this.options.input_size!=="small"&&i.classList.remove("btn-sm"),this.options.input_size==="large"&&i.classList.add("btn-lg"),i}getButton(e,n,r){const i=super.getButton(e,n,r);return i.classList.add("btn","btn-sm","btn-primary","mr-2","my-1"),i}getHeader(e,n){const r=document.createElement("span");return typeof e=="string"?r.textContent=e:r.appendChild(e),r.style.display="inline-block",r}getFormInputDescription(e){const n=super.getFormInputDescription(e);return n.classList.add("je-desc","hide-sm"),n}getFormInputLabel(e,n){const r=super.getFormInputLabel(e,n);return this.options.label_bold&&r.classList.add("je-label"),r}getCheckbox(){return this.getFormInputField("checkbox")}getCheckboxLabel(e,n){const r=super.getCheckboxLabel(e,n),i=document.createElement("i");return i.classList.add("form-icon"),r.classList.add("form-checkbox","pr-0"),r.insertBefore(i,r.firstChild),r}getFormCheckboxControl(e,n,r){return e.insertBefore(n,e.firstChild),r&&e.classList.add("form-inline"),e}getMultiCheckboxHolder(e,n,r,i){return super.getMultiCheckboxHolder(e,n,r,i)}getFormRadio(e){const n=this.getFormInputField("radio");for(const r in e)n.setAttribute(r,e[r]);return n}getFormRadioLabel(e,n){const r=super.getFormRadioLabel(e,n),i=document.createElement("i");return i.classList.add("form-icon"),r.classList.add("form-radio"),r.insertBefore(i,r.firstChild),r}getFormRadioControl(e,n,r){return e.insertBefore(n,e.firstChild),r&&e.classList.add("form-inline"),e}getFormInputField(e){const n=super.getFormInputField(e);return["checkbox","radio"].includes(e)||n.classList.add("form-input"),n}getRangeInput(e,n,r,i,s){const o=super.getRangeInput(e,n,r,i,s);return o.classList.add("slider"),o.classList.remove("form-input"),o.setAttribute("oninput",'this.setAttribute("value", this.value)'),o}getRangeControl(e,n){const r=super.getRangeControl(e,n);return r.classList.add("text-center"),r}getSelectInput(e,n){const r=super.getSelectInput(e);return r.classList.add("form-select"),r}getTextareaInput(){const e=document.createElement("textarea");return e.classList.add("form-input"),e}getFormControl(e,n,r,i,s){const o=document.createElement("div");return o.classList.add("form-group"),e&&(n.type==="checkbox"||n.type==="radio")?(o.classList.add(n.type),i&&e.appendChild(i),e.insertBefore(n,e.firstChild),o.appendChild(e)):(e&&(e.classList.add("form-label"),o.appendChild(e),i&&e.appendChild(i)),o.appendChild(n)),this.options.input_size==="small"?n.classList.add("input-sm","select-sm"):this.options.input_size==="large"&&n.classList.add("input-lg","select-lg"),n.type!=="checkbox"&&o.appendChild(n),r&&o.appendChild(r),n.tagName.toLowerCase()!=="div"&&n&&e&&s&&(e.setAttribute("for",s),n.setAttribute("id",s)),n.tagName.toLowerCase()!=="div"&&n&&r&&(r.setAttribute("id",s+"-description"),n.setAttribute("aria-describedby",s+"-description")),o}getInputGroup(e,n){if(!e)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(e);for(let i=0;i<n.length;i++)n[i].classList.add("input-group-btn"),n[i].classList.remove("btn-sm","mr-2","my-1"),r.appendChild(n[i]);return r}getInfoButton(e){const n=document.createElement("div");n.classList.add("popover","popover-left","float-right");const r=document.createElement("button");r.classList.add("btn","btn-secondary","btn-info","btn-action","s-circle"),r.setAttribute("tabindex","-1"),n.appendChild(r);const i=document.createTextNode("I");r.appendChild(i);const s=document.createElement("div");s.classList.add("popover-container"),n.appendChild(s);const o=document.createElement("div");o.classList.add("card"),s.appendChild(o);const a=document.createElement("div");return a.classList.add("card-body"),a.innerHTML=e,o.appendChild(a),n}getTable(){const e=super.getTable();return e.classList.add("table","table-scroll"),this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("table-striped"),e}getProgressBar(){const e=super.getProgressBar();return e.classList.add("progress"),e}getTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.classList.add("columns"),r.innerHTML=`<div class="column col-2"></div><div class="column col-10 content" id="${n}"></div>`,r}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class="tab"></ul><div class="content" id="${n}"></div>`,r}getTab(e,n){const r=document.createElement("a");return r.classList.add("btn","btn-secondary","btn-block"),r.setAttribute("href",`#${n}`),r.appendChild(e),r}getTopTab(e,n){const r=document.createElement("li");r.id=n,r.classList.add("tab-item");const i=document.createElement("a");return i.setAttribute("href",`#${n}`),i.appendChild(e),r.appendChild(i),r}markTabActive(e){e.tab.classList.add("active"),typeof e.rowPane<"u"?e.rowPane.style.display="":e.container.style.display=""}markTabInactive(e){e.tab.classList.remove("active"),typeof e.rowPane<"u"?e.rowPane.style.display="none":e.container.style.display="none"}afterInputReady(e){if(e.localName==="select"){if(e.classList.contains("selectized")){const n=e.nextSibling;n&&(n.classList.remove("form-select"),Array.from(n.querySelectorAll(".form-select")).forEach(r=>{r.classList.remove("form-select")}))}else if(e.classList.contains("select2-hidden-accessible")){const n=e.nextSibling;n&&n.querySelector(".select2-selection--single")&&n.classList.add("form-select")}}e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}addInputError(e,n){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.errmsg||(e.errmsg=document.createElement("p"),e.errmsg.classList.add("form-input-hint"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.classList.remove("d-hide"),e.errmsg.textContent=n,e.errmsg.setAttribute("role","alert"))}removeInputError(e){e.errmsg&&(e.errmsg.classList.add("d-hide"),e.controlgroup.classList.remove("has-error"))}}sPe.rules=DRt;const RRt={".slider":"-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;display:block;border:none;height:1.2rem;width:100%25",".slider:focus":"box-shadow:0%200%200%200%20rgba(87%2C%2085%2C%20217%2C%200.2);outline:none",".slider.tooltip:not([data-tooltip])::after":"content:attr(value)",".slider::-webkit-slider-thumb":"-webkit-appearance:none;background:%23f17405;border-radius:100%25;height:0.6rem;margin-top:-0.25rem;transition:transform%200.2s;width:0.6rem",".slider:active::-webkit-slider-thumb":"transform:scale(1.25);outline:none",".slider::-webkit-slider-runnable-track":"background:%23b2b4b6;border-radius:0.1rem;height:0.1rem;width:100%25","a.tooltips":"position:relative;display:inline","a.tooltips span":"position:absolute;white-space:nowrap;width:auto;padding-left:1rem;padding-right:1rem;color:%23ffffff;background:rgba(56%2C%2056%2C%2056%2C%200.85);height:1.5rem;line-height:1.5rem;text-align:center;visibility:hidden;border-radius:3px","a.tooltips span:after":"content:%22%22;position:absolute;top:50%25;left:100%25;margin-top:-5px;width:0;height:0;border-left:5px%20solid%20rgba(56%2C%2056%2C%2056%2C%200.85);border-top:5px%20solid%20transparent;border-bottom:5px%20solid%20transparent","a:hover.tooltips span":"visibility:visible;opacity:0.9;font-size:0.8rem;right:100%25;top:50%25;margin-top:-12px;margin-right:10px;z-index:999",".json-editor-btntype-properties + div":"font-size:0.8rem;font-weight:normal",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"width:100%25;border-collapse:collapse",".table td":"padding:0rem%200rem","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23e6f4fe","div[data-schemaid='root']":"position:relative;width:inherit;display:inherit;overflow-x:hidden;z-index:10","select[multiple]":"height:auto","select[multiple].from-select":"height:auto",".je-table-zebra:nth-child(even)":"background-color:%23f2f2f2",".je-table-border":"border:0.5px%20solid%20black",".je-table-hdiv":"border-bottom:1px%20solid%20black",".je-border":"border:0.05rem%20solid%20%233182ce",".je-panel":"width:inherit;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"width:100%25;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit;font-weight:bold",".je-desc":"font-size:smaller;margin:0.2rem%200",".container-xl.je-noindent":"padding-left:0;padding-right:0",".json-editor-btntype-add":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%234299e1;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deletelast":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23e53e3e;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deleteall":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23000000;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-save":"float:right;color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-back":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-delete":"color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btntype-move":"color:%23000000;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btn-collapse":"padding:0em%200.8rem;font-size:1.3rem;color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".switch":"position:relative;display:inline-block;width:28px;height:16px;margin-right:10px",".switch input":"opacity:0;width:0;height:0",".switch-slider":"position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:%23ccc;transition:.1s;border-radius:34px",".switch-slider:before":"position:absolute;content:%22%22;height:12px;width:12px;left:1px;top:2px;background-color:white;transition:.1s;border-radius:50%25","input:checked + .switch-slider":"background-color:%232196F3","input:focus + .switch-slider":"box-shadow:0%200%201px%20%232196F3","input:checked + .switch-slider:before":"transform:translateX(12px)","input:disabled + .switch-slider":"opacity:0.5"},FRt={disable_theme_rules:!1,label_bold:!1,object_panel_default:!0,object_indent:!0,object_border:!1,table_border:!1,table_hdiv:!1,table_zebrastyle:!1,input_size:"small",enable_compact:!1};class oPe extends Lh{constructor(e){super(e,FRt)}getOptInSwitch(e){const n=this.getHiddenLabel(e+" opt-in");n.setAttribute("for",e+"-opt-in");const r=document.createElement("label");r.classList.add("switch");const i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("id",e+"-opt-in"),i.classList.add("json-editor-opt-in");const s=document.createElement("span");s.classList.add("switch-slider","round");const o=document.createElement("span");return o.classList.add("sr-only"),o.textContent=e+"-opt-in",r.appendChild(o),r.appendChild(i),r.appendChild(s),{label:n,checkbox:i,container:r}}getGridContainer(){const e=document.createElement("div");return e.classList.add("flex","flex-col","w-full"),this.options.object_indent||e.classList.add("je-noindent"),e}getGridRow(){const e=document.createElement("div");return e.classList.add("flex","flex-wrap","w-full"),e}getGridColumn(){const e=document.createElement("div");return e.classList.add("flex","flex-col"),e}setGridColumnSize(e,n,r){n>0&&n<12?e.classList.add(`w-${n}/12`,"px-1"):e.classList.add("w-full","px-1"),r&&(e.style.marginLeft=`${100/12*r}%`)}getIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","p-1"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTopIndentedPanel(){const e=document.createElement("div");return this.options.object_panel_default?e.classList.add("w-full","m-2"):e.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&e.classList.add("je-border"),e}getTitle(){return this.translateProperty(this.schema.title)}getSelectInput(e,n){const r=super.getSelectInput(e);return n?r.classList.add("form-multiselect","block","py-0","h-auto","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"):r.classList.add("form-select","block","py-0","h-6","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&r.classList.add("compact"),r}afterInputReady(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))}getTextareaInput(){const e=super.getTextareaInput();return e.classList.add("block","w-full","px-1","text-sm","leading-normal","bg-white","text-black","border","border-grey","rounded"),this.options.enable_compact&&e.classList.add("compact"),e.style.height=0,e}getRangeInput(e,n,r){const i=this.getFormInputField("range");return i.classList.add("slider"),this.options.enable_compact&&i.classList.add("compact"),i.setAttribute("oninput",'this.setAttribute("value", this.value)'),i.setAttribute("min",e),i.setAttribute("max",n),i.setAttribute("step",r),i}getRangeControl(e,n){const r=super.getRangeControl(e,n);return r.classList.add("text-center","text-black"),r}getCheckbox(){const e=this.getFormInputField("checkbox");return e.classList.add("form-checkbox","text-red-600"),e}getCheckboxLabel(e,n){const r=super.getCheckboxLabel(e,n);return r.classList.add("inline-flex","items-center"),r}getFormCheckboxControl(e,n,r){return e.insertBefore(n,e.firstChild),r&&e.classList.add("inline-flex flex-row"),e}getMultiCheckboxHolder(e,n,r,i){const s=super.getMultiCheckboxHolder(e,n,r,i);return s.classList.add("inline-flex","flex-col"),s}getFormRadio(e){const n=this.getFormInputField("radio");n.classList.add("form-radio","text-red-600");for(const r in e)n.setAttribute(r,e[r]);return n}getFormRadioLabel(e,n){const r=super.getFormRadioLabel(e,n);return r.classList.add("inline-flex","items-center","mr-2"),r}getFormRadioControl(e,n,r){return e.insertBefore(n,e.firstChild),r&&e.classList.add("form-radio"),e}getRadioHolder(e,n,r,i,s){const o=super.getRadioHolder(n,r,i,s);return e.options.layout==="h"?o.classList.add("inline-flex","flex-row"):o.classList.add("inline-flex","flex-col"),o}getFormInputLabel(e,n){const r=super.getFormInputLabel(e,n);return this.options.label_bold?r.classList.add("font-bold"):r.classList.add("required"),r}getFormInputField(e){const n=super.getFormInputField(e);return["checkbox","radio"].includes(e)||n.classList.add("block","w-full","px-1","text-black","text-sm","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&n.classList.add("compact"),n}getFormInputDescription(e){const n=document.createElement("p");return n.classList.add("block","mt-1","text-xs"),window.DOMPurify?n.innerHTML=window.DOMPurify.sanitize(e):n.textContent=this.cleanText(e),n}getFormControl(e,n,r,i){const s=document.createElement("div");return s.classList.add("form-group","mb-1","w-full"),e&&(e.classList.add("text-xs"),n.type==="checkbox"&&(n.classList.add("form-checkbox","text-xs","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormCheckboxControl(e,n,!1,i)),n.type==="radio"&&(n.classList.add("form-radio","text-red-600","mr-1"),e.classList.add("items-center","flex"),e=this.getFormRadioControl(e,n,!1,i)),s.appendChild(e),!["checkbox","radio"].includes(n.type)&&i&&s.appendChild(i)),["checkbox","radio"].includes(n.type)||(this.options.input_size==="small"?n.classList.add("text-xs"):this.options.input_size==="normal"?n.classList.add("text-base"):this.options.input_size==="large"&&n.classList.add("text-xl"),s.appendChild(n)),r&&s.appendChild(r),s}getHeaderButtonHolder(){const e=this.getButtonHolder();return e.classList.add("text-sm"),e}getButtonHolder(){const e=document.createElement("div");return e.classList.add("flex","relative","inline-flex","align-middle"),e}getButton(e,n,r){const i=super.getButton(e,n,r);return i.classList.add("inline-block","align-middle","text-center","text-sm","bg-blue-700","text-white","py-1","pr-1","m-2","shadow","select-none","whitespace-no-wrap","rounded"),i}getInfoButton(e){const n=document.createElement("a");n.classList.add("tooltips","float-right"),n.innerHTML="";const r=document.createElement("span");return r.innerHTML=e,n.appendChild(r),n}getTable(){const e=super.getTable();return this.options.table_border?e.classList.add("je-table-border"):e.classList.add("table","border","p-0"),e}getTableRow(){const e=super.getTableRow();return this.options.table_border&&e.classList.add("je-table-border"),this.options.table_zebrastyle&&e.classList.add("je-table-zebra"),e}getTableHeaderCell(e){const n=super.getTableHeaderCell(e);return this.options.table_border?n.classList.add("je-table-border"):this.options.table_hdiv?n.classList.add("je-table-hdiv"):n.classList.add("text-xs","border","p-0","m-0"),n}getTableCell(){const e=super.getTableCell();return this.options.table_border?e.classList.add("je-table-border"):this.options.table_hdiv?e.classList.add("je-table-hdiv"):e.classList.add("border-0","p-0","m-0"),e}addInputError(e,n){e.controlgroup&&(e.controlgroup.classList.add("has-error"),e.controlgroup.classList.add("text-red-600"),e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.classList.add("block","mt-1","text-xs","text-red"),e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=n)}removeInputError(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.classList.remove("text-red-600"),e.controlgroup.classList.remove("has-error"))}getTabHolder(e){const n=document.createElement("div"),r=typeof e>"u"?"":e;return n.innerHTML=`<div class='w-2/12' id='${r}'><ul class='list-reset pl-0 mb-0'></ul></div><div class='w-10/12' id='${r}'></div>`,n.classList.add("flex"),n}addTab(e,n){e.children[0].children[0].appendChild(n)}getTopTabHolder(e){const n=typeof e>"u"?"":e,r=document.createElement("div");return r.innerHTML=`<ul class='nav-tabs flex list-reset pl-0 mb-0 border-b border-grey-light' id='${n}'></ul><div class='p-6 block' id='${n}'></div>`,r}getTab(e,n){const r=document.createElement("li");r.classList.add("nav-item","flex-col","text-center","text-white","bg-blue-500","shadow-md","border","p-2","mb-2","mr-2","hover:bg-blue-400","rounded");const i=document.createElement("a");return i.classList.add("nav-link","text-center"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTopTab(e,n){const r=document.createElement("li");r.classList.add("nav-item","flex","border-l","border-t","border-r");const i=document.createElement("a");return i.classList.add("nav-link","-mb-px","flex-row","text-center","bg-white","p-2","hover:bg-blue-400","rounded-t"),i.setAttribute("href",`#${n}`),i.setAttribute("data-toggle","tab"),i.appendChild(e),r.appendChild(i),r}getTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}getTopTabContent(){const e=document.createElement("div");return e.setAttribute("role","tabpanel"),e}markTabActive(e){e.tab.firstChild.classList.add("block"),e.tab.firstChild.classList.contains("border-b")===!0?(e.tab.firstChild.classList.add("border-b-0"),e.tab.firstChild.classList.remove("border-b")):e.tab.firstChild.classList.add("border-b-0"),e.container.classList.contains("hidden")===!0&&e.container.classList.remove("hidden"),e.container.classList.add("block")}markTabInactive(e){e.tab.firstChild.classList.contains("border-b-0")===!0?(e.tab.firstChild.classList.add("border-b"),e.tab.firstChild.classList.remove("border-b-0")):e.tab.firstChild.classList.add("border-b"),e.container.classList.contains("block")===!0&&(e.container.classList.remove("block"),e.container.classList.add("hidden"))}getProgressBar(){const i=document.createElement("div");i.classList.add("progress");const s=document.createElement("div");return s.classList.add("bg-blue","leading-none","py-1","text-xs","text-center","text-white"),s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",0),s.setAttribute("aria-valuemin",0),s.setAttribute("aria-valuenax",100),s.innerHTML="0%",i.appendChild(s),i}updateProgressBar(e,n){if(!e)return;const r=e.firstChild,i=`${n}%`;r.setAttribute("aria-valuenow",n),r.style.width=i,r.innerHTML=i}updateProgressBarUnknown(e){if(!e)return;const n=e.firstChild;e.classList.add("progress","bg-blue","leading-none","py-1","text-xs","text-center","text-white","block"),n.removeAttribute("aria-valuenow"),n.classList.add("w-full"),n.innerHTML=""}getInputGroup(e,n){if(!e)return;const r=document.createElement("div");r.classList.add("relative","items-stretch","w-full"),r.appendChild(e);const i=document.createElement("div");i.classList.add("-mr-1"),r.appendChild(i);for(let s=0;s<n.length;s++)i.appendChild(n[s]);return r}}oPe.rules=RRt;const ORt={html:Q$e,bootstrap3:ePe,bootstrap4:tPe,bootstrap5:nPe,jqueryui:rPe,barebones:iPe,spectre:sPe,tailwind:oPe},MRt={".table-responsive .autocomplete-result-list":"position:relative%20!important",".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding-left:10px;margin-left:10px;border-left:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};class gi{constructor(e,n={}){if(!(e instanceof Element))throw new Error("element should be an instance of Element");this.element=e,this.options=$n({},gi.defaults.options,n),this.ready=!1,this.copyClipboard=null,this.schema=this.options.schema,this.template=this.options.template,this.translate=this.options.translate||gi.defaults.translate,this.translateProperty=this.options.translateProperty||gi.defaults.translateProperty,this.uuid=0,this.__data={};const r=this.options.theme||gi.defaults.theme,i=gi.defaults.themes[r];if(!i)throw new Error(`Unknown theme ${r}`);this.element.setAttribute("data-theme",r),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new i(this);const s=$n(MRt,this.getEditorsRules()),o=(l,u,d)=>d?this.addNewStyleRulesToShadowRoot(l,u,d):this.addNewStyleRules(l,u);if(!this.theme.options.disable_theme_rules){const l=U$e(this.element);o("default",s,l),typeof i.rules<"u"&&o(r,i.rules,l)}const a=gi.defaults.iconlibs[this.options.iconlib||gi.defaults.iconlib];a&&(this.iconlib=new a),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.promise=this.load()}async load(){const e=document.location.origin+document.location.pathname.toString(),n=new BLt(this.options);n.onSchemaLoaded=a=>{this.trigger("schemaLoaded",a)},n.onAllSchemasLoaded=()=>{this.trigger("allSchemasLoaded")},this.expandSchema=a=>n.expandSchema(a),this.expandRefs=(a,l)=>n.expandRefs(a,l);const r=document.location.toString(),i=await n.load(this.schema,e,r),s=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{};this.validator=new Y$e(this,null,s,gi.defaults);const o=this.getEditorClass(i);this.root=this.createEditor(o,{jsoneditor:this,schema:i,required:!0,container:this.root_container}),this.root.preBuild(),this.root.build(),this.root.postBuild(),cu(this.options,"startval")&&this.root.setValue(this.options.startval),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame(()=>{this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.trigger("ready"),this.trigger("change"))})}getValue(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}setValue(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(e),this}validate(e){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return arguments.length===1?this.validator.validate(e):this.validation_results}destroy(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)}on(e,n){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(n),this}off(e,n){if(e&&n){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];const r=[];for(let i=0;i<this.callbacks[e].length;i++)this.callbacks[e][i]!==n&&r.push(this.callbacks[e][i]);this.callbacks[e]=r}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this}trigger(e,n){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(let r=0;r<this.callbacks[e].length;r++)this.callbacks[e][r].apply(this,[n]);return this}setOption(e,n){if(e==="show_errors")this.options.show_errors=n,this.onChange();else throw new Error(`Option ${e} must be set during instantiation and cannot be changed later`);return this}getEditorsRules(){const e=(n,r)=>r.rules?$n(n,r.rules):n;return Object.values(gi.defaults.editors).reduce(e,{})}getEditorClass(e){let n;if(e=this.expandSchema(e),gi.defaults.resolvers.find(r=>(n=r(e,this),n&&gi.defaults.editors[n])),!n)throw new Error(`Unknown editor for schema ${JSON.stringify(e)}`);if(!gi.defaults.editors[n])throw new Error(`Unknown editor ${n}`);return gi.defaults.editors[n]}createEditor(e,n,r=1){return n=$n({},e.options||{},n),new e(n,gi.defaults,r)}onChange(e){if(this.ready&&(e&&this.trigger(e.event,e.data),!this.firing_change))return this.firing_change=!0,window.requestAnimationFrame(()=>{this.firing_change=!1,this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.options.show_errors!=="never"?this.root.showValidationErrors(this.validation_results):this.root.showValidationErrors([]),this.trigger("change"))}),this}compileTemplate(e,n=gi.defaults.template){let r;if(typeof n=="string"){if(!gi.defaults.templates[n])throw new Error(`Unknown template engine ${n}`);if(r=gi.defaults.templates[n](),!r)throw new Error(`Template engine ${n} missing required library.`)}else r=n;if(!r)throw new Error("No template engine set");if(!r.compile)throw new Error("Invalid template engine set");return r.compile(e)}_data(e,n,r){if(arguments.length===3){let i;e.hasAttribute(`data-jsoneditor-${n}`)?i=e.getAttribute(`data-jsoneditor-${n}`):(i=this.uuid++,e.setAttribute(`data-jsoneditor-${n}`,i)),this.__data[i]=r}else return e.hasAttribute(`data-jsoneditor-${n}`)?this.__data[e.getAttribute(`data-jsoneditor-${n}`)]:null}registerEditor(e){return this.editors=this.editors||{},this.editors[e.path]=e,this}unregisterEditor(e){return this.editors=this.editors||{},this.editors[e.path]=null,this}getEditor(e){if(this.editors)return this.editors[e]}watch(e,n){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(n),this}unwatch(e,n){if(!this.watchlist||!this.watchlist[e])return this;if(!n)return this.watchlist[e]=null,this;const r=[];for(let i=0;i<this.watchlist[e].length;i++)this.watchlist[e][i]!==n&&r.push(this.watchlist[e][i]);return this.watchlist[e]=r.length?r:null,this}notifyWatchers(e){if(!this.watchlist||!this.watchlist[e])return this;for(let n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]()}isEnabled(){return!this.root||this.root.isEnabled()}enable(){this.root.enable()}disable(){this.root.disable()}setCopyClipboardContents(e){this.copyClipboard=e}getCopyClipboardContents(){return this.copyClipboard}addNewStyleRules(e,n){let r=document.querySelector(`#theme-${e}`);r||(r=document.createElement("style"),r.setAttribute("id",`theme-${e}`),r.appendChild(document.createTextNode("")),document.head.appendChild(r));const i=r.sheet?r.sheet:r.styleSheet,s=this.element.nodeName.toLowerCase();for(;i.cssRules.length>0;)i.deleteRule(0);Object.keys(n).forEach(o=>{const a=e==="default"?o:`${s}[data-theme="${e}"] ${o}`;i.insertRule?i.insertRule(a+" {"+decodeURIComponent(n[o])+"}",0):i.addRule&&i.addRule(a,decodeURIComponent(n[o]),0)})}addNewStyleRulesToShadowRoot(e,n,r){const i=this.element.nodeName.toLowerCase();let s="";Object.keys(n).forEach(a=>{const l=e==="default"?a:`${i}[data-theme="${e}"] ${a}`;s+=l+" {"+decodeURIComponent(n[a])+`}
`});const o=new CSSStyleSheet;o.replaceSync(s),r.adoptedStyleSheets=[...r.adoptedStyleSheets,o]}showValidationErrors(e){const n=e??this.validate();Object.values(this.editors).forEach(r=>{r&&(r.is_dirty=!0,r.showValidationErrors(n))})}}gi.defaults=Fg;gi.AbstractEditor=ca;gi.AbstractTheme=Lh;gi.AbstractIconLib=Dh;Object.assign(gi.defaults.themes,ORt);Object.assign(gi.defaults.editors,lT);Object.assign(gi.defaults.templates,XLt);Object.assign(gi.defaults.iconlibs,wRt);function sA(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var a5={exports:{}};/**
 * easymde v2.18.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var PEe;function IRt(){return PEe||(PEe=1,function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var c=typeof sA=="function"&&sA;if(!d&&c)return c(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){return o(r[u][1][p]||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof sA=="function"&&sA,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){},{}],2:[function(n,r,i){var s=n("typo-js");function o(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!o.aff_loading){o.aff_loading=!0;var u=new XMLHttpRequest;u.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),u.onload=function(){u.readyState===4&&u.status===200&&(o.aff_data=u.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},u.send(null)}if(!o.dic_loading){o.dic_loading=!0;var d=new XMLHttpRequest;d.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),d.onload=function(){d.readyState===4&&d.status===200&&(o.dic_data=d.responseText,o.num_loaded++,o.num_loaded==2&&(o.typo=new s("en_US",o.aff_data,o.dic_data,{platform:"any"})))},d.send(null)}var c='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',f={token:function(p){var g=p.peek(),b="";if(c.includes(g))return p.next(),null;for(;(g=p.peek())!=null&&!c.includes(g);)b+=g,p.next();return o.typo&&!o.typo.check(b)?"spell-error":null}},h=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(h,f,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}o.num_loaded=0,o.aff_loading=!1,o.dic_loading=!1,o.aff_data="",o.dic_data="",o.typo,r.exports=o},{"typo-js":16}],3:[function(n,r,i){(function(s){function o(a,l){clearTimeout(l.timeout),s.off(window,"mouseup",l.hurry),s.off(window,"keyup",l.hurry)}s.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(o(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(u,d){function c(){u.display.wrapper.offsetHeight?(o(0,d),u.display.lastWrapHeight!=u.display.wrapper.clientHeight&&u.refresh()):d.timeout=setTimeout(c,d.delay)}d.timeout=setTimeout(c,d.delay),d.hurry=function(){clearTimeout(d.timeout),d.timeout=setTimeout(c,50)},s.on(window,"mouseup",d.hurry),s.on(window,"keyup",d.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(n,r,i){(function(s){s.defineOption("fullScreen",!1,function(o,a,l){l==s.Init&&(l=!1),!l!=!a&&(a?function(u){var d=u.getWrapperElement();u.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:d.style.width,height:d.style.height},d.style.width="",d.style.height="auto",d.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",u.refresh()}(o):function(u){var d=u.getWrapperElement();d.className=d.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=u.state.fullScreenRestore;d.style.width=c.width,d.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),u.refresh()}(o))})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(n,r,i){(function(s){function o(c){c.state.placeholder&&(c.state.placeholder.parentNode.removeChild(c.state.placeholder),c.state.placeholder=null)}function a(c){o(c);var f=c.state.placeholder=document.createElement("pre");f.style.cssText="height: 0; overflow: visible",f.style.direction=c.getOption("direction"),f.className="CodeMirror-placeholder CodeMirror-line-like";var h=c.getOption("placeholder");typeof h=="string"&&(h=document.createTextNode(h)),f.appendChild(h),c.display.lineSpace.insertBefore(f,c.display.lineSpace.firstChild)}function l(c){d(c)&&a(c)}function u(c){var f=c.getWrapperElement(),h=d(c);f.className=f.className.replace(" CodeMirror-empty","")+(h?" CodeMirror-empty":""),h?a(c):o(c)}function d(c){return c.lineCount()===1&&c.getLine(0)===""}s.defineOption("placeholder","",function(c,f,h){var p=h&&h!=s.Init;if(f&&!p)c.on("blur",l),c.on("change",u),c.on("swapDoc",u),s.on(c.getInputField(),"compositionupdate",c.state.placeholderCompose=function(){(function(b){setTimeout(function(){var y=!1;if(b.lineCount()==1){var v=b.getInputField();y=v.nodeName=="TEXTAREA"?!b.getLine(0).length:!/[^\u200b]/.test(v.querySelector(".CodeMirror-line").textContent)}y?a(b):o(b)},20)})(c)}),u(c);else if(!f&&p){c.off("blur",l),c.off("change",u),c.off("swapDoc",u),s.off(c.getInputField(),"compositionupdate",c.state.placeholderCompose),o(c);var g=c.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}f&&!c.hasFocus()&&l(c)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(n,r,i){(function(s){var o=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function u(d,c){var f=c.line,h=0,p=0,g=o.exec(d.getLine(f)),b=g[1];do{var y=f+(h+=1),v=d.getLine(y),w=o.exec(v);if(w){var E=w[1],S=parseInt(g[3],10)+h-p,T=parseInt(w[3],10),D=T;if(b!==E||isNaN(T)){if(b.length>E.length||b.length<E.length&&h===1)return;p+=1}else S===T&&(D=T+1),S>T&&(D=S+1),d.replaceRange(v.replace(o,E+D+w[4]+w[5]),{line:y,ch:0},{line:y,ch:v.length})}}while(w)}s.commands.newlineAndIndentContinueMarkdownList=function(d){if(d.getOption("disableInput"))return s.Pass;for(var c=d.listSelections(),f=[],h=0;h<c.length;h++){var p=c[h].head,g=d.getStateAfter(p.line),b=s.innerMode(d.getMode(),g);if(b.mode.name!=="markdown"&&b.mode.helperType!=="markdown")return void d.execCommand("newlineAndIndent");var y=(g=b.state).list!==!1,v=g.quote!==0,w=d.getLine(p.line),E=o.exec(w),S=/^\s*$/.test(w.slice(0,p.ch));if(!c[h].empty()||!y&&!v||!E||S)return void d.execCommand("newlineAndIndent");if(a.test(w)){var T=v&&/>\s*$/.test(w),D=!/>\s*$/.test(w);(T||D)&&d.replaceRange("",{line:p.line,ch:0},{line:p.line,ch:p.ch+1}),f[h]=`
`}else{var k=E[1],R=E[5],O=!(l.test(E[2])||E[2].indexOf(">")>=0),B=O?parseInt(E[3],10)+1+E[4]:E[2].replace("x"," ");f[h]=`
`+k+B+R,O&&u(d,p)}}d.replaceSelections(f)}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(n,r,i){(function(s){s.overlayMode=function(o,a,l){return{startState:function(){return{base:s.startState(o),overlay:s.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(u){return{base:s.copyState(o,u.base),overlay:s.copyState(a,u.overlay),basePos:u.basePos,baseCur:null,overlayPos:u.overlayPos,overlayCur:null}},token:function(u,d){return(u!=d.streamSeen||Math.min(d.basePos,d.overlayPos)<u.start)&&(d.streamSeen=u,d.basePos=d.overlayPos=u.start),u.start==d.basePos&&(d.baseCur=o.token(u,d.base),d.basePos=u.pos),u.start==d.overlayPos&&(u.pos=u.start,d.overlayCur=a.token(u,d.overlay),d.overlayPos=u.pos),u.pos=Math.min(d.basePos,d.overlayPos),d.overlayCur==null?d.baseCur:d.baseCur!=null&&d.overlay.combineTokens||l&&d.overlay.combineTokens==null?d.baseCur+" "+d.overlayCur:d.overlayCur},indent:o.indent&&function(u,d,c){return o.indent(u.base,d,c)},electricChars:o.electricChars,innerMode:function(u){return{state:u.base,mode:o}},blankLine:function(u){var d,c;return o.blankLine&&(d=o.blankLine(u.base)),a.blankLine&&(c=a.blankLine(u.overlay)),c==null?d:l&&d!=null?d+" "+c:c}}}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(n,r,i){(function(s){var o,a,l=s.Pos;function u(E,S){for(var T=function(R){var O=R.flags;return O??(R.ignoreCase?"i":"")+(R.global?"g":"")+(R.multiline?"m":"")}(E),D=T,k=0;k<S.length;k++)D.indexOf(S.charAt(k))==-1&&(D+=S.charAt(k));return T==D?E:new RegExp(E.source,D)}function d(E){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(E.source)}function c(E,S,T){S=u(S,"g");for(var D=T.line,k=T.ch,R=E.lastLine();D<=R;D++,k=0){S.lastIndex=k;var O=E.getLine(D),B=S.exec(O);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function f(E,S,T){if(!d(S))return c(E,S,T);S=u(S,"gm");for(var D,k=1,R=T.line,O=E.lastLine();R<=O;){for(var B=0;B<k&&!(R>O);B++){var K=E.getLine(R++);D=D==null?K:D+`
`+K}k*=2,S.lastIndex=T.ch;var L=S.exec(D);if(L){var I=D.slice(0,L.index).split(`
`),$=L[0].split(`
`),U=T.line+I.length-1,q=I[I.length-1].length;return{from:l(U,q),to:l(U+$.length-1,$.length==1?q+$[0].length:$[$.length-1].length),match:L}}}}function h(E,S,T){for(var D,k=0;k<=E.length;){S.lastIndex=k;var R=S.exec(E);if(!R)break;var O=R.index+R[0].length;if(O>E.length-T)break;(!D||O>D.index+D[0].length)&&(D=R),k=R.index+1}return D}function p(E,S,T){S=u(S,"g");for(var D=T.line,k=T.ch,R=E.firstLine();D>=R;D--,k=-1){var O=E.getLine(D),B=h(O,S,k<0?0:O.length-k);if(B)return{from:l(D,B.index),to:l(D,B.index+B[0].length),match:B}}}function g(E,S,T){if(!d(S))return p(E,S,T);S=u(S,"gm");for(var D,k=1,R=E.getLine(T.line).length-T.ch,O=T.line,B=E.firstLine();O>=B;){for(var K=0;K<k&&O>=B;K++){var L=E.getLine(O--);D=D==null?L:L+`
`+D}k*=2;var I=h(D,S,R);if(I){var $=D.slice(0,I.index).split(`
`),U=I[0].split(`
`),q=O+$.length,Y=$[$.length-1].length;return{from:l(q,Y),to:l(q+U.length-1,U.length==1?Y+U[0].length:U[U.length-1].length),match:I}}}}function b(E,S,T,D){if(E.length==S.length)return T;for(var k=0,R=T+Math.max(0,E.length-S.length);;){if(k==R)return k;var O=k+R>>1,B=D(E.slice(0,O)).length;if(B==T)return O;B>T?R=O:k=O+1}}function y(E,S,T,D){if(!S.length)return null;var k=D?o:a,R=k(S).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=E.lastLine()+1-R.length;O<=K;O++,B=0){var L=E.getLine(O).slice(B),I=k(L);if(R.length==1){var $=I.indexOf(R[0]);if($==-1)continue e;return T=b(L,I,$,k)+B,{from:l(O,b(L,I,$,k)+B),to:l(O,b(L,I,$+R[0].length,k)+B)}}var U=I.length-R[0].length;if(I.slice(U)==R[0]){for(var q=1;q<R.length-1;q++)if(k(E.getLine(O+q))!=R[q])continue e;var Y=E.getLine(O+R.length-1),X=k(Y),te=R[R.length-1];if(X.slice(0,te.length)==te)return{from:l(O,b(L,I,U,k)+B),to:l(O+R.length-1,b(Y,X,te.length,k))}}}}function v(E,S,T,D){if(!S.length)return null;var k=D?o:a,R=k(S).split(/\r|\n\r?/);e:for(var O=T.line,B=T.ch,K=E.firstLine()-1+R.length;O>=K;O--,B=-1){var L=E.getLine(O);B>-1&&(L=L.slice(0,B));var I=k(L);if(R.length==1){var $=I.lastIndexOf(R[0]);if($==-1)continue e;return{from:l(O,b(L,I,$,k)),to:l(O,b(L,I,$+R[0].length,k))}}var U=R[R.length-1];if(I.slice(0,U.length)==U){var q=1;for(T=O-R.length+1;q<R.length-1;q++)if(k(E.getLine(T+q))!=R[q])continue e;var Y=E.getLine(O+1-R.length),X=k(Y);if(X.slice(X.length-R[0].length)==R[0])return{from:l(O+1-R.length,b(Y,X,Y.length-R[0].length,k)),to:l(O,b(L,I,U.length,k))}}}}function w(E,S,T,D){var k;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=E,T=T?E.clipPos(T):l(0,0),this.pos={from:T,to:T},typeof D=="object"?k=D.caseFold:(k=D,D=null),typeof S=="string"?(k==null&&(k=!1),this.matches=function(R,O){return(R?v:y)(E,S,O,k)}):(S=u(S,"gm"),D&&D.multiline===!1?this.matches=function(R,O){return(R?p:c)(E,S,O)}:this.matches=function(R,O){return(R?g:f)(E,S,O)})}String.prototype.normalize?(o=function(E){return E.normalize("NFD").toLowerCase()},a=function(E){return E.normalize("NFD")}):(o=function(E){return E.toLowerCase()},a=function(E){return E}),w.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(E){var S=this.doc.clipPos(E?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(S=l(S.line,S.ch),E?(S.ch--,S.ch<0&&(S.line--,S.ch=(this.doc.getLine(S.line)||"").length)):(S.ch++,S.ch>(this.doc.getLine(S.line)||"").length&&(S.ch=0,S.line++)),s.cmpPos(S,this.doc.clipPos(S))!=0))return this.atOccurrence=!1;var T=this.matches(E,S);if(this.afterEmptyMatch=T&&s.cmpPos(T.from,T.to)==0,T)return this.pos=T,this.atOccurrence=!0,this.pos.match||!0;var D=l(E?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:D,to:D},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(E,S){if(this.atOccurrence){var T=s.splitLines(E);this.doc.replaceRange(T,this.pos.from,this.pos.to,S),this.pos.to=l(this.pos.from.line+T.length-1,T[T.length-1].length+(T.length==1?this.pos.from.ch:0))}}},s.defineExtension("getSearchCursor",function(E,S,T){return new w(this.doc,E,S,T)}),s.defineDocExtension("getSearchCursor",function(E,S,T){return new w(this,E,S,T)}),s.defineExtension("selectMatches",function(E,S){for(var T=[],D=this.getSearchCursor(E,this.getCursor("from"),S);D.findNext()&&!(s.cmpPos(D.to(),this.getCursor("to"))>0);)T.push({anchor:D.from(),head:D.to()});T.length&&this.setSelections(T,0)})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(n,r,i){(function(s){function o(h){h.state.markedSelection&&h.operation(function(){(function(p){if(!p.somethingSelected())return c(p);if(p.listSelections().length>1)return f(p);var g=p.getCursor("start"),b=p.getCursor("end"),y=p.state.markedSelection;if(!y.length)return d(p,g,b);var v=y[0].find(),w=y[y.length-1].find();if(!v||!w||b.line-g.line<=8||u(g,w.to)>=0||u(b,v.from)<=0)return f(p);for(;u(g,v.from)>0;)y.shift().clear(),v=y[0].find();for(u(g,v.from)<0&&(v.to.line-g.line<8?(y.shift().clear(),d(p,g,v.to,0)):d(p,g,v.from,0));u(b,w.to)<0;)y.pop().clear(),w=y[y.length-1].find();u(b,w.to)>0&&(b.line-w.from.line<8?(y.pop().clear(),d(p,w.from,b)):d(p,w.to,b))})(h)})}function a(h){h.state.markedSelection&&h.state.markedSelection.length&&h.operation(function(){c(h)})}s.defineOption("styleSelectedText",!1,function(h,p,g){var b=g&&g!=s.Init;p&&!b?(h.state.markedSelection=[],h.state.markedSelectionStyle=typeof p=="string"?p:"CodeMirror-selectedtext",f(h),h.on("cursorActivity",o),h.on("change",a)):!p&&b&&(h.off("cursorActivity",o),h.off("change",a),c(h),h.state.markedSelection=h.state.markedSelectionStyle=null)});var l=s.Pos,u=s.cmpPos;function d(h,p,g,b){if(u(p,g)!=0)for(var y=h.state.markedSelection,v=h.state.markedSelectionStyle,w=p.line;;){var E=w==p.line?p:l(w,0),S=w+8,T=S>=g.line,D=T?g:l(S,0),k=h.markText(E,D,{className:v});if(b==null?y.push(k):y.splice(b++,0,k),T)break;w=S}}function c(h){for(var p=h.state.markedSelection,g=0;g<p.length;++g)p[g].clear();p.length=0}function f(h){c(h);for(var p=h.listSelections(),g=0;g<p.length;g++)d(h,p[g].from(),p[g].to())}})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(n,r,i){(function(s,o){typeof i=="object"&&r!==void 0?r.exports=o():(s=s||self).CodeMirror=o()})(this,function(){var s=navigator.userAgent,o=navigator.platform,a=/gecko\/\d/i.test(s),l=/MSIE \d/.test(s),u=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(s),d=/Edge\/(\d+)/.exec(s),c=l||u||d,f=c&&(l?document.documentMode||6:+(d||u)[1]),h=!d&&/WebKit\//.test(s),p=h&&/Qt\/\d+\.\d+/.test(s),g=!d&&/Chrome\/(\d+)/.exec(s),b=g&&+g[1],y=/Opera\//.test(s),v=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s),E=/PhantomJS/.test(s),S=v&&(/Mobile\/\w+/.test(s)||navigator.maxTouchPoints>2),T=/Android/.test(s),D=S||T||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(s),k=S||/Mac/.test(o),R=/\bCrOS\b/.test(s),O=/win/i.test(o),B=y&&s.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(y=!1,h=!0);var K=k&&(p||y&&(B==null||B<12.11)),L=a||c&&f>=9;function I(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var $,U=function(m,x){var C=m.className,_=I(x).exec(C);if(_){var A=C.slice(_.index+_[0].length);m.className=C.slice(0,_.index)+(A?_[1]+A:"")}};function q(m){for(var x=m.childNodes.length;x>0;--x)m.removeChild(m.firstChild);return m}function Y(m,x){return q(m).appendChild(x)}function X(m,x,C,_){var A=document.createElement(m);if(C&&(A.className=C),_&&(A.style.cssText=_),typeof x=="string")A.appendChild(document.createTextNode(x));else if(x)for(var M=0;M<x.length;++M)A.appendChild(x[M]);return A}function te(m,x,C,_){var A=X(m,x,C,_);return A.setAttribute("role","presentation"),A}function le(m,x){if(x.nodeType==3&&(x=x.parentNode),m.contains)return m.contains(x);do if(x.nodeType==11&&(x=x.host),x==m)return!0;while(x=x.parentNode)}function ee(m){var x;try{x=m.activeElement}catch{x=m.body||null}for(;x&&x.shadowRoot&&x.shadowRoot.activeElement;)x=x.shadowRoot.activeElement;return x}function z(m,x){var C=m.className;I(x).test(C)||(m.className+=(C?" ":"")+x)}function he(m,x){for(var C=m.split(" "),_=0;_<C.length;_++)C[_]&&!I(C[_]).test(x)&&(x+=" "+C[_]);return x}$=document.createRange?function(m,x,C,_){var A=document.createRange();return A.setEnd(_||m,C),A.setStart(m,x),A}:function(m,x,C){var _=document.body.createTextRange();try{_.moveToElementText(m.parentNode)}catch{return _}return _.collapse(!0),_.moveEnd("character",C),_.moveStart("character",x),_};var fe=function(m){m.select()};function ze(m){return m.display.wrapper.ownerDocument}function He(m){return ze(m).defaultView}function je(m){var x=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,x)}}function we(m,x,C){for(var _ in x||(x={}),m)!m.hasOwnProperty(_)||C===!1&&x.hasOwnProperty(_)||(x[_]=m[_]);return x}function $e(m,x,C,_,A){x==null&&(x=m.search(/[^\s\u00a0]/))==-1&&(x=m.length);for(var M=_||0,N=A||0;;){var j=m.indexOf("	",M);if(j<0||j>=x)return N+(x-M);N+=j-M,N+=C-N%C,M=j+1}}S?fe=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:c&&(fe=function(m){try{m.select()}catch{}});var qe=function(){this.id=null,this.f=null,this.time=0,this.handler=je(this.onTimeout,this)};function Pe(m,x){for(var C=0;C<m.length;++C)if(m[C]==x)return C;return-1}qe.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},qe.prototype.set=function(m,x){this.f=x;var C=+new Date+m;(!this.id||C<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=C)};var St={toString:function(){return"CodeMirror.Pass"}},ht={scroll:!1},nn={origin:"*mouse"},Vt={origin:"+move"};function Mn(m,x,C){for(var _=0,A=0;;){var M=m.indexOf("	",_);M==-1&&(M=m.length);var N=M-_;if(M==m.length||A+N>=x)return _+Math.min(N,x-A);if(A+=M-_,_=M+1,(A+=C-A%C)>=x)return _}}var Ze=[""];function pe(m){for(;Ze.length<=m;)Ze.push(ie(Ze)+" ");return Ze[m]}function ie(m){return m[m.length-1]}function oe(m,x){for(var C=[],_=0;_<m.length;_++)C[_]=x(m[_],_);return C}function ve(){}function F(m,x){var C;return Object.create?C=Object.create(m):(ve.prototype=m,C=new ve),x&&we(x,C),C}var H=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||H.test(m))}function re(m,x){return x?!!(x.source.indexOf("\\w")>-1&&J(m))||x.test(m):J(m)}function ye(m){for(var x in m)if(m.hasOwnProperty(x)&&m[x])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Re(m){return m.charCodeAt(0)>=768&&xe.test(m)}function P(m,x,C){for(;(C<0?x>0:x<m.length)&&Re(m.charAt(x));)x+=C;return x}function Q(m,x,C){for(var _=x>C?-1:1;;){if(x==C)return x;var A=(x+C)/2,M=_<0?Math.ceil(A):Math.floor(A);if(M==x)return m(M)?x:C;m(M)?C=M:x=M+_}}var se=null;function ae(m,x,C){var _;se=null;for(var A=0;A<m.length;++A){var M=m[A];if(M.from<x&&M.to>x)return A;M.to==x&&(M.from!=M.to&&C=="before"?_=A:se=A),M.from==x&&(M.from!=M.to&&C!="before"?_=A:se=A)}return _??se}var ke=function(){var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,x=/[stwN]/,C=/[LRr]/,_=/[Lb1n]/,A=/[1n]/;function M(N,j,V){this.level=N,this.from=j,this.to=V}return function(N,j){var V=j=="ltr"?"L":"R";if(N.length==0||j=="ltr"&&!m.test(N))return!1;for(var W,ce=N.length,de=[],Ce=0;Ce<ce;++Ce)de.push((W=N.charCodeAt(Ce))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(W):1424<=W&&W<=1524?"R":1536<=W&&W<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(W-1536):1774<=W&&W<=2220?"r":8192<=W&&W<=8203?"w":W==8204?"b":"L");for(var be=0,Ie=V;be<ce;++be){var Ne=de[be];Ne=="m"?de[be]=Ie:Ie=Ne}for(var Me=0,Ve=V;Me<ce;++Me){var nt=de[Me];nt=="1"&&Ve=="r"?de[Me]="n":C.test(nt)&&(Ve=nt,nt=="r"&&(de[Me]="R"))}for(var Je=1,mt=de[0];Je<ce-1;++Je){var ct=de[Je];ct=="+"&&mt=="1"&&de[Je+1]=="1"?de[Je]="1":ct!=","||mt!=de[Je+1]||mt!="1"&&mt!="n"||(de[Je]=mt),mt=ct}for(var gt=0;gt<ce;++gt){var bn=de[gt];if(bn==",")de[gt]="N";else if(bn=="%"){var Mt=void 0;for(Mt=gt+1;Mt<ce&&de[Mt]=="%";++Mt);for(var Gn=gt&&de[gt-1]=="!"||Mt<ce&&de[Mt]=="1"?"1":"N",dn=gt;dn<Mt;++dn)de[dn]=Gn;gt=Mt-1}}for(var lr=0,Br=V;lr<ce;++lr){var ur=de[lr];Br=="L"&&ur=="1"?de[lr]="L":C.test(ur)&&(Br=ur)}for(var Kn=0;Kn<ce;++Kn)if(x.test(de[Kn])){var cr=void 0;for(cr=Kn+1;cr<ce&&x.test(de[cr]);++cr);for(var In=(Kn?de[Kn-1]:V)=="L",zr=In==((cr<ce?de[cr]:V)=="L")?In?"L":"R":V,Fn=Kn;Fn<cr;++Fn)de[Fn]=zr;Kn=cr-1}for(var Qn,Bn=[],vr=0;vr<ce;)if(_.test(de[vr])){var co=vr;for(++vr;vr<ce&&_.test(de[vr]);++vr);Bn.push(new M(0,co,vr))}else{var jr=vr,Xs=Bn.length,Zs=j=="rtl"?1:0;for(++vr;vr<ce&&de[vr]!="L";++vr);for(var Ti=jr;Ti<vr;)if(A.test(de[Ti])){jr<Ti&&(Bn.splice(Xs,0,new M(1,jr,Ti)),Xs+=Zs);var fo=Ti;for(++Ti;Ti<vr&&A.test(de[Ti]);++Ti);Bn.splice(Xs,0,new M(2,fo,Ti)),Xs+=Zs,jr=Ti}else++Ti;jr<vr&&Bn.splice(Xs,0,new M(1,jr,vr))}return j=="ltr"&&(Bn[0].level==1&&(Qn=N.match(/^\s+/))&&(Bn[0].from=Qn[0].length,Bn.unshift(new M(0,0,Qn[0].length))),ie(Bn).level==1&&(Qn=N.match(/\s+$/))&&(ie(Bn).to-=Qn[0].length,Bn.push(new M(0,ce-Qn[0].length,ce)))),j=="rtl"?Bn.reverse():Bn}}();function Ae(m,x){var C=m.order;return C==null&&(C=m.order=ke(m.text,x)),C}var Ee=[],De=function(m,x,C){if(m.addEventListener)m.addEventListener(x,C,!1);else if(m.attachEvent)m.attachEvent("on"+x,C);else{var _=m._handlers||(m._handlers={});_[x]=(_[x]||Ee).concat(C)}};function Oe(m,x){return m._handlers&&m._handlers[x]||Ee}function We(m,x,C){if(m.removeEventListener)m.removeEventListener(x,C,!1);else if(m.detachEvent)m.detachEvent("on"+x,C);else{var _=m._handlers,A=_&&_[x];if(A){var M=Pe(A,C);M>-1&&(_[x]=A.slice(0,M).concat(A.slice(M+1)))}}}function tt(m,x){var C=Oe(m,x);if(C.length)for(var _=Array.prototype.slice.call(arguments,2),A=0;A<C.length;++A)C[A].apply(null,_)}function ft(m,x,C){return typeof x=="string"&&(x={type:x,preventDefault:function(){this.defaultPrevented=!0}}),tt(m,C||x.type,m,x),on(x)||x.codemirrorIgnore}function Kt(m){var x=m._handlers&&m._handlers.cursorActivity;if(x)for(var C=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),_=0;_<x.length;++_)Pe(C,x[_])==-1&&C.push(x[_])}function xt(m,x){return Oe(m,x).length>0}function Qt(m){m.prototype.on=function(x,C){De(this,x,C)},m.prototype.off=function(x,C){We(this,x,C)}}function rn(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function sn(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function on(m){return m.defaultPrevented!=null?m.defaultPrevented:m.returnValue==0}function Tn(m){rn(m),sn(m)}function Cr(m){return m.target||m.srcElement}function Qi(m){var x=m.which;return x==null&&(1&m.button?x=1:2&m.button?x=3:4&m.button&&(x=2)),k&&m.ctrlKey&&x==1&&(x=3),x}var hs,Vi,zo=function(){if(c&&f<9)return!1;var m=X("div");return"draggable"in m||"dragDrop"in m}();function Hn(m){if(hs==null){var x=X("span","");Y(m,X("span",[x,document.createTextNode("x")])),m.firstChild.offsetHeight!=0&&(hs=x.offsetWidth<=1&&x.offsetHeight>2&&!(c&&f<8))}var C=hs?X("span",""):X("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return C.setAttribute("cm-text",""),C}function Ir(m){if(Vi!=null)return Vi;var x=Y(m,document.createTextNode("AA")),C=$(x,0,1).getBoundingClientRect(),_=$(x,1,2).getBoundingClientRect();return q(m),!(!C||C.left==C.right)&&(Vi=_.right-C.right<3)}var Rr,mn=`

b`.split(/\n/).length!=3?function(m){for(var x=0,C=[],_=m.length;x<=_;){var A=m.indexOf(`
`,x);A==-1&&(A=m.length);var M=m.slice(x,m.charAt(A-1)=="\r"?A-1:A),N=M.indexOf("\r");N!=-1?(C.push(M.slice(0,N)),x+=N+1):(C.push(M),x=A+1)}return C}:function(m){return m.split(/\r\n?|\n/)},Kr=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch{return!1}}:function(m){var x;try{x=m.ownerDocument.selection.createRange()}catch{}return!(!x||x.parentElement()!=m)&&x.compareEndPoints("StartToEnd",x)!=0},or="oncopy"in(Rr=X("div"))||(Rr.setAttribute("oncopy","return;"),typeof Rr.oncopy=="function"),zi=null,nr={},$r={};function ro(m,x){arguments.length>2&&(x.dependencies=Array.prototype.slice.call(arguments,2)),nr[m]=x}function ge(m){if(typeof m=="string"&&$r.hasOwnProperty(m))m=$r[m];else if(m&&typeof m.name=="string"&&$r.hasOwnProperty(m.name)){var x=$r[m.name];typeof x=="string"&&(x={name:x}),(m=F(x,m)).name=x.name}else{if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return ge("application/xml");if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return ge("application/json")}return typeof m=="string"?{name:m}:m||{name:"null"}}function Le(m,x){x=ge(x);var C=nr[x.name];if(!C)return Le(m,"text/plain");var _=C(m,x);if(it.hasOwnProperty(x.name)){var A=it[x.name];for(var M in A)A.hasOwnProperty(M)&&(_.hasOwnProperty(M)&&(_["_"+M]=_[M]),_[M]=A[M])}if(_.name=x.name,x.helperType&&(_.helperType=x.helperType),x.modeProps)for(var N in x.modeProps)_[N]=x.modeProps[N];return _}var it={};function Ke(m,x){we(x,it.hasOwnProperty(m)?it[m]:it[m]={})}function Et(m,x){if(x===!0)return x;if(m.copyState)return m.copyState(x);var C={};for(var _ in x){var A=x[_];A instanceof Array&&(A=A.concat([])),C[_]=A}return C}function an(m,x){for(var C;m.innerMode&&(C=m.innerMode(x))&&C.mode!=m;)x=C.state,m=C.mode;return C||{mode:m,state:x}}function en(m,x,C){return!m.startState||m.startState(x,C)}var wt=function(m,x,C){this.pos=this.start=0,this.string=m,this.tabSize=x||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=C};function Qe(m,x){if((x-=m.first)<0||x>=m.size)throw new Error("There is no line "+(x+m.first)+" in the document.");for(var C=m;!C.lines;)for(var _=0;;++_){var A=C.children[_],M=A.chunkSize();if(x<M){C=A;break}x-=M}return C.lines[x]}function hn(m,x,C){var _=[],A=x.line;return m.iter(x.line,C.line+1,function(M){var N=M.text;A==C.line&&(N=N.slice(0,C.ch)),A==x.line&&(N=N.slice(x.ch)),_.push(N),++A}),_}function Sn(m,x,C){var _=[];return m.iter(x,C,function(A){_.push(A.text)}),_}function zt(m,x){var C=x-m.height;if(C)for(var _=m;_;_=_.parent)_.height+=C}function jt(m){if(m.parent==null)return null;for(var x=m.parent,C=Pe(x.lines,m),_=x.parent;_;x=_,_=_.parent)for(var A=0;_.children[A]!=x;++A)C+=_.children[A].chunkSize();return C+x.first}function Sr(m,x){var C=m.first;e:do{for(var _=0;_<m.children.length;++_){var A=m.children[_],M=A.height;if(x<M){m=A;continue e}x-=M,C+=A.chunkSize()}return C}while(!m.lines);for(var N=0;N<m.lines.length;++N){var j=m.lines[N].height;if(x<j)break;x-=j}return C+N}function di(m,x){return x>=m.first&&x<m.first+m.size}function Zt(m,x){return String(m.lineNumberFormatter(x+m.firstLineNumber))}function Xe(m,x,C){if(C===void 0&&(C=null),!(this instanceof Xe))return new Xe(m,x,C);this.line=m,this.ch=x,this.sticky=C}function pt(m,x){return m.line-x.line||m.ch-x.ch}function Zn(m,x){return m.sticky==x.sticky&&pt(m,x)==0}function ri(m){return Xe(m.line,m.ch)}function Ar(m,x){return pt(m,x)<0?x:m}function Fr(m,x){return pt(m,x)<0?m:x}function rr(m,x){return Math.max(m.first,Math.min(x,m.first+m.size-1))}function qt(m,x){if(x.line<m.first)return Xe(m.first,0);var C=m.first+m.size-1;return x.line>C?Xe(C,Qe(m,C).text.length):function(_,A){var M=_.ch;return M==null||M>A?Xe(_.line,A):M<0?Xe(_.line,0):_}(x,Qe(m,x.line).text.length)}function xi(m,x){for(var C=[],_=0;_<x.length;_++)C[_]=qt(m,x[_]);return C}wt.prototype.eol=function(){return this.pos>=this.string.length},wt.prototype.sol=function(){return this.pos==this.lineStart},wt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},wt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},wt.prototype.eat=function(m){var x=this.string.charAt(this.pos);if(typeof m=="string"?x==m:x&&(m.test?m.test(x):m(x)))return++this.pos,x},wt.prototype.eatWhile=function(m){for(var x=this.pos;this.eat(m););return this.pos>x},wt.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},wt.prototype.skipToEnd=function(){this.pos=this.string.length},wt.prototype.skipTo=function(m){var x=this.string.indexOf(m,this.pos);if(x>-1)return this.pos=x,!0},wt.prototype.backUp=function(m){this.pos-=m},wt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$e(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?$e(this.string,this.lineStart,this.tabSize):0)},wt.prototype.indentation=function(){return $e(this.string,null,this.tabSize)-(this.lineStart?$e(this.string,this.lineStart,this.tabSize):0)},wt.prototype.match=function(m,x,C){if(typeof m!="string"){var _=this.string.slice(this.pos).match(m);return _&&_.index>0?null:(_&&x!==!1&&(this.pos+=_[0].length),_)}var A=function(M){return C?M.toLowerCase():M};if(A(this.string.substr(this.pos,m.length))==A(m))return x!==!1&&(this.pos+=m.length),!0},wt.prototype.current=function(){return this.string.slice(this.start,this.pos)},wt.prototype.hideFirstChars=function(m,x){this.lineStart+=m;try{return x()}finally{this.lineStart-=m}},wt.prototype.lookAhead=function(m){var x=this.lineOracle;return x&&x.lookAhead(m)},wt.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};var es=function(m,x){this.state=m,this.lookAhead=x},wi=function(m,x,C,_){this.state=x,this.doc=m,this.line=C,this.maxLookAhead=_||0,this.baseTokens=null,this.baseTokenPos=1};function qs(m,x,C,_){var A=[m.state.modeGen],M={};ul(m,x.text,m.doc.mode,C,function(W,ce){return A.push(W,ce)},M,_);for(var N=C.state,j=function(W){C.baseTokens=A;var ce=m.state.overlays[W],de=1,Ce=0;C.state=!0,ul(m,x.text,ce.mode,C,function(be,Ie){for(var Ne=de;Ce<be;){var Me=A[de];Me>be&&A.splice(de,1,be,A[de+1],Me),de+=2,Ce=Math.min(be,Me)}if(Ie)if(ce.opaque)A.splice(Ne,de-Ne,be,"overlay "+Ie),de=Ne+2;else for(;Ne<de;Ne+=2){var Ve=A[Ne+1];A[Ne+1]=(Ve?Ve+" ":"")+"overlay "+Ie}},M),C.state=N,C.baseTokens=null,C.baseTokenPos=1},V=0;V<m.state.overlays.length;++V)j(V);return{styles:A,classes:M.bgClass||M.textClass?M:null}}function _o(m,x,C){if(!x.styles||x.styles[0]!=m.state.modeGen){var _=io(m,jt(x)),A=x.text.length>m.options.maxHighlightLength&&Et(m.doc.mode,_.state),M=qs(m,x,_);A&&(_.state=A),x.stateAfter=_.save(!A),x.styles=M.styles,M.classes?x.styleClasses=M.classes:x.styleClasses&&(x.styleClasses=null),C===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return x.styles}function io(m,x,C){var _=m.doc,A=m.display;if(!_.mode.startState)return new wi(_,!0,x);var M=function(V,W,ce){for(var de,Ce,be=V.doc,Ie=ce?-1:W-(V.doc.mode.innerMode?1e3:100),Ne=W;Ne>Ie;--Ne){if(Ne<=be.first)return be.first;var Me=Qe(be,Ne-1),Ve=Me.stateAfter;if(Ve&&(!ce||Ne+(Ve instanceof es?Ve.lookAhead:0)<=be.modeFrontier))return Ne;var nt=$e(Me.text,null,V.options.tabSize);(Ce==null||de>nt)&&(Ce=Ne-1,de=nt)}return Ce}(m,x,C),N=M>_.first&&Qe(_,M-1).stateAfter,j=N?wi.fromSaved(_,N,M):new wi(_,en(_.mode),M);return _.iter(M,x,function(V){jo(m,V.text,j);var W=j.line;V.stateAfter=W==x-1||W%5==0||W>=A.viewFrom&&W<A.viewTo?j.save():null,j.nextLine()}),C&&(_.modeFrontier=j.line),j}function jo(m,x,C,_){var A=m.doc.mode,M=new wt(x,m.options.tabSize,C);for(M.start=M.pos=_||0,x==""&&ws(A,C.state);!M.eol();)Ms(A,M,C.state),M.start=M.pos}function ws(m,x){if(m.blankLine)return m.blankLine(x);if(m.innerMode){var C=an(m,x);return C.mode.blankLine?C.mode.blankLine(C.state):void 0}}function Ms(m,x,C,_){for(var A=0;A<10;A++){_&&(_[0]=an(m,C).mode);var M=m.token(x,C);if(x.pos>x.start)return M}throw new Error("Mode "+m.name+" failed to advance stream.")}wi.prototype.lookAhead=function(m){var x=this.doc.getLine(this.line+m);return x!=null&&m>this.maxLookAhead&&(this.maxLookAhead=m),x},wi.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var x=this.baseTokens[this.baseTokenPos+1];return{type:x&&x.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},wi.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},wi.fromSaved=function(m,x,C){return x instanceof es?new wi(m,Et(m.mode,x.state),C,x.lookAhead):new wi(m,Et(m.mode,x),C)},wi.prototype.save=function(m){var x=m!==!1?Et(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new es(x,this.maxLookAhead):x};var Uo=function(m,x,C){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=x||null,this.state=C};function ps(m,x,C,_){var A,M,N=m.doc,j=N.mode,V=Qe(N,(x=qt(N,x)).line),W=io(m,x.line,C),ce=new wt(V.text,m.options.tabSize,W);for(_&&(M=[]);(_||ce.pos<x.ch)&&!ce.eol();)ce.start=ce.pos,A=Ms(j,ce,W.state),_&&M.push(new Uo(ce,A,Et(N.mode,W.state)));return _?M:new Uo(ce,A,W.state)}function ll(m,x){if(m)for(;;){var C=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!C)break;m=m.slice(0,C.index)+m.slice(C.index+C[0].length);var _=C[1]?"bgClass":"textClass";x[_]==null?x[_]=C[2]:new RegExp("(?:^|\\s)"+C[2]+"(?:$|\\s)").test(x[_])||(x[_]+=" "+C[2])}return m}function ul(m,x,C,_,A,M,N){var j=C.flattenSpans;j==null&&(j=m.options.flattenSpans);var V,W=0,ce=null,de=new wt(x,m.options.tabSize,_),Ce=m.options.addModeClass&&[null];for(x==""&&ll(ws(C,_.state),M);!de.eol();){if(de.pos>m.options.maxHighlightLength?(j=!1,N&&jo(m,x,_,de.pos),de.pos=x.length,V=null):V=ll(Ms(C,de,_.state,Ce),M),Ce){var be=Ce[0].name;be&&(V="m-"+(V?be+" "+V:be))}if(!j||ce!=V){for(;W<de.start;)A(W=Math.min(de.start,W+5e3),ce);ce=V}de.start=de.pos}for(;W<de.pos;){var Ie=Math.min(de.pos,W+5e3);A(Ie,ce),W=Ie}}var kr=!1,ts=!1;function so(m,x,C){this.marker=m,this.from=x,this.to=C}function Is(m,x){if(m)for(var C=0;C<m.length;++C){var _=m[C];if(_.marker==x)return _}}function Hs(m,x){for(var C,_=0;_<m.length;++_)m[_]!=x&&(C||(C=[])).push(m[_]);return C}function pa(m,x){if(x.full)return null;var C=di(m,x.from.line)&&Qe(m,x.from.line).markedSpans,_=di(m,x.to.line)&&Qe(m,x.to.line).markedSpans;if(!C&&!_)return null;var A=x.from.ch,M=x.to.ch,N=pt(x.from,x.to)==0,j=function(ct,gt,bn){var Mt;if(ct)for(var Gn=0;Gn<ct.length;++Gn){var dn=ct[Gn],lr=dn.marker;if(dn.from==null||(lr.inclusiveLeft?dn.from<=gt:dn.from<gt)||dn.from==gt&&lr.type=="bookmark"&&(!bn||!dn.marker.insertLeft)){var Br=dn.to==null||(lr.inclusiveRight?dn.to>=gt:dn.to>gt);(Mt||(Mt=[])).push(new so(lr,dn.from,Br?null:dn.to))}}return Mt}(C,A,N),V=function(ct,gt,bn){var Mt;if(ct)for(var Gn=0;Gn<ct.length;++Gn){var dn=ct[Gn],lr=dn.marker;if(dn.to==null||(lr.inclusiveRight?dn.to>=gt:dn.to>gt)||dn.from==gt&&lr.type=="bookmark"&&(!bn||dn.marker.insertLeft)){var Br=dn.from==null||(lr.inclusiveLeft?dn.from<=gt:dn.from<gt);(Mt||(Mt=[])).push(new so(lr,Br?null:dn.from-gt,dn.to==null?null:dn.to-gt))}}return Mt}(_,M,N),W=x.text.length==1,ce=ie(x.text).length+(W?A:0);if(j)for(var de=0;de<j.length;++de){var Ce=j[de];if(Ce.to==null){var be=Is(V,Ce.marker);be?W&&(Ce.to=be.to==null?null:be.to+ce):Ce.to=A}}if(V)for(var Ie=0;Ie<V.length;++Ie){var Ne=V[Ie];Ne.to!=null&&(Ne.to+=ce),Ne.from==null?Is(j,Ne.marker)||(Ne.from=ce,W&&(j||(j=[])).push(Ne)):(Ne.from+=ce,W&&(j||(j=[])).push(Ne))}j&&(j=Gs(j)),V&&V!=j&&(V=Gs(V));var Me=[j];if(!W){var Ve,nt=x.text.length-2;if(nt>0&&j)for(var Je=0;Je<j.length;++Je)j[Je].to==null&&(Ve||(Ve=[])).push(new so(j[Je].marker,null,null));for(var mt=0;mt<nt;++mt)Me.push(Ve);Me.push(V)}return Me}function Gs(m){for(var x=0;x<m.length;++x){var C=m[x];C.from!=null&&C.from==C.to&&C.marker.clearWhenEmpty!==!1&&m.splice(x--,1)}return m.length?m:null}function cl(m){var x=m.markedSpans;if(x){for(var C=0;C<x.length;++C)x[C].marker.detachLine(m);m.markedSpans=null}}function Wi(m,x){if(x){for(var C=0;C<x.length;++C)x[C].marker.attachLine(m);m.markedSpans=x}}function Yi(m){return m.inclusiveLeft?-1:0}function oo(m){return m.inclusiveRight?1:0}function ms(m,x){var C=m.lines.length-x.lines.length;if(C!=0)return C;var _=m.find(),A=x.find(),M=pt(_.from,A.from)||Yi(m)-Yi(x);if(M)return-M;var N=pt(_.to,A.to)||oo(m)-oo(x);return N||x.id-m.id}function qo(m,x){var C,_=ts&&m.markedSpans;if(_)for(var A=void 0,M=0;M<_.length;++M)(A=_[M]).marker.collapsed&&(x?A.from:A.to)==null&&(!C||ms(C,A.marker)<0)&&(C=A.marker);return C}function Vs(m){return qo(m,!0)}function fi(m){return qo(m,!1)}function Pa(m,x){var C,_=ts&&m.markedSpans;if(_)for(var A=0;A<_.length;++A){var M=_[A];M.marker.collapsed&&(M.from==null||M.from<x)&&(M.to==null||M.to>x)&&(!C||ms(C,M.marker)<0)&&(C=M.marker)}return C}function ao(m,x,C,_,A){var M=Qe(m,x),N=ts&&M.markedSpans;if(N)for(var j=0;j<N.length;++j){var V=N[j];if(V.marker.collapsed){var W=V.marker.find(0),ce=pt(W.from,C)||Yi(V.marker)-Yi(A),de=pt(W.to,_)||oo(V.marker)-oo(A);if(!(ce>=0&&de<=0||ce<=0&&de>=0)&&(ce<=0&&(V.marker.inclusiveRight&&A.inclusiveLeft?pt(W.to,C)>=0:pt(W.to,C)>0)||ce>=0&&(V.marker.inclusiveRight&&A.inclusiveLeft?pt(W.from,_)<=0:pt(W.from,_)<0)))return!0}}}function Xi(m){for(var x;x=Vs(m);)m=x.find(-1,!0).line;return m}function lo(m,x){var C=Qe(m,x),_=Xi(C);return C==_?x:jt(_)}function dl(m,x){if(x>m.lastLine())return x;var C,_=Qe(m,x);if(!Ht(m,_))return x;for(;C=fi(_);)_=C.find(1,!0).line;return jt(_)+1}function Ht(m,x){var C=ts&&x.markedSpans;if(C){for(var _=void 0,A=0;A<C.length;++A)if((_=C[A]).marker.collapsed&&(_.from==null||!_.marker.widgetNode&&_.from==0&&_.marker.inclusiveLeft&&Z(m,x,_)))return!0}}function Z(m,x,C){if(C.to==null){var _=C.marker.find(1,!0);return Z(m,_.line,Is(_.line.markedSpans,C.marker))}if(C.marker.inclusiveRight&&C.to==x.text.length)return!0;for(var A=void 0,M=0;M<x.markedSpans.length;++M)if((A=x.markedSpans[M]).marker.collapsed&&!A.marker.widgetNode&&A.from==C.to&&(A.to==null||A.to!=C.from)&&(A.marker.inclusiveLeft||C.marker.inclusiveRight)&&Z(m,x,A))return!0}function me(m){for(var x=0,C=(m=Xi(m)).parent,_=0;_<C.lines.length;++_){var A=C.lines[_];if(A==m)break;x+=A.height}for(var M=C.parent;M;M=(C=M).parent)for(var N=0;N<M.children.length;++N){var j=M.children[N];if(j==C)break;x+=j.height}return x}function Be(m){if(m.height==0)return 0;for(var x,C=m.text.length,_=m;x=Vs(_);){var A=x.find(0,!0);_=A.from.line,C+=A.from.ch-A.to.ch}for(_=m;x=fi(_);){var M=x.find(0,!0);C-=_.text.length-M.from.ch,C+=(_=M.to.line).text.length-M.to.ch}return C}function yt(m){var x=m.display,C=m.doc;x.maxLine=Qe(C,C.first),x.maxLineLength=Be(x.maxLine),x.maxLineChanged=!0,C.iter(function(_){var A=Be(_);A>x.maxLineLength&&(x.maxLineLength=A,x.maxLine=_)})}var pn=function(m,x,C){this.text=m,Wi(this,x),this.height=C?C(this):1};function $t(m){m.parent=null,cl(m)}pn.prototype.lineNo=function(){return jt(this)},Qt(pn);var Pn={},hr={};function Tr(m,x){if(!m||/^\s*$/.test(m))return null;var C=x.addModeClass?hr:Pn;return C[m]||(C[m]=m.replace(/\S+/g,"cm-$&"))}function Ln(m,x){var C=te("span",null,null,h?"padding-right: .1px":null),_={pre:te("pre",[C],"CodeMirror-line"),content:C,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};x.measure={};for(var A=0;A<=(x.rest?x.rest.length:0);A++){var M=A?x.rest[A-1]:x.line,N=void 0;_.pos=0,_.addToken=Jr,Ir(m.display.measure)&&(N=Ae(M,m.doc.direction))&&(_.addToken=ar(_.addToken,N)),_.map=[],_s(M,_,_o(m,M,x!=m.display.externalMeasured&&jt(M))),M.styleClasses&&(M.styleClasses.bgClass&&(_.bgClass=he(M.styleClasses.bgClass,_.bgClass||"")),M.styleClasses.textClass&&(_.textClass=he(M.styleClasses.textClass,_.textClass||""))),_.map.length==0&&_.map.push(0,0,_.content.appendChild(Hn(m.display.measure))),A==0?(x.measure.map=_.map,x.measure.cache={}):((x.measure.maps||(x.measure.maps=[])).push(_.map),(x.measure.caches||(x.measure.caches=[])).push({}))}if(h){var j=_.content.lastChild;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(_.content.className="cm-tab-wrap-hack")}return tt(m,"renderLine",m,x.line,_.pre),_.pre.className&&(_.textClass=he(_.pre.className,_.textClass||"")),_}function ki(m){var x=X("span","","cm-invalidchar");return x.title="\\u"+m.charCodeAt(0).toString(16),x.setAttribute("aria-label",x.title),x}function Jr(m,x,C,_,A,M,N){if(x){var j,V=m.splitSpaces?function(ct,gt){if(ct.length>1&&!/  /.test(ct))return ct;for(var bn=gt,Mt="",Gn=0;Gn<ct.length;Gn++){var dn=ct.charAt(Gn);dn!=" "||!bn||Gn!=ct.length-1&&ct.charCodeAt(Gn+1)!=32||(dn=""),Mt+=dn,bn=dn==" "}return Mt}(x,m.trailingSpace):x,W=m.cm.state.specialChars,ce=!1;if(W.test(x)){j=document.createDocumentFragment();for(var de=0;;){W.lastIndex=de;var Ce=W.exec(x),be=Ce?Ce.index-de:x.length-de;if(be){var Ie=document.createTextNode(V.slice(de,de+be));c&&f<9?j.appendChild(X("span",[Ie])):j.appendChild(Ie),m.map.push(m.pos,m.pos+be,Ie),m.col+=be,m.pos+=be}if(!Ce)break;de+=be+1;var Ne=void 0;if(Ce[0]=="	"){var Me=m.cm.options.tabSize,Ve=Me-m.col%Me;(Ne=j.appendChild(X("span",pe(Ve),"cm-tab"))).setAttribute("role","presentation"),Ne.setAttribute("cm-text","	"),m.col+=Ve}else Ce[0]=="\r"||Ce[0]==`
`?((Ne=j.appendChild(X("span",Ce[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",Ce[0]),m.col+=1):((Ne=m.cm.options.specialCharPlaceholder(Ce[0])).setAttribute("cm-text",Ce[0]),c&&f<9?j.appendChild(X("span",[Ne])):j.appendChild(Ne),m.col+=1);m.map.push(m.pos,m.pos+1,Ne),m.pos++}}else m.col+=x.length,j=document.createTextNode(V),m.map.push(m.pos,m.pos+x.length,j),c&&f<9&&(ce=!0),m.pos+=x.length;if(m.trailingSpace=V.charCodeAt(x.length-1)==32,C||_||A||ce||M||N){var nt=C||"";_&&(nt+=_),A&&(nt+=A);var Je=X("span",[j],nt,M);if(N)for(var mt in N)N.hasOwnProperty(mt)&&mt!="style"&&mt!="class"&&Je.setAttribute(mt,N[mt]);return m.content.appendChild(Je)}m.content.appendChild(j)}}function ar(m,x){return function(C,_,A,M,N,j,V){A=A?A+" cm-force-border":"cm-force-border";for(var W=C.pos,ce=W+_.length;;){for(var de=void 0,Ce=0;Ce<x.length&&!((de=x[Ce]).to>W&&de.from<=W);Ce++);if(de.to>=ce)return m(C,_,A,M,N,j,V);m(C,_.slice(0,de.to-W),A,M,null,j,V),M=null,_=_.slice(de.to-W),W=de.to}}}function hi(m,x,C,_){var A=!_&&C.widgetNode;A&&m.map.push(m.pos,m.pos+x,A),!_&&m.cm.display.input.needsContentAttribute&&(A||(A=m.content.appendChild(document.createElement("span"))),A.setAttribute("cm-marker",C.id)),A&&(m.cm.display.input.setUneditable(A),m.content.appendChild(A)),m.pos+=x,m.trailingSpace=!1}function _s(m,x,C){var _=m.markedSpans,A=m.text,M=0;if(_)for(var N,j,V,W,ce,de,Ce,be=A.length,Ie=0,Ne=1,Me="",Ve=0;;){if(Ve==Ie){V=W=ce=j="",Ce=null,de=null,Ve=1/0;for(var nt=[],Je=void 0,mt=0;mt<_.length;++mt){var ct=_[mt],gt=ct.marker;if(gt.type=="bookmark"&&ct.from==Ie&&gt.widgetNode)nt.push(gt);else if(ct.from<=Ie&&(ct.to==null||ct.to>Ie||gt.collapsed&&ct.to==Ie&&ct.from==Ie)){if(ct.to!=null&&ct.to!=Ie&&Ve>ct.to&&(Ve=ct.to,W=""),gt.className&&(V+=" "+gt.className),gt.css&&(j=(j?j+";":"")+gt.css),gt.startStyle&&ct.from==Ie&&(ce+=" "+gt.startStyle),gt.endStyle&&ct.to==Ve&&(Je||(Je=[])).push(gt.endStyle,ct.to),gt.title&&((Ce||(Ce={})).title=gt.title),gt.attributes)for(var bn in gt.attributes)(Ce||(Ce={}))[bn]=gt.attributes[bn];gt.collapsed&&(!de||ms(de.marker,gt)<0)&&(de=ct)}else ct.from>Ie&&Ve>ct.from&&(Ve=ct.from)}if(Je)for(var Mt=0;Mt<Je.length;Mt+=2)Je[Mt+1]==Ve&&(W+=" "+Je[Mt]);if(!de||de.from==Ie)for(var Gn=0;Gn<nt.length;++Gn)hi(x,0,nt[Gn]);if(de&&(de.from||0)==Ie){if(hi(x,(de.to==null?be+1:de.to)-Ie,de.marker,de.from==null),de.to==null)return;de.to==Ie&&(de=!1)}}if(Ie>=be)break;for(var dn=Math.min(be,Ve);;){if(Me){var lr=Ie+Me.length;if(!de){var Br=lr>dn?Me.slice(0,dn-Ie):Me;x.addToken(x,Br,N?N+V:V,ce,Ie+Br.length==Ve?W:"",j,Ce)}if(lr>=dn){Me=Me.slice(dn-Ie),Ie=dn;break}Ie=lr,ce=""}Me=A.slice(M,M=C[Ne++]),N=Tr(C[Ne++],x.cm.options)}}else for(var ur=1;ur<C.length;ur+=2)x.addToken(x,A.slice(M,M=C[ur]),Tr(C[ur+1],x.cm.options))}function Ws(m,x,C){this.line=x,this.rest=function(_){for(var A,M;A=fi(_);)_=A.find(1,!0).line,(M||(M=[])).push(_);return M}(x),this.size=this.rest?jt(ie(this.rest))-C+1:1,this.node=this.text=null,this.hidden=Ht(m,x)}function ji(m,x,C){for(var _,A=[],M=x;M<C;M=_){var N=new Ws(m.doc,Qe(m.doc,M),M);_=M+N.size,A.push(N)}return A}var Ui=null,Eo=null;function Gr(m,x){var C=Oe(m,x);if(C.length){var _,A=Array.prototype.slice.call(arguments,2);Ui?_=Ui.delayedCallbacks:Eo?_=Eo:(_=Eo=[],setTimeout(ma,0));for(var M=function(j){_.push(function(){return C[j].apply(null,A)})},N=0;N<C.length;++N)M(N)}}function ma(){var m=Eo;Eo=null;for(var x=0;x<m.length;++x)m[x]()}function Zu(m,x,C,_){for(var A=0;A<x.changes.length;A++){var M=x.changes[A];M=="text"?Jc(m,x):M=="gutter"?ne(m,x,C,_):M=="class"?Ku(m,x):M=="widget"&&_e(m,x,_)}x.changes=null}function fl(m){return m.node==m.text&&(m.node=X("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),c&&f<8&&(m.node.style.zIndex=2)),m.node}function hl(m,x){var C=m.display.externalMeasured;return C&&C.line==x.line?(m.display.externalMeasured=null,x.measure=C.measure,C.built):Ln(m,x)}function Jc(m,x){var C=x.text.className,_=hl(m,x);x.text==x.node&&(x.node=_.pre),x.text.parentNode.replaceChild(_.pre,x.text),x.text=_.pre,_.bgClass!=x.bgClass||_.textClass!=x.textClass?(x.bgClass=_.bgClass,x.textClass=_.textClass,Ku(m,x)):C&&(x.text.className=C)}function Ku(m,x){(function(_,A){var M=A.bgClass?A.bgClass+" "+(A.line.bgClass||""):A.line.bgClass;if(M&&(M+=" CodeMirror-linebackground"),A.background)M?A.background.className=M:(A.background.parentNode.removeChild(A.background),A.background=null);else if(M){var N=fl(A);A.background=N.insertBefore(X("div",null,M),N.firstChild),_.display.input.setUneditable(A.background)}})(m,x),x.line.wrapClass?fl(x).className=x.line.wrapClass:x.node!=x.text&&(x.node.className="");var C=x.textClass?x.textClass+" "+(x.line.textClass||""):x.line.textClass;x.text.className=C||""}function ne(m,x,C,_){if(x.gutter&&(x.node.removeChild(x.gutter),x.gutter=null),x.gutterBackground&&(x.node.removeChild(x.gutterBackground),x.gutterBackground=null),x.line.gutterClass){var A=fl(x);x.gutterBackground=X("div",null,"CodeMirror-gutter-background "+x.line.gutterClass,"left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px; width: "+_.gutterTotalWidth+"px"),m.display.input.setUneditable(x.gutterBackground),A.insertBefore(x.gutterBackground,x.text)}var M=x.line.gutterMarkers;if(m.options.lineNumbers||M){var N=fl(x),j=x.gutter=X("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?_.fixedPos:-_.gutterTotalWidth)+"px");if(j.setAttribute("aria-hidden","true"),m.display.input.setUneditable(j),N.insertBefore(j,x.text),x.line.gutterClass&&(j.className+=" "+x.line.gutterClass),!m.options.lineNumbers||M&&M["CodeMirror-linenumbers"]||(x.lineNumber=j.appendChild(X("div",Zt(m.options,C),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),M)for(var V=0;V<m.display.gutterSpecs.length;++V){var W=m.display.gutterSpecs[V].className,ce=M.hasOwnProperty(W)&&M[W];ce&&j.appendChild(X("div",[ce],"CodeMirror-gutter-elt","left: "+_.gutterLeft[W]+"px; width: "+_.gutterWidth[W]+"px"))}}}function _e(m,x,C){x.alignable&&(x.alignable=null);for(var _=I("CodeMirror-linewidget"),A=x.node.firstChild,M=void 0;A;A=M)M=A.nextSibling,_.test(A.className)&&x.node.removeChild(A);bt(m,x,C)}function Ye(m,x,C,_){var A=hl(m,x);return x.text=x.node=A.pre,A.bgClass&&(x.bgClass=A.bgClass),A.textClass&&(x.textClass=A.textClass),Ku(m,x),ne(m,x,C,_),bt(m,x,_),x.node}function bt(m,x,C){if(Jt(m,x.line,x,C,!0),x.rest)for(var _=0;_<x.rest.length;_++)Jt(m,x.rest[_],x,C,!1)}function Jt(m,x,C,_,A){if(x.widgets)for(var M=fl(C),N=0,j=x.widgets;N<j.length;++N){var V=j[N],W=X("div",[V.node],"CodeMirror-linewidget"+(V.className?" "+V.className:""));V.handleMouseEvents||W.setAttribute("cm-ignore-events","true"),Ut(V,W,C,_),m.display.input.setUneditable(W),A&&V.above?M.insertBefore(W,C.gutter||C.text):M.appendChild(W),Gr(V,"redraw")}}function Ut(m,x,C,_){if(m.noHScroll){(C.alignable||(C.alignable=[])).push(x);var A=_.wrapperWidth;x.style.left=_.fixedPos+"px",m.coverGutter||(A-=_.gutterTotalWidth,x.style.paddingLeft=_.gutterTotalWidth+"px"),x.style.width=A+"px"}m.coverGutter&&(x.style.zIndex=5,x.style.position="relative",m.noHScroll||(x.style.marginLeft=-_.gutterTotalWidth+"px"))}function Cn(m){if(m.height!=null)return m.height;var x=m.doc.cm;if(!x)return 0;if(!le(document.body,m.node)){var C="position: relative;";m.coverGutter&&(C+="margin-left: -"+x.display.gutters.offsetWidth+"px;"),m.noHScroll&&(C+="width: "+x.display.wrapper.clientWidth+"px;"),Y(x.display.measure,X("div",[m.node],null,C))}return m.height=m.node.parentNode.offsetHeight}function mr(m,x){for(var C=Cr(x);C!=m.wrapper;C=C.parentNode)if(!C||C.nodeType==1&&C.getAttribute("cm-ignore-events")=="true"||C.parentNode==m.sizer&&C!=m.mover)return!0}function Pr(m){return m.lineSpace.offsetTop}function ns(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function Es(m){if(m.cachedPaddingH)return m.cachedPaddingH;var x=Y(m.measure,X("pre","x","CodeMirror-line-like")),C=window.getComputedStyle?window.getComputedStyle(x):x.currentStyle,_={left:parseInt(C.paddingLeft),right:parseInt(C.paddingRight)};return isNaN(_.left)||isNaN(_.right)||(m.cachedPaddingH=_),_}function _i(m){return 50-m.display.nativeBarWidth}function Fi(m){return m.display.scroller.clientWidth-_i(m)-m.display.barWidth}function Te(m){return m.display.scroller.clientHeight-_i(m)-m.display.barHeight}function ut(m,x,C){if(m.line==x)return{map:m.measure.map,cache:m.measure.cache};if(m.rest){for(var _=0;_<m.rest.length;_++)if(m.rest[_]==x)return{map:m.measure.maps[_],cache:m.measure.caches[_]};for(var A=0;A<m.rest.length;A++)if(jt(m.rest[A])>C)return{map:m.measure.maps[A],cache:m.measure.caches[A],before:!0}}}function Wt(m,x,C,_){return Nn(m,gr(m,x),C,_)}function Wn(m,x){if(x>=m.display.viewFrom&&x<m.display.viewTo)return m.display.view[ed(m,x)];var C=m.display.externalMeasured;return C&&x>=C.lineN&&x<C.lineN+C.size?C:void 0}function gr(m,x){var C=jt(x),_=Wn(m,C);_&&!_.text?_=null:_&&_.changes&&(Zu(m,_,C,sy(m)),m.curOp.forceUpdate=!0),_||(_=function(M,N){var j=jt(N=Xi(N)),V=M.display.externalMeasured=new Ws(M.doc,N,j);V.lineN=j;var W=V.built=Ln(M,V);return V.text=W.pre,Y(M.display.lineMeasure,W.pre),V}(m,x));var A=ut(_,x,C);return{line:x,view:_,rect:null,map:A.map,cache:A.cache,before:A.before,hasHeights:!1}}function Nn(m,x,C,_,A){x.before&&(C=-1);var M,N=C+(_||"");return x.cache.hasOwnProperty(N)?M=x.cache[N]:(x.rect||(x.rect=x.view.text.getBoundingClientRect()),x.hasHeights||(function(j,V,W){var ce=j.options.lineWrapping,de=ce&&Fi(j);if(!V.measure.heights||ce&&V.measure.width!=de){var Ce=V.measure.heights=[];if(ce){V.measure.width=de;for(var be=V.text.firstChild.getClientRects(),Ie=0;Ie<be.length-1;Ie++){var Ne=be[Ie],Me=be[Ie+1];Math.abs(Ne.bottom-Me.bottom)>2&&Ce.push((Ne.bottom+Me.top)/2-W.top)}}Ce.push(W.bottom-W.top)}}(m,x.view,x.rect),x.hasHeights=!0),M=function(j,V,W,ce){var de,Ce=O1(V.map,W,ce),be=Ce.node,Ie=Ce.start,Ne=Ce.end,Me=Ce.collapse;if(be.nodeType==3){for(var Ve=0;Ve<4;Ve++){for(;Ie&&Re(V.line.text.charAt(Ce.coverStart+Ie));)--Ie;for(;Ce.coverStart+Ne<Ce.coverEnd&&Re(V.line.text.charAt(Ce.coverStart+Ne));)++Ne;if((de=c&&f<9&&Ie==0&&Ne==Ce.coverEnd-Ce.coverStart?be.parentNode.getBoundingClientRect():EC($(be,Ie,Ne).getClientRects(),ce)).left||de.right||Ie==0)break;Ne=Ie,Ie-=1,Me="right"}c&&f<11&&(de=function(Br,ur){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(In){if(zi!=null)return zi;var zr=Y(In,X("span","x")),Fn=zr.getBoundingClientRect(),Qn=$(zr,0,1).getBoundingClientRect();return zi=Math.abs(Fn.left-Qn.left)>1}(Br))return ur;var Kn=screen.logicalXDPI/screen.deviceXDPI,cr=screen.logicalYDPI/screen.deviceYDPI;return{left:ur.left*Kn,right:ur.right*Kn,top:ur.top*cr,bottom:ur.bottom*cr}}(j.display.measure,de))}else{var nt;Ie>0&&(Me=ce="right"),de=j.options.lineWrapping&&(nt=be.getClientRects()).length>1?nt[ce=="right"?nt.length-1:0]:be.getBoundingClientRect()}if(c&&f<9&&!Ie&&(!de||!de.left&&!de.right)){var Je=be.parentNode.getClientRects()[0];de=Je?{left:Je.left,right:Je.left+hf(j.display),top:Je.top,bottom:Je.bottom}:Na}for(var mt=de.top-V.rect.top,ct=de.bottom-V.rect.top,gt=(mt+ct)/2,bn=V.view.measure.heights,Mt=0;Mt<bn.length-1&&!(gt<bn[Mt]);Mt++);var Gn=Mt?bn[Mt-1]:0,dn=bn[Mt],lr={left:(Me=="right"?de.right:de.left)-V.rect.left,right:(Me=="left"?de.left:de.right)-V.rect.left,top:Gn,bottom:dn};return de.left||de.right||(lr.bogus=!0),j.options.singleCursorHeightPerLine||(lr.rtop=mt,lr.rbottom=ct),lr}(m,x,C,_),M.bogus||(x.cache[N]=M)),{left:M.left,right:M.right,top:A?M.rtop:M.top,bottom:A?M.rbottom:M.bottom}}var qi,Na={left:0,right:0,top:0,bottom:0};function O1(m,x,C){for(var _,A,M,N,j,V,W=0;W<m.length;W+=3)if(j=m[W],V=m[W+1],x<j?(A=0,M=1,N="left"):x<V?M=(A=x-j)+1:(W==m.length-3||x==V&&m[W+3]>x)&&(A=(M=V-j)-1,x>=V&&(N="right")),A!=null){if(_=m[W+2],j==V&&C==(_.insertLeft?"left":"right")&&(N=C),C=="left"&&A==0)for(;W&&m[W-2]==m[W-3]&&m[W-1].insertLeft;)_=m[2+(W-=3)],N="left";if(C=="right"&&A==V-j)for(;W<m.length-3&&m[W+3]==m[W+4]&&!m[W+5].insertLeft;)_=m[(W+=3)+2],N="right";break}return{node:_,start:A,end:M,collapse:N,coverStart:j,coverEnd:V}}function EC(m,x){var C=Na;if(x=="left")for(var _=0;_<m.length&&(C=m[_]).left==C.right;_++);else for(var A=m.length-1;A>=0&&(C=m[A]).left==C.right;A--);return C}function M1(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var x=0;x<m.rest.length;x++)m.measure.caches[x]={}}function I1(m){m.display.externalMeasure=null,q(m.display.lineMeasure);for(var x=0;x<m.display.view.length;x++)M1(m.display.view[x])}function Fh(m){I1(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function $1(m){return g&&T?-(m.body.getBoundingClientRect().left-parseInt(getComputedStyle(m.body).marginLeft)):m.defaultView.pageXOffset||(m.documentElement||m.body).scrollLeft}function P1(m){return g&&T?-(m.body.getBoundingClientRect().top-parseInt(getComputedStyle(m.body).marginTop)):m.defaultView.pageYOffset||(m.documentElement||m.body).scrollTop}function ty(m){var x=Xi(m).widgets,C=0;if(x)for(var _=0;_<x.length;++_)x[_].above&&(C+=Cn(x[_]));return C}function Lm(m,x,C,_,A){if(!A){var M=ty(x);C.top+=M,C.bottom+=M}if(_=="line")return C;_||(_="local");var N=me(x);if(_=="local"?N+=Pr(m.display):N-=m.display.viewOffset,_=="page"||_=="window"){var j=m.display.lineSpace.getBoundingClientRect();N+=j.top+(_=="window"?0:P1(ze(m)));var V=j.left+(_=="window"?0:$1(ze(m)));C.left+=V,C.right+=V}return C.top+=N,C.bottom+=N,C}function N1(m,x,C){if(C=="div")return x;var _=x.left,A=x.top;if(C=="page")_-=$1(ze(m)),A-=P1(ze(m));else if(C=="local"||!C){var M=m.display.sizer.getBoundingClientRect();_+=M.left,A+=M.top}var N=m.display.lineSpace.getBoundingClientRect();return{left:_-N.left,top:A-N.top}}function Rm(m,x,C,_,A){return _||(_=Qe(m.doc,x.line)),Lm(m,_,Wt(m,_,x.ch,A),C)}function pl(m,x,C,_,A,M){function N(Ie,Ne){var Me=Nn(m,A,Ie,Ne?"right":"left",M);return Ne?Me.left=Me.right:Me.right=Me.left,Lm(m,_,Me,C)}_=_||Qe(m.doc,x.line),A||(A=gr(m,_));var j=Ae(_,m.doc.direction),V=x.ch,W=x.sticky;if(V>=_.text.length?(V=_.text.length,W="before"):V<=0&&(V=0,W="after"),!j)return N(W=="before"?V-1:V,W=="before");function ce(Ie,Ne,Me){return N(Me?Ie-1:Ie,j[Ne].level==1!=Me)}var de=ae(j,V,W),Ce=se,be=ce(V,de,W=="before");return Ce!=null&&(be.other=ce(V,Ce,W!="before")),be}function B1(m,x){var C=0;x=qt(m.doc,x),m.options.lineWrapping||(C=hf(m.display)*x.ch);var _=Qe(m.doc,x.line),A=me(_)+Pr(m.display);return{left:C,right:C,top:A,bottom:A+_.height}}function ny(m,x,C,_,A){var M=Xe(m,x,C);return M.xRel=A,_&&(M.outside=_),M}function ry(m,x,C){var _=m.doc;if((C+=m.display.viewOffset)<0)return ny(_.first,0,null,-1,-1);var A=Sr(_,C),M=_.first+_.size-1;if(A>M)return ny(_.first+_.size-1,Qe(_,M).text.length,null,1,1);x<0&&(x=0);for(var N=Qe(_,A);;){var j=CC(m,N,A,x,C),V=Pa(N,j.ch+(j.xRel>0||j.outside>0?1:0));if(!V)return j;var W=V.find(1);if(W.line==A)return W;N=Qe(_,A=W.line)}}function z1(m,x,C,_){_-=ty(x);var A=x.text.length,M=Q(function(N){return Nn(m,C,N-1).bottom<=_},A,0);return{begin:M,end:A=Q(function(N){return Nn(m,C,N).top>_},M,A)}}function j1(m,x,C,_){return C||(C=gr(m,x)),z1(m,x,C,Lm(m,x,Nn(m,C,_),"line").top)}function iy(m,x,C,_){return!(m.bottom<=C)&&(m.top>C||(_?m.left:m.right)>x)}function CC(m,x,C,_,A){A-=me(x);var M=gr(m,x),N=ty(x),j=0,V=x.text.length,W=!0,ce=Ae(x,m.doc.direction);if(ce){var de=(m.options.lineWrapping?AC:SC)(m,x,C,M,ce,_,A);j=(W=de.level!=1)?de.from:de.to-1,V=W?de.to:de.from-1}var Ce,be,Ie=null,Ne=null,Me=Q(function(ct){var gt=Nn(m,M,ct);return gt.top+=N,gt.bottom+=N,!!iy(gt,_,A,!1)&&(gt.top<=A&&gt.left<=_&&(Ie=ct,Ne=gt),!0)},j,V),Ve=!1;if(Ne){var nt=_-Ne.left<Ne.right-_,Je=nt==W;Me=Ie+(Je?0:1),be=Je?"after":"before",Ce=nt?Ne.left:Ne.right}else{W||Me!=V&&Me!=j||Me++,be=Me==0?"after":Me==x.text.length?"before":Nn(m,M,Me-(W?1:0)).bottom+N<=A==W?"after":"before";var mt=pl(m,Xe(C,Me,be),"line",x,M);Ce=mt.left,Ve=A<mt.top?-1:A>=mt.bottom?1:0}return ny(C,Me=P(x.text,Me,1),be,Ve,_-Ce)}function SC(m,x,C,_,A,M,N){var j=Q(function(de){var Ce=A[de],be=Ce.level!=1;return iy(pl(m,Xe(C,be?Ce.to:Ce.from,be?"before":"after"),"line",x,_),M,N,!0)},0,A.length-1),V=A[j];if(j>0){var W=V.level!=1,ce=pl(m,Xe(C,W?V.from:V.to,W?"after":"before"),"line",x,_);iy(ce,M,N,!0)&&ce.top>N&&(V=A[j-1])}return V}function AC(m,x,C,_,A,M,N){var j=z1(m,x,_,N),V=j.begin,W=j.end;/\s/.test(x.text.charAt(W-1))&&W--;for(var ce=null,de=null,Ce=0;Ce<A.length;Ce++){var be=A[Ce];if(!(be.from>=W||be.to<=V)){var Ie=Nn(m,_,be.level!=1?Math.min(W,be.to)-1:Math.max(V,be.from)).right,Ne=Ie<M?M-Ie+1e9:Ie-M;(!ce||de>Ne)&&(ce=be,de=Ne)}}return ce||(ce=A[A.length-1]),ce.from<V&&(ce={from:V,to:ce.to,level:ce.level}),ce.to>W&&(ce={from:ce.from,to:W,level:ce.level}),ce}function ff(m){if(m.cachedTextHeight!=null)return m.cachedTextHeight;if(qi==null){qi=X("pre",null,"CodeMirror-line-like");for(var x=0;x<49;++x)qi.appendChild(document.createTextNode("x")),qi.appendChild(X("br"));qi.appendChild(document.createTextNode("x"))}Y(m.measure,qi);var C=qi.offsetHeight/50;return C>3&&(m.cachedTextHeight=C),q(m.measure),C||1}function hf(m){if(m.cachedCharWidth!=null)return m.cachedCharWidth;var x=X("span","xxxxxxxxxx"),C=X("pre",[x],"CodeMirror-line-like");Y(m.measure,C);var _=x.getBoundingClientRect(),A=(_.right-_.left)/10;return A>2&&(m.cachedCharWidth=A),A||10}function sy(m){for(var x=m.display,C={},_={},A=x.gutters.clientLeft,M=x.gutters.firstChild,N=0;M;M=M.nextSibling,++N){var j=m.display.gutterSpecs[N].className;C[j]=M.offsetLeft+M.clientLeft+A,_[j]=M.clientWidth}return{fixedPos:oy(x),gutterTotalWidth:x.gutters.offsetWidth,gutterLeft:C,gutterWidth:_,wrapperWidth:x.wrapper.clientWidth}}function oy(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function U1(m){var x=ff(m.display),C=m.options.lineWrapping,_=C&&Math.max(5,m.display.scroller.clientWidth/hf(m.display)-3);return function(A){if(Ht(m.doc,A))return 0;var M=0;if(A.widgets)for(var N=0;N<A.widgets.length;N++)A.widgets[N].height&&(M+=A.widgets[N].height);return C?M+(Math.ceil(A.text.length/_)||1)*x:M+x}}function ay(m){var x=m.doc,C=U1(m);x.iter(function(_){var A=C(_);A!=_.height&&zt(_,A)})}function Qc(m,x,C,_){var A=m.display;if(!C&&Cr(x).getAttribute("cm-not-content")=="true")return null;var M,N,j=A.lineSpace.getBoundingClientRect();try{M=x.clientX-j.left,N=x.clientY-j.top}catch{return null}var V,W=ry(m,M,N);if(_&&W.xRel>0&&(V=Qe(m.doc,W.line).text).length==W.ch){var ce=$e(V,V.length,m.options.tabSize)-V.length;W=Xe(W.line,Math.max(0,Math.round((M-Es(m.display).left)/hf(m.display))-ce))}return W}function ed(m,x){if(x>=m.display.viewTo||(x-=m.display.viewFrom)<0)return null;for(var C=m.display.view,_=0;_<C.length;_++)if((x-=C[_].size)<0)return _}function Co(m,x,C,_){x==null&&(x=m.doc.first),C==null&&(C=m.doc.first+m.doc.size),_||(_=0);var A=m.display;if(_&&C<A.viewTo&&(A.updateLineNumbers==null||A.updateLineNumbers>x)&&(A.updateLineNumbers=x),m.curOp.viewChanged=!0,x>=A.viewTo)ts&&lo(m.doc,x)<A.viewTo&&Qu(m);else if(C<=A.viewFrom)ts&&dl(m.doc,C+_)>A.viewFrom?Qu(m):(A.viewFrom+=_,A.viewTo+=_);else if(x<=A.viewFrom&&C>=A.viewTo)Qu(m);else if(x<=A.viewFrom){var M=Fm(m,C,C+_,1);M?(A.view=A.view.slice(M.index),A.viewFrom=M.lineN,A.viewTo+=_):Qu(m)}else if(C>=A.viewTo){var N=Fm(m,x,x,-1);N?(A.view=A.view.slice(0,N.index),A.viewTo=N.lineN):Qu(m)}else{var j=Fm(m,x,x,-1),V=Fm(m,C,C+_,1);j&&V?(A.view=A.view.slice(0,j.index).concat(ji(m,j.lineN,V.lineN)).concat(A.view.slice(V.index)),A.viewTo+=_):Qu(m)}var W=A.externalMeasured;W&&(C<W.lineN?W.lineN+=_:x<W.lineN+W.size&&(A.externalMeasured=null))}function Ju(m,x,C){m.curOp.viewChanged=!0;var _=m.display,A=m.display.externalMeasured;if(A&&x>=A.lineN&&x<A.lineN+A.size&&(_.externalMeasured=null),!(x<_.viewFrom||x>=_.viewTo)){var M=_.view[ed(m,x)];if(M.node!=null){var N=M.changes||(M.changes=[]);Pe(N,C)==-1&&N.push(C)}}}function Qu(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function Fm(m,x,C,_){var A,M=ed(m,x),N=m.display.view;if(!ts||C==m.doc.first+m.doc.size)return{index:M,lineN:C};for(var j=m.display.viewFrom,V=0;V<M;V++)j+=N[V].size;if(j!=x){if(_>0){if(M==N.length-1)return null;A=j+N[M].size-x,M++}else A=j-x;x+=A,C+=A}for(;lo(m.doc,C)!=C;){if(M==(_<0?0:N.length-1))return null;C+=_*N[M-(_<0?1:0)].size,M+=_}return{index:M,lineN:C}}function q1(m){for(var x=m.display.view,C=0,_=0;_<x.length;_++){var A=x[_];A.hidden||A.node&&!A.changes||++C}return C}function Oh(m){m.display.input.showSelection(m.display.input.prepareSelection())}function H1(m,x){x===void 0&&(x=!0);var C=m.doc,_={},A=_.cursors=document.createDocumentFragment(),M=_.selection=document.createDocumentFragment(),N=m.options.$customCursor;N&&(x=!0);for(var j=0;j<C.sel.ranges.length;j++)if(x||j!=C.sel.primIndex){var V=C.sel.ranges[j];if(!(V.from().line>=m.display.viewTo||V.to().line<m.display.viewFrom)){var W=V.empty();if(N){var ce=N(m,V);ce&&ly(m,ce,A)}else(W||m.options.showCursorWhenSelecting)&&ly(m,V.head,A);W||kC(m,V,M)}}return _}function ly(m,x,C){var _=pl(m,x,"div",null,null,!m.options.singleCursorHeightPerLine),A=C.appendChild(X("div","","CodeMirror-cursor"));if(A.style.left=_.left+"px",A.style.top=_.top+"px",A.style.height=Math.max(0,_.bottom-_.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var M=Rm(m,x,"div",null,null),N=M.right-M.left;A.style.width=(N>0?N:m.defaultCharWidth())+"px"}if(_.other){var j=C.appendChild(X("div","","CodeMirror-cursor CodeMirror-secondarycursor"));j.style.display="",j.style.left=_.other.left+"px",j.style.top=_.other.top+"px",j.style.height=.85*(_.other.bottom-_.other.top)+"px"}}function Om(m,x){return m.top-x.top||m.left-x.left}function kC(m,x,C){var _=m.display,A=m.doc,M=document.createDocumentFragment(),N=Es(m.display),j=N.left,V=Math.max(_.sizerWidth,Fi(m)-_.sizer.offsetLeft)-N.right,W=A.direction=="ltr";function ce(Je,mt,ct,gt){mt<0&&(mt=0),mt=Math.round(mt),gt=Math.round(gt),M.appendChild(X("div",null,"CodeMirror-selected","position: absolute; left: "+Je+`px;
                             top: `+mt+"px; width: "+(ct??V-Je)+`px;
                             height: `+(gt-mt)+"px"))}function de(Je,mt,ct){var gt,bn,Mt=Qe(A,Je),Gn=Mt.text.length;function dn(ur,Kn){return Rm(m,Xe(Je,ur),"div",Mt,Kn)}function lr(ur,Kn,cr){var In=j1(m,Mt,null,ur),zr=Kn=="ltr"==(cr=="after")?"left":"right";return dn(cr=="after"?In.begin:In.end-(/\s/.test(Mt.text.charAt(In.end-1))?2:1),zr)[zr]}var Br=Ae(Mt,A.direction);return function(ur,Kn,cr,In){if(!ur)return In(Kn,cr,"ltr",0);for(var zr=!1,Fn=0;Fn<ur.length;++Fn){var Qn=ur[Fn];(Qn.from<cr&&Qn.to>Kn||Kn==cr&&Qn.to==Kn)&&(In(Math.max(Qn.from,Kn),Math.min(Qn.to,cr),Qn.level==1?"rtl":"ltr",Fn),zr=!0)}zr||In(Kn,cr,"ltr")}(Br,mt||0,ct??Gn,function(ur,Kn,cr,In){var zr=cr=="ltr",Fn=dn(ur,zr?"left":"right"),Qn=dn(Kn-1,zr?"right":"left"),Bn=mt==null&&ur==0,vr=ct==null&&Kn==Gn,co=In==0,jr=!Br||In==Br.length-1;if(Qn.top-Fn.top<=3){var Xs=(W?vr:Bn)&&jr,Zs=(W?Bn:vr)&&co?j:(zr?Fn:Qn).left,Ti=Xs?V:(zr?Qn:Fn).right;ce(Zs,Fn.top,Ti-Zs,Fn.bottom)}else{var fo,Ba,$s,yl;zr?(fo=W&&Bn&&co?j:Fn.left,Ba=W?V:lr(ur,cr,"before"),$s=W?j:lr(Kn,cr,"after"),yl=W&&vr&&jr?V:Qn.right):(fo=W?lr(ur,cr,"before"):j,Ba=!W&&Bn&&co?V:Fn.right,$s=!W&&vr&&jr?j:Qn.left,yl=W?lr(Kn,cr,"after"):V),ce(fo,Fn.top,Ba-fo,Fn.bottom),Fn.bottom<Qn.top&&ce(j,Fn.bottom,null,Qn.top),ce($s,Qn.top,yl-$s,Qn.bottom)}(!gt||Om(Fn,gt)<0)&&(gt=Fn),Om(Qn,gt)<0&&(gt=Qn),(!bn||Om(Fn,bn)<0)&&(bn=Fn),Om(Qn,bn)<0&&(bn=Qn)}),{start:gt,end:bn}}var Ce=x.from(),be=x.to();if(Ce.line==be.line)de(Ce.line,Ce.ch,be.ch);else{var Ie=Qe(A,Ce.line),Ne=Qe(A,be.line),Me=Xi(Ie)==Xi(Ne),Ve=de(Ce.line,Ce.ch,Me?Ie.text.length+1:null).end,nt=de(be.line,Me?0:null,be.ch).start;Me&&(Ve.top<nt.top-2?(ce(Ve.right,Ve.top,null,Ve.bottom),ce(j,nt.top,nt.left,nt.bottom)):ce(Ve.right,Ve.top,nt.left-Ve.right,Ve.bottom)),Ve.bottom<nt.top&&ce(j,Ve.bottom,null,nt.top)}C.appendChild(M)}function uy(m){if(m.state.focused){var x=m.display;clearInterval(x.blinker);var C=!0;x.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?x.blinker=setInterval(function(){m.hasFocus()||pf(m),x.cursorDiv.style.visibility=(C=!C)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(x.cursorDiv.style.visibility="hidden")}}function G1(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||dy(m))}function cy(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&pf(m))},100)}function dy(m,x){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),m.options.readOnly!="nocursor"&&(m.state.focused||(tt(m,"focus",m,x),m.state.focused=!0,z(m.display.wrapper,"CodeMirror-focused"),m.curOp||m.display.selForContextMenu==m.doc.sel||(m.display.input.reset(),h&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),uy(m))}function pf(m,x){m.state.delayingBlurEvent||(m.state.focused&&(tt(m,"blur",m,x),m.state.focused=!1,U(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function Mm(m){for(var x=m.display,C=x.lineDiv.offsetTop,_=Math.max(0,x.scroller.getBoundingClientRect().top),A=x.lineDiv.getBoundingClientRect().top,M=0,N=0;N<x.view.length;N++){var j=x.view[N],V=m.options.lineWrapping,W=void 0,ce=0;if(!j.hidden){if(A+=j.line.height,c&&f<8){var de=j.node.offsetTop+j.node.offsetHeight;W=de-C,C=de}else{var Ce=j.node.getBoundingClientRect();W=Ce.bottom-Ce.top,!V&&j.text.firstChild&&(ce=j.text.firstChild.getBoundingClientRect().right-Ce.left-1)}var be=j.line.height-W;if((be>.005||be<-.005)&&(A<_&&(M-=be),zt(j.line,W),V1(j.line),j.rest))for(var Ie=0;Ie<j.rest.length;Ie++)V1(j.rest[Ie]);if(ce>m.display.sizerWidth){var Ne=Math.ceil(ce/hf(m.display));Ne>m.display.maxLineLength&&(m.display.maxLineLength=Ne,m.display.maxLine=j.line,m.display.maxLineChanged=!0)}}}Math.abs(M)>2&&(x.scroller.scrollTop+=M)}function V1(m){if(m.widgets)for(var x=0;x<m.widgets.length;++x){var C=m.widgets[x],_=C.node.parentNode;_&&(C.height=_.offsetHeight)}}function Im(m,x,C){var _=C&&C.top!=null?Math.max(0,C.top):m.scroller.scrollTop;_=Math.floor(_-Pr(m));var A=C&&C.bottom!=null?C.bottom:_+m.wrapper.clientHeight,M=Sr(x,_),N=Sr(x,A);if(C&&C.ensure){var j=C.ensure.from.line,V=C.ensure.to.line;j<M?(M=j,N=Sr(x,me(Qe(x,j))+m.wrapper.clientHeight)):Math.min(V,x.lastLine())>=N&&(M=Sr(x,me(Qe(x,V))-m.wrapper.clientHeight),N=V)}return{from:M,to:Math.max(N,M+1)}}function fy(m,x){var C=m.display,_=ff(m.display);x.top<0&&(x.top=0);var A=m.curOp&&m.curOp.scrollTop!=null?m.curOp.scrollTop:C.scroller.scrollTop,M=Te(m),N={};x.bottom-x.top>M&&(x.bottom=x.top+M);var j=m.doc.height+ns(C),V=x.top<_,W=x.bottom>j-_;if(x.top<A)N.scrollTop=V?0:x.top;else if(x.bottom>A+M){var ce=Math.min(x.top,(W?j:x.bottom)-M);ce!=A&&(N.scrollTop=ce)}var de=m.options.fixedGutter?0:C.gutters.offsetWidth,Ce=m.curOp&&m.curOp.scrollLeft!=null?m.curOp.scrollLeft:C.scroller.scrollLeft-de,be=Fi(m)-C.gutters.offsetWidth,Ie=x.right-x.left>be;return Ie&&(x.right=x.left+be),x.left<10?N.scrollLeft=0:x.left<Ce?N.scrollLeft=Math.max(0,x.left+de-(Ie?0:10)):x.right>be+Ce-3&&(N.scrollLeft=x.right+(Ie?0:10)-be),N}function hy(m,x){x!=null&&($m(m),m.curOp.scrollTop=(m.curOp.scrollTop==null?m.doc.scrollTop:m.curOp.scrollTop)+x)}function mf(m){$m(m);var x=m.getCursor();m.curOp.scrollToPos={from:x,to:x,margin:m.options.cursorScrollMargin}}function Mh(m,x,C){x==null&&C==null||$m(m),x!=null&&(m.curOp.scrollLeft=x),C!=null&&(m.curOp.scrollTop=C)}function $m(m){var x=m.curOp.scrollToPos;x&&(m.curOp.scrollToPos=null,W1(m,B1(m,x.from),B1(m,x.to),x.margin))}function W1(m,x,C,_){var A=fy(m,{left:Math.min(x.left,C.left),top:Math.min(x.top,C.top)-_,right:Math.max(x.right,C.right),bottom:Math.max(x.bottom,C.bottom)+_});Mh(m,A.scrollLeft,A.scrollTop)}function Ih(m,x){Math.abs(m.doc.scrollTop-x)<2||(a||my(m,{top:x}),Y1(m,x,!0),a&&my(m),Nh(m,100))}function Y1(m,x,C){x=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,x)),(m.display.scroller.scrollTop!=x||C)&&(m.doc.scrollTop=x,m.display.scrollbars.setScrollTop(x),m.display.scroller.scrollTop!=x&&(m.display.scroller.scrollTop=x))}function td(m,x,C,_){x=Math.max(0,Math.min(x,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),(C?x==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-x)<2)&&!_||(m.doc.scrollLeft=x,Q1(m),m.display.scroller.scrollLeft!=x&&(m.display.scroller.scrollLeft=x),m.display.scrollbars.setScrollLeft(x))}function $h(m){var x=m.display,C=x.gutters.offsetWidth,_=Math.round(m.doc.height+ns(m.display));return{clientHeight:x.scroller.clientHeight,viewHeight:x.wrapper.clientHeight,scrollWidth:x.scroller.scrollWidth,clientWidth:x.scroller.clientWidth,viewWidth:x.wrapper.clientWidth,barLeft:m.options.fixedGutter?C:0,docHeight:_,scrollHeight:_+_i(m)+x.barHeight,nativeBarWidth:x.nativeBarWidth,gutterWidth:C}}var nd=function(m,x,C){this.cm=C;var _=this.vert=X("div",[X("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),A=this.horiz=X("div",[X("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");_.tabIndex=A.tabIndex=-1,m(_),m(A),De(_,"scroll",function(){_.clientHeight&&x(_.scrollTop,"vertical")}),De(A,"scroll",function(){A.clientWidth&&x(A.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&f<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};nd.prototype.update=function(m){var x=m.scrollWidth>m.clientWidth+1,C=m.scrollHeight>m.clientHeight+1,_=m.nativeBarWidth;if(C){this.vert.style.display="block",this.vert.style.bottom=x?_+"px":"0";var A=m.viewHeight-(x?_:0);this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+A)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(x){this.horiz.style.display="block",this.horiz.style.right=C?_+"px":"0",this.horiz.style.left=m.barLeft+"px";var M=m.viewWidth-m.barLeft-(C?_:0);this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+M)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&m.clientHeight>0&&(_==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:C?_:0,bottom:x?_:0}},nd.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},nd.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},nd.prototype.zeroWidthHack=function(){var m=k&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=m,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qe,this.disableVert=new qe},nd.prototype.enableZeroWidthBar=function(m,x,C){m.style.visibility="",x.set(1e3,function _(){var A=m.getBoundingClientRect();(C=="vert"?document.elementFromPoint(A.right-1,(A.top+A.bottom)/2):document.elementFromPoint((A.right+A.left)/2,A.bottom-1))!=m?m.style.visibility="hidden":x.set(1e3,_)})},nd.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var Ph=function(){};function gf(m,x){x||(x=$h(m));var C=m.display.barWidth,_=m.display.barHeight;X1(m,x);for(var A=0;A<4&&C!=m.display.barWidth||_!=m.display.barHeight;A++)C!=m.display.barWidth&&m.options.lineWrapping&&Mm(m),X1(m,$h(m)),C=m.display.barWidth,_=m.display.barHeight}function X1(m,x){var C=m.display,_=C.scrollbars.update(x);C.sizer.style.paddingRight=(C.barWidth=_.right)+"px",C.sizer.style.paddingBottom=(C.barHeight=_.bottom)+"px",C.heightForcer.style.borderBottom=_.bottom+"px solid transparent",_.right&&_.bottom?(C.scrollbarFiller.style.display="block",C.scrollbarFiller.style.height=_.bottom+"px",C.scrollbarFiller.style.width=_.right+"px"):C.scrollbarFiller.style.display="",_.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(C.gutterFiller.style.display="block",C.gutterFiller.style.height=_.bottom+"px",C.gutterFiller.style.width=x.gutterWidth+"px"):C.gutterFiller.style.display=""}Ph.prototype.update=function(){return{bottom:0,right:0}},Ph.prototype.setScrollLeft=function(){},Ph.prototype.setScrollTop=function(){},Ph.prototype.clear=function(){};var Z1={native:nd,null:Ph};function K1(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&U(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new Z1[m.options.scrollbarStyle](function(x){m.display.wrapper.insertBefore(x,m.display.scrollbarFiller),De(x,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),x.setAttribute("cm-not-content","true")},function(x,C){C=="horizontal"?td(m,x):Ih(m,x)},m),m.display.scrollbars.addClass&&z(m.display.wrapper,m.display.scrollbars.addClass)}var TC=0;function rd(m){var x;m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++TC,markArrays:null},x=m.curOp,Ui?Ui.ops.push(x):x.ownsGroup=Ui={ops:[x],delayedCallbacks:[]}}function id(m){var x=m.curOp;x&&function(C,_){var A=C.ownsGroup;if(A)try{(function(M){var N=M.delayedCallbacks,j=0;do{for(;j<N.length;j++)N[j].call(null);for(var V=0;V<M.ops.length;V++){var W=M.ops[V];if(W.cursorActivityHandlers)for(;W.cursorActivityCalled<W.cursorActivityHandlers.length;)W.cursorActivityHandlers[W.cursorActivityCalled++].call(null,W.cm)}}while(j<N.length)})(A)}finally{Ui=null,_(A)}}(x,function(C){for(var _=0;_<C.ops.length;_++)C.ops[_].cm.curOp=null;(function(A){for(var M=A.ops,N=0;N<M.length;N++)DC(M[N]);for(var j=0;j<M.length;j++)LC(M[j]);for(var V=0;V<M.length;V++)RC(M[V]);for(var W=0;W<M.length;W++)FC(M[W]);for(var ce=0;ce<M.length;ce++)OC(M[ce])})(C)})}function DC(m){var x=m.cm,C=x.display;(function(_){var A=_.display;!A.scrollbarsClipped&&A.scroller.offsetWidth&&(A.nativeBarWidth=A.scroller.offsetWidth-A.scroller.clientWidth,A.heightForcer.style.height=_i(_)+"px",A.sizer.style.marginBottom=-A.nativeBarWidth+"px",A.sizer.style.borderRightWidth=_i(_)+"px",A.scrollbarsClipped=!0)})(x),m.updateMaxLine&&yt(x),m.mustUpdate=m.viewChanged||m.forceUpdate||m.scrollTop!=null||m.scrollToPos&&(m.scrollToPos.from.line<C.viewFrom||m.scrollToPos.to.line>=C.viewTo)||C.maxLineChanged&&x.options.lineWrapping,m.update=m.mustUpdate&&new Pm(x,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function LC(m){m.updatedDisplay=m.mustUpdate&&py(m.cm,m.update)}function RC(m){var x=m.cm,C=x.display;m.updatedDisplay&&Mm(x),m.barMeasure=$h(x),C.maxLineChanged&&!x.options.lineWrapping&&(m.adjustWidthTo=Wt(x,C.maxLine,C.maxLine.text.length).left+3,x.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(C.scroller.clientWidth,C.sizer.offsetLeft+m.adjustWidthTo+_i(x)+x.display.barWidth),m.maxScrollLeft=Math.max(0,C.sizer.offsetLeft+m.adjustWidthTo-Fi(x))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=C.input.prepareSelection())}function FC(m){var x=m.cm;m.adjustWidthTo!=null&&(x.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<x.doc.scrollLeft&&td(x,Math.min(x.display.scroller.scrollLeft,m.maxScrollLeft),!0),x.display.maxLineChanged=!1);var C=m.focus&&m.focus==ee(ze(x));m.preparedSelection&&x.display.input.showSelection(m.preparedSelection,C),(m.updatedDisplay||m.startHeight!=x.doc.height)&&gf(x,m.barMeasure),m.updatedDisplay&&yy(x,m.barMeasure),m.selectionChanged&&uy(x),x.state.focused&&m.updateInput&&x.display.input.reset(m.typing),C&&G1(m.cm)}function OC(m){var x=m.cm,C=x.display,_=x.doc;if(m.updatedDisplay&&J1(x,m.update),C.wheelStartX==null||m.scrollTop==null&&m.scrollLeft==null&&!m.scrollToPos||(C.wheelStartX=C.wheelStartY=null),m.scrollTop!=null&&Y1(x,m.scrollTop,m.forceScroll),m.scrollLeft!=null&&td(x,m.scrollLeft,!0,!0),m.scrollToPos){var A=function(W,ce,de,Ce){var be;Ce==null&&(Ce=0),W.options.lineWrapping||ce!=de||(de=ce.sticky=="before"?Xe(ce.line,ce.ch+1,"before"):ce,ce=ce.ch?Xe(ce.line,ce.sticky=="before"?ce.ch-1:ce.ch,"after"):ce);for(var Ie=0;Ie<5;Ie++){var Ne=!1,Me=pl(W,ce),Ve=de&&de!=ce?pl(W,de):Me,nt=fy(W,be={left:Math.min(Me.left,Ve.left),top:Math.min(Me.top,Ve.top)-Ce,right:Math.max(Me.left,Ve.left),bottom:Math.max(Me.bottom,Ve.bottom)+Ce}),Je=W.doc.scrollTop,mt=W.doc.scrollLeft;if(nt.scrollTop!=null&&(Ih(W,nt.scrollTop),Math.abs(W.doc.scrollTop-Je)>1&&(Ne=!0)),nt.scrollLeft!=null&&(td(W,nt.scrollLeft),Math.abs(W.doc.scrollLeft-mt)>1&&(Ne=!0)),!Ne)break}return be}(x,qt(_,m.scrollToPos.from),qt(_,m.scrollToPos.to),m.scrollToPos.margin);(function(W,ce){if(!ft(W,"scrollCursorIntoView")){var de=W.display,Ce=de.sizer.getBoundingClientRect(),be=null,Ie=de.wrapper.ownerDocument;if(ce.top+Ce.top<0?be=!0:ce.bottom+Ce.top>(Ie.defaultView.innerHeight||Ie.documentElement.clientHeight)&&(be=!1),be!=null&&!E){var Ne=X("div","",null,`position: absolute;
                         top: `+(ce.top-de.viewOffset-Pr(W.display))+`px;
                         height: `+(ce.bottom-ce.top+_i(W)+de.barHeight)+`px;
                         left: `+ce.left+"px; width: "+Math.max(2,ce.right-ce.left)+"px;");W.display.lineSpace.appendChild(Ne),Ne.scrollIntoView(be),W.display.lineSpace.removeChild(Ne)}}})(x,A)}var M=m.maybeHiddenMarkers,N=m.maybeUnhiddenMarkers;if(M)for(var j=0;j<M.length;++j)M[j].lines.length||tt(M[j],"hide");if(N)for(var V=0;V<N.length;++V)N[V].lines.length&&tt(N[V],"unhide");C.wrapper.offsetHeight&&(_.scrollTop=x.display.scroller.scrollTop),m.changeObjs&&tt(x,"changes",x,m.changeObjs),m.update&&m.update.finish()}function Ho(m,x){if(m.curOp)return x();rd(m);try{return x()}finally{id(m)}}function Cs(m,x){return function(){if(m.curOp)return x.apply(m,arguments);rd(m);try{return x.apply(m,arguments)}finally{id(m)}}}function uo(m){return function(){if(this.curOp)return m.apply(this,arguments);rd(this);try{return m.apply(this,arguments)}finally{id(this)}}}function Ss(m){return function(){var x=this.cm;if(!x||x.curOp)return m.apply(this,arguments);rd(x);try{return m.apply(this,arguments)}finally{id(x)}}}function Nh(m,x){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(x,je(MC,m))}function MC(m){var x=m.doc;if(!(x.highlightFrontier>=m.display.viewTo)){var C=+new Date+m.options.workTime,_=io(m,x.highlightFrontier),A=[];x.iter(_.line,Math.min(x.first+x.size,m.display.viewTo+500),function(M){if(_.line>=m.display.viewFrom){var N=M.styles,j=M.text.length>m.options.maxHighlightLength?Et(x.mode,_.state):null,V=qs(m,M,_,!0);j&&(_.state=j),M.styles=V.styles;var W=M.styleClasses,ce=V.classes;ce?M.styleClasses=ce:W&&(M.styleClasses=null);for(var de=!N||N.length!=M.styles.length||W!=ce&&(!W||!ce||W.bgClass!=ce.bgClass||W.textClass!=ce.textClass),Ce=0;!de&&Ce<N.length;++Ce)de=N[Ce]!=M.styles[Ce];de&&A.push(_.line),M.stateAfter=_.save(),_.nextLine()}else M.text.length<=m.options.maxHighlightLength&&jo(m,M.text,_),M.stateAfter=_.line%5==0?_.save():null,_.nextLine();if(+new Date>C)return Nh(m,m.options.workDelay),!0}),x.highlightFrontier=_.line,x.modeFrontier=Math.max(x.modeFrontier,_.line),A.length&&Ho(m,function(){for(var M=0;M<A.length;M++)Ju(m,A[M],"text")})}}var Pm=function(m,x,C){var _=m.display;this.viewport=x,this.visible=Im(_,m.doc,x),this.editorIsHidden=!_.wrapper.offsetWidth,this.wrapperHeight=_.wrapper.clientHeight,this.wrapperWidth=_.wrapper.clientWidth,this.oldDisplayWidth=Fi(m),this.force=C,this.dims=sy(m),this.events=[]};function IC(m){if(m.hasFocus())return null;var x=ee(ze(m));if(!x||!le(m.display.lineDiv,x))return null;var C={activeElt:x};if(window.getSelection){var _=He(m).getSelection();_.anchorNode&&_.extend&&le(m.display.lineDiv,_.anchorNode)&&(C.anchorNode=_.anchorNode,C.anchorOffset=_.anchorOffset,C.focusNode=_.focusNode,C.focusOffset=_.focusOffset)}return C}function py(m,x){var C=m.display,_=m.doc;if(x.editorIsHidden)return Qu(m),!1;if(!x.force&&x.visible.from>=C.viewFrom&&x.visible.to<=C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>=C.viewTo)&&C.renderedView==C.view&&q1(m)==0)return!1;ex(m)&&(Qu(m),x.dims=sy(m));var A=_.first+_.size,M=Math.max(x.visible.from-m.options.viewportMargin,_.first),N=Math.min(A,x.visible.to+m.options.viewportMargin);C.viewFrom<M&&M-C.viewFrom<20&&(M=Math.max(_.first,C.viewFrom)),C.viewTo>N&&C.viewTo-N<20&&(N=Math.min(A,C.viewTo)),ts&&(M=lo(m.doc,M),N=dl(m.doc,N));var j=M!=C.viewFrom||N!=C.viewTo||C.lastWrapHeight!=x.wrapperHeight||C.lastWrapWidth!=x.wrapperWidth;(function(ce,de,Ce){var be=ce.display;be.view.length==0||de>=be.viewTo||Ce<=be.viewFrom?(be.view=ji(ce,de,Ce),be.viewFrom=de):(be.viewFrom>de?be.view=ji(ce,de,be.viewFrom).concat(be.view):be.viewFrom<de&&(be.view=be.view.slice(ed(ce,de))),be.viewFrom=de,be.viewTo<Ce?be.view=be.view.concat(ji(ce,be.viewTo,Ce)):be.viewTo>Ce&&(be.view=be.view.slice(0,ed(ce,Ce)))),be.viewTo=Ce})(m,M,N),C.viewOffset=me(Qe(m.doc,C.viewFrom)),m.display.mover.style.top=C.viewOffset+"px";var V=q1(m);if(!j&&V==0&&!x.force&&C.renderedView==C.view&&(C.updateLineNumbers==null||C.updateLineNumbers>=C.viewTo))return!1;var W=IC(m);return V>4&&(C.lineDiv.style.display="none"),function(ce,de,Ce){var be=ce.display,Ie=ce.options.lineNumbers,Ne=be.lineDiv,Me=Ne.firstChild;function Ve(Mt){var Gn=Mt.nextSibling;return h&&k&&ce.display.currentWheelTarget==Mt?Mt.style.display="none":Mt.parentNode.removeChild(Mt),Gn}for(var nt=be.view,Je=be.viewFrom,mt=0;mt<nt.length;mt++){var ct=nt[mt];if(!ct.hidden)if(ct.node&&ct.node.parentNode==Ne){for(;Me!=ct.node;)Me=Ve(Me);var gt=Ie&&de!=null&&de<=Je&&ct.lineNumber;ct.changes&&(Pe(ct.changes,"gutter")>-1&&(gt=!1),Zu(ce,ct,Je,Ce)),gt&&(q(ct.lineNumber),ct.lineNumber.appendChild(document.createTextNode(Zt(ce.options,Je)))),Me=ct.node.nextSibling}else{var bn=Ye(ce,ct,Je,Ce);Ne.insertBefore(bn,Me)}Je+=ct.size}for(;Me;)Me=Ve(Me)}(m,C.updateLineNumbers,x.dims),V>4&&(C.lineDiv.style.display=""),C.renderedView=C.view,function(ce){if(ce&&ce.activeElt&&ce.activeElt!=ee(ce.activeElt.ownerDocument)&&(ce.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(ce.activeElt.nodeName)&&ce.anchorNode&&le(document.body,ce.anchorNode)&&le(document.body,ce.focusNode))){var de=ce.activeElt.ownerDocument,Ce=de.defaultView.getSelection(),be=de.createRange();be.setEnd(ce.anchorNode,ce.anchorOffset),be.collapse(!1),Ce.removeAllRanges(),Ce.addRange(be),Ce.extend(ce.focusNode,ce.focusOffset)}}(W),q(C.cursorDiv),q(C.selectionDiv),C.gutters.style.height=C.sizer.style.minHeight=0,j&&(C.lastWrapHeight=x.wrapperHeight,C.lastWrapWidth=x.wrapperWidth,Nh(m,400)),C.updateLineNumbers=null,!0}function J1(m,x){for(var C=x.viewport,_=!0;;_=!1){if(_&&m.options.lineWrapping&&x.oldDisplayWidth!=Fi(m))_&&(x.visible=Im(m.display,m.doc,C));else if(C&&C.top!=null&&(C={top:Math.min(m.doc.height+ns(m.display)-Te(m),C.top)}),x.visible=Im(m.display,m.doc,C),x.visible.from>=m.display.viewFrom&&x.visible.to<=m.display.viewTo)break;if(!py(m,x))break;Mm(m);var A=$h(m);Oh(m),gf(m,A),yy(m,A),x.force=!1}x.signal(m,"update",m),m.display.viewFrom==m.display.reportedViewFrom&&m.display.viewTo==m.display.reportedViewTo||(x.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function my(m,x){var C=new Pm(m,x);if(py(m,C)){Mm(m),J1(m,C);var _=$h(m);Oh(m),gf(m,_),yy(m,_),C.finish()}}function gy(m){var x=m.gutters.offsetWidth;m.sizer.style.marginLeft=x+"px",Gr(m,"gutterChanged",m)}function yy(m,x){m.display.sizer.style.minHeight=x.docHeight+"px",m.display.heightForcer.style.top=x.docHeight+"px",m.display.gutters.style.height=x.docHeight+m.display.barHeight+_i(m)+"px"}function Q1(m){var x=m.display,C=x.view;if(x.alignWidgets||x.gutters.firstChild&&m.options.fixedGutter){for(var _=oy(x)-x.scroller.scrollLeft+m.doc.scrollLeft,A=x.gutters.offsetWidth,M=_+"px",N=0;N<C.length;N++)if(!C[N].hidden){m.options.fixedGutter&&(C[N].gutter&&(C[N].gutter.style.left=M),C[N].gutterBackground&&(C[N].gutterBackground.style.left=M));var j=C[N].alignable;if(j)for(var V=0;V<j.length;V++)j[V].style.left=M}m.options.fixedGutter&&(x.gutters.style.left=_+A+"px")}}function ex(m){if(!m.options.lineNumbers)return!1;var x=m.doc,C=Zt(m.options,x.first+x.size-1),_=m.display;if(C.length!=_.lineNumChars){var A=_.measure.appendChild(X("div",[X("div",C)],"CodeMirror-linenumber CodeMirror-gutter-elt")),M=A.firstChild.offsetWidth,N=A.offsetWidth-M;return _.lineGutter.style.width="",_.lineNumInnerWidth=Math.max(M,_.lineGutter.offsetWidth-N)+1,_.lineNumWidth=_.lineNumInnerWidth+N,_.lineNumChars=_.lineNumInnerWidth?C.length:-1,_.lineGutter.style.width=_.lineNumWidth+"px",gy(m.display),!0}return!1}function by(m,x){for(var C=[],_=!1,A=0;A<m.length;A++){var M=m[A],N=null;if(typeof M!="string"&&(N=M.style,M=M.className),M=="CodeMirror-linenumbers"){if(!x)continue;_=!0}C.push({className:M,style:N})}return x&&!_&&C.push({className:"CodeMirror-linenumbers",style:null}),C}function tx(m){var x=m.gutters,C=m.gutterSpecs;q(x),m.lineGutter=null;for(var _=0;_<C.length;++_){var A=C[_],M=A.className,N=A.style,j=x.appendChild(X("div",null,"CodeMirror-gutter "+M));N&&(j.style.cssText=N),M=="CodeMirror-linenumbers"&&(m.lineGutter=j,j.style.width=(m.lineNumWidth||1)+"px")}x.style.display=C.length?"":"none",gy(m)}function Bh(m){tx(m.display),Co(m),Q1(m)}function $C(m,x,C,_){var A=this;this.input=C,A.scrollbarFiller=X("div",null,"CodeMirror-scrollbar-filler"),A.scrollbarFiller.setAttribute("cm-not-content","true"),A.gutterFiller=X("div",null,"CodeMirror-gutter-filler"),A.gutterFiller.setAttribute("cm-not-content","true"),A.lineDiv=te("div",null,"CodeMirror-code"),A.selectionDiv=X("div",null,null,"position: relative; z-index: 1"),A.cursorDiv=X("div",null,"CodeMirror-cursors"),A.measure=X("div",null,"CodeMirror-measure"),A.lineMeasure=X("div",null,"CodeMirror-measure"),A.lineSpace=te("div",[A.measure,A.lineMeasure,A.selectionDiv,A.cursorDiv,A.lineDiv],null,"position: relative; outline: none");var M=te("div",[A.lineSpace],"CodeMirror-lines");A.mover=X("div",[M],null,"position: relative"),A.sizer=X("div",[A.mover],"CodeMirror-sizer"),A.sizerWidth=null,A.heightForcer=X("div",null,null,"position: absolute; height: 50px; width: 1px;"),A.gutters=X("div",null,"CodeMirror-gutters"),A.lineGutter=null,A.scroller=X("div",[A.sizer,A.heightForcer,A.gutters],"CodeMirror-scroll"),A.scroller.setAttribute("tabIndex","-1"),A.wrapper=X("div",[A.scrollbarFiller,A.gutterFiller,A.scroller],"CodeMirror"),g&&b>=105&&(A.wrapper.style.clipPath="inset(0px)"),A.wrapper.setAttribute("translate","no"),c&&f<8&&(A.gutters.style.zIndex=-1,A.scroller.style.paddingRight=0),h||a&&D||(A.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(A.wrapper):m(A.wrapper)),A.viewFrom=A.viewTo=x.first,A.reportedViewFrom=A.reportedViewTo=x.first,A.view=[],A.renderedView=null,A.externalMeasured=null,A.viewOffset=0,A.lastWrapHeight=A.lastWrapWidth=0,A.updateLineNumbers=null,A.nativeBarWidth=A.barHeight=A.barWidth=0,A.scrollbarsClipped=!1,A.lineNumWidth=A.lineNumInnerWidth=A.lineNumChars=null,A.alignWidgets=!1,A.cachedCharWidth=A.cachedTextHeight=A.cachedPaddingH=null,A.maxLine=null,A.maxLineLength=0,A.maxLineChanged=!1,A.wheelDX=A.wheelDY=A.wheelStartX=A.wheelStartY=null,A.shift=!1,A.selForContextMenu=null,A.activeTouch=null,A.gutterSpecs=by(_.gutters,_.lineNumbers),tx(A),C.init(A)}Pm.prototype.signal=function(m,x){xt(m,x)&&this.events.push(arguments)},Pm.prototype.finish=function(){for(var m=0;m<this.events.length;m++)tt.apply(null,this.events[m])};var Nm=0,bu=null;function nx(m){var x=m.wheelDeltaX,C=m.wheelDeltaY;return x==null&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(x=m.detail),C==null&&m.detail&&m.axis==m.VERTICAL_AXIS?C=m.detail:C==null&&(C=m.wheelDelta),{x,y:C}}function PC(m){var x=nx(m);return x.x*=bu,x.y*=bu,x}function rx(m,x){g&&b==102&&(m.display.chromeScrollHack==null?m.display.sizer.style.pointerEvents="none":clearTimeout(m.display.chromeScrollHack),m.display.chromeScrollHack=setTimeout(function(){m.display.chromeScrollHack=null,m.display.sizer.style.pointerEvents=""},100));var C=nx(x),_=C.x,A=C.y,M=bu;x.deltaMode===0&&(_=x.deltaX,A=x.deltaY,M=1);var N=m.display,j=N.scroller,V=j.scrollWidth>j.clientWidth,W=j.scrollHeight>j.clientHeight;if(_&&V||A&&W){if(A&&k&&h){e:for(var ce=x.target,de=N.view;ce!=j;ce=ce.parentNode)for(var Ce=0;Ce<de.length;Ce++)if(de[Ce].node==ce){m.display.currentWheelTarget=ce;break e}}if(_&&!a&&!y&&M!=null)return A&&W&&Ih(m,Math.max(0,j.scrollTop+A*M)),td(m,Math.max(0,j.scrollLeft+_*M)),(!A||A&&W)&&rn(x),void(N.wheelStartX=null);if(A&&M!=null){var be=A*M,Ie=m.doc.scrollTop,Ne=Ie+N.wrapper.clientHeight;be<0?Ie=Math.max(0,Ie+be-50):Ne=Math.min(m.doc.height,Ne+be+50),my(m,{top:Ie,bottom:Ne})}Nm<20&&x.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=j.scrollLeft,N.wheelStartY=j.scrollTop,N.wheelDX=_,N.wheelDY=A,setTimeout(function(){if(N.wheelStartX!=null){var Me=j.scrollLeft-N.wheelStartX,Ve=j.scrollTop-N.wheelStartY,nt=Ve&&N.wheelDY&&Ve/N.wheelDY||Me&&N.wheelDX&&Me/N.wheelDX;N.wheelStartX=N.wheelStartY=null,nt&&(bu=(bu*Nm+nt)/(Nm+1),++Nm)}},200)):(N.wheelDX+=_,N.wheelDY+=A))}}c?bu=-.53:a?bu=15:g?bu=-.7:v&&(bu=-1/3);var ga=function(m,x){this.ranges=m,this.primIndex=x};ga.prototype.primary=function(){return this.ranges[this.primIndex]},ga.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var x=0;x<this.ranges.length;x++){var C=this.ranges[x],_=m.ranges[x];if(!Zn(C.anchor,_.anchor)||!Zn(C.head,_.head))return!1}return!0},ga.prototype.deepCopy=function(){for(var m=[],x=0;x<this.ranges.length;x++)m[x]=new Nr(ri(this.ranges[x].anchor),ri(this.ranges[x].head));return new ga(m,this.primIndex)},ga.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},ga.prototype.contains=function(m,x){x||(x=m);for(var C=0;C<this.ranges.length;C++){var _=this.ranges[C];if(pt(x,_.from())>=0&&pt(m,_.to())<=0)return C}return-1};var Nr=function(m,x){this.anchor=m,this.head=x};function ml(m,x,C){var _=m&&m.options.selectionsMayTouch,A=x[C];x.sort(function(Ce,be){return pt(Ce.from(),be.from())}),C=Pe(x,A);for(var M=1;M<x.length;M++){var N=x[M],j=x[M-1],V=pt(j.to(),N.from());if(_&&!N.empty()?V>0:V>=0){var W=Fr(j.from(),N.from()),ce=Ar(j.to(),N.to()),de=j.empty()?N.from()==N.head:j.from()==j.head;M<=C&&--C,x.splice(--M,2,new Nr(de?ce:W,de?W:ce))}}return new ga(x,C)}function ec(m,x){return new ga([new Nr(m,x||m)],0)}function tc(m){return m.text?Xe(m.from.line+m.text.length-1,ie(m.text).length+(m.text.length==1?m.from.ch:0)):m.to}function ix(m,x){if(pt(m,x.from)<0)return m;if(pt(m,x.to)<=0)return tc(x);var C=m.line+x.text.length-(x.to.line-x.from.line)-1,_=m.ch;return m.line==x.to.line&&(_+=tc(x).ch-x.to.ch),Xe(C,_)}function vy(m,x){for(var C=[],_=0;_<m.sel.ranges.length;_++){var A=m.sel.ranges[_];C.push(new Nr(ix(A.anchor,x),ix(A.head,x)))}return ml(m.cm,C,m.sel.primIndex)}function sx(m,x,C){return m.line==x.line?Xe(C.line,m.ch-x.ch+C.ch):Xe(C.line+(m.line-x.line),m.ch)}function xy(m){m.doc.mode=Le(m.options,m.doc.modeOption),zh(m)}function zh(m){m.doc.iter(function(x){x.stateAfter&&(x.stateAfter=null),x.styles&&(x.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,Nh(m,100),m.state.modeGen++,m.curOp&&Co(m)}function ox(m,x){return x.from.ch==0&&x.to.ch==0&&ie(x.text)==""&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function wy(m,x,C,_){function A(nt){return C?C[nt]:null}function M(nt,Je,mt){(function(ct,gt,bn,Mt){ct.text=gt,ct.stateAfter&&(ct.stateAfter=null),ct.styles&&(ct.styles=null),ct.order!=null&&(ct.order=null),cl(ct),Wi(ct,bn);var Gn=Mt?Mt(ct):1;Gn!=ct.height&&zt(ct,Gn)})(nt,Je,mt,_),Gr(nt,"change",nt,x)}function N(nt,Je){for(var mt=[],ct=nt;ct<Je;++ct)mt.push(new pn(W[ct],A(ct),_));return mt}var j=x.from,V=x.to,W=x.text,ce=Qe(m,j.line),de=Qe(m,V.line),Ce=ie(W),be=A(W.length-1),Ie=V.line-j.line;if(x.full)m.insert(0,N(0,W.length)),m.remove(W.length,m.size-W.length);else if(ox(m,x)){var Ne=N(0,W.length-1);M(de,de.text,be),Ie&&m.remove(j.line,Ie),Ne.length&&m.insert(j.line,Ne)}else if(ce==de)if(W.length==1)M(ce,ce.text.slice(0,j.ch)+Ce+ce.text.slice(V.ch),be);else{var Me=N(1,W.length-1);Me.push(new pn(Ce+ce.text.slice(V.ch),be,_)),M(ce,ce.text.slice(0,j.ch)+W[0],A(0)),m.insert(j.line+1,Me)}else if(W.length==1)M(ce,ce.text.slice(0,j.ch)+W[0]+de.text.slice(V.ch),A(0)),m.remove(j.line+1,Ie);else{M(ce,ce.text.slice(0,j.ch)+W[0],A(0)),M(de,Ce+de.text.slice(V.ch),be);var Ve=N(1,W.length-1);Ie>1&&m.remove(j.line+1,Ie-1),m.insert(j.line+1,Ve)}Gr(m,"change",m,x)}function nc(m,x,C){(function _(A,M,N){if(A.linked)for(var j=0;j<A.linked.length;++j){var V=A.linked[j];if(V.doc!=M){var W=N&&V.sharedHist;C&&!W||(x(V.doc,W),_(V.doc,A,W))}}})(m,null,!0)}function ax(m,x){if(x.cm)throw new Error("This document is already in use.");m.doc=x,x.cm=m,ay(m),xy(m),lx(m),m.options.direction=x.direction,m.options.lineWrapping||yt(m),m.options.mode=x.modeOption,Co(m)}function lx(m){(m.doc.direction=="rtl"?z:U)(m.display.lineDiv,"CodeMirror-rtl")}function Bm(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function _y(m,x){var C={from:ri(x.from),to:tc(x),text:hn(m,x.from,x.to)};return dx(m,C,x.from.line,x.to.line+1),nc(m,function(_){return dx(_,C,x.from.line,x.to.line+1)},!0),C}function ux(m){for(;m.length&&ie(m).ranges;)m.pop()}function cx(m,x,C,_){var A=m.history;A.undone.length=0;var M,N,j=+new Date;if((A.lastOp==_||A.lastOrigin==x.origin&&x.origin&&(x.origin.charAt(0)=="+"&&A.lastModTime>j-(m.cm?m.cm.options.historyEventDelay:500)||x.origin.charAt(0)=="*"))&&(M=function(W,ce){return ce?(ux(W.done),ie(W.done)):W.done.length&&!ie(W.done).ranges?ie(W.done):W.done.length>1&&!W.done[W.done.length-2].ranges?(W.done.pop(),ie(W.done)):void 0}(A,A.lastOp==_)))N=ie(M.changes),pt(x.from,x.to)==0&&pt(x.from,N.to)==0?N.to=tc(x):M.changes.push(_y(m,x));else{var V=ie(A.done);for(V&&V.ranges||zm(m.sel,A.done),M={changes:[_y(m,x)],generation:A.generation},A.done.push(M);A.done.length>A.undoDepth;)A.done.shift(),A.done[0].ranges||A.done.shift()}A.done.push(C),A.generation=++A.maxGeneration,A.lastModTime=A.lastSelTime=j,A.lastOp=A.lastSelOp=_,A.lastOrigin=A.lastSelOrigin=x.origin,N||tt(m,"historyAdded")}function NC(m,x,C,_){var A=m.history,M=_&&_.origin;C==A.lastSelOp||M&&A.lastSelOrigin==M&&(A.lastModTime==A.lastSelTime&&A.lastOrigin==M||function(N,j,V,W){var ce=j.charAt(0);return ce=="*"||ce=="+"&&V.ranges.length==W.ranges.length&&V.somethingSelected()==W.somethingSelected()&&new Date-N.history.lastSelTime<=(N.cm?N.cm.options.historyEventDelay:500)}(m,M,ie(A.done),x))?A.done[A.done.length-1]=x:zm(x,A.done),A.lastSelTime=+new Date,A.lastSelOrigin=M,A.lastSelOp=C,_&&_.clearRedo!==!1&&ux(A.undone)}function zm(m,x){var C=ie(x);C&&C.ranges&&C.equals(m)||x.push(m)}function dx(m,x,C,_){var A=x["spans_"+m.id],M=0;m.iter(Math.max(m.first,C),Math.min(m.first+m.size,_),function(N){N.markedSpans&&((A||(A=x["spans_"+m.id]={}))[M]=N.markedSpans),++M})}function BC(m){if(!m)return null;for(var x,C=0;C<m.length;++C)m[C].marker.explicitlyCleared?x||(x=m.slice(0,C)):x&&x.push(m[C]);return x?x.length?x:null:m}function fx(m,x){var C=function(ce,de){var Ce=de["spans_"+ce.id];if(!Ce)return null;for(var be=[],Ie=0;Ie<de.text.length;++Ie)be.push(BC(Ce[Ie]));return be}(m,x),_=pa(m,x);if(!C)return _;if(!_)return C;for(var A=0;A<C.length;++A){var M=C[A],N=_[A];if(M&&N)e:for(var j=0;j<N.length;++j){for(var V=N[j],W=0;W<M.length;++W)if(M[W].marker==V.marker)continue e;M.push(V)}else N&&(C[A]=N)}return C}function yf(m,x,C){for(var _=[],A=0;A<m.length;++A){var M=m[A];if(M.ranges)_.push(C?ga.prototype.deepCopy.call(M):M);else{var N=M.changes,j=[];_.push({changes:j});for(var V=0;V<N.length;++V){var W=N[V],ce=void 0;if(j.push({from:W.from,to:W.to,text:W.text}),x)for(var de in W)(ce=de.match(/^spans_(\d+)$/))&&Pe(x,Number(ce[1]))>-1&&(ie(j)[de]=W[de],delete W[de])}}}return _}function Ey(m,x,C,_){if(_){var A=m.anchor;if(C){var M=pt(x,A)<0;M!=pt(C,A)<0?(A=x,x=C):M!=pt(x,C)<0&&(x=C)}return new Nr(A,x)}return new Nr(C||x,x)}function jm(m,x,C,_,A){A==null&&(A=m.cm&&(m.cm.display.shift||m.extend)),Ys(m,new ga([Ey(m.sel.primary(),x,C,A)],0),_)}function hx(m,x,C){for(var _=[],A=m.cm&&(m.cm.display.shift||m.extend),M=0;M<m.sel.ranges.length;M++)_[M]=Ey(m.sel.ranges[M],x[M],null,A);Ys(m,ml(m.cm,_,m.sel.primIndex),C)}function Cy(m,x,C,_){var A=m.sel.ranges.slice(0);A[x]=C,Ys(m,ml(m.cm,A,m.sel.primIndex),_)}function px(m,x,C,_){Ys(m,ec(x,C),_)}function mx(m,x,C){var _=m.history.done,A=ie(_);A&&A.ranges?(_[_.length-1]=x,Um(m,x,C)):Ys(m,x,C)}function Ys(m,x,C){Um(m,x,C),NC(m,m.sel,m.cm?m.cm.curOp.id:NaN,C)}function Um(m,x,C){(xt(m,"beforeSelectionChange")||m.cm&&xt(m.cm,"beforeSelectionChange"))&&(x=function(A,M,N){var j={ranges:M.ranges,update:function(V){this.ranges=[];for(var W=0;W<V.length;W++)this.ranges[W]=new Nr(qt(A,V[W].anchor),qt(A,V[W].head))},origin:N&&N.origin};return tt(A,"beforeSelectionChange",A,j),A.cm&&tt(A.cm,"beforeSelectionChange",A.cm,j),j.ranges!=M.ranges?ml(A.cm,j.ranges,j.ranges.length-1):M}(m,x,C));var _=C&&C.bias||(pt(x.primary().head,m.sel.primary().head)<0?-1:1);gx(m,bx(m,x,_,!0)),C&&C.scroll===!1||!m.cm||m.cm.getOption("readOnly")=="nocursor"||mf(m.cm)}function gx(m,x){x.equals(m.sel)||(m.sel=x,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,Kt(m.cm)),Gr(m,"cursorActivity",m))}function yx(m){gx(m,bx(m,m.sel,null,!1))}function bx(m,x,C,_){for(var A,M=0;M<x.ranges.length;M++){var N=x.ranges[M],j=x.ranges.length==m.sel.ranges.length&&m.sel.ranges[M],V=qm(m,N.anchor,j&&j.anchor,C,_),W=N.head==N.anchor?V:qm(m,N.head,j&&j.head,C,_);(A||V!=N.anchor||W!=N.head)&&(A||(A=x.ranges.slice(0,M)),A[M]=new Nr(V,W))}return A?ml(m.cm,A,x.primIndex):x}function bf(m,x,C,_,A){var M=Qe(m,x.line);if(M.markedSpans)for(var N=0;N<M.markedSpans.length;++N){var j=M.markedSpans[N],V=j.marker,W="selectLeft"in V?!V.selectLeft:V.inclusiveLeft,ce="selectRight"in V?!V.selectRight:V.inclusiveRight;if((j.from==null||(W?j.from<=x.ch:j.from<x.ch))&&(j.to==null||(ce?j.to>=x.ch:j.to>x.ch))){if(A&&(tt(V,"beforeCursorEnter"),V.explicitlyCleared)){if(M.markedSpans){--N;continue}break}if(!V.atomic)continue;if(C){var de=V.find(_<0?1:-1),Ce=void 0;if((_<0?ce:W)&&(de=vx(m,de,-_,de&&de.line==x.line?M:null)),de&&de.line==x.line&&(Ce=pt(de,C))&&(_<0?Ce<0:Ce>0))return bf(m,de,x,_,A)}var be=V.find(_<0?-1:1);return(_<0?W:ce)&&(be=vx(m,be,_,be.line==x.line?M:null)),be?bf(m,be,x,_,A):null}}return x}function qm(m,x,C,_,A){var M=_||1,N=bf(m,x,C,M,A)||!A&&bf(m,x,C,M,!0)||bf(m,x,C,-M,A)||!A&&bf(m,x,C,-M,!0);return N||(m.cantEdit=!0,Xe(m.first,0))}function vx(m,x,C,_){return C<0&&x.ch==0?x.line>m.first?qt(m,Xe(x.line-1)):null:C>0&&x.ch==(_||Qe(m,x.line)).text.length?x.line<m.first+m.size-1?Xe(x.line+1,0):null:new Xe(x.line,x.ch+C)}function xx(m){m.setSelection(Xe(m.firstLine(),0),Xe(m.lastLine()),ht)}function wx(m,x,C){var _={canceled:!1,from:x.from,to:x.to,text:x.text,origin:x.origin,cancel:function(){return _.canceled=!0}};return C&&(_.update=function(A,M,N,j){A&&(_.from=qt(m,A)),M&&(_.to=qt(m,M)),N&&(_.text=N),j!==void 0&&(_.origin=j)}),tt(m,"beforeChange",m,_),m.cm&&tt(m.cm,"beforeChange",m.cm,_),_.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:_.from,to:_.to,text:_.text,origin:_.origin}}function vf(m,x,C){if(m.cm){if(!m.cm.curOp)return Cs(m.cm,vf)(m,x,C);if(m.cm.state.suppressEdits)return}if(!(xt(m,"beforeChange")||m.cm&&xt(m.cm,"beforeChange"))||(x=wx(m,x,!0))){var _=kr&&!C&&function(M,N,j){var V=null;if(M.iter(N.line,j.line+1,function(nt){if(nt.markedSpans)for(var Je=0;Je<nt.markedSpans.length;++Je){var mt=nt.markedSpans[Je].marker;!mt.readOnly||V&&Pe(V,mt)!=-1||(V||(V=[])).push(mt)}}),!V)return null;for(var W=[{from:N,to:j}],ce=0;ce<V.length;++ce)for(var de=V[ce],Ce=de.find(0),be=0;be<W.length;++be){var Ie=W[be];if(!(pt(Ie.to,Ce.from)<0||pt(Ie.from,Ce.to)>0)){var Ne=[be,1],Me=pt(Ie.from,Ce.from),Ve=pt(Ie.to,Ce.to);(Me<0||!de.inclusiveLeft&&!Me)&&Ne.push({from:Ie.from,to:Ce.from}),(Ve>0||!de.inclusiveRight&&!Ve)&&Ne.push({from:Ce.to,to:Ie.to}),W.splice.apply(W,Ne),be+=Ne.length-3}}return W}(m,x.from,x.to);if(_)for(var A=_.length-1;A>=0;--A)_x(m,{from:_[A].from,to:_[A].to,text:A?[""]:x.text,origin:x.origin});else _x(m,x)}}function _x(m,x){if(x.text.length!=1||x.text[0]!=""||pt(x.from,x.to)!=0){var C=vy(m,x);cx(m,x,C,m.cm?m.cm.curOp.id:NaN),jh(m,x,C,pa(m,x));var _=[];nc(m,function(A,M){M||Pe(_,A.history)!=-1||(Ax(A.history,x),_.push(A.history)),jh(A,x,null,pa(A,x))})}}function Hm(m,x,C){var _=m.cm&&m.cm.state.suppressEdits;if(!_||C){for(var A,M=m.history,N=m.sel,j=x=="undo"?M.done:M.undone,V=x=="undo"?M.undone:M.done,W=0;W<j.length&&(A=j[W],C?!A.ranges||A.equals(m.sel):A.ranges);W++);if(W!=j.length){for(M.lastOrigin=M.lastSelOrigin=null;;){if(!(A=j.pop()).ranges){if(_)return void j.push(A);break}if(zm(A,V),C&&!A.equals(m.sel))return void Ys(m,A,{clearRedo:!1});N=A}var ce=[];zm(N,V),V.push({changes:ce,generation:M.generation}),M.generation=A.generation||++M.maxGeneration;for(var de=xt(m,"beforeChange")||m.cm&&xt(m.cm,"beforeChange"),Ce=function(Ne){var Me=A.changes[Ne];if(Me.origin=x,de&&!wx(m,Me,!1))return j.length=0,{};ce.push(_y(m,Me));var Ve=Ne?vy(m,Me):ie(j);jh(m,Me,Ve,fx(m,Me)),!Ne&&m.cm&&m.cm.scrollIntoView({from:Me.from,to:tc(Me)});var nt=[];nc(m,function(Je,mt){mt||Pe(nt,Je.history)!=-1||(Ax(Je.history,Me),nt.push(Je.history)),jh(Je,Me,null,fx(Je,Me))})},be=A.changes.length-1;be>=0;--be){var Ie=Ce(be);if(Ie)return Ie.v}}}}function Ex(m,x){if(x!=0&&(m.first+=x,m.sel=new ga(oe(m.sel.ranges,function(A){return new Nr(Xe(A.anchor.line+x,A.anchor.ch),Xe(A.head.line+x,A.head.ch))}),m.sel.primIndex),m.cm)){Co(m.cm,m.first,m.first-x,x);for(var C=m.cm.display,_=C.viewFrom;_<C.viewTo;_++)Ju(m.cm,_,"gutter")}}function jh(m,x,C,_){if(m.cm&&!m.cm.curOp)return Cs(m.cm,jh)(m,x,C,_);if(x.to.line<m.first)Ex(m,x.text.length-1-(x.to.line-x.from.line));else if(!(x.from.line>m.lastLine())){if(x.from.line<m.first){var A=x.text.length-1-(m.first-x.from.line);Ex(m,A),x={from:Xe(m.first,0),to:Xe(x.to.line+A,x.to.ch),text:[ie(x.text)],origin:x.origin}}var M=m.lastLine();x.to.line>M&&(x={from:x.from,to:Xe(M,Qe(m,M).text.length),text:[x.text[0]],origin:x.origin}),x.removed=hn(m,x.from,x.to),C||(C=vy(m,x)),m.cm?function(N,j,V){var W=N.doc,ce=N.display,de=j.from,Ce=j.to,be=!1,Ie=de.line;N.options.lineWrapping||(Ie=jt(Xi(Qe(W,de.line))),W.iter(Ie,Ce.line+1,function(Je){if(Je==ce.maxLine)return be=!0,!0})),W.sel.contains(j.from,j.to)>-1&&Kt(N),wy(W,j,V,U1(N)),N.options.lineWrapping||(W.iter(Ie,de.line+j.text.length,function(Je){var mt=Be(Je);mt>ce.maxLineLength&&(ce.maxLine=Je,ce.maxLineLength=mt,ce.maxLineChanged=!0,be=!1)}),be&&(N.curOp.updateMaxLine=!0)),function(Je,mt){if(Je.modeFrontier=Math.min(Je.modeFrontier,mt),!(Je.highlightFrontier<mt-10)){for(var ct=Je.first,gt=mt-1;gt>ct;gt--){var bn=Qe(Je,gt).stateAfter;if(bn&&(!(bn instanceof es)||gt+bn.lookAhead<mt)){ct=gt+1;break}}Je.highlightFrontier=Math.min(Je.highlightFrontier,ct)}}(W,de.line),Nh(N,400);var Ne=j.text.length-(Ce.line-de.line)-1;j.full?Co(N):de.line!=Ce.line||j.text.length!=1||ox(N.doc,j)?Co(N,de.line,Ce.line+1,Ne):Ju(N,de.line,"text");var Me=xt(N,"changes"),Ve=xt(N,"change");if(Ve||Me){var nt={from:de,to:Ce,text:j.text,removed:j.removed,origin:j.origin};Ve&&Gr(N,"change",N,nt),Me&&(N.curOp.changeObjs||(N.curOp.changeObjs=[])).push(nt)}N.display.selForContextMenu=null}(m.cm,x,_):wy(m,x,_),Um(m,C,ht),m.cantEdit&&qm(m,Xe(m.firstLine(),0))&&(m.cantEdit=!1)}}function xf(m,x,C,_,A){var M;_||(_=C),pt(_,C)<0&&(C=(M=[_,C])[0],_=M[1]),typeof x=="string"&&(x=m.splitLines(x)),vf(m,{from:C,to:_,text:x,origin:A})}function Cx(m,x,C,_){C<m.line?m.line+=_:x<m.line&&(m.line=x,m.ch=0)}function Sx(m,x,C,_){for(var A=0;A<m.length;++A){var M=m[A],N=!0;if(M.ranges){M.copied||((M=m[A]=M.deepCopy()).copied=!0);for(var j=0;j<M.ranges.length;j++)Cx(M.ranges[j].anchor,x,C,_),Cx(M.ranges[j].head,x,C,_)}else{for(var V=0;V<M.changes.length;++V){var W=M.changes[V];if(C<W.from.line)W.from=Xe(W.from.line+_,W.from.ch),W.to=Xe(W.to.line+_,W.to.ch);else if(x<=W.to.line){N=!1;break}}N||(m.splice(0,A+1),A=0)}}}function Ax(m,x){var C=x.from.line,_=x.to.line,A=x.text.length-(_-C)-1;Sx(m.done,C,_,A),Sx(m.undone,C,_,A)}function Uh(m,x,C,_){var A=x,M=x;return typeof x=="number"?M=Qe(m,rr(m,x)):A=jt(x),A==null?null:(_(M,A)&&m.cm&&Ju(m.cm,A,C),M)}function qh(m){this.lines=m,this.parent=null;for(var x=0,C=0;C<m.length;++C)m[C].parent=this,x+=m[C].height;this.height=x}function Hh(m){this.children=m;for(var x=0,C=0,_=0;_<m.length;++_){var A=m[_];x+=A.chunkSize(),C+=A.height,A.parent=this}this.size=x,this.height=C,this.parent=null}Nr.prototype.from=function(){return Fr(this.anchor,this.head)},Nr.prototype.to=function(){return Ar(this.anchor,this.head)},Nr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},qh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,x){for(var C=m,_=m+x;C<_;++C){var A=this.lines[C];this.height-=A.height,$t(A),Gr(A,"delete")}this.lines.splice(m,x)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,x,C){this.height+=C,this.lines=this.lines.slice(0,m).concat(x).concat(this.lines.slice(m));for(var _=0;_<x.length;++_)x[_].parent=this},iterN:function(m,x,C){for(var _=m+x;m<_;++m)if(C(this.lines[m]))return!0}},Hh.prototype={chunkSize:function(){return this.size},removeInner:function(m,x){this.size-=x;for(var C=0;C<this.children.length;++C){var _=this.children[C],A=_.chunkSize();if(m<A){var M=Math.min(x,A-m),N=_.height;if(_.removeInner(m,M),this.height-=N-_.height,A==M&&(this.children.splice(C--,1),_.parent=null),(x-=M)==0)break;m=0}else m-=A}if(this.size-x<25&&(this.children.length>1||!(this.children[0]instanceof qh))){var j=[];this.collapse(j),this.children=[new qh(j)],this.children[0].parent=this}},collapse:function(m){for(var x=0;x<this.children.length;++x)this.children[x].collapse(m)},insertInner:function(m,x,C){this.size+=x.length,this.height+=C;for(var _=0;_<this.children.length;++_){var A=this.children[_],M=A.chunkSize();if(m<=M){if(A.insertInner(m,x,C),A.lines&&A.lines.length>50){for(var N=A.lines.length%25+25,j=N;j<A.lines.length;){var V=new qh(A.lines.slice(j,j+=25));A.height-=V.height,this.children.splice(++_,0,V),V.parent=this}A.lines=A.lines.slice(0,N),this.maybeSpill()}break}m-=M}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var x=new Hh(m.children.splice(m.children.length-5,5));if(m.parent){m.size-=x.size,m.height-=x.height;var C=Pe(m.parent.children,m);m.parent.children.splice(C+1,0,x)}else{var _=new Hh(m.children);_.parent=m,m.children=[_,x],m=_}x.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,x,C){for(var _=0;_<this.children.length;++_){var A=this.children[_],M=A.chunkSize();if(m<M){var N=Math.min(x,M-m);if(A.iterN(m,N,C))return!0;if((x-=N)==0)break;m=0}else m-=M}}};var Gh=function(m,x,C){if(C)for(var _ in C)C.hasOwnProperty(_)&&(this[_]=C[_]);this.doc=m,this.node=x};function kx(m,x,C){me(x)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&hy(m,C)}Gh.prototype.clear=function(){var m=this.doc.cm,x=this.line.widgets,C=this.line,_=jt(C);if(_!=null&&x){for(var A=0;A<x.length;++A)x[A]==this&&x.splice(A--,1);x.length||(C.widgets=null);var M=Cn(this);zt(C,Math.max(0,C.height-M)),m&&(Ho(m,function(){kx(m,C,-M),Ju(m,_,"widget")}),Gr(m,"lineWidgetCleared",m,this,_))}},Gh.prototype.changed=function(){var m=this,x=this.height,C=this.doc.cm,_=this.line;this.height=null;var A=Cn(this)-x;A&&(Ht(this.doc,_)||zt(_,_.height+A),C&&Ho(C,function(){C.curOp.forceUpdate=!0,kx(C,_,A),Gr(C,"lineWidgetChanged",C,m,jt(_))}))},Qt(Gh);var Tx=0,rc=function(m,x){this.lines=[],this.type=x,this.doc=m,this.id=++Tx};function wf(m,x,C,_,A){if(_&&_.shared)return function(de,Ce,be,Ie,Ne){(Ie=we(Ie)).shared=!1;var Me=[wf(de,Ce,be,Ie,Ne)],Ve=Me[0],nt=Ie.widgetNode;return nc(de,function(Je){nt&&(Ie.widgetNode=nt.cloneNode(!0)),Me.push(wf(Je,qt(Je,Ce),qt(Je,be),Ie,Ne));for(var mt=0;mt<Je.linked.length;++mt)if(Je.linked[mt].isParent)return;Ve=ie(Me)}),new Vh(Me,Ve)}(m,x,C,_,A);if(m.cm&&!m.cm.curOp)return Cs(m.cm,wf)(m,x,C,_,A);var M=new rc(m,A),N=pt(x,C);if(_&&we(_,M,!1),N>0||N==0&&M.clearWhenEmpty!==!1)return M;if(M.replacedWith&&(M.collapsed=!0,M.widgetNode=te("span",[M.replacedWith],"CodeMirror-widget"),_.handleMouseEvents||M.widgetNode.setAttribute("cm-ignore-events","true"),_.insertLeft&&(M.widgetNode.insertLeft=!0)),M.collapsed){if(ao(m,x.line,x,C,M)||x.line!=C.line&&ao(m,C.line,x,C,M))throw new Error("Inserting collapsed marker partially overlapping an existing one");ts=!0}M.addToHistory&&cx(m,{from:x,to:C,origin:"markText"},m.sel,NaN);var j,V=x.line,W=m.cm;if(m.iter(V,C.line+1,function(de){W&&M.collapsed&&!W.options.lineWrapping&&Xi(de)==W.display.maxLine&&(j=!0),M.collapsed&&V!=x.line&&zt(de,0),function(Ce,be,Ie){var Ne=Ie&&window.WeakSet&&(Ie.markedSpans||(Ie.markedSpans=new WeakSet));Ne&&Ce.markedSpans&&Ne.has(Ce.markedSpans)?Ce.markedSpans.push(be):(Ce.markedSpans=Ce.markedSpans?Ce.markedSpans.concat([be]):[be],Ne&&Ne.add(Ce.markedSpans)),be.marker.attachLine(Ce)}(de,new so(M,V==x.line?x.ch:null,V==C.line?C.ch:null),m.cm&&m.cm.curOp),++V}),M.collapsed&&m.iter(x.line,C.line+1,function(de){Ht(m,de)&&zt(de,0)}),M.clearOnEnter&&De(M,"beforeCursorEnter",function(){return M.clear()}),M.readOnly&&(kr=!0,(m.history.done.length||m.history.undone.length)&&m.clearHistory()),M.collapsed&&(M.id=++Tx,M.atomic=!0),W){if(j&&(W.curOp.updateMaxLine=!0),M.collapsed)Co(W,x.line,C.line+1);else if(M.className||M.startStyle||M.endStyle||M.css||M.attributes||M.title)for(var ce=x.line;ce<=C.line;ce++)Ju(W,ce,"text");M.atomic&&yx(W.doc),Gr(W,"markerAdded",W,M)}return M}rc.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,x=m&&!m.curOp;if(x&&rd(m),xt(this,"clear")){var C=this.find();C&&Gr(this,"clear",C.from,C.to)}for(var _=null,A=null,M=0;M<this.lines.length;++M){var N=this.lines[M],j=Is(N.markedSpans,this);m&&!this.collapsed?Ju(m,jt(N),"text"):m&&(j.to!=null&&(A=jt(N)),j.from!=null&&(_=jt(N))),N.markedSpans=Hs(N.markedSpans,j),j.from==null&&this.collapsed&&!Ht(this.doc,N)&&m&&zt(N,ff(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var V=0;V<this.lines.length;++V){var W=Xi(this.lines[V]),ce=Be(W);ce>m.display.maxLineLength&&(m.display.maxLine=W,m.display.maxLineLength=ce,m.display.maxLineChanged=!0)}_!=null&&m&&this.collapsed&&Co(m,_,A+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&yx(m.doc)),m&&Gr(m,"markerCleared",m,this,_,A),x&&id(m),this.parent&&this.parent.clear()}},rc.prototype.find=function(m,x){var C,_;m==null&&this.type=="bookmark"&&(m=1);for(var A=0;A<this.lines.length;++A){var M=this.lines[A],N=Is(M.markedSpans,this);if(N.from!=null&&(C=Xe(x?M:jt(M),N.from),m==-1))return C;if(N.to!=null&&(_=Xe(x?M:jt(M),N.to),m==1))return _}return C&&{from:C,to:_}},rc.prototype.changed=function(){var m=this,x=this.find(-1,!0),C=this,_=this.doc.cm;x&&_&&Ho(_,function(){var A=x.line,M=jt(x.line),N=Wn(_,M);if(N&&(M1(N),_.curOp.selectionChanged=_.curOp.forceUpdate=!0),_.curOp.updateMaxLine=!0,!Ht(C.doc,A)&&C.height!=null){var j=C.height;C.height=null;var V=Cn(C)-j;V&&zt(A,A.height+V)}Gr(_,"markerChanged",_,m)})},rc.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;x.maybeHiddenMarkers&&Pe(x.maybeHiddenMarkers,this)!=-1||(x.maybeUnhiddenMarkers||(x.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},rc.prototype.detachLine=function(m){if(this.lines.splice(Pe(this.lines,m),1),!this.lines.length&&this.doc.cm){var x=this.doc.cm.curOp;(x.maybeHiddenMarkers||(x.maybeHiddenMarkers=[])).push(this)}},Qt(rc);var Vh=function(m,x){this.markers=m,this.primary=x;for(var C=0;C<m.length;++C)m[C].parent=this};function Dx(m){return m.findMarks(Xe(m.first,0),m.clipPos(Xe(m.lastLine())),function(x){return x.parent})}function zC(m){for(var x=function(_){var A=m[_],M=[A.primary.doc];nc(A.primary.doc,function(V){return M.push(V)});for(var N=0;N<A.markers.length;N++){var j=A.markers[N];Pe(M,j.doc)==-1&&(j.parent=null,A.markers.splice(N--,1))}},C=0;C<m.length;C++)x(C)}Vh.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();Gr(this,"clear")}},Vh.prototype.find=function(m,x){return this.primary.find(m,x)},Qt(Vh);var jC=0,So=function(m,x,C,_,A){if(!(this instanceof So))return new So(m,x,C,_,A);C==null&&(C=0),Hh.call(this,[new qh([new pn("",null)])]),this.first=C,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=C;var M=Xe(C,0);this.sel=ec(M),this.history=new Bm(null),this.id=++jC,this.modeOption=x,this.lineSep=_,this.direction=A=="rtl"?"rtl":"ltr",this.extend=!1,typeof m=="string"&&(m=this.splitLines(m)),wy(this,{from:M,to:M,text:m}),Ys(this,ec(M),ht)};So.prototype=F(Hh.prototype,{constructor:So,iter:function(m,x,C){C?this.iterN(m-this.first,x-m,C):this.iterN(this.first,this.first+this.size,m)},insert:function(m,x){for(var C=0,_=0;_<x.length;++_)C+=x[_].height;this.insertInner(m-this.first,x,C)},remove:function(m,x){this.removeInner(m-this.first,x)},getValue:function(m){var x=Sn(this,this.first,this.first+this.size);return m===!1?x:x.join(m||this.lineSeparator())},setValue:Ss(function(m){var x=Xe(this.first,0),C=this.first+this.size-1;vf(this,{from:x,to:Xe(C,Qe(this,C).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&Mh(this.cm,0,0),Ys(this,ec(x),ht)}),replaceRange:function(m,x,C,_){xf(this,m,x=qt(this,x),C=C?qt(this,C):x,_)},getRange:function(m,x,C){var _=hn(this,qt(this,m),qt(this,x));return C===!1?_:C===""?_.join(""):_.join(C||this.lineSeparator())},getLine:function(m){var x=this.getLineHandle(m);return x&&x.text},getLineHandle:function(m){if(di(this,m))return Qe(this,m)},getLineNumber:function(m){return jt(m)},getLineHandleVisualStart:function(m){return typeof m=="number"&&(m=Qe(this,m)),Xi(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return qt(this,m)},getCursor:function(m){var x=this.sel.primary();return m==null||m=="head"?x.head:m=="anchor"?x.anchor:m=="end"||m=="to"||m===!1?x.to():x.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ss(function(m,x,C){px(this,qt(this,typeof m=="number"?Xe(m,x||0):m),null,C)}),setSelection:Ss(function(m,x,C){px(this,qt(this,m),qt(this,x||m),C)}),extendSelection:Ss(function(m,x,C){jm(this,qt(this,m),x&&qt(this,x),C)}),extendSelections:Ss(function(m,x){hx(this,xi(this,m),x)}),extendSelectionsBy:Ss(function(m,x){hx(this,xi(this,oe(this.sel.ranges,m)),x)}),setSelections:Ss(function(m,x,C){if(m.length){for(var _=[],A=0;A<m.length;A++)_[A]=new Nr(qt(this,m[A].anchor),qt(this,m[A].head||m[A].anchor));x==null&&(x=Math.min(m.length-1,this.sel.primIndex)),Ys(this,ml(this.cm,_,x),C)}}),addSelection:Ss(function(m,x,C){var _=this.sel.ranges.slice(0);_.push(new Nr(qt(this,m),qt(this,x||m))),Ys(this,ml(this.cm,_,_.length-1),C)}),getSelection:function(m){for(var x,C=this.sel.ranges,_=0;_<C.length;_++){var A=hn(this,C[_].from(),C[_].to());x=x?x.concat(A):A}return m===!1?x:x.join(m||this.lineSeparator())},getSelections:function(m){for(var x=[],C=this.sel.ranges,_=0;_<C.length;_++){var A=hn(this,C[_].from(),C[_].to());m!==!1&&(A=A.join(m||this.lineSeparator())),x[_]=A}return x},replaceSelection:function(m,x,C){for(var _=[],A=0;A<this.sel.ranges.length;A++)_[A]=m;this.replaceSelections(_,x,C||"+input")},replaceSelections:Ss(function(m,x,C){for(var _=[],A=this.sel,M=0;M<A.ranges.length;M++){var N=A.ranges[M];_[M]={from:N.from(),to:N.to(),text:this.splitLines(m[M]),origin:C}}for(var j=x&&x!="end"&&function(W,ce,de){for(var Ce=[],be=Xe(W.first,0),Ie=be,Ne=0;Ne<ce.length;Ne++){var Me=ce[Ne],Ve=sx(Me.from,be,Ie),nt=sx(tc(Me),be,Ie);if(be=Me.to,Ie=nt,de=="around"){var Je=W.sel.ranges[Ne],mt=pt(Je.head,Je.anchor)<0;Ce[Ne]=new Nr(mt?nt:Ve,mt?Ve:nt)}else Ce[Ne]=new Nr(Ve,Ve)}return new ga(Ce,W.sel.primIndex)}(this,_,x),V=_.length-1;V>=0;V--)vf(this,_[V]);j?mx(this,j):this.cm&&mf(this.cm)}),undo:Ss(function(){Hm(this,"undo")}),redo:Ss(function(){Hm(this,"redo")}),undoSelection:Ss(function(){Hm(this,"undo",!0)}),redoSelection:Ss(function(){Hm(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,x=0,C=0,_=0;_<m.done.length;_++)m.done[_].ranges||++x;for(var A=0;A<m.undone.length;A++)m.undone[A].ranges||++C;return{undo:x,redo:C}},clearHistory:function(){var m=this;this.history=new Bm(this.history),nc(this,function(x){return x.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:yf(this.history.done),undone:yf(this.history.undone)}},setHistory:function(m){var x=this.history=new Bm(this.history);x.done=yf(m.done.slice(0),null,!0),x.undone=yf(m.undone.slice(0),null,!0)},setGutterMarker:Ss(function(m,x,C){return Uh(this,m,"gutter",function(_){var A=_.gutterMarkers||(_.gutterMarkers={});return A[x]=C,!C&&ye(A)&&(_.gutterMarkers=null),!0})}),clearGutter:Ss(function(m){var x=this;this.iter(function(C){C.gutterMarkers&&C.gutterMarkers[m]&&Uh(x,C,"gutter",function(){return C.gutterMarkers[m]=null,ye(C.gutterMarkers)&&(C.gutterMarkers=null),!0})})}),lineInfo:function(m){var x;if(typeof m=="number"){if(!di(this,m)||(x=m,!(m=Qe(this,m))))return null}else if((x=jt(m))==null)return null;return{line:x,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:Ss(function(m,x,C){return Uh(this,m,x=="gutter"?"gutter":"class",function(_){var A=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass";if(_[A]){if(I(C).test(_[A]))return!1;_[A]+=" "+C}else _[A]=C;return!0})}),removeLineClass:Ss(function(m,x,C){return Uh(this,m,x=="gutter"?"gutter":"class",function(_){var A=x=="text"?"textClass":x=="background"?"bgClass":x=="gutter"?"gutterClass":"wrapClass",M=_[A];if(!M)return!1;if(C==null)_[A]=null;else{var N=M.match(I(C));if(!N)return!1;var j=N.index+N[0].length;_[A]=M.slice(0,N.index)+(N.index&&j!=M.length?" ":"")+M.slice(j)||null}return!0})}),addLineWidget:Ss(function(m,x,C){return function(_,A,M,N){var j=new Gh(_,M,N),V=_.cm;return V&&j.noHScroll&&(V.display.alignWidgets=!0),Uh(_,A,"widget",function(W){var ce=W.widgets||(W.widgets=[]);if(j.insertAt==null?ce.push(j):ce.splice(Math.min(ce.length,Math.max(0,j.insertAt)),0,j),j.line=W,V&&!Ht(_,W)){var de=me(W)<_.scrollTop;zt(W,W.height+Cn(j)),de&&hy(V,j.height),V.curOp.forceUpdate=!0}return!0}),V&&Gr(V,"lineWidgetAdded",V,j,typeof A=="number"?A:jt(A)),j}(this,m,x,C)}),removeLineWidget:function(m){m.clear()},markText:function(m,x,C){return wf(this,qt(this,m),qt(this,x),C,C&&C.type||"range")},setBookmark:function(m,x){var C={replacedWith:x&&(x.nodeType==null?x.widget:x),insertLeft:x&&x.insertLeft,clearWhenEmpty:!1,shared:x&&x.shared,handleMouseEvents:x&&x.handleMouseEvents};return wf(this,m=qt(this,m),m,C,"bookmark")},findMarksAt:function(m){var x=[],C=Qe(this,(m=qt(this,m)).line).markedSpans;if(C)for(var _=0;_<C.length;++_){var A=C[_];(A.from==null||A.from<=m.ch)&&(A.to==null||A.to>=m.ch)&&x.push(A.marker.parent||A.marker)}return x},findMarks:function(m,x,C){m=qt(this,m),x=qt(this,x);var _=[],A=m.line;return this.iter(m.line,x.line+1,function(M){var N=M.markedSpans;if(N)for(var j=0;j<N.length;j++){var V=N[j];V.to!=null&&A==m.line&&m.ch>=V.to||V.from==null&&A!=m.line||V.from!=null&&A==x.line&&V.from>=x.ch||C&&!C(V.marker)||_.push(V.marker.parent||V.marker)}++A}),_},getAllMarks:function(){var m=[];return this.iter(function(x){var C=x.markedSpans;if(C)for(var _=0;_<C.length;++_)C[_].from!=null&&m.push(C[_].marker)}),m},posFromIndex:function(m){var x,C=this.first,_=this.lineSeparator().length;return this.iter(function(A){var M=A.text.length+_;if(M>m)return x=m,!0;m-=M,++C}),qt(this,Xe(C,x))},indexFromPos:function(m){var x=(m=qt(this,m)).ch;if(m.line<this.first||m.ch<0)return 0;var C=this.lineSeparator().length;return this.iter(this.first,m.line,function(_){x+=_.text.length+C}),x},copy:function(m){var x=new So(Sn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return x.scrollTop=this.scrollTop,x.scrollLeft=this.scrollLeft,x.sel=this.sel,x.extend=!1,m&&(x.history.undoDepth=this.history.undoDepth,x.setHistory(this.getHistory())),x},linkedDoc:function(m){m||(m={});var x=this.first,C=this.first+this.size;m.from!=null&&m.from>x&&(x=m.from),m.to!=null&&m.to<C&&(C=m.to);var _=new So(Sn(this,x,C),m.mode||this.modeOption,x,this.lineSep,this.direction);return m.sharedHist&&(_.history=this.history),(this.linked||(this.linked=[])).push({doc:_,sharedHist:m.sharedHist}),_.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],function(A,M){for(var N=0;N<M.length;N++){var j=M[N],V=j.find(),W=A.clipPos(V.from),ce=A.clipPos(V.to);if(pt(W,ce)){var de=wf(A,W,ce,j.primary,j.primary.type);j.markers.push(de),de.parent=j}}}(_,Dx(this)),_},unlinkDoc:function(m){if(m instanceof Oi&&(m=m.doc),this.linked){for(var x=0;x<this.linked.length;++x)if(this.linked[x].doc==m){this.linked.splice(x,1),m.unlinkDoc(this),zC(Dx(this));break}}if(m.history==this.history){var C=[m.id];nc(m,function(_){return C.push(_.id)},!0),m.history=new Bm(null),m.history.done=yf(this.history.done,C),m.history.undone=yf(this.history.undone,C)}},iterLinkedDocs:function(m){nc(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):mn(m)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ss(function(m){var x;m!="rtl"&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(C){return C.order=null}),this.cm&&Ho(x=this.cm,function(){lx(x),Co(x)}))})}),So.prototype.eachLine=So.prototype.iter;var Lx=0;function UC(m){var x=this;if(Rx(x),!ft(x,m)&&!mr(x.display,m)){rn(m),c&&(Lx=+new Date);var C=Qc(x,m,!0),_=m.dataTransfer.files;if(C&&!x.isReadOnly())if(_&&_.length&&window.FileReader&&window.File)for(var A=_.length,M=Array(A),N=0,j=function(){++N==A&&Cs(x,function(){var be={from:C=qt(x.doc,C),to:C,text:x.doc.splitLines(M.filter(function(Ie){return Ie!=null}).join(x.doc.lineSeparator())),origin:"paste"};vf(x.doc,be),mx(x.doc,ec(qt(x.doc,C),qt(x.doc,tc(be))))})()},V=function(be,Ie){if(x.options.allowDropFileTypes&&Pe(x.options.allowDropFileTypes,be.type)==-1)j();else{var Ne=new FileReader;Ne.onerror=function(){return j()},Ne.onload=function(){var Me=Ne.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Me)||(M[Ie]=Me),j()},Ne.readAsText(be)}},W=0;W<_.length;W++)V(_[W],W);else{if(x.state.draggingText&&x.doc.sel.contains(C)>-1)return x.state.draggingText(m),void setTimeout(function(){return x.display.input.focus()},20);try{var ce=m.dataTransfer.getData("Text");if(ce){var de;if(x.state.draggingText&&!x.state.draggingText.copy&&(de=x.listSelections()),Um(x.doc,ec(C,C)),de)for(var Ce=0;Ce<de.length;++Ce)xf(x.doc,"",de[Ce].anchor,de[Ce].head,"drag");x.replaceSelection(ce,"around","paste"),x.display.input.focus()}}catch{}}}}function Rx(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function Fx(m){if(document.getElementsByClassName){for(var x=document.getElementsByClassName("CodeMirror"),C=[],_=0;_<x.length;_++){var A=x[_].CodeMirror;A&&C.push(A)}C.length&&C[0].operation(function(){for(var M=0;M<C.length;M++)m(C[M])})}}var Ox=!1;function qC(){var m;Ox||(De(window,"resize",function(){m==null&&(m=setTimeout(function(){m=null,Fx(HC)},100))}),De(window,"blur",function(){return Fx(pf)}),Ox=!0)}function HC(m){var x=m.display;x.cachedCharWidth=x.cachedTextHeight=x.cachedPaddingH=null,x.scrollbarsClipped=!1,m.setSize()}for(var ic={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Wh=0;Wh<10;Wh++)ic[Wh+48]=ic[Wh+96]=String(Wh);for(var Gm=65;Gm<=90;Gm++)ic[Gm]=String.fromCharCode(Gm);for(var Yh=1;Yh<=12;Yh++)ic[Yh+111]=ic[Yh+63235]="F"+Yh;var vu={};function GC(m){var x,C,_,A,M=m.split(/-(?!$)/);m=M[M.length-1];for(var N=0;N<M.length-1;N++){var j=M[N];if(/^(cmd|meta|m)$/i.test(j))A=!0;else if(/^a(lt)?$/i.test(j))x=!0;else if(/^(c|ctrl|control)$/i.test(j))C=!0;else{if(!/^s(hift)?$/i.test(j))throw new Error("Unrecognized modifier name: "+j);_=!0}}return x&&(m="Alt-"+m),C&&(m="Ctrl-"+m),A&&(m="Cmd-"+m),_&&(m="Shift-"+m),m}function VC(m){var x={};for(var C in m)if(m.hasOwnProperty(C)){var _=m[C];if(/^(name|fallthrough|(de|at)tach)$/.test(C))continue;if(_=="..."){delete m[C];continue}for(var A=oe(C.split(" "),GC),M=0;M<A.length;M++){var N=void 0,j=void 0;M==A.length-1?(j=A.join(" "),N=_):(j=A.slice(0,M+1).join(" "),N="...");var V=x[j];if(V){if(V!=N)throw new Error("Inconsistent bindings for "+j)}else x[j]=N}delete m[C]}for(var W in x)m[W]=x[W];return m}function _f(m,x,C,_){var A=(x=Vm(x)).call?x.call(m,_):x[m];if(A===!1)return"nothing";if(A==="...")return"multi";if(A!=null&&C(A))return"handled";if(x.fallthrough){if(Object.prototype.toString.call(x.fallthrough)!="[object Array]")return _f(m,x.fallthrough,C,_);for(var M=0;M<x.fallthrough.length;M++){var N=_f(m,x.fallthrough[M],C,_);if(N)return N}}}function Mx(m){var x=typeof m=="string"?m:ic[m.keyCode];return x=="Ctrl"||x=="Alt"||x=="Shift"||x=="Mod"}function Ix(m,x,C){var _=m;return x.altKey&&_!="Alt"&&(m="Alt-"+m),(K?x.metaKey:x.ctrlKey)&&_!="Ctrl"&&(m="Ctrl-"+m),(K?x.ctrlKey:x.metaKey)&&_!="Mod"&&(m="Cmd-"+m),!C&&x.shiftKey&&_!="Shift"&&(m="Shift-"+m),m}function $x(m,x){if(y&&m.keyCode==34&&m.char)return!1;var C=ic[m.keyCode];return C!=null&&!m.altGraphKey&&(m.keyCode==3&&m.code&&(C=m.code),Ix(C,m,x))}function Vm(m){return typeof m=="string"?vu[m]:m}function Ef(m,x){for(var C=m.doc.sel.ranges,_=[],A=0;A<C.length;A++){for(var M=x(C[A]);_.length&&pt(M.from,ie(_).to)<=0;){var N=_.pop();if(pt(N.from,M.from)<0){M.from=N.from;break}}_.push(M)}Ho(m,function(){for(var j=_.length-1;j>=0;j--)xf(m.doc,"",_[j].from,_[j].to,"+delete");mf(m)})}function Sy(m,x,C){var _=P(m.text,x+C,C);return _<0||_>m.text.length?null:_}function Ay(m,x,C){var _=Sy(m,x.ch,C);return _==null?null:new Xe(x.line,_,C<0?"after":"before")}function ky(m,x,C,_,A){if(m){x.doc.direction=="rtl"&&(A=-A);var M=Ae(C,x.doc.direction);if(M){var N,j=A<0?ie(M):M[0],V=A<0==(j.level==1)?"after":"before";if(j.level>0||x.doc.direction=="rtl"){var W=gr(x,C);N=A<0?C.text.length-1:0;var ce=Nn(x,W,N).top;N=Q(function(de){return Nn(x,W,de).top==ce},A<0==(j.level==1)?j.from:j.to-1,N),V=="before"&&(N=Sy(C,N,1))}else N=A<0?j.to:j.from;return new Xe(_,N,V)}}return new Xe(_,A<0?C.text.length:0,A<0?"before":"after")}vu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},vu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},vu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},vu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},vu.default=k?vu.macDefault:vu.pcDefault;var Xh={selectAll:xx,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),ht)},killLine:function(m){return Ef(m,function(x){if(x.empty()){var C=Qe(m.doc,x.head.line).text.length;return x.head.ch==C&&x.head.line<m.lastLine()?{from:x.head,to:Xe(x.head.line+1,0)}:{from:x.head,to:Xe(x.head.line,C)}}return{from:x.from(),to:x.to()}})},deleteLine:function(m){return Ef(m,function(x){return{from:Xe(x.from().line,0),to:qt(m.doc,Xe(x.to().line+1,0))}})},delLineLeft:function(m){return Ef(m,function(x){return{from:Xe(x.from().line,0),to:x.from()}})},delWrappedLineLeft:function(m){return Ef(m,function(x){var C=m.charCoords(x.head,"div").top+5;return{from:m.coordsChar({left:0,top:C},"div"),to:x.from()}})},delWrappedLineRight:function(m){return Ef(m,function(x){var C=m.charCoords(x.head,"div").top+5,_=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:C},"div");return{from:x.from(),to:_}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(Xe(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(Xe(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(x){return Px(m,x.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(x){return Nx(m,x.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(x){return function(C,_){var A=Qe(C.doc,_),M=function(N){for(var j;j=fi(N);)N=j.find(1,!0).line;return N}(A);return M!=A&&(_=jt(M)),ky(!0,C,A,_,-1)}(m,x.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(x){var C=m.cursorCoords(x.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:C},"div")},Vt)},goLineLeft:function(m){return m.extendSelectionsBy(function(x){var C=m.cursorCoords(x.head,"div").top+5;return m.coordsChar({left:0,top:C},"div")},Vt)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(x){var C=m.cursorCoords(x.head,"div").top+5,_=m.coordsChar({left:0,top:C},"div");return _.ch<m.getLine(_.line).search(/\S/)?Nx(m,x.head):_},Vt)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("	")},insertSoftTab:function(m){for(var x=[],C=m.listSelections(),_=m.options.tabSize,A=0;A<C.length;A++){var M=C[A].from(),N=$e(m.getLine(M.line),M.ch,_);x.push(pe(_-N%_))}m.replaceSelections(x)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Ho(m,function(){for(var x=m.listSelections(),C=[],_=0;_<x.length;_++)if(x[_].empty()){var A=x[_].head,M=Qe(m.doc,A.line).text;if(M){if(A.ch==M.length&&(A=new Xe(A.line,A.ch-1)),A.ch>0)A=new Xe(A.line,A.ch+1),m.replaceRange(M.charAt(A.ch-1)+M.charAt(A.ch-2),Xe(A.line,A.ch-2),A,"+transpose");else if(A.line>m.doc.first){var N=Qe(m.doc,A.line-1).text;N&&(A=new Xe(A.line,1),m.replaceRange(M.charAt(0)+m.doc.lineSeparator()+N.charAt(N.length-1),Xe(A.line-1,N.length-1),A,"+transpose"))}}C.push(new Nr(A,A))}m.setSelections(C)})},newlineAndIndent:function(m){return Ho(m,function(){for(var x=m.listSelections(),C=x.length-1;C>=0;C--)m.replaceRange(m.doc.lineSeparator(),x[C].anchor,x[C].head,"+input");x=m.listSelections();for(var _=0;_<x.length;_++)m.indentLine(x[_].from().line,null,!0);mf(m)})},openLine:function(m){return m.replaceSelection(`
`,"start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function Px(m,x){var C=Qe(m.doc,x),_=Xi(C);return _!=C&&(x=jt(_)),ky(!0,m,_,x,1)}function Nx(m,x){var C=Px(m,x.line),_=Qe(m.doc,C.line),A=Ae(_,m.doc.direction);if(!A||A[0].level==0){var M=Math.max(C.ch,_.text.search(/\S/)),N=x.line==C.line&&x.ch<=M&&x.ch;return Xe(C.line,N?0:M,C.sticky)}return C}function Wm(m,x,C){if(typeof x=="string"&&!(x=Xh[x]))return!1;m.display.input.ensurePolled();var _=m.display.shift,A=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),C&&(m.display.shift=!1),A=x(m)!=St}finally{m.display.shift=_,m.state.suppressEdits=!1}return A}var WC=new qe;function Zh(m,x,C,_){var A=m.state.keySeq;if(A){if(Mx(x))return"handled";if(/\'$/.test(x)?m.state.keySeq=null:WC.set(50,function(){m.state.keySeq==A&&(m.state.keySeq=null,m.display.input.reset())}),Bx(m,A+" "+x,C,_))return!0}return Bx(m,x,C,_)}function Bx(m,x,C,_){var A=function(M,N,j){for(var V=0;V<M.state.keyMaps.length;V++){var W=_f(N,M.state.keyMaps[V],j,M);if(W)return W}return M.options.extraKeys&&_f(N,M.options.extraKeys,j,M)||_f(N,M.options.keyMap,j,M)}(m,x,_);return A=="multi"&&(m.state.keySeq=x),A=="handled"&&Gr(m,"keyHandled",m,x,C),A!="handled"&&A!="multi"||(rn(C),uy(m)),!!A}function zx(m,x){var C=$x(x,!0);return!!C&&(x.shiftKey&&!m.state.keySeq?Zh(m,"Shift-"+C,x,function(_){return Wm(m,_,!0)})||Zh(m,C,x,function(_){if(typeof _=="string"?/^go[A-Z]/.test(_):_.motion)return Wm(m,_)}):Zh(m,C,x,function(_){return Wm(m,_)}))}var Ty=null;function jx(m){var x=this;if(!(m.target&&m.target!=x.display.input.getField()||(x.curOp.focus=ee(ze(x)),ft(x,m)))){c&&f<11&&m.keyCode==27&&(m.returnValue=!1);var C=m.keyCode;x.display.shift=C==16||m.shiftKey;var _=zx(x,m);y&&(Ty=_?C:null,_||C!=88||or||!(k?m.metaKey:m.ctrlKey)||x.replaceSelection("",null,"cut")),a&&!k&&!_&&C==46&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),C!=18||/\bCodeMirror-crosshair\b/.test(x.display.lineDiv.className)||function(A){var M=A.display.lineDiv;function N(j){j.keyCode!=18&&j.altKey||(U(M,"CodeMirror-crosshair"),We(document,"keyup",N),We(document,"mouseover",N))}z(M,"CodeMirror-crosshair"),De(document,"keyup",N),De(document,"mouseover",N)}(x)}}function Ux(m){m.keyCode==16&&(this.doc.sel.shift=!1),ft(this,m)}function qx(m){var x=this;if(!(m.target&&m.target!=x.display.input.getField()||mr(x.display,m)||ft(x,m)||m.ctrlKey&&!m.altKey||k&&m.metaKey)){var C=m.keyCode,_=m.charCode;if(y&&C==Ty)return Ty=null,void rn(m);if(!y||m.which&&!(m.which<10)||!zx(x,m)){var A=String.fromCharCode(_??C);A!="\b"&&(function(M,N,j){return Zh(M,"'"+j+"'",N,function(V){return Wm(M,V,!0)})}(x,m,A)||x.display.input.onKeyPress(m))}}}var Kh,Jh,Dy=function(m,x,C){this.time=m,this.pos=x,this.button=C};function Hx(m){var x=this,C=x.display;if(!(ft(x,m)||C.activeTouch&&C.input.supportsTouch())){if(C.input.ensurePolled(),C.shift=m.shiftKey,mr(C,m))h||(C.scroller.draggable=!1,setTimeout(function(){return C.scroller.draggable=!0},100));else if(!Ly(x,m)){var _=Qc(x,m),A=Qi(m),M=_?function(N,j){var V=+new Date;return Jh&&Jh.compare(V,N,j)?(Kh=Jh=null,"triple"):Kh&&Kh.compare(V,N,j)?(Jh=new Dy(V,N,j),Kh=null,"double"):(Kh=new Dy(V,N,j),Jh=null,"single")}(_,A):"single";He(x).focus(),A==1&&x.state.selectingText&&x.state.selectingText(m),_&&function(N,j,V,W,ce){var de="Click";return W=="double"?de="Double"+de:W=="triple"&&(de="Triple"+de),Zh(N,Ix(de=(j==1?"Left":j==2?"Middle":"Right")+de,ce),ce,function(Ce){if(typeof Ce=="string"&&(Ce=Xh[Ce]),!Ce)return!1;var be=!1;try{N.isReadOnly()&&(N.state.suppressEdits=!0),be=Ce(N,V)!=St}finally{N.state.suppressEdits=!1}return be})}(x,A,_,M,m)||(A==1?_?function(N,j,V,W){c?setTimeout(je(G1,N),0):N.curOp.focus=ee(ze(N));var ce,de=function(be,Ie,Ne){var Me=be.getOption("configureMouse"),Ve=Me?Me(be,Ie,Ne):{};if(Ve.unit==null){var nt=R?Ne.shiftKey&&Ne.metaKey:Ne.altKey;Ve.unit=nt?"rectangle":Ie=="single"?"char":Ie=="double"?"word":"line"}return(Ve.extend==null||be.doc.extend)&&(Ve.extend=be.doc.extend||Ne.shiftKey),Ve.addNew==null&&(Ve.addNew=k?Ne.metaKey:Ne.ctrlKey),Ve.moveOnDrag==null&&(Ve.moveOnDrag=!(k?Ne.altKey:Ne.ctrlKey)),Ve}(N,V,W),Ce=N.doc.sel;N.options.dragDrop&&zo&&!N.isReadOnly()&&V=="single"&&(ce=Ce.contains(j))>-1&&(pt((ce=Ce.ranges[ce]).from(),j)<0||j.xRel>0)&&(pt(ce.to(),j)>0||j.xRel<0)?function(be,Ie,Ne,Me){var Ve=be.display,nt=!1,Je=Cs(be,function(gt){h&&(Ve.scroller.draggable=!1),be.state.draggingText=!1,be.state.delayingBlurEvent&&(be.hasFocus()?be.state.delayingBlurEvent=!1:cy(be)),We(Ve.wrapper.ownerDocument,"mouseup",Je),We(Ve.wrapper.ownerDocument,"mousemove",mt),We(Ve.scroller,"dragstart",ct),We(Ve.scroller,"drop",Je),nt||(rn(gt),Me.addNew||jm(be.doc,Ne,null,null,Me.extend),h&&!v||c&&f==9?setTimeout(function(){Ve.wrapper.ownerDocument.body.focus({preventScroll:!0}),Ve.input.focus()},20):Ve.input.focus())}),mt=function(gt){nt=nt||Math.abs(Ie.clientX-gt.clientX)+Math.abs(Ie.clientY-gt.clientY)>=10},ct=function(){return nt=!0};h&&(Ve.scroller.draggable=!0),be.state.draggingText=Je,Je.copy=!Me.moveOnDrag,De(Ve.wrapper.ownerDocument,"mouseup",Je),De(Ve.wrapper.ownerDocument,"mousemove",mt),De(Ve.scroller,"dragstart",ct),De(Ve.scroller,"drop",Je),be.state.delayingBlurEvent=!0,setTimeout(function(){return Ve.input.focus()},20),Ve.scroller.dragDrop&&Ve.scroller.dragDrop()}(N,W,j,de):function(be,Ie,Ne,Me){c&&cy(be);var Ve=be.display,nt=be.doc;rn(Ie);var Je,mt,ct=nt.sel,gt=ct.ranges;if(Me.addNew&&!Me.extend?(mt=nt.sel.contains(Ne),Je=mt>-1?gt[mt]:new Nr(Ne,Ne)):(Je=nt.sel.primary(),mt=nt.sel.primIndex),Me.unit=="rectangle")Me.addNew||(Je=new Nr(Ne,Ne)),Ne=Qc(be,Ie,!0,!0),mt=-1;else{var bn=Gx(be,Ne,Me.unit);Je=Me.extend?Ey(Je,bn.anchor,bn.head,Me.extend):bn}Me.addNew?mt==-1?(mt=gt.length,Ys(nt,ml(be,gt.concat([Je]),mt),{scroll:!1,origin:"*mouse"})):gt.length>1&&gt[mt].empty()&&Me.unit=="char"&&!Me.extend?(Ys(nt,ml(be,gt.slice(0,mt).concat(gt.slice(mt+1)),0),{scroll:!1,origin:"*mouse"}),ct=nt.sel):Cy(nt,mt,Je,nn):(mt=0,Ys(nt,new ga([Je],0),nn),ct=nt.sel);var Mt=Ne;function Gn(In){if(pt(Mt,In)!=0)if(Mt=In,Me.unit=="rectangle"){for(var zr=[],Fn=be.options.tabSize,Qn=$e(Qe(nt,Ne.line).text,Ne.ch,Fn),Bn=$e(Qe(nt,In.line).text,In.ch,Fn),vr=Math.min(Qn,Bn),co=Math.max(Qn,Bn),jr=Math.min(Ne.line,In.line),Xs=Math.min(be.lastLine(),Math.max(Ne.line,In.line));jr<=Xs;jr++){var Zs=Qe(nt,jr).text,Ti=Mn(Zs,vr,Fn);vr==co?zr.push(new Nr(Xe(jr,Ti),Xe(jr,Ti))):Zs.length>Ti&&zr.push(new Nr(Xe(jr,Ti),Xe(jr,Mn(Zs,co,Fn))))}zr.length||zr.push(new Nr(Ne,Ne)),Ys(nt,ml(be,ct.ranges.slice(0,mt).concat(zr),mt),{origin:"*mouse",scroll:!1}),be.scrollIntoView(In)}else{var fo,Ba=Je,$s=Gx(be,In,Me.unit),yl=Ba.anchor;pt($s.anchor,yl)>0?(fo=$s.head,yl=Fr(Ba.from(),$s.anchor)):(fo=$s.anchor,yl=Ar(Ba.to(),$s.head));var Jm=ct.ranges.slice(0);Jm[mt]=function(rw,sd){var Go=sd.anchor,sc=sd.head,JC=Qe(rw.doc,Go.line);if(pt(Go,sc)==0&&Go.sticky==sc.sticky)return sd;var Af=Ae(JC);if(!Af)return sd;var My=ae(Af,Go.ch,Go.sticky),ep=Af[My];if(ep.from!=Go.ch&&ep.to!=Go.ch)return sd;var Qm,tp=My+(ep.from==Go.ch==(ep.level!=1)?0:1);if(tp==0||tp==Af.length)return sd;if(sc.line!=Go.line)Qm=(sc.line-Go.line)*(rw.doc.direction=="ltr"?1:-1)>0;else{var Iy=ae(Af,sc.ch,sc.sticky),iw=Iy-My||(sc.ch-Go.ch)*(ep.level==1?-1:1);Qm=Iy==tp-1||Iy==tp?iw<0:iw>0}var $y=Af[tp+(Qm?-1:0)],sw=Qm==($y.level==1),ow=sw?$y.from:$y.to,aw=sw?"after":"before";return Go.ch==ow&&Go.sticky==aw?sd:new Nr(new Xe(Go.line,ow,aw),sc)}(be,new Nr(qt(nt,yl),fo)),Ys(nt,ml(be,Jm,mt),nn)}}var dn=Ve.wrapper.getBoundingClientRect(),lr=0;function Br(In){var zr=++lr,Fn=Qc(be,In,!0,Me.unit=="rectangle");if(Fn)if(pt(Fn,Mt)!=0){be.curOp.focus=ee(ze(be)),Gn(Fn);var Qn=Im(Ve,nt);(Fn.line>=Qn.to||Fn.line<Qn.from)&&setTimeout(Cs(be,function(){lr==zr&&Br(In)}),150)}else{var Bn=In.clientY<dn.top?-20:In.clientY>dn.bottom?20:0;Bn&&setTimeout(Cs(be,function(){lr==zr&&(Ve.scroller.scrollTop+=Bn,Br(In))}),50)}}function ur(In){be.state.selectingText=!1,lr=1/0,In&&(rn(In),Ve.input.focus()),We(Ve.wrapper.ownerDocument,"mousemove",Kn),We(Ve.wrapper.ownerDocument,"mouseup",cr),nt.history.lastSelOrigin=null}var Kn=Cs(be,function(In){In.buttons!==0&&Qi(In)?Br(In):ur(In)}),cr=Cs(be,ur);be.state.selectingText=cr,De(Ve.wrapper.ownerDocument,"mousemove",Kn),De(Ve.wrapper.ownerDocument,"mouseup",cr)}(N,W,j,de)}(x,_,M,m):Cr(m)==C.scroller&&rn(m):A==2?(_&&jm(x.doc,_),setTimeout(function(){return C.input.focus()},20)):A==3&&(L?x.display.input.onContextMenu(m):cy(x)))}}}function Gx(m,x,C){if(C=="char")return new Nr(x,x);if(C=="word")return m.findWordAt(x);if(C=="line")return new Nr(Xe(x.line,0),qt(m.doc,Xe(x.line+1,0)));var _=C(m,x);return new Nr(_.from,_.to)}function Vx(m,x,C,_){var A,M;if(x.touches)A=x.touches[0].clientX,M=x.touches[0].clientY;else try{A=x.clientX,M=x.clientY}catch{return!1}if(A>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;_&&rn(x);var N=m.display,j=N.lineDiv.getBoundingClientRect();if(M>j.bottom||!xt(m,C))return on(x);M-=j.top-N.viewOffset;for(var V=0;V<m.display.gutterSpecs.length;++V){var W=N.gutters.childNodes[V];if(W&&W.getBoundingClientRect().right>=A)return tt(m,C,m,Sr(m.doc,M),m.display.gutterSpecs[V].className,x),on(x)}}function Ly(m,x){return Vx(m,x,"gutterClick",!0)}function Wx(m,x){mr(m.display,x)||function(C,_){return xt(C,"gutterContextMenu")?Vx(C,_,"gutterContextMenu",!1):!1}(m,x)||ft(m,x,"contextmenu")||L||m.display.input.onContextMenu(x)}function Yx(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fh(m)}Dy.prototype.compare=function(m,x,C){return this.time+400>m&&pt(x,this.pos)==0&&C==this.button};var Cf={toString:function(){return"CodeMirror.Init"}},Xx={},Ym={};function YC(m,x,C){if(!x!=!(C&&C!=Cf)){var _=m.display.dragFunctions,A=x?De:We;A(m.display.scroller,"dragstart",_.start),A(m.display.scroller,"dragenter",_.enter),A(m.display.scroller,"dragover",_.over),A(m.display.scroller,"dragleave",_.leave),A(m.display.scroller,"drop",_.drop)}}function XC(m){m.options.lineWrapping?(z(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(U(m.display.wrapper,"CodeMirror-wrap"),yt(m)),ay(m),Co(m),Fh(m),setTimeout(function(){return gf(m)},100)}function Oi(m,x){var C=this;if(!(this instanceof Oi))return new Oi(m,x);this.options=x=x?we(x):{},we(Xx,x,!1);var _=x.value;typeof _=="string"?_=new So(_,x.mode,null,x.lineSeparator,x.direction):x.mode&&(_.modeOption=x.mode),this.doc=_;var A=new Oi.inputStyles[x.inputStyle](this),M=this.display=new $C(m,_,A,x);for(var N in M.wrapper.CodeMirror=this,Yx(this),x.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),K1(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qe,keySeq:null,specialChars:null},x.autofocus&&!D&&M.input.focus(),c&&f<11&&setTimeout(function(){return C.display.input.reset(!0)},20),function(V){var W=V.display;De(W.scroller,"mousedown",Cs(V,Hx)),De(W.scroller,"dblclick",c&&f<11?Cs(V,function(Me){if(!ft(V,Me)){var Ve=Qc(V,Me);if(Ve&&!Ly(V,Me)&&!mr(V.display,Me)){rn(Me);var nt=V.findWordAt(Ve);jm(V.doc,nt.anchor,nt.head)}}}):function(Me){return ft(V,Me)||rn(Me)}),De(W.scroller,"contextmenu",function(Me){return Wx(V,Me)}),De(W.input.getField(),"contextmenu",function(Me){W.scroller.contains(Me.target)||Wx(V,Me)});var ce,de={end:0};function Ce(){W.activeTouch&&(ce=setTimeout(function(){return W.activeTouch=null},1e3),(de=W.activeTouch).end=+new Date)}function be(Me){if(Me.touches.length!=1)return!1;var Ve=Me.touches[0];return Ve.radiusX<=1&&Ve.radiusY<=1}function Ie(Me,Ve){if(Ve.left==null)return!0;var nt=Ve.left-Me.left,Je=Ve.top-Me.top;return nt*nt+Je*Je>400}De(W.scroller,"touchstart",function(Me){if(!ft(V,Me)&&!be(Me)&&!Ly(V,Me)){W.input.ensurePolled(),clearTimeout(ce);var Ve=+new Date;W.activeTouch={start:Ve,moved:!1,prev:Ve-de.end<=300?de:null},Me.touches.length==1&&(W.activeTouch.left=Me.touches[0].pageX,W.activeTouch.top=Me.touches[0].pageY)}}),De(W.scroller,"touchmove",function(){W.activeTouch&&(W.activeTouch.moved=!0)}),De(W.scroller,"touchend",function(Me){var Ve=W.activeTouch;if(Ve&&!mr(W,Me)&&Ve.left!=null&&!Ve.moved&&new Date-Ve.start<300){var nt,Je=V.coordsChar(W.activeTouch,"page");nt=!Ve.prev||Ie(Ve,Ve.prev)?new Nr(Je,Je):!Ve.prev.prev||Ie(Ve,Ve.prev.prev)?V.findWordAt(Je):new Nr(Xe(Je.line,0),qt(V.doc,Xe(Je.line+1,0))),V.setSelection(nt.anchor,nt.head),V.focus(),rn(Me)}Ce()}),De(W.scroller,"touchcancel",Ce),De(W.scroller,"scroll",function(){W.scroller.clientHeight&&(Ih(V,W.scroller.scrollTop),td(V,W.scroller.scrollLeft,!0),tt(V,"scroll",V))}),De(W.scroller,"mousewheel",function(Me){return rx(V,Me)}),De(W.scroller,"DOMMouseScroll",function(Me){return rx(V,Me)}),De(W.wrapper,"scroll",function(){return W.wrapper.scrollTop=W.wrapper.scrollLeft=0}),W.dragFunctions={enter:function(Me){ft(V,Me)||Tn(Me)},over:function(Me){ft(V,Me)||(function(Ve,nt){var Je=Qc(Ve,nt);if(Je){var mt=document.createDocumentFragment();ly(Ve,Je,mt),Ve.display.dragCursor||(Ve.display.dragCursor=X("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),Ve.display.lineSpace.insertBefore(Ve.display.dragCursor,Ve.display.cursorDiv)),Y(Ve.display.dragCursor,mt)}}(V,Me),Tn(Me))},start:function(Me){return function(Ve,nt){if(c&&(!Ve.state.draggingText||+new Date-Lx<100))Tn(nt);else if(!ft(Ve,nt)&&!mr(Ve.display,nt)&&(nt.dataTransfer.setData("Text",Ve.getSelection()),nt.dataTransfer.effectAllowed="copyMove",nt.dataTransfer.setDragImage&&!v)){var Je=X("img",null,null,"position: fixed; left: 0; top: 0;");Je.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(Je.width=Je.height=1,Ve.display.wrapper.appendChild(Je),Je._top=Je.offsetTop),nt.dataTransfer.setDragImage(Je,0,0),y&&Je.parentNode.removeChild(Je)}}(V,Me)},drop:Cs(V,UC),leave:function(Me){ft(V,Me)||Rx(V)}};var Ne=W.input.getField();De(Ne,"keyup",function(Me){return Ux.call(V,Me)}),De(Ne,"keydown",Cs(V,jx)),De(Ne,"keypress",Cs(V,qx)),De(Ne,"focus",function(Me){return dy(V,Me)}),De(Ne,"blur",function(Me){return pf(V,Me)})}(this),qC(),rd(this),this.curOp.forceUpdate=!0,ax(this,_),x.autofocus&&!D||this.hasFocus()?setTimeout(function(){C.hasFocus()&&!C.state.focused&&dy(C)},20):pf(this),Ym)Ym.hasOwnProperty(N)&&Ym[N](this,x[N],Cf);ex(this),x.finishInit&&x.finishInit(this);for(var j=0;j<Ry.length;++j)Ry[j](this);id(this),h&&x.lineWrapping&&getComputedStyle(M.lineDiv).textRendering=="optimizelegibility"&&(M.lineDiv.style.textRendering="auto")}Oi.defaults=Xx,Oi.optionHandlers=Ym;var Ry=[];function Qh(m,x,C,_){var A,M=m.doc;C==null&&(C="add"),C=="smart"&&(M.mode.indent?A=io(m,x).state:C="prev");var N=m.options.tabSize,j=Qe(M,x),V=$e(j.text,null,N);j.stateAfter&&(j.stateAfter=null);var W,ce=j.text.match(/^\s*/)[0];if(_||/\S/.test(j.text)){if(C=="smart"&&((W=M.mode.indent(A,j.text.slice(ce.length),j.text))==St||W>150)){if(!_)return;C="prev"}}else W=0,C="not";C=="prev"?W=x>M.first?$e(Qe(M,x-1).text,null,N):0:C=="add"?W=V+m.options.indentUnit:C=="subtract"?W=V-m.options.indentUnit:typeof C=="number"&&(W=V+C),W=Math.max(0,W);var de="",Ce=0;if(m.options.indentWithTabs)for(var be=Math.floor(W/N);be;--be)Ce+=N,de+="	";if(Ce<W&&(de+=pe(W-Ce)),de!=ce)return xf(M,de,Xe(x,0),Xe(x,ce.length),"+input"),j.stateAfter=null,!0;for(var Ie=0;Ie<M.sel.ranges.length;Ie++){var Ne=M.sel.ranges[Ie];if(Ne.head.line==x&&Ne.head.ch<ce.length){var Me=Xe(x,ce.length);Cy(M,Ie,new Nr(Me,Me));break}}}Oi.defineInitHook=function(m){return Ry.push(m)};var gl=null;function Xm(m){gl=m}function Fy(m,x,C,_,A){var M=m.doc;m.display.shift=!1,_||(_=M.sel);var N=+new Date-200,j=A=="paste"||m.state.pasteIncoming>N,V=mn(x),W=null;if(j&&_.ranges.length>1)if(gl&&gl.text.join(`
`)==x){if(_.ranges.length%gl.text.length==0){W=[];for(var ce=0;ce<gl.text.length;ce++)W.push(M.splitLines(gl.text[ce]))}}else V.length==_.ranges.length&&m.options.pasteLinesPerSelection&&(W=oe(V,function(Ve){return[Ve]}));for(var de=m.curOp.updateInput,Ce=_.ranges.length-1;Ce>=0;Ce--){var be=_.ranges[Ce],Ie=be.from(),Ne=be.to();be.empty()&&(C&&C>0?Ie=Xe(Ie.line,Ie.ch-C):m.state.overwrite&&!j?Ne=Xe(Ne.line,Math.min(Qe(M,Ne.line).text.length,Ne.ch+ie(V).length)):j&&gl&&gl.lineWise&&gl.text.join(`
`)==V.join(`
`)&&(Ie=Ne=Xe(Ie.line,0)));var Me={from:Ie,to:Ne,text:W?W[Ce%W.length]:V,origin:A||(j?"paste":m.state.cutIncoming>N?"cut":"+input")};vf(m.doc,Me),Gr(m,"inputRead",m,Me)}x&&!j&&Kx(m,x),mf(m),m.curOp.updateInput<2&&(m.curOp.updateInput=de),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function Zx(m,x){var C=m.clipboardData&&m.clipboardData.getData("Text");if(C)return m.preventDefault(),x.isReadOnly()||x.options.disableInput||!x.hasFocus()||Ho(x,function(){return Fy(x,C,0,null,"paste")}),!0}function Kx(m,x){if(m.options.electricChars&&m.options.smartIndent)for(var C=m.doc.sel,_=C.ranges.length-1;_>=0;_--){var A=C.ranges[_];if(!(A.head.ch>100||_&&C.ranges[_-1].head.line==A.head.line)){var M=m.getModeAt(A.head),N=!1;if(M.electricChars){for(var j=0;j<M.electricChars.length;j++)if(x.indexOf(M.electricChars.charAt(j))>-1){N=Qh(m,A.head.line,"smart");break}}else M.electricInput&&M.electricInput.test(Qe(m.doc,A.head.line).text.slice(0,A.head.ch))&&(N=Qh(m,A.head.line,"smart"));N&&Gr(m,"electricInput",m,A.head.line)}}}function Jx(m){for(var x=[],C=[],_=0;_<m.doc.sel.ranges.length;_++){var A=m.doc.sel.ranges[_].head.line,M={anchor:Xe(A,0),head:Xe(A+1,0)};C.push(M),x.push(m.getRange(M.anchor,M.head))}return{text:x,ranges:C}}function Qx(m,x,C,_){m.setAttribute("autocorrect",C?"":"off"),m.setAttribute("autocapitalize",_?"":"off"),m.setAttribute("spellcheck",!!x)}function ew(){var m=X("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),x=X("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?m.style.width="1000px":m.setAttribute("wrap","off"),S&&(m.style.border="1px solid black"),Qx(m),x}function Oy(m,x,C,_,A){var M=x,N=C,j=Qe(m,x.line),V=A&&m.direction=="rtl"?-C:C;function W(Ve){var nt,Je;if(_=="codepoint"){var mt=j.text.charCodeAt(x.ch+(C>0?0:-1));if(isNaN(mt))nt=null;else{var ct=C>0?mt>=55296&&mt<56320:mt>=56320&&mt<57343;nt=new Xe(x.line,Math.max(0,Math.min(j.text.length,x.ch+C*(ct?2:1))),-C)}}else nt=A?function(gt,bn,Mt,Gn){var dn=Ae(bn,gt.doc.direction);if(!dn)return Ay(bn,Mt,Gn);Mt.ch>=bn.text.length?(Mt.ch=bn.text.length,Mt.sticky="before"):Mt.ch<=0&&(Mt.ch=0,Mt.sticky="after");var lr=ae(dn,Mt.ch,Mt.sticky),Br=dn[lr];if(gt.doc.direction=="ltr"&&Br.level%2==0&&(Gn>0?Br.to>Mt.ch:Br.from<Mt.ch))return Ay(bn,Mt,Gn);var ur,Kn=function(jr,Xs){return Sy(bn,jr instanceof Xe?jr.ch:jr,Xs)},cr=function(jr){return gt.options.lineWrapping?(ur=ur||gr(gt,bn),j1(gt,bn,ur,jr)):{begin:0,end:bn.text.length}},In=cr(Mt.sticky=="before"?Kn(Mt,-1):Mt.ch);if(gt.doc.direction=="rtl"||Br.level==1){var zr=Br.level==1==Gn<0,Fn=Kn(Mt,zr?1:-1);if(Fn!=null&&(zr?Fn<=Br.to&&Fn<=In.end:Fn>=Br.from&&Fn>=In.begin)){var Qn=zr?"before":"after";return new Xe(Mt.line,Fn,Qn)}}var Bn=function(jr,Xs,Zs){for(var Ti=function(yl,Jm){return Jm?new Xe(Mt.line,Kn(yl,1),"before"):new Xe(Mt.line,yl,"after")};jr>=0&&jr<dn.length;jr+=Xs){var fo=dn[jr],Ba=Xs>0==(fo.level!=1),$s=Ba?Zs.begin:Kn(Zs.end,-1);if(fo.from<=$s&&$s<fo.to||($s=Ba?fo.from:Kn(fo.to,-1),Zs.begin<=$s&&$s<Zs.end))return Ti($s,Ba)}},vr=Bn(lr+Gn,Gn,In);if(vr)return vr;var co=Gn>0?In.end:Kn(In.begin,-1);return co==null||Gn>0&&co==bn.text.length||!(vr=Bn(Gn>0?0:dn.length-1,Gn,cr(co)))?null:vr}(m.cm,j,x,C):Ay(j,x,C);if(nt==null){if(Ve||(Je=x.line+V)<m.first||Je>=m.first+m.size||(x=new Xe(Je,x.ch,x.sticky),!(j=Qe(m,Je))))return!1;x=ky(A,m.cm,j,x.line,V)}else x=nt;return!0}if(_=="char"||_=="codepoint")W();else if(_=="column")W(!0);else if(_=="word"||_=="group")for(var ce=null,de=_=="group",Ce=m.cm&&m.cm.getHelper(x,"wordChars"),be=!0;!(C<0)||W(!be);be=!1){var Ie=j.text.charAt(x.ch)||`
`,Ne=re(Ie,Ce)?"w":de&&Ie==`
`?"n":!de||/\s/.test(Ie)?null:"p";if(!de||be||Ne||(Ne="s"),ce&&ce!=Ne){C<0&&(C=1,W(),x.sticky="after");break}if(Ne&&(ce=Ne),C>0&&!W(!be))break}var Me=qm(m,x,M,N,!0);return Zn(M,Me)&&(Me.hitSide=!0),Me}function tw(m,x,C,_){var A,M,N=m.doc,j=x.left;if(_=="page"){var V=Math.min(m.display.wrapper.clientHeight,He(m).innerHeight||N(m).documentElement.clientHeight),W=Math.max(V-.5*ff(m.display),3);A=(C>0?x.bottom:x.top)+C*W}else _=="line"&&(A=C>0?x.bottom+3:x.top-3);for(;(M=ry(m,j,A)).outside;){if(C<0?A<=0:A>=N.height){M.hitSide=!0;break}A+=5*C}return M}var Qr=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function nw(m,x){var C=Wn(m,x.line);if(!C||C.hidden)return null;var _=Qe(m.doc,x.line),A=ut(C,_,x.line),M=Ae(_,m.doc.direction),N="left";M&&(N=ae(M,x.ch)%2?"right":"left");var j=O1(A.map,x.ch,N);return j.offset=j.collapse=="right"?j.end:j.start,j}function Sf(m,x){return x&&(m.bad=!0),m}function Zm(m,x,C){var _;if(x==m.display.lineDiv){if(!(_=m.display.lineDiv.childNodes[C]))return Sf(m.clipPos(Xe(m.display.viewTo-1)),!0);x=null,C=0}else for(_=x;;_=_.parentNode){if(!_||_==m.display.lineDiv)return null;if(_.parentNode&&_.parentNode==m.display.lineDiv)break}for(var A=0;A<m.display.view.length;A++){var M=m.display.view[A];if(M.node==_)return ZC(M,x,C)}}function ZC(m,x,C){var _=m.text.firstChild,A=!1;if(!x||!le(_,x))return Sf(Xe(jt(m.line),0),!0);if(x==_&&(A=!0,x=_.childNodes[C],C=0,!x)){var M=m.rest?ie(m.rest):m.line;return Sf(Xe(jt(M),M.text.length),A)}var N=x.nodeType==3?x:null,j=x;for(N||x.childNodes.length!=1||x.firstChild.nodeType!=3||(N=x.firstChild,C&&(C=N.nodeValue.length));j.parentNode!=_;)j=j.parentNode;var V=m.measure,W=V.maps;function ce(Me,Ve,nt){for(var Je=-1;Je<(W?W.length:0);Je++)for(var mt=Je<0?V.map:W[Je],ct=0;ct<mt.length;ct+=3){var gt=mt[ct+2];if(gt==Me||gt==Ve){var bn=jt(Je<0?m.line:m.rest[Je]),Mt=mt[ct]+nt;return(nt<0||gt!=Me)&&(Mt=mt[ct+(nt?1:0)]),Xe(bn,Mt)}}}var de=ce(N,j,C);if(de)return Sf(de,A);for(var Ce=j.nextSibling,be=N?N.nodeValue.length-C:0;Ce;Ce=Ce.nextSibling){if(de=ce(Ce,Ce.firstChild,0))return Sf(Xe(de.line,de.ch-be),A);be+=Ce.textContent.length}for(var Ie=j.previousSibling,Ne=C;Ie;Ie=Ie.previousSibling){if(de=ce(Ie,Ie.firstChild,-1))return Sf(Xe(de.line,de.ch+Ne),A);Ne+=Ie.textContent.length}}Qr.prototype.init=function(m){var x=this,C=this,_=C.cm,A=C.div=m.lineDiv;function M(j){for(var V=j.target;V;V=V.parentNode){if(V==A)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(V.className))break}return!1}function N(j){if(M(j)&&!ft(_,j)){if(_.somethingSelected())Xm({lineWise:!1,text:_.getSelections()}),j.type=="cut"&&_.replaceSelection("",null,"cut");else{if(!_.options.lineWiseCopyCut)return;var V=Jx(_);Xm({lineWise:!0,text:V.text}),j.type=="cut"&&_.operation(function(){_.setSelections(V.ranges,0,ht),_.replaceSelection("",null,"cut")})}if(j.clipboardData){j.clipboardData.clearData();var W=gl.text.join(`
`);if(j.clipboardData.setData("Text",W),j.clipboardData.getData("Text")==W)return void j.preventDefault()}var ce=ew(),de=ce.firstChild;_.display.lineSpace.insertBefore(ce,_.display.lineSpace.firstChild),de.value=gl.text.join(`
`);var Ce=ee(A.ownerDocument);fe(de),setTimeout(function(){_.display.lineSpace.removeChild(ce),Ce.focus(),Ce==A&&C.showPrimarySelection()},50)}}A.contentEditable=!0,Qx(A,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),De(A,"paste",function(j){!M(j)||ft(_,j)||Zx(j,_)||f<=11&&setTimeout(Cs(_,function(){return x.updateFromDOM()}),20)}),De(A,"compositionstart",function(j){x.composing={data:j.data,done:!1}}),De(A,"compositionupdate",function(j){x.composing||(x.composing={data:j.data,done:!1})}),De(A,"compositionend",function(j){x.composing&&(j.data!=x.composing.data&&x.readFromDOMSoon(),x.composing.done=!0)}),De(A,"touchstart",function(){return C.forceCompositionEnd()}),De(A,"input",function(){x.composing||x.readFromDOMSoon()}),De(A,"copy",N),De(A,"cut",N)},Qr.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},Qr.prototype.prepareSelection=function(){var m=H1(this.cm,!1);return m.focus=ee(this.div.ownerDocument)==this.div,m},Qr.prototype.showSelection=function(m,x){m&&this.cm.display.view.length&&((m.focus||x)&&this.showPrimarySelection(),this.showMultipleSelections(m))},Qr.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qr.prototype.showPrimarySelection=function(){var m=this.getSelection(),x=this.cm,C=x.doc.sel.primary(),_=C.from(),A=C.to();if(x.display.viewTo==x.display.viewFrom||_.line>=x.display.viewTo||A.line<x.display.viewFrom)m.removeAllRanges();else{var M=Zm(x,m.anchorNode,m.anchorOffset),N=Zm(x,m.focusNode,m.focusOffset);if(!M||M.bad||!N||N.bad||pt(Fr(M,N),_)!=0||pt(Ar(M,N),A)!=0){var j=x.display.view,V=_.line>=x.display.viewFrom&&nw(x,_)||{node:j[0].measure.map[2],offset:0},W=A.line<x.display.viewTo&&nw(x,A);if(!W){var ce=j[j.length-1].measure,de=ce.maps?ce.maps[ce.maps.length-1]:ce.map;W={node:de[de.length-1],offset:de[de.length-2]-de[de.length-3]}}if(V&&W){var Ce,be=m.rangeCount&&m.getRangeAt(0);try{Ce=$(V.node,V.offset,W.offset,W.node)}catch{}Ce&&(!a&&x.state.focused?(m.collapse(V.node,V.offset),Ce.collapsed||(m.removeAllRanges(),m.addRange(Ce))):(m.removeAllRanges(),m.addRange(Ce)),be&&m.anchorNode==null?m.addRange(be):a&&this.startGracePeriod()),this.rememberSelection()}else m.removeAllRanges()}}},Qr.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},Qr.prototype.showMultipleSelections=function(m){Y(this.cm.display.cursorDiv,m.cursors),Y(this.cm.display.selectionDiv,m.selection)},Qr.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},Qr.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var x=m.getRangeAt(0).commonAncestorContainer;return le(this.div,x)},Qr.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&ee(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qr.prototype.blur=function(){this.div.blur()},Qr.prototype.getField=function(){return this.div},Qr.prototype.supportsTouch=function(){return!0},Qr.prototype.receivedFocus=function(){var m=this,x=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Ho(this.cm,function(){return x.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function C(){x.cm.state.focused&&(x.pollSelection(),x.polling.set(x.cm.options.pollInterval,C))})},Qr.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},Qr.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var m=this.getSelection(),x=this.cm;if(T&&g&&this.cm.display.gutterSpecs.length&&function(A){for(var M=A;M;M=M.parentNode)if(/CodeMirror-gutter-wrapper/.test(M.className))return!0;return!1}(m.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var C=Zm(x,m.anchorNode,m.anchorOffset),_=Zm(x,m.focusNode,m.focusOffset);C&&_&&Ho(x,function(){Ys(x.doc,ec(C,_),ht),(C.bad||_.bad)&&(x.curOp.selectionChanged=!0)})}}},Qr.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m,x,C,_=this.cm,A=_.display,M=_.doc.sel.primary(),N=M.from(),j=M.to();if(N.ch==0&&N.line>_.firstLine()&&(N=Xe(N.line-1,Qe(_.doc,N.line-1).length)),j.ch==Qe(_.doc,j.line).text.length&&j.line<_.lastLine()&&(j=Xe(j.line+1,0)),N.line<A.viewFrom||j.line>A.viewTo-1)return!1;N.line==A.viewFrom||(m=ed(_,N.line))==0?(x=jt(A.view[0].line),C=A.view[0].node):(x=jt(A.view[m].line),C=A.view[m-1].node.nextSibling);var V,W,ce=ed(_,j.line);if(ce==A.view.length-1?(V=A.viewTo-1,W=A.lineDiv.lastChild):(V=jt(A.view[ce+1].line)-1,W=A.view[ce+1].node.previousSibling),!C)return!1;for(var de=_.doc.splitLines(function(bn,Mt,Gn,dn,lr){var Br="",ur=!1,Kn=bn.doc.lineSeparator(),cr=!1;function In(Bn){return function(vr){return vr.id==Bn}}function zr(){ur&&(Br+=Kn,cr&&(Br+=Kn),ur=cr=!1)}function Fn(Bn){Bn&&(zr(),Br+=Bn)}function Qn(Bn){if(Bn.nodeType==1){var vr=Bn.getAttribute("cm-text");if(vr)return void Fn(vr);var co,jr=Bn.getAttribute("cm-marker");if(jr){var Xs=bn.findMarks(Xe(dn,0),Xe(lr+1,0),In(+jr));return void(Xs.length&&(co=Xs[0].find(0))&&Fn(hn(bn.doc,co.from,co.to).join(Kn)))}if(Bn.getAttribute("contenteditable")=="false")return;var Zs=/^(pre|div|p|li|table|br)$/i.test(Bn.nodeName);if(!/^br$/i.test(Bn.nodeName)&&Bn.textContent.length==0)return;Zs&&zr();for(var Ti=0;Ti<Bn.childNodes.length;Ti++)Qn(Bn.childNodes[Ti]);/^(pre|p)$/i.test(Bn.nodeName)&&(cr=!0),Zs&&(ur=!0)}else Bn.nodeType==3&&Fn(Bn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Qn(Mt),Mt!=Gn;)Mt=Mt.nextSibling,cr=!1;return Br}(_,C,W,x,V)),Ce=hn(_.doc,Xe(x,0),Xe(V,Qe(_.doc,V).text.length));de.length>1&&Ce.length>1;)if(ie(de)==ie(Ce))de.pop(),Ce.pop(),V--;else{if(de[0]!=Ce[0])break;de.shift(),Ce.shift(),x++}for(var be=0,Ie=0,Ne=de[0],Me=Ce[0],Ve=Math.min(Ne.length,Me.length);be<Ve&&Ne.charCodeAt(be)==Me.charCodeAt(be);)++be;for(var nt=ie(de),Je=ie(Ce),mt=Math.min(nt.length-(de.length==1?be:0),Je.length-(Ce.length==1?be:0));Ie<mt&&nt.charCodeAt(nt.length-Ie-1)==Je.charCodeAt(Je.length-Ie-1);)++Ie;if(de.length==1&&Ce.length==1&&x==N.line)for(;be&&be>N.ch&&nt.charCodeAt(nt.length-Ie-1)==Je.charCodeAt(Je.length-Ie-1);)be--,Ie++;de[de.length-1]=nt.slice(0,nt.length-Ie).replace(/^\u200b+/,""),de[0]=de[0].slice(be).replace(/\u200b+$/,"");var ct=Xe(x,be),gt=Xe(V,Ce.length?ie(Ce).length-Ie:0);return de.length>1||de[0]||pt(ct,gt)?(xf(_.doc,de,ct,gt,"+input"),!0):void 0},Qr.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qr.prototype.reset=function(){this.forceCompositionEnd()},Qr.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qr.prototype.readFromDOMSoon=function(){var m=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing){if(!m.composing.done)return;m.composing=null}m.updateFromDOM()},80))},Qr.prototype.updateFromDOM=function(){var m=this;!this.cm.isReadOnly()&&this.pollContent()||Ho(this.cm,function(){return Co(m.cm)})},Qr.prototype.setUneditable=function(m){m.contentEditable="false"},Qr.prototype.onKeyPress=function(m){m.charCode==0||this.composing||(m.preventDefault(),this.cm.isReadOnly()||Cs(this.cm,Fy)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0))},Qr.prototype.readOnlyChanged=function(m){this.div.contentEditable=String(m!="nocursor")},Qr.prototype.onContextMenu=function(){},Qr.prototype.resetPosition=function(){},Qr.prototype.needsContentAttribute=!0;var rs=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new qe,this.hasSelection=!1,this.composing=null,this.resetting=!1};rs.prototype.init=function(m){var x=this,C=this,_=this.cm;this.createField(m);var A=this.textarea;function M(N){if(!ft(_,N)){if(_.somethingSelected())Xm({lineWise:!1,text:_.getSelections()});else{if(!_.options.lineWiseCopyCut)return;var j=Jx(_);Xm({lineWise:!0,text:j.text}),N.type=="cut"?_.setSelections(j.ranges,null,ht):(C.prevInput="",A.value=j.text.join(`
`),fe(A))}N.type=="cut"&&(_.state.cutIncoming=+new Date)}}m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),S&&(A.style.width="0px"),De(A,"input",function(){c&&f>=9&&x.hasSelection&&(x.hasSelection=null),C.poll()}),De(A,"paste",function(N){ft(_,N)||Zx(N,_)||(_.state.pasteIncoming=+new Date,C.fastPoll())}),De(A,"cut",M),De(A,"copy",M),De(m.scroller,"paste",function(N){if(!mr(m,N)&&!ft(_,N)){if(!A.dispatchEvent)return _.state.pasteIncoming=+new Date,void C.focus();var j=new Event("paste");j.clipboardData=N.clipboardData,A.dispatchEvent(j)}}),De(m.lineSpace,"selectstart",function(N){mr(m,N)||rn(N)}),De(A,"compositionstart",function(){var N=_.getCursor("from");C.composing&&C.composing.range.clear(),C.composing={start:N,range:_.markText(N,_.getCursor("to"),{className:"CodeMirror-composing"})}}),De(A,"compositionend",function(){C.composing&&(C.poll(),C.composing.range.clear(),C.composing=null)})},rs.prototype.createField=function(m){this.wrapper=ew(),this.textarea=this.wrapper.firstChild},rs.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},rs.prototype.prepareSelection=function(){var m=this.cm,x=m.display,C=m.doc,_=H1(m);if(m.options.moveInputWithCursor){var A=pl(m,C.sel.primary().head,"div"),M=x.wrapper.getBoundingClientRect(),N=x.lineDiv.getBoundingClientRect();_.teTop=Math.max(0,Math.min(x.wrapper.clientHeight-10,A.top+N.top-M.top)),_.teLeft=Math.max(0,Math.min(x.wrapper.clientWidth-10,A.left+N.left-M.left))}return _},rs.prototype.showSelection=function(m){var x=this.cm.display;Y(x.cursorDiv,m.cursors),Y(x.selectionDiv,m.selection),m.teTop!=null&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},rs.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing&&m)){var x=this.cm;if(this.resetting=!0,x.somethingSelected()){this.prevInput="";var C=x.getSelection();this.textarea.value=C,x.state.focused&&fe(this.textarea),c&&f>=9&&(this.hasSelection=C)}else m||(this.prevInput=this.textarea.value="",c&&f>=9&&(this.hasSelection=null));this.resetting=!1}},rs.prototype.getField=function(){return this.textarea},rs.prototype.supportsTouch=function(){return!1},rs.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!D||ee(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},rs.prototype.blur=function(){this.textarea.blur()},rs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},rs.prototype.receivedFocus=function(){this.slowPoll()},rs.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},rs.prototype.fastPoll=function(){var m=!1,x=this;x.pollingFast=!0,x.polling.set(20,function C(){x.poll()||m?(x.pollingFast=!1,x.slowPoll()):(m=!0,x.polling.set(60,C))})},rs.prototype.poll=function(){var m=this,x=this.cm,C=this.textarea,_=this.prevInput;if(this.contextMenuPending||this.resetting||!x.state.focused||Kr(C)&&!_&&!this.composing||x.isReadOnly()||x.options.disableInput||x.state.keySeq)return!1;var A=C.value;if(A==_&&!x.somethingSelected())return!1;if(c&&f>=9&&this.hasSelection===A||k&&/[\uf700-\uf7ff]/.test(A))return x.display.input.reset(),!1;if(x.doc.sel==x.display.selForContextMenu){var M=A.charCodeAt(0);if(M!=8203||_||(_=""),M==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,j=Math.min(_.length,A.length);N<j&&_.charCodeAt(N)==A.charCodeAt(N);)++N;return Ho(x,function(){Fy(x,A.slice(N),_.length-N,null,m.composing?"*compose":null),A.length>1e3||A.indexOf(`
`)>-1?C.value=m.prevInput="":m.prevInput=A,m.composing&&(m.composing.range.clear(),m.composing.range=x.markText(m.composing.start,x.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},rs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},rs.prototype.onKeyPress=function(){c&&f>=9&&(this.hasSelection=null),this.fastPoll()},rs.prototype.onContextMenu=function(m){var x=this,C=x.cm,_=C.display,A=x.textarea;x.contextMenuPending&&x.contextMenuPending();var M=Qc(C,m),N=_.scroller.scrollTop;if(M&&!y){C.options.resetSelectionOnContextMenu&&C.doc.sel.contains(M)==-1&&Cs(C,Ys)(C.doc,ec(M),ht);var j,V=A.style.cssText,W=x.wrapper.style.cssText,ce=x.wrapper.offsetParent.getBoundingClientRect();if(x.wrapper.style.cssText="position: static",A.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(m.clientY-ce.top-5)+"px; left: "+(m.clientX-ce.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,h&&(j=A.ownerDocument.defaultView.scrollY),_.input.focus(),h&&A.ownerDocument.defaultView.scrollTo(null,j),_.input.reset(),C.somethingSelected()||(A.value=x.prevInput=" "),x.contextMenuPending=be,_.selForContextMenu=C.doc.sel,clearTimeout(_.detectingSelectAll),c&&f>=9&&Ce(),L){Tn(m);var de=function(){We(window,"mouseup",de),setTimeout(be,20)};De(window,"mouseup",de)}else setTimeout(be,50)}function Ce(){if(A.selectionStart!=null){var Ie=C.somethingSelected(),Ne=""+(Ie?A.value:"");A.value="",A.value=Ne,x.prevInput=Ie?"":"",A.selectionStart=1,A.selectionEnd=Ne.length,_.selForContextMenu=C.doc.sel}}function be(){if(x.contextMenuPending==be&&(x.contextMenuPending=!1,x.wrapper.style.cssText=W,A.style.cssText=V,c&&f<9&&_.scrollbars.setScrollTop(_.scroller.scrollTop=N),A.selectionStart!=null)){(!c||c&&f<9)&&Ce();var Ie=0,Ne=function(){_.selForContextMenu==C.doc.sel&&A.selectionStart==0&&A.selectionEnd>0&&x.prevInput==""?Cs(C,xx)(C):Ie++<10?_.detectingSelectAll=setTimeout(Ne,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(Ne,200)}}},rs.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled=m=="nocursor",this.textarea.readOnly=!!m},rs.prototype.setUneditable=function(){},rs.prototype.needsContentAttribute=!1,function(m){var x=m.optionHandlers;function C(_,A,M,N){m.defaults[_]=A,M&&(x[_]=N?function(j,V,W){W!=Cf&&M(j,V,W)}:M)}m.defineOption=C,m.Init=Cf,C("value","",function(_,A){return _.setValue(A)},!0),C("mode",null,function(_,A){_.doc.modeOption=A,xy(_)},!0),C("indentUnit",2,xy,!0),C("indentWithTabs",!1),C("smartIndent",!0),C("tabSize",4,function(_){zh(_),Fh(_),Co(_)},!0),C("lineSeparator",null,function(_,A){if(_.doc.lineSep=A,A){var M=[],N=_.doc.first;_.doc.iter(function(V){for(var W=0;;){var ce=V.text.indexOf(A,W);if(ce==-1)break;W=ce+A.length,M.push(Xe(N,ce))}N++});for(var j=M.length-1;j>=0;j--)xf(_.doc,A,M[j],Xe(M[j].line,M[j].ch+A.length))}}),C("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(_,A,M){_.state.specialChars=new RegExp(A.source+(A.test("	")?"":"|	"),"g"),M!=Cf&&_.refresh()}),C("specialCharPlaceholder",ki,function(_){return _.refresh()},!0),C("electricChars",!0),C("inputStyle",D?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),C("spellcheck",!1,function(_,A){return _.getInputField().spellcheck=A},!0),C("autocorrect",!1,function(_,A){return _.getInputField().autocorrect=A},!0),C("autocapitalize",!1,function(_,A){return _.getInputField().autocapitalize=A},!0),C("rtlMoveVisually",!O),C("wholeLineUpdateBefore",!0),C("theme","default",function(_){Yx(_),Bh(_)},!0),C("keyMap","default",function(_,A,M){var N=Vm(A),j=M!=Cf&&Vm(M);j&&j.detach&&j.detach(_,N),N.attach&&N.attach(_,j||null)}),C("extraKeys",null),C("configureMouse",null),C("lineWrapping",!1,XC,!0),C("gutters",[],function(_,A){_.display.gutterSpecs=by(A,_.options.lineNumbers),Bh(_)},!0),C("fixedGutter",!0,function(_,A){_.display.gutters.style.left=A?oy(_.display)+"px":"0",_.refresh()},!0),C("coverGutterNextToScrollbar",!1,function(_){return gf(_)},!0),C("scrollbarStyle","native",function(_){K1(_),gf(_),_.display.scrollbars.setScrollTop(_.doc.scrollTop),_.display.scrollbars.setScrollLeft(_.doc.scrollLeft)},!0),C("lineNumbers",!1,function(_,A){_.display.gutterSpecs=by(_.options.gutters,A),Bh(_)},!0),C("firstLineNumber",1,Bh,!0),C("lineNumberFormatter",function(_){return _},Bh,!0),C("showCursorWhenSelecting",!1,Oh,!0),C("resetSelectionOnContextMenu",!0),C("lineWiseCopyCut",!0),C("pasteLinesPerSelection",!0),C("selectionsMayTouch",!1),C("readOnly",!1,function(_,A){A=="nocursor"&&(pf(_),_.display.input.blur()),_.display.input.readOnlyChanged(A)}),C("screenReaderLabel",null,function(_,A){A=A===""?null:A,_.display.input.screenReaderLabelChanged(A)}),C("disableInput",!1,function(_,A){A||_.display.input.reset()},!0),C("dragDrop",!0,YC),C("allowDropFileTypes",null),C("cursorBlinkRate",530),C("cursorScrollMargin",0),C("cursorHeight",1,Oh,!0),C("singleCursorHeightPerLine",!0,Oh,!0),C("workTime",100),C("workDelay",100),C("flattenSpans",!0,zh,!0),C("addModeClass",!1,zh,!0),C("pollInterval",100),C("undoDepth",200,function(_,A){return _.doc.history.undoDepth=A}),C("historyEventDelay",1250),C("viewportMargin",10,function(_){return _.refresh()},!0),C("maxHighlightLength",1e4,zh,!0),C("moveInputWithCursor",!0,function(_,A){A||_.display.input.resetPosition()}),C("tabindex",null,function(_,A){return _.display.input.getField().tabIndex=A||""}),C("autofocus",null),C("direction","ltr",function(_,A){return _.doc.setDirection(A)},!0),C("phrases",null)}(Oi),function(m){var x=m.optionHandlers,C=m.helpers={};m.prototype={constructor:m,focus:function(){He(this).focus(),this.display.input.focus()},setOption:function(_,A){var M=this.options,N=M[_];M[_]==A&&_!="mode"||(M[_]=A,x.hasOwnProperty(_)&&Cs(this,x[_])(this,A,N),tt(this,"optionChange",this,_))},getOption:function(_){return this.options[_]},getDoc:function(){return this.doc},addKeyMap:function(_,A){this.state.keyMaps[A?"push":"unshift"](Vm(_))},removeKeyMap:function(_){for(var A=this.state.keyMaps,M=0;M<A.length;++M)if(A[M]==_||A[M].name==_)return A.splice(M,1),!0},addOverlay:uo(function(_,A){var M=_.token?_:m.getMode(this.options,_);if(M.startState)throw new Error("Overlays may not be stateful.");(function(N,j,V){for(var W=0,ce=V(j);W<N.length&&V(N[W])<=ce;)W++;N.splice(W,0,j)})(this.state.overlays,{mode:M,modeSpec:_,opaque:A&&A.opaque,priority:A&&A.priority||0},function(N){return N.priority}),this.state.modeGen++,Co(this)}),removeOverlay:uo(function(_){for(var A=this.state.overlays,M=0;M<A.length;++M){var N=A[M].modeSpec;if(N==_||typeof _=="string"&&N.name==_)return A.splice(M,1),this.state.modeGen++,void Co(this)}}),indentLine:uo(function(_,A,M){typeof A!="string"&&typeof A!="number"&&(A=A==null?this.options.smartIndent?"smart":"prev":A?"add":"subtract"),di(this.doc,_)&&Qh(this,_,A,M)}),indentSelection:uo(function(_){for(var A=this.doc.sel.ranges,M=-1,N=0;N<A.length;N++){var j=A[N];if(j.empty())j.head.line>M&&(Qh(this,j.head.line,_,!0),M=j.head.line,N==this.doc.sel.primIndex&&mf(this));else{var V=j.from(),W=j.to(),ce=Math.max(M,V.line);M=Math.min(this.lastLine(),W.line-(W.ch?0:1))+1;for(var de=ce;de<M;++de)Qh(this,de,_);var Ce=this.doc.sel.ranges;V.ch==0&&A.length==Ce.length&&Ce[N].from().ch>0&&Cy(this.doc,N,new Nr(V,Ce[N].to()),ht)}}}),getTokenAt:function(_,A){return ps(this,_,A)},getLineTokens:function(_,A){return ps(this,Xe(_),A,!0)},getTokenTypeAt:function(_){_=qt(this.doc,_);var A,M=_o(this,Qe(this.doc,_.line)),N=0,j=(M.length-1)/2,V=_.ch;if(V==0)A=M[2];else for(;;){var W=N+j>>1;if((W?M[2*W-1]:0)>=V)j=W;else{if(!(M[2*W+1]<V)){A=M[2*W+2];break}N=W+1}}var ce=A?A.indexOf("overlay "):-1;return ce<0?A:ce==0?null:A.slice(0,ce-1)},getModeAt:function(_){var A=this.doc.mode;return A.innerMode?m.innerMode(A,this.getTokenAt(_).state).mode:A},getHelper:function(_,A){return this.getHelpers(_,A)[0]},getHelpers:function(_,A){var M=[];if(!C.hasOwnProperty(A))return M;var N=C[A],j=this.getModeAt(_);if(typeof j[A]=="string")N[j[A]]&&M.push(N[j[A]]);else if(j[A])for(var V=0;V<j[A].length;V++){var W=N[j[A][V]];W&&M.push(W)}else j.helperType&&N[j.helperType]?M.push(N[j.helperType]):N[j.name]&&M.push(N[j.name]);for(var ce=0;ce<N._global.length;ce++){var de=N._global[ce];de.pred(j,this)&&Pe(M,de.val)==-1&&M.push(de.val)}return M},getStateAfter:function(_,A){var M=this.doc;return io(this,(_=rr(M,_??M.first+M.size-1))+1,A).state},cursorCoords:function(_,A){var M=this.doc.sel.primary();return pl(this,_==null?M.head:typeof _=="object"?qt(this.doc,_):_?M.from():M.to(),A||"page")},charCoords:function(_,A){return Rm(this,qt(this.doc,_),A||"page")},coordsChar:function(_,A){return ry(this,(_=N1(this,_,A||"page")).left,_.top)},lineAtHeight:function(_,A){return _=N1(this,{top:_,left:0},A||"page").top,Sr(this.doc,_+this.display.viewOffset)},heightAtLine:function(_,A,M){var N,j=!1;if(typeof _=="number"){var V=this.doc.first+this.doc.size-1;_<this.doc.first?_=this.doc.first:_>V&&(_=V,j=!0),N=Qe(this.doc,_)}else N=_;return Lm(this,N,{top:0,left:0},A||"page",M||j).top+(j?this.doc.height-me(N):0)},defaultTextHeight:function(){return ff(this.display)},defaultCharWidth:function(){return hf(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(_,A,M,N,j){var V,W,ce,de=this.display,Ce=(_=pl(this,qt(this.doc,_))).bottom,be=_.left;if(A.style.position="absolute",A.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(A),de.sizer.appendChild(A),N=="over")Ce=_.top;else if(N=="above"||N=="near"){var Ie=Math.max(de.wrapper.clientHeight,this.doc.height),Ne=Math.max(de.sizer.clientWidth,de.lineSpace.clientWidth);(N=="above"||_.bottom+A.offsetHeight>Ie)&&_.top>A.offsetHeight?Ce=_.top-A.offsetHeight:_.bottom+A.offsetHeight<=Ie&&(Ce=_.bottom),be+A.offsetWidth>Ne&&(be=Ne-A.offsetWidth)}A.style.top=Ce+"px",A.style.left=A.style.right="",j=="right"?(be=de.sizer.clientWidth-A.offsetWidth,A.style.right="0px"):(j=="left"?be=0:j=="middle"&&(be=(de.sizer.clientWidth-A.offsetWidth)/2),A.style.left=be+"px"),M&&(V=this,W={left:be,top:Ce,right:be+A.offsetWidth,bottom:Ce+A.offsetHeight},(ce=fy(V,W)).scrollTop!=null&&Ih(V,ce.scrollTop),ce.scrollLeft!=null&&td(V,ce.scrollLeft))},triggerOnKeyDown:uo(jx),triggerOnKeyPress:uo(qx),triggerOnKeyUp:Ux,triggerOnMouseDown:uo(Hx),execCommand:function(_){if(Xh.hasOwnProperty(_))return Xh[_].call(null,this)},triggerElectric:uo(function(_){Kx(this,_)}),findPosH:function(_,A,M,N){var j=1;A<0&&(j=-1,A=-A);for(var V=qt(this.doc,_),W=0;W<A&&!(V=Oy(this.doc,V,j,M,N)).hitSide;++W);return V},moveH:uo(function(_,A){var M=this;this.extendSelectionsBy(function(N){return M.display.shift||M.doc.extend||N.empty()?Oy(M.doc,N.head,_,A,M.options.rtlMoveVisually):_<0?N.from():N.to()},Vt)}),deleteH:uo(function(_,A){var M=this.doc.sel,N=this.doc;M.somethingSelected()?N.replaceSelection("",null,"+delete"):Ef(this,function(j){var V=Oy(N,j.head,_,A,!1);return _<0?{from:V,to:j.head}:{from:j.head,to:V}})}),findPosV:function(_,A,M,N){var j=1,V=N;A<0&&(j=-1,A=-A);for(var W=qt(this.doc,_),ce=0;ce<A;++ce){var de=pl(this,W,"div");if(V==null?V=de.left:de.left=V,(W=tw(this,de,j,M)).hitSide)break}return W},moveV:uo(function(_,A){var M=this,N=this.doc,j=[],V=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(ce){if(V)return _<0?ce.from():ce.to();var de=pl(M,ce.head,"div");ce.goalColumn!=null&&(de.left=ce.goalColumn),j.push(de.left);var Ce=tw(M,de,_,A);return A=="page"&&ce==N.sel.primary()&&hy(M,Rm(M,Ce,"div").top-de.top),Ce},Vt),j.length)for(var W=0;W<N.sel.ranges.length;W++)N.sel.ranges[W].goalColumn=j[W]}),findWordAt:function(_){var A=Qe(this.doc,_.line).text,M=_.ch,N=_.ch;if(A){var j=this.getHelper(_,"wordChars");_.sticky!="before"&&N!=A.length||!M?++N:--M;for(var V=A.charAt(M),W=re(V,j)?function(ce){return re(ce,j)}:/\s/.test(V)?function(ce){return/\s/.test(ce)}:function(ce){return!/\s/.test(ce)&&!re(ce)};M>0&&W(A.charAt(M-1));)--M;for(;N<A.length&&W(A.charAt(N));)++N}return new Nr(Xe(_.line,M),Xe(_.line,N))},toggleOverwrite:function(_){_!=null&&_==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?z(this.display.cursorDiv,"CodeMirror-overwrite"):U(this.display.cursorDiv,"CodeMirror-overwrite"),tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ee(ze(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:uo(function(_,A){Mh(this,_,A)}),getScrollInfo:function(){var _=this.display.scroller;return{left:_.scrollLeft,top:_.scrollTop,height:_.scrollHeight-_i(this)-this.display.barHeight,width:_.scrollWidth-_i(this)-this.display.barWidth,clientHeight:Te(this),clientWidth:Fi(this)}},scrollIntoView:uo(function(_,A){_==null?(_={from:this.doc.sel.primary().head,to:null},A==null&&(A=this.options.cursorScrollMargin)):typeof _=="number"?_={from:Xe(_,0),to:null}:_.from==null&&(_={from:_,to:null}),_.to||(_.to=_.from),_.margin=A||0,_.from.line!=null?function(M,N){$m(M),M.curOp.scrollToPos=N}(this,_):W1(this,_.from,_.to,_.margin)}),setSize:uo(function(_,A){var M=this,N=function(V){return typeof V=="number"||/^\d+$/.test(String(V))?V+"px":V};_!=null&&(this.display.wrapper.style.width=N(_)),A!=null&&(this.display.wrapper.style.height=N(A)),this.options.lineWrapping&&I1(this);var j=this.display.viewFrom;this.doc.iter(j,this.display.viewTo,function(V){if(V.widgets){for(var W=0;W<V.widgets.length;W++)if(V.widgets[W].noHScroll){Ju(M,j,"widget");break}}++j}),this.curOp.forceUpdate=!0,tt(this,"refresh",this)}),operation:function(_){return Ho(this,_)},startOperation:function(){return rd(this)},endOperation:function(){return id(this)},refresh:uo(function(){var _=this.display.cachedTextHeight;Co(this),this.curOp.forceUpdate=!0,Fh(this),Mh(this,this.doc.scrollLeft,this.doc.scrollTop),gy(this.display),(_==null||Math.abs(_-ff(this.display))>.5||this.options.lineWrapping)&&ay(this),tt(this,"refresh",this)}),swapDoc:uo(function(_){var A=this.doc;return A.cm=null,this.state.selectingText&&this.state.selectingText(),ax(this,_),Fh(this),this.display.input.reset(),Mh(this,_.scrollLeft,_.scrollTop),this.curOp.forceScroll=!0,Gr(this,"swapDoc",this,A),A}),phrase:function(_){var A=this.options.phrases;return A&&Object.prototype.hasOwnProperty.call(A,_)?A[_]:_},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Qt(m),m.registerHelper=function(_,A,M){C.hasOwnProperty(_)||(C[_]=m[_]={_global:[]}),C[_][A]=M},m.registerGlobalHelper=function(_,A,M,N){m.registerHelper(_,A,N),C[_]._global.push({pred:M,val:N})}}(Oi);var KC="iter insert remove copy getEditor constructor".split(" ");for(var Km in So.prototype)So.prototype.hasOwnProperty(Km)&&Pe(KC,Km)<0&&(Oi.prototype[Km]=function(m){return function(){return m.apply(this.doc,arguments)}}(So.prototype[Km]));return Qt(So),Oi.inputStyles={textarea:rs,contenteditable:Qr},Oi.defineMode=function(m){Oi.defaults.mode||m=="null"||(Oi.defaults.mode=m),ro.apply(this,arguments)},Oi.defineMIME=function(m,x){$r[m]=x},Oi.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Oi.defineMIME("text/plain","null"),Oi.defineExtension=function(m,x){Oi.prototype[m]=x},Oi.defineDocExtension=function(m,x){So.prototype[m]=x},Oi.fromTextArea=function(m,x){if((x=x?we(x):{}).value=m.value,!x.tabindex&&m.tabIndex&&(x.tabindex=m.tabIndex),!x.placeholder&&m.placeholder&&(x.placeholder=m.placeholder),x.autofocus==null){var C=ee(m.ownerDocument);x.autofocus=C==m||m.getAttribute("autofocus")!=null&&C==document.body}function _(){m.value=j.getValue()}var A;if(m.form&&(De(m.form,"submit",_),!x.leaveSubmitMethodAlone)){var M=m.form;A=M.submit;try{var N=M.submit=function(){_(),M.submit=A,M.submit(),M.submit=N}}catch{}}x.finishInit=function(V){V.save=_,V.getTextArea=function(){return m},V.toTextArea=function(){V.toTextArea=isNaN,_(),m.parentNode.removeChild(V.getWrapperElement()),m.style.display="",m.form&&(We(m.form,"submit",_),x.leaveSubmitMethodAlone||typeof m.form.submit!="function"||(m.form.submit=A))}},m.style.display="none";var j=Oi(function(V){return m.parentNode.insertBefore(V,m.nextSibling)},x);return j},function(m){m.off=We,m.on=De,m.wheelEventPixels=PC,m.Doc=So,m.splitLines=mn,m.countColumn=$e,m.findColumn=Mn,m.isWordChar=J,m.Pass=St,m.signal=tt,m.Line=pn,m.changeEnd=tc,m.scrollbarModel=Z1,m.Pos=Xe,m.cmpPos=pt,m.modes=nr,m.mimeModes=$r,m.resolveMode=ge,m.getMode=Le,m.modeExtensions=it,m.extendMode=Ke,m.copyState=Et,m.startState=en,m.innerMode=an,m.commands=Xh,m.keyMap=vu,m.keyName=$x,m.isModifierKey=Mx,m.lookupKey=_f,m.normalizeKeyMap=VC,m.StringStream=wt,m.SharedTextMarker=Vh,m.TextMarker=rc,m.LineWidget=Gh,m.e_preventDefault=rn,m.e_stopPropagation=sn,m.e_stop=Tn,m.addClass=z,m.contains=le,m.rmClass=U,m.keyNames=ic}(Oi),Oi.version="5.65.9",Oi})},{}],11:[function(n,r,i){var s;s=function(o){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;o.defineMode("gfm",function(l,u){var d=0,c={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(p){return{code:p.code,codeBlock:p.codeBlock,ateSpace:p.ateSpace}},token:function(p,g){if(g.combineTokens=null,g.codeBlock)return p.match(/^```+/)?(g.codeBlock=!1,null):(p.skipToEnd(),null);if(p.sol()&&(g.code=!1),p.sol()&&p.match(/^```+/))return p.skipToEnd(),g.codeBlock=!0,null;if(p.peek()==="`"){p.next();var b=p.pos;p.eatWhile("`");var y=1+p.pos-b;return g.code?y===d&&(g.code=!1):(d=y,g.code=!0),null}return g.code?(p.next(),null):p.eatSpace()?(g.ateSpace=!0,null):(p.sol()||g.ateSpace)&&(g.ateSpace=!1,u.gitHubSpice!==!1)&&(p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||p.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||p.match(a)&&p.string.slice(p.start-2,p.start)!="]("&&(p.start==0||/\W/.test(p.string.charAt(p.start-1)))?(g.combineTokens=!0,"link"):(p.next(),null)},blankLine:function(p){return p.code=!1,null}},f={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in u)f[h]=u[h];return f.name="markdown",o.overlayMode(o.getMode(l,f),c)},"markdown"),o.defineMIME("text/x-gfm","gfm")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../markdown/markdown"),n("../../addon/mode/overlay")):s(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(n,r,i){var s;s=function(o){o.defineMode("markdown",function(a,l){var u=o.getMode(a,"text/html"),d=u.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var c={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var f in c)c.hasOwnProperty(f)&&l.tokenTypeOverrides[f]&&(c[f]=l.tokenTypeOverrides[f]);var h=/^([*\-_])(?:\s*\1){2,}\s*$/,p=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,b=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ {0,3}(?:\={1,}|-{2,})\s*$/,v=/^[^#!\[\]*_\\<>` "'(~:]+/,w=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,E=/^\s*\[[^\]]+?\]:.*$/,S=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function T(ee,z,he){return z.f=z.inline=he,he(ee,z)}function D(ee,z,he){return z.f=z.block=he,he(ee,z)}function k(ee){if(ee.linkTitle=!1,ee.linkHref=!1,ee.linkText=!1,ee.em=!1,ee.strong=!1,ee.strikethrough=!1,ee.quote=0,ee.indentedCode=!1,ee.f==O){var z=d;if(!z){var he=o.innerMode(u,ee.htmlState);z=he.mode.name=="xml"&&he.state.tagStart===null&&!he.state.context&&he.state.tokenize.isInText}z&&(ee.f=I,ee.block=R,ee.htmlState=null)}return ee.trailingSpace=0,ee.trailingSpaceNewLine=!1,ee.prevLine=ee.thisLine,ee.thisLine={stream:null},null}function R(ee,z){var he,fe=ee.column()===z.indentation,ze=!(he=z.prevLine.stream)||!/\S/.test(he.string),He=z.indentedCode,je=z.prevLine.hr,we=z.list!==!1,$e=(z.listStack[z.listStack.length-1]||0)+3;z.indentedCode=!1;var qe=z.indentation;if(z.indentationDiff===null&&(z.indentationDiff=z.indentation,we)){for(z.list=null;qe<z.listStack[z.listStack.length-1];)z.listStack.pop(),z.listStack.length?z.indentation=z.listStack[z.listStack.length-1]:z.list=!1;z.list!==!1&&(z.indentationDiff=qe-z.listStack[z.listStack.length-1])}var Pe=!(ze||je||z.prevLine.header||we&&He||z.prevLine.fencedCodeEnd),St=(z.list===!1||je||ze)&&z.indentation<=$e&&ee.match(h),ht=null;if(z.indentationDiff>=4&&(He||z.prevLine.fencedCodeEnd||z.prevLine.header||ze))return ee.skipToEnd(),z.indentedCode=!0,c.code;if(ee.eatSpace())return null;if(fe&&z.indentation<=$e&&(ht=ee.match(b))&&ht[1].length<=6)return z.quote=0,z.header=ht[1].length,z.thisLine.header=!0,l.highlightFormatting&&(z.formatting="header"),z.f=z.inline,K(z);if(z.indentation<=$e&&ee.eat(">"))return z.quote=fe?1:z.quote+1,l.highlightFormatting&&(z.formatting="quote"),ee.eatSpace(),K(z);if(!St&&!z.setext&&fe&&z.indentation<=$e&&(ht=ee.match(p))){var nn=ht[1]?"ol":"ul";return z.indentation=qe+ee.current().length,z.list=!0,z.quote=0,z.listStack.push(z.indentation),z.em=!1,z.strong=!1,z.code=!1,z.strikethrough=!1,l.taskLists&&ee.match(g,!1)&&(z.taskList=!0),z.f=z.inline,l.highlightFormatting&&(z.formatting=["list","list-"+nn]),K(z)}return fe&&z.indentation<=$e&&(ht=ee.match(w,!0))?(z.quote=0,z.fencedEndRE=new RegExp(ht[1]+"+ *$"),z.localMode=l.fencedCodeBlockHighlighting&&function(Vt){if(o.findModeByName){var Mn=o.findModeByName(Vt);Mn&&(Vt=Mn.mime||Mn.mimes[0])}var Ze=o.getMode(a,Vt);return Ze.name=="null"?null:Ze}(ht[2]||l.fencedCodeBlockDefaultMode),z.localMode&&(z.localState=o.startState(z.localMode)),z.f=z.block=B,l.highlightFormatting&&(z.formatting="code-block"),z.code=-1,K(z)):z.setext||!(Pe&&we||z.quote||z.list!==!1||z.code||St||E.test(ee.string))&&(ht=ee.lookAhead(1))&&(ht=ht.match(y))?(z.setext?(z.header=z.setext,z.setext=0,ee.skipToEnd(),l.highlightFormatting&&(z.formatting="header")):(z.header=ht[0].charAt(0)=="="?1:2,z.setext=z.header),z.thisLine.header=!0,z.f=z.inline,K(z)):St?(ee.skipToEnd(),z.hr=!0,z.thisLine.hr=!0,c.hr):ee.peek()==="["?T(ee,z,Y):T(ee,z,z.inline)}function O(ee,z){var he=u.token(ee,z.htmlState);if(!d){var fe=o.innerMode(u,z.htmlState);(fe.mode.name=="xml"&&fe.state.tagStart===null&&!fe.state.context&&fe.state.tokenize.isInText||z.md_inside&&ee.current().indexOf(">")>-1)&&(z.f=I,z.block=R,z.htmlState=null)}return he}function B(ee,z){var he,fe=z.listStack[z.listStack.length-1]||0,ze=z.indentation<fe,He=fe+3;return z.fencedEndRE&&z.indentation<=He&&(ze||ee.match(z.fencedEndRE))?(l.highlightFormatting&&(z.formatting="code-block"),ze||(he=K(z)),z.localMode=z.localState=null,z.block=R,z.f=I,z.fencedEndRE=null,z.code=0,z.thisLine.fencedCodeEnd=!0,ze?D(ee,z,z.block):he):z.localMode?z.localMode.token(ee,z.localState):(ee.skipToEnd(),c.code)}function K(ee){var z=[];if(ee.formatting){z.push(c.formatting),typeof ee.formatting=="string"&&(ee.formatting=[ee.formatting]);for(var he=0;he<ee.formatting.length;he++)z.push(c.formatting+"-"+ee.formatting[he]),ee.formatting[he]==="header"&&z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.header),ee.formatting[he]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.formatting+"-"+ee.formatting[he]+"-"+ee.quote):z.push("error"))}if(ee.taskOpen)return z.push("meta"),z.length?z.join(" "):null;if(ee.taskClosed)return z.push("property"),z.length?z.join(" "):null;if(ee.linkHref?z.push(c.linkHref,"url"):(ee.strong&&z.push(c.strong),ee.em&&z.push(c.em),ee.strikethrough&&z.push(c.strikethrough),ee.emoji&&z.push(c.emoji),ee.linkText&&z.push(c.linkText),ee.code&&z.push(c.code),ee.image&&z.push(c.image),ee.imageAltText&&z.push(c.imageAltText,"link"),ee.imageMarker&&z.push(c.imageMarker)),ee.header&&z.push(c.header,c.header+"-"+ee.header),ee.quote&&(z.push(c.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=ee.quote?z.push(c.quote+"-"+ee.quote):z.push(c.quote+"-"+l.maxBlockquoteDepth)),ee.list!==!1){var fe=(ee.listStack.length-1)%3;fe?fe===1?z.push(c.list2):z.push(c.list3):z.push(c.list1)}return ee.trailingSpaceNewLine?z.push("trailing-space-new-line"):ee.trailingSpace&&z.push("trailing-space-"+(ee.trailingSpace%2?"a":"b")),z.length?z.join(" "):null}function L(ee,z){if(ee.match(v,!0))return K(z)}function I(ee,z){var he=z.text(ee,z);if(he!==void 0)return he;if(z.list)return z.list=null,K(z);if(z.taskList)return ee.match(g,!0)[1]===" "?z.taskOpen=!0:z.taskClosed=!0,l.highlightFormatting&&(z.formatting="task"),z.taskList=!1,K(z);if(z.taskOpen=!1,z.taskClosed=!1,z.header&&ee.match(/^#+$/,!0))return l.highlightFormatting&&(z.formatting="header"),K(z);var fe=ee.next();if(z.linkTitle){z.linkTitle=!1;var ze=fe;fe==="("&&(ze=")");var He="^\\s*(?:[^"+(ze=(ze+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+ze;if(ee.match(new RegExp(He),!0))return c.linkHref}if(fe==="`"){var je=z.formatting;l.highlightFormatting&&(z.formatting="code"),ee.eatWhile("`");var we=ee.current().length;if(z.code!=0||z.quote&&we!=1){if(we==z.code){var $e=K(z);return z.code=0,$e}return z.formatting=je,K(z)}return z.code=we,K(z)}if(z.code)return K(z);if(fe==="\\"&&(ee.next(),l.highlightFormatting)){var qe=K(z),Pe=c.formatting+"-escape";return qe?qe+" "+Pe:Pe}if(fe==="!"&&ee.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return z.imageMarker=!0,z.image=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(fe==="["&&z.imageMarker&&ee.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return z.imageMarker=!1,z.imageAltText=!0,l.highlightFormatting&&(z.formatting="image"),K(z);if(fe==="]"&&z.imageAltText){l.highlightFormatting&&(z.formatting="image");var qe=K(z);return z.imageAltText=!1,z.image=!1,z.inline=z.f=U,qe}if(fe==="["&&!z.image)return z.linkText&&ee.match(/^.*?\]/)||(z.linkText=!0,l.highlightFormatting&&(z.formatting="link")),K(z);if(fe==="]"&&z.linkText){l.highlightFormatting&&(z.formatting="link");var qe=K(z);return z.linkText=!1,z.inline=z.f=ee.match(/\(.*?\)| ?\[.*?\]/,!1)?U:I,qe}if(fe==="<"&&ee.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkInline;if(fe==="<"&&ee.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return z.f=z.inline=$,l.highlightFormatting&&(z.formatting="link"),(qe=K(z))?qe+=" ":qe="",qe+c.linkEmail;if(l.xml&&fe==="<"&&ee.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var St=ee.string.indexOf(">",ee.pos);if(St!=-1){var ht=ee.string.substring(ee.start,St);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ht)&&(z.md_inside=!0)}return ee.backUp(1),z.htmlState=o.startState(u),D(ee,z,O)}if(l.xml&&fe==="<"&&ee.match(/^\/\w*?>/))return z.md_inside=!1,"tag";if(fe==="*"||fe==="_"){for(var nn=1,Vt=ee.pos==1?" ":ee.string.charAt(ee.pos-2);nn<3&&ee.eat(fe);)nn++;var Mn=ee.peek()||" ",Ze=!/\s/.test(Mn)&&(!S.test(Mn)||/\s/.test(Vt)||S.test(Vt)),pe=!/\s/.test(Vt)&&(!S.test(Vt)||/\s/.test(Mn)||S.test(Mn)),ie=null,oe=null;if(nn%2&&(z.em||!Ze||fe!=="*"&&pe&&!S.test(Vt)?z.em!=fe||!pe||fe!=="*"&&Ze&&!S.test(Mn)||(ie=!1):ie=!0),nn>1&&(z.strong||!Ze||fe!=="*"&&pe&&!S.test(Vt)?z.strong!=fe||!pe||fe!=="*"&&Ze&&!S.test(Mn)||(oe=!1):oe=!0),oe!=null||ie!=null)return l.highlightFormatting&&(z.formatting=ie==null?"strong":oe==null?"em":"strong em"),ie===!0&&(z.em=fe),oe===!0&&(z.strong=fe),$e=K(z),ie===!1&&(z.em=!1),oe===!1&&(z.strong=!1),$e}else if(fe===" "&&(ee.eat("*")||ee.eat("_"))){if(ee.peek()===" ")return K(z);ee.backUp(1)}if(l.strikethrough){if(fe==="~"&&ee.eatWhile(fe)){if(z.strikethrough)return l.highlightFormatting&&(z.formatting="strikethrough"),$e=K(z),z.strikethrough=!1,$e;if(ee.match(/^[^\s]/,!1))return z.strikethrough=!0,l.highlightFormatting&&(z.formatting="strikethrough"),K(z)}else if(fe===" "&&ee.match("~~",!0)){if(ee.peek()===" ")return K(z);ee.backUp(2)}}if(l.emoji&&fe===":"&&ee.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){z.emoji=!0,l.highlightFormatting&&(z.formatting="emoji");var ve=K(z);return z.emoji=!1,ve}return fe===" "&&(ee.match(/^ +$/,!1)?z.trailingSpace++:z.trailingSpace&&(z.trailingSpaceNewLine=!0)),K(z)}function $(ee,z){if(ee.next()===">"){z.f=z.inline=I,l.highlightFormatting&&(z.formatting="link");var he=K(z);return he?he+=" ":he="",he+c.linkInline}return ee.match(/^[^>]+/,!0),c.linkInline}function U(ee,z){if(ee.eatSpace())return null;var he,fe=ee.next();return fe==="("||fe==="["?(z.f=z.inline=(he=fe==="("?")":"]",function(ze,He){if(ze.next()===he){He.f=He.inline=I,l.highlightFormatting&&(He.formatting="link-string");var je=K(He);return He.linkHref=!1,je}return ze.match(q[he]),He.linkHref=!0,K(He)}),l.highlightFormatting&&(z.formatting="link-string"),z.linkHref=!0,K(z)):"error"}var q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Y(ee,z){return ee.match(/^([^\]\\]|\\.)*\]:/,!1)?(z.f=X,ee.next(),l.highlightFormatting&&(z.formatting="link"),z.linkText=!0,K(z)):T(ee,z,I)}function X(ee,z){if(ee.match("]:",!0)){z.f=z.inline=te,l.highlightFormatting&&(z.formatting="link");var he=K(z);return z.linkText=!1,he}return ee.match(/^([^\]\\]|\\.)+/,!0),c.linkText}function te(ee,z){return ee.eatSpace()?null:(ee.match(/^[^\s]+/,!0),ee.peek()===void 0?z.linkTitle=!0:ee.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),z.f=z.inline=I,c.linkHref+" url")}var le={startState:function(){return{f:R,prevLine:{stream:null},thisLine:{stream:null},block:R,htmlState:null,indentation:0,inline:I,text:L,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ee){return{f:ee.f,prevLine:ee.prevLine,thisLine:ee.thisLine,block:ee.block,htmlState:ee.htmlState&&o.copyState(u,ee.htmlState),indentation:ee.indentation,localMode:ee.localMode,localState:ee.localMode?o.copyState(ee.localMode,ee.localState):null,inline:ee.inline,text:ee.text,formatting:!1,linkText:ee.linkText,linkTitle:ee.linkTitle,linkHref:ee.linkHref,code:ee.code,em:ee.em,strong:ee.strong,strikethrough:ee.strikethrough,emoji:ee.emoji,header:ee.header,setext:ee.setext,hr:ee.hr,taskList:ee.taskList,list:ee.list,listStack:ee.listStack.slice(0),quote:ee.quote,indentedCode:ee.indentedCode,trailingSpace:ee.trailingSpace,trailingSpaceNewLine:ee.trailingSpaceNewLine,md_inside:ee.md_inside,fencedEndRE:ee.fencedEndRE}},token:function(ee,z){if(z.formatting=!1,ee!=z.thisLine.stream){if(z.header=0,z.hr=!1,ee.match(/^\s*$/,!0))return k(z),null;if(z.prevLine=z.thisLine,z.thisLine={stream:ee},z.taskList=!1,z.trailingSpace=0,z.trailingSpaceNewLine=!1,!z.localState&&(z.f=z.block,z.f!=O)){var he=ee.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(z.indentation=he,z.indentationDiff=null,he>0)return null}}return z.f(ee,z)},innerMode:function(ee){return ee.block==O?{state:ee.htmlState,mode:u}:ee.localState?{state:ee.localState,mode:ee.localMode}:{state:ee,mode:le}},indent:function(ee,z,he){return ee.block==O&&u.indent?u.indent(ee.htmlState,z,he):ee.localState&&ee.localMode.indent?ee.localMode.indent(ee.localState,z,he):o.Pass},blankLine:k,getType:K,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return le},"xml"),o.defineMIME("text/markdown","markdown"),o.defineMIME("text/x-markdown","markdown")},typeof i=="object"&&typeof r=="object"?s(n("../../lib/codemirror"),n("../xml/xml"),n("../meta")):s(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(n,r,i){(function(s){s.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var o=0;o<s.modeInfo.length;o++){var a=s.modeInfo[o];a.mimes&&(a.mime=a.mimes[0])}s.findModeByMIME=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var d=s.modeInfo[u];if(d.mime==l)return d;if(d.mimes){for(var c=0;c<d.mimes.length;c++)if(d.mimes[c]==l)return d}}return/\+xml$/.test(l)?s.findModeByMIME("application/xml"):/\+json$/.test(l)?s.findModeByMIME("application/json"):void 0},s.findModeByExtension=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var d=s.modeInfo[u];if(d.ext){for(var c=0;c<d.ext.length;c++)if(d.ext[c]==l)return d}}},s.findModeByFileName=function(l){for(var u=0;u<s.modeInfo.length;u++){var d=s.modeInfo[u];if(d.file&&d.file.test(l))return d}var c=l.lastIndexOf("."),f=c>-1&&l.substring(c+1,l.length);if(f)return s.findModeByExtension(f)},s.findModeByName=function(l){l=l.toLowerCase();for(var u=0;u<s.modeInfo.length;u++){var d=s.modeInfo[u];if(d.name.toLowerCase()==l)return d;if(d.alias){for(var c=0;c<d.alias.length;c++)if(d.alias[c].toLowerCase()==l)return d}}}})(typeof i=="object"&&typeof r=="object"?n("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(n,r,i){(function(s){var o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};s.defineMode("xml",function(l,u){var d,c,f=l.indentUnit,h={},p=u.htmlMode?o:a;for(var g in p)h[g]=p[g];for(var g in u)h[g]=u[g];function b(q,Y){function X(le){return Y.tokenize=le,le(q,Y)}var te=q.next();return te=="<"?q.eat("!")?q.eat("[")?q.match("CDATA[")?X(v("atom","]]>")):null:q.match("--")?X(v("comment","-->")):q.match("DOCTYPE",!0,!0)?(q.eatWhile(/[\w\._\-]/),X(w(1))):null:q.eat("?")?(q.eatWhile(/[\w\._\-]/),Y.tokenize=v("meta","?>"),"meta"):(d=q.eat("/")?"closeTag":"openTag",Y.tokenize=y,"tag bracket"):te=="&"?(q.eat("#")?q.eat("x")?q.eatWhile(/[a-fA-F\d]/)&&q.eat(";"):q.eatWhile(/[\d]/)&&q.eat(";"):q.eatWhile(/[\w\.\-:]/)&&q.eat(";"))?"atom":"error":(q.eatWhile(/[^&<]/),null)}function y(q,Y){var X,te,le=q.next();if(le==">"||le=="/"&&q.eat(">"))return Y.tokenize=b,d=le==">"?"endTag":"selfcloseTag","tag bracket";if(le=="=")return d="equals",null;if(le=="<"){Y.tokenize=b,Y.state=k,Y.tagName=Y.tagStart=null;var ee=Y.tokenize(q,Y);return ee?ee+" tag error":"tag error"}return/[\'\"]/.test(le)?(Y.tokenize=(X=le,te=function(z,he){for(;!z.eol();)if(z.next()==X){he.tokenize=y;break}return"string"},te.isInAttribute=!0,te),Y.stringStartCol=q.column(),Y.tokenize(q,Y)):(q.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function v(q,Y){return function(X,te){for(;!X.eol();){if(X.match(Y)){te.tokenize=b;break}X.next()}return q}}function w(q){return function(Y,X){for(var te;(te=Y.next())!=null;){if(te=="<")return X.tokenize=w(q+1),X.tokenize(Y,X);if(te==">"){if(q==1){X.tokenize=b;break}return X.tokenize=w(q-1),X.tokenize(Y,X)}}return"meta"}}function E(q){return q&&q.toLowerCase()}function S(q,Y,X){this.prev=q.context,this.tagName=Y||"",this.indent=q.indented,this.startOfLine=X,(h.doNotIndent.hasOwnProperty(Y)||q.context&&q.context.noIndent)&&(this.noIndent=!0)}function T(q){q.context&&(q.context=q.context.prev)}function D(q,Y){for(var X;;){if(!q.context||(X=q.context.tagName,!h.contextGrabbers.hasOwnProperty(E(X))||!h.contextGrabbers[E(X)].hasOwnProperty(E(Y))))return;T(q)}}function k(q,Y,X){return q=="openTag"?(X.tagStart=Y.column(),R):q=="closeTag"?O:k}function R(q,Y,X){return q=="word"?(X.tagName=Y.current(),c="tag",L):h.allowMissingTagName&&q=="endTag"?(c="tag bracket",L(q,0,X)):(c="error",R)}function O(q,Y,X){if(q=="word"){var te=Y.current();return X.context&&X.context.tagName!=te&&h.implicitlyClosed.hasOwnProperty(E(X.context.tagName))&&T(X),X.context&&X.context.tagName==te||h.matchClosing===!1?(c="tag",B):(c="tag error",K)}return h.allowMissingTagName&&q=="endTag"?(c="tag bracket",B(q,0,X)):(c="error",K)}function B(q,Y,X){return q!="endTag"?(c="error",B):(T(X),k)}function K(q,Y,X){return c="error",B(q,0,X)}function L(q,Y,X){if(q=="word")return c="attribute",I;if(q=="endTag"||q=="selfcloseTag"){var te=X.tagName,le=X.tagStart;return X.tagName=X.tagStart=null,q=="selfcloseTag"||h.autoSelfClosers.hasOwnProperty(E(te))?D(X,te):(D(X,te),X.context=new S(X,te,le==X.indented)),k}return c="error",L}function I(q,Y,X){return q=="equals"?$:(h.allowMissing||(c="error"),L(q,0,X))}function $(q,Y,X){return q=="string"?U:q=="word"&&h.allowUnquoted?(c="string",L):(c="error",L(q,0,X))}function U(q,Y,X){return q=="string"?U:L(q,0,X)}return b.isInText=!0,{startState:function(q){var Y={tokenize:b,state:k,indented:q||0,tagName:null,tagStart:null,context:null};return q!=null&&(Y.baseIndent=q),Y},token:function(q,Y){if(!Y.tagName&&q.sol()&&(Y.indented=q.indentation()),q.eatSpace())return null;d=null;var X=Y.tokenize(q,Y);return(X||d)&&X!="comment"&&(c=null,Y.state=Y.state(d||X,q,Y),c&&(X=c=="error"?X+" error":c)),X},indent:function(q,Y,X){var te=q.context;if(q.tokenize.isInAttribute)return q.tagStart==q.indented?q.stringStartCol+1:q.indented+f;if(te&&te.noIndent)return s.Pass;if(q.tokenize!=y&&q.tokenize!=b)return X?X.match(/^(\s*)/)[0].length:0;if(q.tagName)return h.multilineTagIndentPastTag!==!1?q.tagStart+q.tagName.length+2:q.tagStart+f*(h.multilineTagIndentFactor||1);if(h.alignCDATA&&/<!\[CDATA\[/.test(Y))return 0;var le=Y&&/^<(\/)?([\w_:\.-]*)/.exec(Y);if(le&&le[1])for(;te;){if(te.tagName==le[2]){te=te.prev;break}if(!h.implicitlyClosed.hasOwnProperty(E(te.tagName)))break;te=te.prev}else if(le)for(;te;){var ee=h.contextGrabbers[E(te.tagName)];if(!ee||!ee.hasOwnProperty(E(le[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+f:q.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:h.htmlMode?"html":"xml",helperType:h.htmlMode?"html":"xml",skipAttribute:function(q){q.state==$&&(q.state=L)},xmlCurrentTag:function(q){return q.tagName?{name:q.tagName,close:q.type=="closeTag"}:null},xmlCurrentContext:function(q){for(var Y=[],X=q.context;X;X=X.prev)Y.push(X.tagName);return Y.reverse()}}}),s.defineMIME("text/xml","xml"),s.defineMIME("application/xml","xml"),s.mimeModes.hasOwnProperty("text/html")||s.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof i=="object"&&typeof r=="object"?n("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(n,r,i){(function(s,o){o(typeof i=="object"&&r!==void 0?i:(s=typeof globalThis<"u"?globalThis:s||self).marked={})})(this,function(s){function o(Ze,pe){for(var ie=0;ie<pe.length;ie++){var oe=pe[ie];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Ze,oe.key,oe)}}function a(Ze,pe){(pe==null||pe>Ze.length)&&(pe=Ze.length);for(var ie=0,oe=new Array(pe);ie<pe;ie++)oe[ie]=Ze[ie];return oe}function l(Ze,pe){var ie=typeof Symbol<"u"&&Ze[Symbol.iterator]||Ze["@@iterator"];if(ie)return(ie=ie.call(Ze)).next.bind(ie);if(Array.isArray(Ze)||(ie=function(ve,F){if(ve){if(typeof ve=="string")return a(ve,F);var H=Object.prototype.toString.call(ve).slice(8,-1);return H==="Object"&&ve.constructor&&(H=ve.constructor.name),H==="Map"||H==="Set"?Array.from(ve):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?a(ve,F):void 0}}(Ze))||pe){ie&&(Ze=ie);var oe=0;return function(){return oe>=Ze.length?{done:!0}:{done:!1,value:Ze[oe++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}s.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var d=/[&<>"']/,c=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,h=/[<>"']|&(?!#?\w+;)/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Ze){return p[Ze]};function b(Ze,pe){if(pe){if(d.test(Ze))return Ze.replace(c,g)}else if(f.test(Ze))return Ze.replace(h,g);return Ze}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(Ze){return Ze.replace(y,function(pe,ie){return(ie=ie.toLowerCase())==="colon"?":":ie.charAt(0)==="#"?ie.charAt(1)==="x"?String.fromCharCode(parseInt(ie.substring(2),16)):String.fromCharCode(+ie.substring(1)):""})}var w=/(^|[^\[])\^/g;function E(Ze,pe){Ze=typeof Ze=="string"?Ze:Ze.source,pe=pe||"";var ie={replace:function(oe,ve){return ve=(ve=ve.source||ve).replace(w,"$1"),Ze=Ze.replace(oe,ve),ie},getRegex:function(){return new RegExp(Ze,pe)}};return ie}var S=/[^\w:]/g,T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function D(Ze,pe,ie){if(Ze){var oe;try{oe=decodeURIComponent(v(ie)).replace(S,"").toLowerCase()}catch{return null}if(oe.indexOf("javascript:")===0||oe.indexOf("vbscript:")===0||oe.indexOf("data:")===0)return null}pe&&!T.test(ie)&&(ie=function(ve,F){k[" "+ve]||(R.test(ve)?k[" "+ve]=ve+"/":k[" "+ve]=$(ve,"/",!0));var H=(ve=k[" "+ve]).indexOf(":")===-1;return F.substring(0,2)==="//"?H?F:ve.replace(O,"$1")+F:F.charAt(0)==="/"?H?F:ve.replace(B,"$1")+F:ve+F}(pe,ie));try{ie=encodeURI(ie).replace(/%25/g,"%")}catch{return null}return ie}var k={},R=/^[^:]+:\/*[^/]*$/,O=/^([^:]+:)[\s\S]*$/,B=/^([^:]+:\/*[^/]*)[\s\S]*$/,K={exec:function(){}};function L(Ze){for(var pe,ie,oe=1;oe<arguments.length;oe++)for(ie in pe=arguments[oe])Object.prototype.hasOwnProperty.call(pe,ie)&&(Ze[ie]=pe[ie]);return Ze}function I(Ze,pe){var ie=Ze.replace(/\|/g,function(ve,F,H){for(var J=!1,re=F;--re>=0&&H[re]==="\\";)J=!J;return J?"|":" |"}).split(/ \|/),oe=0;if(ie[0].trim()||ie.shift(),ie.length>0&&!ie[ie.length-1].trim()&&ie.pop(),ie.length>pe)ie.splice(pe);else for(;ie.length<pe;)ie.push("");for(;oe<ie.length;oe++)ie[oe]=ie[oe].trim().replace(/\\\|/g,"|");return ie}function $(Ze,pe,ie){var oe=Ze.length;if(oe===0)return"";for(var ve=0;ve<oe;){var F=Ze.charAt(oe-ve-1);if(F!==pe||ie){if(F===pe||!ie)break;ve++}else ve++}return Ze.slice(0,oe-ve)}function U(Ze){Ze&&Ze.sanitize&&!Ze.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function q(Ze,pe){if(pe<1)return"";for(var ie="";pe>1;)1&pe&&(ie+=Ze),pe>>=1,Ze+=Ze;return ie+Ze}function Y(Ze,pe,ie,oe){var ve=pe.href,F=pe.title?b(pe.title):null,H=Ze[1].replace(/\\([\[\]])/g,"$1");if(Ze[0].charAt(0)!=="!"){oe.state.inLink=!0;var J={type:"link",raw:ie,href:ve,title:F,text:H,tokens:oe.inlineTokens(H)};return oe.state.inLink=!1,J}return{type:"image",raw:ie,href:ve,title:F,text:b(H)}}var X=function(){function Ze(ie){this.options=ie||s.defaults}var pe=Ze.prototype;return pe.space=function(ie){var oe=this.rules.block.newline.exec(ie);if(oe&&oe[0].length>0)return{type:"space",raw:oe[0]}},pe.code=function(ie){var oe=this.rules.block.code.exec(ie);if(oe){var ve=oe[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:oe[0],codeBlockStyle:"indented",text:this.options.pedantic?ve:$(ve,`
`)}}},pe.fences=function(ie){var oe=this.rules.block.fences.exec(ie);if(oe){var ve=oe[0],F=function(H,J){var re=H.match(/^(\s+)(?:```)/);if(re===null)return J;var ye=re[1];return J.split(`
`).map(function(xe){var Re=xe.match(/^\s+/);return Re===null?xe:Re[0].length>=ye.length?xe.slice(ye.length):xe}).join(`
`)}(ve,oe[3]||"");return{type:"code",raw:ve,lang:oe[2]?oe[2].trim():oe[2],text:F}}},pe.heading=function(ie){var oe=this.rules.block.heading.exec(ie);if(oe){var ve=oe[2].trim();if(/#$/.test(ve)){var F=$(ve,"#");this.options.pedantic?ve=F.trim():F&&!/ $/.test(F)||(ve=F.trim())}return{type:"heading",raw:oe[0],depth:oe[1].length,text:ve,tokens:this.lexer.inline(ve)}}},pe.hr=function(ie){var oe=this.rules.block.hr.exec(ie);if(oe)return{type:"hr",raw:oe[0]}},pe.blockquote=function(ie){var oe=this.rules.block.blockquote.exec(ie);if(oe){var ve=oe[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:oe[0],tokens:this.lexer.blockTokens(ve,[]),text:ve}}},pe.list=function(ie){var oe=this.rules.block.list.exec(ie);if(oe){var ve,F,H,J,re,ye,xe,Re,P,Q,se,ae,ke=oe[1].trim(),Ae=ke.length>1,Ee={type:"list",raw:"",ordered:Ae,start:Ae?+ke.slice(0,-1):"",loose:!1,items:[]};ke=Ae?"\\d{1,9}\\"+ke.slice(-1):"\\"+ke,this.options.pedantic&&(ke=Ae?ke:"[*+-]");for(var De=new RegExp("^( {0,3}"+ke+")((?:[	 ][^\\n]*)?(?:\\n|$))");ie&&(ae=!1,oe=De.exec(ie))&&!this.rules.block.hr.test(ie);){if(ve=oe[0],ie=ie.substring(ve.length),Re=oe[2].split(`
`,1)[0],P=ie.split(`
`,1)[0],this.options.pedantic?(J=2,se=Re.trimLeft()):(J=(J=oe[2].search(/[^ ]/))>4?1:J,se=Re.slice(J),J+=oe[1].length),ye=!1,!Re&&/^ *$/.test(P)&&(ve+=P+`
`,ie=ie.substring(P.length+1),ae=!0),!ae)for(var Oe=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),We=new RegExp("^ {0,"+Math.min(3,J-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),tt=new RegExp("^ {0,"+Math.min(3,J-1)+"}(?:```|~~~)"),ft=new RegExp("^ {0,"+Math.min(3,J-1)+"}#");ie&&(Re=Q=ie.split(`
`,1)[0],this.options.pedantic&&(Re=Re.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!tt.test(Re))&&!ft.test(Re)&&!Oe.test(Re)&&!We.test(ie);){if(Re.search(/[^ ]/)>=J||!Re.trim())se+=`
`+Re.slice(J);else{if(ye)break;se+=`
`+Re}ye||Re.trim()||(ye=!0),ve+=Q+`
`,ie=ie.substring(Q.length+1)}Ee.loose||(xe?Ee.loose=!0:/\n *\n *$/.test(ve)&&(xe=!0)),this.options.gfm&&(F=/^\[[ xX]\] /.exec(se))&&(H=F[0]!=="[ ] ",se=se.replace(/^\[[ xX]\] +/,"")),Ee.items.push({type:"list_item",raw:ve,task:!!F,checked:H,loose:!1,text:se}),Ee.raw+=ve}Ee.items[Ee.items.length-1].raw=ve.trimRight(),Ee.items[Ee.items.length-1].text=se.trimRight(),Ee.raw=Ee.raw.trimRight();var Kt=Ee.items.length;for(re=0;re<Kt;re++){this.lexer.state.top=!1,Ee.items[re].tokens=this.lexer.blockTokens(Ee.items[re].text,[]);var xt=Ee.items[re].tokens.filter(function(rn){return rn.type==="space"}),Qt=xt.every(function(rn){for(var sn,on=0,Tn=l(rn.raw.split(""));!(sn=Tn()).done;)if(sn.value===`
`&&(on+=1),on>1)return!0;return!1});!Ee.loose&&xt.length&&Qt&&(Ee.loose=!0,Ee.items[re].loose=!0)}return Ee}},pe.html=function(ie){var oe=this.rules.block.html.exec(ie);if(oe){var ve={type:"html",raw:oe[0],pre:!this.options.sanitizer&&(oe[1]==="pre"||oe[1]==="script"||oe[1]==="style"),text:oe[0]};if(this.options.sanitize){var F=this.options.sanitizer?this.options.sanitizer(oe[0]):b(oe[0]);ve.type="paragraph",ve.text=F,ve.tokens=this.lexer.inline(F)}return ve}},pe.def=function(ie){var oe=this.rules.block.def.exec(ie);if(oe)return oe[3]&&(oe[3]=oe[3].substring(1,oe[3].length-1)),{type:"def",tag:oe[1].toLowerCase().replace(/\s+/g," "),raw:oe[0],href:oe[2],title:oe[3]}},pe.table=function(ie){var oe=this.rules.block.table.exec(ie);if(oe){var ve={type:"table",header:I(oe[1]).map(function(xe){return{text:xe}}),align:oe[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:oe[3]&&oe[3].trim()?oe[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(ve.header.length===ve.align.length){ve.raw=oe[0];var F,H,J,re,ye=ve.align.length;for(F=0;F<ye;F++)/^ *-+: *$/.test(ve.align[F])?ve.align[F]="right":/^ *:-+: *$/.test(ve.align[F])?ve.align[F]="center":/^ *:-+ *$/.test(ve.align[F])?ve.align[F]="left":ve.align[F]=null;for(ye=ve.rows.length,F=0;F<ye;F++)ve.rows[F]=I(ve.rows[F],ve.header.length).map(function(xe){return{text:xe}});for(ye=ve.header.length,H=0;H<ye;H++)ve.header[H].tokens=this.lexer.inline(ve.header[H].text);for(ye=ve.rows.length,H=0;H<ye;H++)for(re=ve.rows[H],J=0;J<re.length;J++)re[J].tokens=this.lexer.inline(re[J].text);return ve}}},pe.lheading=function(ie){var oe=this.rules.block.lheading.exec(ie);if(oe)return{type:"heading",raw:oe[0],depth:oe[2].charAt(0)==="="?1:2,text:oe[1],tokens:this.lexer.inline(oe[1])}},pe.paragraph=function(ie){var oe=this.rules.block.paragraph.exec(ie);if(oe){var ve=oe[1].charAt(oe[1].length-1)===`
`?oe[1].slice(0,-1):oe[1];return{type:"paragraph",raw:oe[0],text:ve,tokens:this.lexer.inline(ve)}}},pe.text=function(ie){var oe=this.rules.block.text.exec(ie);if(oe)return{type:"text",raw:oe[0],text:oe[0],tokens:this.lexer.inline(oe[0])}},pe.escape=function(ie){var oe=this.rules.inline.escape.exec(ie);if(oe)return{type:"escape",raw:oe[0],text:b(oe[1])}},pe.tag=function(ie){var oe=this.rules.inline.tag.exec(ie);if(oe)return!this.lexer.state.inLink&&/^<a /i.test(oe[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(oe[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(oe[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(oe[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:oe[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(oe[0]):b(oe[0]):oe[0]}},pe.link=function(ie){var oe=this.rules.inline.link.exec(ie);if(oe){var ve=oe[2].trim();if(!this.options.pedantic&&/^</.test(ve)){if(!/>$/.test(ve))return;var F=$(ve.slice(0,-1),"\\");if((ve.length-F.length)%2==0)return}else{var H=function(Re,P){if(Re.indexOf(P[1])===-1)return-1;for(var Q=Re.length,se=0,ae=0;ae<Q;ae++)if(Re[ae]==="\\")ae++;else if(Re[ae]===P[0])se++;else if(Re[ae]===P[1]&&--se<0)return ae;return-1}(oe[2],"()");if(H>-1){var J=(oe[0].indexOf("!")===0?5:4)+oe[1].length+H;oe[2]=oe[2].substring(0,H),oe[0]=oe[0].substring(0,J).trim(),oe[3]=""}}var re=oe[2],ye="";if(this.options.pedantic){var xe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(re);xe&&(re=xe[1],ye=xe[3])}else ye=oe[3]?oe[3].slice(1,-1):"";return re=re.trim(),/^</.test(re)&&(re=this.options.pedantic&&!/>$/.test(ve)?re.slice(1):re.slice(1,-1)),Y(oe,{href:re&&re.replace(this.rules.inline._escapes,"$1"),title:ye&&ye.replace(this.rules.inline._escapes,"$1")},oe[0],this.lexer)}},pe.reflink=function(ie,oe){var ve;if((ve=this.rules.inline.reflink.exec(ie))||(ve=this.rules.inline.nolink.exec(ie))){var F=(ve[2]||ve[1]).replace(/\s+/g," ");if(!(F=oe[F.toLowerCase()])||!F.href){var H=ve[0].charAt(0);return{type:"text",raw:H,text:H}}return Y(ve,F,ve[0],this.lexer)}},pe.emStrong=function(ie,oe,ve){ve===void 0&&(ve="");var F=this.rules.inline.emStrong.lDelim.exec(ie);if(F&&(!F[3]||!ve.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var H=F[1]||F[2]||"";if(!H||H&&(ve===""||this.rules.inline.punctuation.exec(ve))){var J,re,ye=F[0].length-1,xe=ye,Re=0,P=F[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,oe=oe.slice(-1*ie.length+ye);(F=P.exec(oe))!=null;)if(J=F[1]||F[2]||F[3]||F[4]||F[5]||F[6])if(re=J.length,F[3]||F[4])xe+=re;else if(!((F[5]||F[6])&&ye%3)||(ye+re)%3){if(!((xe-=re)>0)){if(re=Math.min(re,re+xe+Re),Math.min(ye,re)%2){var Q=ie.slice(1,ye+F.index+re);return{type:"em",raw:ie.slice(0,ye+F.index+re+1),text:Q,tokens:this.lexer.inlineTokens(Q)}}var se=ie.slice(2,ye+F.index+re-1);return{type:"strong",raw:ie.slice(0,ye+F.index+re+1),text:se,tokens:this.lexer.inlineTokens(se)}}}else Re+=re}}},pe.codespan=function(ie){var oe=this.rules.inline.code.exec(ie);if(oe){var ve=oe[2].replace(/\n/g," "),F=/[^ ]/.test(ve),H=/^ /.test(ve)&&/ $/.test(ve);return F&&H&&(ve=ve.substring(1,ve.length-1)),ve=b(ve,!0),{type:"codespan",raw:oe[0],text:ve}}},pe.br=function(ie){var oe=this.rules.inline.br.exec(ie);if(oe)return{type:"br",raw:oe[0]}},pe.del=function(ie){var oe=this.rules.inline.del.exec(ie);if(oe)return{type:"del",raw:oe[0],text:oe[2],tokens:this.lexer.inlineTokens(oe[2])}},pe.autolink=function(ie,oe){var ve,F,H=this.rules.inline.autolink.exec(ie);if(H)return F=H[2]==="@"?"mailto:"+(ve=b(this.options.mangle?oe(H[1]):H[1])):ve=b(H[1]),{type:"link",raw:H[0],text:ve,href:F,tokens:[{type:"text",raw:ve,text:ve}]}},pe.url=function(ie,oe){var ve;if(ve=this.rules.inline.url.exec(ie)){var F,H;if(ve[2]==="@")H="mailto:"+(F=b(this.options.mangle?oe(ve[0]):ve[0]));else{var J;do J=ve[0],ve[0]=this.rules.inline._backpedal.exec(ve[0])[0];while(J!==ve[0]);F=b(ve[0]),H=ve[1]==="www."?"http://"+F:F}return{type:"link",raw:ve[0],text:F,href:H,tokens:[{type:"text",raw:F,text:F}]}}},pe.inlineText=function(ie,oe){var ve,F=this.rules.inline.text.exec(ie);if(F)return ve=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(F[0]):b(F[0]):F[0]:b(this.options.smartypants?oe(F[0]):F[0]),{type:"text",raw:F[0],text:ve}},Ze}(),te={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:K,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};te.def=E(te.def).replace("label",te._label).replace("title",te._title).getRegex(),te.bullet=/(?:[*+-]|\d{1,9}[.)])/,te.listItemStart=E(/^( *)(bull) */).replace("bull",te.bullet).getRegex(),te.list=E(te.list).replace(/bull/g,te.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+te.def.source+")").getRegex(),te._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,te.html=E(te.html,"i").replace("comment",te._comment).replace("tag",te._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),te.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.blockquote=E(te.blockquote).replace("paragraph",te.paragraph).getRegex(),te.normal=L({},te),te.gfm=L({},te.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),te.gfm.table=E(te.gfm.table).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.gfm.paragraph=E(te._paragraph).replace("hr",te.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",te.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",te._tag).getRegex(),te.pedantic=L({},te.normal,{html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:K,paragraph:E(te.normal._paragraph).replace("hr",te.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",te.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var le={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:K,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:K,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function ee(Ze){return Ze.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function z(Ze){var pe,ie,oe="",ve=Ze.length;for(pe=0;pe<ve;pe++)ie=Ze.charCodeAt(pe),Math.random()>.5&&(ie="x"+ie.toString(16)),oe+="&#"+ie+";";return oe}le._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",le.punctuation=E(le.punctuation).replace(/punctuation/g,le._punctuation).getRegex(),le.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,le.escapedEmSt=/\\\*|\\_/g,le._comment=E(te._comment).replace("(?:-->|$)","-->").getRegex(),le.emStrong.lDelim=E(le.emStrong.lDelim).replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimAst=E(le.emStrong.rDelimAst,"g").replace(/punct/g,le._punctuation).getRegex(),le.emStrong.rDelimUnd=E(le.emStrong.rDelimUnd,"g").replace(/punct/g,le._punctuation).getRegex(),le._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,le._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,le._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,le.autolink=E(le.autolink).replace("scheme",le._scheme).replace("email",le._email).getRegex(),le._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,le.tag=E(le.tag).replace("comment",le._comment).replace("attribute",le._attribute).getRegex(),le._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,le._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,le._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,le.link=E(le.link).replace("label",le._label).replace("href",le._href).replace("title",le._title).getRegex(),le.reflink=E(le.reflink).replace("label",le._label).replace("ref",te._label).getRegex(),le.nolink=E(le.nolink).replace("ref",te._label).getRegex(),le.reflinkSearch=E(le.reflinkSearch,"g").replace("reflink",le.reflink).replace("nolink",le.nolink).getRegex(),le.normal=L({},le),le.pedantic=L({},le.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",le._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",le._label).getRegex()}),le.gfm=L({},le.normal,{escape:E(le.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),le.gfm.url=E(le.gfm.url,"i").replace("email",le.gfm._extended_email).getRegex(),le.breaks=L({},le.gfm,{br:E(le.br).replace("{2,}","*").getRegex(),text:E(le.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var he=function(){function Ze(F){this.tokens=[],this.tokens.links=Object.create(null),this.options=F||s.defaults,this.options.tokenizer=this.options.tokenizer||new X,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var H={block:te.normal,inline:le.normal};this.options.pedantic?(H.block=te.pedantic,H.inline=le.pedantic):this.options.gfm&&(H.block=te.gfm,this.options.breaks?H.inline=le.breaks:H.inline=le.gfm),this.tokenizer.rules=H}Ze.lex=function(F,H){return new Ze(H).lex(F)},Ze.lexInline=function(F,H){return new Ze(H).inlineTokens(F)};var pe,ie,oe,ve=Ze.prototype;return ve.lex=function(F){var H;for(F=F.replace(/\r\n|\r/g,`
`),this.blockTokens(F,this.tokens);H=this.inlineQueue.shift();)this.inlineTokens(H.src,H.tokens);return this.tokens},ve.blockTokens=function(F,H){var J,re,ye,xe,Re=this;for(H===void 0&&(H=[]),F=this.options.pedantic?F.replace(/\t/g,"    ").replace(/^ +$/gm,""):F.replace(/^( *)(\t+)/gm,function(Q,se,ae){return se+"    ".repeat(ae.length)});F;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(Q){return!!(J=Q.call({lexer:Re},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)}))){if(J=this.tokenizer.space(F))F=F.substring(J.raw.length),J.raw.length===1&&H.length>0?H[H.length-1].raw+=`
`:H.push(J);else if(J=this.tokenizer.code(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?H.push(J):(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.fences(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.heading(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.hr(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.blockquote(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.list(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.html(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.def(F))F=F.substring(J.raw.length),!(re=H[H.length-1])||re.type!=="paragraph"&&re.type!=="text"?this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title}):(re.raw+=`
`+J.raw,re.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=re.text);else if(J=this.tokenizer.table(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.lheading(F))F=F.substring(J.raw.length),H.push(J);else if(ye=F,this.options.extensions&&this.options.extensions.startBlock&&function(){var Q=1/0,se=F.slice(1),ae=void 0;Re.options.extensions.startBlock.forEach(function(ke){typeof(ae=ke.call({lexer:this},se))=="number"&&ae>=0&&(Q=Math.min(Q,ae))}),Q<1/0&&Q>=0&&(ye=F.substring(0,Q+1))}(),this.state.top&&(J=this.tokenizer.paragraph(ye)))re=H[H.length-1],xe&&re.type==="paragraph"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J),xe=ye.length!==F.length,F=F.substring(J.raw.length);else if(J=this.tokenizer.text(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&re.type==="text"?(re.raw+=`
`+J.raw,re.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=re.text):H.push(J);else if(F){var P="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(P);break}throw new Error(P)}}return this.state.top=!0,H},ve.inline=function(F,H){return H===void 0&&(H=[]),this.inlineQueue.push({src:F,tokens:H}),H},ve.inlineTokens=function(F,H){var J,re,ye,xe=this;H===void 0&&(H=[]);var Re,P,Q,se=F;if(this.tokens.links){var ae=Object.keys(this.tokens.links);if(ae.length>0)for(;(Re=this.tokenizer.rules.inline.reflinkSearch.exec(se))!=null;)ae.includes(Re[0].slice(Re[0].lastIndexOf("[")+1,-1))&&(se=se.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+se.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Re=this.tokenizer.rules.inline.blockSkip.exec(se))!=null;)se=se.slice(0,Re.index)+"["+q("a",Re[0].length-2)+"]"+se.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Re=this.tokenizer.rules.inline.escapedEmSt.exec(se))!=null;)se=se.slice(0,Re.index)+"++"+se.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;F;)if(P||(Q=""),P=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Ae){return!!(J=Ae.call({lexer:xe},F,H))&&(F=F.substring(J.raw.length),H.push(J),!0)})))if(J=this.tokenizer.escape(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.tag(F))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.link(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.reflink(F,this.tokens.links))F=F.substring(J.raw.length),(re=H[H.length-1])&&J.type==="text"&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(J=this.tokenizer.emStrong(F,se,Q))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.codespan(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.br(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.del(F))F=F.substring(J.raw.length),H.push(J);else if(J=this.tokenizer.autolink(F,z))F=F.substring(J.raw.length),H.push(J);else if(this.state.inLink||!(J=this.tokenizer.url(F,z))){if(ye=F,this.options.extensions&&this.options.extensions.startInline&&function(){var Ae=1/0,Ee=F.slice(1),De=void 0;xe.options.extensions.startInline.forEach(function(Oe){typeof(De=Oe.call({lexer:this},Ee))=="number"&&De>=0&&(Ae=Math.min(Ae,De))}),Ae<1/0&&Ae>=0&&(ye=F.substring(0,Ae+1))}(),J=this.tokenizer.inlineText(ye,ee))F=F.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(Q=J.raw.slice(-1)),P=!0,(re=H[H.length-1])&&re.type==="text"?(re.raw+=J.raw,re.text+=J.text):H.push(J);else if(F){var ke="Infinite loop on byte: "+F.charCodeAt(0);if(this.options.silent){console.error(ke);break}throw new Error(ke)}}else F=F.substring(J.raw.length),H.push(J);return H},pe=Ze,oe=[{key:"rules",get:function(){return{block:te,inline:le}}}],(ie=null)&&o(pe.prototype,ie),oe&&o(pe,oe),Object.defineProperty(pe,"prototype",{writable:!1}),Ze}(),fe=function(){function Ze(ie){this.options=ie||s.defaults}var pe=Ze.prototype;return pe.code=function(ie,oe,ve){var F=(oe||"").match(/\S*/)[0];if(this.options.highlight){var H=this.options.highlight(ie,F);H!=null&&H!==ie&&(ve=!0,ie=H)}return ie=ie.replace(/\n$/,"")+`
`,F?'<pre><code class="'+this.options.langPrefix+b(F,!0)+'">'+(ve?ie:b(ie,!0))+`</code></pre>
`:"<pre><code>"+(ve?ie:b(ie,!0))+`</code></pre>
`},pe.blockquote=function(ie){return`<blockquote>
`+ie+`</blockquote>
`},pe.html=function(ie){return ie},pe.heading=function(ie,oe,ve,F){return this.options.headerIds?"<h"+oe+' id="'+(this.options.headerPrefix+F.slug(ve))+'">'+ie+"</h"+oe+`>
`:"<h"+oe+">"+ie+"</h"+oe+`>
`},pe.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},pe.list=function(ie,oe,ve){var F=oe?"ol":"ul";return"<"+F+(oe&&ve!==1?' start="'+ve+'"':"")+`>
`+ie+"</"+F+`>
`},pe.listitem=function(ie){return"<li>"+ie+`</li>
`},pe.checkbox=function(ie){return"<input "+(ie?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},pe.paragraph=function(ie){return"<p>"+ie+`</p>
`},pe.table=function(ie,oe){return oe&&(oe="<tbody>"+oe+"</tbody>"),`<table>
<thead>
`+ie+`</thead>
`+oe+`</table>
`},pe.tablerow=function(ie){return`<tr>
`+ie+`</tr>
`},pe.tablecell=function(ie,oe){var ve=oe.header?"th":"td";return(oe.align?"<"+ve+' align="'+oe.align+'">':"<"+ve+">")+ie+"</"+ve+`>
`},pe.strong=function(ie){return"<strong>"+ie+"</strong>"},pe.em=function(ie){return"<em>"+ie+"</em>"},pe.codespan=function(ie){return"<code>"+ie+"</code>"},pe.br=function(){return this.options.xhtml?"<br/>":"<br>"},pe.del=function(ie){return"<del>"+ie+"</del>"},pe.link=function(ie,oe,ve){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return ve;var F='<a href="'+b(ie)+'"';return oe&&(F+=' title="'+oe+'"'),F+=">"+ve+"</a>"},pe.image=function(ie,oe,ve){if((ie=D(this.options.sanitize,this.options.baseUrl,ie))===null)return ve;var F='<img src="'+ie+'" alt="'+ve+'"';return oe&&(F+=' title="'+oe+'"'),F+=this.options.xhtml?"/>":">"},pe.text=function(ie){return ie},Ze}(),ze=function(){function Ze(){}var pe=Ze.prototype;return pe.strong=function(ie){return ie},pe.em=function(ie){return ie},pe.codespan=function(ie){return ie},pe.del=function(ie){return ie},pe.html=function(ie){return ie},pe.text=function(ie){return ie},pe.link=function(ie,oe,ve){return""+ve},pe.image=function(ie,oe,ve){return""+ve},pe.br=function(){return""},Ze}(),He=function(){function Ze(){this.seen={}}var pe=Ze.prototype;return pe.serialize=function(ie){return ie.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},pe.getNextSafeSlug=function(ie,oe){var ve=ie,F=0;if(this.seen.hasOwnProperty(ve)){F=this.seen[ie];do ve=ie+"-"+ ++F;while(this.seen.hasOwnProperty(ve))}return oe||(this.seen[ie]=F,this.seen[ve]=0),ve},pe.slug=function(ie,oe){oe===void 0&&(oe={});var ve=this.serialize(ie);return this.getNextSafeSlug(ve,oe.dryrun)},Ze}(),je=function(){function Ze(ie){this.options=ie||s.defaults,this.options.renderer=this.options.renderer||new fe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ze,this.slugger=new He}Ze.parse=function(ie,oe){return new Ze(oe).parse(ie)},Ze.parseInline=function(ie,oe){return new Ze(oe).parseInline(ie)};var pe=Ze.prototype;return pe.parse=function(ie,oe){oe===void 0&&(oe=!0);var ve,F,H,J,re,ye,xe,Re,P,Q,se,ae,ke,Ae,Ee,De,Oe,We,tt,ft="",Kt=ie.length;for(ve=0;ve<Kt;ve++)if(Q=ie[ve],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Q.type])||(tt=this.options.extensions.renderers[Q.type].call({parser:this},Q))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Q.type))switch(Q.type){case"space":continue;case"hr":ft+=this.renderer.hr();continue;case"heading":ft+=this.renderer.heading(this.parseInline(Q.tokens),Q.depth,v(this.parseInline(Q.tokens,this.textRenderer)),this.slugger);continue;case"code":ft+=this.renderer.code(Q.text,Q.lang,Q.escaped);continue;case"table":for(Re="",xe="",J=Q.header.length,F=0;F<J;F++)xe+=this.renderer.tablecell(this.parseInline(Q.header[F].tokens),{header:!0,align:Q.align[F]});for(Re+=this.renderer.tablerow(xe),P="",J=Q.rows.length,F=0;F<J;F++){for(xe="",re=(ye=Q.rows[F]).length,H=0;H<re;H++)xe+=this.renderer.tablecell(this.parseInline(ye[H].tokens),{header:!1,align:Q.align[H]});P+=this.renderer.tablerow(xe)}ft+=this.renderer.table(Re,P);continue;case"blockquote":P=this.parse(Q.tokens),ft+=this.renderer.blockquote(P);continue;case"list":for(se=Q.ordered,ae=Q.start,ke=Q.loose,J=Q.items.length,P="",F=0;F<J;F++)De=(Ee=Q.items[F]).checked,Oe=Ee.task,Ae="",Ee.task&&(We=this.renderer.checkbox(De),ke?Ee.tokens.length>0&&Ee.tokens[0].type==="paragraph"?(Ee.tokens[0].text=We+" "+Ee.tokens[0].text,Ee.tokens[0].tokens&&Ee.tokens[0].tokens.length>0&&Ee.tokens[0].tokens[0].type==="text"&&(Ee.tokens[0].tokens[0].text=We+" "+Ee.tokens[0].tokens[0].text)):Ee.tokens.unshift({type:"text",text:We}):Ae+=We),Ae+=this.parse(Ee.tokens,ke),P+=this.renderer.listitem(Ae,Oe,De);ft+=this.renderer.list(P,se,ae);continue;case"html":ft+=this.renderer.html(Q.text);continue;case"paragraph":ft+=this.renderer.paragraph(this.parseInline(Q.tokens));continue;case"text":for(P=Q.tokens?this.parseInline(Q.tokens):Q.text;ve+1<Kt&&ie[ve+1].type==="text";)P+=`
`+((Q=ie[++ve]).tokens?this.parseInline(Q.tokens):Q.text);ft+=oe?this.renderer.paragraph(P):P;continue;default:var xt='Token with "'+Q.type+'" type was not found.';if(this.options.silent)return void console.error(xt);throw new Error(xt)}else ft+=tt||"";return ft},pe.parseInline=function(ie,oe){oe=oe||this.renderer;var ve,F,H,J="",re=ie.length;for(ve=0;ve<re;ve++)if(F=ie[ve],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type])||(H=this.options.extensions.renderers[F.type].call({parser:this},F))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(F.type))switch(F.type){case"escape":case"text":J+=oe.text(F.text);break;case"html":J+=oe.html(F.text);break;case"link":J+=oe.link(F.href,F.title,this.parseInline(F.tokens,oe));break;case"image":J+=oe.image(F.href,F.title,F.text);break;case"strong":J+=oe.strong(this.parseInline(F.tokens,oe));break;case"em":J+=oe.em(this.parseInline(F.tokens,oe));break;case"codespan":J+=oe.codespan(F.text);break;case"br":J+=oe.br();break;case"del":J+=oe.del(this.parseInline(F.tokens,oe));break;default:var ye='Token with "'+F.type+'" type was not found.';if(this.options.silent)return void console.error(ye);throw new Error(ye)}else J+=H||"";return J},Ze}();function we(Ze,pe,ie){if(Ze==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");if(typeof pe=="function"&&(ie=pe,pe=null),U(pe=L({},we.defaults,pe||{})),ie){var oe,ve=pe.highlight;try{oe=he.lex(Ze,pe)}catch(ye){return ie(ye)}var F=function(ye){var xe;if(!ye)try{pe.walkTokens&&we.walkTokens(oe,pe.walkTokens),xe=je.parse(oe,pe)}catch(Re){ye=Re}return pe.highlight=ve,ye?ie(ye):ie(null,xe)};if(!ve||ve.length<3||(delete pe.highlight,!oe.length))return F();var H=0;return we.walkTokens(oe,function(ye){ye.type==="code"&&(H++,setTimeout(function(){ve(ye.text,ye.lang,function(xe,Re){if(xe)return F(xe);Re!=null&&Re!==ye.text&&(ye.text=Re,ye.escaped=!0),--H===0&&F()})},0))}),void(H===0&&F())}function J(ye){if(ye.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+b(ye.message+"",!0)+"</pre>";throw ye}try{var re=he.lex(Ze,pe);if(pe.walkTokens){if(pe.async)return Promise.all(we.walkTokens(re,pe.walkTokens)).then(function(){return je.parse(re,pe)}).catch(J);we.walkTokens(re,pe.walkTokens)}return je.parse(re,pe)}catch(ye){J(ye)}}we.options=we.setOptions=function(Ze){var pe;return L(we.defaults,Ze),pe=we.defaults,s.defaults=pe,we},we.getDefaults=u,we.defaults=s.defaults,we.use=function(){for(var Ze=arguments.length,pe=new Array(Ze),ie=0;ie<Ze;ie++)pe[ie]=arguments[ie];var oe,ve=L.apply(void 0,[{}].concat(pe)),F=we.defaults.extensions||{renderers:{},childTokens:{}};pe.forEach(function(H){if(H.extensions&&(oe=!0,H.extensions.forEach(function(re){if(!re.name)throw new Error("extension name required");if(re.renderer){var ye=F.renderers?F.renderers[re.name]:null;F.renderers[re.name]=ye?function(){for(var xe=arguments.length,Re=new Array(xe),P=0;P<xe;P++)Re[P]=arguments[P];var Q=re.renderer.apply(this,Re);return Q===!1&&(Q=ye.apply(this,Re)),Q}:re.renderer}if(re.tokenizer){if(!re.level||re.level!=="block"&&re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");F[re.level]?F[re.level].unshift(re.tokenizer):F[re.level]=[re.tokenizer],re.start&&(re.level==="block"?F.startBlock?F.startBlock.push(re.start):F.startBlock=[re.start]:re.level==="inline"&&(F.startInline?F.startInline.push(re.start):F.startInline=[re.start]))}re.childTokens&&(F.childTokens[re.name]=re.childTokens)})),H.renderer&&function(){var re=we.defaults.renderer||new fe,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,se=new Array(Q),ae=0;ae<Q;ae++)se[ae]=arguments[ae];var ke=H.renderer[Re].apply(re,se);return ke===!1&&(ke=P.apply(re,se)),ke}};for(var xe in H.renderer)ye(xe);ve.renderer=re}(),H.tokenizer&&function(){var re=we.defaults.tokenizer||new X,ye=function(Re){var P=re[Re];re[Re]=function(){for(var Q=arguments.length,se=new Array(Q),ae=0;ae<Q;ae++)se[ae]=arguments[ae];var ke=H.tokenizer[Re].apply(re,se);return ke===!1&&(ke=P.apply(re,se)),ke}};for(var xe in H.tokenizer)ye(xe);ve.tokenizer=re}(),H.walkTokens){var J=we.defaults.walkTokens;ve.walkTokens=function(re){var ye=[];return ye.push(H.walkTokens.call(this,re)),J&&(ye=ye.concat(J.call(this,re))),ye}}oe&&(ve.extensions=F),we.setOptions(ve)})},we.walkTokens=function(Ze,pe){for(var ie,oe=[],ve=function(){var H=ie.value;switch(oe=oe.concat(pe.call(we,H)),H.type){case"table":for(var J,re=l(H.header);!(J=re()).done;){var ye=J.value;oe=oe.concat(we.walkTokens(ye.tokens,pe))}for(var xe,Re=l(H.rows);!(xe=Re()).done;)for(var P,Q=l(xe.value);!(P=Q()).done;){var se=P.value;oe=oe.concat(we.walkTokens(se.tokens,pe))}break;case"list":oe=oe.concat(we.walkTokens(H.items,pe));break;default:we.defaults.extensions&&we.defaults.extensions.childTokens&&we.defaults.extensions.childTokens[H.type]?we.defaults.extensions.childTokens[H.type].forEach(function(ae){oe=oe.concat(we.walkTokens(H[ae],pe))}):H.tokens&&(oe=oe.concat(we.walkTokens(H.tokens,pe)))}},F=l(Ze);!(ie=F()).done;)ve();return oe},we.parseInline=function(Ze,pe){if(Ze==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ze!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ze)+", string expected");U(pe=L({},we.defaults,pe||{}));try{var ie=he.lexInline(Ze,pe);return pe.walkTokens&&we.walkTokens(ie,pe.walkTokens),je.parseInline(ie,pe)}catch(oe){if(oe.message+=`
Please report this to https://github.com/markedjs/marked.`,pe.silent)return"<p>An error occurred:</p><pre>"+b(oe.message+"",!0)+"</pre>";throw oe}},we.Parser=je,we.parser=je.parse,we.Renderer=fe,we.TextRenderer=ze,we.Lexer=he,we.lexer=he.lex,we.Tokenizer=X,we.Slugger=He,we.parse=we;var $e=we.options,qe=we.setOptions,Pe=we.use,St=we.walkTokens,ht=we.parseInline,nn=we,Vt=je.parse,Mn=he.lex;s.Lexer=he,s.Parser=je,s.Renderer=fe,s.Slugger=He,s.TextRenderer=ze,s.Tokenizer=X,s.getDefaults=u,s.lexer=Mn,s.marked=we,s.options=$e,s.parse=nn,s.parseInline=ht,s.parser=Vt,s.setOptions=qe,s.use=Pe,s.walkTokens=St,Object.defineProperty(s,"__esModule",{value:!0})})},{}],16:[function(n,r,i){(function(s){(function(){var o;(function(){(o=function(a,l,u,d){d=d||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=d.flags||{},this.memoized={},this.loaded=!1;var c,f,h,p,g,b=this;function y(S,T){var D=b._readFile(S,null,d.asyncLoad);d.asyncLoad?D.then(function(k){T(k)}):T(D)}function v(S){l=S,u&&E()}function w(S){u=S,l&&E()}function E(){for(b.rules=b._parseAFF(l),b.compoundRuleCodes={},f=0,p=b.compoundRules.length;f<p;f++){var S=b.compoundRules[f];for(h=0,g=S.length;h<g;h++)b.compoundRuleCodes[S[h]]=[]}for(f in"ONLYINCOMPOUND"in b.flags&&(b.compoundRuleCodes[b.flags.ONLYINCOMPOUND]=[]),b.dictionaryTable=b._parseDIC(u),b.compoundRuleCodes)b.compoundRuleCodes[f].length===0&&delete b.compoundRuleCodes[f];for(f=0,p=b.compoundRules.length;f<p;f++){var T=b.compoundRules[f],D="";for(h=0,g=T.length;h<g;h++){var k=T[h];k in b.compoundRuleCodes?D+="("+b.compoundRuleCodes[k].join("|")+")":D+=k}b.compoundRules[f]=new RegExp(D,"i")}b.loaded=!0,d.asyncLoad&&d.loadedCallback&&d.loadedCallback(b)}return a&&(b.dictionary=a,l&&u?E():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(c=d.dictionaryPath?d.dictionaryPath:"typo/dictionaries",l||y(chrome.extension.getURL(c+"/"+a+"/"+a+".aff"),v),u||y(chrome.extension.getURL(c+"/"+a+"/"+a+".dic"),w)):(c=d.dictionaryPath?d.dictionaryPath:s!==void 0?s+"/dictionaries":"./dictionaries",l||y(c+"/"+a+"/"+a+".aff",v),u||y(c+"/"+a+"/"+a+".dic",w))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,u){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var d,c=new XMLHttpRequest;return c.open("GET",a,u),u&&(d=new Promise(function(h,p){c.onload=function(){c.status===200?h(c.responseText):p(c.statusText)},c.onerror=function(){p(c.statusText)}})),c.overrideMimeType&&c.overrideMimeType("text/plain; charset="+l),c.send(null),u?d:c.responseText}if(n!==void 0){var f=n("fs");try{if(f.existsSync(a))return f.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(h){return console.log(h),""}}},_parseAFF:function(a){var l,u,d,c,f,h,p,g={},b=a.split(/\r?\n/);for(c=0,h=b.length;c<h;c++)if(l=(l=this._removeAffixComments(b[c])).trim()){var y=l.split(/\s+/),v=y[0];if(v=="PFX"||v=="SFX"){var w=y[1],E=y[2],S=[];for(f=c+1,p=c+1+(u=parseInt(y[3],10));f<p;f++){var T=(d=b[f].split(/\s+/))[2],D=d[3].split("/"),k=D[0];k==="0"&&(k="");var R=this.parseRuleCodes(D[1]),O=d[4],B={};B.add=k,R.length>0&&(B.continuationClasses=R),O!=="."&&(B.match=v==="SFX"?new RegExp(O+"$"):new RegExp("^"+O)),T!="0"&&(B.remove=v==="SFX"?new RegExp(T+"$"):T),S.push(B)}g[w]={type:v,combineable:E=="Y",entries:S},c+=u}else if(v==="COMPOUNDRULE"){for(f=c+1,p=c+1+(u=parseInt(y[1],10));f<p;f++)d=(l=b[f]).split(/\s+/),this.compoundRules.push(d[1]);c+=u}else v==="REP"?(d=l.split(/\s+/)).length===3&&this.replacementTable.push([d[1],d[2]]):this.flags[v]=y[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),u={};function d($,U){u.hasOwnProperty($)||(u[$]=null),U.length>0&&(u[$]===null&&(u[$]=[]),u[$].push(U))}for(var c=1,f=l.length;c<f;c++){var h=l[c];if(h){var p=h.split("/",2),g=p[0];if(p.length>1){var b=this.parseRuleCodes(p[1]);"NEEDAFFIX"in this.flags&&b.indexOf(this.flags.NEEDAFFIX)!=-1||d(g,b);for(var y=0,v=b.length;y<v;y++){var w=b[y],E=this.rules[w];if(E)for(var S=this._applyRule(g,E),T=0,D=S.length;T<D;T++){var k=S[T];if(d(k,[]),E.combineable)for(var R=y+1;R<v;R++){var O=b[R],B=this.rules[O];if(B&&B.combineable&&E.type!=B.type)for(var K=this._applyRule(k,B),L=0,I=K.length;L<I;L++)d(K[L],[])}}w in this.compoundRuleCodes&&this.compoundRuleCodes[w].push(g)}}else d(g.trim(),[])}}return u},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],u=0,d=a.length;u<d;u+=2)l.push(a.substr(u,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var u=l.entries,d=[],c=0,f=u.length;c<f;c++){var h=u[c];if(!h.match||a.match(h.match)){var p=a;if(h.remove&&(p=p.replace(h.remove,"")),l.type==="SFX"?p+=h.add:p=h.add+p,d.push(p),"continuationClasses"in h)for(var g=0,b=h.continuationClasses.length;g<b;g++){var y=this.rules[h.continuationClasses[g]];y&&(d=d.concat(this._applyRule(p,y)))}}}return d},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var u=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(u,"KEEPCASE"))return!1;if(this.checkExact(u)||this.checkExact(l.toLowerCase()))return!0}var d=l[0].toLowerCase()+l.substring(1);if(d!==l){if(this.hasFlag(d,"KEEPCASE"))return!1;if(this.checkExact(d))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,u,d=this.dictionaryTable[a];if(d===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,u=this.compoundRules.length;l<u;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(d===null)return!0;if(typeof d=="object"){for(l=0,u=d.length;l<u;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",d[l]))return!0}}return!1},hasFlag:function(a,l,u){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(u===void 0&&(u=Array.prototype.concat.apply([],this.dictionaryTable[a])),!u||u.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var u=this.memoized[a].limit;if(l<=u||this.memoized[a].suggestions.length<u)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var d=0,c=this.replacementTable.length;d<c;d++){var f=this.replacementTable[d];if(a.indexOf(f[0])!==-1){var h=a.replace(f[0],f[1]);if(this.check(h))return[h]}}var p=this;function g(b,y){var v,w,E,S,T={},D=p.alphabet.length;if(typeof b=="string"){var k=b;(b={})[k]=!0}for(var k in b)for(v=0,E=k.length+1;v<E;v++){var R=[k.substring(0,v),k.substring(v)];if(R[1]&&(S=R[0]+R[1].substring(1),y&&!p.check(S)||(S in T?T[S]+=1:T[S]=1)),R[1].length>1&&R[1][1]!==R[1][0]&&(S=R[0]+R[1][1]+R[1][0]+R[1].substring(2),y&&!p.check(S)||(S in T?T[S]+=1:T[S]=1)),R[1]){var O=R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase";for(w=0;w<D;w++){var B=p.alphabet[w];O==="uppercase"&&(B=B.toUpperCase()),B!=R[1].substring(0,1)&&(S=R[0]+B+R[1].substring(1),y&&!p.check(S)||(S in T?T[S]+=1:T[S]=1))}}if(R[1])for(w=0;w<D;w++)O=R[0].substring(-1).toUpperCase()===R[0].substring(-1)&&R[1].substring(0,1).toUpperCase()===R[1].substring(0,1)?"uppercase":"lowercase",B=p.alphabet[w],O==="uppercase"&&(B=B.toUpperCase()),S=R[0]+B+R[1],y&&!p.check(S)||(S in T?T[S]+=1:T[S]=1)}return T}return p.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(b){var y,v=g(b),w=g(v,!0);for(var E in v)p.check(E)&&(E in w?w[E]+=v[E]:w[E]=v[E]);var S=[];for(y in w)w.hasOwnProperty(y)&&S.push([y,w[y]]);S.sort(function(R,O){var B=R[1],K=O[1];return B<K?-1:B>K?1:O[0].localeCompare(R[0])}).reverse();var T=[],D="lowercase";b.toUpperCase()===b?D="uppercase":b.substr(0,1).toUpperCase()+b.substr(1).toLowerCase()===b&&(D="capitalized");var k=l;for(y=0;y<Math.min(k,S.length);y++)D==="uppercase"?S[y][0]=S[y][0].toUpperCase():D==="capitalized"&&(S[y][0]=S[y][0].substr(0,1).toUpperCase()+S[y][0].substr(1)),p.hasFlag(S[y][0],"NOSUGGEST")||T.indexOf(S[y][0])!=-1?k++:T.push(S[y][0]);return T}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=o)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(n,r,i){var s=n("codemirror");s.commands.tabAndIndentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentMore");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}},s.commands.shiftTabAndUnindentMarkdownList=function(o){var a=o.listSelections()[0].head;if(o.getStateAfter(a.line).list!==!1)o.execCommand("indentLess");else if(o.options.indentWithTabs)o.execCommand("insertTab");else{var l=Array(o.options.tabSize+1).join(" ");o.replaceSelection(l)}}},{codemirror:10}],18:[function(n,r,i){var s=n("codemirror");n("codemirror/addon/edit/continuelist.js"),n("./codemirror/tablist"),n("codemirror/addon/display/fullscreen.js"),n("codemirror/mode/markdown/markdown.js"),n("codemirror/addon/mode/overlay.js"),n("codemirror/addon/display/placeholder.js"),n("codemirror/addon/display/autorefresh.js"),n("codemirror/addon/selection/mark-selection.js"),n("codemirror/addon/search/searchcursor.js"),n("codemirror/mode/gfm/gfm.js"),n("codemirror/mode/xml/xml.js");var o=n("codemirror-spell-checker"),a=n("marked").marked,l=/Mac/.test(navigator.platform),u=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),d={toggleBold:E,toggleItalic:S,drawLink:te,toggleHeadingSmaller:R,toggleHeadingBigger:O,drawImage:le,toggleBlockquote:k,toggleOrderedList:Y,toggleUnorderedList:q,toggleCodeBlock:D,togglePreview:$e,toggleStrikethrough:T,toggleHeading1:B,toggleHeading2:K,toggleHeading3:L,toggleHeading4:I,toggleHeading5:$,toggleHeading6:U,cleanBlock:X,drawTable:fe,drawHorizontalRule:ze,undo:He,redo:je,toggleSideBySide:we,toggleFullScreen:w},c={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},f=function(){var P,Q=!1;return P=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(P)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(P.substr(0,4)))&&(Q=!0),Q};function h(P){return P=l?P.replace("Ctrl","Cmd"):P.replace("Cmd","Ctrl")}function p(P,Q,se,ae){var ke=g(P,!1,Q,se,"button",ae);ke.classList.add("easymde-dropdown"),ke.onclick=function(){ke.focus()};var Ae=document.createElement("div");Ae.className="easymde-dropdown-content";for(var Ee=0;Ee<P.children.length;Ee++){var De,Oe=P.children[Ee];(De=g(typeof Oe=="string"&&Oe in oe?oe[Oe]:Oe,!0,Q,se,"button",ae)).addEventListener("click",function(We){We.stopPropagation()},!1),Ae.appendChild(De)}return ke.appendChild(Ae),ke}function g(P,Q,se,ae,ke,Ae){P=P||{};var Ee=document.createElement(ke);if(P.attributes)for(var De in P.attributes)Object.prototype.hasOwnProperty.call(P.attributes,De)&&Ee.setAttribute(De,P.attributes[De]);var Oe=Ae.options.toolbarButtonClassPrefix?Ae.options.toolbarButtonClassPrefix+"-":"";Ee.className=Oe+P.name,Ee.setAttribute("type",ke),se=se==null||se,P.text&&(Ee.innerText=P.text),P.name&&P.name in ae&&(d[P.name]=P.action),P.title&&se&&(Ee.title=function(sn,on,Tn){var Cr,Qi=sn;return on&&Tn[Cr=function(hs){for(var Vi in d)if(d[Vi]===hs)return Vi;return null}(on)]&&(Qi+=" ("+h(Tn[Cr])+")"),Qi}(P.title,P.action,ae),l&&(Ee.title=Ee.title.replace("Ctrl",""),Ee.title=Ee.title.replace("Alt",""))),P.title&&Ee.setAttribute("aria-label",P.title),P.noDisable&&Ee.classList.add("no-disable"),P.noMobile&&Ee.classList.add("no-mobile");var We=[];P.className!==void 0&&(We=P.className.split(" "));for(var tt=[],ft=0;ft<We.length;ft++){var Kt=We[ft];Kt.match(/^fa([srlb]|(-[\w-]*)|$)/)?tt.push(Kt):Ee.classList.add(Kt)}if(Ee.tabIndex=-1,tt.length>0){for(var xt=document.createElement("i"),Qt=0;Qt<tt.length;Qt++){var rn=tt[Qt];xt.classList.add(rn)}Ee.appendChild(xt)}return P.icon!==void 0&&(Ee.innerHTML=P.icon),P.action&&Q&&(typeof P.action=="function"?Ee.onclick=function(sn){sn.preventDefault(),P.action(Ae)}:typeof P.action=="string"&&(Ee.onclick=function(sn){sn.preventDefault(),window.open(P.action,"_blank")})),Ee}function b(){var P=document.createElement("i");return P.className="separator",P.innerHTML="|",P}function y(P,Q){Q=Q||P.getCursor("start");var se=P.getTokenAt(Q);if(!se.type)return{};for(var ae,ke,Ae=se.type.split(" "),Ee={},De=0;De<Ae.length;De++)(ae=Ae[De])==="strong"?Ee.bold=!0:ae==="variable-2"?(ke=P.getLine(Q.line),/^\s*\d+\.\s/.test(ke)?Ee["ordered-list"]=!0:Ee["unordered-list"]=!0):ae==="atom"?Ee.quote=!0:ae==="em"?Ee.italic=!0:ae==="quote"?Ee.quote=!0:ae==="strikethrough"?Ee.strikethrough=!0:ae==="comment"?Ee.code=!0:ae!=="link"||Ee.image?ae==="image"?Ee.image=!0:ae.match(/^header(-[1-6])?$/)&&(Ee[ae.replace("header","heading")]=!0):Ee.link=!0;return Ee}var v="";function w(P){var Q=P.codemirror;Q.setOption("fullScreen",!Q.getOption("fullScreen")),Q.getOption("fullScreen")?(v=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=v;var se=Q.getWrapperElement(),ae=se.nextSibling;if(ae.classList.contains("editor-preview-active-side"))if(P.options.sideBySideFullscreen===!1){var ke=se.parentNode;Q.getOption("fullScreen")?ke.classList.remove("sided--no-fullscreen"):ke.classList.add("sided--no-fullscreen")}else we(P);P.options.onToggleFullScreen&&P.options.onToggleFullScreen(Q.getOption("fullScreen")||!1),P.options.maxHeight!==void 0&&(Q.getOption("fullScreen")?(Q.getScrollerElement().style.removeProperty("height"),ae.style.removeProperty("height")):(Q.getScrollerElement().style.height=P.options.maxHeight,P.setPreviewMaxHeight())),P.toolbar_div.classList.toggle("fullscreen"),P.toolbarElements&&P.toolbarElements.fullscreen&&P.toolbarElements.fullscreen.classList.toggle("active")}function E(P){nn(P,"bold",P.options.blockStyles.bold)}function S(P){nn(P,"italic",P.options.blockStyles.italic)}function T(P){nn(P,"strikethrough","~~")}function D(P){var Q=P.options.blockStyles.code;function se(mn){if(typeof mn!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof mn+": "+mn;return mn.styles&&mn.styles[2]&&mn.styles[2].indexOf("formatting-code-block")!==-1}function ae(mn){return mn.state.base.base||mn.state.base}function ke(mn,Kr,or,zi,nr){or=or||mn.getLineHandle(Kr),zi=zi||mn.getTokenAt({line:Kr,ch:1}),nr=nr||!!or.text&&mn.getTokenAt({line:Kr,ch:or.text.length-1});var $r=zi.type?zi.type.split(" "):[];return nr&&ae(nr).indentedCode?"indented":$r.indexOf("comment")!==-1&&(ae(zi).fencedChars||ae(nr).fencedChars||se(or)?"fenced":"single")}var Ae,Ee,De,Oe=P.codemirror,We=Oe.getCursor("start"),tt=Oe.getCursor("end"),ft=Oe.getTokenAt({line:We.line,ch:We.ch||1}),Kt=Oe.getLineHandle(We.line),xt=ke(Oe,We.line,Kt,ft);if(xt==="single"){var Qt=Kt.text.slice(0,We.ch).replace("`",""),rn=Kt.text.slice(We.ch).replace("`","");Oe.replaceRange(Qt+rn,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),We.ch--,We!==tt&&tt.ch--,Oe.setSelection(We,tt),Oe.focus()}else if(xt==="fenced")if(We.line!==tt.line||We.ch!==tt.ch){for(Ae=We.line;Ae>=0&&!se(Kt=Oe.getLineHandle(Ae));Ae--);var sn,on,Tn,Cr,Qi=ae(Oe.getTokenAt({line:Ae,ch:1})).fencedChars;se(Oe.getLineHandle(We.line))?(sn="",on=We.line):se(Oe.getLineHandle(We.line-1))?(sn="",on=We.line-1):(sn=Qi+`
`,on=We.line),se(Oe.getLineHandle(tt.line))?(Tn="",Cr=tt.line,tt.ch===0&&(Cr+=1)):tt.ch!==0&&se(Oe.getLineHandle(tt.line+1))?(Tn="",Cr=tt.line+1):(Tn=Qi+`
`,Cr=tt.line+1),tt.ch===0&&(Cr-=1),Oe.operation(function(){Oe.replaceRange(Tn,{line:Cr,ch:0},{line:Cr+(Tn?0:1),ch:0}),Oe.replaceRange(sn,{line:on,ch:0},{line:on+(sn?0:1),ch:0})}),Oe.setSelection({line:on+(sn?1:0),ch:0},{line:Cr+(sn?1:-1),ch:0}),Oe.focus()}else{var hs=We.line;if(se(Oe.getLineHandle(We.line))&&(ke(Oe,We.line+1)==="fenced"?(Ae=We.line,hs=We.line+1):(Ee=We.line,hs=We.line-1)),Ae===void 0)for(Ae=hs;Ae>=0&&!se(Kt=Oe.getLineHandle(Ae));Ae--);if(Ee===void 0)for(De=Oe.lineCount(),Ee=hs;Ee<De&&!se(Kt=Oe.getLineHandle(Ee));Ee++);Oe.operation(function(){Oe.replaceRange("",{line:Ae,ch:0},{line:Ae+1,ch:0}),Oe.replaceRange("",{line:Ee-1,ch:0},{line:Ee,ch:0})}),Oe.focus()}else if(xt==="indented"){if(We.line!==tt.line||We.ch!==tt.ch)Ae=We.line,Ee=tt.line,tt.ch===0&&Ee--;else{for(Ae=We.line;Ae>=0;Ae--)if(!(Kt=Oe.getLineHandle(Ae)).text.match(/^\s*$/)&&ke(Oe,Ae,Kt)!=="indented"){Ae+=1;break}for(De=Oe.lineCount(),Ee=We.line;Ee<De;Ee++)if(!(Kt=Oe.getLineHandle(Ee)).text.match(/^\s*$/)&&ke(Oe,Ee,Kt)!=="indented"){Ee-=1;break}}var Vi=Oe.getLineHandle(Ee+1),zo=Vi&&Oe.getTokenAt({line:Ee+1,ch:Vi.text.length-1});zo&&ae(zo).indentedCode&&Oe.replaceRange(`
`,{line:Ee+1,ch:0});for(var Hn=Ae;Hn<=Ee;Hn++)Oe.indentLine(Hn,"subtract");Oe.focus()}else{var Ir=We.line===tt.line&&We.ch===tt.ch&&We.ch===0,Rr=We.line!==tt.line;Ir||Rr?function(mn,Kr,or,zi){var nr=Kr.line+1,$r=or.line+1,ro=Kr.line!==or.line,ge=zi+`
`,Le=`
`+zi;ro&&$r++,ro&&or.ch===0&&(Le=zi+`
`,$r--),qe(mn,!1,[ge,Le]),mn.setSelection({line:nr,ch:0},{line:$r,ch:0})}(Oe,We,tt,Q):qe(Oe,!1,["`","`"])}}function k(P){St(P.codemirror,"quote")}function R(P){Pe(P.codemirror,"smaller")}function O(P){Pe(P.codemirror,"bigger")}function B(P){Pe(P.codemirror,void 0,1)}function K(P){Pe(P.codemirror,void 0,2)}function L(P){Pe(P.codemirror,void 0,3)}function I(P){Pe(P.codemirror,void 0,4)}function $(P){Pe(P.codemirror,void 0,5)}function U(P){Pe(P.codemirror,void 0,6)}function q(P){var Q=P.codemirror,se="*";["-","+","*"].includes(P.options.unorderedListStyle)&&(se=P.options.unorderedListStyle),St(Q,"unordered-list",se)}function Y(P){St(P.codemirror,"ordered-list")}function X(P){(function(Q){if(!Q.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var se,ae=Q.getCursor("start"),ke=Q.getCursor("end"),Ae=ae.line;Ae<=ke.line;Ae++)se=(se=Q.getLine(Ae)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),Q.replaceRange(se,{line:Ae,ch:0},{line:Ae,ch:99999999999999})})(P.codemirror)}function te(P){var Q=P.options,se="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.link,se);if(!ae)return!1;se=ee(ae)}ht(P,"link",Q.insertTexts.link,se)}function le(P){var Q=P.options,se="https://";if(Q.promptURLs){var ae=prompt(Q.promptTexts.image,se);if(!ae)return!1;se=ee(ae)}ht(P,"image",Q.insertTexts.image,se)}function ee(P){return encodeURI(P).replace(/([\\()])/g,"\\$1")}function z(P){P.openBrowseFileWindow()}function he(P,Q){var se=P.codemirror,ae=y(se),ke=P.options,Ae=Q.substr(Q.lastIndexOf("/")+1),Ee=Ae.substring(Ae.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Ee))qe(se,ae.image,ke.insertTexts.uploadedImage,Q);else{var De=ke.insertTexts.link;De[0]="["+Ae,qe(se,ae.link,De,Q)}P.updateStatusBar("upload-image",P.options.imageTexts.sbOnUploaded.replace("#image_name#",Ae)),setTimeout(function(){P.updateStatusBar("upload-image",P.options.imageTexts.sbInit)},1e3)}function fe(P){var Q=P.codemirror,se=y(Q),ae=P.options;qe(Q,se.table,ae.insertTexts.table)}function ze(P){var Q=P.codemirror,se=y(Q),ae=P.options;qe(Q,se.image,ae.insertTexts.horizontalRule)}function He(P){var Q=P.codemirror;Q.undo(),Q.focus()}function je(P){var Q=P.codemirror;Q.redo(),Q.focus()}function we(P){var Q=P.codemirror,se=Q.getWrapperElement(),ae=se.nextSibling,ke=P.toolbarElements&&P.toolbarElements["side-by-side"],Ae=!1,Ee=se.parentNode;ae.classList.contains("editor-preview-active-side")?(P.options.sideBySideFullscreen===!1&&Ee.classList.remove("sided--no-fullscreen"),ae.classList.remove("editor-preview-active-side"),ke&&ke.classList.remove("active"),se.classList.remove("CodeMirror-sided")):(setTimeout(function(){Q.getOption("fullScreen")||(P.options.sideBySideFullscreen===!1?Ee.classList.add("sided--no-fullscreen"):w(P)),ae.classList.add("editor-preview-active-side")},1),ke&&ke.classList.add("active"),se.classList.add("CodeMirror-sided"),Ae=!0);var De=se.lastChild;if(De.classList.contains("editor-preview-active")){De.classList.remove("editor-preview-active");var Oe=P.toolbarElements.preview,We=P.toolbar_div;Oe.classList.remove("active"),We.classList.remove("disabled-for-preview")}if(Q.sideBySideRenderingFunction||(Q.sideBySideRenderingFunction=function(){var ft=P.options.previewRender(P.value(),ae);ft!=null&&(ae.innerHTML=ft)}),Ae){var tt=P.options.previewRender(P.value(),ae);tt!=null&&(ae.innerHTML=tt),Q.on("update",Q.sideBySideRenderingFunction)}else Q.off("update",Q.sideBySideRenderingFunction);Q.refresh()}function $e(P){var Q=P.codemirror,se=Q.getWrapperElement(),ae=P.toolbar_div,ke=!!P.options.toolbar&&P.toolbarElements.preview,Ae=se.lastChild;if(Q.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&we(P),!Ae||!Ae.classList.contains("editor-preview-full")){if((Ae=document.createElement("div")).className="editor-preview-full",P.options.previewClass)if(Array.isArray(P.options.previewClass))for(var Ee=0;Ee<P.options.previewClass.length;Ee++)Ae.classList.add(P.options.previewClass[Ee]);else typeof P.options.previewClass=="string"&&Ae.classList.add(P.options.previewClass);se.appendChild(Ae)}Ae.classList.contains("editor-preview-active")?(Ae.classList.remove("editor-preview-active"),ke&&(ke.classList.remove("active"),ae.classList.remove("disabled-for-preview"))):(setTimeout(function(){Ae.classList.add("editor-preview-active")},1),ke&&(ke.classList.add("active"),ae.classList.add("disabled-for-preview")));var De=P.options.previewRender(P.value(),Ae);De!==null&&(Ae.innerHTML=De)}function qe(P,Q,se,ae){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var ke,Ae=se[0],Ee=se[1],De={},Oe={};Object.assign(De,P.getCursor("start")),Object.assign(Oe,P.getCursor("end")),ae&&(Ae=Ae.replace("#url#",ae),Ee=Ee.replace("#url#",ae)),Q?(Ae=(ke=P.getLine(De.line)).slice(0,De.ch),Ee=ke.slice(De.ch),P.replaceRange(Ae+Ee,{line:De.line,ch:0})):(ke=P.getSelection(),P.replaceSelection(Ae+ke+Ee),De.ch+=Ae.length,De!==Oe&&(Oe.ch+=Ae.length)),P.setSelection(De,Oe),P.focus()}}function Pe(P,Q,se){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=P.getCursor("start"),ke=P.getCursor("end"),Ae=ae.line;Ae<=ke.line;Ae++)(function(Ee){var De=P.getLine(Ee),Oe=De.search(/[^#]/);De=Q!==void 0?Oe<=0?Q=="bigger"?"###### "+De:"# "+De:Oe==6&&Q=="smaller"?De.substr(7):Oe==1&&Q=="bigger"?De.substr(2):Q=="bigger"?De.substr(1):"#"+De:Oe<=0?"#".repeat(se)+" "+De:Oe==se?De.substr(Oe+1):"#".repeat(se)+" "+De.substr(Oe+1),P.replaceRange(De,{line:Ee,ch:0},{line:Ee,ch:99999999999999})})(Ae);P.focus()}}function St(P,Q,se){if(!P.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var ae=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,ke=/^\s*/,Ae=y(P),Ee=P.getCursor("start"),De=P.getCursor("end"),Oe={quote:/^(\s*)>\s+/,"unordered-list":ae,"ordered-list":ae},We=function(Kt,xt,Qt){var rn=ae.exec(xt),sn=function(on,Tn){return{quote:">","unordered-list":se,"ordered-list":"%%i."}[on].replace("%%i",Tn)}(Kt,tt);return rn!==null?(function(on,Tn){var Cr=new RegExp({quote:">","unordered-list":"\\"+se,"ordered-list":"\\d+."}[on]);return Tn&&Cr.test(Tn)}(Kt,rn[2])&&(sn=""),xt=rn[1]+sn+rn[3]+xt.replace(ke,"").replace(Oe[Kt],"$1")):Qt==0&&(xt=sn+" "+xt),xt},tt=1,ft=Ee.line;ft<=De.line;ft++)(function(Kt){var xt=P.getLine(Kt);Ae[Q]?xt=xt.replace(Oe[Q],"$1"):(Q=="unordered-list"&&(xt=We("ordered-list",xt,!0)),xt=We(Q,xt,!1),tt+=1),P.replaceRange(xt,{line:Kt,ch:0},{line:Kt,ch:99999999999999})})(ft);P.focus()}}function ht(P,Q,se,ae){if(P.codemirror&&!P.isPreviewActive()){var ke=P.codemirror,Ae=y(ke)[Q];if(Ae){var Ee=ke.getCursor("start"),De=ke.getCursor("end"),Oe=ke.getLine(Ee.line),We=Oe.slice(0,Ee.ch),tt=Oe.slice(Ee.ch);Q=="link"?We=We.replace(/(.*)[^!]\[/,"$1"):Q=="image"&&(We=We.replace(/(.*)!\[$/,"$1")),tt=tt.replace(/]\(.*?\)/,""),ke.replaceRange(We+tt,{line:Ee.line,ch:0},{line:Ee.line,ch:99999999999999}),Ee.ch-=se[0].length,Ee!==De&&(De.ch-=se[0].length),ke.setSelection(Ee,De),ke.focus()}else qe(ke,Ae,se,ae)}}function nn(P,Q,se,ae){if(P.codemirror&&!P.isPreviewActive()){ae=ae===void 0?se:ae;var ke,Ae=P.codemirror,Ee=y(Ae),De=se,Oe=ae,We=Ae.getCursor("start"),tt=Ae.getCursor("end");Ee[Q]?(De=(ke=Ae.getLine(We.line)).slice(0,We.ch),Oe=ke.slice(We.ch),Q=="bold"?(De=De.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),Oe=Oe.replace(/(\*\*|__)/,"")):Q=="italic"?(De=De.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),Oe=Oe.replace(/(\*|_)/,"")):Q=="strikethrough"&&(De=De.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),Oe=Oe.replace(/(\*\*|~~)/,"")),Ae.replaceRange(De+Oe,{line:We.line,ch:0},{line:We.line,ch:99999999999999}),Q=="bold"||Q=="strikethrough"?(We.ch-=2,We!==tt&&(tt.ch-=2)):Q=="italic"&&(We.ch-=1,We!==tt&&(tt.ch-=1))):(ke=Ae.getSelection(),Q=="bold"?ke=(ke=ke.split("**").join("")).split("__").join(""):Q=="italic"?ke=(ke=ke.split("*").join("")).split("_").join(""):Q=="strikethrough"&&(ke=ke.split("~~").join("")),Ae.replaceSelection(De+ke+Oe),We.ch+=se.length,tt.ch=We.ch+ke.length),Ae.setSelection(We,tt),Ae.focus()}}function Vt(P,Q){if(Math.abs(P)<1024)return""+P+Q[0];var se=0;do P/=1024,++se;while(Math.abs(P)>=1024&&se<Q.length);return""+P.toFixed(1)+Q[se]}function Mn(P,Q){for(var se in Q)Object.prototype.hasOwnProperty.call(Q,se)&&(Q[se]instanceof Array?P[se]=Q[se].concat(P[se]instanceof Array?P[se]:[]):Q[se]!==null&&typeof Q[se]=="object"&&Q[se].constructor===Object?P[se]=Mn(P[se]||{},Q[se]):P[se]=Q[se]);return P}function Ze(P){for(var Q=1;Q<arguments.length;Q++)P=Mn(P,arguments[Q]);return P}function pe(P){var Q=P.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),se=0;if(Q===null)return se;for(var ae=0;ae<Q.length;ae++)Q[ae].charCodeAt(0)>=19968?se+=Q[ae].length:se+=1;return se}var ie={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},oe={bold:{name:"bold",action:E,className:ie.bold,title:"Bold",default:!0},italic:{name:"italic",action:S,className:ie.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:T,className:ie.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:R,className:ie.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:R,className:ie["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:O,className:ie["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:B,className:ie["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:K,className:ie["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:L,className:ie["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:D,className:ie.code,title:"Code"},quote:{name:"quote",action:k,className:ie.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:q,className:ie["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:Y,className:ie["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:X,className:ie["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:te,className:ie.link,title:"Create Link",default:!0},image:{name:"image",action:le,className:ie.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:z,className:ie["upload-image"],title:"Import an image"},table:{name:"table",action:fe,className:ie.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:ze,className:ie["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:$e,className:ie.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:we,className:ie["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:w,className:ie.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:ie.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:He,className:ie.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:je,className:ie.redo,noDisable:!0,title:"Redo"}},ve={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},F={link:"URL for the link:",image:"URL of the image:"},H={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},J={bold:"**",code:"```",italic:"*"},re={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},ye={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function xe(P){(P=P||{}).parent=this;var Q=!0;if(P.autoDownloadFontAwesome===!1&&(Q=!1),P.autoDownloadFontAwesome!==!0)for(var se=document.styleSheets,ae=0;ae<se.length;ae++)se[ae].href&&se[ae].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(Q=!1);if(Q){var ke=document.createElement("link");ke.rel="stylesheet",ke.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(ke)}if(P.element)this.element=P.element;else if(P.element===null)return void console.log("EasyMDE: Error. No element was found.");if(P.toolbar===void 0)for(var Ae in P.toolbar=[],oe)Object.prototype.hasOwnProperty.call(oe,Ae)&&(Ae.indexOf("separator-")!=-1&&P.toolbar.push("|"),(oe[Ae].default===!0||P.showIcons&&P.showIcons.constructor===Array&&P.showIcons.indexOf(Ae)!=-1)&&P.toolbar.push(Ae));if(Object.prototype.hasOwnProperty.call(P,"previewClass")||(P.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(P,"status")||(P.status=["autosave","lines","words","cursor"],P.uploadImage&&P.status.unshift("upload-image")),P.previewRender||(P.previewRender=function(De){return this.parent.markdown(De)}),P.parsingConfig=Ze({highlightFormatting:!0},P.parsingConfig||{}),P.insertTexts=Ze({},ve,P.insertTexts||{}),P.promptTexts=Ze({},F,P.promptTexts||{}),P.blockStyles=Ze({},J,P.blockStyles||{}),P.autosave!=null&&(P.autosave.timeFormat=Ze({},H,P.autosave.timeFormat||{})),P.iconClassMap=Ze({},ie,P.iconClassMap||{}),P.shortcuts=Ze({},c,P.shortcuts||{}),P.maxHeight=P.maxHeight||void 0,P.direction=P.direction||"ltr",P.maxHeight!==void 0?P.minHeight=P.maxHeight:P.minHeight=P.minHeight||"300px",P.errorCallback=P.errorCallback||function(De){alert(De)},P.uploadImage=P.uploadImage||!1,P.imageMaxSize=P.imageMaxSize||2097152,P.imageAccept=P.imageAccept||"image/png, image/jpeg, image/gif, image/avif",P.imageTexts=Ze({},re,P.imageTexts||{}),P.errorMessages=Ze({},ye,P.errorMessages||{}),P.imagePathAbsolute=P.imagePathAbsolute||!1,P.imageCSRFName=P.imageCSRFName||"csrfmiddlewaretoken",P.imageCSRFHeader=P.imageCSRFHeader||!1,P.autosave!=null&&P.autosave.unique_id!=null&&P.autosave.unique_id!=""&&(P.autosave.uniqueId=P.autosave.unique_id),P.overlayMode&&P.overlayMode.combine===void 0&&(P.overlayMode.combine=!0),this.options=P,this.render(),!P.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(P.initialValue),P.uploadImage){var Ee=this;this.codemirror.on("dragenter",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragend",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragleave",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbInit),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("dragover",function(De,Oe){Ee.updateStatusBar("upload-image",Ee.options.imageTexts.sbOnDragEnter),Oe.stopPropagation(),Oe.preventDefault()}),this.codemirror.on("drop",function(De,Oe){Oe.stopPropagation(),Oe.preventDefault(),P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.dataTransfer.files):Ee.uploadImages(Oe.dataTransfer.files)}),this.codemirror.on("paste",function(De,Oe){P.imageUploadFunction?Ee.uploadImagesUsingCustomFunction(P.imageUploadFunction,Oe.clipboardData.files):Ee.uploadImages(Oe.clipboardData.files)})}}function Re(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}xe.prototype.uploadImages=function(P,Q,se){if(P.length!==0){for(var ae=[],ke=0;ke<P.length;ke++)ae.push(P[ke].name),this.uploadImage(P[ke],Q,se);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",ae.join(", ")))}},xe.prototype.uploadImagesUsingCustomFunction=function(P,Q){if(Q.length!==0){for(var se=[],ae=0;ae<Q.length;ae++)se.push(Q[ae].name),this.uploadImageUsingCustomFunction(P,Q[ae]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",se.join(", ")))}},xe.prototype.updateStatusBar=function(P,Q){if(this.gui.statusbar){var se=this.gui.statusbar.getElementsByClassName(P);se.length===1?this.gui.statusbar.getElementsByClassName(P)[0].textContent=Q:se.length===0?console.log("EasyMDE: status bar item "+P+" was not found."):console.log("EasyMDE: Several status bar items named "+P+" was found.")}},xe.prototype.markdown=function(P){if(a){var Q;if(Q=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?Q.breaks=!1:Q.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var se=this.options.renderingConfig.hljs||window.hljs;se&&(Q.highlight=function(ke,Ae){return Ae&&se.getLanguage(Ae)?se.highlight(Ae,ke).value:se.highlightAuto(ke).value})}a.setOptions(Q);var ae=a.parse(P);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(ae=this.options.renderingConfig.sanitizerFunction.call(this,ae)),ae=function(ke){for(var Ae=new DOMParser().parseFromString(ke,"text/html"),Ee=Ae.getElementsByTagName("li"),De=0;De<Ee.length;De++)for(var Oe=Ee[De],We=0;We<Oe.children.length;We++){var tt=Oe.children[We];tt instanceof HTMLInputElement&&tt.type==="checkbox"&&(Oe.style.marginLeft="-1.5em",Oe.style.listStyleType="none")}return Ae.documentElement.innerHTML}(ae=function(ke){for(var Ae;(Ae=u.exec(ke))!==null;){var Ee=Ae[0];if(Ee.indexOf("target=")===-1){var De=Ee.replace(/>$/,' target="_blank">');ke=ke.replace(Ee,De)}}return ke}(ae))}},xe.prototype.render=function(P){if(P||(P=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==P){this.element=P;var Q,se,ae=this.options,ke=this,Ae={};for(var Ee in ae.shortcuts)ae.shortcuts[Ee]!==null&&d[Ee]!==null&&function(xt){Ae[h(ae.shortcuts[xt])]=function(){var Qt=d[xt];typeof Qt=="function"?Qt(ke):typeof Qt=="string"&&window.open(Qt,"_blank")}}(Ee);if(Ae.Enter="newlineAndIndentContinueMarkdownList",Ae.Tab="tabAndIndentMarkdownList",Ae["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Ae.Esc=function(xt){xt.getOption("fullScreen")&&w(ke)},this.documentOnKeyDown=function(xt){(xt=xt||window.event).keyCode==27&&ke.codemirror.getOption("fullScreen")&&w(ke)},document.addEventListener("keydown",this.documentOnKeyDown,!1),ae.overlayMode?(s.defineMode("overlay-mode",function(xt){return s.overlayMode(s.getMode(xt,ae.spellChecker!==!1?"spell-checker":"gfm"),ae.overlayMode.mode,ae.overlayMode.combine)}),Q="overlay-mode",(se=ae.parsingConfig).gitHubSpice=!1):((Q=ae.parsingConfig).name="gfm",Q.gitHubSpice=!1),ae.spellChecker!==!1&&(Q="spell-checker",(se=ae.parsingConfig).name="gfm",se.gitHubSpice=!1,typeof ae.spellChecker=="function"?ae.spellChecker({codeMirrorInstance:s}):o({codeMirrorInstance:s})),this.codemirror=s.fromTextArea(P,{mode:Q,backdrop:se,theme:ae.theme!=null?ae.theme:"easymde",tabSize:ae.tabSize!=null?ae.tabSize:2,indentUnit:ae.tabSize!=null?ae.tabSize:2,indentWithTabs:ae.indentWithTabs!==!1,lineNumbers:ae.lineNumbers===!0,autofocus:ae.autofocus===!0,extraKeys:Ae,direction:ae.direction,lineWrapping:ae.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:ae.placeholder||P.getAttribute("placeholder")||"",styleSelectedText:ae.styleSelectedText!=null?ae.styleSelectedText:!f(),scrollbarStyle:ae.scrollbarStyle!=null?ae.scrollbarStyle:"native",configureMouse:function(xt,Qt,rn){return{addNew:!1}},inputStyle:ae.inputStyle!=null?ae.inputStyle:f()?"contenteditable":"textarea",spellcheck:ae.nativeSpellcheck==null||ae.nativeSpellcheck,autoRefresh:ae.autoRefresh!=null&&ae.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=ae.minHeight,ae.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=ae.maxHeight),ae.forceSync===!0){var De=this.codemirror;De.on("change",function(){De.save()})}this.gui={};var Oe=document.createElement("div");Oe.classList.add("EasyMDEContainer"),Oe.setAttribute("role","application");var We=this.codemirror.getWrapperElement();We.parentNode.insertBefore(Oe,We),Oe.appendChild(We),ae.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),ae.status!==!1&&(this.gui.statusbar=this.createStatusbar()),ae.autosave!=null&&ae.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(ke._autosave_timeout),ke._autosave_timeout=setTimeout(function(){ke.autosave()},ke.options.autosave.submit_delay||ke.options.autosave.delay||1e3)}));var tt=this;this.codemirror.on("update",function(){ae.previewImagesInEditor&&Oe.querySelectorAll(".cm-image-marker").forEach(function(xt){var Qt=xt.parentElement;if(Qt.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Qt.hasAttribute("data-img-src")){var rn=Qt.innerText.match("\\((.*)\\)");if(window.EMDEimagesCache||(window.EMDEimagesCache={}),rn&&rn.length>=2){var sn=rn[1];if(ae.imagesPreviewHandler){var on=ae.imagesPreviewHandler(rn[1]);typeof on=="string"&&(sn=on)}if(window.EMDEimagesCache[sn])Kt(Qt,window.EMDEimagesCache[sn]);else{var Tn=document.createElement("img");Tn.onload=function(){window.EMDEimagesCache[sn]={naturalWidth:Tn.naturalWidth,naturalHeight:Tn.naturalHeight,url:sn},Kt(Qt,window.EMDEimagesCache[sn])},Tn.src=sn}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(ae.autofocus===!0||P.autofocus)&&this.codemirror.focus();var ft=this.codemirror;setTimeout((function(){ft.refresh()}).bind(ft),0)}function Kt(xt,Qt){var rn,sn;xt.setAttribute("data-img-src",Qt.url),xt.setAttribute("style","--bg-image:url("+Qt.url+");--width:"+Qt.naturalWidth+"px;--height:"+(rn=Qt.naturalWidth,sn=Qt.naturalHeight,rn<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?sn+"px":sn/rn*100+"%")),tt.codemirror.setSize()}},xe.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},xe.prototype.autosave=function(){if(Re()){var P=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(P.element.form!=null&&P.element.form!=null&&P.element.form.addEventListener("submit",function(){clearTimeout(P.autosaveTimeoutId),P.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+P.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var Q=P.value();Q!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,Q):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var se=document.getElementById("autosaved");if(se!=null&&se!=null&&se!=""){var ae=new Date,ke=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(ae),Ae=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;se.innerHTML=Ae+ke}}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.clearAutosavedValue=function(){if(Re()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},xe.prototype.openBrowseFileWindow=function(P,Q){var se=this,ae=this.gui.toolbar.getElementsByClassName("imageInput")[0];ae.click(),ae.addEventListener("change",function ke(Ae){se.options.imageUploadFunction?se.uploadImagesUsingCustomFunction(se.options.imageUploadFunction,Ae.target.files):se.uploadImages(Ae.target.files,P,Q),ae.removeEventListener("change",ke)})},xe.prototype.uploadImage=function(P,Q,se){var ae=this;function ke(Oe){ae.updateStatusBar("upload-image",Oe),setTimeout(function(){ae.updateStatusBar("upload-image",ae.options.imageTexts.sbInit)},1e4),se&&typeof se=="function"&&se(Oe),ae.options.errorCallback(Oe)}function Ae(Oe){var We=ae.options.imageTexts.sizeUnits.split(",");return Oe.replace("#image_name#",P.name).replace("#image_size#",Vt(P.size,We)).replace("#image_max_size#",Vt(ae.options.imageMaxSize,We))}if(Q=Q||function(Oe){he(ae,Oe)},P.size>this.options.imageMaxSize)ke(Ae(this.options.errorMessages.fileTooLarge));else{var Ee=new FormData;Ee.append("image",P),ae.options.imageCSRFToken&&!ae.options.imageCSRFHeader&&Ee.append(ae.options.imageCSRFName,ae.options.imageCSRFToken);var De=new XMLHttpRequest;De.upload.onprogress=function(Oe){if(Oe.lengthComputable){var We=""+Math.round(100*Oe.loaded/Oe.total);ae.updateStatusBar("upload-image",ae.options.imageTexts.sbProgress.replace("#file_name#",P.name).replace("#progress#",We))}},De.open("POST",this.options.imageUploadEndpoint),ae.options.imageCSRFToken&&ae.options.imageCSRFHeader&&De.setRequestHeader(ae.options.imageCSRFName,ae.options.imageCSRFToken),De.onload=function(){try{var Oe=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void ke(Ae(ae.options.errorMessages.importError))}this.status===200&&Oe&&!Oe.error&&Oe.data&&Oe.data.filePath?Q((ae.options.imagePathAbsolute?"":window.location.origin+"/")+Oe.data.filePath):Oe.error&&Oe.error in ae.options.errorMessages?ke(Ae(ae.options.errorMessages[Oe.error])):Oe.error?ke(Ae(Oe.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),ke(Ae(ae.options.errorMessages.importError)))},De.onerror=function(Oe){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+Oe.target.status+" ("+Oe.target.statusText+")"),ke(ae.options.errorMessages.importError)},De.send(Ee)}},xe.prototype.uploadImageUsingCustomFunction=function(P,Q){var se=this;P.apply(this,[Q,function(ae){he(se,ae)},function(ae){var ke=function(Ae){var Ee=se.options.imageTexts.sizeUnits.split(",");return Ae.replace("#image_name#",Q.name).replace("#image_size#",Vt(Q.size,Ee)).replace("#image_max_size#",Vt(se.options.imageMaxSize,Ee))}(ae);se.updateStatusBar("upload-image",ke),setTimeout(function(){se.updateStatusBar("upload-image",se.options.imageTexts.sbInit)},1e4),se.options.errorCallback(ke)}])},xe.prototype.setPreviewMaxHeight=function(){var P=this.codemirror.getWrapperElement(),Q=P.nextSibling,se=parseInt(window.getComputedStyle(P).paddingTop),ae=parseInt(window.getComputedStyle(P).borderTopWidth),ke=(parseInt(this.options.maxHeight)+2*se+2*ae).toString()+"px";Q.style.height=ke},xe.prototype.createSideBySide=function(){var P=this.codemirror,Q=P.getWrapperElement(),se=Q.nextSibling;if(!se||!se.classList.contains("editor-preview-side")){if((se=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var ae=0;ae<this.options.previewClass.length;ae++)se.classList.add(this.options.previewClass[ae]);else typeof this.options.previewClass=="string"&&se.classList.add(this.options.previewClass);Q.parentNode.insertBefore(se,Q.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return se;var ke=!1,Ae=!1;return P.on("scroll",function(Ee){if(ke)ke=!1;else{Ae=!0;var De=Ee.getScrollInfo().height-Ee.getScrollInfo().clientHeight,Oe=parseFloat(Ee.getScrollInfo().top)/De,We=(se.scrollHeight-se.clientHeight)*Oe;se.scrollTop=We}}),se.onscroll=function(){if(Ae)Ae=!1;else{ke=!0;var Ee=se.scrollHeight-se.clientHeight,De=parseFloat(se.scrollTop)/Ee,Oe=(P.getScrollInfo().height-P.getScrollInfo().clientHeight)*De;P.scrollTo(0,Oe)}},se},xe.prototype.createToolbar=function(P){if((P=P||this.options.toolbar)&&P.length!==0){var Q;for(Q=0;Q<P.length;Q++)oe[P[Q]]!=null&&(P[Q]=oe[P[Q]]);var se=document.createElement("div");se.className="editor-toolbar",se.setAttribute("role","toolbar");var ae=this,ke={};for(ae.toolbar=P,Q=0;Q<P.length;Q++)if((P[Q].name!="guide"||ae.options.toolbarGuideIcon!==!1)&&!(ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Q].name)!=-1||(P[Q].name=="fullscreen"||P[Q].name=="side-by-side")&&f())){if(P[Q]==="|"){for(var Ae=!1,Ee=Q+1;Ee<P.length;Ee++)P[Ee]==="|"||ae.options.hideIcons&&ae.options.hideIcons.indexOf(P[Ee].name)!=-1||(Ae=!0);if(!Ae)continue}(function(We){var tt;if(tt=We==="|"?b():We.children?p(We,ae.options.toolbarTips,ae.options.shortcuts,ae):g(We,!0,ae.options.toolbarTips,ae.options.shortcuts,"button",ae),ke[We.name||We]=tt,se.appendChild(tt),We.name==="upload-image"){var ft=document.createElement("input");ft.className="imageInput",ft.type="file",ft.multiple=!0,ft.name="image",ft.accept=ae.options.imageAccept,ft.style.display="none",ft.style.opacity=0,se.appendChild(ft)}})(P[Q])}ae.toolbar_div=se,ae.toolbarElements=ke;var De=this.codemirror;De.on("cursorActivity",function(){var We=y(De);for(var tt in ke)(function(ft){var Kt=ke[ft];We[ft]?Kt.classList.add("active"):ft!="fullscreen"&&ft!="side-by-side"&&Kt.classList.remove("active")})(tt)});var Oe=De.getWrapperElement();return Oe.parentNode.insertBefore(se,Oe),se}},xe.prototype.createStatusbar=function(P){P=P||this.options.status;var Q=this.options,se=this.codemirror;if(P&&P.length!==0){var ae,ke,Ae,Ee,De=[];for(ae=0;ae<P.length;ae++)if(ke=void 0,Ae=void 0,Ee=void 0,typeof P[ae]=="object")De.push({className:P[ae].className,defaultValue:P[ae].defaultValue,onUpdate:P[ae].onUpdate,onActivity:P[ae].onActivity});else{var Oe=P[ae];Oe==="words"?(Ee=function(xt){xt.innerHTML=pe(se.getValue())},ke=function(xt){xt.innerHTML=pe(se.getValue())}):Oe==="lines"?(Ee=function(xt){xt.innerHTML=se.lineCount()},ke=function(xt){xt.innerHTML=se.lineCount()}):Oe==="cursor"?(Ee=function(xt){xt.innerHTML="1:1"},Ae=function(xt){var Qt=se.getCursor(),rn=Qt.line+1,sn=Qt.ch+1;xt.innerHTML=rn+":"+sn}):Oe==="autosave"?Ee=function(xt){Q.autosave!=null&&Q.autosave.enabled===!0&&xt.setAttribute("id","autosaved")}:Oe==="upload-image"&&(Ee=function(xt){xt.innerHTML=Q.imageTexts.sbInit}),De.push({className:Oe,defaultValue:Ee,onUpdate:ke,onActivity:Ae})}var We=document.createElement("div");for(We.className="editor-statusbar",ae=0;ae<De.length;ae++){var tt=De[ae],ft=document.createElement("span");ft.className=tt.className,typeof tt.defaultValue=="function"&&tt.defaultValue(ft),typeof tt.onUpdate=="function"&&this.codemirror.on("update",function(xt,Qt){return function(){Qt.onUpdate(xt)}}(ft,tt)),typeof tt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(xt,Qt){return function(){Qt.onActivity(xt)}}(ft,tt)),We.appendChild(ft)}var Kt=this.codemirror.getWrapperElement();return Kt.parentNode.insertBefore(We,Kt.nextSibling),We}},xe.prototype.value=function(P){var Q=this.codemirror;if(P===void 0)return Q.getValue();if(Q.getDoc().setValue(P),this.isPreviewActive()){var se=Q.getWrapperElement().lastChild,ae=this.options.previewRender(P,se);ae!==null&&(se.innerHTML=ae)}return this},xe.toggleBold=E,xe.toggleItalic=S,xe.toggleStrikethrough=T,xe.toggleBlockquote=k,xe.toggleHeadingSmaller=R,xe.toggleHeadingBigger=O,xe.toggleHeading1=B,xe.toggleHeading2=K,xe.toggleHeading3=L,xe.toggleHeading4=I,xe.toggleHeading5=$,xe.toggleHeading6=U,xe.toggleCodeBlock=D,xe.toggleUnorderedList=q,xe.toggleOrderedList=Y,xe.cleanBlock=X,xe.drawLink=te,xe.drawImage=le,xe.drawUploadedImage=z,xe.drawTable=fe,xe.drawHorizontalRule=ze,xe.undo=He,xe.redo=je,xe.togglePreview=$e,xe.toggleSideBySide=we,xe.toggleFullScreen=w,xe.prototype.toggleBold=function(){E(this)},xe.prototype.toggleItalic=function(){S(this)},xe.prototype.toggleStrikethrough=function(){T(this)},xe.prototype.toggleBlockquote=function(){k(this)},xe.prototype.toggleHeadingSmaller=function(){R(this)},xe.prototype.toggleHeadingBigger=function(){O(this)},xe.prototype.toggleHeading1=function(){B(this)},xe.prototype.toggleHeading2=function(){K(this)},xe.prototype.toggleHeading3=function(){L(this)},xe.prototype.toggleHeading4=function(){I(this)},xe.prototype.toggleHeading5=function(){$(this)},xe.prototype.toggleHeading6=function(){U(this)},xe.prototype.toggleCodeBlock=function(){D(this)},xe.prototype.toggleUnorderedList=function(){q(this)},xe.prototype.toggleOrderedList=function(){Y(this)},xe.prototype.cleanBlock=function(){X(this)},xe.prototype.drawLink=function(){te(this)},xe.prototype.drawImage=function(){le(this)},xe.prototype.drawUploadedImage=function(){z(this)},xe.prototype.drawTable=function(){fe(this)},xe.prototype.drawHorizontalRule=function(){ze(this)},xe.prototype.undo=function(){He(this)},xe.prototype.redo=function(){je(this)},xe.prototype.togglePreview=function(){$e(this)},xe.prototype.toggleSideBySide=function(){we(this)},xe.prototype.toggleFullScreen=function(){w(this)},xe.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},xe.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},xe.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},xe.prototype.getState=function(){return y(this.codemirror)},xe.prototype.toTextArea=function(){var P=this.codemirror,Q=P.getWrapperElement(),se=Q.parentNode;se&&(this.gui.toolbar&&se.removeChild(this.gui.toolbar),this.gui.statusbar&&se.removeChild(this.gui.statusbar),this.gui.sideBySide&&se.removeChild(this.gui.sideBySide)),se.parentNode.insertBefore(Q,se),se.remove(),P.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=xe},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}(a5)),a5.exports}var $Rt=IRt();const PRt=aa($Rt);(()=>{var t=s=>s==null?!1:typeof s=="boolean"?s:s.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var e="min-label",n="max-label",r="#1E293B",i=()=>{let s=null,o=null,a=null,l,u=!1,d=r,c="",f,h=null,p=null,g=null,b=[],y=()=>{var O;let B=(O=s==null?void 0:s.shadowRoot)==null?void 0:O.querySelector(".range-slider-box");h=document.createElement("div"),h.classList.add("labels-row"),B.prepend(h)},v=O=>{let B=document.createElement("label");return B.className=O,B.setAttribute("for","range-slider"),B},w=()=>{p=v(e),p.textContent=R(a==null?void 0:a.getTextMin(),c),g=v(n),g.textContent=R(a==null?void 0:a.getTextMax(),c),o==null||o.before(p),o==null||o.after(g);let O=a==null?void 0:a.getValues();if(O)for(let B=0;B<O.length;B++){let K=v(`value${B+1}-label generated-label`);K.textContent=R(O[B],c),b.push(K),h==null||h.append(K)}},E=()=>{for(let O of b)!O||O.remove();p==null||p.remove(),g==null||g.remove(),h==null||h.remove(),b=[]},S=O=>{u=O,u?(y(),w()):E()},T=O=>{d=O;for(let B of b)!B||(B.style.color=d??r);p&&(p.style.color=d??r),g&&(g.style.color=d??r)},D=O=>{c=O,l&&l()},k=()=>{!a||!h||h.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},R=(O,B)=>{let K=`${(O??"").toString()}${B}`;return f&&typeof f=="function"?f(O):K};return{get name(){return"Generated Labels"},init:(O,B,K,L)=>{var I,$,U;s=O,a=L,o=(I=O.shadowRoot)==null?void 0:I.getElementById("range-slider"),l=B,d=($=s.getAttribute("generate-labels-text-color"))!=null?$:r,c=(U=s.getAttribute("generate-labels-units"))!=null?U:"",S(t(s.getAttribute("generate-labels"))),k(),T(d)},update:O=>{if(!(!u||!O.values)){k();for(let B=0;B<O.values.length;B++){let K=O.values[B],L=b[B];if(K===void 0&&L){L.remove(),b[B]=void 0;continue}if(K!==void 0&&!L){let I=v(`value${B+1}-label generated-label`);if(I.textContent=R(K,c),b[B]=I,O.values.length<=0)h==null||h.append(I);else if(B===0)h==null||h.append(I);else{let $=b[B-1];$==null||$.after(I)}continue}!L||(L.textContent=R(K,c))}p&&(p.textContent=R(O.textMin,c)),g&&(g.textContent=R(O.textMax,c)),T(d)}},onAttrChange:(O,B)=>{O==="generate-labels"&&S(t(B)),O==="generate-labels-text-color"&&T(B),O==="generate-labels-units"&&D(B)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return u??!1},set:O=>{S(t(O))}}},{name:"textColor",attributes:{get(){return d??""},set:O=>{T(O)}}},{name:"generateLabelsTextColor",attributes:{get(){return d??""},set:O=>{T(O)}}},{name:"units",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsUnits",attributes:{get(){return c??""},set:O=>{D(O)}}},{name:"generateLabelsFormat",attributes:{get(){return f},set:O=>{f=O,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:E}};window.tcRangeSliderPlugins.push(i)})();function NRt(t,e){Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])})}class BRt extends ca{register(){super.register()}unregister(){super.unregister()}build(){const e=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,s=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const o=document.createElement("tc-range-slider"),a=Object.keys(e).find(d=>d.includes("min")),l=Object.keys(e).find(d=>d.includes("max")),u={min:e[a].minimum,max:e[l].maximum,value1:(s==null?void 0:s[a])||e[a].default,value2:(s==null?void 0:s[l])||e[l].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};NRt(o,u),this.input=o,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",d=>{d.preventDefault(),d.stopPropagation(),this.value={[a]:d.detail.value1,[l]:d.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const uT=t=>["feature","features"].some(e=>(t==null?void 0:t.format)===e),cT=t=>["polygon","polygons"].includes(t==null?void 0:t.format),dT=t=>["point","points"].includes(t==null?void 0:t.format),fT=t=>["bounding-boxes","bounding-box"].includes(t==null?void 0:t.format),hT=t=>["lines","line"].includes(t==null?void 0:t.format),z6=t=>(t==null?void 0:t.type)==="wkt",j6=t=>(t==null?void 0:t.type)==="geojson",Ub=t=>["bounding-boxes","polygons","features","points","lines"].includes(t==null?void 0:t.format),zRt=t=>uT(t)||cT(t)||fT(t)||dT(t)||hT(t);function NEe(t,e){Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])})}const jRt=(t,e)=>{if(!t||!e)return!1;switch(e){case"string":return typeof t=="string";case"number":return!isNaN(t);case"boolean":return typeof t=="boolean";case"array":return Array.isArray(t);case"object":return typeof t=="object"&&!!Object.keys(t).length}return!1};class Mi extends ca{register(){super.register()}unregister(){super.unregister()}build(){var c,f,h,p;const e=this.options,n=this.schema.description,r=this.theme;e.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),e.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(e.infoText)));const i=document.createElement("eox-drawtools");let s;switch(!0){case cT(this.schema):s="Polygon";break;case fT(this.schema):s="Box";break;case dT(this.schema):s="Point";break;case hT(this.schema):s="LineString";break;default:s="Box";break}let o;switch(!0){case z6(this.schema):o="wkt";break;case j6(this.schema):o="geojson";break;default:o="feature";break}const a={type:s,format:o};if((f=(c=this.schema)==null?void 0:c.options)!=null&&f.projection&&(a.projection=this.schema.options.projection),uT(this.schema)&&(a["layer-id"]=this.schema.options.layerId),Ub(this.schema)&&(a["multiple-features"]=!0,a["show-list"]=!0),"for"in(this.schema.options??{}))a.for=this.options.for;else{const g=document.createElement("eox-map");g.projection="EPSG:4326";const b="map-"+this.formname.replace(/[^\w\s]/gi,"");g.layers=[{type:"Tile",source:{type:"OSM"}}],NEe(g,{id:b,style:"width: 100%; height: 300px;"}),this.container.appendChild(g),i.for=g}NEe(i,a),e.autoStartSelection!==!1&&i.updateComplete.then(()=>{i.startDrawing()}),this.input=i,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(p=(h=this.schema)==null?void 0:h.options)==null?void 0:p.featureProperty,d=(g,b)=>g.length?!Ub(this.schema)&&g.length===1?b(g[0]):g.map(b):b(g);this.input.addEventListener("drawupdate",g=>{var b;switch(g.preventDefault(),g.stopPropagation(),!0){case!g.detail:{this.value=null;break}case z6(this.schema):{this.value=g.detail;break}case j6(this.schema):{const y=g.detail;if(Ub(this.schema)){this.value=y;break}this.value=((b=y.features)==null?void 0:b[0])??null;break}case hT(this.schema):{this.value=d(g.detail,y=>y.getGeometry().getCoordinates());break}case uT(this.schema):{if(!g.detail.length){this.value=null;break}const y=v=>u?v.get(u)??v:v;this.value=d(g.detail,y);break}case fT(this.schema):{if(!g.detail.length){this.value=null;break}const y=v=>v.getGeometry().getExtent();this.value=d(g.detail,y);break}case cT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=d(g.detail,y=>y);break}case dT(this.schema):{if(!g.detail.length){this.value=null;break}this.value=d(g.detail,y=>{var v;return(v=y.getGeometry())==null?void 0:v.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function URt(t){return function(e,n,r){let i=[];return e.properties&&Object.keys(e.properties).forEach(s=>{const o=e.properties[s];if(!(zRt(o)&&(o.format==="feature"||t.some(u=>u.format===o.format&&u.type===o.type))))return;const l=YRt(s,n[s],r);if(l.length){i.push(...l);return}switch(!0){case z6(o):{i.push(...XRt(s,n[s],r));break}case j6(o):{i.push(...ZRt(s,n[s],r,o));break}case uT(o):{i.push(...$w({key:s,subValue:n[s],subSchema:o,path:r,validationFn:HRt}));break}case fT(o):{i.push(...$w({key:s,subValue:n[s],subSchema:o,path:r,validationFn:qRt}));break}case cT(o):{i.push(...$w({key:s,subValue:n[s],subSchema:o,path:r,validationFn:GRt}));break}case dT(o):{i.push(...$w({key:s,subValue:n[s],subSchema:o,path:r,validationFn:VRt}));break}case hT(o):{i.push(...$w({key:s,subValue:n[s],subSchema:o,path:r,validationFn:WRt}));break}}}),i}}function $w({key:t,subValue:e,path:n,subSchema:r,validationFn:i}){if(Ub(r)){if(Array.isArray(e)){if(!e.length)return[{path:`${n}.${t}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${t}`,message:`Value is expected to be an array but got typeof ${typeof e}`,property:"format"}];return e==null?void 0:e.flatMap((s,o)=>i(`${t}.${o}`,s,n,r))}else return i(t,e,n,r)}function qRt(t,e,n){const r=[];return e.length!==4?[{path:`${n}.${t}`,message:`Value is expected to have 4 items but got ${e.length}`,property:"format"}]:(e.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${t}.${s}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function HRt(t,e,n,r){var s;let i;return Ub(r)?i=(s=r==null?void 0:r.items)==null?void 0:s.type:i=r.type,i?jRt(e,i)?[]:[{path:`${n}.${t}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function GRt(t,e,n){return typeof e!="object"||!Object.keys(e).length?[{path:`${n}.${t}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function VRt(t,e,n){const r=[];return e.length!==2?[{path:`${n}.${t}`,message:`Value is expected to have 2 items but got ${e.length}`,property:"format"}]:(e.forEach((i,s)=>{typeof i!="number"&&r.push({path:`${n}.${t}.${s}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function WRt(t,e,n){const r=[];return e.length<2?[{path:`${n}.${t}`,message:`Value is expected to have at least 2 points but got ${e.length}`,property:"format"}]:(e.forEach((i,s)=>{i.forEach((o,a)=>{typeof o!="number"&&r.push({path:`${n}.${t}.${s}.${a}`,message:`coordinates is expected to be of type number but got ${o}`,property:"format"})})}),r)}function YRt(t,e,n){return e?[]:[{path:`${n}.${t}`,message:`invalid value ${JSON.stringify(e)}`,property:"type"}]}function XRt(t,e,n){return typeof e!="string"?[{path:`${n}.${t}`,message:"Value is expected to be a valid wkt string",property:"type"}]:e==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${t}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function ZRt(t,e,n,r){var i;if(typeof e!="object"||!Object.keys(e).length)return[{path:`${n}.${t}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(Ub(r)){if(e.type!=="FeatureCollection")return[{path:`${n}.${t}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=e==null?void 0:e.features)!=null&&i.length))return[{path:`${n}.${t}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(e!=null&&e.geometry.type))return[{path:`${n}.${t}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const BEe=[{type:"object",format:"minmax",func:BRt},{type:"array",format:"bounding-boxes",func:Mi},{type:"wkt",format:"bounding-boxes",func:Mi},{type:"geojson",format:"bounding-boxes",func:Mi},{type:"array",format:"bounding-box",func:Mi},{type:"wkt",format:"bounding-box",func:Mi},{type:"geojson",format:"bounding-box",func:Mi},{type:"array",format:"polygons",func:Mi},{type:"wkt",format:"polygons",func:Mi},{type:"geojson",format:"polygons",func:Mi},{type:"object",format:"polygon",func:Mi},{type:"wkt",format:"polygon",func:Mi},{type:"geojson",format:"polygon",func:Mi},{type:"array",format:"points",func:Mi},{type:"wkt",format:"points",func:Mi},{type:"geojson",format:"points",func:Mi},{type:"array",format:"point",func:Mi},{type:"wkt",format:"point",func:Mi},{type:"geojson",format:"point",func:Mi},{format:"feature",func:Mi},{type:"array",format:"features",func:Mi},{type:"wkt",format:"features",func:Mi},{type:"geojson",format:"features",func:Mi},{type:"array",format:"line",func:Mi},{type:"wkt",format:"line",func:Mi},{type:"geojson",format:"line",func:Mi},{type:"array",format:"lines",func:Mi},{type:"wkt",format:"lines",func:Mi},{type:"geojson",format:"lines",func:Mi}],KRt=t=>{gi.defaults.custom_validators.push(URt(BEe)),BEe.map(({type:e,format:n,func:r})=>{gi.defaults.startVals=t,gi.defaults.editors[n]=r,gi.defaults.resolvers.unshift(i=>{if(i.type===e&&i.format===n||i.format==="feature")return n})})};window.SimpleMDE=PRt;const JRt=t=>{KRt(t.value||{});const e=t.renderRoot.querySelector("form");let r=new gi(e,{schema:t.schema,...t.value?{startval:t.value}:{},theme:"html",ajax:!0,...t.options});return r.on("ready",()=>{if(Object.values(r.editors).some(i=>i instanceof Z$e)){const i=document.createElement("style");i.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,t.renderRoot.insertBefore(i,t.renderRoot.firstChild)}}),r};async function zEe(t){if(t&&typeof t!="object")try{const e=await fetch(t);if(e.ok)return await e.json();console.error("Failed to fetch schema from URL: ",e.status)}catch(e){console.error("Error fetching schema: ",e)}return t}const QRt=`
  * {
    font-family: Roboto, sans-serif;
  }
`,eFt=`
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var p_={exports:{}};p_.exports;var jEe;function tFt(){return jEe||(jEe=1,function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",c="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",b="[object Number]",y="[object Null]",v="[object Object]",w="[object Promise]",E="[object Proxy]",S="[object RegExp]",T="[object Set]",D="[object String]",k="[object Symbol]",R="[object Undefined]",O="[object WeakMap]",B="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",I="[object Float64Array]",$="[object Int8Array]",U="[object Int16Array]",q="[object Int32Array]",Y="[object Uint8Array]",X="[object Uint8ClampedArray]",te="[object Uint16Array]",le="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,fe={};fe[L]=fe[I]=fe[$]=fe[U]=fe[q]=fe[Y]=fe[X]=fe[te]=fe[le]=!0,fe[a]=fe[l]=fe[B]=fe[d]=fe[K]=fe[c]=fe[f]=fe[h]=fe[g]=fe[b]=fe[v]=fe[S]=fe[T]=fe[D]=fe[O]=!1;var ze=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,He=typeof self=="object"&&self&&self.Object===Object&&self,je=ze||He||Function("return this")(),we=e&&!e.nodeType&&e,$e=we&&!0&&t&&!t.nodeType&&t,qe=$e&&$e.exports===we,Pe=qe&&ze.process,St=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),ht=St&&St.isTypedArray;function nn(Z,me){for(var Be=-1,yt=Z==null?0:Z.length,pn=0,$t=[];++Be<yt;){var Pn=Z[Be];me(Pn,Be,Z)&&($t[pn++]=Pn)}return $t}function Vt(Z,me){for(var Be=-1,yt=me.length,pn=Z.length;++Be<yt;)Z[pn+Be]=me[Be];return Z}function Mn(Z,me){for(var Be=-1,yt=Z==null?0:Z.length;++Be<yt;)if(me(Z[Be],Be,Z))return!0;return!1}function Ze(Z,me){for(var Be=-1,yt=Array(Z);++Be<Z;)yt[Be]=me(Be);return yt}function pe(Z){return function(me){return Z(me)}}function ie(Z,me){return Z.has(me)}function oe(Z,me){return Z==null?void 0:Z[me]}function ve(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(yt,pn){Be[++me]=[pn,yt]}),Be}function F(Z,me){return function(Be){return Z(me(Be))}}function H(Z){var me=-1,Be=Array(Z.size);return Z.forEach(function(yt){Be[++me]=yt}),Be}var J=Array.prototype,re=Function.prototype,ye=Object.prototype,xe=je["__core-js_shared__"],Re=re.toString,P=ye.hasOwnProperty,Q=function(){var Z=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),se=ye.toString,ae=RegExp("^"+Re.call(P).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=qe?je.Buffer:void 0,Ae=je.Symbol,Ee=je.Uint8Array,De=ye.propertyIsEnumerable,Oe=J.splice,We=Ae?Ae.toStringTag:void 0,tt=Object.getOwnPropertySymbols,ft=ke?ke.isBuffer:void 0,Kt=F(Object.keys,Object),xt=ps(je,"DataView"),Qt=ps(je,"Map"),rn=ps(je,"Promise"),sn=ps(je,"Set"),on=ps(je,"WeakMap"),Tn=ps(Object,"create"),Cr=Gs(xt),Qi=Gs(Qt),hs=Gs(rn),Vi=Gs(sn),zo=Gs(on),Hn=Ae?Ae.prototype:void 0,Ir=Hn?Hn.valueOf:void 0;function Rr(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function mn(){this.__data__=Tn?Tn(null):{},this.size=0}function Kr(Z){var me=this.has(Z)&&delete this.__data__[Z];return this.size-=me?1:0,me}function or(Z){var me=this.__data__;if(Tn){var Be=me[Z];return Be===r?void 0:Be}return P.call(me,Z)?me[Z]:void 0}function zi(Z){var me=this.__data__;return Tn?me[Z]!==void 0:P.call(me,Z)}function nr(Z,me){var Be=this.__data__;return this.size+=this.has(Z)?0:1,Be[Z]=Tn&&me===void 0?r:me,this}Rr.prototype.clear=mn,Rr.prototype.delete=Kr,Rr.prototype.get=or,Rr.prototype.has=zi,Rr.prototype.set=nr;function $r(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function ro(){this.__data__=[],this.size=0}function ge(Z){var me=this.__data__,Be=Ar(me,Z);if(Be<0)return!1;var yt=me.length-1;return Be==yt?me.pop():Oe.call(me,Be,1),--this.size,!0}function Le(Z){var me=this.__data__,Be=Ar(me,Z);return Be<0?void 0:me[Be][1]}function it(Z){return Ar(this.__data__,Z)>-1}function Ke(Z,me){var Be=this.__data__,yt=Ar(Be,Z);return yt<0?(++this.size,Be.push([Z,me])):Be[yt][1]=me,this}$r.prototype.clear=ro,$r.prototype.delete=ge,$r.prototype.get=Le,$r.prototype.has=it,$r.prototype.set=Ke;function Et(Z){var me=-1,Be=Z==null?0:Z.length;for(this.clear();++me<Be;){var yt=Z[me];this.set(yt[0],yt[1])}}function an(){this.size=0,this.__data__={hash:new Rr,map:new(Qt||$r),string:new Rr}}function en(Z){var me=Uo(this,Z).delete(Z);return this.size-=me?1:0,me}function wt(Z){return Uo(this,Z).get(Z)}function Qe(Z){return Uo(this,Z).has(Z)}function hn(Z,me){var Be=Uo(this,Z),yt=Be.size;return Be.set(Z,me),this.size+=Be.size==yt?0:1,this}Et.prototype.clear=an,Et.prototype.delete=en,Et.prototype.get=wt,Et.prototype.has=Qe,Et.prototype.set=hn;function Sn(Z){var me=-1,Be=Z==null?0:Z.length;for(this.__data__=new Et;++me<Be;)this.add(Z[me])}function zt(Z){return this.__data__.set(Z,r),this}function jt(Z){return this.__data__.has(Z)}Sn.prototype.add=Sn.prototype.push=zt,Sn.prototype.has=jt;function Sr(Z){var me=this.__data__=new $r(Z);this.size=me.size}function di(){this.__data__=new $r,this.size=0}function Zt(Z){var me=this.__data__,Be=me.delete(Z);return this.size=me.size,Be}function Xe(Z){return this.__data__.get(Z)}function pt(Z){return this.__data__.has(Z)}function Zn(Z,me){var Be=this.__data__;if(Be instanceof $r){var yt=Be.__data__;if(!Qt||yt.length<n-1)return yt.push([Z,me]),this.size=++Be.size,this;Be=this.__data__=new Et(yt)}return Be.set(Z,me),this.size=Be.size,this}Sr.prototype.clear=di,Sr.prototype.delete=Zt,Sr.prototype.get=Xe,Sr.prototype.has=pt,Sr.prototype.set=Zn;function ri(Z,me){var Be=Yi(Z),yt=!Be&&Wi(Z),pn=!Be&&!yt&&ms(Z),$t=!Be&&!yt&&!pn&&Xi(Z),Pn=Be||yt||pn||$t,hr=Pn?Ze(Z.length,String):[],Tr=hr.length;for(var Ln in Z)P.call(Z,Ln)&&!(Pn&&(Ln=="length"||pn&&(Ln=="offset"||Ln=="parent")||$t&&(Ln=="buffer"||Ln=="byteLength"||Ln=="byteOffset")||ts(Ln,Tr)))&&hr.push(Ln);return hr}function Ar(Z,me){for(var Be=Z.length;Be--;)if(cl(Z[Be][0],me))return Be;return-1}function Fr(Z,me,Be){var yt=me(Z);return Yi(Z)?yt:Vt(yt,Be(Z))}function rr(Z){return Z==null?Z===void 0?R:y:We&&We in Object(Z)?ll(Z):pa(Z)}function qt(Z){return ao(Z)&&rr(Z)==a}function xi(Z,me,Be,yt,pn){return Z===me?!0:Z==null||me==null||!ao(Z)&&!ao(me)?Z!==Z&&me!==me:es(Z,me,Be,yt,xi,pn)}function es(Z,me,Be,yt,pn,$t){var Pn=Yi(Z),hr=Yi(me),Tr=Pn?l:kr(Z),Ln=hr?l:kr(me);Tr=Tr==a?v:Tr,Ln=Ln==a?v:Ln;var ki=Tr==v,Jr=Ln==v,ar=Tr==Ln;if(ar&&ms(Z)){if(!ms(me))return!1;Pn=!0,ki=!1}if(ar&&!ki)return $t||($t=new Sr),Pn||Xi(Z)?io(Z,me,Be,yt,pn,$t):jo(Z,me,Tr,Be,yt,pn,$t);if(!(Be&i)){var hi=ki&&P.call(Z,"__wrapped__"),_s=Jr&&P.call(me,"__wrapped__");if(hi||_s){var Ws=hi?Z.value():Z,ji=_s?me.value():me;return $t||($t=new Sr),pn(Ws,ji,Be,yt,$t)}}return ar?($t||($t=new Sr),ws(Z,me,Be,yt,pn,$t)):!1}function wi(Z){if(!Pa(Z)||Is(Z))return!1;var me=Vs(Z)?ae:z;return me.test(Gs(Z))}function qs(Z){return ao(Z)&&fi(Z.length)&&!!fe[rr(Z)]}function _o(Z){if(!Hs(Z))return Kt(Z);var me=[];for(var Be in Object(Z))P.call(Z,Be)&&Be!="constructor"&&me.push(Be);return me}function io(Z,me,Be,yt,pn,$t){var Pn=Be&i,hr=Z.length,Tr=me.length;if(hr!=Tr&&!(Pn&&Tr>hr))return!1;var Ln=$t.get(Z);if(Ln&&$t.get(me))return Ln==me;var ki=-1,Jr=!0,ar=Be&s?new Sn:void 0;for($t.set(Z,me),$t.set(me,Z);++ki<hr;){var hi=Z[ki],_s=me[ki];if(yt)var Ws=Pn?yt(_s,hi,ki,me,Z,$t):yt(hi,_s,ki,Z,me,$t);if(Ws!==void 0){if(Ws)continue;Jr=!1;break}if(ar){if(!Mn(me,function(ji,Ui){if(!ie(ar,Ui)&&(hi===ji||pn(hi,ji,Be,yt,$t)))return ar.push(Ui)})){Jr=!1;break}}else if(!(hi===_s||pn(hi,_s,Be,yt,$t))){Jr=!1;break}}return $t.delete(Z),$t.delete(me),Jr}function jo(Z,me,Be,yt,pn,$t,Pn){switch(Be){case K:if(Z.byteLength!=me.byteLength||Z.byteOffset!=me.byteOffset)return!1;Z=Z.buffer,me=me.buffer;case B:return!(Z.byteLength!=me.byteLength||!$t(new Ee(Z),new Ee(me)));case d:case c:case b:return cl(+Z,+me);case f:return Z.name==me.name&&Z.message==me.message;case S:case D:return Z==me+"";case g:var hr=ve;case T:var Tr=yt&i;if(hr||(hr=H),Z.size!=me.size&&!Tr)return!1;var Ln=Pn.get(Z);if(Ln)return Ln==me;yt|=s,Pn.set(Z,me);var ki=io(hr(Z),hr(me),yt,pn,$t,Pn);return Pn.delete(Z),ki;case k:if(Ir)return Ir.call(Z)==Ir.call(me)}return!1}function ws(Z,me,Be,yt,pn,$t){var Pn=Be&i,hr=Ms(Z),Tr=hr.length,Ln=Ms(me),ki=Ln.length;if(Tr!=ki&&!Pn)return!1;for(var Jr=Tr;Jr--;){var ar=hr[Jr];if(!(Pn?ar in me:P.call(me,ar)))return!1}var hi=$t.get(Z);if(hi&&$t.get(me))return hi==me;var _s=!0;$t.set(Z,me),$t.set(me,Z);for(var Ws=Pn;++Jr<Tr;){ar=hr[Jr];var ji=Z[ar],Ui=me[ar];if(yt)var Eo=Pn?yt(Ui,ji,ar,me,Z,$t):yt(ji,Ui,ar,Z,me,$t);if(!(Eo===void 0?ji===Ui||pn(ji,Ui,Be,yt,$t):Eo)){_s=!1;break}Ws||(Ws=ar=="constructor")}if(_s&&!Ws){var Gr=Z.constructor,ma=me.constructor;Gr!=ma&&"constructor"in Z&&"constructor"in me&&!(typeof Gr=="function"&&Gr instanceof Gr&&typeof ma=="function"&&ma instanceof ma)&&(_s=!1)}return $t.delete(Z),$t.delete(me),_s}function Ms(Z){return Fr(Z,lo,ul)}function Uo(Z,me){var Be=Z.__data__;return so(me)?Be[typeof me=="string"?"string":"hash"]:Be.map}function ps(Z,me){var Be=oe(Z,me);return wi(Be)?Be:void 0}function ll(Z){var me=P.call(Z,We),Be=Z[We];try{Z[We]=void 0;var yt=!0}catch{}var pn=se.call(Z);return yt&&(me?Z[We]=Be:delete Z[We]),pn}var ul=tt?function(Z){return Z==null?[]:(Z=Object(Z),nn(tt(Z),function(me){return De.call(Z,me)}))}:dl,kr=rr;(xt&&kr(new xt(new ArrayBuffer(1)))!=K||Qt&&kr(new Qt)!=g||rn&&kr(rn.resolve())!=w||sn&&kr(new sn)!=T||on&&kr(new on)!=O)&&(kr=function(Z){var me=rr(Z),Be=me==v?Z.constructor:void 0,yt=Be?Gs(Be):"";if(yt)switch(yt){case Cr:return K;case Qi:return g;case hs:return w;case Vi:return T;case zo:return O}return me});function ts(Z,me){return me=me??o,!!me&&(typeof Z=="number"||he.test(Z))&&Z>-1&&Z%1==0&&Z<me}function so(Z){var me=typeof Z;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?Z!=="__proto__":Z===null}function Is(Z){return!!Q&&Q in Z}function Hs(Z){var me=Z&&Z.constructor,Be=typeof me=="function"&&me.prototype||ye;return Z===Be}function pa(Z){return se.call(Z)}function Gs(Z){if(Z!=null){try{return Re.call(Z)}catch{}try{return Z+""}catch{}}return""}function cl(Z,me){return Z===me||Z!==Z&&me!==me}var Wi=qt(function(){return arguments}())?qt:function(Z){return ao(Z)&&P.call(Z,"callee")&&!De.call(Z,"callee")},Yi=Array.isArray;function oo(Z){return Z!=null&&fi(Z.length)&&!Vs(Z)}var ms=ft||Ht;function qo(Z,me){return xi(Z,me)}function Vs(Z){if(!Pa(Z))return!1;var me=rr(Z);return me==h||me==p||me==u||me==E}function fi(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function Pa(Z){var me=typeof Z;return Z!=null&&(me=="object"||me=="function")}function ao(Z){return Z!=null&&typeof Z=="object"}var Xi=ht?pe(ht):qs;function lo(Z){return oo(Z)?ri(Z):_o(Z)}function dl(){return[]}function Ht(){return!1}t.exports=qo}(p_,p_.exports)),p_.exports}var nFt=tFt();const UEe=aa(nFt),rFt=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;var _l,Gv,lPe,uPe;class aPe extends Zr{constructor(){super();gn(this,Gv);gn(this,_l,null);this.schema=null,this.value=null,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1}get editor(){return Gt(this,_l)}get schema(){return this._schema}set schema(n){Gt(this,_l)&&!UEe(this._schema,n)&&Gt(this,_l).destroy(),this._schema=n}get value(){return this._value}set value(n){Gt(this,_l)&&Gt(this,_l).ready&&!UEe(this._value,n)&&Gt(this,_l).setValue(n),this._value=n}async updated(n){this._value=await zEe(this.value),n.has("schema")&&(this._schema=await zEe(this.schema),(!Gt(this,_l)||Gt(this,_l).destroyed)&&(gs(this,_l,await JRt(this)),yn(this,Gv,uPe).call(this)))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return et`
      <style>
        ${QRt}
        ${!this.unstyled&&rFt}
        ${!this.unstyled&&eFt}
      </style>
      <form></form>
    `}}_l=new WeakMap,Gv=new WeakSet,lPe=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},uPe=function(){["ready","change"].map(r=>{Gt(this,_l).on(r,()=>{this._value=Gt(this,_l).getValue(),yn(this,Gv,lPe).call(this)})})},tn(aPe,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",aPe);/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Lr=t=>t!==void 0,cPe=(t,e,n)=>e in t?t[e]:t[e]=n;const B2={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};class iFt{constructor(e){this._parser=new e}toDocument(e){return this._parser.parseFromString(e,"application/xml")}getAllTextContent(e,n){return PR(e,n).join("")}}function PR(t,e){return dPe(t,e,[]).join("")}function dPe(t,e,n){if(t.nodeType===B2.CDATA_SECTION||t.nodeType===B2.TEXT)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{var r;for(r=t.firstChild;r;r=r.nextSibling)dPe(r,e,n)}return n}function sFt(t,e,n,r){for(var i=oFt(e);i;i=aFt(i)){var s=i.namespaceURI||null,o=t[s];if(Lr(o)){var a=o[i.localName];Lr(a)&&a.call(r,i,n)}}}function oFt(t){let e=t.firstElementChild||t.firstChild;for(;e&&e.nodeType!==B2.ELEMENT;)e=e.nextSibling;return e}function aFt(t){let e=t.nextElementSibling||t.nextSibling;for(;e&&e.nodeType!==B2.ELEMENT;)e=e.nextSibling;return e}function da(t,e,n){return lFt(t,e,n)}function lFt(t,e,n){var r=Lr(n)?n:{},i,s;for(i=0,s=t.length;i<s;++i)r[t[i]]=e;return r}function fPe(t,e){return function(n,r){var i=t.call(Lr(e)?e:this,n,r);if(Lr(i)){var s=r[r.length-1];s.push(i)}}}function Bo(t,e,n,r,i){return r.push(t),sFt(e,n,r,i),r.pop()}function fn(t,e,n){return function(r,i){let s=t.call(Lr(n)?n:this,r,i);if(Lr(s)){var o=i[i.length-1],a=Lr(e)?e:r.localName;o[a]=s}}}function wl(t,e,n){return function(r,i){var s=t.call(Lr(n)?n:this,r,i);if(Lr(s)){var o=i[i.length-1],a=Lr(e)?e:r.localName,l=cPe(o,a,[]);l.push(s)}}}const uFt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function cFt(t){return t.replace(uFt,"")}function n0(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return Lr(e[1])||!1}function Ab(t){return Wf(PR(t,!1))}function Wf(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function l5(t){return pT(PR(t,!1))}function pT(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function oi(t){return cFt(PR(t,!1))}const dFt="http://www.w3.org/1999/xlink";function P7(t){return t.getAttributeNS(dFt,"href")}function fFt(t,e){return Bo({},BFt,t,e)}function hPe(t){return[Wf(t.getAttribute("minx")),Wf(t.getAttribute("miny")),Wf(t.getAttribute("maxx")),Wf(t.getAttribute("maxy"))]}function hFt(t,e){const n=hPe(t),r=[Wf(t.getAttribute("resx")),Wf(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS")||t.getAttribute("SRS"),extent:n,res:r}}function pFt(t,e){const n=hPe(t);if(!(!Lr(n[0])||!Lr(n[1])||!Lr(n[2])||!Lr(n[3])))return n}function mFt(t,e){const n=parseFloat(t.getAttribute("min")),r=parseFloat(t.getAttribute("max"));return{min:n,max:r}}function gFt(t,e){const n=Bo({},zFt,t,e);if(!Lr(n))return;const r=n.westBoundLongitude,i=n.southBoundLatitude,s=n.eastBoundLongitude,o=n.northBoundLatitude;if(!(!Lr(r)||!Lr(i)||!Lr(s)||!Lr(o)))return[r,i,s,o]}function yFt(t,e){return Bo({},OFt,t,e)}function bFt(t,e){return Bo({},MFt,t,e)}function vFt(t,e){return Bo({},IFt,t,e)}function xFt(t,e){return Bo({},$Ft,t,e)}function wFt(t,e){return Bo({},PFt,t,e)}function _Ft(t,e){return Bo([],NFt,t,e)}function EFt(t,e){const n=n0(t.getAttribute("queryable"));return Bo({queryable:Lr(n)?n:!1},gPe,t,e)}function CFt(t,e){var n=e[e.length-1];const r=Bo({},gPe,t,e);if(!Lr(r))return;let i=n0(t.getAttribute("queryable"));Lr(i)||(i=n.queryable),r.queryable=Lr(i)?i:!1;let s=pT(t.getAttribute("cascaded"));Lr(s)||(s=n.cascaded),r.cascaded=s;let o=n0(t.getAttribute("opaque"));Lr(o)||(o=n.opaque),r.opaque=Lr(o)?o:!1;let a=n0(t.getAttribute("noSubsets"));Lr(a)||(a=n.noSubsets),r.noSubsets=Lr(a)?a:!1;let l=Wf(t.getAttribute("fixedWidth"));Lr(l)||(l=n.fixedWidth),r.fixedWidth=l;let u=Wf(t.getAttribute("fixedHeight"));Lr(u)||(u=n.fixedHeight),r.fixedHeight=u;const d=["Style","CRS","AuthorityURL"];for(let f=0,h=d.length;f<h;f++){const p=d[f],g=n[p];if(Lr(g)){let b=cPe(r,p,[]);b=b.concat(g),r[p]=b}}const c=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let f=0,h=c.length;f<h;f++){const p=c[f],g=r[p];if(!Lr(g)){const b=n[p];r[p]=b}}return r}function SFt(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:n0(t.getAttribute("multipleValues")),nearestValue:n0(t.getAttribute("nearestValue")),current:n0(t.getAttribute("current")),values:oi(t)}}function mh(t,e){return Bo({},VFt,t,e)}function AFt(t,e){return Bo({},jFt,t,e)}function kFt(t,e){return Bo({},qFt,t,e)}function TFt(t,e){return Bo({},HFt,t,e)}function u5(t,e){return Bo({},UFt,t,e)}function pPe(t,e){var n=mh(t,e);if(Lr(n)){const r=[pT(t.getAttribute("width")),pT(t.getAttribute("height"))];return n.size=r,n}}function DFt(t,e){var n=mh(t,e);if(Lr(n))return n.name=t.getAttribute("name"),n}function LFt(t,e){var n=mh(t,e);if(Lr(n))return n.type=t.getAttribute("type"),n}function RFt(t,e){return Bo({},GFt,t,e)}function mPe(t,e){return Bo([],WFt,t,e)}const fa=[null,"http://www.opengis.net/wms"],FFt=da(fa,{Service:fn(bFt),Capability:fn(yFt)}),OFt=da(fa,{Request:fn(AFt),Exception:fn(_Ft),Layer:fn(EFt)}),MFt=da(fa,{Name:fn(oi),Title:fn(oi),Abstract:fn(oi),KeywordList:fn(mPe),OnlineResource:fn(P7),ContactInformation:fn(vFt),Fees:fn(oi),AccessConstraints:fn(oi),LayerLimit:fn(l5),MaxWidth:fn(l5),MaxHeight:fn(l5)}),IFt=da(fa,{ContactPersonPrimary:fn(xFt),ContactPosition:fn(oi),ContactAddress:fn(wFt),ContactVoiceTelephone:fn(oi),ContactFacsimileTelephone:fn(oi),ContactElectronicMailAddress:fn(oi)}),$Ft=da(fa,{ContactPerson:fn(oi),ContactOrganization:fn(oi)}),PFt=da(fa,{AddressType:fn(oi),Address:fn(oi),City:fn(oi),StateOrProvince:fn(oi),PostCode:fn(oi),Country:fn(oi)}),NFt=da(fa,{Format:fPe(oi)}),gPe=da(fa,{Name:fn(oi),Title:fn(oi),Abstract:fn(oi),KeywordList:fn(mPe),CRS:wl(oi),SRS:wl(oi),EX_GeographicBoundingBox:fn(gFt),LatLonBoundingBox:fn(pFt),BoundingBox:wl(hFt),Dimension:wl(SFt),Attribution:fn(fFt),AuthorityURL:wl(DFt),Identifier:wl(oi),MetadataURL:wl(LFt),DataURL:wl(mh),FeatureListURL:wl(mh),Style:wl(RFt),MinScaleDenominator:fn(Ab),MaxScaleDenominator:fn(Ab),ScaleHint:fn(mFt),Layer:wl(CFt)}),BFt=da(fa,{Title:fn(oi),OnlineResource:fn(P7),LogoURL:fn(pPe)}),zFt=da(fa,{westBoundLongitude:fn(Ab),eastBoundLongitude:fn(Ab),southBoundLatitude:fn(Ab),northBoundLatitude:fn(Ab)}),jFt=da(fa,{GetCapabilities:fn(u5),GetMap:fn(u5),GetFeatureInfo:fn(u5)}),UFt=da(fa,{Format:wl(oi),DCPType:wl(kFt)}),qFt=da(fa,{HTTP:fn(TFt)}),HFt=da(fa,{Get:fn(mh),Post:fn(mh)}),GFt=da(fa,{Name:fn(oi),Title:fn(oi),Abstract:fn(oi),LegendURL:wl(pPe),StyleSheetURL:fn(mh),StyleURL:fn(mh)}),VFt=da(fa,{Format:fn(oi),OnlineResource:fn(P7)}),WFt=da(fa,{Keyword:fPe(oi)});class YFt{constructor(e,n){!n&&typeof window<"u"&&(n=window.DOMParser),this.version=void 0,this._parser=new iFt(n),this._data=e}data(e){return this._data=e,this}toJSON(e){return e=e||this._data,this.parse(e)}parse(e){return this.readFromDocument(this._parser.toDocument(e))}readFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==B2.ELEMENT)return this.readFromNode(n);return null}readFromNode(e){return this.version=e.getAttribute("version"),Bo({version:this.version},FFt,e,[])||null}}async function XFt(t){let e=new URL(t),n=e.searchParams;n.set("SERVICE","WMS"),n.set("REQUEST","GetCapabilities");let r=e.toString();const i=await fetch(r);if(i.ok){const s=await i.text();return new YFt(s).toJSON()}else throw new Error(`Error: ${i.status}`)}function N7(t){const e=/\b(?:wms|ows)\b/i,n=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return e.test(t)?"TileWMS":n.test(t)?"XYZ":!1}function ZFt(t){const n=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(t),r=N7(t);return!!(t&&n&&r)}function yPe(t){return t.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function KFt(t){try{return JSON.parse(yPe(t)),!!t}catch{return!1}}function JFt(t,e){const n=new URL(t).searchParams;Object.entries(e).forEach(([o,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{n.set(l,a[l])}):n.set(o,a)});const r=t.split("?")[0],i=n.toString();return`${r}?${i}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function qEe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qEe(Object(n),!0).forEach(function(r){QFt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qEe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QA(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?QA=function(e){return typeof e}:QA=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QA(t)}function QFt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gh(){return gh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}function eOt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tOt(t,e){if(t==null)return{};var n=eOt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var nOt="1.15.6";function sh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Rh=sh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),dC=sh(/Edge/i),HEe=sh(/firefox/i),B_=sh(/safari/i)&&!sh(/chrome/i)&&!sh(/android/i),B7=sh(/iP(ad|od|hone)/i),bPe=sh(/chrome/i)&&sh(/android/i),vPe={capture:!1,passive:!1};function Ur(t,e,n){t.addEventListener(e,n,!Rh&&vPe)}function Or(t,e,n){t.removeEventListener(e,n,!Rh&&vPe)}function mT(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function xPe(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function gc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&mT(t,e):mT(t,e))||r&&t===n)return t;if(t===n)break}while(t=xPe(t))}return null}var GEe=/\s+/g;function Gl(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(GEe," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(GEe," ")}}function zn(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function qb(t,e){var n="";if(typeof t=="string")n=t;else do{var r=zn(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function wPe(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Id(){var t=document.scrollingElement;return t||document.documentElement}function Qs(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,u,d,c;if(t!==window&&t.parentNode&&t!==Id()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,d=s.height,c=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Rh))do if(i&&i.getBoundingClientRect&&(zn(i,"transform")!=="none"||n&&zn(i,"position")!=="static")){var f=i.getBoundingClientRect();o-=f.top+parseInt(zn(i,"border-top-width")),a-=f.left+parseInt(zn(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var h=qb(i||t),p=h&&h.a,g=h&&h.d;h&&(o/=g,a/=p,c/=p,d/=g,l=o+d,u=a+c)}return{top:o,left:a,bottom:l,right:u,width:c,height:d}}}function VEe(t,e,n){for(var r=Ip(t,!0),i=Qs(t)[e];r;){var s=Qs(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Id())break;r=Ip(r,!1)}return!1}function Bv(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==jn.ghost&&(r||o[s]!==jn.dragged)&&gc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function z7(t,e){for(var n=t.lastElementChild;n&&(n===jn.ghost||zn(n,"display")==="none"||e&&!mT(n,e));)n=n.previousElementSibling;return n||null}function Au(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==jn.clone&&(!e||mT(t,e))&&n++;return n}function WEe(t){var e=0,n=0,r=Id();if(t)do{var i=qb(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function rOt(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ip(t,e){if(!t||!t.getBoundingClientRect)return Id();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=zn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Id();if(r||e)return n;r=!0}}while(n=n.parentNode);return Id()}function iOt(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c5(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var z_;function _Pe(t,e){return function(){if(!z_){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),z_=setTimeout(function(){z_=void 0},e)}}}function sOt(){clearTimeout(z_),z_=void 0}function EPe(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function CPe(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function SPe(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!gc(i,e.draggable,t,!1)||i.animated||i===n)){var u=Qs(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,u.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,u.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,u.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Tl="Sortable"+new Date().getTime();function oOt(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(zn(i,"display")==="none"||i===jn.ghost)){t.push({target:i,rect:Qs(i)});var s=Yd({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=qb(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(rOt(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,u=a.target,d=u.fromRect,c=Qs(u),f=u.prevFromRect,h=u.prevToRect,p=a.rect,g=qb(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&c5(f,c)&&!c5(d,c)&&(p.top-c.top)/(p.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(l=lOt(p,f,h,i.options)),c5(c,d)||(u.prevFromRect=d,u.prevToRect=c,l||(l=i.options.animation),i.animate(u,p,c,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){zn(r,"transition",""),zn(r,"transform","");var a=qb(this.el),l=a&&a.a,u=a&&a.d,d=(i.left-s.left)/(l||1),c=(i.top-s.top)/(u||1);r.animatingX=!!d,r.animatingY=!!c,zn(r,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=aOt(r),zn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),zn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){zn(r,"transition",""),zn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function aOt(t){return t.offsetWidth}function lOt(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var eb=[],d5={initializeByDefault:!0},fC={mount:function(e){for(var n in d5)d5.hasOwnProperty(n)&&!(n in e)&&(e[n]=d5[n]);eb.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),eb.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";eb.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Yd({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Yd({sortable:n},r)))})},initializePlugins:function(e,n,r,i){eb.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,gh(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return eb.forEach(function(i){typeof i.eventProperties=="function"&&gh(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return eb.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function uOt(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,c=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Tl],!!e){var g,b=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Rh&&!dC?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=o||n,g.from=a||n,g.item=i||n,g.clone=s,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=d,g.newDraggableIndex=c,g.originalEvent=f,g.pullMode=h?h.lastPutMode:void 0;var v=Yd(Yd({},p),fC.getEventProperties(r,e));for(var w in v)g[w]=v[w];n&&n.dispatchEvent(g),b[y]&&b[y].call(e,g)}}var cOt=["evt"],bl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=tOt(r,cOt);fC.pluginEvent.bind(jn)(e,n,Yd({dragEl:Ot,parentEl:As,ghostEl:Jn,rootEl:us,nextEl:Og,lastDownEl:ek,cloneEl:ys,cloneHidden:xp,dragStarted:m_,putSortable:Wo,activeSortable:jn.active,originalEvent:i,oldIndex:kb,oldDraggableIndex:j_,newIndex:Wl,newDraggableIndex:gp,hideGhostForTarget:DPe,unhideGhostForTarget:LPe,cloneNowHidden:function(){xp=!0},cloneNowShown:function(){xp=!1},dispatchSortableEvent:function(a){Ua({sortable:n,name:a,originalEvent:i})}},s))};function Ua(t){uOt(Yd({putSortable:Wo,cloneEl:ys,targetEl:Ot,rootEl:us,oldIndex:kb,oldDraggableIndex:j_,newIndex:Wl,newDraggableIndex:gp},t))}var Ot,As,Jn,us,Og,ek,ys,xp,kb,Wl,j_,gp,oA,Wo,db=!1,gT=!1,yT=[],wg,lc,f5,h5,YEe,XEe,m_,tb,U_,q_=!1,aA=!1,tk,xa,p5=[],U6=!1,bT=[],NR=typeof document<"u",lA=B7,ZEe=dC||Rh?"cssFloat":"float",dOt=NR&&!bPe&&!B7&&"draggable"in document.createElement("div"),APe=function(){if(NR){if(Rh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),kPe=function(e,n){var r=zn(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Bv(e,0,n),o=Bv(e,1,n),a=s&&zn(s),l=o&&zn(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Qs(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Qs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[ZEe]==="none"||o&&r[ZEe]==="none"&&u+d>i)?"vertical":"horizontal"},fOt=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,u=r?n.width:n.height;return i===a||s===l||i+o/2===a+u/2},hOt=function(e,n){var r;return yT.some(function(i){var s=i[Tl].options.emptyInsertThreshold;if(!(!s||z7(i))){var o=Qs(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},TPe=function(e){function n(s,o){return function(a,l,u,d){var c=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||c))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,u,d),o)(a,l,u,d);var f=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===f||s.join&&s.indexOf(f)>-1}}var r={},i=e.group;(!i||QA(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},DPe=function(){!APe&&Jn&&zn(Jn,"display","none")},LPe=function(){!APe&&Jn&&zn(Jn,"display","")};NR&&!bPe&&document.addEventListener("click",function(t){if(gT)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),gT=!1,!1},!0);var _g=function(e){if(Ot){e=e.touches?e.touches[0]:e;var n=hOt(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Tl]._onDragOver(r)}}},pOt=function(e){Ot&&Ot.parentNode[Tl]._isOutsideThisEl(e.target)};function jn(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=gh({},e),t[Tl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kPe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:jn.supportPointer!==!1&&"PointerEvent"in window&&(!B_||B7),emptyInsertThreshold:5};fC.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);TPe(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:dOt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ur(t,"pointerdown",this._onTapStart):(Ur(t,"mousedown",this._onTapStart),Ur(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ur(t,"dragover",this),Ur(t,"dragenter",this)),yT.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),gh(this,oOt())}jn.prototype={constructor:jn,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(tb=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Ot):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(_Ot(r),!Ot&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&B_&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=gc(l,i.draggable,r,!1),!(l&&l.animated)&&ek!==l)){if(kb=Au(l),j_=Au(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Ua({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),bl("filter",n,{evt:e}),s&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=gc(u,c.trim(),r,!1),c)return Ua({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:r,toEl:r}),bl("filter",n,{evt:e}),!0}),d)){s&&e.preventDefault();return}i.handle&&!gc(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Ot&&r.parentNode===s){var u=Qs(r);if(us=s,Ot=r,As=Ot.parentNode,Og=Ot.nextSibling,ek=r,oA=o.group,jn.dragged=Ot,wg={target:Ot,clientX:(n||e).clientX,clientY:(n||e).clientY},YEe=wg.clientX-u.left,XEe=wg.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Ot.style["will-change"]="all",l=function(){if(bl("delayEnded",i,{evt:e}),jn.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!HEe&&i.nativeDraggable&&(Ot.draggable=!0),i._triggerDragStart(e,n),Ua({sortable:i,name:"choose",originalEvent:e}),Gl(Ot,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){wPe(Ot,d.trim(),m5)}),Ur(a,"dragover",_g),Ur(a,"mousemove",_g),Ur(a,"touchmove",_g),o.supportPointer?(Ur(a,"pointerup",i._onDrop),!this.nativeDraggable&&Ur(a,"pointercancel",i._onDrop)):(Ur(a,"mouseup",i._onDrop),Ur(a,"touchend",i._onDrop),Ur(a,"touchcancel",i._onDrop)),HEe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ot.draggable=!0),bl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(dC||Rh))){if(jn.eventCanceled){this._onDrop();return}o.supportPointer?(Ur(a,"pointerup",i._disableDelayedDrag),Ur(a,"pointercancel",i._disableDelayedDrag)):(Ur(a,"mouseup",i._disableDelayedDrag),Ur(a,"touchend",i._disableDelayedDrag),Ur(a,"touchcancel",i._disableDelayedDrag)),Ur(a,"mousemove",i._delayedDragTouchMoveHandler),Ur(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ur(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ot&&m5(Ot),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Or(e,"mouseup",this._disableDelayedDrag),Or(e,"touchend",this._disableDelayedDrag),Or(e,"touchcancel",this._disableDelayedDrag),Or(e,"pointerup",this._disableDelayedDrag),Or(e,"pointercancel",this._disableDelayedDrag),Or(e,"mousemove",this._delayedDragTouchMoveHandler),Or(e,"touchmove",this._delayedDragTouchMoveHandler),Or(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ur(document,"pointermove",this._onTouchMove):n?Ur(document,"touchmove",this._onTouchMove):Ur(document,"mousemove",this._onTouchMove):(Ur(Ot,"dragend",this),Ur(us,"dragstart",this._onDragStart));try{document.selection?nk(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(db=!1,us&&Ot){bl("dragStarted",this,{evt:n}),this.nativeDraggable&&Ur(document,"dragover",pOt);var r=this.options;!e&&Gl(Ot,r.dragClass,!1),Gl(Ot,r.ghostClass,!0),jn.active=this,e&&this._appendGhost(),Ua({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(lc){this._lastX=lc.clientX,this._lastY=lc.clientY,DPe();for(var e=document.elementFromPoint(lc.clientX,lc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(lc.clientX,lc.clientY),e!==n);)n=e;if(Ot.parentNode[Tl]._isOutsideThisEl(e),n)do{if(n[Tl]){var r=void 0;if(r=n[Tl]._onDragOver({clientX:lc.clientX,clientY:lc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=xPe(n));LPe()}},_onTouchMove:function(e){if(wg){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Jn&&qb(Jn,!0),a=Jn&&o&&o.a,l=Jn&&o&&o.d,u=lA&&xa&&WEe(xa),d=(s.clientX-wg.clientX+i.x)/(a||1)+(u?u[0]-p5[0]:0)/(a||1),c=(s.clientY-wg.clientY+i.y)/(l||1)+(u?u[1]-p5[1]:0)/(l||1);if(!jn.active&&!db){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Jn){o?(o.e+=d-(f5||0),o.f+=c-(h5||0)):o={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");zn(Jn,"webkitTransform",f),zn(Jn,"mozTransform",f),zn(Jn,"msTransform",f),zn(Jn,"transform",f),f5=d,h5=c,lc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Jn){var e=this.options.fallbackOnBody?document.body:us,n=Qs(Ot,!0,lA,!0,e),r=this.options;if(lA){for(xa=e;zn(xa,"position")==="static"&&zn(xa,"transform")==="none"&&xa!==document;)xa=xa.parentNode;xa!==document.body&&xa!==document.documentElement?(xa===document&&(xa=Id()),n.top+=xa.scrollTop,n.left+=xa.scrollLeft):xa=Id(),p5=WEe(xa)}Jn=Ot.cloneNode(!0),Gl(Jn,r.ghostClass,!1),Gl(Jn,r.fallbackClass,!0),Gl(Jn,r.dragClass,!0),zn(Jn,"transition",""),zn(Jn,"transform",""),zn(Jn,"box-sizing","border-box"),zn(Jn,"margin",0),zn(Jn,"top",n.top),zn(Jn,"left",n.left),zn(Jn,"width",n.width),zn(Jn,"height",n.height),zn(Jn,"opacity","0.8"),zn(Jn,"position",lA?"absolute":"fixed"),zn(Jn,"zIndex","100000"),zn(Jn,"pointerEvents","none"),jn.ghost=Jn,e.appendChild(Jn),zn(Jn,"transform-origin",YEe/parseInt(Jn.style.width)*100+"% "+XEe/parseInt(Jn.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(bl("dragStart",this,{evt:e}),jn.eventCanceled){this._onDrop();return}bl("setupClone",this),jn.eventCanceled||(ys=CPe(Ot),ys.removeAttribute("id"),ys.draggable=!1,ys.style["will-change"]="",this._hideClone(),Gl(ys,this.options.chosenClass,!1),jn.clone=ys),r.cloneId=nk(function(){bl("clone",r),!jn.eventCanceled&&(r.options.removeCloneOnHide||us.insertBefore(ys,Ot),r._hideClone(),Ua({sortable:r,name:"clone"}))}),!n&&Gl(Ot,s.dragClass,!0),n?(gT=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Or(document,"mouseup",r._onDrop),Or(document,"touchend",r._onDrop),Or(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Ot)),Ur(document,"drop",r),zn(Ot,"transform","translateZ(0)")),db=!0,r._dragStartId=nk(r._dragStarted.bind(r,n,e)),Ur(document,"selectstart",r),m_=!0,window.getSelection().removeAllRanges(),B_&&zn(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=jn.active,d=oA===l,c=a.sort,f=Wo||u,h,p=this,g=!1;if(U6)return;function b(Y,X){bl(Y,p,Yd({evt:e,isOwner:d,axis:h?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:c,fromSortable:f,target:r,completed:v,onMove:function(le,ee){return uA(us,n,Ot,i,le,Qs(le),e,ee)},changed:w},X))}function y(){b("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function v(Y){return b("dragOverCompleted",{insertion:Y}),Y&&(d?u._hideClone():u._showClone(p),p!==f&&(Gl(Ot,Wo?Wo.options.ghostClass:u.options.ghostClass,!1),Gl(Ot,a.ghostClass,!0)),Wo!==p&&p!==jn.active?Wo=p:p===jn.active&&Wo&&(Wo=null),f===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){b("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===Ot&&!Ot.animated||r===n&&!r.animated)&&(tb=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Ot.parentNode[Tl]._isOutsideThisEl(e.target),!Y&&_g(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function w(){Wl=Au(Ot),gp=Au(Ot,a.draggable),Ua({sortable:p,name:"change",toEl:n,newIndex:Wl,newDraggableIndex:gp,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=gc(r,a.draggable,n,!0),b("dragOver"),jn.eventCanceled)return g;if(Ot.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return v(!1);if(gT=!1,u&&!a.disabled&&(d?c||(o=As!==us):Wo===this||(this.lastPutMode=oA.checkPull(this,u,Ot,e))&&l.checkPut(this,u,Ot,e))){if(h=this._getDirection(e,r)==="vertical",i=Qs(Ot),b("dragOverValid"),jn.eventCanceled)return g;if(o)return As=us,y(),this._hideClone(),b("revert"),jn.eventCanceled||(Og?us.insertBefore(Ot,Og):us.appendChild(Ot)),v(!0);var E=z7(n,a.draggable);if(!E||bOt(e,h,this)&&!E.animated){if(E===Ot)return v(!1);if(E&&n===e.target&&(r=E),r&&(s=Qs(r)),uA(us,n,Ot,i,r,s,e,!!r)!==!1)return y(),E&&E.nextSibling?n.insertBefore(Ot,E.nextSibling):n.appendChild(Ot),As=n,w(),v(!0)}else if(E&&yOt(e,h,this)){var S=Bv(n,0,a,!0);if(S===Ot)return v(!1);if(r=S,s=Qs(r),uA(us,n,Ot,i,r,s,e,!1)!==!1)return y(),n.insertBefore(Ot,S),As=n,w(),v(!0)}else if(r.parentNode===n){s=Qs(r);var T=0,D,k=Ot.parentNode!==n,R=!fOt(Ot.animated&&Ot.toRect||i,r.animated&&r.toRect||s,h),O=h?"top":"left",B=VEe(r,"top","top")||VEe(Ot,"top","top"),K=B?B.scrollTop:void 0;tb!==r&&(D=s[O],q_=!1,aA=!R&&a.invertSwap||k),T=vOt(e,r,s,h,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,aA,tb===r);var L;if(T!==0){var I=Au(Ot);do I-=T,L=As.children[I];while(L&&(zn(L,"display")==="none"||L===Jn))}if(T===0||L===r)return v(!1);tb=r,U_=T;var $=r.nextElementSibling,U=!1;U=T===1;var q=uA(us,n,Ot,i,r,s,e,U);if(q!==!1)return(q===1||q===-1)&&(U=q===1),U6=!0,setTimeout(gOt,30),y(),U&&!$?n.appendChild(Ot):r.parentNode.insertBefore(Ot,U?$:r),B&&EPe(B,0,K-B.scrollTop),As=Ot.parentNode,D!==void 0&&!aA&&(tk=Math.abs(D-Qs(r)[O])),w(),v(!0)}if(n.contains(Ot))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Or(document,"mousemove",this._onTouchMove),Or(document,"touchmove",this._onTouchMove),Or(document,"pointermove",this._onTouchMove),Or(document,"dragover",_g),Or(document,"mousemove",_g),Or(document,"touchmove",_g)},_offUpEvents:function(){var e=this.el.ownerDocument;Or(e,"mouseup",this._onDrop),Or(e,"touchend",this._onDrop),Or(e,"pointerup",this._onDrop),Or(e,"pointercancel",this._onDrop),Or(e,"touchcancel",this._onDrop),Or(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(Wl=Au(Ot),gp=Au(Ot,r.draggable),bl("drop",this,{evt:e}),As=Ot&&Ot.parentNode,Wl=Au(Ot),gp=Au(Ot,r.draggable),jn.eventCanceled){this._nulling();return}db=!1,aA=!1,q_=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),q6(this.cloneId),q6(this._dragStartId),this.nativeDraggable&&(Or(document,"drop",this),Or(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),B_&&zn(document.body,"user-select",""),zn(Ot,"transform",""),e&&(m_&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Jn&&Jn.parentNode&&Jn.parentNode.removeChild(Jn),(us===As||Wo&&Wo.lastPutMode!=="clone")&&ys&&ys.parentNode&&ys.parentNode.removeChild(ys),Ot&&(this.nativeDraggable&&Or(Ot,"dragend",this),m5(Ot),Ot.style["will-change"]="",m_&&!db&&Gl(Ot,Wo?Wo.options.ghostClass:this.options.ghostClass,!1),Gl(Ot,this.options.chosenClass,!1),Ua({sortable:this,name:"unchoose",toEl:As,newIndex:null,newDraggableIndex:null,originalEvent:e}),us!==As?(Wl>=0&&(Ua({rootEl:As,name:"add",toEl:As,fromEl:us,originalEvent:e}),Ua({sortable:this,name:"remove",toEl:As,originalEvent:e}),Ua({rootEl:As,name:"sort",toEl:As,fromEl:us,originalEvent:e}),Ua({sortable:this,name:"sort",toEl:As,originalEvent:e})),Wo&&Wo.save()):Wl!==kb&&Wl>=0&&(Ua({sortable:this,name:"update",toEl:As,originalEvent:e}),Ua({sortable:this,name:"sort",toEl:As,originalEvent:e})),jn.active&&((Wl==null||Wl===-1)&&(Wl=kb,gp=j_),Ua({sortable:this,name:"end",toEl:As,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){bl("nulling",this),us=Ot=As=Jn=Og=ys=ek=xp=wg=lc=m_=Wl=gp=kb=j_=tb=U_=Wo=oA=jn.dragged=jn.ghost=jn.clone=jn.active=null,bT.forEach(function(e){e.checked=!0}),bT.length=f5=h5=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ot&&(this._onDragOver(e),mOt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],gc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||wOt(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];gc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return gc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=fC.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&TPe(r)},destroy:function(){bl("destroy",this);var e=this.el;e[Tl]=null,Or(e,"mousedown",this._onTapStart),Or(e,"touchstart",this._onTapStart),Or(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Or(e,"dragover",this),Or(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),yT.splice(yT.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xp){if(bl("hideClone",this),jn.eventCanceled)return;zn(ys,"display","none"),this.options.removeCloneOnHide&&ys.parentNode&&ys.parentNode.removeChild(ys),xp=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xp){if(bl("showClone",this),jn.eventCanceled)return;Ot.parentNode==us&&!this.options.group.revertClone?us.insertBefore(ys,Ot):Og?us.insertBefore(ys,Og):us.appendChild(ys),this.options.group.revertClone&&this.animate(Ot,ys),zn(ys,"display",""),xp=!1}}};function mOt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function uA(t,e,n,r,i,s,o,a){var l,u=t[Tl],d=u.options.onMove,c;return window.CustomEvent&&!Rh&&!dC?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Qs(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(c=d.call(u,l,o)),c}function m5(t){t.draggable=!1}function gOt(){U6=!1}function yOt(t,e,n){var r=Qs(Bv(n.el,0,n.options,!0)),i=SPe(n.el,n.options,Jn),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function bOt(t,e,n){var r=Qs(z7(n.el,n.options.draggable)),i=SPe(n.el,n.options,Jn),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function vOt(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,u=r?n.height:n.width,d=r?n.top:n.left,c=r?n.bottom:n.right,f=!1;if(!o){if(a&&tk<u*i){if(!q_&&(U_===1?l>d+u*s/2:l<c-u*s/2)&&(q_=!0),q_)f=!0;else if(U_===1?l<d+tk:l>c-tk)return-U_}else if(l>d+u*(1-i)/2&&l<c-u*(1-i)/2)return xOt(e)}return f=f||o,f&&(l<d+u*s/2||l>c-u*s/2)?l>d+u/2?1:-1:0}function xOt(t){return Au(Ot)<Au(t)?1:-1}function wOt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function _Ot(t){bT.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&bT.push(r)}}function nk(t){return setTimeout(t,0)}function q6(t){return clearTimeout(t)}NR&&Ur(document,"touchmove",function(t){(jn.active||db)&&t.cancelable&&t.preventDefault()});jn.utils={on:Ur,off:Or,css:zn,find:wPe,is:function(e,n){return!!gc(e,n,e,!1)},extend:iOt,throttle:_Pe,closest:gc,toggleClass:Gl,clone:CPe,index:Au,nextTick:nk,cancelNextTick:q6,detectDirection:kPe,getChild:Bv,expando:Tl};jn.get=function(t){return t[Tl]};jn.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(jn.utils=Yd(Yd({},jn.utils),r.utils)),fC.mount(r)})};jn.create=function(t,e){return new jn(t,e)};jn.version=nOt;var Ks=[],g_,H6,G6=!1,g5,y5,vT,y_;function EOt(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ur(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ur(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ur(document,"touchmove",this._handleFallbackAutoScroll):Ur(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Or(document,"dragover",this._handleAutoScroll):(Or(document,"pointermove",this._handleFallbackAutoScroll),Or(document,"touchmove",this._handleFallbackAutoScroll),Or(document,"mousemove",this._handleFallbackAutoScroll)),KEe(),rk(),sOt()},nulling:function(){vT=H6=g_=G6=y_=g5=y5=null,Ks.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(vT=n,r||this.options.forceAutoScrollFallback||dC||Rh||B_){b5(n,this.options,a,r);var l=Ip(a,!0);G6&&(!y_||s!==g5||o!==y5)&&(y_&&KEe(),y_=setInterval(function(){var u=Ip(document.elementFromPoint(s,o),!0);u!==l&&(l=u,rk()),b5(n,i.options,u,r)},10),g5=s,y5=o)}else{if(!this.options.bubbleScroll||Ip(a,!0)===Id()){rk();return}b5(n,this.options,Ip(a,!1),!1)}}},gh(t,{pluginName:"scroll",initializeByDefault:!0})}function rk(){Ks.forEach(function(t){clearInterval(t.pid)}),Ks=[]}function KEe(){clearInterval(y_)}var b5=_Pe(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Id(),u=!1,d;H6!==n&&(H6=n,rk(),g_=e.scroll,d=e.scrollFn,g_===!0&&(g_=Ip(n,!0)));var c=0,f=g_;do{var h=f,p=Qs(h),g=p.top,b=p.bottom,y=p.left,v=p.right,w=p.width,E=p.height,S=void 0,T=void 0,D=h.scrollWidth,k=h.scrollHeight,R=zn(h),O=h.scrollLeft,B=h.scrollTop;h===l?(S=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(S=w<D&&(R.overflowX==="auto"||R.overflowX==="scroll"),T=E<k&&(R.overflowY==="auto"||R.overflowY==="scroll"));var K=S&&(Math.abs(v-i)<=o&&O+w<D)-(Math.abs(y-i)<=o&&!!O),L=T&&(Math.abs(b-s)<=o&&B+E<k)-(Math.abs(g-s)<=o&&!!B);if(!Ks[c])for(var I=0;I<=c;I++)Ks[I]||(Ks[I]={});(Ks[c].vx!=K||Ks[c].vy!=L||Ks[c].el!==h)&&(Ks[c].el=h,Ks[c].vx=K,Ks[c].vy=L,clearInterval(Ks[c].pid),(K!=0||L!=0)&&(u=!0,Ks[c].pid=setInterval((function(){r&&this.layer===0&&jn.active._onTouchMove(vT);var $=Ks[this.layer].vy?Ks[this.layer].vy*a:0,U=Ks[this.layer].vx?Ks[this.layer].vx*a:0;typeof d=="function"&&d.call(jn.dragged.parentNode[Tl],U,$,t,vT,Ks[this.layer].el)!=="continue"||EPe(Ks[this.layer].el,U,$)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&f!==l&&(f=Ip(f,!1)));G6=u}},30),RPe=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);l(),u&&!u.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function j7(){}j7.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Bv(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:RPe};gh(j7,{pluginName:"revertOnSpill"});function U7(){}U7.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:RPe};gh(U7,{pluginName:"removeOnSpill"});jn.mount(new EOt);jn.mount(U7,j7);const COt=t=>{const e=t.item;let n=Array.prototype.slice.call(e.parentNode.childNodes);return n=n.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),n},SOt=(t,e,n,r,i,s)=>{const a=t.item.parentNode;for(const g of n)a.appendChild(g);if(t.oldIndex==t.newIndex)return;const l=r.getArray(),u=t.item.querySelector("eox-layercontrol-layer").layer.get(i),d=l.find(g=>g.get(i)===u),c=s.dataset.layer,f=l.find(g=>g.get(i)==c);let h,p;for(h=0;h<l.length;h++)if(l[h]==d){r.removeAt(h);break}for(p=0;p<l.length;p++)if(l[p]===f){h>p?r.insertAt(p,d):r.insertAt(p+1,d);break}e.requestUpdate()};function AOt(t,e,n,r){let i=[],s=null;t._sortable=jn.create(t,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:o=>i=COt(o),onMove:o=>{s=o.related},onEnd:o=>SOt(o,r,i,e,n,s)})}function kOt(t,e,n,r){const i=t.getArray();let s=!1;i.forEach(o=>{const a=o.ol_uid;o.get(e)||(o.set(e,a),s=!0),o.get(n)||(o.set(n,`layer ${a}`),s=!0),s&&r.requestUpdate()})}function q7(t,e,n){let r=[];const i=(s,o,a)=>{r=[...r,...s.filter(u=>u.get(o)===a)];const l=s.filter(u=>u.getLayers);return l.length>0&&l.forEach(u=>i(u.getLayers().getArray(),o,a)),r};return i(t,e,n),r}function TOt(t,e,n){if(!t||!e)return!1;if(!FPe(t,n))return!0;const r=t.get("minZoom"),i=t.get("maxZoom"),s=e.getView().getZoom();return s>r&&s<i}function FPe(t,e){const n=t.get("minZoom"),r=t.get("maxZoom");return!!(e&&(n!==-1/0||r!==1/0))}function DOt(t,e){var i,s,o;return!t||!e?void 0:t.getLayers?"group":((o=(i=e.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:i.ol_uid)==null?void 0:o.includes(t.getSource?(s=t.getSource())==null?void 0:s.ol_uid:void 0))?"draw":t.declutter_!==void 0?"vector":"raster"}const LOt=(t,e,n)=>{let r=e;return n.layer.getSource().getTileUrlFunction()&&(r||(r=n.layer.getSource().getTileUrlFunction()),n.layer.getSource().setTileUrlFunction((...i)=>JFt(r(...i),t)),n.layer.getSource().setKey(new Date)),r};function ROt(t,e,n){const r="updateStyleVariables"in e,i="setStyle"in e,s=r?e.style_:n.style;let o=s==null?void 0:s.variables;if(o){const a=H7(t);if(s.variables={...o,...a},r)e.updateStyleVariables(a);else if(i){const l=FOt(s);e.setStyle(l)}}}const H7=t=>{const e={};for(const n in t)if(typeof t[n]=="object"&&t[n]!==null){const r=H7(t[n]);for(const i in r)e[i]=r==null?void 0:r[i]}else e[n]=t==null?void 0:t[n];return e};function FOt(t){let e=t;if("variables"in t){let n=JSON.stringify(t);const{variables:r}=t;for(const i in r)typeof r[i]=="number"?n=n.replaceAll(`["var","${i}"]`,r[i]):n=n.replaceAll(`["var","${i}"]`,`"${r[i]}"`);e=JSON.parse(n)}return e}const OOt=(t,e)=>{var n;if(t)return!("domainProperties"in t)||"domain"in t?{...t}:(n=Object.keys(t))==null?void 0:n.reduce((r,i)=>{if(i==="domainProperties"){const s=H7(e);r.domain=t[i].map(o=>s[o])}else r[i]=t[i];return r},{})};function OPe(t,e){var r;let n={};for(const i in t){const s=t[i].type;if(s&&s!=="object")n[i]=s==="number"?Number(e[i]):e[i];else if(typeof t[i]=="object"&&((r=t[i])!=null&&r.properties)){const o=OPe(t[i].properties,e);Object.keys(o).length>0&&(n[i]=o)}}return n}function MOt(t,e){var s,o,a,l,u;if(!e)return null;let n={},r="updateStyleVariables"in t?(s=t.style_)==null?void 0:s.variables:(o=e.style)==null?void 0:o.variables;if((e.type==="style"||e.style)&&r)n=r;else if((l=(a=t.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const d=new URL(t.getSource().getTileUrlFunction()([0,0,0]));n=Object.fromEntries(d.searchParams.entries())}else return null;const i=OPe(((u=e.schema)==null?void 0:u.properties)||e.schema,n);return Object.keys(i).length?i:null}const IOt=(t,e)=>t==null?void 0:t.filter(n=>["remove","sort"].filter(r=>e!=null&&e.get("layerControlDisable")?r!=="sort":!0).includes(n)),$Ot=(t,e)=>t==null?void 0:t.filter(n=>{let r=!0;return["remove","sort"].includes(n)&&(r=!1),n==="info"&&(r=e.get("description")),n==="config"&&(r=e.get("layerConfig")),n==="datetime"&&(r=e.get("layerDatetime")),n==="legend"&&(r=e.get("layerLegend")),r}),POt=(t,e)=>et`
  <button slot="${t}-icon" class="icon">${e?t:ni}</button>
`,NOt=t=>et`
  <button
    class="remove-icon icon"
    @click=${()=>{const{layer:e}=t;e==null||e.set("layerControlOptional",!0),e==null||e.setVisible(!1),t.dispatchEvent(new CustomEvent("changed",{detail:e,bubbles:!0}))}}
  >
    ${t.unstyled?"x":ni}
  </button>
`,BOt=t=>et`
  <span class="button sort-icon icon drag-handle">
    ${t?"":ni}
  </span>
`,MPe=t=>{var n;const e=["layerControlHide","layerControlOptional"];return(n=t==null?void 0:t.getArray())==null?void 0:n.filter(r=>e.every(i=>!r.get(i)))};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const IPe=oE(class extends pD{constructor(t){if(super(t),t.type!==cp.PROPERTY&&t.type!==cp.ATTRIBUTE&&t.type!==cp.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!_ze(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===gb||e===ni)return e;const n=t.element,r=t.name;if(t.type===cp.PROPERTY){if(e===n[r])return gb}else if(t.type===cp.BOOLEAN_ATTRIBUTE){if(!!e===n.hasAttribute(r))return gb}else if(t.type===cp.ATTRIBUTE&&n.getAttribute(r)===e+"")return gb;return d$(t),e}});var v5,JEe;function zOt(){if(JEe)return v5;JEe=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,u=typeof self=="object"&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),c=Object.prototype,f=c.toString,h=Math.max,p=Math.min,g=function(){return d.Date.now()};function b(T,D,k){var R,O,B,K,L,I,$=0,U=!1,q=!1,Y=!0;if(typeof T!="function")throw new TypeError(t);D=S(D)||0,v(k)&&(U=!!k.leading,q="maxWait"in k,B=q?h(S(k.maxWait)||0,D):B,Y="trailing"in k?!!k.trailing:Y);function X(je){var we=R,$e=O;return R=O=void 0,$=je,K=T.apply($e,we),K}function te(je){return $=je,L=setTimeout(z,D),U?X(je):K}function le(je){var we=je-I,$e=je-$,qe=D-we;return q?p(qe,B-$e):qe}function ee(je){var we=je-I,$e=je-$;return I===void 0||we>=D||we<0||q&&$e>=B}function z(){var je=g();if(ee(je))return he(je);L=setTimeout(z,le(je))}function he(je){return L=void 0,Y&&R?X(je):(R=O=void 0,K)}function fe(){L!==void 0&&clearTimeout(L),$=0,R=I=O=L=void 0}function ze(){return L===void 0?K:he(g())}function He(){var je=g(),we=ee(je);if(R=arguments,O=this,I=je,we){if(L===void 0)return te(I);if(q)return L=setTimeout(z,D),X(I)}return L===void 0&&(L=setTimeout(z,D)),K}return He.cancel=fe,He.flush=ze,He}function y(T,D,k){var R=!0,O=!0;if(typeof T!="function")throw new TypeError(t);return v(k)&&(R="leading"in k?!!k.leading:R,O="trailing"in k?!!k.trailing:O),b(T,D,{leading:R,maxWait:D,trailing:O})}function v(T){var D=typeof T;return!!T&&(D=="object"||D=="function")}function w(T){return!!T&&typeof T=="object"}function E(T){return typeof T=="symbol"||w(T)&&f.call(T)==n}function S(T){if(typeof T=="number")return T;if(E(T))return e;if(v(T)){var D=typeof T.valueOf=="function"?T.valueOf():T;T=v(D)?D+"":D}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var k=s.test(T);return k||o.test(T)?a(T.slice(2),k?2:8):i.test(T)?e:+T}return v5=y,v5}var jOt=zOt();const QEe=aa(jOt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cA=t=>t??ni;var jT,UT;class $Pe extends Zr{constructor(){super();gn(this,jT,f$`
    .legend-container {
      display: flex;
      justify-content: center;
    }

    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);gn(this,UT,"");this.unstyled=!1,this.noShadow=!1,this.layerLegend=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),et`
      <style>
        ${Gt(this,jT)}
        ${!this.unstyled&&Gt(this,UT)}
      </style>
      ${qn(this.layerLegend,()=>et`
          <div class="legend-container">
            <!-- Render color-legend-->
            <color-legend
              id="${this.layer.get("id")}"
              width=${this.layerLegend.width??325}
              scaleType="${cA(this.layerLegend.scaleType)}"
              markType="${cA(this.layerLegend.markType)}"
              titleText="${cA(this.layerLegend.title)}"
              .range=${this.layerLegend.range}
              .domain=${this.layerLegend.domain}
              tickFormat="${cA(this.layerLegend.tickFormat)}"
              .ticks=${this.layerLegend.ticks??5}
              .tickValues=${this.layerLegend.tickValues}
            >
            </color-legend>
          </div>
        `)}
    `}}jT=new WeakMap,UT=new WeakMap,tn($Pe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",$Pe);var Bf,Kb,nE,rE,V6,qT,HT;class PPe extends Zr{constructor(){super();gn(this,rE);gn(this,Bf,{});gn(this,Kb,null);gn(this,nE);gn(this,qT,f$`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: inherit;
      --cle-font-weight: inherit --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
    }
  `);gn(this,HT,"");this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=QEe(yn(this,rE,V6),1e3)}updated(n){if(n.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=QEe(yn(this,rE,V6),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){gs(this,Kb,MOt(this.layer,this.layerConfig)),Object.keys(Gt(this,Bf)).length!==0&&gs(this,Kb,Gt(this,Bf)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const n={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return et`
      <style>
        ${Gt(this,qT)}
        ${!this.unstyled&&Gt(this,HT)}
      </style>
      ${qn(this.layerConfig,()=>et`
          ${qn(this.layerConfig.legend,()=>et`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${OOt(this.layerConfig.legend,Gt(this,Bf))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${Gt(this,Kb)}
            .options=${n}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}Bf=new WeakMap,Kb=new WeakMap,nE=new WeakMap,rE=new WeakSet,V6=function(n){gs(this,Bf,n.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?ROt(Gt(this,Bf),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):gs(this,nE,LOt(Gt(this,Bf),Gt(this,nE),this)),this.requestUpdate()},qT=new WeakMap,HT=new WeakMap,tn(PPe,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",PPe);var GT,BPe,VT,WT;class NPe extends Zr{constructor(){super();gn(this,GT);gn(this,VT,"");gn(this,WT,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),et`
      <style>
        ${Gt(this,VT)}
        ${!this.unstyled&&Gt(this,WT)}
      </style>
      ${qn(this.layerDatetime,()=>et`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .slider=${this.layerDatetime.slider??!1}
            .disablePlay=${this.layerDatetime.disablePlay??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            @stepchange=${yn(this,GT,BPe)}
          ></eox-timecontrol>
        `)}
    `}}GT=new WeakSet,BPe=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:n.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=n.detail.currentStep,this.requestUpdate()},VT=new WeakMap,WT=new WeakMap,tn(NPe,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",NPe);var iE,YT,XT;class zPe extends Zr{constructor(){super();gn(this,iE,n=>(this.selectedTab===n||this.toolsAsList)&&"highlighted");gn(this,YT,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
    .tabbed label.highlighted,
    .listed label.highlighted {
      background: lightgrey;
    }
  `);gn(this,XT,`
    .listed label {
      display: flex;
      justify-content: start;
      align-items: center;
    }
    .listed label:not(:first-of-type) {
      margin-top: 10px;
    }
    .listed label span {
      text-transform: capitalize;
      font-weight: 300;
    }
    .tabbed, .listed {
      font-size: small;
    }
    .tabbed label.highlighted {
      background: #00417011;
      pointer-events: none;
    }
    nav div label,
    nav div span {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    figure {
      background: #00417011;
      border-top: 1px solid #0041701a;
      padding: 8px var(--padding);
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.tabs,r=this.actions,i=r.length+n.length>1;return et`
      <style>
        ${Gt(this,YT)}
        ${!this.unstyled&&Gt(this,XT)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${qn(i,()=>et`
            <nav>
              ${qn(!this.toolsAsList,()=>et`
                  <div>
                    <!-- Labels for tabs -->
                    ${lu(n,(s,o)=>et`
                        <label
                          class=${Gt(this,iE).call(this,o)}
                          @click=${()=>this.selectedTab=o}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${lu(r,s=>et`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${s}-icon`}>${s}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure>
          <!-- Content for each tab -->
          ${lu(n,(s,o)=>et`
              ${qn(this.toolsAsList,()=>et`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${s}-icon`}>${s}</slot>
                    <span>${s}</span>
                  </label>
                `)}
              <div class="tab ${Gt(this,iE).call(this,o)}">
                <!-- Content slot for each tab -->
                <slot name=${`${s}-content`}>${s}</slot>
              </div>
            `)}
        </figure>
      </div>
    `}}iE=new WeakMap,YT=new WeakMap,XT=new WeakMap,tn(zPe,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",zPe);const UOt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,qOt=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,jPe=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,HOt=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`;var ZT,KT;class UPe extends Zr{constructor(){super();tn(this,"_removeButton",()=>NOt(this));tn(this,"_sortButton",()=>BOt(this.unstyled));tn(this,"_button",n=>POt(n,this.unstyled));tn(this,"_getDefaultTools",()=>{var n;return et`
      <div slot="info-content">
        ${Dc(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <!-- Input for opacity -->
        <input
          type="range"
          min="0"
          max="1"
          step="0.01"
          value=${IPe((n=this.layer)==null?void 0:n.getOpacity())}
          @input=${r=>this.layer.setOpacity(parseFloat(r.target.value))}
        />
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${qn(this.layer.get("layerConfig"),()=>et`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${qn(this.layer.get("layerDatetime"),()=>et`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${qn(this.layer.get("layerLegend"),()=>et`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton()}</div>
      <div slot="sort-icon">${this._sortButton()}</div>
    `});gn(this,ZT,"");gn(this,KT,`
    ${UOt}  
    ${qOt}
    ${jPe}
    ${HOt}
    .drag-handle {
      cursor: n-resize;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    eox-layercontrol-layer details summary::before {
      content: "";
    }
    details.tools[open] {
      /*border-top: 1px solid #0041703a;*/
    }
    .single-action {
      position: relative;
    }
    details.tools summary .icon {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 0;
      top: -24px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action .icon::before,
    details.tools summary .icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edots-vertical%3C/title%3E%3Cpath d='M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z' /%3E%3C/svg%3E");
    }
    .single-action,
    details.tools summary,
    eox-layercontrol-tools-items button.icon {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    eox-layercontrol-tools-items button.icon {
      opacity: .7;
    }
    eox-layercontrol-tools-items.tools-list button.icon {
      cursor: auto;
    }
    .single-action:hover,
    details.tools summary:hover,
    eox-layercontrol-tools-items button.icon:hover {
      opacity: 1;
    }
    eox-layercontrol-tools-items.tools-list button.icon:hover {
      opacity: .7;
    }
    .tools-placeholder,
    .single-action .icon,
    .single-action .icon::before,
    details.tools summary .icon,
    details.tools summary .icon::before {
      height: 16px;
      width: 16px;
      margin-right: var(--padding);
    }
    eox-layercontrol-tools-items button.icon,
    eox-layercontrol-tools-items .button.icon {
      display: flex;
      justify-content: center;
    }
    eox-layercontrol-tools-items.tools-list button.icon,
    eox-layercontrol-tools-items.tools-list .button.icon {
      margin-left: -6px;
    }
    eox-layercontrol-tools-items button.icon::before,
    eox-layercontrol-tools-items .button.icon::before {
      width: 16px;
      height: 16px;
    }
    details.tools summary .info-icon,
    button.icon[slot=info-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Einformation-outline%3C/title%3E%3Cpath d='M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z' /%3E%3C/svg%3E");
    }
    details.tools summary .opacity-icon,
    button.icon[slot=opacity-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eopacity%3C/title%3E%3Cpath d='M17.66,8L12,2.35L6.34,8C4.78,9.56 4,11.64 4,13.64C4,15.64 4.78,17.75 6.34,19.31C7.9,20.87 9.95,21.66 12,21.66C14.05,21.66 16.1,20.87 17.66,19.31C19.22,17.75 20,15.64 20,13.64C20,11.64 19.22,9.56 17.66,8M6,14C6,12 6.62,10.73 7.76,9.6L12,5.27L16.24,9.65C17.38,10.77 18,12 18,14H6Z' /%3E%3C/svg%3E");
    }
    details.tools summary .config-icon,
    button.icon[slot=config-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Etune%3C/title%3E%3Cpath d='M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z' /%3E%3C/svg%3E");
    }
    details.tools summary .datetime-icon,
    button.icon[slot=datetime-icon]::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eclock-outline%3C/title%3E%3Cpath d='M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z' /%3E%3C/svg%3E");
    }
    details.tools summary .legend-icon,
    button.icon[slot=legend-icon]::before {
      content: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Ctitle%3Emap-legend%3C%2Ftitle%3E%3Cpath%20d%3D%22M9%2C3L3.36%2C4.9C3.15%2C4.97%203%2C5.15%203%2C5.38V20.5A0.5%2C0.5%200%200%2C0%203.5%2C21L3.66%2C20.97L9%2C18.9L15%2C21L20.64%2C19.1C20.85%2C19.03%2021%2C18.85%2021%2C18.62V3.5A0.5%2C0.5%200%200%2C0%2020.5%2C3L20.34%2C3.03L15%2C5.1L9%2C3M8%2C5.45V17.15L5%2C18.31V6.46L8%2C5.45M10%2C5.47L14%2C6.87V18.53L10%2C17.13V5.47M19%2C5.7V17.54L16%2C18.55V6.86L19%2C5.7M7.46%2C6.3L5.57%2C6.97V9.12L7.46%2C8.45V6.3M7.46%2C9.05L5.57%2C9.72V11.87L7.46%2C11.2V9.05M7.46%2C11.8L5.57%2C12.47V14.62L7.46%2C13.95V11.8M7.46%2C14.55L5.57%2C15.22V17.37L7.46%2C16.7V14.55Z%22%20%2F%3E%3C%2Fsvg%3E");
    }
    .single-action .remove-icon::before,
    [slot=remove-icon] button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ff0000' viewBox='0 0 24 24'%3E%3Ctitle%3Edelete-outline%3C/title%3E%3Cpath d='M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z' /%3E%3C/svg%3E");
    }
    .single-action .sort-icon::before,
    [slot=sort-icon] .button.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Edrag-horizontal-variant%3C/title%3E%3Cpath d='M21 11H3V9H21V11M21 13H3V15H21V13Z' /%3E%3C/svg%3E");
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var l;const n=IOt(this.tools,this.layer),r=$Ot(this.tools,this.layer),i=this[`_${n==null?void 0:n[0]}Button`]?this[`_${n==null?void 0:n[0]}Button`]():ni,s=((l=this.tools)==null?void 0:l.length)===1?`${this.tools[0]}-icon`:"",o=n==null?void 0:n.length,a=r==null?void 0:r.length;return et`
      <style>
        ${Gt(this,ZT)}
        ${!this.unstyled&&Gt(this,KT)}
      </style>
      ${qn(o+a>0,()=>et`
          ${qn(o===1&&a===0,()=>et`
              <div class="single-action-container">
                <div class="single-action">${i}</div>
              </div>
            `,()=>et`
              <details
                class="tools"
                open=${this.layer.get("layerControlToolsExpand")||ni}
              >
                <summary>
                  <button class="icon ${s}">Tools</button>
                </summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${n}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${lu(r,u=>this._button(u))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools()}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}ZT=new WeakMap,KT=new WeakMap,tn(UPe,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-tools",UPe);const GOt=t=>{const e=()=>{const n=TOt(t.layer,t.map,t.showLayerZoomState);let r=!1;!n&&t.currLayerVisibilityBasedOnZoom?(t.currLayerVisibilityBasedOnZoom=!1,r=!0):n&&!t.currLayerVisibilityBasedOnZoom&&(t.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(t.requestUpdate(),t.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};FPe(t.layer,t.showLayerZoomState)&&(e(),t.map.getView().on("change:resolution",()=>e()))},VOt=(t,e)=>{const n=e.layer;n.setVisible(t.target.checked),t.target.checked&&n.get("layerControlExclusive")&&e.closest(".layers > ul").querySelectorAll("eox-layercontrol-layer").forEach(i=>{var s;i.layer!==n&&((s=i.layer)!=null&&s.get("layerControlExclusive"))&&(i.layer.setVisible(!1),i.requestUpdate())}),e.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:n})),e.requestUpdate()};var Cd,fb,HPe,JT,QT;class qPe extends Zr{constructor(){super();gn(this,Cd);tn(this,"currLayerVisibilityBasedOnZoom",!0);gn(this,JT,"");gn(this,QT,`
    ${jPe}
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      background: #d2e2ee;
      opacity: 0.3;
    }
    .layer {
      width: 100%;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
      display: var(--layer-visibility);
    }
    label, span {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .title {
      display: var(--layer-title-visibility);
    }
    [data-type] .title::before {
      width: 20px;
      min-width: 20px;
      height: 20px;
      margin-right: 6px;
      display: var(--layer-type-visibility);
    }
    [data-type] .title.color-swatch::before {
      background: var(--layer-color);
      border-radius: 3px;
      content: "" !important;
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    [data-type=group] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-outline%3C/title%3E%3Cpath d='M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6Z' /%3E%3C/svg%3E");
    }
    [data-type=group] > eox-layercontrol-layer-group > details[open] > summary > eox-layercontrol-layer > .layer > label > .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Efolder-open-outline%3C/title%3E%3Cpath d='M6.1,10L4,18V8H21A2,2 0 0,0 19,6H12L10,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H19C19.9,20 20.7,19.4 20.9,18.5L23.2,10H6.1M19,18H6L7.6,12H20.6L19,18Z' /%3E%3C/svg%3E");
    }
    [data-type=raster] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckerboard%3C/title%3E%3Cpath d='M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z' /%3E%3C/svg%3E");
    }
    [data-type=vector] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Eshape-outline%3C/title%3E%3Cpath d='M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z' /%3E%3C/svg%3E");
    }
    [data-type=draw] .title::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230041703a' viewBox='0 0 24 24'%3E%3Ctitle%3Evector-square-edit%3C/title%3E%3Cpath d='M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z' /%3E%3C/svg%3E");
    }
  `);this.layer=null,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){GOt(this)}render(){var l;const n=this.layer.getVisible(),r=n?"visible":"",i=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",s=yn(this,Cd,fb).call(this,"layerControlDisable")?"disabled":"",o=yn(this,Cd,fb).call(this,"layerControlExclusive")?"radio":"checkbox",a=((l=this.tools)==null?void 0:l.length)>0;return et`
      <style>
        ${Gt(this,JT)}
        ${!this.unstyled&&Gt(this,QT)}
      </style>
      ${qn(this.layer,()=>et`
          <!-- Render the layer -->
          <div class="layer ${r} ${i}">
            <label class="drag-handle ${s}">
              <!-- Input element for layer visibility -->
              <input
                type=${o}
                .checked=${IPe(n)}
                @click=${yn(this,Cd,HPe)}
              />

              <!-- Layer title -->
              <span
                class="title ${yn(this,Cd,fb).call(this,"color")?"color-swatch":""}"
                style="--layer-color: ${yn(this,Cd,fb).call(this,"color")}"
              >
                ${yn(this,Cd,fb).call(this,this.titleProperty)}
              </span>
              ${qn(a,()=>et`<span class="tools-placeholder"></span>`)}
            </label>
          </div>

          <!-- Render layer tools -->
          <eox-layercontrol-layer-tools
            .noShadow=${!0}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}Cd=new WeakSet,fb=function(n){var r;return(r=this.layer)==null?void 0:r.get(n)},HPe=function(n){VOt(n,this)},JT=new WeakMap,QT=new WeakMap,tn(qPe,"properties",{layer:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer",qPe);var eD,tD;class GPe extends Zr{constructor(){super();gn(this,eD,"");gn(this,tD,`
    details summary {
      cursor: pointer;
      display: flex;
    }
    details summary { list-style-type: none; } /* Firefox */
    details summary::-webkit-details-marker { display: none; } /* Chrome */
    details summary::marker { display: none; }
    details summary::before {
      display: var(--layer-visibility);
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
      font-size: 13px;
      width: 24px;
      height: 24px;
      margin: 4px 0;
      transform-origin: center;
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary:before {
      transform: rotate(90deg);
    }
    details[data-children-length="0"] summary::before {
      display: none;
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var i,s;const n=!!((i=this.group)!=null&&i.get("layerControlExpand")),r=(s=MPe(this.group.getLayers()))==null?void 0:s.length;return et`
      <style>
        ${Gt(this,eD)}
        ${!this.unstyled&&Gt(this,tD)}
      </style>
      ${qn(this.group,()=>et`
          <!-- Render the details element with the layer control -->
          <details
            open=${n||ni}
            data-children-length=${r}
          >
            <summary>
              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}eD=new WeakMap,tD=new WeakMap,tn(GPe,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",GPe);const WOt=t=>{const{layers:e,idProperty:n,titleProperty:r,renderRoot:i}=t,s=Q0(()=>{t.requestUpdate(),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),o=()=>s();if(e&&(e.hasListener("change:length")&&(e==null||e.un("change:length",o)),e.on("change:length",o),e)){const a=i.querySelector("ul");kOt(e,n,r,t),AOt(a,e,n,t)}};var nD,rD;class VPe extends Zr{constructor(){super();gn(this,nD,"");gn(this,rD,`
    ul {
      padding: 0;
      margin: 0;
    }
    ul ul {
      padding-left: var(--list-padding);
    }
    li {
      list-style: none;
      padding-left: var(--padding);
    }
    li {
      border-bottom: 1px solid #0041703a;
      border: var(--layer-visibility);
    }
    li:last-child {
      border: none;
    }
    li.sortable-chosen {
      background: #eeea;
    }
    li.sortable-drag {
      opacity: 0;
    }
    li.sortable-ghost {
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}firstUpdated(){WOt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.layers?MPe(this.layers).reverse():[];return et`
      <style>
        ${Gt(this,nD)}
        ${!this.unstyled&&Gt(this,rD)}
      </style>
      <ul>
        ${qn(this.layers,()=>et`
            ${C$e(n,r=>r,r=>et`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${DOt(r,this.map)}"
                >
                  ${r.getLayers?et`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:et`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}nD=new WeakMap,rD=new WeakMap,tn(VPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",VPe);const YOt=t=>{const e=t.querySelector("select[name=optional]"),n=e?e.value:null,r=q7(t.layers.getArray(),"layerControlOptional",!0).find(i=>(i.get(t.idProperty)||i.ol_uid)===n);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),t.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(i=>i.requestUpdate()),t.requestUpdate()};var iD,YPe;class WPe extends Zr{constructor(){super();gn(this,iD);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=q7(this.layers.getArray(),"layerControlOptional",!0);return et`
      <!-- Label for the dropdown -->
      <label for="optional">Optional layers</label>

      <!-- Dropdown select element -->
      <select name="optional" data-cy="optionalLayers">
        <!-- Default placeholder option -->
        <option disabled selected value>
          -- select an optional layer to add --
        </option>

        <!-- Mapping through filtered layers list to generate dropdown options -->
        ${n.map(r=>{const i=r.get(this.idProperty)||r.ol_uid,s=r.get(this.titleProperty),o=`layer ${r.get(this.idProperty)}`;return et` <option value="${i}">${s||o}</option> `})}
      </select>

      <!-- Button to handle adding layers -->
      <button @click="${yn(this,iD,YPe)}">add</button>
    `}}iD=new WeakSet,YPe=function(){YOt(this)},tn(WPe,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",WPe);const XOt=(t,e)=>{e.jsonInput=t.target.value,e.requestUpdate()},eCe=t=>{const e=JSON.parse(`{"data":${yPe(t.jsonInput)}}`);Array.isArray(e.data)?e.data.forEach(n=>{t.eoxMap.addOrUpdateLayer(n)}):t.eoxMap.addOrUpdateLayer(e.data),t.jsonInput=null,t.requestUpdate()},ZOt=(t,e)=>{e.urlInput=t.target.value,e.requestUpdate()};async function KOt(t){const e=t.urlInput;if(t.wmsCapabilities=null,t.searchLoad=!0,t.requestUpdate(),!e)return!1;if(N7(e)==="XYZ")return{Name:e};try{const n=await XFt(e);t.wmsCapabilities=n}catch{}finally{t.searchLoad=!1,t.requestUpdate()}return!1}const JOt=(t,e)=>{const{Name:n}=t,r=N7(e.urlInput)||"XYZ",i={type:"Tile",properties:{id:n,title:n},source:{type:r,url:e.urlInput,params:{LAYERS:n}}};e.jsonInput=JSON.stringify(i)},QOt=(t,e)=>{e.open=t||null,e.urlInput=null,e.jsonInput=null,e.wmsCapabilities=null,e.requestUpdate()};var sa,ZPe,KPe,W6,JPe,QPe,ik,sD,oD;class XPe extends Zr{constructor(){super();gn(this,sa);tn(this,"urlInput",null);tn(this,"jsonInput",null);tn(this,"open",null);tn(this,"searchLoad",!1);tn(this,"wmsCapabilities",null);gn(this,sD,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
  `);gn(this,oD,`
    .eox-add {
      background: #f0f2f5;
      border-top: 1px solid #0041701a;
      padding: 0.5rem;
      font-size: small;
    }
    .eox-add-layer-col, .eox-add-layer-tab {
      display: flex;
      width: 100%;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .eox-add-layer-main .open {
      position: relative;
    }
    button.icon.add-icon {
      flex-grow: 1;
    }
    .eox-add-layer-tab li {
      border: 0 !important;
      font-size: smaller;
      padding: 0.2rem 0.7rem;
      background: #f0f2f5;
      border-radius: 4px 4px 0px 0px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
    }
    .eox-add-layer-tab li.active {
      background: #204270;
      color: white;
      font-weight: 700;
    }
    .relative {
      position: relative
    }
    .eox-add-layer-col.justify-end {
      justify-content: end;
    }
    .eox-add ul {
      max-height: 120px;
      overflow: scroll;
    }
    .eox-add ul li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.1rem 0.2rem;
    }
    button.icon {
      justify-content: end;
      transition: opacity .2s;
      opacity: .7;
    }
    button.icon:hover {
      opacity: 1;
    }
    button.icon.add-layer-icon::before {
      width: 16px;
      min-width: 16px;
      height: 16px;
    }
    button.icon.add-icon::before {
      width: 18px;
      min-width: 18px;
      height: 18px;
    }
    .add-icon.icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath xmlns='http://www.w3.org/2000/svg' d='M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z' fill='%23004270'/%3E%3C/svg%3E");
    }
    .add-layer-icon::before {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='%23004270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .json-add-layer {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplus-thick%3C/title%3E%3Cpath fill='white' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
    }
    .search-icon::after {
      content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Emagnify%3C/title%3E%3Cpath d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z' fill='white' /%3E%3C/svg%3E");
    }
    .search-icon::after, .json-add-layer::before {
      width: 14px;
      min-width: 14px;
      height: 14px;
      display:flex
      margin-right: 6px;
      color: white;
    }
    .search-icon, .json-add-layer {
      padding: 4px 6px;
      height: 28px;
      border-radius: 0px 4px 4px 0px;
      box-shadow: none;
    }
    .json-add-layer {
      position: absolute;
      bottom: 16px;
      right: 14px;
      border-radius: 4px;
      height: 24px;
      padding: 4px;
    }
    input.add-url, textarea.add-layer-input {
      box-sizing: border-box !important;
      width: 100%;
      height: 28px;
      padding: 5px 7px !important;
      border: 1px solid #0004 !important;
      font-size: smaller;
      border-radius: 4px 0px 0px 4px;
    }
    textarea.add-layer-input {
      height: 90px;
      resize: none;
      border-radius: 4px;
    }
    .divider {
      margin: 1rem 0px;
      height: 1px;
      border-top: 1.5px solid #00417059;
      text-align: center;
      position: relative;
    }
    .divider span {
      position: relative;
      top: -.6em;
      padding: 0px 0.5rem;
      background: #f0f2f5;
      color: #00417059;
      font-weight: bold;
      display: inline-block;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=this.open?"open":"close",r=this.open==="url",i=this.open==="json",s=!ZFt(this.urlInput)||this.searchLoad?!0:ni;return et`
      <style>
        ${Gt(this,sD)}
        ${!this.unstyled&&Gt(this,oD)}
      </style>
      <div class="eox-add-layer-main">
        <div class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <ul class="eox-add-layer-tab ${n}">
            <li
              @click=${()=>yn(this,sa,ik).call(this,"url")}
              class="${r?"active":""}"
            >
              URL
            </li>
            <li
              @click=${()=>yn(this,sa,ik).call(this,"json")}
              class="${i?"active":""}"
            >
              JSON
            </li>
          </ul>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon icon"
            @click=${()=>yn(this,sa,ik).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":""}
          </button>
        </div>
        <div class="eox-add ${n}">
          ${r?et`
              <!-- Input field for URL -->
              <div class="eox-add-layer-col">
                <input 
                  type="text" 
                  class="add-url" 
                  placeholder="Add URL (WMS/XYZ)" 
                  .value="${this.urlInput}" 
                  @input=${yn(this,sa,ZPe)}
                >
                </input>
                <!-- Search button for URL -->
                <button 
                  class="search-icon" 
                  disabled=${s} 
                  @click=${yn(this,sa,KPe)}
                >
                  ${this.unstyled?"Search":""}
                </button>
              </div>

              <!-- Display layers for WMS capabilities -->
              ${this.wmsCapabilities?et`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(o=>{const a=o.Name;return et`
                            <li class="search-list">
                              ${a}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>yn(this,sa,W6).call(this,o)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:ni}
            `:et`
                <!-- Textarea for JSON input -->
                <textarea
                  class="add-layer-input"
                  placeholder="Please put a valid eox-map layer JSON."
                  @input=${yn(this,sa,QPe)}
                  .value=${this.jsonInput}
                ></textarea>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer"
                  disabled=${KFt(this.jsonInput)?ni:!0}
                  @click=${yn(this,sa,JPe)}
                >
                  ${this.unstyled?"Add JSON":""}
                </button>
              `}
        </div>
      </div>
    `}}sa=new WeakSet,ZPe=function(n){ZOt(n,this)},KPe=async function(){const n=await KOt(this);n&&yn(this,sa,W6).call(this,n)},W6=function(n){JOt(n,this),eCe(this)},JPe=function(){eCe(this)},QPe=function(n){XOt(n,this)},ik=function(n){QOt(n,this)},sD=new WeakMap,oD=new WeakMap,tn(XPe,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",XPe);const e5t=(t,e)=>{if(e.requestUpdate(),t.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const n=e.renderRoot.querySelector("eox-layercontrol-optional-list");n==null||n.requestUpdate()}},t5t=t=>{let e;return typeof t=="string"?e=document.querySelector(t):e=t,e},tCe=t=>{const e=t5t(t.for);return e&&e.map!==t.map&&(t.map=e.map),e};var _p,Vv,t8e,n8e,aD;class e8e extends Zr{constructor(){super();gn(this,Vv);gn(this,_p);gn(this,aD,`
    :host, :root {
      font-family: Roboto, sans-serif;
      --padding: 0.5rem;
      --list-padding: 48px;
      --layer-input-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: flex;
      --layer-visibility: block;
      --layer-tools-button-visibility: flex;

      display: block;
      padding: var(--padding) 0;
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1}firstUpdated(){this.eoxMap=tCe(this)}updated(n){n.has("for")&&(this.eoxMap=tCe(this))}get eoxMap(){return Gt(this,_p)}set eoxMap(n){const r=Gt(this,_p);gs(this,_p,n),this.requestUpdate("eoxMap",r)}render(){var i,s,o;const n=(i=this.map)==null?void 0:i.getLayers().getArray(),r=n&&((s=q7(n,"layerControlOptional",!0))==null?void 0:s.length)>0;return et`
      <style>
        ${!this.unstyled&&Gt(this,aD)}
        ${this.styleOverride}
      </style>

      <!-- Conditional rendering of add layers component -->
      ${qn(this.addExternalLayers&&((o=Gt(this,_p))==null?void 0:o.addOrUpdateLayer),()=>et`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${Gt(this,_p)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${qn(this.map,()=>et`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            @changed=${yn(this,Vv,t8e)}
            @datetime:updated=${yn(this,Vv,n8e)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${qn(r,()=>et`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}_p=new WeakMap,Vv=new WeakSet,t8e=function(n){e5t(n,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:n.detail}))},n8e=function(n){this.dispatchEvent(new CustomEvent("datetime:updated",{detail:n.detail}))},aD=new WeakMap,tn(e8e,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol",e8e);class n5t extends HTMLElement{static get observedAttributes(){return["gap"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        grid-template-columns: repeat(12, 1fr);
        grid-template-rows: repeat(12, 1fr);
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(e,n,r){n!==r&&(this[e]=r),this.render()}}class r5t extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;

          grid-column: ${parseInt(this.getAttribute("x"))+1} / span ${this.getAttribute("w")};
          grid-row: ${parseInt(this.getAttribute("y"))+1} / span ${this.getAttribute("h")};
        }
      </style>
      <slot></slot>
    `}attributeChangedCallback(e,n,r){n!==r&&(this[e]=r),this.render()}}customElements.define("eox-layout",n5t);customElements.define("eox-layout-item",r5t);window.eoxMapAdvancedOlFormats=_Ye;var Za=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())}),Ql=Uint8Array,H_=Uint16Array,i5t=Int32Array,r8e=new Ql([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i8e=new Ql([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s5t=new Ql([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s8e=function(t,e){for(var n=new H_(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new i5t(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},o8e=s8e(r8e,2),a8e=o8e.b,o5t=o8e.r;a8e[28]=258,o5t[258]=28;var a5t=s8e(i8e,0),l5t=a5t.b,l8e=new H_(32768);for(bi=0;bi<32768;++bi)Ff=(bi&43690)>>1|(bi&21845)<<1,Ff=(Ff&52428)>>2|(Ff&13107)<<2,Ff=(Ff&61680)>>4|(Ff&3855)<<4,l8e[bi]=((Ff&65280)>>8|(Ff&255)<<8)>>1;var Ff,bi,G_=function(t,e,n){for(var r=t.length,i=0,s=new H_(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new H_(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;{a=new H_(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],c=o[t[i]-1]++<<d,f=c|(1<<d)-1;c<=f;++c)a[l8e[c]>>l]=u}return a},hC=new Ql(288);for(bi=0;bi<144;++bi)hC[bi]=8;var bi;for(bi=144;bi<256;++bi)hC[bi]=9;var bi;for(bi=256;bi<280;++bi)hC[bi]=7;var bi;for(bi=280;bi<288;++bi)hC[bi]=8;var bi,u8e=new Ql(32);for(bi=0;bi<32;++bi)u8e[bi]=5;var bi,u5t=G_(hC,9),c5t=G_(u8e,5),x5=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},uc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},w5=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},d5t=function(t){return(t+7)/8|0},f5t=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new Ql(n-e);return r.set(t.subarray(e,n)),r},h5t=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Xl=function(t,e,n){var r=new Error(e||h5t[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Xl),!n)throw r;return r},G7=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ql(0);var o=!n||e.i!=2,a=e.i;n||(n=new Ql(i*3));var l=function($e){var qe=n.length;if($e>qe){var Pe=new Ql(Math.max(qe*2,$e));Pe.set(n),n=Pe}},u=e.f||0,d=e.p||0,c=e.b||0,f=e.l,h=e.d,p=e.m,g=e.n,b=i*8;do{if(!f){u=uc(t,d,1);var y=uc(t,d+1,3);if(d+=3,y)if(y==1)f=u5t,h=c5t,p=9,g=5;else if(y==2){var S=uc(t,d,31)+257,T=uc(t,d+10,15)+4,D=S+uc(t,d+5,31)+1;d+=14;for(var k=new Ql(D),R=new Ql(19),O=0;O<T;++O)R[s5t[O]]=uc(t,d+O*3,7);d+=T*3;for(var B=x5(R),K=(1<<B)-1,L=G_(R,B),O=0;O<D;){var I=L[uc(t,d,K)];d+=I&15;var v=I>>4;if(v<16)k[O++]=v;else{var $=0,U=0;for(v==16?(U=3+uc(t,d,3),d+=2,$=k[O-1]):v==17?(U=3+uc(t,d,7),d+=3):v==18&&(U=11+uc(t,d,127),d+=7);U--;)k[O++]=$}}var q=k.subarray(0,S),Y=k.subarray(S);p=x5(q),g=x5(Y),f=G_(q,p),h=G_(Y,g)}else Xl(1);else{var v=d5t(d)+4,w=t[v-4]|t[v-3]<<8,E=v+w;if(E>i){a&&Xl(0);break}o&&l(c+w),n.set(t.subarray(v,E),c),e.b=c+=w,e.p=d=E*8,e.f=u;continue}if(d>b){a&&Xl(0);break}}o&&l(c+131072);for(var X=(1<<p)-1,te=(1<<g)-1,le=d;;le=d){var $=f[w5(t,d)&X],ee=$>>4;if(d+=$&15,d>b){a&&Xl(0);break}if($||Xl(2),ee<256)n[c++]=ee;else if(ee==256){le=d,f=null;break}else{var z=ee-254;if(ee>264){var O=ee-257,he=r8e[O];z=uc(t,d,(1<<he)-1)+a8e[O],d+=he}var fe=h[w5(t,d)&te],ze=fe>>4;fe||Xl(3),d+=fe&15;var Y=l5t[ze];if(ze>3){var he=i8e[ze];Y+=w5(t,d)&(1<<he)-1,d+=he}if(d>b){a&&Xl(0);break}o&&l(c+131072);var He=c+z;if(c<Y){var je=s-Y,we=Math.min(Y,He);for(je+c<0&&Xl(3);c<we;++c)n[c]=r[je+c]}for(;c<He;c+=4)n[c]=n[c-Y],n[c+1]=n[c+1-Y],n[c+2]=n[c+2-Y],n[c+3]=n[c+3-Y];c=He}}e.l=f,e.p=le,e.b=c,e.f=u,f&&(u=1,e.m=p,e.d=h,e.n=g)}while(!u);return c==n.length?n:f5t(n,0,c)},p5t=new Ql(0),m5t=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Xl(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},g5t=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},y5t=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Xl(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Xl(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function b5t(t,e){return G7(t,{i:2},e,e)}function v5t(t,e){var n=m5t(t);return n+8>t.length&&Xl(6,"invalid gzip data"),G7(t.subarray(n,-8),{i:2},new Ql(g5t(t)),e)}function x5t(t,e){return G7(t.subarray(y5t(t,e),-4),{i:2},e,e)}function Y6(t,e){return t[0]==31&&t[1]==139&&t[2]==8?v5t(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?b5t(t,e):x5t(t,e)}var w5t=typeof TextDecoder<"u"&&new TextDecoder,_5t=0;try{w5t.decode(p5t,{stream:!0}),_5t=1}catch{}var c8e=(t,e)=>t*Math.pow(2,e),Pw=(t,e)=>Math.floor(t/Math.pow(2,e)),xT=(t,e)=>c8e(t.getUint16(e+1,!0),8)+t.getUint8(e),d8e=(t,e)=>c8e(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),E5t=(t,e,n,r,i)=>{if(t!=r.getUint8(i))return t-r.getUint8(i);const s=xT(r,i+1);if(e!=s)return e-s;const o=xT(r,i+4);return n!=o?n-o:0},C5t=(t,e,n,r)=>{const i=f8e(t,e|128,n,r);return i?{z:e,x:n,y:r,offset:i[0],length:i[1],is_dir:!0}:null},nCe=(t,e,n,r)=>{const i=f8e(t,e,n,r);return i?{z:e,x:n,y:r,offset:i[0],length:i[1],is_dir:!1}:null},f8e=(t,e,n,r)=>{let i=0,s=t.byteLength/17-1;for(;i<=s;){const o=s+i>>1,a=E5t(e,n,r,t,o*17);if(a>0)i=o+1;else if(a<0)s=o-1;else return[d8e(t,o*17+7),t.getUint32(o*17+13,!0)]}return null},S5t=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,h8e=(t,e)=>{const n=t.getUint8(e*17);return{z:n&127,x:xT(t,e*17+1),y:xT(t,e*17+4),offset:d8e(t,e*17+7),length:t.getUint32(e*17+13,!0),is_dir:n>>7===1}},rCe=t=>{const e=[],n=new DataView(t);for(let r=0;r<n.byteLength/17;r++)e.push(h8e(n,r));return A5t(e)},A5t=t=>{t.sort(S5t);const e=new ArrayBuffer(17*t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++){const i=t[r];let s=i.z;i.is_dir&&(s=s|128),n[r*17]=s,n[r*17+1]=i.x&255,n[r*17+2]=i.x>>8&255,n[r*17+3]=i.x>>16&255,n[r*17+4]=i.y&255,n[r*17+5]=i.y>>8&255,n[r*17+6]=i.y>>16&255,n[r*17+7]=i.offset&255,n[r*17+8]=Pw(i.offset,8)&255,n[r*17+9]=Pw(i.offset,16)&255,n[r*17+10]=Pw(i.offset,24)&255,n[r*17+11]=Pw(i.offset,32)&255,n[r*17+12]=Pw(i.offset,48)&255,n[r*17+13]=i.length&255,n[r*17+14]=i.length>>8&255,n[r*17+15]=i.length>>16&255,n[r*17+16]=i.length>>24&255}return e},k5t=(t,e)=>{if(t.byteLength<17)return null;const n=t.byteLength/17,r=h8e(t,n-1);if(r.is_dir){const i=r.z,s=e.z-i,o=Math.trunc(e.x/(1<<s)),a=Math.trunc(e.y/(1<<s));return{z:i,x:o,y:a}}return null};function T5t(t){return Za(this,null,function*(){const e=yield t.getBytes(0,512e3),n=new DataView(e.data),r=n.getUint32(4,!0),i=n.getUint16(8,!0),s=new TextDecoder("utf-8"),o=JSON.parse(s.decode(new DataView(e.data,10,r)));let a=0;o.compression==="gzip"&&(a=2);let l=0;"minzoom"in o&&(l=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let d=0,c=0,f=0,h=-180,p=-85,g=180,b=85;if(o.bounds){const v=o.bounds.split(",");h=+v[0],p=+v[1],g=+v[2],b=+v[3]}if(o.center){const v=o.center.split(",");d=+v[0],c=+v[1],f=+v[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:u,minLon:h,minLat:p,maxLon:g,maxLat:b,centerZoom:f,centerLon:d,centerLat:c,etag:e.etag}})}function D5t(t,e,n,r,i,s,o){return Za(this,null,function*(){let a=yield n.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);t.specVersion===1&&(a=rCe(a));const l=nCe(new DataView(a),r,i,s);if(l){let c=(yield e.getBytes(l.offset,l.length,o)).data;const f=new DataView(c);return f.getUint8(0)==31&&f.getUint8(1)==139&&(c=Y6(new Uint8Array(c))),{data:c}}const u=k5t(new DataView(a),{z:r,x:i,y:s});if(u){const d=C5t(new DataView(a),u.z,u.x,u.y);if(d){let c=yield n.getArrayBuffer(e,d.offset,d.length,t);t.specVersion===1&&(c=rCe(c));const f=nCe(new DataView(c),r,i,s);if(f){let p=(yield e.getBytes(f.offset,f.length,o)).data;const g=new DataView(p);return g.getUint8(0)==31&&g.getUint8(1)==139&&(p=Y6(new Uint8Array(p))),{data:p}}}}})}var p8e={getHeader:T5t,getZxy:D5t};function nb(t,e){return(e>>>0)*4294967296+(t>>>0)}function L5t(t,e){const n=e.buf;let r,i;if(i=n[e.pos++],r=(i&112)>>4,i<128||(i=n[e.pos++],r|=(i&127)<<3,i<128)||(i=n[e.pos++],r|=(i&127)<<10,i<128)||(i=n[e.pos++],r|=(i&127)<<17,i<128)||(i=n[e.pos++],r|=(i&127)<<24,i<128)||(i=n[e.pos++],r|=(i&1)<<31,i<128))return nb(t,r);throw new Error("Expected varint not more than 10 bytes")}function Nw(t){const e=t.buf;let n,r;return r=e[t.pos++],n=r&127,r<128||(r=e[t.pos++],n|=(r&127)<<7,r<128)||(r=e[t.pos++],n|=(r&127)<<14,r<128)||(r=e[t.pos++],n|=(r&127)<<21,r<128)?n:(r=e[t.pos],n|=(r&15)<<28,L5t(n,t))}function R5t(t,e,n,r){if(r==0){n==1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const i=e[0];e[0]=e[1],e[1]=i}}var F5t=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function O5t(t,e,n){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||n>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");const r=F5t[t],i=Math.pow(2,t);let s=0,o=0,a=0;const l=[e,n];let u=i/2;for(;u>0;)s=(l[0]&u)>0?1:0,o=(l[1]&u)>0?1:0,a+=u*u*(3*s^o),R5t(u,l,s,o),u=u/2;return r+a}function m8e(t,e){return Za(this,null,function*(){if(e===1||e===0)return t;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Y6(new Uint8Array(t));{let r=new Response(t).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var hb=(t=>(t[t.Unknown=0]="Unknown",t[t.Mvt=1]="Mvt",t[t.Png=2]="Png",t[t.Jpeg=3]="Jpeg",t[t.Webp=4]="Webp",t[t.Avif=5]="Avif",t))(hb||{}),M5t=127;function I5t(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=r+n>>1,s=e-t[i].tileId;if(s>0)n=i+1;else if(s<0)r=i-1;else return t[i]}return r>=0&&(t[r].runLength===0||e-t[r].tileId<t[r].runLength)?t[r]:null}var $5t=class{constructor(t,e=new Headers){this.url=t,this.customHeaders=e}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,e,n){return Za(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);const i=new Headers(this.customHeaders);i.set("Range","bytes="+t+"-"+(t+e-1));let s=yield fetch(this.url,{signal:n,headers:i});if(s.status===416&&t===0){const l=s.headers.get("Content-Range");if(!l||!l.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const u=+l.substr(8);s=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(u-1)}})}if(s.status>=300)throw Error("Bad response code: "+s.status);const o=s.headers.get("Content-Length");if(s.status===200&&(!o||+o>e))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield s.arrayBuffer(),etag:s.headers.get("ETag")||void 0,cacheControl:s.headers.get("Cache-Control")||void 0,expires:s.headers.get("Expires")||void 0}})}};function cc(t,e){const n=t.getUint32(e+4,!0),r=t.getUint32(e+0,!0);return n*Math.pow(2,32)+r}function P5t(t,e){const n=new DataView(t),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:cc(n,8),rootDirectoryLength:cc(n,16),jsonMetadataOffset:cc(n,24),jsonMetadataLength:cc(n,32),leafDirectoryOffset:cc(n,40),leafDirectoryLength:cc(n,48),tileDataOffset:cc(n,56),tileDataLength:cc(n,64),numAddressedTiles:cc(n,72),numTileEntries:cc(n,80),numTileContents:cc(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function g8e(t){const e={buf:new Uint8Array(t),pos:0},n=Nw(e),r=[];let i=0;for(let s=0;s<n;s++){const o=Nw(e);r.push({tileId:i+o,offset:0,length:0,runLength:1}),i+=o}for(let s=0;s<n;s++)r[s].runLength=Nw(e);for(let s=0;s<n;s++)r[s].length=Nw(e);for(let s=0;s<n;s++){const o=Nw(e);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}function N5t(t){const e=new DataView(t);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Tb=class extends Error{};function B5t(t,e,n,r){return Za(this,null,function*(){const i=yield t.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(N5t(i.data)<3)return[yield p8e.getHeader(t)];const o=i.data.slice(0,M5t);let a=i.etag;r&&i.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),a=void 0);const l=P5t(o,a);if(n){const u=i.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),d=t.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=g8e(yield e(u,l.internalCompression));return[l,[d,c.length,c]]}return[l,void 0]})}function z5t(t,e,n,r,i){return Za(this,null,function*(){const s=yield t.getBytes(n,r);if(i.etag&&i.etag!==s.etag)throw new Tb(s.etag);const o=yield e(s.data,i.internalCompression),a=g8e(o);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var j5t=class{constructor(t=100,e=!0,n=m8e){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(t,e){return Za(this,null,function*(){const n=t.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((i,s)=>{B5t(t,this.decompress,this.prefetch,e).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),i(o[0]),this.prune()}).catch(o=>{s(o)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(t,e,n,r){return Za(this,null,function*(){const i=t.getKey()+"|"+(r.etag||"")+"|"+e+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{z5t(t,this.decompress,e,n,r).then(l=>{o(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(t,e,n,r){return Za(this,null,function*(){const i=t.getKey()+"|"+(r.etag||"")+"|"+e+"|"+n;if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((o,a)=>{t.getBytes(e,n).then(l=>{if(r.etag&&r.etag!==l.etag)throw new Tb(l.etag);o(l.data),this.cache.has(i),this.prune()}).catch(l=>{a(l)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,e;this.cache.forEach((n,r)=>{n.lastUsed<t&&(t=n.lastUsed,e=r)}),e&&this.cache.delete(e)}}invalidate(t,e){return Za(this,null,function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)})}},V7=class{constructor(t,e,n){typeof t=="string"?this.source=new $5t(t):this.source=t,n?this.decompress=n:this.decompress=m8e,e?this.cache=e:this.cache=new j5t}getHeader(){return Za(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,e,n,r){return Za(this,null,function*(){const i=O5t(t,e,n),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return p8e.getZxy(s,this.source,this.cache,t,e,n,r);if(t<s.minZoom||t>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,o,a,s),d=I5t(u,i);if(d)if(d.runLength>0){const c=yield this.source.getBytes(s.tileDataOffset+d.offset,d.length,r);if(s.etag&&s.etag!==c.etag)throw new Tb(c.etag);return{data:yield this.decompress(c.data,s.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else o=s.leafDirectoryOffset+d.offset,a=d.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(t,e,n,r){return Za(this,null,function*(){try{return yield this.getZxyAttempt(t,e,n,r)}catch(i){if(i instanceof Tb)return this.cache.invalidate(this.source,i.message),yield this.getZxyAttempt(t,e,n,r);throw i}})}getMetadataAttempt(){return Za(this,null,function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new Tb(e.etag);const n=yield this.decompress(e.data,t.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return Za(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof Tb)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}})}};class U5t extends eke{constructor(e){super(Ll.ERROR),this.error=e}}class ss{constructor(e){this.name=e}toString(){return this.name}}ss.GeoTIFF=new ss("GeoTIFF");ss.ImageStatic=new ss("ImageStatic");ss.PMTilesRaster=new ss("PMTilesRaster");ss.PMTilesVector=new ss("PMTilesVector");ss.TileJSON=new ss("TileJSON");ss.TileWMS=new ss("TileWMS");ss.WMTS=new ss("WMTS");ss.XYZ=new ss("XYZ");var sk={exports:{}},q5t=sk.exports,iCe;function H5t(){return iCe||(iCe=1,function(t,e){(function(n,r){t.exports=r()})(q5t,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(c,f){return c.indexOf(f)===-1?c.length:c.indexOf(f)}function i(c){var f=c.replace(/^v/,"").replace(/\+.*$/,""),h=r(f,"-"),p=f.substring(0,h).split(".");return p.push(f.substring(h+1)),p}function s(c){return isNaN(Number(c))?c:Number(c)}function o(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function a(c,f){[c,f].forEach(o);for(var h=i(c),p=i(f),g=0;g<Math.max(h.length-1,p.length-1);g++){var b=parseInt(h[g]||0,10),y=parseInt(p[g]||0,10);if(b>y)return 1;if(y>b)return-1}var v=h[h.length-1],w=p[p.length-1];if(v&&w){var E=v.split(".").map(s),S=w.split(".").map(s);for(g=0;g<Math.max(E.length,S.length);g++){if(E[g]===void 0||typeof S[g]=="string"&&typeof E[g]=="number")return-1;if(S[g]===void 0||typeof E[g]=="string"&&typeof S[g]=="number"||E[g]>S[g])return 1;if(S[g]>E[g])return-1}}else if(v||w)return v?-1:1;return 0}var l=[">",">=","=","<","<="],u={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function d(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(l.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(c){return typeof c=="string"&&n.test(c)},a.compare=function(c,f,h){d(h);var p=a(c,f);return u[h].indexOf(p)>-1},a})}(sk)),sk.exports}var _5,sCe;function G5t(){if(sCe)return _5;sCe=1;var t=H5t();const e="1.0.0",n=!0,r={classification:"https://stac-extensions.github.io/classification/v1.1.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.1.0/schema.json",eo:"https://stac-extensions.github.io/eo/v1.0.0/schema.json",file:"https://stac-extensions.github.io/file/v1.0.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.1.0/schema.json",projection:"https://stac-extensions.github.io/projection/v1.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v1.1.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.0.0/schema.json",version:"https://stac-extensions.github.io/version/v1.0.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},i={itemAndCollection:{"cube:":r.datacube,"eo:":r.eo,"file:":r.file,"label:":r.label,"pc:":r.pointcloud,"processing:":r.processing,"proj:":r.projection,"raster:":r.raster,"sar:":r.sar,"sat:":r.sat,"sci:":r.scientific,"view:":r.view,version:r.version,deprecated:r.version,published:r.timestamps,expires:r.timestamps,unpublished:r.timestamps},catalog:{},collection:{item_assets:r["item-assets"]},item:{}};i.collection=Object.assign(i.collection,i.itemAndCollection),i.item=Object.assign(i.item,i.itemAndCollection);var s={parseUrl(y){let v=y.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(v)return{id:v[1],version:v[2]}}},o={version:e,extensions:{},set(y){if(typeof y.stac_version!="string"?o.version="0.6.0":o.version=y.stac_version,Array.isArray(y.stac_extensions))for(let v of y.stac_extensions){let w=s.parseUrl(v);w&&(o.extensions[w.id]=w.version)}},before(y,v=null){let w=v?o.extensions[v]:o.version;return typeof w>"u"?!1:t.compare(w,y,"<")}},a={type(y){let v=typeof y;if(v==="object"){if(y===null)return"null";if(Array.isArray(y))return"array"}return v},is(y,v){return a.type(y)===v},isDefined(y){return typeof y<"u"},isObject(y){return typeof y=="object"&&y===Object(y)&&!Array.isArray(y)},rename(y,v,w){return typeof y[v]<"u"&&typeof y[w]>"u"?(y[w]=y[v],delete y[v],!0):!1},forAll(y,v,w){if(y[v]&&typeof y[v]=="object")for(let E in y[v])w(y[v][E])},toArray(y,v){return typeof y[v]<"u"&&!Array.isArray(y[v])?(y[v]=[y[v]],!0):!1},flattenArray(y,v,w,E=!1){if(Array.isArray(y[v])){for(let S in y[v])if(typeof w[S]=="string"){let T=y[v][S];y[w[S]]=E?[T]:T}return delete y[v],!0}return!1},flattenOneElementArray(y,v,w=!1){return!w&&Array.isArray(y[v])?y[v].length===1?(y[v]=y[v][0],!0):!1:!0},removeFromArray(y,v,w){if(Array.isArray(y[v])){let E=y[v].indexOf(w);return E>-1&&y[v].splice(E,1),!0}return!1},ensure(y,v,w){return a.type(w)!==a.type(y[v])&&(y[v]=w),!0},upgradeExtension(y,v){let{id:w,version:E}=s.parseUrl(v),S=y.stac_extensions.findIndex(T=>{let D=s.parseUrl(T);return D&&D.id===w&&t.compare(D.version,E,"<")});return S!==-1?(y.stac_extensions[S]=v,!0):!1},addExtension(y,v){let{id:w,version:E}=s.parseUrl(v),S=y.stac_extensions.findIndex(T=>{if(T===v)return!0;let D=s.parseUrl(T);return!!(D&&D.id===w&&t.compare(D.version,E,"<"))});return S===-1?y.stac_extensions.push(v):y.stac_extensions[S]=v,y.stac_extensions.sort(),!0},removeExtension(y,v){return a.removeFromArray(y,"stac_extensions",v)},migrateExtensionShortnames(y){let v=Object.keys(r),w=Object.values(r);return a.mapValues(y,"stac_extensions",v,w)},populateExtensions(y,v){let w=[];(v=="catalog"||v=="collection")&&w.push(y),(v=="item"||v=="collection")&&a.isObject(y.assets)&&(w=w.concat(Object.values(y.assets))),v=="collection"&&a.isObject(y.item_assets)&&(w=w.concat(Object.values(y.item_assets))),v=="collection"&&a.isObject(y.summaries)&&w.push(y.summaries),v=="item"&&a.isObject(y.properties)&&w.push(y.properties);for(let E of w)Object.keys(E).forEach(S=>{let T=S.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(T)){let D=i[v][T[0]];a.is(D,"string")&&a.addExtension(y,D)}})},mapValues(y,v,w,E){let S=T=>{let D=w.indexOf(T);return D>=0?E[D]:T};return Array.isArray(y[v])?y[v]=y[v].map(S):typeof y[v]<"u"&&(y[v]=S(y[v])),!0},mapObject(y,v){for(let w in y)y[w]=v(y[w],w)},moveTo(y,v,w,E=!1,S=!1){let T;return E?S?T=D=>Array.isArray(D):T=D=>Array.isArray(D)&&D.length===1:T=a.isDefined,T(y[v])?(w[v]=E&&!S?y[v][0]:y[v],delete y[v],!0):!1},runAll(y,v,w,E){for(let S in y)S.startsWith("migrate")||y[S](v,w,E)},toUTC(y,v){if(typeof y[v]=="string")try{return y[v]=this.toISOString(y[v]),!0}catch{}return delete y[v],!1},toISOString(y){return y instanceof Date||(y=new Date(y)),y.toISOString().replace(".000","")}},l={multihash:null,hexToUint8(y){if(y.length===0||y.length%2!==0)throw new Error(`The string "${y}" is not valid hex.`);return new Uint8Array(y.match(/.{1,2}/g).map(v=>parseInt(v,16)))},uint8ToHex(y){return y.reduce((v,w)=>v+w.toString(16).padStart(2,"0"),"")},toMultihash(y,v,w){if(!l.multihash||!a.is(y[v],"string"))return!1;try{const E=l.multihash.encode(l.hexToUint8(y[v]),w);return y[v]=l.uint8ToHex(E),!0}catch(E){return console.warn(E),!1}}},u={migrate(y,v=!0){return o.set(y),v&&(y.stac_version=e),y.type="Catalog",a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"description",""),a.ensure(y,"links",[]),a.runAll(u,y,y),o.before("0.8.0")&&a.populateExtensions(y,"catalog"),y}},d={migrate(y,v=!0){return u.migrate(y,v),y.type="Collection",o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"license","proprietary"),a.ensure(y,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),a.runAll(d,y,y),a.isObject(y.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),delete y.properties),o.before("0.8.0")&&a.populateExtensions(y,"collection"),o.before("1.0.0-beta.1")&&a.mapValues(y,"stac_extensions",["assets"],["item-assets"]),y},extent(y){if(a.ensure(y,"extent",{}),o.before("0.8.0")&&(Array.isArray(y.extent.spatial)&&(y.extent.spatial={bbox:[y.extent.spatial]}),Array.isArray(y.extent.temporal)&&(y.extent.temporal={interval:[y.extent.temporal]})),a.ensure(y.extent,"spatial",{}),a.ensure(y.extent.spatial,"bbox",[]),a.ensure(y.extent,"temporal",{}),a.ensure(y.extent.temporal,"interval",[]),o.before("1.0.0-rc.3")){if(y.extent.temporal.interval.length>1){let v,w;for(let E of y.extent.temporal.interval){if(E[0]===null)v=null;else if(typeof E[0]=="string"&&v!==null)try{let S=new Date(E[0]);(typeof v>"u"||S<v)&&(v=S)}catch{}if(E[1]===null)w=null;else if(typeof E[1]=="string"&&w!==null)try{let S=new Date(E[1]);(typeof w>"u"||S>w)&&(w=S)}catch{}}y.extent.temporal.interval.unshift([v?a.toISOString(v):null,w?a.toISOString(w):null])}if(y.extent.spatial.bbox.length>1){let v=y.extent.spatial.bbox.reduce((w,E)=>Array.isArray(E)?Math.max(E.length,w):w,4);if(v>=4){let w=new Array(v).fill(null),E=v/2;for(let S of y.extent.spatial.bbox){if(!Array.isArray(S)||S.length<4)break;for(let T in S){let D=S[T];w[T]===null?w[T]=D:T<E?w[T]=Math.min(D,w[T]):w[T]=Math.max(D,w[T])}}w.findIndex(S=>S===null)===-1&&y.extent.spatial.bbox.unshift(w)}}}},collectionAssets(y){o.before("1.0.0-rc.1")&&a.removeExtension(y,"collection-assets"),p.migrateAll(y)},itemAsset(y){o.before("1.0.0-beta.2")&&a.rename(y,"item_assets","assets"),p.migrateAll(y,"item_assets")},summaries(y){if(a.ensure(y,"summaries",{}),o.before("0.8.0")&&a.isObject(y.other_properties)){for(let v in y.other_properties){let w=y.other_properties[v];Array.isArray(w.extent)&&w.extent.length===2?y.summaries[v]={minimum:w.extent[0],maximum:w.extent[1]}:Array.isArray(w.values)&&(w.values.filter(E=>Array.isArray(E)).length===w.values.length?y.summaries[v]=w.values.reduce((E,S)=>E.concat(S),[]):y.summaries[v]=w.values)}delete y.other_properties}if(o.before("1.0.0-beta.1")&&a.isObject(y.properties)&&!y.links.find(v=>["child","item"].includes(v.rel)))for(let v in y.properties){let w=y.properties[v];Array.isArray(w)||(w=[w]),y.summaries[v]=w}o.before("1.0.0-rc.1")&&a.mapObject(y.summaries,v=>(a.rename(v,"min","minimum"),a.rename(v,"max","maximum"),v)),g.migrate(y.summaries,y,!0),a.moveTo(y.summaries,"sci:doi",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:publications",y,!0,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"sci:citation",y,!0)&&a.addExtension(y,r.scientific),a.moveTo(y.summaries,"cube:dimensions",y,!0)&&a.addExtension(y,r.datacube),Object.keys(y.summaries).length===0&&delete y.summaries}},c={migrate(y,v=null,w=!0){o.set(y),w&&(y.stac_version=e),a.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&a.migrateExtensionShortnames(y),a.ensure(y,"id",""),a.ensure(y,"type","Feature"),a.isObject(y.geometry)||(y.geometry=null),y.geometry!==null&&a.ensure(y,"bbox",[]),a.ensure(y,"properties",{}),a.ensure(y,"links",[]),a.ensure(y,"assets",{});let E=!1;return a.isObject(v)&&a.isObject(v.properties)&&(a.removeFromArray(y,"stac_extensions","commons"),y.properties=Object.assign({},v.properties,y.properties),E=!0),a.runAll(c,y,y),g.migrate(y.properties,y),p.migrateAll(y),(o.before("0.8.0")||E)&&a.populateExtensions(y,"item"),y}},f={migrate(y,v=!0){return a.ensure(y,"collections",[]),a.ensure(y,"links",[]),a.runAll(f,y,y),y.collections=y.collections.map(w=>d.migrate(w,v)),y}},h={migrate(y,v=!0){return a.ensure(y,"type","FeatureCollection"),a.ensure(y,"features",[]),a.ensure(y,"links",[]),a.runAll(h,y,y),y.features=y.features.map(w=>c.migrate(w,null,v)),y}},p={migrateAll(y,v="assets"){for(let w in y[v])p.migrate(y[v][w],y)},migrate(y,v){return a.runAll(p,y,v),g.migrate(y,v),y},mediaTypes(y){a.is(y.type,"string")&&a.mapValues(y,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])},eo(y,v){let w=a.isObject(v.properties)&&Array.isArray(v.properties["eo:bands"])?v.properties["eo:bands"]:[];if(Array.isArray(y["eo:bands"]))for(let E in y["eo:bands"]){let S=y["eo:bands"][E];a.is(S,"number")&&a.isObject(w[S])?S=w[S]:a.isObject(S)||(S={}),y["eo:bands"][E]=S}}},g={migrate(y,v,w=!1){return a.runAll(g,y,v,w),y},_commonMetadata(y){o.before("1.0.0-rc.3")&&(a.toUTC(y,"created"),a.toUTC(y,"updated"))},_timestamps(y,v){a.toUTC(y,"published"),a.toUTC(y,"expires"),a.toUTC(y,"unpublished"),a.upgradeExtension(v,r.timestamps)},_versioningIndicator(y,v){a.upgradeExtension(v,r.version)},checksum(y,v){o.before("0.9.0")&&l.multihash&&(a.rename(y,"checksum:md5","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","md5"),a.rename(y,"checksum:sha1","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha1"),a.rename(y,"checksum:sha2","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha2-256"),a.rename(y,"checksum:sha3","checksum:multihash")&&l.toMultihash(y,"checksum:multihash","sha3-256")),o.before("1.0.0-rc.1")&&a.rename(y,"checksum:multihash","file:checksum")&&a.addExtension(v,r.file),a.removeExtension(v,"checksum")},classification(y,v){o.before("1.1.0","classification")&&a.forAll(y,"classification:classes",w=>a.rename(w,"color-hint","color_hint")),a.upgradeExtension(v,r.classification)},cube(y,v){a.upgradeExtension(v,r.datacube)},dtr(y,v){o.before("0.9.0")&&(a.rename(y,"dtr:start_datetime","start_datetime"),a.rename(y,"dtr:end_datetime","end_datetime"),a.removeExtension(v,"datetime-range"))},eo(y,v){o.before("0.9.0")&&(a.rename(y,"eo:epsg","proj:epsg")&&a.addExtension(v,r.projection),a.rename(y,"eo:platform","platform"),a.rename(y,"eo:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"eo:constellation","constellation"),a.rename(y,"eo:off_nadir","view:off_nadir")&&a.addExtension(v,r.view),a.rename(y,"eo:azimuth","view:azimuth")&&a.addExtension(v,r.view),a.rename(y,"eo:incidence_angle","view:incidence_angle")&&a.addExtension(v,r.view),a.rename(y,"eo:sun_azimuth","view:sun_azimuth")&&a.addExtension(v,r.view),a.rename(y,"eo:sun_elevation","view:sun_elevation")&&a.addExtension(v,r.view)),o.before("1.0.0-beta.1")&&a.rename(y,"eo:gsd","gsd"),a.upgradeExtension(v,r.eo)},file(y,v){a.upgradeExtension(v,r.file)},label(y,v){o.before("0.8.0")&&(a.rename(y,"label:property","label:properties"),a.rename(y,"label:task","label:tasks"),a.rename(y,"label:overview","label:overviews")&&a.toArray(y,"label:overviews"),a.rename(y,"label:method","label:methods"),a.toArray(y,"label:classes")),a.upgradeExtension(v,r.label)},pc(y,v){o.before("0.8.0")&&a.rename(y,"pc:schema","pc:schemas"),a.upgradeExtension(v,r.pointcloud)},processing(y,v){a.upgradeExtension(v,r.processing)},proj(y,v){a.upgradeExtension(v,r.projection)},raster(y,v){a.upgradeExtension(v,r.raster)},sar(y,v,w){a.rename(y,"sar:incidence_angle","view:incidence_angle")&&a.addExtension(v,r.view),a.rename(y,"sar:pass_direction","sat:orbit_state")&&a.mapValues(y,"sat:orbit_state",[null],["geostationary"])&&a.addExtension(v,r.sat),o.before("0.7.0")&&(a.flattenArray(y,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],w),a.flattenArray(y,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],w),a.flattenArray(y,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],w),a.rename(y,"sar:off_nadir","view:off_nadir")&&a.addExtension(v,r.view)),o.before("0.9.0")&&(a.rename(y,"sar:platform","platform"),a.rename(y,"sar:instrument","instruments")&&a.toArray(y,"instruments"),a.rename(y,"sar:constellation","constellation"),a.rename(y,"sar:type","sar:product_type"),a.rename(y,"sar:polarization","sar:polarizations"),a.flattenOneElementArray(y,"sar:absolute_orbit",w)&&a.rename(y,"sar:absolute_orbit","sat:absolute_orbit")&&a.addExtension(v,r.sat),a.flattenOneElementArray(y,"sar:relative_orbit",w)&&a.rename(y,"sar:relative_orbit","sat:relative_orbit")&&a.addExtension(v,r.sat)),a.upgradeExtension(v,r.sar)},sat(y,v){o.before("0.9.0")&&(a.rename(y,"sat:off_nadir_angle","sat:off_nadir"),a.rename(y,"sat:azimuth_angle","sat:azimuth"),a.rename(y,"sat:sun_azimuth_angle","sat:sun_azimuth"),a.rename(y,"sat:sun_elevation_angle","sat:sun_elevation")),a.upgradeExtension(v,r.sat)},sci(y,v){a.upgradeExtension(v,r.scientific)},item(y){o.before("0.8.0")&&(a.rename(y,"item:license","license"),a.rename(y,"item:providers","providers"))},table(y,v){a.upgradeExtension(v,r.table)},view(y,v){a.upgradeExtension(v,r.view)}},b={item(y,v=null,w=!0){return c.migrate(y,v,w)},catalog(y,v=!0){return u.migrate(y,v)},collection(y,v=!0){return d.migrate(y,v)},collectionCollection(y,v=!0){return f.migrate(y,v)},itemCollection(y,v=!0){return h.migrate(y,v)},stac(y,v=!0){return y.type==="Feature"?b.item(y,null,v):y.type==="FeatureCollection"?b.itemCollection(y,v):y.type==="Collection"||!y.type&&a.isDefined(y.extent)&&a.isDefined(y.license)?b.collection(y,v):!y.type&&Array.isArray(y.collections)?b.collectionCollection(y,v):b.catalog(y,v)},enableMultihash(y){l.multihash=y}};return _5=b,_5}var V5t=G5t();const W5t=aa(V5t);function D1(t){let e=t.length>=6,n=t[0],r=t[e?3:2],i=t[1],s=t[e?4:3],o={west:n,east:r,south:i,north:s};return e&&(o.base=t[2],o.height=t[5]),o}function E5(t){let{west:e,east:n,south:r,north:i}=D1(t);return[[[e,i],[e,r],[n,r],[n,i],[e,i]]]}function Y5t(t){if(!Fc(t))return null;let e=D1(t),n=[];if(b8e(t)){let r=(e.west+360+e.east)/2;r>180&&(r-=360),n.push(r)}else n.push((e.west+e.east)/2);return n.push((e.south+e.north)/2),typeof e.base<"u"&&n.push((e.base+e.height)/2),n}function y8e(t){if(Fc(t)?t=[t]:Array.isArray(t)&&(t=t.filter(r=>Fc(r))),!Array.isArray(t)||t.length===0)return null;let e=t.reduce((r,i)=>{if(b8e(i)){let{west:s,east:o,south:a,north:l}=D1(i);r.push(E5([-180,a,o,l])),r.push(E5([s,a,180,l]))}else r.push(E5(i));return r},[]),n=null;if(e.length===1?n={type:"Polygon",coordinates:e[0]}:e.length>1&&(n={type:"MultiPolygon",coordinates:e}),n)return{type:"Feature",geometry:n,properties:{}}}function Fc(t){if(!Array.isArray(t)||![4,6].includes(t.length)||t.some(s=>typeof s!="number"))return!1;let{west:e,east:n,south:r,north:i}=D1(t);return r<=i&&e>=-180&&e<=180&&r>=-90&&n<=180&&n>=-180&&i<=90}function b8e(t){if(!Fc(t))return!1;let{west:e,east:n}=D1(t);return e>n}function v8e(t){if(!Array.isArray(t)||t.length===0)return null;let e={west:180,south:90,east:-180,north:-90};t.forEach(r=>{if(!Fc(r))return;let i=D1(r),s=["west","south"];for(let o in i){let a=s.includes(o)?Math.min:Math.max;e[o]=a(e[o],i[o])}});let n=[e.west,e.south,e.east,e.north];return Fc(n)?n:null}function Dl(t){return typeof t=="string"&&t.length>0}function El(t){return typeof t=="object"&&t===Object(t)&&!Array.isArray(t)}function x8e(...t){if(t=t.filter(e=>Array.isArray(e)),t.length>1){let e=Math.max(...t.map(r=>r.length)),n=[];for(let r=0;r<e;r++)n.push(Object.assign({},...t.map(i=>i[r])));return n}else if(t.length===1)return t[0];return[]}function X5t(t){switch(t){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return t.startsWith("u")?0:null}function Z5t(t){switch(t){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}class BR{constructor(e,n={},r=[]){if(!El(e))throw new Error("Given data is not an object");if(e instanceof BR){for(let i of r)this[i]=e[i];e=e.toJSON()}this._keyMap=n,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in e)typeof this[i]>"u"&&(i in n?this[i]=n[i](e[i],this):this[i]=e[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return Y5t(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(n=>{if(typeof this[n]=="function"||this._privateKeys.includes(n))return;let r=this[n];if(n in this._keyMap){let i=Array.isArray(r)?[]:{};for(let s in r)i[s]=r[s].toJSON();r=i}e[n]=r}),e}}var ok={exports:{}},b_={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var K5t=b_.exports,oCe;function J5t(){return oCe||(oCe=1,function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof Zi=="object"&&Zi;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,u=1,d=26,c=38,f=700,h=72,p=128,g="-",b=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-u,S=Math.floor,T=String.fromCharCode,D;function k(te){throw new RangeError(w[te])}function R(te,le){for(var ee=te.length,z=[];ee--;)z[ee]=le(te[ee]);return z}function O(te,le){var ee=te.split("@"),z="";ee.length>1&&(z=ee[0]+"@",te=ee[1]),te=te.replace(v,".");var he=te.split("."),fe=R(he,le).join(".");return z+fe}function B(te){for(var le=[],ee=0,z=te.length,he,fe;ee<z;)he=te.charCodeAt(ee++),he>=55296&&he<=56319&&ee<z?(fe=te.charCodeAt(ee++),(fe&64512)==56320?le.push(((he&1023)<<10)+(fe&1023)+65536):(le.push(he),ee--)):le.push(he);return le}function K(te){return R(te,function(le){var ee="";return le>65535&&(le-=65536,ee+=T(le>>>10&1023|55296),le=56320|le&1023),ee+=T(le),ee}).join("")}function L(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:l}function I(te,le){return te+22+75*(te<26)-((le!=0)<<5)}function $(te,le,ee){var z=0;for(te=ee?S(te/f):te>>1,te+=S(te/le);te>E*d>>1;z+=l)te=S(te/E);return S(z+(E+1)*te/(te+c))}function U(te){var le=[],ee=te.length,z,he=0,fe=p,ze=h,He,je,we,$e,qe,Pe,St,ht,nn;for(He=te.lastIndexOf(g),He<0&&(He=0),je=0;je<He;++je)te.charCodeAt(je)>=128&&k("not-basic"),le.push(te.charCodeAt(je));for(we=He>0?He+1:0;we<ee;){for($e=he,qe=1,Pe=l;we>=ee&&k("invalid-input"),St=L(te.charCodeAt(we++)),(St>=l||St>S((a-he)/qe))&&k("overflow"),he+=St*qe,ht=Pe<=ze?u:Pe>=ze+d?d:Pe-ze,!(St<ht);Pe+=l)nn=l-ht,qe>S(a/nn)&&k("overflow"),qe*=nn;z=le.length+1,ze=$(he-$e,z,$e==0),S(he/z)>a-fe&&k("overflow"),fe+=S(he/z),he%=z,le.splice(he++,0,fe)}return K(le)}function q(te){var le,ee,z,he,fe,ze,He,je,we,$e,qe,Pe=[],St,ht,nn,Vt;for(te=B(te),St=te.length,le=p,ee=0,fe=h,ze=0;ze<St;++ze)qe=te[ze],qe<128&&Pe.push(T(qe));for(z=he=Pe.length,he&&Pe.push(g);z<St;){for(He=a,ze=0;ze<St;++ze)qe=te[ze],qe>=le&&qe<He&&(He=qe);for(ht=z+1,He-le>S((a-ee)/ht)&&k("overflow"),ee+=(He-le)*ht,le=He,ze=0;ze<St;++ze)if(qe=te[ze],qe<le&&++ee>a&&k("overflow"),qe==le){for(je=ee,we=l;$e=we<=fe?u:we>=fe+d?d:we-fe,!(je<$e);we+=l)Vt=je-$e,nn=l-$e,Pe.push(T(I($e+Vt%nn,0))),je=S(Vt/nn);Pe.push(T(I(je,0))),fe=$(ee,ht,z==he),ee=0,++z}++ee,++le}return Pe.join("")}function Y(te){return O(te,function(le){return b.test(le)?U(le.slice(4).toLowerCase()):le})}function X(te){return O(te,function(le){return y.test(le)?"xn--"+q(le):le})}if(o={version:"1.3.2",ucs2:{decode:B,encode:K},decode:U,encode:q,toASCII:X,toUnicode:Y},r&&i)if(t.exports==r)i.exports=o;else for(D in o)o.hasOwnProperty(D)&&(r[D]=o[D]);else n.punycode=o})(K5t)}(b_,b_.exports)),b_.exports}var ak={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var Q5t=ak.exports,aCe;function e4t(){return aCe||(aCe=1,function(t){(function(e,n){t.exports?t.exports=n():e.IPv6=n(e)})(Q5t,function(e){var n=e&&e.IPv6;function r(s){var o=s.toLowerCase(),a=o.split(":"),l=a.length,u=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(u=7);var d;for(d=0;d<l&&a[d]!=="";d++);if(d<u)for(a.splice(d,1,"0000");a.length<u;)a.splice(d,0,"0000");for(var c,f=0;f<u;f++){c=a[f].split("");for(var h=0;h<3&&(c[0]==="0"&&c.length>1);h++)c.splice(0,1);a[f]=c.join("")}var p=-1,g=0,b=0,y=-1,v=!1;for(f=0;f<u;f++)v?a[f]==="0"?b+=1:(v=!1,b>g&&(p=y,g=b)):a[f]==="0"&&(v=!0,y=f,b=1);b>g&&(p=y,g=b),g>1&&a.splice(p,g,""),l=a.length;var w="";for(a[0]===""&&(w=":"),f=0;f<l&&(w+=a[f],f!==l-1);f++)w+=":";return a[l-1]===""&&(w+=":"),w}function i(){return e.IPv6===this&&(e.IPv6=n),this}return{best:r,noConflict:i}})}(ak)),ak.exports}var lk={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var t4t=lk.exports,lCe;function n4t(){return lCe||(lCe=1,function(t){(function(e,n){t.exports?t.exports=n():e.SecondLevelDomains=n(e)})(t4t,function(e){var n=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(o+1,s)+" ")>=0:!1},is:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return!1;var o=i.lastIndexOf(".",s-1);if(o>=0)return!1;var a=r.list[i.slice(s+1)];return a?a.indexOf(" "+i.slice(0,s)+" ")>=0:!1},get:function(i){var s=i.lastIndexOf(".");if(s<=0||s>=i.length-1)return null;var o=i.lastIndexOf(".",s-1);if(o<=0||o>=s-1)return null;var a=r.list[i.slice(s+1)];return!a||a.indexOf(" "+i.slice(o+1,s)+" ")<0?null:i.slice(o+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=n),this}};return r})}(lk)),lk.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var r4t=ok.exports,uCe;function i4t(){return uCe||(uCe=1,function(t){(function(e,n){t.exports?t.exports=n(J5t(),e4t(),n4t()):e.URI=n(e.punycode,e.IPv6,e.SecondLevelDomains,e)})(r4t,function(e,n,r,i){var s=i&&i.URI;function o(L,I){var $=arguments.length>=1,U=arguments.length>=2;if(!(this instanceof o))return $?U?new o(L,I):new o(L):new o;if(L===void 0){if($)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?L=location.href+"":L=""}if(L===null&&$)throw new TypeError("null is not a valid argument for URI");return this.href(L),I!==void 0?this.absoluteTo(I):this}function a(L){return/^[0-9]+$/.test(L)}o.version="1.19.11";var l=o.prototype,u=Object.prototype.hasOwnProperty;function d(L){return L.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(L){return L===void 0?"Undefined":String(Object.prototype.toString.call(L)).slice(8,-1)}function f(L){return c(L)==="Array"}function h(L,I){var $={},U,q;if(c(I)==="RegExp")$=null;else if(f(I))for(U=0,q=I.length;U<q;U++)$[I[U]]=!0;else $[I]=!0;for(U=0,q=L.length;U<q;U++){var Y=$&&$[L[U]]!==void 0||!$&&I.test(L[U]);Y&&(L.splice(U,1),q--,U--)}return L}function p(L,I){var $,U;if(f(I)){for($=0,U=I.length;$<U;$++)if(!p(L,I[$]))return!1;return!0}var q=c(I);for($=0,U=L.length;$<U;$++)if(q==="RegExp"){if(typeof L[$]=="string"&&L[$].match(I))return!0}else if(L[$]===I)return!0;return!1}function g(L,I){if(!f(L)||!f(I)||L.length!==I.length)return!1;L.sort(),I.sort();for(var $=0,U=L.length;$<U;$++)if(L[$]!==I[$])return!1;return!0}function b(L){var I=/^\/+|\/+$/g;return L.replace(I,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(L){if(!(!L||!L.nodeName)){var I=L.nodeName.toLowerCase();if(!(I==="input"&&L.type!=="image"))return o.domAttributes[I]}};function y(L){return escape(L)}function v(L){return encodeURIComponent(L).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}o.encode=v,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=v,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(L,I){var $=o.encode(L+"");return I===void 0&&(I=o.escapeQuerySpace),I?$.replace(/%20/g,"+"):$},o.decodeQuery=function(L,I){L+="",I===void 0&&(I=o.escapeQuerySpace);try{return o.decode(I?L.replace(/\+/g,"%20"):L)}catch{return L}};var w={encode:"encode",decode:"decode"},E,S=function(L,I){return function($){try{return o[I]($+"").replace(o.characters[L][I].expression,function(U){return o.characters[L][I].map[U]})}catch{return $}}};for(E in w)o[E+"PathSegment"]=S("pathname",w[E]),o[E+"UrnPathSegment"]=S("urnpath",w[E]);var T=function(L,I,$){return function(U){var q;$?q=function(le){return o[I](o[$](le))}:q=o[I];for(var Y=(U+"").split(L),X=0,te=Y.length;X<te;X++)Y[X]=q(Y[X]);return Y.join(L)}};o.decodePath=T("/","decodePathSegment"),o.decodeUrnPath=T(":","decodeUrnPathSegment"),o.recodePath=T("/","encodePathSegment","decode"),o.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),o.encodeReserved=S("reserved","encode"),o.parse=function(L,I){var $;return I||(I={preventInvalidHostname:o.preventInvalidHostname}),L=L.replace(o.leading_whitespace_expression,""),L=L.replace(o.ascii_tab_whitespace,""),$=L.indexOf("#"),$>-1&&(I.fragment=L.substring($+1)||null,L=L.substring(0,$)),$=L.indexOf("?"),$>-1&&(I.query=L.substring($+1)||null,L=L.substring(0,$)),L=L.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),L=L.replace(/^[/\\]{2,}/i,"//"),L.substring(0,2)==="//"?(I.protocol=null,L=L.substring(2),L=o.parseAuthority(L,I)):($=L.indexOf(":"),$>-1&&(I.protocol=L.substring(0,$)||null,I.protocol&&!I.protocol.match(o.protocol_expression)?I.protocol=void 0:L.substring($+1,$+3).replace(/\\/g,"/")==="//"?(L=L.substring($+3),L=o.parseAuthority(L,I)):(L=L.substring($+1),I.urn=!0))),I.path=L,I},o.parseHost=function(L,I){L||(L=""),L=L.replace(/\\/g,"/");var $=L.indexOf("/"),U,q;if($===-1&&($=L.length),L.charAt(0)==="[")U=L.indexOf("]"),I.hostname=L.substring(1,U)||null,I.port=L.substring(U+2,$)||null,I.port==="/"&&(I.port=null);else{var Y=L.indexOf(":"),X=L.indexOf("/"),te=L.indexOf(":",Y+1);te!==-1&&(X===-1||te<X)?(I.hostname=L.substring(0,$)||null,I.port=null):(q=L.substring(0,$).split(":"),I.hostname=q[0]||null,I.port=q[1]||null)}return I.hostname&&L.substring($).charAt(0)!=="/"&&($++,L="/"+L),I.preventInvalidHostname&&o.ensureValidHostname(I.hostname,I.protocol),I.port&&o.ensureValidPort(I.port),L.substring($)||"/"},o.parseAuthority=function(L,I){return L=o.parseUserinfo(L,I),o.parseHost(L,I)},o.parseUserinfo=function(L,I){var $=L,U=L.indexOf("\\");U!==-1&&(L=L.replace(/\\/g,"/"));var q=L.indexOf("/"),Y=L.lastIndexOf("@",q>-1?q:L.length-1),X;return Y>-1&&(q===-1||Y<q)?(X=L.substring(0,Y).split(":"),I.username=X[0]?o.decode(X[0]):null,X.shift(),I.password=X[0]?o.decode(X.join(":")):null,L=$.substring(Y+1)):(I.username=null,I.password=null),L},o.parseQuery=function(L,I){if(!L)return{};if(L=L.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!L)return{};for(var $={},U=L.split("&"),q=U.length,Y,X,te,le=0;le<q;le++)Y=U[le].split("="),X=o.decodeQuery(Y.shift(),I),te=Y.length?o.decodeQuery(Y.join("="),I):null,X!=="__proto__"&&(u.call($,X)?((typeof $[X]=="string"||$[X]===null)&&($[X]=[$[X]]),$[X].push(te)):$[X]=te);return $},o.build=function(L){var I="",$=!1;return L.protocol&&(I+=L.protocol+":"),!L.urn&&(I||L.hostname)&&(I+="//",$=!0),I+=o.buildAuthority(L)||"",typeof L.path=="string"&&(L.path.charAt(0)!=="/"&&$&&(I+="/"),I+=L.path),typeof L.query=="string"&&L.query&&(I+="?"+L.query),typeof L.fragment=="string"&&L.fragment&&(I+="#"+L.fragment),I},o.buildHost=function(L){var I="";if(L.hostname)o.ip6_expression.test(L.hostname)?I+="["+L.hostname+"]":I+=L.hostname;else return"";return L.port&&(I+=":"+L.port),I},o.buildAuthority=function(L){return o.buildUserinfo(L)+o.buildHost(L)},o.buildUserinfo=function(L){var I="";return L.username&&(I+=o.encode(L.username)),L.password&&(I+=":"+o.encode(L.password)),I&&(I+="@"),I},o.buildQuery=function(L,I,$){var U="",q,Y,X,te;for(Y in L)if(Y!=="__proto__"&&u.call(L,Y))if(f(L[Y]))for(q={},X=0,te=L[Y].length;X<te;X++)L[Y][X]!==void 0&&q[L[Y][X]+""]===void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y][X],$),I!==!0&&(q[L[Y][X]+""]=!0));else L[Y]!==void 0&&(U+="&"+o.buildQueryParameter(Y,L[Y],$));return U.substring(1)},o.buildQueryParameter=function(L,I,$){return o.encodeQuery(L,$)+(I!==null?"="+o.encodeQuery(I,$):"")},o.addQuery=function(L,I,$){if(typeof I=="object")for(var U in I)u.call(I,U)&&o.addQuery(L,U,I[U]);else if(typeof I=="string"){if(L[I]===void 0){L[I]=$;return}else typeof L[I]=="string"&&(L[I]=[L[I]]);f($)||($=[$]),L[I]=(L[I]||[]).concat($)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(L,I,$){if(typeof I=="object")for(var U in I)u.call(I,U)&&o.setQuery(L,U,I[U]);else if(typeof I=="string")L[I]=$===void 0?null:$;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(L,I,$){var U,q,Y;if(f(I))for(U=0,q=I.length;U<q;U++)L[I[U]]=void 0;else if(c(I)==="RegExp")for(Y in L)I.test(Y)&&(L[Y]=void 0);else if(typeof I=="object")for(Y in I)u.call(I,Y)&&o.removeQuery(L,Y,I[Y]);else if(typeof I=="string")$!==void 0?c($)==="RegExp"?!f(L[I])&&$.test(L[I])?L[I]=void 0:L[I]=h(L[I],$):L[I]===String($)&&(!f($)||$.length===1)?L[I]=void 0:f(L[I])&&(L[I]=h(L[I],$)):L[I]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(L,I,$,U){switch(c(I)){case"String":break;case"RegExp":for(var q in L)if(u.call(L,q)&&I.test(q)&&($===void 0||o.hasQuery(L,q,$)))return!0;return!1;case"Object":for(var Y in I)if(u.call(I,Y)&&!o.hasQuery(L,Y,I[Y]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c($)){case"Undefined":return I in L;case"Boolean":var X=!!(f(L[I])?L[I].length:L[I]);return $===X;case"Function":return!!$(L[I],I,L);case"Array":if(!f(L[I]))return!1;var te=U?p:g;return te(L[I],$);case"RegExp":return f(L[I])?U?p(L[I],$):!1:!!(L[I]&&L[I].match($));case"Number":$=String($);case"String":return f(L[I])?U?p(L[I],$):!1:L[I]===$;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var L=[],I=[],$=0,U=0;U<arguments.length;U++){var q=new o(arguments[U]);L.push(q);for(var Y=q.segment(),X=0;X<Y.length;X++)typeof Y[X]=="string"&&I.push(Y[X]),Y[X]&&$++}if(!I.length||!$)return new o("");var te=new o("").segment(I);return(L[0].path()===""||L[0].path().slice(0,1)==="/")&&te.path("/"+te.path()),te.normalize()},o.commonPath=function(L,I){var $=Math.min(L.length,I.length),U;for(U=0;U<$;U++)if(L.charAt(U)!==I.charAt(U)){U--;break}return U<1?L.charAt(0)===I.charAt(0)&&L.charAt(0)==="/"?"/":"":((L.charAt(U)!=="/"||I.charAt(U)!=="/")&&(U=L.substring(0,U).lastIndexOf("/")),L.substring(0,U+1))},o.withinString=function(L,I,$){$||($={});var U=$.start||o.findUri.start,q=$.end||o.findUri.end,Y=$.trim||o.findUri.trim,X=$.parens||o.findUri.parens,te=/[a-z0-9-]=["']?$/i;for(U.lastIndex=0;;){var le=U.exec(L);if(!le)break;var ee=le.index;if($.ignoreHtml){var z=L.slice(Math.max(ee-3,0),ee);if(z&&te.test(z))continue}for(var he=ee+L.slice(ee).search(q),fe=L.slice(ee,he),ze=-1;;){var He=X.exec(fe);if(!He)break;var je=He.index+He[0].length;ze=Math.max(ze,je)}if(ze>-1?fe=fe.slice(0,ze)+fe.slice(ze).replace(Y,""):fe=fe.replace(Y,""),!(fe.length<=le[0].length)&&!($.ignore&&$.ignore.test(fe))){he=ee+fe.length;var we=I(fe,ee,he,L);if(we===void 0){U.lastIndex=he;continue}we=String(we),L=L.slice(0,ee)+we+L.slice(he),U.lastIndex=ee+we.length}}return U.lastIndex=0,L},o.ensureValidHostname=function(L,I){var $=!!L,U=!!I,q=!1;if(U&&(q=p(o.hostProtocols,I)),q&&!$)throw new TypeError("Hostname cannot be empty, if protocol is "+I);if(L&&L.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(L).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(L){if(L){var I=Number(L);if(!(a(I)&&I>0&&I<65536))throw new TypeError('Port "'+L+'" is not a valid port')}},o.noConflict=function(L){if(L){var I={URI:this.noConflict()};return i.URITemplate&&typeof i.URITemplate.noConflict=="function"&&(I.URITemplate=i.URITemplate.noConflict()),i.IPv6&&typeof i.IPv6.noConflict=="function"&&(I.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict=="function"&&(I.SecondLevelDomains=i.SecondLevelDomains.noConflict()),I}else i.URI===this&&(i.URI=s);return this},l.build=function(L){return L===!0?this._deferred_build=!0:(L===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new o(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function D(L){return function(I,$){return I===void 0?this._parts[L]||"":(this._parts[L]=I||null,this.build(!$),this)}}function k(L,I){return function($,U){return $===void 0?this._parts[L]||"":($!==null&&($=$+"",$.charAt(0)===I&&($=$.substring(1))),this._parts[L]=$,this.build(!U),this)}}l.protocol=D("protocol"),l.username=D("username"),l.password=D("password"),l.hostname=D("hostname"),l.port=D("port"),l.query=k("query","?"),l.fragment=k("fragment","#"),l.search=function(L,I){var $=this.query(L,I);return typeof $=="string"&&$.length?"?"+$:$},l.hash=function(L,I){var $=this.fragment(L,I);return typeof $=="string"&&$.length?"#"+$:$},l.pathname=function(L,I){if(L===void 0||L===!0){var $=this._parts.path||(this._parts.hostname?"/":"");return L?(this._parts.urn?o.decodeUrnPath:o.decodePath)($):$}else return this._parts.urn?this._parts.path=L?o.recodeUrnPath(L):"":this._parts.path=L?o.recodePath(L):"/",this.build(!I),this},l.path=l.pathname,l.href=function(L,I){var $;if(L===void 0)return this.toString();this._string="",this._parts=o._parts();var U=L instanceof o,q=typeof L=="object"&&(L.hostname||L.path||L.pathname);if(L.nodeName){var Y=o.getDomAttribute(L);L=L[Y]||"",q=!1}if(!U&&q&&L.pathname!==void 0&&(L=L.toString()),typeof L=="string"||L instanceof String)this._parts=o.parse(String(L),this._parts);else if(U||q){var X=U?L._parts:L;for($ in X)$!=="query"&&u.call(this._parts,$)&&(this._parts[$]=X[$]);X.query&&this.query(X.query,!1)}else throw new TypeError("invalid input");return this.build(!I),this},l.is=function(L){var I=!1,$=!1,U=!1,q=!1,Y=!1,X=!1,te=!1,le=!this._parts.urn;switch(this._parts.hostname&&(le=!1,$=o.ip4_expression.test(this._parts.hostname),U=o.ip6_expression.test(this._parts.hostname),I=$||U,q=!I,Y=q&&r&&r.has(this._parts.hostname),X=q&&o.idn_expression.test(this._parts.hostname),te=q&&o.punycode_expression.test(this._parts.hostname)),L.toLowerCase()){case"relative":return le;case"absolute":return!le;case"domain":case"name":return q;case"sld":return Y;case"ip":return I;case"ip4":case"ipv4":case"inet4":return $;case"ip6":case"ipv6":case"inet6":return U;case"idn":return X;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return te}return null};var R=l.protocol,O=l.port,B=l.hostname;l.protocol=function(L,I){if(L&&(L=L.replace(/:(\/\/)?$/,""),!L.match(o.protocol_expression)))throw new TypeError('Protocol "'+L+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return R.call(this,L,I)},l.scheme=l.protocol,l.port=function(L,I){return this._parts.urn?L===void 0?"":this:(L!==void 0&&(L===0&&(L=null),L&&(L+="",L.charAt(0)===":"&&(L=L.substring(1)),o.ensureValidPort(L))),O.call(this,L,I))},l.hostname=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L!==void 0){var $={preventInvalidHostname:this._parts.preventInvalidHostname},U=o.parseHost(L,$);if(U!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');L=$.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(L,this._parts.protocol)}return B.call(this,L,I)},l.origin=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var $=this.protocol(),U=this.authority();return U?($?$+"://":"")+this.authority():""}else{var q=o(L);return this.protocol(q.protocol()).authority(q.authority()).build(!I),this}},l.host=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var $=o.parseHost(L,this._parts);if($!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},l.authority=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var $=o.parseAuthority(L,this._parts);if($!=="/")throw new TypeError('Hostname "'+L+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},l.userinfo=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){var $=o.buildUserinfo(this._parts);return $&&$.substring(0,$.length-1)}else return L[L.length-1]!=="@"&&(L+="@"),o.parseUserinfo(L,this._parts),this.build(!I),this},l.resource=function(L,I){var $;return L===void 0?this.path()+this.search()+this.hash():($=o.parse(L),this._parts.path=$.path,this._parts.query=$.query,this._parts.fragment=$.fragment,this.build(!I),this)},l.subdomain=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,$)||""}else{var U=this._parts.hostname.length-this.domain().length,q=this._parts.hostname.substring(0,U),Y=new RegExp("^"+d(q));if(L&&L.charAt(L.length-1)!=="."&&(L+="."),L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return L&&o.ensureValidHostname(L,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Y,L),this.build(!I),this}},l.domain=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&(I=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.match(/\./g);if($&&$.length<2)return this._parts.hostname;var U=this._parts.hostname.length-this.tld(I).length-1;return U=this._parts.hostname.lastIndexOf(".",U-1)+1,this._parts.hostname.substring(U)||""}else{if(!L)throw new TypeError("cannot set domain empty");if(L.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(L,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=L;else{var q=new RegExp(d(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(q,L)}return this.build(!I),this}},l.tld=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(typeof L=="boolean"&&(I=L,L=void 0),L===void 0){if(!this._parts.hostname||this.is("IP"))return"";var $=this._parts.hostname.lastIndexOf("."),U=this._parts.hostname.substring($+1);return I!==!0&&r&&r.list[U.toLowerCase()]&&r.get(this._parts.hostname)||U}else{var q;if(L)if(L.match(/[^a-zA-Z0-9-]/))if(r&&r.is(L))q=new RegExp(d(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L);else throw new TypeError('TLD "'+L+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");q=new RegExp(d(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(q,L)}else throw new TypeError("cannot set TLD empty");return this.build(!I),this}},l.directory=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var $=this._parts.path.length-this.filename().length-1,U=this._parts.path.substring(0,$)||(this._parts.hostname?"/":"");return L?o.decodePath(U):U}else{var q=this._parts.path.length-this.filename().length,Y=this._parts.path.substring(0,q),X=new RegExp("^"+d(Y));return this.is("relative")||(L||(L="/"),L.charAt(0)!=="/"&&(L="/"+L)),L&&L.charAt(L.length-1)!=="/"&&(L+="/"),L=o.recodePath(L),this._parts.path=this._parts.path.replace(X,L),this.build(!I),this}},l.filename=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(typeof L!="string"){if(!this._parts.path||this._parts.path==="/")return"";var $=this._parts.path.lastIndexOf("/"),U=this._parts.path.substring($+1);return L?o.decodePathSegment(U):U}else{var q=!1;L.charAt(0)==="/"&&(L=L.substring(1)),L.match(/\.?\//)&&(q=!0);var Y=new RegExp(d(this.filename())+"$");return L=o.recodePath(L),this._parts.path=this._parts.path.replace(Y,L),q?this.normalizePath(I):this.build(!I),this}},l.suffix=function(L,I){if(this._parts.urn)return L===void 0?"":this;if(L===void 0||L===!0){if(!this._parts.path||this._parts.path==="/")return"";var $=this.filename(),U=$.lastIndexOf("."),q,Y;return U===-1?"":(q=$.substring(U+1),Y=/^[a-z0-9%]+$/i.test(q)?q:"",L?o.decodePathSegment(Y):Y)}else{L.charAt(0)==="."&&(L=L.substring(1));var X=this.suffix(),te;if(X)L?te=new RegExp(d(X)+"$"):te=new RegExp(d("."+X)+"$");else{if(!L)return this;this._parts.path+="."+o.recodePath(L)}return te&&(L=o.recodePath(L),this._parts.path=this._parts.path.replace(te,L)),this.build(!I),this}},l.segment=function(L,I,$){var U=this._parts.urn?":":"/",q=this.path(),Y=q.substring(0,1)==="/",X=q.split(U);if(L!==void 0&&typeof L!="number"&&($=I,I=L,L=void 0),L!==void 0&&typeof L!="number")throw new Error('Bad segment "'+L+'", must be 0-based integer');if(Y&&X.shift(),L<0&&(L=Math.max(X.length+L,0)),I===void 0)return L===void 0?X:X[L];if(L===null||X[L]===void 0)if(f(I)){X=[];for(var te=0,le=I.length;te<le;te++)!I[te].length&&(!X.length||!X[X.length-1].length)||(X.length&&!X[X.length-1].length&&X.pop(),X.push(b(I[te])))}else(I||typeof I=="string")&&(I=b(I),X[X.length-1]===""?X[X.length-1]=I:X.push(I));else I?X[L]=b(I):X.splice(L,1);return Y&&X.unshift(""),this.path(X.join(U),$)},l.segmentCoded=function(L,I,$){var U,q,Y;if(typeof L!="number"&&($=I,I=L,L=void 0),I===void 0){if(U=this.segment(L,I,$),!f(U))U=U!==void 0?o.decode(U):void 0;else for(q=0,Y=U.length;q<Y;q++)U[q]=o.decode(U[q]);return U}if(!f(I))I=typeof I=="string"||I instanceof String?o.encode(I):I;else for(q=0,Y=I.length;q<Y;q++)I[q]=o.encode(I[q]);return this.segment(L,I,$)};var K=l.query;return l.query=function(L,I){if(L===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="function"){var $=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),U=L.call(this,$);return this._parts.query=o.buildQuery(U||$,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this}else return L!==void 0&&typeof L!="string"?(this._parts.query=o.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this):K.call(this,L,I)},l.setQuery=function(L,I,$){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof L=="string"||L instanceof String)U[L]=I!==void 0?I:null;else if(typeof L=="object")for(var q in L)u.call(L,q)&&(U[q]=L[q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=I),this.build(!$),this},l.addQuery=function(L,I,$){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(U,L,I===void 0?null:I),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=I),this.build(!$),this},l.removeQuery=function(L,I,$){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(U,L,I),this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof L!="string"&&($=I),this.build(!$),this},l.hasQuery=function(L,I,$){var U=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(U,L,I,$)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(L){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!L)),this},l.normalizeHostname=function(L){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!L)),this},l.normalizePort=function(L){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!L)),this},l.normalizePath=function(L){var I=this._parts.path;if(!I)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!L),this;if(this._parts.path==="/")return this;I=o.recodePath(I);var $,U="",q,Y;for(I.charAt(0)!=="/"&&($=!0,I="/"+I),(I.slice(-3)==="/.."||I.slice(-2)==="/.")&&(I+="/"),I=I.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),$&&(U=I.substring(1).match(/^(\.\.\/)+/)||"",U&&(U=U[0]));q=I.search(/\/\.\.(\/|$)/),q!==-1;){if(q===0){I=I.substring(3);continue}Y=I.substring(0,q).lastIndexOf("/"),Y===-1&&(Y=q),I=I.substring(0,Y)+I.substring(q+3)}return $&&this.is("relative")&&(I=U+I.substring(1)),this._parts.path=I,this.build(!L),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(L){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!L)),this},l.normalizeFragment=function(L){return this._parts.fragment||(this._parts.fragment=null,this.build(!L)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var L=o.encode,I=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=L,o.decode=I}return this},l.unicode=function(){var L=o.encode,I=o.decode;o.encode=v,o.decode=unescape;try{this.normalize()}finally{o.encode=L,o.decode=I}return this},l.readable=function(){var L=this.clone();L.username("").password("").normalize();var I="";if(L._parts.protocol&&(I+=L._parts.protocol+"://"),L._parts.hostname&&(L.is("punycode")&&e?(I+=e.toUnicode(L._parts.hostname),L._parts.port&&(I+=":"+L._parts.port)):I+=L.host()),L._parts.hostname&&L._parts.path&&L._parts.path.charAt(0)!=="/"&&(I+="/"),I+=L.path(!0),L._parts.query){for(var $="",U=0,q=L._parts.query.split("&"),Y=q.length;U<Y;U++){var X=(q[U]||"").split("=");$+="&"+o.decodeQuery(X[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),X[1]!==void 0&&($+="="+o.decodeQuery(X[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}I+="?"+$.substring(1)}return I+=o.decodeQuery(L.hash(),!0),I},l.absoluteTo=function(L){var I=this.clone(),$=["protocol","username","password","hostname","port"],U,q,Y;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L instanceof o||(L=new o(L)),I._parts.protocol||(I._parts.protocol=L._parts.protocol,this._parts.hostname))return I;for(q=0;Y=$[q];q++)I._parts[Y]=L._parts[Y];return I._parts.path?(I._parts.path.substring(-2)===".."&&(I._parts.path+="/"),I.path().charAt(0)!=="/"&&(U=L.directory(),U=U||(L.path().indexOf("/")===0?"/":""),I._parts.path=(U?U+"/":"")+I._parts.path,I.normalizePath())):(I._parts.path=L._parts.path,I._parts.query||(I._parts.query=L._parts.query)),I.build(),I},l.relativeTo=function(L){var I=this.clone().normalize(),$,U,q,Y,X;if(I._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(L=new o(L).normalize(),$=I._parts,U=L._parts,Y=I.path(),X=L.path(),Y.charAt(0)!=="/")throw new Error("URI is already relative");if(X.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if($.protocol===U.protocol&&($.protocol=null),$.username!==U.username||$.password!==U.password||$.protocol!==null||$.username!==null||$.password!==null)return I.build();if($.hostname===U.hostname&&$.port===U.port)$.hostname=null,$.port=null;else return I.build();if(Y===X)return $.path="",I.build();if(q=o.commonPath(Y,X),!q)return I.build();var te=U.path.substring(q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return $.path=te+$.path.substring(q.length)||"./",I.build()},l.equals=function(L){var I=this.clone(),$=new o(L),U={},q={},Y={},X,te,le;if(I.normalize(),$.normalize(),I.toString()===$.toString())return!0;if(X=I.query(),te=$.query(),I.query(""),$.query(""),I.toString()!==$.toString()||X.length!==te.length)return!1;U=o.parseQuery(X,this._parts.escapeQuerySpace),q=o.parseQuery(te,this._parts.escapeQuerySpace);for(le in U)if(u.call(U,le)){if(f(U[le])){if(!g(U[le],q[le]))return!1}else if(U[le]!==q[le])return!1;Y[le]=!0}for(le in q)if(u.call(q,le)&&!Y[le])return!1;return!0},l.preventInvalidHostname=function(L){return this._parts.preventInvalidHostname=!!L,this},l.duplicateQueryParameters=function(L){return this._parts.duplicateQueryParameters=!!L,this},l.escapeQuerySpace=function(L){return this._parts.escapeQuerySpace=!!L,this},o})}(ok)),ok.exports}var s4t=i4t();const X6=aa(s4t),cCe=["http","https"];function o4t(t){return typeof t=="string"&&t.startsWith("/vsi")&&!t.startsWith("/vsicurl/")}function a4t(t,e,n=!0){return l4t(t,e,!1,n)}function l4t(t,e=null,n=!1,r=!0){typeof t=="string"&&t.startsWith("/vsicurl/")&&(t=t.replace(/^\/vsicurl\//,""));let i=X6(t);if(e&&i.is("relative")&&!o4t(t)){let s=X6(e),o=s.path();!o.endsWith("/")&&!o.endsWith(".json")&&s.path(o+"/"),i=i.absoluteTo(s)}return i.normalize(),n&&(i.query(""),i.fragment("")),r?i.toString():i}const u4t="application/geo+json",c4t=["application/json",u4t,"text/json"],dCe=["image/gif","image/jpeg","image/apng","image/png","image/webp"],w8e=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],_8e=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(w8e);function W7(t,e,n=!1){return Array.isArray(e)||(e=[e]),n&&typeof t>"u"?!0:typeof t!="string"?!1:(e=e.map(r=>r.toLowerCase()),e.includes(t.toLowerCase()))}function d4t(t,e=!1){return W7(t,c4t,e)}class E8e extends BR{constructor(e,n=null,r={},i=[]){super(e,r,["_context"].concat(i)),this._context||(this._context=n)}getAbsoluteUrl(e=!0){return this._context?a4t(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let n=new X6(this.href),r=n.protocol().toLowerCase(),i=n.suffix().toLowerCase();return Dl(r)&&!cCe.includes(r)?!1:Dl(this.type)&&dCe.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Dl(i)&&(i==="jpg"||dCe.includes("image/"+i)))}isType(e){return Dl(this.type)&&W7(this.type,e)}isGeoTIFF(){return this.isType(_8e)}isCOG(){return this.isType(w8e)}isHTTP(){let n=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Dl(n)&&cCe.includes(n)}}class Y7 extends E8e{constructor(e,n=null){super(e,n)}isLink(){return!0}getObjectType(){return"Link"}static fromLinks(e,n=null){return Array.isArray(e)?e.map(r=>El(r)?new Y7(r,n):r):[]}}class C8e extends BR{constructor(e,n=null,r={},i=[]){if(super(e,Object.assign({links:Y7.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=n,!this._url)){let s=this.getSelfLink();s&&(this._url=s.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,n=!0){return this.getLinksWithRels([e]).filter(r=>d4t(r.type,n))}getStacLinkWithRel(e,n=!0){const r=this.getStacLinksWithRel(e,n);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>El(e)&&Dl(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(n=>n.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(n=>e.includes(n.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(n=>!e.includes(n.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class S8e extends C8e{constructor(e,n=null,r={},i=[]){super(e,n,r,i)}getAll(){return[]}}class Gp extends E8e{constructor(e,n=null,r=null){super(e,r,{},["_key"]),this._key||(this._key=n)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getBands(){return x8e(this["eo:bands"],this["raster:bands"])}findVisualBands(){let e={red:null,green:null,blue:null},n=this.getBands();for(let i in n){let s=parseInt(i,10),o=n[s];El(o)&&Dl(o.common_name)&&o.common_name in e&&(e[o.common_name]={index:s,band:o})}return Object.values(e).every(i=>i!==null)?e:null}findBand(e,n="name",r=null){Array.isArray(e)||(e=[e]),El(r)||(r=this.getBands());let i=r.findIndex(s=>El(s)&&e.includes(s[n]));return i>=0?{index:i,band:r[i]}:null}getBand(e){return El(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(e=null){e=this.getBand(e);const n={minimum:null,maximum:null},r=a=>a.minimum!==null&&a.maximum!==null;if(e&&(El(e.statistics)&&(typeof e.statistics.minimum=="number"&&(n.minimum=e.statistics.minimum),typeof e.statistics.maximum=="number"&&(n.maximum=e.statistics.maximum),r(n))||El(e.histogram)&&(typeof e.histogram.min=="number"&&(n.minimum=e.histogram.min),typeof e.histogram.max=="number"&&(n.maximum=e.histogram.max),r(n))))return n;let i=this.getMetadata("classification:classes");if(Array.isArray(i)&&(i.reduce((a,l)=>(a.minimum=Math.min(a.minimum,l.value),a.maximum=Math.max(a.maximum,l.value),a),n),r(n)))return n;let s=this.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((a,l)=>(a.minimum=Math.min(a.minimum,...l.values),a.maximum=Math.max(a.maximum,...l.values),a),n),r(n)))return n;let o=El(e)&&e.data_type||this.getMetadata("file:data_type");return o&&(n.minimum=X5t(o),n.maximum=Z5t(o)),n}getNoDataValues(e=null){e=this.getBand(e);let n=[];if(e&&typeof e.nodata<"u")n.push(e.nodata);else{let r=this.getMetadata("file:nodata");if(typeof r<"u")n=r;else{let i=this.getMetadata("classification:classes");Array.isArray(i)&&(n=i.filter(s=>!!s.nodata).map(s=>s.value))}}return n.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}isDefinition(){return!Dl(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}hasRole(e,n=!1){return Array.isArray(e)||(e=[e]),n&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>e.includes(r))}static fromAssets(e,n=null){let r={};if(El(e))for(let i in e)r[i]=new Gp(e[i],i,n);return r}}class pC extends C8e{constructor(e,n=null,r={},i=[]){super(e,n,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(n=>n.canBrowserDisplayImage(e))}getThumbnails(e=!0,n=null){let r=this.getAssetsWithRoles(["thumbnail","overview"],!0);if(r.length===0&&(r=this.getLinksWithRels(["preview"])),e&&(r=r.filter(i=>i.canBrowserDisplayImage())),n&&r.length>1){let i=s=>Array.isArray(s.roles)&&s.roles.includes(n)||s.getKey()===n;r=r.filter(i).concat(r.filter(s=>!i(s)))}return r}getDefaultGeoTIFF(e=!0,n=!1){var i;return(i=this.rankGeoTIFFs(e,n)[0])==null?void 0:i.asset}rankGeoTIFFs(e=!0,n=!1,r=null,i=null){El(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let s=[],o=this.getAssetsByTypes(_8e);e&&(o=o.filter(l=>l.isHTTP()&&(!n||l.isCOG())));let a=Object.entries(r);for(let l of o){let u=0;if(a.length>0){let d=a.filter(([c])=>l.hasRole(c,!0)).map(([,c])=>c);d.length>0&&(u+=Math.max(...d))}!n&&l.isCOG()&&(u+=2),l.findVisualBands()&&(u+=1),typeof i=="function"&&(u+=i(l)),s.push({asset:l,score:u})}return s.sort((l,u)=>u.score-l.score),s}findVisualAssets(){let e={red:null,green:null,blue:null},n=Object.keys(e),r=this.getAssets();for(let s of r){let o=s.getBands();if(o.length!==1)continue;let a=s.findBand(n,"common_name",o);a&&(e[a.band.common_name]=s)}return Object.values(e).every(s=>s!==null)?e:null}getAsset(e){return El(this.assets)&&this.assets[e]||null}getAssets(){return El(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,n=!1){return this.getAssets().filter(r=>r.hasRole(e,n))}getAssetWithRole(e,n=!1){return this.getAssetsWithRoles([e],n)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(n=>W7(n.type,e))}equals(e){return this===e?!0:!(e instanceof pC)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}}class A8e extends pC{constructor(e,n=null,r={},i=[]){super(e,n,r,i)}getObjectType(){return this.type}getSearchLink(e=null){let n=this.getStacLinksWithRel("search");return e?n[0]||null:n.find(r=>r.method===e||!e&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class f4t extends A8e{constructor(e,n=null){super(e,n)}}function v_(t){if(Dl(t)&&t.length>=10)try{let n=t.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5],n[6]||0))}catch{return null}return null}function h4t(t,e){return new Date(t.valueOf()+(e-t)/2)}function k8e(t){if(!Array.isArray(t)||t.length===0)return null;let e,n;const r=(i,s,o)=>typeof i>"u"?s:i===null||s===null?null:o(i,s);return t.forEach(([i,s])=>{e=r(e,i,Math.min),n=r(n,s,Math.max)}),[e===null?null:new Date(e),n===null?null:new Date(n)]}class T8e extends A8e{constructor(e,n=null){const r={assets:Gp.fromAssets,item_assets:Gp.fromAssets};super(e,n,r)}toGeoJSON(){let e=y8e(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0&&Fc(e[0])?e[0]:null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1&&Fc(e[0])?e:e.length>1?e.filter((n,r)=>r>0&&Fc(n)):[]}getRawBoundingBoxes(){var n,r;let e=(r=(n=this.extent)==null?void 0:n.spatial)==null?void 0:r.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var n,r;let e=(r=(n=this.extent)==null?void 0:n.temporal)==null?void 0:r.interval;return Array.isArray(e)&&e.length>0?e.filter(i=>Array.isArray(i)&&(Dl(i[0])||Dl(i[1]))).map(i=>i.map(s=>v_(s))):[]}getSummary(e){return this.summaries[e]}getBands(){let e=this.getSummary("eo:bands"),n=this.getSummary("raster:bands"),r=[e,n].filter(i=>Array.isArray(i));return r.length>=2?x8e(...r):r.length===1?r[0]:[]}}class p4t extends S8e{constructor(e,n=null){const r={collections:i=>i.map(s=>new T8e(s))};super(e,n,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(n=>n.toGeoJSON()).filter(n=>n!==null)}}getBoundingBox(){return v8e(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return k8e(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}}class D8e extends pC{constructor(e,n=null){super(e,n,{assets:Gp.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Fc(this.bbox)?this.bbox:null}getBoundingBoxes(){return Fc(this.bbox)?[this.bbox]:[]}getDateTime(){let e=v_(this.properties.datetime);if(!e){let n=v_(this.properties.start_datetime),r=v_(this.properties.end_datetime);return n&&r?h4t(n,r):n||r}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return Dl(this.properties.start_datetime)||Dl(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Dl(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(n=>n.map(r=>v_(r)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("eo:bands");return Array.isArray(e)?e:[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class m4t extends S8e{constructor(e,n=null){const r={features:i=>i.map(s=>new D8e(s))};super(e,n,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return v8e(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return k8e(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}}function g4t(t,e=!0,n=!1){return e&&(t=W5t.stac(t,n)),t.type==="Feature"?new D8e(t):t.type==="FeatureCollection"?new m4t(t):t.type==="Collection"||!t.type&&typeof t.extent<"u"&&typeof t.license<"u"?new T8e(t):!t.type&&Array.isArray(t.collections)?new p4t(t):new f4t(t)}class fCe extends yE{constructor(n){super({...n,state:"loading"});tn(this,"loadImage",n=>new Promise((r,i)=>{const s=new Image;s.addEventListener("load",()=>r(s)),s.addEventListener("error",()=>i(new Error("load failed"))),s.src=n}));const r=new V7(n.url);r.getHeader().then(i=>{this.tileGrid.minZoom=i.minZoom,this.tileGrid.maxZoom=i.maxZoom,this.setLoader(async(s,o,a)=>{const l=await r.getZxy(s,o,a),u=URL.createObjectURL(new Blob([l.data])),d=await this.loadImage(u);return URL.revokeObjectURL(u),d}),this.setState("ready")})}}class y4t extends ED{constructor(n){super({...n,state:"loading",url:"pmtiles://"+n.url+"/{z}/{x}/{y}",format:new jAe});tn(this,"tileLoadFunction",(n,r)=>{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=r.match(i),o=+s[2],a=+s[3],l=+s[4];n.setLoader((u,d,c)=>{n.setState(Ls.LOADING),this.pmtiles_.getZxy(o,a,l).then(f=>{if(f){const h=n.getFormat();n.setFeatures(h.readFeatures(f.data,{extent:u,featureProjection:c})),n.setState(Ls.LOADED)}else n.setFeatures([]),n.setState(Ls.EMPTY)}).catch(f=>{n.setFeatures([]),n.setState(Ls.ERROR)})})});this.pmtiles_=new V7(n.url),this.pmtiles_.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}const b4t=new __({fill:new Z4({color:"rgba(255,255,255,0.4)"}),stroke:new K_({color:"#3399CC",width:3})}),v4t=new __({stroke:new K_({color:"#ff9933",width:1})});function x4t(t,e){const n={url:t.getAbsoluteUrl()};let r=null;t.getBands().length===1&&(r=0);const{minimum:i,maximum:s}=t.getMinMaxValues(r);typeof i=="number"&&(n.min=i),typeof s=="number"&&(n.max=s);const o=t.getNoDataValues(r);return o.length>0&&(n.nodata=o[0]),e.length>0&&(n.bands=e),n}async function hCe(t,e=void 0){let n=e;if(MUe()){const r=t.getMetadata("proj:epsg");if(r)try{n=await IUe(r)}catch{}}return n}function pCe(t,e){const n=t.clone();return e.hasOnlyBounds()||n.setFill(null),n}function w4t(t){let e=t.href;if(e.includes("{s}"))if(Array.isArray(t["href:servers"])&&t["href:servers"].length>0){const n=Math.random()*t["href:servers"].length|0;e=e.replace("{s}",t["href:servers"][n])}else return null;return e}async function _4t(t){try{const e=new URL(t);e.searchParams.set("service","wmts"),e.searchParams.set("request","GetCapabilities");const n=await fetch(e);return new rP().read(await n.text())}catch{return null}}class X7 extends _k{constructor(e){const n={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>n[r]=e[r]),super(n),this.getSourceOptions_=e.getSourceOptions,this.data_,this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||b4t,this.collectionStyle_=e.collectionStyle||v4t,this.boundsLayer_=null,e.data){try{this.configure_(e.data,e.url,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");fetch(e.url).then(r=>r.json()).then(r=>this.configure_(r,e.url,e.assets,e.bands)).catch(r=>this.handleError_(r))}getBoundsLayer(){return this.boundsLayer_}handleError_(e){this.dispatchEvent(new U5t(e))}configure_(e,n=null,r=null,i=[]){e instanceof Gp||e instanceof pC?this.data_=e:this.data_=g4t(e),n&&n.includes("://")&&this.data_.setAbsoluteUrl(n),this.bands_=i,this.boundsLayer_=this.addFootprint_();const s=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(pCe(this.boundsStyle_,this))};this.getLayers().on("add",s),this.getLayers().on("remove",s),this.setAssets(r).then(()=>this.dispatchEvent("assetsready")).catch(o=>this.handleError_(o)),this.dispatchEvent("sourceready")}async addApiCollection_(){const e=this.getData().getAll().map(n=>{const r=new X7({data:n,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_});return this.addLayer_(r),r});return await Promise.all(e)}async addStacAssets_(){let e=this.getAssets();if(e===null){e=[];const r=this.getData().getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);if(r)e.push(r);else{const i=this.getData().getThumbnails().filter(s=>!Array.isArray(s.roles)||!s.roles.includes("example"));i.length>0&&e.push(i[0])}}const n=e.map(r=>this.addImagery_(r));return await Promise.all(n)}async addImagery_(e){if(e){if(e.isGeoTIFF())return await this.addGeoTiff_(e);if(e.canBrowserDisplayImage())return await this.addThumbnail_(e)}}async addThumbnail_(e){if(!this.displayPreview_)return;let n={url:e.getAbsoluteUrl(),projection:await hCe(e,"EPSG:4326"),imageExtent:e.getContext().getBoundingBox(),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(n=await this.getSourceOptions_(ss.ImageStatic,n,e));const r=new R$({source:new z3e(n)});return this.addLayer_(r,e),r}async addWebMapLinks_(){const e=this.getWebMapLinks();if(e.length>0)return await this.addLayerForLink(e[0])}async addLayerForLink(e){const n=w4t(e);if(!n)return;const r={attributions:e.getMetadata("attribution")||this.data_.getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:n},i=async(o,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(o,a,e)),a),s=[];switch(e.rel){case"pmtiles":const a=await new V7(r.url).getHeader();let l;switch(a.tileType){case hb.Mvt:l=new y4t(await i(ss.PMTilesVector,r));break;case hb.Avif:case hb.Jpeg:case hb.Png:case hb.Webp:l=new fCe(await i(ss.PMTilesRaster,r));break;default:return}s.push(l);break;case"tilejson":s.push(new X3e(await i(ss.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(const c in e["wms:layers"]){const f=e["wms:layers"][c]||"";let h="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][c]=="string"&&(h=e["wms:styles"][c]);const p=Object.assign({LAYERS:f,STYLES:h},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(p.FORMAT=e.type);const g=await i(ss.TileWMS,Object.assign({},r,{params:p}));s.push(new nke(g))}break;case"wmts":const u=await _4t(n);if(!u)return;const d=Array.isArray(e["wmts:layer"])?e["wmts:layer"]:[e["wmts:layer"]];for(const c of d){let f=Object.assign({},r,{layer:c});typeof e.type=="string"&&e.type.startsWith("image/")&&(f.format=e.type),f=await i(ss.WMTS,f),s.push(new rke(ike(u,f)))}break;case"xyz":s.push(new r2(await i(ss.XYZ,r)));break;default:return}return s.map(o=>{let a;return o instanceof ED?a=new ZAe({source:o,declutter:!0}):o instanceof fCe?a=new Rk({source:o}):a=new Ek({source:o}),this.addLayer_(a,e),a})}async addGeoTiff_(e){if(!this.displayOverview_)return;if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(e);let r={sources:[x4t(e,this.bands_)]};const i=await hCe(e);i&&(r.projection=i),this.getSourceOptions_&&(r=await this.getSourceOptions_(ss.GeoTIFF,r,e));const s=async(o,a)=>(a&&this.getLayers().remove(a),await this.addTileLayerForImagery_(o));try{const o=new _P(r),a=new Rk({source:o});if(this.useTileLayerAsFallback_){const l=()=>s(e,a);o.on("error",l),o.on("tileloaderror",l),o.on("change",()=>{o.getState()==="error"&&s(e,a)}),a.on("error",l),await o.getView()}return this.addLayer_(a,e),a}catch(o){if(this.useTileLayerAsFallback_)return await s(e,null);this.handleError_(o)}}async addTileLayerForImagery_(e){let n={crossOrigin:this.crossOrigin_,url:this.buildTileUrlTemplate_(e)};this.getSourceOptions_&&(n=await this.getSourceOptions_(ss.XYZ,n,e));const r=new Ek({source:new r2(n)});return this.addLayer_(r,e),r}addLayer_(e,n,r=0){e.set("stac",n),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null;const n=this.getData();if(n.isItemCollection()||n.isCollectionCollection()?e=y8e(n.getBoundingBox()):e=n.toGeoJSON(),e){const r=new bD,i=new aE({format:r,loader:(o,a,l)=>{const u=r.readFeatures(e,{featureProjection:l});i.addFeatures(u)}}),s=new b$({source:i,style:pCe(this.boundsStyle_,this),visible:this.displayFootprint_});return s.set("bounds",!0),this.addLayer_(s,n,1),s}return null}async updateLayers_(){const e=this.getLayers();for(let r=e.getLength()-1;r>=0;r--){const s=e.item(r).get("stac");s&&(s.isLink()||s.isAsset())&&e.removeAt(r)}const n=this.getData();n.isItemCollection()||n.isCollectionCollection()?await this.addApiCollection_():(n.isItem()||n.isCollection())&&await this.addStacAssets_(),this.displayWebMapLink_&&(Array.isArray(this.displayWebMapLink_)||this.hasOnlyBounds())&&await this.addWebMapLinks_()}hasOnlyBounds(){const e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){let e=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(e=[this.displayWebMapLink_]);let n=this.data_.getLinksWithRels(e);return Array.isArray(this.displayWebMapLink_)?n=this.displayWebMapLink_.map(r=>{if(typeof r=="string"){const i=n.find(s=>s.id===r);return i||null}return r}).filter(r=>!!r):n.sort((r,i)=>{const s=e.indexOf(r.rel),o=e.indexOf(i.rel);return s-o}),n}async setAssets(e){Array.isArray(e)?this.assets_=e.map(n=>typeof n=="string"?this.getData().getAsset(n):n instanceof Gp?n:new Gp(n)):this.assets_=null,await this.updateLayers_()}getData(){return this.data_}getAssets(){return this.assets_}getExtent(){if(!this.boundsLayer_)return;const e=this.boundsLayer_.getMapInternal();if(!e)return;const n=e.getView();if(!n)return;const r=this.getData();if(!r)return;const i=r.getBoundingBox();if(i)return ske(i,"EPSG:4326",n.getProjection())}}$Ue(tM);window.eoxMapAdvancedOlLayers={..._Xe,STAC:X7};class E4t extends vh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,tilePixelRatio:e.tilePixelRatio,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection,wrapX:e.wrapX}),this.version_=e.version!==void 0?e.version:"1.0.0",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,fetch(e.url).then(n=>n.text()).then(n=>new window.DOMParser().parseFromString(n,"application/xml")).then(n=>{this.handleCapabilitiesResponse(n,e)})}handleCapabilitiesResponse(e,n){const i=new rP().read(e),s=ike(i,n);this.crossOrigin=s.crossOrigin,this.projection=s.projection,this.tileGrid=s.tileGrid,this.requestEncoding_=s.requestEncoding,this.matrixSet_=s.matrixSet,this.style_=s.style,this.format_=s.format,this.dimensions_=s.dimensions,this.setUrls(s.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=F$(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(e){const n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};n==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=n==="KVP"?Ck(e,r):e.replace(/\{(\w+?)\}/g,(o,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:o);const i=this.tileGrid,s=this.dimensions_;return function(o){if(!o)return;const a={TileMatrix:i.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(a,s);let l=e;return n==="KVP"?l=Ck(l,a):l=l.replace(/\{(\w+?)\}/g,(u,d)=>a[d]),l}}}var Dr,Ca=((Dr={})[Dr.Unknown=0]="Unknown",Dr[Dr.Point=1]="Point",Dr[Dr.LineString=2]="LineString",Dr[Dr.Polygon=3]="Polygon",Dr[Dr.MultiPoint=4]="MultiPoint",Dr[Dr.MultiLineString=5]="MultiLineString",Dr[Dr.MultiPolygon=6]="MultiPolygon",Dr[Dr.GeometryCollection=7]="GeometryCollection",Dr[Dr.CircularString=8]="CircularString",Dr[Dr.CompoundCurve=9]="CompoundCurve",Dr[Dr.CurvePolygon=10]="CurvePolygon",Dr[Dr.MultiCurve=11]="MultiCurve",Dr[Dr.MultiSurface=12]="MultiSurface",Dr[Dr.Curve=13]="Curve",Dr[Dr.Surface=14]="Surface",Dr[Dr.PolyhedralSurface=15]="PolyhedralSurface",Dr[Dr.TIN=16]="TIN",Dr[Dr.Triangle=17]="Triangle",Dr);const Bw=4,zw=4,mC=4,yp=new Int32Array(2),mCe=new Float32Array(yp.buffer),gCe=new Float64Array(yp.buffer),dA=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Z6;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Z6||(Z6={}));class yh{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new yh(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return yp[0]=this.readInt32(e),mCe[0]}readFloat64(e){return yp[dA?0:1]=this.readInt32(e),yp[dA?1:0]=this.readInt32(e+4),gCe[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){mCe[0]=n,this.writeInt32(e,yp[0])}writeFloat64(e,n){gCe[0]=n,this.writeInt32(e,yp[dA?0:1]),this.writeInt32(e+4,yp[dA?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Bw+zw)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<zw;n++)e+=String.fromCharCode(this.readInt8(this.position_+Bw+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=Bw;const i=this.bytes_.subarray(e,e+r);return n===Z6.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Bw}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=zw)throw new Error("FlatBuffers: file identifier must be length "+zw);for(let n=0;n<zw;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+Bw+n))return!1;return!0}createScalarList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s)}return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}}class qa{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsGeometry(e,n){return(n||new qa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGeometry(e,n){return e.setPosition(e.position()+mC),(n||new qa).__init(e.readInt32(e.position())+e.position(),e)}ends(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readUint32(this.bb.__vector(this.bb_pos+n)+4*e):0}endsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}endsArray(){let e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}xy(e){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*e):0}xyLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}xyArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}z(e){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*e):0}zLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}zArray(){let e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}m(e){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*e):0}mLength(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}mArray(){let e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}t(e){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*e):0}tLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}tArray(){let e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}tm(e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.readUint64(this.bb.__vector(this.bb_pos+n)+8*e):BigInt(0)}tmLength(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):Ca.Unknown}parts(e,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new qa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}partsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startGeometry(e){e.startObject(8)}static addEnds(e,n){e.addFieldOffset(0,n,0)}static createEndsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startEndsVector(e,n){e.startVector(4,n,4)}static addXy(e,n){e.addFieldOffset(1,n,0)}static createXyVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addFloat64(n[r]);return e.endVector()}static startXyVector(e,n){e.startVector(8,n,8)}static addZ(e,n){e.addFieldOffset(2,n,0)}static createZVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addFloat64(n[r]);return e.endVector()}static startZVector(e,n){e.startVector(8,n,8)}static addM(e,n){e.addFieldOffset(3,n,0)}static createMVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addFloat64(n[r]);return e.endVector()}static startMVector(e,n){e.startVector(8,n,8)}static addT(e,n){e.addFieldOffset(4,n,0)}static createTVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addFloat64(n[r]);return e.endVector()}static startTVector(e,n){e.startVector(8,n,8)}static addTm(e,n){e.addFieldOffset(5,n,0)}static createTmVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startTmVector(e,n){e.startVector(8,n,8)}static addType(e,n){e.addFieldInt8(6,n,Ca.Unknown)}static addParts(e,n){e.addFieldOffset(7,n,0)}static createPartsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startPartsVector(e,n){e.startVector(4,n,4)}static endGeometry(e){return e.endObject()}static createGeometry(e,n,r,i,s,o,a,l,u){return qa.startGeometry(e),qa.addEnds(e,n),qa.addXy(e,r),qa.addZ(e,i),qa.addM(e,s),qa.addT(e,o),qa.addTm(e,a),qa.addType(e,l),qa.addParts(e,u),qa.endGeometry(e)}}function C5(t,e){let n=[];for(let r=0;r<t.length;r+=2){let i=[t[r],t[r+1]];e&&i.push(e[r>>1]),n.push(i)}return n}function K6(t,e){let n=e;if(n===Ca.Unknown&&(n=t.type()),n===Ca.GeometryCollection){let i=[];for(let s=0;s<t.partsLength();s++){let o=t.parts(s),a=o.type();i.push(K6(o,a))}return{type:Ca[n],geometries:i}}if(n===Ca.MultiPolygon){let i=[];for(let s=0;s<t.partsLength();s++)i.push(K6(t.parts(s),Ca.Polygon));return{type:Ca[n],coordinates:i.map(s=>s.coordinates)}}let r=function(i,s){let o=i.xyArray(),a=i.zArray();switch(s){case Ca.Point:{let l=Array.from(o);return a&&l.push(a[0]),l}case Ca.MultiPoint:case Ca.LineString:return C5(o,a);case Ca.MultiLineString:case Ca.Polygon:return function(l,u,d){let c;if(!d||d.length===0)return[C5(l,u)];let f=0,h=Array.from(d).map(p=>l.slice(f,f=p<<1));return u&&(f=0,c=Array.from(d).map(p=>u.slice(f,f=p))),h.map((p,g)=>C5(p,c?c[g]:void 0))}(o,a,i.endsArray())}}(t,n);return{type:Ca[n],coordinates:r}}var pi,Yo=((pi={})[pi.Byte=0]="Byte",pi[pi.UByte=1]="UByte",pi[pi.Bool=2]="Bool",pi[pi.Short=3]="Short",pi[pi.UShort=4]="UShort",pi[pi.Int=5]="Int",pi[pi.UInt=6]="UInt",pi[pi.Long=7]="Long",pi[pi.ULong=8]="ULong",pi[pi.Float=9]="Float",pi[pi.Double=10]="Double",pi[pi.String=11]="String",pi[pi.Json=12]="Json",pi[pi.DateTime=13]="DateTime",pi[pi.Binary=14]="Binary",pi);class To{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsColumn(e,n){return(n||new To).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsColumn(e,n){return e.setPosition(e.position()+mC),(n||new To).__init(e.readInt32(e.position())+e.position(),e)}name(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}type(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Yo.Byte}title(e){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,e):null}description(e){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,e):null}width(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}precision(){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}scale(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}nullable(){let e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}unique(){let e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}primaryKey(){let e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}metadata(e){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb_pos+n,e):null}static startColumn(e){e.startObject(11)}static addName(e,n){e.addFieldOffset(0,n,0)}static addType(e,n){e.addFieldInt8(1,n,Yo.Byte)}static addTitle(e,n){e.addFieldOffset(2,n,0)}static addDescription(e,n){e.addFieldOffset(3,n,0)}static addWidth(e,n){e.addFieldInt32(4,n,-1)}static addPrecision(e,n){e.addFieldInt32(5,n,-1)}static addScale(e,n){e.addFieldInt32(6,n,-1)}static addNullable(e,n){e.addFieldInt8(7,+n,1)}static addUnique(e,n){e.addFieldInt8(8,+n,0)}static addPrimaryKey(e,n){e.addFieldInt8(9,+n,0)}static addMetadata(e,n){e.addFieldOffset(10,n,0)}static endColumn(e){let n=e.endObject();return e.requiredField(n,4),n}static createColumn(e,n,r,i,s,o,a,l,u,d,c,f){return To.startColumn(e),To.addName(e,n),To.addType(e,r),To.addTitle(e,i),To.addDescription(e,s),To.addWidth(e,o),To.addPrecision(e,a),To.addScale(e,l),To.addNullable(e,u),To.addUnique(e,d),To.addPrimaryKey(e,c),To.addMetadata(e,f),To.endColumn(e)}}class yc{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFeature(e,n){return(n||new yc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFeature(e,n){return e.setPosition(e.position()+mC),(n||new yc).__init(e.readInt32(e.position())+e.position(),e)}geometry(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new qa).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}properties(e){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readUint8(this.bb.__vector(this.bb_pos+n)+e):0}propertiesLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}propertiesArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}columns(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new To).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFeature(e){e.startObject(3)}static addGeometry(e,n){e.addFieldOffset(0,n,0)}static addProperties(e,n){e.addFieldOffset(1,n,0)}static createPropertiesVector(e,n){e.startVector(1,n.length,1);for(let r=n.length-1;r>=0;r--)e.addInt8(n[r]);return e.endVector()}static startPropertiesVector(e,n){e.startVector(1,n,1)}static addColumns(e,n){e.addFieldOffset(2,n,0)}static createColumnsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startColumnsVector(e,n){e.startVector(4,n,4)}static endFeature(e){return e.endObject()}static finishFeatureBuffer(e,n){e.finish(n)}static finishSizePrefixedFeatureBuffer(e,n){e.finish(n,void 0,!0)}static createFeature(e,n,r,i){return yc.startFeature(e),yc.addGeometry(e,n),yc.addProperties(e,r),yc.addColumns(e,i),yc.endFeature(e)}}new TextEncoder;let yCe=new TextDecoder;function C4t(t,e){let n={};if(!e||e.length===0)return n;let r=t.propertiesArray();if(!r)return n;let i=new DataView(r.buffer,r.byteOffset),s=t.propertiesLength(),o=0;for(;o<s;){let a=i.getUint16(o,!0);o+=2;let l=e[a],u=l.name;switch(l.type){case Yo.Bool:n[u]=!!i.getUint8(o),o+=1;break;case Yo.Byte:n[u]=i.getInt8(o),o+=1;break;case Yo.UByte:n[u]=i.getUint8(o),o+=1;break;case Yo.Short:n[u]=i.getInt16(o,!0),o+=2;break;case Yo.UShort:n[u]=i.getUint16(o,!0),o+=2;break;case Yo.Int:n[u]=i.getInt32(o,!0),o+=4;break;case Yo.UInt:n[u]=i.getUint32(o,!0),o+=4;break;case Yo.Long:n[u]=Number(i.getBigInt64(o,!0)),o+=8;break;case Yo.ULong:n[u]=Number(i.getBigUint64(o,!0)),o+=8;break;case Yo.Float:n[u]=i.getFloat32(o,!0),o+=4;break;case Yo.Double:n[u]=i.getFloat64(o,!0),o+=8;break;case Yo.DateTime:case Yo.String:{let d=i.getUint32(o,!0);o+=4,n[u]=yCe.decode(r.subarray(o,o+d)),o+=d;break}case Yo.Json:{let d=i.getUint32(o,!0);o+=4;let c=yCe.decode(r.subarray(o,o+d));n[u]=JSON.parse(c),o+=d;break}case Yo.Binary:{let d=i.getUint32(o,!0);o+=4,n[u]=r.subarray(o,o+d),o+=d;break}default:throw Error("Unknown type "+l.type)}}return n}function Z7(t,e,n){let r=n.columns;return{type:"Feature",id:t,geometry:K6(e.geometry(),n.geometryType),properties:C4t(e,r)}}const K7=new Uint8Array(0);function S4t(){return this._source.cancel()}function A4t(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function k4t(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(n){return t._array=K7,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:A4t(e,n.value)}})}function T4t(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var r=new Uint8Array(t);return r.set(this._array.subarray(this._index)),function i(){return e._source.read().then(function(s){return s.done?(e._array=K7,e._index=0,n>0?r.subarray(0,n):null):n+s.value.length>=t?(e._array=s.value,e._index=t-n,r.set(s.value.subarray(0,t-n),n),r):(r.set(s.value,n),n+=s.value.length,i())})}()}function D4t(t){return typeof t.slice=="function"?t:new zR(typeof t.read=="function"?t:t.getReader())}function zR(t){this._source=t,this._array=K7,this._index=0}zR.prototype.read=k4t;zR.prototype.slice=T4t;zR.prototype.cancel=S4t;class Su{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsCrs(e,n){return(n||new Su).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCrs(e,n){return e.setPosition(e.position()+mC),(n||new Su).__init(e.readInt32(e.position())+e.position(),e)}org(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}code(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){let n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__string(this.bb_pos+n,e):null}description(e){let n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__string(this.bb_pos+n,e):null}wkt(e){let n=this.bb.__offset(this.bb_pos,12);return n?this.bb.__string(this.bb_pos+n,e):null}codeString(e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb_pos+n,e):null}static startCrs(e){e.startObject(6)}static addOrg(e,n){e.addFieldOffset(0,n,0)}static addCode(e,n){e.addFieldInt32(1,n,0)}static addName(e,n){e.addFieldOffset(2,n,0)}static addDescription(e,n){e.addFieldOffset(3,n,0)}static addWkt(e,n){e.addFieldOffset(4,n,0)}static addCodeString(e,n){e.addFieldOffset(5,n,0)}static endCrs(e){return e.endObject()}static createCrs(e,n,r,i,s,o,a){return Su.startCrs(e),Su.addOrg(e,n),Su.addCode(e,r),Su.addName(e,i),Su.addDescription(e,s),Su.addWkt(e,o),Su.addCodeString(e,a),Su.endCrs(e)}}class wT{constructor(){tn(this,"bb",null);tn(this,"bb_pos",0)}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsHeader(e,n){return(n||new wT).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsHeader(e,n){return e.setPosition(e.position()+mC),(n||new wT).__init(e.readInt32(e.position())+e.position(),e)}name(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}envelope(e){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readFloat64(this.bb.__vector(this.bb_pos+n)+8*e):0}envelopeLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}envelopeArray(){let e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}geometryType(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Ca.Unknown}hasZ(){let e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasM(){let e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasT(){let e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}hasTm(){let e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}columns(e,n){let r=this.bb.__offset(this.bb_pos,18);return r?(n||new To).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}columnsLength(){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}featuresCount(){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}indexNodeSize(){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}crs(e){let n=this.bb.__offset(this.bb_pos,24);return n?(e||new Su).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}title(e){let n=this.bb.__offset(this.bb_pos,26);return n?this.bb.__string(this.bb_pos+n,e):null}description(e){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb_pos+n,e):null}metadata(e){let n=this.bb.__offset(this.bb_pos,30);return n?this.bb.__string(this.bb_pos+n,e):null}static startHeader(e){e.startObject(14)}static addName(e,n){e.addFieldOffset(0,n,0)}static addEnvelope(e,n){e.addFieldOffset(1,n,0)}static createEnvelopeVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addFloat64(n[r]);return e.endVector()}static startEnvelopeVector(e,n){e.startVector(8,n,8)}static addGeometryType(e,n){e.addFieldInt8(2,n,Ca.Unknown)}static addHasZ(e,n){e.addFieldInt8(3,+n,0)}static addHasM(e,n){e.addFieldInt8(4,+n,0)}static addHasT(e,n){e.addFieldInt8(5,+n,0)}static addHasTm(e,n){e.addFieldInt8(6,+n,0)}static addColumns(e,n){e.addFieldOffset(7,n,0)}static createColumnsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startColumnsVector(e,n){e.startVector(4,n,4)}static addFeaturesCount(e,n){e.addFieldInt64(8,n,BigInt("0"))}static addIndexNodeSize(e,n){e.addFieldInt16(9,n,16)}static addCrs(e,n){e.addFieldOffset(10,n,0)}static addTitle(e,n){e.addFieldOffset(11,n,0)}static addDescription(e,n){e.addFieldOffset(12,n,0)}static addMetadata(e,n){e.addFieldOffset(13,n,0)}static endHeader(e){return e.endObject()}static finishHeaderBuffer(e,n){e.finish(n)}static finishSizePrefixedHeaderBuffer(e,n){e.finish(n,void 0,!0)}}function J7(t){let e=wT.getRootAsHeader(t),n=e.featuresCount(),r=e.indexNodeSize(),i=[];for(let a=0;a<e.columnsLength();a++){let l=e.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");i.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let s=e.crs(),o=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:i,envelope:null,featuresCount:Number(n),indexNodeSize:r,crs:o,title:e.title(),description:e.description(),metadata:e.metadata()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J6=function(t,e){return J6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},J6(t,e)};function L4t(t,e){J6(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function zv(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,[])).next())})}function cm(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function L1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function z2(t){return this instanceof z2?(this.v=t,this):new z2(t)}function R4t(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){c(s[0][3],p)}}function l(f){f.value instanceof z2?Promise.resolve(f.value.v).then(u,d):c(s[0][2],f)}function u(f){a("next",f)}function d(f){a("throw",f)}function c(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}var L8e=function(t){L4t(e,t);function e(n){var r=t.call(this,n)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return e}(Error);(function(){function t(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();(function(){function t(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();(function(){function t(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(t.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},t})();function Q6(t){t!=null&&typeof t.then=="function"&&t.then(CT,CT)}var S5=0,bCe=1,R0=2,_T=3,e$=4,ET=1024,CT=function(){};function Hb(t){var e=t.err,n=Promise.resolve(t.execution).then(function(r){if(e!=null)throw e;return r});return t.err=void 0,t.execution=n.then(function(){},function(){}),t.pending===void 0?n:t.pending.then(function(){return n})}function jg(t,e){var n=t.state>=_T;return Promise.resolve(e).then(function(r){return!n&&t.state>=e$?Hb(t).then(function(i){return{value:i,done:!0}}):{value:r,done:n}})}function Q7(t,e){var n,r;if(!(t.state>=R0))if(t.state=R0,t.onnext(),t.onstop(),t.err==null&&(t.err=e),t.pushes.length===0&&(typeof t.buffer>"u"||t.buffer.empty))V_(t);else try{for(var i=L1(t.pushes),s=i.next();!s.done;s=i.next()){var o=s.value;o.resolve()}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function V_(t){var e,n;if(!(t.state>=_T)){t.state<R0&&Q7(t),t.state=_T,t.buffer=void 0;try{for(var r=L1(t.nexts),i=r.next();!i.done;i=r.next()){var s=i.value,o=t.pending===void 0?Hb(t):t.pending.then(function(){return Hb(t)});s.resolve(jg(t,o))}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function vCe(t){t.state>=e$||(t.state<_T&&V_(t),t.state=e$)}function F4t(t,e){if(Q6(e),t.pushes.length>=ET)throw new L8e("No more than "+ET+" pending calls to push are allowed on a single repeater.");if(t.state>=R0)return Promise.resolve(void 0);var n=t.pending===void 0?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(l){t.state<R0&&(t.err=l),vCe(t)});var r;if(t.nexts.length){var i=t.nexts.shift();i.resolve(jg(t,n)),t.nexts.length?r=Promise.resolve(t.nexts[0].value):typeof t.buffer<"u"&&!t.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return t.onnext=l})}else typeof t.buffer<"u"&&!t.buffer.full?(t.buffer.add(n),r=Promise.resolve(void 0)):r=new Promise(function(l){return t.pushes.push({resolve:l,value:n})});var s=!0,o={},a=r.catch(function(l){if(s)throw l});return o.then=function(l,u){return s=!1,Promise.prototype.then.call(r,l,u)},o.catch=function(l){return s=!1,Promise.prototype.catch.call(r,l)},o.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(l){t.err=l,vCe(t)}),o}function O4t(t){var e=Q7.bind(null,t),n=new Promise(function(r){return t.onstop=r});return e.then=n.then.bind(n),e.catch=n.catch.bind(n),e.finally=n.finally.bind(n),e}function M4t(t){if(!(t.state>=bCe)){t.state=bCe;var e=F4t.bind(null,t),n=O4t(t);t.execution=new Promise(function(r){return r(t.executor(e,n))}),t.execution.catch(function(){return Q7(t)})}}var fA=new WeakMap,gC=function(){function t(e,n){fA.set(this,{executor:e,buffer:n,err:void 0,state:S5,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:CT,onstop:CT})}return t.prototype.next=function(e){Q6(e);var n=fA.get(this);if(n===void 0)throw new Error("WeakMap error");if(n.nexts.length>=ET)throw new L8e("No more than "+ET+" pending calls to next are allowed on a single repeater.");if(n.state<=S5&&M4t(n),n.onnext(e),typeof n.buffer<"u"&&!n.buffer.empty){var r=jg(n,n.buffer.remove());if(n.pushes.length){var i=n.pushes.shift();n.buffer.add(i.value),n.onnext=i.resolve}return r}else if(n.pushes.length){var s=n.pushes.shift();return n.onnext=s.resolve,jg(n,s.value)}else if(n.state>=R0)return V_(n),jg(n,Hb(n));return new Promise(function(o){return n.nexts.push({resolve:o,value:e})})},t.prototype.return=function(e){Q6(e);var n=fA.get(this);if(n===void 0)throw new Error("WeakMap error");return V_(n),n.execution=Promise.resolve(n.execution).then(function(){return e}),jg(n,Hb(n))},t.prototype.throw=function(e){var n=fA.get(this);if(n===void 0)throw new Error("WeakMap error");return n.state<=S5||n.state>=R0||typeof n.buffer<"u"&&!n.buffer.empty?(V_(n),n.err==null&&(n.err=e),jg(n,Hb(n))):this.next(Promise.reject(e))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=I4t,t.merge=$4t,t.zip=P4t,t.latest=N4t,t}();function jR(t,e){var n,r,i=[],s=function(u){u!=null&&typeof u[Symbol.asyncIterator]=="function"?i.push(u[Symbol.asyncIterator]()):u!=null&&typeof u[Symbol.iterator]=="function"?i.push(u[Symbol.iterator]()):i.push(function(){return R4t(this,arguments,function(){return cm(this,function(f){switch(f.label){case 0:return e.yieldValues?[4,z2(u)]:[3,3];case 1:return[4,f.sent()];case 2:f.sent(),f.label=3;case 3:return e.returnValues?[4,z2(u)]:[3,5];case 4:return[2,f.sent()];case 5:return[2]}})})}())};try{for(var o=L1(t),a=o.next();!a.done;a=o.next()){var l=a.value;s(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function I4t(t){var e=this,n=jR(t,{returnValues:!0});return new gC(function(r,i){return zv(e,void 0,void 0,function(){var s,o,a,l,u,d;return cm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2];o=!1,i.then(function(){s(),o=!0}),c.label=1;case 1:c.trys.push([1,,5,7]),l=void 0,u=0,d=function(){var f,h,p,g,b,y;return cm(this,function(v){switch(v.label){case 0:f=u;try{for(h=(b=void 0,L1(n)),p=h.next();!p.done;p=h.next())g=p.value,Promise.resolve(g.next()).then(function(w){w.done?(i(),a===void 0&&(a=w)):u===f&&(u++,s(w))},function(w){return i(w)})}catch(w){b={error:w}}finally{try{p&&!p.done&&(y=h.return)&&y.call(h)}finally{if(b)throw b.error}}return[4,new Promise(function(w){return s=w})];case 1:return l=v.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:v.sent(),v.label=3;case 3:return[2]}})},c.label=2;case 2:return o?[3,4]:[5,d()];case 3:return c.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return i(),[4,Promise.race(n.map(function(f){return f.return&&f.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}function $4t(t){var e=this,n=jR(t,{yieldValues:!0});return new gC(function(r,i){return zv(e,void 0,void 0,function(){var s,o,a,l=this;return cm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2];s=[],o=!1,i.then(function(){var d,c;o=!0;try{for(var f=L1(s),h=f.next();!h.done;h=f.next()){var p=h.value;p()}}catch(g){d={error:g}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(d)throw d.error}}}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.all(n.map(function(d,c){return zv(l,void 0,void 0,function(){var f,h;return cm(this,function(p){switch(p.label){case 0:p.trys.push([0,,6,9]),p.label=1;case 1:return o?[3,5]:(Promise.resolve(d.next()).then(function(g){return s[c](g)},function(g){return i(g)}),[4,new Promise(function(g){s[c]=g})]);case 2:return f=p.sent(),f===void 0?[3,4]:f.done?(a=f,[2]):[4,r(f.value)];case 3:p.sent(),p.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return h=d.return,h?[4,d.return()]:[3,8];case 7:h=p.sent(),p.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return u.sent(),[2,a&&a.value];case 3:return i(),[7];case 4:return[2]}})})})}function P4t(t){var e=this,n=jR(t,{returnValues:!0});return new gC(function(r,i){return zv(e,void 0,void 0,function(){var s,o,a,l;return cm(this,function(u){switch(u.label){case 0:if(!n.length)return i(),[2,[]];o=!1,i.then(function(){s(),o=!0}),u.label=1;case 1:u.trys.push([1,,6,8]),u.label=2;case 2:return o?[3,5]:(Promise.all(n.map(function(d){return d.next()})).then(function(d){return s(d)},function(d){return i(d)}),[4,new Promise(function(d){return s=d})]);case 3:return a=u.sent(),a===void 0?[2]:(l=a.map(function(d){return d.value}),a.some(function(d){return d.done})?[2,l]:[4,r(l)]);case 4:return u.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(n.map(function(d){return d.return&&d.return()}))];case 7:return u.sent(),[7];case 8:return[2]}})})})}function N4t(t){var e=this,n=jR(t,{yieldValues:!0,returnValues:!0});return new gC(function(r,i){return zv(e,void 0,void 0,function(){var s,o,a,l,u,d=this;return cm(this,function(c){switch(c.label){case 0:if(!n.length)return i(),[2,[]];o=[],a=!1,i.then(function(){var f,h;s();try{for(var p=L1(o),g=p.next();!g.done;g=p.next()){var b=g.value;b()}}catch(y){f={error:y}}finally{try{g&&!g.done&&(h=p.return)&&h.call(p)}finally{if(f)throw f.error}}a=!0}),c.label=1;case 1:return c.trys.push([1,,5,7]),Promise.all(n.map(function(f){return f.next()})).then(function(f){return s(f)},function(f){return i(f)}),[4,new Promise(function(f){return s=f})];case 2:return l=c.sent(),l===void 0?[2]:(u=l.map(function(f){return f.value}),l.every(function(f){return f.done})?[2,u]:[4,r(u.slice())]);case 3:return c.sent(),[4,Promise.all(n.map(function(f,h){return zv(d,void 0,void 0,function(){var p;return cm(this,function(g){switch(g.label){case 0:if(l[h].done)return[2,l[h].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(f.next()).then(function(b){return o[h](b)},function(b){return i(b)}),[4,new Promise(function(b){return o[h]=b})]);case 2:return p=g.sent(),p===void 0?[2,l[h].value]:p.done?[2,p.value]:(u[h]=p.value,[4,r(u.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,c.sent()];case 5:return i(),[4,Promise.all(n.map(function(f){return f.return&&f.return()}))];case 6:return c.sent(),[7];case 7:return[2]}})})})}const lD=class lD{constructor(){tn(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(e){if(e<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}};tn(lD,"global",new lD);let ST=lD;const B4t=40,z4t=16;function ez(t,e){e=Math.min(Math.max(+e,2),65535);let n=t,r=n;do r+=n=Math.ceil(n/e);while(n!==1);return 40*r}function j4t(t,e){if(e<2)throw Error("Node size must be at least 2");if(t===0)throw Error("Number of items must be greater than 0");let n=t,r=n,i=[n];do r+=n=Math.ceil(n/e),i.push(n);while(n!==1);let s=[];for(let a of(n=r,i))s.push(n-a),n-=a;let o=[];for(let a=0;a<i.length;a++)o.push([s[a],s[a]+i[a]]);return o}async function*U4t(t,e,n,r){class i{constructor(h,p){tn(this,"_level");tn(this,"nodes");this._level=p,this.nodes=h}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(h){this.nodes[1]=h}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:s,minY:o,maxX:a,maxY:l}=n,u=j4t(t,e),d=u[0][0],c=[new i([0,1],u.length-1)];for(;c.length!=0;){let f=c.shift(),h=f.startNodeIdx(),p=h>=d,g=(()=>{let[,v]=u[f.level()],w=Math.min(f.endNodeIdx()+e,v);return p&&w<v?w+1:w})(),b=g-h,y=new DataView(await r(40*h,40*b));for(let v=h;v<g;v++){let w=v-h,E=40*w;if(a<y.getFloat64(E+0,!0)||l<y.getFloat64(E+8,!0)||s>y.getFloat64(E+16,!0)||o>y.getFloat64(E+24,!0))continue;let S=y.getBigUint64(E+32,!0);if(p){let R=(()=>{if(!(v<t-1))return null;{let B=(w+1)*40;return y.getBigUint64(B+32,!0)-S}})(),O=v-d;yield[Number(S),O,Number(R)];continue}let T=ST.global.extraRequestThreshold()/40,D=c[c.length-1];if(D!==void 0&&D.level()==f.level()-1&&S<D.endNodeIdx()+T){D.extendEndNodeIdx(Number(S));continue}let k=(()=>{let R=f.level()-1;return new i([Number(S),Number(S)+1],R)})();D!==void 0&&(D.level(),k.level()),c.push(k)}}}const Gg=new Uint8Array([102,103,98,3,102,103,98,0]),Yf=4;class tz{constructor(e,n,r,i,s){tn(this,"headerClient");tn(this,"header");tn(this,"headerLength");tn(this,"indexLength");tn(this,"nocache");this.headerClient=e,this.header=n,this.headerLength=r,this.indexLength=i,this.nocache=s}static async open(e,n){let r,i=new xCe(e,n),s=2024+(()=>{let u,d=0;for(u=0;u<3;u++)d+=z4t**u*B4t;return d})();if(!new Uint8Array(await i.getRange(0,8,s,"header")).subarray(0,3).every((u,d)=>Gg[d]===u))throw Error("Not a FlatGeobuf file");if((r=new DataView(await i.getRange(8,4,s,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let o=await i.getRange(12,r,s,"header"),a=J7(new yh(new Uint8Array(o))),l=ez(a.featuresCount,a.indexNodeSize);return new tz(i,a,r,l,n)}async*selectBbox(e){let n=this.lengthBeforeTree(),r=this.headerClient,i=async function(l,u){return r.getRange(n+l,u,0,"index")},s=[],o=[];for await(let l of U4t(this.header.featuresCount,this.header.indexNodeSize,e,i)){let[u,d]=l,[,,c]=l;if(c||(c=4),o.length==0){o.push([u,c,d]);continue}let f=o[o.length-1];u-(f[0]+f[1])>ST.global.extraRequestThreshold()&&(s.push(o),o=[]),o.push([u,c,d])}this.headerClient.logUsage("header+index"),o.length>0&&s.push(o);let a=s.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*gC.merge(a)}lengthBeforeTree(){return Gg.length+Yf+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(e){return new xCe(this.headerClient.httpClient,e)}async*readFeatureBatch(e,n){let[r]=e[0],[i,s]=e[e.length-1],o=this.buildFeatureClient(n),a=i+s-r;for(let[l,,u]of e){let d=await this.readFeature(o,l,a);yield{id:u,feature:d},a=0}o.logUsage("feature")}async readFeature(e,n,r){let i,s=n+this.lengthBeforeFeatures();i=new DataView(await e.getRange(s,4,r,"feature length")).getUint32(0,!0);let o=new Uint8Array(await e.getRange(s+4,i,r,"feature data")),a=new Uint8Array(i+Yf);a.set(o,Yf);let l=new yh(a);return l.setPosition(Yf),yc.getRootAsFeature(l)}}let xCe=class{constructor(e,n){tn(this,"httpClient");tn(this,"bytesEverUsed",0);tn(this,"bytesEverFetched",0);tn(this,"buffer",new ArrayBuffer(0));tn(this,"head",0);if(typeof e=="string")this.httpClient=new wCe(e,n);else if(e instanceof wCe)this.httpClient=e;else throw Error("Unknown source ")}async getRange(e,n,r,i){this.bytesEverUsed+=n;let s=e-this.head,o=s+n;if(s>=0&&o<=this.buffer.byteLength)return this.buffer.slice(s,o);let a=Math.max(n,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(e,a,i),this.head=e,this.buffer.slice(0,n)}logUsage(e){e.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}};class wCe{constructor(e,n){tn(this,"url");tn(this,"nocache");tn(this,"requestsEverMade",0);tn(this,"bytesEverRequested",0);this.url=e,this.nocache=n}async getRange(e,n,r){this.requestsEverMade+=1,this.bytesEverRequested+=n;let i={Range:`bytes=${e}-${e+n-1}`};return this.nocache&&(i["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:i})).arrayBuffer()}}function q4t(t,e,n){if(!t.subarray(0,3).every((d,c)=>Gg[c]===d))throw Error("Not a FlatGeobuf file");let r=new yh(t),i=r.readUint32(Gg.length);r.setPosition(Gg.length+Yf);let s=J7(r),o=Gg.length+Yf+i,{indexNodeSize:a,featuresCount:l}=s;a>0&&(o+=ez(l,a));let u=[];for(;o<r.capacity();){let d=r.readUint32(o);r.setPosition(o+Yf);let c=yc.getRootAsFeature(r);u.push(e(u.length,c,s)),o+=Yf+d}return u}async function*H4t(t,e,n){let r,i=D4t(t),s=async h=>await i.slice(h),o=new Uint8Array(await s(8));if(!o.subarray(0,3).every((h,p)=>Gg[p]===h))throw Error("Not a FlatGeobuf file");o=new Uint8Array(await s(4));let a=new yh(o),l=a.readUint32(0);o=new Uint8Array(await s(l));let u=J7(a=new yh(o)),{indexNodeSize:d,featuresCount:c}=u;if(d>0){let h=ez(c,d);await s(h)}let f=0;for(;r=await V4t(s,u,e,f++);)yield r}async function*G4t(t,e,n,r,i=!1){let s=await tz.open(t,i);for await(let o of s.selectBbox(e))yield n(o.id,o.feature,s.header)}async function V4t(t,e,n,r){let i=new Uint8Array(await t(4,"feature length"));if(i.byteLength===0)return;let s=new yh(i),o=s.readUint32(0);i=new Uint8Array(await t(o,"feature data"));let a=new Uint8Array(o+4);return a.set(i,4),(s=new yh(a)).setPosition(Yf),n(r,yc.getRootAsFeature(s),e)}function W4t(t,e){return{type:"FeatureCollection",features:q4t(t,Z7)}}function Y4t(t,e){return H4t(t,Z7)}function X4t(t,e,n,r=!1){return G4t(t,e,Z7,n,r)}function Z4t(t,e,n,r=!1){return t instanceof Uint8Array?W4t(t):t instanceof ReadableStream?Y4t(t):X4t(t,e,n,r)}const _Ce=new bD({featureProjection:"EPSG:3857"});class K4t extends aE{constructor(e){super({url:e.url,attributions:e.attributions,wrapX:e.wrapX,format:_Ce,strategy:PUe}),this.ressourceURL=e.url,super.setLoader(this.loader)}fgbBoundingBox(e,n){const r=ske(e,n.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(e,n,r,i,s){const o=this.fgbBoundingBox(e,r);try{if(o.minX!==-1/0){const a=[],l=Z4t(this.ressourceURL,o);for await(const u of l){const d=_Ce.readFeature(u);a.push(d)}super.clear(),super.addFeatures(a),i(a)}}catch{s()}}}window.eoxMapAdvancedOlSources={...nJe,WMTSCapabilities:E4t,FlatGeoBuf:K4t};function J4t(t,e="property"){return t.map(([n,r])=>{var s,o;if(n==="extent"&&((o=(s=r.value)==null?void 0:s.temporal)==null?void 0:o.interval.length)>0){const a=r.value.temporal.interval[0];Array.isArray(a)&&(typeof a[0]=="string"||typeof a[1]=="string")&&(r.formatted=`${new Date(a[0]).toISOString().substring(0,10)} - ${new Date(a[1]).toISOString().substring(0,10)}`)}r.formatted=r.formatted.replace(new RegExp('(?<!href="|src=")(http|https|ftp):\\/\\/([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])',"gi"),a=>`<a target="_blank" href="${a}">${a}</a>`);const i=a=>Object.entries(a).filter(([l,u])=>{let d=!0;return u.roles&&(d=u.roles.includes("metadata")),u.rel&&(d=u.rel==="example"),d});return(n==="assets"||n==="links"||n==="providers")&&(e==="property"?r.formatted=`<ul>${i(r.value).map(([a,l])=>`<li>
                <a target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}</a
                >
              </li>`).join("")}</ul>`:e==="featured"&&(r.formatted=i(r.value).map(([a,l])=>`<div class="button-container">
                ${l.description?`<div><p>${l.description}</p></div>`:""}
                <a class="button icon-text small block" target="_blank" href="${l.href||l.url}"
                  >${l.name||l.title||a}
                  </a>
              </div>`).join(""))),["providers","assets","links"].includes(n)&&(r.length=i(r.value).length),[n,r]})}function Q4t(t){t.stacInfo.length&&(t.stacProperties=t.stacInfo.reduce((e,n)=>({...e,...n.properties}),{}),t.requestUpdate())}var A5,ECe;function R1(){if(ECe)return A5;ECe=1;const t={collatorOptions:{},numberFormatterOptions:{maximumFractionDigits:10},dateFormatterOptions:{day:"numeric",month:"numeric",year:"numeric"},dateTimeFormatterOptions:{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC",timeZoneName:"short"}};return A5={locales:[],collator:new Intl.Collator(t.collatorOptions),dateFormatter:new Intl.DateTimeFormat(t.dateFormatterOptions),dateTimeFormatter:new Intl.DateTimeFormat(t.dateTimeFormatterOptions),numberFormatter:new Intl.NumberFormat(t.numberFormatterOptions),translate:null,getDefaults(){return t},setLocales(n,r={},i={},s={},o={}){this.locales=n,o=Object.assign({},t.collatorOptions,o),this.collator=new Intl.Collator(n,o),r=Object.assign({},t.dateFormatterOptions,r),this.dateFormatter=new Intl.DateTimeFormat(n,r),i=Object.assign({},t.dateTimeFormatterOptions,i),this.dateTimeFormatter=new Intl.DateTimeFormat(n,i),s=Object.assign({},t.numberFormatterOptions,s),this.numberFormatter=new Intl.NumberFormat(n,s)},setTranslator(n){this.translate=n},format(n,r=null){if(r)for(let i in r)n=n.replaceAll(`{${i}}`,r[i]);return n}},A5}var k5,CCe;function yC(){if(CCe)return k5;CCe=1;const t=R1(),e={e(n){return typeof n!="string"&&(n=String(n)),n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t(n,r=null){return typeof t.translate=="function"?t.translate(n,r):t.format(n,r)},toNothing(n=null){return n===null&&(n=e.t("n/a")),`<i class="null">${n}</i>`},toList(n,r=!1,i=null,s=null){let o=s===!0?"ol":"ul";return Array.isArray(n)||(n=[n]),r&&(n=n.slice(0),typeof r=="function"?n.sort(r):n.sort(),s===null&&(o="ol")),typeof i=="function"&&(n=n.map(i)),n.length===0?e.toNothing():n.length===1?n[0]:`<${o}><li>${n.join("</li><li>")}</li></${o}>`},toLink(n,r="",i="",s="_blank"){return r||(n.length>50?r=n.replace(/^\w+:\/\/([^\/]+)((\/[^\/\?]+)*\/([^\/\?]+)(\?.*)?)?$/i,function(...o){return o[4]?o[1]+"/[]/"+o[4]:o[1]}):r=n.replace(/^\w+:\/\//i,"")),`<a href="${e.e(n)}" rel="${e.e(i)}" target="${e.e(s)}">${e.e(r)}</a>`},toObject(n,r=null,i=null,s=[],o=null,a=[]){let l="<dl>",u=Array.isArray(s)&&s.length>=2?s:Object.keys(n);for(let d of u){if(!(d in n)||typeof o=="function"&&a.length>0&&!o(a[0],a.concat([d])))continue;let c;typeof i=="function"?c=i(d,n):c=e.formatKey(d,!0);let f=n[d];typeof r=="function"&&(f=r(f,d,n)),l+=`<dt>${c}</dt><dd>${f}</dd>`}return l+="</dl>",l},abbrev(n,r){return`<abbr title="${e.e(r)}">${e.e(n)}</abbr>`},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},formatKey(n,r=!1){if(n.includes("/"))return e.e(e.t(n));r===!1&&(n=n.replace(/^[\w-]+:/i,""));let i=n.split(/[:_\-\s]/g).map(s=>s.substr(0,1).toUpperCase()+s.substr(1)).join(" ");return e.e(e.t(i))},hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(r=>parseInt(r,16)))},uint8ToHex(n){return n.reduce((r,i)=>r+i.toString(16).padStart(2,"0"),"")},keysFromListOfObjects(n){return n.reduce((r,i)=>Object.keys(i).reduce((s,o)=>(s.indexOf(o)==-1&&s.push(o),s),r),[])},unit(n,r=""){return typeof r=="string"&&r.length>0?(r=e.t(r),`${n}&nbsp;<span class="unit">${r}</unit>`):n}};return k5=e,k5}var T5,SCe;function eMt(){if(SCe)return T5;SCe=1;const t=yC(),e=R1(),n={fields(r){let i=["extensions","metadata","links","assets"];for(let s of i)for(let o in r[s])r[s][o]=n.field(r[s][o],r[s],r);return r},field(r,i={},s={}){if(typeof r=="string")return{label:r};if(typeof r.alias=="string"){let o=i[r.alias]||s.metadata[r.alias];if(!o)throw new Error("Alias is invalid: "+r.alias);return Object.assign(r,n.field(o,i,s))}if(t.isObject(r.items)){let o=[];for(let a in r.items)r.items[a]=n.field(r.items[a],i,s),o.push(Object.assign({key:a},r.items[a]));r.itemOrder=o.sort((a,l)=>a.id===!0?-1:l.id===!0?1:typeof a.order=="number"&&typeof l.order=="number"?a.order-l.order:e.collator.compare(t.t(a.label),t.t(l.label))).map(a=>a.key)}if(t.isObject(r.properties))for(let o in r.properties)r.properties[o]=n.field(r.properties[o],i,s);return r}};return T5=n,T5}var D5,ACe;function nz(){if(ACe)return D5;ACe=1;const t=eMt(),e={externalRenderer:!1,dependencies:{},fields:{assets:{},extensions:{},links:{},metadata:{}},exportFields(){return this.fields},importFields(n){n=t.fields(n);for(let r in this.fields)Object.assign(this.fields[r],n[r])},getDependency(n){return this.dependencies[n]||console.warn(`Dependency '${n}' not registered.`),this.dependencies[n]},addDependency(n,r){this.dependencies[n]=r},addExtension(n,r){this.fields.extensions[n]=t.field(r,this.fields.extensions)},addMetadataField(n,r){this.fields.metadata[n]=t.field(r,this.fields.metadata)},addLinkField(n,r){this.fields.links[n]=t.field(r,this.fields.links)},addAssetField(n,r){this.fields.assets[n]=t.field(r,this.fields.assets)},addMetadataFields(n){for(var r in n)e.addMetadataField(r,n[r])},getExtension(n){return this.fields.extensions[n]?this.fields.extensions[n]:{}},getSpecification(n,r=null){let i={};return r==="assets"&&this.fields.assets[n]?i=this.fields.assets[n]:r==="links"&&this.fields.links[n]?i=this.fields.links[n]:this.fields.metadata[n]&&(i=this.fields.metadata[n]),i}};return D5=e,D5}const tMt={alternate:"Alternative Access Methods",anon:"Anonymized Location",card4l:{label:"CARD4L",explain:"CEOS Analysis Ready Data for Land"},classification:"Classification",contacts:"Contacts",cube:"Data Cube",esa_cci_lc:"ESA Climate Change Initiative - Land Cover",eo:"Electro-Optical",forecast:"Forecast",file:"File",grid:"Gridded Data",goes:{label:"NOAA GOES",explain:"NOAA Geostationary Operational Environmental Satellite"},label:"Labels / ML",language:"Internationalization / Localization",mgrs:{label:"MGRS",explain:"Military Grid Reference System"},noaa_mrms_qpe:{label:"NOAA MRMS QPE",explain:"NOAA Multi-Radar Multi-Sensor Quantitative Precipitation Estimation"},odc:"Open Data Cube",order:"Order",pc:"Point Cloud",processing:"Processing",product:"Product",proj:"Projection",raster:"Raster Imagery",sar:{label:"SAR",explain:"Synthetic Aperture Radar"},sat:"Satellite",sci:"Scientific",ssys:"Solar System",stats:"STAC Statistics",storage:"Cloud Storage",table:"Tabular Data",themes:"Themes",tiles:"Tiled Assets",view:"View Geometry","web-map-links":"Web Maps",xarray:"xarray",gee:"Google Earth Engine",landsat:"Landsat",msft:"Microsoft",openeo:"openEO",pl:"Planet Labs PBC",s2:"Sentinel-2",sentinel:"Copernicus Sentinel",cbers:{label:"CBERS",explain:"China-Brazil Earth Resources Satellite Program"},geoadmin:{label:"swisstopo",explain:"Federal Office of Topography (Switzerland)"}},nMt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},rel:{label:"Relation",explain:"Based on IANA relation types",mapping:{self:"This document",root:"Root STAC Catalog",parent:"Parent STAC Catalog",collection:"STAC Collection",derived_from:"STAC Item for input data",about:"About this resource",alternate:"Alternative representation",via:"Source metadata",next:"Next page",prev:"Previous page",canonical:"Origin of this document","processing-expression":"Processing inctructions/code","latest-version":"Latest version","predecessor-version":"Predecessor version","successor-version":"Successor version",source:"Source data","cite-as":"Citation information",related:"Related resource",describedby:"Description of the resource","service-desc":"API definitions","service-doc":"API user documentation",conformance:"API conformance declaration",order:"Order details","3d-tiles":"3D Tiles",pmtiles:"PMTiles",tilejson:"TileJSON",wms:"OGC Web Map Service (WMS)",wmts:"OGC Web Map Tile Service (WMTS)",xyz:"XYZ Web Map"}},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},method:"HTTP Method",headers:"HTTP Headers",body:"Request Body"},rMt={href:{label:"URL",format:"Url"},hreflang:{label:"Language",format:"LanguageCode"},type:{label:"File Format",explain:"Based on the IANA media (MIME) types",format:"MediaType"},roles:{label:"Purpose",mapping:{thumbnail:"Preview",overview:"Overview",visual:"Visualization",data:"Data",metadata:"Metadata",graphic:"Illustration"}},alternate:{label:"Alternatives",listWithKeys:!0,items:{href:{label:"URL",format:"Url"},title:{alias:"title"},description:{alias:"description"}},summary:!1,ext:"alternate"},"pl:asset_type":"Asset Type","pl:bundle_type":"Bundle Type","table:storage_options":{alias:"xarray:storage_options"},"xarray:open_kwargs":{label:"Read Options",custom:!0,summary:!1},"xarray:storage_options":{label:"fsspec Options",custom:!0,summary:!1}},iMt=JSON.parse('{"id":"Identifier","keywords":"Keywords","datetime":{"label":"Time of Data","format":"Timestamp","summary":false},"title":{"label":"Title","summary":false},"description":{"label":"Description","format":"CommonMark","summary":false},"roles":"Purpose","start_datetime":{"label":"Time of Data begins","format":"Timestamp","summary":false},"end_datetime":{"label":"Time of Data ends","format":"Timestamp","summary":false},"created":{"label":"Created","format":"Timestamp","summary":"r"},"updated":{"label":"Updated","format":"Timestamp","summary":"r"},"published":{"label":"Published","format":"Timestamp","summary":"r"},"expires":{"label":"Expires","format":"Timestamp","summary":"r"},"unpublished":{"label":"Unpublished","format":"Timestamp","summary":"r"},"license":{"label":"License","format":"License","summary":false},"providers":{"label":"Providers","format":"Providers","summary":false},"platform":"Platform","instruments":{"label":"Instruments","format":"CSV"},"constellation":"Constellation","mission":"Mission","gsd":{"label":"GSD","explain":"Ground Sample Distance","unit":"m"},"bands":{"label":"Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"alias":"description","order":2},"gsd":{"alias":"gsd","sortable":true},"nodata":{"alias":"nodata"},"data_type":{"alias":"data_type","sortable":true},"statistics":{"alias":"statistics"},"eo:common_name":{"alias":"eo:common_name","sortable":true,"order":1},"eo:center_wavelength":{"alias":"eo:center_wavelength","sortable":true},"eo:full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true},"eo:solar_illumination":{"alias":"eo:solar_illumination","sortable":true},"raster:sampling":{"alias":"raster:sampling","sortable":true},"unit":{"alias":"unit","sortable":true},"raster:bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"raster:spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"raster:scale":{"alias":"raster:scale","sortable":true},"raster:offset":{"alias":"raster:offset","sortable":true},"raster:histogram":{"alias":"raster:histogram"},"classification:classes":{"alias":"classification:classes"},"classification:bitfields":{"alias":"classification:bitfields"}}},"nodata":{"label":"No-Data Values","format":"CSV","summary":false},"data_type":{"label":"Data Type of Values","format":"FileDataType"},"unit":"Unit of Values","statistics":{"label":"Statistics","listWithKeys":true,"items":{"mean":"Average","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stdev":{"label":"Std. Dev.","explain":"Standard Deviation"},"count":{"label":"Count","explain":"Total number of values"},"valid_percent":{"label":"Valid","explain":"Percentage of valid values","unit":"%"}}},"version":{"label":"Data Version","summary":false},"deprecated":{"label":"Deprecated","summary":false},"experimental":{"label":"Experimental","summary":false},"language":{"label":"Current Language","ext":"language","summary":"v","properties":{"name":{"label":"Name"},"alternate":{"label":"Alternate Name"},"code":{"label":"Code"},"dir":{"label":"Direction","explain":"Reading and writing direction","mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"languages":{"label":"Available Languages","ext":"language","summary":false,"items":{"name":{"label":"Name","sortable":true,"order":0},"alternate":{"label":"Alternate Name","sortable":true,"order":1},"code":{"label":"Code","sortable":true,"order":2},"dir":{"label":"Direction","explain":"Reading and writing direction","sortable":true,"order":3,"mapping":{"ltr":"left-to-right","rtl":"right-to-left"},"default":"ltr"}}},"contacts":{"label":"Contacts","ext":"contacts","summary":"v","items":{"name":{"label":"Name"},"identifier":{"label":"Identifier"},"position":{"label":"Position"},"organization":{"label":"Organization"},"logo":{"label":"Logo","format":"Image"},"phones":{"label":"Phone","items":{"value":{"label":"Number","format":"Phone","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal","fax":"Fax"}}}},"emails":{"label":"Email","items":{"value":{"label":"Address","format":"Email","order":0},"roles":{"label":"Used For","order":1,"mapping":{"work":"Work","home":"Personal"}}}},"addresses":{"label":"Postal Addresses","format":"Address","items":{"deliveryPoint":{"label":"Street / House","order":0},"city":{"label":"City","order":1},"administrativeArea":{"label":"State / Province","order":2},"postalCode":{"label":"Postal Code","order":3},"country":{"label":"Country","order":4}}},"links":{"label":"Additional Resources","format":"Link"},"contactInstructions":"Further Instructions","roles":{"label":"Types","format":"CSV"}}},"themes":{"label":"Themes","ext":"themes","summary":false,"items":{"scheme":{"label":"Vocabulary","order":0,"format":"Url"},"concepts":{"label":"Terms","order":1,"format":"Concepts","items":{"id":{"label":"Identifier","order":0},"title":{"label":"Title","order":1},"description":{"label":"Description","order":2},"url":{"label":"URL","order":3,"format":"Url"}}}}},"crs":{"label":"CRS","format":"CRS","explain":"Coordinate Reference System"},"anon:size":{"label":"Uncertainty","unit":"","explain":"The size of one side of the anonymized bounding box"},"anon:warning":{"label":"Warning","summary":false},"classification:classes":{"summary":false,"label":"Classes","items":{"color_hint":{"label":"Color","order":0,"format":"HexColor"},"value":{"label":"Value","sortable":true,"order":1},"title":{"label":"Title","sortable":true,"order":2},"name":{"label":"Identifier","sortable":true,"order":3},"description":{"label":"Description","order":4,"format":"CommonMark"},"percentage":{"label":"Percentage of samples","sortable":true,"order":5,"unit":"%"},"count":{"label":"Number of samples","sortable":true,"order":6},"nodata":{"label":"No-data value","order":7,"default":false}}},"classification:bitfields":{"summary":false,"label":"Bit Mask","items":{"name":{"label":"Name","sortable":true,"order":0},"offset":{"label":"Offset","explain":"Offset to the first bit","order":1},"length":{"label":"Number of bits","order":2},"description":{"label":"Description","order":3,"format":"CommonMark"},"classes":{"alias":"classification:classes"},"roles":{"label":"Purpose"}}},"cube:dimensions":{"label":"Dimensions","summary":false,"listWithKeys":true,"items":{"type":{"label":"Type","order":0},"axis":{"label":"Axis","order":1},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"bbox":{"alias":"proj:bbox","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":5},"geometry_types":{"label":"Geometry Types","order":5},"reference_system":{"label":"Reference System","explain":"Coordinate / Temporal / Other Reference System","order":6}}},"cube:variables":{"label":"Variables","summary":false,"listWithKeys":true,"items":{"dimensions":{"label":"Dimensions","order":0},"type":{"label":"Type","order":1,"mapping":{"data":"Measured values","auxiliary":"Coordinate data"}},"description":{"label":"Description","format":"CommonMark","order":2},"extent":{"label":"Extent","format":"Extent","order":3},"values":{"label":"Values","order":4},"step":{"label":"Step","order":5},"unit":{"alias":"unit","order":6}}},"eo:bands":{"label":"Spectral Bands","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"common_name":{"alias":"eo:common_name","sortable":true,"order":1},"center_wavelength":{"alias":"eo:center_wavelength","sortable":true,"order":2},"full_width_half_max":{"alias":"eo:full_width_half_max","sortable":true,"order":3},"solar_illumination":{"alias":"eo:solar_illumination","sortable":true,"order":7},"description":{"alias":"description"},"gsd":{"alias":"gsd","sortable":true},"cloud_cover":{"alias":"eo:cloud_cover","sortable":true}}},"eo:cloud_cover":{"label":"Cloud Cover","unit":"%"},"eo:snow_cover":{"label":"Snow/Ice Cover","unit":"%"},"eo:common_name":"Common Name","eo:center_wavelength":{"label":"Wavelength","explain":"The center wavelength of the band","unit":"m"},"eo:full_width_half_max":{"label":"FWHM","explain":"Full Width Half Max","unit":"m"},"eo:solar_illumination":{"label":"Solar Illumination","unit":"W/m/m"},"forecast:reference_datetime":{"label":"Reference Time","format":"Timestamp","summary":"r"},"forecast:horizon":{"label":"Forecast Horizon","explain":"The time between the reference time and the forecast time","format":"Duration"},"forecast:duration":{"label":"Forecast Length","format":"Duration"},"file:bits_per_sample":{"alias":"raster:bits_per_sample"},"file:byte_order":"Byte Order","file:checksum":{"label":"Checksum","format":"Checksum","summary":false},"file:data_type":{"alias":"data_type"},"file:header_size":{"label":"Header Size","format":"FileSize","summary":false},"file:nodata":{"alias":"nodata"},"file:size":{"label":"Size","format":"FileSize","summary":false},"file:unit":{"alias":"unit"},"file:values":{"label":"Map of Values","summary":false,"items":{"values":{"label":"Values","format":"CSV","order":1},"summary":{"label":"Summary","order":0}}},"file:local_path":{"label":"Local Path","summary":false},"nodata:values":{"alias":"nodata"},"goes:orbital_slot":"Orbital Slot","goes:system_environment":{"label":"System Environment","mapping":{"OR":"Operational system, real-time data","OT":"Operational system, test data","IR":"Test system, real-time data","IT":"Test system, test data","IP":"Test system, playback data","IS":"Test system, simulated data"}},"goes:image_type":{"label":"Area","mapping":{"FULL DISK":"The Americas (full disk)","CONUS":"North America (continental US)","MESOSCALE":"Central/South America (mesoscale)"}},"goes:mesoscale_image_number":{"label":"Area in Central/South America","mapping":{"1":"Region 1","2":"Region 2"}},"goes:mode":{"label":"Capture Mode","mapping":{"3":"3: 1x full disk, 3x continental US, 30x mesoscale region 1, 30x mesoscale region 2 (every 15 minutes)","4":"4: 1x full disk (every 5 minutes)","6":"6: 1x full disk, 2x continental US, 20x mesoscale region 1, 20x mesoscale region 2 (every 10 minutes)"}},"goes:group_time_threshold":{"label":"Time Threshold in a Group","explain":"Lightning group maximum time difference among lightning events in a group","unit":"s"},"goes:flash_time_threshold":{"label":"Time Threshold in a Flash","explain":"Lightning flash maximum time difference among lightning events in a flash","unit":"s"},"goes:lightning_wavelength":{"label":"Central Wavelength","unit":"nm"},"goes:yaw_flip_flag":{"label":"Yaw Flip Configuration","explain":"Flag indicating that the spacecraft is operating in yaw flip configuration.","mapping":{"0":"Upright","1":"Neither","2":"Inverted"}},"goes:event_count":"Lightning Events","goes:group_count":"Lightning Groups","goes:flash_count":"Lightning Flashes","goes:nominal_satellite_subpoint_lat":{"label":"Satellite Subpoint Latitude","unit":"N"},"goes:nominal_satellite_subpoint_lon":{"label":"Satellite Subpoint Longitude","unit":"E"},"goes:nominal_satellite_height":{"label":"Satellite Height","explain":"Nominal satellite height above GRS 80 ellipsoid","unit":"km"},"goes:percent_navigated_L1b_events":{"label":"Events navigated by Instrument","format":"Percent0to1","unit":"%"},"goes:percent_uncorrectable_L0_errors":{"label":"Data Lost","format":"Percent0to1","unit":"%"},"grid:code":{"label":"Grid","format":"GridCode"},"raster:bands":{"label":"Layers","items":{"nodata":{"alias":"nodata"},"sampling":{"alias":"raster:sampling","sortable":true},"data_type":{"alias":"data_type","sortable":true},"bits_per_sample":{"alias":"raster:bits_per_sample","sortable":true},"spatial_resolution":{"alias":"raster:spatial_resolution","sortable":true},"statistics":{"alias":"statistics"},"unit":{"alias":"unit","sortable":true},"scale":{"alias":"raster:scale","sortable":true},"offset":{"alias":"raster:offset","sortable":true},"histogram":{"alias":"raster:histogram"}}},"raster:sampling":{"label":"Sampling","mapping":{"area":"Area","point":"Point (at pixel center)"}},"raster:bits_per_sample":"Bits per Sample","raster:spatial_resolution":{"label":"Resolution","explain":"Average spatial resolution","unit":"m"},"raster:scale":"Scale","raster:offset":"Offset","raster:histogram":{"label":"Histogram","custom":true},"label:properties":{"label":"Properties","null":"raster data"},"label:classes":{"label":"Classes","items":{"name":{"label":"Name","null":"raster-formatted","sortable":true,"id":true},"classes":"Classes"}},"label:description":{"label":"Description","format":"CommonMark","summary":false},"label:type":"Type","label:tasks":"Tasks","label:methods":"Methods","label:overviews":{"label":"Overviews","summary":false,"items":{"property_key":{"label":"Property Key","id":true},"counts":{"label":"Counts","custom":true},"statistics":{"label":"Statistics","custom":true}}},"mgrs:latitude_band":"Latitude Band","mgrs:grid_square":"Grid Square","mgrs:utm_zone":"UTM Zone","noaa_mrms_qpe:pass":{"label":"Pass Number","mapping":{"1":"1 (less latency / less gauges)","2":"2 (more latency / more gauges)"}},"noaa_mrms_qpe:period":{"label":"Accumulation Period","unit":"h"},"noaa_mrms_qpe:region":{"label":"Region","mapping":{"CONUS":"Continental US","HAWAII":"Hawaii","GUAM":"Guam","ALASKA":"Alaska","CARIB":"Caribbean Islands"}},"openeo:status":"Processing Status","api_version":{"label":"API Version","ext":"openeo"},"backend_version":{"label":"Back-End Version","ext":"openeo"},"production":{"label":"Production-Ready","ext":"openeo"},"endpoints":{"label":"Supported Endpoints","ext":"openeo","summary":false,"items":{"path":{"label":"Path Template","order":0},"methods":{"label":"HTTP Methods","order":1,"format":"CSV"}}},"billing":{"label":"Billing","ext":"openeo","custom":true,"summary":false},"order:status":{"label":"Status","mapping":{"orderable":"Orderable (data can be ordered)","ordered":"Ordered (preparing to deliver data)","pending":"Pending (waiting for activation)","shipping":"Shipping (data is getting processed)","succeeded":"Delivered (data is available)","failed":"Failed (unable to deliver)","canceled":"Canceled (delivery stopped)"}},"order:id":"Identifier","order:date":{"label":"Submitted","format":"Timestamp","summary":"r"},"order:expiration_date":{"alias":"expires"},"pc:count":{"label":"Points","explain":"Number of Points"},"pc:type":"Type","pc:encoding":"Format","pc:schemas":{"label":"Schemas","summary":false,"items":{"name":{"label":"Name","sortable":true,"id":true},"size":{"label":"Size","unit":"bytes","sortable":true},"type":{"label":"Type","sortable":true}}},"pc:density":"Density","pc:statistics":{"label":"Statistics","summary":"s","items":{"name":{"label":"Name","id":true},"position":"Position","average":"Average","count":"Count","maximum":{"label":"Max.","explain":"Maxmimum value"},"minimum":{"label":"Min.","explain":"Minimum value"},"stddev":{"label":"Std. Dev.","explain":"Standard Deviation"},"variance":"Variance"}},"processing:expression":{"label":"Processing Instructions","summary":false},"processing:lineage":{"label":"Lineage","format":"CommonMark","summary":false},"processing:level":"Level","processing:facility":"Facility","processing:software":{"label":"Software","format":"Software","summary":false},"processing:version":"Processor Version","processing:datetime":{"label":"Processing Time","format":"Timestamp","summary":"r"},"product:type":"Product Type","product:timeliness":{"label":"Timeliness","format":"Duration"},"product:timeliness_category":"Timeliness Category","product:acquisition_type":{"label":"Acquisition Type","mapping":{"nominal":"Nominal","calibration":"Calibration","other":"Other"}},"proj:epsg":{"label":"EPSG Code","format":"EPSG","summary":"v"},"proj:code":{"label":"Code","format":"CrsCode","summary":"v"},"proj:wkt2":{"label":"WKT2","explain":"Well-Known Text, version 2","format":"WKT2","summary":false},"proj:projjson":{"label":"PROJJSON","explain":"JSON encoding of WKT2","format":"PROJJSON","summary":false},"proj:geometry":{"label":"Footprint","custom":true,"summary":false},"proj:bbox":{"label":"Bounding Box","custom":true,"summary":false},"proj:centroid":{"label":"Centroid","custom":true,"summary":false},"proj:shape":{"label":"Image Dimensions","format":"Shape","summary":false},"proj:transform":{"label":"Transformation Matrix","format":"Transform","summary":false},"sar:instrument_mode":"Instrument Mode","sar:frequency_band":"Frequency Band","sar:center_frequency":{"label":"Center Frequency","unit":"GHz"},"sar:polarizations":{"label":"Polarizations","format":"CSV"},"sar:product_type":"Product Type","sar:resolution_range":{"label":"Range Resolution","unit":"m"},"sar:resolution_azimuth":{"label":"Azimuth Resolution","unit":"m"},"sar:pixel_spacing_range":{"label":"Range Pixel Spacing","unit":"m"},"sar:pixel_spacing_azimuth":{"label":"Azimuth Pixel Spacing","unit":"m"},"sar:looks_range":"Range Looks","sar:looks_azimuth":"Azimuth Looks","sar:looks_equivalent_number":{"label":"ENL","explain":"Equivalent Number of Looks"},"sar:observation_direction":"Observation Direction","sat:platform_international_designator":{"label":"Int. Designator","explain":"International designator for the platform, also known as COSPAR ID and NSSDCA ID."},"sat:orbit_state":"Orbit State","sat:absolute_orbit":{"label":"Abs. Orbit Number","explain":"Absolute Orbit Number"},"sat:relative_orbit":{"label":"Rel. Orbit Number","explain":"Relative Orbit Number"},"sat:anx_datetime":{"label":"ANX Time","format":"Timestamp","explain":"Ascending Node Crossing time","summary":"r"},"sci:doi":{"label":"DOI","format":"DOI"},"sci:citation":"Citation","sci:publications":{"label":"Publications","summary":false,"items":{"citation":{"label":"Publication","sortable":true,"order":0},"doi":{"label":"DOI","format":"DOI","sortable":true,"order":1}}},"ssys:targets":"Target Body","storage:platform":{"label":"Provider","mapping":{"ALIBABA":"Alibaba Cloud","AWS":"Amazon AWS","AZURE":"Microsoft Azure","GCP":"Google Cloud Platform","IBM":"IBM Cloud","ORACLE":"Oracle Cloud"}},"storage:region":"Region","storage:requester_pays":"Requester Pays","storage:tier":"Tier Type","table:columns":{"label":"Columns","items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"type":{"label":"Data Type","sortable":true,"order":1},"description":{"label":"Description","format":"CommonMark","order":2}}},"table:primary_geometry":"Primary Geometry Column","table:row_count":"Rows","table:tables":{"label":"Tables","summary":false,"listWithKeys":true,"items":{"name":{"label":"Name","sortable":true,"id":true,"order":0},"description":{"label":"Description","format":"CommonMark","order":1}}},"tiles:tile_matrix_sets":{"label":"Tile Matrix Sets","custom":true,"summary":false},"tiles:tile_matrix_set_links":{"label":"Tile Matrix Set Links","custom":true,"summary":false},"view:off_nadir":{"label":"Off-Nadir Angle","unit":""},"view:incidence_angle":{"label":"Incidence Angle","unit":""},"view:azimuth":{"label":"Viewing Azimuth","unit":""},"view:sun_azimuth":{"label":"Sun Azimuth","unit":""},"view:sun_elevation":{"label":"Sun Elevation","unit":""},"pl:black_fill":{"label":"Unfilled Image Parts","unit":"%"},"pl:clear_percent":{"label":"Clear Sky","unit":"%"},"pl:grid_cell":"Grid Cell","pl:ground_control":"Positional Accuracy","pl:ground_control_ratio":"Successful Rectification Ratio","pl:item_type":"Type","pl:pixel_resolution":{"label":"Spatial Resolution","unit":"m"},"pl:publishing_stage":{"label":"Publishing Stage","mapping":{"preview":"Preview","standard":"Standard","finalized":"Finalized"}},"pl:quality_category":{"label":"Quality Category","mapping":{"standard":"Standard","test":"Test"}},"pl:strip_id":"Image Strip ID","gee:type":{"label":"Type","mapping":{"image":"Single image","image_collection":"Image collection","table":"Table"}},"gee:cadence":"Cadence","gee:schema":{"label":"Variables","items":{"name":"Name","description":"Description","type":"Data Type"},"summary":false},"gee:revisit_interval":"Revisit Interval","gee:terms_of_use":{"label":"Terms of Use","format":"CommonMark","summary":false},"gee:visualizations":{"label":"Visualizations","custom":true,"summary":false},"landsat:scene_id":"Scene ID","landsat:collection_category":"Collection Category","landsat:collection_number":"Collection Number","landsat:wrs_type":{"label":"WRS Type","explain":"Worldwide Reference System Type"},"landsat:wrs_path":{"label":"WRS Path","explain":"Worldwide Reference System Path"},"landsat:wrs_row":{"label":"WRS Row","explain":"Worldwide Reference System Row"},"landsat:cloud_cover_land":{"label":"Land Cloud Cover","unit":"%"},"msft:container":"Container","msft:storage_account":"Storage Account","msft:short_description":{"label":"Summary","summary":false},"sentinel:utm_zone":"UTM Zone","sentinel:latitude_band":"Latitude Band","sentinel:grid_square":"Grid Square","sentinel:sequence":"Sequence","sentinel:product_id":{"label":"Product ID","summary":"s"},"sentinel:data_coverage":{"label":"Data Coverage","unit":"%"},"sentinel:valid_cloud_cover":"Valid Cloud Cover","cbers:data_type":{"label":"Processing Level","explain":"Geolocation precision level","mapping":{"L2":"Geolocation using only satellite telemetry","L3":"Control points used to geolocate image, no terrain correction","L4":"Control points used to geolocate image, orthorectified"},"summary":"v"},"cbers:path":"Reference Grid Path","cbers:row":"Reference Grid Row","card4l:specification":{"label":"Specification","mapping":{"SR":"Surface Reflectance (Optical)","ST":"Surface Temperature (Optical)","NRB":"Normalized Radar Backscatter (SAR)","POL":"Polarimetric Radar (SAR)"}},"card4l:specification_version":"Specification Version","card4l:orbit_mean_altitude":{"label":"Platform Altitude","unit":"m"},"card4l:incidence_angle_near_range":{"label":"Incidence Angle (near)","unit":""},"card4l:incidence_angle_far_range":{"label":"Incidence Angle (far)","unit":""},"card4l:noise_equivalent_intensity":{"label":"Noise Equivalent Intensity","unit":"dB"},"card4l:mean_faraday_rotation_angle":{"label":"Mean Faraday Rotation","unit":""},"card4l:speckle_filtering":{"label":"Speckle Filtering","custom":true,"summary":false,"null":"not applied"},"card4l:relative_rtc_accuracy":{"label":"Rel. RTC Accuracy","explain":"Relative accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:absolute_rtc_accuracy":{"label":"Abs. RTC Accuracy","explain":"Absolute accuracy of the Radiometric Terrain Correction","unit":"dB"},"card4l:northern_geometric_accuracy":{"label":"Northern Geometric Accuracy","unit":"m"},"card4l:eastern_geometric_accuracy":{"label":"Eastern Geometric Accuracy","unit":"m"},"card4l:ellipsoidal_height":{"label":"Ellipsoidal Height","unit":"m"},"geoadmin:variant":{"label":"Product Variant","mapping":{"krel":"RGB color with relief","komb":"RGB color without relief","kgrel":"Grayscale with relief","kgrs":"Grayscale without relief"}},"href:servers":{"label":"Servers","ext":"web-map-links"},"pmtiles:layers":{"label":"Layers","ext":"web-map-links"},"wms:layers":{"label":"Layers","ext":"web-map-links"},"wms:styles":{"label":"Styles","ext":"web-map-links"},"wms:dimensions":{"label":"Dimensions","ext":"web-map-links"},"wms:transparent":{"label":"Transparency","ext":"web-map-links"},"wmts:layer":{"label":"Layers","ext":"web-map-links"},"wmts:dimensions":{"label":"Dimensions","ext":"web-map-links"}}'),sMt={extensions:tMt,links:nMt,assets:rMt,metadata:iMt};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xf=function(){return Xf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xf.apply(this,arguments)},r0="\\d+(?:[\\.,]\\d+)?",oMt="("+r0+"W)",aMt="("+r0+"Y)?("+r0+"M)?("+r0+"D)?",lMt="T("+r0+"H)?("+r0+"M)?("+r0+"S)?",uMt="^P(?:"+oMt+"|"+aMt+"(?:"+lMt+")?)$",cMt=new RegExp(uMt),R8e=["weeks","years","months","days","hours","minutes","seconds"],F8e={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S",weeks:"W"},dMt=Object.freeze({weeks:0,years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),fMt=function(t){var e=t.match(cMt);if(!e)throw new Error("Invalid duration string");var n=e.slice(1).reduce(function(r,i,s){return r[R8e[s]]=parseFloat(i)||0,r},{});return n},hMt=function(t){return t.weeks&&t.weeks>0?Object.assign({},dMt,{weeks:t.weeks}):R8e.reduce(function(e,n){var r;return Xf(Xf({},e),(r={},r[n]=t[n]||0,r))},{})},rz={locales:{},options:{},setLocales:function(t,e){this.locales=Xf(Xf({},this.locales),t),e&&(this.options=Xf(Xf({},this.options),e))},getLangConfig:function(t){var e=this.locales[t];if(!e&&this.options.fallbackLocale&&(e=this.locales[this.options.fallbackLocale]),!e)throw new Error("isoDuration: Translations for language: "+t+" are not provided");return e}},pMt=function(t){for(var e=["years","months","days"],n="",r=0,i=e;r<i.length;r++){var s=i[r];t[s]&&(n+=""+t[s]+F8e[s])}return n},mMt=function(t){for(var e=["hours","minutes","seconds"],n="",r=0,i=e;r<i.length;r++){var s=i[r];t[s]&&(n+=""+t[s]+F8e[s])}return n},gMt=function(t){if(t.weeks>0)return"P"+t.weeks+"W";var e="P",n=pMt(t);n&&(e+=n);var r=mMt(t);return r&&(e+="T"+r),!n&&!r&&(e+="0D"),e},yMt=function(t,e){var n=rz.getLangConfig(e);return t.weeks+" "+n.weeks(t.weeks)},bMt=function(t,e,n){for(var r=rz.getLangConfig(e),i="",s=["years","months","days","hours","minutes","seconds"],o=0,a=0;a<s.length;a++){var l=s[a],u=t[l];if(u&&(i!==""&&(i+=" "),i+=u+" "+r[l](u),o++,n&&n.largest&&n.largest<=o))break}return i},vMt=function(t,e,n){return t.weeks>0?yMt(t,e):bMt(t,e,n)},L5=["seconds","minutes","hours","days","months"],hA=function(t){return function(e){return{nextUnitValue:Math.floor(e/t),value:e%t}}},kCe=function(t,e){return new Date(e,t+1,0).getDate()},xMt={seconds:hA(60),minutes:hA(60),hours:hA(24),days:function(t,e){for(var n=e?new Date(e.getTime()):new Date,r=t,i=0,s=kCe(n.getMonth(),n.getFullYear());r>s;)r=r-s,i++,n.setMonth(n.getMonth()+1),s=kCe(n.getMonth(),n.getFullYear());return{nextUnitValue:i,value:r}},months:hA(12)},wMt=function(t,e){for(var n=Xf({},t),r=0;r<L5.length;r++){var i=L5[r],s=n[i];if(s>0){var o=xMt[i](s,e);if(n[i]=o.value,o.nextUnitValue){var a=i==="months"?"years":L5[r+1];n[a]=n[a]+o.nextUnitValue}}}return n},TCe=function(){function t(e){this.durationObj=e}return t.prototype.parse=function(){return this.durationObj},t.prototype.toString=function(){return gMt(this.durationObj)},t.prototype.humanize=function(e,n){return vMt(this.durationObj,e,n)},t.prototype.normalize=function(e){return this.durationObj=wMt(this.durationObj,e),this},t.prototype.isEmpty=function(){var e=this;return Object.keys(this.durationObj).every(function(n){return e.durationObj[n]===0})},t}();function _Mt(t){return t<=2?0:t>2&&t<11?1:0}var EMt={years:function(t){return t===1?"":""},months:function(t){return t===1?"":""},weeks:function(t){return t===1?"":""},days:function(t){return t===1?"":""},hours:function(t){return t===1?"":""},minutes:function(t){return["",""][_Mt(t)]},seconds:function(t){return t===1?"":""},decimal:","};function Bs(t){return Math.floor(t)!==t?2:t%100>=5&&t%100<=20||t%10>=5&&t%10<=9||t%10===0?0:t%10===1?1:t>1?2:0}var CMt={years:function(t){return["","",""][Bs(t)]},months:function(t){return["","",""][Bs(t)]},weeks:function(t){return["","",""][Bs(t)]},days:function(t){return["","",""][Bs(t)]},hours:function(t){return["","",""][Bs(t)]},minutes:function(t){return["","",""][Bs(t)]},seconds:function(t){return["","",""][Bs(t)]},decimal:","},SMt={years:function(t){return"any"+(t===1?"":"s")},months:function(t){return"mes"+(t===1?"":"os")},weeks:function(t){return"setman"+(t===1?"a":"es")},days:function(t){return"di"+(t===1?"a":"es")},hours:function(t){return"hor"+(t===1?"a":"es")},minutes:function(t){return"minut"+(t===1?"":"s")},seconds:function(t){return"segon"+(t===1?"":"s")},decimal:","};function Sl(t){return t===1?0:Math.floor(t)!==t?1:t%10>=2&&t%10<=4&&t%100<10?2:3}var AMt={years:function(t){return["rok","roku","roky","let"][Sl(t)]},months:function(t){return["msc","msce","msce","msc"][Sl(t)]},weeks:function(t){return["tden","tdne","tdny","tdn"][Sl(t)]},days:function(t){return["den","dne","dny","dn"][Sl(t)]},hours:function(t){return["hodina","hodiny","hodiny","hodin"][Sl(t)]},minutes:function(t){return["minuta","minuty","minuty","minut"][Sl(t)]},seconds:function(t){return["sekunda","sekundy","sekundy","sekund"][Sl(t)]},decimal:","},kMt={years:function(){return"r"},months:function(t){return"mned"+(t===1?"":"er")},weeks:function(t){return"uge"+(t===1?"":"r")},days:function(t){return"dag"+(t===1?"":"e")},hours:function(t){return"time"+(t===1?"":"r")},minutes:function(t){return"minut"+(t===1?"":"ter")},seconds:function(t){return"sekund"+(t===1?"":"er")},decimal:","},TMt={years:function(t){return"Jahr"+(t===1?"":"e")},months:function(t){return"Monat"+(t===1?"":"e")},weeks:function(t){return"Woche"+(t===1?"":"n")},days:function(t){return"Tag"+(t===1?"":"e")},hours:function(t){return"Stunde"+(t===1?"":"n")},minutes:function(t){return"Minute"+(t===1?"":"n")},seconds:function(t){return"Sekunde"+(t===1?"":"n")},decimal:","},DMt={years:function(t){return"year"+(t===1?"":"s")},months:function(t){return"month"+(t===1?"":"s")},weeks:function(t){return"week"+(t===1?"":"s")},days:function(t){return"day"+(t===1?"":"s")},hours:function(t){return"hour"+(t===1?"":"s")},minutes:function(t){return"minute"+(t===1?"":"s")},seconds:function(t){return"second"+(t===1?"":"s")},decimal:"."},LMt={years:function(t){return"ao"+(t===1?"":"s")},months:function(t){return"mes"+(t===1?"":"es")},weeks:function(t){return"semana"+(t===1?"":"s")},days:function(t){return"da"+(t===1?"":"s")},hours:function(t){return"hora"+(t===1?"":"s")},minutes:function(t){return"minuto"+(t===1?"":"s")},seconds:function(t){return"segundo"+(t===1?"":"s")},decimal:","},RMt={years:function(t){return"aasta"+(t===1?"":"t")},months:function(t){return"kuu"+(t===1?"":"d")},weeks:function(t){return"ndal"+(t===1?"":"at")},days:function(t){return"pev"+(t===1?"":"a")},hours:function(t){return"tund"+(t===1?"":"i")},minutes:function(t){return"minut"+(t===1?"":"it")},seconds:function(t){return"sekund"+(t===1?"":"it")},decimal:","},FMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},OMt={years:function(t){return t===1?"vuosi":"vuotta"},months:function(t){return t===1?"kuukausi":"kuukautta"},weeks:function(t){return"viikko"+(t===1?"":"a")},days:function(t){return"piv"+(t===1?"":"")},hours:function(t){return"tunti"+(t===1?"":"a")},minutes:function(t){return"minuutti"+(t===1?"":"a")},seconds:function(t){return"sekunti"+(t===1?"":"a")},decimal:","},MMt={years:function(){return"r"},months:function(t){return t===1?"mnaur":"mnair"},weeks:function(t){return t===1?"vika":"vikur"},days:function(t){return t===1?"dagur":"dagar"},hours:function(t){return t===1?"tmi":"tmar"},minutes:function(t){return t===1?"minuttur":"minuttir"},seconds:function(){return"sekund"},decimal:","},IMt={years:function(t){return"an"+(t>=2?"s":"")},months:function(){return"mois"},weeks:function(t){return"semaine"+(t>=2?"s":"")},days:function(t){return"jour"+(t>=2?"s":"")},hours:function(t){return"heure"+(t>=2?"s":"")},minutes:function(t){return"minute"+(t>=2?"s":"")},seconds:function(t){return"seconde"+(t>=2?"s":"")},decimal:","},$Mt={years:function(t){return t===1?"":""},months:function(t){return t===1?"":""},weeks:function(t){return t===1?"":""},days:function(t){return t===1?"":""},hours:function(t){return t===1?"":""},minutes:function(t){return t===1?"":""},seconds:function(t){return t===1?"":""},decimal:","},PMt={years:function(t){return t===1?"":""},months:function(t){return t===1?"":""},weeks:function(t){return t===1?"":""},days:function(t){return t===1?"":""},hours:function(t){return t===1?"":""},minutes:function(t){return t===1?"":""},seconds:function(t){return t===1?"":""},decimal:"."},NMt={years:function(t){return t%10===2||t%10===3||t%10===4?"godine":"godina"},months:function(t){return t===1?"mjesec":t===2||t===3||t===4?"mjeseca":"mjeseci"},weeks:function(t){return t%10===1&&t!==11?"tjedan":"tjedna"},days:function(t){return t===1?"dan":"dana"},hours:function(t){return t===1?"sat":t===2||t===3||t===4?"sata":"sati"},minutes:function(t){var e=t%10;return(e===2||e===3||e===4)&&(t<10||t>14)?"minute":"minuta"},seconds:function(t){return t===10||t===11||t===12||t===13||t===14||t===16||t===17||t===18||t===19||t%10===5?"sekundi":t%10===1?"sekunda":t%10===2||t%10===3||t%10===4?"sekunde":"sekundi"},decimal:","},BMt={years:function(){return"v"},months:function(){return"hnap"},weeks:function(){return"ht"},days:function(){return"nap"},hours:function(){return"ra"},minutes:function(){return"perc"},seconds:function(){return"msodperc"},decimal:","},zMt={years:function(){return"r"},months:function(t){return"mnu"+(t===1?"ur":"ir")},weeks:function(t){return"vik"+(t===1?"a":"ur")},days:function(t){return"dag"+(t===1?"ur":"ar")},hours:function(t){return"klukkutm"+(t===1?"i":"ar")},minutes:function(t){return"mnt"+(t===1?"a":"ur")},seconds:function(t){return"seknd"+(t===1?"a":"ur")},decimal:"."},jMt={years:function(t){return"ann"+(t===1?"o":"i")},months:function(t){return"mes"+(t===1?"e":"i")},weeks:function(t){return"settiman"+(t===1?"a":"e")},days:function(t){return"giorn"+(t===1?"o":"i")},hours:function(t){return"or"+(t===1?"a":"e")},minutes:function(t){return"minut"+(t===1?"o":"i")},seconds:function(t){return"second"+(t===1?"o":"i")},decimal:","},UMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},qMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},HMt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:","};function rb(t){return t===1||t%10===1&&t%100>20?0:Math.floor(t)!==t||t%10>=2&&t%100>20||t%10>=2&&t%100<10?1:2}var GMt={years:function(t){return t%10===0||t%100>=10&&t%100<=20?"met":"metai"},months:function(t){return["mnuo","mnesiai","mnesi"][rb(t)]},weeks:function(t){return["savait","savaits","savaii"][rb(t)]},days:function(t){return["diena","dienos","dien"][rb(t)]},hours:function(t){return["valanda","valandos","valand"][rb(t)]},minutes:function(t){return["minut","minuts","minui"][rb(t)]},seconds:function(t){return["sekund","sekunds","sekundi"][rb(t)]},decimal:","};function Eg(t){return t===1||t%10===1&&t%100!==11?0:1}var VMt={years:function(t){return["gads","gadi"][Eg(t)]},months:function(t){return["mnesis","mnei"][Eg(t)]},weeks:function(t){return["neda","nedas"][Eg(t)]},days:function(t){return["diena","dienas"][Eg(t)]},hours:function(t){return["stunda","stundas"][Eg(t)]},minutes:function(t){return["minte","mintes"][Eg(t)]},seconds:function(t){return["sekunde","sekundes"][Eg(t)]},decimal:","},WMt={years:function(){return"tahun"},months:function(){return"bulan"},weeks:function(){return"minggu"},days:function(){return"hari"},hours:function(){return"jam"},minutes:function(){return"minit"},seconds:function(){return"saat"},decimal:"."},YMt={years:function(){return"jaar"},months:function(t){return t===1?"maand":"maanden"},weeks:function(t){return t===1?"week":"weken"},days:function(t){return t===1?"dag":"dagen"},hours:function(){return"uur"},minutes:function(t){return t===1?"minuut":"minuten"},seconds:function(t){return t===1?"seconde":"seconden"},decimal:","},XMt={years:function(){return"r"},months:function(t){return"mned"+(t===1?"":"er")},weeks:function(t){return"uke"+(t===1?"":"r")},days:function(t){return"dag"+(t===1?"":"er")},hours:function(t){return"time"+(t===1?"":"r")},minutes:function(t){return"minutt"+(t===1?"":"er")},seconds:function(t){return"sekund"+(t===1?"":"er")},decimal:","};function Cg(t){return t===1?0:Math.floor(t)!==t?1:t%10>=2&&t%10<=4&&!(t%100>10&&t%100<20)?2:3}var ZMt={years:function(t){return["rok","roku","lata","lat"][Cg(t)]},months:function(t){return["miesic","miesica","miesice","miesicy"][Cg(t)]},weeks:function(t){return["tydzie","tygodnia","tygodnie","tygodni"][Cg(t)]},days:function(t){return["dzie","dnia","dni","dni"][Cg(t)]},hours:function(t){return["godzina","godziny","godziny","godzin"][Cg(t)]},minutes:function(t){return["minuta","minuty","minuty","minut"][Cg(t)]},seconds:function(t){return["sekunda","sekundy","sekundy","sekund"][Cg(t)]},decimal:","},KMt={years:function(t){return"ano"+(t===1?"":"s")},months:function(t){return t===1?"ms":"meses"},weeks:function(t){return"semana"+(t===1?"":"s")},days:function(t){return"dia"+(t===1?"":"s")},hours:function(t){return"hora"+(t===1?"":"s")},minutes:function(t){return"minuto"+(t===1?"":"s")},seconds:function(t){return"segundo"+(t===1?"":"s")},decimal:","},JMt={years:function(t){return t===1?"an":"ani"},months:function(t){return t===1?"lun":"luni"},weeks:function(t){return t===1?"sptmn":"sptmni"},days:function(t){return t===1?"zi":"zile"},hours:function(t){return t===1?"or":"ore"},minutes:function(t){return t===1?"minut":"minute"},seconds:function(t){return t===1?"secund":"secunde"},decimal:","},QMt={years:function(t){return["","",""][Bs(t)]},months:function(t){return["","",""][Bs(t)]},weeks:function(t){return["","",""][Bs(t)]},days:function(t){return["","",""][Bs(t)]},hours:function(t){return["","",""][Bs(t)]},minutes:function(t){return["","",""][Bs(t)]},seconds:function(t){return["","",""][Bs(t)]},decimal:","},eIt={years:function(t){return["rok","roky","roky","rokov"][Sl(t)]},months:function(t){return["mesiac","mesiace","mesiace","mesiacov"][Sl(t)]},weeks:function(t){return["tde","tdne","tdne","tdov"][Sl(t)]},days:function(t){return["de","dni","dni","dn"][Sl(t)]},hours:function(t){return["hodina","hodiny","hodiny","hodn"][Sl(t)]},minutes:function(t){return["minta","minty","minty","mint"][Sl(t)]},seconds:function(t){return["sekunda","sekundy","sekundy","seknd"][Sl(t)]},decimal:","},tIt={years:function(){return"r"},months:function(t){return"mnad"+(t===1?"":"er")},weeks:function(t){return"veck"+(t===1?"a":"or")},days:function(t){return"dag"+(t===1?"":"ar")},hours:function(t){return"timm"+(t===1?"e":"ar")},minutes:function(t){return"minut"+(t===1?"":"er")},seconds:function(t){return"sekund"+(t===1?"":"er")},decimal:","},nIt={years:function(){return"yl"},months:function(){return"ay"},weeks:function(){return"hafta"},days:function(){return"gn"},hours:function(){return"saat"},minutes:function(){return"dakika"},seconds:function(){return"saniye"},decimal:","},rIt={years:function(t){return["","",""][Bs(t)]},months:function(t){return["","",""][Bs(t)]},weeks:function(t){return["","",""][Bs(t)]},days:function(t){return["","",""][Bs(t)]},hours:function(t){return["","",""][Bs(t)]},minutes:function(t){return["","",""][Bs(t)]},seconds:function(t){return["","",""][Bs(t)]},decimal:","},iIt={years:function(){return""},months:function(t){return t===1?"":""},weeks:function(t){return t===1?"":""},days:function(){return""},hours:function(t){return t===1?"":""},minutes:function(){return""},seconds:function(){return""},decimal:"."},sIt={years:function(){return"nm"},months:function(){return"thng"},weeks:function(){return"tun"},days:function(){return"ngy"},hours:function(){return"gi"},minutes:function(){return"pht"},seconds:function(){return"giy"},decimal:","},oIt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."},aIt={years:function(){return""},months:function(){return""},weeks:function(){return""},days:function(){return""},hours:function(){return""},minutes:function(){return""},seconds:function(){return""},decimal:"."};function O8e(t){return typeof t=="string"?new TCe(fMt(t)):new TCe(hMt(t))}O8e.setLocales=function(t,e){rz.setLocales(t,e)};const lIt=Object.freeze(Object.defineProperty({__proto__:null,ar:EMt,bg:CMt,ca:SMt,cs:AMt,da:kMt,de:TMt,en:DMt,es:LMt,et:RMt,fa:FMt,fi:OMt,fo:MMt,fr:IMt,gr:$Mt,he:PMt,hr:NMt,hu:BMt,is:zMt,isoDuration:O8e,it:jMt,ja:UMt,ko:qMt,lo:HMt,lt:GMt,lv:VMt,ms:WMt,nl:YMt,no:XMt,pl:ZMt,pt:KMt,ro:JMt,ru:QMt,sk:eIt,sv:tIt,tr:nIt,uk:rIt,ur:iIt,vi:sIt,zhCN:oIt,zhTW:aIt},Symbol.toStringTag,{value:"Module"})),uIt=DAe(lIt);var pA={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var DCe;function cIt(){if(DCe)return pA;DCe=1;var t=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;pA.format=o,pA.parse=a;function o(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var f=c.parameters,h=c.type;if(!h||!s.test(h))throw new TypeError("invalid type");var p=h;if(f&&typeof f=="object")for(var g,b=Object.keys(f).sort(),y=0;y<b.length;y++){if(g=b[y],!n.test(g))throw new TypeError("invalid parameter name");p+="; "+g+"="+u(f[g])}return p}function a(c){if(!c)throw new TypeError("argument string is required");var f=typeof c=="object"?l(c):c;if(typeof f!="string")throw new TypeError("argument string is required to be a string");var h=f.indexOf(";"),p=h!==-1?f.slice(0,h).trim():f.trim();if(!s.test(p))throw new TypeError("invalid media type");var g=new d(p.toLowerCase());if(h!==-1){var b,y,v;for(t.lastIndex=h;y=t.exec(f);){if(y.index!==h)throw new TypeError("invalid parameter format");h+=y[0].length,b=y[1].toLowerCase(),v=y[2],v.charCodeAt(0)===34&&(v=v.slice(1,-1),v.indexOf("\\")!==-1&&(v=v.replace(r,"$1"))),g.parameters[b]=v}if(h!==f.length)throw new TypeError("invalid parameter format")}return g}function l(c){var f;if(typeof c.getHeader=="function"?f=c.getHeader("content-type"):typeof c.headers=="object"&&(f=c.headers&&c.headers["content-type"]),typeof f!="string")throw new TypeError("content-type header is missing from object");return f}function u(c){var f=String(c);if(n.test(f))return f;if(f.length>0&&!e.test(f))throw new TypeError("invalid parameter value");return'"'+f.replace(i,"\\$1")+'"'}function d(c){this.parameters=Object.create(null),this.type=c}return pA}var x_={exports:{}};/* commonmark 0.29 https://github.com/commonmark/commonmark.js @license BSD3 */var dIt=x_.exports,LCe;function fIt(){return LCe||(LCe=1,function(t,e){(function(n,r){r(e)})(dIt,function(n){function r(G){switch(G._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(G,ue){this.current=G,this.entering=ue===!0},s=function(){var G=this.current,ue=this.entering;if(G===null)return null;var Se=r(G);return ue&&Se?G._firstChild?(this.current=G._firstChild,this.entering=!0):this.entering=!1:G===this.root?this.current=null:G._next===null?(this.current=G._parent,this.entering=!1):(this.current=G._next,this.entering=!0),{entering:ue,node:G}},o=function(G){return{current:G,root:G,entering:!0,next:s,resumeAt:i}},a=function(G,ue){this._type=G,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=ue,this._lastLineBlank=!1,this._lastLineChecked=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},l=a.prototype;Object.defineProperty(l,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(l,"type",{get:function(){return this._type}}),Object.defineProperty(l,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(l,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(l,"next",{get:function(){return this._next}}),Object.defineProperty(l,"prev",{get:function(){return this._prev}}),Object.defineProperty(l,"parent",{get:function(){return this._parent}}),Object.defineProperty(l,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(l,"literal",{get:function(){return this._literal},set:function(G){this._literal=G}}),Object.defineProperty(l,"destination",{get:function(){return this._destination},set:function(G){this._destination=G}}),Object.defineProperty(l,"title",{get:function(){return this._title},set:function(G){this._title=G}}),Object.defineProperty(l,"info",{get:function(){return this._info},set:function(G){this._info=G}}),Object.defineProperty(l,"level",{get:function(){return this._level},set:function(G){this._level=G}}),Object.defineProperty(l,"listType",{get:function(){return this._listData.type},set:function(G){this._listData.type=G}}),Object.defineProperty(l,"listTight",{get:function(){return this._listData.tight},set:function(G){this._listData.tight=G}}),Object.defineProperty(l,"listStart",{get:function(){return this._listData.start},set:function(G){this._listData.start=G}}),Object.defineProperty(l,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(G){this._listData.delimiter=G}}),Object.defineProperty(l,"onEnter",{get:function(){return this._onEnter},set:function(G){this._onEnter=G}}),Object.defineProperty(l,"onExit",{get:function(){return this._onExit},set:function(G){this._onExit=G}}),a.prototype.appendChild=function(G){G.unlink(),G._parent=this,this._lastChild?(this._lastChild._next=G,G._prev=this._lastChild,this._lastChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.prependChild=function(G){G.unlink(),G._parent=this,this._firstChild?(this._firstChild._prev=G,G._next=this._firstChild,this._firstChild=G):(this._firstChild=G,this._lastChild=G)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(G){G.unlink(),G._next=this._next,G._next&&(G._next._prev=G),G._prev=this,this._next=G,G._parent=this._parent,G._next||(G._parent._lastChild=G)},a.prototype.insertBefore=function(G){G.unlink(),G._prev=this._prev,G._prev&&(G._prev._next=G),G._next=this,this._prev=G,G._parent=this._parent,G._prev||(G._parent._firstChild=G)},a.prototype.walker=function(){var G=new o(this);return G};var u={};function d(G){var ue,Se,Fe=u[G];if(Fe)return Fe;for(Fe=u[G]=[],ue=0;ue<128;ue++)Se=String.fromCharCode(ue),/^[0-9a-z]$/i.test(Se)?Fe.push(Se):Fe.push("%"+("0"+ue.toString(16).toUpperCase()).slice(-2));for(ue=0;ue<G.length;ue++)Fe[G.charCodeAt(ue)]=G[ue];return Fe}function c(G,ue,Se){var Fe,dt,lt,vn,Bt,On="";for(typeof ue!="string"&&(Se=ue,ue=c.defaultChars),typeof Se>"u"&&(Se=!0),Bt=d(ue),Fe=0,dt=G.length;Fe<dt;Fe++){if(lt=G.charCodeAt(Fe),Se&&lt===37&&Fe+2<dt&&/^[0-9a-f]{2}$/i.test(G.slice(Fe+1,Fe+3))){On+=G.slice(Fe,Fe+3),Fe+=2;continue}if(lt<128){On+=Bt[lt];continue}if(lt>=55296&&lt<=57343){if(lt>=55296&&lt<=56319&&Fe+1<dt&&(vn=G.charCodeAt(Fe+1),vn>=56320&&vn<=57343)){On+=encodeURIComponent(G[Fe]+G[Fe+1]),Fe++;continue}On+="%EF%BF%BD";continue}On+=encodeURIComponent(G[Fe])}return On}c.defaultChars=";/?:@&=+$,-_.!~*'()#",c.componentChars="-_.!~*'()";var f=c,h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Zi<"u"?Zi:typeof self<"u"?self:{};function p(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}function g(G,ue){return ue={exports:{}},G(ue,ue.exports),ue.exports}function b(G){return G&&G.default||G}var y="",v="",w="",E="",S="",T="",D="",k="",R="",O="",B="",K="",L="",I="",$="",U="",q="",Y="",X="",te="",le="",ee="",z="",he="",fe="",ze="",He="&",je="&",we="",$e="",qe="",Pe="",St="",ht="",nn="",Vt="",Mn="",Ze="",pe="",ie="",oe="",ve="",F="",H="",J="",re="",ye="",xe="",Re="",P="",Q="",se="",ae="",ke="",Ae="",Ee="",De="",Oe="",We="",tt="",ft="",Kt="'",xt="",Qt="",rn="",sn="",on="",Tn="",Cr="",Qi="",hs="*",Vi="",zo="",Hn="",Ir="",Rr="",mn="",Kr="",or="",zi="",nr="",$r="",ro="",ge="",Le="",it="",Ke="",Et="",an="",en="",wt="",Qe="",hn="",Sn="",zt="",jt="",Sr="",di="",Zt="",Xe="",pt="",Zn="",ri="",Ar="",Fr="",rr="",qt="",xi="",es="",wi="",qs="",_o="",io="",jo="",ws="",Ms="",Uo="",ps="",ll="",ul="",kr="",ts="",so="",Is="",Hs="",pa="",Gs="",cl="",Wi="",Yi="",oo="",ms="",qo="",Vs="",fi="=",Pa="",ao="",Xi="",lo="",dl="",Ht="",Z="",me="",Be="",yt="",pn="",$t="",Pn="",hr="",Tr="",Ln="",ki="",Jr="",ar="",hi="",_s="",Ws="",ji="",Ui="",Eo="",Gr="",ma="",Zu="",fl="",hl="",Jc="",Ku="",ne="",_e="",Ye="",bt="",Jt="",Ut="",Cn="",mr="",Pr="",ns="",Es="",_i="",Fi="",Te="",ut="",Wt="",Wn="",gr="",Nn="",qi="",Na="",O1="",EC="",M1="",I1="",Fh="",$1="",P1="",ty="",Lm="",N1="\\",Rm="",pl="",B1="",ny="",ry="",z1="",j1="",iy="",CC="",SC="",AC="",ff="",hf="",sy="",oy="",U1="",ay="",Qc="",ed="",Co="",Ju="",Qu="",Fm="",q1="",Oh="",H1="",ly="",Om="",kC="",uy="",G1="",cy="",dy="",pf="",Mm="",V1="",Im="",fy="",hy="",mf="",Mh="",$m="",W1="",Ih="",Y1="",td="",$h="",nd="",Ph="",gf="",X1="",Z1="",K1="",TC="",rd="",id="",DC="",LC="",RC="",FC="",OC="",Ho="",Cs="",uo="",Ss="",Nh="",MC="",Pm="",IC="",py="",J1="",my="",gy=":",yy="",Q1="",ex="",by="",tx=",",Bh="@",$C="",Nm="",bu="",nx="",PC="",rx="",ga="",Nr="",ml="",ec="",tc="",ix="",vy="",sx="",xy="",zh="",ox="",wy="",nc="",ax="",lx="",Bm="",_y="",ux="",cx="",NC="",zm="",dx="",BC="",fx="",yf="",Ey="",jm="",hx="",Cy="",px="",mx="",Ys="",Um="",gx="",yx="",bx="",bf="",qm="",vx="",xx="",wx="",vf="",_x="",Hm="",Ex="",jh="",xf="",Cx="",Sx="",Ax="",Uh="",qh="",Hh="",Gh="",kx="",Tx="",rc="",wf="",Vh="",Dx="",zC="",jC="",So="",Lx="",UC="",Rx="",Fx="",Ox="",qC="",HC="",ic="",Wh="",Gm="",Yh="",vu="",GC="",VC="",_f="",Mx="",Ix="",$x="",Vm="",Ef="",Sy="",Ay="",ky="",Xh="`",Px="",Nx="",Wm="",WC="",Zh="",Bx="",zx="",Ty="",jx="",Ux="",qx="",Kh="",Jh="",Dy="",Hx="",Gx="",Vx="",Ly="",Wx="$",Yx="",Cf="",Xx="",Ym="",YC="",XC="",Oi="",Ry="",Qh="",gl="",Xm="",Fy="",Zx="",Kx="",Jx="",Qx="",ew="",Oy="",tw="",Qr="",nw="",Sf="",Zm="",ZC="",rs="",KC="",Km="",m="",x="",C="",_="",A="",M="",N="",j="",V="",W="",ce="",de="",Ce="",be="",Ie="",Ne="",Me="",Ve="",nt="",Je="",mt="",ct="",gt="",bn="",Mt="",Gn="",dn="",lr="",Br="",ur="",Kn="",cr="",In="",zr="",Fn="",Qn="",Bn="",vr="",co="",jr="",Xs="",Zs="",Ti="",fo="",Ba="",$s="",yl="",Jm="",rw="",sd="",Go="",sc="",JC="",Af="",My="",ep="",Qm="",tp="",Iy="",iw="",$y="",sw="",ow="",aw="",kz="",Tz="",Dz="",Lz="",Rz="",Fz="",Oz="",Mz="",Iz="",$z="",Pz="",Nz="",Bz="",zz="",jz="",Uz="",qz="",Hz="",Gz="",Vz="",Wz="",Yz="",Xz="",Zz="",Kz="",Jz="",Qz="",ej="",tj="",nj="",rj="",ij="",sj="=",oj="",aj="",lj="",uj="",cj="",dj="",fj="",hj="",pj="",mj="",gj="",yj="",bj="",vj="",xj="",wj="",_j="",Ej="",Cj="",Sj="",Aj="!",kj="",Tj="",Dj="",Lj="",Rj="",Fj="",Oj="",Mj="",Ij="",$j="",Pj="",Nj="",Bj="",zj="",jj="",Uj="",qj="",Hj="fj",Gj="",Vj="",Wj="",Yj="",Xj="",Zj="",Kj="",Jj="",Qj="",eU="",tU="",nU="",rU="",iU="",sU="",oU="",aU="",lU="",uU="",cU="",dU="",fU="",hU="",pU="",mU="",gU="",yU="",bU="",vU="",xU="",wU="",_U="",EU="",CU="",SU="",AU="",kU="",TU="",DU="",LU="",RU="",FU="",OU="",MU="",IU="",$U="",PU="",NU="",BU="",zU="",jU="",UU="",qU="",HU="",GU="",VU="",WU="",YU="",XU="",ZU="",KU="",JU="",QU="",eq="",tq="",nq="",rq="",iq="",sq="",oq="",aq="",lq="",uq="",cq="",dq="",fq="",hq="",pq="",mq="",gq="",yq="",bq="`",vq="",xq="",wq="",_q="",Eq="",Cq="",Sq="",Aq="",kq="",Tq="",Dq="",Lq="",Rq="",Fq="",Oq=">",Mq=">",Iq="",$q="",Pq="",Nq="",Bq="",zq="",jq="",Uq="",qq="",Hq="",Gq="",Vq="",Wq="",Yq="",Xq="",Zq="",Kq="",Jq="",Qq="",eH="",tH="",nH="",rH="",iH="^",sH="",oH="",aH="",lH="",uH="",cH="",dH="",fH="",hH="",pH="",mH="",gH="",yH="",bH="",vH="",xH="",wH="",_H="",EH="",CH="",SH="",AH="",kH="",TH="",DH="",LH="",RH="",FH="",OH="",MH="",IH="",$H="",PH="",NH="",BH="",zH="",jH="",UH="",qH="",HH="",GH="",VH="",WH="",YH="",XH="",ZH="",KH="",JH="",QH="",eG="",tG="",nG="",rG="",iG="",sG="",oG="",aG="",lG="",uG="",cG="",dG="",fG="",hG="",pG="",mG="",gG="",yG="",bG="",vG="",xG="",wG="",_G="",EG="",CG="",SG="",AG="",kG="",TG="",DG="",LG="",RG="",FG="",OG="",MG="",IG="",$G="",PG="",NG="",BG="",zG="",jG="",UG="",qG="",HG="",GG="",VG="",WG="",YG="",XG="",ZG="",KG="",JG="",QG="",eV="",tV="",nV="",rV="",iV="",sV="",oV="",aV="",lV="",uV="",cV="",dV="",fV="",hV="",pV="",mV="",gV="",yV="",bV="",vV="",xV="",wV="",_V="",EV="",CV="",SV="",AV="",kV="",TV="",DV="",LV="",RV="",FV="",OV="",MV="",IV="",$V="",PV="",NV="",BV="",zV="",jV="",UV="",qV="",HV="",GV="",VV="",WV="",YV="",XV="",ZV="",KV="",JV="",QV="",eW="",tW="",nW="",rW="",iW="",sW="",oW="",aW="",lW="",uW="",cW="",dW="",fW="{",hW="[",pW="",mW="",gW="",yW="",bW="",vW="",xW="",wW="",_W="{",EW="",CW="",SW="",AW="",kW="",TW="",DW="",LW="",RW="",FW="",OW="",MW="",IW="",$W="",PW="",NW="",BW="",zW="",jW="",UW="",qW="",HW="",GW="",VW="",WW="",YW="",XW="",ZW="",KW="",JW="",QW="",eY="",tY="",nY="",rY="",iY="",sY="",oY="",aY="",lY="",uY="",cY="",dY="",fY="",hY="",pY="",mY="",gY="",yY="",bY="",vY="",xY="",wY="",_Y="",EY="",CY="",SY="",AY="",kY="",TY="",DY="",LY="",RY="",FY="",OY="",MY="",IY="",$Y="",PY="",NY="",BY="",zY="",jY="",UY="",qY="",HY="",GY="",VY="",WY="",YY="",XY="",ZY="",KY="",JY="",QY="",eX="",tX="",nX="",rX="",iX="",sX="",oX="",aX="",lX="",uX="",cX="",dX="",fX="",hX="",pX="",mX="",gX="",yX="",bX="",vX="",xX="",wX="",_X="",EX="",CX="",SX="",AX="",kX="",TX="",DX="",LX="",RX="",FX="",OX="",MX="",IX="",$X="",PX="_",NX="",BX="",zX="",jX="",UX="",qX="(",HX="",GX="",VX="",WX="",YX="",XX="",ZX="",KX="",JX="",QX="",eZ="",tZ="",nZ="",rZ="",iZ="",sZ="[",oZ="",aZ="",lZ="",uZ="",cZ="",dZ="",fZ="<",hZ="<",pZ="",mZ="",gZ="",yZ="",bZ="",vZ="",xZ="",wZ="",_Z="",EZ="",CZ="",SZ="",AZ="",kZ="",TZ="",DZ="",LZ="",RZ="",FZ="",OZ="",MZ="",IZ="",$Z="",PZ="",NZ="",BZ="",zZ="",jZ="",UZ="",qZ="",HZ="",GZ="",VZ="",WZ="",YZ="",XZ="",ZZ="*",KZ="",JZ="",QZ="",eK="",tK="",nK="",rK="",iK="",sK="",oK="",aK="",lK="",uK="",cK="",dK="",fK="",hK="",pK="",mK="",gK="",yK="",bK="",vK="",xK="",wK="",_K="",EK="",CK="",SK="",AK="",kK="",TK="",DK="",LK="",RK="",FK="",OK="",MK="",IK="",$K="",PK="",NK="",BK="",zK="",jK="",UK="",qK="",HK="",GK="",VK="",WK="",YK="",XK="",ZK="",KK="",JK="",QK="",eJ="",tJ="",nJ="",rJ="",iJ="",sJ="",oJ=`
`,aJ="",lJ="",uJ="",cJ="",dJ="",fJ="",hJ="",pJ="",mJ="",gJ="",yJ="",bJ="",vJ="",xJ="",wJ="",_J="",EJ="",CJ="",SJ="",AJ="",kJ="",TJ="",DJ="",LJ="",RJ="",FJ="",OJ="",MJ="",IJ="",$J="",PJ="",NJ="",BJ="",zJ="",jJ="",UJ="",qJ="",HJ="",GJ="",VJ="",WJ="",YJ="",XJ="",ZJ="",KJ="",JJ="",QJ="",eQ="",tQ="",nQ="",rQ="",iQ="",sQ="",oQ="",aQ="",lQ="",uQ="",cQ="",dQ="",fQ="",hQ="",pQ="",mQ="",gQ="",yQ="",bQ="",vQ="",xQ="",wQ="",_Q="",EQ="",CQ="",SQ="",AQ="",kQ="",TQ="",DQ="",LQ="",RQ="",FQ="",OQ="",MQ="",IQ="",$Q="",PQ="",NQ="",BQ="",zQ="",jQ="",UQ="",qQ="",HQ="",GQ="",VQ="",WQ="",YQ="",XQ="",ZQ="",KQ="",JQ="",QQ="",eee="",tee="",nee="",ree="",iee="",see="",oee="",aee="",lee="",uee="",cee="",dee="",fee="",hee="",pee="",mee="",gee="",yee="",bee="",vee="",xee="",wee="",_ee="",Eee="",Cee="",See="",Aee="",kee="",Tee="",Dee="",Lee="",Ree="",Fee="",Oee="",Mee="",Iee="",$ee="",Pee="",Nee="",Bee="",zee="",jee="",Uee="",qee="",Hee="",Gee="",Vee="",Wee="",Yee="",Xee="",Zee="",Kee="",Jee="",Qee="",ete="",tte="",nte="",rte="",ite="",ste="",ote="",ate="",lte="",ute="",cte="",dte="",fte="",hte="",pte="",mte="#",gte="",yte="",bte="",vte="",xte="",wte="",_te="",Ete="",Cte=">",Ste="",Ate="",kte="",Tte="",Dte="<",Lte="",Rte="",Fte="",Ote="",Mte="",Ite="",$te="",Pte="",Nte="",Bte="",zte="",jte="",Ute="",qte="",Hte="",Gte="",Vte="",Wte="",Yte="",Xte="",Zte="",Kte="",Jte="",Qte="",ene="",tne="",nne="",rne="",ine="",sne="",one="",ane="",lne="",une="",cne="",dne="",fne="",hne="",pne="",mne="",gne="",yne="",bne="",vne="",xne="",wne="",_ne="",Ene="",Cne="",Sne="",Ane="",kne="",Tne="",Dne="",Lne="",Rne="",Fne="",One="",Mne="",Ine="",$ne="",Pne="",Nne="",Bne="",zne="",jne="",Une="",qne="",Hne="",Gne="",Vne="",Wne="",Yne="",Xne="",Zne="",Kne="",Jne="",Qne="",ere="",tre="",nre="",rre="",ire="",sre="",ore="",are="",lre="",ure="",cre="",dre="",fre="",hre="",pre="",mre="",gre="%",yre=".",bre="",vre="",xre="",wre="",_re="",Ere="",Cre="",Sre="",Are="",kre="",Tre="",Dre="",Lre="",Rre="",Fre="",Ore="",Mre="",Ire="",$re="",Pre="",Nre="+",Bre="",zre="",jre="",Ure="",qre="",Hre="",Gre="",Vre="",Wre="",Yre="",Xre="",Zre="",Kre="",Jre="",Qre="",eie="",tie="",nie="",rie="",iie="",sie="",oie="",aie="",lie="",uie="",cie="",die="",fie="",hie="",pie="",mie="",gie="",yie="",bie="",vie="",xie="",wie="",_ie="",Eie="",Cie="",Sie="",Aie="",kie="",Tie="",Die="",Lie="",Rie="",Fie="",Oie="",Mie="",Iie="",$ie="",Pie="",Nie="",Bie="",zie="",jie="",Uie="",qie="",Hie="",Gie="",Vie="",Wie="",Yie="?",Xie="",Zie='"',Kie='"',Jie="",Qie="",ese="",tse="",nse="",rse="",ise="",sse="",ose="",ase="",lse="",use="",cse="",dse="",fse="",hse="",pse="",mse="",gse="",yse="",bse="",vse="",xse="",wse="",_se="",Ese="",Cse="",Sse="",Ase="",kse="",Tse="",Dse="",Lse="",Rse="",Fse="",Ose="}",Mse="]",Ise="",$se="",Pse="",Nse="",Bse="",zse="",jse="",Use="",qse="}",Hse="",Gse="",Vse="",Wse="",Yse="",Xse="",Zse="",Kse="",Jse="",Qse="",eoe="",toe="",noe="",roe="",ioe="",soe="",ooe="",aoe="",loe="",uoe="",coe="",doe="",foe="",hoe="",poe="",moe="",goe="",yoe="",boe="",voe="",xoe="",woe="",_oe="",Eoe="",Coe="",Soe="",Aoe="",koe="",Toe="",Doe="",Loe="",Roe="",Foe="",Ooe="",Moe="",Ioe="",$oe="",Poe="",Noe="",Boe="",zoe="",joe="",Uoe="",qoe="",Hoe="",Goe="",Voe="",Woe="",Yoe="",Xoe="",Zoe="",Koe="",Joe="",Qoe="",eae="",tae="",nae="",rae="",iae="",sae="",oae="",aae="",lae="",uae="",cae="",dae="",fae="",hae="",pae=")",mae="",gae="",yae="",bae="",vae="",xae="",wae="",_ae="",Eae="",Cae="]",Sae="",Aae="",kae="",Tae="",Dae="",Lae="",Rae="",Fae="",Oae="",Mae="",Iae="",$ae="",Pae="",Nae="",Bae="",zae="",jae="",Uae="",qae="",Hae="",Gae="",Vae="",Wae="",Yae="",Xae="",Zae="",Kae="",Jae="",Qae="",ele="",tle="",nle="",rle="",ile="",sle="",ole="",ale="",lle="",ule="",cle="",dle="",fle=";",hle="",ple="",mle="",gle="",yle="",ble="",vle="",xle="",wle="",_le="",Ele="",Cle="",Sle="",Ale="",kle="",Tle="",Dle="",Lle="",Rle="",Fle="",Ole="",Mle="",Ile="",$le="",Ple="",Nle="",Ble="",zle="",jle="",Ule="",qle="",Hle="",Gle="",Vle="",Wle="",Yle="",Xle="",Zle="",Kle="",Jle="",Qle="",eue="",tue="",nue="",rue="",iue="",sue="",oue="",aue="/",lue="",uue="",cue="",due="",fue="",hue="",pue="",mue="",gue="",yue="",bue="",vue="",xue="",wue="",_ue="",Eue="",Cue="",Sue="",Aue="",kue="",Tue="",Due="",Lue="",Rue="",Fue="",Oue="",Mue="",Iue="",$ue="",Pue="",Nue="",Bue="",zue="",jue="",Uue="",que="",Hue="",Gue="",Vue="",Wue="",Yue="",Xue="",Zue="",Kue="",Jue="",Que="",ece="",tce="",nce="",rce="",ice="",sce="",oce="",ace="",lce="",uce="",cce="",dce="",fce="",hce="",pce="",mce="",gce="",yce="",bce="",vce="",xce="",wce="",_ce="",Ece="",Cce="",Sce="",Ace="",kce="",Tce="",Dce="",Lce="",Rce="",Fce="",Oce="",Mce="",Ice="",$ce="",Pce="",Nce="",Bce="",zce="",jce="",Uce="",qce="",Hce="",Gce="",Vce="",Wce="",Yce="",Xce="",Zce="",Kce="",Jce="",Qce="",ede="",tde="",nde="",rde="",ide="",sde="",ode="",ade="",lde="",ude="",cde="",dde="",fde="	",hde="",pde="",mde="",gde="",yde="",bde="",vde="",xde="",wde="",_de="",Ede="",Cde="",Sde="",Ade="",kde="",Tde="",Dde="",Lde="",Rde="",Fde="",Ode="",Mde="",Ide="",$de="",Pde="",Nde="",Bde="",zde="",jde="",Ude="",qde="",Hde="",Gde="",Vde="",Wde="",Yde="",Xde="",Zde="",Kde="",Jde="",Qde="",efe="",tfe="",nfe="",rfe="",ife="",sfe="",ofe="",afe="",lfe="",ufe="",cfe="",dfe="",ffe="",hfe="",pfe="",mfe="",gfe="",yfe="",bfe="",vfe="",xfe="",wfe="",_fe="",Efe="",Cfe="",Sfe="",Afe="",kfe="",Tfe="",Dfe="",Lfe="",Rfe="",Ffe="",Ofe="",Mfe="",Ife="",$fe="",Pfe="",Nfe="",Bfe="",zfe="",jfe="",Ufe="",qfe="",Hfe="",Gfe="",Vfe="",Wfe="",Yfe="",Xfe="",Zfe="",Kfe="",Jfe="",Qfe="",ehe="",the="",nhe="",rhe="",ihe="",she="",ohe="",ahe="",lhe="",uhe="",che="",dhe="",fhe="",hhe="",phe="",mhe="",ghe="_",yhe="",bhe="",vhe="",xhe="",whe="",_he="",Ehe="",Che="",She="",Ahe="",khe="",The="",Dhe="",Lhe="",Rhe="",Fhe="",Ohe="",Mhe="",Ihe="",$he="",Phe="",Nhe="",Bhe="",zhe="",jhe="",Uhe="",qhe="",Hhe="",Ghe="",Vhe="",Whe="",Yhe="",Xhe="",Zhe="",Khe="",Jhe="",Qhe="",epe="",tpe="",npe="",rpe="",ipe="",spe="",ope="",ape="",lpe="",upe="",cpe="",dpe="",fpe="",hpe="",ppe="",mpe="",gpe="",ype="",bpe="",vpe="",xpe="",wpe="",_pe="",Epe="",Cpe="",Spe="",Ape="",kpe="",Tpe="",Dpe="",Lpe="",Rpe="",Fpe="",Ope="",Mpe="",Ipe="",$pe="",Ppe="",Npe="",Bpe="",zpe="",jpe="",Upe="",qpe="",Hpe="|",Gpe="",Vpe="|",Wpe="",Ype="",Xpe="|",Zpe="",Kpe="",Jpe="",Qpe="",eme="",tme="",nme="",rme="",ime="",sme="",ome="",ame="",lme="",ume="",cme="",dme="",fme="",hme="",pme="",mme="",gme="",yme="",bme="",vme="",xme="",wme="",_me="",Eme="",Cme="",Sme="",Ame="",kme="",Tme="",Dme="",Lme="",Rme="",Fme="",Ome="",Mme="",Ime="",$me="",Pme="",Nme="",Bme="",zme="",jme="",Ume="",qme="",Hme="",Gme="",Vme="",Wme="",Yme="",Xme="",Zme="",Kme="",Jme="",Qme="",ege="",tge="",nge="",rge="",ige="",sge="",oge="",age="",lge="",uge="",cge="",dge="",fge="",hge="",pge="",mge="",gge="",yge="",bge="",vge="",xge="",wge="",_ge="",Ege="",Cge="",Sge="",Age="",kge="",Tge="",Dge="",Lge="",Rge="",Fge="",Oge="",Mge="",Ige="",$ge="",Pge="",Nge="",Bge="",zge="",jge="",Uge="",qge="",Hge="",Gge="",Vge="",Wge="",Yge="",Xge="",$9e={Aacute:y,aacute:v,Abreve:w,abreve:E,ac:S,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:I,af:$,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:fe,amalg:ze,amp:He,AMP:je,andand:we,And:$e,and:qe,andd:Pe,andslope:St,andv:ht,ang:nn,ange:Vt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:oe,angmsdae:ve,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:se,Aogon:ae,aogon:ke,Aopf:Ae,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:ft,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:sn,aring:on,Ascr:Tn,ascr:Cr,Assign:Qi,ast:hs,asymp:Vi,asympeq:zo,Atilde:Hn,atilde:Ir,Auml:Rr,auml:mn,awconint:Kr,awint:or,backcong:zi,backepsilon:nr,backprime:$r,backsim:ro,backsimeq:ge,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:Qe,bcong:hn,Bcy:Sn,bcy:zt,bdquo:jt,becaus:Sr,because:di,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Zn,Bernoullis:ri,Beta:Ar,beta:Fr,beth:rr,between:qt,Bfr:xi,bfr:es,bigcap:wi,bigcirc:qs,bigcup:_o,bigodot:io,bigoplus:jo,bigotimes:ws,bigsqcup:Ms,bigstar:Uo,bigtriangledown:ps,bigtriangleup:ll,biguplus:ul,bigvee:kr,bigwedge:ts,bkarow:so,blacklozenge:Is,blacksquare:Hs,blacktriangle:pa,blacktriangledown:Gs,blacktriangleleft:cl,blacktriangleright:Wi,blank:Yi,blk12:oo,blk14:ms,blk34:qo,block:Vs,bne:fi,bnequiv:Pa,bNot:ao,bnot:Xi,Bopf:lo,bopf:dl,bot:Ht,bottom:Z,bowtie:me,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:$t,boxDL:Pn,boxdr:hr,boxdR:Tr,boxDr:Ln,boxDR:ki,boxh:Jr,boxH:ar,boxhd:hi,boxHd:_s,boxhD:Ws,boxHD:ji,boxhu:Ui,boxHu:Eo,boxhU:Gr,boxHU:ma,boxminus:Zu,boxplus:fl,boxtimes:hl,boxul:Jc,boxuL:Ku,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:bt,boxUr:Jt,boxUR:Ut,boxv:Cn,boxV:mr,boxvh:Pr,boxvH:ns,boxVh:Es,boxVH:_i,boxvl:Fi,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Wn,boxvR:gr,boxVr:Nn,boxVR:qi,bprime:Na,breve:O1,Breve:EC,brvbar:M1,bscr:I1,Bscr:Fh,bsemi:$1,bsim:P1,bsime:ty,bsolb:Lm,bsol:N1,bsolhsub:Rm,bull:pl,bullet:B1,bump:ny,bumpE:ry,bumpe:z1,Bumpeq:j1,bumpeq:iy,Cacute:CC,cacute:SC,capand:AC,capbrcup:ff,capcap:hf,cap:sy,Cap:oy,capcup:U1,capdot:ay,CapitalDifferentialD:Qc,caps:ed,caret:Co,caron:Ju,Cayleys:Qu,ccaps:Fm,Ccaron:q1,ccaron:Oh,Ccedil:H1,ccedil:ly,Ccirc:Om,ccirc:kC,Cconint:uy,ccups:G1,ccupssm:cy,Cdot:dy,cdot:pf,cedil:Mm,Cedilla:V1,cemptyv:Im,cent:fy,centerdot:hy,CenterDot:mf,cfr:Mh,Cfr:$m,CHcy:W1,chcy:Ih,check:Y1,checkmark:td,Chi:$h,chi:nd,circ:Ph,circeq:gf,circlearrowleft:X1,circlearrowright:Z1,circledast:K1,circledcirc:TC,circleddash:rd,CircleDot:id,circledR:DC,circledS:LC,CircleMinus:RC,CirclePlus:FC,CircleTimes:OC,cir:Ho,cirE:Cs,cire:uo,cirfnint:Ss,cirmid:Nh,cirscir:MC,ClockwiseContourIntegral:Pm,CloseCurlyDoubleQuote:IC,CloseCurlyQuote:py,clubs:J1,clubsuit:my,colon:gy,Colon:yy,Colone:Q1,colone:ex,coloneq:by,comma:tx,commat:Bh,comp:$C,compfn:Nm,complement:bu,complexes:nx,cong:PC,congdot:rx,Congruent:ga,conint:Nr,Conint:ml,ContourIntegral:ec,copf:tc,Copf:ix,coprod:vy,Coproduct:sx,copy:xy,COPY:zh,copysr:ox,CounterClockwiseContourIntegral:wy,crarr:nc,cross:ax,Cross:lx,Cscr:Bm,cscr:_y,csub:ux,csube:cx,csup:NC,csupe:zm,ctdot:dx,cudarrl:BC,cudarrr:fx,cuepr:yf,cuesc:Ey,cularr:jm,cularrp:hx,cupbrcap:Cy,cupcap:px,CupCap:mx,cup:Ys,Cup:Um,cupcup:gx,cupdot:yx,cupor:bx,cups:bf,curarr:qm,curarrm:vx,curlyeqprec:xx,curlyeqsucc:wx,curlyvee:vf,curlywedge:_x,curren:Hm,curvearrowleft:Ex,curvearrowright:jh,cuvee:xf,cuwed:Cx,cwconint:Sx,cwint:Ax,cylcty:Uh,dagger:qh,Dagger:Hh,daleth:Gh,darr:kx,Darr:Tx,dArr:rc,dash:wf,Dashv:Vh,dashv:Dx,dbkarow:zC,dblac:jC,Dcaron:So,dcaron:Lx,Dcy:UC,dcy:Rx,ddagger:Fx,ddarr:Ox,DD:qC,dd:HC,DDotrahd:ic,ddotseq:Wh,deg:Gm,Del:Yh,Delta:vu,delta:GC,demptyv:VC,dfisht:_f,Dfr:Mx,dfr:Ix,dHar:$x,dharl:Vm,dharr:Ef,DiacriticalAcute:Sy,DiacriticalDot:Ay,DiacriticalDoubleAcute:ky,DiacriticalGrave:Xh,DiacriticalTilde:Px,diam:Nx,diamond:Wm,Diamond:WC,diamondsuit:Zh,diams:Bx,die:zx,DifferentialD:Ty,digamma:jx,disin:Ux,div:qx,divide:Kh,divideontimes:Jh,divonx:Dy,DJcy:Hx,djcy:Gx,dlcorn:Vx,dlcrop:Ly,dollar:Wx,Dopf:Yx,dopf:Cf,Dot:Xx,dot:Ym,DotDot:YC,doteq:XC,doteqdot:Oi,DotEqual:Ry,dotminus:Qh,dotplus:gl,dotsquare:Xm,doublebarwedge:Fy,DoubleContourIntegral:Zx,DoubleDot:Kx,DoubleDownArrow:Jx,DoubleLeftArrow:Qx,DoubleLeftRightArrow:ew,DoubleLeftTee:Oy,DoubleLongLeftArrow:tw,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:nw,DoubleRightArrow:Sf,DoubleRightTee:Zm,DoubleUpArrow:ZC,DoubleUpDownArrow:rs,DoubleVerticalBar:KC,DownArrowBar:Km,downarrow:m,DownArrow:x,Downarrow:C,DownArrowUpArrow:_,DownBreve:A,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:de,DownRightTeeVector:Ce,DownRightVectorBar:be,DownRightVector:Ie,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:mt,dscr:ct,DScy:gt,dscy:bn,dsol:Mt,Dstrok:Gn,dstrok:dn,dtdot:lr,dtri:Br,dtrif:ur,duarr:Kn,duhar:cr,dwangle:In,DZcy:zr,dzcy:Fn,dzigrarr:Qn,Eacute:Bn,eacute:vr,easter:co,Ecaron:jr,ecaron:Xs,Ecirc:Zs,ecirc:Ti,ecir:fo,ecolon:Ba,Ecy:$s,ecy:yl,eDDot:Jm,Edot:rw,edot:sd,eDot:Go,ee:sc,efDot:JC,Efr:Af,efr:My,eg:ep,Egrave:Qm,egrave:tp,egs:Iy,egsdot:iw,el:$y,Element:sw,elinters:ow,ell:aw,els:kz,elsdot:Tz,Emacr:Dz,emacr:Lz,empty:Rz,emptyset:Fz,EmptySmallSquare:Oz,emptyv:Mz,EmptyVerySmallSquare:Iz,emsp13:$z,emsp14:Pz,emsp:Nz,ENG:Bz,eng:zz,ensp:jz,Eogon:Uz,eogon:qz,Eopf:Hz,eopf:Gz,epar:Vz,eparsl:Wz,eplus:Yz,epsi:Xz,Epsilon:Zz,epsilon:Kz,epsiv:Jz,eqcirc:Qz,eqcolon:ej,eqsim:tj,eqslantgtr:nj,eqslantless:rj,Equal:ij,equals:sj,EqualTilde:oj,equest:aj,Equilibrium:lj,equiv:uj,equivDD:cj,eqvparsl:dj,erarr:fj,erDot:hj,escr:pj,Escr:mj,esdot:gj,Esim:yj,esim:bj,Eta:vj,eta:xj,ETH:wj,eth:_j,Euml:Ej,euml:Cj,euro:Sj,excl:Aj,exist:kj,Exists:Tj,expectation:Dj,exponentiale:Lj,ExponentialE:Rj,fallingdotseq:Fj,Fcy:Oj,fcy:Mj,female:Ij,ffilig:$j,fflig:Pj,ffllig:Nj,Ffr:Bj,ffr:zj,filig:jj,FilledSmallSquare:Uj,FilledVerySmallSquare:qj,fjlig:Hj,flat:Gj,fllig:Vj,fltns:Wj,fnof:Yj,Fopf:Xj,fopf:Zj,forall:Kj,ForAll:Jj,fork:Qj,forkv:eU,Fouriertrf:tU,fpartint:nU,frac12:rU,frac13:iU,frac14:sU,frac15:oU,frac16:aU,frac18:lU,frac23:uU,frac25:cU,frac34:dU,frac35:fU,frac38:hU,frac45:pU,frac56:mU,frac58:gU,frac78:yU,frasl:bU,frown:vU,fscr:xU,Fscr:wU,gacute:_U,Gamma:EU,gamma:CU,Gammad:SU,gammad:AU,gap:kU,Gbreve:TU,gbreve:DU,Gcedil:LU,Gcirc:RU,gcirc:FU,Gcy:OU,gcy:MU,Gdot:IU,gdot:$U,ge:PU,gE:NU,gEl:BU,gel:zU,geq:jU,geqq:UU,geqslant:qU,gescc:HU,ges:GU,gesdot:VU,gesdoto:WU,gesdotol:YU,gesl:XU,gesles:ZU,Gfr:KU,gfr:JU,gg:QU,Gg:eq,ggg:tq,gimel:nq,GJcy:rq,gjcy:iq,gla:sq,gl:oq,glE:aq,glj:lq,gnap:uq,gnapprox:cq,gne:dq,gnE:fq,gneq:hq,gneqq:pq,gnsim:mq,Gopf:gq,gopf:yq,grave:bq,GreaterEqual:vq,GreaterEqualLess:xq,GreaterFullEqual:wq,GreaterGreater:_q,GreaterLess:Eq,GreaterSlantEqual:Cq,GreaterTilde:Sq,Gscr:Aq,gscr:kq,gsim:Tq,gsime:Dq,gsiml:Lq,gtcc:Rq,gtcir:Fq,gt:Oq,GT:Mq,Gt:Iq,gtdot:$q,gtlPar:Pq,gtquest:Nq,gtrapprox:Bq,gtrarr:zq,gtrdot:jq,gtreqless:Uq,gtreqqless:qq,gtrless:Hq,gtrsim:Gq,gvertneqq:Vq,gvnE:Wq,Hacek:Yq,hairsp:Xq,half:Zq,hamilt:Kq,HARDcy:Jq,hardcy:Qq,harrcir:eH,harr:tH,hArr:nH,harrw:rH,Hat:iH,hbar:sH,Hcirc:oH,hcirc:aH,hearts:lH,heartsuit:uH,hellip:cH,hercon:dH,hfr:fH,Hfr:hH,HilbertSpace:pH,hksearow:mH,hkswarow:gH,hoarr:yH,homtht:bH,hookleftarrow:vH,hookrightarrow:xH,hopf:wH,Hopf:_H,horbar:EH,HorizontalLine:CH,hscr:SH,Hscr:AH,hslash:kH,Hstrok:TH,hstrok:DH,HumpDownHump:LH,HumpEqual:RH,hybull:FH,hyphen:OH,Iacute:MH,iacute:IH,ic:$H,Icirc:PH,icirc:NH,Icy:BH,icy:zH,Idot:jH,IEcy:UH,iecy:qH,iexcl:HH,iff:GH,ifr:VH,Ifr:WH,Igrave:YH,igrave:XH,ii:ZH,iiiint:KH,iiint:JH,iinfin:QH,iiota:eG,IJlig:tG,ijlig:nG,Imacr:rG,imacr:iG,image:sG,ImaginaryI:oG,imagline:aG,imagpart:lG,imath:uG,Im:cG,imof:dG,imped:fG,Implies:hG,incare:pG,in:"",infin:mG,infintie:gG,inodot:yG,intcal:bG,int:vG,Int:xG,integers:wG,Integral:_G,intercal:EG,Intersection:CG,intlarhk:SG,intprod:AG,InvisibleComma:kG,InvisibleTimes:TG,IOcy:DG,iocy:LG,Iogon:RG,iogon:FG,Iopf:OG,iopf:MG,Iota:IG,iota:$G,iprod:PG,iquest:NG,iscr:BG,Iscr:zG,isin:jG,isindot:UG,isinE:qG,isins:HG,isinsv:GG,isinv:VG,it:WG,Itilde:YG,itilde:XG,Iukcy:ZG,iukcy:KG,Iuml:JG,iuml:QG,Jcirc:eV,jcirc:tV,Jcy:nV,jcy:rV,Jfr:iV,jfr:sV,jmath:oV,Jopf:aV,jopf:lV,Jscr:uV,jscr:cV,Jsercy:dV,jsercy:fV,Jukcy:hV,jukcy:pV,Kappa:mV,kappa:gV,kappav:yV,Kcedil:bV,kcedil:vV,Kcy:xV,kcy:wV,Kfr:_V,kfr:EV,kgreen:CV,KHcy:SV,khcy:AV,KJcy:kV,kjcy:TV,Kopf:DV,kopf:LV,Kscr:RV,kscr:FV,lAarr:OV,Lacute:MV,lacute:IV,laemptyv:$V,lagran:PV,Lambda:NV,lambda:BV,lang:zV,Lang:jV,langd:UV,langle:qV,lap:HV,Laplacetrf:GV,laquo:VV,larrb:WV,larrbfs:YV,larr:XV,Larr:ZV,lArr:KV,larrfs:JV,larrhk:QV,larrlp:eW,larrpl:tW,larrsim:nW,larrtl:rW,latail:iW,lAtail:sW,lat:oW,late:aW,lates:lW,lbarr:uW,lBarr:cW,lbbrk:dW,lbrace:fW,lbrack:hW,lbrke:pW,lbrksld:mW,lbrkslu:gW,Lcaron:yW,lcaron:bW,Lcedil:vW,lcedil:xW,lceil:wW,lcub:_W,Lcy:EW,lcy:CW,ldca:SW,ldquo:AW,ldquor:kW,ldrdhar:TW,ldrushar:DW,ldsh:LW,le:RW,lE:FW,LeftAngleBracket:OW,LeftArrowBar:MW,leftarrow:IW,LeftArrow:$W,Leftarrow:PW,LeftArrowRightArrow:NW,leftarrowtail:BW,LeftCeiling:zW,LeftDoubleBracket:jW,LeftDownTeeVector:UW,LeftDownVectorBar:qW,LeftDownVector:HW,LeftFloor:GW,leftharpoondown:VW,leftharpoonup:WW,leftleftarrows:YW,leftrightarrow:XW,LeftRightArrow:ZW,Leftrightarrow:KW,leftrightarrows:JW,leftrightharpoons:QW,leftrightsquigarrow:eY,LeftRightVector:tY,LeftTeeArrow:nY,LeftTee:rY,LeftTeeVector:iY,leftthreetimes:sY,LeftTriangleBar:oY,LeftTriangle:aY,LeftTriangleEqual:lY,LeftUpDownVector:uY,LeftUpTeeVector:cY,LeftUpVectorBar:dY,LeftUpVector:fY,LeftVectorBar:hY,LeftVector:pY,lEg:mY,leg:gY,leq:yY,leqq:bY,leqslant:vY,lescc:xY,les:wY,lesdot:_Y,lesdoto:EY,lesdotor:CY,lesg:SY,lesges:AY,lessapprox:kY,lessdot:TY,lesseqgtr:DY,lesseqqgtr:LY,LessEqualGreater:RY,LessFullEqual:FY,LessGreater:OY,lessgtr:MY,LessLess:IY,lesssim:$Y,LessSlantEqual:PY,LessTilde:NY,lfisht:BY,lfloor:zY,Lfr:jY,lfr:UY,lg:qY,lgE:HY,lHar:GY,lhard:VY,lharu:WY,lharul:YY,lhblk:XY,LJcy:ZY,ljcy:KY,llarr:JY,ll:QY,Ll:eX,llcorner:tX,Lleftarrow:nX,llhard:rX,lltri:iX,Lmidot:sX,lmidot:oX,lmoustache:aX,lmoust:lX,lnap:uX,lnapprox:cX,lne:dX,lnE:fX,lneq:hX,lneqq:pX,lnsim:mX,loang:gX,loarr:yX,lobrk:bX,longleftarrow:vX,LongLeftArrow:xX,Longleftarrow:wX,longleftrightarrow:_X,LongLeftRightArrow:EX,Longleftrightarrow:CX,longmapsto:SX,longrightarrow:AX,LongRightArrow:kX,Longrightarrow:TX,looparrowleft:DX,looparrowright:LX,lopar:RX,Lopf:FX,lopf:OX,loplus:MX,lotimes:IX,lowast:$X,lowbar:PX,LowerLeftArrow:NX,LowerRightArrow:BX,loz:zX,lozenge:jX,lozf:UX,lpar:qX,lparlt:HX,lrarr:GX,lrcorner:VX,lrhar:WX,lrhard:YX,lrm:XX,lrtri:ZX,lsaquo:KX,lscr:JX,Lscr:QX,lsh:eZ,Lsh:tZ,lsim:nZ,lsime:rZ,lsimg:iZ,lsqb:sZ,lsquo:oZ,lsquor:aZ,Lstrok:lZ,lstrok:uZ,ltcc:cZ,ltcir:dZ,lt:fZ,LT:hZ,Lt:pZ,ltdot:mZ,lthree:gZ,ltimes:yZ,ltlarr:bZ,ltquest:vZ,ltri:xZ,ltrie:wZ,ltrif:_Z,ltrPar:EZ,lurdshar:CZ,luruhar:SZ,lvertneqq:AZ,lvnE:kZ,macr:TZ,male:DZ,malt:LZ,maltese:RZ,Map:"",map:FZ,mapsto:OZ,mapstodown:MZ,mapstoleft:IZ,mapstoup:$Z,marker:PZ,mcomma:NZ,Mcy:BZ,mcy:zZ,mdash:jZ,mDDot:UZ,measuredangle:qZ,MediumSpace:HZ,Mellintrf:GZ,Mfr:VZ,mfr:WZ,mho:YZ,micro:XZ,midast:ZZ,midcir:KZ,mid:JZ,middot:QZ,minusb:eK,minus:tK,minusd:nK,minusdu:rK,MinusPlus:iK,mlcp:sK,mldr:oK,mnplus:aK,models:lK,Mopf:uK,mopf:cK,mp:dK,mscr:fK,Mscr:hK,mstpos:pK,Mu:mK,mu:gK,multimap:yK,mumap:bK,nabla:vK,Nacute:xK,nacute:wK,nang:_K,nap:EK,napE:CK,napid:SK,napos:AK,napprox:kK,natural:TK,naturals:DK,natur:LK,nbsp:RK,nbump:FK,nbumpe:OK,ncap:MK,Ncaron:IK,ncaron:$K,Ncedil:PK,ncedil:NK,ncong:BK,ncongdot:zK,ncup:jK,Ncy:UK,ncy:qK,ndash:HK,nearhk:GK,nearr:VK,neArr:WK,nearrow:YK,ne:XK,nedot:ZK,NegativeMediumSpace:KK,NegativeThickSpace:JK,NegativeThinSpace:QK,NegativeVeryThinSpace:eJ,nequiv:tJ,nesear:nJ,nesim:rJ,NestedGreaterGreater:iJ,NestedLessLess:sJ,NewLine:oJ,nexist:aJ,nexists:lJ,Nfr:uJ,nfr:cJ,ngE:dJ,nge:fJ,ngeq:hJ,ngeqq:pJ,ngeqslant:mJ,nges:gJ,nGg:yJ,ngsim:bJ,nGt:vJ,ngt:xJ,ngtr:wJ,nGtv:_J,nharr:EJ,nhArr:CJ,nhpar:SJ,ni:AJ,nis:kJ,nisd:TJ,niv:DJ,NJcy:LJ,njcy:RJ,nlarr:FJ,nlArr:OJ,nldr:MJ,nlE:IJ,nle:$J,nleftarrow:PJ,nLeftarrow:NJ,nleftrightarrow:BJ,nLeftrightarrow:zJ,nleq:jJ,nleqq:UJ,nleqslant:qJ,nles:HJ,nless:GJ,nLl:VJ,nlsim:WJ,nLt:YJ,nlt:XJ,nltri:ZJ,nltrie:KJ,nLtv:JJ,nmid:QJ,NoBreak:eQ,NonBreakingSpace:tQ,nopf:nQ,Nopf:rQ,Not:iQ,not:sQ,NotCongruent:oQ,NotCupCap:aQ,NotDoubleVerticalBar:lQ,NotElement:uQ,NotEqual:cQ,NotEqualTilde:dQ,NotExists:fQ,NotGreater:hQ,NotGreaterEqual:pQ,NotGreaterFullEqual:mQ,NotGreaterGreater:gQ,NotGreaterLess:yQ,NotGreaterSlantEqual:bQ,NotGreaterTilde:vQ,NotHumpDownHump:xQ,NotHumpEqual:wQ,notin:_Q,notindot:EQ,notinE:CQ,notinva:SQ,notinvb:AQ,notinvc:kQ,NotLeftTriangleBar:TQ,NotLeftTriangle:DQ,NotLeftTriangleEqual:LQ,NotLess:RQ,NotLessEqual:FQ,NotLessGreater:OQ,NotLessLess:MQ,NotLessSlantEqual:IQ,NotLessTilde:$Q,NotNestedGreaterGreater:PQ,NotNestedLessLess:NQ,notni:BQ,notniva:zQ,notnivb:jQ,notnivc:UQ,NotPrecedes:qQ,NotPrecedesEqual:HQ,NotPrecedesSlantEqual:GQ,NotReverseElement:VQ,NotRightTriangleBar:WQ,NotRightTriangle:YQ,NotRightTriangleEqual:XQ,NotSquareSubset:ZQ,NotSquareSubsetEqual:KQ,NotSquareSuperset:JQ,NotSquareSupersetEqual:QQ,NotSubset:eee,NotSubsetEqual:tee,NotSucceeds:nee,NotSucceedsEqual:ree,NotSucceedsSlantEqual:iee,NotSucceedsTilde:see,NotSuperset:oee,NotSupersetEqual:aee,NotTilde:lee,NotTildeEqual:uee,NotTildeFullEqual:cee,NotTildeTilde:dee,NotVerticalBar:fee,nparallel:hee,npar:pee,nparsl:mee,npart:gee,npolint:yee,npr:bee,nprcue:vee,nprec:xee,npreceq:wee,npre:_ee,nrarrc:Eee,nrarr:Cee,nrArr:See,nrarrw:Aee,nrightarrow:kee,nRightarrow:Tee,nrtri:Dee,nrtrie:Lee,nsc:Ree,nsccue:Fee,nsce:Oee,Nscr:Mee,nscr:Iee,nshortmid:$ee,nshortparallel:Pee,nsim:Nee,nsime:Bee,nsimeq:zee,nsmid:jee,nspar:Uee,nsqsube:qee,nsqsupe:Hee,nsub:Gee,nsubE:Vee,nsube:Wee,nsubset:Yee,nsubseteq:Xee,nsubseteqq:Zee,nsucc:Kee,nsucceq:Jee,nsup:Qee,nsupE:ete,nsupe:tte,nsupset:nte,nsupseteq:rte,nsupseteqq:ite,ntgl:ste,Ntilde:ote,ntilde:ate,ntlg:lte,ntriangleleft:ute,ntrianglelefteq:cte,ntriangleright:dte,ntrianglerighteq:fte,Nu:hte,nu:pte,num:mte,numero:gte,numsp:yte,nvap:bte,nvdash:vte,nvDash:xte,nVdash:wte,nVDash:_te,nvge:Ete,nvgt:Cte,nvHarr:Ste,nvinfin:Ate,nvlArr:kte,nvle:Tte,nvlt:Dte,nvltrie:Lte,nvrArr:Rte,nvrtrie:Fte,nvsim:Ote,nwarhk:Mte,nwarr:Ite,nwArr:$te,nwarrow:Pte,nwnear:Nte,Oacute:Bte,oacute:zte,oast:jte,Ocirc:Ute,ocirc:qte,ocir:Hte,Ocy:Gte,ocy:Vte,odash:Wte,Odblac:Yte,odblac:Xte,odiv:Zte,odot:Kte,odsold:Jte,OElig:Qte,oelig:ene,ofcir:tne,Ofr:nne,ofr:rne,ogon:ine,Ograve:sne,ograve:one,ogt:ane,ohbar:lne,ohm:une,oint:cne,olarr:dne,olcir:fne,olcross:hne,oline:pne,olt:mne,Omacr:gne,omacr:yne,Omega:bne,omega:vne,Omicron:xne,omicron:wne,omid:_ne,ominus:Ene,Oopf:Cne,oopf:Sne,opar:Ane,OpenCurlyDoubleQuote:kne,OpenCurlyQuote:Tne,operp:Dne,oplus:Lne,orarr:Rne,Or:Fne,or:One,ord:Mne,order:Ine,orderof:$ne,ordf:Pne,ordm:Nne,origof:Bne,oror:zne,orslope:jne,orv:Une,oS:qne,Oscr:Hne,oscr:Gne,Oslash:Vne,oslash:Wne,osol:Yne,Otilde:Xne,otilde:Zne,otimesas:Kne,Otimes:Jne,otimes:Qne,Ouml:ere,ouml:tre,ovbar:nre,OverBar:rre,OverBrace:ire,OverBracket:sre,OverParenthesis:ore,para:are,parallel:lre,par:ure,parsim:cre,parsl:dre,part:fre,PartialD:hre,Pcy:pre,pcy:mre,percnt:gre,period:yre,permil:bre,perp:vre,pertenk:xre,Pfr:wre,pfr:_re,Phi:Ere,phi:Cre,phiv:Sre,phmmat:Are,phone:kre,Pi:Tre,pi:Dre,pitchfork:Lre,piv:Rre,planck:Fre,planckh:Ore,plankv:Mre,plusacir:Ire,plusb:$re,pluscir:Pre,plus:Nre,plusdo:Bre,plusdu:zre,pluse:jre,PlusMinus:Ure,plusmn:qre,plussim:Hre,plustwo:Gre,pm:Vre,Poincareplane:Wre,pointint:Yre,popf:Xre,Popf:Zre,pound:Kre,prap:Jre,Pr:Qre,pr:eie,prcue:tie,precapprox:nie,prec:rie,preccurlyeq:iie,Precedes:sie,PrecedesEqual:oie,PrecedesSlantEqual:aie,PrecedesTilde:lie,preceq:uie,precnapprox:cie,precneqq:die,precnsim:fie,pre:hie,prE:pie,precsim:mie,prime:gie,Prime:yie,primes:bie,prnap:vie,prnE:xie,prnsim:wie,prod:_ie,Product:Eie,profalar:Cie,profline:Sie,profsurf:Aie,prop:kie,Proportional:Tie,Proportion:Die,propto:Lie,prsim:Rie,prurel:Fie,Pscr:Oie,pscr:Mie,Psi:Iie,psi:$ie,puncsp:Pie,Qfr:Nie,qfr:Bie,qint:zie,qopf:jie,Qopf:Uie,qprime:qie,Qscr:Hie,qscr:Gie,quaternions:Vie,quatint:Wie,quest:Yie,questeq:Xie,quot:Zie,QUOT:Kie,rAarr:Jie,race:Qie,Racute:ese,racute:tse,radic:nse,raemptyv:rse,rang:ise,Rang:sse,rangd:ose,range:ase,rangle:lse,raquo:use,rarrap:cse,rarrb:dse,rarrbfs:fse,rarrc:hse,rarr:pse,Rarr:mse,rArr:gse,rarrfs:yse,rarrhk:bse,rarrlp:vse,rarrpl:xse,rarrsim:wse,Rarrtl:_se,rarrtl:Ese,rarrw:Cse,ratail:Sse,rAtail:Ase,ratio:kse,rationals:Tse,rbarr:Dse,rBarr:Lse,RBarr:Rse,rbbrk:Fse,rbrace:Ose,rbrack:Mse,rbrke:Ise,rbrksld:$se,rbrkslu:Pse,Rcaron:Nse,rcaron:Bse,Rcedil:zse,rcedil:jse,rceil:Use,rcub:qse,Rcy:Hse,rcy:Gse,rdca:Vse,rdldhar:Wse,rdquo:Yse,rdquor:Xse,rdsh:Zse,real:Kse,realine:Jse,realpart:Qse,reals:eoe,Re:toe,rect:noe,reg:roe,REG:ioe,ReverseElement:soe,ReverseEquilibrium:ooe,ReverseUpEquilibrium:aoe,rfisht:loe,rfloor:uoe,rfr:coe,Rfr:doe,rHar:foe,rhard:hoe,rharu:poe,rharul:moe,Rho:goe,rho:yoe,rhov:boe,RightAngleBracket:voe,RightArrowBar:xoe,rightarrow:woe,RightArrow:_oe,Rightarrow:Eoe,RightArrowLeftArrow:Coe,rightarrowtail:Soe,RightCeiling:Aoe,RightDoubleBracket:koe,RightDownTeeVector:Toe,RightDownVectorBar:Doe,RightDownVector:Loe,RightFloor:Roe,rightharpoondown:Foe,rightharpoonup:Ooe,rightleftarrows:Moe,rightleftharpoons:Ioe,rightrightarrows:$oe,rightsquigarrow:Poe,RightTeeArrow:Noe,RightTee:Boe,RightTeeVector:zoe,rightthreetimes:joe,RightTriangleBar:Uoe,RightTriangle:qoe,RightTriangleEqual:Hoe,RightUpDownVector:Goe,RightUpTeeVector:Voe,RightUpVectorBar:Woe,RightUpVector:Yoe,RightVectorBar:Xoe,RightVector:Zoe,ring:Koe,risingdotseq:Joe,rlarr:Qoe,rlhar:eae,rlm:tae,rmoustache:nae,rmoust:rae,rnmid:iae,roang:sae,roarr:oae,robrk:aae,ropar:lae,ropf:uae,Ropf:cae,roplus:dae,rotimes:fae,RoundImplies:hae,rpar:pae,rpargt:mae,rppolint:gae,rrarr:yae,Rrightarrow:bae,rsaquo:vae,rscr:xae,Rscr:wae,rsh:_ae,Rsh:Eae,rsqb:Cae,rsquo:Sae,rsquor:Aae,rthree:kae,rtimes:Tae,rtri:Dae,rtrie:Lae,rtrif:Rae,rtriltri:Fae,RuleDelayed:Oae,ruluhar:Mae,rx:Iae,Sacute:$ae,sacute:Pae,sbquo:Nae,scap:Bae,Scaron:zae,scaron:jae,Sc:Uae,sc:qae,sccue:Hae,sce:Gae,scE:Vae,Scedil:Wae,scedil:Yae,Scirc:Xae,scirc:Zae,scnap:Kae,scnE:Jae,scnsim:Qae,scpolint:ele,scsim:tle,Scy:nle,scy:rle,sdotb:ile,sdot:sle,sdote:ole,searhk:ale,searr:lle,seArr:ule,searrow:cle,sect:dle,semi:fle,seswar:hle,setminus:ple,setmn:mle,sext:gle,Sfr:yle,sfr:ble,sfrown:vle,sharp:xle,SHCHcy:wle,shchcy:_le,SHcy:Ele,shcy:Cle,ShortDownArrow:Sle,ShortLeftArrow:Ale,shortmid:kle,shortparallel:Tle,ShortRightArrow:Dle,ShortUpArrow:Lle,shy:Rle,Sigma:Fle,sigma:Ole,sigmaf:Mle,sigmav:Ile,sim:$le,simdot:Ple,sime:Nle,simeq:Ble,simg:zle,simgE:jle,siml:Ule,simlE:qle,simne:Hle,simplus:Gle,simrarr:Vle,slarr:Wle,SmallCircle:Yle,smallsetminus:Xle,smashp:Zle,smeparsl:Kle,smid:Jle,smile:Qle,smt:eue,smte:tue,smtes:nue,SOFTcy:rue,softcy:iue,solbar:sue,solb:oue,sol:aue,Sopf:lue,sopf:uue,spades:cue,spadesuit:due,spar:fue,sqcap:hue,sqcaps:pue,sqcup:mue,sqcups:gue,Sqrt:yue,sqsub:bue,sqsube:vue,sqsubset:xue,sqsubseteq:wue,sqsup:_ue,sqsupe:Eue,sqsupset:Cue,sqsupseteq:Sue,square:Aue,Square:kue,SquareIntersection:Tue,SquareSubset:Due,SquareSubsetEqual:Lue,SquareSuperset:Rue,SquareSupersetEqual:Fue,SquareUnion:Oue,squarf:Mue,squ:Iue,squf:$ue,srarr:Pue,Sscr:Nue,sscr:Bue,ssetmn:zue,ssmile:jue,sstarf:Uue,Star:que,star:Hue,starf:Gue,straightepsilon:Vue,straightphi:Wue,strns:Yue,sub:Xue,Sub:Zue,subdot:Kue,subE:Jue,sube:Que,subedot:ece,submult:tce,subnE:nce,subne:rce,subplus:ice,subrarr:sce,subset:oce,Subset:ace,subseteq:lce,subseteqq:uce,SubsetEqual:cce,subsetneq:dce,subsetneqq:fce,subsim:hce,subsub:pce,subsup:mce,succapprox:gce,succ:yce,succcurlyeq:bce,Succeeds:vce,SucceedsEqual:xce,SucceedsSlantEqual:wce,SucceedsTilde:_ce,succeq:Ece,succnapprox:Cce,succneqq:Sce,succnsim:Ace,succsim:kce,SuchThat:Tce,sum:Dce,Sum:Lce,sung:Rce,sup1:Fce,sup2:Oce,sup3:Mce,sup:Ice,Sup:$ce,supdot:Pce,supdsub:Nce,supE:Bce,supe:zce,supedot:jce,Superset:Uce,SupersetEqual:qce,suphsol:Hce,suphsub:Gce,suplarr:Vce,supmult:Wce,supnE:Yce,supne:Xce,supplus:Zce,supset:Kce,Supset:Jce,supseteq:Qce,supseteqq:ede,supsetneq:tde,supsetneqq:nde,supsim:rde,supsub:ide,supsup:sde,swarhk:ode,swarr:ade,swArr:lde,swarrow:ude,swnwar:cde,szlig:dde,Tab:fde,target:hde,Tau:pde,tau:mde,tbrk:gde,Tcaron:yde,tcaron:bde,Tcedil:vde,tcedil:xde,Tcy:wde,tcy:_de,tdot:Ede,telrec:Cde,Tfr:Sde,tfr:Ade,there4:kde,therefore:Tde,Therefore:Dde,Theta:Lde,theta:Rde,thetasym:Fde,thetav:Ode,thickapprox:Mde,thicksim:Ide,ThickSpace:$de,ThinSpace:Pde,thinsp:Nde,thkap:Bde,thksim:zde,THORN:jde,thorn:Ude,tilde:qde,Tilde:Hde,TildeEqual:Gde,TildeFullEqual:Vde,TildeTilde:Wde,timesbar:Yde,timesb:Xde,times:Zde,timesd:Kde,tint:Jde,toea:Qde,topbot:efe,topcir:tfe,top:nfe,Topf:rfe,topf:ife,topfork:sfe,tosa:ofe,tprime:afe,trade:lfe,TRADE:ufe,triangle:cfe,triangledown:dfe,triangleleft:ffe,trianglelefteq:hfe,triangleq:pfe,triangleright:mfe,trianglerighteq:gfe,tridot:yfe,trie:bfe,triminus:vfe,TripleDot:xfe,triplus:wfe,trisb:_fe,tritime:Efe,trpezium:Cfe,Tscr:Sfe,tscr:Afe,TScy:kfe,tscy:Tfe,TSHcy:Dfe,tshcy:Lfe,Tstrok:Rfe,tstrok:Ffe,twixt:Ofe,twoheadleftarrow:Mfe,twoheadrightarrow:Ife,Uacute:$fe,uacute:Pfe,uarr:Nfe,Uarr:Bfe,uArr:zfe,Uarrocir:jfe,Ubrcy:Ufe,ubrcy:qfe,Ubreve:Hfe,ubreve:Gfe,Ucirc:Vfe,ucirc:Wfe,Ucy:Yfe,ucy:Xfe,udarr:Zfe,Udblac:Kfe,udblac:Jfe,udhar:Qfe,ufisht:ehe,Ufr:the,ufr:nhe,Ugrave:rhe,ugrave:ihe,uHar:she,uharl:ohe,uharr:ahe,uhblk:lhe,ulcorn:uhe,ulcorner:che,ulcrop:dhe,ultri:fhe,Umacr:hhe,umacr:phe,uml:mhe,UnderBar:ghe,UnderBrace:yhe,UnderBracket:bhe,UnderParenthesis:vhe,Union:xhe,UnionPlus:whe,Uogon:_he,uogon:Ehe,Uopf:Che,uopf:She,UpArrowBar:Ahe,uparrow:khe,UpArrow:The,Uparrow:Dhe,UpArrowDownArrow:Lhe,updownarrow:Rhe,UpDownArrow:Fhe,Updownarrow:Ohe,UpEquilibrium:Mhe,upharpoonleft:Ihe,upharpoonright:$he,uplus:Phe,UpperLeftArrow:Nhe,UpperRightArrow:Bhe,upsi:zhe,Upsi:jhe,upsih:Uhe,Upsilon:qhe,upsilon:Hhe,UpTeeArrow:Ghe,UpTee:Vhe,upuparrows:Whe,urcorn:Yhe,urcorner:Xhe,urcrop:Zhe,Uring:Khe,uring:Jhe,urtri:Qhe,Uscr:epe,uscr:tpe,utdot:npe,Utilde:rpe,utilde:ipe,utri:spe,utrif:ope,uuarr:ape,Uuml:lpe,uuml:upe,uwangle:cpe,vangrt:dpe,varepsilon:fpe,varkappa:hpe,varnothing:ppe,varphi:mpe,varpi:gpe,varpropto:ype,varr:bpe,vArr:vpe,varrho:xpe,varsigma:wpe,varsubsetneq:_pe,varsubsetneqq:Epe,varsupsetneq:Cpe,varsupsetneqq:Spe,vartheta:Ape,vartriangleleft:kpe,vartriangleright:Tpe,vBar:Dpe,Vbar:Lpe,vBarv:Rpe,Vcy:Fpe,vcy:Ope,vdash:Mpe,vDash:Ipe,Vdash:$pe,VDash:Ppe,Vdashl:Npe,veebar:Bpe,vee:zpe,Vee:jpe,veeeq:Upe,vellip:qpe,verbar:Hpe,Verbar:Gpe,vert:Vpe,Vert:Wpe,VerticalBar:Ype,VerticalLine:Xpe,VerticalSeparator:Zpe,VerticalTilde:Kpe,VeryThinSpace:Jpe,Vfr:Qpe,vfr:eme,vltri:tme,vnsub:nme,vnsup:rme,Vopf:ime,vopf:sme,vprop:ome,vrtri:ame,Vscr:lme,vscr:ume,vsubnE:cme,vsubne:dme,vsupnE:fme,vsupne:hme,Vvdash:pme,vzigzag:mme,Wcirc:gme,wcirc:yme,wedbar:bme,wedge:vme,Wedge:xme,wedgeq:wme,weierp:_me,Wfr:Eme,wfr:Cme,Wopf:Sme,wopf:Ame,wp:kme,wr:Tme,wreath:Dme,Wscr:Lme,wscr:Rme,xcap:Fme,xcirc:Ome,xcup:Mme,xdtri:Ime,Xfr:$me,xfr:Pme,xharr:Nme,xhArr:Bme,Xi:zme,xi:jme,xlarr:Ume,xlArr:qme,xmap:Hme,xnis:Gme,xodot:Vme,Xopf:Wme,xopf:Yme,xoplus:Xme,xotime:Zme,xrarr:Kme,xrArr:Jme,Xscr:Qme,xscr:ege,xsqcup:tge,xuplus:nge,xutri:rge,xvee:ige,xwedge:sge,Yacute:oge,yacute:age,YAcy:lge,yacy:uge,Ycirc:cge,ycirc:dge,Ycy:fge,ycy:hge,yen:pge,Yfr:mge,yfr:gge,YIcy:yge,yicy:bge,Yopf:vge,yopf:xge,Yscr:wge,yscr:_ge,YUcy:Ege,yucy:Cge,yuml:Sge,Yuml:Age,Zacute:kge,zacute:Tge,Zcaron:Dge,zcaron:Lge,Zcy:Rge,zcy:Fge,Zdot:Oge,zdot:Mge,zeetrf:Ige,ZeroWidthSpace:$ge,Zeta:Pge,zeta:Nge,zfr:Bge,Zfr:zge,ZHcy:jge,zhcy:Uge,zigrarr:qge,zopf:Hge,Zopf:Gge,Zscr:Vge,zscr:Wge,zwj:Yge,zwnj:Xge},P9e=Object.freeze({__proto__:null,Aacute:y,aacute:v,Abreve:w,abreve:E,ac:S,acd:T,acE:D,Acirc:k,acirc:R,acute:O,Acy:B,acy:K,AElig:L,aelig:I,af:$,Afr:U,afr:q,Agrave:Y,agrave:X,alefsym:te,aleph:le,Alpha:ee,alpha:z,Amacr:he,amacr:fe,amalg:ze,amp:He,AMP:je,andand:we,And:$e,and:qe,andd:Pe,andslope:St,andv:ht,ang:nn,ange:Vt,angle:Mn,angmsdaa:Ze,angmsdab:pe,angmsdac:ie,angmsdad:oe,angmsdae:ve,angmsdaf:F,angmsdag:H,angmsdah:J,angmsd:re,angrt:ye,angrtvb:xe,angrtvbd:Re,angsph:P,angst:Q,angzarr:se,Aogon:ae,aogon:ke,Aopf:Ae,aopf:Ee,apacir:De,ap:Oe,apE:We,ape:tt,apid:ft,apos:Kt,ApplyFunction:xt,approx:Qt,approxeq:rn,Aring:sn,aring:on,Ascr:Tn,ascr:Cr,Assign:Qi,ast:hs,asymp:Vi,asympeq:zo,Atilde:Hn,atilde:Ir,Auml:Rr,auml:mn,awconint:Kr,awint:or,backcong:zi,backepsilon:nr,backprime:$r,backsim:ro,backsimeq:ge,Backslash:Le,Barv:it,barvee:Ke,barwed:Et,Barwed:an,barwedge:en,bbrk:wt,bbrktbrk:Qe,bcong:hn,Bcy:Sn,bcy:zt,bdquo:jt,becaus:Sr,because:di,Because:Zt,bemptyv:Xe,bepsi:pt,bernou:Zn,Bernoullis:ri,Beta:Ar,beta:Fr,beth:rr,between:qt,Bfr:xi,bfr:es,bigcap:wi,bigcirc:qs,bigcup:_o,bigodot:io,bigoplus:jo,bigotimes:ws,bigsqcup:Ms,bigstar:Uo,bigtriangledown:ps,bigtriangleup:ll,biguplus:ul,bigvee:kr,bigwedge:ts,bkarow:so,blacklozenge:Is,blacksquare:Hs,blacktriangle:pa,blacktriangledown:Gs,blacktriangleleft:cl,blacktriangleright:Wi,blank:Yi,blk12:oo,blk14:ms,blk34:qo,block:Vs,bne:fi,bnequiv:Pa,bNot:ao,bnot:Xi,Bopf:lo,bopf:dl,bot:Ht,bottom:Z,bowtie:me,boxbox:Be,boxdl:yt,boxdL:pn,boxDl:$t,boxDL:Pn,boxdr:hr,boxdR:Tr,boxDr:Ln,boxDR:ki,boxh:Jr,boxH:ar,boxhd:hi,boxHd:_s,boxhD:Ws,boxHD:ji,boxhu:Ui,boxHu:Eo,boxhU:Gr,boxHU:ma,boxminus:Zu,boxplus:fl,boxtimes:hl,boxul:Jc,boxuL:Ku,boxUl:ne,boxUL:_e,boxur:Ye,boxuR:bt,boxUr:Jt,boxUR:Ut,boxv:Cn,boxV:mr,boxvh:Pr,boxvH:ns,boxVh:Es,boxVH:_i,boxvl:Fi,boxvL:Te,boxVl:ut,boxVL:Wt,boxvr:Wn,boxvR:gr,boxVr:Nn,boxVR:qi,bprime:Na,breve:O1,Breve:EC,brvbar:M1,bscr:I1,Bscr:Fh,bsemi:$1,bsim:P1,bsime:ty,bsolb:Lm,bsol:N1,bsolhsub:Rm,bull:pl,bullet:B1,bump:ny,bumpE:ry,bumpe:z1,Bumpeq:j1,bumpeq:iy,Cacute:CC,cacute:SC,capand:AC,capbrcup:ff,capcap:hf,cap:sy,Cap:oy,capcup:U1,capdot:ay,CapitalDifferentialD:Qc,caps:ed,caret:Co,caron:Ju,Cayleys:Qu,ccaps:Fm,Ccaron:q1,ccaron:Oh,Ccedil:H1,ccedil:ly,Ccirc:Om,ccirc:kC,Cconint:uy,ccups:G1,ccupssm:cy,Cdot:dy,cdot:pf,cedil:Mm,Cedilla:V1,cemptyv:Im,cent:fy,centerdot:hy,CenterDot:mf,cfr:Mh,Cfr:$m,CHcy:W1,chcy:Ih,check:Y1,checkmark:td,Chi:$h,chi:nd,circ:Ph,circeq:gf,circlearrowleft:X1,circlearrowright:Z1,circledast:K1,circledcirc:TC,circleddash:rd,CircleDot:id,circledR:DC,circledS:LC,CircleMinus:RC,CirclePlus:FC,CircleTimes:OC,cir:Ho,cirE:Cs,cire:uo,cirfnint:Ss,cirmid:Nh,cirscir:MC,ClockwiseContourIntegral:Pm,CloseCurlyDoubleQuote:IC,CloseCurlyQuote:py,clubs:J1,clubsuit:my,colon:gy,Colon:yy,Colone:Q1,colone:ex,coloneq:by,comma:tx,commat:Bh,comp:$C,compfn:Nm,complement:bu,complexes:nx,cong:PC,congdot:rx,Congruent:ga,conint:Nr,Conint:ml,ContourIntegral:ec,copf:tc,Copf:ix,coprod:vy,Coproduct:sx,copy:xy,COPY:zh,copysr:ox,CounterClockwiseContourIntegral:wy,crarr:nc,cross:ax,Cross:lx,Cscr:Bm,cscr:_y,csub:ux,csube:cx,csup:NC,csupe:zm,ctdot:dx,cudarrl:BC,cudarrr:fx,cuepr:yf,cuesc:Ey,cularr:jm,cularrp:hx,cupbrcap:Cy,cupcap:px,CupCap:mx,cup:Ys,Cup:Um,cupcup:gx,cupdot:yx,cupor:bx,cups:bf,curarr:qm,curarrm:vx,curlyeqprec:xx,curlyeqsucc:wx,curlyvee:vf,curlywedge:_x,curren:Hm,curvearrowleft:Ex,curvearrowright:jh,cuvee:xf,cuwed:Cx,cwconint:Sx,cwint:Ax,cylcty:Uh,dagger:qh,Dagger:Hh,daleth:Gh,darr:kx,Darr:Tx,dArr:rc,dash:wf,Dashv:Vh,dashv:Dx,dbkarow:zC,dblac:jC,Dcaron:So,dcaron:Lx,Dcy:UC,dcy:Rx,ddagger:Fx,ddarr:Ox,DD:qC,dd:HC,DDotrahd:ic,ddotseq:Wh,deg:Gm,Del:Yh,Delta:vu,delta:GC,demptyv:VC,dfisht:_f,Dfr:Mx,dfr:Ix,dHar:$x,dharl:Vm,dharr:Ef,DiacriticalAcute:Sy,DiacriticalDot:Ay,DiacriticalDoubleAcute:ky,DiacriticalGrave:Xh,DiacriticalTilde:Px,diam:Nx,diamond:Wm,Diamond:WC,diamondsuit:Zh,diams:Bx,die:zx,DifferentialD:Ty,digamma:jx,disin:Ux,div:qx,divide:Kh,divideontimes:Jh,divonx:Dy,DJcy:Hx,djcy:Gx,dlcorn:Vx,dlcrop:Ly,dollar:Wx,Dopf:Yx,dopf:Cf,Dot:Xx,dot:Ym,DotDot:YC,doteq:XC,doteqdot:Oi,DotEqual:Ry,dotminus:Qh,dotplus:gl,dotsquare:Xm,doublebarwedge:Fy,DoubleContourIntegral:Zx,DoubleDot:Kx,DoubleDownArrow:Jx,DoubleLeftArrow:Qx,DoubleLeftRightArrow:ew,DoubleLeftTee:Oy,DoubleLongLeftArrow:tw,DoubleLongLeftRightArrow:Qr,DoubleLongRightArrow:nw,DoubleRightArrow:Sf,DoubleRightTee:Zm,DoubleUpArrow:ZC,DoubleUpDownArrow:rs,DoubleVerticalBar:KC,DownArrowBar:Km,downarrow:m,DownArrow:x,Downarrow:C,DownArrowUpArrow:_,DownBreve:A,downdownarrows:M,downharpoonleft:N,downharpoonright:j,DownLeftRightVector:V,DownLeftTeeVector:W,DownLeftVectorBar:ce,DownLeftVector:de,DownRightTeeVector:Ce,DownRightVectorBar:be,DownRightVector:Ie,DownTeeArrow:Ne,DownTee:Me,drbkarow:Ve,drcorn:nt,drcrop:Je,Dscr:mt,dscr:ct,DScy:gt,dscy:bn,dsol:Mt,Dstrok:Gn,dstrok:dn,dtdot:lr,dtri:Br,dtrif:ur,duarr:Kn,duhar:cr,dwangle:In,DZcy:zr,dzcy:Fn,dzigrarr:Qn,Eacute:Bn,eacute:vr,easter:co,Ecaron:jr,ecaron:Xs,Ecirc:Zs,ecirc:Ti,ecir:fo,ecolon:Ba,Ecy:$s,ecy:yl,eDDot:Jm,Edot:rw,edot:sd,eDot:Go,ee:sc,efDot:JC,Efr:Af,efr:My,eg:ep,Egrave:Qm,egrave:tp,egs:Iy,egsdot:iw,el:$y,Element:sw,elinters:ow,ell:aw,els:kz,elsdot:Tz,Emacr:Dz,emacr:Lz,empty:Rz,emptyset:Fz,EmptySmallSquare:Oz,emptyv:Mz,EmptyVerySmallSquare:Iz,emsp13:$z,emsp14:Pz,emsp:Nz,ENG:Bz,eng:zz,ensp:jz,Eogon:Uz,eogon:qz,Eopf:Hz,eopf:Gz,epar:Vz,eparsl:Wz,eplus:Yz,epsi:Xz,Epsilon:Zz,epsilon:Kz,epsiv:Jz,eqcirc:Qz,eqcolon:ej,eqsim:tj,eqslantgtr:nj,eqslantless:rj,Equal:ij,equals:sj,EqualTilde:oj,equest:aj,Equilibrium:lj,equiv:uj,equivDD:cj,eqvparsl:dj,erarr:fj,erDot:hj,escr:pj,Escr:mj,esdot:gj,Esim:yj,esim:bj,Eta:vj,eta:xj,ETH:wj,eth:_j,Euml:Ej,euml:Cj,euro:Sj,excl:Aj,exist:kj,Exists:Tj,expectation:Dj,exponentiale:Lj,ExponentialE:Rj,fallingdotseq:Fj,Fcy:Oj,fcy:Mj,female:Ij,ffilig:$j,fflig:Pj,ffllig:Nj,Ffr:Bj,ffr:zj,filig:jj,FilledSmallSquare:Uj,FilledVerySmallSquare:qj,fjlig:Hj,flat:Gj,fllig:Vj,fltns:Wj,fnof:Yj,Fopf:Xj,fopf:Zj,forall:Kj,ForAll:Jj,fork:Qj,forkv:eU,Fouriertrf:tU,fpartint:nU,frac12:rU,frac13:iU,frac14:sU,frac15:oU,frac16:aU,frac18:lU,frac23:uU,frac25:cU,frac34:dU,frac35:fU,frac38:hU,frac45:pU,frac56:mU,frac58:gU,frac78:yU,frasl:bU,frown:vU,fscr:xU,Fscr:wU,gacute:_U,Gamma:EU,gamma:CU,Gammad:SU,gammad:AU,gap:kU,Gbreve:TU,gbreve:DU,Gcedil:LU,Gcirc:RU,gcirc:FU,Gcy:OU,gcy:MU,Gdot:IU,gdot:$U,ge:PU,gE:NU,gEl:BU,gel:zU,geq:jU,geqq:UU,geqslant:qU,gescc:HU,ges:GU,gesdot:VU,gesdoto:WU,gesdotol:YU,gesl:XU,gesles:ZU,Gfr:KU,gfr:JU,gg:QU,Gg:eq,ggg:tq,gimel:nq,GJcy:rq,gjcy:iq,gla:sq,gl:oq,glE:aq,glj:lq,gnap:uq,gnapprox:cq,gne:dq,gnE:fq,gneq:hq,gneqq:pq,gnsim:mq,Gopf:gq,gopf:yq,grave:bq,GreaterEqual:vq,GreaterEqualLess:xq,GreaterFullEqual:wq,GreaterGreater:_q,GreaterLess:Eq,GreaterSlantEqual:Cq,GreaterTilde:Sq,Gscr:Aq,gscr:kq,gsim:Tq,gsime:Dq,gsiml:Lq,gtcc:Rq,gtcir:Fq,gt:Oq,GT:Mq,Gt:Iq,gtdot:$q,gtlPar:Pq,gtquest:Nq,gtrapprox:Bq,gtrarr:zq,gtrdot:jq,gtreqless:Uq,gtreqqless:qq,gtrless:Hq,gtrsim:Gq,gvertneqq:Vq,gvnE:Wq,Hacek:Yq,hairsp:Xq,half:Zq,hamilt:Kq,HARDcy:Jq,hardcy:Qq,harrcir:eH,harr:tH,hArr:nH,harrw:rH,Hat:iH,hbar:sH,Hcirc:oH,hcirc:aH,hearts:lH,heartsuit:uH,hellip:cH,hercon:dH,hfr:fH,Hfr:hH,HilbertSpace:pH,hksearow:mH,hkswarow:gH,hoarr:yH,homtht:bH,hookleftarrow:vH,hookrightarrow:xH,hopf:wH,Hopf:_H,horbar:EH,HorizontalLine:CH,hscr:SH,Hscr:AH,hslash:kH,Hstrok:TH,hstrok:DH,HumpDownHump:LH,HumpEqual:RH,hybull:FH,hyphen:OH,Iacute:MH,iacute:IH,ic:$H,Icirc:PH,icirc:NH,Icy:BH,icy:zH,Idot:jH,IEcy:UH,iecy:qH,iexcl:HH,iff:GH,ifr:VH,Ifr:WH,Igrave:YH,igrave:XH,ii:ZH,iiiint:KH,iiint:JH,iinfin:QH,iiota:eG,IJlig:tG,ijlig:nG,Imacr:rG,imacr:iG,image:sG,ImaginaryI:oG,imagline:aG,imagpart:lG,imath:uG,Im:cG,imof:dG,imped:fG,Implies:hG,incare:pG,infin:mG,infintie:gG,inodot:yG,intcal:bG,int:vG,Int:xG,integers:wG,Integral:_G,intercal:EG,Intersection:CG,intlarhk:SG,intprod:AG,InvisibleComma:kG,InvisibleTimes:TG,IOcy:DG,iocy:LG,Iogon:RG,iogon:FG,Iopf:OG,iopf:MG,Iota:IG,iota:$G,iprod:PG,iquest:NG,iscr:BG,Iscr:zG,isin:jG,isindot:UG,isinE:qG,isins:HG,isinsv:GG,isinv:VG,it:WG,Itilde:YG,itilde:XG,Iukcy:ZG,iukcy:KG,Iuml:JG,iuml:QG,Jcirc:eV,jcirc:tV,Jcy:nV,jcy:rV,Jfr:iV,jfr:sV,jmath:oV,Jopf:aV,jopf:lV,Jscr:uV,jscr:cV,Jsercy:dV,jsercy:fV,Jukcy:hV,jukcy:pV,Kappa:mV,kappa:gV,kappav:yV,Kcedil:bV,kcedil:vV,Kcy:xV,kcy:wV,Kfr:_V,kfr:EV,kgreen:CV,KHcy:SV,khcy:AV,KJcy:kV,kjcy:TV,Kopf:DV,kopf:LV,Kscr:RV,kscr:FV,lAarr:OV,Lacute:MV,lacute:IV,laemptyv:$V,lagran:PV,Lambda:NV,lambda:BV,lang:zV,Lang:jV,langd:UV,langle:qV,lap:HV,Laplacetrf:GV,laquo:VV,larrb:WV,larrbfs:YV,larr:XV,Larr:ZV,lArr:KV,larrfs:JV,larrhk:QV,larrlp:eW,larrpl:tW,larrsim:nW,larrtl:rW,latail:iW,lAtail:sW,lat:oW,late:aW,lates:lW,lbarr:uW,lBarr:cW,lbbrk:dW,lbrace:fW,lbrack:hW,lbrke:pW,lbrksld:mW,lbrkslu:gW,Lcaron:yW,lcaron:bW,Lcedil:vW,lcedil:xW,lceil:wW,lcub:_W,Lcy:EW,lcy:CW,ldca:SW,ldquo:AW,ldquor:kW,ldrdhar:TW,ldrushar:DW,ldsh:LW,le:RW,lE:FW,LeftAngleBracket:OW,LeftArrowBar:MW,leftarrow:IW,LeftArrow:$W,Leftarrow:PW,LeftArrowRightArrow:NW,leftarrowtail:BW,LeftCeiling:zW,LeftDoubleBracket:jW,LeftDownTeeVector:UW,LeftDownVectorBar:qW,LeftDownVector:HW,LeftFloor:GW,leftharpoondown:VW,leftharpoonup:WW,leftleftarrows:YW,leftrightarrow:XW,LeftRightArrow:ZW,Leftrightarrow:KW,leftrightarrows:JW,leftrightharpoons:QW,leftrightsquigarrow:eY,LeftRightVector:tY,LeftTeeArrow:nY,LeftTee:rY,LeftTeeVector:iY,leftthreetimes:sY,LeftTriangleBar:oY,LeftTriangle:aY,LeftTriangleEqual:lY,LeftUpDownVector:uY,LeftUpTeeVector:cY,LeftUpVectorBar:dY,LeftUpVector:fY,LeftVectorBar:hY,LeftVector:pY,lEg:mY,leg:gY,leq:yY,leqq:bY,leqslant:vY,lescc:xY,les:wY,lesdot:_Y,lesdoto:EY,lesdotor:CY,lesg:SY,lesges:AY,lessapprox:kY,lessdot:TY,lesseqgtr:DY,lesseqqgtr:LY,LessEqualGreater:RY,LessFullEqual:FY,LessGreater:OY,lessgtr:MY,LessLess:IY,lesssim:$Y,LessSlantEqual:PY,LessTilde:NY,lfisht:BY,lfloor:zY,Lfr:jY,lfr:UY,lg:qY,lgE:HY,lHar:GY,lhard:VY,lharu:WY,lharul:YY,lhblk:XY,LJcy:ZY,ljcy:KY,llarr:JY,ll:QY,Ll:eX,llcorner:tX,Lleftarrow:nX,llhard:rX,lltri:iX,Lmidot:sX,lmidot:oX,lmoustache:aX,lmoust:lX,lnap:uX,lnapprox:cX,lne:dX,lnE:fX,lneq:hX,lneqq:pX,lnsim:mX,loang:gX,loarr:yX,lobrk:bX,longleftarrow:vX,LongLeftArrow:xX,Longleftarrow:wX,longleftrightarrow:_X,LongLeftRightArrow:EX,Longleftrightarrow:CX,longmapsto:SX,longrightarrow:AX,LongRightArrow:kX,Longrightarrow:TX,looparrowleft:DX,looparrowright:LX,lopar:RX,Lopf:FX,lopf:OX,loplus:MX,lotimes:IX,lowast:$X,lowbar:PX,LowerLeftArrow:NX,LowerRightArrow:BX,loz:zX,lozenge:jX,lozf:UX,lpar:qX,lparlt:HX,lrarr:GX,lrcorner:VX,lrhar:WX,lrhard:YX,lrm:XX,lrtri:ZX,lsaquo:KX,lscr:JX,Lscr:QX,lsh:eZ,Lsh:tZ,lsim:nZ,lsime:rZ,lsimg:iZ,lsqb:sZ,lsquo:oZ,lsquor:aZ,Lstrok:lZ,lstrok:uZ,ltcc:cZ,ltcir:dZ,lt:fZ,LT:hZ,Lt:pZ,ltdot:mZ,lthree:gZ,ltimes:yZ,ltlarr:bZ,ltquest:vZ,ltri:xZ,ltrie:wZ,ltrif:_Z,ltrPar:EZ,lurdshar:CZ,luruhar:SZ,lvertneqq:AZ,lvnE:kZ,macr:TZ,male:DZ,malt:LZ,maltese:RZ,map:FZ,mapsto:OZ,mapstodown:MZ,mapstoleft:IZ,mapstoup:$Z,marker:PZ,mcomma:NZ,Mcy:BZ,mcy:zZ,mdash:jZ,mDDot:UZ,measuredangle:qZ,MediumSpace:HZ,Mellintrf:GZ,Mfr:VZ,mfr:WZ,mho:YZ,micro:XZ,midast:ZZ,midcir:KZ,mid:JZ,middot:QZ,minusb:eK,minus:tK,minusd:nK,minusdu:rK,MinusPlus:iK,mlcp:sK,mldr:oK,mnplus:aK,models:lK,Mopf:uK,mopf:cK,mp:dK,mscr:fK,Mscr:hK,mstpos:pK,Mu:mK,mu:gK,multimap:yK,mumap:bK,nabla:vK,Nacute:xK,nacute:wK,nang:_K,nap:EK,napE:CK,napid:SK,napos:AK,napprox:kK,natural:TK,naturals:DK,natur:LK,nbsp:RK,nbump:FK,nbumpe:OK,ncap:MK,Ncaron:IK,ncaron:$K,Ncedil:PK,ncedil:NK,ncong:BK,ncongdot:zK,ncup:jK,Ncy:UK,ncy:qK,ndash:HK,nearhk:GK,nearr:VK,neArr:WK,nearrow:YK,ne:XK,nedot:ZK,NegativeMediumSpace:KK,NegativeThickSpace:JK,NegativeThinSpace:QK,NegativeVeryThinSpace:eJ,nequiv:tJ,nesear:nJ,nesim:rJ,NestedGreaterGreater:iJ,NestedLessLess:sJ,NewLine:oJ,nexist:aJ,nexists:lJ,Nfr:uJ,nfr:cJ,ngE:dJ,nge:fJ,ngeq:hJ,ngeqq:pJ,ngeqslant:mJ,nges:gJ,nGg:yJ,ngsim:bJ,nGt:vJ,ngt:xJ,ngtr:wJ,nGtv:_J,nharr:EJ,nhArr:CJ,nhpar:SJ,ni:AJ,nis:kJ,nisd:TJ,niv:DJ,NJcy:LJ,njcy:RJ,nlarr:FJ,nlArr:OJ,nldr:MJ,nlE:IJ,nle:$J,nleftarrow:PJ,nLeftarrow:NJ,nleftrightarrow:BJ,nLeftrightarrow:zJ,nleq:jJ,nleqq:UJ,nleqslant:qJ,nles:HJ,nless:GJ,nLl:VJ,nlsim:WJ,nLt:YJ,nlt:XJ,nltri:ZJ,nltrie:KJ,nLtv:JJ,nmid:QJ,NoBreak:eQ,NonBreakingSpace:tQ,nopf:nQ,Nopf:rQ,Not:iQ,not:sQ,NotCongruent:oQ,NotCupCap:aQ,NotDoubleVerticalBar:lQ,NotElement:uQ,NotEqual:cQ,NotEqualTilde:dQ,NotExists:fQ,NotGreater:hQ,NotGreaterEqual:pQ,NotGreaterFullEqual:mQ,NotGreaterGreater:gQ,NotGreaterLess:yQ,NotGreaterSlantEqual:bQ,NotGreaterTilde:vQ,NotHumpDownHump:xQ,NotHumpEqual:wQ,notin:_Q,notindot:EQ,notinE:CQ,notinva:SQ,notinvb:AQ,notinvc:kQ,NotLeftTriangleBar:TQ,NotLeftTriangle:DQ,NotLeftTriangleEqual:LQ,NotLess:RQ,NotLessEqual:FQ,NotLessGreater:OQ,NotLessLess:MQ,NotLessSlantEqual:IQ,NotLessTilde:$Q,NotNestedGreaterGreater:PQ,NotNestedLessLess:NQ,notni:BQ,notniva:zQ,notnivb:jQ,notnivc:UQ,NotPrecedes:qQ,NotPrecedesEqual:HQ,NotPrecedesSlantEqual:GQ,NotReverseElement:VQ,NotRightTriangleBar:WQ,NotRightTriangle:YQ,NotRightTriangleEqual:XQ,NotSquareSubset:ZQ,NotSquareSubsetEqual:KQ,NotSquareSuperset:JQ,NotSquareSupersetEqual:QQ,NotSubset:eee,NotSubsetEqual:tee,NotSucceeds:nee,NotSucceedsEqual:ree,NotSucceedsSlantEqual:iee,NotSucceedsTilde:see,NotSuperset:oee,NotSupersetEqual:aee,NotTilde:lee,NotTildeEqual:uee,NotTildeFullEqual:cee,NotTildeTilde:dee,NotVerticalBar:fee,nparallel:hee,npar:pee,nparsl:mee,npart:gee,npolint:yee,npr:bee,nprcue:vee,nprec:xee,npreceq:wee,npre:_ee,nrarrc:Eee,nrarr:Cee,nrArr:See,nrarrw:Aee,nrightarrow:kee,nRightarrow:Tee,nrtri:Dee,nrtrie:Lee,nsc:Ree,nsccue:Fee,nsce:Oee,Nscr:Mee,nscr:Iee,nshortmid:$ee,nshortparallel:Pee,nsim:Nee,nsime:Bee,nsimeq:zee,nsmid:jee,nspar:Uee,nsqsube:qee,nsqsupe:Hee,nsub:Gee,nsubE:Vee,nsube:Wee,nsubset:Yee,nsubseteq:Xee,nsubseteqq:Zee,nsucc:Kee,nsucceq:Jee,nsup:Qee,nsupE:ete,nsupe:tte,nsupset:nte,nsupseteq:rte,nsupseteqq:ite,ntgl:ste,Ntilde:ote,ntilde:ate,ntlg:lte,ntriangleleft:ute,ntrianglelefteq:cte,ntriangleright:dte,ntrianglerighteq:fte,Nu:hte,nu:pte,num:mte,numero:gte,numsp:yte,nvap:bte,nvdash:vte,nvDash:xte,nVdash:wte,nVDash:_te,nvge:Ete,nvgt:Cte,nvHarr:Ste,nvinfin:Ate,nvlArr:kte,nvle:Tte,nvlt:Dte,nvltrie:Lte,nvrArr:Rte,nvrtrie:Fte,nvsim:Ote,nwarhk:Mte,nwarr:Ite,nwArr:$te,nwarrow:Pte,nwnear:Nte,Oacute:Bte,oacute:zte,oast:jte,Ocirc:Ute,ocirc:qte,ocir:Hte,Ocy:Gte,ocy:Vte,odash:Wte,Odblac:Yte,odblac:Xte,odiv:Zte,odot:Kte,odsold:Jte,OElig:Qte,oelig:ene,ofcir:tne,Ofr:nne,ofr:rne,ogon:ine,Ograve:sne,ograve:one,ogt:ane,ohbar:lne,ohm:une,oint:cne,olarr:dne,olcir:fne,olcross:hne,oline:pne,olt:mne,Omacr:gne,omacr:yne,Omega:bne,omega:vne,Omicron:xne,omicron:wne,omid:_ne,ominus:Ene,Oopf:Cne,oopf:Sne,opar:Ane,OpenCurlyDoubleQuote:kne,OpenCurlyQuote:Tne,operp:Dne,oplus:Lne,orarr:Rne,Or:Fne,or:One,ord:Mne,order:Ine,orderof:$ne,ordf:Pne,ordm:Nne,origof:Bne,oror:zne,orslope:jne,orv:Une,oS:qne,Oscr:Hne,oscr:Gne,Oslash:Vne,oslash:Wne,osol:Yne,Otilde:Xne,otilde:Zne,otimesas:Kne,Otimes:Jne,otimes:Qne,Ouml:ere,ouml:tre,ovbar:nre,OverBar:rre,OverBrace:ire,OverBracket:sre,OverParenthesis:ore,para:are,parallel:lre,par:ure,parsim:cre,parsl:dre,part:fre,PartialD:hre,Pcy:pre,pcy:mre,percnt:gre,period:yre,permil:bre,perp:vre,pertenk:xre,Pfr:wre,pfr:_re,Phi:Ere,phi:Cre,phiv:Sre,phmmat:Are,phone:kre,Pi:Tre,pi:Dre,pitchfork:Lre,piv:Rre,planck:Fre,planckh:Ore,plankv:Mre,plusacir:Ire,plusb:$re,pluscir:Pre,plus:Nre,plusdo:Bre,plusdu:zre,pluse:jre,PlusMinus:Ure,plusmn:qre,plussim:Hre,plustwo:Gre,pm:Vre,Poincareplane:Wre,pointint:Yre,popf:Xre,Popf:Zre,pound:Kre,prap:Jre,Pr:Qre,pr:eie,prcue:tie,precapprox:nie,prec:rie,preccurlyeq:iie,Precedes:sie,PrecedesEqual:oie,PrecedesSlantEqual:aie,PrecedesTilde:lie,preceq:uie,precnapprox:cie,precneqq:die,precnsim:fie,pre:hie,prE:pie,precsim:mie,prime:gie,Prime:yie,primes:bie,prnap:vie,prnE:xie,prnsim:wie,prod:_ie,Product:Eie,profalar:Cie,profline:Sie,profsurf:Aie,prop:kie,Proportional:Tie,Proportion:Die,propto:Lie,prsim:Rie,prurel:Fie,Pscr:Oie,pscr:Mie,Psi:Iie,psi:$ie,puncsp:Pie,Qfr:Nie,qfr:Bie,qint:zie,qopf:jie,Qopf:Uie,qprime:qie,Qscr:Hie,qscr:Gie,quaternions:Vie,quatint:Wie,quest:Yie,questeq:Xie,quot:Zie,QUOT:Kie,rAarr:Jie,race:Qie,Racute:ese,racute:tse,radic:nse,raemptyv:rse,rang:ise,Rang:sse,rangd:ose,range:ase,rangle:lse,raquo:use,rarrap:cse,rarrb:dse,rarrbfs:fse,rarrc:hse,rarr:pse,Rarr:mse,rArr:gse,rarrfs:yse,rarrhk:bse,rarrlp:vse,rarrpl:xse,rarrsim:wse,Rarrtl:_se,rarrtl:Ese,rarrw:Cse,ratail:Sse,rAtail:Ase,ratio:kse,rationals:Tse,rbarr:Dse,rBarr:Lse,RBarr:Rse,rbbrk:Fse,rbrace:Ose,rbrack:Mse,rbrke:Ise,rbrksld:$se,rbrkslu:Pse,Rcaron:Nse,rcaron:Bse,Rcedil:zse,rcedil:jse,rceil:Use,rcub:qse,Rcy:Hse,rcy:Gse,rdca:Vse,rdldhar:Wse,rdquo:Yse,rdquor:Xse,rdsh:Zse,real:Kse,realine:Jse,realpart:Qse,reals:eoe,Re:toe,rect:noe,reg:roe,REG:ioe,ReverseElement:soe,ReverseEquilibrium:ooe,ReverseUpEquilibrium:aoe,rfisht:loe,rfloor:uoe,rfr:coe,Rfr:doe,rHar:foe,rhard:hoe,rharu:poe,rharul:moe,Rho:goe,rho:yoe,rhov:boe,RightAngleBracket:voe,RightArrowBar:xoe,rightarrow:woe,RightArrow:_oe,Rightarrow:Eoe,RightArrowLeftArrow:Coe,rightarrowtail:Soe,RightCeiling:Aoe,RightDoubleBracket:koe,RightDownTeeVector:Toe,RightDownVectorBar:Doe,RightDownVector:Loe,RightFloor:Roe,rightharpoondown:Foe,rightharpoonup:Ooe,rightleftarrows:Moe,rightleftharpoons:Ioe,rightrightarrows:$oe,rightsquigarrow:Poe,RightTeeArrow:Noe,RightTee:Boe,RightTeeVector:zoe,rightthreetimes:joe,RightTriangleBar:Uoe,RightTriangle:qoe,RightTriangleEqual:Hoe,RightUpDownVector:Goe,RightUpTeeVector:Voe,RightUpVectorBar:Woe,RightUpVector:Yoe,RightVectorBar:Xoe,RightVector:Zoe,ring:Koe,risingdotseq:Joe,rlarr:Qoe,rlhar:eae,rlm:tae,rmoustache:nae,rmoust:rae,rnmid:iae,roang:sae,roarr:oae,robrk:aae,ropar:lae,ropf:uae,Ropf:cae,roplus:dae,rotimes:fae,RoundImplies:hae,rpar:pae,rpargt:mae,rppolint:gae,rrarr:yae,Rrightarrow:bae,rsaquo:vae,rscr:xae,Rscr:wae,rsh:_ae,Rsh:Eae,rsqb:Cae,rsquo:Sae,rsquor:Aae,rthree:kae,rtimes:Tae,rtri:Dae,rtrie:Lae,rtrif:Rae,rtriltri:Fae,RuleDelayed:Oae,ruluhar:Mae,rx:Iae,Sacute:$ae,sacute:Pae,sbquo:Nae,scap:Bae,Scaron:zae,scaron:jae,Sc:Uae,sc:qae,sccue:Hae,sce:Gae,scE:Vae,Scedil:Wae,scedil:Yae,Scirc:Xae,scirc:Zae,scnap:Kae,scnE:Jae,scnsim:Qae,scpolint:ele,scsim:tle,Scy:nle,scy:rle,sdotb:ile,sdot:sle,sdote:ole,searhk:ale,searr:lle,seArr:ule,searrow:cle,sect:dle,semi:fle,seswar:hle,setminus:ple,setmn:mle,sext:gle,Sfr:yle,sfr:ble,sfrown:vle,sharp:xle,SHCHcy:wle,shchcy:_le,SHcy:Ele,shcy:Cle,ShortDownArrow:Sle,ShortLeftArrow:Ale,shortmid:kle,shortparallel:Tle,ShortRightArrow:Dle,ShortUpArrow:Lle,shy:Rle,Sigma:Fle,sigma:Ole,sigmaf:Mle,sigmav:Ile,sim:$le,simdot:Ple,sime:Nle,simeq:Ble,simg:zle,simgE:jle,siml:Ule,simlE:qle,simne:Hle,simplus:Gle,simrarr:Vle,slarr:Wle,SmallCircle:Yle,smallsetminus:Xle,smashp:Zle,smeparsl:Kle,smid:Jle,smile:Qle,smt:eue,smte:tue,smtes:nue,SOFTcy:rue,softcy:iue,solbar:sue,solb:oue,sol:aue,Sopf:lue,sopf:uue,spades:cue,spadesuit:due,spar:fue,sqcap:hue,sqcaps:pue,sqcup:mue,sqcups:gue,Sqrt:yue,sqsub:bue,sqsube:vue,sqsubset:xue,sqsubseteq:wue,sqsup:_ue,sqsupe:Eue,sqsupset:Cue,sqsupseteq:Sue,square:Aue,Square:kue,SquareIntersection:Tue,SquareSubset:Due,SquareSubsetEqual:Lue,SquareSuperset:Rue,SquareSupersetEqual:Fue,SquareUnion:Oue,squarf:Mue,squ:Iue,squf:$ue,srarr:Pue,Sscr:Nue,sscr:Bue,ssetmn:zue,ssmile:jue,sstarf:Uue,Star:que,star:Hue,starf:Gue,straightepsilon:Vue,straightphi:Wue,strns:Yue,sub:Xue,Sub:Zue,subdot:Kue,subE:Jue,sube:Que,subedot:ece,submult:tce,subnE:nce,subne:rce,subplus:ice,subrarr:sce,subset:oce,Subset:ace,subseteq:lce,subseteqq:uce,SubsetEqual:cce,subsetneq:dce,subsetneqq:fce,subsim:hce,subsub:pce,subsup:mce,succapprox:gce,succ:yce,succcurlyeq:bce,Succeeds:vce,SucceedsEqual:xce,SucceedsSlantEqual:wce,SucceedsTilde:_ce,succeq:Ece,succnapprox:Cce,succneqq:Sce,succnsim:Ace,succsim:kce,SuchThat:Tce,sum:Dce,Sum:Lce,sung:Rce,sup1:Fce,sup2:Oce,sup3:Mce,sup:Ice,Sup:$ce,supdot:Pce,supdsub:Nce,supE:Bce,supe:zce,supedot:jce,Superset:Uce,SupersetEqual:qce,suphsol:Hce,suphsub:Gce,suplarr:Vce,supmult:Wce,supnE:Yce,supne:Xce,supplus:Zce,supset:Kce,Supset:Jce,supseteq:Qce,supseteqq:ede,supsetneq:tde,supsetneqq:nde,supsim:rde,supsub:ide,supsup:sde,swarhk:ode,swarr:ade,swArr:lde,swarrow:ude,swnwar:cde,szlig:dde,Tab:fde,target:hde,Tau:pde,tau:mde,tbrk:gde,Tcaron:yde,tcaron:bde,Tcedil:vde,tcedil:xde,Tcy:wde,tcy:_de,tdot:Ede,telrec:Cde,Tfr:Sde,tfr:Ade,there4:kde,therefore:Tde,Therefore:Dde,Theta:Lde,theta:Rde,thetasym:Fde,thetav:Ode,thickapprox:Mde,thicksim:Ide,ThickSpace:$de,ThinSpace:Pde,thinsp:Nde,thkap:Bde,thksim:zde,THORN:jde,thorn:Ude,tilde:qde,Tilde:Hde,TildeEqual:Gde,TildeFullEqual:Vde,TildeTilde:Wde,timesbar:Yde,timesb:Xde,times:Zde,timesd:Kde,tint:Jde,toea:Qde,topbot:efe,topcir:tfe,top:nfe,Topf:rfe,topf:ife,topfork:sfe,tosa:ofe,tprime:afe,trade:lfe,TRADE:ufe,triangle:cfe,triangledown:dfe,triangleleft:ffe,trianglelefteq:hfe,triangleq:pfe,triangleright:mfe,trianglerighteq:gfe,tridot:yfe,trie:bfe,triminus:vfe,TripleDot:xfe,triplus:wfe,trisb:_fe,tritime:Efe,trpezium:Cfe,Tscr:Sfe,tscr:Afe,TScy:kfe,tscy:Tfe,TSHcy:Dfe,tshcy:Lfe,Tstrok:Rfe,tstrok:Ffe,twixt:Ofe,twoheadleftarrow:Mfe,twoheadrightarrow:Ife,Uacute:$fe,uacute:Pfe,uarr:Nfe,Uarr:Bfe,uArr:zfe,Uarrocir:jfe,Ubrcy:Ufe,ubrcy:qfe,Ubreve:Hfe,ubreve:Gfe,Ucirc:Vfe,ucirc:Wfe,Ucy:Yfe,ucy:Xfe,udarr:Zfe,Udblac:Kfe,udblac:Jfe,udhar:Qfe,ufisht:ehe,Ufr:the,ufr:nhe,Ugrave:rhe,ugrave:ihe,uHar:she,uharl:ohe,uharr:ahe,uhblk:lhe,ulcorn:uhe,ulcorner:che,ulcrop:dhe,ultri:fhe,Umacr:hhe,umacr:phe,uml:mhe,UnderBar:ghe,UnderBrace:yhe,UnderBracket:bhe,UnderParenthesis:vhe,Union:xhe,UnionPlus:whe,Uogon:_he,uogon:Ehe,Uopf:Che,uopf:She,UpArrowBar:Ahe,uparrow:khe,UpArrow:The,Uparrow:Dhe,UpArrowDownArrow:Lhe,updownarrow:Rhe,UpDownArrow:Fhe,Updownarrow:Ohe,UpEquilibrium:Mhe,upharpoonleft:Ihe,upharpoonright:$he,uplus:Phe,UpperLeftArrow:Nhe,UpperRightArrow:Bhe,upsi:zhe,Upsi:jhe,upsih:Uhe,Upsilon:qhe,upsilon:Hhe,UpTeeArrow:Ghe,UpTee:Vhe,upuparrows:Whe,urcorn:Yhe,urcorner:Xhe,urcrop:Zhe,Uring:Khe,uring:Jhe,urtri:Qhe,Uscr:epe,uscr:tpe,utdot:npe,Utilde:rpe,utilde:ipe,utri:spe,utrif:ope,uuarr:ape,Uuml:lpe,uuml:upe,uwangle:cpe,vangrt:dpe,varepsilon:fpe,varkappa:hpe,varnothing:ppe,varphi:mpe,varpi:gpe,varpropto:ype,varr:bpe,vArr:vpe,varrho:xpe,varsigma:wpe,varsubsetneq:_pe,varsubsetneqq:Epe,varsupsetneq:Cpe,varsupsetneqq:Spe,vartheta:Ape,vartriangleleft:kpe,vartriangleright:Tpe,vBar:Dpe,Vbar:Lpe,vBarv:Rpe,Vcy:Fpe,vcy:Ope,vdash:Mpe,vDash:Ipe,Vdash:$pe,VDash:Ppe,Vdashl:Npe,veebar:Bpe,vee:zpe,Vee:jpe,veeeq:Upe,vellip:qpe,verbar:Hpe,Verbar:Gpe,vert:Vpe,Vert:Wpe,VerticalBar:Ype,VerticalLine:Xpe,VerticalSeparator:Zpe,VerticalTilde:Kpe,VeryThinSpace:Jpe,Vfr:Qpe,vfr:eme,vltri:tme,vnsub:nme,vnsup:rme,Vopf:ime,vopf:sme,vprop:ome,vrtri:ame,Vscr:lme,vscr:ume,vsubnE:cme,vsubne:dme,vsupnE:fme,vsupne:hme,Vvdash:pme,vzigzag:mme,Wcirc:gme,wcirc:yme,wedbar:bme,wedge:vme,Wedge:xme,wedgeq:wme,weierp:_me,Wfr:Eme,wfr:Cme,Wopf:Sme,wopf:Ame,wp:kme,wr:Tme,wreath:Dme,Wscr:Lme,wscr:Rme,xcap:Fme,xcirc:Ome,xcup:Mme,xdtri:Ime,Xfr:$me,xfr:Pme,xharr:Nme,xhArr:Bme,Xi:zme,xi:jme,xlarr:Ume,xlArr:qme,xmap:Hme,xnis:Gme,xodot:Vme,Xopf:Wme,xopf:Yme,xoplus:Xme,xotime:Zme,xrarr:Kme,xrArr:Jme,Xscr:Qme,xscr:ege,xsqcup:tge,xuplus:nge,xutri:rge,xvee:ige,xwedge:sge,Yacute:oge,yacute:age,YAcy:lge,yacy:uge,Ycirc:cge,ycirc:dge,Ycy:fge,ycy:hge,yen:pge,Yfr:mge,yfr:gge,YIcy:yge,yicy:bge,Yopf:vge,yopf:xge,Yscr:wge,yscr:_ge,YUcy:Ege,yucy:Cge,yuml:Sge,Yuml:Age,Zacute:kge,zacute:Tge,Zcaron:Dge,zcaron:Lge,Zcy:Rge,zcy:Fge,Zdot:Oge,zdot:Mge,zeetrf:Ige,ZeroWidthSpace:$ge,Zeta:Pge,zeta:Nge,zfr:Bge,Zfr:zge,ZHcy:jge,zhcy:Uge,zigrarr:qge,zopf:Hge,Zopf:Gge,Zscr:Vge,zscr:Wge,zwj:Yge,zwnj:Xge,default:$9e}),Zge="",Kge="",Jge="",Qge="",e0e="",t0e="",n0e="",r0e="",i0e="",s0e="&",o0e="&",a0e="",l0e="",u0e="",c0e="",d0e="",f0e="",h0e="",p0e="",m0e="",g0e="",y0e="",b0e="",v0e="",x0e="",w0e="",_0e="",E0e="",C0e="",S0e="",A0e="",k0e="",T0e="",D0e="",L0e="",R0e="",F0e="",O0e="",M0e="",I0e="",$0e=">",P0e=">",N0e="",B0e="",z0e="",j0e="",U0e="",q0e="",H0e="",G0e="",V0e="",W0e="",Y0e="",X0e="<",Z0e="<",K0e="",J0e="",Q0e="",eye="",tye="",nye="",rye="",iye="",sye="",oye="",aye="",lye="",uye="",cye="",dye="",fye="",hye="",pye="",mye="",gye="",yye="",bye="",vye="",xye="",wye='"',_ye='"',Eye="",Cye="",Sye="",Aye="",kye="",Tye="",Dye="",Lye="",Rye="",Fye="",Oye="",Mye="",Iye="",$ye="",Pye="",Nye="",Bye="",zye="",jye="",Uye="",qye="",Hye="",Gye="",Vye="",Wye="",N9e={Aacute:Zge,aacute:Kge,Acirc:Jge,acirc:Qge,acute:e0e,AElig:t0e,aelig:n0e,Agrave:r0e,agrave:i0e,amp:s0e,AMP:o0e,Aring:a0e,aring:l0e,Atilde:u0e,atilde:c0e,Auml:d0e,auml:f0e,brvbar:h0e,Ccedil:p0e,ccedil:m0e,cedil:g0e,cent:y0e,copy:b0e,COPY:v0e,curren:x0e,deg:w0e,divide:_0e,Eacute:E0e,eacute:C0e,Ecirc:S0e,ecirc:A0e,Egrave:k0e,egrave:T0e,ETH:D0e,eth:L0e,Euml:R0e,euml:F0e,frac12:O0e,frac14:M0e,frac34:I0e,gt:$0e,GT:P0e,Iacute:N0e,iacute:B0e,Icirc:z0e,icirc:j0e,iexcl:U0e,Igrave:q0e,igrave:H0e,iquest:G0e,Iuml:V0e,iuml:W0e,laquo:Y0e,lt:X0e,LT:Z0e,macr:K0e,micro:J0e,middot:Q0e,nbsp:eye,not:tye,Ntilde:nye,ntilde:rye,Oacute:iye,oacute:sye,Ocirc:oye,ocirc:aye,Ograve:lye,ograve:uye,ordf:cye,ordm:dye,Oslash:fye,oslash:hye,Otilde:pye,otilde:mye,Ouml:gye,ouml:yye,para:bye,plusmn:vye,pound:xye,quot:wye,QUOT:_ye,raquo:Eye,reg:Cye,REG:Sye,sect:Aye,shy:kye,sup1:Tye,sup2:Dye,sup3:Lye,szlig:Rye,THORN:Fye,thorn:Oye,times:Mye,Uacute:Iye,uacute:$ye,Ucirc:Pye,ucirc:Nye,Ugrave:Bye,ugrave:zye,uml:jye,Uuml:Uye,uuml:qye,Yacute:Hye,yacute:Gye,yen:Vye,yuml:Wye},B9e=Object.freeze({__proto__:null,Aacute:Zge,aacute:Kge,Acirc:Jge,acirc:Qge,acute:e0e,AElig:t0e,aelig:n0e,Agrave:r0e,agrave:i0e,amp:s0e,AMP:o0e,Aring:a0e,aring:l0e,Atilde:u0e,atilde:c0e,Auml:d0e,auml:f0e,brvbar:h0e,Ccedil:p0e,ccedil:m0e,cedil:g0e,cent:y0e,copy:b0e,COPY:v0e,curren:x0e,deg:w0e,divide:_0e,Eacute:E0e,eacute:C0e,Ecirc:S0e,ecirc:A0e,Egrave:k0e,egrave:T0e,ETH:D0e,eth:L0e,Euml:R0e,euml:F0e,frac12:O0e,frac14:M0e,frac34:I0e,gt:$0e,GT:P0e,Iacute:N0e,iacute:B0e,Icirc:z0e,icirc:j0e,iexcl:U0e,Igrave:q0e,igrave:H0e,iquest:G0e,Iuml:V0e,iuml:W0e,laquo:Y0e,lt:X0e,LT:Z0e,macr:K0e,micro:J0e,middot:Q0e,nbsp:eye,not:tye,Ntilde:nye,ntilde:rye,Oacute:iye,oacute:sye,Ocirc:oye,ocirc:aye,Ograve:lye,ograve:uye,ordf:cye,ordm:dye,Oslash:fye,oslash:hye,Otilde:pye,otilde:mye,Ouml:gye,ouml:yye,para:bye,plusmn:vye,pound:xye,quot:wye,QUOT:_ye,raquo:Eye,reg:Cye,REG:Sye,sect:Aye,shy:kye,sup1:Tye,sup2:Dye,sup3:Lye,szlig:Rye,THORN:Fye,thorn:Oye,times:Mye,Uacute:Iye,uacute:$ye,Ucirc:Pye,ucirc:Nye,Ugrave:Bye,ugrave:zye,uml:jye,Uuml:Uye,uuml:qye,Yacute:Hye,yacute:Gye,yen:Vye,yuml:Wye,default:N9e}),Yye="&",Xye="'",Zye=">",Kye="<",Jye='"',z9e={amp:Yye,apos:Xye,gt:Zye,lt:Kye,quot:Jye},j9e=Object.freeze({__proto__:null,amp:Yye,apos:Xye,gt:Zye,lt:Kye,quot:Jye,default:z9e}),U9e={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},q9e=Object.freeze({__proto__:null,default:U9e}),H9e=b(q9e),Qye=g(function(G,ue){var Se=h&&h.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Se(H9e);function dt(lt){if(lt>=55296&&lt<=57343||lt>1114111)return"";lt in Fe.default&&(lt=Fe.default[lt]);var vn="";return lt>65535&&(lt-=65536,vn+=String.fromCharCode(lt>>>10&1023|55296),lt=56320|lt&1023),vn+=String.fromCharCode(lt),vn}ue.default=dt});p(Qye);var ebe=b(P9e),G9e=b(B9e),tbe=b(j9e),kf=g(function(G,ue){var Se=h&&h.__importDefault||function(xr){return xr&&xr.__esModule?xr:{default:xr}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Se(ebe),dt=Se(G9e),lt=Se(tbe),vn=Se(Qye);ue.decodeXML=Bt(lt.default),ue.decodeHTMLStrict=Bt(Fe.default);function Bt(xr){var wr=Object.keys(xr).join("|"),ei=Vr(xr);wr+="|#[xX][\\da-fA-F]+|#\\d+";var ti=new RegExp("&(?:"+wr+");","g");return function(ho){return String(ho).replace(ti,ei)}}var On=function(xr,wr){return xr<wr?1:-1};ue.decodeHTML=function(){for(var xr=Object.keys(dt.default).sort(On),wr=Object.keys(Fe.default).sort(On),ei=0,ti=0;ei<wr.length;ei++)xr[ti]===wr[ei]?(wr[ei]+=";?",ti++):wr[ei]+=";";var ho=new RegExp("&(?:"+wr.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),ig=Vr(Fe.default);function nF(sg){return sg.substr(-1)!==";"&&(sg+=";"),ig(sg)}return function(sg){return String(sg).replace(ho,nF)}}();function Vr(xr){return function(ei){return ei.charAt(1)==="#"?ei.charAt(2)==="X"||ei.charAt(2)==="x"?vn.default(parseInt(ei.substr(3),16)):vn.default(parseInt(ei.substr(2),10)):xr[ei.slice(1,-1)]}}});p(kf),kf.decodeXML,kf.decodeHTMLStrict,kf.decodeHTML;var eg=g(function(G,ue){var Se=h&&h.__importDefault||function(Ao){return Ao&&Ao.__esModule?Ao:{default:Ao}};Object.defineProperty(ue,"__esModule",{value:!0});var Fe=Se(tbe),dt=Vr(Fe.default),lt=xr(dt);ue.encodeXML=ig(dt,lt);var vn=Se(ebe),Bt=Vr(vn.default),On=xr(Bt);ue.encodeHTML=ig(Bt,On);function Vr(Ao){return Object.keys(Ao).sort().reduce(function(rp,od){return rp[Ao[od]]="&"+od+";",rp},{})}function xr(Ao){var rp=[],od=[];return Object.keys(Ao).forEach(function(og){return og.length===1?rp.push("\\"+og):od.push(og)}),od.unshift("["+rp.join("")+"]"),new RegExp(od.join("|"),"g")}var wr=/[^\0-\x7F]/g,ei=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function ti(Ao){return"&#x"+Ao.charCodeAt(0).toString(16).toUpperCase()+";"}function ho(Ao,rp){var od=Ao.charCodeAt(0),og=Ao.charCodeAt(1),yze=(od-55296)*1024+og-56320+65536;return"&#x"+yze.toString(16).toUpperCase()+";"}function ig(Ao,rp){return function(od){return od.replace(rp,function(og){return Ao[og]}).replace(ei,ho).replace(wr,ti)}}var nF=xr(dt);function sg(Ao){return Ao.replace(nF,ti).replace(ei,ho).replace(wr,ti)}ue.escape=sg});p(eg),eg.encodeXML,eg.encodeHTML,eg.escape;var Vo=g(function(G,ue){Object.defineProperty(ue,"__esModule",{value:!0});function Se(Bt,On){return(!On||On<=0?kf.decodeXML:kf.decodeHTML)(Bt)}ue.decode=Se;function Fe(Bt,On){return(!On||On<=0?kf.decodeXML:kf.decodeHTMLStrict)(Bt)}ue.decodeStrict=Fe;function dt(Bt,On){return(!On||On<=0?eg.encodeXML:eg.encodeHTML)(Bt)}ue.encode=dt;var lt=eg;ue.encodeXML=lt.encodeXML,ue.encodeHTML=lt.encodeHTML,ue.escape=lt.escape,ue.encodeHTML4=lt.encodeHTML,ue.encodeHTML5=lt.encodeHTML;var vn=kf;ue.decodeXML=vn.decodeXML,ue.decodeHTML=vn.decodeHTML,ue.decodeHTMLStrict=vn.decodeHTMLStrict,ue.decodeHTML4=vn.decodeHTML,ue.decodeHTML5=vn.decodeHTML,ue.decodeHTML4Strict=vn.decodeHTMLStrict,ue.decodeHTML5Strict=vn.decodeHTMLStrict,ue.decodeXMLStrict=vn.decodeXML});p(Vo),Vo.decode,Vo.decodeStrict,Vo.encode,Vo.encodeXML,Vo.encodeHTML,Vo.escape,Vo.encodeHTML4,Vo.encodeHTML5,Vo.decodeXML;var nbe=Vo.decodeHTML;Vo.decodeHTMLStrict,Vo.decodeHTML4,Vo.decodeHTML5,Vo.decodeHTML4Strict,Vo.decodeHTML5Strict,Vo.decodeXMLStrict;var V9e=92,rbe="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",ibe="[A-Za-z][A-Za-z0-9-]*",W9e="[a-zA-Z_:][a-zA-Z0-9:._-]*",Y9e="[^\"'=<>`\\x00-\\x20]+",X9e="'[^']*'",Z9e='"[^"]*"',K9e="(?:"+Y9e+"|"+X9e+"|"+Z9e+")",J9e="(?:\\s*=\\s*"+K9e+")",Q9e="(?:\\s+"+W9e+J9e+"?)",sbe="<"+ibe+Q9e+"*\\s*/?>",obe="</"+ibe+"\\s*[>]",eBe="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",tBe="[<][?][\\s\\S]*?[?][>]",nBe="<![A-Z]+\\s+[^>]*>",rBe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",iBe="(?:"+sbe+"|"+obe+"|"+eBe+"|"+tBe+"|"+nBe+"|"+rBe+")",sBe=new RegExp("^"+iBe),oBe=/[\\&]/,abe="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",aBe=new RegExp("\\\\"+abe+"|"+rbe,"gi"),lBe='[&<>"]',lbe=new RegExp(lBe,"g"),uBe=function(G){return G.charCodeAt(0)===V9e?G.charAt(1):nbe(G)},ube=function(G){return oBe.test(G)?G.replace(aBe,uBe):G},cBe=function(G){try{return f(G)}catch{return G}},dBe=function(G){switch(G){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return G}},cbe=function(G){return lbe.test(G)?G.replace(lbe,dBe):G};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var ZR;function KR(G){return ZR(G)}if(String.fromCodePoint)ZR=function(G){try{return String.fromCodePoint(G)}catch(ue){if(ue instanceof RangeError)return"";throw ue}};else{var fBe=String.fromCharCode,hBe=Math.floor;ZR=function(){var G=16384,ue=[],Se,Fe,dt=-1,lt=arguments.length;if(!lt)return"";for(var vn="";++dt<lt;){var Bt=Number(arguments[dt]);if(!isFinite(Bt)||Bt<0||Bt>1114111||hBe(Bt)!==Bt)return"";Bt<=65535?ue.push(Bt):(Bt-=65536,Se=(Bt>>10)+55296,Fe=Bt%1024+56320,ue.push(Se,Fe)),(dt+1===lt||ue.length>G)&&(vn+=fBe.apply(null,ue),ue.length=0)}return vn}}/*! http://mths.be/repeat v0.2.0 by @mathias */String.prototype.repeat||function(){var G=function(){try{var Se={},Fe=Object.defineProperty,dt=Fe(Se,Se,Se)&&Fe}catch{}return dt}(),ue=function(Se){if(this==null)throw TypeError();var Fe=String(this),dt=Se?Number(Se):0;if(dt!=dt&&(dt=0),dt<0||dt==1/0)throw RangeError();for(var lt="";dt;)dt%2==1&&(lt+=Fe),dt>1&&(Fe+=Fe),dt>>=1;return lt};G?G(String.prototype,"repeat",{value:ue,configurable:!0,writable:!0}):String.prototype.repeat=ue}();var QC=cBe,JR=ube,dbe=10,QR=42,eS=95,pBe=96,fbe=91,mBe=93,hbe=60,gBe=33,pbe=92,yBe=38,mbe=40,eF=41,bBe=58,tg=39,ng=34,gbe=abe,tF="\\\\"+gbe,vBe=rbe,xBe=sBe,ybe=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),wBe=new RegExp('^(?:"('+tF+`|[^"\\x00])*"|'(`+tF+"|[^'\\x00])*'|\\(("+tF+"|[^()\\x00])*\\))"),_Be=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,bbe=new RegExp("^"+gbe),EBe=new RegExp("^"+vBe,"i"),CBe=/`+/,SBe=/^`+/,ABe=/\.\.\./g,kBe=/--+/g,TBe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,DBe=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,LBe=/^ *(?:\n *)?/,vbe=/^[ \t\n\x0b\x0c\x0d]/,xbe=/^\s/,RBe=/ *$/,FBe=/^ */,wbe=/^ *(?:\n|$)/,OBe=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,MBe=/^[^\n`\[\]\\!<&*_'"]+/m,ya=function(G){var ue=new a("text");return ue._literal=G,ue},_be=function(G){return G.slice(1,G.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()},IBe=function(G){var ue=G.exec(this.subject.slice(this.pos));return ue===null?null:(this.pos+=ue.index+ue[0].length,ue[0])},$Be=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},PBe=function(){return this.match(LBe),!0},NBe=function(G){var ue=this.match(SBe);if(ue===null)return!1;for(var Se=this.pos,Fe,dt,lt;(Fe=this.match(CBe))!==null;)if(Fe===ue)return dt=new a("code"),lt=this.subject.slice(Se,this.pos-ue.length).replace(/\n/gm," "),lt.length>0&&lt.match(/[^ ]/)!==null&&lt[0]==" "&&lt[lt.length-1]==" "?dt._literal=lt.slice(1,lt.length-1):dt._literal=lt,G.appendChild(dt),!0;return this.pos=Se,G.appendChild(ya(ue)),!0},BBe=function(G){var ue=this.subject,Se;return this.pos+=1,this.peek()===dbe?(this.pos+=1,Se=new a("linebreak"),G.appendChild(Se)):bbe.test(ue.charAt(this.pos))?(G.appendChild(ya(ue.charAt(this.pos))),this.pos+=1):G.appendChild(ya("\\")),!0},zBe=function(G){var ue,Se,Fe;return(ue=this.match(TBe))?(Se=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=QC("mailto:"+Se),Fe._title="",Fe.appendChild(ya(Se)),G.appendChild(Fe),!0):(ue=this.match(DBe))?(Se=ue.slice(1,ue.length-1),Fe=new a("link"),Fe._destination=QC(Se),Fe._title="",Fe.appendChild(ya(Se)),G.appendChild(Fe),!0):!1},jBe=function(G){var ue=this.match(xBe);if(ue===null)return!1;var Se=new a("html_inline");return Se._literal=ue,G.appendChild(Se),!0},UBe=function(G){var ue=0,Se,Fe,dt,lt=this.pos,vn,Bt,On,Vr,xr,wr,ei,ti;if(G===tg||G===ng)ue++,this.pos++;else for(;this.peek()===G;)ue++,this.pos++;return ue===0?null:(Se=lt===0?`
`:this.subject.charAt(lt-1),dt=this.peek(),dt===-1?Fe=`
`:Fe=KR(dt),xr=xbe.test(Fe),wr=ybe.test(Fe),ei=xbe.test(Se),ti=ybe.test(Se),vn=!xr&&(!wr||ei||ti),Bt=!ei&&(!ti||xr||wr),G===eS?(On=vn&&(!Bt||ti),Vr=Bt&&(!vn||wr)):G===tg||G===ng?(On=vn&&!Bt,Vr=Bt):(On=vn,Vr=Bt),this.pos=lt,{numdelims:ue,can_open:On,can_close:Vr})},qBe=function(G,ue){var Se=this.scanDelims(G);if(!Se)return!1;var Fe=Se.numdelims,dt=this.pos,lt;this.pos+=Fe,G===tg?lt="":G===ng?lt="":lt=this.subject.slice(dt,this.pos);var vn=ya(lt);return ue.appendChild(vn),(Se.can_open||Se.can_close)&&(this.options.smart||G!==tg&&G!==ng)&&(this.delimiters={cc:G,numdelims:Fe,origdelims:Fe,node:vn,previous:this.delimiters,next:null,can_open:Se.can_open,can_close:Se.can_close},this.delimiters.previous!==null&&(this.delimiters.previous.next=this.delimiters)),!0},HBe=function(G){G.previous!==null&&(G.previous.next=G.next),G.next===null?this.delimiters=G.previous:G.next.previous=G.previous},GBe=function(G,ue){G.next!==ue&&(G.next=ue,ue.previous=G)},VBe=function(G){for(var ue,Se,Fe,dt,lt,vn,Bt,On,Vr,xr,wr=[[],[],[]],ei=!1,ti=0;ti<3;ti++)wr[ti][eS]=G,wr[ti][QR]=G,wr[ti][tg]=G,wr[ti][ng]=G;for(Se=this.delimiters;Se!==null&&Se.previous!==G;)Se=Se.previous;for(;Se!==null;){var ho=Se.cc;if(!Se.can_close)Se=Se.next;else{for(ue=Se.previous,xr=!1;ue!==null&&ue!==G&&ue!==wr[Se.origdelims%3][ho];){if(ei=(Se.can_open||ue.can_close)&&Se.origdelims%3!==0&&(ue.origdelims+Se.origdelims)%3===0,ue.cc===Se.cc&&ue.can_open&&!ei){xr=!0;break}ue=ue.previous}if(Fe=Se,ho===QR||ho===eS)if(!xr)Se=Se.next;else{Bt=Se.numdelims>=2&&ue.numdelims>=2?2:1,dt=ue.node,lt=Se.node,ue.numdelims-=Bt,Se.numdelims-=Bt,dt._literal=dt._literal.slice(0,dt._literal.length-Bt),lt._literal=lt._literal.slice(0,lt._literal.length-Bt);var ig=new a(Bt===1?"emph":"strong");for(On=dt._next;On&&On!==lt;)Vr=On._next,On.unlink(),ig.appendChild(On),On=Vr;dt.insertAfter(ig),GBe(ue,Se),ue.numdelims===0&&(dt.unlink(),this.removeDelimiter(ue)),Se.numdelims===0&&(lt.unlink(),vn=Se.next,this.removeDelimiter(Se),Se=vn)}else ho===tg?(Se.node._literal="",xr&&(ue.node._literal=""),Se=Se.next):ho===ng&&(Se.node._literal="",xr&&(ue.node.literal=""),Se=Se.next);xr||(wr[Fe.origdelims%3][ho]=Fe.previous,Fe.can_open||this.removeDelimiter(Fe))}}for(;this.delimiters!==null&&this.delimiters!==G;)this.removeDelimiter(this.delimiters)},WBe=function(){var G=this.match(wBe);return G===null?null:JR(G.substr(1,G.length-2))},YBe=function(){var G=this.match(_Be);if(G===null){if(this.peek()===hbe)return null;for(var ue=this.pos,Se=0,Fe;(Fe=this.peek())!==-1;)if(Fe===pbe&&bbe.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(Fe===mbe)this.pos+=1,Se+=1;else if(Fe===eF){if(Se<1)break;this.pos+=1,Se-=1}else{if(vbe.exec(KR(Fe))!==null)break;this.pos+=1}return this.pos===ue&&Fe!==eF||Se!==0?null:(G=this.subject.substr(ue,this.pos-ue),QC(JR(G)))}else return QC(JR(G.substr(1,G.length-2)))},XBe=function(){var G=this.match(OBe);return G===null||G.length>1001?0:G.length},ZBe=function(G){var ue=this.pos;this.pos+=1;var Se=ya("[");return G.appendChild(Se),this.addBracket(Se,ue,!1),!0},KBe=function(G){var ue=this.pos;if(this.pos+=1,this.peek()===fbe){this.pos+=1;var Se=ya("![");G.appendChild(Se),this.addBracket(Se,ue+1,!0)}else G.appendChild(ya("!"));return!0},JBe=function(G){var ue,Se,Fe,dt,lt=!1,vn,Bt;if(this.pos+=1,ue=this.pos,Bt=this.brackets,Bt===null)return G.appendChild(ya("]")),!0;if(!Bt.active)return G.appendChild(ya("]")),this.removeBracket(),!0;Se=Bt.image;var On=this.pos;if(this.peek()===mbe&&(this.pos++,this.spnl()&&(Fe=this.parseLinkDestination())!==null&&this.spnl()&&(vbe.test(this.subject.charAt(this.pos-1))&&(dt=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===eF?(this.pos+=1,lt=!0):this.pos=On),!lt){var Vr=this.pos,xr=this.parseLinkLabel();if(xr>2?vn=this.subject.slice(Vr,Vr+xr):Bt.bracketAfter||(vn=this.subject.slice(Bt.index,ue)),xr===0&&(this.pos=On),vn){var wr=this.refmap[_be(vn)];wr&&(Fe=wr.destination,dt=wr.title,lt=!0)}}if(lt){var ei=new a(Se?"image":"link");ei._destination=Fe,ei._title=dt||"";var ti,ho;for(ti=Bt.node._next;ti;)ho=ti._next,ti.unlink(),ei.appendChild(ti),ti=ho;if(G.appendChild(ei),this.processEmphasis(Bt.previousDelimiter),this.removeBracket(),Bt.node.unlink(),!Se)for(Bt=this.brackets;Bt!==null;)Bt.image||(Bt.active=!1),Bt=Bt.previous;return!0}else return this.removeBracket(),this.pos=ue,G.appendChild(ya("]")),!0},QBe=function(G,ue,Se){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:G,previous:this.brackets,previousDelimiter:this.delimiters,index:ue,image:Se,active:!0}},e7e=function(){this.brackets=this.brackets.previous},t7e=function(G){var ue;return(ue=this.match(EBe))?(G.appendChild(ya(nbe(ue))),!0):!1},n7e=function(G){var ue;return(ue=this.match(MBe))?(this.options.smart?G.appendChild(ya(ue.replace(ABe,"").replace(kBe,function(Se){var Fe=0,dt=0;return Se.length%3===0?dt=Se.length/3:Se.length%2===0?Fe=Se.length/2:Se.length%3===2?(Fe=1,dt=(Se.length-2)/3):(Fe=2,dt=(Se.length-4)/3),"".repeat(dt)+"".repeat(Fe)}))):G.appendChild(ya(ue)),!0):!1},r7e=function(G){this.pos+=1;var ue=G._lastChild;if(ue&&ue.type==="text"&&ue._literal[ue._literal.length-1]===" "){var Se=ue._literal[ue._literal.length-2]===" ";ue._literal=ue._literal.replace(RBe,""),G.appendChild(new a(Se?"linebreak":"softbreak"))}else G.appendChild(new a("softbreak"));return this.match(FBe),!0},i7e=function(G,ue){this.subject=G,this.pos=0;var Se,Fe,dt,lt,vn=this.pos;if(lt=this.parseLinkLabel(),lt===0)return 0;if(Se=this.subject.substr(0,lt),this.peek()===bBe)this.pos++;else return this.pos=vn,0;if(this.spnl(),Fe=this.parseLinkDestination(),Fe===null)return this.pos=vn,0;var Bt=this.pos;this.spnl(),this.pos!==Bt&&(dt=this.parseLinkTitle()),dt===null&&(dt="",this.pos=Bt);var On=!0;if(this.match(wbe)===null&&(dt===""?On=!1:(dt="",this.pos=Bt,On=this.match(wbe)!==null)),!On)return this.pos=vn,0;var Vr=_be(Se);return Vr===""?(this.pos=vn,0):(ue[Vr]||(ue[Vr]={destination:Fe,title:dt}),this.pos-vn)},s7e=function(G){var ue=!1,Se=this.peek();if(Se===-1)return!1;switch(Se){case dbe:ue=this.parseNewline(G);break;case pbe:ue=this.parseBackslash(G);break;case pBe:ue=this.parseBackticks(G);break;case QR:case eS:ue=this.handleDelim(Se,G);break;case tg:case ng:ue=this.options.smart&&this.handleDelim(Se,G);break;case fbe:ue=this.parseOpenBracket(G);break;case gBe:ue=this.parseBang(G);break;case mBe:ue=this.parseCloseBracket(G);break;case hbe:ue=this.parseAutolink(G)||this.parseHtmlTag(G);break;case yBe:ue=this.parseEntity(G);break;default:ue=this.parseString(G);break}return ue||(this.pos+=1,G.appendChild(ya(KR(Se)))),!0},o7e=function(G){for(this.subject=G._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(G););G._string_content=null,this.processEmphasis(null)};function a7e(G){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:IBe,peek:$Be,spnl:PBe,parseBackticks:NBe,parseBackslash:BBe,parseAutolink:zBe,parseHtmlTag:jBe,scanDelims:UBe,handleDelim:qBe,parseLinkTitle:WBe,parseLinkDestination:YBe,parseLinkLabel:XBe,parseOpenBracket:ZBe,parseBang:KBe,parseCloseBracket:JBe,addBracket:QBe,removeBracket:e7e,parseEntity:t7e,parseString:n7e,parseNewline:r7e,parseReference:i7e,parseInline:s7e,processEmphasis:VBe,removeDelimiter:HBe,options:G||{},parse:o7e}}var tS=4,Ebe=9,l7e=10,Cbe=62,u7e=60,Sbe=32,Abe=91,c7e=[/./,/^<(?:script|pre|textarea|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+sbe+"|"+obe+")\\s*$","i")],d7e=[/./,/<\/(?:script|pre|textarea|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],f7e=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,h7e=/^[#`~*+_=<>0-9-]/,kbe=/[^ \t\f\v\r\n]/,p7e=/^[*+-]/,m7e=/^(\d{1,9})([.)])/,g7e=/^#{1,6}(?:[ \t]+|$)/,y7e=/^`{3,}(?!.*`)|^~{3,}/,b7e=/^(?:`{3,}|~{3,})(?= *$)/,v7e=/^(?:=+|-+)[ \t]*$/,x7e=/\r\n|\n|\r/,w7e=function(G){return!kbe.test(G)},lw=function(G){return G===Sbe||G===Ebe},xu=function(G,ue){return ue<G.length?G.charCodeAt(ue):-1},Tbe=function(G){for(;G;){if(G._lastLineBlank)return!0;var ue=G.type;if(!G._lastLineChecked&&(ue==="list"||ue==="item"))G._lastLineChecked=!0,G=G._lastChild;else{G._lastLineChecked=!0;break}}return!1},_7e=function(){if(this.partiallyConsumedTab){this.offset+=1;var G=4-this.column%4;this.tip._string_content+=" ".repeat(G)}this.tip._string_content+=this.currentLine.slice(this.offset)+`
`},E7e=function(G,ue){for(;!this.blocks[this.tip.type].canContain(G);)this.finalize(this.tip,this.lineNumber-1);var Se=ue+1,Fe=new a(G,[[this.lineNumber,Se],[0,0]]);return Fe._string_content="",this.tip.appendChild(Fe),this.tip=Fe,Fe},C7e=function(G,ue){var Se=G.currentLine.slice(G.nextNonspace),Fe,dt,lt,vn,Bt={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:G.indent};if(G.indent>=4)return null;if(Fe=Se.match(p7e))Bt.type="bullet",Bt.bulletChar=Fe[0][0];else if((Fe=Se.match(m7e))&&(ue.type!=="paragraph"||Fe[1]==="1"))Bt.type="ordered",Bt.start=parseInt(Fe[1]),Bt.delimiter=Fe[2];else return null;if(dt=xu(G.currentLine,G.nextNonspace+Fe[0].length),!(dt===-1||dt===Ebe||dt===Sbe)||ue.type==="paragraph"&&!G.currentLine.slice(G.nextNonspace+Fe[0].length).match(kbe))return null;G.advanceNextNonspace(),G.advanceOffset(Fe[0].length,!0),lt=G.column,vn=G.offset;do G.advanceOffset(1,!0),dt=xu(G.currentLine,G.offset);while(G.column-lt<5&&lw(dt));var On=xu(G.currentLine,G.offset)===-1,Vr=G.column-lt;return Vr>=5||Vr<1||On?(Bt.padding=Fe[0].length+1,G.column=lt,G.offset=vn,lw(xu(G.currentLine,G.offset))&&G.advanceOffset(1,!0)):Bt.padding=Fe[0].length+Vr,Bt},S7e=function(G,ue){return G.type===ue.type&&G.delimiter===ue.delimiter&&G.bulletChar===ue.bulletChar},A7e=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var G=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=G}this.allClosed=!0}},Dbe={document:{continue:function(){return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(G,ue){for(var Se=ue._firstChild;Se;){if(Tbe(Se)&&Se._next){ue._listData.tight=!1;break}for(var Fe=Se._firstChild;Fe;){if(Tbe(Fe)&&(Se._next||Fe._next)){ue._listData.tight=!1;break}Fe=Fe._next}Se=Se._next}},canContain:function(G){return G==="item"},acceptsLines:!1},block_quote:{continue:function(G){var ue=G.currentLine;if(!G.indented&&xu(ue,G.nextNonspace)===Cbe)G.advanceNextNonspace(),G.advanceOffset(1,!1),lw(xu(ue,G.offset))&&G.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},item:{continue:function(G,ue){if(G.blank){if(ue._firstChild==null)return 1;G.advanceNextNonspace()}else if(G.indent>=ue._listData.markerOffset+ue._listData.padding)G.advanceOffset(ue._listData.markerOffset+ue._listData.padding,!0);else return 1;return 0},finalize:function(){},canContain:function(G){return G!=="item"},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(G,ue){var Se=G.currentLine,Fe=G.indent;if(ue._isFenced){var dt=Fe<=3&&Se.charAt(G.nextNonspace)===ue._fenceChar&&Se.slice(G.nextNonspace).match(b7e);if(dt&&dt[0].length>=ue._fenceLength)return G.lastLineLength=G.offset+Fe+dt[0].length,G.finalize(ue,G.lineNumber),2;for(var lt=ue._fenceOffset;lt>0&&lw(xu(Se,G.offset));)G.advanceOffset(1,!0),lt--}else if(Fe>=tS)G.advanceOffset(tS,!0);else if(G.blank)G.advanceNextNonspace();else return 1;return 0},finalize:function(G,ue){if(ue._isFenced){var Se=ue._string_content,Fe=Se.indexOf(`
`),dt=Se.slice(0,Fe),lt=Se.slice(Fe+1);ue.info=ube(dt.trim()),ue._literal=lt}else ue._literal=ue._string_content.replace(/(\n *)+$/,`
`);ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(G,ue){return G.blank&&(ue._htmlBlockType===6||ue._htmlBlockType===7)?1:0},finalize:function(G,ue){ue._literal=ue._string_content.replace(/(\n *)+$/,""),ue._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(G){return G.blank?1:0},finalize:function(G,ue){for(var Se,Fe=!1;xu(ue._string_content,0)===Abe&&(Se=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Se),Fe=!0;Fe&&w7e(ue._string_content)&&ue.unlink()},canContain:function(){return!1},acceptsLines:!0}},k7e=[function(G){return!G.indented&&xu(G.currentLine,G.nextNonspace)===Cbe?(G.advanceNextNonspace(),G.advanceOffset(1,!1),lw(xu(G.currentLine,G.offset))&&G.advanceOffset(1,!0),G.closeUnmatchedBlocks(),G.addChild("block_quote",G.nextNonspace),1):0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(g7e))){G.advanceNextNonspace(),G.advanceOffset(ue[0].length,!1),G.closeUnmatchedBlocks();var Se=G.addChild("heading",G.nextNonspace);return Se.level=ue[0].trim().length,Se._string_content=G.currentLine.slice(G.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),G.advanceOffset(G.currentLine.length-G.offset),2}else return 0},function(G){var ue;if(!G.indented&&(ue=G.currentLine.slice(G.nextNonspace).match(y7e))){var Se=ue[0].length;G.closeUnmatchedBlocks();var Fe=G.addChild("code_block",G.nextNonspace);return Fe._isFenced=!0,Fe._fenceLength=Se,Fe._fenceChar=ue[0][0],Fe._fenceOffset=G.indent,G.advanceNextNonspace(),G.advanceOffset(Se,!1),2}else return 0},function(G,ue){if(!G.indented&&xu(G.currentLine,G.nextNonspace)===u7e){var Se=G.currentLine.slice(G.nextNonspace),Fe;for(Fe=1;Fe<=7;Fe++)if(c7e[Fe].test(Se)&&(Fe<7||ue.type!=="paragraph")){G.closeUnmatchedBlocks();var dt=G.addChild("html_block",G.offset);return dt._htmlBlockType=Fe,2}}return 0},function(G,ue){var Se;if(!G.indented&&ue.type==="paragraph"&&(Se=G.currentLine.slice(G.nextNonspace).match(v7e))){G.closeUnmatchedBlocks();for(var Fe;xu(ue._string_content,0)===Abe&&(Fe=G.inlineParser.parseReference(ue._string_content,G.refmap));)ue._string_content=ue._string_content.slice(Fe);if(ue._string_content.length>0){var dt=new a("heading",ue.sourcepos);return dt.level=Se[0][0]==="="?1:2,dt._string_content=ue._string_content,ue.insertAfter(dt),ue.unlink(),G.tip=dt,G.advanceOffset(G.currentLine.length-G.offset,!1),2}else return 0}else return 0},function(G){return!G.indented&&f7e.test(G.currentLine.slice(G.nextNonspace))?(G.closeUnmatchedBlocks(),G.addChild("thematic_break",G.nextNonspace),G.advanceOffset(G.currentLine.length-G.offset,!1),2):0},function(G,ue){var Se;return(!G.indented||ue.type==="list")&&(Se=C7e(G,ue))?(G.closeUnmatchedBlocks(),(G.tip.type!=="list"||!S7e(ue._listData,Se))&&(ue=G.addChild("list",G.nextNonspace),ue._listData=Se),ue=G.addChild("item",G.nextNonspace),ue._listData=Se,1):0},function(G){return G.indented&&G.tip.type!=="paragraph"&&!G.blank?(G.advanceOffset(tS,!0),G.closeUnmatchedBlocks(),G.addChild("code_block",G.offset),2):0}],T7e=function(G,ue){for(var Se=this.currentLine,Fe,dt,lt;G>0&&(lt=Se[this.offset]);)lt==="	"?(Fe=4-this.column%4,ue?(this.partiallyConsumedTab=Fe>G,dt=Fe>G?G:Fe,this.column+=dt,this.offset+=this.partiallyConsumedTab?0:1,G-=dt):(this.partiallyConsumedTab=!1,this.column+=Fe,this.offset+=1,G-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,G-=1)},D7e=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},L7e=function(){for(var G=this.currentLine,ue=this.offset,Se=this.column,Fe;(Fe=G.charAt(ue))!=="";)if(Fe===" ")ue++,Se++;else if(Fe==="	")ue++,Se+=4-Se%4;else break;this.blank=Fe===`
`||Fe==="\r"||Fe==="",this.nextNonspace=ue,this.nextNonspaceColumn=Se,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=tS},R7e=function(G){var ue=!0,Se,Fe=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,G.indexOf("\0")!==-1&&(G=G.replace(/\0/g,"")),this.currentLine=G;for(var dt;(dt=Fe._lastChild)&&dt._open;){switch(Fe=dt,this.findNextNonspace(),this.blocks[Fe.type].continue(this,Fe)){case 0:break;case 1:ue=!1;break;case 2:return;default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!ue){Fe=Fe._parent;break}}this.allClosed=Fe===this.oldtip,this.lastMatchedContainer=Fe;for(var lt=Fe.type!=="paragraph"&&Dbe[Fe.type].acceptsLines,vn=this.blockStarts,Bt=vn.length;!lt;){if(this.findNextNonspace(),!this.indented&&!h7e.test(G.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var On=0;On<Bt;){var Vr=vn[On](this,Fe);if(Vr===1){Fe=this.tip;break}else if(Vr===2){Fe=this.tip,lt=!0;break}else On++}if(On===Bt){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&Fe.lastChild&&(Fe.lastChild._lastLineBlank=!0),Se=Fe.type;for(var xr=this.blank&&!(Se==="block_quote"||Se==="code_block"&&Fe._isFenced||Se==="item"&&!Fe._firstChild&&Fe.sourcepos[0][0]===this.lineNumber),wr=Fe;wr;)wr._lastLineBlank=xr,wr=wr._parent;this.blocks[Se].acceptsLines?(this.addLine(),Se==="html_block"&&Fe._htmlBlockType>=1&&Fe._htmlBlockType<=5&&d7e[Fe._htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=G.length,this.finalize(Fe,this.lineNumber))):this.offset<G.length&&!this.blank&&(Fe=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=G.length},F7e=function(G,ue){var Se=G._parent;G._open=!1,G.sourcepos[1]=[ue,this.lastLineLength],this.blocks[G.type].finalize(this,G),this.tip=Se},O7e=function(G){var ue,Se,Fe,dt=G.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;Se=dt.next();)ue=Se.node,Fe=ue.type,!Se.entering&&(Fe==="paragraph"||Fe==="heading")&&this.inlineParser.parse(ue)},Lbe=function(){var G=new a("document",[[1,1],[0,0]]);return G},M7e=function(G){this.doc=new Lbe,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var ue=G.split(x7e),Se=ue.length;G.charCodeAt(G.length-1)===l7e&&(Se-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var Fe=0;Fe<Se;Fe++)this.incorporateLine(ue[Fe]);for(;this.tip;)this.finalize(this.tip,Se);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};function I7e(G){return{doc:new Lbe,blocks:Dbe,blockStarts:k7e,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new a7e(G),findNextNonspace:L7e,advanceOffset:T7e,advanceNextNonspace:D7e,addLine:_7e,addChild:E7e,incorporateLine:R7e,finalize:F7e,processInlines:O7e,closeUnmatchedBlocks:A7e,parse:M7e,options:G||{}}}function np(){}function $7e(G){var ue=G.walker(),Se,Fe;for(this.buffer="",this.lastOut=`
`;Se=ue.next();)Fe=Se.node.type,this[Fe]&&this[Fe](Se.node,Se.entering);return this.buffer}function P7e(G){this.buffer+=G,this.lastOut=G}function N7e(){this.lastOut!==`
`&&this.lit(`
`)}function B7e(G){this.lit(G)}function z7e(G){return G}np.prototype.render=$7e,np.prototype.out=B7e,np.prototype.lit=P7e,np.prototype.cr=N7e,np.prototype.esc=z7e;var j7e=/^javascript:|vbscript:|file:|data:/i,U7e=/^data:image\/(?:png|gif|jpeg|webp)/i,Rbe=function(G){return j7e.test(G)&&!U7e.test(G)};function q7e(G,ue,Se){if(!(this.disableTags>0)){if(this.buffer+="<"+G,ue&&ue.length>0)for(var Fe=0,dt;(dt=ue[Fe])!==void 0;)this.buffer+=" "+dt[0]+'="'+dt[1]+'"',Fe++;Se&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}}function is(G){G=G||{},G.softbreak=G.softbreak||`
`,this.disableTags=0,this.lastOut=`
`,this.options=G}function H7e(G){this.out(G.literal)}function G7e(){this.lit(this.options.softbreak)}function V7e(){this.tag("br",[],!0),this.cr()}function W7e(G,ue){var Se=this.attrs(G);ue?(this.options.safe&&Rbe(G.destination)||Se.push(["href",this.esc(G.destination)]),G.title&&Se.push(["title",this.esc(G.title)]),this.tag("a",Se)):this.tag("/a")}function Y7e(G,ue){ue?(this.disableTags===0&&(this.options.safe&&Rbe(G.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(G.destination)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,this.disableTags===0&&(G.title&&this.lit('" title="'+this.esc(G.title)),this.lit('" />')))}function X7e(G,ue){this.tag(ue?"em":"/em")}function Z7e(G,ue){this.tag(ue?"strong":"/strong")}function K7e(G,ue){var Se=G.parent.parent,Fe=this.attrs(G);Se!==null&&Se.type==="list"&&Se.listTight||(ue?(this.cr(),this.tag("p",Fe)):(this.tag("/p"),this.cr()))}function J7e(G,ue){var Se="h"+G.level,Fe=this.attrs(G);ue?(this.cr(),this.tag(Se,Fe)):(this.tag("/"+Se),this.cr())}function Q7e(G){this.tag("code"),this.out(G.literal),this.tag("/code")}function eze(G){var ue=G.info?G.info.split(/\s+/):[],Se=this.attrs(G);ue.length>0&&ue[0].length>0&&Se.push(["class","language-"+this.esc(ue[0])]),this.cr(),this.tag("pre"),this.tag("code",Se),this.out(G.literal),this.tag("/code"),this.tag("/pre"),this.cr()}function tze(G){var ue=this.attrs(G);this.cr(),this.tag("hr",ue,!0),this.cr()}function nze(G,ue){var Se=this.attrs(G);ue?(this.cr(),this.tag("blockquote",Se),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())}function rze(G,ue){var Se=G.listType==="bullet"?"ul":"ol",Fe=this.attrs(G);if(ue){var dt=G.listStart;dt!==null&&dt!==1&&Fe.push(["start",dt.toString()]),this.cr(),this.tag(Se,Fe),this.cr()}else this.cr(),this.tag("/"+Se),this.cr()}function ize(G,ue){var Se=this.attrs(G);ue?this.tag("li",Se):(this.tag("/li"),this.cr())}function sze(G){this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal)}function oze(G){this.cr(),this.options.safe?this.lit("<!-- raw HTML omitted -->"):this.lit(G.literal),this.cr()}function aze(G,ue){ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit)}function lze(G,ue){this.cr(),ue&&G.onEnter?this.lit(G.onEnter):!ue&&G.onExit&&this.lit(G.onExit),this.cr()}function uze(G){this.lit(this.esc(G))}function cze(G){var ue=[];if(this.options.sourcepos){var Se=G.sourcepos;Se&&ue.push(["data-sourcepos",String(Se[0][0])+":"+String(Se[0][1])+"-"+String(Se[1][0])+":"+String(Se[1][1])])}return ue}is.prototype=Object.create(np.prototype),is.prototype.text=H7e,is.prototype.html_inline=sze,is.prototype.html_block=oze,is.prototype.softbreak=G7e,is.prototype.linebreak=V7e,is.prototype.link=W7e,is.prototype.image=Y7e,is.prototype.emph=X7e,is.prototype.strong=Z7e,is.prototype.paragraph=K7e,is.prototype.heading=J7e,is.prototype.code=Q7e,is.prototype.code_block=eze,is.prototype.thematic_break=tze,is.prototype.block_quote=nze,is.prototype.list=rze,is.prototype.item=ize,is.prototype.custom_inline=aze,is.prototype.custom_block=lze,is.prototype.esc=cbe,is.prototype.out=uze,is.prototype.tag=q7e,is.prototype.attrs=cze;var dze=/\<[^>]*\>/;function fze(G){return G.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function rg(G){G=G||{},this.disableTags=0,this.lastOut=`
`,this.indentLevel=0,this.indent="  ",this.options=G}function hze(G){this.buffer="";var ue,Se,Fe=G.walker(),dt,lt,vn,Bt,On,Vr,xr=this.options;for(xr.time&&console.time("rendering"),this.buffer+=`<?xml version="1.0" encoding="UTF-8"?>
`,this.buffer+=`<!DOCTYPE document SYSTEM "CommonMark.dtd">
`;dt=Fe.next();)if(vn=dt.entering,lt=dt.node,Vr=lt.type,Bt=lt.isContainer,On=Vr==="thematic_break"||Vr==="linebreak"||Vr==="softbreak",Se=fze(Vr),vn){switch(ue=[],Vr){case"document":ue.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":lt.listType!==null&&ue.push(["type",lt.listType.toLowerCase()]),lt.listStart!==null&&ue.push(["start",String(lt.listStart)]),lt.listTight!==null&&ue.push(["tight",lt.listTight?"true":"false"]);var wr=lt.listDelimiter;if(wr!==null){var ei="";wr==="."?ei="period":ei="paren",ue.push(["delimiter",ei])}break;case"code_block":lt.info&&ue.push(["info",lt.info]);break;case"heading":ue.push(["level",String(lt.level)]);break;case"link":case"image":ue.push(["destination",lt.destination]),ue.push(["title",lt.title]);break;case"custom_inline":case"custom_block":ue.push(["on_enter",lt.onEnter]),ue.push(["on_exit",lt.onExit]);break}if(xr.sourcepos){var ti=lt.sourcepos;ti&&ue.push(["sourcepos",String(ti[0][0])+":"+String(ti[0][1])+"-"+String(ti[1][0])+":"+String(ti[1][1])])}if(this.cr(),this.out(this.tag(Se,ue,On)),Bt)this.indentLevel+=1;else if(!Bt&&!On){var ho=lt.literal;ho&&this.out(this.esc(ho)),this.out(this.tag("/"+Se))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+Se));return xr.time&&console.timeEnd("rendering"),this.buffer+=`
`,this.buffer}function pze(G){this.disableTags>0?this.buffer+=G.replace(dze,""):this.buffer+=G,this.lastOut=G}function mze(){if(this.lastOut!==`
`){this.buffer+=`
`,this.lastOut=`
`;for(var G=this.indentLevel;G>0;G--)this.buffer+=this.indent}}function gze(G,ue,Se){var Fe="<"+G;if(ue&&ue.length>0)for(var dt=0,lt;(lt=ue[dt])!==void 0;)Fe+=" "+lt[0]+'="'+this.esc(lt[1])+'"',dt++;return Se&&(Fe+=" /"),Fe+=">",Fe}rg.prototype=Object.create(np.prototype),rg.prototype.render=hze,rg.prototype.out=pze,rg.prototype.cr=mze,rg.prototype.tag=gze,rg.prototype.esc=cbe,n.HtmlRenderer=is,n.Node=a,n.Parser=I7e,n.Renderer=np,n.XmlRenderer=rg,Object.defineProperty(n,"__esModule",{value:!0})})}(x_,x_.exports)),x_.exports}var mA={exports:{}},R5,RCe;function hIt(){if(RCe)return R5;RCe=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,b=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,g++;for(var w=(v-y)*d+1>>>0,E=new Uint8Array(w);y!==v;){for(var S=p[y],T=0,D=w-1;(S!==0||T<b)&&D!==-1;D--,T++)S+=256*E[D]>>>0,E[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=T,y++}for(var k=w-b;k!==w&&E[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=e.charAt(E[k]);return R}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var b=0,y=0;p[g]===l;)b++,g++;for(var v=(p.length-g)*u+1>>>0,w=new Uint8Array(v);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var S=0,T=v-1;(E!==0||S<y)&&T!==-1;T--,S++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,g++}if(p[g]!==" "){for(var D=v-y;D!==v&&w[D]===0;)D++;for(var k=new Uint8Array(b+(v-D)),R=b;D!==v;)k[R++]=w[D++];return k}}}function h(p){var g=f(p);if(g)return g;throw new Error("Non-base"+a+" character")}return{encode:c,decodeUnsafe:f,decode:h}}return R5=t,R5}var gA={},F5={},O5={},M5,FCe;function M8e(){return FCe||(FCe=1,M5=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),M5}var I5,OCe;function iz(){if(OCe)return I5;OCe=1;var t=M8e();return I5=function(){return t()&&!!Symbol.toStringTag},I5}var $5,MCe;function pIt(){return MCe||(MCe=1,$5=Error),$5}var P5,ICe;function mIt(){return ICe||(ICe=1,P5=EvalError),P5}var N5,$Ce;function gIt(){return $Ce||($Ce=1,N5=RangeError),N5}var B5,PCe;function yIt(){return PCe||(PCe=1,B5=ReferenceError),B5}var z5,NCe;function I8e(){return NCe||(NCe=1,z5=SyntaxError),z5}var j5,BCe;function UR(){return BCe||(BCe=1,j5=TypeError),j5}var U5,zCe;function bIt(){return zCe||(zCe=1,U5=URIError),U5}var q5,jCe;function vIt(){if(jCe)return q5;jCe=1;var t=typeof Symbol<"u"&&Symbol,e=M8e();return q5=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},q5}var H5,UCe;function xIt(){if(UCe)return H5;UCe=1;var t={__proto__:null,foo:{}},e=Object;return H5=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof e)},H5}var G5,qCe;function wIt(){if(qCe)return G5;qCe=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(l,u){for(var d=[],c=0;c<l.length;c+=1)d[c]=l[c];for(var f=0;f<u.length;f+=1)d[f+l.length]=u[f];return d},s=function(l,u){for(var d=[],c=u,f=0;c<l.length;c+=1,f+=1)d[f]=l[c];return d},o=function(a,l){for(var u="",d=0;d<a.length;d+=1)u+=a[d],d+1<a.length&&(u+=l);return u};return G5=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==r)throw new TypeError(t+u);for(var d=s(arguments,1),c,f=function(){if(this instanceof c){var y=u.apply(this,i(d,arguments));return Object(y)===y?y:this}return u.apply(l,i(d,arguments))},h=n(0,u.length-d.length),p=[],g=0;g<h;g++)p[g]="$"+g;if(c=Function("binder","return function ("+o(p,",")+"){ return binder.apply(this,arguments); }")(f),u.prototype){var b=function(){};b.prototype=u.prototype,c.prototype=new b,b.prototype=null}return c},G5}var V5,HCe;function sz(){if(HCe)return V5;HCe=1;var t=wIt();return V5=Function.prototype.bind||t,V5}var W5,GCe;function _It(){if(GCe)return W5;GCe=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=sz();return W5=n.call(t,e),W5}var Y5,VCe;function bC(){if(VCe)return Y5;VCe=1;var t,e=pIt(),n=mIt(),r=gIt(),i=yIt(),s=I8e(),o=UR(),a=bIt(),l=Function,u=function(q){try{return l('"use strict"; return ('+q+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var c=function(){throw new o},f=d?function(){try{return arguments.callee,c}catch{try{return d(arguments,"callee").get}catch{return c}}}():c,h=vIt()(),p=xIt()(),g=Object.getPrototypeOf||(p?function(q){return q.__proto__}:null),b={},y=typeof Uint8Array>"u"||!g?t:g(Uint8Array),v={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":h&&g?g([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":b,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&g?g(g([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!h||!g?t:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":r,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!h||!g?t:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&g?g(""[Symbol.iterator]()):t,"%Symbol%":h?Symbol:t,"%SyntaxError%":s,"%ThrowTypeError%":f,"%TypedArray%":y,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(g)try{null.error}catch(q){var w=g(g(q));v["%Error.prototype%"]=w}var E=function q(Y){var X;if(Y==="%AsyncFunction%")X=u("async function () {}");else if(Y==="%GeneratorFunction%")X=u("function* () {}");else if(Y==="%AsyncGeneratorFunction%")X=u("async function* () {}");else if(Y==="%AsyncGenerator%"){var te=q("%AsyncGeneratorFunction%");te&&(X=te.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var le=q("%AsyncGenerator%");le&&g&&(X=g(le.prototype))}return v[Y]=X,X},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=sz(),D=_It(),k=T.call(Function.call,Array.prototype.concat),R=T.call(Function.apply,Array.prototype.splice),O=T.call(Function.call,String.prototype.replace),B=T.call(Function.call,String.prototype.slice),K=T.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,$=function(Y){var X=B(Y,0,1),te=B(Y,-1);if(X==="%"&&te!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&X!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var le=[];return O(Y,L,function(ee,z,he,fe){le[le.length]=he?O(fe,I,"$1"):z||ee}),le},U=function(Y,X){var te=Y,le;if(D(S,te)&&(le=S[te],te="%"+le[0]+"%"),D(v,te)){var ee=v[te];if(ee===b&&(ee=E(te)),typeof ee>"u"&&!X)throw new o("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:le,name:te,value:ee}}throw new s("intrinsic "+Y+" does not exist!")};return Y5=function(Y,X){if(typeof Y!="string"||Y.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof X!="boolean")throw new o('"allowMissing" argument must be a boolean');if(K(/^%?[^%]*%?$/,Y)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var te=$(Y),le=te.length>0?te[0]:"",ee=U("%"+le+"%",X),z=ee.name,he=ee.value,fe=!1,ze=ee.alias;ze&&(le=ze[0],R(te,k([0,1],ze)));for(var He=1,je=!0;He<te.length;He+=1){var we=te[He],$e=B(we,0,1),qe=B(we,-1);if(($e==='"'||$e==="'"||$e==="`"||qe==='"'||qe==="'"||qe==="`")&&$e!==qe)throw new s("property names with quotes must have matching quotes");if((we==="constructor"||!je)&&(fe=!0),le+="."+we,z="%"+le+"%",D(v,z))he=v[z];else if(he!=null){if(!(we in he)){if(!X)throw new o("base intrinsic for "+Y+" exists, but the property is not available.");return}if(d&&He+1>=te.length){var Pe=d(he,we);je=!!Pe,je&&"get"in Pe&&!("originalValue"in Pe.get)?he=Pe.get:he=he[we]}else je=D(he,we),he=he[we];je&&!fe&&(v[z]=he)}}return he},Y5}var X5={exports:{}},Z5,WCe;function oz(){if(WCe)return Z5;WCe=1;var t=bC(),e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Z5=e,Z5}var K5,YCe;function az(){if(YCe)return K5;YCe=1;var t=bC(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return K5=e,K5}var J5,XCe;function EIt(){if(XCe)return J5;XCe=1;var t=oz(),e=I8e(),n=UR(),r=az();return J5=function(s,o,a){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,f=!!r&&r(s,o);if(t)t(s,o,{configurable:d===null&&f?f.configurable:!d,enumerable:l===null&&f?f.enumerable:!l,value:a,writable:u===null&&f?f.writable:!u});else if(c||!l&&!u&&!d)s[o]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},J5}var Q5,ZCe;function CIt(){if(ZCe)return Q5;ZCe=1;var t=oz(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Q5=e,Q5}var e4,KCe;function SIt(){if(KCe)return e4;KCe=1;var t=bC(),e=EIt(),n=CIt()(),r=az(),i=UR(),s=t("%Math.floor%");return e4=function(a,l){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof l!="number"||l<0||l>4294967295||s(l)!==l)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],d=!0,c=!0;if("length"in a&&r){var f=r(a,"length");f&&!f.configurable&&(d=!1),f&&!f.writable&&(c=!1)}return(d||c||!u)&&(n?e(a,"length",l,!0,!0):e(a,"length",l)),a},e4}var JCe;function $8e(){return JCe||(JCe=1,function(t){var e=sz(),n=bC(),r=SIt(),i=UR(),s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(o,s),l=oz(),u=n("%Math.max%");t.exports=function(f){if(typeof f!="function")throw new i("a function is required");var h=a(e,o,arguments);return r(h,1+u(0,f.length-(arguments.length-1)),!0)};var d=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:d}):t.exports.apply=d}(X5)),X5.exports}var t4,QCe;function P8e(){if(QCe)return t4;QCe=1;var t=bC(),e=$8e(),n=e(t("String.prototype.indexOf"));return t4=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e(o):o},t4}var n4,eSe;function AIt(){if(eSe)return n4;eSe=1;var t=iz()(),e=P8e(),n=e("Object.prototype.toString"),r=function(a){return t&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},i=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},s=function(){return r(arguments)}();return r.isLegacyArguments=i,n4=s?r:i,n4}var r4,tSe;function kIt(){if(tSe)return r4;tSe=1;var t=Object.prototype.toString,e=Function.prototype.toString,n=/^\s*(?:function)?\*/,r=iz()(),i=Object.getPrototypeOf,s=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return r4=function(l){if(typeof l!="function")return!1;if(n.test(e.call(l)))return!0;if(!r){var u=t.call(l);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof o>"u"){var d=s();o=d?i(d):!1}return i(l)===o},r4}var i4,nSe;function TIt(){if(nSe)return i4;nSe=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(v){v!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(w){try{var E=t.call(w);return i.test(E)}catch{return!1}},o=function(w){try{return s(w)?!1:(t.call(w),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",d="[object GeneratorFunction]",c="[object HTMLAllCollection]",f="[object HTML document.all class]",h="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,g=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(b=function(w){if((g||!w)&&(typeof w>"u"||typeof w=="object"))try{var E=a.call(w);return(E===c||E===f||E===h||E===l)&&w("")==null}catch{}return!1})}return i4=e?function(w){if(b(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;try{e(w,null,n)}catch(E){if(E!==r)return!1}return!s(w)&&o(w)}:function(w){if(b(w))return!0;if(!w||typeof w!="function"&&typeof w!="object")return!1;if(p)return o(w);if(s(w))return!1;var E=a.call(w);return E!==u&&E!==d&&!/^\[object HTML/.test(E)?!1:o(w)},i4}var s4,rSe;function DIt(){if(rSe)return s4;rSe=1;var t=TIt(),e=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r=function(l,u,d){for(var c=0,f=l.length;c<f;c++)n.call(l,c)&&(d==null?u(l[c],c,l):u.call(d,l[c],c,l))},i=function(l,u,d){for(var c=0,f=l.length;c<f;c++)d==null?u(l.charAt(c),c,l):u.call(d,l.charAt(c),c,l)},s=function(l,u,d){for(var c in l)n.call(l,c)&&(d==null?u(l[c],c,l):u.call(d,l[c],c,l))},o=function(l,u,d){if(!t(u))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=d),e.call(l)==="[object Array]"?r(l,u,c):typeof l=="string"?i(l,u,c):s(l,u,c)};return s4=o,s4}var o4,iSe;function LIt(){return iSe||(iSe=1,o4=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),o4}var a4,sSe;function RIt(){if(sSe)return a4;sSe=1;var t=LIt(),e=typeof globalThis>"u"?Zi:globalThis;return a4=function(){for(var r=[],i=0;i<t.length;i++)typeof e[t[i]]=="function"&&(r[r.length]=t[i]);return r},a4}var l4,oSe;function N8e(){if(oSe)return l4;oSe=1;var t=DIt(),e=RIt(),n=$8e(),r=P8e(),i=az(),s=r("Object.prototype.toString"),o=iz()(),a=typeof globalThis>"u"?Zi:globalThis,l=e(),u=r("String.prototype.slice"),d=Object.getPrototypeOf,c=r("Array.prototype.indexOf",!0)||function(b,y){for(var v=0;v<b.length;v+=1)if(b[v]===y)return v;return-1},f={__proto__:null};o&&i&&d?t(l,function(g){var b=new a[g];if(Symbol.toStringTag in b){var y=d(b),v=i(y,Symbol.toStringTag);if(!v){var w=d(y);v=i(w,Symbol.toStringTag)}f["$"+g]=n(v.get)}}):t(l,function(g){var b=new a[g],y=b.slice||b.set;y&&(f["$"+g]=n(y))});var h=function(b){var y=!1;return t(f,function(v,w){if(!y)try{"$"+v(b)===w&&(y=u(w,1))}catch{}}),y},p=function(b){var y=!1;return t(f,function(v,w){if(!y)try{v(b),y=u(w,1)}catch{}}),y};return l4=function(b){if(!b||typeof b!="object")return!1;if(!o){var y=u(s(b),8,-1);return c(l,y)>-1?y:y!=="Object"?!1:p(b)}return i?h(b):null},l4}var u4,aSe;function FIt(){if(aSe)return u4;aSe=1;var t=N8e();return u4=function(n){return!!t(n)},u4}var lSe;function OIt(){return lSe||(lSe=1,function(t){var e=AIt(),n=kIt(),r=N8e(),i=FIt();function s(pe){return pe.call.bind(pe)}var o=typeof BigInt<"u",a=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),c=s(Boolean.prototype.valueOf);if(o)var f=s(BigInt.prototype.valueOf);if(a)var h=s(Symbol.prototype.valueOf);function p(pe,ie){if(typeof pe!="object")return!1;try{return ie(pe),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=i;function g(pe){return typeof Promise<"u"&&pe instanceof Promise||pe!==null&&typeof pe=="object"&&typeof pe.then=="function"&&typeof pe.catch=="function"}t.isPromise=g;function b(pe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(pe):i(pe)||z(pe)}t.isArrayBufferView=b;function y(pe){return r(pe)==="Uint8Array"}t.isUint8Array=y;function v(pe){return r(pe)==="Uint8ClampedArray"}t.isUint8ClampedArray=v;function w(pe){return r(pe)==="Uint16Array"}t.isUint16Array=w;function E(pe){return r(pe)==="Uint32Array"}t.isUint32Array=E;function S(pe){return r(pe)==="Int8Array"}t.isInt8Array=S;function T(pe){return r(pe)==="Int16Array"}t.isInt16Array=T;function D(pe){return r(pe)==="Int32Array"}t.isInt32Array=D;function k(pe){return r(pe)==="Float32Array"}t.isFloat32Array=k;function R(pe){return r(pe)==="Float64Array"}t.isFloat64Array=R;function O(pe){return r(pe)==="BigInt64Array"}t.isBigInt64Array=O;function B(pe){return r(pe)==="BigUint64Array"}t.isBigUint64Array=B;function K(pe){return l(pe)==="[object Map]"}K.working=typeof Map<"u"&&K(new Map);function L(pe){return typeof Map>"u"?!1:K.working?K(pe):pe instanceof Map}t.isMap=L;function I(pe){return l(pe)==="[object Set]"}I.working=typeof Set<"u"&&I(new Set);function $(pe){return typeof Set>"u"?!1:I.working?I(pe):pe instanceof Set}t.isSet=$;function U(pe){return l(pe)==="[object WeakMap]"}U.working=typeof WeakMap<"u"&&U(new WeakMap);function q(pe){return typeof WeakMap>"u"?!1:U.working?U(pe):pe instanceof WeakMap}t.isWeakMap=q;function Y(pe){return l(pe)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function X(pe){return Y(pe)}t.isWeakSet=X;function te(pe){return l(pe)==="[object ArrayBuffer]"}te.working=typeof ArrayBuffer<"u"&&te(new ArrayBuffer);function le(pe){return typeof ArrayBuffer>"u"?!1:te.working?te(pe):pe instanceof ArrayBuffer}t.isArrayBuffer=le;function ee(pe){return l(pe)==="[object DataView]"}ee.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ee(new DataView(new ArrayBuffer(1),0,1));function z(pe){return typeof DataView>"u"?!1:ee.working?ee(pe):pe instanceof DataView}t.isDataView=z;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function fe(pe){return l(pe)==="[object SharedArrayBuffer]"}function ze(pe){return typeof he>"u"?!1:(typeof fe.working>"u"&&(fe.working=fe(new he)),fe.working?fe(pe):pe instanceof he)}t.isSharedArrayBuffer=ze;function He(pe){return l(pe)==="[object AsyncFunction]"}t.isAsyncFunction=He;function je(pe){return l(pe)==="[object Map Iterator]"}t.isMapIterator=je;function we(pe){return l(pe)==="[object Set Iterator]"}t.isSetIterator=we;function $e(pe){return l(pe)==="[object Generator]"}t.isGeneratorObject=$e;function qe(pe){return l(pe)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=qe;function Pe(pe){return p(pe,u)}t.isNumberObject=Pe;function St(pe){return p(pe,d)}t.isStringObject=St;function ht(pe){return p(pe,c)}t.isBooleanObject=ht;function nn(pe){return o&&p(pe,f)}t.isBigIntObject=nn;function Vt(pe){return a&&p(pe,h)}t.isSymbolObject=Vt;function Mn(pe){return Pe(pe)||St(pe)||ht(pe)||nn(pe)||Vt(pe)}t.isBoxedPrimitive=Mn;function Ze(pe){return typeof Uint8Array<"u"&&(le(pe)||ze(pe))}t.isAnyArrayBuffer=Ze,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(pe){Object.defineProperty(t,pe,{enumerable:!1,value:function(){throw new Error(pe+" is not supported in userland")}})})}(O5)),O5}var c4,uSe;function MIt(){return uSe||(uSe=1,c4=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),c4}var yA={exports:{}},cSe;function IIt(){return cSe||(cSe=1,typeof Object.create=="function"?yA.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:yA.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}),yA.exports}var dSe;function fSe(){return dSe||(dSe=1,function(t){var e={},n=Object.getOwnPropertyDescriptors||function(he){for(var fe=Object.keys(he),ze={},He=0;He<fe.length;He++)ze[fe[He]]=Object.getOwnPropertyDescriptor(he,fe[He]);return ze},r=/%[sdj%]/g;t.format=function(z){if(!T(z)){for(var he=[],fe=0;fe<arguments.length;fe++)he.push(a(arguments[fe]));return he.join(" ")}for(var fe=1,ze=arguments,He=ze.length,je=String(z).replace(r,function($e){if($e==="%%")return"%";if(fe>=He)return $e;switch($e){case"%s":return String(ze[fe++]);case"%d":return Number(ze[fe++]);case"%j":try{return JSON.stringify(ze[fe++])}catch{return"[Circular]"}default:return $e}}),we=ze[fe];fe<He;we=ze[++fe])w(we)||!O(we)?je+=" "+we:je+=" "+a(we);return je},t.deprecate=function(z,he){if(typeof process<"u"&&process.noDeprecation===!0)return z;if(typeof process>"u")return function(){return t.deprecate(z,he).apply(this,arguments)};var fe=!1;function ze(){if(!fe){if(process.throwDeprecation)throw new Error(he);process.traceDeprecation?console.trace(he):console.error(he),fe=!0}return z.apply(this,arguments)}return ze};var i={},s=/^$/;if(e.NODE_DEBUG){var o=e.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+o+"$","i")}t.debuglog=function(z){if(z=z.toUpperCase(),!i[z])if(s.test(z)){var he=process.pid;i[z]=function(){var fe=t.format.apply(t,arguments);console.error("%s %d: %s",z,he,fe)}}else i[z]=function(){};return i[z]};function a(z,he){var fe={seen:[],stylize:u};return arguments.length>=3&&(fe.depth=arguments[2]),arguments.length>=4&&(fe.colors=arguments[3]),v(he)?fe.showHidden=he:he&&t._extend(fe,he),k(fe.showHidden)&&(fe.showHidden=!1),k(fe.depth)&&(fe.depth=2),k(fe.colors)&&(fe.colors=!1),k(fe.customInspect)&&(fe.customInspect=!0),fe.colors&&(fe.stylize=l),c(fe,z,fe.depth)}t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(z,he){var fe=a.styles[he];return fe?"\x1B["+a.colors[fe][0]+"m"+z+"\x1B["+a.colors[fe][1]+"m":z}function u(z,he){return z}function d(z){var he={};return z.forEach(function(fe,ze){he[fe]=!0}),he}function c(z,he,fe){if(z.customInspect&&he&&L(he.inspect)&&he.inspect!==t.inspect&&!(he.constructor&&he.constructor.prototype===he)){var ze=he.inspect(fe,z);return T(ze)||(ze=c(z,ze,fe)),ze}var He=f(z,he);if(He)return He;var je=Object.keys(he),we=d(je);if(z.showHidden&&(je=Object.getOwnPropertyNames(he)),K(he)&&(je.indexOf("message")>=0||je.indexOf("description")>=0))return h(he);if(je.length===0){if(L(he)){var $e=he.name?": "+he.name:"";return z.stylize("[Function"+$e+"]","special")}if(R(he))return z.stylize(RegExp.prototype.toString.call(he),"regexp");if(B(he))return z.stylize(Date.prototype.toString.call(he),"date");if(K(he))return h(he)}var qe="",Pe=!1,St=["{","}"];if(y(he)&&(Pe=!0,St=["[","]"]),L(he)){var ht=he.name?": "+he.name:"";qe=" [Function"+ht+"]"}if(R(he)&&(qe=" "+RegExp.prototype.toString.call(he)),B(he)&&(qe=" "+Date.prototype.toUTCString.call(he)),K(he)&&(qe=" "+h(he)),je.length===0&&(!Pe||he.length==0))return St[0]+qe+St[1];if(fe<0)return R(he)?z.stylize(RegExp.prototype.toString.call(he),"regexp"):z.stylize("[Object]","special");z.seen.push(he);var nn;return Pe?nn=p(z,he,fe,we,je):nn=je.map(function(Vt){return g(z,he,fe,we,Vt,Pe)}),z.seen.pop(),b(nn,qe,St)}function f(z,he){if(k(he))return z.stylize("undefined","undefined");if(T(he)){var fe="'"+JSON.stringify(he).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(fe,"string")}if(S(he))return z.stylize(""+he,"number");if(v(he))return z.stylize(""+he,"boolean");if(w(he))return z.stylize("null","null")}function h(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,he,fe,ze,He){for(var je=[],we=0,$e=he.length;we<$e;++we)X(he,String(we))?je.push(g(z,he,fe,ze,String(we),!0)):je.push("");return He.forEach(function(qe){qe.match(/^\d+$/)||je.push(g(z,he,fe,ze,qe,!0))}),je}function g(z,he,fe,ze,He,je){var we,$e,qe;if(qe=Object.getOwnPropertyDescriptor(he,He)||{value:he[He]},qe.get?qe.set?$e=z.stylize("[Getter/Setter]","special"):$e=z.stylize("[Getter]","special"):qe.set&&($e=z.stylize("[Setter]","special")),X(ze,He)||(we="["+He+"]"),$e||(z.seen.indexOf(qe.value)<0?(w(fe)?$e=c(z,qe.value,null):$e=c(z,qe.value,fe-1),$e.indexOf(`
`)>-1&&(je?$e=$e.split(`
`).map(function(Pe){return"  "+Pe}).join(`
`).slice(2):$e=`
`+$e.split(`
`).map(function(Pe){return"   "+Pe}).join(`
`))):$e=z.stylize("[Circular]","special")),k(we)){if(je&&He.match(/^\d+$/))return $e;we=JSON.stringify(""+He),we.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(we=we.slice(1,-1),we=z.stylize(we,"name")):(we=we.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),we=z.stylize(we,"string"))}return we+": "+$e}function b(z,he,fe){var ze=z.reduce(function(He,je){return je.indexOf(`
`)>=0,He+je.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ze>60?fe[0]+(he===""?"":he+`
 `)+" "+z.join(`,
  `)+" "+fe[1]:fe[0]+he+" "+z.join(", ")+" "+fe[1]}t.types=OIt();function y(z){return Array.isArray(z)}t.isArray=y;function v(z){return typeof z=="boolean"}t.isBoolean=v;function w(z){return z===null}t.isNull=w;function E(z){return z==null}t.isNullOrUndefined=E;function S(z){return typeof z=="number"}t.isNumber=S;function T(z){return typeof z=="string"}t.isString=T;function D(z){return typeof z=="symbol"}t.isSymbol=D;function k(z){return z===void 0}t.isUndefined=k;function R(z){return O(z)&&$(z)==="[object RegExp]"}t.isRegExp=R,t.types.isRegExp=R;function O(z){return typeof z=="object"&&z!==null}t.isObject=O;function B(z){return O(z)&&$(z)==="[object Date]"}t.isDate=B,t.types.isDate=B;function K(z){return O(z)&&($(z)==="[object Error]"||z instanceof Error)}t.isError=K,t.types.isNativeError=K;function L(z){return typeof z=="function"}t.isFunction=L;function I(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}t.isPrimitive=I,t.isBuffer=MIt();function $(z){return Object.prototype.toString.call(z)}function U(z){return z<10?"0"+z.toString(10):z.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var z=new Date,he=[U(z.getHours()),U(z.getMinutes()),U(z.getSeconds())].join(":");return[z.getDate(),q[z.getMonth()],he].join(" ")}t.log=function(){console.log("%s - %s",Y(),t.format.apply(t,arguments))},t.inherits=IIt(),t._extend=function(z,he){if(!he||!O(he))return z;for(var fe=Object.keys(he),ze=fe.length;ze--;)z[fe[ze]]=he[fe[ze]];return z};function X(z,he){return Object.prototype.hasOwnProperty.call(z,he)}var te=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(he){if(typeof he!="function")throw new TypeError('The "original" argument must be of type Function');if(te&&he[te]){var fe=he[te];if(typeof fe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fe,te,{value:fe,enumerable:!1,writable:!1,configurable:!0}),fe}function fe(){for(var ze,He,je=new Promise(function(qe,Pe){ze=qe,He=Pe}),we=[],$e=0;$e<arguments.length;$e++)we.push(arguments[$e]);we.push(function(qe,Pe){qe?He(qe):ze(Pe)});try{he.apply(this,we)}catch(qe){He(qe)}return je}return Object.setPrototypeOf(fe,Object.getPrototypeOf(he)),te&&Object.defineProperty(fe,te,{value:fe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fe,n(he))},t.promisify.custom=te;function le(z,he){if(!z){var fe=new Error("Promise was rejected with a falsy value");fe.reason=z,z=fe}return he(z)}function ee(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function he(){for(var fe=[],ze=0;ze<arguments.length;ze++)fe.push(arguments[ze]);var He=fe.pop();if(typeof He!="function")throw new TypeError("The last argument must be of type Function");var je=this,we=function(){return He.apply(je,arguments)};z.apply(this,fe).then(function($e){process.nextTick(we.bind(null,null,$e))},function($e){process.nextTick(le.bind(null,$e,we))})}return Object.setPrototypeOf(he,Object.getPrototypeOf(z)),Object.defineProperties(he,n(z)),he}t.callbackify=ee}(F5)),F5}var hSe;function $It(){return hSe||(hSe=1,gA.TextEncoder=typeof TextEncoder<"u"?TextEncoder:fSe().TextEncoder,gA.TextDecoder=typeof TextDecoder<"u"?TextDecoder:fSe().TextDecoder),gA}var d4,pSe;function lz(){if(pSe)return d4;pSe=1;const{TextEncoder:t,TextDecoder:e}=$It(),n=new e,r=a=>n.decode(a),i=new t,s=a=>i.encode(a);function o(a,l){const u=new Uint8Array(l);let d=0;for(const c of a)u.set(c,d),d+=c.length;return u}return d4={decodeText:r,encodeText:s,concat:o},d4}var f4,mSe;function PIt(){if(mSe)return f4;mSe=1;const{encodeText:t}=lz();class e{constructor(r,i,s,o){this.name=r,this.code=i,this.codeBuf=t(this.code),this.alphabet=o,this.codec=s(o)}encode(r){return this.codec.encode(r)}decode(r){for(const i of r)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${r}'`);return this.codec.decode(r)}}return f4=e,f4}var h4,gSe;function NIt(){if(gSe)return h4;gSe=1;const t=(r,i,s)=>{const o={};for(let f=0;f<i.length;++f)o[i[f]]=f;let a=r.length;for(;r[a-1]==="=";)--a;const l=new Uint8Array(a*s/8|0);let u=0,d=0,c=0;for(let f=0;f<a;++f){const h=o[r[f]];if(h===void 0)throw new SyntaxError("Invalid character "+r[f]);d=d<<s|h,u+=s,u>=8&&(u-=8,l[c++]=255&d>>u)}if(u>=s||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},e=(r,i,s)=>{const o=i[i.length-1]==="=",a=(1<<s)-1;let l="",u=0,d=0;for(let c=0;c<r.length;++c)for(d=d<<8|r[c],u+=8;u>s;)u-=s,l+=i[a&d>>u];if(u&&(l+=i[a&d<<s-u]),o)for(;l.length*s&7;)l+="=";return l};return h4={rfc4648:r=>i=>({encode(s){return e(s,i,r)},decode(s){return t(s,i,r)}})},h4}var p4,ySe;function BIt(){if(ySe)return p4;ySe=1;const t=hIt(),e=PIt(),{rfc4648:n}=NIt(),{decodeText:r,encodeText:i}=lz(),o=[["identity","\0",()=>({encode:r,decode:i}),""],["base2","0",n(1),"01"],["base8","7",n(3),"01234567"],["base10","9",t,"0123456789"],["base16","f",n(4),"0123456789abcdef"],["base16upper","F",n(4),"0123456789ABCDEF"],["base32hex","v",n(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",n(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",n(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",n(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",n(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",n(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",n(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",t,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",t,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",t,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",t,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",n(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],a=o.reduce((u,d)=>(u[d[0]]=new e(d[0],d[1],d[2],d[3]),u),{}),l=o.reduce((u,d)=>(u[d[1]]=a[d[0]],u),{});return p4={names:a,codes:l},p4}var bSe;function zIt(){return bSe||(bSe=1,function(t,e){const n=BIt(),{encodeText:r,decodeText:i,concat:s}=lz();function o(h,p){if(!p)throw new Error("requires an encoded Uint8Array");const{name:g,codeBuf:b}=c(h);return d(g,p),s([b,p],b.length+p.length)}function a(h,p){const g=c(h),b=r(g.encode(p));return s([g.codeBuf,b],g.codeBuf.length+b.length)}function l(h){h instanceof Uint8Array&&(h=i(h));const p=h[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(p)&&(h=h.toLowerCase()),c(h[0]).decode(h.substring(1))}function u(h){if(h instanceof Uint8Array&&(h=i(h)),Object.prototype.toString.call(h)!=="[object String]")return!1;try{return c(h[0]).name}catch{return!1}}function d(h,p){c(h).decode(i(p))}function c(h){if(Object.prototype.hasOwnProperty.call(n.names,h))return n.names[h];if(Object.prototype.hasOwnProperty.call(n.codes,h))return n.codes[h];throw new Error(`Unsupported encoding: ${h}`)}function f(h){return h instanceof Uint8Array&&(h=i(h)),c(h[0])}e=t.exports=o,e.encode=a,e.decode=l,e.isEncoded=u,e.encoding=c,e.encodingFromData=f,e.names=Object.freeze(n.names),e.codes=Object.freeze(n.codes)}(mA,mA.exports)),mA.exports}var m4,vSe;function jIt(){if(vSe)return m4;vSe=1,m4=i;var t=128,e=127,n=~e,r=Math.pow(2,31);function i(s,o,a){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw i.bytes=0,new RangeError("Could not encode varint");o=o||[],a=a||0;for(var l=a;s>=r;)o[a++]=s&255|t,s/=128;for(;s&n;)o[a++]=s&255|t,s>>>=7;return o[a]=s|0,i.bytes=a-l+1,o}return m4}var g4,xSe;function UIt(){if(xSe)return g4;xSe=1,g4=n;var t=128,e=127;function n(r,o){var s=0,o=o||0,a=0,l=o,u,d=r.length;do{if(l>=d||a>49)throw n.bytes=0,new RangeError("Could not decode varint");u=r[l++],s+=a<28?(u&e)<<a:(u&e)*Math.pow(2,a),a+=7}while(u>=t);return n.bytes=l-o,s}return g4}var y4,wSe;function qIt(){if(wSe)return y4;wSe=1;var t=Math.pow(2,7),e=Math.pow(2,14),n=Math.pow(2,21),r=Math.pow(2,28),i=Math.pow(2,35),s=Math.pow(2,42),o=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);return y4=function(u){return u<t?1:u<e?2:u<n?3:u<r?4:u<i?5:u<s?6:u<o?7:u<a?8:u<l?9:10},y4}var b4,_Se;function HIt(){return _Se||(_Se=1,b4={encode:jIt(),decode:UIt(),encodingLength:qIt()}),b4}var v4,ESe;function GIt(){return ESe||(ESe=1,v4={names:Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082})}),v4}function VIt(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,l=t.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function c(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,b=0,y=0,v=p.length;y!==v&&p[y]===0;)y++,g++;for(var w=(v-y)*d+1>>>0,E=new Uint8Array(w);y!==v;){for(var S=p[y],T=0,D=w-1;(S!==0||T<b)&&D!==-1;D--,T++)S+=256*E[D]>>>0,E[D]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");b=T,y++}for(var k=w-b;k!==w&&E[k]===0;)k++;for(var R=l.repeat(g);k<w;++k)R+=t.charAt(E[k]);return R}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var b=0,y=0;p[g]===l;)b++,g++;for(var v=(p.length-g)*u+1>>>0,w=new Uint8Array(v);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var S=0,T=v-1;(E!==0||S<y)&&T!==-1;T--,S++)E+=a*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=S,g++}if(p[g]!==" "){for(var D=v-y;D!==v&&w[D]===0;)D++;for(var k=new Uint8Array(b+(v-D)),R=b;D!==v;)k[R++]=w[D++];return k}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:c,decodeUnsafe:f,decode:h}}var WIt=VIt,YIt=WIt;const B8e=new Uint8Array(0),XIt=t=>t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),""),ZIt=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map(n=>parseInt(n,16))):B8e},z8e=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},ey=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},KIt=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),j8e=t=>new TextEncoder().encode(t),U8e=t=>new TextDecoder().decode(t),JIt=Object.freeze(Object.defineProperty({__proto__:null,coerce:ey,empty:B8e,equals:z8e,fromHex:ZIt,fromString:j8e,isBinary:KIt,toHex:XIt,toString:U8e},Symbol.toStringTag,{value:"Module"}));class QIt{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e6t{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return q8e(this,e)}}class t6t{constructor(e){this.decoders=e}or(e){return q8e(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const q8e=(t,e)=>new t6t({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class n6t{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new QIt(e,n,r),this.decoder=new e6t(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const qR=({name:t,prefix:e,encode:n,decode:r})=>new n6t(t,e,n,r),vC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=YIt(n,e);return qR({prefix:t,name:e,encode:r,decode:s=>ey(i(s))})},r6t=(t,e,n,r)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,l=0,u=0;for(let d=0;d<s;++d){const c=i[t[d]];if(c===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|c,a+=n,a>=8&&(a-=8,o[u++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},i6t=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},ha=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>qR({prefix:e,name:t,encode(i){return i6t(i,r,n)},decode(i){return r6t(i,r,n,t)}}),s6t=qR({prefix:"\0",name:"identity",encode:t=>U8e(t),decode:t=>j8e(t)}),o6t=Object.freeze(Object.defineProperty({__proto__:null,identity:s6t},Symbol.toStringTag,{value:"Module"})),a6t=ha({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),l6t=Object.freeze(Object.defineProperty({__proto__:null,base2:a6t},Symbol.toStringTag,{value:"Module"})),u6t=ha({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),c6t=Object.freeze(Object.defineProperty({__proto__:null,base8:u6t},Symbol.toStringTag,{value:"Module"})),d6t=vC({prefix:"9",name:"base10",alphabet:"0123456789"}),f6t=Object.freeze(Object.defineProperty({__proto__:null,base10:d6t},Symbol.toStringTag,{value:"Module"})),h6t=ha({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),p6t=ha({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),m6t=Object.freeze(Object.defineProperty({__proto__:null,base16:h6t,base16upper:p6t},Symbol.toStringTag,{value:"Module"})),W_=ha({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),g6t=ha({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),y6t=ha({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),b6t=ha({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v6t=ha({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x6t=ha({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),w6t=ha({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_6t=ha({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E6t=ha({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),C6t=Object.freeze(Object.defineProperty({__proto__:null,base32:W_,base32hex:v6t,base32hexpad:w6t,base32hexpadupper:_6t,base32hexupper:x6t,base32pad:y6t,base32padupper:b6t,base32upper:g6t,base32z:E6t},Symbol.toStringTag,{value:"Module"})),S6t=vC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),A6t=vC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),k6t=Object.freeze(Object.defineProperty({__proto__:null,base36:S6t,base36upper:A6t},Symbol.toStringTag,{value:"Module"})),Nf=vC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),T6t=vC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),D6t=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Nf,base58flickr:T6t},Symbol.toStringTag,{value:"Module"})),L6t=ha({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),R6t=ha({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),F6t=ha({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O6t=ha({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),M6t=Object.freeze(Object.defineProperty({__proto__:null,base64:L6t,base64pad:R6t,base64url:F6t,base64urlpad:O6t},Symbol.toStringTag,{value:"Module"})),H8e=Array.from(""),I6t=H8e.reduce((t,e,n)=>(t[n]=e,t),[]),$6t=H8e.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function P6t(t){return t.reduce((e,n)=>(e+=I6t[n],e),"")}function N6t(t){const e=[];for(const n of t){const r=$6t[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const B6t=qR({prefix:"",name:"base256emoji",encode:P6t,decode:N6t}),z6t=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:B6t},Symbol.toStringTag,{value:"Module"}));var j6t=G8e,CSe=128,U6t=127,q6t=~U6t,H6t=Math.pow(2,31);function G8e(t,e,n){e=e||[],n=n||0;for(var r=n;t>=H6t;)e[n++]=t&255|CSe,t/=128;for(;t&q6t;)e[n++]=t&255|CSe,t>>>=7;return e[n]=t|0,G8e.bytes=n-r+1,e}var G6t=t$,V6t=128,SSe=127;function t$(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw t$.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&SSe)<<i:(o&SSe)*Math.pow(2,i),i+=7}while(o>=V6t);return t$.bytes=s-r,n}var W6t=Math.pow(2,7),Y6t=Math.pow(2,14),X6t=Math.pow(2,21),Z6t=Math.pow(2,28),K6t=Math.pow(2,35),J6t=Math.pow(2,42),Q6t=Math.pow(2,49),e$t=Math.pow(2,56),t$t=Math.pow(2,63),n$t=function(t){return t<W6t?1:t<Y6t?2:t<X6t?3:t<Z6t?4:t<K6t?5:t<J6t?6:t<Q6t?7:t<e$t?8:t<t$t?9:10},r$t={encode:j6t,decode:G6t,encodingLength:n$t},AT=r$t;const kT=(t,e=0)=>[AT.decode(t,e),AT.decode.bytes],j2=(t,e,n=0)=>(AT.encode(t,e,n),e),U2=t=>AT.encodingLength(t),i$t=Object.freeze(Object.defineProperty({__proto__:null,decode:kT,encodeTo:j2,encodingLength:U2},Symbol.toStringTag,{value:"Module"})),q2=(t,e)=>{const n=e.byteLength,r=U2(t),i=r+U2(n),s=new Uint8Array(i+n);return j2(t,s,0),j2(n,s,r),s.set(e,i),new HR(t,n,e,s)},V8e=t=>{const e=ey(t),[n,r]=kT(e),[i,s]=kT(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new HR(n,i,o,e)},W8e=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&z8e(t.bytes,e.bytes);class HR{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}const s$t=Object.freeze(Object.defineProperty({__proto__:null,Digest:HR,create:q2,decode:V8e,equals:W8e},Symbol.toStringTag,{value:"Module"})),uz=({name:t,code:e,encode:n})=>new Y8e(t,e,n);class Y8e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?q2(this.code,n):n.then(r=>q2(this.code,r))}else throw Error("Unknown type, must be binary type")}}const o$t=Object.freeze(Object.defineProperty({__proto__:null,Hasher:Y8e,from:uz},Symbol.toStringTag,{value:"Module"})),X8e=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),a$t=uz({name:"sha2-256",code:18,encode:X8e("SHA-256")}),l$t=uz({name:"sha2-512",code:19,encode:X8e("SHA-512")}),u$t=Object.freeze(Object.defineProperty({__proto__:null,sha256:a$t,sha512:l$t},Symbol.toStringTag,{value:"Module"})),Z8e=0,c$t="identity",K8e=ey,d$t=t=>q2(Z8e,K8e(t)),f$t={code:Z8e,name:c$t,encode:K8e,digest:d$t},h$t=Object.freeze(Object.defineProperty({__proto__:null,identity:f$t},Symbol.toStringTag,{value:"Module"})),p$t="raw",m$t=85,g$t=t=>ey(t),y$t=t=>ey(t),b$t=Object.freeze(Object.defineProperty({__proto__:null,code:m$t,decode:y$t,encode:g$t,name:p$t},Symbol.toStringTag,{value:"Module"})),v$t=new TextEncoder,x$t=new TextDecoder,w$t="json",_$t=512,E$t=t=>v$t.encode(JSON.stringify(t)),C$t=t=>JSON.parse(x$t.decode(t)),S$t=Object.freeze(Object.defineProperty({__proto__:null,code:_$t,decode:C$t,encode:E$t,name:w$t},Symbol.toStringTag,{value:"Module"}));class wa{constructor(e,n,r,i){this.code=n,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:vA,byteLength:vA,code:bA,version:bA,multihash:bA,bytes:bA,_baseCache:vA,asCID:vA})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:n}=this;if(e!==jw)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==D$t)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return wa.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,r=q2(e,n);return wa.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&W8e(this.multihash,e.multihash)}toString(e){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return k$t(n,i,e||Nf.encoder);default:return T$t(n,i,e||W_.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return R$t(/^0\.0/,F$t),!!(e&&(e[kSe]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof wa)return e;if(e!=null&&e.asCID===e){const{version:n,code:r,multihash:i,bytes:s}=e;return new wa(n,r,i,s||ASe(n,r,i.bytes))}else if(e!=null&&e[kSe]===!0){const{version:n,multihash:r,code:i}=e,s=V8e(r);return wa.create(n,i,s)}else return null}static create(e,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(n!==jw)throw new Error(`Version 0 CID must use dag-pb (code: ${jw}) block encoding`);return new wa(e,n,r,r.bytes)}case 1:{const i=ASe(e,n,r.bytes);return new wa(e,n,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return wa.create(0,jw,e)}static createV1(e,n){return wa.create(1,e,n)}static decode(e){const[n,r]=wa.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=wa.inspectBytes(e),r=n.size-n.multihashSize,i=ey(e.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=i.subarray(n.multihashSize-n.digestSize),o=new HR(n.multihashCode,n.digestSize,s,i);return[n.version===0?wa.createV0(o):wa.createV1(n.codec,o),e.subarray(n.size)]}static inspectBytes(e){let n=0;const r=()=>{const[c,f]=kT(e.subarray(n));return n+=f,c};let i=r(),s=jw;if(i===18?(i=0,n=0):i===1&&(s=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=n,a=r(),l=r(),u=n+l,d=u-o;return{version:i,codec:s,multihashCode:a,digestSize:l,multihashSize:d,size:u}}static parse(e,n){const[r,i]=A$t(e,n),s=wa.decode(i);return s._baseCache.set(r,e),s}}const A$t=(t,e)=>{switch(t[0]){case"Q":{const n=e||Nf;return[Nf.prefix,n.decode(`${Nf.prefix}${t}`)]}case Nf.prefix:{const n=e||Nf;return[Nf.prefix,n.decode(t)]}case W_.prefix:{const n=e||W_;return[W_.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},k$t=(t,e,n)=>{const{prefix:r}=n;if(r!==Nf.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(i==null){const s=n.encode(t).slice(1);return e.set(r,s),s}else return i},T$t=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(i==null){const s=n.encode(t);return e.set(r,s),s}else return i},jw=112,D$t=18,ASe=(t,e,n)=>{const r=U2(t),i=r+U2(e),s=new Uint8Array(i+n.byteLength);return j2(t,s,0),j2(e,s,r),s.set(n,i),s},kSe=Symbol.for("@ipld/js-cid/CID"),bA={writable:!1,configurable:!1,enumerable:!0},vA={writable:!1,enumerable:!1,configurable:!1},L$t="0.0.0-dev",R$t=(t,e)=>{if(t.test(L$t))console.warn(e);else throw new Error(e)},F$t=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,O$t={...o6t,...l6t,...c6t,...f6t,...m6t,...C6t,...k6t,...D6t,...M6t,...z6t},M$t={...u$t,...h$t},I$t={raw:b$t,json:S$t},$$t=Object.freeze(Object.defineProperty({__proto__:null,CID:wa,bases:O$t,bytes:JIt,codecs:I$t,digest:s$t,hasher:o$t,hashes:M$t,varint:i$t},Symbol.toStringTag,{value:"Module"})),P$t=DAe($$t);var x4,TSe;function J8e(){if(TSe)return x4;TSe=1;const{bases:t}=P$t;function e(s,o,a,l){return{name:s,prefix:o,encoder:{name:s,prefix:o,encode:a},decoder:{decode:l}}}const n=e("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),r=e("ascii","a",s=>{let o="a";for(let a=0;a<s.length;a++)o+=String.fromCharCode(s[a]);return o},s=>{s=s.substring(1);const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o});return x4={utf8:n,"utf-8":n,hex:t.base16,latin1:r,ascii:r,binary:r,...t},x4}var w4,DSe;function N$t(){if(DSe)return w4;DSe=1;const t=J8e();function e(n,r="utf8"){const i=t[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.encoder.encode(n).substring(1)}return w4=e,w4}var _4,LSe;function B$t(){if(LSe)return _4;LSe=1;const t=J8e();function e(n,r="utf8"){const i=t[r];if(!i)throw new Error(`Unsupported encoding "${r}"`);return i.decoder.decode(`${i.prefix}${n}`)}return _4=e,_4}var E4,RSe;function z$t(){if(RSe)return E4;RSe=1;function t(e,n){n||(n=e.reduce((s,o)=>s+o.length,0));const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return r}return E4=t,E4}var C4,FSe;function j$t(){if(FSe)return C4;FSe=1;const t=zIt(),e=HIt(),{names:n}=GIt(),r=N$t(),i=B$t(),s=z$t(),o={};for(const v in n){const w=v;o[n[w]]=w}function a(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(v,"base16")}function l(v){return i(v,"base16")}function u(v){if(!(v instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return r(t.encode("base58btc",v)).slice(1)}function d(v){const w=v instanceof Uint8Array?r(v):v;return t.decode("z"+w)}function c(v){if(!(v instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(v.length<2)throw new Error("multihash too short. must be > 2 bytes.");const w=e.decode(v);if(!g(w))throw new Error(`multihash unknown function code: 0x${w.toString(16)}`);v=v.slice(e.decode.bytes);const E=e.decode(v);if(E<0)throw new Error(`multihash invalid length: ${E}`);if(v=v.slice(e.decode.bytes),v.length!==E)throw new Error(`multihash length inconsistent: 0x${r(v,"base16")}`);return{code:w,name:o[w],length:E,digest:v}}function f(v,w,E){if(!v||w===void 0)throw new Error("multihash encode requires at least two args: digest, code");const S=h(w);if(!(v instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(E==null&&(E=v.length),E&&v.length!==E)throw new Error("digest length should be equal to specified length.");const T=e.encode(S),D=e.encode(E);return s([T,D,v],T.length+D.length+v.length)}function h(v){let w=v;if(typeof v=="string"){if(n[v]===void 0)throw new Error(`Unrecognized hash function named: ${v}`);w=n[v]}if(typeof w!="number")throw new Error(`Hash function code should be a number. Got: ${w}`);if(o[w]===void 0&&!p(w))throw new Error(`Unrecognized function code: ${w}`);return w}function p(v){return v>0&&v<16}function g(v){return!!(p(v)||o[v])}function b(v){c(v)}function y(v){return b(v),v.subarray(0,2)}return C4={names:n,codes:Object.freeze(o),toHexString:a,fromHexString:l,toB58String:u,fromB58String:d,decode:c,encode:f,coerceCode:h,isAppCode:p,validate:b,prefix:y,isValidCode:g},C4}var S4,OSe;function cz(){if(OSe)return S4;OSe=1;const t=yC(),e=R1(),n={array(r,i=!1,s=""){return t.toList(r,i,o=>n.format(o,s))},object(r){return t.toObject(r,i=>n.format(i))},null(r=null){return r===null&&(r=t.t("n/a")),t.toNothing(r)},number(r,i=""){return typeof r!="number"&&(r=parseFloat(r)),t.unit(e.numberFormatter.format(r),i)},string(r,i=""){return t.unit(t.e(r).replace(/(\r\n|\r|\n){2,}/g,"<br>"),i)},boolean(r){return r?"":""},format(r,i=""){return typeof r=="boolean"?n.boolean(r):typeof r=="number"?n.number(r,i):typeof r=="string"?n.string(r,i):Array.isArray(r)?n.array(r,i):t.isObject(r)?n.object(r):n.null()}};return S4=n,S4}const U$t="Afar",q$t="Abkhazian",H$t="Afrikaans",G$t="Akan",V$t="Amharic",W$t="Aragonese",Y$t="Arabic",X$t="Assamese",Z$t="Avar",K$t="Aymara",J$t="Azerbaijani",Q$t="Bashkir",ePt="Belarusian",tPt="Bulgarian",nPt="Bihari",rPt="Bislama",iPt="Bambara",sPt="Bengali",oPt="Tibetan",aPt="Breton",lPt="Bosnian",uPt="Catalan",cPt="Chechen",dPt="Chamorro",fPt="Corsican",hPt="Cree",pPt="Czech",mPt="Old Bulgarian",gPt="Chuvash",yPt="Welsh",bPt="Danish",vPt="German",xPt="Divehi",wPt="Dzongkha",_Pt="Ewe",EPt="Greek",CPt="English",SPt="Esperanto",APt="Spanish",kPt="Estonian",TPt="Basque",DPt="Persian",LPt="Peul",RPt="Finnish",FPt="Fijian",OPt="Faroese",MPt="French",IPt="West Frisian",$Pt="Irish",PPt="Scottish Gaelic",NPt="Galician",BPt="Guarani",zPt="Gujarati",jPt="Manx",UPt="Hausa",qPt="Hebrew",HPt="Hindi",GPt="Hiri Motu",VPt="Croatian",WPt="Haitian",YPt="Hungarian",XPt="Armenian",ZPt="Herero",KPt="Interlingua",JPt="Indonesian",QPt="Interlingue",e8t="Igbo",t8t="Sichuan Yi",n8t="Inupiak",r8t="Ido",i8t="Icelandic",s8t="Italian",o8t="Inuktitut",a8t="Japanese",l8t="Javanese",u8t="Georgian",c8t="Kongo",d8t="Kikuyu",f8t="Kuanyama",h8t="Kazakh",p8t="Greenlandic",m8t="Cambodian",g8t="Kannada",y8t="Korean",b8t="Kanuri",v8t="Kashmiri",x8t="Kurdish",w8t="Komi",_8t="Cornish",E8t="Kirghiz",C8t="Latin",S8t="Luxembourgish",A8t="Ganda",k8t="Limburgian",T8t="Lingala",D8t="Laotian",L8t="Lithuanian",R8t="Latvian",F8t="Malagasy",O8t="Marshallese",M8t="Maori",I8t="Macedonian",$8t="Malayalam",P8t="Mongolian",N8t="Moldovan",B8t="Marathi",z8t="Malay",j8t="Maltese",U8t="Burmese",q8t="Nauruan",H8t="North Ndebele",G8t="Nepali",V8t="Ndonga",W8t="Dutch",Y8t="Norwegian Nynorsk",X8t="Norwegian",Z8t="South Ndebele",K8t="Navajo",J8t="Chichewa",Q8t="Occitan",eNt="Ojibwa",tNt="Oromo",nNt="Oriya",rNt="Ossetian",iNt="Punjabi",sNt="Pali",oNt="Polish",aNt="Pashto",lNt="Portuguese",uNt="Quechua",cNt="Raeto Romance",dNt="Kirundi",fNt="Romanian",hNt="Russian",pNt="Rwandi",mNt="Sanskrit",gNt="Sardinian",yNt="Sindhi",bNt="Sango",vNt="Serbo-Croatian",xNt="Sinhalese",wNt="Slovak",_Nt="Slovenian",ENt="Samoan",CNt="Shona",SNt="Somalia",ANt="Albanian",kNt="Serbian",TNt="Swati",DNt="Southern Sotho",LNt="Sundanese",RNt="Swedish",FNt="Swahili",ONt="Tamil",MNt="Telugu",INt="Tajik",$Nt="Thai",PNt="Tigrinya",NNt="Turkmen",BNt="Tagalog",zNt="Tswana",jNt="Tonga",UNt="Turkish",qNt="Tsonga",HNt="Tatar",GNt="Twi",VNt="Tahitian",WNt="Uyghur",YNt="Ukrainian",XNt="Urdu",ZNt="Venda",KNt="Vietnamese",JNt="Volapk",QNt="Walloon",e9t="Wolof",t9t="Xhosa",n9t="Yiddish",r9t="Yoruba",i9t="Zhuang",s9t="Chinese",o9t="Zulu",a9t={aa:U$t,ab:q$t,af:H$t,ak:G$t,am:V$t,an:W$t,ar:Y$t,as:X$t,av:Z$t,ay:K$t,az:J$t,ba:Q$t,be:ePt,bg:tPt,bh:nPt,bi:rPt,bm:iPt,bn:sPt,bo:oPt,br:aPt,bs:lPt,ca:uPt,ce:cPt,ch:dPt,co:fPt,cr:hPt,cs:pPt,cu:mPt,cv:gPt,cy:yPt,da:bPt,de:vPt,dv:xPt,dz:wPt,ee:_Pt,el:EPt,en:CPt,eo:SPt,es:APt,et:kPt,eu:TPt,fa:DPt,ff:LPt,fi:RPt,fj:FPt,fo:OPt,fr:MPt,fy:IPt,ga:$Pt,gd:PPt,gl:NPt,gn:BPt,gu:zPt,gv:jPt,ha:UPt,he:qPt,hi:HPt,ho:GPt,hr:VPt,ht:WPt,hu:YPt,hy:XPt,hz:ZPt,ia:KPt,id:JPt,ie:QPt,ig:e8t,ii:t8t,ik:n8t,io:r8t,is:i8t,it:s8t,iu:o8t,ja:a8t,jv:l8t,ka:u8t,kg:c8t,ki:d8t,kj:f8t,kk:h8t,kl:p8t,km:m8t,kn:g8t,ko:y8t,kr:b8t,ks:v8t,ku:x8t,kv:w8t,kw:_8t,ky:E8t,la:C8t,lb:S8t,lg:A8t,li:k8t,ln:T8t,lo:D8t,lt:L8t,lv:R8t,mg:F8t,mh:O8t,mi:M8t,mk:I8t,ml:$8t,mn:P8t,mo:N8t,mr:B8t,ms:z8t,mt:j8t,my:U8t,na:q8t,nd:H8t,ne:G8t,ng:V8t,nl:W8t,nn:Y8t,no:X8t,nr:Z8t,nv:K8t,ny:J8t,oc:Q8t,oj:eNt,om:tNt,or:nNt,os:rNt,pa:iNt,pi:sNt,pl:oNt,ps:aNt,pt:lNt,qu:uNt,rm:cNt,rn:dNt,ro:fNt,ru:hNt,rw:pNt,sa:mNt,sc:gNt,sd:yNt,sg:bNt,sh:vNt,si:xNt,sk:wNt,sl:_Nt,sm:ENt,sn:CNt,so:SNt,sq:ANt,sr:kNt,ss:TNt,st:DNt,su:LNt,sv:RNt,sw:FNt,ta:ONt,te:MNt,tg:INt,th:$Nt,ti:PNt,tk:NNt,tl:BNt,tn:zNt,to:jNt,tr:UNt,ts:qNt,tt:HNt,tw:GNt,ty:VNt,ug:WNt,uk:YNt,ur:XNt,ve:ZNt,vi:KNt,vo:JNt,wa:QNt,wo:e9t,xh:t9t,yi:n9t,yo:r9t,za:i9t,zh:s9t,zu:o9t};var A4,MSe;function Q8e(){if(MSe)return A4;MSe=1;const t=yC(),e=cz(),n=R1(),r=nz(),i={allowHtmlInCommonMark:!1,formatUrl(s,o,a={},l=null,u=null){let d=t.isObject(u)&&typeof u=="string"?u.title:s;return t.toLink(s,d,u.rel||"")},formatLink(s){return t.toList(s,!1,o=>t.toLink(o.href,o.title,o.rel))},formatMediaType(s,o,a={}){return t.e(t.t(i._formatMediaType(s,o,a)))},_formatMediaType(s,o,a={}){let l=!!a.shorten;const u=r.getDependency("content-type");if(!u)return l?"":t.e(s);let d;try{d=u.parse(s)}catch(c){return console.warn(c),l?"":t.e(s)}switch(d.type){case"image/tiff":return d.parameters.application==="geotiff"?d.parameters.profile==="cloud-optimized"?l?"COG":"Cloud-Optimized GeoTIFF image":l?"GeoTiff":"GeoTIFF image":l?"TIFF":"TIFF image";case"image/jp2":return l?"JPEG 2000":"JPEG 2000 image";case"image/png":case"image/apng":case"image/vnd.mozilla.apng":return l?"PNG":"PNG image";case"image/gif":return l?"GIF":"GIF image";case"image/jpeg":case"image/jpg":return l?"JPEG":"JPEG image";case"image/webp":return l?"WebP":"WebP image";case"image/bmp":case"image/x-bmp":case"image/x-ms-bmp":case"image/wbmp":return l?"Bitmap":"Bitmap image";case"image/svg+xml":return l?"SVG":"SVG vector image";case"text/csv":return l?"CSV":"Comma-separated values (CSV)";case"text/xml":case"application/xml":return"XML";case"text/json":case"application/json":return"JSON";case"application/x-ndjson":return l?"NDJSON":"Newline Delimited JSON";case"text/yaml":case"text/vnd.yaml":case"text/x-yaml":case"application/x-yaml":return"YAML";case"application/geo+json":return"GeoJSON";case"application/gml+xml":return"GML";case"application/vnd.google-earth.kml+xml":case"application/vnd.google-earth.kmz":return"KML";case"application/geopackage+vnd.sqlite3":case"application/geopackage+sqlite3":return"GeoPackage";case"text/html":case"application/html":case"application/xhtml+xml":return l?"HTML":"HTML (Website)";case"text/plain":return l?"Text":"Text document";case"text/markdown":return l?"Markdown":"Markdown document";case"application/pdf":return l?"PDF":"PDF document";case"application/zip":return l?"ZIP":"ZIP archive";case"application/gzip":return l?"GZIP":"GZIP archive";case"application/x-hdf":return"HDF";case"application/netcdf":case"application/x-netcdf":return"NetCDF";case"application/x.mrf":return l?"MRF":"Meta Raster Format";case"application/wmo-GRIB2":return"GRIB 2";case"application/grib":return`GRIB ${d.parameters.edition||""}`.trim();case"application/bufr":return`BUFR ${d.parameters.edition||""}`.trim();case"application/octet-stream":return l?"Binary":"Binary file";case"application/vnd.laszip":return"LASzip";case"application/vnd.laszip+copc":return l?"COPC":"Cloud-Optimized Point Cloud (LASzip)";case"application/vnd+zarr":return"Zarr";case"application/x-parquet":case"application/vnd.apache.parquet":return"Parquet";case"application/vnd.pmtiles":return"PMTiles";case"application/vnd.cov+json":return"CoverageJSON";case"application/vnd.flatgeobuf":return"FlatGeobuf";case"application/x-filegdb":return l?"Geodatabase":"Esri File Geodatabase";case"application/vnd.nitf":return l?"NITF":"National Imagery Transmission Format";case"application/3dtiles+json":return"3D Tiles";default:{let[c,f]=d.type.split("/");if(f=t.formatKey(f.replace(/^(vnd|x)[.+-]/,"")),l)return f;switch(c){case"audio":return`${f} audio`;case"image":return`${f} image`;case"font":return"Font";case"model":return`${f} 3D model`;case"video":return`${f} video`;case"text":case"application":return f;default:return s}}}},formatTimestamp(s){if(typeof s=="string")try{return n.dateTimeFormatter.format(new Date(s))}catch{}return e.null()},formatPercent0to1(s,o,a={}){return e.number(s*100,a.unit)},formatDate(s){if(typeof s=="string")try{return n.dateFormatter.format(new Date(s))}catch{}return e.null()},formatDuration(s){if(typeof s=="string"){const o=r.getDependency("@musement/iso-duration");if(!o)return t.e(s);const{isoDuration:a,en:l}=o;a.setLocales({en:l},{fallbackLocale:"en"});let u=a(s).humanize("en");return u.length===0?t.e(t.t("none")):t.e(u)}return e.null()},formatLanguageCode(s){if(Array.isArray(s))return t.toList(s,!0,i.formatLanguageCode,!1);if(typeof s!="string"||s.length<2)return e.null();const o=a9t,[a,...l]=s.split("-");if(a in o){const u=o[a];return l.length>0?t.e(t.t(`${u} (${l.join(" ")})`)):t.e(t.t(u))}return t.e(t.t(s))},formatLicense(s,o,a={},l=null){if(typeof s!="string"||s.length===0)return e.null();if(s!=="other"&&s!=="proprietary"&&s!=="various"&&s.match(/^[\w\.\-]+$/i))return t.toLink(`https://spdx.org/licenses/${s}.html`,s,"license");let u=Array.isArray(l.links)?l.links.filter(d=>t.isObject(d)&&typeof d.href=="string"&&d.rel==="license"):[];return u.length>0?t.toList(u,!1,d=>t.toLink(d.href,d.title||s,"license")):e.string(s)},formatProviders(s){return t.toList(s,!1,o=>{let a=o.name,l="",u="";return typeof o.url=="string"&&o.url.length>0&&(a=t.toLink(o.url,a)),Array.isArray(o.roles)&&o.roles.length>0&&(l=o.roles.map(d=>e.format(d)).join(", "),l=` (<em>${l}</em>)`),typeof o.description=="string"&&o.description.length>0&&(u=i.formatCommonMark(o.description)),`${a}${l}${u}`})},formatCommonMark(s){if(typeof s!="string"||s.length===0)return e.null();const o=r.getDependency("commonmark");let a;if(o){let l=new o.Parser;a=new o.HtmlRenderer({safe:!i.allowHtmlInCommonMark,smart:!0}).render(l.parse(s))}else i.allowHtmlInCommonMark?a=s:a=t.e(s);return`<div class="description">${a}</div>`},formatSoftware(s){if(!t.isObject(s))return e.null();let o=[];for(let a in s){let l=s[a];typeof l=="string"&&l.length>0||typeof l=="number"?o.push(`${a} (${l})`):o.push(a)}return t.toList(o,!0,null,!1)},formatDOI(s){return s=e.format(s),t.toLink(`http://doi.org/${s}`,s)},formatCRS(s){return t.toList(s,!1,o=>{if(typeof o=="string"){let a=o.replace(/^https?:\/\/www\.opengis\.net\/def\/crs\//i,"").replace(/^urn:ogc:def:crs:/i,"");return t.toLink(o,a)}return e.format(o)})},formatCrsCode(s){if(typeof s=="string"){const[o,a]=s.split(":",2);switch(o.toUpperCase()){case"EPSG":case"ESRI":case"IAU_2015":case"IGNF":case"MKG":case"OGC":return t.toLink(`https://spatialreference.org/ref/${o.toLowerCase()}/${a}/`,s);default:return e.string(s)}}return e.null()},formatEPSG(s){return typeof s=="number"?i.formatCrsCode(`EPSG:${s}`):typeof s=="string"?i.formatCrsCode(s):e.null()},formatExtent(s,o,a={}){return!Array.isArray(s)||s.length<2?e.null():s[0]===s[1]?e.format(s[0],a.unit):s[0]===null?`< ${e.format(s[1],a.unit)}`:s[1]===null?`> ${e.format(s[0],a.unit)}`:s.map(l=>e.format(l,a.unit)).join("  ")},formatHexColor(s){return typeof s!="string"||!s.match(/^#?[\dA-F]{3,8}$/i)?e.null():(s.startsWith("#")&&(s=s.substring(1)),`<div class="color" style="background-color: #${s}"><code class="color-code">#${s}</code></div>`)},formatPROJJSON(s){return t.isObject(s)?t.isObject(s.id)&&s.id.authority==="EPSG"&&typeof s.code=="number"&&s.code>0?"EPSG "+i.formatEPSG(s):typeof s.name=="string"?e.string(s.name):e.object(s):e.null()},formatTemporalExtent(s,o,a={}){if(!Array.isArray(s)||s.length!==2)return e.null();s=s.map(l=>{try{return l?new Date(l):null}catch{return null}});try{const[l,u]=s;if(l||u){const d=a.shorten?n.dateFormatter:n.dateTimeFormatter;return l?u?d.formatRange(l,u):t.t("{0} until present",[d.format(l)]):t.t("Until {0}",[d.format(u)])}}catch{}return e.null()},formatTemporalExtents(s,o,a={}){let l=(u,d)=>u[0]===null?-1:n.collator.compare(u[0],d[0]);return t.toList(s,l,u=>i.formatTemporalExtent(u,o,a))},formatWKT2(s){if(typeof s!="string")return e.null();let o=-1,a;try{a=s.replace(/([A-Z]+)\[|\]/ig,(l,u)=>l==="]"?(o--,l):(o++,`
${"  ".repeat(o)}${u}[`))}catch{a=s}return`<pre>${a}</pre>`},fileSizeUnits:["B","kB","MB","GB","TB"],formatFileSize(s){if(typeof s!="number")return e.format(s);var o=s==0?0:Math.floor(Math.log(s)/Math.log(1024));return t.unit((s/Math.pow(1024,o)).toFixed(2)*1,i.fileSizeUnits[o])},formatChecksum(s){if(typeof s!="string")return e.null();const o=r.getDependency("multihashes");if(!o)return t.e(s);try{const a=o.decode(t.hexToUint8(s)),l=t.e(a.name);return`<div class="checksum"><input class="checksum-input" size="32" value="${t.e(t.uint8ToHex(a.digest))}" readonly><br><span class="checksum-algo">${t.t("Hashing algorithm:")} <strong>${l}</strong></span></div>`}catch{return e.null()}},fileDataTypes:{int8:"8-bit integer",int16:"16-bit integer",int32:"32-bit integer",int64:"64-bit integer",uint8:"unsigned 8-bit integer",uint16:"unsigned 16-bit integer",uint32:"unsigned 32-bit integer",uint64:"unsigned 64-bit integer",float16:"16-bit float",float32:"32-bit float",float64:"64-bit float",cint16:"16-bit complex integer",cint32:"32-bit complex integer",cfloat32:"32-bit complex float",cfloat64:"64-bit complex float"},formatFileDataType(s){return s==="other"?t.t("non-standard"):typeof s=="string"&&s in i.fileDataTypes?t.abbrev(t.t(s),t.t(i.fileDataTypes[s])):e.null()},formatTransform(s){if(Array.isArray(s)&&s.length%3===0){let o=[];for(let a=0;a<s.length;a=a+3){let l=s.slice(a,a+3);o.push(`[${i.formatCSV(l)}]`)}return o.join("<br>")}else return i.formatCSV(s)},formatShape(s,o,a={}){return Array.isArray(s)?s.map(l=>e.format(l,a.unit)).join("  "):e.format(s,a.unit)},formatCSV(s){if(Array.isArray(s)){let o=s.find(a=>typeof a=="number")!==void 0;return s.map(e.format).join(o?"; ":", ")}else return e.format(s)},formatImage(s,o){let a="",l=null;if(t.isObject(s))l=s.href,a=s.title||"";else if(typeof s=="string")l=s;else return e.format(l);return`<img src="${t.e(l)}" title="${t.e(a)}" class="${t.e(o.replace(":","_"))}">`},formatPhone(s){return t.toLink(`tel:${s}`,s)},formatEmail(s){return t.toLink(`mailto:${s}`,s)},formatConcepts(s){return t.toList(s,!1,o=>{if(!t.isObject(o))return e.format(o);let a="";if(o.title){let l=o.title;o.url&&(l=t.toLink(o.url,o.title)),a+=`<strong>${l}</strong> (<code>${t.e(o.id)}</code>)`}else{let l=o.id;o.url&&(l=t.toLink(o.url,o.id)),a+=`<strong><code>${l}</code></strong>`}return o.description&&(a+=`<br><small>${t.e(o.description)}</small>`),a})},formatAddress(s){return t.toList(s,!1,o=>{if(!t.isObject(o))return e.format(o);let a=Array.isArray(o.deliveryPoint)?o.deliveryPoint.slice(0):[];if(o.postalCode&&o.city){let l=`${o.postalCode} ${o.city}`;o.administrativeArea&&(l+=` (${o.administrativeArea})`),typeof o.country=="string"&&o.country.length>0&&(o.country.length===2&&o.country.toUpperCase()===o.country?(l=o.country+"-"+l,a.push(l)):(a.push(l),a.push(o.country.toUpperCase())))}else o.city&&a.push(o.city),o.administrativeArea&&a.push(o.administrativeArea),o.postalCode&&a.push(o.postalCode),typeof o.country=="string"&&o.country.length>0&&a.push(o.country.toUpperCase());return e.string(a.join(`

`))})},formatGridCode(s){if(typeof s!="string")return e.format(s);let o=function(d,c,f,h){let p=c.length;if(p%2===1)d.push(`Code: ${c}`);else{let g=p/2,b=c.substring(0,g);d.push(`${f}: ${b}`);let y=c.substring(g,p);d.push(`${h}: ${y}`)}},[a,l]=s.split(/-(.*)/),u=[];switch(a){case"MGRS":u.push(t.abbrev(t.t(a),t.t("Military Grid Reference System")));let[,d,c,f,h]=l.match(/^(\d{2})([C-X])([A-Z]{2})(\d*)$/);u.push(`${t.t("UTM Zone")}: ${d}`),u.push(`${t.t("Latitude Band")}: ${c}`),u.push(`${t.t("Square Identifier")}: ${f}`),h&&o(u,h,t.t("Easting"),t.t("Northing"));break;case"MSIN":u.push(t.t("MODIS Sinusoidal Tile Grid")),o(u,l,t.t("Horizontal"),t.t("Vertical"));break;case"WRS1":case"WRS2":let p=a.substring(3,4);u.push(t.abbrev(t.t("WRS-"+p),t.t("Worldwide Reference System "+p))),o(u,l,t.t("Path"),t.t("Row"));break;case"DOQ":u.push(_abbrev(t.t(a),t.t("Digital Orthophoto Quadrangle"))),u.push(`${t.t("Quadrangle")}: ${l}`);break;case"DOQQ":u.push(_abbrev(t.t(a),t.t("Digital Orthophoto Quarter Quadrangle")));let g=l.substr(0,l.length-2);u.push(`${t.t("Quadrangle")}: ${g}`);let b=l.substr(-2),y=b[0]==="N"?t.t("North"):t.t("South"),v=b[1]==="E"?t.t("East"):t.t("West");u.push(`${t.t("Quarter")}: ${y} ${v}`);break;case"MXRA":u.push(t.t("Maxar ARD Tile Grid"));let[w,E]=l.split(/-(.*)/);w.startsWith("Z")&&(w=w.substring(1)),u.push(`${t.t("UTM Zone")}: ${w}`),u.push(`${t.t("Quadkey")}: ${E}`);break;case"EASE":let[S,T]=l.split("-");if(S==="DGGS"){u.push(t.t("EASE-DGGS"));let[R,O,...B]=T.split(".");if(u.push(`${t.t("Level")}: ${R}`),O.length===6){u.push(`${t.t("Level 0 row cell")}: ${O.substring(0,3)}`),u.push(`${t.t("Level 0 column cell")}: ${O.substring(3,6)}`);for(let K in B){let L=B[K];L.length===2&&(u.push(`${t.t("Fraction of level {i} row cell",{i:K})}: ${L[0]}`),u.push(`${t.t("Fraction of level {i} column cell",{i:K})}: ${L[1]}`))}}break}case"CDEM":let[,D,k]=l.match(/^([A-Z]\d+)([A-Z]\d+)$/);u.push(t.t("Copernicus Digital Elevation Model Grid")),u.push(`${t.t("Easting")}: ${k}`),u.push(`${t.t("Northing")}: ${D}`);default:u.push(s)}return u.join("<br>")}};return A4=i,A4}var k4,ISe;function l9t(){if(ISe)return k4;ISe=1;const t=nz(),e=yC(),n=R1(),r=cz(),i=Q8e();function s(b,y,v,w,E){let S={};for(let T in y){let D;try{let k=T.split(/:(.*)/);k.length===1&&k.unshift(E);let R=k[0];if(typeof w=="function"&&!w(T,[T]))continue;D=y[T];let O=t.getSpecification(T,v);O.ext&&(R=O.ext);let B=!1;v==="summaries"&&O.listWithKeys&&Array.isArray(D)&&D.length>0&&(D=D[0],B=!0);let K=null,L=[];if(e.isObject(O.items)){let $=D;O.listWithKeys&&($=Object.values($));let U=[];Array.isArray($)?U=e.keysFromListOfObjects($):e.isObject($)&&(U=Object.keys($)),K={},L=O.itemOrder.filter(q=>U.includes(q)),U.forEach(q=>{typeof O.items[q]>"u"?(K[q]={label:e.formatKey(q),explain:q},L.push(q)):(K[q]=Object.assign({},O.items[q]),K[q].label=p(q,O.items[q]))})}let I;if(v==="summaries")if(!B&&e.isObject(D))if(typeof D.minimum<"u"&&typeof D.maximum<"u"){const $=U=>h(U,T,b,y,O,w,[T]);D.minimum===D.maximum?I=$(D.minimum):D.minimum===null?I=`< ${$(D.maximum)}`:D.maximum===null?I=`> ${$(D.minimum)}`:I=`${$(D.minimum)}  ${$(D.maximum)}`}else I=r.object(D);else if(t.externalRenderer&&K){let $=B?Object.assign({},D):D.slice(0);for(let U in $){let q=e.isObject($[U])?{}:[];for(let Y in K)q[Y]=h($[U][Y],Y,b,y,K[Y]);$[U]=q}}else Array.isArray(D)?I=e.toList(D,!O.custom&&!O.items,$=>h($,T,b,y,O)):console.warn(`Invalid summary value: ${D}`);typeof I>"u"&&(I=h(D,T,b,y,O,w,[T])),e.isObject(S[R])||(S[R]={extension:R,label:g(R),properties:{}}),S[R].properties[T]={label:p(T,O),value:D,formatted:I,items:K,itemOrder:L,spec:O}}catch(k){console.error(`Field '${T}' with value '${D}' resulted in an error`,k)}}return Object.values(S).sort((T,D)=>n.collator.compare(T.extension,D.extension))}function o(b,y,v=null,w=""){return s(y,b,"assets",v,w)}function a(b,y,v=null,w=""){return s(y,b,"links",v,w)}function l(b,y,v=null,w=""){return s(y,b,"providers",v,w)}function u(b,y=null,v=""){return s(b,b.summaries,"summaries",y,v)}function d(b,y=null,v=""){return s(b,b,"collection",y,v)}function c(b,y=null,v=""){return s(b,b,"catalog",y,v)}function f(b,y=null,v=""){return s(b,b.properties,"metadata",y,v)}function h(b,y,v=null,w=null,E=null,S=null,T=[]){if(e.isObject(E)||(E=t.getSpecification(y)),typeof E.format=="string"){let D=i[`format${E.format}`];return D||console.warn(`Formatter '${E.format}' not available.`),D(b,y,E,v,w)}else{if(typeof E.formatter=="function")return E.formatter(b,y,E,v,w);if(e.isObject(E.mapping)){let D=String(b);return typeof E.mapping[D]<"u"?b=E.mapping[D]:typeof E.mapping[D.toLowerCase()]<"u"?b=E.mapping[D.toLowerCase()]:typeof E.mapping[D.toUpperCase()]<"u"&&(b=E.mapping[D.toUpperCase()]),r.format(e.t(b),E.unit)}else{if(b===null&&E.null)return r.null(E.null);if(Array.isArray(b)){let D=(k,R)=>h(k,y,v,w,E,S,T.concat([R]));return typeof S=="function"&&T.length>0&&(b=b.filter((k,R)=>S(T[0],T.concat([R])))),t.externalRenderer&&(E.custom||E.items)?b.map(D):e.toList(b,!1,D)}else if(e.isObject(b)){let D=R=>e.isObject(E.items)?E.listWithKeys?{items:E.items,itemOrder:E.itemOrder}:E.items[R]:e.isObject(E.properties)?E.properties[R]:{},k=(R,O,B)=>h(R,O,v,B,D(O),S,T.concat([O]));if(t.externalRenderer&&(E.custom||E.items||E.properties)){let R={};for(let O in b)typeof S=="function"&&T.length>0&&!S(T[0],T.concat([O]))||(R[O]=k(b[O],O,b));return R}else{let R=B=>p(B,D(B)),O=E.listWithKeys?[]:E.itemOrder;return e.toObject(b,k,R,O,S,T)}}else return r.format(b,E.unit)}}}function p(b,y=null){if(e.isObject(y)||(y=t.getSpecification(b)),e.isObject(y)&&typeof y.label=="string"){if(typeof y.explain=="string")return y.explain.match(/^https?:\/\//i)?e.toLink(y.explain,e.t(y.label),"about"):e.abbrev(e.t(y.label),e.t(y.explain));if(typeof y.label=="string")return e.t(y.label)}return e.formatKey(b)}function g(b){return p(b,t.getExtension(b))}return k4={format:h,label:p,extension:g,formatCatalog:c,formatCollection:d,formatSummaries:u,formatItemProperties:f,formatAsset:o,formatLink:a,formatProvider:l,formatGrouped:s},k4}var T4,$Se;function u9t(){if($Se)return T4;$Se=1;const t=nz();return t.importFields(sMt),t.addDependency("@musement/iso-duration",uIt),t.addDependency("content-type",cIt()),t.addDependency("commonmark",fIt()),t.addDependency("multihashes",j$t()),T4={...l9t(),Fields:t.exportFields(),Registry:t,Helper:yC(),DataTypes:cz(),Formatters:Q8e(),I18N:R1()},T4}var eNe=u9t();const D4=aa(eNe);function c9t(t){if(t.type==="Catalog")return D4.formatCatalog(t);if(t.type==="Collection")return D4.formatCollection(t);if(t.type==="Feature")return D4.formatItemProperties(t)}async function d9t(t){const n=await(await fetch(`${t.for}?ts=${Date.now()}`)).json();t.stacInfo=c9t(n),t.dispatchEvent(new CustomEvent("loaded"))}function Sg(t,e,n){return J4t(Object.entries(e.stacProperties).filter(([r])=>t==null?void 0:t.includes(r)).reverse().sort(([r],[i])=>(t==null?void 0:t.indexOf(r))>(t==null?void 0:t.indexOf(i))?1:-1),n)}const f9t=`
:host {
  --color-primary-lighter: color-mix(in srgb, var(--primary-color), #fff 95%);
  display: flex;
  flex-direction: column;
  min-height: 100%;
  height: auto;
  line-height: 1.5;
  box-sizing: border-box;
}
img,
video,
iframe {
  max-width: 100%;
}
header,
main,
footer {
  padding: 5px 30px;
}
header {
  background: var(--color-primary-lighter);
}
h1 {
  margin-block-start: 0.67em;
  margin-block-end: 0.67em;
  line-height: 1.5;
}
header h1 {
  font-size: 24px;
  color: var(--primary-color);
}
header h2 {
  font-size: 22px;
  color: var(--primary-color);
}
section#tags ul {
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
section#tags li {
  list-style: none;
}
main {
  padding-bottom: 50px;
  flex: 1;
  font-size: small;
}
section#body ul {
  padding: 0;
}
section#body > ul:not(.single-property) {
  columns: 2;
  -webkit-columns: 2;
  -moz-columns: 2;
}
section#body li {
  margin-bottom: 8px;
  break-inside: avoid;
}
section#body .value li {
  margin-bottom: 0px;    
}
section#body slot:not([name=description]) ul li {
  list-style: none;
}
section#body .colon {
  margin-right: 4px;
}
section#body .label {
  font-weight: bold;
}
section#body ul li,
section#body ul li ul {
  display: flex;
  flex-wrap: wrap;
}
section#body ul li ul li:not(:last-child):after {
  content: ",";
  margin-right: 4px;
}
section#featured details > div {
  padding: 10px 12px 20px;
}
section#featured .button-container {
  text-align: center;
  margin-bottom: 24px;
}
section#featured .button-container .button {
  /*height: 14px;*/
  padding: 8px;
  margin: 8px 0;
  height: auto;
  text-decoration: none;
  /*display: block;
  display: flex;
  align-items: center;
  justify-content: center;*/
}
section#featured .button-container .button:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='0 0 24 24'%3E%3Ctitle%3Eopen-in-new%3C/title%3E%3Cpath d='M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z' /%3E%3C/svg%3E");
}
section#featured .button-container > div {
  text-align: left;
}
section#featured .button-container > div > p {
  margin-bottom: 0;
}
footer {
  background: var(--primary-color);
  color: white;
  padding: 10px 30px 20px;
  position: relative;
}
footer a,
footer h1 {
  color: white;
}
footer h1 {
  font-size: 14px;
}
footer h2 {
  font-size: 12px;
}
footer .copy {
  background: none;
  border: none;
  position: absolute;
  top: 15px;
  right: 30px;
}
footer .copy:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23fff' viewBox='-6 -6 36 36'%3E%3Ctitle%3Econtent-copy%3C/title%3E%3Cpath d='M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z' /%3E%3C/svg%3E");
}
dt {
  font-weight: bold;
  text-transform: uppercase;
}
dd dt {
  text-transform: unset;
}
dd, dt {
  margin: 0;
}
dt {
  margin-top: 20px;
}
dd dt {
  margin-top: 8px;
}

/* from eox-itemfilter
TODO harmonize/refactor */
details summary > * {
  display: inline;
}
details summary {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #0002;
  padding: .5rem 0;
}

details > summary::-webkit-details-marker {
  display: none;
}

.title {
  font-size: small;
  align-items: center;
}
details summary .title {
  display: flex;
  font-weight: 500;
}
details summary::before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  height: 24px;
  width: 24px;
}
details[open] summary::before {
  transform: rotate(90deg);
}
section#tags ul>li,
.count {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #00417044;
  padding: 0 12px;
  height: 20px;
  border-radius: 10px;
  color: #004170;
  font-weight: 500;
  margin-left: 9px;
}
section#tags ul>li {
  padding: 2px 12px;
  margin: 0 4px 4px 0;
}
`,h9t=`:root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}button,.button { display: inline-flex; position: relative; align-items: center; color: #fff; border-width: 0; outline: none; border-radius: 4px; padding: 16px; height: 36px; cursor: pointer; font-family: inherit; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 1.25px; font-weight: 500; box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12); transition-property: box-shadow, transform, opacity, background; transition-duration: 0.28s; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);}button:hover:not([disabled]):not(.icon):not(.json-editor-btntype-*),.button:hover:not([disabled]):not(.icon) { box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12); background: var(--primary-btn-color-hover);}button,button:active,.button,.button:active { background: var(--primary-color);}button[disabled],.button[disabled] { opacity: 0.5; cursor: not-allowed;}button.block,.button.block { display: block;}button.outline,.button.outline { background: transparent; box-shadow: none; color: var(--primary-color); outline: 1px solid var(--primary-color);}button.outline:hover,.button.outline:hover { background: transparent;}button.icon,.button.icon,button[class*="json-editor-btntype-"] { background: transparent; border: none; box-shadow: none; padding: 0; border-radius: 50%; width: 24px; height: 24px; text-indent: -9999px;}button.icon-text,.button.icon-text { text-indent: 26px;}button.icon-text.block,.button.icon-text.block { text-indent: 20px;}button.icon:before,button.icon-text:before,.button.icon:before,.button.icon-text:before { position: absolute; text-indent: 0; line-height: initial;}button.icon-text.block:before,.button.icon-text.block:before { text-indent: -54px;}button.icon:before,.button.icon:before,button[class*="json-editor-btntype-"]::before { width: 24px; height: 24px; margin-right: 0;}button.icon-text:before,.button.icon-text:before { width: 18px; height: 18px;}button.small,.button.small { height: 28px; padding: 12.4px; font-size: 0.75rem;}button.smallest.icon,button.smallest.icon::before { height: 16px; width: 16px; padding: 0;}input[type="checkbox"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}input[type="checkbox"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="checkbox"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");}textarea { height: 90px; resize: none; border-radius: 4px; box-sizing: border-box !important; width: 100%; padding: 5px 7px; border: 1px solid var(--secondary-color); font-size: smaller; background: var(--background-color);}input[type="text"],input[type="url"],input[type="email"],input[type="password"],input[type="text"],input[type="number"],input[type="search"],input[type="tel"],select { box-sizing: border-box; width: 100%; margin-top: 0.5rem; margin-bottom: 0.5rem; padding: 5px 7px; border-radius: 4px; border: 1px solid #0004;}ul.list-wrap { padding: 0;}ul.list-wrap li:hover,ul.list-wrap li.selected { background: var(--secondary-bg-color-hover);}ul.list-wrap li { list-style: none; padding: 4px;}ul.list-wrap li { border-bottom: 1.2px solid var(--secondary-color);}ul.list-wrap li:first-child { border-top: 1.2px solid var(--secondary-color);}ul.list-wrap li .list { width: 100%; align-items: center; justify-content: space-between; display: flex; align-items: center; cursor: pointer; font-size: small; gap: 10px;}ul.list-wrap li .list span { display: flex; align-items: center; cursor: pointer; font-size: small; flex-grow: 1;}input[type="radio"] { appearance: none; -webkit-appearance: none; margin: 0; cursor: pointer; display: flex; flex-direction: row; align-items: center; width: 24px; height: 24px;}label span { font-size: small;}input[type="radio"]:after { display: block; content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E"); width: 20px; height: 20px; margin-right: 4px;}input[type="radio"]:checked:after { content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");}input[type="range"] { -webkit-appearance: none; width: 90%; margin-left: 5%; height: 6px; border-radius: 5px; background: #d7dcdf; outline: none; padding: 0;}input[type="range"]::-webkit-slider-thumb { appearance: none; width: 15px; height: 15px; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}.range-slider { margin: 60px 0 0 0;}.range-slider { width: 100%;}input[type="range"]::-webkit-slider-thumb:hover { background: #00416f;}input[type="range"]:active::-webkit-slider-thumb { background: #00416f;}input[type="range"]::-moz-range-thumb { width: 15px; height: 15px; border: 0; border-radius: 50%; background: #2c3e50; cursor: pointer; transition: background 0.15s ease-in-out;}input[type="range"]::-moz-range-thumb:hover { background: #00416f;}input[type="range"]:active::-moz-range-thumb { background: #00416f;}input[type="range"]:focus::-webkit-slider-thumb { box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416f00;}.range-slider__value { display: inline-block; position: relative; width: 60px; color: #fff; line-height: 20px; text-align: center; border-radius: 3px; background: #2c3e50; padding: 5px 10px; margin-left: 8px;}.range-slider__value:after { position: absolute; top: 8px; left: -7px; width: 0; height: 0; border-top: 7px solid transparent; border-right: 7px solid #2c3e50; border-bottom: 7px solid transparent; content: "";}input::-moz-focus-inner,input::-moz-focus-outer { border: 0;}`;function p9t(t=[]){return et`
    <section id="body" part="body">
      <ul class=${t.length===1?"single-property":ni}>
        ${lu(t,([,e])=>et`
            <slot name=${e.label.toLowerCase()}>
              <li>
                ${qn(t.length>1,()=>et` <span class="label"> ${e.label}</span
                      ><span class="colon">:</span>`)}
                <span class="value">
                  ${qn(e.label.toLowerCase()==="description",()=>et`
                      <eox-stacinfo-shadow .content=${e.formatted}>
                      </eox-stacinfo-shadow>
                    `,()=>et`${Dc(e.formatted)}`)}
                </span>
              </li>
            </slot>
          `)}
      </ul>
    </section>
  `}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tNe=Symbol.for(""),m9t=t=>{if((t==null?void 0:t.r)===tNe)return t==null?void 0:t._$litStatic$},TT=t=>({_$litStatic$:t,r:tNe}),PSe=new Map,g9t=t=>(e,...n)=>{const r=n.length;let i,s;const o=[],a=[];let l,u=0,d=!1;for(;u<r;){for(l=e[u];u<r&&(s=n[u],(i=m9t(s))!==void 0);)l+=i+e[++u],d=!0;u!==r&&a.push(s),o.push(l),u++}if(u===r&&o.push(e[r]),d){const c=o.join("$$lit$$");(e=PSe.get(c))===void 0&&(o.raw=o,PSe.set(c,e=o)),n=a}return t(e,...n)},nNe=g9t(et);function y9t(t=[]){return et`
    ${t.length>0?et`
          <header part="header">
            <slot name="header">
              ${lu(t,([,e],n)=>nNe`
              <h${TT((n+1).toString())}>${Dc(e.formatted)}</h${TT((n+1).toString())}>
              `)}
            </slot>
          </header>
        `:ni}
  `}function b9t(t=[]){return et`
    <section id="tags" part="tags">
      <ul>
        ${lu(t,([,e])=>et`<slot name=${e.label.toLowerCase()}
              ><li>
                <span class="label">${Dc(e.formatted)}</span>
              </li></slot
            >`)}
      </ul>
    </section>
  `}function v9t(t=[]){return et`
    ${qn(t.length>0,()=>et`
        <section id="featured" part="featured">
          ${lu(t,([,e])=>et`
              <details>
                <summary>
                  <slot
                    name="featured-${e.label.toLowerCase()}-summary"
                    class="title"
                  >
                    ${e.label}
                    ${qn(e.length,()=>et` <span class="count">${e.length}</span> `)}
                  </slot>
                </summary>
                <div class="featured-container">
                  <slot name="featured-${e.label.toLowerCase()}">
                    ${qn(e.label.toLowerCase()==="description",()=>et`
                        <eox-stacinfo-shadow .content=${e.formatted}>
                        </eox-stacinfo-shadow>
                      `,()=>et`${Dc(e.formatted)}`)}
                  </slot>
                </div>
              </details>
            `)}
        </section>
      `)}
  `}function x9t(t=[]){return et`
    ${qn(t.length>0,()=>et`
        <footer part="footer">
          <slot name="footer">
            ${lu(t,([e,n],r)=>nNe`
                  <div class="footer-container">
                    <h${TT((r+1).toString())}>
                      ${Dc(n.label)}
                    </h${TT((r+1).toString())}>
                    <small>${Dc(n.formatted)}</small>
                  </div>
                  ${qn(e==="sci:citation",()=>et`
                      <button
                        class="copy icon"
                        @click=${()=>navigator.clipboard.writeText(n.formatted)}
                      >
                        copy
                      </button>
                    `)}
                `)}
          </slot>
        </footer>
      `)}
  `}class w9t extends Zr{static get properties(){return{content:{type:String}}}constructor(){super(),this.content=null}render(){return et`<style>
        img,
        video,
        iframe {
          max-width: 100%;
        }
      </style>
      <div>${Dc(this.content)}</div>`}}customElements.define("eox-stacinfo-shadow",w9t);class _9t extends Zr{static get properties(){return{allowHtml:{attribute:"allow-html",type:Boolean},unstyled:{attribute:"unstyled",type:Boolean},for:{attribute:"for",type:String},header:{attribute:!1,type:Array},tags:{attribute:!1,type:Array},body:{attribute:!1,type:Array},featured:{attribute:!1,type:Array},footer:{attribute:!1,type:Array},stacInfo:{attribute:!1,state:!0,type:Array},stacProperties:{attribute:!1,state:!0,type:Array}}}constructor(){super(),this.allowHtml=!1,this.unstyled=!1,this.for="",this.header=[],this.tags=[],this.body=[],this.featured=[],this.footer=[],this.stacInfo=[],this.stacProperties=[]}updated(e){e.has("for")&&d9t(this),e.has("stacInfo")&&(eNe.Formatters.allowHtmlInCommonMark=this.allowHtml!==void 0,Q4t(this))}render(){return et`
      <style>
        :host {
          display: block;
        }
        ${!this.unstyled&&h9t}
        ${!this.unstyled&&f9t}
      </style>
      <slot></slot>
      ${qn(this.stacInfo.length,()=>et`
          <!-- Header Component-->
          ${y9t(Sg(this.header,this))}
          <main>
            ${Sg(this.tags,this).length+Sg(this.body,this).length>0?et`
                  <!-- Tags Component-->
                  ${b9t(Sg(this.tags,this))}

                  <!-- Body Component-->
                  ${p9t(Sg(this.body,this))}
                `:ni}

            <!-- Featured Component-->
            ${v9t(Sg(this.featured,this,"featured"))}
          </main>

          <!-- Footer Component-->
          ${x9t(Sg(this.footer,this))}
        `,()=>et`${ni}`)}
    `}}customElements.define("eox-stacinfo",_9t);const NSe={};function E9t(t){let e=NSe[t];if(e)return e;e=NSe[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function jv(t,e){typeof e!="string"&&(e=jv.defaultChars);const n=E9t(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const u=a<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(u&192)===128){const d=a<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?i+="":i+=String.fromCharCode(d),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),u=parseInt(r.slice(s+7,s+9),16),d=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let c=a<<18&1835008|l<<12&258048|u<<6&4032|d&63;c<65536||c>1114111?i+="":(c-=65536,i+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),s+=9;continue}}i+=""}return i})}jv.defaultChars=";/?:@&=+$,#";jv.componentChars="";const BSe={};function C9t(t){let e=BSe[t];if(e)return e;e=BSe[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function xC(t,e,n){typeof e!="string"&&(n=e,e=xC.defaultChars),typeof n>"u"&&(n=!0);const r=C9t(e);let i="";for(let s=0,o=t.length;s<o;s++){const a=t.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(s+1,s+3))){i+=t.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=t.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[s]+t[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[s])}return i}xC.defaultChars=";/?:@&=+$,-_.!~*'()#";xC.componentChars="-_.!~*'()";function dz(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function DT(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const S9t=/^([a-z0-9.+-]+:)/i,A9t=/:[0-9]*$/,k9t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,T9t=["<",">",'"',"`"," ","\r",`
`,"	"],D9t=["{","}","|","\\","^","`"].concat(T9t),L9t=["'"].concat(D9t),zSe=["%","/","?",";","#"].concat(L9t),jSe=["/","?","#"],R9t=255,USe=/^[+a-z0-9A-Z_-]{0,63}$/,F9t=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,qSe={javascript:!0,"javascript:":!0},HSe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function fz(t,e){if(t&&t instanceof DT)return t;const n=new DT;return n.parse(t,e),n}DT.prototype.parse=function(t,e){let n,r,i,s=t;if(s=s.trim(),!e&&t.split("#").length===1){const u=k9t.exec(s);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=S9t.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&qSe[o])&&(s=s.substr(2),this.slashes=!0)),!qSe[o]&&(i||o&&!HSe[o])){let u=-1;for(let p=0;p<jSe.length;p++)r=s.indexOf(jSe[p]),r!==-1&&(u===-1||r<u)&&(u=r);let d,c;u===-1?c=s.lastIndexOf("@"):c=s.lastIndexOf("@",u),c!==-1&&(d=s.slice(0,c),s=s.slice(c+1),this.auth=d),u=-1;for(let p=0;p<zSe.length;p++)r=s.indexOf(zSe[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=s.length),s[u-1]===":"&&u--;const f=s.slice(0,u);s=s.slice(u),this.parseHost(f),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let g=0,b=p.length;g<b;g++){const y=p[g];if(y&&!y.match(USe)){let v="";for(let w=0,E=y.length;w<E;w++)y.charCodeAt(w)>127?v+="x":v+=y[w];if(!v.match(USe)){const w=p.slice(0,g),E=p.slice(g+1),S=y.match(F9t);S&&(w.push(S[1]),E.unshift(S[2])),E.length&&(s=E.join(".")+s),this.hostname=w.join(".");break}}}}this.hostname.length>R9t&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),HSe[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};DT.prototype.parseHost=function(t){let e=A9t.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const O9t=Object.freeze(Object.defineProperty({__proto__:null,decode:jv,encode:xC,format:dz,parse:fz},Symbol.toStringTag,{value:"Module"})),rNe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,iNe=/[\0-\x1F\x7F-\x9F]/,M9t=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,hz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,sNe=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,oNe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,I9t=Object.freeze(Object.defineProperty({__proto__:null,Any:rNe,Cc:iNe,Cf:M9t,P:hz,S:sNe,Z:oNe},Symbol.toStringTag,{value:"Module"})),$9t=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),P9t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var L4;const N9t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),B9t=(L4=String.fromCodePoint)!==null&&L4!==void 0?L4:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function z9t(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=N9t.get(t))!==null&&e!==void 0?e:t}var Lo;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Lo||(Lo={}));const j9t=32;var $p;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})($p||($p={}));function n$(t){return t>=Lo.ZERO&&t<=Lo.NINE}function U9t(t){return t>=Lo.UPPER_A&&t<=Lo.UPPER_F||t>=Lo.LOWER_A&&t<=Lo.LOWER_F}function q9t(t){return t>=Lo.UPPER_A&&t<=Lo.UPPER_Z||t>=Lo.LOWER_A&&t<=Lo.LOWER_Z||n$(t)}function H9t(t){return t===Lo.EQUALS||q9t(t)}var ko;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(ko||(ko={}));var wp;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(wp||(wp={}));class G9t{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=ko.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wp.Strict}startEntity(e){this.decodeMode=e,this.state=ko.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case ko.EntityStart:return e.charCodeAt(n)===Lo.NUM?(this.state=ko.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=ko.NamedEntity,this.stateNamedEntity(e,n));case ko.NumericStart:return this.stateNumericStart(e,n);case ko.NumericDecimal:return this.stateNumericDecimal(e,n);case ko.NumericHex:return this.stateNumericHex(e,n);case ko.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|j9t)===Lo.LOWER_X?(this.state=ko.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=ko.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(n$(i)||U9t(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(n$(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Lo.SEMI)this.consumed+=1;else if(this.decodeMode===wp.Strict)return 0;return this.emitCodePoint(z9t(this.result),this.consumed),this.errors&&(e!==Lo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=V9t(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===wp.Attribute&&(s===0||H9t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14,s!==0){if(o===Lo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==wp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&$p.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~$p.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case ko.NamedEntity:return this.result!==0&&(this.decodeMode!==wp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ko.NumericDecimal:return this.emitNumericEntity(0,2);case ko.NumericHex:return this.emitNumericEntity(0,3);case ko.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ko.EntityStart:return 0}}}function aNe(t){let e="";const n=new G9t(t,r=>e+=B9t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=e+i.slice(o);return e="",l}}function V9t(t,e,n,r){const i=(e&$p.BRANCH_LENGTH)>>7,s=e&$p.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=t[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return t[l+i]}return-1}const W9t=aNe($9t);aNe(P9t);function lNe(t,e=wp.Legacy){return W9t(t,e)}function Y9t(t){return Object.prototype.toString.call(t)}function pz(t){return Y9t(t)==="[object String]"}const X9t=Object.prototype.hasOwnProperty;function Z9t(t,e){return X9t.call(t,e)}function GR(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function uNe(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function mz(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function LT(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const cNe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,K9t=/&([a-z#][a-z0-9]{1,31});/gi,J9t=new RegExp(cNe.source+"|"+K9t.source,"gi"),Q9t=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function eBt(t,e){if(e.charCodeAt(0)===35&&Q9t.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return mz(r)?LT(r):t}const n=lNe(t);return n!==t?n:t}function tBt(t){return t.indexOf("\\")<0?t:t.replace(cNe,"$1")}function Uv(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(J9t,function(e,n,r){return n||eBt(e,r)})}const nBt=/[&<>"]/,rBt=/[&<>"]/g,iBt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function sBt(t){return iBt[t]}function dm(t){return nBt.test(t)?t.replace(rBt,sBt):t}const oBt=/[.?*+^$[\]\\(){}|-]/g;function aBt(t){return t.replace(oBt,"\\$&")}function Ki(t){switch(t){case 9:case 32:return!0}return!1}function H2(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function G2(t){return hz.test(t)||sNe.test(t)}function V2(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function VR(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const lBt={mdurl:O9t,ucmicro:I9t},uBt=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:uNe,assign:GR,escapeHtml:dm,escapeRE:aBt,fromCodePoint:LT,has:Z9t,isMdAsciiPunct:V2,isPunctChar:G2,isSpace:Ki,isString:pz,isValidEntityCode:mz,isWhiteSpace:H2,lib:lBt,normalizeReference:VR,unescapeAll:Uv,unescapeMd:tBt},Symbol.toStringTag,{value:"Module"}));function cBt(t,e,n){let r,i,s,o;const a=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(s=t.src.charCodeAt(t.pos),s===93&&(r--,r===0)){i=!0;break}if(o=t.pos,t.md.inline.skipToken(t),s===91){if(o===t.pos-1)r++;else if(n)return t.pos=l,-1}}let u=-1;return i&&(u=t.pos),t.pos=l,u}function dBt(t,e,n){let r,i=e;const s={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=Uv(t.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(s.str=Uv(t.slice(e,i)),s.pos=i,s.ok=!0),s}function fBt(t,e,n,r){let i,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=t.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;e++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=t.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=Uv(t.slice(e,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=Uv(t.slice(e,s)),o}const hBt=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:dBt,parseLinkLabel:cBt,parseLinkTitle:fBt},Symbol.toStringTag,{value:"Module"})),cf={};cf.code_inline=function(t,e,n,r,i){const s=t[e];return"<code"+i.renderAttrs(s)+">"+dm(s.content)+"</code>"};cf.code_block=function(t,e,n,r,i){const s=t[e];return"<pre"+i.renderAttrs(s)+"><code>"+dm(t[e].content)+`</code></pre>
`};cf.fence=function(t,e,n,r,i){const s=t[e],o=s.info?Uv(s.info).trim():"";let a="",l="";if(o){const d=o.split(/(\s+)/g);a=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(s.content,a,l)||dm(s.content):u=dm(s.content),u.indexOf("<pre")===0)return u+`
`;if(o){const d=s.attrIndex("class"),c=s.attrs?s.attrs.slice():[];d<0?c.push(["class",n.langPrefix+a]):(c[d]=c[d].slice(),c[d][1]+=" "+n.langPrefix+a);const f={attrs:c};return`<pre><code${i.renderAttrs(f)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${u}</code></pre>
`};cf.image=function(t,e,n,r,i){const s=t[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(t,e,n)};cf.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};cf.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};cf.text=function(t,e){return dm(t[e].content)};cf.html_block=function(t,e){return t[e].content};cf.html_inline=function(t,e){return t[e].content};function F1(){this.rules=GR({},cf)}F1.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+dm(e.attrs[n][0])+'="'+dm(e.attrs[n][1])+'"';return i};F1.prototype.renderToken=function(e,n,r){const i=e[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};F1.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e)}return r};F1.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,s=t.length;i<s;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};F1.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;a==="inline"?r+=this.renderInline(t[s].children,e,n):typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e,n)}return r};function jl(){this.__rules__=[],this.__cache__=null}jl.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};jl.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};jl.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};jl.prototype.before=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};jl.prototype.after=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};jl.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};jl.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};jl.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};jl.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};jl.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Kc(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Kc.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};Kc.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Kc.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};Kc.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Kc.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function dNe(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}dNe.prototype.Token=Kc;const pBt=/\r\n?|\n/g,mBt=/\0/g;function gBt(t){let e;e=t.src.replace(pBt,`
`),e=e.replace(mBt,""),t.src=e}function yBt(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function bBt(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function vBt(t){return/^<a[>\s]/i.test(t)}function xBt(t){return/^<\/a\s*>/i.test(t)}function wBt(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(vBt(a.content)&&s>0&&s--,xBt(a.content)&&s++),!(s>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const l=a.content;let u=t.md.linkify.match(l);const d=[];let c=a.level,f=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,g=t.md.normalizeLink(p);if(!t.md.validateLink(g))continue;let b=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(b)?b=t.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=t.md.normalizeLinkText(b):b=t.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,"");const y=u[h].index;if(y>f){const S=new t.Token("text","",0);S.content=l.slice(f,y),S.level=c,d.push(S)}const v=new t.Token("link_open","a",1);v.attrs=[["href",g]],v.level=c++,v.markup="linkify",v.info="auto",d.push(v);const w=new t.Token("text","",0);w.content=b,w.level=c,d.push(w);const E=new t.Token("link_close","a",-1);E.level=--c,E.markup="linkify",E.info="auto",d.push(E),f=u[h].lastIndex}if(f<l.length){const h=new t.Token("text","",0);h.content=l.slice(f),h.level=c,d.push(h)}e[n].children=i=uNe(i,o,d)}}}}const fNe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,_Bt=/\((c|tm|r)\)/i,EBt=/\((c|tm|r)\)/ig,CBt={c:"",r:"",tm:""};function SBt(t,e){return CBt[e.toLowerCase()]}function ABt(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(EBt,SBt)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function kBt(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&fNe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function TBt(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(_Bt.test(t.tokens[e].content)&&ABt(t.tokens[e].children),fNe.test(t.tokens[e].content)&&kBt(t.tokens[e].children))}const DBt=/['"]/,GSe=/['"]/g,VSe="";function xA(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function LBt(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const s=t[i],o=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,u=a.length;e:for(;l<u;){GSe.lastIndex=l;const d=GSe.exec(a);if(!d)break;let c=!0,f=!0;l=d.index+1;const h=d[0]==="'";let p=32;if(d.index-1>=0)p=a.charCodeAt(d.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let g=32;if(l<u)g=a.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){g=t[n].content.charCodeAt(0);break}const b=V2(p)||G2(String.fromCharCode(p)),y=V2(g)||G2(String.fromCharCode(g)),v=H2(p),w=H2(g);if(w?c=!1:y&&(v||b||(c=!1)),v?f=!1:b&&(w||y||(f=!1)),g===34&&d[0]==='"'&&p>=48&&p<=57&&(f=c=!1),c&&f&&(c=b,f=y),!c&&!f){h&&(s.content=xA(s.content,d.index,VSe));continue}if(f)for(n=r.length-1;n>=0;n--){let E=r[n];if(r[n].level<o)break;if(E.single===h&&r[n].level===o){E=r[n];let S,T;h?(S=e.md.options.quotes[2],T=e.md.options.quotes[3]):(S=e.md.options.quotes[0],T=e.md.options.quotes[1]),s.content=xA(s.content,d.index,T),t[E.token].content=xA(t[E.token].content,E.pos,S),l+=T.length-1,E.token===i&&(l+=S.length-1),a=s.content,u=a.length,r.length=n;continue e}}c?r.push({token:i,pos:d.index,single:h,level:o}):f&&h&&(s.content=xA(s.content,d.index,VSe))}}}function RBt(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!DBt.test(t.tokens[e].content)||LBt(t.tokens[e].children,t)}function FBt(t){let e,n;const r=t.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=n=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}}const R4=[["normalize",gBt],["block",yBt],["inline",bBt],["linkify",wBt],["replacements",TBt],["smartquotes",RBt],["text_join",FBt]];function gz(){this.ruler=new jl;for(let t=0;t<R4.length;t++)this.ruler.push(R4[t][0],R4[t][1])}gz.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};gz.prototype.State=dNe;function df(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,u=i.length,d=!1;o<u;o++){const c=i.charCodeAt(o);if(!d)if(Ki(c)){a++,c===9?l+=4-l%4:l++;continue}else d=!0;(c===10||o===u-1)&&(c!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),d=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}df.prototype.push=function(t,e,n){const r=new Kc(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};df.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};df.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};df.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!Ki(r))break}return e};df.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!Ki(this.src.charCodeAt(--e)))return e+1;return e};df.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};df.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};df.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const s=new Array(n-e);for(let o=0,a=e;a<n;a++,o++){let l=0;const u=this.bMarks[a];let d=u,c;for(a+1<n||i?c=this.eMarks[a]+1:c=this.eMarks[a];d<c&&l<r;){const f=this.src.charCodeAt(d);if(Ki(f))f===9?l+=4-(l+this.bsCount[a])%4:l++;else if(d-u<this.tShift[a])l++;else break;d++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(d,c):s[o]=this.src.slice(d,c)}return s.join("")};df.prototype.Token=Kc;const OBt=65536;function F4(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function WSe(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=t.substring(o,r-1),o=r):(e.push(a+t.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(o)),e}function MBt(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let s=t.bMarks[i]+t.tShift[i];if(s>=t.eMarks[i])return!1;const o=t.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=t.eMarks[i])return!1;const a=t.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Ki(a)||o===45&&Ki(a))return!1;for(;s<t.eMarks[i];){const E=t.src.charCodeAt(s);if(E!==124&&E!==45&&E!==58&&!Ki(E))return!1;s++}let l=F4(t,e+1),u=l.split("|");const d=[];for(let E=0;E<u.length;E++){const S=u[E].trim();if(!S){if(E===0||E===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?d.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=F4(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=WSe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const c=u.length;if(c===0||c!==d.length)return!1;if(r)return!0;const f=t.parentType;t.parentType="table";const h=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),g=[e,0];p.map=g;const b=t.push("thead_open","thead",1);b.map=[e,e+1];const y=t.push("tr_open","tr",1);y.map=[e,e+1];for(let E=0;E<u.length;E++){const S=t.push("th_open","th",1);d[E]&&(S.attrs=[["style","text-align:"+d[E]]]);const T=t.push("inline","",0);T.content=u[E].trim(),T.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let v,w=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let E=!1;for(let T=0,D=h.length;T<D;T++)if(h[T](t,i,n,!0)){E=!0;break}if(E||(l=F4(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(u=WSe(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),w+=c-u.length,w>OBt))break;if(i===e+2){const T=t.push("tbody_open","tbody",1);T.map=v=[e+2,0]}const S=t.push("tr_open","tr",1);S.map=[i,i+1];for(let T=0;T<c;T++){const D=t.push("td_open","td",1);d[T]&&(D.attrs=[["style","text-align:"+d[T]]]);const k=t.push("inline","",0);k.content=u[T]?u[T].trim():"",k.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return v&&(t.push("tbody_close","tbody",-1),v[1]=i),t.push("table_close","table",-1),g[1]=i,t.parentType=f,t.line=i,!0}function IBt(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const s=t.push("code_block","code",0);return s.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,s.map=[e,t.line],!0}function $Bt(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>s)return!1;const o=t.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=t.skipChars(i,o);let l=i-a;if(l<3)return!1;const u=t.src.slice(a,i),d=t.src.slice(i,s);if(o===96&&d.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let c=e,f=!1;for(;c++,!(c>=n||(i=a=t.bMarks[c]+t.tShift[c],s=t.eMarks[c],i<s&&t.sCount[c]<t.blkIndent));)if(t.src.charCodeAt(i)===o&&!(t.sCount[c]-t.blkIndent>=4)&&(i=t.skipChars(i,o),!(i-a<l)&&(i=t.skipSpaces(i),!(i<s)))){f=!0;break}l=t.sCount[e],t.line=c+(f?1:0);const h=t.push("fence","code",0);return h.info=d,h.content=t.getLines(e+1,c,l,!0),h.markup=u,h.map=[e,t.line],!0}function PBt(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],u=[],d=[],c=t.md.block.ruler.getRules("blockquote"),f=t.parentType;t.parentType="blockquote";let h=!1,p;for(p=e;p<n;p++){const w=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],s=t.eMarks[p],i>=s)break;if(t.src.charCodeAt(i++)===62&&!w){let S=t.sCount[p]+1,T,D;t.src.charCodeAt(i)===32?(i++,S++,D=!1,T=!0):t.src.charCodeAt(i)===9?(T=!0,(t.bsCount[p]+S)%4===3?(i++,S++,D=!1):D=!0):T=!1;let k=S;for(a.push(t.bMarks[p]),t.bMarks[p]=i;i<s;){const R=t.src.charCodeAt(i);if(Ki(R))R===9?k+=4-(k+t.bsCount[p]+(D?1:0))%4:k++;else break;i++}h=i>=s,l.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(T?1:0),u.push(t.sCount[p]),t.sCount[p]=k-S,d.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(h)break;let E=!1;for(let S=0,T=c.length;S<T;S++)if(c[S](t,p,n,!0)){E=!0;break}if(E){t.lineMax=p,t.blkIndent!==0&&(a.push(t.bMarks[p]),l.push(t.bsCount[p]),d.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}a.push(t.bMarks[p]),l.push(t.bsCount[p]),d.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]=-1}const g=t.blkIndent;t.blkIndent=0;const b=t.push("blockquote_open","blockquote",1);b.markup=">";const y=[e,0];b.map=y,t.md.block.tokenize(t,e,p);const v=t.push("blockquote_close","blockquote",-1);v.markup=">",t.lineMax=o,t.parentType=f,y[1]=t.line;for(let w=0;w<d.length;w++)t.bMarks[w+e]=a[w],t.tShift[w+e]=d[w],t.sCount[w+e]=u[w],t.bsCount[w+e]=l[w];return t.blkIndent=g,!0}function NBt(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const u=t.src.charCodeAt(s++);if(u!==o&&!Ki(u))return!1;u===o&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function YSe(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=t.src.charCodeAt(r);if(!Ki(s))return-1}return r}function XSe(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let s=t.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=t.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=t.src.charCodeAt(i),!Ki(s))?-1:i}function BBt(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function zBt(t,e,n,r){let i,s,o,a,l=e,u=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let d=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(d=!0);let c,f,h;if((h=XSe(t,l))>=0){if(c=!0,o=t.bMarks[l]+t.tShift[l],f=Number(t.src.slice(o,h-1)),d&&f!==1)return!1}else if((h=YSe(t,l))>=0)c=!1;else return!1;if(d&&t.skipSpaces(h)>=t.eMarks[l])return!1;if(r)return!0;const p=t.src.charCodeAt(h-1),g=t.tokens.length;c?(a=t.push("ordered_list_open","ol",1),f!==1&&(a.attrs=[["start",f]])):a=t.push("bullet_list_open","ul",1);const b=[l,0];a.map=b,a.markup=String.fromCharCode(p);let y=!1;const v=t.md.block.ruler.getRules("list"),w=t.parentType;for(t.parentType="list";l<n;){s=h,i=t.eMarks[l];const E=t.sCount[l]+h-(t.bMarks[l]+t.tShift[l]);let S=E;for(;s<i;){const $=t.src.charCodeAt(s);if($===9)S+=4-(S+t.bsCount[l])%4;else if($===32)S++;else break;s++}const T=s;let D;T>=i?D=1:D=S-E,D>4&&(D=1);const k=E+D;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const R=[l,0];a.map=R,c&&(a.info=t.src.slice(o,h-1));const O=t.tight,B=t.tShift[l],K=t.sCount[l],L=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=k,t.tight=!0,t.tShift[l]=T-t.bMarks[l],t.sCount[l]=S,T>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||y)&&(u=!1),y=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=L,t.tShift[l]=B,t.sCount[l]=K,t.tight=O,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),l=t.line,R[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let I=!1;for(let $=0,U=v.length;$<U;$++)if(v[$](t,l,n,!0)){I=!0;break}if(I)break;if(c){if(h=XSe(t,l),h<0)break;o=t.bMarks[l]+t.tShift[l]}else if(h=YSe(t,l),h<0)break;if(p!==t.src.charCodeAt(h-1))break}return c?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),b[1]=l,t.line=l,t.parentType=w,u&&BBt(t,g),!0}function jBt(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function a(v){const w=t.lineMax;if(v>=w||t.isEmpty(v))return null;let E=!1;if(t.sCount[v]-t.blkIndent>3&&(E=!0),t.sCount[v]<0&&(E=!0),!E){const D=t.md.block.ruler.getRules("reference"),k=t.parentType;t.parentType="reference";let R=!1;for(let O=0,B=D.length;O<B;O++)if(D[O](t,v,w,!0)){R=!0;break}if(t.parentType=k,R)return null}const S=t.bMarks[v]+t.tShift[v],T=t.eMarks[v];return t.src.slice(S,T+1)}let l=t.src.slice(i,s+1);s=l.length;let u=-1;for(i=1;i<s;i++){const v=l.charCodeAt(i);if(v===91)return!1;if(v===93){u=i;break}else if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(v===92&&(i++,i<s&&l.charCodeAt(i)===10)){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<s;i++){const v=l.charCodeAt(i);if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Ki(v))break}const d=t.md.helpers.parseLinkDestination(l,i,s);if(!d.ok)return!1;const c=t.md.normalizeLink(d.str);if(!t.md.validateLink(c))return!1;i=d.pos;const f=i,h=o,p=i;for(;i<s;i++){const v=l.charCodeAt(i);if(v===10){const w=a(o);w!==null&&(l+=w,s=l.length,o++)}else if(!Ki(v))break}let g=t.md.helpers.parseLinkTitle(l,i,s);for(;g.can_continue;){const v=a(o);if(v===null)break;l+=v,i=s,s=l.length,o++,g=t.md.helpers.parseLinkTitle(l,i,s,g)}let b;for(i<s&&p!==i&&g.ok?(b=g.str,i=g.pos):(b="",i=f,o=h);i<s;){const v=l.charCodeAt(i);if(!Ki(v))break;i++}if(i<s&&l.charCodeAt(i)!==10&&b)for(b="",i=f,o=h;i<s;){const v=l.charCodeAt(i);if(!Ki(v))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const y=VR(l.slice(1,u));return y?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[y]>"u"&&(t.env.references[y]={title:b,href:c}),t.line=o),!0):!1}const UBt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],qBt="[a-zA-Z_:][a-zA-Z0-9:._-]*",HBt="[^\"'=<>`\\x00-\\x20]+",GBt="'[^']*'",VBt='"[^"]*"',WBt="(?:"+HBt+"|"+GBt+"|"+VBt+")",YBt="(?:\\s+"+qBt+"(?:\\s*=\\s*"+WBt+")?)",hNe="<[A-Za-z][A-Za-z0-9\\-]*"+YBt+"*\\s*\\/?>",pNe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",XBt="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",ZBt="<[?][\\s\\S]*?[?]>",KBt="<![A-Za-z][^>]*>",JBt="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",QBt=new RegExp("^(?:"+hNe+"|"+pNe+"|"+XBt+"|"+ZBt+"|"+KBt+"|"+JBt+")"),e7t=new RegExp("^(?:"+hNe+"|"+pNe+")"),ib=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+UBt.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(e7t.source+"\\s*$"),/^$/,!1]];function t7t(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let o=t.src.slice(i,s),a=0;for(;a<ib.length&&!ib[a][0].test(o);a++);if(a===ib.length)return!1;if(r)return ib[a][2];let l=e+1;if(!ib[a][1].test(o)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],s=t.eMarks[l],o=t.src.slice(i,s),ib[a][1].test(o)){o.length!==0&&l++;break}}t.line=l;const u=t.push("html_block","",0);return u.map=[e,l],u.content=t.getLines(e,l,t.blkIndent,!0),!0}function n7t(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=t.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=t.src.charCodeAt(++i);if(a>6||i<s&&!Ki(o))return!1;if(r)return!0;s=t.skipSpacesBack(s,i);const l=t.skipCharsBack(s,35,i);l>i&&Ki(t.src.charCodeAt(l-1))&&(s=l),t.line=e+1;const u=t.push("heading_open","h"+String(a),1);u.markup="########".slice(0,a),u.map=[e,t.line];const d=t.push("inline","",0);d.content=t.src.slice(i,s).trim(),d.map=[e,t.line],d.children=[];const c=t.push("heading_close","h"+String(a),-1);return c.markup="########".slice(0,a),!0}function r7t(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let s=0,o,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let h=t.bMarks[a]+t.tShift[a];const p=t.eMarks[a];if(h<p&&(o=t.src.charCodeAt(h),(o===45||o===61)&&(h=t.skipChars(h,o),h=t.skipSpaces(h),h>=p))){s=o===61?1:2;break}}if(t.sCount[a]<0)continue;let f=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](t,a,n,!0)){f=!0;break}if(f)break}if(!s)return!1;const l=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const u=t.push("heading_open","h"+String(s),1);u.markup=String.fromCharCode(o),u.map=[e,t.line];const d=t.push("inline","",0);d.content=l,d.map=[e,t.line-1],d.children=[];const c=t.push("heading_close","h"+String(s),-1);return c.markup=String.fromCharCode(o),t.parentType=i,!0}function i7t(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let s=e+1;for(t.parentType="paragraph";s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3||t.sCount[s]<0)continue;let u=!1;for(let d=0,c=r.length;d<c;d++)if(r[d](t,s,n,!0)){u=!0;break}if(u)break}const o=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const l=t.push("inline","",0);return l.content=o,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const wA=[["table",MBt,["paragraph","reference"]],["code",IBt],["fence",$Bt,["paragraph","reference","blockquote","list"]],["blockquote",PBt,["paragraph","reference","blockquote","list"]],["hr",NBt,["paragraph","reference","blockquote","list"]],["list",zBt,["paragraph","reference","blockquote"]],["reference",jBt],["html_block",t7t,["paragraph","reference","blockquote"]],["heading",n7t,["paragraph","reference","blockquote"]],["lheading",r7t],["paragraph",i7t]];function WR(){this.ruler=new jl;for(let t=0;t<wA.length;t++)this.ruler.push(wA[t][0],wA[t][1],{alt:(wA[t][2]||[]).slice()})}WR.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,s=t.md.options.maxNesting;let o=e,a=!1;for(;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n||t.sCount[o]<t.blkIndent));){if(t.level>=s){t.line=n;break}const l=t.line;let u=!1;for(let d=0;d<i;d++)if(u=r[d](t,o,n,!1),u){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),o=t.line,o<n&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}};WR.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};WR.prototype.State=df;function wC(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}wC.prototype.pushPending=function(){const t=new Kc("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};wC.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new Kc(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};wC.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let s=t;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-t,a=s<n?this.src.charCodeAt(s):32,l=V2(i)||G2(String.fromCharCode(i)),u=V2(a)||G2(String.fromCharCode(a)),d=H2(i),c=H2(a),f=!c&&(!u||d||l),h=!d&&(!l||c||u);return{can_open:f&&(e||!h||l),can_close:h&&(e||!f||u),length:o}};wC.prototype.Token=Kc;function s7t(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function o7t(t,e){let n=t.pos;for(;n<t.posMax&&!s7t(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const a7t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function l7t(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(a7t);if(!i)return!1;const s=i[1],o=t.md.linkify.matchAtStart(t.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=t.md.normalizeLink(a);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-s.length);const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=t.push("text","",0);d.content=t.md.normalizeLinkText(a);const c=t.push("link_close","a",-1);c.markup="linkify",c.info="auto"}return t.pos+=a.length-s.length,!0}function u7t(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&Ki(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const yz=[];for(let t=0;t<256;t++)yz.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){yz[t.charCodeAt(0)]=1});function c7t(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!Ki(i));)n++;return t.pos=n,!0}let s=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=t.src[n+1],n++)}const o="\\"+s;if(!e){const a=t.push("text_special","",0);i<256&&yz[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return t.pos=n+1,!0}function d7t(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=t.posMax;for(;n<s&&t.src.charCodeAt(n)===96;)n++;const o=t.src.slice(i,n),a=o.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=o),t.pos+=a,!0;let l=n,u;for(;(u=t.src.indexOf("`",l))!==-1;){for(l=u+1;l<s&&t.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===a){if(!e){const c=t.push("code_inline","code",0);c.markup=o,c.content=t.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[d]=u}return t.backticksScanned=!0,e||(t.pending+=o),t.pos+=a,!0}function f7t(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=t.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=t.push("text","",0),a.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function ZSe(t,e){let n;const r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];n=t.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<t.tokens.length&&t.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=t.tokens[o],t.tokens[o]=t.tokens[s],t.tokens[s]=n)}}function h7t(t){const e=t.tokens_meta,n=t.tokens_meta.length;ZSe(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&ZSe(t,e[r].delimiters)}const mNe={tokenize:f7t,postProcess:h7t};function p7t(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let s=0;s<i.length;s++){const o=t.push("text","",0);o.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function KSe(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const u=t.tokens[s.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?a+a:a,u.content="",o&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function m7t(t){const e=t.tokens_meta,n=t.tokens_meta.length;KSe(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&KSe(t,e[r].delimiters)}const gNe={tokenize:p7t,postProcess:m7t};function g7t(t,e){let n,r,i,s,o="",a="",l=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const d=t.pos,c=t.posMax,f=t.pos+1,h=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(h<0)return!1;let p=h+1;if(p<c&&t.src.charCodeAt(p)===40){for(u=!1,p++;p<c&&(n=t.src.charCodeAt(p),!(!Ki(n)&&n!==10));p++);if(p>=c)return!1;if(l=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(o=t.md.normalizeLink(i.str),t.md.validateLink(o)?p=i.pos:o="",l=p;p<c&&(n=t.src.charCodeAt(p),!(!Ki(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<c&&l!==p&&i.ok)for(a=i.str,p=i.pos;p<c&&(n=t.src.charCodeAt(p),!(!Ki(n)&&n!==10));p++);}(p>=c||t.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof t.env.references>"u")return!1;if(p<c&&t.src.charCodeAt(p)===91?(l=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(l,p++):p=h+1):p=h+1,r||(r=t.src.slice(f,h)),s=t.env.references[VR(r)],!s)return t.pos=d,!1;o=s.href,a=s.title}if(!e){t.pos=f,t.posMax=h;const g=t.push("link_open","a",1),b=[["href",o]];g.attrs=b,a&&b.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=c,!0}function y7t(t,e){let n,r,i,s,o,a,l,u,d="";const c=t.pos,f=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const h=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(s=p+1,s<f&&t.src.charCodeAt(s)===40){for(s++;s<f&&(n=t.src.charCodeAt(s),!(!Ki(n)&&n!==10));s++);if(s>=f)return!1;for(u=s,a=t.md.helpers.parseLinkDestination(t.src,s,t.posMax),a.ok&&(d=t.md.normalizeLink(a.str),t.md.validateLink(d)?s=a.pos:d=""),u=s;s<f&&(n=t.src.charCodeAt(s),!(!Ki(n)&&n!==10));s++);if(a=t.md.helpers.parseLinkTitle(t.src,s,t.posMax),s<f&&u!==s&&a.ok)for(l=a.str,s=a.pos;s<f&&(n=t.src.charCodeAt(s),!(!Ki(n)&&n!==10));s++);else l="";if(s>=f||t.src.charCodeAt(s)!==41)return t.pos=c,!1;s++}else{if(typeof t.env.references>"u")return!1;if(s<f&&t.src.charCodeAt(s)===91?(u=s+1,s=t.md.helpers.parseLinkLabel(t,s),s>=0?i=t.src.slice(u,s++):s=p+1):s=p+1,i||(i=t.src.slice(h,p)),o=t.env.references[VR(i)],!o)return t.pos=c,!1;d=o.href,l=o.title}if(!e){r=t.src.slice(h,p);const g=[];t.md.inline.parse(r,t.md,t.env,g);const b=t.push("image","img",0),y=[["src",d],["alt",""]];b.attrs=y,b.children=g,b.content=r,l&&y.push(["title",l])}return t.pos=s,t.posMax=f,!0}const b7t=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,v7t=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function x7t(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const o=t.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=t.src.slice(r+1,n);if(v7t.test(s)){const o=t.md.normalizeLink(s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=s.length+2,!0}if(b7t.test(s)){const o=t.md.normalizeLink("mailto:"+s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=s.length+2,!0}return!1}function w7t(t){return/^<a[>\s]/i.test(t)}function _7t(t){return/^<\/a\s*>/i.test(t)}function E7t(t){const e=t|32;return e>=97&&e<=122}function C7t(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!E7t(i))return!1;const s=t.src.slice(r).match(QBt);if(!s)return!1;if(!e){const o=t.push("html_inline","",0);o.content=s[0],w7t(o.content)&&t.linkLevel++,_7t(o.content)&&t.linkLevel--}return t.pos+=s[0].length,!0}const S7t=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,A7t=/^&([a-z][a-z0-9]{1,31});/i;function k7t(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const s=t.src.slice(n).match(S7t);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=t.push("text_special","",0);a.content=mz(o)?LT(o):LT(65533),a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}else{const s=t.src.slice(n).match(A7t);if(s){const o=lNe(s[0]);if(o!==s[0]){if(!e){const a=t.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}}return!1}function JSe(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=t[o];if(s.push(0),(t[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let u=r-s[r]-1,d=u;for(;u>l;u-=s[u]+1){const c=t[u];if(c.marker===a.marker&&c.open&&c.end<0){let f=!1;if((c.close||a.open)&&(c.length+a.length)%3===0&&(c.length%3!==0||a.length%3!==0)&&(f=!0),!f){const h=u>0&&!t[u-1].open?s[u-1]+1:0;s[o]=o-u+h,s[u]=h,a.open=!1,c.end=o,c.close=!1,d=-1,i=-2;break}}}d!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=d)}}function T7t(t){const e=t.tokens_meta,n=t.tokens_meta.length;JSe(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&JSe(e[r].delimiters)}function D7t(t){let e,n,r=0;const i=t.tokens,s=t.tokens.length;for(e=n=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const O4=[["text",o7t],["linkify",l7t],["newline",u7t],["escape",c7t],["backticks",d7t],["strikethrough",mNe.tokenize],["emphasis",gNe.tokenize],["link",g7t],["image",y7t],["autolink",x7t],["html_inline",C7t],["entity",k7t]],M4=[["balance_pairs",T7t],["strikethrough",mNe.postProcess],["emphasis",gNe.postProcess],["fragments_join",D7t]];function _C(){this.ruler=new jl;for(let t=0;t<O4.length;t++)this.ruler.push(O4[t][0],O4[t][1]);this.ruler2=new jl;for(let t=0;t<M4.length;t++)this.ruler2.push(M4[t][0],M4[t][1])}_C.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,s=t.cache;if(typeof s[e]<"u"){t.pos=s[e];return}let o=!1;if(t.level<i){for(let a=0;a<r;a++)if(t.level++,o=n[a](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,s[e]=t.pos};_C.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const s=t.pos;let o=!1;if(t.level<i){for(let a=0;a<n;a++)if(o=e[a](t,!1),o){if(s>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};_C.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};_C.prototype.State=wC;function L7t(t){const e={};t=t||{},e.src_Any=rNe.source,e.src_Cc=iNe.source,e.src_Z=oNe.source,e.src_P=hz.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function r$(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function YR(t){return Object.prototype.toString.call(t)}function R7t(t){return YR(t)==="[object String]"}function F7t(t){return YR(t)==="[object Object]"}function O7t(t){return YR(t)==="[object RegExp]"}function QSe(t){return YR(t)==="[object Function]"}function M7t(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const yNe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function I7t(t){return Object.keys(t||{}).reduce(function(e,n){return e||yNe.hasOwnProperty(n)},!1)}const $7t={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},P7t="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",N7t="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function B7t(t){t.__index__=-1,t.__text_cache__=""}function z7t(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function eAe(){return function(t,e){e.normalize(t)}}function RT(t){const e=t.re=L7t(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(P7t),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){const l=t.__schemas__[a];if(l===null)return;const u={validate:null,link:null};if(t.__compiled__[a]=u,F7t(l)){O7t(l.validate)?u.validate=z7t(l.validate):QSe(l.validate)?u.validate=l.validate:s(a,l),QSe(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=eAe();return}if(R7t(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:eAe()};const o=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(M7t).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),B7t(t)}function j7t(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function i$(t,e){const n=new j7t(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function gu(t,e){if(!(this instanceof gu))return new gu(t,e);e||I7t(t)&&(e=t,t={}),this.__opts__=r$({},yNe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r$({},$7t,t),this.__compiled__={},this.__tlds__=N7t,this.__tlds_replaced__=!1,this.re={},RT(this)}gu.prototype.add=function(e,n){return this.__schemas__[e]=n,RT(this),this};gu.prototype.set=function(e){return this.__opts__=r$(this.__opts__,e),this};gu.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,s,o,a,l,u,d;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=e.indexOf("@"),d>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};gu.prototype.pretest=function(e){return this.re.pretest.test(e)};gu.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};gu.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(i$(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(i$(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};gu.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,i$(this,0)):null};gu.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),RT(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,RT(this),this)};gu.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};gu.prototype.onCompile=function(){};const Gb=2147483647,Td=36,bz=1,W2=26,U7t=38,q7t=700,bNe=72,vNe=128,xNe="-",H7t=/^xn--/,G7t=/[^\0-\x7F]/,V7t=/[\x2E\u3002\uFF0E\uFF61]/g,W7t={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I4=Td-bz,Dd=Math.floor,$4=String.fromCharCode;function bp(t){throw new RangeError(W7t[t])}function Y7t(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function wNe(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(V7t,".");const i=t.split("."),s=Y7t(i,e).join(".");return r+s}function _Ne(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const X7t=t=>String.fromCodePoint(...t),Z7t=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Td},tAe=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},ENe=function(t,e,n){let r=0;for(t=n?Dd(t/q7t):t>>1,t+=Dd(t/e);t>I4*W2>>1;r+=Td)t=Dd(t/I4);return Dd(r+(I4+1)*t/(t+U7t))},CNe=function(t){const e=[],n=t.length;let r=0,i=vNe,s=bNe,o=t.lastIndexOf(xNe);o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&bp("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let d=1,c=Td;;c+=Td){a>=n&&bp("invalid-input");const f=Z7t(t.charCodeAt(a++));f>=Td&&bp("invalid-input"),f>Dd((Gb-r)/d)&&bp("overflow"),r+=f*d;const h=c<=s?bz:c>=s+W2?W2:c-s;if(f<h)break;const p=Td-h;d>Dd(Gb/p)&&bp("overflow"),d*=p}const u=e.length+1;s=ENe(r-l,u,l==0),Dd(r/u)>Gb-i&&bp("overflow"),i+=Dd(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},SNe=function(t){const e=[];t=_Ne(t);const n=t.length;let r=vNe,i=0,s=bNe;for(const l of t)l<128&&e.push($4(l));const o=e.length;let a=o;for(o&&e.push(xNe);a<n;){let l=Gb;for(const d of t)d>=r&&d<l&&(l=d);const u=a+1;l-r>Dd((Gb-i)/u)&&bp("overflow"),i+=(l-r)*u,r=l;for(const d of t)if(d<r&&++i>Gb&&bp("overflow"),d===r){let c=i;for(let f=Td;;f+=Td){const h=f<=s?bz:f>=s+W2?W2:f-s;if(c<h)break;const p=c-h,g=Td-h;e.push($4(tAe(h+p%g,0))),c=Dd(p/g)}e.push($4(tAe(c,0))),s=ENe(i,u,a===o),i=0,++a}++i,++r}return e.join("")},K7t=function(t){return wNe(t,function(e){return H7t.test(e)?CNe(e.slice(4).toLowerCase()):e})},J7t=function(t){return wNe(t,function(e){return G7t.test(e)?"xn--"+SNe(e):e})},ANe={version:"2.3.1",ucs2:{decode:_Ne,encode:X7t},decode:CNe,encode:SNe,toASCII:J7t,toUnicode:K7t},Q7t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},ezt={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},tzt={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},nzt={default:Q7t,zero:ezt,commonmark:tzt},rzt=/^(vbscript|javascript|file|data):/,izt=/^data:image\/(gif|png|jpeg|webp);/;function szt(t){const e=t.trim().toLowerCase();return rzt.test(e)?izt.test(e):!0}const kNe=["http:","https:","mailto:"];function ozt(t){const e=fz(t,!0);if(e.hostname&&(!e.protocol||kNe.indexOf(e.protocol)>=0))try{e.hostname=ANe.toASCII(e.hostname)}catch{}return xC(dz(e))}function azt(t){const e=fz(t,!0);if(e.hostname&&(!e.protocol||kNe.indexOf(e.protocol)>=0))try{e.hostname=ANe.toUnicode(e.hostname)}catch{}return jv(dz(e),jv.defaultChars+"%")}function Vu(t,e){if(!(this instanceof Vu))return new Vu(t,e);e||pz(t)||(e=t||{},t="default"),this.inline=new _C,this.block=new WR,this.core=new gz,this.renderer=new F1,this.linkify=new gu,this.validateLink=szt,this.normalizeLink=ozt,this.normalizeLinkText=azt,this.utils=uBt,this.helpers=GR({},hBt),this.options={},this.configure(t),e&&this.set(e)}Vu.prototype.set=function(t){return GR(this.options,t),this};Vu.prototype.configure=function(t){const e=this;if(pz(t)){const n=t;if(t=nzt[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Vu.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Vu.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Vu.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Vu.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};Vu.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Vu.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Vu.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};async function lzt(t){try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");return await e.text()}catch(e){return console.error("There has been a problem with your fetch operation:",e),null}}const TNe=/^<!-- ?\{(?:([a-z0-9]+)(\^[0-9]*)?: ?)?(.*)} ?-->\n?$/,uzt={li:["list_item"],ul:["bullet_list"],p:["paragraph"],ol:["ordered_list"],blockquote:["blockquote"],h1:["heading"],h2:["heading"],h3:["heading"],h4:["heading"],h5:["heading"],h6:["heading"],a:["link"],code:["code_inline","code_block","fence"]},DNe={hr:!0,image:!0},czt={"eox-map":{tour:[["prevent-scroll",!0]]},img:{hero:[["position","center"],["data-parallax",!0]]},video:{hero:[["position","center"],["loop",!0],["muted",!0],["autoplay",!0],["data-parallax",!0]]}},dzt=["img","video"],P4={1:["0.0.0"]},fzt=["tour"],hzt=["iframe"];function LNe(){document.body.style.userSelect="none"}function pzt(){document.body.style.userSelect=""}function mzt(t,e,n){t.target===e&&(LNe(),n.dragging=!0,n.lastX=t.clientX,n.lastY=t.clientY)}function gzt(t,e,n){if(n.dragging){let r=t.clientX-n.lastX,i=t.clientY-n.lastY,{top:s,left:o}=e.getBoundingClientRect();e.style.top=`${s+i}px`,e.style.left=`${o+r}px`,n.lastX=t.clientX,n.lastY=t.clientY}if(n.dragging||n.resizing){let r=n.lastX-t.clientX,i=t.clientY-n.lastY,{width:s,height:o,left:a,top:l}=e.getBoundingClientRect();n.resizing&&(e.style.width=`${s+r}px`,e.style.height=`${o+i}px`,e.style.top=`${l}px`),e.style.left=`${a-r}px`,n.lastX=t.clientX,n.lastY=t.clientY}}function yzt(t){pzt(),t.dragging=!1,t.resizing=!1}function bzt(t,e){t.stopPropagation(),LNe(),e.resizing=!0,e.lastX=t.clientX,e.lastY=t.clientY}async function vzt(t,e,n){t.addEventListener("mousedown",r=>mzt(r,t,n)),window.addEventListener("mousemove",r=>gzt(r,t,n)),window.addEventListener("mouseup",()=>yzt(n)),e.addEventListener("mousedown",r=>bzt(r,n))}function xzt(t){const e=document.querySelector("eox-storytelling"),{y:n}=e.getBoundingClientRect(),r=t.querySelector(".editor-wrapper"),i=d=>Number(d.replace("px","")),s=window.getComputedStyle(r),o=i(s.bottom),a=i(s.padding)*2,l=r.classList.contains("partial-height")?80:0,u=window.innerHeight-n-o-a-l;r.style.height=`${u}px`}function wzt(t){const e=document.createElement("input");e.type="file",e.accept=".md",e.onchange=n=>{const r=n.target.files[0];if(!r)return;const i=new FileReader;i.onload=s=>{const o=s.target.result;t.value(o)},i.readAsText(r)},e.click()}function _zt(t){const e=t.value(),n=new Blob([e],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${document.title}.md`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function RNe(t){const e=[];return t.forEach((n,r)=>{(n.startsWith("## ")||n.startsWith("# ")&&e.length)&&e.push(r)}),e}function nAe(t,e,n,r,i,s){const o=t.split(`
`),a=s.shadowRoot||s,l=a.querySelector("eox-storytelling-editor"),d=RNe(o)[e];if(r)if(i){const f=a.querySelector("eox-jsonform#storytelling-editor-fields").editor.getValue();Object.keys(f).forEach(h=>{const p=f[h];n=n.replaceAll(`{${h}}`,p)}),s.selectedCustomElement=null}else{s.selectedCustomElement={markdown:n,fields:r},s.requestUpdate();return}d>=0?o.splice(d,0,n):o.push(n),l.editor.editor.editors["root.Story"].setValue(o.join(`
`)),setTimeout(()=>{const c=a.querySelector(`div[data-section="${e+1}"]`);c&&window.scrollTo(0,c.offsetTop)},200),s.addCustomSectionIndex=-1,s.requestUpdate()}function Ezt(t,e,n){let r=null;n==null||n.codemirror.on("change",function(){const i=t.querySelector(".editor-saver");i.innerText="Auto Saving...",r&&clearTimeout(r),r=setTimeout(()=>{i.innerText="Saved";const s=JSON.parse(localStorage.getItem("markdown")||"{}");localStorage.setItem("markdown",JSON.stringify({...s,[e||"default"]:n.value()})),r=null},2500)})}function Czt(t){var e;(e=(t.shadowRoot||t).querySelector(".CodeMirror-scroll"))==null||e.addEventListener("wheel",function(n){const r=n.deltaY,i=this.scrollHeight,s=this.clientHeight;(this.scrollTop===0&&r<0||this.scrollTop+s>=i&&r>0)&&n.preventDefault()},{passive:!1})}function Szt(t){if(t.showEditor!==void 0){let e=JSON.parse(localStorage.getItem("markdown")||"{}");const n=t.id||"default",r=e[n];r&&r!==t.markdown&&(confirm("Recover your Story from the last time you edited?")?t.markdown=r:(delete e[n],localStorage.setItem("markdown",JSON.stringify(e))))}}function FNe(t){var e,n;if((n=(e=t.editor.editor)==null?void 0:e.editors)!=null&&n["root.Story"]){const r=t.editor.editor.editors["root.Story"].simplemde_instance;if(!t.disableAutosave)Ezt(t,t.storyId,r);else{const i=t.querySelector(".editor-saver");i.innerText=""}Czt(t)}else setTimeout(()=>FNe(t),100)}function ONe(t){var n;t.renderRoot.querySelector(".editor-wrapper").classList.add("editor-opacity-none"),t.editor&&t.editor.editor&&t.editor.editor.ready&&((n=t.editor.editor)!=null&&n.editors["root.Story"].simplemde_instance)?t.querySelector(".switch-input").click():setTimeout(()=>ONe(t),100)}const N4=(t,e,n,r,i)=>({name:t,action:i||function({codemirror:o}){const a=o.getCursor("start"),l=o.getCursor("end");o.replaceRange(e,a,l)},className:n,title:r}),Azt={properties:{Story:{type:"string",format:"markdown",options:{simplemde:{toolbar:["bold","italic","strikethrough","heading","|","unordered-list","ordered-list","link","|",N4("import",null,"fa fa-upload","Import Markdown File",wzt),N4("export",null,"fa fa-download","Export Markdown File",_zt),"|",N4("add-custom-section",null,"fa fa-plus","Add custom section",()=>{const t=document.querySelector("eox-storytelling"),e=t.markdown.split(`
`),n=RNe(e);t&&(t.addCustomSectionIndex=n.length,t.requestUpdate())})],spellChecker:!1}}}}},kzt=`## What is Lorem Ipsum?
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
`,Tzt=`## Table <!--{ as="div" }-->
| Number | Random Name | Lorem Ipsum                                       |
|--------|-------------|---------------------------------------------------|
| 1      | Alice       | Lorem ipsum dolor sit amet, consectetur adipiscing |
| 2      | Bob         | elit. Sed do eiusmod tempor incididunt ut labore  |
| 3      | Charlie     | et dolore magna aliqua. Ut enim ad minim veniam,  |
| 4      | Dana        | quis nostrud exercitation ullamco laboris nisi ut |
| 5      | Eve         | aliquip ex ea commodo consequat. Duis aute irure  |
`,Dzt=`## List <!--{ as="div" }-->
1. Lorem ipsum dolor sit amet, consectetur adipiscing elit. **Sed do eiusmod tempor** incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
2. _Duis aute irure_ dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
3. **Lorem ipsum dolor sit amet,** consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. _Ut enim ad minim veniam, quis nostrud exercitation ullamco_ laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
4. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
5. _Ut enim ad minim veniam, quis nostrud_ exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. **Duis aute irure dolor** in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
6. **Excepteur sint occaecat cupidatat** non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. _Lorem ipsum dolor sit amet, consectetur adipiscing elit._ Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,Lzt=`## {title} <!--{as="eox-map" style="width: 100%; height: 500px;" layers='{layers}' zoom="{zoom}" center=[{longitude},{latitude}] }-->
`,Rzt={title:"Simple Map",type:"object",required:["title","layers"],properties:{title:{type:"string",default:"Map Example",format:"text"},layers:{type:"string",default:'[ { "type": "Tile", "properties": { "id": "TOPO-WMS" }, "source": { "type": "TileWMS", "url": "https://ows.mundialis.de/services/service", "params": { "LAYERS": "TOPO-WMS" } } } ]',format:"textarea"},zoom:{type:"integer",default:2,minimum:1,maximum:28,format:"number"},longitude:{type:"integer",default:15,format:"number"},latitude:{type:"integer",default:48,format:"number"}}},Fzt=`## {title} <!--{ as="eox-map" mode="tour" }-->

### <!--{ layers='{layers}' center=[{longitude},{latitude}] zoom="{zoom}" animationOptions="{duration:500}" }-->
#### {tourTitle}
{description}
`,Ozt={title:"Tour",type:"object",required:["title"],properties:{title:{type:"string",default:"Map Tour Example",format:"text"},layers:{title:"Layers (Tour 1)",type:"string",default:'[{"type":"Tile","properties":{"id":"osm"},"source":{"type":"OSM"}}]',format:"textarea"},zoom:{title:"Zoom (Tour 1)",type:"integer",default:5,minimum:1,maximum:28,format:"number"},longitude:{title:"Longitude (Tour 1)",type:"integer",default:15,format:"number"},latitude:{title:"Longitude (Tour 1)",type:"integer",default:48,format:"number"},tourTitle:{title:"Title (Tour 1)",type:"string",default:"Tour Title",format:"text"},description:{title:"Description (Tour 1)",type:"string",default:"Some description for tour 1",format:"text"}}},Mzt=`## {title} <!--{as="img" src="{src}" style="width: 100%; height: 600px;"}-->
`,Izt={title:"Simple Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Simple Image Example",format:"text"},src:{type:"string",default:"https://images.unsplash.com/photo-1461880234904-751a2f54f1c7?q=80&w=2670&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",format:"text"}}},$zt=`# {title} <!--{ as="img" mode="hero" src="{src}" }-->
### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,Pzt={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Image Example",format:"text"},src:{type:"string",default:"https://www.gstatic.com/prettyearth/assets/full/14617.jpg",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},Nzt=`# {title} <!--{ as="video" mode="hero" src="{src}" }-->
#### {description} <!--{ style="font-size:1rem;opacity:0.7;margin-top:1rem;" }-->
`,Bzt={title:"Hero Image",type:"object",required:["title","src"],properties:{title:{type:"string",default:"Hero Bg Video Example",format:"text"},src:{type:"string",default:"https://dlmultimedia.esa.int/download/public/videos/2023/06/010/2306_010_AR_EN.mp4",format:"text"},description:{type:"string",default:"by EOX",format:"text"}}},zzt=[{name:"Basic",elements:[{name:"Textual",id:"ele-textual",markdown:kzt,icon:"data:image/svg+xml,%3Csvg fill='none' viewBox='0 0 138 112' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23f7f7f7' rx='4' height='112' width='138'/%3E%3Crect x='27' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='70' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='27' y='82' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3C/svg%3E"},{name:"Table",id:"ele-table",markdown:Tzt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 137 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='137' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='26' y='22' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='34' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='46' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='58' width='84' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='26' y='73' width='84' height='14' rx='7' fill='%23D9D9D9'/%3E%3C/svg%3E%0A"},{name:"List",id:"ele-list",markdown:Dzt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='38' y='22' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='34' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='46' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='58' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='70' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='38' y='82' width='73' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Ccircle cx='30.5' cy='25.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='37.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='49.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='61.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='73.5' r='3.5' fill='%23BFBFBF'/%3E%3Ccircle cx='30.5' cy='85.5' r='3.5' fill='%23BFBFBF'/%3E%3C/svg%3E%0A"}]},{name:"Map",elements:[{name:"Simple Map",id:"ele-simple-map",markdown:Lzt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M54.08 42.873L56.58 52.373C57.83 57.123 65.08 59.373 69.58 59.373C73.18 59.373 74.7467 63.0397 75.08 64.873C74.08 68.0397 73.48 74.373 79.08 74.373C84.68 74.373 85.08 70.7064 84.58 68.873L80.58 59.373C78.2467 56.5397 73.58 49.473 73.58 43.873C73.58 38.2729 69.9134 37.873 68.08 38.373C64.08 42.373 60.4134 40.0397 59.08 38.373C54.28 36.773 53.7467 40.7063 54.08 42.873Z' fill='%235E5E5E'/%3E%3Cpath d='M59.0891 62.4676C58.5923 65.8092 60.2794 68.2359 61.5214 68.4348C66.4893 71.7763 70.4738 69.4293 71.5088 68.4348C72.9992 66.5253 71.7634 63.0643 70.5214 62.4676C68.5343 62.945 64.5564 63.661 63.5214 62.4676C62.031 60.5581 60.0214 60.4641 59.0891 62.4676Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:Rzt},{name:"Tour",id:"ele-map-tour",markdown:Fzt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M65.08 35.873L67.58 45.373C68.83 50.123 76.08 52.373 80.58 52.373C84.18 52.373 85.7467 56.0397 86.08 57.873C85.08 61.0397 84.48 67.373 90.08 67.373C95.68 67.373 96.08 63.7064 95.58 61.873L91.58 52.373C89.2467 49.5397 84.58 42.473 84.58 36.873C84.58 31.2729 80.9134 30.873 79.08 31.373C75.08 35.373 71.4134 33.0397 70.08 31.373C65.28 29.773 64.7467 33.7063 65.08 35.873Z' fill='%235E5E5E'/%3E%3Cpath d='M70.0891 55.4676C69.5923 58.8092 71.2794 61.2359 72.5214 61.4348C77.4893 64.7763 81.4738 62.4293 82.5088 61.4348C83.9992 59.5253 82.7634 56.0643 81.5214 55.4676C79.5343 55.945 75.5564 56.661 74.5214 55.4676C73.031 53.5581 71.0214 53.4641 70.0891 55.4676Z' fill='%235E5E5E'/%3E%3Crect x='34' y='67' width='26' height='16' rx='2' fill='%23f7f7f7'/%3E%3C/svg%3E%0A",fields:Ozt}]},{name:"Media",elements:[{name:"Simple",id:"ele-simple-media",markdown:Mzt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='27' y='22' width='84' height='67' rx='4' fill='%23ebebeb'/%3E%3Cpath d='M69.5 39L73.2045 50.4012H85.1924L75.494 57.4476L79.1985 68.8488L69.5 61.8024L59.8015 68.8488L63.506 57.4476L53.8076 50.4012H65.7955L69.5 39Z' fill='%235E5E5E'/%3E%3C/svg%3E%0A",fields:Izt},{name:"Hero Image",id:"ele-hero-image",markdown:$zt,icon:"data:image/svg+xml,%3Csvg viewBox='0 0 138 112' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='138' height='112' rx='4' fill='%23f7f7f7'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23ebebeb'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3C/svg%3E%0A",fields:Pzt},{name:"Hero Video",id:"ele-hero-video",markdown:Nzt,icon:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 138 112' fill='none'%3E%3Crect width='138' height='112' rx='4' fill='%23F2F2F2'/%3E%3Crect x='11' y='11' width='116' height='90' rx='4' fill='%23D8D8D8'/%3E%3Crect x='35' y='49' width='69' height='7' rx='3.5' fill='%235E5E5E'/%3E%3Crect x='51' y='59' width='37' height='4' rx='2' fill='%23BEBEBE'/%3E%3Cline x1='20.6233' y1='87.6712' x2='75.6233' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3Cline x1='64.6233' y1='87.6712' x2='119.623' y2='24.6712' stroke='%235E5E5E' stroke-opacity='0.1'/%3E%3C/svg%3E",fields:Bzt}]}];var uk={exports:{}},jzt=uk.exports,rAe;function Uzt(){return rAe||(rAe=1,function(t,e){(function(n,r){t.exports=r()})(jzt,function(){function n(F){var H=function(J,re){if(typeof J!="object"||!J)return J;var ye=J[Symbol.toPrimitive];if(ye!==void 0){var xe=ye.call(J,re);if(typeof xe!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}(F,"string");return typeof H=="symbol"?H:H+""}function r(F){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(F)}function i(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}function s(F,H){for(var J=0;J<H.length;J++){var re=H[J];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(F,n(re.key),re)}}function o(F,H,J){return H&&s(F.prototype,H),Object.defineProperty(F,"prototype",{writable:!1}),F}var a=Date.now();function l(){var F={},H=!0,J=0,re=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(H=arguments[0],J++);for(var ye=function(Re){for(var P in Re)Object.prototype.hasOwnProperty.call(Re,P)&&(H&&Object.prototype.toString.call(Re[P])==="[object Object]"?F[P]=l(!0,F[P],Re[P]):F[P]=Re[P])};J<re;J++){var xe=arguments[J];ye(xe)}return F}function u(F,H){if((K(F)||F===window||F===document)&&(F=[F]),I(F)||$(F)||(F=[F]),Y(F)!=0){if(I(F)&&!$(F))for(var J=F.length,re=0;re<J&&H.call(F[re],F[re],re,F)!==!1;re++);else if($(F)){for(var ye in F)if(q(F,ye)&&H.call(F[ye],F[ye],ye,F)===!1)break}}}function d(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F[a]=F[a]||[],ye={all:re,evt:null,found:null};return H&&J&&Y(re)>0&&u(re,function(xe,Re){if(xe.eventName==H&&xe.fn.toString()==J.toString())return ye.found=!0,ye.evt=Re,!1}),ye}function c(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J=H.onElement,re=H.withCallback,ye=H.avoidDuplicate,xe=ye===void 0||ye,Re=H.once,P=Re!==void 0&&Re,Q=H.useCapture,se=Q!==void 0&&Q,ae=arguments.length>2?arguments[2]:void 0,ke=J||[];function Ae(Ee){O(re)&&re.call(ae,Ee,this),P&&Ae.destroy()}return B(ke)&&(ke=document.querySelectorAll(ke)),Ae.destroy=function(){u(ke,function(Ee){var De=d(Ee,F,Ae);De.found&&De.all.splice(De.evt,1),Ee.removeEventListener&&Ee.removeEventListener(F,Ae,se)})},u(ke,function(Ee){var De=d(Ee,F,Ae);(Ee.addEventListener&&xe&&!De.found||!xe)&&(Ee.addEventListener(F,Ae,se),De.all.push({eventName:F,fn:Ae}))}),Ae}function f(F,H){u(H.split(" "),function(J){return F.classList.add(J)})}function h(F,H){u(H.split(" "),function(J){return F.classList.remove(J)})}function p(F,H){return F.classList.contains(H)}function g(F,H){for(;F!==document.body;){if(!(F=F.parentElement))return!1;if(typeof F.matches=="function"?F.matches(H):F.msMatchesSelector(H))return F}}function b(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||H==="")return!1;if(H==="none")return O(J)&&J(),!1;var re=T(),ye=H.split(" ");u(ye,function(xe){f(F,"g"+xe)}),c(re,{onElement:F,avoidDuplicate:!1,once:!0,withCallback:function(xe,Re){u(ye,function(P){h(Re,"g"+P)}),O(J)&&J()}})}function y(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(H==="")return F.style.webkitTransform="",F.style.MozTransform="",F.style.msTransform="",F.style.OTransform="",F.style.transform="",!1;F.style.webkitTransform=H,F.style.MozTransform=H,F.style.msTransform=H,F.style.OTransform=H,F.style.transform=H}function v(F){F.style.display="block"}function w(F){F.style.display="none"}function E(F){var H=document.createDocumentFragment(),J=document.createElement("div");for(J.innerHTML=F;J.firstChild;)H.appendChild(J.firstChild);return H}function S(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function T(){var F,H=document.createElement("fakeelement"),J={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(F in J)if(H.style[F]!==void 0)return J[F]}function D(F,H,J,re){if(F())H();else{var ye;J||(J=100);var xe=setInterval(function(){F()&&(clearInterval(xe),ye&&clearTimeout(ye),H())},J)}}function k(F,H,J){if(U(F))console.error("Inject assets error");else if(O(H)&&(J=H,H=!1),B(H)&&H in window)O(J)&&J();else{var re;if(F.indexOf(".css")!==-1){if((re=document.querySelectorAll('link[href="'+F+'"]'))&&re.length>0)return void(O(J)&&J());var ye=document.getElementsByTagName("head")[0],xe=ye.querySelectorAll('link[rel="stylesheet"]'),Re=document.createElement("link");return Re.rel="stylesheet",Re.type="text/css",Re.href=F,Re.media="all",xe?ye.insertBefore(Re,xe[0]):ye.appendChild(Re),void(O(J)&&J())}if((re=document.querySelectorAll('script[src="'+F+'"]'))&&re.length>0){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}}else{var P=document.createElement("script");P.type="text/javascript",P.src=F,P.onload=function(){if(O(J)){if(B(H))return D(function(){return window[H]!==void 0},function(){J()}),!1;J()}},document.body.appendChild(P)}}}function R(){return"navigator"in window&&window.navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i)}function O(F){return typeof F=="function"}function B(F){return typeof F=="string"}function K(F){return!(!F||!F.nodeType||F.nodeType!=1)}function L(F){return Array.isArray(F)}function I(F){return F&&F.length&&isFinite(F.length)}function $(F){return r(F)==="object"&&F!=null&&!O(F)&&!L(F)}function U(F){return F==null}function q(F,H){return F!==null&&hasOwnProperty.call(F,H)}function Y(F){if($(F)){if(F.keys)return F.keys().length;var H=0;for(var J in F)q(F,J)&&H++;return H}return F.length}function X(F){return!isNaN(parseFloat(F))&&isFinite(F)}function te(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,H=document.querySelectorAll(".gbtn[data-taborder]:not(.disabled)");if(!H.length)return!1;if(H.length==1)return H[0];typeof F=="string"&&(F=parseInt(F));var J=[];u(H,function(P){J.push(P.getAttribute("data-taborder"))});var re=Math.max.apply(Math,J.map(function(P){return parseInt(P)})),ye=F<0?1:F+1;ye>re&&(ye="1");var xe=J.filter(function(P){return P>=parseInt(ye)}),Re=xe.sort()[0];return document.querySelector('.gbtn[data-taborder="'.concat(Re,'"]'))}function le(F){if(F.events.hasOwnProperty("keyboard"))return!1;F.events.keyboard=c("keydown",{onElement:window,withCallback:function(H,J){var re=(H=H||window.event).keyCode;if(re==9){var ye=document.querySelector(".gbtn.focused");if(!ye){var xe=!(!document.activeElement||!document.activeElement.nodeName)&&document.activeElement.nodeName.toLocaleLowerCase();if(xe=="input"||xe=="textarea"||xe=="button")return}H.preventDefault();var Re=document.querySelectorAll(".gbtn[data-taborder]");if(!Re||Re.length<=0)return;if(!ye){var P=te();return void(P&&(P.focus(),f(P,"focused")))}var Q=te(ye.getAttribute("data-taborder"));h(ye,"focused"),Q&&(Q.focus(),f(Q,"focused"))}re==39&&F.nextSlide(),re==37&&F.prevSlide(),re==27&&F.close()}})}var ee=o(function F(H,J){var re=this,ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(i(this,F),this.img=H,this.slide=J,this.onclose=ye,this.img.setZoomEvents)return!1;this.active=!1,this.zoomedIn=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.img.addEventListener("mousedown",function(xe){return re.dragStart(xe)},!1),this.img.addEventListener("mouseup",function(xe){return re.dragEnd(xe)},!1),this.img.addEventListener("mousemove",function(xe){return re.drag(xe)},!1),this.img.addEventListener("click",function(xe){return re.slide.classList.contains("dragging-nav")?(re.zoomOut(),!1):re.zoomedIn?void(re.zoomedIn&&!re.dragging&&re.zoomOut()):re.zoomIn()},!1),this.img.setZoomEvents=!0},[{key:"zoomIn",value:function(){var F=this.widowWidth();if(!(this.zoomedIn||F<=768)){var H=this.img;if(H.setAttribute("data-style",H.getAttribute("style")),H.style.maxWidth=H.naturalWidth+"px",H.style.maxHeight=H.naturalHeight+"px",H.naturalWidth>F){var J=F/2-H.naturalWidth/2;this.setTranslate(this.img.parentNode,J,0)}this.slide.classList.add("zoomed"),this.zoomedIn=!0}}},{key:"zoomOut",value:function(){this.img.parentNode.setAttribute("style",""),this.img.setAttribute("style",this.img.getAttribute("data-style")),this.slide.classList.remove("zoomed"),this.zoomedIn=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.onclose&&typeof this.onclose=="function"&&this.onclose()}},{key:"dragStart",value:function(F){F.preventDefault(),this.zoomedIn?(F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset),F.target===this.img&&(this.active=!0,this.img.classList.add("dragging"))):this.active=!1}},{key:"dragEnd",value:function(F){var H=this;F.preventDefault(),this.initialX=this.currentX,this.initialY=this.currentY,this.active=!1,setTimeout(function(){H.dragging=!1,H.img.isDragging=!1,H.img.classList.remove("dragging")},100)}},{key:"drag",value:function(F){this.active&&(F.preventDefault(),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.img.isDragging=!0,this.dragging=!0,this.setTranslate(this.img,this.currentX,this.currentY))}},{key:"onMove",value:function(F){if(this.zoomedIn){var H=F.clientX-this.img.naturalWidth/2,J=F.clientY-this.img.naturalHeight/2;this.setTranslate(this.img,H,J)}}},{key:"setTranslate",value:function(F,H,J){F.style.transform="translate3d("+H+"px, "+J+"px, 0)"}},{key:"widowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}}]),z=o(function F(){var H=this,J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F);var re=J.dragEl,ye=J.toleranceX,xe=ye===void 0?40:ye,Re=J.toleranceY,P=Re===void 0?65:Re,Q=J.slide,se=Q===void 0?null:Q,ae=J.instance,ke=ae===void 0?null:ae;this.el=re,this.active=!1,this.dragging=!1,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.direction=null,this.lastDirection=null,this.toleranceX=xe,this.toleranceY=P,this.toleranceReached=!1,this.dragContainer=this.el,this.slide=se,this.instance=ke,this.el.addEventListener("mousedown",function(Ae){return H.dragStart(Ae)},!1),this.el.addEventListener("mouseup",function(Ae){return H.dragEnd(Ae)},!1),this.el.addEventListener("mousemove",function(Ae){return H.drag(Ae)},!1)},[{key:"dragStart",value:function(F){if(this.slide.classList.contains("zoomed"))this.active=!1;else{F.type==="touchstart"?(this.initialX=F.touches[0].clientX-this.xOffset,this.initialY=F.touches[0].clientY-this.yOffset):(this.initialX=F.clientX-this.xOffset,this.initialY=F.clientY-this.yOffset);var H=F.target.nodeName.toLowerCase();F.target.classList.contains("nodrag")||g(F.target,".nodrag")||["input","select","textarea","button","a"].indexOf(H)!==-1?this.active=!1:(F.preventDefault(),(F.target===this.el||H!=="img"&&g(F.target,".gslide-inline"))&&(this.active=!0,this.el.classList.add("dragging"),this.dragContainer=g(F.target,".ginner-container")))}}},{key:"dragEnd",value:function(F){var H=this;F&&F.preventDefault(),this.initialX=0,this.initialY=0,this.currentX=null,this.currentY=null,this.initialX=null,this.initialY=null,this.xOffset=0,this.yOffset=0,this.active=!1,this.doSlideChange&&(this.instance.preventOutsideClick=!0,this.doSlideChange=="right"&&this.instance.prevSlide(),this.doSlideChange=="left"&&this.instance.nextSlide()),this.doSlideClose&&this.instance.close(),this.toleranceReached||this.setTranslate(this.dragContainer,0,0,!0),setTimeout(function(){H.instance.preventOutsideClick=!1,H.toleranceReached=!1,H.lastDirection=null,H.dragging=!1,H.el.isDragging=!1,H.el.classList.remove("dragging"),H.slide.classList.remove("dragging-nav"),H.dragContainer.style.transform="",H.dragContainer.style.transition=""},100)}},{key:"drag",value:function(F){if(this.active){F.preventDefault(),this.slide.classList.add("dragging-nav"),F.type==="touchmove"?(this.currentX=F.touches[0].clientX-this.initialX,this.currentY=F.touches[0].clientY-this.initialY):(this.currentX=F.clientX-this.initialX,this.currentY=F.clientY-this.initialY),this.xOffset=this.currentX,this.yOffset=this.currentY,this.el.isDragging=!0,this.dragging=!0,this.doSlideChange=!1,this.doSlideClose=!1;var H=Math.abs(this.currentX),J=Math.abs(this.currentY);if(H>0&&H>=Math.abs(this.currentY)&&(!this.lastDirection||this.lastDirection=="x")){this.yOffset=0,this.lastDirection="x",this.setTranslate(this.dragContainer,this.currentX,0);var re=this.shouldChange();if(!this.instance.settings.dragAutoSnap&&re&&(this.doSlideChange=re),this.instance.settings.dragAutoSnap&&re)return this.instance.preventOutsideClick=!0,this.toleranceReached=!0,this.active=!1,this.instance.preventOutsideClick=!0,this.dragEnd(null),re=="right"&&this.instance.prevSlide(),void(re=="left"&&this.instance.nextSlide())}if(this.toleranceY>0&&J>0&&J>=H&&(!this.lastDirection||this.lastDirection=="y")){this.xOffset=0,this.lastDirection="y",this.setTranslate(this.dragContainer,0,this.currentY);var ye=this.shouldClose();return!this.instance.settings.dragAutoSnap&&ye&&(this.doSlideClose=!0),void(this.instance.settings.dragAutoSnap&&ye&&this.instance.close())}}}},{key:"shouldChange",value:function(){var F=!1;if(Math.abs(this.currentX)>=this.toleranceX){var H=this.currentX>0?"right":"left";(H=="left"&&this.slide!==this.slide.parentNode.lastChild||H=="right"&&this.slide!==this.slide.parentNode.firstChild)&&(F=H)}return F}},{key:"shouldClose",value:function(){var F=!1;return Math.abs(this.currentY)>=this.toleranceY&&(F=!0),F}},{key:"setTranslate",value:function(F,H,J){var re=arguments.length>3&&arguments[3]!==void 0&&arguments[3];F.style.transition=re?"all .2s ease":"",F.style.transform="translate3d(".concat(H,"px, ").concat(J,"px, 0)")}}]);function he(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=new Image,Re="gSlideTitle_"+J,P="gSlideDesc_"+J;xe.addEventListener("load",function(){O(re)&&re()},!1),xe.src=H.href,H.sizes!=""&&H.srcset!=""&&(xe.sizes=H.sizes,xe.srcset=H.srcset),xe.alt="",U(H.alt)||H.alt===""||(xe.alt=H.alt),H.title!==""&&xe.setAttribute("aria-labelledby",Re),H.description!==""&&xe.setAttribute("aria-describedby",P),H.hasOwnProperty("_hasCustomWidth")&&H._hasCustomWidth&&(xe.style.width=H.width),H.hasOwnProperty("_hasCustomHeight")&&H._hasCustomHeight&&(xe.style.height=H.height),ye.insertBefore(xe,ye.firstChild)}function fe(F,H,J,re){var ye=this,xe=F.querySelector(".ginner-container"),Re="gvideo"+J,P=F.querySelector(".gslide-media"),Q=this.getAllPlayers();f(xe,"gvideo-container"),P.insertBefore(E('<div class="gvideo-wrapper"></div>'),P.firstChild);var se=F.querySelector(".gvideo-wrapper");k(this.settings.plyr.css,"Plyr");var ae=H.href,ke=H==null?void 0:H.videoProvider,Ae=!1;P.style.maxWidth=H.width,k(this.settings.plyr.js,"Plyr",function(){if(!ke&&ae.match(/vimeo\.com\/([0-9]*)/)&&(ke="vimeo"),!ke&&(ae.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||ae.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||ae.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/))&&(ke="youtube"),ke==="local"||!ke){ke="local";var Ee='<video id="'+Re+'" ';Ee+='style="background:#000; max-width: '.concat(H.width,';" '),Ee+='preload="metadata" ',Ee+='x-webkit-airplay="allow" ',Ee+="playsinline ",Ee+="controls ",Ee+='class="gvideo-local">',Ee+='<source src="'.concat(ae,'">'),Ae=E(Ee+="</video>")}var De=Ae||E('<div id="'.concat(Re,'" data-plyr-provider="').concat(ke,'" data-plyr-embed-id="').concat(ae,'"></div>'));f(se,"".concat(ke,"-video gvideo")),se.appendChild(De),se.setAttribute("data-id",Re),se.setAttribute("data-index",J);var Oe=q(ye.settings.plyr,"config")?ye.settings.plyr.config:{},We=new Plyr("#"+Re,Oe);We.on("ready",function(tt){Q[Re]=tt.detail.plyr,O(re)&&re()}),D(function(){return F.querySelector("iframe")&&F.querySelector("iframe").dataset.ready=="true"},function(){ye.resize(F)}),We.on("enterfullscreen",ze),We.on("exitfullscreen",ze)})}function ze(F){var H=g(F.target,".gslide-media");F.type==="enterfullscreen"&&f(H,"fullscreen"),F.type==="exitfullscreen"&&h(H,"fullscreen")}function He(F,H,J,re){var ye,xe=this,Re=F.querySelector(".gslide-media"),P=!(!q(H,"href")||!H.href)&&H.href.split("#").pop().trim(),Q=!(!q(H,"content")||!H.content)&&H.content;if(Q&&(B(Q)&&(ye=E('<div class="ginlined-content">'.concat(Q,"</div>"))),K(Q))){Q.style.display=="none"&&(Q.style.display="block");var se=document.createElement("div");se.className="ginlined-content",se.appendChild(Q),ye=se}if(P){var ae=document.getElementById(P);if(!ae)return!1;var ke=ae.cloneNode(!0);ke.style.height=H.height,ke.style.maxWidth=H.width,f(ke,"ginlined-content"),ye=ke}if(!ye)return console.error("Unable to append inline slide content",H),!1;Re.style.height=H.height,Re.style.width=H.width,Re.appendChild(ye),this.events["inlineclose"+P]=c("click",{onElement:Re.querySelectorAll(".gtrigger-close"),withCallback:function(Ae){Ae.preventDefault(),xe.close()}}),O(re)&&re()}function je(F,H,J,re){var ye=F.querySelector(".gslide-media"),xe=function(Re){var P=Re.url,Q=Re.allow,se=Re.callback,ae=Re.appendTo,ke=document.createElement("iframe");return ke.className="vimeo-video gvideo",ke.src=P,ke.style.width="100%",ke.style.height="100%",Q&&ke.setAttribute("allow",Q),ke.onload=function(){ke.onload=null,f(ke,"node-ready"),O(se)&&se()},ae&&ae.appendChild(ke),ke}({url:H.href,callback:re});ye.parentNode.style.maxWidth=H.width,ye.parentNode.style.height=H.height,ye.appendChild(xe)}var we=o(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.defaults={href:"",sizes:"",srcset:"",title:"",type:"",videoProvider:"",description:"",alt:"",descPosition:"bottom",effect:"",width:"",height:"",content:!1,zoomable:!0,draggable:!0},$(H)&&(this.defaults=l(this.defaults,H))},[{key:"sourceType",value:function(F){var H=F;return(F=F.toLowerCase()).match(/\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/)!==null?"image":F.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||F.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/embed\/([a-zA-Z0-9\-_]+)/)||F.match(/(youtube\.com|youtube-nocookie\.com)\/shorts\/([a-zA-Z0-9\-_]+)/)||F.match(/vimeo\.com\/([0-9]*)/)||F.match(/\.(mp4|ogg|webm|mov)/)!==null?"video":F.match(/\.(mp3|wav|wma|aac|ogg)/)!==null?"audio":F.indexOf("#")>-1&&H.split("#").pop().trim()!==""?"inline":F.indexOf("goajax=true")>-1?"ajax":"external"}},{key:"parseConfig",value:function(F,H){var J=this,re=l({descPosition:H.descPosition},this.defaults);if($(F)&&!K(F)){q(F,"type")||(q(F,"content")&&F.content?F.type="inline":q(F,"href")&&(F.type=this.sourceType(F.href)));var ye=l(re,F);return this.setSize(ye,H),ye}var xe="",Re=F.getAttribute("data-glightbox"),P=F.nodeName.toLowerCase();if(P==="a"&&(xe=F.href),P==="img"&&(xe=F.src,re.alt=F.alt),re.href=xe,u(re,function(Ee,De){q(H,De)&&De!=="width"&&(re[De]=H[De]);var Oe=F.dataset[De];U(Oe)||(re[De]=J.sanitizeValue(Oe))}),re.content&&(re.type="inline"),!re.type&&xe&&(re.type=this.sourceType(xe)),U(Re)){if(!re.title&&P=="a"){var Q=F.title;U(Q)||Q===""||(re.title=Q)}if(!re.title&&P=="img"){var se=F.alt;U(se)||se===""||(re.title=se)}}else{var ae=[];u(re,function(Ee,De){ae.push(";\\s?"+De)}),ae=ae.join("\\s?:|"),Re.trim()!==""&&u(re,function(Ee,De){var Oe=Re,We=new RegExp("s?"+De+"s?:s?(.*?)("+ae+"s?:|$)"),tt=Oe.match(We);if(tt&&tt.length&&tt[1]){var ft=tt[1].trim().replace(/;\s*$/,"");re[De]=J.sanitizeValue(ft)}})}if(re.description&&re.description.substring(0,1)==="."){var ke;try{ke=document.querySelector(re.description).innerHTML}catch(Ee){if(!(Ee instanceof DOMException))throw Ee}ke&&(re.description=ke)}if(!re.description){var Ae=F.querySelector(".glightbox-desc");Ae&&(re.description=Ae.innerHTML)}return this.setSize(re,H,F),this.slideConfig=re,re}},{key:"setSize",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,re=F.type=="video"?this.checkSize(H.videosWidth):this.checkSize(H.width),ye=this.checkSize(H.height);return F.width=q(F,"width")&&F.width!==""?this.checkSize(F.width):re,F.height=q(F,"height")&&F.height!==""?this.checkSize(F.height):ye,J&&F.type=="image"&&(F._hasCustomWidth=!!J.dataset.width,F._hasCustomHeight=!!J.dataset.height),F}},{key:"checkSize",value:function(F){return X(F)?"".concat(F,"px"):F}},{key:"sanitizeValue",value:function(F){return F!=="true"&&F!=="false"?F:F==="true"}}]),$e=o(function F(H,J,re){i(this,F),this.element=H,this.instance=J,this.index=re},[{key:"setContent",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(p(H,"loaded"))return!1;var re=this.instance.settings,ye=this.slideConfig,xe=R();O(re.beforeSlideLoad)&&re.beforeSlideLoad({index:this.index,slide:H,player:!1});var Re=ye.type,P=ye.descPosition,Q=H.querySelector(".gslide-media"),se=H.querySelector(".gslide-title"),ae=H.querySelector(".gslide-desc"),ke=H.querySelector(".gdesc-inner"),Ae=J,Ee="gSlideTitle_"+this.index,De="gSlideDesc_"+this.index;if(O(re.afterSlideLoad)&&(Ae=function(){O(J)&&J(),re.afterSlideLoad({index:F.index,slide:H,player:F.instance.getSlidePlayerInstance(F.index)})}),ye.title==""&&ye.description==""?ke&&ke.parentNode.parentNode.removeChild(ke.parentNode):(se&&ye.title!==""?(se.id=Ee,se.innerHTML=ye.title):se.parentNode.removeChild(se),ae&&ye.description!==""?(ae.id=De,xe&&re.moreLength>0?(ye.smallDescription=this.slideShortDesc(ye.description,re.moreLength,re.moreText),ae.innerHTML=ye.smallDescription,this.descriptionEvents(ae,ye)):ae.innerHTML=ye.description):ae.parentNode.removeChild(ae),f(Q.parentNode,"desc-".concat(P)),f(ke.parentNode,"description-".concat(P))),f(Q,"gslide-".concat(Re)),f(H,"loaded"),Re!=="video"){if(Re!=="external")return Re==="inline"?(He.apply(this.instance,[H,ye,this.index,Ae]),void(ye.draggable&&new z({dragEl:H.querySelector(".gslide-inline"),toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:this.instance}))):void(Re!=="image"?O(Ae)&&Ae():he(H,ye,this.index,function(){var Oe=H.querySelector("img");ye.draggable&&new z({dragEl:Oe,toleranceX:re.dragToleranceX,toleranceY:re.dragToleranceY,slide:H,instance:F.instance}),ye.zoomable&&Oe.naturalWidth>Oe.offsetWidth&&(f(Oe,"zoomable"),new ee(Oe,H,function(){F.instance.resize()})),O(Ae)&&Ae()}));je.apply(this,[H,ye,this.index,Ae])}else fe.apply(this.instance,[H,ye,this.index,Ae])}},{key:"slideShortDesc",value:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,J=arguments.length>2&&arguments[2]!==void 0&&arguments[2],re=document.createElement("div");re.innerHTML=F;var ye=re.innerText,xe=J;if((F=ye.trim()).length<=H)return F;var Re=F.substr(0,H-1);return xe?(re=null,Re+'... <a href="#" class="desc-more">'+J+"</a>"):Re}},{key:"descriptionEvents",value:function(F,H){var J=this,re=F.querySelector(".desc-more");if(!re)return!1;c("click",{onElement:re,withCallback:function(ye,xe){ye.preventDefault();var Re=document.body,P=g(xe,".gslide-desc");if(!P)return!1;P.innerHTML=H.description,f(Re,"gdesc-open");var Q=c("click",{onElement:[Re,g(P,".gslide-description")],withCallback:function(se,ae){se.target.nodeName.toLowerCase()!=="a"&&(h(Re,"gdesc-open"),f(Re,"gdesc-closed"),P.innerHTML=H.smallDescription,J.descriptionEvents(P,H),setTimeout(function(){h(Re,"gdesc-closed")},400),Q.destroy())}})}})}},{key:"create",value:function(){return E(this.instance.settings.slideHTML)}},{key:"getConfig",value:function(){K(this.element)||this.element.hasOwnProperty("draggable")||(this.element.draggable=this.instance.settings.draggable);var F=new we(this.instance.settings.slideExtraAttributes);return this.slideConfig=F.parseConfig(this.element,this.instance.settings),this.slideConfig}}]);function qe(F){return Math.sqrt(F.x*F.x+F.y*F.y)}function Pe(F,H){var J=function(re,ye){var xe=qe(re)*qe(ye);if(xe===0)return 0;var Re=function(P,Q){return P.x*Q.x+P.y*Q.y}(re,ye)/xe;return Re>1&&(Re=1),Math.acos(Re)}(F,H);return function(re,ye){return re.x*ye.y-ye.x*re.y}(F,H)>0&&(J*=-1),180*J/Math.PI}var St=o(function F(H){i(this,F),this.handlers=[],this.el=H},[{key:"add",value:function(F){this.handlers.push(F)}},{key:"del",value:function(F){F||(this.handlers=[]);for(var H=this.handlers.length;H>=0;H--)this.handlers[H]===F&&this.handlers.splice(H,1)}},{key:"dispatch",value:function(){for(var F=0,H=this.handlers.length;F<H;F++){var J=this.handlers[F];typeof J=="function"&&J.apply(this.el,arguments)}}}]);function ht(F,H){var J=new St(F);return J.add(H),J}var nn=o(function F(H,J){i(this,F),this.element=typeof H=="string"?document.querySelector(H):H,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var re=function(){};this.rotate=ht(this.element,J.rotate||re),this.touchStart=ht(this.element,J.touchStart||re),this.multipointStart=ht(this.element,J.multipointStart||re),this.multipointEnd=ht(this.element,J.multipointEnd||re),this.pinch=ht(this.element,J.pinch||re),this.swipe=ht(this.element,J.swipe||re),this.tap=ht(this.element,J.tap||re),this.doubleTap=ht(this.element,J.doubleTap||re),this.longTap=ht(this.element,J.longTap||re),this.singleTap=ht(this.element,J.singleTap||re),this.pressMove=ht(this.element,J.pressMove||re),this.twoFingerPressMove=ht(this.element,J.twoFingerPressMove||re),this.touchMove=ht(this.element,J.touchMove||re),this.touchEnd=ht(this.element,J.touchEnd||re),this.touchCancel=ht(this.element,J.touchCancel||re),this.translateContainer=this.element,this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}},[{key:"start",value:function(F){if(F.touches)if(F.target&&F.target.nodeName&&["a","button","input"].indexOf(F.target.nodeName.toLowerCase())>=0)console.log("ignore drag for this touched element",F.target.nodeName.toLowerCase());else{this.now=Date.now(),this.x1=F.touches[0].pageX,this.y1=F.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(F,this.element),this.preTapPosition.x!==null&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var H=this.preV;if(F.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var J={x:F.touches[1].pageX-this.x1,y:F.touches[1].pageY-this.y1};H.x=J.x,H.y=J.y,this.pinchStartLen=qe(H),this.multipointStart.dispatch(F,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout((function(){this.longTap.dispatch(F,this.element),this._preventTap=!0}).bind(this),750)}}},{key:"move",value:function(F){if(F.touches){var H=this.preV,J=F.touches.length,re=F.touches[0].pageX,ye=F.touches[0].pageY;if(this.isDoubleTap=!1,J>1){var xe=F.touches[1].pageX,Re=F.touches[1].pageY,P={x:F.touches[1].pageX-re,y:F.touches[1].pageY-ye};H.x!==null&&(this.pinchStartLen>0&&(F.zoom=qe(P)/this.pinchStartLen,this.pinch.dispatch(F,this.element)),F.angle=Pe(P,H),this.rotate.dispatch(F,this.element)),H.x=P.x,H.y=P.y,this.x2!==null&&this.sx2!==null?(F.deltaX=(re-this.x2+xe-this.sx2)/2,F.deltaY=(ye-this.y2+Re-this.sy2)/2):(F.deltaX=0,F.deltaY=0),this.twoFingerPressMove.dispatch(F,this.element),this.sx2=xe,this.sy2=Re}else{if(this.x2!==null){F.deltaX=re-this.x2,F.deltaY=ye-this.y2;var Q=Math.abs(this.x1-this.x2),se=Math.abs(this.y1-this.y2);(Q>10||se>10)&&(this._preventTap=!0)}else F.deltaX=0,F.deltaY=0;this.pressMove.dispatch(F,this.element)}this.touchMove.dispatch(F,this.element),this._cancelLongTap(),this.x2=re,this.y2=ye,J>1&&F.preventDefault()}}},{key:"end",value:function(F){if(F.changedTouches){this._cancelLongTap();var H=this;F.touches.length<2&&(this.multipointEnd.dispatch(F,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(F.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout(function(){H.swipe.dispatch(F,H.element)},0)):(this.tapTimeout=setTimeout(function(){H._preventTap||H.tap.dispatch(F,H.element),H.isDoubleTap&&(H.doubleTap.dispatch(F,H.element),H.isDoubleTap=!1)},0),H.isDoubleTap||(H.singleTapTimeout=setTimeout(function(){H.singleTap.dispatch(F,H.element)},250))),this.touchEnd.dispatch(F,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}}},{key:"cancelAll",value:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"cancel",value:function(F){this.cancelAll(),this.touchCancel.dispatch(F,this.element)}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(F,H,J,re){return Math.abs(F-H)>=Math.abs(J-re)?F-H>0?"Left":"Right":J-re>0?"Up":"Down"}},{key:"on",value:function(F,H){this[F]&&this[F].add(H)}},{key:"off",value:function(F,H){this[F]&&this[F].del(H)}},{key:"destroy",value:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}}]);function Vt(F){var H=function(){var Re,P=document.createElement("fakeelement"),Q={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(Re in Q)if(P.style[Re]!==void 0)return Q[Re]}(),J=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,re=p(F,"gslide-media")?F:F.querySelector(".gslide-media"),ye=g(re,".ginner-container"),xe=F.querySelector(".gslide-description");J>769&&(re=ye),f(re,"greset"),y(re,"translate3d(0, 0, 0)"),c(H,{onElement:re,once:!0,withCallback:function(Re,P){h(re,"greset")}}),re.style.opacity="",xe&&(xe.style.opacity="")}function Mn(F){if(F.events.hasOwnProperty("touch"))return!1;var H,J,re,ye=S(),xe=ye.width,Re=ye.height,P=!1,Q=null,se=null,ae=null,ke=!1,Ae=1,Ee=1,De=!1,Oe=!1,We=null,tt=null,ft=null,Kt=null,xt=0,Qt=0,rn=!1,sn=!1,on={},Tn={},Cr=0,Qi=0,hs=document.getElementById("glightbox-slider"),Vi=document.querySelector(".goverlay"),zo=new nn(hs,{touchStart:function(Hn){if(P=!0,(p(Hn.targetTouches[0].target,"ginner-container")||g(Hn.targetTouches[0].target,".gslide-desc")||Hn.targetTouches[0].target.nodeName.toLowerCase()=="a")&&(P=!1),g(Hn.targetTouches[0].target,".gslide-inline")&&!p(Hn.targetTouches[0].target.parentNode,"gslide-inline")&&(P=!1),P){if(Tn=Hn.targetTouches[0],on.pageX=Hn.targetTouches[0].pageX,on.pageY=Hn.targetTouches[0].pageY,Cr=Hn.targetTouches[0].clientX,Qi=Hn.targetTouches[0].clientY,Q=F.activeSlide,se=Q.querySelector(".gslide-media"),re=Q.querySelector(".gslide-inline"),ae=null,p(se,"gslide-image")&&(ae=se.querySelector("img")),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>769&&(se=Q.querySelector(".ginner-container")),h(Vi,"greset"),Hn.pageX>20&&Hn.pageX<window.innerWidth-20)return;Hn.preventDefault()}},touchMove:function(Hn){if(P&&(Tn=Hn.targetTouches[0],!De&&!Oe)){if(re&&re.offsetHeight>Re){var Ir=on.pageX-Tn.pageX;if(Math.abs(Ir)<=13)return!1}ke=!0;var Rr,mn=Hn.targetTouches[0].clientX,Kr=Hn.targetTouches[0].clientY,or=Cr-mn,zi=Qi-Kr;if(Math.abs(or)>Math.abs(zi)?(rn=!1,sn=!0):(sn=!1,rn=!0),H=Tn.pageX-on.pageX,xt=100*H/xe,J=Tn.pageY-on.pageY,Qt=100*J/Re,rn&&ae&&(Rr=1-Math.abs(J)/Re,Vi.style.opacity=Rr,F.settings.touchFollowAxis&&(xt=0)),sn&&(Rr=1-Math.abs(H)/xe,se.style.opacity=Rr,F.settings.touchFollowAxis&&(Qt=0)),!ae)return y(se,"translate3d(".concat(xt,"%, 0, 0)"));y(se,"translate3d(".concat(xt,"%, ").concat(Qt,"%, 0)"))}},touchEnd:function(){if(P){if(ke=!1,Oe||De)return ft=We,void(Kt=tt);var Hn=Math.abs(parseInt(Qt)),Ir=Math.abs(parseInt(xt));if(!(Hn>29&&ae))return Hn<29&&Ir<25?(f(Vi,"greset"),Vi.style.opacity=1,Vt(se)):void 0;F.close()}},multipointEnd:function(){setTimeout(function(){De=!1},50)},multipointStart:function(){De=!0,Ae=Ee||1},pinch:function(Hn){if(!ae||ke)return!1;De=!0,ae.scaleX=ae.scaleY=Ae*Hn.zoom;var Ir=Ae*Hn.zoom;if(Oe=!0,Ir<=1)return Oe=!1,Ir=1,Kt=null,ft=null,We=null,tt=null,void ae.setAttribute("style","");Ir>4.5&&(Ir=4.5),ae.style.transform="scale3d(".concat(Ir,", ").concat(Ir,", 1)"),Ee=Ir},pressMove:function(Hn){if(Oe&&!De){var Ir=Tn.pageX-on.pageX,Rr=Tn.pageY-on.pageY;ft&&(Ir+=ft),Kt&&(Rr+=Kt),We=Ir,tt=Rr;var mn="translate3d(".concat(Ir,"px, ").concat(Rr,"px, 0)");Ee&&(mn+=" scale3d(".concat(Ee,", ").concat(Ee,", 1)")),y(ae,mn)}},swipe:function(Hn){if(!Oe)if(De)De=!1;else{if(Hn.direction=="Left"){if(F.index==F.elements.length-1)return Vt(se);F.nextSlide()}if(Hn.direction=="Right"){if(F.index==0)return Vt(se);F.prevSlide()}}}});F.events.touch=zo}var Ze=R(),pe=R()!==null||document.createTouch!==void 0||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,ie=document.getElementsByTagName("html")[0],oe={selector:".glightbox",elements:null,skin:"clean",theme:"clean",closeButton:!0,startAt:null,autoplayVideos:!0,autofocusVideos:!0,descPosition:"bottom",width:"900px",height:"506px",videosWidth:"960px",beforeSlideChange:null,afterSlideChange:null,beforeSlideLoad:null,afterSlideLoad:null,slideInserted:null,slideRemoved:null,slideExtraAttributes:null,onOpen:null,onClose:null,loop:!1,zoomable:!0,draggable:!0,dragAutoSnap:!1,dragToleranceX:40,dragToleranceY:65,preload:!0,oneSlidePerOpen:!1,touchNavigation:!0,touchFollowAxis:!0,keyboardNavigation:!0,closeOnOutsideClick:!0,plugins:!1,plyr:{css:"https://cdn.plyr.io/3.6.12/plyr.css",js:"https://cdn.plyr.io/3.6.12/plyr.js",config:{ratio:"16:9",fullscreen:{enabled:!0,iosNative:!0},youtube:{noCookie:!0,rel:0,showinfo:0,iv_load_policy:3},vimeo:{byline:!1,portrait:!1,title:!1,transparent:!1}}},openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide",moreText:"See more",moreLength:60,cssEfects:{fade:{in:"fadeIn",out:"fadeOut"},zoom:{in:"zoomIn",out:"zoomOut"},slide:{in:"slideInRight",out:"slideOutLeft"},slideBack:{in:"slideInLeft",out:"slideOutRight"},none:{in:"none",out:"none"}},svg:{close:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>',next:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>',prev:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>'},slideHTML:`<div class="gslide">
    <div class="gslide-inner-content">
        <div class="ginner-container">
            <div class="gslide-media">
            </div>
            <div class="gslide-description">
                <div class="gdesc-inner">
                    <h4 class="gslide-title"></h4>
                    <div class="gslide-desc"></div>
                </div>
            </div>
        </div>
    </div>
</div>`,lightboxHTML:`<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="gloader visible"></div>
    <div class="goverlay"></div>
    <div class="gcontainer">
    <div id="glightbox-slider" class="gslider"></div>
    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>
    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>
    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>
</div>
</div>`},ve=o(function F(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(this,F),this.customOptions=H,this.settings=l(oe,H),this.effectsClasses=this.getAnimationClasses(),this.videoPlayers={},this.apiEvents=[],this.fullElementsList=!1},[{key:"init",value:function(){var F=this,H=this.getSelector();H&&(this.baseEvents=c("click",{onElement:H,withCallback:function(J,re){J.preventDefault(),F.open(re)}})),this.elements=this.getElements()}},{key:"open",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.elements.length===0)return!1;this.activeSlide=null,this.prevActiveSlideIndex=null,this.prevActiveSlide=null;var J=X(H)?H:this.settings.startAt;if(K(F)){var re=F.getAttribute("data-gallery");re&&(this.fullElementsList=this.elements,this.elements=this.getGalleryElements(this.elements,re)),U(J)&&(J=this.getElementIndex(F))<0&&(J=0)}X(J)||(J=0),this.build(),b(this.overlay,this.settings.openEffect==="none"?"none":this.settings.cssEfects.fade.in);var ye=document.body,xe=window.innerWidth-document.documentElement.clientWidth;if(xe>0){var Re=document.createElement("style");Re.type="text/css",Re.className="gcss-styles",Re.innerText=".gscrollbar-fixer {margin-right: ".concat(xe,"px}"),document.head.appendChild(Re),f(ye,"gscrollbar-fixer")}f(ye,"glightbox-open"),f(ie,"glightbox-open"),Ze&&(f(document.body,"glightbox-mobile"),this.settings.slideEffect="slide"),this.showSlide(J,!0),this.elements.length===1?(f(this.prevButton,"glightbox-button-hidden"),f(this.nextButton,"glightbox-button-hidden")):(h(this.prevButton,"glightbox-button-hidden"),h(this.nextButton,"glightbox-button-hidden")),this.lightboxOpen=!0,this.trigger("open"),O(this.settings.onOpen)&&this.settings.onOpen(),pe&&this.settings.touchNavigation&&Mn(this),this.settings.keyboardNavigation&&le(this)}},{key:"openAt",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.open(null,F)}},{key:"showSlide",value:function(){var F=this,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,J=arguments.length>1&&arguments[1]!==void 0&&arguments[1];v(this.loader),this.index=parseInt(H);var re=this.slidesContainer.querySelector(".current");re&&h(re,"current"),this.slideAnimateOut();var ye=this.slidesContainer.querySelectorAll(".gslide")[H];if(p(ye,"loaded"))this.slideAnimateIn(ye,J),w(this.loader);else{v(this.loader);var xe=this.elements[H],Re={index:this.index,slide:ye,slideNode:ye,slideConfig:xe.slideConfig,slideIndex:this.index,trigger:xe.node,player:null};this.trigger("slide_before_load",Re),xe.instance.setContent(ye,function(){w(F.loader),F.resize(),F.slideAnimateIn(ye,J),F.trigger("slide_after_load",Re)})}this.slideDescription=ye.querySelector(".gslide-description"),this.slideDescriptionContained=this.slideDescription&&p(this.slideDescription.parentNode,"gslide-media"),this.settings.preload&&(this.preloadSlide(H+1),this.preloadSlide(H-1)),this.updateNavigationClasses(),this.activeSlide=ye}},{key:"preloadSlide",value:function(F){var H=this;if(F<0||F>this.elements.length-1||U(this.elements[F]))return!1;var J=this.slidesContainer.querySelectorAll(".gslide")[F];if(p(J,"loaded"))return!1;var re=this.elements[F],ye=re.type,xe={index:F,slide:J,slideNode:J,slideConfig:re.slideConfig,slideIndex:F,trigger:re.node,player:null};this.trigger("slide_before_load",xe),ye==="video"||ye==="external"?setTimeout(function(){re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})},200):re.instance.setContent(J,function(){H.trigger("slide_after_load",xe)})}},{key:"prevSlide",value:function(){this.goToSlide(this.index-1)}},{key:"nextSlide",value:function(){this.goToSlide(this.index+1)}},{key:"goToSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.prevActiveSlide=this.activeSlide,this.prevActiveSlideIndex=this.index,!this.loop()&&(F<0||F>this.elements.length-1))return!1;F<0?F=this.elements.length-1:F>=this.elements.length&&(F=0),this.showSlide(F)}},{key:"insertSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;H<0&&(H=this.elements.length);var J=new $e(F,this,H),re=J.getConfig(),ye=l({},re),xe=J.create(),Re=this.elements.length-1;ye.index=H,ye.node=!1,ye.instance=J,ye.slideConfig=re,this.elements.splice(H,0,ye);var P=null,Q=null;if(this.slidesContainer){if(H>Re)this.slidesContainer.appendChild(xe);else{var se=this.slidesContainer.querySelectorAll(".gslide")[H];this.slidesContainer.insertBefore(xe,se)}(this.settings.preload&&this.index==0&&H==0||this.index-1==H||this.index+1==H)&&this.preloadSlide(H),this.index===0&&H===0&&(this.index=1),this.updateNavigationClasses(),P=this.slidesContainer.querySelectorAll(".gslide")[H],Q=this.getSlidePlayerInstance(H),ye.slideNode=P}this.trigger("slide_inserted",{index:H,slide:P,slideNode:P,slideConfig:re,slideIndex:H,trigger:null,player:Q}),O(this.settings.slideInserted)&&this.settings.slideInserted({index:H,slide:P,player:Q})}},{key:"removeSlide",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;if(F<0||F>this.elements.length-1)return!1;var H=this.slidesContainer&&this.slidesContainer.querySelectorAll(".gslide")[F];H&&(this.getActiveSlideIndex()==F&&(F==this.elements.length-1?this.prevSlide():this.nextSlide()),H.parentNode.removeChild(H)),this.elements.splice(F,1),this.trigger("slide_removed",F),O(this.settings.slideRemoved)&&this.settings.slideRemoved(F)}},{key:"slideAnimateIn",value:function(F,H){var J=this,re=F.querySelector(".gslide-media"),ye=F.querySelector(".gslide-description"),xe={index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlide,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},Re={index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideConfig:this.elements[this.index].slideConfig,slideIndex:this.index,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)};if(re.offsetWidth>0&&ye&&(w(ye),ye.style.display=""),h(F,this.effectsClasses),H)b(F,this.settings.cssEfects[this.settings.openEffect].in,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])});else{var P=this.settings.slideEffect,Q=P!=="none"?this.settings.cssEfects[P].in:P;this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(Q=this.settings.cssEfects.slideBack.in),b(F,Q,function(){J.settings.autoplayVideos&&J.slidePlayerPlay(F),J.trigger("slide_changed",{prev:xe,current:Re}),O(J.settings.afterSlideChange)&&J.settings.afterSlideChange.apply(J,[xe,Re])})}setTimeout(function(){J.resize(F)},100),f(F,"current")}},{key:"slideAnimateOut",value:function(){if(!this.prevActiveSlide)return!1;var F=this.prevActiveSlide;h(F,this.effectsClasses),f(F,"prev");var H=this.settings.slideEffect,J=H!=="none"?this.settings.cssEfects[H].out:H;this.slidePlayerPause(F),this.trigger("slide_before_change",{prev:{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,slideNode:this.prevActiveSlide,slideIndex:this.prevActiveSlideIndex,slideConfig:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].slideConfig,trigger:U(this.prevActiveSlideIndex)?null:this.elements[this.prevActiveSlideIndex].node,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},current:{index:this.index,slide:this.activeSlide,slideNode:this.activeSlide,slideIndex:this.index,slideConfig:this.elements[this.index].slideConfig,trigger:this.elements[this.index].node,player:this.getSlidePlayerInstance(this.index)}}),O(this.settings.beforeSlideChange)&&this.settings.beforeSlideChange.apply(this,[{index:this.prevActiveSlideIndex,slide:this.prevActiveSlide,player:this.getSlidePlayerInstance(this.prevActiveSlideIndex)},{index:this.index,slide:this.activeSlide,player:this.getSlidePlayerInstance(this.index)}]),this.prevActiveSlideIndex>this.index&&this.settings.slideEffect=="slide"&&(J=this.settings.cssEfects.slideBack.out),b(F,J,function(){var re=F.querySelector(".ginner-container"),ye=F.querySelector(".gslide-media"),xe=F.querySelector(".gslide-description");re.style.transform="",ye.style.transform="",h(ye,"greset"),ye.style.opacity="",xe&&(xe.style.opacity=""),h(F,"prev")})}},{key:"getAllPlayers",value:function(){return this.videoPlayers}},{key:"getSlidePlayerInstance",value:function(F){var H="gvideo"+F,J=this.getAllPlayers();return!(!q(J,H)||!J[H])&&J[H]}},{key:"stopSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("stopSlideVideo is deprecated, use slidePlayerPause");var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"slidePlayerPause",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}var J=this.getSlidePlayerInstance(F);J&&J.playing&&J.pause()}},{key:"playSlideVideo",value:function(F){if(K(F)){var H=F.querySelector(".gvideo-wrapper");H&&(F=H.getAttribute("data-index"))}console.log("playSlideVideo is deprecated, use slidePlayerPlay");var J=this.getSlidePlayerInstance(F);J&&!J.playing&&J.play()}},{key:"slidePlayerPlay",value:function(F){var H;if(!Ze||(H=this.settings.plyr.config)!==null&&H!==void 0&&H.muted){if(K(F)){var J=F.querySelector(".gvideo-wrapper");J&&(F=J.getAttribute("data-index"))}var re=this.getSlidePlayerInstance(F);re&&!re.playing&&(re.play(),this.settings.autofocusVideos&&re.elements.container.focus())}}},{key:"setElements",value:function(F){var H=this;this.settings.elements=!1;var J=[];F&&F.length&&u(F,function(re,ye){var xe=new $e(re,H,ye),Re=xe.getConfig(),P=l({},Re);P.slideConfig=Re,P.instance=xe,P.index=ye,J.push(P)}),this.elements=J,this.lightboxOpen&&(this.slidesContainer.innerHTML="",this.elements.length&&(u(this.elements,function(){var re=E(H.settings.slideHTML);H.slidesContainer.appendChild(re)}),this.showSlide(0,!0)))}},{key:"getElementIndex",value:function(F){var H=!1;return u(this.elements,function(J,re){if(q(J,"node")&&J.node==F)return H=re,!0}),H}},{key:"getElements",value:function(){var F=this,H=[];this.elements=this.elements?this.elements:[],!U(this.settings.elements)&&L(this.settings.elements)&&this.settings.elements.length&&u(this.settings.elements,function(re,ye){var xe=new $e(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=!1,P.index=ye,P.instance=xe,P.slideConfig=Re,H.push(P)});var J=!1;return this.getSelector()&&(J=document.querySelectorAll(this.getSelector())),J&&u(J,function(re,ye){var xe=new $e(re,F,ye),Re=xe.getConfig(),P=l({},Re);P.node=re,P.index=ye,P.instance=xe,P.slideConfig=Re,P.gallery=re.getAttribute("data-gallery"),H.push(P)}),H}},{key:"getGalleryElements",value:function(F,H){return F.filter(function(J){return J.gallery==H})}},{key:"getSelector",value:function(){return!this.settings.elements&&(this.settings.selector&&this.settings.selector.substring(0,5)=="data-"?"*[".concat(this.settings.selector,"]"):this.settings.selector)}},{key:"getActiveSlide",value:function(){return this.slidesContainer.querySelectorAll(".gslide")[this.index]}},{key:"getActiveSlideIndex",value:function(){return this.index}},{key:"getAnimationClasses",value:function(){var F=[];for(var H in this.settings.cssEfects)if(this.settings.cssEfects.hasOwnProperty(H)){var J=this.settings.cssEfects[H];F.push("g".concat(J.in)),F.push("g".concat(J.out))}return F.join(" ")}},{key:"build",value:function(){var F=this;if(this.built)return!1;var H=document.body.childNodes,J=[];u(H,function(se){se.parentNode==document.body&&se.nodeName.charAt(0)!=="#"&&se.hasAttribute&&!se.hasAttribute("aria-hidden")&&(J.push(se),se.setAttribute("aria-hidden","true"))});var re=q(this.settings.svg,"next")?this.settings.svg.next:"",ye=q(this.settings.svg,"prev")?this.settings.svg.prev:"",xe=q(this.settings.svg,"close")?this.settings.svg.close:"",Re=this.settings.lightboxHTML;Re=E(Re=(Re=(Re=Re.replace(/{nextSVG}/g,re)).replace(/{prevSVG}/g,ye)).replace(/{closeSVG}/g,xe)),document.body.appendChild(Re);var P=document.getElementById("glightbox-body");this.modal=P;var Q=P.querySelector(".gclose");this.prevButton=P.querySelector(".gprev"),this.nextButton=P.querySelector(".gnext"),this.overlay=P.querySelector(".goverlay"),this.loader=P.querySelector(".gloader"),this.slidesContainer=document.getElementById("glightbox-slider"),this.bodyHiddenChildElms=J,this.events={},f(this.modal,"glightbox-"+this.settings.skin),this.settings.closeButton&&Q&&(this.events.close=c("click",{onElement:Q,withCallback:function(se,ae){se.preventDefault(),F.close()}})),Q&&!this.settings.closeButton&&Q.parentNode.removeChild(Q),this.nextButton&&(this.events.next=c("click",{onElement:this.nextButton,withCallback:function(se,ae){se.preventDefault(),F.nextSlide()}})),this.prevButton&&(this.events.prev=c("click",{onElement:this.prevButton,withCallback:function(se,ae){se.preventDefault(),F.prevSlide()}})),this.settings.closeOnOutsideClick&&(this.events.outClose=c("click",{onElement:P,withCallback:function(se,ae){F.preventOutsideClick||p(document.body,"glightbox-mobile")||g(se.target,".ginner-container")||g(se.target,".gbtn")||p(se.target,"gnext")||p(se.target,"gprev")||F.close()}})),u(this.elements,function(se,ae){F.slidesContainer.appendChild(se.instance.create()),se.slideNode=F.slidesContainer.querySelectorAll(".gslide")[ae]}),pe&&f(document.body,"glightbox-touch"),this.events.resize=c("resize",{onElement:window,withCallback:function(){F.resize()}}),this.built=!0}},{key:"resize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if((F=F||this.activeSlide)&&!p(F,"zoomed")){var H=S(),J=F.querySelector(".gvideo-wrapper"),re=F.querySelector(".gslide-image"),ye=this.slideDescription,xe=H.width,Re=H.height;if(xe<=768?f(document.body,"glightbox-mobile"):h(document.body,"glightbox-mobile"),J||re){var P=!1;if(ye&&(p(ye,"description-bottom")||p(ye,"description-top"))&&!p(ye,"gabsolute")&&(P=!0),re){if(xe<=768)re.querySelector("img");else if(P){var Q,se=ye.offsetHeight,ae=re.querySelector("img"),ke=this.elements[this.index].node,Ae=(Q=ke.getAttribute("data-height"))!==null&&Q!==void 0?Q:"100vh";ae.setAttribute("style","max-height: calc(".concat(Ae," - ").concat(se,"px)")),ye.setAttribute("style","max-width: ".concat(ae.offsetWidth,"px;"))}}if(J){var Ee=q(this.settings.plyr.config,"ratio")?this.settings.plyr.config.ratio:"";if(!Ee){var De=J.clientWidth,Oe=J.clientHeight,We=De/Oe;Ee="".concat(De/We,":").concat(Oe/We)}var tt=Ee.split(":"),ft=this.settings.videosWidth,Kt=this.settings.videosWidth,xt=(Kt=X(ft)||ft.indexOf("px")!==-1?parseInt(ft):ft.indexOf("vw")!==-1?xe*parseInt(ft)/100:ft.indexOf("vh")!==-1?Re*parseInt(ft)/100:ft.indexOf("%")!==-1?xe*parseInt(ft)/100:parseInt(J.clientWidth))/(parseInt(tt[0])/parseInt(tt[1]));if(xt=Math.floor(xt),P&&(Re-=ye.offsetHeight),Kt>xe||xt>Re||Re<xt&&xe>Kt){var Qt=J.offsetWidth,rn=J.offsetHeight,sn=Re/rn,on={width:Qt*sn,height:rn*sn};J.parentNode.setAttribute("style","max-width: ".concat(on.width,"px")),P&&ye.setAttribute("style","max-width: ".concat(on.width,"px;"))}else J.parentNode.style.maxWidth="".concat(ft),P&&ye.setAttribute("style","max-width: ".concat(ft,";"))}}}}},{key:"reload",value:function(){this.init()}},{key:"updateNavigationClasses",value:function(){var F=this.loop();h(this.nextButton,"disabled"),h(this.prevButton,"disabled"),this.index==0&&this.elements.length-1==0?(f(this.prevButton,"disabled"),f(this.nextButton,"disabled")):this.index!==0||F?this.index!==this.elements.length-1||F||f(this.nextButton,"disabled"):f(this.prevButton,"disabled")}},{key:"loop",value:function(){var F=q(this.settings,"loopAtEnd")?this.settings.loopAtEnd:null;return F=q(this.settings,"loop")?this.settings.loop:F,F}},{key:"close",value:function(){var F=this;if(!this.lightboxOpen){if(this.events){for(var H in this.events)this.events.hasOwnProperty(H)&&this.events[H].destroy();this.events=null}return!1}if(this.closing)return!1;this.closing=!0,this.slidePlayerPause(this.activeSlide),this.fullElementsList&&(this.elements=this.fullElementsList),this.bodyHiddenChildElms.length&&u(this.bodyHiddenChildElms,function(J){J.removeAttribute("aria-hidden")}),f(this.modal,"glightbox-closing"),b(this.overlay,this.settings.openEffect=="none"?"none":this.settings.cssEfects.fade.out),b(this.activeSlide,this.settings.cssEfects[this.settings.closeEffect].out,function(){if(F.activeSlide=null,F.prevActiveSlideIndex=null,F.prevActiveSlide=null,F.built=!1,F.events){for(var J in F.events)F.events.hasOwnProperty(J)&&F.events[J].destroy();F.events=null}var re=document.body;h(ie,"glightbox-open"),h(re,"glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"),F.modal.parentNode.removeChild(F.modal),F.trigger("close"),O(F.settings.onClose)&&F.settings.onClose();var ye=document.querySelector(".gcss-styles");ye&&ye.parentNode.removeChild(ye),F.lightboxOpen=!1,F.closing=null})}},{key:"destroy",value:function(){this.close(),this.clearAllEvents(),this.baseEvents&&this.baseEvents.destroy()}},{key:"on",value:function(F,H){var J=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!F||!O(H))throw new TypeError("Event name and callback must be defined");this.apiEvents.push({evt:F,once:J,callback:H})}},{key:"once",value:function(F,H){this.on(F,H,!0)}},{key:"trigger",value:function(F){var H=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,re=[];u(this.apiEvents,function(ye,xe){var Re=ye.evt,P=ye.once,Q=ye.callback;Re==F&&(Q(J),P&&re.push(xe))}),re.length&&u(re,function(ye){return H.apiEvents.splice(ye,1)})}},{key:"clearAllEvents",value:function(){this.apiEvents.splice(0,this.apiEvents.length)}},{key:"version",value:function(){return"3.3.0"}}]);return function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=new ve(F);return H.init(),H}})}(uk)),uk.exports}var qzt=Uzt();const Hzt=aa(qzt);let B4=[],z4=[];function Gzt(t,e,n,r){const s=new DOMParser().parseFromString(t,"text/html"),o=r.shadowRoot||r,a=!!(r.showNav&&r.nav.length);s.querySelectorAll("a").forEach(d=>d.target="_blank"),B4.forEach(d=>d==null?void 0:d.disconnect()),B4=[],z4.forEach(d=>d==null?void 0:d.disconnect()),z4=[],a&&r.nav.forEach(d=>{const c=new IntersectionObserver(f=>{f.forEach(h=>{const p=h.isIntersecting,g=h.target.getAttribute("id");p&&o.querySelectorAll(".navigation li").forEach(b=>{b.classList.contains(`nav-${g}`)?b.classList.add("active"):b.classList.remove("active")})})},{rootMargin:"-50% 0px"});setTimeout(()=>{const f=o.querySelector(`#${d.id}`);f&&(c.observe(f),B4.push(c))},200)}),Object.keys(e).forEach(d=>{const c=e[d];if(fzt.includes(c.mode)&&c.steps){const f=`${c.as}#${c.id}`,h=new IntersectionObserver(p=>{p.forEach(g=>{const b=g.isIntersecting,y=Number(g.target.getAttribute("key"));b&&iAe(c,y,f,o)})});setTimeout(()=>{if(!o.querySelector(`#${d}`))return;o.querySelectorAll(`#${d} section-step`).forEach((b,y)=>{b.setAttribute("key",`${y}`),h.observe(b)}),z4.push(h),iAe(c,0,f,o)},100)}});function u(){o.querySelectorAll(".story-telling .hero img, .story-telling .hero video").forEach(function(c){c.getAttribute("data-parallax")==="true"&&(c.style.transform="translateY("+c.getBoundingClientRect().top*.1+"px)")})}return window.removeEventListener("scroll",u),window.addEventListener("scroll",u),Array.from(s.body.childNodes).map(d=>Vzt(d,n))}function iAe(t,e,n,r){const i=r.querySelector(n);Object.keys(t.steps[e]).forEach(s=>{i[s]=t.steps[e][s]})}function Vzt(t,e){if(t.nodeType===Node.ELEMENT_NODE&&t.querySelectorAll("*").forEach(r=>{/^[a-z]+(-[a-z0-9]+)*$/.test(r.tagName.toLowerCase())&&t.classList.contains("section-custom")&&Array.from(r.attributes).forEach(i=>r[i.name]=vz(r,i.name)),setTimeout(()=>e(r),100)}),t.querySelectorAll){const n=Hzt({autoplayVideos:!0}),r=[];t.querySelectorAll("img").forEach(s=>{const o=s.getAttribute("mode");s.parentNode.tagName!=="A"&&o!=="hero"&&(s.style.cursor="zoom-in",s.addEventListener("click",()=>{n.open()}),r.push({type:"image",href:s.src}))}),n.setElements(r)}return t}function vz(t,e=void 0){const n=e?t.getAttribute(e):t;return MNe(n)}function MNe(t){let e;try{e=JSON.parse(t)}catch{!isNaN(t)&&t.trim()!==""?e=Number(t):t==="true"?e=!0:t==="false"?e=!1:e=t}return e}function Wzt(t,e,n,r){const i=n.getBoundingClientRect(),s=(i.right+i.left)/2,o=25/2,a=e?i.top-o:void 0,l=e?i.top+o:void 0,u=i.bottom-o,d=i.bottom+o,c=s-o,f=s+o,{clientX:h,clientY:p}=t;if(h>=c&&h<=f&&(p>=u||p>=a)&&(p<=d||p<=l)&&r.showEditor!=="closed"){const b=e?p>=a&&p<=l:!1,y=Number(n.getAttribute("data-section"));r.addCustomSectionIndex=b?y-1:y,r.requestUpdate()}}function Yzt(t,e,n,r,i){const s=new DOMParser;let o=-1;if(n&&e.length&&t.length){o=0;const a=`
    <div class="navigation">
      <div class="container nav-container">
        <span class="hamburger-menu" aria-label="Toggle navigation">
        </span>
        <div class="nav-overlay"></div>
        <ul class="nav-list">
          ${e.map(({id:h,title:p,state:g})=>g?`<li class="nav-${h}"><a href="#${h}">${p}</a></li>`:"").join("")}
        </ul>
      </div>
    </div>
  `,l=s.parseFromString(a,"text/html").body.firstChild,u=l.querySelector(".hamburger-menu"),d=l.querySelector(".navigation .container ul"),c=l.querySelector(".nav-overlay"),f=l.querySelectorAll(".nav-list li");if(u&&d){const h=()=>{u.classList.toggle("active"),d.classList.toggle("show"),c.classList.toggle("show")};u.addEventListener("click",()=>h()),c.addEventListener("click",()=>h()),f.forEach(p=>{p.addEventListener("click",()=>h())})}t[0].classList.contains("hero")&&(o=1),t.splice(o,0,l)}if(t.length){const a=o+1;t[a].classList.add("section-start"),t.slice(a).forEach((l,u)=>{if(l.classList.add("section-item"),l.setAttribute("data-section",`${u+1}`),r!==void 0){const d=l.classList.contains("section-start");l.addEventListener("click",function(c){Wzt(c,d,this,i)})}})}return t}const Xzt="@eox/storytelling",Zzt="1.4.2",Kzt="module",Jzt={vite:"^6.0.3"},Qzt={npm:">=8.0.0",node:">=18.0.0"},ejt=["types","dist","src"],tjt="./src/main.js",njt="./types/src/main.d.ts",rjt={"*":{".":["./types/src/main.d.ts"],"src/*":["./types/src/*"]}},ijt={prepack:"tsc -p tsconfig.build.json || true",build:"vite build",watch:"vite build --watch"},sjt={"@eox/elements-utils":"^0.1.2","@sindresorhus/slugify":"^2.2.1",glightbox:"^3.3.0","isomorphic-dompurify":"^2.4.0",joi:"^17.12.3","js-yaml":"^4.1.0",lit:"^3.2.0","lodash.debounce":"^4.0.8","markdown-it":"^14.0.0"},ojt={"@eox/jsonform":"*"},_A={name:Xzt,version:Zzt,type:Kzt,devDependencies:Jzt,engines:Qzt,files:ejt,main:tjt,types:njt,typesVersions:rjt,scripts:ijt,dependencies:sjt,peerDependencies:ojt};function ajt(t,e){(t.shadowRoot||t).querySelectorAll(e).forEach(n=>{n.addEventListener("click",r=>{r.preventDefault(),window.parent.location.hash=r.target.hash.replace("#",""),INe(t)})})}function INe(t){const e=window.parent.location.hash,n=e?t.shadowRoot.querySelector(e):null;n&&n.scrollIntoView({behavior:"smooth"})}function ljt(t){return{tagNameCheck:r=>r.match(new RegExp(/^[a-z]+(-[a-z0-9]+)*$/)),attributeNameCheck:r=>r.match(new RegExp(t.attrs.keys.join("|"))),allowCustomizedBuiltInElements:!0}}function ujt(){const t=document.createElement("style");t.innerHTML=`
      @import url("https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css");
    `,document.body.appendChild(t)}function j4(t){const e=t.split("-")[0].split(".").map(Number);let n=0;const r=1e3;for(let i=0;i<e.length;i++)n+=e[i]*Math.pow(r,e.length-i-1);return n}function cjt(t){const e=Number(Object.keys(P4).find(r=>P4[r].length===1)),n=P4[t];if(!t||!n)return console.warn(`Version not (or wrongly) specified in markdown frontmatter. Assuming latest markdown syntax version (v${e}).`),e;if(e===t)return t;{const r=[j4(n[0]),j4(n[1])],i=j4(_A.version);return i>=r[0]&&i<=r[1]||console.error(`You are using an older or newer version of ${_A.name} package, which is not compatible with the version defined in the markdown frontmatter. Please update the ${_A.name} package to (>=${n[0]} and <=${n[1]}) or change the markdown syntax version to ${_A.version}`),t}}var U4={exports:{}},sAe;function djt(){return sAe||(sAe=1,function(t,e){(function(n,r){t.exports=r()})(self,()=>{return n={7629:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9474),d=o(1687),c=o(8652),f=o(8160),h=o(3292),p=o(6354),g=o(8901),b=o(9708),y=o(6914),v=o(2294),w=o(6133),E=o(1152),S=o(8863),T=o(2036),D={Base:class{constructor(k){this.type=k,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new v.Ids,this._preferences=null,this._refs=new w.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return a(typeof b.describe=="function","Manifest functionality disabled"),b.describe(this)}allow(...k){return f.verifyFlat(k,"allow"),this._values(k,"_valids")}alter(k){a(k&&typeof k=="object"&&!Array.isArray(k),"Invalid targets argument"),a(!this._inRuleset(),"Cannot set alterations inside a ruleset");const R=this.clone();R.$_terms.alterations=R.$_terms.alterations||[];for(const O in k){const B=k[O];a(typeof B=="function","Alteration adjuster for",O,"must be a function"),R.$_terms.alterations.push({target:O,adjuster:B})}return R.$_temp.ruleset=!1,R}artifact(k){return a(k!==void 0,"Artifact cannot be undefined"),a(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",k)}cast(k){return a(k===!1||typeof k=="string","Invalid to value"),a(k===!1||this._definition.cast[k],"Type",this.type,"does not support casting to",k),this.$_setFlag("cast",k===!1?void 0:k)}default(k,R){return this._default("default",k,R)}description(k){return a(k&&typeof k=="string","Description must be a non-empty string"),this.$_setFlag("description",k)}empty(k){const R=this.clone();return k!==void 0&&(k=R.$_compile(k,{override:!1})),R.$_setFlag("empty",k,{clone:!1})}error(k){return a(k,"Missing error"),a(k instanceof Error||typeof k=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",k)}example(k,R={}){return a(k!==void 0,"Missing example"),f.assertOptions(R,["override"]),this._inner("examples",k,{single:!0,override:R.override})}external(k,R){return typeof k=="object"&&(a(!R,"Cannot combine options with description"),R=k.description,k=k.method),a(typeof k=="function","Method must be a function"),a(R===void 0||R&&typeof R=="string","Description must be a non-empty string"),this._inner("externals",{method:k,description:R},{single:!0})}failover(k,R){return this._default("failover",k,R)}forbidden(){return this.presence("forbidden")}id(k){return k?(a(typeof k=="string","id must be a non-empty string"),a(/^[^\.]+$/.test(k),"id cannot contain period character"),this.$_setFlag("id",k)):this.$_setFlag("id",void 0)}invalid(...k){return this._values(k,"_invalids")}label(k){return a(k&&typeof k=="string","Label name must be a non-empty string"),this.$_setFlag("label",k)}meta(k){return a(k!==void 0,"Meta cannot be undefined"),this._inner("metas",k,{single:!0})}note(...k){a(k.length,"Missing notes");for(const R of k)a(R&&typeof R=="string","Notes must be non-empty strings");return this._inner("notes",k)}only(k=!0){return a(typeof k=="boolean","Invalid mode:",k),this.$_setFlag("only",k)}optional(){return this.presence("optional")}prefs(k){a(k,"Missing preferences"),a(k.context===void 0,"Cannot override context"),a(k.externals===void 0,"Cannot override externals"),a(k.warnings===void 0,"Cannot override warnings"),a(k.debug===void 0,"Cannot override debug"),f.checkPreferences(k);const R=this.clone();return R._preferences=f.preferences(R._preferences,k),R}presence(k){return a(["optional","required","forbidden"].includes(k),"Unknown presence mode",k),this.$_setFlag("presence",k)}raw(k=!0){return this.$_setFlag("result",k?"raw":void 0)}result(k){return a(["raw","strip"].includes(k),"Unknown result mode",k),this.$_setFlag("result",k)}required(){return this.presence("required")}strict(k){const R=this.clone(),O=k!==void 0&&!k;return R._preferences=f.preferences(R._preferences,{convert:O}),R}strip(k=!0){return this.$_setFlag("result",k?"strip":void 0)}tag(...k){a(k.length,"Missing tags");for(const R of k)a(R&&typeof R=="string","Tags must be non-empty strings");return this._inner("tags",k)}unit(k){return a(k&&typeof k=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",k)}valid(...k){f.verifyFlat(k,"valid");const R=this.allow(...k);return R.$_setFlag("only",!!R._valids,{clone:!1}),R}when(k,R){const O=this.clone();O.$_terms.whens||(O.$_terms.whens=[]);const B=h.when(O,k,R);if(!["any","link"].includes(O.type)){const K=B.is?[B]:B.switch;for(const L of K)a(!L.then||L.then.type==="any"||L.then.type===O.type,"Cannot combine",O.type,"with",L.then&&L.then.type),a(!L.otherwise||L.otherwise.type==="any"||L.otherwise.type===O.type,"Cannot combine",O.type,"with",L.otherwise&&L.otherwise.type)}return O.$_terms.whens.push(B),O.$_mutateRebuild()}cache(k){a(!this._inRuleset(),"Cannot set caching inside a ruleset"),a(!this._cache,"Cannot override schema cache"),a(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const R=this.clone();return R._cache=k||c.provider.provision(),R.$_temp.ruleset=!1,R}clone(){const k=Object.create(Object.getPrototypeOf(this));return this._assign(k)}concat(k){a(f.isSchema(k),"Invalid schema object"),a(this.type==="any"||k.type==="any"||k.type===this.type,"Cannot merge type",this.type,"with another type:",k.type),a(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),a(!k._inRuleset(),"Cannot concatenate a schema with open ruleset");let R=this.clone();if(this.type==="any"&&k.type!=="any"){const O=k.clone();for(const B of Object.keys(R))B!=="type"&&(O[B]=R[B]);R=O}R._ids.concat(k._ids),R._refs.register(k,w.toSibling),R._preferences=R._preferences?f.preferences(R._preferences,k._preferences):k._preferences,R._valids=T.merge(R._valids,k._valids,k._invalids),R._invalids=T.merge(R._invalids,k._invalids,k._valids);for(const O of k._singleRules.keys())R._singleRules.has(O)&&(R._rules=R._rules.filter(B=>B.keep||B.name!==O),R._singleRules.delete(O));for(const O of k._rules)k._definition.rules[O.method].multi||R._singleRules.set(O.name,O),R._rules.push(O);if(R._flags.empty&&k._flags.empty){R._flags.empty=R._flags.empty.concat(k._flags.empty);const O=Object.assign({},k._flags);delete O.empty,d(R._flags,O)}else if(k._flags.empty){R._flags.empty=k._flags.empty;const O=Object.assign({},k._flags);delete O.empty,d(R._flags,O)}else d(R._flags,k._flags);for(const O in k.$_terms){const B=k.$_terms[O];B?R.$_terms[O]?R.$_terms[O]=R.$_terms[O].concat(B):R.$_terms[O]=B.slice():R.$_terms[O]||(R.$_terms[O]=B)}return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,k]),R.$_mutateRebuild()}extend(k){return a(!k.base,"Cannot extend type with another base"),g.type(this,k)}extract(k){return k=Array.isArray(k)?k:k.split("."),this._ids.reach(k)}fork(k,R){a(!this._inRuleset(),"Cannot fork inside a ruleset");let O=this;for(let B of[].concat(k))B=Array.isArray(B)?B:B.split("."),O=O._ids.fork(B,R,O);return O.$_temp.ruleset=!1,O}rule(k){const R=this._definition;f.assertOptions(k,Object.keys(R.modifiers)),a(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const O=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;a(O>=0&&O<this._rules.length,"Cannot apply rules to empty ruleset");const B=this.clone();for(let K=O;K<B._rules.length;++K){const L=B._rules[K],I=l(L);for(const $ in k)R.modifiers[$](I,k[$]),a(I.name===L.name,"Cannot change rule name");B._rules[K]=I,B._singleRules.get(I.name)===L&&B._singleRules.set(I.name,I)}return B.$_temp.ruleset=!1,B.$_mutateRebuild()}get ruleset(){a(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const k=this.clone();return k.$_temp.ruleset=k._rules.length,k}get $(){return this.ruleset}tailor(k){k=[].concat(k),a(!this._inRuleset(),"Cannot tailor inside a ruleset");let R=this;if(this.$_terms.alterations)for(const{target:O,adjuster:B}of this.$_terms.alterations)k.includes(O)&&(R=B(R),a(f.isSchema(R),"Alteration adjuster for",O,"failed to return a schema object"));return R=R.$_modify({each:O=>O.tailor(k),ref:!1}),R.$_temp.ruleset=!1,R.$_mutateRebuild()}tracer(){return E.location?E.location(this):this}validate(k,R){return S.entry(k,this,R)}validateAsync(k,R){return S.entryAsync(k,this,R)}$_addRule(k){typeof k=="string"&&(k={name:k}),a(k&&typeof k=="object","Invalid options"),a(k.name&&typeof k.name=="string","Invalid rule name");for(const L in k)a(L[0]!=="_","Cannot set private rule properties");const R=Object.assign({},k);R._resolve=[],R.method=R.method||R.name;const O=this._definition.rules[R.method],B=R.args;a(O,"Unknown rule",R.method);const K=this.clone();if(B){a(Object.keys(B).length===1||Object.keys(B).length===this._definition.rules[R.name].args.length,"Invalid rule definition for",this.type,R.name);for(const L in B){let I=B[L];if(O.argsByName){const $=O.argsByName.get(L);if($.ref&&f.isResolvable(I))R._resolve.push(L),K.$_mutateRegister(I);else if($.normalize&&(I=$.normalize(I),B[L]=I),$.assert){const U=f.validateArg(I,L,$);a(!U,U,"or reference")}}I!==void 0?B[L]=I:delete B[L]}}return O.multi||(K._ruleRemove(R.name,{clone:!1}),K._singleRules.set(R.name,R)),K.$_temp.ruleset===!1&&(K.$_temp.ruleset=null),O.priority?K._rules.unshift(R):K._rules.push(R),K}$_compile(k,R){return h.schema(this.$_root,k,R)}$_createError(k,R,O,B,K,L={}){const I=L.flags!==!1?this._flags:{},$=L.messages?y.merge(this._definition.messages,L.messages):this._definition.messages;return new p.Report(k,R,O,I,$,B,K)}$_getFlag(k){return this._flags[k]}$_getRule(k){return this._singleRules.get(k)}$_mapLabels(k){return k=Array.isArray(k)?k:k.split("."),this._ids.labels(k)}$_match(k,R,O,B){(O=Object.assign({},O)).abortEarly=!0,O._externals=!1,R.snapshot();const K=!S.validate(k,this,R,O,B).errors;return R.restore(),K}$_modify(k){return f.assertOptions(k,["each","once","ref","schema"]),v.schema(this,k)||this}$_mutateRebuild(){return a(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(k,{source:R,name:O,path:B,key:K})=>{const L=this._definition[R][O]&&this._definition[R][O].register;L!==!1&&this.$_mutateRegister(k,{family:L,key:K})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(k,{family:R,key:O}={}){this._refs.register(k,R),this._ids.register(k,{key:O})}$_property(k){return this._definition.properties[k]}$_reach(k){return this._ids.reach(k)}$_rootReferences(){return this._refs.roots()}$_setFlag(k,R,O={}){a(k[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const B=this._definition.flags[k]||{};if(u(R,B.default)&&(R=void 0),u(R,this._flags[k]))return this;const K=O.clone!==!1?this.clone():this;return R!==void 0?(K._flags[k]=R,K.$_mutateRegister(R)):delete K._flags[k],k[0]!=="_"&&(K.$_temp.ruleset=!1),K}$_parent(k,...R){return this[k][f.symbols.parent].call(this,...R)}$_validate(k,R,O){return S.validate(k,this,R,O)}_assign(k){k.type=this.type,k.$_root=this.$_root,k.$_temp=Object.assign({},this.$_temp),k.$_temp.whens={},k._ids=this._ids.clone(),k._preferences=this._preferences,k._valids=this._valids&&this._valids.clone(),k._invalids=this._invalids&&this._invalids.clone(),k._rules=this._rules.slice(),k._singleRules=l(this._singleRules,{shallow:!0}),k._refs=this._refs.clone(),k._flags=Object.assign({},this._flags),k._cache=null,k.$_terms={};for(const R in this.$_terms)k.$_terms[R]=this.$_terms[R]?this.$_terms[R].slice():null;k.$_super={};for(const R in this.$_super)k.$_super[R]=this._super[R].bind(k);return k}_bare(){const k=this.clone();k._reset();const R=k._definition.terms;for(const O in R){const B=R[O];k.$_terms[O]=B.init}return k.$_mutateRebuild()}_default(k,R,O={}){return f.assertOptions(O,"literal"),a(R!==void 0,"Missing",k,"value"),a(typeof R=="function"||!O.literal,"Only function value supports literal option"),typeof R=="function"&&O.literal&&(R={[f.symbols.literal]:!0,literal:R}),this.$_setFlag(k,R)}_generate(k,R,O){if(!this.$_terms.whens)return{schema:this};const B=[],K=[];for(let $=0;$<this.$_terms.whens.length;++$){const U=this.$_terms.whens[$];if(U.concat){B.push(U.concat),K.push(`${$}.concat`);continue}const q=U.ref?U.ref.resolve(k,R,O):k,Y=U.is?[U]:U.switch,X=K.length;for(let te=0;te<Y.length;++te){const{is:le,then:ee,otherwise:z}=Y[te],he=`${$}${U.switch?"."+te:""}`;if(le.$_match(q,R.nest(le,`${he}.is`),O)){if(ee){const fe=R.localize([...R.path,`${he}.then`],R.ancestors,R.schemas),{schema:ze,id:He}=ee._generate(k,fe,O);B.push(ze),K.push(`${he}.then${He?`(${He})`:""}`);break}}else if(z){const fe=R.localize([...R.path,`${he}.otherwise`],R.ancestors,R.schemas),{schema:ze,id:He}=z._generate(k,fe,O);B.push(ze),K.push(`${he}.otherwise${He?`(${He})`:""}`);break}}if(U.break&&K.length>X)break}const L=K.join(", ");if(R.mainstay.tracer.debug(R,"rule","when",L),!L)return{schema:this};if(!R.mainstay.tracer.active&&this.$_temp.whens[L])return{schema:this.$_temp.whens[L],id:L};let I=this;this._definition.generate&&(I=this._definition.generate(this,k,R,O));for(const $ of B)I=I.concat($);return this.$_root._tracer&&this.$_root._tracer._combine(I,[this,...B]),this.$_temp.whens[L]=I,{schema:I,id:L}}_inner(k,R,O={}){a(!this._inRuleset(),`Cannot set ${k} inside a ruleset`);const B=this.clone();return B.$_terms[k]&&!O.override||(B.$_terms[k]=[]),O.single?B.$_terms[k].push(R):B.$_terms[k].push(...R),B.$_temp.ruleset=!1,B}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(k,R={}){if(!this._singleRules.has(k))return this;const O=R.clone!==!1?this.clone():this;O._singleRules.delete(k);const B=[];for(let K=0;K<O._rules.length;++K){const L=O._rules[K];L.name!==k||L.keep?B.push(L):O._inRuleset()&&K<O.$_temp.ruleset&&--O.$_temp.ruleset}return O._rules=B,O}_values(k,R){f.verifyFlat(k,R.slice(1,-1));const O=this.clone(),B=k[0]===f.symbols.override;if(B&&(k=k.slice(1)),!O[R]&&k.length?O[R]=new T:B&&(O[R]=k.length?new T:null,O.$_mutateRebuild()),!O[R])return O;B&&O[R].override();for(const K of k){a(K!==void 0,"Cannot call allow/valid/invalid with undefined"),a(K!==f.symbols.override,"Override must be the first value");const L=R==="_invalids"?"_valids":"_invalids";O[L]&&(O[L].remove(K),O[L].length||(a(R==="_valids"||!O._flags.only,"Setting invalid value",K,"leaves schema rejecting all values due to previous valid rule"),O[L]=null)),O[R].add(K,O._refs)}return O}}};D.Base.prototype[f.symbols.any]={version:f.version,compile:h.compile,root:"$_root"},D.Base.prototype.isImmutable=!0,D.Base.prototype.deny=D.Base.prototype.invalid,D.Base.prototype.disallow=D.Base.prototype.invalid,D.Base.prototype.equal=D.Base.prototype.valid,D.Base.prototype.exist=D.Base.prototype.required,D.Base.prototype.not=D.Base.prototype.invalid,D.Base.prototype.options=D.Base.prototype.prefs,D.Base.prototype.preferences=D.Base.prototype.prefs,i.exports=new D.Base},8652:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),d={max:1e3,supported:new Set(["undefined","boolean","number","string"])};s.provider={provision:c=>new d.Cache(c)},d.Cache=class{constructor(c={}){u.assertOptions(c,["max"]),a(c.max===void 0||c.max&&c.max>0&&isFinite(c.max),"Invalid max cache size"),this._max=c.max||d.max,this._map=new Map,this._list=new d.List}get length(){return this._map.size}set(c,f){if(c!==null&&!d.supported.has(typeof c))return;let h=this._map.get(c);if(h)return h.value=f,void this._list.first(h);h=this._list.unshift({key:c,value:f}),this._map.set(c,h),this._compact()}get(c){const f=this._map.get(c);if(f)return this._list.first(f),l(f.value)}_compact(){if(this._map.size>this._max){const c=this._list.pop();this._map.delete(c.key)}}},d.List=class{constructor(){this.tail=null,this.head=null}unshift(c){return c.next=null,c.prev=this.head,this.head&&(this.head.next=c),this.head=c,this.tail||(this.tail=c),c}first(c){c!==this.head&&(this._remove(c),this.unshift(c))}pop(){return this._remove(this.tail)}_remove(c){const{next:f,prev:h}=c;return f.prev=h,h&&(h.next=f),c===this.tail&&(this.tail=f),c.prev=null,c.next=null,c}}},8160:(i,s,o)=>{const a=o(375),l=o(7916),u=o(5934);let d,c;const f={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.version=u.version,s.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},s.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},s.assertOptions=function(h,p,g="Options"){a(h&&typeof h=="object"&&!Array.isArray(h),"Options must be of type object");const b=Object.keys(h).filter(y=>!p.includes(y));a(b.length===0,`${g} contain unknown keys: ${b}`)},s.checkPreferences=function(h){c=c||o(3378);const p=c.preferences.validate(h);if(p.error)throw new l([p.error.details[0].message])},s.compare=function(h,p,g){switch(g){case"=":return h===p;case">":return h>p;case"<":return h<p;case">=":return h>=p;case"<=":return h<=p}},s.default=function(h,p){return h===void 0?p:h},s.isIsoDate=function(h){return f.isoDate.test(h)},s.isNumber=function(h){return typeof h=="number"&&!isNaN(h)},s.isResolvable=function(h){return!!h&&(h[s.symbols.ref]||h[s.symbols.template])},s.isSchema=function(h,p={}){const g=h&&h[s.symbols.any];return!!g&&(a(p.legacy||g.version===s.version,"Cannot mix different versions of joi schemas"),!0)},s.isValues=function(h){return h[s.symbols.values]},s.limit=function(h){return Number.isSafeInteger(h)&&h>=0},s.preferences=function(h,p){d=d||o(6914),h=h||{},p=p||{};const g=Object.assign({},h,p);return p.errors&&h.errors&&(g.errors=Object.assign({},h.errors,p.errors),g.errors.wrap=Object.assign({},h.errors.wrap,p.errors.wrap)),p.messages&&(g.messages=d.compile(p.messages,h.messages)),delete g[s.symbols.prefs],g},s.tryWithPath=function(h,p,g={}){try{return h()}catch(b){throw b.path!==void 0?b.path=p+"."+b.path:b.path=p,g.append&&(b.message=`${b.message} (${b.path})`),b}},s.validateArg=function(h,p,{assert:g,message:b}){if(s.isSchema(g)){const y=g.validate(h);return y.error?y.error.message:void 0}if(!g(h))return p?`${p} ${b}`:b},s.verifyFlat=function(h,p){for(const g of h)a(!Array.isArray(g),"Method no longer accepts array arguments:",p)}},3292:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),d={};s.schema=function(c,f,h={}){l.assertOptions(h,["appendPath","override"]);try{return d.schema(c,f,h)}catch(p){throw h.appendPath&&p.path!==void 0&&(p.message=`${p.message} (${p.path})`),p}},d.schema=function(c,f,h){a(f!==void 0,"Invalid undefined schema"),Array.isArray(f)&&(a(f.length,"Invalid empty array schema"),f.length===1&&(f=f[0]));const p=(g,...b)=>h.override!==!1?g.valid(c.override,...b):g.valid(...b);if(d.simple(f))return p(c,f);if(typeof f=="function")return c.custom(f);if(a(typeof f=="object","Invalid schema content:",typeof f),l.isResolvable(f))return p(c,f);if(l.isSchema(f))return f;if(Array.isArray(f)){for(const g of f)if(!d.simple(g))return c.alternatives().try(...f);return p(c,...f)}return f instanceof RegExp?c.string().regex(f):f instanceof Date?p(c.date(),f):(a(Object.getPrototypeOf(f)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),c.object().keys(f))},s.ref=function(c,f){return u.isRef(c)?c:u.create(c,f)},s.compile=function(c,f,h={}){l.assertOptions(h,["legacy"]);const p=f&&f[l.symbols.any];if(p)return a(h.legacy||p.version===l.version,"Cannot mix different versions of joi schemas:",p.version,l.version),f;if(typeof f!="object"||!h.legacy)return s.schema(c,f,{appendPath:!0});const g=d.walk(f);return g?g.compile(g.root,f):s.schema(c,f,{appendPath:!0})},d.walk=function(c){if(typeof c!="object")return null;if(Array.isArray(c)){for(const h of c){const p=d.walk(h);if(p)return p}return null}const f=c[l.symbols.any];if(f)return{root:c[f.root],compile:f.compile};a(Object.getPrototypeOf(c)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const h in c){const p=d.walk(c[h]);if(p)return p}return null},d.simple=function(c){return c===null||["boolean","string","number"].includes(typeof c)},s.when=function(c,f,h){if(h===void 0&&(a(f&&typeof f=="object","Missing options"),h=f,f=u.create(".")),Array.isArray(h)&&(h={switch:h}),l.assertOptions(h,["is","not","then","otherwise","switch","break"]),l.isSchema(f))return a(h.is===void 0,'"is" can not be used with a schema condition'),a(h.not===void 0,'"not" can not be used with a schema condition'),a(h.switch===void 0,'"switch" can not be used with a schema condition'),d.condition(c,{is:f,then:h.then,otherwise:h.otherwise,break:h.break});if(a(u.isRef(f)||typeof f=="string","Invalid condition:",f),a(h.not===void 0||h.is===void 0,'Cannot combine "is" with "not"'),h.switch===void 0){let g=h;h.not!==void 0&&(g={is:h.not,then:h.otherwise,otherwise:h.then,break:h.break});let b=g.is!==void 0?c.$_compile(g.is):c.$_root.invalid(null,!1,0,"").required();return a(g.then!==void 0||g.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),a(g.break===void 0||g.then===void 0||g.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),h.is===void 0||u.isRef(h.is)||l.isSchema(h.is)||(b=b.required()),d.condition(c,{ref:s.ref(f),is:b,then:g.then,otherwise:g.otherwise,break:g.break})}a(Array.isArray(h.switch),'"switch" must be an array'),a(h.is===void 0,'Cannot combine "switch" with "is"'),a(h.not===void 0,'Cannot combine "switch" with "not"'),a(h.then===void 0,'Cannot combine "switch" with "then"');const p={ref:s.ref(f),switch:[],break:h.break};for(let g=0;g<h.switch.length;++g){const b=h.switch[g],y=g===h.switch.length-1;l.assertOptions(b,y?["is","then","otherwise"]:["is","then"]),a(b.is!==void 0,'Switch statement missing "is"'),a(b.then!==void 0,'Switch statement missing "then"');const v={is:c.$_compile(b.is),then:c.$_compile(b.then)};if(u.isRef(b.is)||l.isSchema(b.is)||(v.is=v.is.required()),y){a(h.otherwise===void 0||b.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const w=h.otherwise!==void 0?h.otherwise:b.otherwise;w!==void 0&&(a(p.break===void 0,"Cannot specify both otherwise and break"),v.otherwise=c.$_compile(w))}p.switch.push(v)}return p},d.condition=function(c,f){for(const h of["then","otherwise"])f[h]===void 0?delete f[h]:f[h]=c.$_compile(f[h]);return f}},6354:(i,s,o)=>{const a=o(5688),l=o(8160),u=o(3328);s.Report=class{constructor(d,c,f,h,p,g,b){if(this.code=d,this.flags=h,this.messages=p,this.path=g.path,this.prefs=b,this.state=g,this.value=c,this.message=null,this.template=null,this.local=f||{},this.local.label=s.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const y=this.path[this.path.length-1];typeof y!="object"&&(this.local.key=y)}}_setTemplate(d){if(this.template=d,!this.flags.label&&this.path.length===0){const c=this._template(this.template,"root");c&&(this.local.label=c)}}toString(){if(this.message)return this.message;const d=this.code;if(!this.prefs.errors.render)return this.code;const c=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return c===void 0?`Error code "${d}" is not defined, your custom type is missing the correct messages definition`:(this.message=c.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(d,c){return s.template(this.value,d,c||this.code,this.state,this.prefs)}},s.path=function(d){let c="";for(const f of d)typeof f!="object"&&(typeof f=="string"?(c&&(c+="."),c+=f):c+=`[${f}]`);return c},s.template=function(d,c,f,h,p){if(!c)return;if(u.isTemplate(c))return f!=="root"?c:null;let g=p.errors.language;if(l.isResolvable(g)&&(g=g.resolve(d,h,p)),g&&c[g]){if(c[g][f]!==void 0)return c[g][f];if(c[g]["*"]!==void 0)return c[g]["*"]}return c[f]?c[f]:c["*"]},s.label=function(d,c,f,h){if(!f.errors.label)return"";if(d.label)return d.label;let p=c.path;return f.errors.label==="key"&&c.path.length>1&&(p=c.path.slice(-1)),s.path(p)||s.template(null,f.messages,"root",c,f)||h&&s.template(null,h,"root",c,f)||"value"},s.process=function(d,c,f){if(!d)return null;const{override:h,message:p,details:g}=s.details(d);if(h)return h;if(f.errors.stack)return new s.ValidationError(p,g,c);const b=Error.stackTraceLimit;Error.stackTraceLimit=0;const y=new s.ValidationError(p,g,c);return Error.stackTraceLimit=b,y},s.details=function(d,c={}){let f=[];const h=[];for(const p of d){if(p instanceof Error){if(c.override!==!1)return{override:p};const b=p.toString();f.push(b),h.push({message:b,type:"override",context:{error:p}});continue}const g=p.toString();f.push(g),h.push({message:g,path:p.path.filter(b=>typeof b!="object"),type:p.code,context:p.local})}return f.length>1&&(f=[...new Set(f)]),{message:f.join(". "),details:h}},s.ValidationError=class extends Error{constructor(d,c,f){super(d),this._original=f,this.details=c}static isError(d){return d instanceof s.ValidationError}},s.ValidationError.prototype.isJoi=!0,s.ValidationError.prototype.name="ValidationError",s.ValidationError.prototype.annotate=a.error},8901:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8160),d=o(6914),c={};s.type=function(f,h){const p=Object.getPrototypeOf(f),g=l(p),b=f._assign(Object.create(g)),y=Object.assign({},h);delete y.base,g._definition=y;const v=p._definition||{};y.messages=d.merge(v.messages,y.messages),y.properties=Object.assign({},v.properties,y.properties),b.type=y.type,y.flags=Object.assign({},v.flags,y.flags);const w=Object.assign({},v.terms);if(y.terms)for(const D in y.terms){const k=y.terms[D];a(b.$_terms[D]===void 0,"Invalid term override for",y.type,D),b.$_terms[D]=k.init,w[D]=k}y.terms=w,y.args||(y.args=v.args),y.prepare=c.prepare(y.prepare,v.prepare),y.coerce&&(typeof y.coerce=="function"&&(y.coerce={method:y.coerce}),y.coerce.from&&!Array.isArray(y.coerce.from)&&(y.coerce={method:y.coerce.method,from:[].concat(y.coerce.from)})),y.coerce=c.coerce(y.coerce,v.coerce),y.validate=c.validate(y.validate,v.validate);const E=Object.assign({},v.rules);if(y.rules)for(const D in y.rules){const k=y.rules[D];a(typeof k=="object","Invalid rule definition for",y.type,D);let R=k.method;if(R===void 0&&(R=function(){return this.$_addRule(D)}),R&&(a(!g[D],"Rule conflict in",y.type,D),g[D]=R),a(!E[D],"Rule conflict in",y.type,D),E[D]=k,k.alias){const O=[].concat(k.alias);for(const B of O)g[B]=k.method}k.args&&(k.argsByName=new Map,k.args=k.args.map(O=>(typeof O=="string"&&(O={name:O}),a(!k.argsByName.has(O.name),"Duplicated argument name",O.name),u.isSchema(O.assert)&&(O.assert=O.assert.strict().label(O.name)),k.argsByName.set(O.name,O),O)))}y.rules=E;const S=Object.assign({},v.modifiers);if(y.modifiers)for(const D in y.modifiers){a(!g[D],"Rule conflict in",y.type,D);const k=y.modifiers[D];a(typeof k=="function","Invalid modifier definition for",y.type,D);const R=function(O){return this.rule({[D]:O})};g[D]=R,S[D]=k}if(y.modifiers=S,y.overrides){g._super=p,b.$_super={};for(const D in y.overrides)a(p[D],"Cannot override missing",D),y.overrides[D][u.symbols.parent]=p[D],b.$_super[D]=p[D].bind(b);Object.assign(g,y.overrides)}y.cast=Object.assign({},v.cast,y.cast);const T=Object.assign({},v.manifest,y.manifest);return T.build=c.build(y.manifest&&y.manifest.build,v.manifest&&v.manifest.build),y.manifest=T,y.rebuild=c.rebuild(y.rebuild,v.rebuild),b},c.build=function(f,h){return f&&h?function(p,g){return h(f(p,g),g)}:f||h},c.coerce=function(f,h){return f&&h?{from:f.from&&h.from?[...new Set([...f.from,...h.from])]:null,method(p,g){let b;if((!h.from||h.from.includes(typeof p))&&(b=h.method(p,g),b)){if(b.errors||b.value===void 0)return b;p=b.value}if(!f.from||f.from.includes(typeof p)){const y=f.method(p,g);if(y)return y}return b}}:f||h},c.prepare=function(f,h){return f&&h?function(p,g){const b=f(p,g);if(b){if(b.errors||b.value===void 0)return b;p=b.value}return h(p,g)||b}:f||h},c.rebuild=function(f,h){return f&&h?function(p){h(p),f(p)}:f||h},c.validate=function(f,h){return f&&h?function(p,g){const b=h(p,g);if(b){if(b.errors&&(!Array.isArray(b.errors)||b.errors.length))return b;p=b.value}return f(p,g)||b}:f||h}},5107:(i,s,o)=>{const a=o(375),l=o(8571),u=o(8652),d=o(8160),c=o(3292),f=o(6354),h=o(8901),p=o(9708),g=o(6133),b=o(3328),y=o(1152);let v;const w={types:{alternatives:o(4946),any:o(8068),array:o(546),boolean:o(4937),date:o(7500),function:o(390),link:o(8785),number:o(3832),object:o(8966),string:o(7417),symbol:o(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const E={_types:new Set(Object.keys(w.types))};for(const S of E._types)E[S]=function(...T){return a(!T.length||["alternatives","link","object"].includes(S),"The",S,"type does not allow arguments"),w.generate(this,w.types[S],T)};for(const S of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])E[S]=function(...T){return this.any()[S](...T)};Object.assign(E,w.methods);for(const S in w.aliases){const T=w.aliases[S];E[S]=E[T]}return E.x=E.expression,y.setup&&y.setup(E),E}};w.methods={ValidationError:f.ValidationError,version:d.version,cache:u.provider,assert(E,S,...T){w.assert(E,S,!0,T)},attempt:(E,S,...T)=>w.assert(E,S,!1,T),build(E){return a(typeof p.build=="function","Manifest functionality disabled"),p.build(this,E)},checkPreferences(E){d.checkPreferences(E)},compile(E,S){return c.compile(this,E,S)},defaults(E){a(typeof E=="function","modifier must be a function");const S=Object.assign({},this);for(const T of S._types){const D=E(S[T]());a(d.isSchema(D),"modifier must return a valid schema object"),S[T]=function(...k){return w.generate(this,D,k)}}return S},expression:(...E)=>new b(...E),extend(...E){d.verifyFlat(E,"extend"),v=v||o(3378),a(E.length,"You need to provide at least one extension"),this.assert(E,v.extensions);const S=Object.assign({},this);S._types=new Set(S._types);for(let T of E){typeof T=="function"&&(T=T(S)),this.assert(T,v.extension);const D=w.expandExtension(T,S);for(const k of D){a(S[k.type]===void 0||S._types.has(k.type),"Cannot override name",k.type);const R=k.base||this.any(),O=h.type(R,k);S._types.add(k.type),S[k.type]=function(...B){return w.generate(this,O,B)}}}return S},isError:f.ValidationError.isError,isExpression:b.isTemplate,isRef:g.isRef,isSchema:d.isSchema,in:(...E)=>g.in(...E),override:d.symbols.override,ref:(...E)=>g.create(...E),types(){const E={};for(const S of this._types)E[S]=this[S]();for(const S in w.aliases)E[S]=this[S]();return E}},w.assert=function(E,S,T,D){const k=D[0]instanceof Error||typeof D[0]=="string"?D[0]:null,R=k!==null?D[1]:D[0],O=S.validate(E,d.preferences({errors:{stack:!0}},R||{}));let B=O.error;if(!B)return O.value;if(k instanceof Error)throw k;const K=T&&typeof B.annotate=="function"?B.annotate():B.message;throw B instanceof f.ValidationError==0&&(B=l(B)),B.message=k?`${k} ${K}`:K,B},w.generate=function(E,S,T){return a(E,"Must be invoked on a Joi instance."),S.$_root=E,S._definition.args&&T.length?S._definition.args(S,...T):S},w.expandExtension=function(E,S){if(typeof E.type=="string")return[E];const T=[];for(const D of S._types)if(E.type.test(D)){const k=Object.assign({},E);k.type=D,k.base=S[D](),T.push(k)}return T},i.exports=w.root()},6914:(i,s,o)=>{const a=o(375),l=o(8571),u=o(3328);s.compile=function(d,c){if(typeof d=="string")return a(!c,"Cannot set single message string"),new u(d);if(u.isTemplate(d))return a(!c,"Cannot set single message template"),d;a(typeof d=="object"&&!Array.isArray(d),"Invalid message options"),c=c?l(c):{};for(let f in d){const h=d[f];if(f==="root"||u.isTemplate(h)){c[f]=h;continue}if(typeof h=="string"){c[f]=new u(h);continue}a(typeof h=="object"&&!Array.isArray(h),"Invalid message for",f);const p=f;for(f in c[p]=c[p]||{},h){const g=h[f];f==="root"||u.isTemplate(g)?c[p][f]=g:(a(typeof g=="string","Invalid message for",f,"in",p),c[p][f]=new u(g))}}return c},s.decompile=function(d){const c={};for(let f in d){const h=d[f];if(f==="root"){c.root=h;continue}if(u.isTemplate(h)){c[f]=h.describe({compact:!0});continue}const p=f;for(f in c[p]={},h){const g=h[f];f!=="root"?c[p][f]=g.describe({compact:!0}):c[p].root=g}}return c},s.merge=function(d,c){if(!d)return s.compile(c);if(!c)return d;if(typeof c=="string")return new u(c);if(u.isTemplate(c))return c;const f=l(d);for(let h in c){const p=c[h];if(h==="root"||u.isTemplate(p)){f[h]=p;continue}if(typeof p=="string"){f[h]=new u(p);continue}a(typeof p=="object"&&!Array.isArray(p),"Invalid message for",h);const g=h;for(h in f[g]=f[g]||{},p){const b=p[h];h==="root"||u.isTemplate(b)?f[g][h]=b:(a(typeof b=="string","Invalid message for",h,"in",g),f[g][h]=new u(b))}}return f}},2294:(i,s,o)=>{const a=o(375),l=o(8160),u=o(6133),d={};s.Ids=d.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const c=new d.Ids;return c._byId=new Map(this._byId),c._byKey=new Map(this._byKey),c._schemaChain=this._schemaChain,c}concat(c){c._schemaChain&&(this._schemaChain=!0);for(const[f,h]of c._byId.entries())a(!this._byKey.has(f),"Schema id conflicts with existing key:",f),this._byId.set(f,h);for(const[f,h]of c._byKey.entries())a(!this._byId.has(f),"Schema key conflicts with existing id:",f),this._byKey.set(f,h)}fork(c,f,h){const p=this._collect(c);p.push({schema:h});const g=p.shift();let b={id:g.id,schema:f(g.schema)};a(l.isSchema(b.schema),"adjuster function failed to return a joi schema type");for(const y of p)b={id:y.id,schema:d.fork(y.schema,b.id,b.schema)};return b.schema}labels(c,f=[]){const h=c[0],p=this._get(h);if(!p)return[...f,...c].join(".");const g=c.slice(1);return f=[...f,p.schema._flags.label||h],g.length?p.schema._ids.labels(g,f):f.join(".")}reach(c,f=[]){const h=c[0],p=this._get(h);a(p,"Schema does not contain path",[...f,...c].join("."));const g=c.slice(1);return g.length?p.schema._ids.reach(g,[...f,h]):p.schema}register(c,{key:f}={}){if(!c||!l.isSchema(c))return;(c.$_property("schemaChain")||c._ids._schemaChain)&&(this._schemaChain=!0);const h=c._flags.id;if(h){const p=this._byId.get(h);a(!p||p.schema===c,"Cannot add different schemas with the same id:",h),a(!this._byKey.has(h),"Schema id conflicts with existing key:",h),this._byId.set(h,{schema:c,id:h})}f&&(a(!this._byKey.has(f),"Schema already contains key:",f),a(!this._byId.has(f),"Schema key conflicts with existing id:",f),this._byKey.set(f,{schema:c,id:f}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(c,f=[],h=[]){const p=c[0],g=this._get(p);a(g,"Schema does not contain path",[...f,...c].join(".")),h=[g,...h];const b=c.slice(1);return b.length?g.schema._ids._collect(b,[...f,p],h):h}_get(c){return this._byId.get(c)||this._byKey.get(c)}},d.fork=function(c,f,h){const p=s.schema(c,{each:(g,{key:b})=>{if(f===(g._flags.id||b))return h},ref:!1});return p?p.$_mutateRebuild():c},s.schema=function(c,f){let h;for(const p in c._flags){if(p[0]==="_")continue;const g=d.scan(c._flags[p],{source:"flags",name:p},f);g!==void 0&&(h=h||c.clone(),h._flags[p]=g)}for(let p=0;p<c._rules.length;++p){const g=c._rules[p],b=d.scan(g.args,{source:"rules",name:g.name},f);if(b!==void 0){h=h||c.clone();const y=Object.assign({},g);y.args=b,h._rules[p]=y,h._singleRules.get(g.name)===g&&h._singleRules.set(g.name,y)}}for(const p in c.$_terms){if(p[0]==="_")continue;const g=d.scan(c.$_terms[p],{source:"terms",name:p},f);g!==void 0&&(h=h||c.clone(),h.$_terms[p]=g)}return h},d.scan=function(c,f,h,p,g){const b=p||[];if(c===null||typeof c!="object")return;let y;if(Array.isArray(c)){for(let v=0;v<c.length;++v){const w=f.source==="terms"&&f.name==="keys"&&c[v].key,E=d.scan(c[v],f,h,[v,...b],w);E!==void 0&&(y=y||c.slice(),y[v]=E)}return y}if(h.schema!==!1&&l.isSchema(c)||h.ref!==!1&&u.isRef(c)){const v=h.each(c,{...f,path:b,key:g});return v===c?void 0:v}for(const v in c){if(v[0]==="_")continue;const w=d.scan(c[v],f,h,[v,...b],g);w!==void 0&&(y=y||Object.assign({},c),y[v]=w)}return y}},6133:(i,s,o)=>{const a=o(375),l=o(8571),u=o(9621),d=o(8160);let c;const f={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};s.create=function(h,p={}){a(typeof h=="string","Invalid reference key:",h),d.assertOptions(p,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),a(!p.prefix||typeof p.prefix=="object","options.prefix must be of type object");const g=Object.assign({},f.defaults,p);delete g.prefix;const b=g.separator,y=f.context(h,b,p.prefix);if(g.type=y.type,h=y.key,g.type==="value")if(y.root&&(a(!b||h[0]!==b,"Cannot specify relative path with root prefix"),g.ancestor="root",h||(h=null)),b&&b===h)h=null,g.ancestor=0;else if(g.ancestor!==void 0)a(!b||!h||h[0]!==b,"Cannot combine prefix with ancestor option");else{const[v,w]=f.ancestor(h,b);w&&(h=h.slice(w))===""&&(h=null),g.ancestor=v}return g.path=b?h===null?[]:h.split(b):[h],new f.Ref(g)},s.in=function(h,p={}){return s.create(h,{...p,in:!0})},s.isRef=function(h){return!!h&&!!h[d.symbols.ref]},f.Ref=class{constructor(h){a(typeof h=="object","Invalid reference construction"),d.assertOptions(h,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),a([!1,void 0].includes(h.separator)||typeof h.separator=="string"&&h.separator.length===1,"Invalid separator"),a(!h.adjust||typeof h.adjust=="function","options.adjust must be a function"),a(!h.map||Array.isArray(h.map),"options.map must be an array"),a(!h.map||!h.adjust,"Cannot set both map and adjust options"),Object.assign(this,f.defaults,h),a(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(h,p,g,b,y={}){return a(!this.in||y.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(g.context,p,y):this.type==="local"?this._resolve(b,p,y):this.ancestor?this.ancestor==="root"?this._resolve(p.ancestors[p.ancestors.length-1],p,y):(a(this.ancestor<=p.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(p.ancestors[this.ancestor-1],p,y)):this._resolve(h,p,y)}_resolve(h,p,g){let b;if(this.type==="value"&&p.mainstay.shadow&&g.shadow!==!1&&(b=p.mainstay.shadow.get(this.absolute(p))),b===void 0&&(b=u(h,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(b=this.adjust(b)),this.map){const y=this.map.get(b);y!==void 0&&(b=y)}return p.mainstay&&p.mainstay.tracer.resolve(p,this,b),b}toString(){return this.display}absolute(h){return[...h.path.slice(0,-this.ancestor),...this.path]}clone(){return new f.Ref(this)}describe(){const h={path:this.path};this.type!=="value"&&(h.type=this.type),this.separator!=="."&&(h.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(h.ancestor=this.ancestor),this.map&&(h.map=[...this.map]);for(const p of["adjust","iterables","render"])this[p]!==null&&this[p]!==void 0&&(h[p]=this[p]);return this.in!==!1&&(h.in=!0),{ref:h}}updateDisplay(){const h=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${h}`);if(!this.separator)return void(this.display=`ref:${h}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${h}`);if(this.ancestor==="root")return void(this.display=`ref:root:${h}`);if(this.ancestor===1)return void(this.display=`ref:${h||".."}`);const p=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${p}${h||""}`}},f.Ref.prototype[d.symbols.ref]=!0,s.build=function(h){return(h=Object.assign({},f.defaults,h)).type==="value"&&h.ancestor===void 0&&(h.ancestor=1),new f.Ref(h)},f.context=function(h,p,g={}){if(h=h.trim(),g){const b=g.global===void 0?"$":g.global;if(b!==p&&h.startsWith(b))return{key:h.slice(b.length),type:"global"};const y=g.local===void 0?"#":g.local;if(y!==p&&h.startsWith(y))return{key:h.slice(y.length),type:"local"};const v=g.root===void 0?"/":g.root;if(v!==p&&h.startsWith(v))return{key:h.slice(v.length),type:"value",root:!0}}return{key:h,type:"value"}},f.ancestor=function(h,p){if(!p)return[1,0];if(h[0]!==p)return[1,0];if(h[1]!==p)return[0,1];let g=2;for(;h[g]===p;)++g;return[g-1,g]},s.toSibling=0,s.toParent=1,s.Manager=class{constructor(){this.refs=[]}register(h,p){if(h)if(p=p===void 0?s.toParent:p,Array.isArray(h))for(const g of h)this.register(g,p);else if(d.isSchema(h))for(const g of h._refs.refs)g.ancestor-p>=0&&this.refs.push({ancestor:g.ancestor-p,root:g.root});else s.isRef(h)&&h.type==="value"&&h.ancestor-p>=0&&this.refs.push({ancestor:h.ancestor-p,root:h.root}),c=c||o(3328),c.isTemplate(h)&&this.register(h.refs(),p)}get length(){return this.refs.length}clone(){const h=new s.Manager;return h.refs=l(this.refs),h}reset(){this.refs=[]}roots(){return this.refs.filter(h=>!h.ancestor).map(h=>h.root)}}},3378:(i,s,o)=>{const a=o(5107),l={};l.wrap=a.string().min(1).max(2).allow(!1),s.preferences=a.object({allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),context:a.object(),convert:a.boolean(),dateFormat:a.valid("date","iso","string","time","utc"),debug:a.boolean(),errors:{escapeHtml:a.boolean(),label:a.valid("path","key",!1),language:[a.string(),a.object().ref()],render:a.boolean(),stack:a.boolean(),wrap:{label:l.wrap,array:l.wrap,string:l.wrap}},externals:a.boolean(),messages:a.object(),noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:a.valid("required","optional","forbidden"),skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()}).strict(),l.nameRx=/^[a-zA-Z0-9]\w*$/,l.rule=a.object({alias:a.array().items(a.string().pattern(l.nameRx)).single(),args:a.array().items(a.string(),a.object({name:a.string().pattern(l.nameRx).required(),ref:a.boolean(),assert:a.alternatives([a.function(),a.object().schema()]).conditional("ref",{is:!0,then:a.required()}),normalize:a.function(),message:a.string().when("assert",{is:a.function(),then:a.required()})})),convert:a.boolean(),manifest:a.boolean(),method:a.function().allow(!1),multi:a.boolean(),validate:a.function()}),s.extension=a.object({type:a.alternatives([a.string(),a.object().regex()]).required(),args:a.function(),cast:a.object().pattern(l.nameRx,a.object({from:a.function().maxArity(1).required(),to:a.function().minArity(1).maxArity(2).required()})),base:a.object().schema().when("type",{is:a.object().regex(),then:a.forbidden()}),coerce:[a.function().maxArity(3),a.object({method:a.function().maxArity(3).required(),from:a.array().items(a.string()).single()})],flags:a.object().pattern(l.nameRx,a.object({setter:a.string(),default:a.any()})),manifest:{build:a.function().arity(2)},messages:[a.object(),a.string()],modifiers:a.object().pattern(l.nameRx,a.function().minArity(1).maxArity(2)),overrides:a.object().pattern(l.nameRx,a.function()),prepare:a.function().maxArity(3),rebuild:a.function().arity(1),rules:a.object().pattern(l.nameRx,l.rule),terms:a.object().pattern(l.nameRx,a.object({init:a.array().allow(null).required(),manifest:a.object().pattern(/.+/,[a.valid("schema","single"),a.object({mapped:a.object({from:a.string().required(),to:a.string().required()}).required()})])})),validate:a.function().maxArity(3)}).strict(),s.extensions=a.array().items(a.object(),a.function().arity(1)).strict(),l.desc={buffer:a.object({buffer:a.string()}),func:a.object({function:a.function().required(),options:{literal:!0}}),override:a.object({override:!0}),ref:a.object({ref:a.object({type:a.valid("value","global","local"),path:a.array().required(),separator:a.string().length(1).allow(!1),ancestor:a.number().min(0).integer().allow("root"),map:a.array().items(a.array().length(2)).min(1),adjust:a.function(),iterables:a.boolean(),in:a.boolean(),render:a.boolean()}).required()}),regex:a.object({regex:a.string().min(3)}),special:a.object({special:a.valid("deep").required()}),template:a.object({template:a.string().required(),options:a.object()}),value:a.object({value:a.alternatives([a.object(),a.array()]).required()})},l.desc.entity=a.alternatives([a.array().items(a.link("...")),a.boolean(),a.function(),a.number(),a.string(),l.desc.buffer,l.desc.func,l.desc.ref,l.desc.regex,l.desc.special,l.desc.template,l.desc.value,a.link("/")]),l.desc.values=a.array().items(null,a.boolean(),a.function(),a.number().allow(1/0,-1/0),a.string().allow(""),a.symbol(),l.desc.buffer,l.desc.func,l.desc.override,l.desc.ref,l.desc.regex,l.desc.template,l.desc.value),l.desc.messages=a.object().pattern(/.+/,[a.string(),l.desc.template,a.object().pattern(/.+/,[a.string(),l.desc.template])]),s.description=a.object({type:a.string().required(),flags:a.object({cast:a.string(),default:a.any(),description:a.string(),empty:a.link("/"),failover:l.desc.entity,id:a.string(),label:a.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:a.boolean(),unit:a.string()}).unknown(),preferences:{allowUnknown:a.boolean(),abortEarly:a.boolean(),artifacts:a.boolean(),cache:a.boolean(),convert:a.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:a.boolean(),label:["path","key"],language:[a.string(),l.desc.ref],wrap:{label:l.wrap,array:l.wrap}},externals:a.boolean(),messages:l.desc.messages,noDefaults:a.boolean(),nonEnumerables:a.boolean(),presence:["required","optional","forbidden"],skipFunctions:a.boolean(),stripUnknown:a.object({arrays:a.boolean(),objects:a.boolean()}).or("arrays","objects").allow(!0,!1),warnings:a.boolean()},allow:l.desc.values,invalid:l.desc.values,rules:a.array().min(1).items({name:a.string().required(),args:a.object().min(1),keep:a.boolean(),message:[a.string(),l.desc.messages],warn:a.boolean()}),keys:a.object().pattern(/.*/,a.link("/")),link:l.desc.ref}).pattern(/^[a-z]\w*$/,a.any())},493:(i,s,o)=>{const a=o(8571),l=o(9621),u=o(8160),d={value:Symbol("value")};i.exports=d.State=class{constructor(c,f,h){this.path=c,this.ancestors=f,this.mainstay=h.mainstay,this.schemas=h.schemas,this.debug=null}localize(c,f=null,h=null){const p=new d.State(c,f,this);return h&&p.schemas&&(p.schemas=[d.schemas(h),...p.schemas]),p}nest(c,f){const h=new d.State(this.path,this.ancestors,this);return h.schemas=h.schemas&&[d.schemas(c),...h.schemas],h.debug=f,h}shadow(c,f){this.mainstay.shadow=this.mainstay.shadow||new d.Shadow,this.mainstay.shadow.set(this.path,c,f)}snapshot(){this.mainstay.shadow&&(this._snapshot=a(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},d.schemas=function(c){return u.isSchema(c)?{schema:c}:c},d.Shadow=class{constructor(){this._values=null}set(c,f,h){if(!c.length||h==="strip"&&typeof c[c.length-1]=="number")return;this._values=this._values||new Map;let p=this._values;for(let g=0;g<c.length;++g){const b=c[g];let y=p.get(b);y||(y=new Map,p.set(b,y)),p=y}p[d.value]=f}get(c){const f=this.node(c);if(f)return f[d.value]}node(c){if(this._values)return l(this._values,c,{iterables:!0})}override(c,f){if(!this._values)return;const h=c.slice(0,-1),p=c[c.length-1],g=l(this._values,h,{iterables:!0});f?g.set(p,f):g&&g.delete(p)}}},3328:(i,s,o)=>{const a=o(375),l=o(8571),u=o(5277),d=o(1447),c=o(8160),f=o(6354),h=o(6133),p={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};i.exports=p.Template=class{constructor(g,b){if(a(typeof g=="string","Template source must be a string"),a(!g.includes("\0")&&!g.includes(""),"Template source cannot contain reserved control characters"),this.source=g,this.rendered=g,this._template=null,b){const{functions:y,...v}=b;this._settings=Object.keys(v).length?l(v):void 0,this._functions=y,this._functions&&(a(Object.keys(this._functions).every(w=>typeof w=="string"),"Functions keys must be strings"),a(Object.values(this._functions).every(w=>typeof w=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const g=p.encode(this.source),b=p.split(g);let y=!1;const v=[],w=b.shift();w&&v.push(w);for(const E of b){const S=E[0]!=="{",T=S?"}":"}}",D=E.indexOf(T);if(D===-1||E[1]==="{"){v.push(`{${p.decode(E)}`);continue}let k=E.slice(S?0:1,D);const R=k[0]===":";R&&(k=k.slice(1));const O=this._ref(p.decode(k),{raw:S,wrapped:R});v.push(O),typeof O!="string"&&(y=!0);const B=E.slice(D+T.length);B&&v.push(p.decode(B))}y?this._template=v:this.rendered=v.join("")}static date(g,b){return p.dateFormat[b.dateFormat].call(g)}describe(g={}){if(!this._settings&&g.compact)return this.source;const b={template:this.source};return this._settings&&(b.options=this._settings),this._functions&&(b.functions=this._functions),b}static build(g){return new p.Template(g.template,g.options||g.functions?{...g.options,functions:g.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(g){return!!g&&!!g[c.symbols.template]}refs(){if(!this._template)return;const g=[];for(const b of this._template)typeof b!="string"&&g.push(...b.refs);return g}resolve(g,b,y,v){return this._template&&this._template.length===1?this._part(this._template[0],g,b,y,v,{}):this.render(g,b,y,v)}_part(g,...b){return g.ref?g.ref.resolve(...b):g.formula.evaluate(b)}render(g,b,y,v,w={}){if(!this.isDynamic())return this.rendered;const E=[];for(const S of this._template)if(typeof S=="string")E.push(S);else{const T=this._part(S,g,b,y,v,w),D=p.stringify(T,g,b,y,v,w);if(D!==void 0){const k=S.raw||(w.errors&&w.errors.escapeHtml)===!1?D:u(D);E.push(p.wrap(k,S.wrapped&&y.errors.wrap.label))}}return E.join("")}_ref(g,{raw:b,wrapped:y}){const v=[],w=S=>{const T=h.create(S,this._settings);return v.push(T),D=>{const k=T.resolve(...D);return k!==void 0?k:null}};try{const S=this._functions?{...p.functions,...this._functions}:p.functions;var E=new d.Parser(g,{reference:w,functions:S,constants:p.constants})}catch(S){throw S.message=`Invalid template variable "${g}" fails due to: ${S.message}`,S}if(E.single){if(E.single.type==="reference"){const S=v[0];return{ref:S,raw:b,refs:v,wrapped:y||S.type==="local"&&S.key==="label"}}return p.stringify(E.single.value)}return{formula:E,raw:b,refs:v}}toString(){return this.source}},p.Template.prototype[c.symbols.template]=!0,p.Template.prototype.isImmutable=!0,p.encode=function(g){return g.replace(/\\(\{+)/g,(b,y)=>p.opens.slice(0,y.length)).replace(/\\(\}+)/g,(b,y)=>p.closes.slice(0,y.length))},p.decode=function(g){return g.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},p.split=function(g){const b=[];let y="";for(let v=0;v<g.length;++v){const w=g[v];if(w==="{"){let E="";for(;v+1<g.length&&g[v+1]==="{";)E+="{",++v;b.push(y),y=E}else y+=w}return b.push(y),b},p.wrap=function(g,b){return b?b.length===1?`${b}${g}${b}`:`${b[0]}${g}${b[1]}`:g},p.stringify=function(g,b,y,v,w,E={}){const S=typeof g,T=v&&v.errors&&v.errors.wrap||{};let D=!1;if(h.isRef(g)&&g.render&&(D=g.in,g=g.resolve(b,y,v,w,{in:g.in,...E})),g===null)return"null";if(S==="string")return p.wrap(g,E.arrayItems&&T.string);if(S==="number"||S==="function"||S==="symbol")return g.toString();if(S!=="object")return JSON.stringify(g);if(g instanceof Date)return p.Template.date(g,v);if(g instanceof Map){const R=[];for(const[O,B]of g.entries())R.push(`${O.toString()} -> ${B.toString()}`);g=R}if(!Array.isArray(g))return g.toString();const k=[];for(const R of g)k.push(p.stringify(R,b,y,v,w,{arrayItems:!0,...E}));return p.wrap(k.join(", "),!D&&T.array)},p.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},p.functions={if:(g,b,y)=>g?b:y,length:g=>typeof g=="string"?g.length:g&&typeof g=="object"?Array.isArray(g)?g.length:Object.keys(g).length:null,msg(g){const[b,y,v,w,E]=this,S=E.messages;if(!S)return"";const T=f.template(b,S[0],g,y,v)||f.template(b,S[1],g,y,v);return T?T.render(b,y,v,w,E):""},number:g=>typeof g=="number"?g:typeof g=="string"?parseFloat(g):typeof g=="boolean"?g?1:0:g instanceof Date?g.getTime():null}},4946:(i,s,o)=>{const a=o(375),l=o(1687),u=o(8068),d=o(8160),c=o(3292),f=o(6354),h=o(6133),p={};i.exports=u.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:h.toSibling}},args:(g,...b)=>b.length===1&&Array.isArray(b[0])?g.try(...b[0]):g.try(...b),validate(g,b){const{schema:y,error:v,state:w,prefs:E}=b;if(y._flags.match){const T=[],D=[];for(let R=0;R<y.$_terms.matches.length;++R){const O=y.$_terms.matches[R],B=w.nest(O.schema,`match.${R}`);B.snapshot();const K=O.schema.$_validate(g,B,E);K.errors?(D.push(K.errors),B.restore()):(T.push(K.value),B.commit())}if(T.length===0)return{errors:v("alternatives.any",{details:D.map(R=>f.details(R,{override:!1}))})};if(y._flags.match==="one")return T.length===1?{value:T[0]}:{errors:v("alternatives.one")};if(T.length!==y.$_terms.matches.length)return{errors:v("alternatives.all",{details:D.map(R=>f.details(R,{override:!1}))})};const k=R=>R.$_terms.matches.some(O=>O.schema.type==="object"||O.schema.type==="alternatives"&&k(O.schema));return k(y)?{value:T.reduce((R,O)=>l(R,O,{mergeArrays:!1}))}:{value:T[T.length-1]}}const S=[];for(let T=0;T<y.$_terms.matches.length;++T){const D=y.$_terms.matches[T];if(D.schema){const O=w.nest(D.schema,`match.${T}`);O.snapshot();const B=D.schema.$_validate(g,O,E);if(!B.errors)return O.commit(),B;O.restore(),S.push({schema:D.schema,reports:B.errors});continue}const k=D.ref?D.ref.resolve(g,w,E):g,R=D.is?[D]:D.switch;for(let O=0;O<R.length;++O){const B=R[O],{is:K,then:L,otherwise:I}=B,$=`match.${T}${D.switch?"."+O:""}`;if(K.$_match(k,w.nest(K,`${$}.is`),E)){if(L)return L.$_validate(g,w.nest(L,`${$}.then`),E)}else if(I)return I.$_validate(g,w.nest(I,`${$}.otherwise`),E)}}return p.errors(S,b)},rules:{conditional:{method(g,b){a(!this._flags._endedSwitch,"Unreachable condition"),a(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),a(b.break===void 0,"Cannot use break option with alternatives conditional");const y=this.clone(),v=c.when(y,g,b),w=v.is?[v]:v.switch;for(const E of w)if(E.then&&E.otherwise){y.$_setFlag("_endedSwitch",!0,{clone:!1});break}return y.$_terms.matches.push(v),y.$_mutateRebuild()}},match:{method(g){if(a(["any","one","all"].includes(g),"Invalid alternatives match mode",g),g!=="any")for(const b of this.$_terms.matches)a(b.schema,"Cannot combine match mode",g,"with conditional rules");return this.$_setFlag("match",g)}},try:{method(...g){a(g.length,"Missing alternative schemas"),d.verifyFlat(g,"try"),a(!this._flags._endedSwitch,"Unreachable condition");const b=this.clone();for(const y of g)b.$_terms.matches.push({schema:b.$_compile(y)});return b.$_mutateRebuild()}}},overrides:{label(g){return this.$_parent("label",g).$_modify({each:(b,y)=>y.path[0]!=="is"&&typeof b._flags.label!="string"?b.label(g):void 0,ref:!1})}},rebuild(g){g.$_modify({each:b=>{d.isSchema(b)&&b.type==="array"&&g.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(g,b){if(b.matches)for(const y of b.matches){const{schema:v,ref:w,is:E,not:S,then:T,otherwise:D}=y;g=v?g.try(v):w?g.conditional(w,{is:E,then:T,not:S,otherwise:D,switch:y.switch}):g.conditional(E,{then:T,otherwise:D})}return g}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),p.errors=function(g,{error:b,state:y}){if(!g.length)return{errors:b("alternatives.any")};if(g.length===1)return{errors:g[0].reports};const v=new Set,w=[];for(const{reports:E,schema:S}of g){if(E.length>1)return p.unmatched(g,b);const T=E[0];if(T instanceof f.Report==0)return p.unmatched(g,b);if(T.state.path.length!==y.path.length){w.push({type:S.type,report:T});continue}if(T.code==="any.only"){for(const R of T.local.valids)v.add(R);continue}const[D,k]=T.code.split(".");k!=="base"?w.push({type:S.type,report:T}):T.code==="object.base"?v.add(T.local.type):v.add(D)}return w.length?w.length===1?{errors:w[0].report}:p.unmatched(g,b):{errors:b("alternatives.types",{types:[...v]})}},p.unmatched=function(g,b){const y=[];for(const v of g)y.push(...v.reports);return{errors:b("alternatives.match",f.details(y,{override:!1}))}}},8068:(i,s,o)=>{const a=o(375),l=o(7629),u=o(8160),d=o(6914);i.exports=l.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(c,f){return a(typeof c=="function","Method must be a function"),a(f===void 0||f&&typeof f=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:c,description:f}})},validate(c,f,{method:h}){try{return h(c,f)}catch(p){return f.error("any.custom",{error:p})}},args:["method","description"],multi:!0},messages:{method(c){return this.prefs({messages:c})}},shared:{method(c){a(u.isSchema(c)&&c._flags.id,"Schema must be a schema with an id");const f=this.clone();return f.$_terms.shared=f.$_terms.shared||[],f.$_terms.shared.push(c),f.$_mutateRegister(c),f}},warning:{method(c,f){return a(c&&typeof c=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:c,local:f},warn:!0})},validate:(c,f,{code:h,local:p})=>f.error(h,p),args:["code","local"],multi:!0}},modifiers:{keep(c,f=!0){c.keep=f},message(c,f){c.message=d.compile(f)},warn(c,f=!0){c.warn=f}},manifest:{build(c,f){for(const h in f){const p=f[h];if(["examples","externals","metas","notes","tags"].includes(h))for(const g of p)c=c[h.slice(0,-1)](g);else if(h!=="alterations")if(h!=="whens"){if(h==="shared")for(const g of p)c=c.shared(g)}else for(const g of p){const{ref:b,is:y,not:v,then:w,otherwise:E,concat:S}=g;c=S?c.concat(S):b?c.when(b,{is:y,not:v,then:w,otherwise:E,switch:g.switch,break:g.break}):c.when(y,{then:w,otherwise:E,break:g.break})}else{const g={};for(const{target:b,adjuster:y}of p)g[b]=y;c=c.alter(g)}}return c}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(i,s,o)=>{const a=o(375),l=o(9474),u=o(9621),d=o(8068),c=o(8160),f=o(3292),h={};i.exports=d.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(p,{schema:g,state:b,prefs:y}){if(!Array.isArray(p))return;const v=g.$_getRule("sort");return v?h.sort(g,p,v.args.options,b,y):void 0}},validate(p,{schema:g,error:b}){if(!Array.isArray(p)){if(g._flags.single){const y=[p];return y[c.symbols.arraySingle]=!0,{value:y}}return{errors:b("array.base")}}if(g.$_getRule("items")||g.$_terms.externals)return{value:p.slice()}},rules:{has:{method(p){p=this.$_compile(p,{appendPath:!0});const g=this.$_addRule({name:"has",args:{schema:p}});return g.$_mutateRegister(p),g},validate(p,{state:g,prefs:b,error:y},{schema:v}){const w=[p,...g.ancestors];for(let S=0;S<p.length;++S){const T=g.localize([...g.path,S],w,v);if(v.$_match(p[S],T,b))return p}const E=v._flags.label;return E?y("array.hasKnown",{patternLabel:E}):y("array.hasUnknown",null)},multi:!0},items:{method(...p){c.verifyFlat(p,"items");const g=this.$_addRule("items");for(let b=0;b<p.length;++b){const y=c.tryWithPath(()=>this.$_compile(p[b]),b,{append:!0});g.$_terms.items.push(y)}return g.$_mutateRebuild()},validate(p,{schema:g,error:b,state:y,prefs:v,errorsArray:w}){const E=g.$_terms._requireds.slice(),S=g.$_terms.ordered.slice(),T=[...g.$_terms._inclusions,...E],D=!p[c.symbols.arraySingle];delete p[c.symbols.arraySingle];const k=w();let R=p.length;for(let O=0;O<R;++O){const B=p[O];let K=!1,L=!1;const I=D?O:new Number(O),$=[...y.path,I];if(!g._flags.sparse&&B===void 0){if(k.push(b("array.sparse",{key:I,path:$,pos:O,value:void 0},y.localize($))),v.abortEarly)return k;S.shift();continue}const U=[p,...y.ancestors];for(const te of g.$_terms._exclusions)if(te.$_match(B,y.localize($,U,te),v,{presence:"ignore"})){if(k.push(b("array.excludes",{pos:O,value:B},y.localize($))),v.abortEarly)return k;K=!0,S.shift();break}if(K)continue;if(g.$_terms.ordered.length){if(S.length){const te=S.shift(),le=te.$_validate(B,y.localize($,U,te),v);if(le.errors){if(k.push(...le.errors),v.abortEarly)return k}else if(te._flags.result==="strip")h.fastSplice(p,O),--O,--R;else{if(!g._flags.sparse&&le.value===void 0){if(k.push(b("array.sparse",{key:I,path:$,pos:O,value:void 0},y.localize($))),v.abortEarly)return k;continue}p[O]=le.value}continue}if(!g.$_terms.items.length){if(k.push(b("array.orderedLength",{pos:O,limit:g.$_terms.ordered.length})),v.abortEarly)return k;break}}const q=[];let Y=E.length;for(let te=0;te<Y;++te){const le=y.localize($,U,E[te]);le.snapshot();const ee=E[te].$_validate(B,le,v);if(q[te]=ee,!ee.errors){if(le.commit(),p[O]=ee.value,L=!0,h.fastSplice(E,te),--te,--Y,!g._flags.sparse&&ee.value===void 0&&(k.push(b("array.sparse",{key:I,path:$,pos:O,value:void 0},y.localize($))),v.abortEarly))return k;break}le.restore()}if(L)continue;const X=v.stripUnknown&&!!v.stripUnknown.arrays||!1;Y=T.length;for(const te of T){let le;const ee=E.indexOf(te);if(ee!==-1)le=q[ee];else{const z=y.localize($,U,te);if(z.snapshot(),le=te.$_validate(B,z,v),!le.errors){z.commit(),te._flags.result==="strip"?(h.fastSplice(p,O),--O,--R):g._flags.sparse||le.value!==void 0?p[O]=le.value:(k.push(b("array.sparse",{key:I,path:$,pos:O,value:void 0},y.localize($))),K=!0),L=!0;break}z.restore()}if(Y===1){if(X){h.fastSplice(p,O),--O,--R,L=!0;break}if(k.push(...le.errors),v.abortEarly)return k;K=!0;break}}if(!K&&(g.$_terms._inclusions.length||g.$_terms._requireds.length)&&!L){if(X){h.fastSplice(p,O),--O,--R;continue}if(k.push(b("array.includes",{pos:O,value:B},y.localize($))),v.abortEarly)return k}}return E.length&&h.fillMissedErrors(g,k,E,p,y,v),S.length&&(h.fillOrderedErrors(g,k,S,p,y,v),k.length||h.fillDefault(S,p,y,v)),k.length?k:p},priority:!0,manifest:!1},length:{method(p){return this.$_addRule({name:"length",args:{limit:p},operator:"="})},validate:(p,g,{limit:b},{name:y,operator:v,args:w})=>c.compare(p.length,b,v)?p:g.error("array."+y,{limit:w.limit,value:p}),args:[{name:"limit",ref:!0,assert:c.limit,message:"must be a positive integer"}]},max:{method(p){return this.$_addRule({name:"max",method:"length",args:{limit:p},operator:"<="})}},min:{method(p){return this.$_addRule({name:"min",method:"length",args:{limit:p},operator:">="})}},ordered:{method(...p){c.verifyFlat(p,"ordered");const g=this.$_addRule("items");for(let b=0;b<p.length;++b){const y=c.tryWithPath(()=>this.$_compile(p[b]),b,{append:!0});h.validateSingle(y,g),g.$_mutateRegister(y),g.$_terms.ordered.push(y)}return g.$_mutateRebuild()}},single:{method(p){const g=p===void 0||!!p;return a(!g||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",g)}},sort:{method(p={}){c.assertOptions(p,["by","order"]);const g={order:p.order||"ascending"};return p.by&&(g.by=f.ref(p.by,{ancestor:0}),a(!g.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:g}})},validate(p,{error:g,state:b,prefs:y,schema:v},{options:w}){const{value:E,errors:S}=h.sort(v,p,w,b,y);if(S)return S;for(let T=0;T<p.length;++T)if(p[T]!==E[T])return g("array.sort",{order:w.order,by:w.by?w.by.key:"value"});return p},convert:!0},sparse:{method(p){const g=p===void 0||!!p;return this._flags.sparse===g?this:(g?this.clone():this.$_addRule("items")).$_setFlag("sparse",g,{clone:!1})}},unique:{method(p,g={}){a(!p||typeof p=="function"||typeof p=="string","comparator must be a function or a string"),c.assertOptions(g,["ignoreUndefined","separator"]);const b={name:"unique",args:{options:g,comparator:p}};if(p)if(typeof p=="string"){const y=c.default(g.separator,".");b.path=y?p.split(y):[p]}else b.comparator=p;return this.$_addRule(b)},validate(p,{state:g,error:b,schema:y},{comparator:v,options:w},{comparator:E,path:S}){const T={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),bigint:Object.create(null),object:new Map,function:new Map,custom:new Map},D=E||l,k=w.ignoreUndefined;for(let R=0;R<p.length;++R){const O=S?u(p[R],S):p[R],B=E?T.custom:T[typeof O];if(a(B,"Failed to find unique map container for type",typeof O),B instanceof Map){const K=B.entries();let L;for(;!(L=K.next()).done;)if(D(L.value[0],O)){const I=g.localize([...g.path,R],[p,...g.ancestors]),$={pos:R,value:p[R],dupePos:L.value[1],dupeValue:p[L.value[1]]};return S&&($.path=v),b("array.unique",$,I)}B.set(O,R)}else{if((!k||O!==void 0)&&B[O]!==void 0){const K={pos:R,value:p[R],dupePos:B[O],dupeValue:p[B[O]]};return S&&(K.path=v),b("array.unique",K,g.localize([...g.path,R],[p,...g.ancestors]))}B[O]=R}}return p},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(p,g)=>new Set(p)}},rebuild(p){p.$_terms._inclusions=[],p.$_terms._exclusions=[],p.$_terms._requireds=[];for(const g of p.$_terms.items)h.validateSingle(g,p),g._flags.presence==="required"?p.$_terms._requireds.push(g):g._flags.presence==="forbidden"?p.$_terms._exclusions.push(g):p.$_terms._inclusions.push(g);for(const g of p.$_terms.ordered)h.validateSingle(g,p)},manifest:{build:(p,g)=>(g.items&&(p=p.items(...g.items)),g.ordered&&(p=p.ordered(...g.ordered)),p)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),h.fillMissedErrors=function(p,g,b,y,v,w){const E=[];let S=0;for(const T of b){const D=T._flags.label;D?E.push(D):++S}E.length?S?g.push(p.$_createError("array.includesRequiredBoth",y,{knownMisses:E,unknownMisses:S},v,w)):g.push(p.$_createError("array.includesRequiredKnowns",y,{knownMisses:E},v,w)):g.push(p.$_createError("array.includesRequiredUnknowns",y,{unknownMisses:S},v,w))},h.fillOrderedErrors=function(p,g,b,y,v,w){const E=[];for(const S of b)S._flags.presence==="required"&&E.push(S);E.length&&h.fillMissedErrors(p,g,E,y,v,w)},h.fillDefault=function(p,g,b,y){const v=[];let w=!0;for(let E=p.length-1;E>=0;--E){const S=p[E],T=[g,...b.ancestors],D=S.$_validate(void 0,b.localize(b.path,T,S),y).value;if(w){if(D===void 0)continue;w=!1}v.unshift(D)}v.length&&g.push(...v)},h.fastSplice=function(p,g){let b=g;for(;b<p.length;)p[b++]=p[b];--p.length},h.validateSingle=function(p,g){(p.type==="array"||p._flags._arrayItems)&&(a(!g._flags.single,"Cannot specify array item with single rule enabled"),g.$_setFlag("_arrayItems",!0,{clone:!1}))},h.sort=function(p,g,b,y,v){const w=b.order==="ascending"?1:-1,E=-1*w,S=w,T=(D,k)=>{let R=h.compare(D,k,E,S);if(R!==null||(b.by&&(D=b.by.resolve(D,y,v),k=b.by.resolve(k,y,v)),R=h.compare(D,k,E,S),R!==null))return R;const O=typeof D;if(O!==typeof k)throw p.$_createError("array.sort.mismatching",g,null,y,v);if(O!=="number"&&O!=="string")throw p.$_createError("array.sort.unsupported",g,{type:O},y,v);return O==="number"?(D-k)*w:D<k?E:S};try{return{value:g.slice().sort(T)}}catch(D){return{errors:D}}},h.compare=function(p,g,b,y){return p===g?0:p===void 0?1:g===void 0?-1:p===null?y:g===null?b:null}},4937:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),d=o(2036),c={isBool:function(f){return typeof f=="boolean"}};i.exports=l.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(f,{schema:h}){if(typeof f!="boolean"){if(typeof f=="string"){const p=h._flags.sensitive?f:f.toLowerCase();f=p==="true"||p!=="false"&&f}return typeof f!="boolean"&&(f=h.$_terms.truthy&&h.$_terms.truthy.has(f,null,null,!h._flags.sensitive)||(!h.$_terms.falsy||!h.$_terms.falsy.has(f,null,null,!h._flags.sensitive))&&f),{value:f}}},validate(f,{error:h}){if(typeof f!="boolean")return{value:f,errors:h("boolean.base")}},rules:{truthy:{method(...f){u.verifyFlat(f,"truthy");const h=this.clone();h.$_terms.truthy=h.$_terms.truthy||new d;for(let p=0;p<f.length;++p){const g=f[p];a(g!==void 0,"Cannot call truthy with undefined"),h.$_terms.truthy.add(g)}return h}},falsy:{method(...f){u.verifyFlat(f,"falsy");const h=this.clone();h.$_terms.falsy=h.$_terms.falsy||new d;for(let p=0;p<f.length;++p){const g=f[p];a(g!==void 0,"Cannot call falsy with undefined"),h.$_terms.falsy.add(g)}return h}},sensitive:{method(f=!0){return this.$_setFlag("sensitive",f)}}},cast:{number:{from:c.isBool,to:(f,h)=>f?1:0},string:{from:c.isBool,to:(f,h)=>f?"true":"false"}},manifest:{build:(f,h)=>(h.truthy&&(f=f.truthy(...h.truthy)),h.falsy&&(f=f.falsy(...h.falsy)),f)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),d=o(3328),c={isDate:function(f){return f instanceof Date}};i.exports=l.extend({type:"date",coerce:{from:["number","string"],method:(f,{schema:h})=>({value:c.parse(f,h._flags.format)||f})},validate(f,{schema:h,error:p,prefs:g}){if(f instanceof Date&&!isNaN(f.getTime()))return;const b=h._flags.format;return g.convert&&b&&typeof f=="string"?{value:f,errors:p("date.format",{format:b})}:{value:f,errors:p("date.base")}},rules:{compare:{method:!1,validate(f,h,{date:p},{name:g,operator:b,args:y}){const v=p==="now"?Date.now():p.getTime();return u.compare(f.getTime(),v,b)?f:h.error("date."+g,{limit:y.date,value:f})},args:[{name:"date",ref:!0,normalize:f=>f==="now"?f:c.parse(f),assert:f=>f!==null,message:"must have a valid date format"}]},format:{method(f){return a(["iso","javascript","unix"].includes(f),"Unknown date format",f),this.$_setFlag("format",f)}},greater:{method(f){return this.$_addRule({name:"greater",method:"compare",args:{date:f},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(f){return this.$_addRule({name:"less",method:"compare",args:{date:f},operator:"<"})}},max:{method(f){return this.$_addRule({name:"max",method:"compare",args:{date:f},operator:"<="})}},min:{method(f){return this.$_addRule({name:"min",method:"compare",args:{date:f},operator:">="})}},timestamp:{method(f="javascript"){return a(["javascript","unix"].includes(f),'"type" must be one of "javascript, unix"'),this.format(f)}}},cast:{number:{from:c.isDate,to:(f,h)=>f.getTime()},string:{from:c.isDate,to:(f,{prefs:h})=>d.date(f,h)}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),c.parse=function(f,h){if(f instanceof Date)return f;if(typeof f!="string"&&(isNaN(f)||!isFinite(f))||/^\s*$/.test(f))return null;if(h==="iso")return u.isIsoDate(f)?c.date(f.toString()):null;const p=f;if(typeof f=="string"&&/^[+-]?\d+(\.\d+)?$/.test(f)&&(f=parseFloat(f)),h){if(h==="javascript")return c.date(1*f);if(h==="unix")return c.date(1e3*f);if(typeof p=="string")return null}return c.date(f)},c.date=function(f){const h=new Date(f);return isNaN(h.getTime())?null:h}},390:(i,s,o)=>{const a=o(375),l=o(7824);i.exports=l.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:u}})},validate:(u,d,{n:c})=>u.length===c?u:d.error("function.arity",{n:c})},class:{method(){return this.$_addRule("class")},validate:(u,d)=>/^\s*class\s/.test(u.toString())?u:d.error("function.class",{value:u})},minArity:{method(u){return a(Number.isSafeInteger(u)&&u>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:u}})},validate:(u,d,{n:c})=>u.length>=c?u:d.error("function.minArity",{n:c})},maxArity:{method(u){return a(Number.isSafeInteger(u)&&u>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:u}})},validate:(u,d,{n:c})=>u.length<=c?u:d.error("function.maxArity",{n:c})}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(i,s,o)=>{const a=o(978),l=o(375),u=o(8571),d=o(3652),c=o(8068),f=o(8160),h=o(3292),p=o(6354),g=o(6133),b=o(3328),y={renameDefaults:{alias:!1,multiple:!1,override:!1}};i.exports=c.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:void 0}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(v,w)=>v.keys(w),validate(v,{schema:w,error:E,state:S,prefs:T}){if(!v||typeof v!==w.$_property("typeof")||Array.isArray(v))return{value:v,errors:E("object.base",{type:w.$_property("typeof")})};if(!(w.$_terms.renames||w.$_terms.dependencies||w.$_terms.keys||w.$_terms.patterns||w.$_terms.externals))return;v=y.clone(v,T);const D=[];if(w.$_terms.renames&&!y.rename(w,v,S,T,D))return{value:v,errors:D};if(!w.$_terms.keys&&!w.$_terms.patterns&&!w.$_terms.dependencies)return{value:v,errors:D};const k=new Set(Object.keys(v));if(w.$_terms.keys){const R=[v,...S.ancestors];for(const O of w.$_terms.keys){const B=O.key,K=v[B];k.delete(B);const L=S.localize([...S.path,B],R,O),I=O.schema.$_validate(K,L,T);if(I.errors){if(T.abortEarly)return{value:v,errors:I.errors};I.value!==void 0&&(v[B]=I.value),D.push(...I.errors)}else O.schema._flags.result==="strip"||I.value===void 0&&K!==void 0?delete v[B]:I.value!==void 0&&(v[B]=I.value)}}if(k.size||w._flags._hasPatternMatch){const R=y.unknown(w,v,k,D,S,T);if(R)return R}if(w.$_terms.dependencies)for(const R of w.$_terms.dependencies){if(R.key!==null&&y.isPresent(R.options)(R.key.resolve(v,S,T,null,{shadow:!1}))===!1)continue;const O=y.dependencies[R.rel](w,R,v,S,T);if(O){const B=w.$_createError(O.code,v,O.context,S,T);if(T.abortEarly)return{value:v,errors:B};D.push(B)}}return{value:v,errors:D}},rules:{and:{method(...v){return f.verifyFlat(v,"and"),y.dependency(this,"and",null,v)}},append:{method(v){return v==null||Object.keys(v).length===0?this:this.keys(v)}},assert:{method(v,w,E){b.isTemplate(v)||(v=h.ref(v)),l(E===void 0||typeof E=="string","Message must be a string"),w=this.$_compile(w,{appendPath:!0});const S=this.$_addRule({name:"assert",args:{subject:v,schema:w,message:E}});return S.$_mutateRegister(v),S.$_mutateRegister(w),S},validate(v,{error:w,prefs:E,state:S},{subject:T,schema:D,message:k}){const R=T.resolve(v,S,E),O=g.isRef(T)?T.absolute(S):[];return D.$_match(R,S.localize(O,[v,...S.ancestors],D),E)?v:w("object.assert",{subject:T,message:k})},args:["subject","schema","message"],multi:!0},instance:{method(v,w){return l(typeof v=="function","constructor must be a function"),w=w||v.name,this.$_addRule({name:"instance",args:{constructor:v,name:w}})},validate:(v,w,{constructor:E,name:S})=>v instanceof E?v:w.error("object.instance",{type:S,value:v}),args:["constructor","name"]},keys:{method(v){l(v===void 0||typeof v=="object","Object schema must be a valid object"),l(!f.isSchema(v),"Object schema cannot be a joi schema");const w=this.clone();if(v)if(Object.keys(v).length){w.$_terms.keys=w.$_terms.keys?w.$_terms.keys.filter(E=>!v.hasOwnProperty(E.key)):new y.Keys;for(const E in v)f.tryWithPath(()=>w.$_terms.keys.push({key:E,schema:this.$_compile(v[E])}),E)}else w.$_terms.keys=new y.Keys;else w.$_terms.keys=null;return w.$_mutateRebuild()}},length:{method(v){return this.$_addRule({name:"length",args:{limit:v},operator:"="})},validate:(v,w,{limit:E},{name:S,operator:T,args:D})=>f.compare(Object.keys(v).length,E,T)?v:w.error("object."+S,{limit:D.limit,value:v}),args:[{name:"limit",ref:!0,assert:f.limit,message:"must be a positive integer"}]},max:{method(v){return this.$_addRule({name:"max",method:"length",args:{limit:v},operator:"<="})}},min:{method(v){return this.$_addRule({name:"min",method:"length",args:{limit:v},operator:">="})}},nand:{method(...v){return f.verifyFlat(v,"nand"),y.dependency(this,"nand",null,v)}},or:{method(...v){return f.verifyFlat(v,"or"),y.dependency(this,"or",null,v)}},oxor:{method(...v){return y.dependency(this,"oxor",null,v)}},pattern:{method(v,w,E={}){const S=v instanceof RegExp;S||(v=this.$_compile(v,{appendPath:!0})),l(w!==void 0,"Invalid rule"),f.assertOptions(E,["fallthrough","matches"]),S&&l(!v.flags.includes("g")&&!v.flags.includes("y"),"pattern should not use global or sticky mode"),w=this.$_compile(w,{appendPath:!0});const T=this.clone();T.$_terms.patterns=T.$_terms.patterns||[];const D={[S?"regex":"schema"]:v,rule:w};return E.matches&&(D.matches=this.$_compile(E.matches),D.matches.type!=="array"&&(D.matches=D.matches.$_root.array().items(D.matches)),T.$_mutateRegister(D.matches),T.$_setFlag("_hasPatternMatch",!0,{clone:!1})),E.fallthrough&&(D.fallthrough=!0),T.$_terms.patterns.push(D),T.$_mutateRegister(w),T}},ref:{method(){return this.$_addRule("ref")},validate:(v,w)=>g.isRef(v)?v:w.error("object.refType",{value:v})},regex:{method(){return this.$_addRule("regex")},validate:(v,w)=>v instanceof RegExp?v:w.error("object.regex",{value:v})},rename:{method(v,w,E={}){l(typeof v=="string"||v instanceof RegExp,"Rename missing the from argument"),l(typeof w=="string"||w instanceof b,"Invalid rename to argument"),l(w!==v,"Cannot rename key to same name:",v),f.assertOptions(E,["alias","ignoreUndefined","override","multiple"]);const S=this.clone();S.$_terms.renames=S.$_terms.renames||[];for(const T of S.$_terms.renames)l(T.from!==v,"Cannot rename the same key multiple times");return w instanceof b&&S.$_mutateRegister(w),S.$_terms.renames.push({from:v,to:w,options:a(y.renameDefaults,E)}),S}},schema:{method(v="any"){return this.$_addRule({name:"schema",args:{type:v}})},validate:(v,w,{type:E})=>!f.isSchema(v)||E!=="any"&&v.type!==E?w.error("object.schema",{type:E}):v},unknown:{method(v){return this.$_setFlag("unknown",v!==!1)}},with:{method(v,w,E={}){return y.dependency(this,"with",v,w,E)}},without:{method(v,w,E={}){return y.dependency(this,"without",v,w,E)}},xor:{method(...v){return f.verifyFlat(v,"xor"),y.dependency(this,"xor",null,v)}}},overrides:{default(v,w){return v===void 0&&(v=f.symbols.deepDefault),this.$_parent("default",v,w)}},rebuild(v){if(v.$_terms.keys){const w=new d.Sorter;for(const E of v.$_terms.keys)f.tryWithPath(()=>w.add(E,{after:E.schema.$_rootReferences(),group:E.key}),E.key);v.$_terms.keys=new y.Keys(...w.nodes)}},manifest:{build(v,w){if(w.keys&&(v=v.keys(w.keys)),w.dependencies)for(const{rel:E,key:S=null,peers:T,options:D}of w.dependencies)v=y.dependency(v,E,S,T,D);if(w.patterns)for(const{regex:E,schema:S,rule:T,fallthrough:D,matches:k}of w.patterns)v=v.pattern(E||S,T,{fallthrough:D,matches:k});if(w.renames)for(const{from:E,to:S,options:T}of w.renames)v=v.rename(E,S,T);return v}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),y.clone=function(v,w){if(typeof v=="object"){if(w.nonEnumerables)return u(v,{shallow:!0});const S=Object.create(Object.getPrototypeOf(v));return Object.assign(S,v),S}const E=function(...S){return v.apply(this,S)};return E.prototype=u(v.prototype),Object.defineProperty(E,"name",{value:v.name,writable:!1}),Object.defineProperty(E,"length",{value:v.length,writable:!1}),Object.assign(E,v),E},y.dependency=function(v,w,E,S,T){l(E===null||typeof E=="string",w,"key must be a strings"),T||(T=S.length>1&&typeof S[S.length-1]=="object"?S.pop():{}),f.assertOptions(T,["separator","isPresent"]),S=[].concat(S);const D=f.default(T.separator,"."),k=[];for(const O of S)l(typeof O=="string",w,"peers must be strings"),k.push(h.ref(O,{separator:D,ancestor:0,prefix:!1}));E!==null&&(E=h.ref(E,{separator:D,ancestor:0,prefix:!1}));const R=v.clone();return R.$_terms.dependencies=R.$_terms.dependencies||[],R.$_terms.dependencies.push(new y.Dependency(w,E,k,S,T)),R},y.dependencies={and(v,w,E,S,T){const D=[],k=[],R=w.peers.length,O=y.isPresent(w.options);for(const B of w.peers)O(B.resolve(E,S,T,null,{shadow:!1}))===!1?D.push(B.key):k.push(B.key);if(D.length!==R&&k.length!==R)return{code:"object.and",context:{present:k,presentWithLabels:y.keysToLabels(v,k),missing:D,missingWithLabels:y.keysToLabels(v,D)}}},nand(v,w,E,S,T){const D=[],k=y.isPresent(w.options);for(const B of w.peers)k(B.resolve(E,S,T,null,{shadow:!1}))&&D.push(B.key);if(D.length!==w.peers.length)return;const R=w.paths[0],O=w.paths.slice(1);return{code:"object.nand",context:{main:R,mainWithLabel:y.keysToLabels(v,R),peers:O,peersWithLabels:y.keysToLabels(v,O)}}},or(v,w,E,S,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,S,T,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)}}},oxor(v,w,E,S,T){const D=[],k=y.isPresent(w.options);for(const O of w.peers)k(O.resolve(E,S,T,null,{shadow:!1}))&&D.push(O.key);if(!D.length||D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)};return R.present=D,R.presentWithLabels=y.keysToLabels(v,D),{code:"object.oxor",context:R}},with(v,w,E,S,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,S,T,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:w.key.key,mainWithLabel:y.keysToLabels(v,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(v,k.key)}}},without(v,w,E,S,T){const D=y.isPresent(w.options);for(const k of w.peers)if(D(k.resolve(E,S,T,null,{shadow:!1})))return{code:"object.without",context:{main:w.key.key,mainWithLabel:y.keysToLabels(v,w.key.key),peer:k.key,peerWithLabel:y.keysToLabels(v,k.key)}}},xor(v,w,E,S,T){const D=[],k=y.isPresent(w.options);for(const O of w.peers)k(O.resolve(E,S,T,null,{shadow:!1}))&&D.push(O.key);if(D.length===1)return;const R={peers:w.paths,peersWithLabels:y.keysToLabels(v,w.paths)};return D.length===0?{code:"object.missing",context:R}:(R.present=D,R.presentWithLabels=y.keysToLabels(v,D),{code:"object.xor",context:R})}},y.keysToLabels=function(v,w){return Array.isArray(w)?w.map(E=>v.$_mapLabels(E)):v.$_mapLabels(w)},y.isPresent=function(v){return typeof v.isPresent=="function"?v.isPresent:w=>w!==void 0},y.rename=function(v,w,E,S,T){const D={};for(const k of v.$_terms.renames){const R=[],O=typeof k.from!="string";if(O)for(const B in w){if(w[B]===void 0&&k.options.ignoreUndefined||B===k.to)continue;const K=k.from.exec(B);K&&R.push({from:B,to:k.to,match:K})}else!Object.prototype.hasOwnProperty.call(w,k.from)||w[k.from]===void 0&&k.options.ignoreUndefined||R.push(k);for(const B of R){const K=B.from;let L=B.to;if(L instanceof b&&(L=L.render(w,E,S,B.match)),K!==L){if(!k.options.multiple&&D[L]&&(T.push(v.$_createError("object.rename.multiple",w,{from:K,to:L,pattern:O},E,S)),S.abortEarly)||Object.prototype.hasOwnProperty.call(w,L)&&!k.options.override&&!D[L]&&(T.push(v.$_createError("object.rename.override",w,{from:K,to:L,pattern:O},E,S)),S.abortEarly))return!1;w[K]===void 0?delete w[L]:w[L]=w[K],D[L]=!0,k.options.alias||delete w[K]}}}return!0},y.unknown=function(v,w,E,S,T,D){if(v.$_terms.patterns){let k=!1;const R=v.$_terms.patterns.map(B=>{if(B.matches)return k=!0,[]}),O=[w,...T.ancestors];for(const B of E){const K=w[B],L=[...T.path,B];for(let I=0;I<v.$_terms.patterns.length;++I){const $=v.$_terms.patterns[I];if($.regex){const Y=$.regex.test(B);if(T.mainstay.tracer.debug(T,"rule",`pattern.${I}`,Y?"pass":"error"),!Y)continue}else if(!$.schema.$_match(B,T.nest($.schema,`pattern.${I}`),D))continue;E.delete(B);const U=T.localize(L,O,{schema:$.rule,key:B}),q=$.rule.$_validate(K,U,D);if(q.errors){if(D.abortEarly)return{value:w,errors:q.errors};S.push(...q.errors)}if($.matches&&R[I].push(B),w[B]=q.value,!$.fallthrough)break}}if(k)for(let B=0;B<R.length;++B){const K=R[B];if(!K)continue;const L=v.$_terms.patterns[B].matches,I=T.localize(T.path,O,L),$=L.$_validate(K,I,D);if($.errors){const U=p.details($.errors,{override:!1});U.matches=K;const q=v.$_createError("object.pattern.match",w,U,T,D);if(D.abortEarly)return{value:w,errors:q};S.push(q)}}}if(E.size&&(v.$_terms.keys||v.$_terms.patterns)){if(D.stripUnknown&&v._flags.unknown===void 0||D.skipFunctions){const k=!(!D.stripUnknown||D.stripUnknown!==!0&&!D.stripUnknown.objects);for(const R of E)k?(delete w[R],E.delete(R)):typeof w[R]=="function"&&E.delete(R)}if(!f.default(v._flags.unknown,D.allowUnknown))for(const k of E){const R=T.localize([...T.path,k],[]),O=v.$_createError("object.unknown",w[k],{child:k},R,D,{flags:!1});if(D.abortEarly)return{value:w,errors:O};S.push(O)}}},y.Dependency=class{constructor(v,w,E,S,T){this.rel=v,this.key=w,this.peers=E,this.paths=S,this.options=T}describe(){const v={rel:this.rel,peers:this.paths};return this.key!==null&&(v.key=this.key.key),this.peers[0].separator!=="."&&(v.options={...v.options,separator:this.peers[0].separator}),this.options.isPresent&&(v.options={...v.options,isPresent:this.options.isPresent}),v}},y.Keys=class extends Array{concat(v){const w=this.slice(),E=new Map;for(let S=0;S<w.length;++S)E.set(w[S].key,S);for(const S of v){const T=S.key,D=E.get(T);D!==void 0?w[D]={key:T,schema:w[D].schema.concat(S.schema)}:w.push(S)}return w}}},8785:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),d=o(3292),c=o(6354),f={};i.exports=l.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(h,p)=>h.ref(p),validate(h,{schema:p,state:g,prefs:b}){a(p.$_terms.link,"Uninitialized link schema");const y=f.generate(p,h,g,b),v=p.$_terms.link[0].ref;return y.$_validate(h,g.nest(y,`link:${v.display}:${y.type}`),b)},generate:(h,p,g,b)=>f.generate(h,p,g,b),rules:{ref:{method(h){a(!this.$_terms.link,"Cannot reinitialize schema"),h=d.ref(h),a(h.type==="value"||h.type==="local","Invalid reference type:",h.type),a(h.type==="local"||h.ancestor==="root"||h.ancestor>0,"Link cannot reference itself");const p=this.clone();return p.$_terms.link=[{ref:h}],p}},relative:{method(h=!0){return this.$_setFlag("relative",h)}}},overrides:{concat(h){a(this.$_terms.link,"Uninitialized link schema"),a(u.isSchema(h),"Invalid schema object"),a(h.type!=="link","Cannot merge type link with another link");const p=this.clone();return p.$_terms.whens||(p.$_terms.whens=[]),p.$_terms.whens.push({concat:h}),p.$_mutateRebuild()}},manifest:{build:(h,p)=>(a(p.link,"Invalid link description missing link"),h.ref(p.link))}}),f.generate=function(h,p,g,b){let y=g.mainstay.links.get(h);if(y)return y._generate(p,g,b).schema;const v=h.$_terms.link[0].ref,{perspective:w,path:E}=f.perspective(v,g);f.assert(w,"which is outside of schema boundaries",v,h,g,b);try{y=E.length?w.$_reach(E):w}catch{f.assert(!1,"to non-existing schema",v,h,g,b)}return f.assert(y.type!=="link","which is another link",v,h,g,b),h._flags.relative||g.mainstay.links.set(h,y),y._generate(p,g,b).schema},f.perspective=function(h,p){if(h.type==="local"){for(const{schema:g,key:b}of p.schemas){if((g._flags.id||b)===h.path[0])return{perspective:g,path:h.path.slice(1)};if(g.$_terms.shared){for(const y of g.$_terms.shared)if(y._flags.id===h.path[0])return{perspective:y,path:h.path.slice(1)}}}return{perspective:null,path:null}}return h.ancestor==="root"?{perspective:p.schemas[p.schemas.length-1].schema,path:h.path}:{perspective:p.schemas[h.ancestor]&&p.schemas[h.ancestor].schema,path:h.path}},f.assert=function(h,p,g,b,y,v){h||a(!1,`"${c.label(b._flags,y,v)}" contains link reference "${g.display}" ${p}`)}},3832:(i,s,o)=>{const a=o(375),l=o(8068),u=o(8160),d={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/,decimalPlaces(c){const f=c.toString(),h=f.indexOf("."),p=f.indexOf("e");return(h<0?0:(p<0?f.length:p)-h-1)+(p<0?0:Math.max(0,-parseInt(f.slice(p+1))))}};i.exports=l.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(c,{schema:f,error:h}){if(!c.match(d.numberRx))return;c=c.trim();const p={value:parseFloat(c)};if(p.value===0&&(p.value=0),!f._flags.unsafe)if(c.match(/e/i)){if(d.extractSignificantDigits(c)!==d.extractSignificantDigits(String(p.value)))return p.errors=h("number.unsafe"),p}else{const g=p.value.toString();if(g.match(/e/i))return p;if(g!==d.normalizeDecimal(c))return p.errors=h("number.unsafe"),p}return p}},validate(c,{schema:f,error:h,prefs:p}){if(c===1/0||c===-1/0)return{value:c,errors:h("number.infinity")};if(!u.isNumber(c))return{value:c,errors:h("number.base")};const g={value:c};if(p.convert){const b=f.$_getRule("precision");if(b){const y=Math.pow(10,b.args.limit);g.value=Math.round(g.value*y)/y}}return g.value===0&&(g.value=0),!f._flags.unsafe&&(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&(g.errors=h("number.unsafe")),g},rules:{compare:{method:!1,validate:(c,f,{limit:h},{name:p,operator:g,args:b})=>u.compare(c,h,g)?c:f.error("number."+p,{limit:b.limit,value:c}),args:[{name:"limit",ref:!0,assert:u.isNumber,message:"must be a number"}]},greater:{method(c){return this.$_addRule({name:"greater",method:"compare",args:{limit:c},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(c,f)=>Math.trunc(c)-c==0?c:f.error("number.integer")},less:{method(c){return this.$_addRule({name:"less",method:"compare",args:{limit:c},operator:"<"})}},max:{method(c){return this.$_addRule({name:"max",method:"compare",args:{limit:c},operator:"<="})}},min:{method(c){return this.$_addRule({name:"min",method:"compare",args:{limit:c},operator:">="})}},multiple:{method(c){const f=typeof c=="number"?d.decimalPlaces(c):null,h=Math.pow(10,f);return this.$_addRule({name:"multiple",args:{base:c,baseDecimalPlace:f,pfactor:h}})},validate:(c,f,{base:h,baseDecimalPlace:p,pfactor:g},b)=>d.decimalPlaces(c)>p?f.error("number.multiple",{multiple:b.args.base,value:c}):Math.round(g*c)%Math.round(g*h)==0?c:f.error("number.multiple",{multiple:b.args.base,value:c}),args:[{name:"base",ref:!0,assert:c=>typeof c=="number"&&isFinite(c)&&c>0,message:"must be a positive number"},"baseDecimalPlace","pfactor"],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(c,f)=>Number.isSafeInteger(c)&&c>=0&&c<=65535?c:f.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(c){return a(Number.isSafeInteger(c),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:c}})},validate(c,f,{limit:h}){const p=c.toString().match(d.precisionRx);return Math.max((p[1]?p[1].length:0)-(p[2]?parseInt(p[2],10):0),0)<=h?c:f.error("number.precision",{limit:h,value:c})},convert:!0},sign:{method(c){return a(["negative","positive"].includes(c),"Invalid sign",c),this.$_addRule({name:"sign",args:{sign:c}})},validate:(c,f,{sign:h})=>h==="negative"&&c<0||h==="positive"&&c>0?c:f.error(`number.${h}`)},unsafe:{method(c=!0){return a(typeof c=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",c)}}},cast:{string:{from:c=>typeof c=="number",to:(c,f)=>c.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),d.extractSignificantDigits=function(c){return c.replace(d.exponentialPartRegex,"").replace(d.dotRegex,"").replace(d.trailingZerosRegex,"").replace(d.leadingSignAndZerosRegex,"")},d.normalizeDecimal=function(c){return(c=c.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&c.endsWith("0")&&(c=c.replace(/0+$/,"")),c==="-0"?"0":c}},8966:(i,s,o)=>{const a=o(7824);i.exports=a.extend({type:"object",cast:{map:{from:l=>l&&typeof l=="object",to:(l,u)=>new Map(Object.entries(l))}}})},7417:(i,s,o)=>{const a=o(375),l=o(5380),u=o(1745),d=o(9959),c=o(6064),f=o(9926),h=o(5752),p=o(8068),g=o(8160),b={tlds:f instanceof Set&&{tlds:{allow:f,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:{withPrefix:/^0x[0-9a-f]+$/i,withOptionalPrefix:/^(?:0x)?[0-9a-f]+$/i,withoutPrefix:/^[0-9a-f]+$/i},ipRegex:d.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};i.exports=p.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(y,{schema:v,state:w,prefs:E}){const S=v.$_getRule("normalize");S&&(y=y.normalize(S.args.form));const T=v.$_getRule("case");T&&(y=T.args.direction==="upper"?y.toLocaleUpperCase():y.toLocaleLowerCase());const D=v.$_getRule("trim");if(D&&D.args.enabled&&(y=y.trim()),v.$_terms.replacements)for(const R of v.$_terms.replacements)y=y.replace(R.pattern,R.replacement);const k=v.$_getRule("hex");if(k&&k.args.options.byteAligned&&y.length%2!=0&&(y=`0${y}`),v.$_getRule("isoDate")){const R=b.isoDate(y);R&&(y=R)}if(v._flags.truncate){const R=v.$_getRule("max");if(R){let O=R.args.limit;if(g.isResolvable(O)&&(O=O.resolve(y,w,E),!g.limit(O)))return{value:y,errors:v.$_createError("any.ref",O,{ref:R.args.limit,arg:"limit",reason:"must be a positive integer"},w,E)};y=y.slice(0,O)}}return{value:y}}},validate(y,{schema:v,error:w}){if(typeof y!="string")return{value:y,errors:w("string.base")};if(y===""){const E=v.$_getRule("min");return E&&E.args.limit===0?void 0:{value:y,errors:w("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(y,v)=>/^[a-zA-Z0-9]+$/.test(y)?y:v.error("string.alphanum")},base64:{method(y={}){return g.assertOptions(y,["paddingRequired","urlSafe"]),y={urlSafe:!1,paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),a(typeof y.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:y}})},validate:(y,v,{options:w})=>b.base64Regex[w.paddingRequired][w.urlSafe].test(y)?y:v.error("string.base64")},case:{method(y){return a(["lower","upper"].includes(y),"Invalid case:",y),this.$_addRule({name:"case",args:{direction:y}})},validate:(y,v,{direction:w})=>w==="lower"&&y===y.toLocaleLowerCase()||w==="upper"&&y===y.toLocaleUpperCase()?y:v.error(`string.${w}case`),convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(y,v){let w=y.length,E=0,S=1;for(;w--;){const T=y.charAt(w)*S;E+=T-9*(T>9),S^=3}return E>0&&E%10==0?y:v.error("string.creditCard")}},dataUri:{method(y={}){return g.assertOptions(y,["paddingRequired"]),y={paddingRequired:!0,...y},a(typeof y.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:y}})},validate(y,v,{options:w}){const E=y.match(b.dataUriRegex);return E&&(!E[2]||E[2]!=="base64"||b.base64Regex[w.paddingRequired].false.test(E[3]))?y:v.error("string.dataUri")}},domain:{method(y){y&&g.assertOptions(y,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const v=b.addressOptions(y);return this.$_addRule({name:"domain",args:{options:y},address:v})},validate:(y,v,w,{address:E})=>l.isValid(y,E)?y:v.error("string.domain")},email:{method(y={}){g.assertOptions(y,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),a(y.multiple===void 0||typeof y.multiple=="boolean","multiple option must be an boolean");const v=b.addressOptions(y),w=new RegExp(`\\s*[${y.separator?c(y.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:y},regex:w,address:v})},validate(y,v,{options:w},{regex:E,address:S}){const T=w.multiple?y.split(E):[y],D=[];for(const k of T)u.isValid(k,S)||D.push(k);return D.length?v.error("string.email",{value:y,invalids:D}):y}},guid:{alias:"uuid",method(y={}){g.assertOptions(y,["version","separator"]);let v="";if(y.version){const S=[].concat(y.version);a(S.length>=1,"version must have at least 1 valid version specified");const T=new Set;for(let D=0;D<S.length;++D){const k=S[D];a(typeof k=="string","version at position "+D+" must be a string");const R=b.guidVersions[k.toLowerCase()];a(R,"version at position "+D+" must be one of "+Object.keys(b.guidVersions).join(", ")),a(!T.has(R),"version at position "+D+" must not be a duplicate"),v+=R,T.add(R)}}a(b.guidSeparators.has(y.separator),'separator must be one of true, false, "-", or ":"');const w=y.separator===void 0?"[:-]?":y.separator===!0?"[:-]":y.separator===!1?"[]?":`\\${y.separator}`,E=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${w})[0-9A-F]{4}\\2?[${v||"0-9A-F"}][0-9A-F]{3}\\2?[${v?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:y},regex:E})},validate(y,v,w,{regex:E}){const S=E.exec(y);return S?b.guidBrackets[S[1]]!==S[S.length-1]?v.error("string.guid"):y:v.error("string.guid")}},hex:{method(y={}){return g.assertOptions(y,["byteAligned","prefix"]),y={byteAligned:!1,prefix:!1,...y},a(typeof y.byteAligned=="boolean","byteAligned must be boolean"),a(typeof y.prefix=="boolean"||y.prefix==="optional",'prefix must be boolean or "optional"'),this.$_addRule({name:"hex",args:{options:y}})},validate:(y,v,{options:w})=>(w.prefix==="optional"?b.hexRegex.withOptionalPrefix:w.prefix===!0?b.hexRegex.withPrefix:b.hexRegex.withoutPrefix).test(y)?w.byteAligned&&y.length%2!=0?v.error("string.hexAlign"):y:v.error("string.hex")},hostname:{method(){return this.$_addRule("hostname")},validate:(y,v)=>l.isValid(y,{minDomainSegments:1})||b.ipRegex.test(y)?y:v.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(y={}){g.assertOptions(y,["cidr","version"]);const{cidr:v,versions:w,regex:E}=d.regex(y),S=y.version?w:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:v,version:S}},regex:E})},validate:(y,v,{options:w},{regex:E})=>E.test(y)?y:w.version?v.error("string.ipVersion",{value:y,cidr:w.cidr,version:w.version}):v.error("string.ip",{value:y,cidr:w.cidr})},isoDate:{method(){return this.$_addRule("isoDate")},validate:(y,{error:v})=>b.isoDate(y)?y:v("string.isoDate")},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(y,v)=>b.isoDurationRegex.test(y)?y:v.error("string.isoDuration")},length:{method(y,v){return b.length(this,"length",y,"=",v)},validate(y,v,{limit:w,encoding:E},{name:S,operator:T,args:D}){const k=!E&&y.length;return g.compare(k,w,T)?y:v.error("string."+S,{limit:D.limit,value:y,encoding:E})},args:[{name:"limit",ref:!0,assert:g.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(y,v){return b.length(this,"max",y,"<=",v)},args:["limit","encoding"]},min:{method(y,v){return b.length(this,"min",y,">=",v)},args:["limit","encoding"]},normalize:{method(y="NFC"){return a(b.normalizationForms.includes(y),"normalization form must be one of "+b.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:y}})},validate:(y,{error:v},{form:w})=>y===y.normalize(w)?y:v("string.normalize",{value:y,form:w}),convert:!0},pattern:{alias:"regex",method(y,v={}){a(y instanceof RegExp,"regex must be a RegExp"),a(!y.flags.includes("g")&&!y.flags.includes("y"),"regex should not use global or sticky mode"),typeof v=="string"&&(v={name:v}),g.assertOptions(v,["invert","name"]);const w=["string.pattern",v.invert?".invert":"",v.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:y,options:v},errorCode:w})},validate:(y,v,{regex:w,options:E},{errorCode:S})=>w.test(y)^E.invert?y:v.error(S,{name:E.name,regex:w,value:y}),args:["regex","options"],multi:!0},replace:{method(y,v){typeof y=="string"&&(y=new RegExp(c(y),"g")),a(y instanceof RegExp,"pattern must be a RegExp"),a(typeof v=="string","replacement must be a String");const w=this.clone();return w.$_terms.replacements||(w.$_terms.replacements=[]),w.$_terms.replacements.push({pattern:y,replacement:v}),w}},token:{method(){return this.$_addRule("token")},validate:(y,v)=>/^\w+$/.test(y)?y:v.error("string.token")},trim:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:y}})},validate:(y,v,{enabled:w})=>w&&y!==y.trim()?v.error("string.trim"):y,convert:!0},truncate:{method(y=!0){return a(typeof y=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",y)}},uppercase:{method(){return this.case("upper")}},uri:{method(y={}){g.assertOptions(y,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme","encodeUri"]),y.domain&&g.assertOptions(y.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:v,scheme:w}=h.regex(y),E=y.domain?b.addressOptions(y.domain):null;return this.$_addRule({name:"uri",args:{options:y},regex:v,domain:E,scheme:w})},validate(y,v,{options:w},{regex:E,domain:S,scheme:T}){if(["http:/","https:/"].includes(y))return v.error("string.uri");let D=E.exec(y);if(!D&&v.prefs.convert&&w.encodeUri){const k=encodeURI(y);D=E.exec(k),D&&(y=k)}if(D){const k=D[1]||D[2];return!S||w.allowRelative&&!k||l.isValid(k,S)?y:v.error("string.domain",{value:k})}return w.relativeOnly?v.error("string.uriRelativeOnly"):w.scheme?v.error("string.uriCustomScheme",{scheme:T,value:y}):v.error("string.uri")}}},manifest:{build(y,v){if(v.replacements)for(const{pattern:w,replacement:E}of v.replacements)y=y.replace(w,E);return y}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),b.addressOptions=function(y){if(!y)return b.tlds||y;if(a(y.minDomainSegments===void 0||Number.isSafeInteger(y.minDomainSegments)&&y.minDomainSegments>0,"minDomainSegments must be a positive integer"),a(y.maxDomainSegments===void 0||Number.isSafeInteger(y.maxDomainSegments)&&y.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),y.tlds===!1)return y;if(y.tlds===!0||y.tlds===void 0)return a(b.tlds,"Built-in TLD list disabled"),Object.assign({},y,b.tlds);a(typeof y.tlds=="object","tlds must be true, false, or an object");const v=y.tlds.deny;if(v)return Array.isArray(v)&&(y=Object.assign({},y,{tlds:{deny:new Set(v)}})),a(y.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),a(!y.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),b.validateTlds(y.tlds.deny,"tlds.deny"),y;const w=y.tlds.allow;return w?w===!0?(a(b.tlds,"Built-in TLD list disabled"),Object.assign({},y,b.tlds)):(Array.isArray(w)&&(y=Object.assign({},y,{tlds:{allow:new Set(w)}})),a(y.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),b.validateTlds(y.tlds.allow,"tlds.allow"),y):y},b.validateTlds=function(y,v){for(const w of y)a(l.isValid(w,{minDomainSegments:1,maxDomainSegments:1}),`${v} must contain valid top level domain names`)},b.isoDate=function(y){if(!g.isIsoDate(y))return null;/.*T.*[+-]\d\d$/.test(y)&&(y+="00");const v=new Date(y);return isNaN(v.getTime())?null:v.toISOString()},b.length=function(y,v,w,E,S){return a(!S||!1,"Invalid encoding:",S),y.$_addRule({name:v,method:"length",args:{limit:w,encoding:S},operator:E})}},8826:(i,s,o)=>{const a=o(375),l=o(8068),u={};u.Map=class extends Map{slice(){return new u.Map(this)}},i.exports=l.extend({type:"symbol",terms:{map:{init:new u.Map}},coerce:{method(d,{schema:c,error:f}){const h=c.$_terms.map.get(d);return h&&(d=h),c._flags.only&&typeof d!="symbol"?{value:d,errors:f("symbol.map",{map:c.$_terms.map})}:{value:d}}},validate(d,{error:c}){if(typeof d!="symbol")return{value:d,errors:c("symbol.base")}},rules:{map:{method(d){d&&!d[Symbol.iterator]&&typeof d=="object"&&(d=Object.entries(d)),a(d&&d[Symbol.iterator],"Iterable must be an iterable or object");const c=this.clone(),f=[];for(const h of d){a(h&&h[Symbol.iterator],"Entry must be an iterable");const[p,g]=h;a(typeof p!="object"&&typeof p!="function"&&typeof p!="symbol","Key must not be of type object, function, or Symbol"),a(typeof g=="symbol","Value must be a Symbol"),c.$_terms.map.set(p,g),f.push(g)}return c.valid(...f)}}},manifest:{build:(d,c)=>(c.map&&(d=d.map(c.map)),d)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(i,s,o)=>{const a=o(375),l=o(8571),u=o(738),d=o(9621),c=o(8160),f=o(6354),h=o(493),p={result:Symbol("result")};s.entry=function(g,b,y){let v=c.defaults;y&&(a(y.warnings===void 0,"Cannot override warnings preference in synchronous validation"),a(y.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),v=c.preferences(c.defaults,y));const w=p.entry(g,b,v);a(!w.mainstay.externals.length,"Schema with external rules must use validateAsync()");const E={value:w.value};return w.error&&(E.error=w.error),w.mainstay.warnings.length&&(E.warning=f.details(w.mainstay.warnings)),w.mainstay.debug&&(E.debug=w.mainstay.debug),w.mainstay.artifacts&&(E.artifacts=w.mainstay.artifacts),E},s.entryAsync=async function(g,b,y){let v=c.defaults;y&&(v=c.preferences(c.defaults,y));const w=p.entry(g,b,v),E=w.mainstay;if(w.error)throw E.debug&&(w.error.debug=E.debug),w.error;if(E.externals.length){let T=w.value;const D=[];for(const k of E.externals){const R=k.state.path,O=k.schema.type==="link"?E.links.get(k.schema):null;let B,K,L=T;const I=R.length?[T]:[],$=R.length?d(g,R):g;if(R.length){B=R[R.length-1];let U=T;for(const q of R.slice(0,-1))U=U[q],I.unshift(U);K=I[0],L=K[B]}try{const U=(Y,X)=>(O||k.schema).$_createError(Y,L,X,k.state,v),q=await k.method(L,{schema:k.schema,linked:O,state:k.state,prefs:y,original:$,error:U,errorsArray:p.errorsArray,warn:(Y,X)=>E.warnings.push((O||k.schema).$_createError(Y,L,X,k.state,v)),message:(Y,X)=>(O||k.schema).$_createError("external",L,X,k.state,v,{messages:Y})});if(q===void 0||q===L)continue;if(q instanceof f.Report){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(q),v.abortEarly)break;continue}if(Array.isArray(q)&&q[c.symbols.errors]){if(E.tracer.log(k.schema,k.state,"rule","external","error"),D.push(...q),v.abortEarly)break;continue}K?(E.tracer.value(k.state,"rule",L,q,"external"),K[B]=q):(E.tracer.value(k.state,"rule",T,q,"external"),T=q)}catch(U){throw v.errors.label&&(U.message+=` (${k.label})`),U}}if(w.value=T,D.length)throw w.error=f.process(D,g,v),E.debug&&(w.error.debug=E.debug),w.error}if(!v.warnings&&!v.debug&&!v.artifacts)return w.value;const S={value:w.value};return E.warnings.length&&(S.warning=f.details(E.warnings)),E.debug&&(S.debug=E.debug),E.artifacts&&(S.artifacts=E.artifacts),S},p.Mainstay=class{constructor(g,b,y){this.externals=[],this.warnings=[],this.tracer=g,this.debug=b,this.links=y,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const g=this._snapshots.pop();this.externals=g.externals,this.warnings=g.warnings}commit(){this._snapshots.pop()}},p.entry=function(g,b,y){const{tracer:v,cleanup:w}=p.tracer(b,y),E=y.debug?[]:null,S=b._ids._schemaChain?new Map:null,T=new p.Mainstay(v,E,S),D=b._ids._schemaChain?[{schema:b}]:null,k=new h([],[],{mainstay:T,schemas:D}),R=s.validate(g,b,k,y);w&&b.$_root.untrace();const O=f.process(R.errors,g,y);return{value:R.value,error:O,mainstay:T}},p.tracer=function(g,b){return g.$_root._tracer?{tracer:g.$_root._tracer._register(g)}:b.debug?(a(g.$_root.trace,"Debug mode not supported"),{tracer:g.$_root.trace()._register(g),cleanup:!0}):{tracer:p.ignore}},s.validate=function(g,b,y,v,w={}){if(b.$_terms.whens&&(b=b._generate(g,y,v).schema),b._preferences&&(v=p.prefs(b,v)),b._cache&&v.cache){const O=b._cache.get(g);if(y.mainstay.tracer.debug(y,"validate","cached",!!O),O)return O}const E=(O,B,K)=>b.$_createError(O,g,B,K||y,v),S={original:g,prefs:v,schema:b,state:y,error:E,errorsArray:p.errorsArray,warn:(O,B,K)=>y.mainstay.warnings.push(E(O,B,K)),message:(O,B)=>b.$_createError("custom",g,B,y,v,{messages:O})};y.mainstay.tracer.entry(b,y);const T=b._definition;if(T.prepare&&g!==void 0&&v.convert){const O=T.prepare(g,S);if(O){if(y.mainstay.tracer.value(y,"prepare",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),S);g=O.value}}if(T.coerce&&g!==void 0&&v.convert&&(!T.coerce.from||T.coerce.from.includes(typeof g))){const O=T.coerce.method(g,S);if(O){if(y.mainstay.tracer.value(y,"coerced",g,O.value),O.errors)return p.finalize(O.value,[].concat(O.errors),S);g=O.value}}const D=b._flags.empty;D&&D.$_match(p.trim(g,b),y.nest(D),c.defaults)&&(y.mainstay.tracer.value(y,"empty",g,void 0),g=void 0);const k=w.presence||b._flags.presence||(b._flags._endedSwitch?null:v.presence);if(g===void 0){if(k==="forbidden")return p.finalize(g,null,S);if(k==="required")return p.finalize(g,[b.$_createError("any.required",g,null,y,v)],S);if(k==="optional"){if(b._flags.default!==c.symbols.deepDefault)return p.finalize(g,null,S);y.mainstay.tracer.value(y,"default",g,{}),g={}}}else if(k==="forbidden")return p.finalize(g,[b.$_createError("any.unknown",g,null,y,v)],S);const R=[];if(b._valids){const O=b._valids.get(g,y,v,b._flags.insensitive);if(O)return v.convert&&(y.mainstay.tracer.value(y,"valids",g,O.value),g=O.value),y.mainstay.tracer.filter(b,y,"valid",O),p.finalize(g,null,S);if(b._flags.only){const B=b.$_createError("any.only",g,{valids:b._valids.values({display:!0})},y,v);if(v.abortEarly)return p.finalize(g,[B],S);R.push(B)}}if(b._invalids){const O=b._invalids.get(g,y,v,b._flags.insensitive);if(O){y.mainstay.tracer.filter(b,y,"invalid",O);const B=b.$_createError("any.invalid",g,{invalids:b._invalids.values({display:!0})},y,v);if(v.abortEarly)return p.finalize(g,[B],S);R.push(B)}}if(T.validate){const O=T.validate(g,S);if(O&&(y.mainstay.tracer.value(y,"base",g,O.value),g=O.value,O.errors)){if(!Array.isArray(O.errors))return R.push(O.errors),p.finalize(g,R,S);if(O.errors.length)return R.push(...O.errors),p.finalize(g,R,S)}}return b._rules.length?p.rules(g,R,S):p.finalize(g,R,S)},p.rules=function(g,b,y){const{schema:v,state:w,prefs:E}=y;for(const S of v._rules){const T=v._definition.rules[S.method];if(T.convert&&E.convert){w.mainstay.tracer.log(v,w,"rule",S.name,"full");continue}let D,k=S.args;if(S._resolve.length){k=Object.assign({},k);for(const O of S._resolve){const B=T.argsByName.get(O),K=k[O].resolve(g,w,E),L=B.normalize?B.normalize(K):K,I=c.validateArg(L,null,B);if(I){D=v.$_createError("any.ref",K,{arg:O,ref:k[O],reason:I},w,E);break}k[O]=L}}D=D||T.validate(g,y,k,S);const R=p.rule(D,S);if(R.errors){if(w.mainstay.tracer.log(v,w,"rule",S.name,"error"),S.warn){w.mainstay.warnings.push(...R.errors);continue}if(E.abortEarly)return p.finalize(g,R.errors,y);b.push(...R.errors)}else w.mainstay.tracer.log(v,w,"rule",S.name,"pass"),w.mainstay.tracer.value(w,"rule",g,R.value,S.name),g=R.value}return p.finalize(g,b,y)},p.rule=function(g,b){return g instanceof f.Report?(p.error(g,b),{errors:[g],value:null}):Array.isArray(g)&&g[c.symbols.errors]?(g.forEach(y=>p.error(y,b)),{errors:g,value:null}):{errors:null,value:g}},p.error=function(g,b){return b.message&&g._setTemplate(b.message),g},p.finalize=function(g,b,y){b=b||[];const{schema:v,state:w,prefs:E}=y;if(b.length){const T=p.default("failover",void 0,b,y);T!==void 0&&(w.mainstay.tracer.value(w,"failover",g,T),g=T,b=[])}if(b.length&&v._flags.error)if(typeof v._flags.error=="function"){b=v._flags.error(b),Array.isArray(b)||(b=[b]);for(const T of b)a(T instanceof Error||T instanceof f.Report,"error() must return an Error object")}else b=[v._flags.error];if(g===void 0){const T=p.default("default",g,b,y);w.mainstay.tracer.value(w,"default",g,T),g=T}if(v._flags.cast&&g!==void 0){const T=v._definition.cast[v._flags.cast];if(T.from(g)){const D=T.to(g,y);w.mainstay.tracer.value(w,"cast",g,D,v._flags.cast),g=D}}if(v.$_terms.externals&&E.externals&&E._externals!==!1)for(const{method:T}of v.$_terms.externals)w.mainstay.externals.push({method:T,schema:v,state:w,label:f.label(v._flags,w,E)});const S={value:g,errors:b.length?b:null};return v._flags.result&&(S.value=v._flags.result==="strip"?void 0:y.original,w.mainstay.tracer.value(w,v._flags.result,g,S.value),w.shadow(g,v._flags.result)),v._cache&&E.cache!==!1&&!v._refs.length&&v._cache.set(y.original,S),g===void 0||S.errors||v._flags.artifact===void 0||(w.mainstay.artifacts=w.mainstay.artifacts||new Map,w.mainstay.artifacts.has(v._flags.artifact)||w.mainstay.artifacts.set(v._flags.artifact,[]),w.mainstay.artifacts.get(v._flags.artifact).push(w.path)),S},p.prefs=function(g,b){const y=b===c.defaults;return y&&g._preferences[c.symbols.prefs]?g._preferences[c.symbols.prefs]:(b=c.preferences(b,g._preferences),y&&(g._preferences[c.symbols.prefs]=b),b)},p.default=function(g,b,y,v){const{schema:w,state:E,prefs:S}=v,T=w._flags[g];if(S.noDefaults||T===void 0)return b;if(E.mainstay.tracer.log(w,E,"rule",g,"full"),!T)return T;if(typeof T=="function"){const D=T.length?[l(E.ancestors[0]),v]:[];try{return T(...D)}catch(k){return void y.push(w.$_createError(`any.${g}`,null,{error:k},E,S))}}return typeof T!="object"?T:T[c.symbols.literal]?T.literal:c.isResolvable(T)?T.resolve(b,E,S):l(T)},p.trim=function(g,b){if(typeof g!="string")return g;const y=b.$_getRule("trim");return y&&y.args.enabled?g.trim():g},p.ignore={active:!1,debug:u,entry:u,filter:u,log:u,resolve:u,value:u},p.errorsArray=function(){const g=[];return g[c.symbols.errors]=!0,g}},2036:(i,s,o)=>{const a=o(375),l=o(9474),u=o(8160),d={};i.exports=d.Values=class{constructor(c,f){this._values=new Set(c),this._refs=new Set(f),this._lowercase=d.lowercases(c),this._override=!1}get length(){return this._values.size+this._refs.size}add(c,f){u.isResolvable(c)?this._refs.has(c)||(this._refs.add(c),f&&f.register(c)):this.has(c,null,null,!1)||(this._values.add(c),typeof c=="string"&&this._lowercase.set(c.toLowerCase(),c))}static merge(c,f,h){if(c=c||new d.Values,f){if(f._override)return f.clone();for(const p of[...f._values,...f._refs])c.add(p)}if(h)for(const p of[...h._values,...h._refs])c.remove(p);return c.length?c:null}remove(c){u.isResolvable(c)?this._refs.delete(c):(this._values.delete(c),typeof c=="string"&&this._lowercase.delete(c.toLowerCase()))}has(c,f,h,p){return!!this.get(c,f,h,p)}get(c,f,h,p){if(!this.length)return!1;if(this._values.has(c))return{value:c};if(typeof c=="string"&&c&&p){const g=this._lowercase.get(c.toLowerCase());if(g)return{value:g}}if(!this._refs.size&&typeof c!="object")return!1;if(typeof c=="object"){for(const g of this._values)if(l(g,c))return{value:g}}if(f)for(const g of this._refs){const b=g.resolve(c,f,h,null,{in:!0});if(b===void 0)continue;const y=g.in&&typeof b=="object"?Array.isArray(b)?b:Object.keys(b):[b];for(const v of y)if(typeof v==typeof c){if(p&&c&&typeof c=="string"){if(v.toLowerCase()===c.toLowerCase())return{value:v,ref:g}}else if(l(v,c))return{value:v,ref:g}}}return!1}override(){this._override=!0}values(c){if(c&&c.display){const f=[];for(const h of[...this._values,...this._refs])h!==void 0&&f.push(h);return f}return Array.from([...this._values,...this._refs])}clone(){const c=new d.Values(this._values,this._refs);return c._override=this._override,c}concat(c){a(!c._override,"Cannot concat override set of values");const f=new d.Values([...this._values,...c._values],[...this._refs,...c._refs]);return f._override=this._override,f}describe(){const c=[];this._override&&c.push({override:!0});for(const f of this._values.values())c.push(f&&typeof f=="object"?{value:f}:f);for(const f of this._refs.values())c.push(f.describe());return c}},d.Values.prototype[u.symbols.values]=!0,d.Values.prototype.slice=d.Values.prototype.clone,d.lowercases=function(c){const f=new Map;if(c)for(const h of c)typeof h=="string"&&f.set(h.toLowerCase(),h);return f}},978:(i,s,o)=>{const a=o(375),l=o(8571),u=o(1687),d=o(9621),c={};i.exports=function(f,h,p={}){if(a(f&&typeof f=="object","Invalid defaults value: must be an object"),a(!h||h===!0||typeof h=="object","Invalid source value: must be true, falsy or an object"),a(typeof p=="object","Invalid options: must be an object"),!h)return null;if(p.shallow)return c.applyToDefaultsWithShallow(f,h,p);const g=l(f);if(h===!0)return g;const b=p.nullOverride!==void 0&&p.nullOverride;return u(g,h,{nullOverride:b,mergeArrays:!1})},c.applyToDefaultsWithShallow=function(f,h,p){const g=p.shallow;a(Array.isArray(g),"Invalid keys");const b=new Map,y=h===!0?null:new Set;for(let E of g){E=Array.isArray(E)?E:E.split(".");const S=d(f,E);S&&typeof S=="object"?b.set(S,y&&d(h,E)||S):y&&y.add(E)}const v=l(f,{},b);if(!y)return v;for(const E of y)c.reachCopy(v,h,E);const w=p.nullOverride!==void 0&&p.nullOverride;return u(v,h,{nullOverride:w,mergeArrays:!1})},c.reachCopy=function(f,h,p){for(const y of p){if(!(y in h))return;const v=h[y];if(typeof v!="object"||v===null)return;h=v}const g=h;let b=f;for(let y=0;y<p.length-1;++y){const v=p[y];typeof b[v]!="object"&&(b[v]={}),b=b[v]}b[p[p.length-1]]=g}},375:(i,s,o)=>{const a=o(7916);i.exports=function(l,...u){if(!l)throw u.length===1&&u[0]instanceof Error?u[0]:new a(u)}},8571:(i,s,o)=>{const a=o(9621),l=o(4277),u=o(7043),d={needsProtoHack:new Set([l.set,l.map,l.weakSet,l.weakMap])};i.exports=d.clone=function(c,f={},h=null){if(typeof c!="object"||c===null)return c;let p=d.clone,g=h;if(f.shallow){if(f.shallow!==!0)return d.cloneWithShallow(c,f);p=w=>w}else if(g){const w=g.get(c);if(w)return w}else g=new Map;const b=l.getInternalProto(c);if(b===l.buffer)return!1;if(b===l.date)return new Date(c.getTime());if(b===l.regex)return new RegExp(c);const y=d.base(c,b,f);if(y===c)return c;if(g&&g.set(c,y),b===l.set)for(const w of c)y.add(p(w,f,g));else if(b===l.map)for(const[w,E]of c)y.set(w,p(E,f,g));const v=u.keys(c,f);for(const w of v){if(w==="__proto__")continue;if(b===l.array&&w==="length"){y.length=c.length;continue}const E=Object.getOwnPropertyDescriptor(c,w);E?E.get||E.set?Object.defineProperty(y,w,E):E.enumerable?y[w]=p(c[w],f,g):Object.defineProperty(y,w,{enumerable:!1,writable:!0,configurable:!0,value:p(c[w],f,g)}):Object.defineProperty(y,w,{enumerable:!0,writable:!0,configurable:!0,value:p(c[w],f,g)})}return y},d.cloneWithShallow=function(c,f){const h=f.shallow;(f=Object.assign({},f)).shallow=!1;const p=new Map;for(const g of h){const b=a(c,g);typeof b!="object"&&typeof b!="function"||p.set(b,b)}return d.clone(c,f,p)},d.base=function(c,f,h){if(h.prototype===!1)return d.needsProtoHack.has(f)?new f.constructor:f===l.array?[]:{};const p=Object.getPrototypeOf(c);if(p&&p.isImmutable)return c;if(f===l.array){const g=[];return p!==f&&Object.setPrototypeOf(g,p),g}if(d.needsProtoHack.has(f)){const g=new p.constructor;return p!==f&&Object.setPrototypeOf(g,p),g}return Object.create(p)}},9474:(i,s,o)=>{const a=o(4277),l={mismatched:null};i.exports=function(u,d,c){return c=Object.assign({prototype:!0},c),!!l.isDeepEqual(u,d,c,[])},l.isDeepEqual=function(u,d,c,f){if(u===d)return u!==0||1/u==1/d;const h=typeof u;if(h!==typeof d||u===null||d===null)return!1;if(h==="function"){if(!c.deepFunction||u.toString()!==d.toString())return!1}else if(h!=="object")return u!=u&&d!=d;const p=l.getSharedType(u,d,!!c.prototype);switch(p){case a.buffer:return!1;case a.promise:return u===d;case a.regex:return u.toString()===d.toString();case l.mismatched:return!1}for(let g=f.length-1;g>=0;--g)if(f[g].isSame(u,d))return!0;f.push(new l.SeenEntry(u,d));try{return!!l.isDeepEqualObj(p,u,d,c,f)}finally{f.pop()}},l.getSharedType=function(u,d,c){if(c)return Object.getPrototypeOf(u)!==Object.getPrototypeOf(d)?l.mismatched:a.getInternalProto(u);const f=a.getInternalProto(u);return f!==a.getInternalProto(d)?l.mismatched:f},l.valueOf=function(u){const d=u.valueOf;if(d===void 0)return u;try{return d.call(u)}catch(c){return c}},l.hasOwnEnumerableProperty=function(u,d){return Object.prototype.propertyIsEnumerable.call(u,d)},l.isSetSimpleEqual=function(u,d){for(const c of Set.prototype.values.call(u))if(!Set.prototype.has.call(d,c))return!1;return!0},l.isDeepEqualObj=function(u,d,c,f,h){const{isDeepEqual:p,valueOf:g,hasOwnEnumerableProperty:b}=l,{keys:y,getOwnPropertySymbols:v}=Object;if(u===a.array){if(!f.part){if(d.length!==c.length)return!1;for(let D=0;D<d.length;++D)if(!p(d[D],c[D],f,h))return!1;return!0}for(const D of d)for(const k of c)if(p(D,k,f,h))return!0}else if(u===a.set){if(d.size!==c.size)return!1;if(!l.isSetSimpleEqual(d,c)){const D=new Set(Set.prototype.values.call(c));for(const k of Set.prototype.values.call(d)){if(D.delete(k))continue;let R=!1;for(const O of D)if(p(k,O,f,h)){D.delete(O),R=!0;break}if(!R)return!1}}}else if(u===a.map){if(d.size!==c.size)return!1;for(const[D,k]of Map.prototype.entries.call(d))if(k===void 0&&!Map.prototype.has.call(c,D)||!p(k,Map.prototype.get.call(c,D),f,h))return!1}else if(u===a.error&&(d.name!==c.name||d.message!==c.message))return!1;const w=g(d),E=g(c);if((d!==w||c!==E)&&!p(w,E,f,h))return!1;const S=y(d);if(!f.part&&S.length!==y(c).length&&!f.skip)return!1;let T=0;for(const D of S)if(f.skip&&f.skip.includes(D))c[D]===void 0&&++T;else if(!b(c,D)||!p(d[D],c[D],f,h))return!1;if(!f.part&&S.length-T!==y(c).length)return!1;if(f.symbols!==!1){const D=v(d),k=new Set(v(c));for(const R of D){if(!f.skip||!f.skip.includes(R)){if(b(d,R)){if(!b(c,R)||!p(d[R],c[R],f,h))return!1}else if(b(c,R))return!1}k.delete(R)}for(const R of k)if(b(c,R))return!1}return!0},l.SeenEntry=class{constructor(u,d){this.obj=u,this.ref=d}isSame(u,d){return this.obj===u&&this.ref===d}}},7916:(i,s,o)=>{const a=o(8761);i.exports=class extends Error{constructor(l){super(l.filter(u=>u!=="").map(u=>typeof u=="string"?u:u instanceof Error?u.message:a(u)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,s.assert)}}},5277:i=>{const s={};i.exports=function(o){if(!o)return"";let a="";for(let l=0;l<o.length;++l){const u=o.charCodeAt(l);s.isSafe(u)?a+=o[l]:a+=s.escapeHtmlChar(u)}return a},s.escapeHtmlChar=function(o){return s.namedHtml.get(o)||(o>=256?"&#"+o+";":`&#x${o.toString(16).padStart(2,"0")};`)},s.isSafe=function(o){return s.safeCharCodes.has(o)},s.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),s.safeCharCodes=function(){const o=new Set;for(let a=32;a<123;++a)(a>=97||a>=65&&a<=90||a>=48&&a<=57||a===32||a===46||a===44||a===45||a===58||a===95)&&o.add(a);return o}()},6064:i=>{i.exports=function(s){return s.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:i=>{i.exports=function(){}},1687:(i,s,o)=>{const a=o(375),l=o(8571),u=o(7043),d={};i.exports=d.merge=function(c,f,h){if(a(c&&typeof c=="object","Invalid target value: must be an object"),a(f==null||typeof f=="object","Invalid source value: must be null, undefined, or an object"),!f)return c;if(h=Object.assign({nullOverride:!0,mergeArrays:!0},h),Array.isArray(f)){a(Array.isArray(c),"Cannot merge array onto an object"),h.mergeArrays||(c.length=0);for(let g=0;g<f.length;++g)c.push(l(f[g],{symbols:h.symbols}));return c}const p=u.keys(f,h);for(let g=0;g<p.length;++g){const b=p[g];if(b==="__proto__"||!Object.prototype.propertyIsEnumerable.call(f,b))continue;const y=f[b];if(y&&typeof y=="object"){if(c[b]===y)continue;!c[b]||typeof c[b]!="object"||Array.isArray(c[b])!==Array.isArray(y)||y instanceof Date||y instanceof RegExp?c[b]=l(y,{symbols:h.symbols}):d.merge(c[b],y,h)}else(y!=null||h.nullOverride)&&(c[b]=y)}return c}},9621:(i,s,o)=>{const a=o(375),l={};i.exports=function(u,d,c){if(d===!1||d==null)return u;typeof(c=c||{})=="string"&&(c={separator:c});const f=Array.isArray(d);a(!f||!c.separator,"Separator option is not valid for array-based chain");const h=f?d:d.split(c.separator||".");let p=u;for(let g=0;g<h.length;++g){let b=h[g];const y=c.iterables&&l.iterables(p);if(Array.isArray(p)||y==="set"){const v=Number(b);Number.isInteger(v)&&(b=v<0?p.length+v:v)}if(!p||typeof p=="function"&&c.functions===!1||!y&&p[b]===void 0){a(!c.strict||g+1===h.length,"Missing segment",b,"in reach path ",d),a(typeof p=="object"||c.functions===!0||typeof p!="function","Invalid segment",b,"in reach path ",d),p=c.default;break}p=y?y==="set"?[...p][b]:p.get(b):p[b]}return p},l.iterables=function(u){return u instanceof Set?"set":u instanceof Map?"map":void 0}},8761:i=>{i.exports=function(...s){try{return JSON.stringify(...s)}catch(o){return"[Cannot display object: "+o.message+"]"}}},4277:(i,s)=>{const o={};s=i.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},o.typeMap=new Map([["[object Error]",s.error],["[object Map]",s.map],["[object Promise]",s.promise],["[object Set]",s.set],["[object WeakMap]",s.weakMap],["[object WeakSet]",s.weakSet]]),s.getInternalProto=function(a){if(Array.isArray(a))return s.array;if(a instanceof Date)return s.date;if(a instanceof RegExp)return s.regex;if(a instanceof Error)return s.error;const l=Object.prototype.toString.call(a);return o.typeMap.get(l)||s.generic}},7043:(i,s)=>{s.keys=function(o,a={}){return a.symbols!==!1?Reflect.ownKeys(o):Object.getOwnPropertyNames(o)}},3652:(i,s,o)=>{const a=o(375),l={};s.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(u,d){const c=[].concat((d=d||{}).before||[]),f=[].concat(d.after||[]),h=d.group||"?",p=d.sort||0;a(!c.includes(h),`Item cannot come before itself: ${h}`),a(!c.includes("?"),"Item cannot come before unassociated items"),a(!f.includes(h),`Item cannot come after itself: ${h}`),a(!f.includes("?"),"Item cannot come after unassociated items"),Array.isArray(u)||(u=[u]);for(const g of u){const b={seq:this._items.length,sort:p,before:c,after:f,group:h,node:g};this._items.push(b)}if(!d.manual){const g=this._sort();a(g,"item",h!=="?"?`added into group ${h}`:"","created a dependencies error")}return this.nodes}merge(u){Array.isArray(u)||(u=[u]);for(const c of u)if(c)for(const f of c._items)this._items.push(Object.assign({},f));this._items.sort(l.mergeSort);for(let c=0;c<this._items.length;++c)this._items[c].seq=c;const d=this._sort();return a(d,"merge created a dependencies error"),this.nodes}sort(){const u=this._sort();return a(u,"sort created a dependencies error"),this.nodes}_sort(){const u={},d=Object.create(null),c=Object.create(null);for(const b of this._items){const y=b.seq,v=b.group;c[v]=c[v]||[],c[v].push(y),u[y]=b.before;for(const w of b.after)d[w]=d[w]||[],d[w].push(y)}for(const b in u){const y=[];for(const v in u[b]){const w=u[b][v];c[w]=c[w]||[],y.push(...c[w])}u[b]=y}for(const b in d)if(c[b])for(const y of c[b])u[y].push(...d[b]);const f={};for(const b in u){const y=u[b];for(const v of y)f[v]=f[v]||[],f[v].push(b)}const h={},p=[];for(let b=0;b<this._items.length;++b){let y=b;if(f[b]){y=null;for(let v=0;v<this._items.length;++v){if(h[v]===!0)continue;f[v]||(f[v]=[]);const w=f[v].length;let E=0;for(let S=0;S<w;++S)h[f[v][S]]&&++E;if(E===w){y=v;break}}}y!==null&&(h[y]=!0,p.push(y))}if(p.length!==this._items.length)return!1;const g={};for(const b of this._items)g[b.seq]=b;this._items=[],this.nodes=[];for(const b of p){const y=g[b];this.nodes.push(y.node),this._items.push(y)}return!0}},l.mergeSort=(u,d)=>u.sort===d.sort?0:u.sort<d.sort?-1:1},5380:(i,s,o)=>{const a=o(443),l=o(2178),u={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:a.URL||URL};s.analyze=function(d,c={}){if(!d)return l.code("DOMAIN_NON_EMPTY_STRING");if(typeof d!="string")throw new Error("Invalid input: domain must be a string");if(d.length>256)return l.code("DOMAIN_TOO_LONG");if(u.nonAsciiRx.test(d)){if(c.allowUnicode===!1)return l.code("DOMAIN_INVALID_UNICODE_CHARS");d=d.normalize("NFC")}if(u.domainControlRx.test(d))return l.code("DOMAIN_INVALID_CHARS");d=u.punycode(d),c.allowFullyQualified&&d[d.length-1]==="."&&(d=d.slice(0,-1));const f=c.minDomainSegments||u.minDomainSegments,h=d.split(".");if(h.length<f)return l.code("DOMAIN_SEGMENTS_COUNT");if(c.maxDomainSegments&&h.length>c.maxDomainSegments)return l.code("DOMAIN_SEGMENTS_COUNT_MAX");const p=c.tlds;if(p){const g=h[h.length-1].toLowerCase();if(p.deny&&p.deny.has(g)||p.allow&&!p.allow.has(g))return l.code("DOMAIN_FORBIDDEN_TLDS")}for(let g=0;g<h.length;++g){const b=h[g];if(!b.length)return l.code("DOMAIN_EMPTY_SEGMENT");if(b.length>63)return l.code("DOMAIN_LONG_SEGMENT");if(g<h.length-1){if(!u.domainSegmentRx.test(b))return l.code("DOMAIN_INVALID_CHARS")}else if(!u.tldSegmentRx.test(b))return l.code("DOMAIN_INVALID_TLDS_CHARS")}return null},s.isValid=function(d,c){return!s.analyze(d,c)},u.punycode=function(d){d.includes("%")&&(d=d.replace(/%/g,"%25"));try{return new u.URL(`http://${d}`).host}catch{return d}}},1745:(i,s,o)=>{const a=o(9848),l=o(5380),u=o(2178),d={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(a.TextEncoder||TextEncoder)};s.analyze=function(c,f){return d.email(c,f)},s.isValid=function(c,f){return!d.email(c,f)},d.email=function(c,f={}){if(typeof c!="string")throw new Error("Invalid input: email must be a string");if(!c)return u.code("EMPTY_STRING");const h=!d.nonAsciiRx.test(c);if(!h){if(f.allowUnicode===!1)return u.code("FORBIDDEN_UNICODE");c=c.normalize("NFC")}const p=c.split("@");if(p.length!==2)return p.length>2?u.code("MULTIPLE_AT_CHAR"):u.code("MISSING_AT_CHAR");const[g,b]=p;if(!g)return u.code("EMPTY_LOCAL");if(!f.ignoreLength){if(c.length>254)return u.code("ADDRESS_TOO_LONG");if(d.encoder.encode(g).length>64)return u.code("LOCAL_TOO_LONG")}return d.local(g,h)||l.analyze(b,f)},d.local=function(c,f){const h=c.split(".");for(const p of h){if(!p.length)return u.code("EMPTY_LOCAL_SEGMENT");if(f){if(!d.atextRx.test(p))return u.code("INVALID_LOCAL_CHARS")}else for(const g of p){if(d.atextRx.test(g))continue;const b=d.binary(g);if(!d.atomRx.test(b))return u.code("INVALID_LOCAL_CHARS")}}},d.binary=function(c){return Array.from(d.encoder.encode(c)).map(f=>String.fromCharCode(f)).join("")},d.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,d.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(i,s)=>{s.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},s.code=function(o){return{code:o,error:s.codes[o]}}},9959:(i,s,o)=>{const a=o(375),l=o(5752);s.regex=function(u={}){a(u.cidr===void 0||typeof u.cidr=="string","options.cidr must be a string");const d=u.cidr?u.cidr.toLowerCase():"optional";a(["required","optional","forbidden"].includes(d),"options.cidr must be one of required, optional, forbidden"),a(u.version===void 0||typeof u.version=="string"||Array.isArray(u.version),"options.version must be a string or an array of string");let c=u.version||["ipv4","ipv6","ipvfuture"];Array.isArray(c)||(c=[c]),a(c.length>=1,"options.version must have at least 1 version specified");for(let p=0;p<c.length;++p)a(typeof c[p]=="string","options.version must only contain strings"),c[p]=c[p].toLowerCase(),a(["ipv4","ipv6","ipvfuture"].includes(c[p]),"options.version contains unknown version "+c[p]+" - must be one of ipv4, ipv6, ipvfuture");c=Array.from(new Set(c));const f=`(?:${c.map(p=>{if(d==="forbidden")return l.ip[p];const g=`\\/${p==="ipv4"?l.ip.v4Cidr:l.ip.v6Cidr}`;return d==="required"?`${l.ip[p]}${g}`:`${l.ip[p]}(?:${g})?`}).join("|")})`,h=new RegExp(`^${f}$`);return{cidr:d,versions:c,regex:h,raw:f}}},5752:(i,s,o)=>{const a=o(375),l=o(6064),u={generate:function(){const d={},c="\\dA-Fa-f",f="["+c+"]",h="\\w-\\.~",p="!\\$&'\\(\\)\\*\\+,;=",g="%"+c,b=h+g+p+":@",y="["+b+"]",v="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";d.ipv4address="(?:"+v+"\\.){3}"+v;const w=f+"{1,4}",E="(?:"+w+":"+w+"|"+d.ipv4address+")",S="(?:"+w+":){6}"+E,T="::(?:"+w+":){5}"+E,D="(?:"+w+")?::(?:"+w+":){4}"+E,k="(?:(?:"+w+":){0,1}"+w+")?::(?:"+w+":){3}"+E,R="(?:(?:"+w+":){0,2}"+w+")?::(?:"+w+":){2}"+E,O="(?:(?:"+w+":){0,3}"+w+")?::"+w+":"+E,B="(?:(?:"+w+":){0,4}"+w+")?::"+E,K="(?:(?:"+w+":){0,5}"+w+")?::"+w,L="(?:(?:"+w+":){0,6}"+w+")?::";d.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",d.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",d.ipv6address="(?:"+S+"|"+T+"|"+D+"|"+k+"|"+R+"|"+O+"|"+B+"|"+K+"|"+L+")",d.ipvFuture="v"+f+"+\\.["+h+p+":]+",d.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",d.schemeRegex=new RegExp(d.scheme);const I="["+h+g+p+":]*",$="["+h+g+p+"]{1,255}",U="(?:\\[(?:"+d.ipv6address+"|"+d.ipvFuture+")\\]|"+d.ipv4address+"|"+$+")",q="(?:"+I+"@)?"+U+"(?::\\d*)?",Y="(?:"+I+"@)?("+U+")(?::\\d*)?",X=y+"*",te=y+"+",le="(?:\\/"+X+")*",ee="\\/(?:"+te+le+")?",z=te+le,he="["+h+g+p+"@]+"+le,fe="(?:\\/\\/\\/"+X+le+")";return d.hierPart="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+z+"|"+fe+")",d.hierPartCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+z+")",d.relativeRef="(?:(?:\\/\\/"+q+le+")|"+ee+"|"+he+"|)",d.relativeRefCapture="(?:(?:\\/\\/"+Y+le+")|"+ee+"|"+he+"|)",d.query="["+b+"\\/\\?]*(?=#|$)",d.queryWithSquareBrackets="["+b+"\\[\\]\\/\\?]*(?=#|$)",d.fragment="["+b+"\\/\\?]*",d}};u.rfc3986=u.generate(),s.ip={v4Cidr:u.rfc3986.ipv4Cidr,v6Cidr:u.rfc3986.ipv6Cidr,ipv4:u.rfc3986.ipv4address,ipv6:u.rfc3986.ipv6address,ipvfuture:u.rfc3986.ipvFuture},u.createRegex=function(d){const c=u.rfc3986,f="(?:\\?"+(d.allowQuerySquareBrackets?c.queryWithSquareBrackets:c.query)+")?(?:#"+c.fragment+")?",h=d.domain?c.relativeRefCapture:c.relativeRef;if(d.relativeOnly)return u.wrap(h+f);let p="";if(d.scheme){a(d.scheme instanceof RegExp||typeof d.scheme=="string"||Array.isArray(d.scheme),"scheme must be a RegExp, String, or Array");const y=[].concat(d.scheme);a(y.length>=1,"scheme must have at least 1 scheme specified");const v=[];for(let w=0;w<y.length;++w){const E=y[w];a(E instanceof RegExp||typeof E=="string","scheme at position "+w+" must be a RegExp or String"),E instanceof RegExp?v.push(E.source.toString()):(a(c.schemeRegex.test(E),"scheme at position "+w+" must be a valid scheme"),v.push(l(E)))}p=v.join("|")}const g="(?:"+(p?"(?:"+p+")":c.scheme)+":"+(d.domain?c.hierPartCapture:c.hierPart)+")",b=d.allowRelative?"(?:"+g+"|"+h+")":g;return u.wrap(b+f,p)},u.wrap=function(d,c){return{raw:d=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${d}`,regex:new RegExp(`^${d}$`),scheme:c}},u.uriRegex=u.createRegex({}),s.regex=function(d={}){return d.scheme||d.allowRelative||d.relativeOnly||d.allowQuerySquareBrackets||d.domain?u.createRegex(d):u.uriRegex}},1447:(i,s)=>{const o={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};s.Parser=class{constructor(a,l={}){if(!l[o.settings]&&l.constants)for(const u in l.constants){const d=l.constants[u];if(d!==null&&!["boolean","number","string"].includes(typeof d))throw new Error(`Formula constant ${u} contains invalid ${typeof d} value type`)}this.settings=l[o.settings]?l:Object.assign({[o.settings]:!0,constants:{},functions:{}},l),this.single=null,this._parts=null,this._parse(a)}_parse(a){let l=[],u="",d=0,c=!1;const f=p=>{if(d)throw new Error("Formula missing closing parenthesis");const g=l.length?l[l.length-1]:null;if(c||u||p){if(g&&g.type==="reference"&&p===")")return g.type="function",g.value=this._subFormula(u,g.value),void(u="");if(p===")"){const b=new s.Parser(u,this.settings);l.push({type:"segment",value:b})}else if(c){if(c==="]")return l.push({type:"reference",value:u}),void(u="");l.push({type:"literal",value:u})}else if(o.operatorCharacters.includes(u))g&&g.type==="operator"&&o.operators.includes(g.value+u)?g.value+=u:l.push({type:"operator",value:u});else if(u.match(o.numberRx))l.push({type:"constant",value:parseFloat(u)});else if(this.settings.constants[u]!==void 0)l.push({type:"constant",value:this.settings.constants[u]});else{if(!u.match(o.tokenRx))throw new Error(`Formula contains invalid token: ${u}`);l.push({type:"reference",value:u})}u=""}};for(const p of a)c?p===c?(f(),c=!1):u+=p:d?p==="("?(u+=p,++d):p===")"?(--d,d?u+=p:f(p)):u+=p:p in o.literals?c=o.literals[p]:p==="("?(f(),++d):o.operatorCharacters.includes(p)?(f(),u=p,f()):p!==" "?u+=p:f();f(),l=l.map((p,g)=>p.type!=="operator"||p.value!=="-"||g&&l[g-1].type!=="operator"?p:{type:"operator",value:"n"});let h=!1;for(const p of l){if(p.type==="operator"){if(o.operatorsPrefix.includes(p.value))continue;if(!h)throw new Error("Formula contains an operator in invalid position");if(!o.operators.includes(p.value))throw new Error(`Formula contains an unknown operator ${p.value}`)}else if(h)throw new Error("Formula missing expected operator");h=!h}if(!h)throw new Error("Formula contains invalid trailing operator");l.length===1&&["reference","literal","constant"].includes(l[0].type)&&(this.single={type:l[0].type==="reference"?"reference":"value",value:l[0].value}),this._parts=l.map(p=>{if(p.type==="operator")return o.operatorsPrefix.includes(p.value)?p:p.value;if(p.type!=="reference")return p.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(p.value))throw new Error(`Formula contains invalid reference ${p.value}`);return this.settings.reference?this.settings.reference(p.value):o.reference(p.value)})}_subFormula(a,l){const u=this.settings.functions[l];if(typeof u!="function")throw new Error(`Formula contains unknown function ${l}`);let d=[];if(a){let c="",f=0,h=!1;const p=()=>{if(!c)throw new Error(`Formula contains function ${l} with invalid arguments ${a}`);d.push(c),c=""};for(let g=0;g<a.length;++g){const b=a[g];h?(c+=b,b===h&&(h=!1)):b in o.literals&&!f?(c+=b,h=o.literals[b]):b!==","||f?(c+=b,b==="("?++f:b===")"&&--f):p()}p()}return d=d.map(c=>new s.Parser(c,this.settings)),function(c){const f=[];for(const h of d)f.push(h.evaluate(c));return u.call(c,...f)}}evaluate(a){const l=this._parts.slice();for(let u=l.length-2;u>=0;--u){const d=l[u];if(d&&d.type==="operator"){const c=l[u+1];l.splice(u+1,1);const f=o.evaluate(c,a);l[u]=o.single(d.value,f)}}return o.operatorsOrder.forEach(u=>{for(let d=1;d<l.length-1;)if(u.includes(l[d])){const c=l[d],f=o.evaluate(l[d-1],a),h=o.evaluate(l[d+1],a);l.splice(d,2);const p=o.calculate(c,f,h);l[d-1]=p===0?0:p}else d+=2}),o.evaluate(l[0],a)}},s.Parser.prototype[o.symbol]=!0,o.reference=function(a){return function(l){return l&&l[a]!==void 0?l[a]:null}},o.evaluate=function(a,l){return a===null?null:typeof a=="function"?a(l):a[o.symbol]?a.evaluate(l):a},o.single=function(a,l){if(a==="!")return!l;const u=-l;return u===0?0:u},o.calculate=function(a,l,u){if(a==="??")return o.exists(l)?l:u;if(typeof l=="string"||typeof u=="string"){if(a==="+")return(l=o.exists(l)?l:"")+(o.exists(u)?u:"")}else switch(a){case"^":return Math.pow(l,u);case"*":return l*u;case"/":return l/u;case"%":return l%u;case"+":return l+u;case"-":return l-u}switch(a){case"<":return l<u;case"<=":return l<=u;case">":return l>u;case">=":return l>=u;case"==":return l===u;case"!=":return l!==u;case"&&":return l&&u;case"||":return l||u}return null},o.exists=function(a){return a!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:i=>{i.exports=JSON.parse('{"version":"17.13.3"}')}},r={},function i(s){var o=r[s];if(o!==void 0)return o.exports;var a=r[s]={exports:{}};return n[s](a,a.exports,i),a.exports}(5107);var n,r})}(U4)),U4.exports}var fjt=djt();const Wr=aa(fjt),$Ne={id:Wr.string().required()},oAe={...$Ne,as:Wr.string().valid("img","video").required(),src:Wr.string().uri().required(),position:Wr.string().valid("center","left","right"),"data-parallax":Wr.boolean().required()},PNe=Wr.object({type:Wr.string().required(),url:Wr.string().when("type",{is:"STAC",then:Wr.string().required(),otherwise:Wr.string().optional()}),properties:Wr.object({id:Wr.string().required()}).unknown().required(),source:Wr.object({type:Wr.string().required()}).unknown().when("type",{is:"STAC",then:Wr.optional(),otherwise:Wr.required()})}).pattern(Wr.string(),Wr.any()),hjt=Wr.object({type:Wr.string().valid("group","Group"),properties:Wr.object({id:Wr.string().required()}).unknown().required(),layers:Wr.array().items(PNe)}),xz={layers:Wr.array().items(Wr.object().keys({type:Wr.string().required()}).unknown().custom((t,e)=>{const{error:n}=t.type==="Group"?hjt.validate(t):PNe.validate(t);return n?e.message(n.message):t},"Custom validator for map schema.")).optional(),center:Wr.array().items(Wr.number()).min(2).max(2).optional(),zoom:Wr.number().optional()},NNe={config:Wr.object({...xz}).unknown().optional()},BNe={"eox-map":Wr.object({...$Ne,...xz,...NNe}).unknown()},pjt={hero:{img:Wr.object({...oAe}).unknown(),video:Wr.object({...oAe}).unknown()},tour:{"eox-map":BNe["eox-map"],"section-step":Wr.object({...xz,...NNe}).unknown()}};function mjt(t,e){var i,s;let n=[];for(const o of Object.keys(t)){const a=t[o];if(a.as){const l=a.mode?(i=pjt[a.mode])==null?void 0:i[a.as]:BNe[a.as];l&&((s=l.validate(a,{abortEarly:!1}).error)==null||s.details.forEach(d=>{n.push({ref:`#${o}`,message:d.message}),console.error(`#${o}`,d.message)}))}}const r=(e.shadowRoot||e).querySelector("eox-storytelling-editor");setTimeout(()=>r==null?void 0:r.updateErrors(n),300)}const gjt=':root,:host { --spacing: 1rem; --block-spacing-vertical: calc(var(--spacing) * 2); --block-spacing-horizontal: var(--spacing); --background-color: var(--eox-background-color, white); --color: var(--eox-color, #2c3d49); --h-color: var(--eox-h-color, var(--color)); --hover-transparency: var(--eox-hover-transparency, 20%); --bg-hover-transparency: var(--eox-bg-hover-transparency, 40%); --btn-hover-transparency: var(--eox-btn-hover-transparency, 80%); --primary-color: var(--eox-primary-color, #004170); --primary-color-hover: color-mix( in srgb, var(--primary-color) var(--hover-transparency), transparent ); --primary-bg-color-hover: color-mix( in srgb, var(--primary-color) var(--bg-hover-transparency), transparent ); --primary-btn-color-hover: color-mix( in srgb, var(--primary-color) var(--btn-hover-transparency), transparent ); --secondary-color: var(--eox-secondary-color, #c6d4df); --secondary-color-hover: color-mix( in srgb, var(--secondary-color) var(--hover-transparency), transparent ); --secondary-bg-color-hover: color-mix( in srgb, var(--secondary-color) var(--bg-hover-transparency), transparent ); --secondary-btn-color-hover: color-mix( in srgb, var(--secondary-color) var(--btn-hover-transparency), transparent ); --success: var(--eox-success, #26cc0f); --warning: var(--eox-warning, #f18e32); --error: var(--eox-error, #ff5252); --header-font-family: var(--eox-header-font-family, "Roboto", sans-serif); --body-font-family: var(--eox-body-font-family, "Roboto", sans-serif);}* { font-size: normal; font-family: var(--body-font-family); color: var(--eox-color);}h1,h2,h3,h4,h5,h6 { font-family: var(--header-font-family);}span,p,div,main,label { font-family: var(--body-font-family);}@media (min-width: 576px) { .container { max-width: 510px; padding-right: 0; padding-left: 0; --block-spacing-vertical: calc(var(--spacing) * 2.5); }}@media (min-width: 768px) { .container { max-width: 700px; --block-spacing-vertical: calc(var(--spacing) * 3); }}@media (min-width: 992px) { .container { max-width: 920px; --block-spacing-vertical: calc(var(--spacing) * 3.5); }}@media (min-width: 1200px) { .container { max-width: 1130px; --block-spacing-vertical: calc(var(--spacing) * 4); }}.container { width: 100%; margin-right: auto; margin-left: auto; display: block; padding: var(--block-spacing-vertical) var(--block-spacing-horizontal);}h1,h2,h3 { line-height: 120%; margin-top: 0.8rem; margin-bottom: 0.8rem;}p { --font-size: 1rem; font-weight: 400; line-height: 170%; margin-top: 0.8rem; margin-bottom: 1.6rem; font-size: var(--font-size);}body { padding: 0; margin: 0;}.sb-show-main.sb-main-padded { padding: 0;}h1,h2,h3,h4,h5,h6 { --font-weight: 700;}h1 { --font-size: 3rem; --typography-spacing-vertical: 0.5rem;}h2 { --font-size: 2rem; --typography-spacing-vertical: 0.5rem;}h3 { --font-size: 1.75rem; --typography-spacing-vertical: 0.5rem;}h4 { --font-size: 1.5rem; --typography-spacing-vertical: 0.5rem;}h5 { --font-size: 1.25rem; --typography-spacing-vertical: 0.5rem;}h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: var(--typography-spacing-vertical); color: var(--h-color); font-weight: var(--font-weight); font-size: var(--font-size); font-family: var(--header-font-family);}pre { position: relative; border-radius: 4px; z-index: 1; margin: 0; padding: 20px 0; background: transparent; background: var(--code-bg-color, #8e96aa24); overflow: auto;}code { display: block; padding: 0 24px; width: fit-content; min-width: 100%; line-height: var(--code-line-height, 1.7); font-family: var(--code-font-family, monospace); font-size: var(--code-font-size, var(--font-size)); color: var(--code-color, #004170);}:not(pre) > code { display: inline; border-radius: 4px; background: var(--code-bg-color, #8e96aa24); padding: var(--code-padding, 3px 6px);}';/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */var q4,aAe;function lAe(){if(aAe)return q4;aAe=1;const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:s,seal:o,create:a}=Object,{apply:l,construct:u}=typeof Reflect<"u"&&Reflect;s||(s=function(oe){return oe}),o||(o=function(oe){return oe}),l||(l=function(oe,ve,F){return oe.apply(ve,F)}),u||(u=function(oe,ve){return new oe(...ve)});const d=T(Array.prototype.forEach),c=T(Array.prototype.pop),f=T(Array.prototype.push),h=T(String.prototype.toLowerCase),p=T(String.prototype.toString),g=T(String.prototype.match),b=T(String.prototype.replace),y=T(String.prototype.indexOf),v=T(String.prototype.trim),w=T(Object.prototype.hasOwnProperty),E=T(RegExp.prototype.test),S=D(TypeError);function T(ie){return function(oe){for(var ve=arguments.length,F=new Array(ve>1?ve-1:0),H=1;H<ve;H++)F[H-1]=arguments[H];return l(ie,oe,F)}}function D(ie){return function(){for(var oe=arguments.length,ve=new Array(oe),F=0;F<oe;F++)ve[F]=arguments[F];return u(ie,ve)}}function k(ie,oe){let ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h;e&&e(ie,null);let F=oe.length;for(;F--;){let H=oe[F];if(typeof H=="string"){const J=ve(H);J!==H&&(n(oe)||(oe[F]=J),H=J)}ie[H]=!0}return ie}function R(ie){for(let oe=0;oe<ie.length;oe++)w(ie,oe)||(ie[oe]=null);return ie}function O(ie){const oe=a(null);for(const[ve,F]of t(ie))w(ie,ve)&&(Array.isArray(F)?oe[ve]=R(F):F&&typeof F=="object"&&F.constructor===Object?oe[ve]=O(F):oe[ve]=F);return oe}function B(ie,oe){for(;ie!==null;){const F=i(ie,oe);if(F){if(F.get)return T(F.get);if(typeof F.value=="function")return T(F.value)}ie=r(ie)}function ve(){return null}return ve}const K=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),q=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Y=s(["#text"]),X=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),te=s(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),le=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ee=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),he=o(/<%[\w\W]*|[\w\W]*%>/gm),fe=o(/\$\{[\w\W]*}/gm),ze=o(/^data-[\-\w.\u00B7-\uFFFF]+$/),He=o(/^aria-[\-\w]+$/),je=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),we=o(/^(?:\w+script|data):/i),$e=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qe=o(/^html$/i),Pe=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var St=Object.freeze({__proto__:null,ARIA_ATTR:He,ATTR_WHITESPACE:$e,CUSTOM_ELEMENT:Pe,DATA_ATTR:ze,DOCTYPE_NAME:qe,ERB_EXPR:he,IS_ALLOWED_URI:je,IS_SCRIPT_OR_DATA:we,MUSTACHE_EXPR:z,TMPLIT_EXPR:fe});const ht={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},nn=function(){return typeof window>"u"?null:window},Vt=function(oe,ve){if(typeof oe!="object"||typeof oe.createPolicy!="function")return null;let F=null;const H="data-tt-policy-suffix";ve&&ve.hasAttribute(H)&&(F=ve.getAttribute(H));const J="dompurify"+(F?"#"+F:"");try{return oe.createPolicy(J,{createHTML(re){return re},createScriptURL(re){return re}})}catch{return console.warn("TrustedTypes policy "+J+" could not be created."),null}},Mn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ze(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nn();const oe=Ht=>Ze(Ht);if(oe.version="3.2.3",oe.removed=[],!ie||!ie.document||ie.document.nodeType!==ht.document)return oe.isSupported=!1,oe;let{document:ve}=ie;const F=ve,H=F.currentScript,{DocumentFragment:J,HTMLTemplateElement:re,Node:ye,Element:xe,NodeFilter:Re,NamedNodeMap:P=ie.NamedNodeMap||ie.MozNamedAttrMap,HTMLFormElement:Q,DOMParser:se,trustedTypes:ae}=ie,ke=xe.prototype,Ae=B(ke,"cloneNode"),Ee=B(ke,"remove"),De=B(ke,"nextSibling"),Oe=B(ke,"childNodes"),We=B(ke,"parentNode");if(typeof re=="function"){const Ht=ve.createElement("template");Ht.content&&Ht.content.ownerDocument&&(ve=Ht.content.ownerDocument)}let tt,ft="";const{implementation:Kt,createNodeIterator:xt,createDocumentFragment:Qt,getElementsByTagName:rn}=ve,{importNode:sn}=F;let on=Mn();oe.isSupported=typeof t=="function"&&typeof We=="function"&&Kt&&Kt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Tn,ERB_EXPR:Cr,TMPLIT_EXPR:Qi,DATA_ATTR:hs,ARIA_ATTR:Vi,IS_SCRIPT_OR_DATA:zo,ATTR_WHITESPACE:Hn,CUSTOM_ELEMENT:Ir}=St;let{IS_ALLOWED_URI:Rr}=St,mn=null;const Kr=k({},[...K,...L,...I,...U,...Y]);let or=null;const zi=k({},[...X,...te,...le,...ee]);let nr=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$r=null,ro=null,ge=!0,Le=!0,it=!1,Ke=!0,Et=!1,an=!0,en=!1,wt=!1,Qe=!1,hn=!1,Sn=!1,zt=!1,jt=!0,Sr=!1;const di="user-content-";let Zt=!0,Xe=!1,pt={},Zn=null;const ri=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ar=null;const Fr=k({},["audio","video","img","source","image","track"]);let rr=null;const qt=k({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xi="http://www.w3.org/1998/Math/MathML",es="http://www.w3.org/2000/svg",wi="http://www.w3.org/1999/xhtml";let qs=wi,_o=!1,io=null;const jo=k({},[xi,es,wi],p);let ws=k({},["mi","mo","mn","ms","mtext"]),Ms=k({},["annotation-xml"]);const Uo=k({},["title","style","font","a","script"]);let ps=null;const ll=["application/xhtml+xml","text/html"],ul="text/html";let kr=null,ts=null;const so=ve.createElement("form"),Is=function(Z){return Z instanceof RegExp||Z instanceof Function},Hs=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ts&&ts===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=O(Z),ps=ll.indexOf(Z.PARSER_MEDIA_TYPE)===-1?ul:Z.PARSER_MEDIA_TYPE,kr=ps==="application/xhtml+xml"?p:h,mn=w(Z,"ALLOWED_TAGS")?k({},Z.ALLOWED_TAGS,kr):Kr,or=w(Z,"ALLOWED_ATTR")?k({},Z.ALLOWED_ATTR,kr):zi,io=w(Z,"ALLOWED_NAMESPACES")?k({},Z.ALLOWED_NAMESPACES,p):jo,rr=w(Z,"ADD_URI_SAFE_ATTR")?k(O(qt),Z.ADD_URI_SAFE_ATTR,kr):qt,Ar=w(Z,"ADD_DATA_URI_TAGS")?k(O(Fr),Z.ADD_DATA_URI_TAGS,kr):Fr,Zn=w(Z,"FORBID_CONTENTS")?k({},Z.FORBID_CONTENTS,kr):ri,$r=w(Z,"FORBID_TAGS")?k({},Z.FORBID_TAGS,kr):{},ro=w(Z,"FORBID_ATTR")?k({},Z.FORBID_ATTR,kr):{},pt=w(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,ge=Z.ALLOW_ARIA_ATTR!==!1,Le=Z.ALLOW_DATA_ATTR!==!1,it=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=Z.SAFE_FOR_TEMPLATES||!1,an=Z.SAFE_FOR_XML!==!1,en=Z.WHOLE_DOCUMENT||!1,hn=Z.RETURN_DOM||!1,Sn=Z.RETURN_DOM_FRAGMENT||!1,zt=Z.RETURN_TRUSTED_TYPE||!1,Qe=Z.FORCE_BODY||!1,jt=Z.SANITIZE_DOM!==!1,Sr=Z.SANITIZE_NAMED_PROPS||!1,Zt=Z.KEEP_CONTENT!==!1,Xe=Z.IN_PLACE||!1,Rr=Z.ALLOWED_URI_REGEXP||je,qs=Z.NAMESPACE||wi,ws=Z.MATHML_TEXT_INTEGRATION_POINTS||ws,Ms=Z.HTML_INTEGRATION_POINTS||Ms,nr=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Is(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nr.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Is(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nr.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nr.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(Le=!1),Sn&&(hn=!0),pt&&(mn=k({},Y),or=[],pt.html===!0&&(k(mn,K),k(or,X)),pt.svg===!0&&(k(mn,L),k(or,te),k(or,ee)),pt.svgFilters===!0&&(k(mn,I),k(or,te),k(or,ee)),pt.mathMl===!0&&(k(mn,U),k(or,le),k(or,ee))),Z.ADD_TAGS&&(mn===Kr&&(mn=O(mn)),k(mn,Z.ADD_TAGS,kr)),Z.ADD_ATTR&&(or===zi&&(or=O(or)),k(or,Z.ADD_ATTR,kr)),Z.ADD_URI_SAFE_ATTR&&k(rr,Z.ADD_URI_SAFE_ATTR,kr),Z.FORBID_CONTENTS&&(Zn===ri&&(Zn=O(Zn)),k(Zn,Z.FORBID_CONTENTS,kr)),Zt&&(mn["#text"]=!0),en&&k(mn,["html","head","body"]),mn.table&&(k(mn,["tbody"]),delete $r.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw S('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=Z.TRUSTED_TYPES_POLICY,ft=tt.createHTML("")}else tt===void 0&&(tt=Vt(ae,H)),tt!==null&&typeof ft=="string"&&(ft=tt.createHTML(""));s&&s(Z),ts=Z}},pa=k({},[...L,...I,...$]),Gs=k({},[...U,...q]),cl=function(Z){let me=We(Z);(!me||!me.tagName)&&(me={namespaceURI:qs,tagName:"template"});const Be=h(Z.tagName),yt=h(me.tagName);return io[Z.namespaceURI]?Z.namespaceURI===es?me.namespaceURI===wi?Be==="svg":me.namespaceURI===xi?Be==="svg"&&(yt==="annotation-xml"||ws[yt]):!!pa[Be]:Z.namespaceURI===xi?me.namespaceURI===wi?Be==="math":me.namespaceURI===es?Be==="math"&&Ms[yt]:!!Gs[Be]:Z.namespaceURI===wi?me.namespaceURI===es&&!Ms[yt]||me.namespaceURI===xi&&!ws[yt]?!1:!Gs[Be]&&(Uo[Be]||!pa[Be]):!!(ps==="application/xhtml+xml"&&io[Z.namespaceURI]):!1},Wi=function(Z){f(oe.removed,{element:Z});try{We(Z).removeChild(Z)}catch{Ee(Z)}},Yi=function(Z,me){try{f(oe.removed,{attribute:me.getAttributeNode(Z),from:me})}catch{f(oe.removed,{attribute:null,from:me})}if(me.removeAttribute(Z),Z==="is")if(hn||Sn)try{Wi(me)}catch{}else try{me.setAttribute(Z,"")}catch{}},oo=function(Z){let me=null,Be=null;if(Qe)Z="<remove></remove>"+Z;else{const $t=g(Z,/^[\r\n\t ]+/);Be=$t&&$t[0]}ps==="application/xhtml+xml"&&qs===wi&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const yt=tt?tt.createHTML(Z):Z;if(qs===wi)try{me=new se().parseFromString(yt,ps)}catch{}if(!me||!me.documentElement){me=Kt.createDocument(qs,"template",null);try{me.documentElement.innerHTML=_o?ft:yt}catch{}}const pn=me.body||me.documentElement;return Z&&Be&&pn.insertBefore(ve.createTextNode(Be),pn.childNodes[0]||null),qs===wi?rn.call(me,en?"html":"body")[0]:en?me.documentElement:pn},ms=function(Z){return xt.call(Z.ownerDocument||Z,Z,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT|Re.SHOW_PROCESSING_INSTRUCTION|Re.SHOW_CDATA_SECTION,null)},qo=function(Z){return Z instanceof Q&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof P)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Vs=function(Z){return typeof ye=="function"&&Z instanceof ye};function fi(Ht,Z,me){d(Ht,Be=>{Be.call(oe,Z,me,ts)})}const Pa=function(Z){let me=null;if(fi(on.beforeSanitizeElements,Z,null),qo(Z))return Wi(Z),!0;const Be=kr(Z.nodeName);if(fi(on.uponSanitizeElement,Z,{tagName:Be,allowedTags:mn}),Z.hasChildNodes()&&!Vs(Z.firstElementChild)&&E(/<[/\w]/g,Z.innerHTML)&&E(/<[/\w]/g,Z.textContent)||Z.nodeType===ht.progressingInstruction||an&&Z.nodeType===ht.comment&&E(/<[/\w]/g,Z.data))return Wi(Z),!0;if(!mn[Be]||$r[Be]){if(!$r[Be]&&Xi(Be)&&(nr.tagNameCheck instanceof RegExp&&E(nr.tagNameCheck,Be)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(Be)))return!1;if(Zt&&!Zn[Be]){const yt=We(Z)||Z.parentNode,pn=Oe(Z)||Z.childNodes;if(pn&&yt){const $t=pn.length;for(let Pn=$t-1;Pn>=0;--Pn){const hr=Ae(pn[Pn],!0);hr.__removalCount=(Z.__removalCount||0)+1,yt.insertBefore(hr,De(Z))}}}return Wi(Z),!0}return Z instanceof xe&&!cl(Z)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&E(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Wi(Z),!0):(Et&&Z.nodeType===ht.text&&(me=Z.textContent,d([Tn,Cr,Qi],yt=>{me=b(me,yt," ")}),Z.textContent!==me&&(f(oe.removed,{element:Z.cloneNode()}),Z.textContent=me)),fi(on.afterSanitizeElements,Z,null),!1)},ao=function(Z,me,Be){if(jt&&(me==="id"||me==="name")&&(Be in ve||Be in so))return!1;if(!(Le&&!ro[me]&&E(hs,me))){if(!(ge&&E(Vi,me))){if(!or[me]||ro[me]){if(!(Xi(Z)&&(nr.tagNameCheck instanceof RegExp&&E(nr.tagNameCheck,Z)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(Z))&&(nr.attributeNameCheck instanceof RegExp&&E(nr.attributeNameCheck,me)||nr.attributeNameCheck instanceof Function&&nr.attributeNameCheck(me))||me==="is"&&nr.allowCustomizedBuiltInElements&&(nr.tagNameCheck instanceof RegExp&&E(nr.tagNameCheck,Be)||nr.tagNameCheck instanceof Function&&nr.tagNameCheck(Be))))return!1}else if(!rr[me]){if(!E(Rr,b(Be,Hn,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&Z!=="script"&&y(Be,"data:")===0&&Ar[Z])){if(!(it&&!E(zo,b(Be,Hn,"")))){if(Be)return!1}}}}}}return!0},Xi=function(Z){return Z!=="annotation-xml"&&g(Z,Ir)},lo=function(Z){fi(on.beforeSanitizeAttributes,Z,null);const{attributes:me}=Z;if(!me||qo(Z))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:or,forceKeepAttr:void 0};let yt=me.length;for(;yt--;){const pn=me[yt],{name:$t,namespaceURI:Pn,value:hr}=pn,Tr=kr($t);let Ln=$t==="value"?hr:v(hr);if(Be.attrName=Tr,Be.attrValue=Ln,Be.keepAttr=!0,Be.forceKeepAttr=void 0,fi(on.uponSanitizeAttribute,Z,Be),Ln=Be.attrValue,Sr&&(Tr==="id"||Tr==="name")&&(Yi($t,Z),Ln=di+Ln),an&&E(/((--!?|])>)|<\/(style|title)/i,Ln)){Yi($t,Z);continue}if(Be.forceKeepAttr||(Yi($t,Z),!Be.keepAttr))continue;if(!Ke&&E(/\/>/i,Ln)){Yi($t,Z);continue}Et&&d([Tn,Cr,Qi],Jr=>{Ln=b(Ln,Jr," ")});const ki=kr(Z.nodeName);if(ao(ki,Tr,Ln)){if(tt&&typeof ae=="object"&&typeof ae.getAttributeType=="function"&&!Pn)switch(ae.getAttributeType(ki,Tr)){case"TrustedHTML":{Ln=tt.createHTML(Ln);break}case"TrustedScriptURL":{Ln=tt.createScriptURL(Ln);break}}try{Pn?Z.setAttributeNS(Pn,$t,Ln):Z.setAttribute($t,Ln),qo(Z)?Wi(Z):c(oe.removed)}catch{}}}fi(on.afterSanitizeAttributes,Z,null)},dl=function Ht(Z){let me=null;const Be=ms(Z);for(fi(on.beforeSanitizeShadowDOM,Z,null);me=Be.nextNode();)fi(on.uponSanitizeShadowNode,me,null),Pa(me),lo(me),me.content instanceof J&&Ht(me.content);fi(on.afterSanitizeShadowDOM,Z,null)};return oe.sanitize=function(Ht){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Be=null,yt=null,pn=null;if(_o=!Ht,_o&&(Ht="<!-->"),typeof Ht!="string"&&!Vs(Ht))if(typeof Ht.toString=="function"){if(Ht=Ht.toString(),typeof Ht!="string")throw S("dirty is not a string, aborting")}else throw S("toString is not a function");if(!oe.isSupported)return Ht;if(wt||Hs(Z),oe.removed=[],typeof Ht=="string"&&(Xe=!1),Xe){if(Ht.nodeName){const hr=kr(Ht.nodeName);if(!mn[hr]||$r[hr])throw S("root node is forbidden and cannot be sanitized in-place")}}else if(Ht instanceof ye)me=oo("<!---->"),Be=me.ownerDocument.importNode(Ht,!0),Be.nodeType===ht.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?me=Be:me.appendChild(Be);else{if(!hn&&!Et&&!en&&Ht.indexOf("<")===-1)return tt&&zt?tt.createHTML(Ht):Ht;if(me=oo(Ht),!me)return hn?null:zt?ft:""}me&&Qe&&Wi(me.firstChild);const $t=ms(Xe?Ht:me);for(;yt=$t.nextNode();)Pa(yt),lo(yt),yt.content instanceof J&&dl(yt.content);if(Xe)return Ht;if(hn){if(Sn)for(pn=Qt.call(me.ownerDocument);me.firstChild;)pn.appendChild(me.firstChild);else pn=me;return(or.shadowroot||or.shadowrootmode)&&(pn=sn.call(F,pn,!0)),pn}let Pn=en?me.outerHTML:me.innerHTML;return en&&mn["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&E(qe,me.ownerDocument.doctype.name)&&(Pn="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+Pn),Et&&d([Tn,Cr,Qi],hr=>{Pn=b(Pn,hr," ")}),tt&&zt?tt.createHTML(Pn):Pn},oe.setConfig=function(){let Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Hs(Ht),wt=!0},oe.clearConfig=function(){ts=null,wt=!1},oe.isValidAttribute=function(Ht,Z,me){ts||Hs({});const Be=kr(Ht),yt=kr(Z);return ao(Be,yt,me)},oe.addHook=function(Ht,Z){typeof Z=="function"&&f(on[Ht],Z)},oe.removeHook=function(Ht){return c(on[Ht])},oe.removeHooks=function(Ht){on[Ht]=[]},oe.removeAllHooks=function(){on=Mn()},oe}var pe=Ze();return q4=pe,q4}var H4,uAe;function yjt(){return uAe||(uAe=1,H4=window.DOMPurify||(window.DOMPurify=lAe().default||lAe())),H4}var bjt=yjt();const vjt=aa(bjt);function zNe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function xjt(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const wjt=[["","ss"],["","Ss"],["","ae"],["","Ae"],["","oe"],["","Oe"],["","ue"],["","Ue"],["","A"],["","A"],["","A"],["","A"],["","Ae"],["","A"],["","AE"],["","C"],["","E"],["","E"],["","E"],["","E"],["","I"],["","I"],["","I"],["","I"],["","D"],["","N"],["","O"],["","O"],["","O"],["","O"],["","Oe"],["","O"],["","O"],["","U"],["","U"],["","U"],["","Ue"],["","U"],["","Y"],["","TH"],["","ss"],["","a"],["","a"],["","a"],["","a"],["","ae"],["","a"],["","ae"],["","c"],["","e"],["","e"],["","e"],["","e"],["","i"],["","i"],["","i"],["","i"],["","d"],["","n"],["","o"],["","o"],["","o"],["","o"],["","oe"],["","o"],["","o"],["","u"],["","u"],["","u"],["","ue"],["","u"],["","y"],["","th"],["","y"],["","SS"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","a"],["","A"],["","D"],["","d"],["","i"],["","I"],["","u"],["","U"],["","o"],["","O"],["","u"],["","U"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","a"],["","A"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","e"],["","E"],["","i"],["","I"],["","i"],["","I"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","o"],["","O"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","u"],["","U"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","y"],["","Y"],["","e"],["","a"],["","a"],["","w"],["","i"],["","y"],["","a"],["","b"],["","t"],["","t"],["","th"],["","j"],["","h"],["","kh"],["","d"],["","dh"],["","r"],["","z"],["","s"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","e"],["","gh"],["","_"],["","f"],["","q"],["","k"],["","l"],["","m"],["","n"],["","h"],["","w"],["","a"],["","y"],["","a"],["","u"],["","i"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","ch"],["","k"],["","g"],["","p"],["","zh"],["","y"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","p"],["","z"],["","c"],["","d"],["","d"],["","r"],["","r"],["","z"],["","g"],["","x"],["","g"],["","n"],["","e"],["","e"],["","ai"],["","t"],["","d"],["","r"],["","n"],["","h"],["","h"],["","e"],["","A"],["","a"],["","B"],["","b"],["","V"],["","v"],["","G"],["","g"],["","D"],["","d"],["","ye"],["","Ye"],["","yE"],["","YE"],["","E"],["","e"],["","Yo"],["","yo"],["","Zh"],["","zh"],["","Z"],["","z"],["","I"],["","i"],["","iy"],["","Iy"],["","IY"],["","iY"],["","Y"],["","y"],["","K"],["","k"],["","L"],["","l"],["","M"],["","m"],["","N"],["","n"],["","O"],["","o"],["","P"],["","p"],["","R"],["","r"],["","S"],["","s"],["","T"],["","t"],["","U"],["","u"],["","F"],["","f"],["","Kh"],["","kh"],["","Ts"],["","ts"],["","Ch"],["","ch"],["","Sh"],["","sh"],["","Sch"],["","sch"],["",""],["",""],["","Y"],["","y"],["",""],["",""],["","E"],["","e"],["","Yu"],["","yu"],["","Ya"],["","ya"],["","a"],["","A"],["","s"],["","S"],["","t"],["","T"],["","t"],["","T"],["","s"],["","S"],["","c"],["","C"],["","g"],["","G"],["","i"],["","I"],["","a"],["","A"],["","b"],["","B"],["","g"],["","G"],["","d"],["","D"],["","ye"],["","Ye"],["","z"],["","Z"],["","e"],["","E"],["","y"],["","Y"],["","t"],["","T"],["","zh"],["","Zh"],["","i"],["","I"],["","l"],["","L"],["","kh"],["","Kh"],["","ts"],["","Ts"],["","k"],["","K"],["","h"],["","H"],["","dz"],["","Dz"],["","gh"],["","Gh"],["","tch"],["","Tch"],["","m"],["","M"],["","y"],["","Y"],["","n"],["","N"],["","sh"],["","Sh"],["","vo"],["","Vo"],["","ch"],["","Ch"],["","p"],["","P"],["","j"],["","J"],["","r"],["","R"],["","s"],["","S"],["","v"],["","V"],["","t"],["","T"],["","r"],["","R"],["","c"],["","C"],["","u"],["","U"],["","U"],["","p"],["","P"],["","q"],["","Q"],["","o"],["","O"],["","f"],["","F"],["","yev"],["","a"],["","b"],["","g"],["","d"],["","e"],["","v"],["","z"],["","t"],["","i"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","zh"],["","r"],["","s"],["","t"],["","u"],["","ph"],["","q"],["","gh"],["","k"],["","sh"],["","ch"],["","ts"],["","dz"],["","ts"],["","tch"],["","kh"],["","j"],["","h"],["","c"],["","d"],["","e"],["","n"],["","r"],["","s"],["","t"],["","u"],["","z"],["","C"],["","D"],["","E"],["","N"],["","R"],["","S"],["","T"],["","U"],["","Z"],["","h"],["","sh"],["","n"],["","r"],["","b"],["","lh"],["","k"],["","a"],["","v"],["","m"],["","f"],["","dh"],["","th"],["","l"],["","g"],["","gn"],["","s"],["","d"],["","z"],["","t"],["","y"],["","p"],["","j"],["","ch"],["","tt"],["","hh"],["","kh"],["","th"],["","z"],["","sh"],["","s"],["","d"],["","t"],["","z"],["","a"],["","gh"],["","q"],["","w"],["","a"],["","aa"],["","i"],["","ee"],["","u"],["","oo"],["","e"],["","ey"],["","o"],["","oa"],["",""],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","o"],["","y"],["","i"],["","o"],["","s"],["","i"],["","y"],["","y"],["","i"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","A"],["","E"],["","I"],["","O"],["","Y"],["","I"],["","O"],["","I"],["","Y"],["","a"],["","e"],["","g"],["","i"],["","k"],["","l"],["","n"],["","u"],["","A"],["","E"],["","G"],["","I"],["","K"],["","L"],["","N"],["","U"],["","c"],["","s"],["","z"],["","C"],["","S"],["","Z"],["","a"],["","c"],["","e"],["","e"],["","i"],["","s"],["","u"],["","u"],["","z"],["","A"],["","C"],["","E"],["","E"],["","I"],["","S"],["","U"],["","U"],["","Kj"],["","kj"],["","Lj"],["","lj"],["","Nj"],["","nj"],["","Ts"],["","ts"],["","a"],["","c"],["","e"],["","l"],["","n"],["","s"],["","z"],["","z"],["","A"],["","C"],["","E"],["","L"],["","N"],["","S"],["","Z"],["","Z"],["","Ye"],["","I"],["","Yi"],["","G"],["","ye"],["","i"],["","yi"],["","g"],["","IJ"],["","ij"],["","c"],["","Y"],["","b"],["","t"],["","Bo"],["","B"],["","CE"],["","C"],["","Cr"],["","F"],["","m"],["","N"],["","Pt"],["","Rs"],["","W"],["","s"],["","E"],["","K"],["","T"],["","Dp"],["","S"],["","P"],["","G"],["","A"],["","S"],["","C"],["","tt"],["","S"],["","T"],["","R"],["","L"],["","P"],["","B"],["","$"],["","c"],["","Y"],["","W"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","C"],["","D"],["","g"],["","J"],["","K"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","f"],["","h"],["","i"],["","j"],["","h"],["","l"],["","m"],["","n"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","D"],["","E"],["","F"],["","G"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","A"],["","B"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","O"],["","P"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"],["","a"],["","b"],["","c"],["","d"],["","e"],["","f"],["","g"],["","h"],["","i"],["","j"],["","k"],["","l"],["","m"],["","n"],["","o"],["","p"],["","q"],["","r"],["","s"],["","t"],["","u"],["","v"],["","w"],["","x"],["","y"],["","z"],["","l"],["","j"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","x"],["","PS"],["","O"],["","D"],["","a"],["","b"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","d"],["","E"],["","TH"],["","K"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","B"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","R"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","a"],["","v"],["","g"],["","d"],["","e"],["","z"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","A"],["","V"],["","G"],["","D"],["","E"],["","Z"],["","I"],["","TH"],["","I"],["","K"],["","L"],["","M"],["","N"],["","KS"],["","O"],["","P"],["","S"],["","TH"],["","S"],["","T"],["","Y"],["","F"],["","X"],["","PS"],["","O"],["","D"],["","av"],["","g"],["","d"],["","e"],["","z"],["","i"],["","i"],["","th"],["","i"],["","k"],["","l"],["","m"],["","n"],["","ks"],["","o"],["","p"],["","r"],["","s"],["","s"],["","t"],["","y"],["","f"],["","x"],["","ps"],["","o"],["","a"],["","e"],["","i"],["","k"],["","f"],["","r"],["","p"],["","F"],["","f"],["","(a)"],["","(b)"],["","(c)"],["","(d)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","(A)"],["","(B)"],["","(C)"],["","(D)"],["","(E)"],["","(F)"],["","(G)"],["","(H)"],["","(I)"],["","(J)"],["","(K)"],["","(L)"],["","(N)"],["","(O)"],["","(P)"],["","(Q)"],["","(R)"],["","(S)"],["","(T)"],["","(U)"],["","(V)"],["","(W)"],["","(X)"],["","(Y)"],["","(Z)"],["","(a)"],["","(b)"],["","(b)"],["","(c)"],["","(e)"],["","(f)"],["","(g)"],["","(h)"],["","(i)"],["","(j)"],["","(k)"],["","(l)"],["","(m)"],["","(n)"],["","(o)"],["","(p)"],["","(q)"],["","(r)"],["","(s)"],["","(t)"],["","(u)"],["","(v)"],["","(w)"],["","(x)"],["","(y)"],["","(z)"],["","C"],["","c"],["","G"],["","g"],["","H"],["","h"],["","Z"],["","z"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","0"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1."],["","2."],["","3."],["","4."],["","5."],["","6."],["","7."],["","8."],["","9."],["","10."],["","11."],["","12."],["","13."],["","14."],["","15."],["","16."],["","17."],["","18."],["","19."],["","20."],["","0"],["","11"],["","12"],["","13"],["","14"],["","15"],["","16"],["","17"],["","18"],["","19"],["","20"],["","1"],["","2"],["","3"],["","4"],["","5"],["","6"],["","7"],["","8"],["","9"],["","10"],["","0"],["","&"],["","&"],["","&"],["","&"],["","&"],["","&"],["",'"'],["",'"'],["",'"'],["","?!"],["","?!"],["","?!"],["","?!"],["","/"],["","\\"],["","AR"],["","V"],["","V"],["","VR"],["","VF"],["","2"],["","5"],["","f"],["","W"],["","U"],["","V"],["","T"],["","V"],["","MB"],["","VB"],["","3B"],["","3B"],["","100"],["","BACK"],["","END"],["","ON!"],["","SOON"],["","TOP"],["","18"],["","abc"],["","ABCD"],["","abcd"],["","1234"],["","T&@%"],["#","#"],["*","*"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["","10"],["","A"],["","B"],["","AB"],["","CL"],["","O"],["","P"],["","SOS"],["","C"],["","D"],["","E"],["","F"],["","G"],["","H"],["","I"],["","J"],["","K"],["","L"],["","M"],["","N"],["","Q"],["","R"],["","S"],["","T"],["","U"],["","V"],["","W"],["","X"],["","Y"],["","Z"]],_jt=(t,e)=>{for(const[n,r]of e)t=t.replace(new RegExp(xjt(n),"g"),r);return t};function Ejt(t,e){if(typeof t!="string")throw new TypeError(`Expected a string, got \`${typeof t}\``);e={customReplacements:[],...e};const n=new Map([...wjt,...e.customReplacements]);return t=t.normalize(),t=_jt(t,n),t=t.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").normalize(),t}const Cjt=[["&"," and "],[""," unicorn "],[""," love "]],Sjt=t=>t.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z\d]+)/g,"$1 $2"),Ajt=(t,e)=>{const n=zNe(e);return t.replace(new RegExp(`${n}{2,}`,"g"),e).replace(new RegExp(`^${n}|${n}$`,"g"),"")},kjt=t=>{let e="a-z\\d";if(e+=t.lowercase?"":"A-Z",t.preserveCharacters.length>0)for(const n of t.preserveCharacters){if(n===t.separator)throw new Error(`The separator character \`${t.separator}\` cannot be included in preserved characters: ${t.preserveCharacters}`);e+=zNe(n)}return new RegExp(`[^${e}]+`,"g")};function Tjt(t,e){if(typeof t!="string")throw new TypeError(`Expected a string, got \`${typeof t}\``);e={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,preserveTrailingDash:!1,preserveCharacters:[],...e};const n=e.preserveLeadingUnderscore&&t.startsWith("_"),r=e.preserveTrailingDash&&t.endsWith("-"),i=new Map([...Cjt,...e.customReplacements]);t=Ejt(t,{customReplacements:i}),e.decamelize&&(t=Sjt(t));const s=kjt(e);return e.lowercase&&(t=t.toLowerCase()),t=t.replace(/([a-zA-Z\d]+)'([ts])(\s|$)/g,"$1$2$3"),t=t.replace(s,e.separator),t=t.replace(/\\/g,""),e.separator&&(t=Ajt(t,e.separator)),n&&(t=`_${t}`),r&&(t=`${t}-`),t}function Djt(t){t.core.ruler.push("curly_attributes",Ljt)}function Ljt(t){t.md.nav=[],t.md.attrs={keys:[],sections:{}},t.md.sections={};const e=t.tokens,n=[];let r;const i={len:0,contents:[],types:{}},s=[];let o=[],a=!1,l=0,u=!1,d=0;for(let c=0;c<e.length;c++){const f=e[c];if(f.tag==="p"){const{shouldContinue:p}=Rjt(e,e[c+1]);if(p){c=c+2;continue}}if((jNe(f.type)||DNe[f.type])&&HNe(i,f),f.tag==="h1"||f.tag==="h2"){const p=Ojt(c,e,o,a,l,u,d,t,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,d=p.sectionStepsIndex}if(f.tag==="h3"){const p=Mjt(c,e,o,a,l,u,d,t,i);a=p.sectionStart,u=p.sectionSteps,l=p.sectionStartIndex,d=p.sectionStepsIndex}if(f.type==="html_block"){const p=f.content.match(TNe);if(!p){f.level=f.level+1,o.push(f);continue}r=qNe(i,p[1],p[2]),r&&pb(r,p[3])&&n.unshift(c)}f.type==="inline"&&(o=Fjt(f,i,s,o,l,d,u)),f.level=f.level+1,o.push(f);const h=Lu(i.last.attrs,"as");i.last.markup==="#"&&dzt.includes(h)&&(o=Ijt(o,t,i),c++)}a&&(UNe(o,l),s$(o,l,t)),u&&s$(o,d,t),Pjt(o,t.md),n.forEach(c=>e.splice(c,1)),t.tokens=o,t.md.nav=s||[]}function Zf(t,e,n,r,i,s=null){const o=new t.Token(i,e,n);return o.attrs=s,o.nesting=r,o}function jNe(t){return t.match(/_(open|start)$/)||t==="fence"||t==="code_block"}function Rjt(t,e){const n=/\r\n|\r|\n/,r=/mode\s*=\s*(['"])fallback\1/g;let i=!1;if(r.test((e==null?void 0:e.content)||""))if(n.test(e.content)){const s=e.content.split(n);s.shift(),e.content=s.join(/\n/),e.children[0].type==="text"&&e.children.shift(),e.children.shift()}else i=!0;return{shouldContinue:i}}function Fjt(t,e,n,r,i,s,o){let a;const l=[];if(t.children.forEach((u,d)=>{(jNe(u.type)||DNe[u.type]||u.type==="code_inline")&&HNe(e,u);const c=u.content.match(TNe);if(c){const f=qNe(e,c[1],c[2]);f&&pb(f,c[3])&&(l.unshift(d),a&&$jt(a,"content"))}u.type==="text"&&(a=u)}),e.last.tag==="h3"&&o&&s!==-1){const u=r[s];u.section=r[i].id,pb(u,e.last.attrStr)}if(e.last.tag==="h1"||e.last.tag==="h2"){const u=a&&a.content,d=Lu(e.last.attrs,"id"),c=Lu(e.last.attrs,"as"),f=Lu(e.last.attrs,"mode")||"container",h=Lu(e.last.attrs,"position")||"left",p=Tjt(u||""),g=d||p,b=`section-${g}`,v=Lu(e.last.attrs,"nav")!=="false";e.last.tag==="h2"&&u&&n.push({title:u,id:b,state:v});const w=r[i],E=r[r.length-1],S=`.${f} .${h}`;w.attrs.push(["id",b]),w.id=b,c&&(E.tag=c,E.type="html_open",E.as=c,E.section=b,t.type="html_inline",t.content="",t.children=null,pb(E,`${a?`title='${a.content}'`:""}${e.last.attrStr} #${g}`),w.mode=f,w.position=h,pb(w,`#${b} .${w.attrs[0][1]} .section-custom`)),pb(w,S)}return t.children&&l.forEach(u=>t.children.splice(u,1)),r}function Ojt(t,e,n,r,i,s,o,a,l){const u=e[t];if(u.type==="heading_close"&&(u.tag=n[n.length-2].tag,u.type=n[n.length-2].type.replace("_open","_close")),u.type==="heading_open"){if(r){s&&(s$(n,o,a),s=!1,o=-1);const d=n[i].tag;UNe(n,i),n.push(Zf(a,d,-1,-1,"html_close")),r=!1,i=-1}r||(n.push(Zf(a,"div",0,1,"html_open",[["class","section-wrap"]])),r=!0,i=n.length-1,l.last.as=!!e[t+1].content.includes("as="))}return{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function Mjt(t,e,n,r,i,s,o,a,l){return e[t].type==="heading_open"&&r&&n[i].mode==="tour"&&(s&&(n.push(Zf(a,"section-step",-1,-1,"html_close")),s=!1,o=-1),s||(n.push(Zf(a,"section-step",0,1,"html_open")),s=!0,o=n.length-1,l.last.as=!!e[t+1].content.includes("as="))),{sectionStart:r,sectionStartIndex:i,sectionSteps:s,sectionStepsIndex:o,stack:l,finalTokens:n}}function Ijt(t,e,n){return t.push(Zf(e,n.last.tag,1,-1,"html_close",null)),t.push(Zf(e,"h1",1,1,"html_open",null)),t.push(Zf(e,"h1",2,0,"html_inline",null)),t[t.length-1].content=Lu(n.last.attrs,"title"),t.push(Zf(e,"h1",1,-1,"html_close",null)),t}function UNe(t,e){const n=t[e+1],r=Lu(n.attrs,"as"),i=Lu(n.attrs,"mode");r&&!i&&(t.splice(e+2,1),t.slice(e+3).forEach(s=>{s.level=1}),t.push(t[e+2]),t.splice(e+2,1))}function s$(t,e,n){const r=t[e].tag;t.push(Zf(n,r,-1,-1,"html_close"))}function Lu(t,e){var n;return((n=(t||[]).find(r=>r[0]===e))==null?void 0:n[1])||null}function qNe(t,e,n){if(!e)return t.last;n==="^"?n=1:typeof n=="string"?n=+n.slice(1):n=0;const i=(uzt[e.toLowerCase()]||[e.toLowerCase()]).find(o=>t.types[o]),s=t.types[i];if(s)return s[s.length-1-n]}function pb(t,e=""){var s,o;let n;for(t.attrStr=e;e.length>0;)if(n=e.match(/^\s*\.([a-zA-Z0-9\-_]+)/))sp(t,"class",n[1],{append:!0}),e=e.slice(n[0].length);else if(n=e.match(/^\s*#([a-zA-Z0-9\-_]+)/))sp(t,"id",n[1]),e=e.slice(n[0].length);else if(n=e.match(/^\s*([a-zA-Z0-9\-_]+)="([^"]*)"/))sp(t,n[1],n[2]),e=e.slice(n[0].length);else if(n=e.match(/^\s*([a-zA-Z0-9\-_]+)='([^']*)'/))sp(t,n[1],n[2]),e=e.slice(n[0].length);else if(n=e.match(/^\s*([a-zA-Z0-9\-_]+)=([^ ]*)/))sp(t,n[1],n[2]),e=e.slice(n[0].length);else if(n=e.match(/^\s*([a-zA-Z0-9\-_]+)/))sp(t,n[1],""),e=e.slice(n[0].length);else if(n=e.match(/^\s+/))e=e.slice(n[0].length);else if(n=e.match(/^\s*as="([a-zA-Z0-9\-_]+)"/))sp(t,"as",n[1]),e=e.slice(n[0].length);else break;const r=Lu(t.attrs,"as"),i=Lu(t.attrs,"mode");return(o=(s=czt[r])==null?void 0:s[i])==null||o.forEach(a=>{Lu(t.attrs,a[0])||(sp(t,a[0],a[1]),e=e.slice(a[0].length))}),!0}function sp(t,e,n,r={}){const i=t.attrIndex(e);e==="class"&&r.append&&i!==-1?t.attrs[i][1].includes(n)||(t.attrs[i][1]+=` ${n}`):i===-1?t.attrPush([e,n]):r.append?t.attrs[i][1]+=` ${n}`:t.attrs[i][1]=n}function HNe(t,e){const n=e.type.replace(/_(open|start)$/,"");t.types[n]||(t.types[n]=[]),t.types[n].push(e),t.last=e}function $jt(t,e){t[e]=t[e].replace(/\s*$/,"")}function Pjt(t,e){t.forEach(n=>{const r=n.attrs||[];let i={};if(Njt(n,e),r.forEach(s=>{e.attrs.keys.includes(s[0])||e.attrs.keys.push(s[0]),i={...i,[s[0]]:MNe(s[1])},n.section&&(Bjt(n,s,e),zjt(n,s,e))}),r.length&&n.section){const s=n.tag==="section-step",o=s?` ${n.tag} `:"",a=n.section+o,l=Object.keys(e.attrs.sections).filter(c=>!!c.startsWith(a)).length+1,d=a+(s?l:"");e.attrs.sections={...e.attrs.sections,[d]:{...i,...s?{as:n.tag,mode:"tour"}:{}}}}})}function Njt(t,e){var n,r;t.section&&(t.tag==="section-step"&&!e.sections[t.section].steps&&(e.sections[t.section].steps=[]),(t.markup==="#"||t.markup==="##")&&(e.sections[t.section]=e.sections[t.section]||{}),(r=(n=e.sections[t.section])==null?void 0:n.steps)==null||r.push({}))}function Bjt(t,e,n){t.markup==="##"&&(n.sections[t.section]={[e[0]]:vz(e[1]),...n.sections[t.section]})}function zjt(t,e,n){if(t.tag==="section-step"){const r=n.sections[t.section].steps,i=r.length-1,s=r[i];r[i]={[e[0]]:vz(e[1]),...s}}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function GNe(t){return typeof t>"u"||t===null}function jjt(t){return typeof t=="object"&&t!==null}function Ujt(t){return Array.isArray(t)?t:GNe(t)?[]:[t]}function qjt(t,e){var n,r,i,s;if(e)for(s=Object.keys(e),n=0,r=s.length;n<r;n+=1)i=s[n],t[i]=e[i];return t}function Hjt(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function Gjt(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Vjt=GNe,Wjt=jjt,Yjt=Ujt,Xjt=Hjt,Zjt=Gjt,Kjt=qjt,go={isNothing:Vjt,isObject:Wjt,toArray:Yjt,repeat:Xjt,isNegativeZero:Zjt,extend:Kjt};function VNe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function Y2(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=VNe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Y2.prototype=Object.create(Error.prototype);Y2.prototype.constructor=Y2;Y2.prototype.toString=function(e){return this.name+": "+VNe(this,e)};var Ka=Y2;function G4(t,e,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),n-r>a&&(o=" ...",n=r+a-o.length),{str:s+t.slice(e,n).replace(/\t/g,"")+o,pos:r-e+s.length}}function V4(t,e){return go.repeat(" ",e-t.length)+t}function Jjt(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(t.buffer);)i.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,c=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)u=G4(t.buffer,r[o-l],i[o-l],t.position-(r[o]-r[o-l]),c),a=go.repeat(" ",e.indent)+V4((t.line-l+1).toString(),d)+" | "+u.str+`
`+a;for(u=G4(t.buffer,r[o],i[o],t.position,c),a+=go.repeat(" ",e.indent)+V4((t.line+1).toString(),d)+" | "+u.str+`
`,a+=go.repeat("-",e.indent+d+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)u=G4(t.buffer,r[o+l],i[o+l],t.position-(r[o]-r[o+l]),c),a+=go.repeat(" ",e.indent)+V4((t.line+l+1).toString(),d)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var Qjt=Jjt,eUt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],tUt=["scalar","sequence","mapping"];function nUt(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function rUt(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(eUt.indexOf(n)===-1)throw new Ka('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=nUt(e.styleAliases||null),tUt.indexOf(this.kind)===-1)throw new Ka('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var ia=rUt;function cAe(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}function iUt(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function o$(t){return this.extend(t)}o$.prototype.extend=function(e){var n=[],r=[];if(e instanceof ia)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Ka("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof ia))throw new Ka("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Ka("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Ka("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof ia))throw new Ka("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(o$.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=cAe(i,"implicit"),i.compiledExplicit=cAe(i,"explicit"),i.compiledTypeMap=iUt(i.compiledImplicit,i.compiledExplicit),i};var WNe=o$,YNe=new ia("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),XNe=new ia("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),ZNe=new ia("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),KNe=new WNe({explicit:[YNe,XNe,ZNe]});function sUt(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function oUt(){return null}function aUt(t){return t===null}var JNe=new ia("tag:yaml.org,2002:null",{kind:"scalar",resolve:sUt,construct:oUt,predicate:aUt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function lUt(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function uUt(t){return t==="true"||t==="True"||t==="TRUE"}function cUt(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var QNe=new ia("tag:yaml.org,2002:bool",{kind:"scalar",resolve:lUt,construct:uUt,predicate:cUt,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function dUt(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function fUt(t){return 48<=t&&t<=55}function hUt(t){return 48<=t&&t<=57}function pUt(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!dUt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!fUt(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!hUt(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function mUt(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function gUt(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!go.isNegativeZero(t)}var e9e=new ia("tag:yaml.org,2002:int",{kind:"scalar",resolve:pUt,construct:mUt,predicate:gUt,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),yUt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function bUt(t){return!(t===null||!yUt.test(t)||t[t.length-1]==="_")}function vUt(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var xUt=/^[-+]?[0-9]+e/;function wUt(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(go.isNegativeZero(t))return"-0.0";return n=t.toString(10),xUt.test(n)?n.replace("e",".e"):n}function _Ut(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||go.isNegativeZero(t))}var t9e=new ia("tag:yaml.org,2002:float",{kind:"scalar",resolve:bUt,construct:vUt,predicate:_Ut,represent:wUt,defaultStyle:"lowercase"}),n9e=KNe.extend({implicit:[JNe,QNe,e9e,t9e]}),r9e=n9e,i9e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s9e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function EUt(t){return t===null?!1:i9e.exec(t)!==null||s9e.exec(t)!==null}function CUt(t){var e,n,r,i,s,o,a,l=0,u=null,d,c,f;if(e=i9e.exec(t),e===null&&(e=s9e.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],c=+(e[11]||0),u=(d*60+c)*6e4,e[9]==="-"&&(u=-u)),f=new Date(Date.UTC(n,r,i,s,o,a,l)),u&&f.setTime(f.getTime()-u),f}function SUt(t){return t.toISOString()}var o9e=new ia("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:EUt,construct:CUt,instanceOf:Date,represent:SUt});function AUt(t){return t==="<<"||t===null}var a9e=new ia("tag:yaml.org,2002:merge",{kind:"scalar",resolve:AUt}),wz=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function kUt(t){if(t===null)return!1;var e,n,r=0,i=t.length,s=wz;for(n=0;n<i;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function TUt(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,s=wz,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return n=i%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}function DUt(t){var e="",n=0,r,i,s=t.length,o=wz;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[r];return i=s%3,i===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):i===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):i===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}function LUt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var l9e=new ia("tag:yaml.org,2002:binary",{kind:"scalar",resolve:kUt,construct:TUt,predicate:LUt,represent:DUt}),RUt=Object.prototype.hasOwnProperty,FUt=Object.prototype.toString;function OUt(t){if(t===null)return!0;var e=[],n,r,i,s,o,a=t;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],o=!1,FUt.call(i)!=="[object Object]")return!1;for(s in i)if(RUt.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function MUt(t){return t!==null?t:[]}var u9e=new ia("tag:yaml.org,2002:omap",{kind:"sequence",resolve:OUt,construct:MUt}),IUt=Object.prototype.toString;function $Ut(t){if(t===null)return!0;var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],IUt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}function PUt(t){if(t===null)return[];var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}var c9e=new ia("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:$Ut,construct:PUt}),NUt=Object.prototype.hasOwnProperty;function BUt(t){if(t===null)return!0;var e,n=t;for(e in n)if(NUt.call(n,e)&&n[e]!==null)return!1;return!0}function zUt(t){return t!==null?t:{}}var d9e=new ia("tag:yaml.org,2002:set",{kind:"mapping",resolve:BUt,construct:zUt}),_z=r9e.extend({implicit:[o9e,a9e],explicit:[l9e,u9e,c9e,d9e]}),fm=Object.prototype.hasOwnProperty,FT=1,f9e=2,h9e=3,OT=4,W4=1,jUt=2,dAe=3,UUt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qUt=/[\x85\u2028\u2029]/,HUt=/[,\[\]\{\}]/,p9e=/^(?:!|!!|![a-z\-]+!)$/i,m9e=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fAe(t){return Object.prototype.toString.call(t)}function $d(t){return t===10||t===13}function i0(t){return t===9||t===32}function Fl(t){return t===9||t===32||t===10||t===13}function Db(t){return t===44||t===91||t===93||t===123||t===125}function GUt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function VUt(t){return t===120?2:t===117?4:t===85?8:0}function WUt(t){return 48<=t&&t<=57?t-48:-1}function hAe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function YUt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var g9e=new Array(256),y9e=new Array(256);for(var sb=0;sb<256;sb++)g9e[sb]=hAe(sb)?1:0,y9e[sb]=hAe(sb);function XUt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||_z,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function b9e(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Qjt(n),new Ka(e,n)}function _n(t,e){throw b9e(t,e)}function MT(t,e){t.onWarning&&t.onWarning.call(null,b9e(t,e))}var pAe={YAML:function(e,n,r){var i,s,o;e.version!==null&&_n(e,"duplication of %YAML directive"),r.length!==1&&_n(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&_n(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&_n(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&MT(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var i,s;r.length!==2&&_n(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],p9e.test(i)||_n(e,"ill-formed tag handle (first argument) of the TAG directive"),fm.call(e.tagMap,i)&&_n(e,'there is a previously declared suffix for "'+i+'" tag handle'),m9e.test(s)||_n(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{_n(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function Vp(t,e,n,r){var i,s,o,a;if(e<n){if(a=t.input.slice(e,n),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||_n(t,"expected valid JSON character");else UUt.test(a)&&_n(t,"the stream contains non-printable characters");t.result+=a}}function mAe(t,e,n,r){var i,s,o,a;for(go.isObject(n)||_n(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;o<a;o+=1)s=i[o],fm.call(e,s)||(e[s]=n[s],r[s]=!0)}function Lb(t,e,n,r,i,s,o,a,l){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&_n(t,"nested arrays are not supported inside keys"),typeof i=="object"&&fAe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&fAe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,d=s.length;u<d;u+=1)mAe(t,e,s[u],n);else mAe(t,e,s,n);else!t.json&&!fm.call(n,i)&&fm.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,_n(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete n[i];return e}function Ez(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):_n(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function eo(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;i0(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if($d(i))for(Ez(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&MT(t,"deficient indentation"),r}function XR(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Fl(n)))}function Cz(t,e){e===1?t.result+=" ":e>1&&(t.result+=go.repeat(`
`,e-1))}function ZUt(t,e,n){var r,i,s,o,a,l,u,d,c=t.kind,f=t.result,h;if(h=t.input.charCodeAt(t.position),Fl(h)||Db(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Fl(i)||n&&Db(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Fl(i)||n&&Db(i))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Fl(r))break}else{if(t.position===t.lineStart&&XR(t)||n&&Db(h))break;if($d(h))if(l=t.line,u=t.lineStart,d=t.lineIndent,eo(t,!1,-1),t.lineIndent>=e){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=u,t.lineIndent=d;break}}a&&(Vp(t,s,o,!1),Cz(t,t.line-l),s=o=t.position,a=!1),i0(h)||(o=t.position+1),h=t.input.charCodeAt(++t.position)}return Vp(t,s,o,!1),t.result?!0:(t.kind=c,t.result=f,!1)}function KUt(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Vp(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else $d(n)?(Vp(t,r,i,!0),Cz(t,eo(t,!1,e)),r=i=t.position):t.position===t.lineStart&&XR(t)?_n(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);_n(t,"unexpected end of the stream within a single quoted scalar")}function JUt(t,e){var n,r,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Vp(t,n,t.position,!0),t.position++,!0;if(a===92){if(Vp(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),$d(a))eo(t,!1,e);else if(a<256&&g9e[a])t.result+=y9e[a],t.position++;else if((o=VUt(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=GUt(a))>=0?s=(s<<4)+o:_n(t,"expected hexadecimal character");t.result+=YUt(s),t.position++}else _n(t,"unknown escape sequence");n=r=t.position}else $d(a)?(Vp(t,n,r,!0),Cz(t,eo(t,!1,e)),n=r=t.position):t.position===t.lineStart&&XR(t)?_n(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}_n(t,"unexpected end of the stream within a double quoted scalar")}function QUt(t,e){var n=!0,r,i,s,o=t.tag,a,l=t.anchor,u,d,c,f,h,p=Object.create(null),g,b,y,v;if(v=t.input.charCodeAt(t.position),v===91)d=93,h=!1,a=[];else if(v===123)d=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),v=t.input.charCodeAt(++t.position);v!==0;){if(eo(t,!0,e),v=t.input.charCodeAt(t.position),v===d)return t.position++,t.tag=o,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=a,!0;n?v===44&&_n(t,"expected the node content, but found ','"):_n(t,"missed comma between flow collection entries"),b=g=y=null,c=f=!1,v===63&&(u=t.input.charCodeAt(t.position+1),Fl(u)&&(c=f=!0,t.position++,eo(t,!0,e))),r=t.line,i=t.lineStart,s=t.position,qv(t,e,FT,!1,!0),b=t.tag,g=t.result,eo(t,!0,e),v=t.input.charCodeAt(t.position),(f||t.line===r)&&v===58&&(c=!0,v=t.input.charCodeAt(++t.position),eo(t,!0,e),qv(t,e,FT,!1,!0),y=t.result),h?Lb(t,a,p,b,g,y,r,i,s):c?a.push(Lb(t,null,p,b,g,y,r,i,s)):a.push(g),eo(t,!0,e),v=t.input.charCodeAt(t.position),v===44?(n=!0,v=t.input.charCodeAt(++t.position)):n=!1}_n(t,"unexpected end of the stream within a flow collection")}function eqt(t,e){var n,r,i=W4,s=!1,o=!1,a=e,l=0,u=!1,d,c;if(c=t.input.charCodeAt(t.position),c===124)r=!1;else if(c===62)r=!0;else return!1;for(t.kind="scalar",t.result="";c!==0;)if(c=t.input.charCodeAt(++t.position),c===43||c===45)W4===i?i=c===43?dAe:jUt:_n(t,"repeat of a chomping mode identifier");else if((d=WUt(c))>=0)d===0?_n(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?_n(t,"repeat of an indentation width identifier"):(a=e+d-1,o=!0);else break;if(i0(c)){do c=t.input.charCodeAt(++t.position);while(i0(c));if(c===35)do c=t.input.charCodeAt(++t.position);while(!$d(c)&&c!==0)}for(;c!==0;){for(Ez(t),t.lineIndent=0,c=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&c===32;)t.lineIndent++,c=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),$d(c)){l++;continue}if(t.lineIndent<a){i===dAe?t.result+=go.repeat(`
`,s?1+l:l):i===W4&&s&&(t.result+=`
`);break}for(r?i0(c)?(u=!0,t.result+=go.repeat(`
`,s?1+l:l)):u?(u=!1,t.result+=go.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=go.repeat(`
`,l):t.result+=go.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,n=t.position;!$d(c)&&c!==0;)c=t.input.charCodeAt(++t.position);Vp(t,n,t.position,!1)}return!0}function gAe(t,e){var n,r=t.tag,i=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,_n(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!Fl(o))));){if(a=!0,t.position++,eo(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(n=t.line,qv(t,e,h9e,!1,!0),s.push(t.result),eo(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&l!==0)_n(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function tqt(t,e,n){var r,i,s,o,a,l,u=t.tag,d=t.anchor,c={},f=Object.create(null),h=null,p=null,g=null,b=!1,y=!1,v;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),v=t.input.charCodeAt(t.position);v!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,_n(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(v===63||v===58)&&Fl(r))v===63?(b&&(Lb(t,c,f,h,p,null,o,a,l),h=p=g=null),y=!0,b=!0,i=!0):b?(b=!1,i=!0):_n(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,v=r;else{if(o=t.line,a=t.lineStart,l=t.position,!qv(t,n,f9e,!1,!0))break;if(t.line===s){for(v=t.input.charCodeAt(t.position);i0(v);)v=t.input.charCodeAt(++t.position);if(v===58)v=t.input.charCodeAt(++t.position),Fl(v)||_n(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Lb(t,c,f,h,p,null,o,a,l),h=p=g=null),y=!0,b=!1,i=!1,h=t.tag,p=t.result;else if(y)_n(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(y)_n(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,a=t.lineStart,l=t.position),qv(t,e,OT,!0,i)&&(b?p=t.result:g=t.result),b||(Lb(t,c,f,h,p,g,o,a,l),h=p=g=null),eo(t,!0,-1),v=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&v!==0)_n(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&Lb(t,c,f,h,p,null,o,a,l),y&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=c),y}function nqt(t){var e,n=!1,r=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&_n(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):_n(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Fl(o);)o===33&&(r?_n(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),p9e.test(i)||_n(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),HUt.test(s)&&_n(t,"tag suffix cannot contain flow indicator characters")}s&&!m9e.test(s)&&_n(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{_n(t,"tag name is malformed: "+s)}return n?t.tag=s:fm.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:_n(t,'undeclared tag handle "'+i+'"'),!0}function rqt(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&_n(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Fl(n)&&!Db(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&_n(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function iqt(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Fl(r)&&!Db(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&_n(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),fm.call(t.anchorMap,n)||_n(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],eo(t,!0,-1),!0}function qv(t,e,n,r,i){var s,o,a,l=1,u=!1,d=!1,c,f,h,p,g,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=OT===n||h9e===n,r&&eo(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;nqt(t)||rqt(t);)eo(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=u||i),(l===1||OT===n)&&(FT===n||f9e===n?g=e:g=e+1,b=t.position-t.lineStart,l===1?a&&(gAe(t,b)||tqt(t,b,g))||QUt(t,g)?d=!0:(o&&eqt(t,g)||KUt(t,g)||JUt(t,g)?d=!0:iqt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&_n(t,"alias node should not have any properties")):ZUt(t,g,FT===n)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(d=a&&gAe(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&_n(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),c=0,f=t.implicitTypes.length;c<f;c+=1)if(p=t.implicitTypes[c],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(fm.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=t.typeMap.multi[t.kind||"fallback"],c=0,f=h.length;c<f;c+=1)if(t.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||_n(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&_n(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):_n(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function sqt(t){var e=t.position,n,r,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(eo(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!Fl(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&_n(t,"directive name must not be less than one character in length");o!==0;){for(;i0(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!$d(o));break}if($d(o))break;for(n=t.position;o!==0&&!Fl(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}o!==0&&Ez(t),fm.call(pAe,r)?pAe[r](t,r,i):MT(t,'unknown document directive "'+r+'"')}if(eo(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,eo(t,!0,-1)):s&&_n(t,"directives end mark is expected"),qv(t,t.lineIndent-1,OT,!1,!0),eo(t,!0,-1),t.checkLineBreaks&&qUt.test(t.input.slice(e,t.position))&&MT(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&XR(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,eo(t,!0,-1));return}if(t.position<t.length-1)_n(t,"end of the stream or a document separator is expected");else return}function v9e(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new XUt(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,_n(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)sqt(n);return n.documents}function oqt(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=v9e(t,n);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}function aqt(t,e){var n=v9e(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Ka("expected a single document in the stream, but found more")}}var lqt=oqt,uqt=aqt,x9e={loadAll:lqt,load:uqt},w9e=Object.prototype.toString,_9e=Object.prototype.hasOwnProperty,Sz=65279,cqt=9,X2=10,dqt=13,fqt=32,hqt=33,pqt=34,a$=35,mqt=37,gqt=38,yqt=39,bqt=42,E9e=44,vqt=45,IT=58,xqt=61,wqt=62,_qt=63,Eqt=64,C9e=91,S9e=93,Cqt=96,A9e=123,Sqt=124,k9e=125,$a={};$a[0]="\\0";$a[7]="\\a";$a[8]="\\b";$a[9]="\\t";$a[10]="\\n";$a[11]="\\v";$a[12]="\\f";$a[13]="\\r";$a[27]="\\e";$a[34]='\\"';$a[92]="\\\\";$a[133]="\\N";$a[160]="\\_";$a[8232]="\\L";$a[8233]="\\P";var Aqt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],kqt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Tqt(t,e){var n,r,i,s,o,a,l;if(e===null)return{};for(n={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&_9e.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[o]=a;return n}function Dqt(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Ka("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+go.repeat("0",r-e.length)+e}var Lqt=1,Z2=2;function Rqt(t){this.schema=t.schema||_z,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=go.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Tqt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Z2:Lqt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function yAe(t,e){for(var n=go.repeat(" ",e),r=0,i=-1,s="",o,a=t.length;r<a;)i=t.indexOf(`
`,r),i===-1?(o=t.slice(r),r=a):(o=t.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function l$(t,e){return`
`+go.repeat(" ",t.indent*e)}function Fqt(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}function $T(t){return t===fqt||t===cqt}function K2(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Sz||65536<=t&&t<=1114111}function bAe(t){return K2(t)&&t!==Sz&&t!==dqt&&t!==X2}function vAe(t,e,n){var r=bAe(t),i=r&&!$T(t);return(n?r:r&&t!==E9e&&t!==C9e&&t!==S9e&&t!==A9e&&t!==k9e)&&t!==a$&&!(e===IT&&!i)||bAe(e)&&!$T(e)&&t===a$||e===IT&&i}function Oqt(t){return K2(t)&&t!==Sz&&!$T(t)&&t!==vqt&&t!==_qt&&t!==IT&&t!==E9e&&t!==C9e&&t!==S9e&&t!==A9e&&t!==k9e&&t!==a$&&t!==gqt&&t!==bqt&&t!==hqt&&t!==Sqt&&t!==xqt&&t!==wqt&&t!==yqt&&t!==pqt&&t!==mqt&&t!==Eqt&&t!==Cqt}function Mqt(t){return!$T(t)&&t!==IT}function w_(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function T9e(t){var e=/^\n* /;return e.test(t)}var D9e=1,u$=2,L9e=3,R9e=4,mb=5;function Iqt(t,e,n,r,i,s,o,a){var l,u=0,d=null,c=!1,f=!1,h=r!==-1,p=-1,g=Oqt(w_(t,0))&&Mqt(w_(t,t.length-1));if(e||o)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=w_(t,l),!K2(u))return mb;g=g&&vAe(u,d,a),d=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=w_(t,l),u===X2)c=!0,h&&(f=f||l-p-1>r&&t[p+1]!==" ",p=l);else if(!K2(u))return mb;g=g&&vAe(u,d,a),d=u}f=f||h&&l-p-1>r&&t[p+1]!==" "}return!c&&!f?g&&!o&&!i(t)?D9e:s===Z2?mb:u$:n>9&&T9e(t)?mb:o?s===Z2?mb:u$:f?R9e:L9e}function $qt(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===Z2?'""':"''";if(!t.noCompatMode&&(Aqt.indexOf(e)!==-1||kqt.test(e)))return t.quotingType===Z2?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=r||t.flowLevel>-1&&n>=t.flowLevel;function l(u){return Fqt(t,u)}switch(Iqt(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!r,i)){case D9e:return e;case u$:return"'"+e.replace(/'/g,"''")+"'";case L9e:return"|"+xAe(e,t.indent)+wAe(yAe(e,s));case R9e:return">"+xAe(e,t.indent)+wAe(yAe(Pqt(e,o),s));case mb:return'"'+Nqt(e)+'"';default:throw new Ka("impossible error: invalid scalar style")}}()}function xAe(t,e){var n=T9e(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),s=i?"+":r?"":"-";return n+s+`
`}function wAe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Pqt(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,n.lastIndex=u,_Ae(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+_Ae(l,e),i=s}return r}function _Ae(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=n.exec(t);)a=r.index,a-i>e&&(s=o>i?o:a,l+=`
`+t.slice(i,s),i=s+1),o=a;return l+=`
`,t.length-i>e&&o>i?l+=t.slice(i,o)+`
`+t.slice(o+1):l+=t.slice(i),l.slice(1)}function Nqt(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=w_(t,i),r=$a[n],!r&&K2(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||Dqt(n);return e}function Bqt(t,e,n){var r="",i=t.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],t.replacer&&(a=t.replacer.call(n,String(s),a)),(bh(t,e,a,!1,!1)||typeof a>"u"&&bh(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}function EAe(t,e,n,r){var i="",s=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(bh(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&bh(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=l$(t,e)),t.dump&&X2===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function zqt(t,e,n){var r="",i=t.tag,s=Object.keys(n),o,a,l,u,d;for(o=0,a=s.length;o<a;o+=1)d="",r!==""&&(d+=", "),t.condenseFlow&&(d+='"'),l=s[o],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),bh(t,e,l,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),bh(t,e,u,!1,!1)&&(d+=t.dump,r+=d));t.tag=i,t.dump="{"+r+"}"}function jqt(t,e,n,r){var i="",s=t.tag,o=Object.keys(n),a,l,u,d,c,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new Ka("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)f="",(!r||i!=="")&&(f+=l$(t,e)),u=o[a],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),bh(t,e+1,u,!0,!0,!0)&&(c=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,c&&(t.dump&&X2===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,c&&(f+=l$(t,e)),bh(t,e+1,d,!0,c)&&(t.dump&&X2===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=s,t.dump=i||"{}"}function CAe(t,e,n){var r,i,s,o,a,l;for(i=n?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,w9e.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(_9e.call(a.represent,l))r=a.represent[l](e,l);else throw new Ka("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function bh(t,e,n,r,i,s,o){t.tag=null,t.dump=n,CAe(t,n,!1)||CAe(t,n,!0);var a=w9e.call(t.dump),l=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var d=a==="[object Object]"||a==="[object Array]",c,f;if(d&&(c=t.duplicates.indexOf(n),f=c!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(d&&f&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(jqt(t,e,t.dump,i),f&&(t.dump="&ref_"+c+t.dump)):(zqt(t,e,t.dump),f&&(t.dump="&ref_"+c+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?EAe(t,e-1,t.dump,i):EAe(t,e,t.dump,i),f&&(t.dump="&ref_"+c+t.dump)):(Bqt(t,e,t.dump),f&&(t.dump="&ref_"+c+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&$qt(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Ka("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function Uqt(t,e){var n=[],r=[],i,s;for(c$(t,n,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(s)}function c$(t,e,n){var r,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)c$(t[i],e,n);else for(r=Object.keys(t),i=0,s=r.length;i<s;i+=1)c$(t[r[i]],e,n)}function qqt(t,e){e=e||{};var n=new Rqt(e);n.noRefs||Uqt(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),bh(n,0,r,!0,!0)?n.dump+`
`:""}var Hqt=qqt,Gqt={dump:Hqt};function Az(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Vqt=ia,Wqt=WNe,Yqt=KNe,Xqt=n9e,Zqt=r9e,Kqt=_z,Jqt=x9e.load,Qqt=x9e.loadAll,eHt=Gqt.dump,tHt=Ka,nHt={binary:l9e,float:t9e,map:ZNe,null:JNe,pairs:c9e,set:d9e,timestamp:o9e,bool:QNe,int:e9e,merge:a9e,omap:u9e,seq:XNe,str:YNe},rHt=Az("safeLoad","load"),iHt=Az("safeLoadAll","loadAll"),sHt=Az("safeDump","dump"),oHt={Type:Vqt,Schema:Wqt,FAILSAFE_SCHEMA:Yqt,JSON_SCHEMA:Xqt,CORE_SCHEMA:Zqt,DEFAULT_SCHEMA:Kqt,load:Jqt,loadAll:Qqt,dump:eHt,YAMLException:tHt,types:nHt,safeLoad:rHt,safeLoadAll:iHt,safeDump:sHt};function aHt(t){t.core.ruler.before("normalize","extract-config",e=>{var i;const n=/^\s*---\s*\n([\s\S]+?)\n\s*---\s*/,r=e.src.match(n);if(t.config={versionCheck:((i=t.config)==null?void 0:i.versionCheck)||!1},r)try{t.config=oHt.load(r[1]),e.src=e.src.replace(r[0],"")}catch(s){return console.error("Error parsing frontmatter:",s),null}t.config.versionCheck||(t.config.version=Number(cjt(t.config.version)),t.config.versionCheck=!0)})}const lHt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,uHt=`
input[type=checkbox] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}
input[type=checkbox]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-blank-outline%3C/title%3E%3Cpath d='M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=checkbox]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Echeckbox-marked%3C/title%3E%3Cpath d='M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z' /%3E%3C/svg%3E");

}
`,cHt=`
input[type=radio] {
  appearance: none;
  -webkit-appearance: none;
  margin: 0;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 24px;
  height: 24px;
}

label span {
  font-size: small;
}

input[type=radio]:after {
  display: block;
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-blank%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z' /%3E%3C/svg%3E");
  width: 20px;
  height: 20px;
  margin-right: 4px;
}
input[type=radio]:checked:after {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23004170' viewBox='0 0 24 24'%3E%3Ctitle%3Eradiobox-marked%3C/title%3E%3Cpath d='M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z' /%3E%3C/svg%3E");

}
`,dHt=`
input[type="range"] {
  -webkit-appearance: none;
  width: 90%;
  margin-left: 5%;
  height: 6px;
  border-radius: 5px;
  background: #d7dcdf;
  outline: none;
  padding: 0;
}
input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
.range-slider {
  margin: 60px 0 0 0;
}
.range-slider {
  width: 100%;
}
input[type="range"]::-webkit-slider-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-webkit-slider-thumb {
  background: #00416F;
}
input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border: 0;
  border-radius: 50%;
  background: #2c3e50;
  cursor: pointer;
  transition: background 0.15s ease-in-out;
}
input[type="range"]::-moz-range-thumb:hover {
  background: #00416F;
}
input[type="range"]:active::-moz-range-thumb {
  background: #00416F;
}
input[type="range"]:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px #fff0, 0 0 0 6px #00416F00;
}
.range-slider__value {
  display: inline-block;
  position: relative;
  width: 60px;
  color: #fff;
  line-height: 20px;
  text-align: center;
  border-radius: 3px;
  background: #2c3e50;
  padding: 5px 10px;
  margin-left: 8px;
}
.range-slider__value:after {
  position: absolute;
  top: 8px;
  left: -7px;
  width: 0;
  height: 0;
  border-top: 7px solid transparent;
  border-right: 7px solid #2c3e50;
  border-bottom: 7px solid transparent;
  content: '';
}

input::-moz-focus-inner, input::-moz-focus-outer {
  border: 0;
}
`,fHt=`
${lHt}
${uHt}
${cHt}
${dHt}

  iframe,
  img,
  video {
    max-width: 100%;
  }
  .navigation {
    width: 100%;
    background: white;
    padding: 10px 0px;
    color: black;
    box-shadow: 0px 0px 13px 3px #8080802e;
    max-height: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  .navigation .container {
    padding: 0px;
  }
  .navigation .container ul {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0px;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    margin: 0;
    padding: 0;
  }
  .navigation .container ul::-webkit-scrollbar { 
    display: none;
  }
  .navigation .container ul li {
    list-style: none;
    margin: 0px 10px;
  }
  .navigation li a {
    color: black;
    font-weight: 500;
    text-decoration: none;
    position: relative;
    display: inline-grid;
  }
  .navigation li a:after {
    content: "";
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: transparent;
  }
  .navigation li a:hover:after {
    background: black;
  }
  .navigation li.active a {
    font-weight: 700;
  }
  .navigation li.active a:after {
    background: black;
  }
  .navigation li a:hover {
    --primary-background-hover: transparent;
  }
  .hamburger-menu {
    display: none;
    cursor: pointer;
    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTUsOS41TDcuNSwxNEgyLjVMNSw5LjVNMyw0SDdWOEgzVjRNNSwyMEEyLDIgMCAwLDAgNywxOEEyLDIgMCAwLDAgNSwxNkEyLDIgMCAwLDAgMywxOEEyLDIgMCAwLDAgNSwyME05LDVWN0gyMVY1SDlNOSwxOUgyMVYxN0g5VjE5TTksMTNIMjFWMTFIOVYxM1oiIC8+PC9zdmc+");
    background-repeat: no-repeat;
    background-size: contain;
    width: 30px;
    height: 30px;
  }
  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .nav-overlay {
    display: none;
  }
  @media (max-width: 768px) {
    .navigation {
      padding: 0px;
      height: 50px;
    }
    .navigation .container {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .hamburger-menu {
      display: flex;
    }
    .navigation .container ul {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 99999999;
      display: none;
      flex-direction: column;
    }
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99999998;
      cursor: pointer;
    }
    .navigation .container ul.show, .nav-overlay.show {
      display: flex !important;
    }
    .nav-list li {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .hamburger-menu.active span:nth-child(1) {
      transform: rotate(45deg) translate(8px, 8px);
    }
    .hamburger-menu.active span:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active span:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -7px);
    }
    .navigation .container ul li {
      width: 100%;
      text-align: center;
    } 
  }
  .section-wrap {
    scroll-margin: 120px;
  }
  .story-telling p,
  .story-telling code {
    --font-size: 1.1rem;
  }
  .story-telling p {
    display: block;
    font-weight: 400;
    line-height: 170%;
    margin-top: 0.8rem;
    margin-bottom: 1.6rem;
  }
  .story-telling a {
    --font-size: 1.1rem;
    --color: var(--primary-color);
    --background-color: transparent;
    outline: 0;
    background-color: var(--background-color);
    color: var(--color);
    text-underline-offset: 4px;
    font-size: var(--font-size)
  }
  .story-telling a:hover {
    --bg-hover-transparency: 10%;
    background-color: color-mix(
      in srgb,
      var(--primary-color) var(--bg-hover-transparency),
      transparent
    );
  }
  .story-telling li {
    margin-bottom: 1rem;
  }
  .story-telling table {
    width:100%;
    color: var(--color);
    font-style: normal;
    font-weight: 400;
    font-size: 1rem;
    margin: 2rem 0rem;
  }
  .story-telling td, 
  .story-telling th {
    padding: 1rem;
    color: var(--color);
    font-weight: 400;
    font-size: 1rem;
    text-align: left;
    text-align: start;
    border-bottom: 1px solid var(--color);
  }
  .story-telling th {
    font-weight: 600;
    border-bottom: 3px solid var(--color);
  }
  .story-telling .container {
    width: 90%;
    --block-spacing-vertical: 2rem;
  }
  .story-telling.editor-enabled .section-wrap.section-item {
    position: relative;
    border-bottom: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start {
    border-top: 1px solid #efefef;
  }
  .story-telling.editor-enabled .section-wrap.section-item::after, 
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    content: "+";
    background: white;
    width: 25px;
    height: 25px;
    display: flex;
    position: absolute;
    bottom: -12px;
    left: calc(50% - 12.5px);
    z-index: 1;
    border-radius: 100%;
    box-shadow: 1px 1px 10px #80808094;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: larger;
    cursor: pointer;
  }
  .story-telling.editor-enabled.editor-close .section-wrap.section-item::after, 
  .story-telling.editor-enabled.editor-close .section-wrap.section-item.section-start::before {
    display: none;
  }
  .story-telling.editor-enabled .section-wrap.section-item.section-start::before {
    top: -12px;
  }
  .story-telling .section-wrap.container.section-start {
    padding-top: 4rem;
  }
  .story-telling p:last-child {
    margin-bottom: 0;
  }
  .story-telling .section-wrap.container:last-child {
    padding-bottom: 4rem; 
  }
  .story-telling .tour {
    width: 100%;
    justify-items: start;
    display: grid;
  }
  .story-telling .hero {
    position: relative;      
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .story-telling .hero * {
    color: white;
    margin: 0rem 0.8rem;
  }
  .story-telling .hero.center {
    align-items: center;
    text-align: center;
  }
  .story-telling .hero.left {
    align-items: start;
    text-align: left;
  }
  .story-telling .hero.right {
    align-items: end;
    text-align: right;
  }
  .story-telling .hero img, 
  .story-telling .hero video {
    position: absolute;
    top: -17.5%;
    left: 0;
    z-index: -1;
    width: 100%;
    height: 135%;
    object-fit: cover;
    margin: 0rem;
    will-change: transform;
    backface-visibility: hidden;
    filter: brightness(60%) contrast(100%);
  }
  .story-telling .tour.left {
    justify-items: start;
  }
  .story-telling .tour.right {
    justify-items: end;
  }
  .story-telling .tour.center {
    justify-items: center;
  }
  .story-telling .tour eox-map {
    width: 100%;
    height: 100vh;
    position: sticky;
    top:0;
    z-index: 0;
  }
  .story-telling .tour section-step {
    background: white;
    padding: 0.75rem;
    border-radius: 0.5rem;
    min-height: 8vh;
    margin: 1rem;
    margin-bottom: calc(120vh);
    display: block;
    z-index: 1;
    max-width: 40%;
  }
  @media screen and (max-width: 1024px) {
    .story-telling .tour section-step {
      max-width: 100%;
    }
  }
  .editor-wrapper {
    z-index: 4;
    width: 35%;
    position: fixed;
    bottom: 20px;
    right: 20px;
    border-radius: 10px;
    background: #f2f2f2;
    cursor: move;
    box-shadow: 0px 0px 3px 2px #80808026;
    box-sizing: border-box;
  }
  .resize-handle {
    position: absolute;
    width: 20px;
    height: 20px;
    bottom: 4px;
    left: 4px;
    background-color: black;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eresize-bottom-right%3C/title%3E%3Cpath d='M22,22H20V20H22V22M22,18H20V16H22V18M18,22H16V20H18V22M18,18H16V16H18V18M14,22H12V20H14V22M22,14H20V12H22V14Z' /%3E%3C/svg%3E");
    transform: rotate(90deg);
    cursor: sw-resize;
    z-index: 2;
  }
  #editor {
    width: 100%;
    height: 100%;
    border: 2px solid #ebebeb;
    cursor: auto;
  }
  @media screen and (max-width: 1024px) {
    .editor-wrapper {
      right: 2.5%;
      width: 95%;
    }
  }
  .editor-opacity-none {
    opacity: 0;
  }
  .editor-hide {
    display: none;
  }
  .editor-error {
    display: none;
    cursor: auto;
    position: absolute;
    bottom: 39px;
    left: 9px;
    width: calc(100% - 20px);
    height: 105px;
    background: #ffc7d3;
    border-bottom-left-radius: 4px;
    border-bottom-right-radius: 4px;
    border: 2px solid #ff7b9640;
    z-index: 1;
  }
  .editor-error .editor-error-wrapper {
    padding: 0.5rem;
    height: 85%;
  }
  .editor-error .editor-error-wrapper .overflow {
    height: 100%;
    overflow-y: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
    width: 85%;
  }
  .editor-error .editor-error-wrapper .overflow::-webkit-scrollbar { 
    display: none;
  }
  .editor-error .editor-error-wrapper h6 {
    margin: 0;
    padding: 0;
    font-size: 0.7rem;
    color: #dd264c;
  }
  .editor-error .editor-error-wrapper ul {
    margin-top: 0.25rem;
    padding-inline-start: 20px;
  }
  .editor-error .editor-error-wrapper li {
    color: #dd264c;
    font-size: 0.7rem;
    font-weight: 400;
    margin-bottom: 0;
    margin-left: 0.2rem;
  }
  .editor-saver {
    position: absolute;    
    bottom: 18px;
    left: 17px;
    font-size: 12px;
    color: #959694;
    text-align: right;
  }
  @keyframes rotate {
    100% {transform: rotate(360deg)}
  }
  @keyframes spin {
    0%   {clip-path:polygon(50% 50%,0 0,0 0,0 0,0 0,0 0)}
    25%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 0,100% 0,100% 0)}
    50%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,100% 100%,100% 100%)}
    75%  {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 100%)}
    100% {clip-path:polygon(50% 50%,0 0,100% 0,100% 100%,0 100%,0 0)}
  }
  .switch-button {
    position: fixed;
    bottom: 70px;
    right: 60px;
    display: inline-block;
    font-size: 0;
    z-index: 5;
    border: 5px white solid;
    border-radius: 34px;
    box-shadow: 1px 2px 10px 1px #7e7e7e59;
    cursor: pointer;
  }
  .switch {
    position: relative;
    display: flex;
    align-items: center;
    width: 65px;
    height: 34px;
    font-size: 16px;
    justify-content: space-around;
    margin-bottom: 0px;
  }
  .switch .switch-input { 
    opacity: 0;
    width: 0;
    height: 0;
  }
  .switch .icon {
    z-index: 2;
    width: 30px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .switch .icon::before {
    cursor: pointer;
    display: block;
    width: 18px;
    height: 18px;
  }
  .view-icon {
    padding-left: 8px;
  }
  .editor-icon {
    padding-right: 8px;
  }
  .switch .view-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath fill='white' d='M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z' /%3E%3C/svg%3E");
  }
  .switch .icon.editor-icon:before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epencil%3C/title%3E%3Cpath fill='white' d='M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z' /%3E%3C/svg%3E");
  }
  .switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 20px;
    right: 20px;
    bottom: 0;
    z-index: 1;
    background-color: #727272;
    transition: .4s;
    border-radius: 34px;
    left: 0px;
    right: 0px;
    width: 65px;
  }
  .switch-slider:before {
    cursor: pointer;
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  .switch-input:checked + .switch-slider {
    background-color: #2196F3;
  }
  .switch-input:checked + .switch-slider:before {
    transform: translateX(30px);
  }
  .switch .icon.editor-view {
    opacity: 0;
  }
  .story-telling-custom-section-list {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000000b5;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .story-telling-custom-section-list .overlay-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: -1;
    cursor: pointer;
  }
  .story-telling-custom-section-list .story-telling-popup {
    width: 450px;
    height: 500px;
    background: white;
    border-radius: 0.5rem;
    padding: 20px;
    position: relative;
  }
  .story-telling-section-fields-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    background: #000000c9;
    height: 100%;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  .story-telling-section-fields-wrapper {
    position: absolute;
    top: 0;
    right: 0;
    width: 70%;
    background: white;
    height: 100%;
    border-bottom-right-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
    box-shadow: -14px 3px 20px 0px #0e0e0e26;
  }
  .story-telling-popup-wrapper {
    overflow-y: auto;
    height: 100%;
  }
  .story-telling-custom-section-list .story-telling-popup .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
  }
  .story-telling-custom-section-list .story-telling-popup .header:first-child {
    margin-top:0px;
  }
  .story-telling-custom-section-list .story-telling-popup .header h4 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
  }
  .story-telling-custom-section-list .story-telling-popup .header p {
    background: #2273EC;
    border-radius: 20px;
    padding: 0px 15px;
    color: white;
    height: 1.1rem;
    display: flex;
    align-items: center;
    margin: 0;
    font-size: 0.75rem;
  }
  .story-telling-custom-section-list .story-telling-popup hr {
    border-top: 2.5px solid #e5eaf0;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item {
    text-align: center;
    cursor: pointer;
    padding: 0px;
    border: 1px solid #e1e6eb;
    border-radius: 6px;
    transition: all 0.2s ease-in-out;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item:hover {
    border-color: #2273EC;
    background-color: #f7f7f7;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon {
    font-size: 0px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item icon::before {
    width: 100%;
    color: black;
    display: inline-block;
    border-radius: 6px;
  }
  .story-telling-custom-section-list .story-telling-popup .grid-container .grid-item p {
    padding: 0px;
    margin: 0px;
    font-size: 0.8rem;
    color: #555555;
    font-weight: 500;
    padding: 4px 0px;
  }
  eox-jsonform#storytelling-editor-fields {
    padding-bottom: 80px;
    height: auto;
    display: block;
  }
  eox-jsonform#storytelling-editor-fields div {
    height: auto;
  }
  .story-telling-section-fields-overflow {
    overflow-y: auto;
    height: calc(100% - 60px);
    padding: 20px;
  }
  .story-telling-section-submit-wrapper {
    position: absolute;
    width: 100%;
    bottom: 0;
    padding: 10px 0px;
    background: white;
    display: flex;
    justify-content: center;
    box-shadow: -2px -10px 10px #00000017;
    border-bottom-right-radius: 0.5rem;
  }
  .story-telling-section-submit-wrapper button {
    width: 92%;
    justify-content: center;
  }
  eox-jsonform#storytelling-editor-fields .je-form-input-label {
    text-transform: capitalize;
  }
  eox-jsonform#storytelling-editor-fields .je-object__controls {
    display: none; 
  }
  @media screen and (max-width: 1024px) {
    .switch-button {
      right: 20px;
    }
  }
  .section-line-decoration {
    background: #757575;
    z-index: 1;
    align-items: center;
    justify-content: center;
    display: flex;
    color: #ffffff;
    font-size: 12px;
    font-weight: 700;
  }
  .margin-view-overlays {
    background: #e6e6e6;
  }
`;var uD,O9e;class F9e extends Zr{constructor(){super();gn(this,uD);this.markdown="",this.storyId=null,this.isNavigation=!1,this.dragging=!1,this.resizing=!1,this.showEditor=void 0,this.disableAutosave=!1,this.disableTextSelection=this.disableTextSelection.bind(this),this.enableTextSelection=this.enableTextSelection.bind(this)}disableTextSelection(){document.body.style.userSelect="none"}enableTextSelection(){document.body.style.userSelect=""}firstUpdated(){const n=this.querySelector(".editor-wrapper"),r=this.querySelector(".resize-handle");this.editor=this.renderRoot.querySelector("eox-jsonform#storytelling-editor"),this.showEditor==="closed"&&ONe(this),xzt(this),FNe(this),vzt(n,r,this)}updateErrors(n){const r=this.renderRoot.querySelector(".editor-error");r&&(n.length?(r.style.display="block",r.querySelector("ul").innerHTML=n.map(i=>`<li><strong>${i.ref}</strong>: ${i.message}</li>`).join("")):r.style.display="none")}createRenderRoot(){return this}render(){customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use StoryTelling Editor");const n=this.isNavigation?"partial-height":"";return et`
      <div class="editor-wrapper ${n}">
        <eox-jsonform
          id="storytelling-editor"
          no-shadow
          .schema=${Azt}
          .value=${{Story:this.markdown}}
        ></eox-jsonform>
        <div class="resize-handle"></div>
        <span class="editor-saver">Saved</span>
        <div class="editor-error">
          <div class="editor-error-wrapper">
            <div class="overflow">
              <h6> Error</h6>
              <ul></ul>
            </div>
          </div>
        </div>
      </div>
      <div class="switch-button">
        <label class="switch">
          <i class="icon view-icon"></i>
          <input
            class="switch-input"
            type="checkbox"
            @change=${yn(this,uD,O9e)}
            checked
          />
          <span class="switch-slider round"></span>
          <i class="icon editor-icon"></i>
        </label>
      </div>
      <style>
        eox-jsonform#storytelling-editor {
          display: block;
          height: 100%;
          cursor: default;
        }
        .editor-wrapper {
          padding: 0.5rem;
        }
        .editor-toolbar:hover {
          opacity: 1;
        }
        form[data-theme="html"] .je-indented-panel {
          padding: 0 !important;
          margin: 0 !important;
          border: none !important;
        }
        .editor-wrapper .CodeMirror {
          height: 100%;
          min-height: unset;
        }
        .editor-wrapper .EasyMDEContainer {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
        .editor-wrapper .EasyMDEContainer .CodeMirror-scroll {
          min-height: 1000px;
        }
        .editor-toolbar button {
          box-shadow: none;
          color: #2c3e50 !important;
        }
        .editor-toolbar button:hover:not([disabled]):not(.icon),
        .editor-toolbar button:hover:not([disabled]):not(.icon) {
          box-shadow: none;
          background: #fcfcfc;
          border-color: #95a5a6;
        }
        .editor-toolbar button i {
          font-size: 17px;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
        }
        .editor-wrapper .cm-header-1 {
          font-size: 200%;
          line-height: 200%;
        }
        .editor-wrapper .cm-header-2 {
          font-size: 160%;
          line-height: 160%;
        }
        .editor-wrapper .cm-header-3 {
          font-size: 125%;
          line-height: 125%;
        }
        .editor-wrapper .cm-header-4 {
          font-size: 110%;
          line-height: 110%;
        }
        .editor-wrapper .cm-comment {
          background: rgba(0, 0, 0, 0.05);
          border-radius: 2px;
        }
        eox-jsonform form[data-theme="html"],
        eox-jsonform div[data-schemaid="root"],
        eox-jsonform div.je-indented-panel,
        eox-jsonform div.je-indented-panel > div,
        eox-jsonform div.je-indented-panel > div > div,
        eox-jsonform div.row,
        eox-jsonform div[data-schematype="string"],
        eox-jsonform div.form-control {
          height: 100%;
        }
        eox-jsonform div.form-control {
          display: flex;
          flex-direction: column;
        }
        eox-jsonform div.editor-toolbar,
        eox-jsonform div.editor-statusbar {
          flex-shrink: 1;
        }
        eox-jsonform .CodeMirror-sizer {
          padding-bottom: 100px !important;
        }
        eox-jsonform#storytelling-editor .je-form-input-label,
        eox-jsonform#storytelling-editor .je-object__controls {
          display: none !important;
        }
      </style>
    `}}uD=new WeakSet,O9e=function(n){const r=this.renderRoot.querySelector(".editor-wrapper"),i=this.storyId?`#${this.storyId}`:"",s=document.querySelector(`eox-storytelling${i}`);n.target.checked?(r.classList.remove("editor-opacity-none"),r.classList.remove("editor-hide"),s.setAttribute("show-editor","open")):(r.classList.add("editor-hide"),s.setAttribute("show-editor","close"))},tn(F9e,"properties",{markdown:{attribute:"markdown",type:String},storyId:{attribute:"story-id",type:String},showEditor:{attribute:"show-editor",type:String},isNavigation:{attribute:"markdown",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean}});customElements.define("eox-storytelling-editor",F9e);const Mg=Vu({html:!0});Mg.use(Djt).use(aHt);var hc,Jb,sE,cD,M9e;class hHt extends Zr{constructor(){super();gn(this,cD);gn(this,hc);gn(this,Jb,{});gn(this,sE,null);gs(this,hc,void 0),this.markdown="",this.markdownURL=null,this.unstyled=!1,this.noShadow=!1,this.disableAutosave=!1,this.showEditor=void 0,this.showNav=!1,this.nav=[],this.addCustomSectionIndex=-1,this.selectedCustomElement=null}static get properties(){return{markdown:{attribute:"markdown",type:String},markdownURL:{attribute:"markdown-url",type:String},nav:{state:!0,attribute:!1,type:Array},showNav:{attribute:"show-nav",type:Boolean},showEditor:{attribute:"show-editor",type:String},noShadow:{attribute:"no-shadow",type:Boolean},disableAutosave:{attribute:"disable-autosave",type:Boolean},unstyled:{type:Boolean},addCustomSectionIndex:{type:Number,state:!0},selectedCustomElement:{type:Object,state:!0}}}async updated(n){if(n.has("markdownURL")&&this.markdownURL&&(this.markdown=await lzt(this.markdownURL)||this.markdown,this.requestUpdate()),n.has("markdown")){this.markdown&&this.dispatchEvent(new CustomEvent("changed",{detail:this.markdown}));const r=Mg.render(this.markdown);if(mjt(Mg.attrs.sections,this),gs(this,Jb,Mg.config),typeof Gt(this,Jb).nav=="boolean"&&(this.showNav=Gt(this,Jb).nav),this.showNav&&(this.nav=Mg.nav),gs(this,hc,Gzt(vjt.sanitize(r,{CUSTOM_ELEMENT_HANDLING:ljt(Mg),ADD_TAGS:hzt}),Mg.sections,yn(this,cD,M9e).bind(this),this)),gs(this,hc,Yzt(Gt(this,hc),this.nav,this.showNav,this.showEditor,this)),this.showEditor!==void 0){const s=(this.shadowRoot||this).querySelector("eox-storytelling-editor"),o=s.querySelector("eox-jsonform");this.markdown!==(o==null?void 0:o.value.Story)&&(s.markdown=this.markdown)}this.requestUpdate()}n.has("nav")&&ajt(this,".navigation a")}handleSlotChange(){const n=this.shadowRoot.querySelector("slot");if(n){const r=n.assignedNodes({flatten:!0});this.markdown=r.map(i=>i.textContent?i.textContent:"").join(""),this.requestUpdate()}}async firstUpdated(){gs(this,sE,Q0(n=>{n.detail&&(this.markdown=n.detail.Story,this.requestUpdate())},1e3)),this.disableAutosave||Szt(this),ujt(),Gt(this,hc)===void 0&&await this.waitForHtmlInitialization(),INe(this)}async waitForHtmlInitialization(){const n=r=>new Promise(i=>setTimeout(i,r));for(;Gt(this,hc)===void 0;)await n(100)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const n=`${this.showEditor!==void 0?"editor-enabled":""} editor-${this.showEditor}`;return et`
      <slot class="slot-hide" @slotchange=${this.handleSlotChange}></slot>
      <style>
        :host { display: block; }
        .slot-hide { display: none; }
        ${!this.unstyled&&fHt}
        ${!this.unstyled&&gjt}
      </style>

      <div class="story-telling ${n}">
        <div>${qn(Gt(this,hc),()=>et`${Gt(this,hc)}`)}</div>
        ${qn(this.showEditor!==void 0,()=>et`
            <eox-storytelling-editor
              .isNavigation=${!!this.showNav}
              .storyId=${this.id}
              show-editor=${this.showEditor}
              @change=${Gt(this,sE)}
              .markdown=${this.markdown}
              .disableAutosave=${this.disableAutosave}
            ></eox-storytelling-editor>
          `)}
      </div>

      ${qn(this.addCustomSectionIndex>-1,()=>et`
          <div class="story-telling-custom-section-list">
            <div
              class="overlay-popup"
              @click=${()=>{this.addCustomSectionIndex=-1,this.selectedCustomElement=null,this.requestUpdate()}}
            ></div>
            <div class="story-telling-popup">
              ${qn(this.selectedCustomElement,()=>et`
                  <div class="story-telling-section-fields">
                    <div
                      class="story-telling-section-fields-overlay"
                      @click=${()=>{this.selectedCustomElement=null,this.requestUpdate()}}
                    ></div>
                    <div class="story-telling-section-fields-wrapper">
                      <div class="story-telling-section-fields-overflow">
                        <eox-jsonform
                          id="storytelling-editor-fields"
                          no-shadow
                          .schema=${this.selectedCustomElement.fields}
                        ></eox-jsonform>
                      </div>
                      <div class="story-telling-section-submit-wrapper">
                        <button
                          @click=${()=>nAe(this.markdown,this.addCustomSectionIndex,this.selectedCustomElement.markdown,this.selectedCustomElement.fields,!0,this)}
                        >
                          Add Section
                        </button>
                      </div>
                    </div>
                  </div>
                `)}
              <div class="story-telling-popup-wrapper">
                ${zzt.map(r=>et`
                    <div class="header">
                      <h4>${r.name}</h4>
                      <p>${r.elements.length}</p>
                    </div>
                    <hr />
                    <div class="grid-container">
                      ${r.elements.map(i=>et`<div
                            @click=${()=>nAe(this.markdown,this.addCustomSectionIndex,i.markdown,i.fields,!1,this)}
                            class="grid-item"
                          >
                            <icon id="${i.id}"></icon>
                            <p>${i.name}</p>
                            <style>
                              icon#${i.id}::before {
                                content: url("${i.icon}");
                              }
                            </style>
                          </div>`)}
                    </div>
                  `)}
              </div>
            </div>
          </div>
        `)}
    `}}hc=new WeakMap,Jb=new WeakMap,sE=new WeakMap,cD=new WeakSet,M9e=function(n){this.dispatchEvent(new CustomEvent("init",{detail:n}))};customElements.define("eox-storytelling",hHt);const SAe=t=>{let e;return typeof t=="string"?e=document.querySelector(t):e=t,e},pHt=`
:host {
  display: block;
}
`,mHt=`
button,
.button {
  /* TODO: why does this only work here and not from :root? */
  --primary-color: #004170;
  --primary-color-hover: #004170CC;
  --error-color: #FF5252;

  display: inline-flex;
  position: relative;
  align-items: center;
  color: #fff;
  border-width: 0;
  outline: none;
  border-radius: 4px;
  padding: 16px;
  height: 36px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 1.25px;                           
  font-weight: 500;
  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);
  transition-property: box-shadow, transform, opacity, background;
  transition-duration: 0.28s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

button:hover:not([disabled]):not(.icon),
.button:hover:not([disabled]):not(.icon) {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);
  background: var(--primary-color-hover);
}

button, button:active,
.button, .button:active {
  background: var(--primary-color);
}

button[disabled],
.button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}

button.block,
.button.block {
  display: block;
}

button.outline,
.button.outline {
  background: transparent;
  box-shadow: none;
  color: var(--primary-color);
  outline: 1px solid var(--primary-color);
}

button.outline:hover,
.button.outline:hover {
  background: transparent;
}

button.icon,
.button.icon {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  text-indent: -9999px;
}

button.icon-text,
.button.icon-text {
  text-indent: 26px;
}

button.icon-text.block,
.button.icon-text.block {
  text-indent: 20px;
}

button.icon:before, button.icon-text:before,
.button.icon:before, .button.icon-text:before {
  position: absolute;
  text-indent: 0;
  line-height: initial;
}

button.icon-text.block:before,
.button.icon-text.block:before {
  text-indent: -54px;
}

button.icon:before,
.button.icon:before {
  width: 24px;
  height: 24px;
  margin-right: 0;
}

button.icon-text:before,
.button.icon-text:before {
  width: 18px;
  height: 18px;
}

button.small,
.button.small {
  height: 28px;
  padding: 12.4px;
  font-size: .75rem;
}

button.smallest.icon, 
button.smallest.icon::before {
  height: 16px;
  width: 16px;
  padding: 0px;
}
`,gHt=`
* {
  font-family: Roboto, sans-serif;
}

main {
  text-align: center;
}

${mHt}

button.icon-text.play:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eplay%3C/title%3E%3Cpath d='M8,5.14V19.14L19,12.14L8,5.14Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon-text.pause:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Epause%3C/title%3E%3Cpath d='M14,19H18V5H14M6,19H10V5H6V19Z' fill='%23fff' /%3E%3C/svg%3E");
}

button.icon.previous:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-left-drop-circle%3C/title%3E%3Cpath d='M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M14,7L9,12L14,17V7Z' fill='%23004170' /%3E%3C/svg%3E");
}

button.icon.next:before {
  content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Earrow-right-drop-circle%3C/title%3E%3Cpath d='M2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12M10,17L15,12L10,7V17Z' fill='%23004170' /%3E%3C/svg%3E");
}
`;class yHt extends Zr{static get properties(){return{width:{type:Number},steps:{type:Array}}}constructor(){super(),this.width=0,this.steps=[],this.height=6,this.svgWidth=0,this._yearMarks=[],this._years=[],this._sliderTicks=[]}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize.bind(this))}disconnectedCallback(){window.removeEventListener("resize",this.handleResize.bind(this)),super.disconnectedCallback()}firstUpdated(){this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize()}updated(e){e.has("steps")&&(this.yearMarks=this.calculateYearMarks(),this.sliderTicks=this.calculateSliderTicks(),this.handleResize())}handleResize(){this.svgWidth=this.shadowRoot.querySelector("svg").clientWidth,this.height=this.shadowRoot.querySelector("svg").clientHeight}groupDatesByYear(){const e=[];return this.steps.forEach(n=>{const i=Lc(n).year();let s=e.find(o=>o.year===i);s||(s={year:i,dates:[]},e.push(s)),s.dates.push(n)}),e}preprocessDates(){const e=[];this.steps.forEach(n=>{const i=Lc(n).year();let s=e.find(o=>o.year===i);s||(s={year:i,ratio:0,dates:[]},e.push(s)),s.dates.push({date:n,isYearMarker:s.dates.length===0})});for(let n of e)n.ratio=n.dates.length/this.steps.length;return e}get sliderTicks(){return this._sliderTicks}set sliderTicks(e){this._sliderTicks=e,this.requestUpdate()}calculateYearBars(){return this._years.flatMap((r,i)=>{const s=this.steps.indexOf(r.dates[0].date)/(this.steps.length-1)*this.width,o=this.steps.indexOf(r.dates[r.dates.length-1].date)/(this.steps.length-1)*this.width,a=Math.max(0,o-s-2),l=[];return l.push(Py`
            <rect
              key=${i}
              x=${s+2/2} // Add half the spacing to the start position
              y="0"
              width=${a}
              height="6"
              fill="#7596A2"
            ></rect>
        `),a>=30&&l.push(Py`
                <text
                  key=${`label-${i}`}
                  x=${s+16}
                  y="26"
                  fill="#555"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${r.year}
                </text>
            `),l})}calculateIndividualTicks(){return this._years.flatMap((e,n)=>{const r=this.steps.length,i=Math.max(1,Math.floor(r/this.width));return e.dates.filter((s,o)=>o%i===0).map((s,o)=>{const l=this.steps.indexOf(s.date)/(this.steps.length-1)*this.width,u=[];return u.push(Py`
                <line
                  key=${n}-${o}
                  x1=${l}
                  y1="0"
                  x2=${l}
                  y2=${s.isYearMarker?12:6}
                  stroke=${s.isYearMarker?"#222":"#7596A2"}
                  stroke-width="1"
                ></line>
              `),s.isYearMarker&&this.density>.03&&this.density<.5&&n%2==0&&u.push(Py`
                  <text
                    key=${`label-${n}`}
                    x=${l+16}
                    y="30"
                    fill="#555"
                    font-size="14"
                    text-anchor="middle"
                  >
                    ${e.year}
                  </text>
                `),u})})}get density(){return this.steps.length/this.width}calculateSliderTicks(){if(this.density<=.5)return this.calculateIndividualTicks();if(this.density>.5&&this.density<10)return this.calculateYearBars();if(this.density>=10)return this.calculateDecadeBars()}calculateDecadeBars(){const r=this._years.reduce((s,o)=>{const a=Math.floor(o.year/10)*10;return s[a]||(s[a]=[]),s[a].push(...o.dates),s},{});return Object.keys(r).flatMap((s,o)=>{const a=this.steps.indexOf(r[s][0].date)/(this.steps.length-1)*this.width,l=this.steps.indexOf(r[s][r[s].length-1].date)/(this.steps.length-1)*this.width,u=Math.max(0,l-a-2),d=[];return d.push(Py`
            <rect
              key=${`decade-${o}`}
              x=${a+2/2}
              y="0"
              width=${u}
              height="6"
              fill="#555"
            ></rect>
        `),u>=30&&d.push(Py`
                <text
                  key=${`decade-label-${o}`}
                  x=${a+18}
                  y="26"
                  fill="#333"
                  font-size="14"
                  text-anchor="middle"
                >
                  ${s}
                </text>
            `),d})}get lines(){const e=this.numLines>this.width/2?this.width/2:this.numLines,n=this.width/(e-1);return Array.from({length:this.numLines},(r,i)=>i*n)}get numLines(){return this.steps?this.steps.length:0}get yearMarks(){return this._yearMarks}set yearMarks(e){this._yearMarks=e,this.requestUpdate()}get years(){return this._years}set years(e){this._years=e,this.requestUpdate()}calculateYearMarks(){this._years=this.preprocessDates(),this.lines.forEach((e,n)=>{Lc(this.steps[n]).year()})}isYearLine(e){return this._yearMarks.some(r=>Math.abs(r.position-e)<1)}render(){return et`
      <div class="fill-width" style="margin-top: 3px;">
        <svg
          style="width: ${this.width}px; height: 30px;"
          viewBox="-1 0 ${this.width+2} ${this.height}"
        >
          ${this.sliderTicks}
        </svg>
      </div>
    `}}customElements.define("eox-sliderticks",yHt);var ck={exports:{}},bHt=ck.exports,AAe;function vHt(){return AAe||(AAe=1,function(t,e){(function(n,r){t.exports=r()})(bHt,function(){return function(n,r,i){r.prototype.dayOfYear=function(s){var o=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})}(ck)),ck.exports}var xHt=vHt();const wHt=aa(xHt);var dk={exports:{}},_Ht=dk.exports,kAe;function EHt(){return kAe||(kAe=1,function(t,e){(function(n,r){t.exports=r()})(_Ht,function(){var n="day";return function(r,i,s){var o=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var d,c,f,h,p=o(this),g=(d=this.isoWeekYear(),c=this.$u,f=(c?s.utc:s)().year(d).startOf("year"),h=4-f.isoWeekday(),f.isoWeekday()>4&&(h+=7),f.add(h,n));return p.diff(g,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,d){var c=this.$utils(),f=!!c.u(d)||d;return c.p(u)==="isoweek"?f?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,d)}}})}(dk)),dk.exports}var CHt=EHt();const SHt=aa(CHt);Lc.extend(wHt);Lc.extend(SHt);class AHt extends Zr{static get properties(){return{controlProperty:{type:String,attribute:"control-property"},controlValues:{type:Array,attribute:"control-values"},for:{type:String},layer:{type:String},slider:{type:Boolean},_originalParams:{type:Object},disablePlay:{type:Boolean,attribute:"disable-play"},displayFormat:{type:String,attribute:"display-format"},currentStep:{type:String,attribute:"current-step"},_animationInterval:{state:!0},_controlSource:{state:!0},_isAnimationPlaying:{state:!0},_newStepIndex:{state:!0},_eoxMap:{state:!0},_width:{state:!0},unstyled:{type:Boolean}}}constructor(){super(),this.controlValues=[],this._newStepIndex=0,this.unstyled=!1,this.disablePlay=!1,this.slider=!1,this.for="eox-map",this.layer="",this.controlProperty=void 0,this._eoxMap=void 0,this._width=300,window.addEventListener("resize",()=>{this._width=this.clientWidth}),this.displayFormat=void 0}next(){this._updateStep(1)}previous(){this._updateStep(-1)}playAnimation(e){e?this._animationInterval=setInterval(()=>this._updateStep(1),500):clearInterval(this._animationInterval),this._isAnimationPlaying=e,this.requestUpdate()}setConfig(e){this.layer=e.layer??this.layer,this.controlProperty=e.controlProperty??this.controlProperty,this.controlValues=e.controlValues??this.controlValues,this.requestUpdate(),this._updateStep(0)}get currentStep(){return this.controlValues[this._newStepIndex]}set currentStep(e){const n=this.controlValues.findIndex(r=>r===e);n>-1?this._newStepIndex=n:console.error(`Unable to find step "${e}" in available times!`)}firstUpdated(){this.updateMap()}updated(e){e.has("for")&&this.updateMap()}updateMap(){const e=SAe(this.for);if(e){const n=e;this.eoxMap=n}}get eoxMap(){return this._eoxMap}set eoxMap(e){const n=this._eoxMap;this._eoxMap=e,this.requestUpdate("eoxMap",n)}_updateStep(e=1){var n;e&&(this._newStepIndex=this._newStepIndex+e,this._newStepIndex>this.controlValues.length-1&&(this._newStepIndex=0),this._newStepIndex<0&&(this._newStepIndex=this.controlValues.length-1),this.layer&&this.for&&((n=this._controlSource)==null||n.updateParams({[this.controlProperty]:this.controlValues[this._newStepIndex]})),this.requestUpdate(),this.dispatchEvent(new CustomEvent("stepchange",{detail:{currentStep:this.currentStep}})))}getFlatLayersArray(e){const n=[];n.push(...e);let r=n.filter(i=>i instanceof _k);for(;r.length;){const i=[];for(let s=0,o=r.length;s<o;s++){const a=r[s].getLayers().getArray();n.push(...a),i.push(...a.filter(l=>l instanceof _k))}r=i}return n}render(){if(this.layer&&this.for){const n=SAe(this.for).map;n.once("loadend",()=>{if(!this._originalParams){const i=this.getFlatLayersArray(n.getLayers().getArray()).find(s=>s.get("id")===this.layer);this._controlSource=i.getSource(),this._originalParams=this._controlSource.getParams()}})}return et`
      <style>
        ${pHt}
        ${!this.unstyled&&gHt}
      </style>
      <main>
        <div id="controls" part="controls">
          <button
            part="previous"
            class="icon previous"
            @click="${()=>this.previous()}"
          >
            <
          </button>
          <span part="current">
            ${this.displayFormat?Lc(this.controlValues[this._newStepIndex]).format(this.displayFormat):this.controlValues[this._newStepIndex]}
          </span>
          <button part="next" class="icon next" @click="${()=>this.next()}">
            >
          </button>
        </div>
        <div>
          ${this.disablePlay?ni:et`
                <button
                  part="play"
                  class="icon-text ${this._isAnimationPlaying?"pause":"play"}"
                  @click="${()=>this.playAnimation(!this._isAnimationPlaying)}"
                >
                  ${this._isAnimationPlaying?"Pause":"Play"}
                </button>
              `}
          ${this.slider?et`
                <div class="slider-col">
                  <tc-range-slider
                    data="${this.controlValues}"
                    part="slider"
                    value="${this.controlValues[this._newStepIndex]}"
                    style="display: inline-block;"
                    @change="${e=>this._updateStep(this.controlValues.findIndex(n=>n===e.detail.value)-this._newStepIndex)}"
                  ></tc-range-slider>

                  <eox-sliderticks
                    .width="${this._width}"
                    .steps="${this.controlValues}"
                  ></eox-sliderticks>
                </div>
              `:""}
        </div>
      </main>
    `}}customElements.define("eox-timecontrol",AHt);const I9e=(t,e)=>{var r;let{privateFields:n=!0}=e;return n||(r=t==null?void 0:t.modules)==null||r.forEach(i=>{var s;(s=i==null?void 0:i.declarations)==null||s.forEach(o=>{Object.keys(o).forEach(a=>{Array.isArray(o[a])&&(o[a]=o[a].filter(l=>{var u;return!((u=l.privacy)!=null&&u.includes("private"))}))})})}),xze(t)};I9e(oJe,{privateFields:!1});const kHt={parameters:{docs:{toc:!0,page:aJe,source:{transform:(t,e)=>{const n=e.undecoratedStoryFn(e);let r;const i={};return n.strings.map((s,o)=>{var d,c;const a=s.match(new RegExp("(?<=<eox-).*?((?=>| )|$)","gim"));a&&(r=`eox-${a}`);const l=(c=(d=s.match(new RegExp("(?<=\\.).*?(?==)","gim")))==null?void 0:d[0])==null?void 0:c.replaceAll(" ",""),u=n.values[o];l&&u&&(i[r]||(i[r]={}),i[r][l]=u)}).filter(s=>s),Object.keys(i).forEach(s=>{t=t.replace(`<${s}`,`<${s}
  ${Object.keys(i[s]).map((o,a)=>`.${o}='\${${typeof i[s][o]=="string"?i[s][o]:JSON.stringify(i[s][o])}}'`).join(`
  `)}
  `)}),t}}}}},HGt=Object.freeze(Object.defineProperty({__proto__:null,default:kHt,setCustomElementsManifestWithOptions:I9e},Symbol.toStringTag,{value:"Module"}));export{QHt as L,eGt as a,HGt as p};
