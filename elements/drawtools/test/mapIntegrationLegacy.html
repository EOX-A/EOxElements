<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
      }
      #map {
        width: 100%;
        height: 400px;
      }
      eox-drawtools {
        position: absolute;
        top: 0;
        right: 0;
        background: white;
      }
    </style>
    <script type="module" defer src="../../map/dist/eox-map.js"></script>
    <script type="module" defer src="../dist/eox-drawtools.js"></script>
  </head>
  <body>
    <div id="map"></div>
    <eox-drawtools> Default slot content </eox-drawtools>
    <p>Drawn features: <span style="line-break: anywhere"></span></p>
    <script type="module">
      import Map from "https://cdn.skypack.dev/ol/Map.js";
      import OSM from "https://cdn.skypack.dev/ol/source/OSM.js";
      import TileLayer from "https://cdn.skypack.dev/ol/layer/Tile.js";
      import View from "https://cdn.skypack.dev/ol/View.js";
      import VectorLayer from "https://cdn.skypack.dev/ol/layer/Vector.js";
      import VectorSource from "https://cdn.skypack.dev/ol/source/Vector.js";

      const map = new Map({
        target: "map",
        layers: [
          new TileLayer({
            source: new OSM(),
          }),
          new VectorLayer({
            source: new VectorSource(),
            id: "draw_layer",
          }),
        ],
        view: new View({
          center: [0, 0],
          zoom: 2,
        }),
        controls: [],
      });
      const eoxDrawTools = document.querySelector("eox-drawtools");
      setTimeout(() => {
        eoxDrawTools.attachTo(map, "draw_layer");
      }, 500);
      eoxDrawTools.addEventListener("drawupdate", (evt) => {
        document.querySelector("span").innerHTML = JSON.stringify(
          evt.detail.map((f) => f.getGeometry().flatCoordinates)
        );
      });
    </script>
  </body>
</html>
