<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>eox-timecontrol examples</title>
    <style>
      eox-map {
        width: 400px;
        height: 300px;
      }
    </style>
  </head>
  <body>
    <p>Basic time control for WMS layer</p>
    <eox-map zoom="3" center="[1000000, 6000000]"></eox-map>
    <eox-timecontrol
      for="eox-map"
      layer="AWS_NO2-VISUALISATION"
      animation-property="TIME"
      animation-values='[
        "2023-01-16",
        "2023-01-23",
        "2023-01-30",
        "2023-02-06",
        "2023-02-13",
        "2023-02-27",
        "2023-03-06",
        "2023-03-13",
        "2023-03-20",
        "2023-03-27",
        "2023-04-03",
        "2023-04-10",
        "2023-04-17",
        "2023-04-24"
      ]'
    ></eox-timecontrol>
    <p>
      Time control for WMS layer with custom url function (example:
      <small
        ><code>url.replace("TIME=2023-01-16", "time=2023-04-24");</code></small
      >)
    </p>
    <eox-map class="custom" zoom="3" center="[1000000, 6000000]"></eox-map>
    <eox-timecontrol
      class="custom"
      for="eox-map.custom"
      layer="AWS_NO2-VISUALISATION"
    ></eox-timecontrol>
    <script type="module">
      import "https://unpkg.com/@eox/map@latest";
      import "https://unpkg.com/@eox/timecontrol@latest";

      const layers = {
        version: 8,
        name: "",
        sources: {
          "AWS_NO2-VISUALISATION": {
            type: "raster",
            tileSize: 512,
            tiles: [
              "https://services.sentinel-hub.com/ogc/wms/0635c213-17a1-48ee-aef7-9d1731695a54?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&layers=AWS_NO2-VISUALISATION&format=image%2Fpng&WIDTH=512&HEIGHT=512&CRS=EPSG%3A3857&STYLES=&BBOX={bbox-epsg-3857}&TIME=2023-01-16",
            ],
          },
        },
        layers: [
          {
            id: "AWS_NO2-VISUALISATION",
            type: "raster",
            source: "AWS_NO2-VISUALISATION",
          },
        ],
      };

      setTimeout(() => {
        const eoxMaps = document.querySelectorAll("eox-map");
        eoxMaps.forEach((map) => map.setLayers(layers));
        document.querySelector("eox-timecontrol.custom").urlFunction = (
          url
        ) => {
          // do something with the url
          return url.replace("TIME=2023-01-16", "time=2023-04-24");
        };
      });
    </script>
  </body>
</html>
